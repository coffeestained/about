/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../intl.js";import{b as t}from"../chunks/domUtils.js";import s from"../core/Evented.js";import{debounce as r,throwIfNotAbortError as o,eachAlways as n,i as l,o as i}from"../core/promiseUtils.js";import a from"../core/Handles.js";import{clone as c}from"../core/lang.js";import{L as $}from"../chunks/Logger.js";import{d}from"../chunks/maybe.js";import{EsriPromiseMixin as h}from"../core/Promise.js";import{watch as p,when as m,initial as u}from"../core/reactiveUtils.js";import{g as f}from"../chunks/uuid.js";import{property as g}from"../core/accessorSupport/decorators/property.js";import{cast as y}from"../core/accessorSupport/decorators/cast.js";import{subclass as v}from"../core/accessorSupport/decorators/subclass.js";import{r as b}from"../chunks/tracking.js";import{S as w}from"../chunks/watch.js";import{d as N}from"../chunks/projector.js";import{g as j}from"../chunks/assets.js";import{makeAbsolute as k}from"../core/urlUtils.js";import{i as _,p as R,W as S}from"../chunks/jsxWidgetSupport.js";import{g as E,a as T,d as C,c as L,b as x}from"../chunks/widgetUtils.js";import{o as P}from"../chunks/locale.js";import{f as A}from"../chunks/messages.js";import"../chunks/number2.js";import"../chunks/jsonMap.js";import"../chunks/object.js";import"../chunks/string.js";import"../request.js";import"../config.js";import"../kernel.js";import"../core/Error.js";import"../core/Accessor.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/metadata.js";import"../chunks/ArrayPool.js";import"../chunks/ensureType.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../core/Collection.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";const O={handleInterceptedEvent:(e,t,s,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||s,[r]))},M={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,s)=>{e.style[t]=s}},F=(e,t,s=!1)=>{let r=e;return t.forEach(((e,o)=>{const n=r?.children?(l=t=>t.domNode===e,r.children.find(l)):void 0;var l;s&&!n&&o!==t.length-1||(r=n)})),r};let U,B,H,I=!1,D=!1,W=!1,z=!1,V=null,q=!1;const G="undefined"!=typeof window?window:{},J=G.document||{head:{}},K=G.HTMLElement||class{},Q={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,s,r)=>e.addEventListener(t,s,r),rel:(e,t,s,r)=>e.removeEventListener(t,s,r),ce:(e,t)=>new CustomEvent(e,t)},X=(()=>{let e=!1;try{J.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Y=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),Z=(e,t,s,r)=>{s&&s.map((([s,r,o])=>{const n=te(e,s),l=ee(t,o),i=se(s);Q.ael(n,r,l,i),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Q.rel(n,r,l,i)))}))},ee=(e,t)=>s=>{try{e.$hostElement$[t](s)}catch(e){Ke(e)}},te=(e,t)=>4&t?J:8&t?G:16&t?J.body:e,se=e=>X?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),re="http://www.w3.org/1999/xlink",oe=new WeakMap,ne=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),le={},ie=e=>"object"==(e=typeof e)||"function"===e,ae=(e,t,...s)=>{let r=null,o=null,n=null,l=!1,i=!1,a=[];const c=t=>{for(let s=0;s<t.length;s++)r=t[s],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((l="function"!=typeof e&&!ie(r))&&(r=String(r)),l&&i?a[a.length-1].$text$+=r:a.push(l?ce(null,r):r),i=l)};if(c(s),t&&(t.key&&(o=t.key),t.name&&(n=t.name),1)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if("function"==typeof e)return e(null===t?{}:t,a,de);const $=ce(e,null);return $.$attrs$=t,a.length>0&&($.$children$=a),$.$key$=o,$.$name$=n,$},ce=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),$e={},de={forEach:(e,t)=>e.map(he).forEach(t),map:(e,t)=>e.map(he).map(t).map(pe)},he=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),pe=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),ae(e.vtag,t,...e.vchildren||[])}const t=ce(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},me=(e,t,s,r,o,n)=>{if(s!==r){let l=Je(e,t),i=t.toLowerCase();if("class"===t){const t=e.classList,o=fe(s),n=fe(r);t.remove(...o.filter((e=>e&&!n.includes(e)))),t.add(...n.filter((e=>e&&!o.includes(e))))}else if("style"===t){for(const t in s)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)s&&r[t]===s[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const a=ie(r);if((l||a&&null!==r)&&!o)try{if(e.tagName.includes("-"))e[t]=r;else{let o=null==r?"":r;"list"===t?l=!1:null!=s&&e[t]==o||(e[t]=o)}}catch(e){}let c=!1;i!==(i=i.replace(/^xlink\:?/,""))&&(t=i,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(re,t):e.removeAttribute(t)):(!l||4&n||o)&&!a&&(r=!0===r?"":r,c?e.setAttributeNS(re,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):Je(G,i)?i.slice(2):i[2]+t.slice(3),s&&Q.rel(e,t,s,!1),r&&Q.ael(e,t,r,!1)}},ue=/\s/,fe=e=>e?e.split(ue):[],ge=(e,t,s,r)=>{const o=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||le,l=t.$attrs$||le;for(r in n)r in l||me(o,r,n[r],void 0,s,t.$flags$);for(r in l)me(o,r,n[r],l[r],s,t.$flags$)},ye=(e,t,s,r)=>{let o,n,l,i=t.$children$[s],a=0;if(I||(W=!0,"slot"===i.$tag$&&(U&&r.classList.add(U+"-s"),i.$flags$|=i.$children$?2:1)),null!==i.$text$)o=i.$elm$=J.createTextNode(i.$text$);else if(1&i.$flags$)o=i.$elm$=J.createTextNode("");else{if(z||(z="svg"===i.$tag$),o=i.$elm$=J.createElementNS(z?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&i.$flags$?"slot-fb":i.$tag$),z&&"foreignObject"===i.$tag$&&(z=!1),ge(null,i,z),null!=U&&o["s-si"]!==U&&o.classList.add(o["s-si"]=U),i.$children$)for(a=0;a<i.$children$.length;++a)n=ye(e,i,a,o),n&&o.appendChild(n);"svg"===i.$tag$?z=!1:"foreignObject"===o.tagName&&(z=!0)}return o["s-hn"]=H,3&i.$flags$&&(o["s-sr"]=!0,o["s-cr"]=B,o["s-sn"]=i.$name$||"",l=e&&e.$children$&&e.$children$[s],l&&l.$tag$===i.$tag$&&e.$elm$&&ve(e.$elm$,!1)),o},ve=(e,t)=>{Q.$flags$|=1;const s=e.childNodes;for(let e=s.length-1;e>=0;e--){const r=s[e];r["s-hn"]!==H&&r["s-ol"]&&(ke(r).insertBefore(r,je(r)),r["s-ol"].remove(),r["s-ol"]=void 0,W=!0),t&&ve(r,t)}Q.$flags$&=-2},be=(e,t,s,r,o,n)=>{let l,i=e["s-cr"]&&e["s-cr"].parentNode||e;for(i.shadowRoot&&i.tagName===H&&(i=i.shadowRoot);o<=n;++o)r[o]&&(l=ye(null,s,o,e),l&&(r[o].$elm$=l,i.insertBefore(l,je(t))))},we=(e,t,s,r,o)=>{for(;t<=s;++t)(r=e[t])&&(o=r.$elm$,Ce(r),D=!0,o["s-ol"]?o["s-ol"].remove():ve(o,!0),o.remove())},Ne=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),je=e=>e&&e["s-ol"]||e,ke=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,_e=(e,t)=>{const s=t.$elm$=e.$elm$,r=e.$children$,o=t.$children$,n=t.$tag$,l=t.$text$;let i;null===l?(z="svg"===n||"foreignObject"!==n&&z,"slot"===n||ge(e,t,z),null!==r&&null!==o?((e,t,s,r)=>{let o,n,l=0,i=0,a=0,c=0,$=t.length-1,d=t[0],h=t[$],p=r.length-1,m=r[0],u=r[p];for(;l<=$&&i<=p;)if(null==d)d=t[++l];else if(null==h)h=t[--$];else if(null==m)m=r[++i];else if(null==u)u=r[--p];else if(Ne(d,m))_e(d,m),d=t[++l],m=r[++i];else if(Ne(h,u))_e(h,u),h=t[--$],u=r[--p];else if(Ne(d,u))"slot"!==d.$tag$&&"slot"!==u.$tag$||ve(d.$elm$.parentNode,!1),_e(d,u),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++l],u=r[--p];else if(Ne(h,m))"slot"!==d.$tag$&&"slot"!==u.$tag$||ve(h.$elm$.parentNode,!1),_e(h,m),e.insertBefore(h.$elm$,d.$elm$),h=t[--$],m=r[++i];else{for(a=-1,c=l;c<=$;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){a=c;break}a>=0?(n=t[a],n.$tag$!==m.$tag$?o=ye(t&&t[i],s,a,e):(_e(n,m),t[a]=void 0,o=n.$elm$),m=r[++i]):(o=ye(t&&t[i],s,i,e),m=r[++i]),o&&ke(d.$elm$).insertBefore(o,je(d.$elm$))}l>$?be(e,null==r[p+1]?null:r[p+1].$elm$,s,r,i,p):i>p&&we(t,l,$)})(s,r,t,o):null!==o?(null!==e.$text$&&(s.textContent=""),be(s,null,t,o,0,o.length-1)):null!==r&&we(r,0,r.length-1),z&&"svg"===n&&(z=!1)):(i=s["s-cr"])?i.parentNode.textContent=l:e.$text$!==l&&(s.data=l)},Re=e=>{let t,s,r,o,n,l,i=e.childNodes;for(s=0,r=i.length;s<r;s++)if(t=i[s],1===t.nodeType){if(t["s-sr"])for(n=t["s-sn"],t.hidden=!1,o=0;o<r;o++)if(l=i[o].nodeType,i[o]["s-hn"]!==t["s-hn"]||""!==n){if(1===l&&n===i[o].getAttribute("slot")){t.hidden=!0;break}}else if(1===l||3===l&&""!==i[o].textContent.trim()){t.hidden=!0;break}Re(t)}},Se=[],Ee=e=>{let t,s,r,o,n,l,i=0,a=e.childNodes,c=a.length;for(;i<c;i++){if(t=a[i],t["s-sr"]&&(s=t["s-cr"])&&s.parentNode)for(r=s.parentNode.childNodes,o=t["s-sn"],l=r.length-1;l>=0;l--)s=r[l],s["s-cn"]||s["s-nr"]||s["s-hn"]===t["s-hn"]||(Te(s,o)?(n=Se.find((e=>e.$nodeToRelocate$===s)),D=!0,s["s-sn"]=s["s-sn"]||o,n?n.$slotRefNode$=t:Se.push({$slotRefNode$:t,$nodeToRelocate$:s}),s["s-sr"]&&Se.map((e=>{Te(e.$nodeToRelocate$,s["s-sn"])&&(n=Se.find((e=>e.$nodeToRelocate$===s)),n&&!e.$slotRefNode$&&(e.$slotRefNode$=n.$slotRefNode$))}))):Se.some((e=>e.$nodeToRelocate$===s))||Se.push({$nodeToRelocate$:s}));1===t.nodeType&&Ee(t)}},Te=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Ce=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Ce)},Le=(e,t,s)=>{const r=e;return{emit:e=>xe(r,t,{bubbles:!!(4&s),composed:!!(2&s),cancelable:!!(1&s),detail:e})}},xe=(e,t,s)=>{const r=Q.ce(t,s);return e.dispatchEvent(r),r},Pe=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return ot((()=>Ae(e,t)))},Ae=(e,t)=>{const s=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),o=s;let n;return n=Be(o,t?"componentWillLoad":"componentWillUpdate"),n=He(n,(()=>Be(o,"componentWillRender"))),r(),He(n,(()=>Oe(e,o,t)))},Oe=async(e,t,s)=>{const r=e.$hostElement$,o=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],s&&(e=>{const t=e.$cmpMeta$,s=e.$hostElement$,r=t.$flags$,o=(t.$tagName$,()=>{}),n=((e,t,s,r)=>{let o=ne(t,s),n=Qe.get(o);if(e=11===e.nodeType?e:J,n)if("string"==typeof n){e=e.head||e;let t,s=oe.get(e);s||oe.set(e,s=new Set),s.has(o)||(t=J.createElement("style"),t.innerHTML=n,e.insertBefore(t,e.querySelector("link")),s&&s.add(o))}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return o})(s.shadowRoot?s.shadowRoot:s.getRootNode(),t,e.$modeName$);10&r&&(s["s-sc"]=n,s.classList.add(n+"-h"),2&r&&s.classList.add(n+"-s")),o()})(e);const n=(e.$cmpMeta$.$tagName$,()=>{});Me(e,t,r),n(),o(),Fe(e)},Me=(e,t,s)=>{try{V=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const s=e.$hostElement$,r=e.$cmpMeta$,o=e.$vnode$||ce(null,null),n=(l=t)&&l.$tag$===$e?t:ae(null,null,t);var l;if(H=s.tagName,r.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>n.$attrs$[t]=s[e]))),n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=o.$elm$=s.shadowRoot||s,U=s["s-sc"],B=s["s-cr"],I=0!=(1&r.$flags$),D=!1,_e(o,n),Q.$flags$|=1,W){let e,t,s,r,o,l;Ee(n.$elm$);let i=0;for(;i<Se.length;i++)e=Se[i],t=e.$nodeToRelocate$,t["s-ol"]||(s=J.createTextNode(""),s["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=s,t));for(i=0;i<Se.length;i++)if(e=Se[i],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,o=e.$slotRefNode$.nextSibling,s=t["s-ol"];s=s.previousSibling;)if(l=s["s-nr"],l&&l["s-sn"]===t["s-sn"]&&r===l.parentNode&&(l=l.nextSibling,!l||!l["s-nr"])){o=l;break}(!o&&r!==t.parentNode||t.nextSibling!==o)&&t!==o&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,o))}else 1===t.nodeType&&(t.hidden=!0)}D&&Re(n.$elm$),Q.$flags$&=-2,Se.length=0})(e,t)}catch(t){Ke(t,e.$hostElement$)}return V=null,null},Fe=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Be(t,"componentDidRender"),64&e.$flags$?Be(t,"componentDidUpdate"):(e.$flags$|=64,Be(t,"componentDidLoad"))},Ue=e=>{{const t=qe(e),s=t.$hostElement$.isConnected;return s&&2==(18&t.$flags$)&&Pe(t,!1),s}},Be=(e,t,s)=>{if(e&&e[t])try{return e[t](s)}catch(e){Ke(e)}},He=(e,t)=>e&&e.then?e.then(t):t(),Ie=(e,t,s)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),r=e.prototype;s.map((([e,[s]])=>{(31&s||32&s)&&Object.defineProperty(r,e,{get(){return t=e,qe(this).$instanceValues$.get(t);var t},set(s){((e,t,s,r)=>{const o=qe(e),n=e,l=o.$instanceValues$.get(t),i=o.$flags$,a=n;var c,$;c=s,$=r.$members$[t][0],s=null==c||ie(c)?c:4&$?"false"!==c&&(""===c||!!c):2&$?parseFloat(c):1&$?String(c):c;const d=Number.isNaN(l)&&Number.isNaN(s);if(s!==l&&!d){if(o.$instanceValues$.set(t,s),r.$watchers$&&128&i){const e=r.$watchers$[t];e&&e.map((e=>{try{a[e](s,l,t)}catch(e){Ke(e,n)}}))}if(2==(18&i)){if(a.componentShouldUpdate&&!1===a.componentShouldUpdate(s,l,t))return;Pe(o,!1)}}})(this,e,s,t)},configurable:!0,enumerable:!0})}));{const o=new Map;r.attributeChangedCallback=function(e,t,s){Q.jmp((()=>{const t=o.get(e);if(this.hasOwnProperty(t))s=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==s)return;this[t]=(null!==s||"boolean"!=typeof this[t])&&s}))},e.observedAttributes=s.filter((([e,t])=>15&t[0])).map((([e,s])=>{const r=s[1]||e;return o.set(r,e),512&s[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},De=(e,t)=>{const s={$flags$:t[0],$tagName$:t[1]};s.$members$=t[2],s.$listeners$=t[3],s.$watchers$=e.$watchers$,s.$attrsToReflect$=[];const r=e.prototype.connectedCallback,o=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Ge(this,s)},connectedCallback(){(e=>{if(0==(1&Q.$flags$)){const t=qe(e),s=t.$cmpMeta$,r=(s.$tagName$,()=>{});1&t.$flags$?(Z(e,t,s.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&s.$flags$&&(e=>{const t=e["s-cr"]=J.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),s.$members$&&Object.entries(s.$members$).map((([t,[s]])=>{if(31&s&&e.hasOwnProperty(t)){const s=e[t];delete e[t],e[t]=s}})),(async(e,t,s,r,o)=>{if(0==(32&t.$flags$)&&(o=e.constructor,t.$flags$|=32,customElements.whenDefined(s.$tagName$).then((()=>t.$flags$|=128)),o.style)){let r=o.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>Xe.map((t=>t(e))).find((e=>!!e)))(e)]);const n=ne(s,t.$modeName$);if(!Qe.has(n)){const e=(s.$tagName$,()=>{});((e,t,s)=>{let r=Qe.get(e);Y&&s?(r=r||new CSSStyleSheet,r.replace(t)):r=t,Qe.set(e,r)})(n,r,!!(1&s.$flags$)),e()}}t.$ancestorComponent$,Pe(t,!0)})(e,t,s)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&Q.$flags$)){const t=qe(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),o&&o.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)})}}),e.is=s.$tagName$,Ie(e,s)},We=e=>{const t=new URL(e,Q.$resourcesUrl$);return t.origin!==G.location.origin?t.href:t.pathname},ze=(e,t)=>t,Ve=new WeakMap,qe=e=>Ve.get(e),Ge=(e,t)=>{const s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Z(e,s,t.$listeners$),Ve.set(e,s)},Je=(e,t)=>t in e,Ke=(e,t)=>(0,console.error)(e,t),Qe=new Map,Xe=[],Ye=[],Ze=[],et=(e,t)=>s=>{e.push(s),q||(q=!0,t&&4&Q.$flags$?rt(st):Q.raf(st))},tt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){Ke(e)}e.length=0},st=()=>{tt(Ye),tt(Ze),(q=Ye.length>0)&&Q.raf(st)},rt=e=>Promise.resolve(void 0).then(e),ot=et(Ze,!0),nt={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1};let lt;lt="esri/widgets/support/components/assets";const it=new Set,at=$.getLogger("esri.widgets.Widget");let ct=0;function $t(e,t){for(const s in t)null!=e[s]&&("object"==typeof e[s]&&"object"==typeof t[s]?$t(e[s],t[s]):e[s]=t[s]);return e}const dt=(e=>{let t;const s={...O,...e},r=(e=>({...M,...e}))(s),o=r.performanceLogger;let n,l=!0,i=!1;const a=[],c=[],$=(e,n,l)=>{let i;r.eventHandlerInterceptor=(e,r,n,l)=>function(e){let r;o("domEvent",e);const n=((e,t)=>{const s=[];for(;e&&e!==t;)s.push(e),e=e.parentNode;return s})(e.currentTarget,i.domNode),l=n.some((e=>customElements.get(e?.tagName?.toLowerCase())));if(e.eventPhase!==Event.CAPTURING_PHASE&&l){const t=e.composedPath(),s=t.slice(t.indexOf(e.currentTarget),t.indexOf(i.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();r=F(i.getLastRender(),s,!0)}else n.reverse(),r=F(i.getLastRender(),n);let a;return r&&(a=s.handleInterceptedEvent(t,r,this,e)),o("domEventProcessed",e),a},s.postProcessProjectionOptions?.(r);const $=l();i=e(n,$,r),a.push(i),c.push(l),s.afterFirstVNodeRendered&&s.afterFirstVNodeRendered(i,$)};let d=()=>{if(n=void 0,l){l=!1,o("renderStart",void 0);for(let e=0;e<a.length;e++){const t=c[e]();o("rendered",void 0),a[e].update(t),o("patched",void 0)}o("renderDone",void 0),l=!0}};return s.modifyDoRenderImplementation&&(d=s.modifyDoRenderImplementation(d,a,c)),t={renderNow:d,scheduleRender:()=>{n||i||(n=requestAnimationFrame(d))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),i=!0},resume:()=>{i=!1,l=!0,t.scheduleRender()},append:(e,t)=>{$(N.append,e,t)},insertBefore:(e,t)=>{$(N.insertBefore,e,t)},merge:(e,t)=>{$(N.merge,e,t)},replace:(e,t)=>{$(N.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),a.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,s=/capture$/i;e.eventHandlerInterceptor=(e,r,o,n)=>{const l=t(e,r,o,n),i=s.test(e);if(!((e=e.replace(s,"")).toLowerCase()in o)||i){const t=e[2].toLowerCase()+e.slice(3),s=e=>l.call(o,e);o.addEventListener(t,s,i);const r=()=>o.removeEventListener(t,s,i),a=n.afterRemoved;n.afterRemoved=e=>{a?.(e),r()}}return l}},handleInterceptedEvent(e,t,s,r){const{eventPhase:o,type:n}=r,l=o===Event.CAPTURING_PHASE;let i=`on${n}${l?"capture":""}`;const a=t.properties;(i in a||(i=`on${n[0].toUpperCase()}${n.slice(1)}${l?"Capture":""}`,i in a))&&(x(),e.scheduleRender(),a[i].call(a.bind||s,r))}});let ht=!1,pt=class extends(h(s.EventedAccessor)){constructor(e,t){var s;super(e,t),this._attached=!1,this._internalHandles=new a,this._projector=dt,this._readyForTrueRender=!1,this.domNode=null,this.iconClass="esri-icon-checkbox-unchecked",this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=r((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await n(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let s=await A(e);this.uiStrings&&Object.keys(this.uiStrings)&&(s=$t(c(s),this.uiStrings)),this[t]=s})));for(const t of e)t.error&&at.error("widget-intl:locale-error",this.declaredClass,t.error)}await this.loadLocale()})),s=k(j("esri/widgets/support/components/assets")),Q.$resourcesUrl$=s;const o="esri-widget-uid-"+f(),l=this.render.bind(this);this._trackingTarget=new w((()=>this.scheduleRender()));const i=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:o,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const e=l();let{properties:t}=e;t||(e.properties=t={});let{key:s,styles:r}=t;s||(t.key=o),r||(t.styles=r={}),r.display||(r.display="");let n=0;return e.children?.forEach((e=>{if(_(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${n++}`)})),R(this,e)};var $;this.render=()=>{if(ht)return i();let e=E(this);if(e)return e;this._trackingTarget.clear(),ht=!0;try{e=b(this._trackingTarget,i)}catch(e){throw console.error(e),e}finally{ht=!1}return T(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize()}))),$=this._resourcesFetch,it.add($),$.finally((()=>it.delete($)))}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch(o)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(d(this._trackingTarget),d(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,C(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return t(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+ct++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(C(this),this._projector.scheduleRender())}classes(...e){return L.apply(this,e)}renderNow(){C(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add(p((()=>this.viewModel),((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&l(e)&&this._internalHandles.add(this._delegatedEventNames.map((t=>i(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),u)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(o),this.scheduleRender()};this._internalHandles.add([P(e),p((()=>this.uiStrings),e),m((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};pt[S]=!0,e([g()],pt.prototype,"_readyForTrueRender",void 0),e([g({value:null})],pt.prototype,"container",null),e([y("container")],pt.prototype,"castContainer",null),e([g({aliasOf:"container"})],pt.prototype,"domNode",void 0),e([g()],pt.prototype,"iconClass",void 0),e([g()],pt.prototype,"id",null),e([g()],pt.prototype,"label",void 0),e([g()],pt.prototype,"renderable",null),e([g()],pt.prototype,"uiStrings",void 0),e([g()],pt.prototype,"viewModel",void 0),e([g()],pt.prototype,"visible",void 0),e([g()],pt.prototype,"key",void 0),e([g()],pt.prototype,"children",void 0),e([g()],pt.prototype,"afterCreate",void 0),e([g()],pt.prototype,"afterUpdate",void 0),e([g()],pt.prototype,"afterRemoved",void 0),pt=e([v("esri.widgets.Widget")],pt);const mt=pt;export{nt as B,ze as F,K as H,$e as a,Le as c,mt as default,Ue as f,We as g,ae as h,De as p};
