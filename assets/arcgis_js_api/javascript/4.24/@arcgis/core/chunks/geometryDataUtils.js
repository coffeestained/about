/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{s as t,o as n,b as r,R as e,h as s}from"./mathUtils.js";import{a}from"./triangle.js";let i=(()=>{const t=new Uint32Array(131072);for(let n=0;n<t.length;++n)t[n]=n;return t})();const o=new Uint16Array([0]),l=(()=>{const t=new Uint16Array(65536);for(let n=0;n<t.length;++n)t[n]=n;return t})();function f(t){if(1===t)return o;if(t<l.length)return new Uint16Array(l.buffer,0,t);if(t>i.length){const n=Math.max(2*i.length,t);i=new Uint32Array(n);for(let t=0;t<i.length;t++)i[t]=t}return new Uint32Array(i.buffer,0,t)}function c(t){if(1===t)return new Uint16Array(o);if(t<l.length)return new Uint16Array(l.slice(0,t));if(t>i.length){const n=new Uint32Array(t);for(let t=0;t<n.length;t++)n[t]=t;return n}return new Uint32Array(i.slice(0,t))}function u(e,s,i){if(!e)return!1;const{size:o,data:l}=e;t(i,0,0,0),t(A,0,0,0);let f=0,c=0;for(let e=0;e<s.length-2;e+=3){const u=s[e+0]*o,h=s[e+1]*o,g=s[e+2]*o;t(U,l[u+0],l[u+1],l[u+2]),t(w,l[h+0],l[h+1],l[h+2]),t(y,l[g+0],l[g+1],l[g+2]);const m=a(U,w,y);m?(r(U,U,w),r(U,U,y),n(U,U,1/3*m),r(i,i,U),f+=m):(r(A,A,U),r(A,A,w),r(A,A,y),c+=3)}return!(0===c&&0===f||(0!==f?(n(i,i,1/f),0):0===c||(n(i,A,1/c),0)))}function h(r,e,s){if(!r||!e)return!1;const{size:a,data:i}=r;t(s,0,0,0);let o=-1,l=0;for(let t=0;t<e.length;t++){const n=e[t]*a;o!==n&&(s[0]+=i[n+0],s[1]+=i[n+1],s[2]+=i[n+2],l++),o=n}return l>1&&n(s,s,1/l),l>0}function g(s,a,i,o){if(!s)return!1;const{size:l,data:f}=s;t(o,0,0,0),t(A,0,0,0);let c=0,u=0;const h=a?a.length-1:f.length/l-1,g=h+(i?2:0);for(let t=0;t<g;t+=2){const s=t<h?t:h,i=t<h?t+1:0,g=(a?a[s]:s)*l,y=(a?a[i]:i)*l;U[0]=f[g+0],U[1]=f[g+1],U[2]=f[g+2],w[0]=f[y+0],w[1]=f[y+1],w[2]=f[y+2],n(U,r(U,U,w),.5);const m=e(U,w);m>0?(r(o,o,n(U,U,m)),c+=m):(r(A,A,U),u++)}return 0!==c?(n(o,o,1/c),!0):0!==u&&(n(o,A,1/u),!0)}const U=s(),w=s(),y=s(),A=s();export{h as a,g as b,u as c,c as d,f as g};
