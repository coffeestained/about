/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{q as t,h as r,j as n,a as o,d as i,o as e,y as c,b as s,c as a,p as u}from"./mathUtils.js";import{O as g,s as f}from"./vectorStacks.js";function v(n){return n?{origin:t(n.origin),vector:t(n.vector)}:{origin:r(),vector:r()}}function p(t,r=v()){return h(t.origin,t.vector,r)}function h(t,r,n=v()){return o(n.origin,t),o(n.vector,r),n}function b(t,r,n=v()){return o(n.origin,t),i(n.vector,r,t),n}function l(t,r){const o=i(f.get(),r,t.origin),c=n(t.vector,o),s=n(t.vector,t.vector),u=a(c/s,0,1),g=i(f.get(),e(f.get(),t.vector,u),o);return n(g,g)}function M(t,r,n){return A(t,r,0,1,n)}function d(t,r,n){return s(n,t.origin,e(n,t.vector,r))}function A(t,r,o,c,g){const{vector:v,origin:p}=t,h=i(f.get(),r,p),b=n(v,h)/u(v);return e(g,v,a(b,o,c)),s(g,g,t.origin)}function m(t,r){if(j(t,function(t,r){const n=q.get();return n.origin=t,n.vector=r,n}(r.origin,r.direction),!1,k)){const{tA:r,pB:n,distance2:o}=k;if(r>=0&&r<=1)return o;if(r<0)return c(t.origin,n);if(r>1)return c(s(f.get(),t.origin,t.vector),n)}return null}function B(t,r,n){return!!j(t,r,!0,k)&&(o(n,k.pA),!0)}function j(t,r,n,o){const i=1e-6,e=t.origin,u=s(f.get(),e,t.vector),g=r.origin,v=s(f.get(),g,r.vector),p=f.get(),h=f.get();if(p[0]=e[0]-g[0],p[1]=e[1]-g[1],p[2]=e[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const b=f.get();if(b[0]=u[0]-e[0],b[1]=u[1]-e[1],b[2]=u[2]-e[2],Math.abs(b[0])<i&&Math.abs(b[1])<i&&Math.abs(b[2])<i)return!1;const l=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],M=h[0]*b[0]+h[1]*b[1]+h[2]*b[2],d=p[0]*b[0]+p[1]*b[1]+p[2]*b[2],A=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],m=(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*A-M*M;if(Math.abs(m)<i)return!1;let B=(l*M-d*A)/m,j=(l+M*B)/A;n&&(B=a(B,0,1),j=a(j,0,1));const k=f.get(),q=f.get();return k[0]=e[0]+B*b[0],k[1]=e[1]+B*b[1],k[2]=e[2]+B*b[2],q[0]=g[0]+j*h[0],q[1]=g[1]+j*h[1],q[2]=g[2]+j*h[2],o.tA=B,o.tB=j,o.pA=k,o.pB=q,o.distance2=c(k,q),!0}const k={tA:0,tB:0,pA:r(),pB:r(),distance2:0},q=new g((()=>({origin:null,vector:null})));export{m as a,B as b,v as c,l as d,p as e,b as f,d as g,h,M as i,A as p};
