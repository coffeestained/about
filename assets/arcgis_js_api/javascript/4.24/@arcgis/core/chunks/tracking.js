/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import"../core/lang.js";import{L as t}from"./Logger.js";import{a as n,g as e}from"./utils.js";var i;!function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"}(i||(i={}));let r,a=[];const o=t.getLogger("esri.core.Accessor");function l(t){void 0!==r&&r.onObservableAccessed(t)}let c=!1,s=!1;function u(t,n,e){if(c)return f(t,n,e);p(t);const i=n.call(e);return d(),i}function g(t,n){return u(void 0,t,n)}function f(t,n,e){const i=c;c=!0,p(t);let r=null;try{r=n.call(e)}catch(t){s&&o.error(t)}return d(),c=i,r}function p(t){r=t,a.push(t)}function d(){const t=a.pop();r=a.length>0?a[a.length-1]:void 0,void 0!==t&&t.onTrackingEnd()}function y(t,n){if(n.flags&i.DepTrackingInitialized)return;const e=s;s=!1,n.flags&i.AutoTracked?f(n,n.metadata.get,t):T(t,n),s=e}const k=[];function T(t,e){e.flags&i.ExplicitlyTracking||(e.flags|=i.ExplicitlyTracking,f(e,(()=>{const i=e.metadata.dependsOn||k;for(const e of i)if("string"!=typeof e||e.includes(".")){const i=n(e);for(let n=0,e=t;n<i.length&&null!=e&&"object"==typeof e;++n)e=m(e,i[n],n!==i.length-1)}else m(t,e,!1)})),e.flags&=~i.ExplicitlyTracking)}function m(t,n,i){const r="?"===n[n.length-1]?n.slice(0,-1):n;if(null!=t.getItemAt||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const a=e(t)?.properties.get(r);return a&&(l(a),y(t,a)),i?t[r]:void 0}export{i as F,T as a,g as b,y as i,u as r,l as t};
