/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{a as t}from"./maybe.js";import{a as o}from"./quantityUtils.js";import{q as r}from"./unitUtils.js";import{e as s}from"./earcut.js";import{h as n,z as e,a as i,s as a}from"./mathUtils.js";import{projectVectorToVector as l}from"../geometry/projection.js";import{j as f,w as c,r as u}from"./plane.js";import{b as m}from"./triangle.js";import{s as p}from"./vectorStacks.js";import{c as g}from"./measurementUtils2.js";function h(t,o={positionsWorldCoords:[]}){return d(t,o)}function j(t,o={positionsWorldCoords:[]}){return d(t,o,!1)}function d(s,h,j=s.hasZ){const d=g(s.spatialReference),C=r(d);if(t(C))return null;const W=(t,o)=>!(o.length<2||(a(t,o[0],o[1],j&&o[2]||0),0));let R=0;for(const t of s.rings){if(t.length<3)continue;const{positionsWorldCoords:o}=h;for(;o.length<t.length;)o.push(n());const r=y;for(let n=0;n<3;n++){if(!W(r,t[n]))return null;if(!l(r,s.spatialReference,o[n],d))return null}if(e(o[0],o[1])||e(o[0],o[2])||e(o[1],o[2]))continue;const a=f(o[0],o[1],o[2],c()),g=i(p.get(),o[0]);for(let t=0;t<3;t++)u(a,g,o[t],o[t]);for(let n=3;n<t.length;n++){if(!W(r,t[n]))return null;l(r,s.spatialReference,o[n],d),u(a,g,o[n],o[n])}const j=U(o);for(let t=0;t<j.length;t+=3)R+=m(o[j[t]],o[j[t+1]],o[j[t+2]])}return o(R,C)}const y=n();function C(){return{positionsWorldCoords:[]}}function U(t){return s(function(t){const o=new Float64Array(2*t.length);for(let r=0;r<t.length;++r){const s=t[r],n=2*r;o[n+0]=s[0],o[n+1]=s[1]}return o}(t),[],2)}export{h as a,C as c,j as e,U as t};
