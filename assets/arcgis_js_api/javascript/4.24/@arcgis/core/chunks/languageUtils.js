/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import e from"../geometry/Point.js";import t from"../geometry/Extent.js";import n from"../geometry/Geometry.js";import r from"../geometry/Multipoint.js";import i,{i as s}from"../geometry/Polygon.js";import o from"../geometry/Polyline.js";import{D as a}from"./datetime.js";import{a as l}from"./maybe.js";import{p as u,f as c}from"./number.js";import{g as f}from"./locale.js";import y from"../layers/support/Field.js";class d{constructor(e=[]){this._elements=e}length(){return this._elements.length}get(e){return this._elements[e]}toArray(){const e=[];for(let t=0;t<this.length();t++)e.push(this.get(t));return e}}class p{constructor(e,t){this.definition=null,this.context=null,this.definition=e,this.context=t}}class m extends d{constructor(e,t,n,r,i,s){super(e),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=n,this._hasM=r,this._cacheId=i,this._partId=s}get(t){if(void 0===this._lazyPt[t]){const n=this._elements[t];if(void 0===n)return;const r=this._hasZ,i=this._hasM;let s=null;s=r&&!i?new e(n[0],n[1],n[2],void 0,this._spRef):i&&!r?new e(n[0],n[1],void 0,n[2],this._spRef):r&&i?new e(n[0],n[1],n[2],n[3],this._spRef):new e(n[0],n[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=s}return this._lazyPt[t]}equalityTest(e){return e===this||null!==e&&e instanceof m!=0&&e.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class h extends d{constructor(e,t,n,r,i){super(e),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=n,this._hasM=r,this._spRef=t,this._cacheId=i}get(e){if(void 0===this._lazyPath[e]){const t=this._elements[e];if(void 0===t)return;this._lazyPath[e]=new m(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]}equalityTest(e){return e===this||null!==e&&e instanceof h!=0&&e.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}var g,S;function T(e){return y.fromJSON(e.toJSON())}function x(e){return e.toJSON?e.toJSON():e}function F(e){return"string"==typeof e||e instanceof String}function b(e){return"number"==typeof e}function _(e){return e instanceof Date}function v(e,t){return e===t||!(!_(e)||!_(t))&&e.getTime()===t.getTime()}function D(e){if(void 0===e)return null;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function I(e){if(null===e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new t({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function N(e){if(void 0===e)return null;if("number"==typeof e)return e;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}!function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"}(g||(g={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(S||(S={}));const M=1e3,k={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},G={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},R={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function w(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function O(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){const r={key:t,value:e[t]},s={key:n,value:e[n]};return i(r,s)}});var i;const s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let i,o;if(Array.isArray(t)){for(o="[",i=0;i<t.length;i++)i&&(o+=","),o+=e(t[i])||"null";return o+"]"}if(null===t)return"null";if(s.includes(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const a=s.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(o="",i=0;i<l.length;i++){const n=l[i],r=e(t[n]);r&&(o&&(o+=","),o+=JSON.stringify(n)+":"+r)}return s.splice(a,1),"{"+o+"}"}(e)}class P{constructor(e){this.value=e}}class A{constructor(e){this.value=e}}class j{constructor(e){this.fn=e}}class C{constructor(e,t){this.paramCount=t,this.fn=e}}const L=j,J=A,Z=P,E=C,Y={type:"VOID"},z={type:"BREAK"},U={type:"CONTINUE"};function q(e,t,n){return""===t||null==t||t===n||t===n?e:e=e.split(t).join(n)}function H(e){return e instanceof j||e instanceof p||e instanceof C}function B(e){return!!(X(e)||Q(e)||ie(e)||$(e)||null===e||e===Y||"number"==typeof e)}function V(e,t){return void 0===e?t:e}function X(e){return"string"==typeof e||e instanceof String}function $(e){return"boolean"==typeof e}function Q(e){return"number"==typeof e}function W(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function K(e){return e instanceof Array}function ee(e){return"esri.arcade.Feature"===e?.arcadeDeclaredClass}function te(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===e.declaredRootClass)}function ne(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureSetCollection"===e.declaredRootClass)}function re(e){return e instanceof d}function ie(e){return e instanceof Date}function se(e,t,n){if(e.length<t||e.length>n)throw new Error("Function called with wrong number of Parameters")}function oe(e){return e<0?-Math.round(-e):Math.round(e)}function ae(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function le(e,t){return!1===isNaN(e)?null==t||""===t?e.toString():(t=q(t,"‰",""),t=q(t,"¤",""),c(e,{pattern:t})):e.toString()}function ue(e,t){const n=a.fromJSDate(e);return null==t||""===t?n.toISO({suppressMilliseconds:!0}):n.toFormat(ce(t),{locale:f(),numberingSystem:"latn"})}function ce(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const n=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(n))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&"["===r.slice(0,1)&&"]"===r.slice(-1)?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function fe(e,t,n){switch(n){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function ye(e,t,n){if(null===e){if(null===t||t===Y)return fe(null,null,n);if(Q(t))return fe(0,t,n);if(X(t))return fe(0,Se(t),n);if($(t))return fe(0,Se(t),n);if(ie(t))return fe(0,t.getTime(),n)}if(e===Y){if(null===t||t===Y)return fe(null,null,n);if(Q(t))return fe(0,t,n);if(X(t))return fe(0,Se(t),n);if($(t))return fe(0,Se(t),n);if(ie(t))return fe(0,t.getTime(),n)}else if(Q(e)){if(Q(t))return fe(e,t,n);if($(t))return fe(e,Se(t),n);if(null===t||t===Y)return fe(e,0,n);if(X(t))return fe(e,Se(t),n);if(ie(t))return fe(e,t.getTime(),n)}else if(X(e)){if(X(t))return fe(pe(e),pe(t),n);if(ie(t))return fe(Se(e),t.getTime(),n);if(Q(t))return fe(Se(e),t,n);if(null===t||t===Y)return fe(Se(e),0,n);if($(t))return fe(Se(e),Se(t),n)}else if(ie(e)){if(ie(t))return fe(e,t,n);if(null===t||t===Y)return fe(e.getTime(),0,n);if(Q(t))return fe(e.getTime(),t,n);if($(t))return fe(e.getTime(),Se(t),n);if(X(t))return fe(e.getTime(),Se(t),n)}else if($(e)){if($(t))return fe(e,t,n);if(Q(t))return fe(Se(e),Se(t),n);if(ie(t))return fe(Se(e),t.getTime(),n);if(null===t||t===Y)return fe(Se(e),0,n);if(X(t))return fe(Se(e),Se(t),n)}return!!de(e,t)&&("<="===n||">="===n)}function de(t,n){if(t===n)return!0;if(null===t&&n===Y||null===n&&t===Y)return!0;if(ie(t)&&ie(n))return t.getTime()===n.getTime();if(t instanceof h)return t.equalityTest(n);if(t instanceof m)return t.equalityTest(n);if(t instanceof e&&n instanceof e){const e=t.cache._arcadeCacheId,r=n.cache._arcadeCacheId;if(null!=e)return e===r}if(void 0!==t&&void 0!==n&&null!==t&&null!==n&&"object"==typeof t&&"object"==typeof n){if(t._arcadeCacheId===n._arcadeCacheId&&void 0!==t._arcadeCacheId&&null!==t._arcadeCacheId)return!0;if(t._underlyingGraphic===n._underlyingGraphic&&void 0!==t._underlyingGraphic&&null!==t._underlyingGraphic)return!0}return!1}function pe(e,t){if(X(e))return e;if(null===e)return"";if(Q(e))return le(e,t);if($(e))return e.toString();if(ie(e))return ue(e,t);if(e instanceof n)return JSON.stringify(e.toJSON());if(K(e)){const t=[];for(let n=0;n<e.length;n++)t[n]=ge(e[n]);return"["+t.join(",")+"]"}if(e instanceof d){const t=[];for(let n=0;n<e.length();n++)t[n]=ge(e.get(n));return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():H(e)?"object, Function":""}function me(e){const t=[];if(!1===K(e))return null;if(e instanceof d){for(let n=0;n<e.length();n++)t[n]=Se(e.get(n));return t}for(let n=0;n<e.length;n++)t[n]=Se(e[n]);return t}function he(e,r){if(X(e))return e;if(null===e)return"";if(Q(e))return le(e,r);if($(e))return e.toString();if(ie(e))return ue(e,r);if(e instanceof n)return e instanceof t?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+ke(e.spatialReference)+"}":ke(e.toJSON(),((e,t)=>e.key===t.key?0:"spatialReference"===e.key?1:"spatialReference"===t.key||e.key<t.key?-1:e.key>t.key?1:0));if(K(e)){const t=[];for(let n=0;n<e.length;n++)t[n]=ge(e[n]);return"["+t.join(",")+"]"}if(e instanceof d){const t=[];for(let n=0;n<e.length();n++)t[n]=ge(e.get(n));return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():H(e)?"object, Function":""}function ge(e){if(null===e)return"null";if($(e)||Q(e)||X(e))return JSON.stringify(e);if(e instanceof n)return he(e);if(e instanceof d)return he(e);if(e instanceof Array)return he(e);if(e instanceof Date)return JSON.stringify(ue(e,""));if(null!==e&&"object"==typeof e){if(void 0!==e.castToText)return e.castToText()}else if(e===Y)return"null";return"null"}function Se(e,t){return Q(e)?e:null===e||""===e?0:ie(e)?NaN:$(e)?e?1:0:K(e)||""===e||void 0===e?NaN:void 0!==t&&X(e)?(t=q(t,"‰",""),t=q(t,"¤",""),u(e,{pattern:t})):e===Y?0:Number(e)}function Te(e){if(ie(e))return e;if(X(e)){const t=Fe(e);if(t)return t.toJSDate()}return null}function xe(e){return ie(e)?a.fromJSDate(e):X(e)?Fe(e):null}function Fe(e){const t=/ (\d\d)/;let n=a.fromISO(e);return n.isValid||t.test(e)&&(e=e.replace(t,"T$1"),n=a.fromISO(e),n.isValid)?n:null}function be(e){return $(e)?e:X(e)?"true"===(e=e.toLowerCase()):!!Q(e)&&0!==e&&!isNaN(e)}function _e(e,t){return l(e)?null:(null!==e.spatialReference&&void 0!==e.spatialReference||(e.spatialReference=t),e)}function ve(n){if(null===n)return null;if(n instanceof e)return"NaN"===n.x||null===n.x||isNaN(n.x)?null:n;if(n instanceof i){if(0===n.rings.length)return null;for(const e of n.rings)if(e.length>0)return n;return null}if(n instanceof o){if(0===n.paths.length)return null;for(const e of n.paths)if(e.length>0)return n;return null}return n instanceof r?0===n.points.length?null:n:n instanceof t?"NaN"===n.xmin||null===n.xmin||isNaN(n.xmin)?null:n:null}function De(e,t){if(!e)return t;if(!e.domain)return t;let n=null;if("string"===e.field.type||"esriFieldTypeString"===e.field.type)t=pe(t);else{if(null==t)return null;if(""===t)return t;t=Se(t)}for(let r=0;r<e.domain.codedValues.length;r++){const i=e.domain.codedValues[r];i.code===t&&(n=i)}return null===n?t:n.name}function Ie(e,t){if(!e)return t;if(!e.domain)return t;let n=null;t=pe(t);for(let r=0;r<e.domain.codedValues.length;r++){const i=e.domain.codedValues[r];i.name===t&&(n=i)}return null===n?t:n.code}function Ne(e,t,n=null,r=null){if(!t)return null;if(!t.fields)return null;let i,s,o=null;for(let n=0;n<t.fields.length;n++){const r=t.fields[n];r.name.toLowerCase()===e.toString().toLowerCase()&&(o=r)}if(null===o)throw new Error("Field not found");return null===r&&n&&t.typeIdField&&(r=n.hasField(t.typeIdField)?n.field(t.typeIdField):null),null!=r&&t.types.some((function(e){return e.id===r&&(i=e.domains&&e.domains[o.name],i&&"inherited"===i.type&&(i=Me(o.name,t),s=!0),!0)})),s||i||(i=Me(e,t)),{field:o,domain:i}}function Me(e,t){let n;return t.fields.some((function(t){return t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n})),n}function ke(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){const r={key:t,value:e[t]},s={key:n,value:e[n]};return i(r,s)}});var i;const s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let i,o;if(Array.isArray(t)){for(o="[",i=0;i<t.length;i++)i&&(o+=","),o+=e(t[i])||"null";return o+"]"}if(null===t)return"null";if(s.includes(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const a=s.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(o="",i=0;i<l.length;i++){const n=l[i],r=e(t[n]);r&&(o&&(o+=","),o+=JSON.stringify(n)+":"+r)}return s.splice(a,1),"{"+o+"}"}(e)}function Ge(e){if(null===e)return null;const t=[];for(const n of e)n&&n.arcadeDeclaredClass&&"esri.arcade.Feature"===n.arcadeDeclaredClass?t.push(n.geometry()):t.push(n);return t}function Re(t,n){if(!(n instanceof e))throw new Error("Invalid Argument");t.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}function we(e,t){if(K(e)||re(e)){let n=!1,r=!1,o=[],a=t;if(K(e)){for(const t of e)Re(o,t);o.length>0&&(a=e[0].spatialReference,n=e[0].hasZ,r=e[0].hasM)}else if(e instanceof m)o=e._elements,o.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else{if(!re(e))throw new Error("Invalid Argument");for(const t of e.toArray())Re(o,t);o.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===o.length?null:(!1===s(o,r,n)&&(o=o.slice(0).reverse()),new i({rings:[o],spatialReference:a,hasZ:n,hasM:r}))}return e}function Oe(e,t){if(K(e)||re(e)){let n=!1,r=!1,i=[],s=t;if(K(e)){for(const t of e)Re(i,t);i.length>0&&(s=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof m)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,s=e.get(0).spatialReference);else if(re(e)){for(const t of e.toArray())Re(i,t);i.length>0&&(s=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:new o({paths:[i],spatialReference:s,hasZ:n,hasM:r})}return e}function Pe(e,t){if(K(e)||re(e)){let n=!1,i=!1,s=[],o=t;if(K(e)){for(const t of e)Re(s,t);s.length>0&&(o=e[0].spatialReference,n=!0===e[0].hasZ,i=!0===e[0].hasM)}else if(e instanceof m)s=e._elements,s.length>0&&(n=e._hasZ,i=e._hasM,o=e.get(0).spatialReference);else if(re(e)){for(const t of e.toArray())Re(s,t);s.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,i=!0===e.get(0).hasM)}return 0===s.length?null:new r({points:s,spatialReference:o,hasZ:n,hasM:i})}return e}function Ae(e,t=!1){const n=[];if(null===e)return n;if(!0===K(e)){for(let r=0;r<e.length;r++){const i=pe(e[r]);""===i&&!0!==t||n.push(i)}return n}if(e instanceof d){for(let r=0;r<e.length();r++){const i=pe(e.get(r));""===i&&!0!==t||n.push(i)}return n}if(B(e)){const r=pe(e);return""===r&&!0!==t||n.push(r),n}return[]}let je=0;function Ce(e){return je++,je%100==0?(je=0,new Promise((t=>{setTimeout((()=>{t(e)}),0)}))):e}function Le(e,t,n){switch(n){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Je(e,t=null){return null==e?null:$(e)||Q(e)||X(e)?e:e instanceof n?!0===t?.keepGeometryType?e:e.toJSON():e instanceof d?e.toArray().map((e=>Je(e,t))):e instanceof Array?e.map((e=>Je(e,t))):e instanceof Date?e:null!==e&&"object"==typeof e&&void 0!==e.castAsJson?e.castAsJson(t):null}async function Ze(e,t,n,r,i){const s=await Ee(e,t,n);i[r]=s}async function Ee(e,t=null,r=null){if(e instanceof d&&(e=e.toArray()),null==e)return null;if(B(e)||e instanceof n||e instanceof Date)return Je(e,r);if(e instanceof Array){const i=[],s=[];for(const o of e)null===o||B(o)||o instanceof n||o instanceof Date?s.push(Je(o,r)):(s.push(null),i.push(Ze(o,t,r,s.length-1,s)));return i.length>0&&await Promise.all(i),s}return null!==e&&"object"==typeof e&&void 0!==e.castAsJsonAsync?e.castAsJsonAsync(t,r):null}function Ye(e,t,n){const r=e.fullSchema();return null===r?null:r.fields?Ne(t,r,e,n):null}function ze(e){const t=e.fullSchema();return null===t?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map((e=>({name:e.name,code:e.id}))):[]}:null}function Ue(e,t,n,r){const i=e.fullSchema();if(null===i)return null;if(!i.fields)return null;const s=Ne(t,i,e,r);if(void 0===n)try{n=e.field(t)}catch(e){return null}return De(s,n)}function qe(e,t,n,r){const i=e.fullSchema();if(null===i)return null;if(!i.fields)return null;if(void 0===n){try{n=e.field(t)}catch(e){return null}return n}return Ie(Ne(t,i,e,r),n)}function He(e){const t=e.fullSchema();if(null===t)return null;if(!t.fields)return null;const n=[];for(const e of t.fields)n.push(x(e));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:void 0===G[t.geometryType]?"":G[t.geometryType],fields:n}}const Be=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:P,ImplicitResultE:A,NativeFunctionE:j,SizzleFunctionE:C,NativeFunction:L,ImplicitResult:J,ReturnResult:Z,SizzleFunction:E,voidOperation:Y,breakResult:z,continueResult:U,multiReplace:q,isFunctionParameter:H,isSimpleType:B,defaultUndefined:V,isString:X,isBoolean:$,isNumber:Q,isInteger:W,isArray:K,isFeature:ee,isFeatureSet:te,isFeatureSetCollection:ne,isImmutableArray:re,isDate:ie,pcCheck:se,absRound:oe,generateUUID:ae,formatNumber:le,formatDate:ue,standardiseDateFormat:ce,greaterThanLessThan:ye,equalityTest:de,toString:pe,toNumberArray:me,toStringExplicit:he,toNumber:Se,toDate:Te,toDateTime:xe,toBoolean:be,fixSpatialReference:_e,fixNullGeometry:ve,getDomainValue:De,getDomainCode:Ie,getDomain:Ne,stableStringify:ke,autoCastFeatureToGeometry:Ge,autoCastArrayOfPointsToPolygon:we,autoCastArrayOfPointsToPolyline:Oe,autoCastArrayOfPointsToMultiPoint:Pe,toStringArray:Ae,tick:Ce,binaryOperator:Le,castAsJson:Je,castAsJsonAsync:Ee,featureFullDomain:Ye,featureSubtypes:ze,featureDomainValueLookup:Ue,featureDomainCodeLookup:qe,featureSchema:He},Symbol.toStringTag,{value:"Module"}));export{h as $,H as A,Oe as B,we as C,Pe as D,q as E,p as F,me as G,ae as H,d as I,ee as J,He as K,ze as L,Ye as M,L as N,R as O,Ue as P,qe as Q,te as R,E as S,ne as T,ye as U,Le as V,Be as W,Z as X,J as Y,z as Z,U as _,Q as a,k as a0,S as a1,T as a2,g as a3,Ce as a4,M as a5,O as a6,w as a7,b as a8,F as a9,v as aa,D as ab,N as ac,x as ad,G as ae,I as af,Ae as ag,Ne as ah,De as ai,Ie as aj,X as b,Je as c,Ee as d,B as e,Se as f,be as g,pe as h,$ as i,ie as j,Te as k,K as l,W as m,V as n,re as o,se as p,de as q,xe as r,ce as s,he as t,oe as u,Y as v,m as w,_e as x,ve as y,Ge as z};
