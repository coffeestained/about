/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import t from"../../Color.js";import{i as r}from"../../chunks/maybe.js";import"../../chunks/colorUtils.js";import"../../chunks/mathUtils.js";import"../../chunks/common.js";import"../../chunks/ensureType.js";import"../../core/lang.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";async function n(r){await r.whenReady();const n=r.basemapView.baseLayerViews.map((t=>t.layer));if(!n.length){const n=getComputedStyle(r.container).backgroundColor,o=n&&new t(n);return r.get("background.color")||(o&&0!==o.a?o:null)||null}const o=(await r.takeScreenshot({format:"png",layers:n.toArray()})).data.data,a=o.length;let s=0,e=0,u=0,i=0,c=0,h=0;for(let t=0;t<a;t+=4){const r=o[t],n=o[t+1],a=o[t+2],l=o[t+3],m=l/255;s+=r*r*m,e+=n*n*m,u+=a*a*m,c+=m,l&&(i+=l,h++)}return s=Math.round(Math.sqrt(s/c)),e=Math.round(Math.sqrt(e/c)),u=Math.round(Math.sqrt(u/c)),new t([s,e,u,i/h/255])}async function o(t){if(!t)return null;const o=await n(t);return r(o)?a(o):null}function a(t){return s(t).isBright?"light":"dark"}function s(r){let{r:n,g:o,b:a,a:s}=r;return s<1&&(n=Math.round(s*n+255*(1-s)),o=Math.round(s*o+255*(1-s)),a=Math.round(s*a+255*(1-s))),new t({r:n,g:o,b:a})}function e(t){const{r,g:n,b:o}=s(t);return.2126*r+.7152*n+.0722*o}export{n as getBackgroundColor,o as getBackgroundColorTheme,e as getColorLuminance,a as getColorTheme};
