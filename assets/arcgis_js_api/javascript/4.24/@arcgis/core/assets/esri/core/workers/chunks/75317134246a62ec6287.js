"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2224,2058],{73173:(e,t,r)=>{r.d(t,{g:()=>c});var s=r(31450),a=(r(82058),r(60991)),n=r(92143),o=r(32101);const i=n.L.getLogger("esri.assets");function c(e){if(!s.Z.assetsPath)throw i.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.Z("assets:path-not-set","config.assetsPath is not set");return(0,o.v_)(s.Z.assetsPath,e)}},65775:(e,t,r)=>{r.d(t,{A:()=>p,b:()=>u,e:()=>l,f:()=>d,h:()=>m,i:()=>n,j:()=>i,k:()=>y,m:()=>c,q:()=>f,s:()=>a,t:()=>o,u:()=>h,v:()=>w,w:()=>b});var s=r(29794);function a(e,t,r,s,a,n,o,i,c,l,u,h,d,f,m,p,b){return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e[4]=n,e[5]=o,e[6]=i,e[7]=c,e[8]=l,e[9]=u,e[10]=h,e[11]=d,e[12]=f,e[13]=m,e[14]=p,e[15]=b,e}function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t){if(e===t){const r=t[1],s=t[2],a=t[3],n=t[6],o=t[7],i=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=n,e[11]=t[14],e[12]=a,e[13]=o,e[14]=i}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function i(e,t){const r=t[0],s=t[1],a=t[2],n=t[3],o=t[4],i=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],f=t[11],m=t[12],p=t[13],b=t[14],w=t[15],y=r*i-s*o,g=r*c-a*o,M=r*l-n*o,q=s*c-a*i,E=s*l-n*i,T=a*l-n*c,k=u*p-h*m,v=u*b-d*m,O=u*w-f*m,x=h*b-d*p,C=h*w-f*p,L=d*w-f*b;let S=y*L-g*C+M*x+q*O-E*v+T*k;return S?(S=1/S,e[0]=(i*L-c*C+l*x)*S,e[1]=(a*C-s*L-n*x)*S,e[2]=(p*T-b*E+w*q)*S,e[3]=(d*E-h*T-f*q)*S,e[4]=(c*O-o*L-l*v)*S,e[5]=(r*L-a*O+n*v)*S,e[6]=(b*M-m*T-w*g)*S,e[7]=(u*T-d*M+f*g)*S,e[8]=(o*C-i*O+l*k)*S,e[9]=(s*O-r*C-n*k)*S,e[10]=(m*E-p*M+w*y)*S,e[11]=(h*M-u*E-f*y)*S,e[12]=(i*v-o*x-c*k)*S,e[13]=(r*x-s*v+a*k)*S,e[14]=(p*g-m*q-b*y)*S,e[15]=(u*q-h*g+d*y)*S,e):null}function c(e,t,r){const s=t[0],a=t[1],n=t[2],o=t[3],i=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],m=t[11],p=t[12],b=t[13],w=t[14],y=t[15];let g=r[0],M=r[1],q=r[2],E=r[3];return e[0]=g*s+M*i+q*h+E*p,e[1]=g*a+M*c+q*d+E*b,e[2]=g*n+M*l+q*f+E*w,e[3]=g*o+M*u+q*m+E*y,g=r[4],M=r[5],q=r[6],E=r[7],e[4]=g*s+M*i+q*h+E*p,e[5]=g*a+M*c+q*d+E*b,e[6]=g*n+M*l+q*f+E*w,e[7]=g*o+M*u+q*m+E*y,g=r[8],M=r[9],q=r[10],E=r[11],e[8]=g*s+M*i+q*h+E*p,e[9]=g*a+M*c+q*d+E*b,e[10]=g*n+M*l+q*f+E*w,e[11]=g*o+M*u+q*m+E*y,g=r[12],M=r[13],q=r[14],E=r[15],e[12]=g*s+M*i+q*h+E*p,e[13]=g*a+M*c+q*d+E*b,e[14]=g*n+M*l+q*f+E*w,e[15]=g*o+M*u+q*m+E*y,e}function l(e,t,r){const s=r[0],a=r[1],n=r[2];if(t===e)e[12]=t[0]*s+t[4]*a+t[8]*n+t[12],e[13]=t[1]*s+t[5]*a+t[9]*n+t[13],e[14]=t[2]*s+t[6]*a+t[10]*n+t[14],e[15]=t[3]*s+t[7]*a+t[11]*n+t[15];else{const r=t[0],o=t[1],i=t[2],c=t[3],l=t[4],u=t[5],h=t[6],d=t[7],f=t[8],m=t[9],p=t[10],b=t[11];e[0]=r,e[1]=o,e[2]=i,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=m,e[10]=p,e[11]=b,e[12]=r*s+l*a+f*n+t[12],e[13]=o*s+u*a+m*n+t[13],e[14]=i*s+h*a+p*n+t[14],e[15]=c*s+d*a+b*n+t[15]}return e}function u(e,t,r){const s=r[0],a=r[1],n=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function h(e,t,r,a){let n,o,i,c,l,u,h,d,f,m,p,b,w,y,g,M,q,E,T,k,v,O,x,C,L=a[0],S=a[1],P=a[2],D=Math.sqrt(L*L+S*S+P*P);return D<s.E?null:(D=1/D,L*=D,S*=D,P*=D,n=Math.sin(r),o=Math.cos(r),i=1-o,c=t[0],l=t[1],u=t[2],h=t[3],d=t[4],f=t[5],m=t[6],p=t[7],b=t[8],w=t[9],y=t[10],g=t[11],M=L*L*i+o,q=S*L*i+P*n,E=P*L*i-S*n,T=L*S*i-P*n,k=S*S*i+o,v=P*S*i+L*n,O=L*P*i+S*n,x=S*P*i-L*n,C=P*P*i+o,e[0]=c*M+d*q+b*E,e[1]=l*M+f*q+w*E,e[2]=u*M+m*q+y*E,e[3]=h*M+p*q+g*E,e[4]=c*T+d*k+b*v,e[5]=l*T+f*k+w*v,e[6]=u*T+m*k+y*v,e[7]=h*T+p*k+g*v,e[8]=c*O+d*x+b*C,e[9]=l*O+f*x+w*C,e[10]=u*O+m*x+y*C,e[11]=h*O+p*x+g*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function f(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m(e,t,r){let a,n,o,i=r[0],c=r[1],l=r[2],u=Math.sqrt(i*i+c*c+l*l);return u<s.E?null:(u=1/u,i*=u,c*=u,l*=u,a=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=i*i*o+n,e[1]=c*i*o+l*a,e[2]=l*i*o-c*a,e[3]=0,e[4]=i*c*o-l*a,e[5]=c*c*o+n,e[6]=l*c*o+i*a,e[7]=0,e[8]=i*l*o+c*a,e[9]=c*l*o-i*a,e[10]=l*l*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function p(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function w(e,t){if(e===t)return!0;const r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],f=e[10],m=e[11],p=e[12],b=e[13],w=e[14],y=e[15],g=t[0],M=t[1],q=t[2],E=t[3],T=t[4],k=t[5],v=t[6],O=t[7],x=t[8],C=t[9],L=t[10],S=t[11],P=t[12],D=t[13],U=t[14],_=t[15];return Math.abs(r-g)<=s.E*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-M)<=s.E*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(n-q)<=s.E*Math.max(1,Math.abs(n),Math.abs(q))&&Math.abs(o-E)<=s.E*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(i-T)<=s.E*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(c-k)<=s.E*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-v)<=s.E*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-O)<=s.E*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-x)<=s.E*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(d-C)<=s.E*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-L)<=s.E*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-S)<=s.E*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(p-P)<=s.E*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(b-D)<=s.E*Math.max(1,Math.abs(b),Math.abs(D))&&Math.abs(w-U)<=s.E*Math.max(1,Math.abs(w),Math.abs(U))&&Math.abs(y-_)<=s.E*Math.max(1,Math.abs(y),Math.abs(_))}function y(e){const t=s.E,r=e[0],a=e[1],n=e[2],o=e[4],i=e[5],c=e[6],l=e[8],u=e[9],h=e[10];return Math.abs(1-(r*r+o*o+l*l))<=t&&Math.abs(1-(a*a+i*i+u*u))<=t&&Math.abs(1-(n*n+c*c+h*h))<=t}},82058:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m,l:()=>d,r:()=>P,s:()=>h});var s=r(31450),a=r(88762),n=r(60991),o=r(76506),i=r(71252),c=r(50406),l=r(32101);r(71552),r(92143),r(40642);const u=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function h(e){const t=(0,l.P$)(e,!0);return t&&t.endsWith(".arcgis.com")&&!u.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function d(e,t,r=!1,s){return new Promise(((a,n)=>{if((0,c.Hc)(s))return void n(f());let l=()=>{d(),n(new Error(`Unable to load ${t}`))},u=()=>{const t=e;d(),a(t)},h=()=>{if(!e)return;const t=e;d(),t.src="",n(f())};const d=()=>{(0,o.h)("esri-image-decode")||(e.removeEventListener("error",l),e.removeEventListener("load",u)),l=null,u=null,e=null,(0,i.i)(s)&&s.removeEventListener("abort",h),h=null,r&&URL.revokeObjectURL(t)};(0,i.i)(s)&&s.addEventListener("abort",h),(0,o.h)("esri-image-decode")?e.decode().then(u,l):(e.addEventListener("error",l),e.addEventListener("load",u))}))}function f(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function m(e,t){const u=(0,l.HK)(e),d=(0,l.jc)(e);d||u||(e=(0,l.Fv)(e));const f={url:e,requestOptions:{...(0,i.u)(t)}};let y=(0,l.oh)(e);if(y){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,s;try{s=await e.before(t)}catch(e){r=k("request:interceptor",e,t)}if((s instanceof Error||s instanceof n.Z)&&(r=k("request:interceptor",s,t)),r)throw e.error&&e.error(r),r;return s}}(y,f);if(null!=e)return{data:e,getHeader:q,requestOptions:f.requestOptions,url:f.url};y.after||y.error||(y=null)}if(e=f.url,"image"===(t=f.requestOptions).responseType){if((0,o.h)("host-webworker")||(0,o.h)("host-node"))throw k("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),f)}else if(u)throw k("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),f);if("head"===t.method){if(t.body)throw k("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),f);if(u||d)throw k("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),f)}if(await async function(){(0,o.h)("host-webworker")?p||(p=await r.e(9768).then(r.bind(r,89768))):m._abortableFetch||(m._abortableFetch=globalThis.fetch.bind(globalThis))}(),p)return p.execute(e,t);const g=new AbortController;(0,c.fu)(t,(()=>g.abort()));const M={controller:g,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:y,params:f,redoRequest:!1,useIdentity:b.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},E=await async function(e){let t,r;await async function(e){const t=e.params.url,r=e.params.requestOptions,n=e.controller.signal,o=r.body;let i=null,l=null;if(w&&"HTMLFormElement"in globalThis&&(o instanceof FormData?i=o:o instanceof HTMLFormElement&&(i=new FormData(o))),"string"==typeof o&&(l=o),e.fetchOptions={cache:r.cacheBust&&!m._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",priority:b.priority,redirect:"follow",signal:n},(i||l)&&(e.fetchOptions.body=i||l),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||i?.get("token")),!e.hasToken&&s.Z.apiKey&&h(t)&&(r.query||(r.query={}),r.query.token=s.Z.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!O(t)&&!(0,c.Hc)(n)){let s;"immediate"===r.authMode?(await v(),s=await a.id.getCredential(t,{signal:n}),e.credential=s):"no-prompt"===r.authMode?(await v(),s=await a.id.getCredential(t,{prompt:!1,signal:n}).catch((()=>{})),e.credential=s):a.id&&(s=a.id.findCredential(t)),s&&(e.credentialToken=s.token,e.useSSL=!!s.ssl)}}(e);try{do{[t,r]=await x(e)}while(!await L(e,t,r))}catch(r){const s=k("request:server",r,e.params,t);throw s.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(s),s}const n=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!(0,l.kl)(n)){const e=(0,l.P$)(n,!0);e&&b.trustedServers.push(e)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&function(e){s.Z.request.crossOriginNoCorsDomains||(s.Z.request.crossOriginNoCorsDomains={});const t=s.Z.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[(0,l.P$)(r)]=0:(t[(0,l.P$)("http://"+r)]=0,t[(0,l.P$)("https://"+r)]=0)}(r.authorizedCrossOriginNoCorsDomains)}const o=e.credential;if(o&&a.id){const e=a.id.findServerInfo(o.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=a.id.findCredential(t,o.userId);e&&-1===a.id._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:r,getHeader:t?e=>t.headers.get(e):q,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(M);return y?.after?.(E),E}let p;const b=s.Z.request,w="FormData"in globalThis,y=[499,498,403,401],g=["COM_0056","COM_0057","SB_0008"],M=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],q=()=>null,E=Symbol();function T(e){const t=(0,l.P$)(e);return!t||t.endsWith(".arcgis.com")||m._corsServers.includes(t)||(0,l.kl)(t)}function k(e,t,r,s){let a="Error";const i={url:r.url,requestOptions:r.requestOptions,getHeader:q,ssl:!1};if(t instanceof n.Z)return t.details?(t.details=(0,o.d9)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=i,t;if(t){const e=s&&(e=>s.headers.get(e)),r=s&&s.status,n=t.message;n&&(a=n),e&&(i.getHeader=e),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details,i.raw=E in t?t[E]:t}return(0,c.D_)(t)?(0,c.zE)():new n.Z(e,a,i)}async function v(){a.id||await Promise.all([r.e(6467),r.e(9798)]).then(r.bind(r,89798))}function O(e){return M.some((t=>t.test(e)))}async function x(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions,i=(0,l.jc)(t)||(0,l.HK)(t),u=r.responseType||"json",h=i?0:null!=r.timeout?r.timeout:b.timeout;let d=!1;if(!i){e.useSSL&&(t=(0,l.hO)(t)),r.cacheBust&&"default"===n.cache&&(t=(0,l.ZN)(t,"request.preventCache",Date.now()));let i={...r.query};e.credentialToken&&(i.token=e.credentialToken);let c=(0,l.B7)(i);(0,o.h)("esri-url-encodes-apostrophe")&&(c=c.replace(/'/g,"%27"));const u=t.length+1+c.length;let h;d="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||u>b.maxUrlLength;const f=r.useProxy||!!(0,l.ed)(t);if(f){const e=(0,l.b7)(t);h=e.path,!d&&h.length+1+u>b.maxUrlLength&&(d=!0),e.query&&(i={...e.query,...i})}if("HEAD"===n.method&&(d||f)){if(d){if(u>b.maxUrlLength)throw k("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw k("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(f)throw k("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=(0,l.fl)(t,i):(n.body=(0,l.B7)(i),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=(0,l.fl)(t,i),f&&(e.useProxy=!0,t=`${h}?${t}`),i.token&&w&&n.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&n.body.set("token",i.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!(0,l.D6)(t,(0,l.TI)()))if((0,l.kl)(t))e.withCredentials=!0;else if(a.id){const r=a.id.findServerInfo(t);r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include",function(e){const t=s.Z.request.crossOriginNoCorsDomains;if(t){let r=(0,l.P$)(e);if(r)return r=r.toLowerCase(),!(0,l.D6)(r,(0,l.TI)())&&t[r]<Date.now()-36e5}return!1}(t)&&await async function(e){const t=s.Z.request.crossOriginNoCorsDomains;t&&(t[(0,l.P$)(e).toLowerCase()]=Date.now());const r=(0,l.mN)(e);e=r.path,"json"===r.query?.f&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}(d?(0,l.fl)(t,i):t))}let f,p,y=0,g=!1;h>0&&(y=setTimeout((()=>{g=!0,e.controller.abort()}),h));try{if("native-request-init"===r.responseType)p=n,p.url=t;else if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||d||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!i&&!e.useProxy&&b.proxyUrl&&!T(t)){if(f=await m._abortableFetch(t,n),e.useProxy||function(e){const t=(0,l.P$)(e);t&&!m._corsServers.includes(t)&&m._corsServers.push(t)}(t),"native"===r.responseType)p=f;else if("HEAD"!==n.method)if(f.ok){switch(u){case"array-buffer":p=await f.arrayBuffer();break;case"blob":case"image":p=await f.blob();break;default:p=await f.text()}if(y&&(clearTimeout(y),y=0),"json"===u||"xml"===u||"document"===u)if(p)switch(u){case"json":p=JSON.parse(p);break;case"xml":p=C(p,"application/xml");break;case"document":p=C(p,"text/html")}else p=null;if(p){if("array-buffer"===u||"blob"===u){const e=f.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&p["blob"===u?"size":"byteLength"]<=750)try{const e=await new Response(p).json();e.error&&(p=e)}catch{}}"image"===u&&p instanceof Blob&&(p=await S(URL.createObjectURL(p),e,!0))}}else p=await f.text()}else p=await S(t,e)}catch(s){if("AbortError"===s.name){if(g)throw new Error("Timeout exceeded");throw(0,c.zE)("Request canceled")}if(!(!f&&s instanceof TypeError&&b.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||T(t))throw s;e.redoRequest=!0,(0,l.tD)({proxyUrl:b.proxyUrl,urlPrefix:(0,l.P$)(t)})}finally{y&&clearTimeout(y)}return[f,p]}function C(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function L(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||"native"===s.responseType||"native-request-init"===s.responseType)return!0;let n,o,i,c;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[E]=r,n;r?.error&&(n=r.error),n&&(o=Number(n.code),i=n.hasOwnProperty("subcode")?Number(n.subcode):null,c=n.messageCode,c=c&&c.toUpperCase());const l=s.authMode;if(403===o&&(4===i||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==l||498===o)&&y.includes(o)&&!O(e.params.url)&&(403!==o||!g.includes(c)&&(null==i||2===i&&e.credentialToken))){await v();try{const t=await a.id.getCredential(e.params.url,{error:k("request:server",n,e.params),prompt:"no-prompt"!==l,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===l)return e.credential=null,e.credentialToken=null,!1;n=t}}if(n)throw n;return!0}function S(e,t,r=!1){const s=t.controller.signal,a=new Image;return t.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=b.priority,a.src=e,d(a,e,r,s)}m._abortableFetch=null,m._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const P=Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"}))}}]);