"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3862,3444,9546],{75025:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(29768),o=r(92143),n=r(71252),s=r(34250),l=(r(76506),r(91306),r(17533)),a=r(21132);const u=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.p)(this.url);if((0,n.i)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.a)(e,o.L.getLogger(this.declaredClass)))}};return(0,i._)([(0,s.Cb)()],t.prototype,"title",null),(0,i._)([(0,s.Cb)({type:String})],t.prototype,"url",null),t=(0,i._)([(0,l.j)("esri.layers.mixins.ArcGISService")],t),t}},41864:(e,t,r)=>{r.d(t,{a:()=>a,f:()=>n,m:()=>s,r:()=>l});var i=r(71252),o=r(50406);function n(e,t,r){return(0,o.as)(e.map(((e,i)=>t.apply(r,[e,i]))))}async function s(e,t,r){return(await(0,o.as)(e.map(((e,i)=>t.apply(r,[e,i]))))).map((e=>e.value))}async function l(e){if((0,i.a)(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(e){return{ok:!1,error:e}}}async function a(e){try{return{ok:!0,value:await e}}catch(e){return(0,o.r9)(e),{ok:!1,error:e}}}},3482:(e,t,r)=>{let i;r.d(t,{b:()=>d,g:()=>s,o:()=>a});const o=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function n(){return o??globalThis.navigator?.language??"en"}function s(){return void 0===i&&(i=n()),i}const l=[];function a(e){return l.push(e),{remove(){l.splice(l.indexOf(e),1)}}}const u=[];function d(e){return u.push(e),{remove(){l.splice(u.indexOf(e),1)}}}globalThis.addEventListener?.("languagechange",(function(){const e=n();i!==e&&(i=e,[...u].forEach((t=>{t.call(null,e)})),[...l].forEach((t=>{t.call(null,e)})))}))},87239:(e,t,r)=>{r.d(t,{f:()=>h,n:()=>f,r:()=>c});var i=r(60991),o=r(50406),n=r(3482);const s=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function a(e){return l[e]??!1}const u=[],d=new Map;function p(e){for(const t of d.keys())m(e.pattern,t)&&d.delete(t)}function c(e){return u.includes(e)||(p(e),u.unshift(e)),{remove(){const t=u.indexOf(e);t>-1&&(u.splice(t,1),p(e))}}}async function h(e){const t=(0,n.g)();d.has(e)||d.set(e,async function(e,t){const r=[];for(const i of u)if(m(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(e){r.push(e)}if(r.length)throw new i.Z("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new i.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const r=d.get(e);return await y.add(r),r}function f(e){if(!s.test(e))return null;const[,t,r]=s.exec(e),i=t+(r?"-"+r.toUpperCase():"");return a(i)?i:a(t)?t:null}function m(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,n.b)((()=>{d.clear()}));const y=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,o.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},52228:(e,t,r)=>{var i,o;function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function l(e){return e.valueExpression?i.Expression:e.field&&"string"==typeof e.field?i.Field:i.Unknown}function a(e,t){const r=t||l(e),n=e.valueUnit||"unknown";return r===i.Unknown?o.Constant:e.stops?o.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?o.ClampedLinear:"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?o.Proportional:o.Additive:o.Identity:o.RealWorldSize}r.d(t,{I:()=>i,T:()=>o,a:()=>a,b:()=>s,g:()=>l,i:()=>n}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(i||(i={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(o||(o={}))},52991:(e,t,r)=>{r.d(t,{E:()=>o,_:()=>n});var i=r(71252);async function o(e,t){const{WhereClause:i}=await Promise.resolve().then(r.bind(r,72274));return i.create(e,t)}function n(e,t){return(0,i.i)(e)?(0,i.i)(t)?`(${e}) AND (${t})`:e:t}},96994:(e,t,r)=>{r.d(t,{V:()=>s});var i=r(29768),o=r(34250),n=(r(76506),r(91306),r(17533));r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(86656),r(60991),r(6540);const s=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,o.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,i._)([(0,n.j)("esri.layers.mixins.APIKeyMixin")],t),t}},39241:(e,t,r)=>{r.d(t,{I:()=>_});var i=r(29768),o=r(88762),n=r(82058),s=r(41864),l=r(60991),a=r(92143),u=r(71252),d=r(50406),p=r(32101),c=r(34250),h=(r(76506),r(91306),r(97714)),f=r(17533),m=r(2906),y=r(49900),w=r(56420),g=r(74653);r(31450),r(71552),r(40642),r(60474),r(66396),r(86656),r(6540),r(12047),r(21972),r(91055),r(19657),r(6906),r(81184),r(33101),r(21801),r(73796),r(60947),r(91597),r(86787),r(35132),r(89623),r(3482),r(67477),r(57251),r(78533),r(73173),r(74742),r(28239),r(91091),r(58943);const v=a.L.getLogger("esri.layers.mixins.PortalLayer"),_=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem?.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new w.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(8642).then(r.bind(r,8642)).then((e=>e.l));return(0,d.k_)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,d.D_)(e)||v.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,d.r9)(e),!0))))}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.id?.findCredential(this.url):null;if(!t)return!0;const r=b.credential===t?b.user:await this._fetchEditingUser(e);return b.credential=t,b.user=r,(0,u.a)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.id.findServerInfo(this.url);if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,l=y.Z.getDefault();if(l&&l.loaded&&(0,p.Fv)(l.restUrl)===(0,p.Fv)(i))return l.user;const a=`${i}/community/self`,d=(0,u.i)(e)?e.signal:null,c=await(0,s.r)((0,n.default)(a,{authMode:"no-prompt",query:{f:"json"},signal:d}));return c.ok?g.default.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||y.Z.getDefault());return r&&i&&!(0,p.tm)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,c.Cb)({type:w.default})],t.prototype,"portalItem",null),(0,i._)([(0,h.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,m.w)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,c.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,c.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,i._)([(0,f.j)("esri.layers.mixins.PortalLayer")],t),t},b={credential:null,user:null}},46495:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(29768),o=r(66122),n=r(57251),s=r(12047),l=r(34250),a=(r(76506),r(91306),r(17533));r(21972),r(60474),r(66396),r(86656),r(92143),r(31450),r(71552),r(40642),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991);const u=new n.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends((0,o.J)(s.wq)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,l.Cb)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"thumbnail",void 0),d=(0,i._)([(0,a.j)("esri.layers.support.FeatureTemplate")],d);const p=d},78303:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(29768),o=r(66122),n=r(12047),s=r(34250),l=(r(76506),r(91306),r(97714)),a=r(17533),u=r(2906),d=r(9801),p=r(46495);r(21972),r(60474),r(66396),r(86656),r(92143),r(31450),r(71552),r(40642),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991),r(53523),r(59465),r(57251),r(42911),r(46826),r(45433);let c=class extends((0,o.J)(n.wq)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,d.f)(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e))e[t]&&(r[t]=e[t]?.toJSON());t.domains=r}};(0,i._)([(0,s.Cb)({json:{write:!0}})],c.prototype,"id",void 0),(0,i._)([(0,s.Cb)({json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,s.Cb)({json:{write:!0}})],c.prototype,"domains",void 0),(0,i._)([(0,l.r)("domains")],c.prototype,"readDomains",null),(0,i._)([(0,u.w)("domains")],c.prototype,"writeDomains",null),(0,i._)([(0,s.Cb)({type:[p.Z],json:{write:!0}})],c.prototype,"templates",void 0),c=(0,i._)([(0,a.j)("esri.layers.support.FeatureType")],c);const h=c},2180:(e,t,r)=>{r.d(t,{Z:()=>d});var i,o=r(29768),n=r(15324),s=r(12047),l=r(34250),a=(r(76506),r(91306),r(17533));r(91055),r(75067),r(21972),r(60474),r(66396),r(86656),r(92143),r(31450),r(71552),r(40642),r(6540),r(19657),r(6906),r(50406),r(60991),r(89914);let u=i=class extends s.wq{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new n.Z}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,o._)([(0,l.Cb)({type:String,json:{write:!0}})],u.prototype,"floorField",void 0),(0,o._)([(0,l.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,o._)([(0,l.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=i=(0,o._)([(0,a.j)("esri.layers.support.LayerFloorInfo")],u);const d=u}}]);