/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{L as t}from"../../../chunks/Logger.js";import{a as r,e,i as n,b as s,c as o,d as i,f as a,g as c,h as u,j as p}from"../../../chunks/ensureType.js";import{g as l}from"../../../chunks/get.js";import{g as f,m as g}from"../../../chunks/metadata.js";import m from"../../Error.js";import{h as d}from"../../lang.js";import"../../../config.js";import"../../../chunks/object.js";import"../../../chunks/maybe.js";import"../../../chunks/string.js";import"../../../chunks/utils.js";import"../../../chunks/handleUtils.js";function y(t,r,e){if(t&&r)if("object"==typeof r)for(const e of Object.getOwnPropertyNames(r))y(t,e,r[e]);else{if(r.includes(".")){const n=r.split("."),s=n.splice(n.length-1,1)[0];return void y(l(t,n),s,e)}const n=t.__accessor__;null!=n&&function(t,r){if(d("esri-unknown-property-errors")&&!function(t,r){return null!=r.metadatas[t]}(t,r))throw new m("set:unknown-property",function(t,r){return"setting unknown property '"+t+"' on instance of "+r.host.declaredClass}(t,r))}(r,n),t[r]=e}}function h(m={}){return(d,h)=>{if(d===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${d.name}.${h}. Accessor does not support static properties.`);const j=Object.getOwnPropertyDescriptor(d,h),v=f(d,h);j&&(j.get||j.set?(v.get=j.get||v.get,v.set=j.set||v.set):"value"in j&&("value"in m&&t.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${h}" on "${d.constructor.name}" already defined in the metadata`,m),v.value=m.value=j.value)),null!=m.readOnly&&(v.readOnly=m.readOnly);const w=m.aliasOf;if(w){const t="string"==typeof w?w:w.source,r="string"==typeof w?null:!0===w.overridable;let e;v.dependsOn=[t],v.get=function(){let r=l(this,t);if("function"==typeof r){e||(e=t.split(".").slice(0,-1).join("."));const n=l(this,e);n&&(r=r.bind(n))}return r},v.readOnly||(v.set=r?function(t){void 0!==t?this._override(h,t):this._clearOverride(h)}:function(r){y(this,t,r)})}const O=m.type,b=m.types;v.cast||(O?v.cast=function(t){let r=0,e=t;if(n(t))return s(t);for(;Array.isArray(e)&&1===e.length&&"string"!=typeof e[0]&&"number"!=typeof e[0];)e=e[0],r++;const l=e;if(o(l))return 0===r?i(l):a(i(l),r);if(1===r)return c(l);if(r>1)return u(l,r);const f=t;return f.from?f.from:p(f)}(O):b&&(Array.isArray(b)?v.cast=r(e(b[0])):v.cast=e(b))),m.range&&(v.cast=k(v.cast,m.range)),g(v,m)}}function j(t,r,e){const n=f(t,e);n.json||(n.json={});let s=n.json;return void 0!==r&&(s.origins||(s.origins={}),s.origins[r]||(s.origins[r]={}),s=s.origins[r]),s}function k(t,r){return e=>{let n=+t(e);return null!=r.step&&(n=Math.round(n/r.step)*r.step),null!=r.min&&(n=Math.max(r.min,n)),null!=r.max&&(n=Math.min(r.max,n)),n}}t.getLogger("esri.core.accessorSupport.set");export{k as ensureRange,h as property,j as propertyJSONMeta,y as s};
