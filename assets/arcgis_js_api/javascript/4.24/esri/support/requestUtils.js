// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../config ../core/has ../core/maybe ../core/promiseUtils ../core/urlUtils".split(" "),function(e,v,f,r,t,w,d){function u(){try{return new DOMException("Aborted","AbortError")}catch{const a=Error();a.name="AbortError";return a}}function l(){l=v._asyncToGenerator(function*(a){var c,b=f.request.crossOriginNoCorsDomains;b&&(b[d.getOrigin(a).toLowerCase()]=Date.now());b=d.urlToObject(a);a=b.path;"json"===(null==(c=b.query)?void 0:c.f)&&(a+="?f\x3djson");
try{yield fetch(a,{mode:"no-cors",credentials:"include"})}catch{}});return l.apply(this,arguments)}e.isNoCorsRequestRequired=function(a){const c=f.request.crossOriginNoCorsDomains;return c&&(a=d.getOrigin(a))?(a=a.toLowerCase(),!d.hasSameOrigin(a,d.getAppUrl())&&c[a]<Date.now()-36E5):!1};e.loadImageAsync=function(a,c,b=!1,g){return new Promise((x,m)=>{if(w.isAborted(g))m(u());else{var h=()=>{n();m(Error(`Unable to load ${c}`))},k=()=>{const p=a;n();x(p)},q=()=>{if(a){var p=a;n();p.src="";m(u())}},
n=()=>{r("esri-image-decode")||(a.removeEventListener("error",h),a.removeEventListener("load",k));a=k=h=null;t.isSome(g)&&g.removeEventListener("abort",q);q=null;b&&URL.revokeObjectURL(c)};t.isSome(g)&&g.addEventListener("abort",q);r("esri-image-decode")?a.decode().then(k,h):(a.addEventListener("error",h),a.addEventListener("load",k))}})};e.registerNoCorsDomains=function(a){f.request.crossOriginNoCorsDomains||(f.request.crossOriginNoCorsDomains={});const c=f.request.crossOriginNoCorsDomains;for(let b of a)b=
b.toLowerCase(),/^https?:\/\//.test(b)?c[d.getOrigin(b)]=0:(c[d.getOrigin("http://"+b)]=0,c[d.getOrigin("https://"+b)]=0)};e.sendNoCorsRequest=function(a){return l.apply(this,arguments)};Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});