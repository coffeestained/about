// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define(["exports","./error-handler","./nodes","./scanner","./token"],function(k,l,g,m,h){let n=function(){function e(){this.values=[];this.curly=this.paren=-1}var d=e.prototype;d.beforeFunctionExpression=function(a){return["(","{","[","return",",",...g.AssignmentOperators,...g.BinaryOperators,...g.LogicalOperators,...g.UnaryOperators].includes(a)};d.isRegexStart=function(){var a=this.values[this.values.length-1];let b=null!==a;switch(a){case "this":case "]":b=!1;break;case ")":a=this.values[this.paren-
1];b="if"===a||"while"===a||"for"===a||"with"===a;break;case "}":b=!0,"function"===this.values[this.curly-3]?b=(a=this.values[this.curly-4])?!this.beforeFunctionExpression(a):!1:"function"===this.values[this.curly-4]&&(b=(a=this.values[this.curly-5])?!this.beforeFunctionExpression(a):!0)}return b};d.push=function(a){a.type===h.TokenType.Punctuator||a.type===h.TokenType.Keyword?("{"===a.value?this.curly=this.values.length:"("===a.value&&(this.paren=this.values.length),this.values.push(a.value)):this.values.push(null)};
return e}(),p=function(){function e(a,b){this.errorHandler=new l.ErrorHandler;this.errorHandler.tolerant=b?"boolean"===typeof b.tolerant&&b.tolerant:!1;this.scanner=new m.Scanner(a,this.errorHandler);this.scanner.trackComment=b?"boolean"===typeof b.comment&&b.comment:!1;this.trackRange=b?"boolean"===typeof b.range&&b.range:!1;this.trackLoc=b?"boolean"===typeof b.loc&&b.loc:!1;this.buffer=[];this.reader=new n}var d=e.prototype;d.errors=function(){return this.errorHandler.errors};d.getNextToken=function(){if(0===
this.buffer.length){var a=this.scanner.scanComments();if(a)for(var b=0;b<a.length;++b){const c=a[b];var f=this.scanner.source.slice(c.slice[0],c.slice[1]);f={type:c.multiLine?"BlockComment":"LineComment",value:f};this.trackRange&&(f.range=c.range);this.trackLoc&&(f.loc=c.loc);this.buffer.push(f)}if(!this.scanner.eof()){a=null;this.trackLoc&&(a={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});let c;if("/"===this.scanner.source[this.scanner.index]&&
this.reader.isRegexStart()){b=this.scanner.saveState();try{c=this.scanner.scanRegExp()}catch(q){this.scanner.restoreState(b),c=this.scanner.lex()}}else c=this.scanner.lex();this.reader.push(c);b={type:h.TokenName[c.type],value:this.scanner.source.slice(c.start,c.end)};this.trackRange&&(b.range=[c.start,c.end]);this.trackLoc&&a&&(a.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},b.loc=a);c.type===h.TokenType.RegularExpression&&(b.regex={pattern:c.pattern,flags:c.flags});
this.buffer.push(b)}}return this.buffer.shift()};return e}();k.Tokenizer=p;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});