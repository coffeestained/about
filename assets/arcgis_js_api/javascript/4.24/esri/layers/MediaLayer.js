// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/HandleOwner ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./mediaUtils ./VideoElement ../../geometry/SpatialReference".split(" "),
function(D,x,z,K,B,H,q,J,C,w,p,v,E,h,n,G,I,A,O,d,m,c,e,y,g,k,a,b){const f=K.ofType({key:"type",defaultKeyValue:"image",base:g,typeMap:{image:y,video:a}});z=function(l){function r(u){var t=l.call(this,u)||this;t._index=new e.BoundsStore;t._elementViewsMap=new Map;t._elementsIndexes=new Map;t._elementsChangedHandler=L=>{for(var N of L.removed){const M=t._elementViewsMap.get(N);t._elementViewsMap.delete(N);t._index.delete(M);t.handles.remove(M);M.destroy();t.notifyChange("fullExtent")}({spatialReference:N}=
D._assertThisInitialized(t));for(const M of L.added){if(t._elementViewsMap.get(M))continue;const P=new k.MediaElementView({spatialReference:N,element:M});t._elementViewsMap.set(M,P);L=E.watch(()=>P.bounds,()=>t._updateIndexForElement(P,!1));t._updateIndexForElement(P,!0);t.handles.add(L,P)}t._elementsIndexes.clear();t.elements.forEach((M,P)=>t._elementsIndexes.set(M,P));t.emit("refresh")};t.elements=new f;return t}D._inheritsLoose(r,l);var F=r.prototype;F.load=function(){var u=D._asyncToGenerator(function*(t){v.throwIfAborted(t);
this.spatialReference||(t=this.elements.find(L=>w.isSome(L.georeference)&&w.isSome(L.georeference.coords)),this._set("spatialReference",t?w.unwrap(w.unwrap(t.georeference).coords).spatialReference:b.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.handles.add(this.elements.on("change",this._elementsChangedHandler));return this});return function(t){return u.apply(this,arguments)}}();F.destroy=function(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()};
F.queryElements=function(){var u=D._asyncToGenerator(function*(t,L){yield this.load();yield d.initializeProjection(t.spatialReference,this.spatialReference,null,L);t=d.project(t,this.spatialReference);if(!t)return[];t=t.normalize();const N=[];for(const M of t)this._index.forEachInBounds(m.fromExtent(M),({normalizedCoords:P,element:Q})=>{w.isSome(P)&&c.extentIntersectsPolygon(M,P)&&N.push(Q)});N.sort((M,P)=>this._elementsIndexes.get(M)-this._elementsIndexes.get(P));return N});return function(t,L){return u.apply(this,
arguments)}}();F._updateIndexForElement=function(u,t){const L=u.normalizedBounds,N=this._index.has(u),M=w.isSome(L);this._index.delete(u);M&&this._index.set(u,L);this.notifyChange("fullExtent");t||N===M||this.emit("refresh")};D._createClass(r,[{key:"elements",set:function(u){this._set("elements",B.referenceSetter(u,this._get("elements"),f))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;const u=this._index.fullBounds;return w.isNone(u)?null:new O({xmin:u[0],ymin:u[1],
xmax:u[2],ymax:u[3],spatialReference:this.spatialReference})}},{key:"spatialReference",set:function(u){"not-loaded"!==this.loadStatus?C.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",u)}}]);return r}(J.LoadableMixin(p.EsriPromiseMixin(q.HandleOwnerMixin(H.EventedAccessor))));x.__decorate([h.property()],z.prototype,"elements",null);x.__decorate([h.property({readOnly:!0})],z.prototype,"fullExtent",
null);x.__decorate([h.property()],z.prototype,"spatialReference",null);return z=x.__decorate([A.subclass("esri.layers.support.LocalMediaElementSource")],z)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(D,x,z,K,B){function H(C,w,p){q.minX=w[0];q.minY=w[1];q.maxX=w[2];q.maxY=w[3];C.search(q,p)}const q={minX:0,minY:0,maxX:0,
maxY:0};let J=function(){function C(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new K.PooledRBush(9,z("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const p=Array(this._idByBounds.size);let v=0;this._idByBounds.forEach((E,h)=>{p[v++]=h});this._indexInvalid=!1;this._index.clear();this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(p=>
this._idByBounds.has(p))),this._boundsToLoad.length=0)}}var w=C.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};w.delete=function(p){const v=this._boundsById.get(p);this._boundsById.delete(p);v&&(this._idByBounds.delete(v),this._indexInvalid||this._index.remove(v))};w.forEachInBounds=function(p,v){this._loadIndex();H(this._index,p,E=>v(this._idByBounds.get(E)))};w.get=function(p){return this._boundsById.get(p)};
w.has=function(p){return this._boundsById.has(p)};w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};w.set=function(p,v){if(!this._indexInvalid){const E=this._boundsById.get(p);E&&(this._index.remove(E),this._idByBounds.delete(E))}this._boundsById.set(p,v);v&&(this._idByBounds.set(v,p),this._indexInvalid||(this._boundsToLoad.push(v),5E4<this._boundsToLoad.length&&this._loadIndex()))};x._createClass(C,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const p=B.empty();for(const v of this._boundsById.values())v&&(p[0]=Math.min(v[0],p[0]),p[1]=Math.min(v[1],p[1]),p[2]=Math.max(v[2],p[2]),p[3]=Math.max(v[3],p[3]));return p}},{key:"valid",get:function(){return!this._indexInvalid}}]);return C}();D.BoundsStore=J;Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(D,x,z,K,B,H){function q(g,k){J(g,0,g.children.length,k,g)}function J(g,k,a,b,f){f||(f=new e([]));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(let l=k,r;l<a;l++)r=g.children[l],C(f,g.leaf?b(r):r);return f}function C(g,k){g.minX=Math.min(g.minX,k.minX);g.minY=Math.min(g.minY,k.minY);g.maxX=Math.max(g.maxX,k.maxX);g.maxY=Math.max(g.maxY,k.maxY)}function w(g,k){return g.minX-k.minX}function p(g,k){return g.minY-k.minY}function v(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}
function E(g){return g.maxX-g.minX+(g.maxY-g.minY)}function h(g,k){return g.minX<=k.minX&&g.minY<=k.minY&&k.maxX<=g.maxX&&k.maxY<=g.maxY}function n(g,k){return k.minX<=g.maxX&&k.minY<=g.maxY&&k.maxX>=g.minX&&k.maxY>=g.minY}function G(g,k,a,b,f){for(k=[k,a];k.length;){a=K.assumeNonNull(k.pop());const l=K.assumeNonNull(k.pop());if(a-l<=b)continue;const r=l+Math.ceil((a-l)/b/2)*b;H.quickselect(g,r,l,a,f);k.push(l,r,r,a)}}let I=function(){function g(a=9,b){this.compareMinX=w;this.compareMinY=p;this._toBBox=
f=>f;this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));b&&("function"===typeof b?this._toBBox=b:this._initFormat(b));this.clear()}var k=g.prototype;k.destroy=function(){this.clear();A.prune();O.prune();d.prune();m.prune()};k.all=function(a){this._all(this.data,a)};k.search=function(a,b){let f=this.data;const l=this._toBBox;if(n(a,f))for(A.clear();f;){for(let r=0,F=f.children.length;r<F;r++){const u=f.children[r],t=f.leaf?l(u):u;n(a,t)&&(f.leaf?b(u):h(a,
t)?this._all(u,b):A.push(u))}f=A.pop()}};k.collides=function(a){let b=this.data;const f=this._toBBox;if(!n(a,b))return!1;for(A.clear();b;){for(let l=0,r=b.children.length;l<r;l++){const F=b.children[l],u=b.leaf?f(F):F;if(n(a,u)){if(b.leaf||h(a,u))return!0;A.push(F)}}b=A.pop()}return!1};k.load=function(a){if(!a.length)return this;if(a.length<this._minEntries){for(let b=0,f=a.length;b<f;b++)this.insert(a[b]);return this}a=this._build(a.slice(0,a.length),0,a.length-1,0);if(this.data.children.length)if(this.data.height===
a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){const b=this.data;this.data=a;a=b}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this};k.insert=function(a){a&&this._insert(a,this.data.height-1);return this};k.clear=function(){this.data=new e([]);return this};k.remove=function(a){if(!a)return this;let b=this.data,f=null,l=0,r=!1,F;const u=this._toBBox(a);d.clear();for(m.clear();b||0<d.length;){if(!b){var t;b=K.assumeNonNull(d.pop());f=d.data[d.length-
1];l=null!=(t=m.pop())?t:0;r=!0}if(b.leaf&&(F=z.indexOf(b.children,a,b.children.length,b.indexHint),-1!==F)){b.children.splice(F,1);d.push(b);this._condense(d);break}r||b.leaf||!h(b,u)?f?(l++,b=f.children[l],r=!1):b=null:(d.push(b),m.push(l),l=0,f=b,b=b.children[0])}return this};k.toJSON=function(){return this.data};k.fromJSON=function(a){this.data=a;return this};k._all=function(a,b){for(O.clear();a;){var f;if(!0===a.leaf)for(const l of a.children)b(l);else O.pushArray(a.children);a=null!=(f=O.pop())?
f:null}};k._build=function(a,b,f,l){var r=f-b+1,F=this._maxEntries;if(r<=F)return a=new e(a.slice(b,f+1)),q(a,this._toBBox),a;l||(l=Math.ceil(Math.log(r)/Math.log(F)),F=Math.ceil(r/F**(l-1)));const u=new y([]);u.height=l;r=Math.ceil(r/F);F=r*Math.ceil(Math.sqrt(F));for(G(a,b,f,F,this.compareMinX);b<=f;b+=F){const t=Math.min(b+F-1,f);G(a,b,t,r,this.compareMinY);for(let L=b;L<=t;L+=r)u.children.push(this._build(a,L,Math.min(L+r-1,t),l-1))}q(u,this._toBBox);return u};k._chooseSubtree=function(a,b,f,
l){for(;;){l.push(b);if(!0===b.leaf||l.length-1===f)break;let r=Infinity,F=Infinity,u=void 0;for(let t=0,L=b.children.length;t<L;t++){const N=b.children[t],M=v(N),P=(Math.max(N.maxX,a.maxX)-Math.min(N.minX,a.minX))*(Math.max(N.maxY,a.maxY)-Math.min(N.minY,a.minY))-M;P<F?(F=P,r=M<r?M:r,u=N):P===F&&M<r&&(r=M,u=N)}b=u||b.children[0]}return b};k._insert=function(a,b,f){var l=this._toBBox;f=f?a:l(a);d.clear();l=this._chooseSubtree(f,this.data,b,d);l.children.push(a);for(C(l,f);0<=b;)if(d.data[b].children.length>
this._maxEntries)this._split(d,b),b--;else break;this._adjustParentBBoxes(f,d,b)};k._split=function(a,b){const f=a.data[b];var l=f.children.length;const r=this._minEntries;this._chooseSplitAxis(f,r,l);(l=this._chooseSplitIndex(f,r,l))?(l=f.children.splice(l,f.children.length-l),l=f.leaf?new e(l):new y(l),l.height=f.height,q(f,this._toBBox),q(l,this._toBBox),b?a.data[b-1].children.push(l):this._splitRoot(f,l)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};k._splitRoot=
function(a,b){this.data=new y([a,b]);this.data.height=a.height+1;q(this.data,this._toBBox)};k._chooseSplitIndex=function(a,b,f){let l,r,F=void 0;l=r=Infinity;for(let t=b;t<=f-b;t++){var u=J(a,0,t,this._toBBox);const L=J(a,t,f,this._toBBox),N=Math.max(0,Math.min(u.maxX,L.maxX)-Math.max(u.minX,L.minX))*Math.max(0,Math.min(u.maxY,L.maxY)-Math.max(u.minY,L.minY));u=v(u)+v(L);N<l?(l=N,F=t,r=u<r?u:r):N===l&&u<r&&(r=u,F=t)}return F};k._chooseSplitAxis=function(a,b,f){const l=a.leaf?this.compareMinX:w,r=
a.leaf?this.compareMinY:p,F=this._allDistMargin(a,b,f,l);b=this._allDistMargin(a,b,f,r);F<b&&a.children.sort(l)};k._allDistMargin=function(a,b,f,l){a.children.sort(l);l=this._toBBox;var r=J(a,0,b,l);const F=J(a,f-b,f,l);let u=E(r)+E(F);for(let t=b;t<f-b;t++){const L=a.children[t];C(r,a.leaf?l(L):L);u+=E(r)}for(f=f-b-1;f>=b;f--)r=a.children[f],C(F,a.leaf?l(r):r),u+=E(F);return u};k._adjustParentBBoxes=function(a,b,f){for(;0<=f;f--)C(b.data[f],a)};k._condense=function(a){for(let b=a.length-1;0<=b;b--){const f=
a.data[b];if(0===f.children.length)if(0<b){const l=a.data[b-1],r=l.children;r.splice(z.indexOf(r,f,r.length,l.indexHint),1)}else this.clear();else q(f,this._toBBox)}};k._initFormat=function(a){const b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this._toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")};return g}();const A=new B,O=new B,d=new B,m=new B({deallocator:void 0});
B=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let c=function(g){function k(){var a=g.apply(this,arguments)||this;a.height=1;a.indexHint=new z.PositionHint;return a}x._inheritsLoose(k,g);return k}(B),e=function(g){function k(a){var b=g.call(this)||this;b.children=a;b.leaf=!0;return b}x._inheritsLoose(k,g);return k}(c),y=function(g){function k(a){var b=g.call(this)||this;b.children=a;b.leaf=!1;return b}x._inheritsLoose(k,g);return k}(c);D.BBox=B;D.PooledRBush=I;Object.defineProperties(D,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(D){var x={exports:{}};(function(z){(function(K){K=K();void 0!==K&&(z.exports=K)})(function(){function K(q,J,C,w,p){for(;w>C;){if(600<w-C){var v=w-C+1,E=J-C+1,h=Math.log(v),n=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*n*(v-n)/v)*(0>E-v/2?-1:1);K(q,J,Math.max(C,Math.floor(J-E*n/v+h)),Math.min(w,Math.floor(J+(v-E)*n/v+h)),p)}v=q[J];E=C;n=w;B(q,C,J);for(0<p(q[w],v)&&B(q,C,w);E<n;){B(q,
E,n);E++;for(n--;0>p(q[E],v);)E++;for(;0<p(q[n],v);)n--}0===p(q[C],v)?B(q,C,n):(n++,B(q,n,w));n<=J&&(C=n+1);J<=n&&(w=n-1)}}function B(q,J,C){var w=q[J];q[J]=q[C];q[C]=w}function H(q,J){return q<J?-1:q>J?1:0}return function(q,J,C,w,p){K(q,J,C||0,w||q.length-1,p||H)}})})(x);D.quickselect=x.exports})},"esri/layers/support/ImageElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),
function(D,x,z,K,B,H,q,J,C,w,p){q=function(v){function E(h){h=v.call(this,h)||this;h.content=null;h.type="image";h.image=null;return h}D._inheritsLoose(E,v);E.prototype.load=function(){const h=this.image;if("string"===typeof h){var n=z(h,{responseType:"image"}).then(({data:G})=>{this._set("content",G)});this.addResolvingPromise(n)}else h instanceof HTMLImageElement?(n=h.decode().then(()=>{this._set("content",h)}),this.addResolvingPromise(n)):h?this._set("content",h):this.addResolvingPromise(Promise.reject(new K("image-element:invalid-image-type",
"Invalid image type",{image:h})));return Promise.resolve(this)};D._createClass(E,[{key:"image",set:function(h){"not-loaded"!==this.loadStatus?B.getLogger(this.declaredClass).error("#image","image cannot be changed after the element is loaded."):this._set("image",h)}}]);return E}(p);x.__decorate([H.property({readOnly:!0})],q.prototype,"content",void 0);x.__decorate([H.property()],q.prototype,"image",null);return q=x.__decorate([w.subclass("esri.layers.support.ImageElement")],q)})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(D,x,z,K,B,H,q,J,C,w,p,v){H={key:"type",base:v,typeMap:{corners:w,"extent-and-rotation":p}};z=function(E){function h(){var n=E.apply(this,arguments)||this;n.georeference=null;n.opacity=1;return n}D._inheritsLoose(h,E);return h}(z.NumericIdentifiableMixin(K));x.__decorate([B.property({types:H})],z.prototype,"georeference",void 0);x.__decorate([B.property()],z.prototype,"opacity",void 0);return z=x.__decorate([C.subclass("esri.layers.support.MediaElementBase")],z)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),
function(D,x,z,K,B,H,q,J,C,w,p,v){B=function(E){function h(n){n=E.call(this,n)||this;n.bottomLeft=null;n.bottomRight=null;n.topLeft=null;n.topRight=null;n.type="corners";return n}D._inheritsLoose(h,E);D._createClass(h,[{key:"coords",get:function(){let {topLeft:n,topRight:G,bottomLeft:I,bottomRight:A}=this;if(z.isNone(n)||z.isNone(G)||z.isNone(I)||z.isNone(A))return null;const O=n.spatialReference;G=p.projectOrLoad(G,O).geometry;I=p.projectOrLoad(I,O).geometry;A=p.projectOrLoad(A,O).geometry;return z.isNone(G)||
z.isNone(I)||z.isNone(A)?null:new w({rings:[[[I.x,I.y],[n.x,n.y],[G.x,G.y],[A.x,A.y],[I.x,I.y]]],spatialReference:O})}}]);return h}(v);x.__decorate([K.property({readOnly:!0})],B.prototype,"coords",null);x.__decorate([K.property({type:C})],B.prototype,"bottomLeft",void 0);x.__decorate([K.property({type:C})],B.prototype,"bottomRight",void 0);x.__decorate([K.property({type:C})],B.prototype,"topLeft",void 0);x.__decorate([K.property({type:C})],B.prototype,"topRight",void 0);return B=x.__decorate([J.subclass("esri.layers.support.CornersGeoreference")],
B)})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass".split(" "),function(D,x,z,K,B,H,q,J,C){z=function(w){function p(){return w.apply(this,arguments)||this}D._inheritsLoose(p,w);return p}(z.Clonable);return z=x.__decorate([C.subclass("esri.layers.support.GeoreferenceBase")],
z)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ./GeoreferenceBase".split(" "),function(D,x,z,K,B,H,q,J,C,w,p,v){function E(h,n,G){G=C.toRadian(G);const I=Math.cos(G),
A=Math.sin(G);return(O,d)=>[I*(O-h)+A*(d-n)+h,I*(d-n)-A*(O-h)+n]}B=function(h){function n(G){G=h.call(this,G)||this;G.extent=null;G.rotation=0;G.type="extent-and-rotation";return G}D._inheritsLoose(n,h);D._createClass(n,[{key:"coords",get:function(){if(z.isNone(this.extent))return null;const {xmin:G,ymin:I,xmax:A,ymax:O,spatialReference:d}=this.extent;if(this.rotation){const {x:c,y:e}=this.extent.center;var m=E(c,e,this.rotation);m=[m(G,I),m(G,O),m(A,O),m(A,I)];m.push(m[0])}else m=[[G,I],[G,O],[A,
O],[A,I],[G,I]];return new p({rings:[m],spatialReference:d})}}]);return n}(v);x.__decorate([K.property({readOnly:!0})],B.prototype,"coords",null);x.__decorate([K.property({type:w})],B.prototype,"extent",void 0);x.__decorate([K.property({type:Number})],B.prototype,"rotation",void 0);return B=x.__decorate([J.subclass("esri.layers.support.ExtentAndRotationGeoreference")],B)})},"esri/layers/support/mediaUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(D,x,z,K,B,H,q,J,C,w,p,v,E,h){D.MediaElementView=function(n){function G(I){return n.call(this,I)||this}x._inheritsLoose(G,n);x._createClass(G,[{key:"bounds",get:function(){const I=this.coords;return B.isNone(I)?null:E.fromExtent(I.extent)}},{key:"coords",get:function(){var I;const A=null==(I=B.unwrap(this.element.georeference))?void 0:I.coords;return v.projectOrLoad(A,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return p.fromJSON(h.normalizeCentralMeridianSync(this.coords))}},
{key:"normalizedBounds",get:function(){return B.isSome(this.normalizedCoords)?E.fromExtent(this.normalizedCoords.extent):null}}]);return G}(K);z.__decorate([H.property()],D.MediaElementView.prototype,"spatialReference",void 0);z.__decorate([H.property()],D.MediaElementView.prototype,"element",void 0);z.__decorate([H.property()],D.MediaElementView.prototype,"bounds",null);z.__decorate([H.property()],D.MediaElementView.prototype,"coords",null);z.__decorate([H.property()],D.MediaElementView.prototype,
"normalizedCoords",null);z.__decorate([H.property()],D.MediaElementView.prototype,"normalizedBounds",null);D.MediaElementView=z.__decorate([w.subclass("esri.layers.support.media.MediaElementView")],D.MediaElementView);Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../core/maybe ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),
function(D,x,z,K,B,H,q,J){function C(d,m){if(x.isNone(d))return null;var c=d.spatialReference,e=J.getInfo(c);d="toJSON"in d?d.toJSON():d;if(!e)return d;c=J.isWebMercator(c)?102100:4326;const y=q.cutParams[c].maxX,g=q.cutParams[c].minX;if(H.isPoint(d))return p(d,y,g);if(H.isMultipoint(d))d.points=d.points.map(k=>p(k,y,g));else{if(H.isExtent(d))return w(d,e);if(H.isPolygon(d)||H.isPolyline(d)){c=K.getBoundsXY(A,d);e=c[0];c=c[2];const k=2*q.offsetMagnitude(e,g)*y;d=0===k?d:q.updatePolyGeometry(d,k);
e+=k;c+=k;return c>y?G(d,y,m):e<g?G(d,g,m):d}}return d}function w(d,m){if(!m)return d;const c=v(d,m).map(e=>e.extent);return 2>c.length?c[0]||d:2<c.length?(d.xmin=m.valid[0],d.xmax=m.valid[1],d):{rings:c.map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}}function p(d,m,c){if(Array.isArray(d)){var e=d[0];e>m?(c=q.offsetMagnitude(e,m),d[0]=e+-2*c*m):e<c&&(m=q.offsetMagnitude(e,c),d[0]=e+-2*m*c)}else e=d.x,e>m?(c=q.offsetMagnitude(e,m),d.x+=-2*c*m):e<c&&(m=q.offsetMagnitude(e,
c),d.x+=-2*m*c);return d}function v(d,m){const c=[],{ymin:e,ymax:y,xmin:g,xmax:k}=d;var a=d.xmax-d.xmin;const [b,f]=m.valid,{x:l,frameId:r}=E(d.xmin,m),{x:F,frameId:u}=E(d.xmax,m);d=l===F&&0<a;if(a>2*f){a={xmin:g<k?l:F,ymin:e,xmax:f,ymax:y};d={xmin:b,ymin:e,xmax:g<k?F:l,ymax:y};m={xmin:0,ymin:e,xmax:f,ymax:y};const t={xmin:b,ymin:e,xmax:0,ymax:y},L=[],N=[];h(a,m)&&L.push(r);h(a,t)&&N.push(r);h(d,m)&&L.push(u);h(d,t)&&N.push(u);for(let M=r+1;M<u;M++)L.push(M),N.push(M);c.push(new I(a,[r]),new I(d,
[u]),new I(m,L),new I(t,N))}else l>F||d?c.push(new I({xmin:l,ymin:e,xmax:f,ymax:y},[r]),new I({xmin:b,ymin:e,xmax:F,ymax:y},[u])):c.push(new I({xmin:l,ymin:e,xmax:F,ymax:y},[r]));return c}function E(d,m){const [c,e]=m.valid;m=2*e;var y=0;d>e?(y=Math.ceil(Math.abs(d-e)/m),d-=y*m):d<c&&(y=Math.ceil(Math.abs(d-c)/m),d+=y*m,y=-y);return{x:d,frameId:y}}function h(d,m){const {xmin:c,ymin:e,xmax:y,ymax:g}=m;return n(d,c,e)&&n(d,c,g)&&n(d,y,g)&&n(d,y,e)}function n(d,m,c){return m>=d.xmin&&m<=d.xmax&&c>=d.ymin&&
c<=d.ymax?!0:!1}function G(d,m,c=!0){const e=!H.isPolyline(d);e&&B.closeRings(d);if(c)return(new O).cut(d,m);c=e?d.rings:d.paths;const y=e?4:2,g=c.length;m*=-2;for(let k=0;k<g;k++){const a=c[k];if(a&&a.length>=y){const b=[];for(const f of a)b.push([f[0]+m,f[1]]);c.push(b)}}e?d.rings=c:d.paths=c;return d}let I=function(d,m){this.extent=d;this.frameIds=m};const A=z.create();let O=function(){function d(){this.linesIn=[];this.linesOut=[]}var m=d.prototype;m.cut=function(c,e){this.xCut=e;if(c.rings)this.closed=
!0,e=c.rings,this.minPts=4;else if(c.paths)this.closed=!1,e=c.paths,this.minPts=2;else return null;for(var y of e)if(y&&!(y.length<this.minPts)){e=!0;for(const g of y)e?(this.moveTo(g),e=!1):this.lineTo(g);this.closed&&this.close()}this._pushLineIn();this._pushLineOut();e=[];for(const g of this.linesIn)g&&g.length>=this.minPts&&e.push(g);y=-2*this.xCut;for(const g of this.linesOut)if(g&&g.length>=this.minPts){for(const k of g)k[0]+=y;e.push(g)}this.closed?c.rings=e:c.paths=e;return c};m.moveTo=function(c){this._pushLineIn();
this._pushLineOut();this._prevSide=this._side(c[0]);this._moveTo(c[0],c[1],this._prevSide);this._firstPt=this._prevPt=c};m.lineTo=function(c){const e=this._side(c[0]);if(-1===e*this._prevSide){const y=this._intersect(this._prevPt,c);this._lineTo(this.xCut,y,0);this._prevSide=0}this._lineTo(c[0],c[1],e);this._prevSide=e;this._prevPt=c};m.close=function(){const c=this._firstPt,e=this._prevPt;c[0]===e[0]&&c[1]===e[1]||this.lineTo(c);this._checkClosingPt(this.lineIn);this._checkClosingPt(this.lineOut)};
m._moveTo=function(c,e,y){this.closed?(this.lineIn.push([0>=y?c:this.xCut,e]),this.lineOut.push([0<=y?c:this.xCut,e])):(0>=y&&this.lineIn.push([c,e]),0<=y&&this.lineOut.push([c,e]))};m._lineTo=function(c,e,y){this.closed?(this._addPolyVertex(this.lineIn,0>=y?c:this.xCut,e),this._addPolyVertex(this.lineOut,0<=y?c:this.xCut,e)):0>y?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([c,e])):0<y?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([c,e])):0>this._prevSide?(this.lineIn.push([c,
e]),this.lineOut.push([c,e])):0<this._prevSide&&(this.lineOut.push([c,e]),this.lineIn.push([c,e]))};m._addPolyVertex=function(c,e,y){const g=c.length;1<g&&c[g-1][0]===e&&c[g-2][0]===e?c[g-1][1]=y:c.push([e,y])};m._checkClosingPt=function(c){const e=c.length;3<e&&c[0][0]===this.xCut&&c[e-2][0]===this.xCut&&c[1][0]===this.xCut&&(c[0][1]=c[e-2][1],c.pop())};m._side=function(c){return c<this.xCut?-1:c>this.xCut?1:0};m._intersect=function(c,e){return c[1]+(this.xCut-c[0])/(e[0]-c[0])*(e[1]-c[1])};m._pushLineIn=
function(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn);this.lineIn=[]};m._pushLineOut=function(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut);this.lineOut=[]};return d}();D.CutVertical=O;D.normalizeCentralMeridianForDisplay=function(d){return C(d,!1)};D.normalizeCentralMeridianSync=function(d){return C(d,!0)};Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/VideoElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),
function(D,x,z,K,B,H,q,J,C,w){H=function(p){function v(h){h=p.call(this,h)||this;h.content=null;h.type="video";return h}D._inheritsLoose(v,p);var E=v.prototype;E.load=function(){const h=this.video;if("string"===typeof h){const n=document.createElement("video");n.src=h;n.crossOrigin="anonymous";n.autoplay=!0;n.muted=!0;n.loop=!0;this.addResolvingPromise(this._loadVideo(n).then(()=>{this._set("content",n)}))}else h instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(h).then(()=>{this._set("content",
h)})):this.addResolvingPromise(Promise.reject(new z("video-element:invalid-video-type","Invalid video type",{video:h})));return Promise.resolve(this)};E._loadVideo=function(h){return new Promise((n,G)=>{h.oncanplay=()=>{h.oncanplay=null;h.play().then(n,G)};"anonymous"!==h.crossOrigin&&(h.crossOrigin="anonymous",h.src=h.src)})};D._createClass(v,[{key:"video",set:function(h){"not-loaded"!==this.loadStatus?K.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded."):
this._set("video",h)}}]);return v}(w);x.__decorate([B.property({readOnly:!0})],H.prototype,"content",void 0);x.__decorate([B.property()],H.prototype,"video",null);return H=x.__decorate([C.subclass("esri.layers.support.VideoElement")],H)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ./support/LocalMediaElementSource".split(" "),function(D,x,z,K,B,H,q,J,C,w,p,v,E,h){q=function(n){function G(A){A=n.call(this,A)||this;A.copyright=null;A.fullExtent=null;A.spatialReference=
null;A.type="media";A.source=new h;return A}D._inheritsLoose(G,n);var I=G.prototype;I.load=function(A){this.spatialReference&&(this.source.spatialReference=this.spatialReference);A=this.source.load(A).then(()=>{this.spatialReference=this.source.spatialReference});this.addResolvingPromise(A);return Promise.resolve(this)};I.destroy=function(){var A;null==(A=B.unwrap(this.source))?void 0:A.destroy()};I.castSource=function(A){return A?Array.isArray(A)||A instanceof z?new h({elements:A}):A:null};D._createClass(G,
[{key:"source",set:function(A){"not-loaded"!==this.loadStatus?K.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded."):this._set("source",A)}}]);return G}(v.BlendLayer(E.ScaleRangeLayer(p)));x.__decorate([H.property({type:String})],q.prototype,"copyright",void 0);x.__decorate([H.property({aliasOf:"source.fullExtent"})],q.prototype,"fullExtent",void 0);x.__decorate([H.property({type:["show","hide"]})],q.prototype,"listMode",void 0);x.__decorate([H.property({nonNullable:!0})],
q.prototype,"source",null);x.__decorate([C.cast("source")],q.prototype,"castSource",null);x.__decorate([H.property()],q.prototype,"spatialReference",void 0);x.__decorate([H.property({readOnly:!0})],q.prototype,"type",void 0);return q=x.__decorate([w.subclass("esri.layers.MediaLayer")],q)});