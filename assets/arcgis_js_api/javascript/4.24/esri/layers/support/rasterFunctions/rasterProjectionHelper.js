// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),function(z,ma,za,na,w,I,y,B,N,C,oa,pa){function P(a,b,c){return!B.canProjectWithoutEngine(a,b,c)}function J(a,b,c){if((a=P(a,b,c))&&!B.isLoaded())throw new na("rasterprojectionhelper-project",
"projection engine is not loaded");return a}function Q(){Q=ma._asyncToGenerator(function*(){if(B.isLoaded())return null;yield B.load()});return Q.apply(this,arguments)}function R(a,b,c,d=null){const h=a.spatialReference;if(h.equals(b))return a;J(h,b,d);c=c.center;c=new N({xmin:c.x-a.x/2,xmax:c.x+a.x/2,ymin:c.y-a.y/2,ymax:c.y+a.y/2,spatialReference:h});d=B.project(c,b,d);c=F(b);w.isNone(d)||w.isSome(c)&&d.width>=c?(b=I.getMetersPerUnitForSR(h)/I.getMetersPerUnitForSR(b),a={x:a.x*b,y:a.y*b}):a={x:d.width,
y:d.height};return a}function E(a,b=.01){return I.getMetersPerUnitForSR(a)?b/I.getMetersPerUnitForSR(a):0}function S(a,b,c=null,d=!0){var h=a.spatialReference;if(h.equals(b))return a;J(h,b,c);c=B.project(a,b,c);if(!d||!c)return c;d=O(h,!0);b=O(b,!0);(h=E(h))&&w.isSome(d)&&w.isSome(b)&&(0<c.x&&Math.abs(a.x-d[0])<h?c.x-=b[1]-b[0]:0>c.x&&Math.abs(a.x-d[1])<h&&(c.x+=b[1]-b[0]));return c}function aa(a){const {inSR:b,outSR:c,datumTransformation:d,preferPE:h}=a;if(b.equals(c))return{points:a}=T(a,null),
a;if(b.isWebMercator&&c.isWGS84||b.isWGS84&&c.isWebMercator){{const {cols:l,rows:m,xres:n,yres:r,usePixelCenter:p,inSR:v,outSR:t}=a;let {xmin:u,ymax:q}=a;p&&(u+=n/2,q-=r/2);a=[];var g=[],f=Math.max(l,m);for(var k=0;k<f;k++){var e=B.project(new C({x:u+n*Math.min(l,k),y:q-r*Math.min(m,k),spatialReference:v}),t);k<=l&&a.push(e.x);k<=m&&g.push(e.y)}f=[];for(k=0;k<l;k++)for(e=0;e<m;e++)f.push([a[k],g[e]]);a=f}return a}if(J(b,c,d)&&h){if(b.isGeographic)return ba(a);g=H(b);if(w.isSome(g))return ba(a)}return qa(a)}
function qa(a){var {points:b}=T(a,null);b=b.map(c=>new C(c[0],c[1],a.inSR));return B.project(b,a.outSR,a.datumTransformation).map(c=>c?[c.x,c.y]:[NaN,NaN])}function ba(a){const {inSR:b,outSR:c,datumTransformation:d}=a,h=H(b),{points:g,mask:f}=T(a,h);b.isGeographic||(a=b.wkid?y.PeFactory.coordsys(b.wkid):y.PeFactory.fromString(b.isGeographic?y.PeDefs.PE_TYPE_GEOGCS:y.PeDefs.PE_TYPE_PROJCS,b.wkt),y.PeCSTransformations.projToGeog(a,g.length,g));w.isSome(d)&&d.steps.length&&d.steps.forEach(k=>{const e=
k.wkid?y.PeFactory.geogtran(k.wkid):y.PeFactory.fromString(y.PeDefs.PE_TYPE_GEOGTRAN,k.wkt);y.PeGTTransformations.geogToGeog(e,g.length,g,null,k.isInverse?y.PeDefs.PE_TRANSFORM_2_TO_1:y.PeDefs.PE_TRANSFORM_1_TO_2)});c.isGeographic||(a=H(c,!0),a=w.isSome(a)&&a.isEnvelope?[a.bbox[1],a.bbox[3]]:[-90,90],ra(g,a),a=c.wkid?y.PeFactory.coordsys(c.wkid):y.PeFactory.fromString(c.isGeographic?y.PeDefs.PE_TYPE_GEOGCS:y.PeDefs.PE_TYPE_PROJCS,c.wkt),y.PeCSTransformations.geogToProj(a,g.length,g));a=g;if(f&&g.length!==
f.length){a=[];for(let k=0,e=0;k<f.length;k++)f[k]?a.push(g[e++]):a.push([NaN,NaN])}return a}function H(a,b=!1){var c=a.wkid||a.wkt;if(!c||a.isGeographic)return null;c=String(c);if(U.has(c))return c=U.get(c),b?null==c?void 0:c.gcs:null==c?void 0:c.pcs;var d=a.wkid?y.PeFactory.coordsys(a.wkid):y.PeFactory.fromString(a.isGeographic?y.PeDefs.PE_TYPE_GEOGCS:y.PeDefs.PE_TYPE_PROJCS,a.wkt);a=E(a,1E-4);a=ca(d,a);d=ca(d,0,!0);U.set(c,{pcs:a,gcs:d});return b?d:a}function ca(a,b=0,c=!1){var d=y.PePCSInfo.generate(a),
h=c?a.horizonGcsGenerate():a.horizonPcsGenerate();if(null==h||!h.length)return null;a=!1;var g=h.find(m=>1===m.getInclusive()&&1===m.getKind());if(!g){g=h.find(m=>1===m.getInclusive()&&0===m.getKind());if(!g)return null;a=!0}c=c?0:(2===d.getNorthPoleLocation()?1:0)|(2===d.getSouthPoleLocation()?2:0);d=d.isPannableRectangle();g=g.getCoord();if(a)return{isEnvelope:a,isPannable:d,vertices:g,coef:null,bbox:[g[0][0]-b,g[0][1]-b,g[1][0]+b,g[1][1]+b],poleLocation:c};b=0;a=[];let [f,k]=g[0],[e,l]=g[0];for(let m=
0,n=g.length;m<n;m++){b++;b===n&&(b=0);const [r,p]=g[m],[v,t]=g[b];if(t===p)a.push([r,v,p,t,2]);else{h=(v-r)/(t-p||1E-4);const u=r-h*p;p<t?a.push([h,u,p,t,0]):a.push([h,u,t,p,1])}f=f<r?f:r;k=k<p?k:p;e=e>r?e:r;l=l>p?l:p}return{isEnvelope:!1,isPannable:d,vertices:g,coef:a,bbox:[f,k,e,l],poleLocation:c}}function T(a,b){const c=[],{cols:d,rows:h,xres:g,yres:f,usePixelCenter:k}=a;let {xmin:e,ymax:l}=a;k&&(e+=g/2,l-=f/2);if(w.isNone(b)){for(a=0;a<d;a++)for(b=0;b<h;b++)c.push([e+g*a,l-f*b]);return{points:c}}a=
new Uint8Array(d*h);if(b.isEnvelope){const {bbox:[u,q,A,D]}=b;for(let G=0,K=0;G<d;G++){var m=e+g*G,n=b.isPannable||m>=u&&m<=A;for(var r=0;r<h;r++,K++){var p=l-f*r;n&&p>=q&&p<=D&&(c.push([m,p]),a[K]=1)}}return{points:c,mask:a}}({coef:m}=b);b=[];for(n=0;n<h;n++){var v=l-f*n;r=[];p=[];for(var t=0;t<m.length;t++){const [u,q,A,D,G]=m[t];v===A&&A===D?(r.push(u),r.push(q),p.push(2),p.push(2)):v>=A&&v<=D&&(r.push(u*v+q),p.push(G))}v=r;if(2<r.length){t=2===p[0]?0:p[0];let u=r[0];v=[];for(let q=1;q<p.length;q++)if(2!==
p[q]||q===p.length-1)p[q]!==t&&(v.push(0===t?Math.min(u,r[q-1]):Math.max(u,r[q-1])),t=p[q],u=r[q]),q===p.length-1&&v.push(0===p[q]?Math.min(u,r[q]):Math.max(u,r[q]));v.sort((q,A)=>q-A)}else r[0]>r[1]&&(v=[r[1],r[0]]);b.push(v)}for(let u=0,q=0;u<d;u++)for(m=e+g*u,n=0;n<h;n++,q++)if(r=l-f*n,p=b[n],2===p.length)m>=p[0]&&m<=p[1]&&(c.push([m,r]),a[q]=1);else if(2<p.length){v=!1;for(t=0;t<p.length;t+=2)if(m>=p[t]&&m<=p[t+1]){v=!0;break}v&&(c.push([m,r]),a[q]=1)}return{points:c,mask:a}}function ra(a,b){const [c,
d]=b;for(b=0;b<a.length;b++){const h=a[b][1];if(h<c||h>d)a[b]=[NaN,NaN]}}function da(a){const b=F(a[0].spatialReference);if(2>a.length||w.isNone(b))return a[0];let {xmin:c,xmax:d,ymin:h,ymax:g}=a[0];for(let f=1;f<a.length;f++){const k=a[f];d=k.xmax+b*f;h=Math.min(h,k.ymin);g=Math.max(g,k.ymax)}return new N({xmin:c,xmax:d,ymin:h,ymax:g,spatialReference:a[0].spatialReference})}function V(a,b,c=null,d=!0){var h=a.spatialReference;if(h.equals(b))return a;var g=ea(a);const f=F(h,!0);var k=F(b);if(0===
g||w.isNone(f)||w.isNone(k))return g=fa(a,b,c,d),w.isNone(f)&&w.isSome(k)&&Math.abs(g.width-k)<E(b)&&B.isLoaded()&&(h=H(h),w.isSome(h)&&h.poleLocation===W.None&&a.width<(h.bbox[2]-h.bbox[0])/2)?sa(a,b)||g:g;k=a.clone().normalize();if(1===k.length&&a.xmax<f&&a.xmax-f/2>E(h)){const {xmin:e,xmax:l}=a;for(let m=0;m<=g;m++)k[m]=new N({xmin:0===m?e:-f/2,xmax:m===g?l-f*m:f/2,ymin:a.ymin,ymax:a.ymax,spatialReference:h})}a=k.map(e=>fa(e,b,c,d));return da(a.filter(e=>!!e))}function sa(a,b){const c=F(b);if(w.isNone(c))return null;
let {xmin:d,ymin:h,xmax:g,ymax:f}=a;var k=a.spatialReference;a=new oa({spatialReference:k,rings:[[[d,h],[g,h],[g,f],[d,f],[d,h]]]});a=B.project(a,b);if(2!==a.rings.length||!a.rings[0].length||!a.rings[1].length)return null;({rings:a}=a);k=E(k);b=new N({spatialReference:b});for(let e=0;2>e;e++){d=g=a[e][0][0];h=f=a[e][0][1];for(let l=0;l<a[e].length;l++)d=d>a[e][l][0]?a[e][l][0]:d,g=g<a[e][l][0]?a[e][l][0]:g,h=h>a[e][l][1]?a[e][l][1]:h,f=f<a[e][l][1]?a[e][l][1]:f;if(0===e)b.ymin=h,b.ymax=f,b.xmin=
d,b.xmax=g;else if(b.ymin=Math.min(b.ymin,h),b.ymax=Math.max(b.ymax,f),Math.abs(g-c/2)<k)b.xmin=d,b.xmax+=c;else if(Math.abs(d+c/2)<k)b.xmax=g+c;else return null}return b}function fa(a,b,c=null,d=!0,h=!0){const g=a.spatialReference;if(g.equals(b))return a;J(g,b,c);const f=B.project(a,b,c);if(h&&b.isWebMercator&&f&&(f.ymax=Math.min(2.0037508342787E7,f.ymax),f.ymin=Math.max(-2.0037508342787E7,f.ymin),f.ymin>=f.ymax))return null;if(!d||!f)return f;var k=O(g,!0);d=O(b,!0);if(w.isNone(k)||w.isNone(d))return f;
h=E(g,.001);const e=E(g,500);var l=E(b,.001);if(Math.abs(f.xmin-d[0])<l&&Math.abs(f.xmax-d[1])<l){l=Math.abs(a.xmin-k[0]);k=Math.abs(k[1]-a.xmax);if(l<h&&k>e){f.xmin=d[0];var m=[];m.push(new C(a.xmax,a.ymin,g));m.push(new C(a.xmax,(a.ymin+a.ymax)/2,g));m.push(new C(a.xmax,a.ymax,g));m=m.map(n=>S(n,b,c)).filter(n=>!isNaN(null==n?void 0:n.x)).map(n=>n.x);f.xmax=Math.max.apply(null,m)}k<h&&l>e&&(f.xmax=d[1],d=[],d.push(new C(a.xmin,a.ymin,g)),d.push(new C(a.xmin,(a.ymin+a.ymax)/2,g)),d.push(new C(a.xmin,
a.ymax,g)),a=d.map(n=>S(n,b,c)).filter(n=>!isNaN(null==n?void 0:n.x)).map(n=>n.x),f.xmin=Math.min.apply(null,a))}else a=E(b,.001),Math.abs(f.xmin-d[0])<a&&(f.xmin=d[0]),Math.abs(f.xmax-d[1])<a&&(f.xmax=d[1]);return f}function F(a,b=!1){return a.isWebMercator?2*(b?2.0037508342787E7:2.0037508342788905E7):a.wkid&&a.isGeographic?360:2*ta[a.wkid]||null}function O(a,b=!1){if(a.isGeographic)return[-180,180];a=F(a,b);return w.isSome(a)?[-a/2,a/2]:null}function ha(a,b,c,d){a=(a-b)/c;0!==a-Math.floor(a)?a=
Math.floor(a):d&&--a;return a}function ea(a,b=!1){var c=F(a.spatialReference);if(w.isNone(c))return 0;const d=b?0:-(c/2),h=E(a.spatialReference),g=!b&&Math.abs(a.xmin+c/2)<h?-c/2:a.xmin;a=ha(!b&&Math.abs(a.xmax-c/2)<h?c/2:a.xmax,d,c,!0);c=ha(g,d,c,!1);return a-c}function X(a){const {projectedExtent:b,srcBufferExtent:c,pixelSize:d,datumTransformation:h,rasterTransform:g}=a;var f=b.spatialReference;const k=c.spatialReference;var e=J(f,k);const {xmin:l,ymin:m,xmax:n,ymax:r}=b,p=F(k),v=w.isSome(p)&&(a.hasWrapAround||
"gcs-shift"===(null==g?void 0:g.type));a=a.spacing||[32,32];var t=a[0]*d.x,u=a[1]*d.y;const q=1===a[0],A=Math.ceil((n-l)/t-.1/a[0])+(q?0:1),D=Math.ceil((r-m)/u-.1/a[1])+(q?0:1);t=aa({cols:A,rows:D,xmin:l,ymax:r,xres:t,yres:u,inSR:f,outSR:k,datumTransformation:h,preferPE:4>=a[0],usePixelCenter:q});u=[];let G,K=0;const ia=q?-1:NaN,{xmin:ja,xmax:Y,ymax:ua,width:va,height:wa}=c,xa=E(k,500),ya=w.isSome(p)&&0<ja&&Y>p/2;var L=!1;e&&(L=H(f),L=w.isSome(L)&&0<L.poleLocation);for(f=0;f<A;f++){e=[];for(let M=
0;M<D;M++){var x=t[f*D+M];v&&x[0]>Y&&x[0]>p/2-xa?x[0]-=p:v&&0===f&&0>x[0]&&ya&&!g&&(x[0]+=p);!x||isNaN(x[0])||isNaN(x[1])?(u.push(ia),u.push(ia),e.push(null),K++):(g&&(x=g.inverseTransform(new C({x:x[0],y:x[1],spatialReference:k})),x=[x.x,x.y]),e.push(x),0<f&&v&&G[M]&&x[0]<G[M][0]&&(x[0]+=p,L&&x[0]>Y&&x[0]>p&&(x[0]-=p)),u.push((x[0]-ja)/va),u.push((ua-x[1])/wa))}G=e}return{offsets:u,error:null,coefficients:null,outofBoundPointCount:K,spacing:a,size:q?[A,D]:[A-1,D-1]}}function ka(a,b,c){const {cols:d,
rows:h}=b;b=new Float32Array((d-1)*(h-1)*12);const g=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),f=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let r=0;r<d-1;r++){for(var k=0;k<h-1;k++){var e=r*h*2+2*k,l=a[e];const p=a[e+1];var m=a[e+2],n=a[e+3];e+=2*h;const v=a[e],t=a[e+1],u=a[e+2];e=a[e+3];let q=0,A=12*(k*(d-1)+r);for(let D=0;3>D;D++)b[A++]=g[q++]*l+g[q++]*m+g[q++]*u;q=0;for(m=0;3>m;m++)b[A++]=g[q++]*p+g[q++]*n+g[q++]*e;q=0;for(n=0;3>n;n++)b[A++]=f[q++]*l+f[q++]*v+f[q++]*u;q=0;for(l=0;3>l;l++)b[A++]=
f[q++]*p+f[q++]*t+f[q++]*e}if(c)for(k=0;k<b.length;k++)isNaN(b[k])&&(b[k]=-1)}return b}var W;(function(a){a[a.None=0]="None";a[a.North=1]="North";a[a.South=2]="South";a[a.Both=3]="Both"})(W||(W={}));const la=(a,b,c,d=0)=>{if(1===c[0])return[0,0];var h=1,g=-1,f=1,k=-1;for(var e=0;e<a.length;e+=2)isNaN(a[e])||(h=h>a[e]?a[e]:h,g=g>a[e]?g:a[e],f=f>a[e+1]?a[e+1]:f,k=k>a[e+1]?k:a[e+1]);const {cols:l,rows:m}=b;b=(g-h)/l/c[0];c=(k-f)/m/c[1];d*=2;f=0;k=!1;h=[0,0];for(g=0;g<l-3;g++){for(e=0;e<m-3;e++){var n=
g*m*2+2*e;const r=Math.abs(((a[n]+a[n+4]+a[n+4*m]+a[n+4*m+4])/4-a[n+2*m+2])/b);n=Math.abs(((a[n+1]+a[n+5]+a[n+4*m+1]+a[n+4*m+5])/4-a[n+2*m+3])/c);r+n>f&&(f=r+n,h=[r,n]);if(d&&f>d){k=!0;break}}if(k)break}return h},ta={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,
53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},U=new Map,Z=new Map;z.computeProjectedScales=
function(a,b,c=512,d=!0){const {extent:h,spatialReference:g,pixelSize:f}=a,k=R(new C({x:f.x,y:f.y,spatialReference:g}),b,h);if(null==k)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var e=(k.x+k.y)/2,l=I.getMetersPerUnitForSR(b);e=e*l*96*39.37;const m=b.isGeographic?256/c*2.958287637958547E8:256/c*5.91657527591555E8;c="vector-magdir"===a.dataType||"vector-uv"===a.dataType;const n=V(h,b);c||d&&(b.isGeographic||b.isWebMercator)&&(c=0>n.xmin*n.xmax);d=e;if(c)d=
m,a=b.isGeographic?1.341104507446289E-6:.29858214164761665,l=96*a*l*39.37,b=R(new C({x:a,y:a,spatialReference:{wkid:b.isGeographic?4326:3857}}),g,n),b.x*=d/l,b.y*=d/l;else{b={x:f.x,y:f.y};a=Math.ceil(Math.log(Math.min(a.width,a.height)/32)/Math.LN2);for(l=0;d<.5005*m&&l<a;)l++,d*=2,b.x*=2,b.y*=2;1.001>=Math.max(d,m)/Math.min(d,m)&&(d=m)}a=[d];l=[{x:b.x,y:b.y}];for(e=Math.min(70.5310735,e)/1.001;d>=e;)d/=2,b.x/=2,b.y/=2,a.push(d),l.push({x:b.x,y:b.y});return{projectedPixelSize:k,scales:a,srcResolutions:l,
isCustomTilingScheme:!c}};z.defaultGridSpacing=32;z.defaultProjectionToleranceInPixels=4;z.getDefaultDatumTransformationForDataset=function(a,b,c){return J(a.spatialReference,b)?c?B.getTransformation(b,a.spatialReference,a):B.getTransformation(a.spatialReference,b,a):null};z.getProjectedGridPoints=aa;z.getProjectionOffsetGrid=function(a){var b=a.isAdaptive&&null==a.spacing;let c=a.spacing||[32,32],d=X(a);var h={cols:d.size[0]+1,rows:d.size[1]+1};const g=0<d.outofBoundPointCount&&d.outofBoundPointCount<
d.offsets.length/2;let f=d.outofBoundPointCount===d.offsets.length/2||b&&g?[0,0]:la(d.offsets,h,c,4);const k=(f[0]+f[1])/2;var e=a.projectedExtent.spatialReference;const l=a.srcBufferExtent.spatialReference;b&&(g||4<k)&&(P(e,l,a.datumTransformation)&&(e.isGeographic||w.isSome(H(e))),c=[4,4],d=X({...a,spacing:c}),h={cols:d.size[0]+1,rows:d.size[1]+1},f=la(d.offsets,h,c,4));d.error=f;1<c[0]&&(d.coefficients=ka(d.offsets,h,g));!a.includeGCSGrid||e.isGeographic||e.isWebMercator||(l.isGeographic?d.gcsGrid=
{offsets:d.offsets,coefficients:d.coefficients,spacing:c}:(b=H(e),w.isSome(b)&&!b.isEnvelope&&(e&&!e.isGeographic&&(b=String(e.wkid||e.wkt),Z.has(b)?e=Z.get(b):(e=(e.wkid?y.PeFactory.coordsys(e.wkid):y.PeFactory.fromString(y.PeDefs.PE_TYPE_PROJCS,e.wkt)).getGeogcs().getCode(),Z.set(b,e)),e=new pa({wkid:e})),e=V(a.projectedExtent,e),{offsets:a}=X({...a,srcBufferExtent:e,spacing:c}),h=ka(a,h,g),d.gcsGrid={offsets:a,coefficients:h,spacing:c})));return d};z.getRasterDatasetAlignmentInfo=function(a){const b=
a.storageInfo.origin.x;var c=F(a.spatialReference,!0);if(w.isNone(c))return{originX:b,halfWorldWidth:null,pyramidsInfo:null};const d=c/2,{nativePixelSize:h,storageInfo:g,extent:f}=a,{maximumPyramidLevel:k,blockWidth:e,pyramidScalingFactor:l}=g;let m=h.x;const n=[];a=w.isSome(a.transform)&&"gcs-shift"===a.transform.type;const r=b+(a?0:d);c=a?c-b:d-b;for(let p=0;p<=k;p++){const v=(f.xmax-b)/m/e,t=c/m/e;n.push({resolutionX:m,blockWidth:e,datsetColumnCount:0===v-Math.floor(v)?v:Math.ceil(v),worldColumnCountFromOrigin:0===
t-Math.floor(t)?t:Math.ceil(t),leftMargin:Math.round(r/m)%e,rightPadding:(e-Math.round(c/m)%e)%e,originColumnOffset:Math.floor(r/m/e)});m*=l}return{originX:b,halfWorldWidth:d,pyramidsInfo:n,hasGCSSShiftTransform:a}};z.getWorldWidth=F;z.getWorldWrapCount=ea;z.load=function(){return Q.apply(this,arguments)};z.minimumGridSpacing=4;z.projectExtent=V;z.projectPoint=S;z.projectResolution=R;z.requirePE=P;z.snapExtent=function(a){a=a.clone().normalize();return 1===a.length?a[0]:da(a)};z.snapPyramid=function(a,
b,c){const {storageInfo:d,pixelSize:h}=b;let g=!1;var {pyramidResolutions:f}=d;if(w.isSome(f)&&f.length){a=(a.x+a.y)/2;var k=f[f.length-1];k=(k.x+k.y)/2;var e=(h.x+h.y)/2;if(a<=e)var l=0;else if(a>=k)l=f.length,g=8<a/k;else{k=e;for(let m=1;m<=f.length;m++){e=(f[m-1].x+f[m-1].y)/2;if(a<=e){a===e?l=m:"down"===c?(l=m-1,g=8<a/k):l="up"===c?m:a-k>e-a||2<a/k?m:m-1;break}k=e}}c=0===l?h:f[l-1];g&&(f=Math.min(c.x,c.y),a=I.getMetersPerUnitForSR(b.spatialReference),19567<f*a&&(g=!1));return{pyramidLevel:l,pyramidResolution:new C({x:c.x,
y:c.y,spatialReference:b.spatialReference}),excessiveReading:g}}l=Math.log(a.x/h.x)/Math.LN2;a=Math.log(a.y/h.y)/Math.LN2;f=b.storageInfo.maximumPyramidLevel||0;l="down"===c?Math.floor(Math.min(l,a)):"up"===c?Math.ceil(Math.max(l,a)):Math.round((l+a)/2);0>l?l=0:l>f&&(g=l>f+3,l=f);c=2**l;b=new C({x:c*b.nativePixelSize.x,y:c*b.nativePixelSize.y,spatialReference:b.spatialReference});return{pyramidLevel:l,pyramidResolution:b,excessiveReading:g}};Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});