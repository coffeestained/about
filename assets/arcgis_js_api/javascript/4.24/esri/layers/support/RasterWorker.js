// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(S){return function(){function r(X){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(X&&X.steps)for(const t of X.steps)t instanceof S?this.steps.push(t):this.steps.push(new S({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}r.cacheKey=function(X,t){return[void 0!==X.wkid&&null!==X.wkid?X.wkid.toString():"-1",void 0!==X.wkt&&null!==X.wkt?X.wkt.toString():
"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};r.fromGE=function(X){const t=new r;let Y="";for(const fa of X.steps)X=S.fromGE(fa),t.steps.push(X),Y+=X.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=Y;return t};var ea=r.prototype;ea.getInverse=function(){const X=new r;X.steps=[];for(let t=this.steps.length-1;0<=t;t--)X.steps.push(this.steps[t].getInverse());return X};ea.getGTListEntry=function(){let X="";for(const t of this.steps)X+=
t.uid.toString()+",";X!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=X);return this._gtlistentry};ea.assignCachedGe=function(X,t,Y){this._cached_projection[r.cacheKey(X,t)]=Y};ea.getCachedGeTransformation=function(X,t){let Y="";for(const fa of this.steps)Y+=fa.uid.toString()+",";Y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Y);X=this._cached_projection[r.cacheKey(X,t)];return void 0===X?null:X};return r}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(S){let r=0;return function(){function ea(X=null){this.uid=r++;X?(this._wkt=void 0!==X.wkt?X.wkt:null,this._wkid=void 0!==X.wkid?X.wkid:-1,this._isInverse=void 0!==X.isInverse?!0===X.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ea.fromGE=function(X){const t=new ea;t._wkt=X.wkt;t._wkid=X.wkid;t._isInverse=X.isInverse;return t};ea.prototype.getInverse=function(){const X=new ea;X._wkt=this.wkt;X._wkid=this._wkid;X._isInverse=!this.isInverse;return X};S._createClass(ea,[{key:"wkt",
get:function(){return this._wkt},set:function(X){this._wkt=X;this.uid=r++}},{key:"wkid",get:function(){return this._wkid},set:function(X){this._wkid=X;this.uid=r++}},{key:"isInverse",get:function(){return this._isInverse},set:function(X){this._isInverse=X;this.uid=r++}}]);return ea}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q){var I;const L=fa.getLogger("esri.layers.support.PixelBlock");ea=I=function(v){function n(d){d=v.call(this,d)||this;d.width=null;d.height=null;d.pixelType="f32";d.validPixelCount=null;d.mask=null;d.maskIsAlpha=!1;d.pixels=null;d.statistics=null;return d}S._inheritsLoose(n,v);n.createEmptyBand=function(d,e){return new (I.getPixelArrayConstructor(d))(e)};n.getPixelArrayConstructor=function(d){let e;switch(d){case "u1":case "u2":case "u4":case "u8":e=Uint8Array;break;
case "u16":e=Uint16Array;break;case "u32":e=Uint32Array;break;case "s8":e=Int8Array;break;case "s16":e=Int16Array;break;case "s32":e=Int32Array;break;case "f32":e=Float32Array;break;case "f64":e=Float64Array;break;case "c64":case "c128":case "unknown":e=Float32Array}return e};var b=n.prototype;b.castPixelType=function(d){if(!d)return"f32";d=d.toLowerCase();["u1","u2","u4"].includes(d)?d="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(d)||(d="f32");return d};b.getPlaneCount=function(){return this.pixels&&
this.pixels.length};b.addData=function(d){if(!d.pixels||d.pixels.length!==this.width*this.height)throw new X("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(d.pixels);this.statistics.push(d.statistics||{minValue:null,maxValue:null})};b.getAsRGBA=function(){const d=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(d);
break;default:this._fillFrom8Bit(d)}return new Uint8ClampedArray(d)};b.getAsRGBAFloat=function(){const d=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(d);return d};b.updateStatistics=function(){this.statistics=this.pixels.map(q=>this._calculateBandStatistics(q,this.mask));const d=this.mask;let e=0;if(d)for(let q=0;q<d.length;q++)d[q]&&e++;else e=this.width*this.height;this.validPixelCount=e};b.clamp=function(d){if(d&&"f64"!==d&&"f32"!==d){switch(d){case "u8":var e=[0,255];break;case "u16":e=
[0,65535];break;case "u32":e=[0,4294967295];break;case "s8":e=[-128,127];break;case "s16":e=[-32768,32767];break;case "s32":e=[-2147483648,2147483647];break;default:e=[-3.4*1E39,3.4*1E39]}var [q,g]=e;e=this.pixels;var l=this.width*this.height,p=e.length,x=[];for(let y=0;y<p;y++){var h=I.createEmptyBand(d,l);var k=e[y];for(let D=0;D<l;D++){var m=k[D];h[D]=m>g?g:m<q?q:m}x.push(h)}this.pixels=x;this.pixelType=d}};b.extractBands=function(d){if(pa.isNone(d)||0===d.length||null==this.pixels||0===this.pixels.length)return this;
var e=this.pixels.length;const q=d.some(g=>g>=this.pixels.length);e=e===d.length&&!d.some((g,l)=>g!==l);return q||e?this:new I({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:d.map(g=>this.pixels[g]),statistics:this.statistics&&d.map(g=>this.statistics[g])})};b.clone=function(){const d=new I({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(d.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let e;const q=I.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){d.pixels=[];const g=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)d.pixels[e]=g?this.pixels[e].slice(0,this.pixels[e].length):new q(this.pixels[e])}if(this.statistics)for(d.statistics=[],e=0;e<this.statistics.length;e++)d.statistics[e]=Y.clone(this.statistics[e]);return d};b._fillFrom8Bit=function(d){const {mask:e,
maskIsAlpha:q,pixels:g}=this;if(d&&g&&g.length){var l,p;var x=l=p=g[0];3<=g.length?(l=g[1],p=g[2]):2===g.length&&(l=g[1]);var h=new Uint32Array(d),k=this.width*this.height;if(x.length!==k)L.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(e&&e.length===k)if(q)for(d=0;d<k;d++)e[d]&&(h[d]=e[d]<<24|p[d]<<16|l[d]<<8|x[d]);else for(d=0;d<k;d++)e[d]&&(h[d]=-16777216|p[d]<<16|l[d]<<8|x[d]);else for(d=0;d<k;d++)h[d]=-16777216|p[d]<<16|l[d]<<8|x[d]}else L.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};b._fillFromNon8Bit=function(d){const {pixels:e,mask:q,statistics:g}=this;if(d&&e&&e.length){var l=this.pixelType,p=1,x=0;p=1;g&&0<g.length?(x=g.map(D=>D.minValue).reduce((D,C)=>Math.min(D,C)),p=g.map(D=>D.maxValue-D.minValue).reduce((D,C)=>Math.max(D,C)),p=255/p):(p=255,"s8"===l?(x=-128,p=127):"u16"===l?p=65535:"s16"===l?(x=-32768,p=32767):"u32"===l?p=4294967295:"s32"===l?(x=-2147483648,p=2147483647):"f32"===l?(x=-3.4*1E39,p=3.4*1E39):
"f64"===l&&(x=-Number.MAX_VALUE,p=Number.MAX_VALUE),p=255/(p-x));d=new Uint32Array(d);l=this.width*this.height;var h,k,m;var y=h=k=e[0];if(y.length!==l)return L.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=e.length)if(h=e[1],3<=e.length&&(k=e[2]),q&&q.length===l)for(m=0;m<l;m++)q[m]&&(d[m]=-16777216|(k[m]-x)*p<<16|(h[m]-x)*p<<8|(y[m]-x)*p);else for(m=0;m<l;m++)d[m]=-16777216|(k[m]-x)*p<<16|(h[m]-x)*p<<8|(y[m]-x)*p;else if(q&&q.length===l)for(m=0;m<l;m++)h=(y[m]-
x)*p,q[m]&&(d[m]=-16777216|h<<16|h<<8|h);else for(m=0;m<l;m++)h=(y[m]-x)*p,d[m]=-16777216|h<<16|h<<8|h}else L.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};b._fillFrom32Bit=function(d){const {pixels:e,mask:q}=this;if(!d||!e||!e.length)return L.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let g,l,p,x;g=l=p=e[0];3<=e.length?(l=e[1],p=e[2]):2===e.length&&(l=e[1]);const h=this.width*this.height;if(g.length!==h)return L.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let k=0;if(q&&q.length===h)for(x=0;x<h;x++)d[k++]=g[x],d[k++]=l[x],d[k++]=p[x],d[k++]=q[x]&1;else for(x=0;x<h;x++)d[k++]=g[x],d[k++]=l[x],d[k++]=p[x],d[k++]=1};b._calculateBandStatistics=function(d,e){let q=Infinity,g=-Infinity;const l=d.length;let p,x=0;if(e)for(p=0;p<l;p++)e[p]&&(x=d[p],q=x<q?x:q,g=x>g?x:g);else for(p=0;p<l;p++)x=d[p],q=x<q?x:q,g=x>g?x:g;return{minValue:q,maxValue:g}};return n}(t.JSONSupport);r.__decorate([ma.property({json:{write:!0}})],
ea.prototype,"width",void 0);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"height",void 0);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"pixelType",void 0);r.__decorate([aa.cast("pixelType")],ea.prototype,"castPixelType",null);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"validPixelCount",void 0);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"mask",void 0);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"maskIsAlpha",void 0);r.__decorate([ma.property({json:{write:!0}})],
ea.prototype,"pixels",void 0);r.__decorate([ma.property({json:{write:!0}})],ea.prototype,"statistics",void 0);return ea=I=r.__decorate([Q.subclass("esri.layers.support.PixelBlock")],ea)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I){function L(A,V){return v.apply(this,
arguments)}function v(){v=r._asyncToGenerator(function*(A,V){var ja;if(!I.isPlatformLittleEndian)throw new ea("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield fa.load();const {offset:ha,noDataValue:H}=V;let F=null==(ja=V.pixelType)?void 0:ja.toUpperCase();F&&!K.has(F)&&(F=null);const {width:w,height:E,pixelType:f,statistics:u,pixels:G,mask:N}=fa.decode(A,{inputOffset:ha,noDataValue:H,pixelType:F,returnPixelInterleavedDims:V.returnPixelInterleavedDims});return new X({width:w,
height:E,pixelType:f.toLowerCase(),pixels:G,mask:N,statistics:u})});return v.apply(this,arguments)}function n(A,V){return b.apply(this,arguments)}function b(){b=r._asyncToGenerator(function*(A,V){A=yield Q.decode(A,V);A=new X({width:A.width,height:A.height,pixels:A.pixels,pixelType:A.pixelType.toLowerCase(),mask:A.mask,statistics:null});A.updateStatistics();return A});return b.apply(this,arguments)}function d(A,V){return e.apply(this,arguments)}function e(){e=r._asyncToGenerator(function*(A,V){A=
yield Q.decodeTileOrStrip(A,V.customOptions);A=new X({width:A.width,height:A.height,pixels:A.pixels,pixelType:A.pixelType.toLowerCase(),mask:A.mask,statistics:null});A.updateStatistics();return A});return e.apply(this,arguments)}function q(A,V){const ja=V.pixelType||"u8",ha=X.getPixelArrayConstructor(ja),H="u8"===ja?A:new ha(A.buffer),F=[],w=V.planes||1;if(1===w)F.push(H);else for(let E=0;E<w;E++){const f=(V.width||1)*(V.height||A.length),u=new ha(f);for(let G=0;G<f;G++)u[G]=H[G*w+E];F.push(u)}A=
new X({width:V.width||1,height:V.height||A.length,pixels:F,pixelType:ja,statistics:null});A.updateStatistics();return A}function g(A,V){A=(new ma.Zlib(new Uint8Array(A))).getBytes();return q(A,V)}function l(A,V){A=pa.decode(A,V.offset,V.eof,!V.isInputBigEndian);return q(A,V)}function p(A,V){A=Y.decode(A,V.hasNoZlibMask);A=new X({width:A.width,height:A.height,pixels:A.pixels,pixelType:"U8",mask:A.mask,statistics:null});A.updateStatistics();return A}function x(A,V){A=new Uint8Array(A);A=new O(A);const {width:ja,
height:ha}=V;V=ja*ha;A=A.decode();let H=0;var F=0;let w;F=new Uint8Array(V);for(H=0;H<V;H++)F[H]=A[4*H+3];const E=new X({width:ja,height:ha,pixels:[],pixelType:"U8",mask:F,statistics:[]});for(H=0;3>H;H++){w=new Uint8Array(V);for(F=0;F<V;F++)w[F]=A[4*F+H];E.addData({pixels:w})}E.updateStatistics();return E}function h(A,V,ja,ha){return k.apply(this,arguments)}function k(){k=r._asyncToGenerator(function*(A,V,ja,ha){A=yield(new t).decode(A,{applyJpegMask:!1,format:V,...ja},ha);A=new X(A);A.updateStatistics();
return A});return k.apply(this,arguments)}function m(A){if(null==A)throw new ea("rasterCodec:decode","parameter encodeddata is required.");A=new Uint8Array(A,0,10);let V="";255===A[0]&&216===A[1]?V="jpg":137===A[0]&&80===A[1]&&78===A[2]&&71===A[3]?V="png":67===A[0]&&110===A[1]&&116===A[2]&&90===A[3]&&73===A[4]&&109===A[5]&&97===A[6]&&103===A[7]&&101===A[8]&&32===A[9]?V="lerc":76===A[0]&&101===A[1]&&114===A[2]&&99===A[3]&&50===A[4]&&32===A[5]?V="lerc2":73===A[0]&&73===A[1]&&42===A[2]&&0===A[3]||77===
A[0]&&77===A[1]&&0===A[2]&&42===A[3]||73===A[0]&&73===A[1]&&43===A[2]&&0===A[3]||77===A[0]&&77===A[1]&&0===A[2]&&43===A[3]?V="tiff":71===A[0]&&73===A[1]&&70===A[2]?V="gif":66===A[0]&&77===A[1]?V="bmp":String.fromCharCode.apply(null,A).toLowerCase().includes("error")&&(V="error");return V}function y(A){let V=null;switch(A){case "lerc":case "lerc2":V=L;break;case "jpg":V=p;break;case "png":V=x;break;case "bsq":case "bip":V=(ja,ha)=>{{var H=ha.pixelType;var F=null;let w=null;switch(H?H.toLowerCase():
"f32"){case "u1":case "u2":case "u4":case "u8":w=255;F=Uint8Array;break;case "u16":w=w||65535;F=Uint16Array;break;case "u32":w=w||2**32-1;F=Uint32Array;break;case "s8":w=w||-128;F=Int8Array;break;case "s16":w=w||-32768;F=Int16Array;break;case "s32":w=w||-(2**31);F=Int32Array;break;default:F=Float32Array}H={pixelTypeCtor:F,noDataValue:w}}({pixelTypeCtor:H}=H);F=aa.decode;ja=F(ja,{width:ha.width,height:ha.height,pixelType:H,format:A});ha=new X({width:ha.width,height:ha.height,pixels:ja.pixels,pixelType:ha.pixelType,
mask:ja.mask,statistics:null});ha.updateStatistics();return ha};break;case "tiff":V=n;break;case "deflate":V=g;break;case "lzw":V=l;break;case "error":V=()=>{throw new ea("rasterCodec:decode","input data contains error");};break;default:V=()=>{throw new ea("rasterCodec:decode","unsupported raster format");}}return V}function D(A,V=1){if(A){var {pixels:ja,width:ha,height:H,mask:F}=A;if(ja&&0!==ja.length){var w=ja.length,E=ha-1,f=H-1,u=[],G,N,U=X.getPixelArrayConstructor(A.pixelType);if(0===V){for(V=
0;V<w;V++){var T=ja[V];var P=new U(E*f);for(G=0;G<f;G++){var a=G*ha;for(N=0;N<E;N++)P[G*E+N]=T[a+N]}u.push(P)}if(F){var c=new Uint8Array(E*f);for(G=0;G<f;G++)for(a=G*ha,N=0;N<E;N++)c[G*E+N]=F[a+N]}}else{for(V=0;V<w;V++){T=ja[V];P=new U(E*f);for(G=0;G<f;G++)for(a=G*ha,N=0;N<E;N++)P[G*E+N]=(T[a+N]+T[a+N+1]+T[a+ha+N]+T[a+ha+N+1])/4;u.push(P)}if(F)for(c=new Uint8Array(E*f),G=0;G<f;G++)for(a=G*ha,N=0;N<E;N++)c[G*E+N]=Math.min.apply(null,[F[a+N],F[a+N+1],F[a+ha+N],F[a+ha+N+1]])}A.width=E;A.height=f;A.mask=
c;A.pixels=u}}}function C(){C=r._asyncToGenerator(function*(A,V={},ja){if(null==A)throw new ea("rasterCodec:decode","missing encodeddata parameter.");let ha=V.format&&V.format.toLowerCase();if(!("bsq"!==ha&&"bip"!==ha||null!=V.width&&null!=V.height))throw new ea("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===ha&&V.customOptions)return d(A,V);if(!ha||"bsq"!==ha&&"bip"!==ha&&"deflate"!==ha&&"lzw"!==ha)ha=m(A);V.useCanvas&&R.has(ha)?A=yield h(A,ha,V,ja):(ja=y(ha),
V.isPoint&&(V={...V},V.width++,V.height++),A=yield ja(A,V),V.isPoint&&D(A));return A});return C.apply(this,arguments)}var O=function(A){function V(F){var w,E;this.data=F;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(E=null;;){var f=this.readUInt32();var u=F=void 0;F=[];for(u=0;4>u;++u)F.push(String.fromCharCode(this.data[this.pos++]));F=F.join("");switch(F){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];
this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(f);break;case "fcTL":E&&this.animation.frames.push(E);this.pos+=4;E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};F=this.readUInt16();
f=this.readUInt16()||100;E.delay=1E3*F/f;E.disposeOp=this.data[this.pos++];E.blendOp=this.data[this.pos++];E.data=[];break;case "IDAT":case "fdAT":"fdAT"===F&&(this.pos+=4,f-=4);F=(null!=E?E.data:void 0)||this.imgData;for(u=0;0<=f?u<f:u>f;0<=f?++u:--u)F.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(f);f=255-this.transparency.indexed.length;if(0<f)for(F=0;0<=f?F<f:F>f;0<=f?++F:--F)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case "tEXt":u=this.read(f);f=u.indexOf(0);F=String.fromCharCode.apply(String,u.slice(0,f));this.text[F]=String.fromCharCode.apply(String,u.slice(f+1));break;case "IEND":E&&this.animation.frames.push(E);a:{switch(this.colorType){case 0:case 3:case 4:E=1;break a;case 2:case 6:E=3;break a}E=void 0}this.colors=E;this.hasAlphaChannel=4===(w=this.colorType)||6===w;w=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*w;a:{switch(this.colors){case 1:w="DeviceGray";break a;case 3:w="DeviceRGB";break a}w=void 0}this.colorSpace=w;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=f}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var ja;V.load=function(F,w,E){"function"===typeof w&&(E=w);var f=new XMLHttpRequest;f.open("GET",F,!0);f.responseType="arraybuffer";f.onload=function(){var u=new Uint8Array(f.response||f.mozResponseArrayBuffer);
u=new V(u);"function"===typeof(null!=w?w.getContext:void 0)&&u.render(w);return"function"===typeof E?E(u):void 0};return f.send(null)};V.prototype.read=function(F){var w;var E=[];for(w=0;0<=F?w<F:w>F;0<=F?++w:--w)E.push(this.data[this.pos++]);return E};V.prototype.readUInt32=function(){var F=this.data[this.pos++]<<24;var w=this.data[this.pos++]<<16;var E=this.data[this.pos++]<<8;var f=this.data[this.pos++];return F|w|E|f};V.prototype.readUInt16=function(){var F=this.data[this.pos++]<<8;var w=this.data[this.pos++];
return F|w};V.prototype.decodePixels=function(F){var w,E,f,u,G,N,U,T;null==F&&(F=this.imgData);if(0===F.length)return new Uint8Array(0);F=new ma.Zlib(F);F=F.getBytes();var P=this.pixelBitlength/8;var a=P*this.width;var c=new Uint8Array(a*this.height);var B=F.length;for(E=u=G=0;u<B;){switch(F[u++]){case 0:for(f=w=0;w<a;f=w+=1)c[E++]=F[u++];break;case 1:for(f=N=0;N<a;f=N+=1){w=F[u++];var z=f<P?0:c[E-P];c[E++]=(w+z)%256}break;case 2:for(f=z=0;z<a;f=z+=1){w=F[u++];var Z=(f-f%P)/P;N=G&&c[(G-1)*a+Z*P+f%
P];c[E++]=(N+w)%256}break;case 3:for(f=T=0;T<a;f=T+=1)w=F[u++],Z=(f-f%P)/P,z=f<P?0:c[E-P],N=G&&c[(G-1)*a+Z*P+f%P],c[E++]=(w+Math.floor((z+N)/2))%256;break;case 4:for(f=T=0;T<a;f=T+=1){w=F[u++];Z=(f-f%P)/P;z=f<P?0:c[E-P];0===G?N=U=0:(N=c[(G-1)*a+Z*P+f%P],U=Z&&c[(G-1)*a+(Z-1)*P+f%P]);var ca=z+N-U;f=Math.abs(ca-z);Z=Math.abs(ca-N);ca=Math.abs(ca-U);z=f<=Z&&f<=ca?z:Z<=ca?N:U;c[E++]=(w+z)%256}break;default:throw Error("Invalid filter algorithm: "+F[u-1]);}G++}return c};V.prototype.decodePalette=function(){var F,
w,E,f;var u=this.palette;var G=this.transparency.indexed||[];var N=new Uint8Array((G.length||0)+u.length);var U=0;u.length;var T=w=F=0;for(E=u.length;w<E;T=w+=3)N[U++]=u[T],N[U++]=u[T+1],N[U++]=u[T+2],N[U++]=null!=(f=G[F++])?f:255;return N};V.prototype.copyToImageData=function(F,w){var E,f;var u=this.colors;var G=null;var N=this.hasAlphaChannel;this.palette.length&&(G=null!=(E=this._decodedPalette)?E:this._decodedPalette=this.decodePalette(),u=4,N=!0);F=F.data||F;var U=F.length;var T=G||w;E=f=0;if(1===
u)for(;E<U;)u=G?4*w[E/4]:f,f=T[u++],F[E++]=f,F[E++]=f,F[E++]=f,F[E++]=N?T[u++]:this.transparency.grayscale&&this.transparency.grayscale===f?0:255,f=u;else for(;E<U;)u=G?4*w[E/4]:f,F[E++]=T[u++],F[E++]=T[u++],F[E++]=T[u++],F[E++]=N?T[u++]:this.transparency.rgb&&this.transparency.rgb[1]===T[u-3]&&this.transparency.rgb[3]===T[u-2]&&this.transparency.rgb[5]===T[u-1]?0:255,f=u};V.prototype.decode=function(){var F=new Uint8Array(this.width*this.height*4);this.copyToImageData(F,this.decodePixels());return F};
var ha=(ja=A.document&&A.document.createElement("canvas"))&&ja.getContext("2d");var H=function(F){ha.width=F.width;ha.height=F.height;ha.clearRect(0,0,F.width,F.height);ha.putImageData(F,0,0);F=new Image;F.src=ja.toDataURL();return F};V.prototype.decodeFrames=function(F){var w,E;if(this.animation){var f=this.animation.frames;var u=[];var G=w=0;for(E=f.length;w<E;G=++w){G=f[G];var N=F.createImageData(G.width,G.height);var U=this.decodePixels(new Uint8Array(G.data));this.copyToImageData(N,U);G.imageData=
N;u.push(G.image=H(N))}return u}};V.prototype.renderFrame=function(F,w){var E=this.animation.frames;var f=E[w];E=E[w-1];0===w&&F.clearRect(0,0,this.width,this.height);1===(null!=E?E.disposeOp:void 0)?F.clearRect(E.xOffset,E.yOffset,E.width,E.height):2===(null!=E?E.disposeOp:void 0)&&F.putImageData(E.imageData,E.xOffset,E.yOffset);0===f.blendOp&&F.clearRect(f.xOffset,f.yOffset,f.width,f.height);return F.drawImage(f.image,f.xOffset,f.yOffset)};V.prototype.animate=function(F){var w,E=this;var f=0;var u=
this.animation;var G=u.numFrames;var N=u.frames;var U=u.numPlays;return(w=function(){var T=f++%G;var P=N[T];E.renderFrame(F,T);if(1<G&&f/G<U)return E.animation._timeout=setTimeout(w,P.delay)})()};V.prototype.stopAnimation=function(){var F;return clearTimeout(null!=(F=this.animation)?F._timeout:void 0)};V.prototype.render=function(F){F._png&&F._png.stopAnimation();F._png=this;F.width=this.width;F.height=this.height;F=F.getContext("2d");if(this.animation)return this.decodeFrames(F),this.animate(F);
var w=F.createImageData(this.width,this.height);this.copyToImageData(w,this.decodePixels());return F.putImageData(w,0,0)};return V}(self);const R=new Set(["jpg","png","bmp","gif"]),K=new Set("S8 U8 S16 U16 S32 U32 F32 F64".split(" "));S.decode=function(A){return C.apply(this,arguments)};S.getFormat=function(A){A=m(A);"lerc2"===A?A="lerc":"error"===A&&(A="");return A};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(S,r,ea){return function(){function X(t){t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}X.prototype.decode=function(t,Y,fa){if(!t||10>t.byteLength)throw new S("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:pa,height:ma,format:aa}=Y;const {applyJpegMask:Q}=Y;if(Q&&(!pa||!ma))throw new S("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((I,L)=>{let v=null;"jpg"===aa&&Q&&(v=X._getMask(t,{width:pa,height:ma}));const n=new Blob([new Uint8Array(t)],{type:"jpg"==="image/"+aa?"jpeg":aa}),b=URL.createObjectURL(n),d=new Image;let e;d.src=b;d.onload=()=>{URL.revokeObjectURL(b);if(r.isAborted(fa))L(r.createAbortError());else{pa=d.width;ma=d.height;if(this.canvas){if(this.canvas.width!==pa||this.canvas.height!==ma)this.canvas.width=pa,this.canvas.height=ma;this.ctx.clearRect(0,0,pa,ma)}else this.canvas=document.createElement("canvas"),
this.canvas.width=pa,this.canvas.height=ma,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(d,0,0);var q=this.ctx.getImageData(0,0,pa,ma);e=q.data;var g;if(Y.renderOnCanvas){if(v)for(g=0;g<v.length;g++)e[4*g+3]=v[g]?255:0;this.ctx.putImageData(q,0,0);I(null)}else{q=pa*ma;var l=new Uint8Array(q),p=new Uint8Array(q),x=new Uint8Array(q);if(v)for(g=0;g<q;g++)l[g]=e[4*g],p[g]=e[4*g+1],x[g]=e[4*g+2];else for(v=new Uint8Array(q),g=0;g<q;g++)l[g]=e[4*g],p[g]=e[4*g+1],x[g]=e[4*g+2],v[g]=e[4*g+3];I({width:pa,
height:ma,pixels:[l,p,x],mask:v,pixelType:"u8"})}}};d.onerror=()=>{URL.revokeObjectURL(b);L("cannot load image")}})};X._getMask=function(t,Y){let fa=null;try{var pa=new Uint8Array(t);t=0;var ma=pa.length-2;for(t=Math.ceil(pa.length/2);t<ma&&(255!==pa[t]||217!==pa[t+1]);t++);t+=2;if(t<pa.length-1){const aa=(new ea.Zlib(pa.subarray(t))).getBytes();fa=new Uint8Array(Y.width*Y.height);Y=0;for(pa=0;pa<aa.length;pa++)for(ma=7;0<=ma;ma--)fa[Y++]=aa[pa]>>ma&1}}catch(aa){}return fa};return X}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(S){var r={exports:{}};(function(ea){(function(X){X=X();void 0!==X&&(ea.exports=X)})(function(){var X=function(){function t(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}t.prototype={ensureBuffer:function(Y){var fa=this.buffer,pa=fa?fa.byteLength:0;if(Y<pa)return fa;for(var ma=512;ma<Y;)ma<<=1;Y=new Uint8Array(ma);for(ma=0;ma<pa;++ma)Y[ma]=fa[ma];return this.buffer=Y},getByte:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(Y){var fa=this.pos;if(Y){this.ensureBuffer(fa+Y);for(Y=fa+Y;!this.eof&&this.bufferLength<Y;)this.readBlock();var pa=this.bufferLength;Y>pa&&(Y=pa)}else{for(;!this.eof;)this.readBlock();Y=this.bufferLength}this.pos=Y;return this.buffer.subarray(fa,Y)},lookChar:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(Y,fa,pa){for(var ma=Y+fa;this.bufferLength<=ma&&!this.eof;)this.readBlock();return new Stream(this.buffer,Y,fa,pa)},skip:function(Y){Y||(Y=1);this.pos+=Y},reset:function(){this.pos=0}};return t}();return function(){function t(I){throw Error(I);}function Y(I){var L=0,v=I[L++],n=I[L++];-1!=v&&-1!=n||t("Invalid header in flate stream");8!=(v&15)&&t("Unknown compression method in flate stream");0!=((v<<8)+n)%
31&&t("Bad FCHECK in flate stream");n&32&&t("FDICT bit set in flate stream");this.bytes=I;this.bytesPos=L;this.codeBuf=this.codeSize=0;X.call(this)}if(!self||!self.Uint32Array)return null;var fa=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pa=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),ma=new Uint32Array([1,2,3,4,65541,65543,131081,131085,
196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),aa=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,
590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,
590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,
590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,
590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,
590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,
590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,
590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Q=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];Y.prototype=Object.create(X.prototype);
Y.prototype.getBits=function(I){for(var L=this.codeSize,v=this.codeBuf,n=this.bytes,b=this.bytesPos,d;L<I;)"undefined"==typeof(d=n[b++])&&t("Bad encoding in flate stream"),v|=d<<L,L+=8;this.codeBuf=v>>I;this.codeSize=L-=I;this.bytesPos=b;return v&(1<<I)-1};Y.prototype.getCode=function(I){var L=I[0],v=I[1];I=this.codeSize;for(var n=this.codeBuf,b=this.bytes,d=this.bytesPos;I<v;){var e;"undefined"==typeof(e=b[d++])&&t("Bad encoding in flate stream");n|=e<<I;I+=8}v=L[n&(1<<v)-1];L=v>>16;v&=65535;(0==
I||I<L||0==L)&&t("Bad encoding in flate stream");this.codeBuf=n>>L;this.codeSize=I-L;this.bytesPos=d;return v};Y.prototype.generateHuffmanTable=function(I){for(var L=I.length,v=0,n=0;n<L;++n)I[n]>v&&(v=I[n]);for(var b=1<<v,d=new Uint32Array(b),e=1,q=0,g=2;e<=v;++e,q<<=1,g<<=1)for(var l=0;l<L;++l)if(I[l]==e){var p=0,x=q;for(n=0;n<e;++n)p=p<<1|x&1,x>>=1;for(n=p;n<b;n+=g)d[n]=e<<16|l;++q}return[d,v]};Y.prototype.readBlock=function(){function I(p,x,h,k,m){for(p=p.getBits(h)+k;0<p--;)x[q++]=m}var L=this.getBits(3);
L&1&&(this.eof=!0);L>>=1;if(0==L){var v=this.bytes,n=this.bytesPos,b;"undefined"==typeof(b=v[n++])&&t("Bad block header in flate stream");var d=b;"undefined"==typeof(b=v[n++])&&t("Bad block header in flate stream");d|=b<<8;"undefined"==typeof(b=v[n++])&&t("Bad block header in flate stream");L=b;"undefined"==typeof(b=v[n++])&&t("Bad block header in flate stream");(L|b<<8)!=(~d&65535)&&t("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;b=this.bufferLength;L=this.ensureBuffer(b+
d);this.bufferLength=d=b+d;for(var e=b;e<d;++e){if("undefined"==typeof(b=v[n++])){this.eof=!0;break}L[e]=b}this.bytesPos=n}else{if(1==L)n=aa,b=Q;else if(2==L){L=this.getBits(5)+257;b=this.getBits(5)+1;v=this.getBits(4)+4;n=Array(fa.length);for(var q=0;q<v;)n[fa[q++]]=this.getBits(3);n=this.generateHuffmanTable(n);q=v=0;b=L+b;for(d=Array(b);q<b;)e=this.getCode(n),16==e?I(this,d,2,3,v):17==e?I(this,d,3,3,v=0):18==e?I(this,d,7,11,v=0):d[q++]=v=e;n=this.generateHuffmanTable(d.slice(0,L));b=this.generateHuffmanTable(d.slice(L,
b))}else t("Unknown block type in flate stream");d=(L=this.buffer)?L.length:0;for(e=this.bufferLength;;){var g=this.getCode(n);if(256>g)e+1>=d&&(L=this.ensureBuffer(e+1),d=L.length),L[e++]=g;else{if(256==g){this.bufferLength=e;break}g-=257;g=pa[g];var l=g>>16;0<l&&(l=this.getBits(l));v=(g&65535)+l;g=this.getCode(b);g=ma[g];l=g>>16;0<l&&(l=this.getBits(l));g=(g&65535)+l;e+v>=d&&(L=this.ensureBuffer(e+v),d=L.length);for(l=0;l<v;++l,++e)L[e]=L[e-g]}}}};return Y}()})})(r);S.Zlib=r.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(S,r){return function(){function ea(){}ea.decode=function(X,t=!1){const Y=new Uint8Array(X);X=new S.JpegImage;X.parse(Y);const {width:fa,height:pa,numComponents:ma,eof:aa}=X;X=X.getData(fa,pa,!0);let Q;const I=fa*pa;let L=0,v=0,n=0;if(!t&&aa<Y.length-1)try{var b=(new r.Zlib(Y.subarray(aa))).getBytes();Q=new Uint8Array(I);for(L=t=0;L<b.length;L++)for(n=7;0<=n;n--)Q[t++]=b[L]>>n&1}catch{}b=null;if(1===ma&&X.length===fa*pa)b=[X,X,X];else{b=[];for(L=0;3>L;L++)t=new Uint8Array(I),
b.push(t);for(v=n=0;v<I;v++)for(L=0;3>L;L++)b[L][v]=X[n++]}return{width:fa,height:pa,pixels:b,mask:Q}};return ea}()})},"esri/chunks/Jpg":function(){define(["exports"],function(S){var r={exports:{}};(function(ea){(function(X){X=X();void 0!==X&&(ea.exports=X)})(function(){var X=function(){function t(Y){this.message="JPEG error: "+Y}t.prototype=Error();t.prototype.name="JpegError";return t.constructor=t}();return function(){function t(){this.decodeTransform=null;this.colorTransform=-1}function Y(Q,I){for(var L=
0,v=[],n,b,d=16;0<d&&!Q[d-1];)d--;v.push({children:[],index:0});var e=v[0],q;for(n=0;n<d;n++){for(b=0;b<Q[n];b++){e=v.pop();for(e.children[e.index]=I[L];0<e.index;)e=v.pop();e.index++;for(v.push(e);v.length<=n;)v.push(q={children:[],index:0}),e.children[e.index]=q.children,e=q;L++}n+1<d&&(v.push(q={children:[],index:0}),e.children[e.index]=q.children,e=q)}return v[0].children}function fa(Q,I,L,v,n,b,d,e,q){function g(){if(0<K)return K--,R>>K&1;R=Q[I++];if(255===R){var T=Q[I++];if(T)throw new X("unexpected marker "+
(R<<8|T).toString(16));}K=7;return R>>>7}function l(T){for(;;){T=T[g()];if("number"===typeof T)return T;if("object"!==typeof T)throw new X("invalid huffman sequence");}}function p(T){for(var P=0;0<T;)P=P<<1|g(),T--;return P}function x(T){if(1===T)return 1===g()?1:-1;var P=p(T);return P>=1<<T-1?P:P+(-1<<T)+1}function h(T,P){var a=l(T.huffmanTableDC);a=0===a?0:x(a);T.blockData[P]=T.pred+=a;for(a=1;64>a;){var c=l(T.huffmanTableAC),B=c&15;c>>=4;if(0===B){if(15>c)break;a+=16}else a+=c,T.blockData[P+aa[a]]=
x(B),a++}}function k(T,P){var a=l(T.huffmanTableDC);a=0===a?0:x(a)<<q;T.blockData[P]=T.pred+=a}function m(T,P){T.blockData[P]|=g()<<q}function y(T,P){if(0<A)A--;else for(var a=b;a<=d;){var c=l(T.huffmanTableAC),B=c&15;c>>=4;if(0===B){if(15>c){A=p(c)+(1<<c)-1;break}a+=16}else a+=c,T.blockData[P+aa[a]]=x(B)*(1<<q),a++}}function D(T,P){for(var a=b,c=0,B;a<=d;){B=aa[a];switch(V){case 0:c=l(T.huffmanTableAC);B=c&15;c>>=4;if(0===B)15>c?(A=p(c)+(1<<c),V=4):(c=16,V=1);else{if(1!==B)throw new X("invalid ACn encoding");
ja=x(B);V=c?2:3}continue;case 1:case 2:T.blockData[P+B]?T.blockData[P+B]+=g()<<q:(c--,0===c&&(V=2===V?3:0));break;case 3:T.blockData[P+B]?T.blockData[P+B]+=g()<<q:(T.blockData[P+B]=ja<<q,V=0);break;case 4:T.blockData[P+B]&&(T.blockData[P+B]+=g()<<q)}a++}4===V&&(A--,0===A&&(V=0))}var C=L.mcusPerLine,O=I,R=0,K=0,A=0,V=0,ja,ha=v.length,H,F,w,E;e=L.progressive?0===b?0===e?k:m:0===e?y:D:h;var f=0;L=1===ha?v[0].blocksPerLine*v[0].blocksPerColumn:C*L.mcusPerColumn;for(var u,G;f<L;){var N=n?Math.min(L-f,
n):L;for(H=0;H<ha;H++)v[H].pred=0;A=0;if(1===ha){var U=v[0];for(E=0;E<N;E++)e(U,64*((U.blocksPerLine+1)*(f/U.blocksPerLine|0)+f%U.blocksPerLine)),f++}else for(E=0;E<N;E++){for(H=0;H<ha;H++)for(U=v[H],u=U.h,G=U.v,F=0;F<G;F++)for(w=0;w<u;w++)e(U,64*((U.blocksPerLine+1)*((f/C|0)*U.v+F)+(f%C*U.h+w)));f++}K=0;(U=ma(Q,I))&&U.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+U.invalid),I=U.offset);U=U&&U.marker;if(!U||65280>=U)throw new X("marker was not found");if(65488<=U&&65495>=
U)I+=2;else break}(U=ma(Q,I))&&U.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+U.invalid),I=U.offset);return I-O}function pa(Q,I){Q=I.blocksPerLine;for(var L=I.blocksPerColumn,v=new Int16Array(64),n=0;n<L;n++)for(var b=0;b<Q;b++){var d=void 0,e=void 0,q=void 0,g=void 0,l=void 0,p=void 0,x=void 0,h=void 0,k=l=p=g=e=d=void 0,m=void 0,y=void 0,D=void 0,C=64*((I.blocksPerLine+1)*n+b),O=v,R=I.quantizationTable,K=I.blockData;if(!R)throw new X("missing required Quantization Table.");
for(var A=0;64>A;A+=8)d=K[C+A],h=K[C+A+1],x=K[C+A+2],p=K[C+A+3],l=K[C+A+4],g=K[C+A+5],q=K[C+A+6],e=K[C+A+7],d*=R[A],0===(h|x|p|l|g|q|e)?(d=5793*d+512>>10,O[A]=d,O[A+1]=d,O[A+2]=d,O[A+3]=d,O[A+4]=d,O[A+5]=d,O[A+6]=d,O[A+7]=d):(h*=R[A+1],x*=R[A+2],p*=R[A+3],l*=R[A+4],g*=R[A+5],q*=R[A+6],e*=R[A+7],D=5793*d+128>>8,y=5793*l+128>>8,m=x,k=q,l=2896*(h-e)+128>>8,e=2896*(h+e)+128>>8,p<<=4,g<<=4,D=D+y+1>>1,y=D-y,d=3784*m+1567*k+128>>8,m=1567*m-3784*k+128>>8,k=d,l=l+g+1>>1,g=l-g,e=e+p+1>>1,p=e-p,D=D+k+1>>1,k=
D-k,y=y+m+1>>1,m=y-m,d=2276*l+3406*e+2048>>12,l=3406*l-2276*e+2048>>12,e=d,d=799*p+4017*g+2048>>12,p=4017*p-799*g+2048>>12,g=d,O[A]=D+e,O[A+7]=D-e,O[A+1]=y+g,O[A+6]=y-g,O[A+2]=m+p,O[A+5]=m-p,O[A+3]=k+l,O[A+4]=k-l);for(R=0;8>R;++R)d=O[R],h=O[R+8],x=O[R+16],p=O[R+24],l=O[R+32],g=O[R+40],q=O[R+48],e=O[R+56],0===(h|x|p|l|g|q|e)?(d=5793*d+8192>>14,d=-2040>d?0:2024<=d?255:d+2056>>4,K[C+R]=d,K[C+R+8]=d,K[C+R+16]=d,K[C+R+24]=d,K[C+R+32]=d,K[C+R+40]=d,K[C+R+48]=d,K[C+R+56]=d):(D=5793*d+2048>>12,y=5793*l+2048>>
12,m=x,k=q,l=2896*(h-e)+2048>>12,e=2896*(h+e)+2048>>12,D=(D+y+1>>1)+4112,y=D-y,d=3784*m+1567*k+2048>>12,m=1567*m-3784*k+2048>>12,k=d,l=l+g+1>>1,g=l-g,e=e+p+1>>1,p=e-p,D=D+k+1>>1,k=D-k,y=y+m+1>>1,m=y-m,d=2276*l+3406*e+2048>>12,l=3406*l-2276*e+2048>>12,e=d,d=799*p+4017*g+2048>>12,p=4017*p-799*g+2048>>12,g=d,d=D+e,e=D-e,h=y+g,q=y-g,x=m+p,g=m-p,p=k+l,l=k-l,d=16>d?0:4080<=d?255:d>>4,h=16>h?0:4080<=h?255:h>>4,x=16>x?0:4080<=x?255:x>>4,p=16>p?0:4080<=p?255:p>>4,l=16>l?0:4080<=l?255:l>>4,g=16>g?0:4080<=g?
255:g>>4,q=16>q?0:4080<=q?255:q>>4,e=16>e?0:4080<=e?255:e>>4,K[C+R]=d,K[C+R+8]=h,K[C+R+16]=x,K[C+R+24]=p,K[C+R+32]=l,K[C+R+40]=g,K[C+R+48]=q,K[C+R+56]=e)}return I.blockData}function ma(Q,I,L){var v=Q.length-1;L=L<I?L:I;if(I>=v)return null;var n=Q[I]<<8|Q[I+1];if(65472<=n&&65534>=n)return{invalid:null,marker:n,offset:I};for(I=Q[L]<<8|Q[L+1];!(65472<=I&&65534>=I);){if(++L>=v)return null;I=Q[L]<<8|Q[L+1]}return{invalid:n.toString(16),marker:I,offset:L}}if(!self||!self.Uint8ClampedArray)return null;var aa=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);t.prototype={parse:function(Q){function I(){var R=Q[n]<<8|Q[n+1];n+=2;return R}function L(){var R=I();R=n+R-2;var K=ma(Q,R,n);K&&K.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+K.invalid),R=K.offset);R=Q.subarray(n,R);n+=R.length;return R}function v(R){for(var K=Math.ceil(R.samplesPerLine/
8/R.maxH),A=Math.ceil(R.scanLines/8/R.maxV),V=0;V<R.components.length;V++){O=R.components[V];var ja=Math.ceil(Math.ceil(R.samplesPerLine/8)*O.h/R.maxH),ha=Math.ceil(Math.ceil(R.scanLines/8)*O.v/R.maxV);O.blockData=new Int16Array(64*A*O.v*(K*O.h+1));O.blocksPerLine=ja;O.blocksPerColumn=ha}R.mcusPerLine=K;R.mcusPerColumn=A}var n=0,b=null,d=null,e=[],q=[],g=[],l=I();if(65496!==l)throw new X("SOI not found");for(l=I();65497!==l;){switch(l){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var p=
L();65504===l&&74===p[0]&&70===p[1]&&73===p[2]&&70===p[3]&&0===p[4]&&(b={version:{major:p[5],minor:p[6]},densityUnits:p[7],xDensity:p[8]<<8|p[9],yDensity:p[10]<<8|p[11],thumbWidth:p[12],thumbHeight:p[13],thumbData:p.subarray(14,14+3*p[12]*p[13])});65518===l&&65===p[0]&&100===p[1]&&111===p[2]&&98===p[3]&&101===p[4]&&(d={version:p[5]<<8|p[6],flags0:p[7]<<8|p[8],flags1:p[9]<<8|p[10],transformCode:p[11]});break;case 65499:l=I()+n-2;for(var x;n<l;){var h=Q[n++],k=new Uint16Array(64);if(0===h>>4)for(p=
0;64>p;p++)x=aa[p],k[x]=Q[n++];else if(1===h>>4)for(p=0;64>p;p++)x=aa[p],k[x]=I();else throw new X("DQT - invalid table spec");e[h&15]=k}break;case 65472:case 65473:case 65474:if(m)throw new X("Only single frame JPEGs supported");I();var m={};m.extended=65473===l;m.progressive=65474===l;m.precision=Q[n++];m.scanLines=I();m.samplesPerLine=I();m.components=[];m.componentIds={};p=Q[n++];for(l=k=h=0;l<p;l++){x=Q[n];var y=Q[n+1]>>4;var D=Q[n+1]&15;h<y&&(h=y);k<D&&(k=D);y=m.components.push({h:y,v:D,quantizationId:Q[n+
2],quantizationTable:null});m.componentIds[x]=y-1;n+=3}m.maxH=h;m.maxV=k;v(m);break;case 65476:x=I();for(l=2;l<x;){h=Q[n++];k=new Uint8Array(16);for(p=y=0;16>p;p++,n++)y+=k[p]=Q[n];D=new Uint8Array(y);for(p=0;p<y;p++,n++)D[p]=Q[n];l+=17+y;(0===h>>4?g:q)[h&15]=Y(k,D)}break;case 65501:I();var C=I();break;case 65498:I();x=Q[n++];p=[];for(l=0;l<x;l++){h=m.componentIds[Q[n++]];var O=m.components[h];h=Q[n++];O.huffmanTableDC=g[h>>4];O.huffmanTableAC=q[h&15];p.push(O)}l=Q[n++];x=Q[n++];h=Q[n++];l=fa(Q,n,
m,p,C,l,x,h>>4,h&15);n+=l;break;case 65535:255!==Q[n]&&n--;break;default:if(255===Q[n-3]&&192<=Q[n-2]&&254>=Q[n-2])n-=3;else throw new X("unknown marker "+l.toString(16));}l=I()}this.width=m.samplesPerLine;this.height=m.scanLines;this.jfif=b;this.eof=n;this.adobe=d;this.components=[];for(l=0;l<m.components.length;l++){O=m.components[l];if(b=e[O.quantizationId])O.quantizationTable=b;this.components.push({output:pa(m,O),scaleX:O.h/m.maxH,scaleY:O.v/m.maxV,blocksPerLine:O.blocksPerLine,blocksPerColumn:O.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(Q,I){var L=this.width/Q,v=this.height/I,n,b,d=0,e=this.components.length,q=Q*I*e,g=new Uint8ClampedArray(q),l=new Uint32Array(Q);for(b=0;b<e;b++){var p=this.components[b];var x=p.scaleX*L;var h=p.scaleY*v;d=b;var k=p.output;var m=p.blocksPerLine+1<<3;for(n=0;n<Q;n++)p=0|n*x,l[n]=(p&4294967288)<<3|p&7;for(x=0;x<I;x++)for(p=0|x*h,p=m*(p&4294967288)|(p&7)<<3,n=0;n<Q;n++)g[d]=k[p+l[n]],d+=e}if(I=this.decodeTransform)for(b=0;b<q;)for(Q=p=0;p<e;p++,
b++,Q+=2)g[b]=(g[b]*I[Q]>>8)+I[Q+1];return g},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(Q){for(var I,L,v,n=0,b=Q.length;n<b;n+=3)I=Q[n],L=Q[n+1],v=Q[n+2],Q[n]=I-179.456+1.402*v,Q[n+1]=I+135.459-.344*L-.714*v,Q[n+2]=I-226.816+1.772*L;return Q},_convertYcckToRgb:function(Q){for(var I,L,v,n,b=0,d=0,e=Q.length;d<e;d+=4)I=Q[d],L=Q[d+1],v=Q[d+2],n=Q[d+3],Q[b++]=
-122.67195406894+L*(-6.60635669420364E-5*L+4.37130475926232E-4*v-5.4080610064599E-5*I+4.8449797120281E-4*n-.154362151871126)+v*(-9.57964378445773E-4*v+8.17076911346625E-4*I-.00477271405408747*n+1.53380253221734)+I*(9.61250184130688E-4*I-.00266257332283933*n+.48357088451265)+n*(-3.36197177618394E-4*n+.484791561490776),Q[b++]=107.268039397724+L*(2.19927104525741E-5*L-6.40992018297945E-4*v+6.59397001245577E-4*I+4.26105652938837E-4*n-.176491792462875)+v*(-7.78269941513683E-4*v+.00130872261408275*I+7.70482631801132E-4*
n-.151051492775562)+I*(.00126935368114843*I-.00265090189010898*n+.25802910206845)+n*(-3.18913117588328E-4*n-.213742400323665),Q[b++]=-20.810012546947+L*(-5.70115196973677E-4*L-2.63409051004589E-5*v+.0020741088115012*I-.00288260236853442*n+.814272968359295)+v*(-1.53496057440975E-5*v-1.32689043961446E-4*I+5.60833691242812E-4*n-.195152027534049)+I*(.00174418132927582*I-.00255243321439347*n+.116935020465145)+n*(-3.43531996510555E-4*n+.24165260232407);return Q},_convertYcckToCmyk:function(Q){for(var I,
L,v,n=0,b=Q.length;n<b;n+=4)I=Q[n],L=Q[n+1],v=Q[n+2],Q[n]=434.456-I-1.402*v,Q[n+1]=119.541-I+.344*L+.714*v,Q[n+2]=481.816-I-1.772*L;return Q},_convertCmykToRgb:function(Q){for(var I,L,v,n,b=0,d=1/255,e=0,q=Q.length;e<q;e+=4)I=Q[e]*d,L=Q[e+1]*d,v=Q[e+2]*d,n=Q[e+3]*d,Q[b++]=255+I*(-4.387332384609988*I+54.48615194189176*L+18.82290502165302*v+212.25662451639585*n-285.2331026137004)+L*(1.7149763477362134*L-5.6096736904047315*v-17.873870861415444*n-5.497006427196366)+v*(-2.5217340131683033*v-21.248923337353073*
n+17.5119270841813)-n*(21.86122147463605*n+189.48180835922747),Q[b++]=255+I*(8.841041422036149*I+60.118027045597366*L+6.871425592049007*v+31.159100130055922*n-79.2970844816548)+L*(-15.310361306967817*L+17.575251261109482*v+131.35250912493976*n-190.9453302588951)+v*(4.444339102852739*v+9.8632861493405*n-24.86741582555878)-n*(20.737325471181034*n+187.80453709719578),Q[b++]=255+I*(.8842522430003296*I+8.078677503112928*L+30.89978309703729*v-.23883238689178934*n-14.183576799673286)+L*(10.49593273432072*
L+63.02378494754052*v+50.606957656360734*n-112.23884253719248)+v*(.03296041114873217*v+115.60384449646641*n-193.58209356861505)-n*(22.33816807309886*n+180.12613974708367);return Q},getData:function(Q,I,L){if(4<this.numComponents)throw new X("Unsupported color mode");Q=this._getLinearizedBlockData(Q,I);if(1===this.numComponents&&L){L=Q.length;I=new Uint8ClampedArray(3*L);for(var v=0,n=0;n<L;n++){var b=Q[n];I[v++]=b;I[v++]=b;I[v++]=b}return I}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(Q);
if(4===this.numComponents){if(this._isColorConversionNeeded())return L?this._convertYcckToRgb(Q):this._convertYcckToCmyk(Q);if(L)return this._convertCmykToRgb(Q)}return Q}};return t}()})})(r);S.JpegImage=r.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(S,r,ea){function X(aa,Q,I){I.set(aa.slice(Q,Q+I.length))}function t(aa){const {_malloc:Q,_free:I,_lerc_getBlobInfo:L,_lerc_getDataRanges:v,_lerc_decode_4D:n,asm:b}=aa;let d;const e=
Object.values(b).find(g=>g&&"buffer"in g&&g.buffer===aa.HEAPU8.buffer),q=g=>{g=g.map(x=>(x>>3<<3)+16);var l=g.reduce((x,h)=>x+h),p=Q(l);d=new Uint8Array(e.buffer);l=g[0];g[0]=p;for(p=1;p<g.length;p++){const x=g[p];g[p]=g[p-1]+l;l=x}return g};ma.getBlobInfo=g=>{var l=new Uint8Array(48),p=new Uint8Array(24);const [x,h,k]=q([g.length,l.length,p.length]);d.set(g,x);d.set(l,h);d.set(p,k);var m=L(x,g.length,h,k,12,3);if(m)throw I(x),`lerc-getBlobInfo: error code is ${m}`;d=new Uint8Array(e.buffer);X(d,
h,l);X(d,k,p);l=new Uint32Array(l.buffer);var y=new Float64Array(p.buffer);const [D,C,O,R,K,A,V,ja,ha,,H]=l;p={version:D,dimCount:O,width:R,height:K,validPixelCount:V,bandCount:A,blobSize:ja,maskCount:ha,dataType:C,minValue:y[0],maxValue:y[1],maxZerror:y[2],statistics:[],bandCountWithNoData:H};if(H)return p;if(1===O&&1===A)return I(x),p.statistics.push({minValue:y[0],maxValue:y[1]}),p;m=O*A*8;var F=new Uint8Array(m),w=new Uint8Array(m);l=x;var E=y=0;let f=!1;d.byteLength<x+2*m?(I(x),f=!0,[l,y,E]=
q([g.length,m,m]),d.set(g,l)):[y,E]=q([m,m]);d.set(F,y);d.set(w,E);if(m=v(l,g.length,O,A,y,E))throw I(l),f||I(y),`lerc-getDataRanges: error code is ${m}`;d=new Uint8Array(e.buffer);X(d,y,F);X(d,E,w);g=new Float64Array(F.buffer);m=new Float64Array(w.buffer);w=p.statistics;for(F=0;F<A;F++)if(1<O){E=g.slice(F*O,(F+1)*O);const u=m.slice(F*O,(F+1)*O),G=Math.min.apply(null,E),N=Math.max.apply(null,u);w.push({minValue:G,maxValue:N,dimStats:{minValues:E,maxValues:u}})}else w.push({minValue:g[F],maxValue:m[F]});
I(l);f||I(y);return p};ma.decode=(g,l)=>{const {maskCount:p,dimCount:x,bandCount:h,width:k,height:m,dataType:y,bandCountWithNoData:D}=l;var C=Y[y],O=k*m;l=new Uint8Array(O*h);C=new Uint8Array(O*x*h*C.size);O=new Uint8Array(h);var R=new Uint8Array(8*h);const [K,A,V,ja,ha]=q([g.length,l.length,C.length,O.length,R.length]);d.set(g,K);d.set(l,A);d.set(C,V);d.set(O,ja);d.set(R,ha);if(g=n(K,g.length,p,A,x,k,m,h,y,V,ja,ha))throw I(K),`lerc-decode: error code is ${g}`;d=new Uint8Array(e.buffer);X(d,V,C);
X(d,A,l);g=null;if(D){X(d,ja,O);X(d,ha,R);g=[];R=new Float64Array(R.buffer);for(let H=0;H<O.length;H++)g.push(O[H]?R[H]:null)}I(K);return{data:C,maskData:l,noDataValues:g}}}const Y=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let fa=null,pa=!1;const ma={getBlobInfo:null,decode:null};r.decode=function(aa,Q={}){var I,L=null!=(I=Q.inputOffset)?I:0;I=aa instanceof Uint8Array?aa.subarray(L):new Uint8Array(aa,L);aa=ma.getBlobInfo(I);const {data:v,maskData:n}=ma.decode(I,aa),{width:b,height:d,
bandCount:e,dimCount:q,dataType:g,maskCount:l,statistics:p}=aa;I=Y[g];var x=new I.ctor(v.buffer);L=[];const h=[],k=b*d;var m=k*q;for(var y=0;y<e;y++){var D=x.subarray(y*m,(y+1)*m);if(Q.returnPixelInterleavedDims)L.push(D);else{a:{var C=k,O=q;if(2>O)break a;const R=new I.ctor(C*O);for(let K=0,A=0;K<C;K++)for(let V=0,ja=K;V<O;V++,ja+=C)R[ja]=D[A++];D=R}L.push(D)}h.push(n.subarray(y*m,(y+1)*m))}x=0===l?null:1===l?h[0]:new Uint8Array(k);if(1<l)for(x.set(h[0]),m=1;m<h.length;m++)for(y=h[m],D=0;D<k;D++)x[D]&=
y[D];({noDataValue:m}=Q);y=null!=m&&I.range[0]<=m&&I.range[1]>=m;if(0<l&&y)for(y=0;y<e;y++)for(D=L[y],C=h[y]||x,O=0;O<k;O++)0===C[O]&&(D[O]=m);return{width:b,height:d,bandCount:e,pixelType:Q.pixelType&&0===aa.version?Q.pixelType:I.pixelType,dimCount:q,statistics:p,pixels:L,mask:x,bandMasks:l===e&&1<e?h:null}};r.getBlobInfo=function(aa,Q={}){var I,L;aa=aa instanceof Uint8Array?aa.subarray(null!=(I=Q.inputOffset)?I:0):new Uint8Array(aa,null!=(L=Q.inputOffset)?L:0);return ma.getBlobInfo(aa)};r.isLoaded=
function(){return pa};r.load=function(){return fa?fa:fa=(new Promise((aa,Q)=>S(["../../../chunks/lerc-wasm"],aa,Q))).then(aa=>aa.lercWasm).then(({default:aa})=>aa({locateFile:Q=>ea.getAssetUrl(`esri/layers/support/rasterFormats/${Q}`)})).then(aa=>{t(aa);pa=!0})};Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(S){function r(Y,fa,pa,ma=!0){if(0!==fa%4||0!==pa%4){var aa=new ArrayBuffer(4*
Math.ceil(pa/4));aa=new Uint8Array(aa);Y=new Uint8Array(Y,fa,pa);if(ma)for(ma=0;ma<aa.length;ma+=4)aa[ma]=Y[ma+3],aa[ma+1]=Y[ma+2],aa[ma+2]=Y[ma+1],aa[ma+3]=Y[ma];else aa.set(Y);return new Uint32Array(aa.buffer)}if(ma){ma=new Uint8Array(Y,fa,pa);aa=new Uint8Array(ma.length);for(Y=0;Y<aa.length;Y+=4)aa[Y]=ma[Y+3],aa[Y+1]=ma[Y+2],aa[Y+2]=ma[Y+1],aa[Y+3]=ma[Y];return new Uint32Array(aa.buffer)}return new Uint32Array(Y,fa,pa/4)}function ea(){const Y=[];for(let fa=0;257>=fa;fa++)Y[fa]=[fa];return Y}function X(Y,
fa){for(let pa=0;pa<fa.length;pa++)Y.push(fa[pa])}const t=new Set;t.add(511);t.add(1023);t.add(2047);t.add(4095);t.add(8191);S.decode=function(Y,fa,pa,ma=!0){Y=r(Y,fa,pa,ma);fa=9;ma=ea();let aa=32,Q=ma.length,I=[],L=1,v=Y[0],n=0;const b=Y.length;pa=8*(4*b-pa);const d=[];for(;null!=v;){if(aa>=fa)aa-=fa,n=v>>>32-fa,v<<=fa;else{n=v>>>32-aa;v=Y[L++];var e=fa-aa;aa=32-e;n=(n<<e)+(v>>>aa);v<<=e}if(257===n)break;if(256===n)fa=9,ma=ea(),Q=ma.length,I=[];else{e=ma[n];if(null==e){if(n>ma.length)throw"data integrity issue: code does not exist on code page";
I.push(I[0]);ma[Q++]=I.slice();X(d,I)}else X(d,e),I.push(e[0]),1<I.length&&(ma[Q++]=I.slice()),I=e.slice();t.has(Q)&&fa++;0===aa&&(v=Y[L++],aa=32);if(L>b||L===b&&aa<=pa)break}}return new Uint8Array(d)};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const S=r=>{let ea=1;switch(r){case Uint8Array:case Int8Array:ea=1;break;case Uint16Array:case Int16Array:ea=2;break;case Uint32Array:case Int32Array:case Float32Array:ea=
4;break;case Float64Array:ea=8}return ea};return function(){function r(){}r.decode=function(ea,X){var t=X.pixelType;const Y=[],fa=X.width*X.height;var pa=Math.floor(ea.byteLength/(X.width*X.height*S(X.pixelType)));const {bandIds:ma,format:aa}=X;X=ma&&ma.length||Math.floor(ea.byteLength/(X.width*X.height*S(X.pixelType)));var Q=ea.byteLength-ea.byteLength%(fa*S(t));const I=new t(ea,0,fa*pa);let L,v;let n,b;if("bip"===aa)for(L=0;L<X;L++){n=new t(fa);b=ma?ma[L]:L;for(v=0;v<fa;v++)n[v]=I[v*pa+b];Y.push(n)}else if("bsq"===
aa)for(L=0;L<X;L++)b=ma?ma[L]:L,Y.push(I.subarray(b*fa,(b+1)*fa));if(Q<ea.byteLength-1)if(ea=ea.slice(Q),8*ea.byteLength<fa)var d=null;else{ea=new Uint8Array(ea,0,Math.ceil(fa/8));t=new Uint8Array(fa);for(X=Q=X=d=pa=0;X<ea.length-1;X++)for(d=ea[X],Q=7;0<=Q;Q--)t[pa++]=d>>Q&1;for(Q=7;pa<fa-1;)d=ea[ea.length-1],t[pa++]=d>>Q&1,Q--;d=t}return{pixels:Y,mask:d}};return r}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma){function aa(H,F){let w="unknown";3===H?w="f32":1===H?1===F?w="u1":2===F?w="u2":4===F?w="u4":8>=F?w="u8":16>=F?w="u16":32>=F&&(w="u32"):2===H&&(8>=F?w="s8":16>=F?w="s16":32>=F&&(w="s32"));return w}function Q(H){let F=null;switch(H?H.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":F=Uint8Array;break;case "u16":F=Uint16Array;break;case "u32":F=Uint32Array;break;case "s8":F=Int8Array;break;case "s16":F=Int16Array;break;case "s32":F=Int32Array;break;default:F=
Float32Array}return F}function I(H,F){return{x:F[0]*H.x+F[1]*H.y+F[2],y:F[3]*H.x+F[4]*H.y+F[5]}}function L(H,F){var w;return null==(w=H.get(F))?void 0:w.values}function v(H,F){var w;return null==(w=H.get(F))?void 0:w.values}function n(H,F){var w;return null==(w=H.get(F))?void 0:w.values[0]}function b(H,F){var w;return null==(w=H.get(F))?void 0:w.values[0]}function d(H,F,w,E=0,f=fa.TIFF_TAGS,u=4){var G=8===u;const N=G?m(new DataView(H,w,8),0,F):(new DataView(H,w,2)).getUint16(0,F),U=4+2*u;var T=G?
8:2;G=T+N*U;if(w+G>H.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:G};const P=w+G+4<=H.byteLength?y(new DataView(H,w+G,8===u?8:4),0,F,8===u):null;w+=T;T=new Map;let a,c,B,z,Z;for(let ba=0;ba<N;ba++){var ca=new DataView(H,w+U*ba,U);a=ca.getUint16(0,F);B=ca.getUint16(2,F);c=fa.getTagName(a,f);const la=[];2===u?(z=ca.getUint16(4,F),Z=ca.getUint16(6,F)):4===u?(z=ca.getUint32(4,F),Z=ca.getUint32(8,F)):8===u&&(z=y(ca,4,F,!0),Z=y(ca,12,F,!0),la.push(ca.getUint32(12,F)),la.push(ca.getUint32(16,
F)));ca={id:a,type:B,valueCount:z,valueOffset:Z,valueOffsets:la,values:null};p(H,F,ca,E,!1,u);T.set(c,ca)}return{success:!0,ifd:T,nextIFD:P,requiredBufferSize:G}}function e(H,F,w,E,f){return q.apply(this,arguments)}function q(){q=r._asyncToGenerator(function*(H,F,w,E,f){var u,G,N=pa.isPlatformLittleEndian===F,U=b(w,"BITSPERSAMPLE");const T=null!=(u=b(w,"SAMPLEFORMAT"))?u:1;u=aa(T,U);U=null!=(G=b(w,"COMPRESSION"))?G:1;G=Q(u);if(34887===U)return yield t.load(),t.decode(H,{inputOffset:E}).pixels[0];
if(1===U){var P=H.slice(E,E+f);var a=new Uint8Array(P)}else if(8===U||32946===U)a=new Uint8Array(H,E,f),a=new ma.Zlib(a),H=a.getBytes(),P=new ArrayBuffer(H.length),a=new Uint8Array(P),a.set(H);else if(6===U)a=new Uint8Array(H,E,f),P=new X.JpegImage,P.parse(a),H=P.getData(P.width,P.height,!0),P=new ArrayBuffer(H.length),a=new Uint8Array(P),a.set(H);else if(7===U){F=w.get("JPEGTABLES").values;P=F.length-2;a=new Uint8Array(P+f-2);for(w=0;w<P;w++)a[w]=F[w];H=new Uint8Array(H,E+2,f-2);for(E=0;E<H.length;E++)a[P+
E]=H[E];P=new X.JpegImage;P.parse(a);H=P.getData(P.width,P.height,!0);P=new ArrayBuffer(H.length);a=new Uint8Array(P);a.set(H)}else 5===U&&(a=Y.decode(H,E,f,F),P=a.buffer);if("u8"!==u&&"s8"!==u&&!N)switch(P=new ArrayBuffer(a.length),N=new Uint8Array(P),u){case "u16":case "s16":for(u=0;u<a.length;u+=2)N[u]=a[u+1],N[u+1]=a[u];break;case "u32":case "s32":case "f32":for(u=0;u<a.length;u+=4)N[u]=a[u+3],N[u+1]=a[u+2],N[u+2]=a[u+1],N[u+3]=a[u]}return new G(P)});return q.apply(this,arguments)}function g(H,
F,w){return l.apply(this,arguments)}function l(){l=r._asyncToGenerator(function*(H,F,w){var E;const f=v(w,"TILEOFFSETS");if(void 0===f)return null;const u=v(w,"TILEBYTECOUNTS"),{width:G,height:N,pixelType:U,tileWidth:T,tileHeight:P}=x([w]);var a=h(w,F);const c=F.planes;var B=G*N,z=b(w,"BITSPERSAMPLE"),Z=34887===(null!=(E=b(w,"COMPRESSION"))?E:1),ca=Q(U);E=[];for(var ba=0;ba<c;ba++)E.push(new ca(B));let la,da,oa,na,qa,ua,ra,va;B=Math.ceil(G/T);if(0===z%8)if(Z&&a&&1<c)for(a=Math.round(f.length/c),z=
0;z<a;z++){var wa=Math.floor(z/B)*P;oa=z%B*T;ca=wa*G+oa;for(Z=0;Z<c;Z++)if(ba=z*c+Z,0!==u[ba])for(ba=yield e(H,F.littleEndian,w,f[ba],u[ba]),qa=0,na=ca,ra=Math.min(T,G-oa),ua=Math.min(P,N-wa),va=E[Z],la=0;la<ua;la++)for(na=ca+la*G,qa=la*T,da=0;da<ra;da++,na++,qa++)va[na]=ba[qa]}else for(z=0;z<f.length;z++)if(0!==u[z])for(wa=Math.floor(z/B)*P,oa=z%B*T,ca=wa*G+oa,ba=yield e(H,F.littleEndian,w,f[z],u[z]),qa=0,na=ca,ra=Math.min(T,G-oa),ua=Math.min(P,N-wa),wa=0;wa<c;wa++)if(va=E[wa],a||Z)for(la=0;la<ua;la++)for(na=
ca+la*G,qa=T*P*wa+la*T,da=0;da<ra;da++,na++,qa++)va[na]=ba[qa];else for(la=0;la<ua;la++)for(na=ca+la*G,qa=la*T*c+wa,da=0;da<ra;da++,na++,qa+=c)va[na]=ba[qa];return{width:G,height:N,pixelType:U,pixels:E}});return l.apply(this,arguments)}function p(H,F,w,E=0,f=!1,u=4){if(w.values)return!0;var G=w.type,N=w.valueCount,U=w.valueOffset;let T=[];var P=A[G],a=8*P,c=N*P,B=N*A[G]*8,z=8===u?64:32;u=w.valueOffsets;if(B>z&&c>(f?H.byteLength:H?H.byteLength-U+E:0))return w.offlineOffsetSize=[U,c],w.values=null,
!1;if(B<=z)if(F||(32>=z?U>>>=32-B:(H=null!=u&&u.length?u[0]:U>>>0,F=null!=u&&u.length?u[1]:Math.round((U-H)/4294967296),32>=B?(U=H>>>32-B,u[0]=U):(U=H*2**(32-B)+(F>>>32-B),u[0]=H,u[1]=F>>>32-B))),1===N&&a===z)T=[U];else if(64===z)for(H=null!=u&&u.length?u[0]:U>>>0,U=null!=u&&u.length?u[1]:Math.round((U-H)/4294967296),F=H,P=32,H=1;H<=N;H++)c=32-a*H%32,P<a?(c=F<<c>>>32-P,B=U<<32-P>>>32-P,F=U,T.push(c+B*2**(a-P)),P-=32-(a-P)):(T.push(F<<c>>>32-a),P-=a),0===P&&(P=32,F=U);else for(H=1;H<=N;H++)T.push(U<<
32-a*H>>>32-a);else for(U-=E,f&&(U=0),N=U;N<U+c;N+=P){switch(G){case 1:a=(new DataView(H,N,1)).getUint8(0);break;case 2:a=(new DataView(H,N,1)).getUint8(0);break;case 3:a=(new DataView(H,N,2)).getUint16(0,F);break;case 4:case 13:a=(new DataView(H,N,4)).getUint32(0,F);break;case 5:a=(new DataView(H,N,4)).getUint32(0,F)/(new DataView(H,N+4,4)).getUint32(0,F);break;case 6:a=(new DataView(H,N,1)).getInt8(0);break;case 7:a=(new DataView(H,N,1)).getUint8(0);break;case 8:a=(new DataView(H,N,2)).getInt16(0,
F);break;case 9:a=(new DataView(H,N,4)).getInt32(0,F);break;case 10:a=(new DataView(H,N,4)).getInt32(0,F)/(new DataView(H,N+4,4)).getInt32(0,F);break;case 11:a=(new DataView(H,N,4)).getFloat32(0,F);break;case 12:a=(new DataView(H,N,8)).getFloat64(0,F);break;case 16:case 18:a=m(new DataView(H,N,8),0,F);break;case 17:u=new DataView(H,N,8);B=(a=F)?u.getInt32(0,a):u.getUint32(0,a);u=a?u.getUint32(4,a):u.getInt32(4,a);z=0<=(a?B:u)?1:-1;a?B*=z:u*=z;a=z*(a?4294967296*u+B:4294967296*B+u);break;default:a=
null}T.push(a)}if(2===G){G="";U=T;T=[];for(H=0;H<U.length;H++)0===U[H]&&""!==G?(T.push(G),G=""):G+=String.fromCharCode(U[H]);""===G&&0!==T.length||T.push(G)}w.values=T;return!0}function x(H){var F,w,E=H[0];const f=b(E,"TILEWIDTH"),u=b(E,"TILELENGTH"),G=b(E,"IMAGEWIDTH"),N=b(E,"IMAGELENGTH");var U=b(E,"BITSPERSAMPLE");const T=b(E,"SAMPLESPERPIXEL");var P=null!=(F=b(E,"SAMPLEFORMAT"))?F:1;F=aa(P,U);const a=h(E);var c=L(E,"GDAL_NODATA");let B;null!=c&&c.length&&(B=c.map(va=>parseFloat(va)),B.some(va=>
isNaN(va))&&(B=null));var z=null!=(w=b(E,"COMPRESSION"))?w:1;switch(z){case 1:w="NONE";break;case 2:case 3:case 4:case 32771:w="CCITT";break;case 5:w="LZW";break;case 6:case 7:w="JPEG";break;case 32773:w="PACKBITS";break;case 8:case 32946:w="DEFLATE";break;case 34712:w="JPEG2000";break;case 34887:w="LERC";break;default:w=String(z)}c=!0;let Z="";V.has(z)||(c=!1,Z+="unsupported tag compression "+z);3<P&&(c=!1,Z+="unsupported tag sampleFormat "+P);0!==U%8&&(c=!1,Z+="unsupported tag bitsPerSample "+U);
U=n(E,"GEOASCIIPARAMS");if(U){var ca=(ca=U.split("|").find(va=>va.includes("ESRI PE String \x3d ")))?ca.replace("ESRI PE String \x3d ",""):"";ca=ca.startsWith("COMPD_CS")||ca.startsWith("PROJCS")||ca.startsWith("GEOGCS")?{wkid:null,wkt:ca}:null}P=v(E,"GEOTIEPOINTS");U=v(E,"GEOPIXELSCALE");z=v(E,"GEOTRANSMATRIX");var ba=E.has("GEOKEYDIRECTORY")?E.get("GEOKEYDIRECTORY").data:null;E=!1;if(ba){E=2===b(ba,"GTRasterTypeGeoKey");var la=b(ba,"GTModelTypeGeoKey");2===la?(ba=b(ba,"GeographicTypeGeoKey"),1024<=
ba&&32766>=ba&&(ca={wkid:ba})):1===la&&(ba=b(ba,"ProjectedCSTypeGeoKey"),1024<=ba&&32766>=ba&&(ca={wkid:ba}))}let da;U&&P&&6<=P.length?(da=[U[0],0,P[3]-P[0]*U[0],0,-Math.abs(U[1]),P[4]-P[1]*U[1]],E&&(da[2]-=.5*da[0]+.5*da[1],da[5]-=.5*da[3]+.5*da[4])):z&&16===z.length&&(da=E?[z[0],z[1],z[3]-.5*z[0],z[4],z[5],z[7]-.5*z[5]]:[z[0],z[1],z[3],z[4],z[5],z[7]]);if(da){E=[{x:0,y:N},{x:0,y:0},{x:G,y:N},{x:G,y:0}];ba=z=Number.POSITIVE_INFINITY;let va=la=Number.NEGATIVE_INFINITY;for(let wa=0;wa<E.length;wa++)P=
I(E[wa],da),z=P.x>z?z:P.x,la=P.x<la?la:P.x,ba=P.y>ba?ba:P.y,va=P.y<va?va:P.y;ca={xmin:z,xmax:la,ymin:ba,ymax:va,spatialReference:ca}}else ca={xmin:-.5,ymin:.5-N,xmax:G-.5,ymax:.5,spatialReference:ca};E=H.filter(va=>1===n(va,"NEWSUBFILETYPE"));let oa,na,qa;if(0<E.length){oa=Math.round(Math.log(G/b(E[0],"IMAGEWIDTH"))/Math.LN2);var ua=E[E.length-1];na=Math.round(Math.log(G/b(ua,"IMAGEWIDTH"))/Math.LN2);qa=b(ua,"TILEWIDTH");ua=b(ua,"TILELENGTH")}qa=0<na?qa||f:null;ua=0<na?ua||u:null;let ra;f&&(ra=[{maxCol:Math.ceil(G/
f)-1,maxRow:Math.ceil(N/u)-1,minRow:0,minCol:0}],E.forEach(va=>{ra.push({maxCol:Math.ceil(b(va,"IMAGEWIDTH")/b(va,"TILEWIDTH"))-1,maxRow:Math.ceil(b(va,"IMAGELENGTH")/b(va,"TILELENGTH"))-1,minRow:0,minCol:0})}));E=n(H[0],"GDAL_METADATA");E=ha(E);Z+=" "+O({width:G,height:N,tileWidth:f,tileHeight:u,planes:T,ifds:H});return{width:G,height:N,tileWidth:f,tileHeight:u,planes:T,isBSQ:a,pixelType:F,compression:w,noData:B,isSupported:c,message:Z,extent:ca,affine:U?null:da,firstPyramidLevel:oa,maximumPyramidLevel:na,
pyramidBlockWidth:qa,pyramidBlockHeight:ua,tileBoundary:ra,metadata:E}}function h(H,F){return(H=L(H,"PLANARCONFIGURATION"))?2===H[0]:F?F.isBSQ:!1}function k(H){const {littleEndian:F,isBigTiff:w,firstIFD:E}=D(H);var f=E;const u=[];do if(f=C(H,F,f,0,fa.TIFF_TAGS,w?8:4),f.success)u.push(f.ifd),f=f.nextIFD;else break;while(0<f);return{...x(u),littleEndian:F,isBigTiff:w,ifds:u}}function m(H,F,w){const E=H.getUint32(F,w);H=H.getUint32(F+4,w);return w?4294967296*H+E:4294967296*E+H}function y(H,F,w,E){return E?
m(H,F,w):H.getUint32(F,w)}function D(H){var F=new DataView(H,0,16),w=F.getUint16(0,!1);H=null;if(18761===w)H=!0;else if(19789===w)H=!1;else throw"unexpected endianess byte";var E=F.getUint16(2,H);if(42!==E&&43!==E)throw"unexpected tiff identifier";w=4;if(E=43===E){const f=F.getUint16(w,H);w+=2;if(8!==f)throw"unsupported bigtiff version";if(0!==F.getUint16(w,H))throw"unsupported bigtiff version";w+=2}F=y(F,w,H,E);return{littleEndian:H,isBigTiff:E,firstIFD:F}}function C(H,F,w,E=0,f=fa.TIFF_TAGS,u=4){w=
d(H,F,w,E,f,u);let G;const N=w.ifd;N&&(fa.ifdTags.forEach((U,T)=>{N.has(T)&&(G=N.get(T),G.data=d(H,F,G.valueOffset-E,E,U).ifd)}),N.has("GEOKEYDIRECTORY")&&(G=N.get("GEOKEYDIRECTORY"),(f=G.values)&&4<f.length&&(f=f[0]+"."+f[1]+"."+f[2],G.data=d(H,F,G.valueOffset+6-E,E,fa.GEO_KEYS,2).ifd,G.data&&G.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[f]}))),N.has("XMP")&&(G=N.get("XMP"),f=G.values,"number"===typeof f[0]&&7===G.type&&(G.values=[ea.bytesToUTF8(new Uint8Array(f))])));
return w}function O(H){const {width:F,height:w,tileHeight:E,tileWidth:f}=H,u=H.planes,G=f?f*E:F*w;H=b(H.ifds[0],"BITSPERSAMPLE");let N="";G*u>2**30/(8<H?H/8:1)&&(N=f?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return N}function R(){R=r._asyncToGenerator(function*(H,F){var w;const {headerInfo:E,ifd:f,offsets:u,sizes:G}=F;var N=[];for(var U=0;U<u.length;U++){var T=yield e(H,E.littleEndian,f,u[U],G[U]||H.byteLength);N.push(T)}var P=
h(f,E);const {pixelType:a,planes:c}=E;var B=Q(a);H=b(f,"TILEWIDTH");U=b(f,"TILELENGTH");var z=null!=(w=b(f,"COMPRESSION"))?w:1;w=H*U;T=[];let Z=N[0];const ca=34887===z;for(let da=0;da<c;da++){z=new B(w);if(P&&ca){if(Z=N[da],Z.length)for(var ba=0;ba<w;ba++)z[ba]=Z[da][ba+da]}else if(Z.length)if(P||ca&&!P)z=Z.slice(w*da,w*(da+1));else for(ba=0;ba<w;ba++)z[ba]=Z[ba*c+da];T.push(z)}N=E.noData?E.noData[0]:F.noDataValue;P=(B=E.metadata?E.metadata.statistics:null)?B.map(da=>da.min):null;B=B?B.map(da=>da.max):
null;let la;if(null!=N)if(la=new Uint8Array(w),1E24<Math.abs(N))for(F=0;F<w;F++)la[F]=1E-6>Math.abs((T[0][F]-N)/N)?0:1;else for(F=0;F<w;F++)la[F]=T[0][F]===N?0:1;else P&&B&&F.applyMinMaxConstraint&&(la=ja(T,P,B));return{pixelType:a,width:H,height:U,pixels:T,mask:la,noDataValue:N}});return R.apply(this,arguments)}function K(){K=r._asyncToGenerator(function*(H,F={}){var w=F.pyramidLevel||0,E=F.headerInfo||k(H);const {ifds:f,noData:u}=E;if(0===f.length)throw"no valid image file directory";var G=O(E);
if(G)throw G;var N=-1===w?f[f.length-1]:f[w];F=u?u[0]:F.noDataValue;if(E.tileWidth)E=yield g(H,E,N);else{{var U;const ua=pa.isPlatformLittleEndian===E.littleEndian,ra=v(N,"STRIPOFFSETS");if(void 0===ra)H=null;else{var {width:T,height:P,pixelType:a}=x([N]);w=E.planes;G=T*P;var c=b(N,"BITSPERSAMPLE"),B=Q(a),z=new B(G*w),Z=v(N,"STRIPBYTECOUNTS"),ca=b(N,"ROWSPERSTRIP");N=null!=(U=b(N,"COMPRESSION"))?U:1;var ba=ca;if(0===c%8)for(U=0;U<ra.length;U++){var la=U*ca*T*w;ba=(U+1)*ca>P?P-U*ca:ca;if("u8"===a||
"s8"===a||ua)if(8===N||32946===N){var da=new Uint8Array(H,ra[U],Z[U]);da=new ma.Zlib(da);var oa=da.getBytes();var na=new ArrayBuffer(oa.length);da=new Uint8Array(na);da.set(oa);da.length!==ba*T*w*c/8&&console.log("strip byte counts is different than expected")}else 6===N?(da=new Uint8Array(H,ra[U],Z[U]),na=new X.JpegImage,na.parse(da),ba=na.getData(na.width,na.height,!0),na=new ArrayBuffer(ba.length),da=new Uint8Array(na),da.set(ba)):5===N?(da=Y.decode(H,ra[U],Z[U],E.littleEndian),na=da.buffer):1===
N&&(Z[U]!==ba*T*w*c/8&&console.log("strip byte counts is different than expected"),na=H.slice(ra[U],ra[U]+Z[U]));else{if(6===N||8===N||32946===N){da=new Uint8Array(H,ra[U],Z[U]);da=new ma.Zlib(da);da=da.getBytes();na=new ArrayBuffer(da.length);var qa=new Uint8Array(na);da.length!==ba*T*w*c/8&&console.log("strip byte counts is different than expected")}else 1===N&&(Z[U]!==ba*T*w*c/8&&console.log("strip byte counts is different than expected"),na=new ArrayBuffer(Z[U]),da=new Uint8Array(H,ra[U],Z[U]),
qa=new Uint8Array(na));switch(a){case "u16":case "s16":for(ba=0;ba<da.length;ba+=2)qa[ba]=da[ba+1],qa[ba+1]=da[ba];break;case "u32":case "s32":case "f32":for(ba=0;ba<da.length;ba+=4)qa[ba]=da[ba+3],qa[ba+1]=da[ba+2],qa[ba+2]=da[ba+1],qa[ba+3]=da[ba]}}ba=new B(na);z.set(ba,la)}qa=[];if(1===w)qa.push(z);else for(U=0;U<w;U++){E=new B(G);for(H=0;H<G;H++)E[H]=z[H*w+U];qa.push(E)}H={width:T,height:P,pixelType:a,pixels:qa}}}E=yield H}if(null!==F){E.mask=new Uint8Array(E.width*E.height);if(1E24<Math.abs(F))for(H=
0;H<E.width*E.height;H++)E.mask[H]=1E-6>Math.abs((E.pixels[0][H]-F)/F)?0:1;else for(H=0;H<E.width*E.height;H++)E.mask[H]=E.pixels[0][H]===F?0:1;E.noDataValue=F}return E});return K.apply(this,arguments)}const A=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],V=new Set([1,5,6,7,8,34712,34887]),ja=(H,F,w)=>{if(!(H&&0<H.length&&F&&w))return null;let E,f,u;const G=H[0].length,N=H.length,U=new Uint8Array(G);for(let P=0;P<N;P++)if(E=H[P],f=F[P],u=w[P],0===P)for(var T=0;T<G;T++)U[T]=E[T]<f||E[T]>u?0:1;else for(T=
0;T<G;T++)U[T]&&(U[T]=E[T]<f||E[T]>u?0:1);return U},ha=H=>{if(!H)return null;var F=H.match(/<Item(.*?)Item>/gi);if(!F||0===F.length)return null;H=new Map;var w;for(var E=0;E<F.length;E++){var f=F[E];var u=f.slice(6,f.indexOf("\x3e"));var G=f.indexOf("sample\x3d");-1<G&&(w=f.slice(G+8,f.indexOf('"',G+8)));G=f.indexOf("name\x3d");-1<G&&(u=f.slice(G+6,f.indexOf('"',G+6)));u&&(f=f.slice(f.indexOf("\x3e")+1,f.indexOf("\x3c/Item\x3e")).trim(),null!=w?H.has(u)?H.get(u)[w]=f:H.set(u,[f]):H.set(u,f));w=null}F=
H.get("STATISTICS_MINIMUM");u=H.get("STATISTICS_MAXIMUM");E=H.get("STATISTICS_MEAN");f=H.get("STATISTICS_STDDEV");w=null;if(F&&u)for(w=[],G=0;G<F.length;G++)w.push({min:parseFloat(F[G]),max:parseFloat(u[G]),avg:E&&parseFloat(E[G]),stddev:f&&parseFloat(f[G])});u=H.get("BandName");E=H.get("WavelengthMin");f=H.get("WavelengthMax");F=null;if(u)for(F=[],G=0;G<u.length;G++)F.push({BandName:u[G],WavelengthMin:E&&parseFloat(E[G]),WavelengthMax:f&&parseFloat(f[G])});u=H.get("DataType");return{statistics:w,
bandProperties:F,dataType:u,rawMetadata:H}};S.decode=function(H){return K.apply(this,arguments)};S.decodeTileOrStrip=function(H,F){return R.apply(this,arguments)};S.getImageInfo=x;S.isBSQConfig=h;S.parseFieldValues=p;S.parseHeader=k;S.parseIFD=C;S.parseSignature=D;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(S){S.bytesToUTF8=function(r,ea){let X=0,t="",Y=0,fa=
0;const pa=r.length;for(;X<pa;)if(fa=r[X++],Y=fa>>4,8>Y?Y=1:15===Y?(Y=4,fa=(fa&7)<<18|(r[X++]&63)<<12|(r[X++]&63)<<6|r[X++]&63):14===Y?(Y=3,fa=(fa&15)<<12|(r[X++]&63)<<6|r[X++]&63):(Y=2,fa=(fa&31)<<6|r[X++]&63),0!==fa||ea)t+=String.fromCharCode(fa);return t};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const S=(()=>{const t=[];t[254]="NEWSUBFILETYPE";t[255]="SUBFILETYPE";t[256]=
"IMAGEWIDTH";t[257]="IMAGELENGTH";t[258]="BITSPERSAMPLE";t[259]="COMPRESSION";t[262]="PHOTOMETRICINTERPRETATION";t[263]="THRESHHOLDING";t[264]="CELLWIDTH";t[265]="CELLLENGTH";t[266]="FILLORDER";t[269]="DOCUMENTNAME";t[270]="IMAGEDESCRIPTION";t[271]="MAKE";t[272]="MODEL";t[273]="STRIPOFFSETS";t[274]="ORIENTATION";t[277]="SAMPLESPERPIXEL";t[278]="ROWSPERSTRIP";t[279]="STRIPBYTECOUNTS";t[280]="MINSAMPLEVALUE";t[281]="MAXSAMPLEVALUE";t[282]="XRESOLUTION";t[283]="YRESOLUTION";t[284]="PLANARCONFIGURATION";
t[285]="PAGENAME";t[286]="XPOSITION";t[287]="YPOSITION";t[288]="FREEOFFSETS";t[289]="FREEBYTECOUNTS";t[290]="GRAYRESPONSEUNIT";t[291]="GRAYRESPONSECURVE";t[292]="T4OPTIONS";t[293]="T6OPTIONS";t[296]="RESOLUTIONUNIT";t[297]="PAGENUMBER";t[300]="COLORRESPONSEUNIT";t[301]="TRANSFERFUNCTION";t[305]="SOFTWARE";t[306]="DATETIME";t[315]="ARTIST";t[316]="HOSTCOMPUTER";t[317]="PREDICTOR";t[318]="WHITEPOINT";t[319]="PRIMARYCHROMATICITIES";t[320]="COLORMAP";t[321]="HALFTONEHINTS";t[322]="TILEWIDTH";t[323]="TILELENGTH";
t[324]="TILEOFFSETS";t[325]="TILEBYTECOUNTS";t[326]="BADFAXLINES";t[327]="CLEANFAXDATA";t[328]="CONSECUTIVEBADFAXLINES";t[330]="SUBIFD";t[332]="INKSET";t[333]="INKNAMES";t[334]="NUMBEROFINKS";t[336]="DOTRANGE";t[337]="TARGETPRINTER";t[338]="EXTRASAMPLES";t[339]="SAMPLEFORMAT";t[340]="SMINSAMPLEVALUE";t[341]="SMAXSAMPLEVALUE";t[342]="TRANSFERRANGE";t[347]="JPEGTABLES";t[512]="JPEGPROC";t[513]="JPEGIFOFFSET";t[514]="JPEGIFBYTECOUNT";t[515]="JPEGRESTARTINTERVAL";t[517]="JPEGLOSSLESSPREDICTORS";t[518]=
"JPEGPOINTTRANSFORM";t[519]="JPEGQTABLES";t[520]="JPEGDCTABLES";t[521]="JPEGACTABLES";t[529]="YCBCRCOEFFICIENTS";t[530]="YCBCRSUBSAMPLING";t[531]="YCBCRPOSITIONING";t[532]="REFERENCEBLACKWHITE";t[700]="XMP";t[33550]="GEOPIXELSCALE";t[33922]="GEOTIEPOINTS";t[33432]="COPYRIGHT";t[42112]="GDAL_METADATA";t[42113]="GDAL_NODATA";t[50844]="RPCCOEFFICIENT";t[34264]="GEOTRANSMATRIX";t[34735]="GEOKEYDIRECTORY";t[34736]="GEODOUBLEPARAMS";t[34737]="GEOASCIIPARAMS";t[34665]="EXIFIFD";t[34853]="GPSIFD";t[40965]=
"INTEROPERABILITYIFD";return t})(),r=(()=>{const t=[].concat(S);t[36864]="ExifVersion";t[40960]="FlashpixVersion";t[40961]="ColorSpace";t[42240]="Gamma";t[37121]="ComponentsConfiguration";t[37122]="CompressedBitsPerPixel";t[40962]="PixelXDimension";t[40963]="PixelYDimension";t[37500]="MakerNote";t[37510]="UserComment";t[40964]="RelatedSoundFile";t[36867]="DateTimeOriginal";t[36868]="DateTimeDigitized";t[36880]="OffsetTime";t[36881]="OffsetTimeOriginal";t[36882]="OffsetTimeDigitized";t[37520]="SubSecTime";
t[37521]="SubSecTimeOriginal";t[37522]="SubSecTimeDigitized";t[37888]="Temperature";t[37889]="Humidity";t[37890]="Pressure";t[37891]="WaterDepth";t[37892]="Acceleration";t[37893]="CameraElevationAngle";t[42016]="ImageUniqueID";t[42032]="CameraOwnerName";t[42033]="BodySerialNumber";t[42034]="LensSpecification";t[42035]="LensMake";t[42036]="LensModel";t[42037]="LensSerialNumber";t[33434]="ExposureTime";t[33437]="FNumber";t[34850]="ExposureProgram";t[34852]="SpectralSensitivity";t[34855]="PhotographicSensitivity";
t[34856]="OECF";t[34864]="SensitivityType";t[34865]="StandardOutputSensitivity";t[34866]="RecommendedExposureIndex";t[34867]="ISOSpeed";t[34868]="ISOSpeedLatitudeyyy";t[34869]="ISOSpeedLatitudezzz";t[37377]="ShutterSpeedValue";t[37378]="ApertureValue";t[37379]="BrightnessValue";t[37380]="ExposureBiasValue";t[37381]="MaxApertureValue";t[37382]="SubjectDistance";t[37383]="MeteringMode";t[37384]="LightSource";t[37385]="Flash";t[37386]="FocalLength";t[37396]="SubjectArea";t[41483]="FlashEnergy";t[41484]=
"SpatialFrequencyResponse";t[41486]="FocalPlaneXResolution";t[41487]="FocalPlaneYResolution";t[41488]="FocalPlaneResolutionUnit";t[41492]="SubjectLocation";t[41493]="ExposureIndex";t[41495]="SensingMethod";t[41728]="FileSource";t[41729]="SceneType";t[41730]="CFAPattern";t[41985]="CustomRendered";t[41986]="ExposureMode";t[41987]="WhiteBalance";t[41988]="DigitalZoomRatio";t[41989]="FocalLengthIn35mmFilm";t[41990]="SceneCaptureType";t[41991]="GainControl";t[41992]="Contrast";t[41993]="Saturation";t[41994]=
"Sharpness";t[41995]="DeviceSettingDescription";t[41996]="SubjectDistanceRange";return t})(),ea=(()=>{const t=[];t[1024]="GTModelTypeGeoKey";t[1025]="GTRasterTypeGeoKey";t[1026]="GTCitationGeoKey";t[2048]="GeographicTypeGeoKey";t[2049]="GeogCitationGeoKey";t[2050]="GeogGeodeticDatumGeoKey";t[2051]="GeogPrimeMeridianGeoKey";t[2052]="GeogLinearUnitsGeoKey";t[2053]="GeogLinearUnitSizeGeoKey";t[2054]="GeogAngularUnitsGeoKey";t[2055]="GeogAngularUnitSizeGeoKey";t[2056]="GeogEllipsoidGeoKey";t[2057]="GeogSemiMajorAxisGeoKey";
t[2058]="GeogSemiMinorAxisGeoKey";t[2059]="GeogInvFlatteningGeoKey";t[2061]="GeogPrimeMeridianLongGeoKey";t[2060]="GeogAzimuthUnitsGeoKey";t[3072]="ProjectedCSTypeGeoKey";t[3073]="PCSCitationGeoKey";t[3074]="ProjectionGeoKey";t[3075]="ProjCoordTransGeoKey";t[3076]="ProjLinearUnitsGeoKey";t[3077]="ProjLinearUnitSizeGeoKey";t[3078]="ProjStdParallel1GeoKey";t[3079]="ProjStdParallel2GeoKey";t[3080]="ProjNatOriginLongGeoKey";t[3081]="ProjNatOriginLatGeoKey";t[3082]="ProjFalseEastingGeoKey";t[3083]="ProjFalseNorthingGeoKey";
t[3084]="ProjFalseOriginLongGeoKey";t[3085]="ProjFalseOriginLatGeoKey";t[3086]="ProjFalseOriginEastingGeoKey";t[3087]="ProjFalseOriginNorthingGeoKey";t[3088]="ProjCenterLongGeoKey";t[3090]="ProjCenterEastingGeoKey";t[3091]="ProjCenterNorthingGeoKey";t[3092]="ProjScaleAtNatOriginGeoKey";t[3093]="ProjScaleAtCenterGeoKey";t[3094]="ProjAzimuthAngleGeoKey";t[3095]="ProjStraightVertPoleLongGeoKey";t[4096]="VerticalCSTypeGeoKey";t[4097]="VerticalCitationGeoKey";t[4098]="VerticalDatumGeoKey";t[4099]="VerticalUnitsGeoKey";
return t})(),X=new Map;X.set("EXIFIFD",r);X.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:S,ifdTags:X,GEO_KEYS:ea,getTagName:(t,Y)=>{Y=(Y||S)[t];void 0===Y&&(Y="unknown"+String(t));return Y}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(S){{var r=new ArrayBuffer(4);const ea=new Uint8Array(r);(new Uint32Array(r))[0]=1;r=1===ea[0]}S.isPlatformLittleEndian=r;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe",
"../PixelBlock"],function(S,r,ea){function X(b){return r.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function t(b,d,e,q,g,l,p,x){return{xmin:g<=e*b?0:g<e*b+b?g-e*b:b,ymin:l<=q*d?0:l<q*d+d?l-q*d:d,xmax:g+p<=e*b?0:g+p<e*b+b?g+p-e*b:b,ymax:l+x<=q*d?0:l+x<q*d+d?l+x-q*d:d}}function Y(b,d,e,q,g,l){const {width:p,height:x}=e.block,{x:h,y:k}=e.offset,{width:m,height:y}=e.mosaic;e=t(p,x,q,g,h,k,m,y);let D=0;var C=0;if(l){var O=l.hasGCSSShiftTransform?360:l.halfWorldWidth,
R=p*l.resolutionX,K=l.startX+q*R;R=K+R;K<O&&R>O?C=l.rightPadding:K>=O&&(D=l.leftMargin-l.rightPadding,C=0)}e.xmax-=C;if("number"===typeof d)for(l=e.ymin;l<e.ymax;l++)for(C=(g*x+l-k)*m+(q*p-h)+D,O=e.xmin;O<e.xmax;O++)b[C+O]=d;else for(l=e.ymin;l<e.ymax;l++)for(C=(g*x+l-k)*m+(q*p-h)+D,O=l*p,K=e.xmin;K<e.xmax;K++)b[C+K]=d[O+K]}function fa(b,d,e={}){const {clipOffset:q,clipSize:g,alignmentInfo:l,blockWidths:p}=e;if(p)return pa(b,d,{blockWidths:p});var x=b.find(V=>X(V));if(r.isNone(x))return null;e=g?
g.width:d.width;const h=g?g.height:d.height;var k=x.width,m=x.height;const y=d.width/k,D=d.height/m;d={offset:q||{x:0,y:0},mosaic:g||d,block:{width:k,height:m}};k=x.pixelType;m=ea.getPixelArrayConstructor(k);var C=x.pixels.length;x=[];for(var O=0;O<C;O++){var R=new m(e*h);for(let V=0;V<D;V++)for(let ja=0;ja<y;ja++){var K=b[V*y+ja];X(K)&&(K=K.pixels[O],Y(R,K,d,ja,V,l))}x.push(R)}let A;if(b.some(V=>r.isNone(V)||V.mask&&0<V.mask.length))for(A=new Uint8Array(e*h),m=0;m<D;m++)for(C=0;C<y;C++)R=b[m*y+C],
(O=r.isSome(R)?R.mask:null)?Y(A,O,d,C,m,l):R?Y(A,1,d,C,m,l):Y(A,0,d,C,m,l);b=new ea({width:e,height:h,pixels:x,pixelType:k,mask:A});b.updateStatistics();return b}function pa(b,d,e){const q=b.find(C=>r.isSome(C));if(r.isNone(q))return null;var g=b.some(C=>r.isSome(C)?!!C.mask:!0);const {width:l,height:p}=d;d=g?new Uint8Array(l*p):null;({blockWidths:e}=e);const x=[],h=q.getPlaneCount(),k=ea.getPixelArrayConstructor(q.pixelType);if(g)for(let C=0,O=0;C<b.length;O+=e[C],C++)if(g=b[C],X(g)){var m=g.mask;
for(var y=0;y<p;y++)for(var D=0;D<e[C];D++)d[y*l+D+O]=null==m?255:m[y*g.width+D]}for(g=0;g<h;g++){m=new k(l*p);for(let C=0,O=0;C<b.length;O+=e[C],C++)if(y=b[C],X(y)&&(D=y.pixels[g],null!=D))for(let R=0;R<p;R++)for(let K=0;K<e[C];K++)m[R*l+K+O]=D[R*y.width+K];x.push(m)}b=new ea({width:l,height:p,mask:d,pixels:x,pixelType:q.pixelType});b.updateStatistics();return b}function ma(b){if(!X(b))return null;const d=b.clone(),{width:e,height:q,pixels:g,mask:l}=b;var p=g[0];b=d.pixels[0];for(let k=2;k<q-1;k++){const m=
new Map;for(var x=k-2;x<k+2;x++)for(var h=0;4>h;h++){const y=x*e+h;I(m,p[y],l?l[y]:1)}b[k*e]=aa(m);b[k*e+1]=b[k*e+2]=b[k*e];for(x=3;x<e-1;x++)h=(k-2)*e+x+1,I(m,p[h],l?l[h]:1),h=(k-1)*e+x+1,I(m,p[h],l?l[h]:1),h=k*e+x+1,I(m,p[h],l?l[h]:1),h=(k+1)*e+x+1,I(m,p[h],l?l[h]:1),h=(k-2)*e+x-3,Q(m,p[h],l?l[h]:1),h=(k-1)*e+x-3,Q(m,p[h],l?l[h]:1),h=k*e+x-3,Q(m,p[h],l?l[h]:1),h=(k+1)*e+x-3,Q(m,p[h],l?l[h]:1),b[k*e+x]=aa(m);b[k*e+x+1]=b[k*e+x]}for(p=0;p<e;p++)b[p]=b[e+p]=b[2*e+p],b[(q-1)*e+p]=b[(q-2)*e+p];d.updateStatistics();
return d}function aa(b){if(0===b.size)return 0;let d=0,e=-1,q=0;const g=b.keys();let l=g.next();for(;!l.done;)q=b.get(l.value),q>d&&(e=l.value,d=q),l=g.next();return e}function Q(b,d,e){0!==e&&(e=b.get(d),1===e?b.delete(d):b.set(d,e-1))}function I(b,d,e){0!==e&&b.set(d,b.has(d)?b.get(d)+1:1)}function L(b,d,e){let {x:q,y:g}=d;const {width:l,height:p}=e;if(0===q&&0===g&&p===b.height&&l===b.width)return b;const {width:x,height:h}=b;d=Math.max(0,g);const k=Math.max(0,q),m=Math.min(q+l,x),y=Math.min(g+
p,h);if(0>m||0>y||!X(b))return null;q=Math.max(0,-q);g=Math.max(0,-g);const {pixels:D,mask:C}=b;var O=l*p,R=D.length;const K=[];for(var A=0;A<R;A++){var V=D[A],ja=ea.createEmptyBand(b.pixelType,O);for(let ha=d;ha<y;ha++){const H=ha*x;let F=(ha+g-d)*l+q;for(let w=k;w<m;w++)ja[F++]=V[H+w]}K.push(ja)}O=new Uint8Array(O);for(R=d;R<y;R++)for(A=R*x,V=(R+g-d)*l+q,ja=k;ja<m;ja++)O[V++]=C?C[A+ja]:1;b=new ea({width:e.width,height:e.height,pixelType:b.pixelType,pixels:K,mask:O});b.updateStatistics();return b}
function v(b,d=!0){if(!X(b))return null;const {pixels:e,width:q,height:g,mask:l,pixelType:p}=b;b=[];const x=Math.round(q/2),h=Math.round(g/2),k=g-1,m=q-1;for(var y=0;y<e.length;y++){var D=e[y],C=ea.createEmptyBand(p,x*h),O=0;for(var R=0;R<g;R+=2)for(var K=0;K<q;K+=2){var A=D[R*q+K];if(d){var V=K===m?A:D[R*q+K+1];const ja=R===k?A:D[R*q+K+q],ha=K===m?ja:R===k?V:D[R*q+K+q+1];C[O++]=(A+V+ja+ha)/4}else C[O++]=A}b.push(C)}y=null;if(l)for(y=new Uint8Array(x*h),D=0,C=0;C<g;C+=2)for(O=0;O<q;O+=2)R=l[C*q+O],
d?(K=O===m?R:l[C*q+O+1],A=C===k?R:l[C*q+O+q],V=O===m?A:C===k?K:l[C*q+O+q+1],y[D++]=R*K*A*V?1:0):y[D++]=R;return new ea({width:x,height:h,pixelType:p,pixels:b,mask:y})}function n(b,d,e,q,g=.5){const {width:l,height:p}=b,{width:x,height:h}=d;b=q.cols;q=q.rows;d=Math.ceil(x/b-.1/b);const k=Math.ceil(h/q-.1/q);let m,y,D,C,O;const R=d*b;var K=R*k*q;const A=new Float32Array(K),V=new Float32Array(K),ja=new Uint32Array(K),ha=new Uint32Array(K);let H=0,F,w;for(let u=0;u<k;u++)for(let G=0;G<d;G++){var E=12*
(u*d+G);K=e[E];m=e[E+1];y=e[E+2];D=e[E+3];C=e[E+4];O=e[E+5];for(var f=0;f<q;f++){H=(u*q+f)*R+G*b;w=(f+.5)/q;for(let N=0;N<f;N++)F=(N+.5)/b,A[H+N]=(K*F+m*w+y)*l-g,V[H+N]=(D*F+C*w+O)*p-g,ja[H+N]=Math.round(A[H+N]),ha[H+N]=Math.round(V[H+N])}E+=6;K=e[E];m=e[E+1];y=e[E+2];D=e[E+3];C=e[E+4];O=e[E+5];for(E=0;E<q;E++)for(H=(u*q+E)*R+G*b,w=(E+.5)/q,f=E;f<b;f++)F=(f+.5)/b,A[H+f]=(K*F+m*w+y)*l-g,V[H+f]=(D*F+C*w+O)*p-g,ja[H+f]=Math.round(A[H+f]),ha[H+f]=Math.round(V[H+f])}return{offsets_x:A,offsets_y:V,offsets_xi:ja,
offsets_yi:ha,gridWidth:R}}S.approximateTransform=function(b,d,e,q,g="nearest"){if(!X(b))return null;"majority"===g&&(b=ma(b));const {pixels:l,mask:p,pixelType:x}=b,h=b.width;var k=b.height;const m=ea.getPixelArrayConstructor(x),y=l.length,{width:D,height:C}=d;b=!1;for(let ha=0;ha<e.length;ha+=3)-1===e[ha]&&-1===e[ha+1]&&-1===e[ha+2]&&(b=!0);const {offsets_x:O,offsets_y:R,offsets_xi:K,offsets_yi:A,gridWidth:V}=n({width:h,height:k},d,e,q,"majority"===g?0:.5);let ja;d=(ha,H,F)=>{const w=ha instanceof
Float32Array||ha instanceof Float64Array?0:.5;for(let E=0;E<C;E++){ja=E*V;for(let f=0;f<D;f++){if(0>O[ja]||0>R[ja])ha[E*D+f]=0;else if(F)ha[E*D+f]=H[K[ja]+A[ja]*h];else{const u=Math.floor(O[ja]),G=Math.floor(R[ja]),N=Math.ceil(O[ja]),U=Math.ceil(R[ja]),T=O[ja]-u,P=R[ja]-G;ha[E*D+f]=!p||p[u+G*h]&&p[u+G*h]&&p[u+U*h]&&p[N+U*h]?(1-P)*((1-T)*H[u+G*h]+T*H[N+G*h])+P*((1-T)*H[u+U*h]+T*H[N+U*h])+w:H[K[ja]+A[ja]*h]}ja++}}};e=[];for(k=0;k<y;k++)q=new m(D*C),d(q,l[k],"nearest"===g||"majority"===g),e.push(q);
g=new ea({width:D,height:C,pixelType:x,pixels:e});if(p)g.mask=new Uint8Array(D*C),d(g.mask,p,!0);else if(b)for(g.mask=new Uint8Array(D*C),b=0;b<D*C;b++)g.mask[b]=0>O[b]||0>R[b]?0:1;g.updateStatistics();return g};S.clip=L;S.colorize=function(b,d){if(!X(b)||!d&&(d.indexedColormap||d.indexed2DColormap))return b;const e=b.clone();var q=e.pixels;let g=e.mask;const l=e.width*e.height;if(1!==q.length)return b;const {indexedColormap:p,indexed2DColormap:x,offset:h,alphaSpecified:k}=d;d=p.length-1;b=0;q=q[0];
const m=new Uint8Array(q.length),y=new Uint8Array(q.length),D=new Uint8Array(q.length);let C=0;if(p)if(g)for(b=0;b<l;b++)g[b]&&(C=4*(q[b]-h),C<h||C>d?g[b]=0:(m[b]=p[C],y[b]=p[C+1],D[b]=p[C+2],g[b]=p[C+3]));else{g=new Uint8Array(l);for(b=0;b<l;b++)C=4*(q[b]-h),C<h||C>d?g[b]=0:(m[b]=p[C],y[b]=p[C+1],D[b]=p[C+2],g[b]=p[C+3]);e.mask=g}else if(g)for(b=0;b<l;b++)g[b]&&(d=x[q[b]],m[b]=d[0],y[b]=d[1],D[b]=d[2],g[b]=d[3]);else{g=new Uint8Array(l);for(b=0;b<l;b++)d=x[q[b]],m[b]=d[0],y[b]=d[1],D[b]=d[2],g[b]=
d[3];e.mask=g}e.pixels=[m,y,D];e.statistics=null;e.pixelType="u8";e.maskIsAlpha=k;return e};S.createColormapLUT=function(b){if(b){var d=b.colormap;if(d&&0!==d.length){d=d.sort((k,m)=>k[0]-m[0]);var e=0;0>d[0][0]&&(e=d[0][0]);var q=Math.max(256,d[d.length-1][0]-e+1),g=new Uint8Array(4*q),l=[],p=0,x=0,h=5===d[0].length;if(65536<q)return d.forEach(k=>{l[k[0]-e]=h?k.slice(1):k.slice(1).concat([255])}),{indexed2DColormap:l,offset:e,alphaSpecified:h};if(b.fillUnspecified)for(b=d[x],p=b[0]-e;p<q;p++)g[4*
p]=b[1],g[4*p+1]=b[2],g[4*p+2]=b[3],g[4*p+3]=h?b[4]:255,p===b[0]-e&&(b=x===d.length-1?b:d[++x]);else for(p=0;p<d.length;p++)b=d[p],x=4*(b[0]-e),g[x]=b[1],g[x+1]=b[2],g[x+2]=b[3],g[x+3]=h?b[4]:255;return{indexedColormap:g,offset:e,alphaSpecified:h}}}};S.extractBands=function(b,d){if(null==d||!d.length||!X(b))return b;const e=b.pixels.length;return d&&d.some(q=>q>=e)||1===e&&1===d.length&&0===d[0]||e===d.length&&!d.some((q,g)=>q!==g)?b:new ea({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,
validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:d.map(q=>b.pixels[q]),statistics:b.statistics&&d.map(q=>b.statistics[q])})};S.getClipBounds=t;S.getLocalArithmeticNorthRotations=function(b,d){const {coefficients:e,spacing:q}=d,{offsets_x:g,offsets_y:l,gridWidth:p}=n(b,b,e,{rows:q[0],cols:q[1]},.5),{width:x,height:h}=b;b=new Float32Array(x*h);d=180/Math.PI;for(let y=0;y<h;y++)for(let D=0;D<x;D++){var k=y*p+D,m=0===y?k:k-p;const C=y===h-1?k:k+p;k=g[m]-g[C];m=l[C]-l[m];isNaN(k)||isNaN(m)?
b[y*x+D]=90:(m=Math.atan2(m,k)*d,m=(360+m)%360,b[y*x+D]=m)}return b};S.isValidPixelBlock=X;S.lookupPixels=function(b,d){if(!X(b))return null;const {pixels:e,mask:q}=b,g=b.width*b.height,l=e.length;let p=d.lut;({offset:d}=d);let x,h;p&&1===p[0].length&&(p=e.map(()=>p));const k=[];let m,y,D;if(d)if(null==q)for(x=0;x<l;x++){m=e[x];y=p[x];D=new Uint8Array(g);for(h=0;h<g;h++)D[h]=y[m[h]-d];k.push(D)}else for(x=0;x<l;x++){m=e[x];y=p[x];D=new Uint8Array(g);for(h=0;h<g;h++)q[h]&&(D[h]=y[m[h]-d]);k.push(D)}else if(null==
q)for(x=0;x<l;x++){m=e[x];y=p[x];D=new Uint8Array(g);for(h=0;h<g;h++)D[h]=y[m[h]];k.push(D)}else for(x=0;x<l;x++){m=e[x];y=p[x];D=new Uint8Array(g);for(h=0;h<g;h++)q[h]&&(D[h]=y[m[h]]);k.push(D)}b=new ea({width:b.width,height:b.height,pixels:k,mask:q,pixelType:"u8"});b.updateStatistics();return b};S.mosaic=fa;S.mosaicPixelData=function(b,d){if(!b||0===b.length)return null;var e=b.find(y=>y.pixelBlock);if(!e||r.isNone(e.pixelBlock))return null;var q=(e.extent.xmax-e.extent.xmin)/e.pixelBlock.width;
const g=(e.extent.ymax-e.extent.ymin)/e.pixelBlock.height,l=.01*Math.min(q,g),p=b.sort((y,D)=>Math.abs(y.extent.ymax-D.extent.ymax)>l?D.extent.ymax-y.extent.ymax:Math.abs(y.extent.xmin-D.extent.xmin)>l?y.extent.xmin-D.extent.xmin:0);var x=Math.min.apply(null,p.map(y=>y.extent.xmin));const h=Math.min.apply(null,p.map(y=>y.extent.ymin)),k=Math.max.apply(null,p.map(y=>y.extent.xmax)),m=Math.max.apply(null,p.map(y=>y.extent.ymax));b={x:Math.round((d.xmin-x)/q),y:Math.round((m-d.ymax)/g)};x={width:Math.round((k-
x)/q),height:Math.round((m-h)/g)};q={width:Math.round((d.xmax-d.xmin)/q),height:Math.round((d.ymax-d.ymin)/g)};if(Math.round(x.width/e.pixelBlock.width)*Math.round(x.height/e.pixelBlock.height)!==p.length||0>b.x||0>b.y||x.width<q.width||x.height<q.height)return null;e=p.map(y=>y.pixelBlock);e=fa(e,x,{clipOffset:b,clipSize:q});return{extent:d,pixelBlock:e}};S.remapColor=function(b,d){if(!X(b))return null;b=b.clone();var {pixels:e}=b;const q=b.width*b.height,g=d.length,l=Math.floor(g/2),p=d[Math.floor(l)];
e=e[0];let x,h,k,m,y,D,C=!1;const O=new Uint8Array(q),R=new Uint8Array(q),K=new Uint8Array(q);let A=b.mask;const V=4===d[0].mappedColor.length;A||(A=new Uint8Array(q),A.fill(V?255:1),b.mask=A);for(y=0;y<q;y++)if(A[y]){x=e[y];C=!1;D=l;h=p;k=0;for(m=g-1;1<m-k;){if(x===h.value){C=!0;break}x>h.value?k=D:m=D;D=Math.floor((k+m)/2);h=d[Math.floor(D)]}C||(x===d[k].value?(h=d[k],C=!0):x===d[m].value?(h=d[m],C=!0):x<d[k].value?(C=!1,h=null):x>d[k].value&&(x<d[m].value?(h=d[k],C=!0):m===g-1?(C=!1,h=null):(h=
d[m],C=!0)));C?(O[y]=h.mappedColor[0],R[y]=h.mappedColor[1],K[y]=h.mappedColor[2],A[y]=h.mappedColor[3]):O[y]=R[y]=K[y]=A[y]=0}b.pixels=[O,R,K];b.mask=A;b.pixelType="u8";b.maskIsAlpha=V;return b};S.resampleByMajority=ma;S.setValidBoundary=function(b,d,e){if(!X(b))return null;const {width:q,height:g}=b,l=d.x;d=d.y;const p=e.width+l;e=e.height+d;if(0>l||0>d||p>q||e>g||0===l&&0===d&&p===q&&e===g)return b;b.mask||(b.mask=new Uint8Array(q*g));const x=b.mask;for(let h=0;h<g;h++){const k=h*q;for(let m=0;m<
q;m++)x[k+m]=h<d||h>=e||m<l||m>=p?0:1}b.updateStatistics();return b};S.split=function(b,d,e){if(!X(b))return null;const {width:q,height:g}=d;let {width:l,height:p}=b;const x=new Map,h={x:0,y:0};e=null==e?1:1+e;for(let k=0;k<e;k++){const m=Math.ceil(l/q),y=Math.ceil(p/g);for(let D=0;D<y;D++){h.y=D*g;for(let C=0;C<m;C++){h.x=C*q;const O=L(b,h,d);x.set(`${k}/${D}/${C}`,O)}}k<e-1&&(b=v(b));l=Math.round(l/2);p=Math.round(p/2)}return x};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I){function L(f,u,G){return!pa.canProjectWithoutEngine(f,u,G)}function v(f,u,G){if((f=
L(f,u,G))&&!pa.isLoaded())throw new X("rasterprojectionhelper-project","projection engine is not loaded");return f}function n(){n=r._asyncToGenerator(function*(){if(pa.isLoaded())return null;yield pa.load()});return n.apply(this,arguments)}function b(f,u,G,N=null){const U=f.spatialReference;if(U.equals(u))return f;v(U,u,N);G=G.center;G=new ma({xmin:G.x-f.x/2,xmax:G.x+f.x/2,ymin:G.y-f.y/2,ymax:G.y+f.y/2,spatialReference:U});N=pa.project(G,u,N);G=O(u);t.isNone(N)||t.isSome(G)&&N.width>=G?(u=Y.getMetersPerUnitForSR(U)/
Y.getMetersPerUnitForSR(u),f={x:f.x*u,y:f.y*u}):f={x:N.width,y:N.height};return f}function d(f,u=.01){return Y.getMetersPerUnitForSR(f)?u/Y.getMetersPerUnitForSR(f):0}function e(f,u,G=null,N=!0){var U=f.spatialReference;if(U.equals(u))return f;v(U,u,G);G=pa.project(f,u,G);if(!N||!G)return G;N=R(U,!0);u=R(u,!0);(U=d(U))&&t.isSome(N)&&t.isSome(u)&&(0<G.x&&Math.abs(f.x-N[0])<U?G.x-=u[1]-u[0]:0>G.x&&Math.abs(f.x-N[1])<U&&(G.x+=u[1]-u[0]));return G}function q(f){const {inSR:u,outSR:G,datumTransformation:N,
preferPE:U}=f;if(u.equals(G))return{points:f}=h(f,null),f;if(u.isWebMercator&&G.isWGS84||u.isWGS84&&G.isWebMercator){{const {cols:B,rows:z,xres:Z,yres:ca,usePixelCenter:ba,inSR:la,outSR:da}=f;let {xmin:oa,ymax:na}=f;ba&&(oa+=Z/2,na-=ca/2);f=[];var T=[],P=Math.max(B,z);for(var a=0;a<P;a++){var c=pa.project(new aa({x:oa+Z*Math.min(B,a),y:na-ca*Math.min(z,a),spatialReference:la}),da);a<=B&&f.push(c.x);a<=z&&T.push(c.y)}P=[];for(a=0;a<B;a++)for(c=0;c<z;c++)P.push([f[a],T[c]]);f=P}return f}if(v(u,G,N)&&
U){if(u.isGeographic)return l(f);T=p(u);if(t.isSome(T))return l(f)}return g(f)}function g(f){var {points:u}=h(f,null);u=u.map(G=>new aa(G[0],G[1],f.inSR));return pa.project(u,f.outSR,f.datumTransformation).map(G=>G?[G.x,G.y]:[NaN,NaN])}function l(f){const {inSR:u,outSR:G,datumTransformation:N}=f,U=p(u),{points:T,mask:P}=h(f,U);u.isGeographic||(f=u.wkid?fa.PeFactory.coordsys(u.wkid):fa.PeFactory.fromString(u.isGeographic?fa.PeDefs.PE_TYPE_GEOGCS:fa.PeDefs.PE_TYPE_PROJCS,u.wkt),fa.PeCSTransformations.projToGeog(f,
T.length,T));t.isSome(N)&&N.steps.length&&N.steps.forEach(a=>{const c=a.wkid?fa.PeFactory.geogtran(a.wkid):fa.PeFactory.fromString(fa.PeDefs.PE_TYPE_GEOGTRAN,a.wkt);fa.PeGTTransformations.geogToGeog(c,T.length,T,null,a.isInverse?fa.PeDefs.PE_TRANSFORM_2_TO_1:fa.PeDefs.PE_TRANSFORM_1_TO_2)});G.isGeographic||(f=p(G,!0),f=t.isSome(f)&&f.isEnvelope?[f.bbox[1],f.bbox[3]]:[-90,90],k(T,f),f=G.wkid?fa.PeFactory.coordsys(G.wkid):fa.PeFactory.fromString(G.isGeographic?fa.PeDefs.PE_TYPE_GEOGCS:fa.PeDefs.PE_TYPE_PROJCS,
G.wkt),fa.PeCSTransformations.geogToProj(f,T.length,T));f=T;if(P&&T.length!==P.length){f=[];for(let a=0,c=0;a<P.length;a++)P[a]?f.push(T[c++]):f.push([NaN,NaN])}return f}function p(f,u=!1){var G=f.wkid||f.wkt;if(!G||f.isGeographic)return null;G=String(G);if(w.has(G))return G=w.get(G),u?null==G?void 0:G.gcs:null==G?void 0:G.pcs;var N=f.wkid?fa.PeFactory.coordsys(f.wkid):fa.PeFactory.fromString(f.isGeographic?fa.PeDefs.PE_TYPE_GEOGCS:fa.PeDefs.PE_TYPE_PROJCS,f.wkt);f=d(f,1E-4);f=x(N,f);N=x(N,0,!0);
w.set(G,{pcs:f,gcs:N});return u?N:f}function x(f,u=0,G=!1){var N=fa.PePCSInfo.generate(f),U=G?f.horizonGcsGenerate():f.horizonPcsGenerate();if(null==U||!U.length)return null;f=!1;var T=U.find(z=>1===z.getInclusive()&&1===z.getKind());if(!T){T=U.find(z=>1===z.getInclusive()&&0===z.getKind());if(!T)return null;f=!0}G=G?0:(2===N.getNorthPoleLocation()?1:0)|(2===N.getSouthPoleLocation()?2:0);N=N.isPannableRectangle();T=T.getCoord();if(f)return{isEnvelope:f,isPannable:N,vertices:T,coef:null,bbox:[T[0][0]-
u,T[0][1]-u,T[1][0]+u,T[1][1]+u],poleLocation:G};u=0;f=[];let [P,a]=T[0],[c,B]=T[0];for(let z=0,Z=T.length;z<Z;z++){u++;u===Z&&(u=0);const [ca,ba]=T[z],[la,da]=T[u];if(da===ba)f.push([ca,la,ba,da,2]);else{U=(la-ca)/(da-ba||1E-4);const oa=ca-U*ba;ba<da?f.push([U,oa,ba,da,0]):f.push([U,oa,da,ba,1])}P=P<ca?P:ca;a=a<ba?a:ba;c=c>ca?c:ca;B=B>ba?B:ba}return{isEnvelope:!1,isPannable:N,vertices:T,coef:f,bbox:[P,a,c,B],poleLocation:G}}function h(f,u){const G=[],{cols:N,rows:U,xres:T,yres:P,usePixelCenter:a}=
f;let {xmin:c,ymax:B}=f;a&&(c+=T/2,B-=P/2);if(t.isNone(u)){for(f=0;f<N;f++)for(u=0;u<U;u++)G.push([c+T*f,B-P*u]);return{points:G}}f=new Uint8Array(N*U);if(u.isEnvelope){const {bbox:[oa,na,qa,ua]}=u;for(let ra=0,va=0;ra<N;ra++){var z=c+T*ra,Z=u.isPannable||z>=oa&&z<=qa;for(var ca=0;ca<U;ca++,va++){var ba=B-P*ca;Z&&ba>=na&&ba<=ua&&(G.push([z,ba]),f[va]=1)}}return{points:G,mask:f}}({coef:z}=u);u=[];for(Z=0;Z<U;Z++){var la=B-P*Z;ca=[];ba=[];for(var da=0;da<z.length;da++){const [oa,na,qa,ua,ra]=z[da];
la===qa&&qa===ua?(ca.push(oa),ca.push(na),ba.push(2),ba.push(2)):la>=qa&&la<=ua&&(ca.push(oa*la+na),ba.push(ra))}la=ca;if(2<ca.length){da=2===ba[0]?0:ba[0];let oa=ca[0];la=[];for(let na=1;na<ba.length;na++)if(2!==ba[na]||na===ba.length-1)ba[na]!==da&&(la.push(0===da?Math.min(oa,ca[na-1]):Math.max(oa,ca[na-1])),da=ba[na],oa=ca[na]),na===ba.length-1&&la.push(0===ba[na]?Math.min(oa,ca[na]):Math.max(oa,ca[na]));la.sort((na,qa)=>na-qa)}else ca[0]>ca[1]&&(la=[ca[1],ca[0]]);u.push(la)}for(let oa=0,na=0;oa<
N;oa++)for(z=c+T*oa,Z=0;Z<U;Z++,na++)if(ca=B-P*Z,ba=u[Z],2===ba.length)z>=ba[0]&&z<=ba[1]&&(G.push([z,ca]),f[na]=1);else if(2<ba.length){la=!1;for(da=0;da<ba.length;da+=2)if(z>=ba[da]&&z<=ba[da+1]){la=!0;break}la&&(G.push([z,ca]),f[na]=1)}return{points:G,mask:f}}function k(f,u){const [G,N]=u;for(u=0;u<f.length;u++){const U=f[u][1];if(U<G||U>N)f[u]=[NaN,NaN]}}function m(f){const u=O(f[0].spatialReference);if(2>f.length||t.isNone(u))return f[0];let {xmin:G,xmax:N,ymin:U,ymax:T}=f[0];for(let P=1;P<f.length;P++){const a=
f[P];N=a.xmax+u*P;U=Math.min(U,a.ymin);T=Math.max(T,a.ymax)}return new ma({xmin:G,xmax:N,ymin:U,ymax:T,spatialReference:f[0].spatialReference})}function y(f,u,G=null,N=!0){var U=f.spatialReference;if(U.equals(u))return f;var T=A(f);const P=O(U,!0);var a=O(u);if(0===T||t.isNone(P)||t.isNone(a))return T=C(f,u,G,N),t.isNone(P)&&t.isSome(a)&&Math.abs(T.width-a)<d(u)&&pa.isLoaded()&&(U=p(U),t.isSome(U)&&U.poleLocation===ha.None&&f.width<(U.bbox[2]-U.bbox[0])/2)?D(f,u)||T:T;a=f.clone().normalize();if(1===
a.length&&f.xmax<P&&f.xmax-P/2>d(U)){const {xmin:c,xmax:B}=f;for(let z=0;z<=T;z++)a[z]=new ma({xmin:0===z?c:-P/2,xmax:z===T?B-P*z:P/2,ymin:f.ymin,ymax:f.ymax,spatialReference:U})}f=a.map(c=>C(c,u,G,N));return m(f.filter(c=>!!c))}function D(f,u){const G=O(u);if(t.isNone(G))return null;let {xmin:N,ymin:U,xmax:T,ymax:P}=f;var a=f.spatialReference;f=new Q({spatialReference:a,rings:[[[N,U],[T,U],[T,P],[N,P],[N,U]]]});f=pa.project(f,u);if(2!==f.rings.length||!f.rings[0].length||!f.rings[1].length)return null;
({rings:f}=f);a=d(a);u=new ma({spatialReference:u});for(let c=0;2>c;c++){N=T=f[c][0][0];U=P=f[c][0][1];for(let B=0;B<f[c].length;B++)N=N>f[c][B][0]?f[c][B][0]:N,T=T<f[c][B][0]?f[c][B][0]:T,U=U>f[c][B][1]?f[c][B][1]:U,P=P<f[c][B][1]?f[c][B][1]:P;if(0===c)u.ymin=U,u.ymax=P,u.xmin=N,u.xmax=T;else if(u.ymin=Math.min(u.ymin,U),u.ymax=Math.max(u.ymax,P),Math.abs(T-G/2)<a)u.xmin=N,u.xmax+=G;else if(Math.abs(N+G/2)<a)u.xmax=T+G;else return null}return u}function C(f,u,G=null,N=!0,U=!0){const T=f.spatialReference;
if(T.equals(u))return f;v(T,u,G);const P=pa.project(f,u,G);if(U&&u.isWebMercator&&P&&(P.ymax=Math.min(2.0037508342787E7,P.ymax),P.ymin=Math.max(-2.0037508342787E7,P.ymin),P.ymin>=P.ymax))return null;if(!N||!P)return P;var a=R(T,!0);N=R(u,!0);if(t.isNone(a)||t.isNone(N))return P;U=d(T,.001);const c=d(T,500);var B=d(u,.001);if(Math.abs(P.xmin-N[0])<B&&Math.abs(P.xmax-N[1])<B){B=Math.abs(f.xmin-a[0]);a=Math.abs(a[1]-f.xmax);if(B<U&&a>c){P.xmin=N[0];var z=[];z.push(new aa(f.xmax,f.ymin,T));z.push(new aa(f.xmax,
(f.ymin+f.ymax)/2,T));z.push(new aa(f.xmax,f.ymax,T));z=z.map(Z=>e(Z,u,G)).filter(Z=>!isNaN(null==Z?void 0:Z.x)).map(Z=>Z.x);P.xmax=Math.max.apply(null,z)}a<U&&B>c&&(P.xmax=N[1],N=[],N.push(new aa(f.xmin,f.ymin,T)),N.push(new aa(f.xmin,(f.ymin+f.ymax)/2,T)),N.push(new aa(f.xmin,f.ymax,T)),f=N.map(Z=>e(Z,u,G)).filter(Z=>!isNaN(null==Z?void 0:Z.x)).map(Z=>Z.x),P.xmin=Math.min.apply(null,f))}else f=d(u,.001),Math.abs(P.xmin-N[0])<f&&(P.xmin=N[0]),Math.abs(P.xmax-N[1])<f&&(P.xmax=N[1]);return P}function O(f,
u=!1){return f.isWebMercator?2*(u?2.0037508342787E7:2.0037508342788905E7):f.wkid&&f.isGeographic?360:2*F[f.wkid]||null}function R(f,u=!1){if(f.isGeographic)return[-180,180];f=O(f,u);return t.isSome(f)?[-f/2,f/2]:null}function K(f,u,G,N){f=(f-u)/G;0!==f-Math.floor(f)?f=Math.floor(f):N&&--f;return f}function A(f,u=!1){var G=O(f.spatialReference);if(t.isNone(G))return 0;const N=u?0:-(G/2),U=d(f.spatialReference),T=!u&&Math.abs(f.xmin+G/2)<U?-G/2:f.xmin;f=K(!u&&Math.abs(f.xmax-G/2)<U?G/2:f.xmax,N,G,!0);
G=K(T,N,G,!1);return f-G}function V(f){const {projectedExtent:u,srcBufferExtent:G,pixelSize:N,datumTransformation:U,rasterTransform:T}=f;var P=u.spatialReference;const a=G.spatialReference;var c=v(P,a);const {xmin:B,ymin:z,xmax:Z,ymax:ca}=u,ba=O(a),la=t.isSome(ba)&&(f.hasWrapAround||"gcs-shift"===(null==T?void 0:T.type));f=f.spacing||[32,32];var da=f[0]*N.x,oa=f[1]*N.y;const na=1===f[0],qa=Math.ceil((Z-B)/da-.1/f[0])+(na?0:1),ua=Math.ceil((ca-z)/oa-.1/f[1])+(na?0:1);da=q({cols:qa,rows:ua,xmin:B,ymax:ca,
xres:da,yres:oa,inSR:P,outSR:a,datumTransformation:U,preferPE:4>=f[0],usePixelCenter:na});oa=[];let ra,va=0;const wa=na?-1:NaN,{xmin:ya,xmax:Ga,ymax:za,width:Ba,height:Da}=G,Ea=d(a,500),La=t.isSome(ba)&&0<ya&&Ga>ba/2;var Ia=!1;c&&(Ia=p(P),Ia=t.isSome(Ia)&&0<Ia.poleLocation);for(P=0;P<qa;P++){c=[];for(let Oa=0;Oa<ua;Oa++){var Ca=da[P*ua+Oa];la&&Ca[0]>Ga&&Ca[0]>ba/2-Ea?Ca[0]-=ba:la&&0===P&&0>Ca[0]&&La&&!T&&(Ca[0]+=ba);!Ca||isNaN(Ca[0])||isNaN(Ca[1])?(oa.push(wa),oa.push(wa),c.push(null),va++):(T&&(Ca=
T.inverseTransform(new aa({x:Ca[0],y:Ca[1],spatialReference:a})),Ca=[Ca.x,Ca.y]),c.push(Ca),0<P&&la&&ra[Oa]&&Ca[0]<ra[Oa][0]&&(Ca[0]+=ba,Ia&&Ca[0]>Ga&&Ca[0]>ba&&(Ca[0]-=ba)),oa.push((Ca[0]-ya)/Ba),oa.push((za-Ca[1])/Da))}ra=c}return{offsets:oa,error:null,coefficients:null,outofBoundPointCount:va,spacing:f,size:na?[qa,ua]:[qa-1,ua-1]}}function ja(f,u,G){const {cols:N,rows:U}=u;u=new Float32Array((N-1)*(U-1)*12);const T=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),P=new Float32Array([-1,1,0,0,-1,1,1,
0,0]);for(let ca=0;ca<N-1;ca++){for(var a=0;a<U-1;a++){var c=ca*U*2+2*a,B=f[c];const ba=f[c+1];var z=f[c+2],Z=f[c+3];c+=2*U;const la=f[c],da=f[c+1],oa=f[c+2];c=f[c+3];let na=0,qa=12*(a*(N-1)+ca);for(let ua=0;3>ua;ua++)u[qa++]=T[na++]*B+T[na++]*z+T[na++]*oa;na=0;for(z=0;3>z;z++)u[qa++]=T[na++]*ba+T[na++]*Z+T[na++]*c;na=0;for(Z=0;3>Z;Z++)u[qa++]=P[na++]*B+P[na++]*la+P[na++]*oa;na=0;for(B=0;3>B;B++)u[qa++]=P[na++]*ba+P[na++]*da+P[na++]*c}if(G)for(a=0;a<u.length;a++)isNaN(u[a])&&(u[a]=-1)}return u}var ha;
(function(f){f[f.None=0]="None";f[f.North=1]="North";f[f.South=2]="South";f[f.Both=3]="Both"})(ha||(ha={}));const H=(f,u,G,N=0)=>{if(1===G[0])return[0,0];var U=1,T=-1,P=1,a=-1;for(var c=0;c<f.length;c+=2)isNaN(f[c])||(U=U>f[c]?f[c]:U,T=T>f[c]?T:f[c],P=P>f[c+1]?f[c+1]:P,a=a>f[c+1]?a:f[c+1]);const {cols:B,rows:z}=u;u=(T-U)/B/G[0];G=(a-P)/z/G[1];N*=2;P=0;a=!1;U=[0,0];for(T=0;T<B-3;T++){for(c=0;c<z-3;c++){var Z=T*z*2+2*c;const ca=Math.abs(((f[Z]+f[Z+4]+f[Z+4*z]+f[Z+4*z+4])/4-f[Z+2*z+2])/u);Z=Math.abs(((f[Z+
1]+f[Z+5]+f[Z+4*z+1]+f[Z+4*z+5])/4-f[Z+2*z+3])/G);ca+Z>P&&(P=ca+Z,U=[ca,Z]);if(N&&P>N){a=!0;break}}if(a)break}return U},F={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,
53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},w=new Map,E=new Map;S.computeProjectedScales=function(f,u,G=512,N=!0){const {extent:U,spatialReference:T,pixelSize:P}=f,a=b(new aa({x:P.x,y:P.y,spatialReference:T}),
u,U);if(null==a)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var c=(a.x+a.y)/2,B=Y.getMetersPerUnitForSR(u);c=c*B*96*39.37;const z=u.isGeographic?256/G*2.958287637958547E8:256/G*5.91657527591555E8;G="vector-magdir"===f.dataType||"vector-uv"===f.dataType;const Z=y(U,u);G||N&&(u.isGeographic||u.isWebMercator)&&(G=0>Z.xmin*Z.xmax);N=c;if(G)N=z,f=u.isGeographic?1.341104507446289E-6:.29858214164761665,B=96*f*B*39.37,u=b(new aa({x:f,y:f,spatialReference:{wkid:u.isGeographic?
4326:3857}}),T,Z),u.x*=N/B,u.y*=N/B;else{u={x:P.x,y:P.y};f=Math.ceil(Math.log(Math.min(f.width,f.height)/32)/Math.LN2);for(B=0;N<.5005*z&&B<f;)B++,N*=2,u.x*=2,u.y*=2;1.001>=Math.max(N,z)/Math.min(N,z)&&(N=z)}f=[N];B=[{x:u.x,y:u.y}];for(c=Math.min(70.5310735,c)/1.001;N>=c;)N/=2,u.x/=2,u.y/=2,f.push(N),B.push({x:u.x,y:u.y});return{projectedPixelSize:a,scales:f,srcResolutions:B,isCustomTilingScheme:!G}};S.defaultGridSpacing=32;S.defaultProjectionToleranceInPixels=4;S.getDefaultDatumTransformationForDataset=
function(f,u,G){return v(f.spatialReference,u)?G?pa.getTransformation(u,f.spatialReference,f):pa.getTransformation(f.spatialReference,u,f):null};S.getProjectedGridPoints=q;S.getProjectionOffsetGrid=function(f){var u=f.isAdaptive&&null==f.spacing;let G=f.spacing||[32,32],N=V(f);var U={cols:N.size[0]+1,rows:N.size[1]+1};const T=0<N.outofBoundPointCount&&N.outofBoundPointCount<N.offsets.length/2;let P=N.outofBoundPointCount===N.offsets.length/2||u&&T?[0,0]:H(N.offsets,U,G,4);const a=(P[0]+P[1])/2;var c=
f.projectedExtent.spatialReference;const B=f.srcBufferExtent.spatialReference;u&&(T||4<a)&&(L(c,B,f.datumTransformation)&&(c.isGeographic||t.isSome(p(c))),G=[4,4],N=V({...f,spacing:G}),U={cols:N.size[0]+1,rows:N.size[1]+1},P=H(N.offsets,U,G,4));N.error=P;1<G[0]&&(N.coefficients=ja(N.offsets,U,T));!f.includeGCSGrid||c.isGeographic||c.isWebMercator||(B.isGeographic?N.gcsGrid={offsets:N.offsets,coefficients:N.coefficients,spacing:G}:(u=p(c),t.isSome(u)&&!u.isEnvelope&&(c&&!c.isGeographic&&(u=String(c.wkid||
c.wkt),E.has(u)?c=E.get(u):(c=(c.wkid?fa.PeFactory.coordsys(c.wkid):fa.PeFactory.fromString(fa.PeDefs.PE_TYPE_PROJCS,c.wkt)).getGeogcs().getCode(),E.set(u,c)),c=new I({wkid:c})),c=y(f.projectedExtent,c),{offsets:f}=V({...f,srcBufferExtent:c,spacing:G}),U=ja(f,U,T),N.gcsGrid={offsets:f,coefficients:U,spacing:G})));return N};S.getRasterDatasetAlignmentInfo=function(f){const u=f.storageInfo.origin.x;var G=O(f.spatialReference,!0);if(t.isNone(G))return{originX:u,halfWorldWidth:null,pyramidsInfo:null};
const N=G/2,{nativePixelSize:U,storageInfo:T,extent:P}=f,{maximumPyramidLevel:a,blockWidth:c,pyramidScalingFactor:B}=T;let z=U.x;const Z=[];f=t.isSome(f.transform)&&"gcs-shift"===f.transform.type;const ca=u+(f?0:N);G=f?G-u:N-u;for(let ba=0;ba<=a;ba++){const la=(P.xmax-u)/z/c,da=G/z/c;Z.push({resolutionX:z,blockWidth:c,datsetColumnCount:0===la-Math.floor(la)?la:Math.ceil(la),worldColumnCountFromOrigin:0===da-Math.floor(da)?da:Math.ceil(da),leftMargin:Math.round(ca/z)%c,rightPadding:(c-Math.round(G/
z)%c)%c,originColumnOffset:Math.floor(ca/z/c)});z*=B}return{originX:u,halfWorldWidth:N,pyramidsInfo:Z,hasGCSSShiftTransform:f}};S.getWorldWidth=O;S.getWorldWrapCount=A;S.load=function(){return n.apply(this,arguments)};S.minimumGridSpacing=4;S.projectExtent=y;S.projectPoint=e;S.projectResolution=b;S.requirePE=L;S.snapExtent=function(f){f=f.clone().normalize();return 1===f.length?f[0]:m(f)};S.snapPyramid=function(f,u,G){const {storageInfo:N,pixelSize:U}=u;let T=!1;var {pyramidResolutions:P}=N;if(t.isSome(P)&&
P.length){f=(f.x+f.y)/2;var a=P[P.length-1];a=(a.x+a.y)/2;var c=(U.x+U.y)/2;if(f<=c)var B=0;else if(f>=a)B=P.length,T=8<f/a;else{a=c;for(let z=1;z<=P.length;z++){c=(P[z-1].x+P[z-1].y)/2;if(f<=c){f===c?B=z:"down"===G?(B=z-1,T=8<f/a):B="up"===G?z:f-a>c-f||2<f/a?z:z-1;break}a=c}}G=0===B?U:P[B-1];T&&(P=Math.min(G.x,G.y),f=Y.getMetersPerUnitForSR(u.spatialReference),19567<P*f&&(T=!1));return{pyramidLevel:B,pyramidResolution:new aa({x:G.x,y:G.y,spatialReference:u.spatialReference}),excessiveReading:T}}B=
Math.log(f.x/U.x)/Math.LN2;f=Math.log(f.y/U.y)/Math.LN2;P=u.storageInfo.maximumPyramidLevel||0;B="down"===G?Math.floor(Math.min(B,f)):"up"===G?Math.ceil(Math.max(B,f)):Math.round((B+f)/2);0>B?B=0:B>P&&(T=B>P+3,B=P);G=2**B;u=new aa({x:G*u.nativePixelSize.x,y:G*u.nativePixelSize.y,spatialReference:u.spatialReference});return{pyramidLevel:B,pyramidResolution:u,excessiveReading:T}};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma){function aa(w){w=V[w];if(!w)throw Error("unknown type");return w}function Q(w){return A[w].baseUnit}function I(w,E=null){E=E||aa(w);return A[E].baseUnit===w}function L(w,E,f){if(E===f)return w;const u=aa(E);if(u!==aa(f))throw Error("incompatible units");w=I(E,u)?w:w*A[u].units[E].inBaseUnits;return I(f,u)?w:w/A[u].units[f].inBaseUnits}function v(w,E){w=L(w,E,"meters");return 3E3>Math.abs(w)?"meters":"kilometers"}function n(w,E){w=L(w,E,"meters");return 1E5>Math.abs(w)?
"meters":"kilometers"}function b(w,E){w=L(w,E,"feet");return 1E3>Math.abs(w)?"feet":"miles"}function d(w,E){w=L(w,E,"feet");return 1E5>Math.abs(w)?"feet":"miles"}function e(w,E){w=L(w,E,"square-meters");return 3E6>Math.abs(w)?"square-meters":"square-kilometers"}function q(w,E){w=L(w,E,"square-feet");return 1E6>Math.abs(w)?"square-feet":"square-miles"}function g(w){return K.fromJSON(w.toLowerCase())||null}function l(w){const E=p(w),f=w instanceof Y?t.getReferenceEllipsoid(w).metersPerDegree:1E5;return E>=
f?"meters":k(w)}function p(w,E=fa.earth.metersPerDegree){return X.unwrapOr(x(w,!0),E)}function x(w,E=!1){let f,u,G=null;null!=w&&("object"===typeof w?(f=w.wkid,u=w.wkt):"number"===typeof w?f=w:"string"===typeof w&&(u=w));if(f){if(pa.isWKIDFromMars(f))return fa.mars.metersPerDegree;if(pa.isWKIDFromMoon(f))return fa.moon.metersPerDegree;G=C.values[C[f]];!G&&E&&R.has(f)&&(G=y)}else u&&(/^PROJCS/i.test(u)?G=h(D.exec(u),G):/^GEOCCS/i.test(u)&&(G=h(O.exec(u),G)));return G}function h(w,E){return w&&w[1]?
parseFloat(w[1].split(",")[1]):E}function k(w){var E=null;if(null!=w)if("object"===typeof w){var f=w.wkid;var u=w.wkt}else"number"===typeof w?f=w:"string"===typeof w&&(u=w);if(f)E=C.units[C[f]];else if(u&&(w=/^PROJCS/i.test(u)?D:/^GEOCCS/i.test(u)?O:null)&&(u=w.exec(u))&&u[1]&&(u=u[1],E=(E=/[\\"\\']{1}([^\\"\\']+)/.exec(u))&&E[1],!E||!C.units.includes(E)))for(u=parseFloat(u.split(",")[1]),E=null,w=C.values,f=0;f<w.length;++f)if(1E-7>Math.abs(u-w[f])){E=C.units[f];break}return X.isSome(E)?g(E):null}
function m(w){w=k(w);if(X.isNone(w))return null;switch(w){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const y=fa.earth.radius*Math.PI/200,D=/UNIT\[([^\]]+)\]\]$/i,C=ma,O=
/UNIT\[([^\]]+)\]/i,R=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),K=ea.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});r={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};ma={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(w=>w*w)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const A={length:{baseUnit:"meters",units:r},area:{baseUnit:"square-meters",units:ma},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},V=(()=>{const w={};for(const E in A)for(const f in A[E].units)w[f]=
E;return w})(),ja="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),ha=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),H={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",
esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},F={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};r=ea.strict()(H);ma=ea.strict()(F);ea=ea.strict()({...H,...F});S.areaUnitFromSpatialReference=function(w){w=k(w);return X.isNone(w)?null:ha.get(w)};
S.areaUnitsJSONMap=r;S.baseUnitForUnit=function(w){return Q(aa(w))};S.baseUnitForUnitType=Q;S.convertUnit=L;S.getDefaultUnitForView=function(w){var E;if(X.isNone(w))return"metric";var f=w.map;if(f=f&&"portalItem"in f?null==(E=f.portalItem)?void 0:E.portal:null){var u,G;switch(null!=(u=null==f?void 0:null==(G=f.user)?void 0:G.units)?u:f.units){case "metric":return"metric";case "english":return"imperial"}}return X.unwrapOr(m(w.spatialReference),"metric")};S.getDefaultUnitSystem=m;S.getMetersPerUnit=
x;S.getMetersPerUnitForSR=p;S.getMetersPerVerticalUnitForSR=function(w){if(w&&"object"===typeof w&&!pa.isEarth(w))return 1;w=p(w);return 1E5<w?1:w};S.getUnitString=k;S.getVerticalUnitStringForSR=l;S.inchesPerMeter=39.37;S.isBaseUnit=I;S.isMeasurementSystem=function(w){return"imperial"===w||"metric"===w};S.lengthToDegrees=function(w,E,f){return L(w,E,"meters")/(f*Math.PI/180)};S.lengthUnitFromSpatialReference=function(w){w=k(w);return X.isNone(w)||!ja.includes(w)?null:w};S.lengthUnitsJSONMap=ma;S.measurementAreaUnits=
"metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");S.measurementLengthUnits=ja;S.preferredAreaUnit=function(w,E,f){switch(f){case "metric":return e(w,E);case "imperial":return q(w,E);default:return f}};S.preferredImperialAreaUnit=q;S.preferredImperialLengthUnit=b;S.preferredImperialVerticalLengthUnit=d;S.preferredLengthUnit=function(w,E,f){switch(f){case "metric":return v(w,E);case "imperial":return b(w,
E);default:return f}};S.preferredMetricAreaUnit=e;S.preferredMetricLengthUnit=v;S.preferredMetricVerticalLengthUnit=n;S.preferredVerticalLengthUnit=function(w,E,f){switch(f){case "metric":return n(w,E);case "imperial":return d(w,E);default:return f}};S.unitFromRESTJSON=g;S.unitToRESTJSON=function(w){return K.toJSON(w)||null};S.unitType=aa;S.unitsJSONMap=ea;S.verticalLengthUnitFromSpatialReference=function(w){w=l(w);return X.isNone(w)||!ja.includes(w)?null:w};Object.defineProperties(S,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(S,r,ea,X){function t(aa){return new r({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${aa.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const Y=t(ea.earth),fa=t(ea.mars),pa=t(ea.moon),ma=new r({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ea.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});S.SphericalECEFSpatialReference=Y;S.SphericalPCPFMars=
fa;S.SphericalPCPFMoon=pa;S.WGS84ECEFSpatialReference=ma;S.createSphericalPCPF=t;S.getReferenceEllipsoid=function(aa){return aa&&(X.isMars(aa)||aa===fa)?ea.mars:aa&&(X.isMoon(aa)||aa===pa)?ea.moon:ea.earth};S.getReferenceEllipsoidFromWKID=function(aa){return X.isWKIDFromMars(aa)?ea.mars:X.isWKIDFromMoon(aa)?ea.moon:ea.earth};S.getSphericalPCPF=function(aa){return aa&&(X.isMars(aa)||aa===fa)?fa:aa&&(X.isMoon(aa)||aa===pa)?pa:Y};S.getSphericalPCPFForEllipsoid=function(aa){return aa&&aa===ea.mars?fa:
aa&&aa===ea.moon?pa:Y};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(S,r,ea,X,t){function Y(){return!!r._pe}function fa(){return!!t("esri-wasm")}function pa(){return v?v:v=(new Promise((b,d)=>S(["./pe-wasm"],b,d))).then(b=>b.peWasm).then(({default:b})=>b({locateFile:d=>X.getAssetUrl(`esri/geometry/support/${d}`)})).then(b=>{ma(b)})}
function ma(b){function d(g,l,p){g[l]=p(g[l])}r._pe=b;r.PeDefs.init();r.PeGTlistExtended.init();r.PeNotationMgrs.init();r.PeNotationUtm.init();r.PePCSInfo.init();r.PeGCSExtent=function(g){function l(){return g.apply(this,arguments)||this}ea._inheritsLoose(l,g);l.prototype.destroy=function(){r._pe.destroy(this)};return l}(r._pe.PeGCSExtent);b=[r._pe.PeDatum,r._pe.PeGeogcs,r._pe.PeGeogtran,r._pe.PeObject,r._pe.PeParameter,r._pe.PePrimem,r._pe.PeProjcs,r._pe.PeSpheroid,r._pe.PeUnit];for(var e of b)d(e.prototype,
"getName",g=>function(){return g.call(this,Array(r.PeDefs.PE_NAME_MAX))});for(const g of[r._pe.PeGeogtran,r._pe.PeProjcs])d(g.prototype,"getParameters",l=>function(){const p=Array(r.PeDefs.PE_PARM_MAX);let x=l.call(this);for(let h=0;h<p.length;h++){const k=r._pe.getValue(x,"*");p[h]=k?r._pe.wrapPointer(k,r._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return p});d(r._pe.PeHorizon.prototype,"getCoord",g=>function(){const l=this.getSize();if(!l)return null;const p=[],x=g.call(this);L(p,l,x);
return p});d(r._pe.PeGTlistExtendedEntry.prototype,"getEntries",g=>{const l=r._pe._pe_getPeGTlistExtendedGTsSize();return function(){let p=null;var x=g.call(this);if(!r._pe.compare(x,r._pe.NULL)){p=[x];const h=this.getSteps();if(1<h){x=r._pe.getPointer(x);for(let k=1;k<h;k++)p.push(r._pe.wrapPointer(x+l*k,r._pe.PeGTlistExtendedGTs))}}return p}});const q=r._pe._pe_getPeHorizonSize();e=g=>function(){let l=this._cache;l||(this._cache=l=new Map);if(l.has(g))return l.get(g);let p=null;var x=g.call(this);
if(!r._pe.compare(x,r._pe.NULL)){p=[x];const h=x.getNump();if(1<h){x=r._pe.getPointer(x);for(let k=1;k<h;k++)p.push(r._pe.wrapPointer(x+q*k,r._pe.PeHorizon))}}l.set(g,p);return p};d(r._pe.PeProjcs.prototype,"horizonGcsGenerate",e);d(r._pe.PeProjcs.prototype,"horizonPcsGenerate",e);r._pe.PeObject.prototype.toString=function(g=r.PeDefs.PE_STR_OPTS_NONE){r._pe.ensureCache.prepare();const l=r._pe.getPointer(this),p=r._pe.ensureInt8(Array(r.PeDefs.PE_BUFFER_MAX));return r._pe.UTF8ToString(r._pe._pe_object_to_string_ext(l,
g,p))}}function aa(b){if(b){var d=r._pe.getClass(b);d&&(d=r._pe.getCache(d))&&(b=r._pe.getPointer(b))&&delete d[b]}}function Q(b,d){const e=[];d=Array(d);for(let q=0;q<b;q++)e.push(r._pe.ensureInt8(d));return e}function I(b){let d;Array.isArray(b[0])?(d=[],b.forEach(e=>{d.push(e[0],e[1])})):d=b;return d}function L(b,d,e,q=!1){if(q)for(q=0;q<2*d;q++)b[q]=r._pe.getValue(e+q*Float64Array.BYTES_PER_ELEMENT,"double");else{q=0===b.length;for(let g=0;g<d;g++)q&&(b[g]=Array(2)),b[g][0]=r._pe.getValue(e,"double"),
b[g][1]=r._pe.getValue(e+Float64Array.BYTES_PER_ELEMENT,"double"),e+=2*Float64Array.BYTES_PER_ELEMENT}}let v;r._pe=null;r.PeCSTransformations=void 0;(function(b){function d(g,l,p){r._pe.ensureCache.prepare();var x=I(p);const h=p===x;x=r._pe.ensureFloat64(x);(g=r._pe._pe_geog_to_proj(r._pe.getPointer(g),l,x))&&L(p,l,x,h);return g}function e(g,l,p){return q(g,l,p,0)}function q(g,l,p,x){r._pe.ensureCache.prepare();var h=I(p);const k=p===h;h=r._pe.ensureFloat64(h);(g=r._pe._pe_proj_to_geog_center(r._pe.getPointer(g),
l,h,x))&&L(p,l,h,k);return g}b.geogToProj=d;b.projGeog=function(g,l,p,x){switch(x){case r.PeDefs.PE_TRANSFORM_P_TO_G:return e(g,l,p);case r.PeDefs.PE_TRANSFORM_G_TO_P:return d(g,l,p)}return 0};b.projToGeog=e;b.projToGeogCenter=q})(r.PeCSTransformations||(r.PeCSTransformations={}));r.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=r._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=r._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=r._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=r._pe.PeDefs.prototype.PE_USNG_MAX;
b.PE_DD_MAX=r._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=r._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=r._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=r._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=r._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=r._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=r._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=r._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=r._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=r._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
b.PE_TYPE_UNIT=r._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=r._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=r._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=r._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=r._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=r._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=r._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=r._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=r._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
b.PE_TRANSFORM_2_TO_1=r._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=r._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=r._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=r._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=r._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=r._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=r._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(r.PeDefs||(r.PeDefs={}));r.PeFactory=void 0;(function(b){function d(l,p){let x=
null,h=e[l];h||(h={},e[l]=h);h.hasOwnProperty(String(p))?x=h[p]:(l=r._pe.PeFactory.prototype.factoryByType(l,p),r._pe.compare(l,r._pe.NULL)||(x=l,h[p]=x));return x=g(x)}const e={},q={},g=l=>{if(l){const p=l.getType();switch(p){case r.PeDefs.PE_TYPE_GEOGCS:l=r._pe.castObject(l,r._pe.PeGeogcs);break;case r.PeDefs.PE_TYPE_PROJCS:l=r._pe.castObject(l,r._pe.PeProjcs);break;case r.PeDefs.PE_TYPE_GEOGTRAN:l=r._pe.castObject(l,r._pe.PeGeogtran);break;default:p&r.PeDefs.PE_TYPE_UNIT&&(l=r._pe.castObject(l,
r._pe.PeUnit))}}return l};b.initialize=function(){r._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(l){return d(r.PeDefs.PE_TYPE_COORDSYS,l)};b.factoryByType=d;b.fromString=function(l,p){let x=null,h=q[l];h||(h={},q[l]=h);h.hasOwnProperty(p)?x=h[p]:(l=r._pe.PeFactory.prototype.fromString(l,p),r._pe.compare(l,r._pe.NULL)||(x=l,h[p]=x));return x=g(x)};b.geogcs=function(l){return d(r.PeDefs.PE_TYPE_GEOGCS,l)};b.geogtran=function(l){return d(r.PeDefs.PE_TYPE_GEOGTRAN,l)};b.getCode=function(l){return r._pe.PeFactory.prototype.getCode(l)};
b.projcs=function(l){return d(r.PeDefs.PE_TYPE_PROJCS,l)};b.unit=function(l){return d(r.PeDefs.PE_TYPE_UNIT,l)}})(r.PeFactory||(r.PeFactory={}));r.PeGCSExtent=null;r.PeGTlistExtended=void 0;(function(b){let d;b.init=function(){b.PE_GTLIST_OPTS_COMMON=r._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=r._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(e,q,g,l,p,x){let h=null;const k=new r._pe.PeInteger(x);try{const m=r._pe.PeGTlistExtended.prototype.getGTlist(e,q,g,l,p,k);if(x=k.val)if(h=
[m],1<x){const y=r._pe.getPointer(m);for(e=1;e<x;e++)h.push(r._pe.wrapPointer(y+d*e,r._pe.PeGTlistExtendedEntry))}}finally{r._pe.destroy(k)}return h}})(r.PeGTlistExtended||(r.PeGTlistExtended={}));r.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(d){if(d&&d.length){for(const e of d)aa(e),e.getEntries().forEach(q=>{aa(q);q=q.getGeogtran();aa(q);q.getParameters().forEach(aa);[q.getGeogcs1(),q.getGeogcs2()].forEach(g=>{aa(g);const l=g.getDatum();aa(l);aa(l.getSpheroid());aa(g.getPrimem());
aa(g.getUnit())})});r._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(r.PeGTlistExtendedEntry||(r.PeGTlistExtendedEntry={}));r.PeGTTransformations=void 0;(function(b){b.geogToGeog=function(d,e,q,g,l){r._pe.ensureCache.prepare();var p=I(q);const x=q===p;p=r._pe.ensureFloat64(p);let h=0;g&&(h=r._pe.ensureFloat64(g));(d=r._pe._pe_geog_to_geog(r._pe.getPointer(d),e,p,h,l))&&L(q,e,p,x);return d}})(r.PeGTTransformations||(r.PeGTTransformations={}));r.PeNotationDms=void 0;(function(b){const d=(q,g,
l,p,x,h)=>{r._pe.ensureCache.prepare();switch(q){case "dd":var k=r._pe._pe_geog_to_dd;var m=r.PeDefs.PE_DD_MAX;break;case "ddm":k=r._pe._pe_geog_to_ddm;m=r.PeDefs.PE_DDM_MAX;break;case "dms":k=r._pe._pe_geog_to_dms,m=r.PeDefs.PE_DMS_MAX}q=0;g&&(q=r._pe.getPointer(g));g=I(p);g=r._pe.ensureFloat64(g);m=Q(l,m);p=r._pe.ensureInt32(m);if(x=k(q,l,g,x,p))for(k=0;k<l;k++)h[k]=r._pe.UTF8ToString(m[k]);return x},e=(q,g,l,p,x)=>{r._pe.ensureCache.prepare();switch(q){case "dd":var h=r._pe._pe_dd_to_geog;break;
case "ddm":h=r._pe._pe_ddm_to_geog;break;case "dms":h=r._pe._pe_dms_to_geog}q=0;g&&(q=r._pe.getPointer(g));g=p.map(k=>r._pe.ensureString(k));p=r._pe.ensureInt32(g);g=r._pe.ensureFloat64(Array(2*l));(h=h(q,l,p,g))&&L(x,l,g);return h};b.geogToDms=function(q,g,l,p,x){return d("dms",q,g,l,p,x)};b.dmsToGeog=function(q,g,l,p){return e("dms",q,g,l,p)};b.geogToDdm=function(q,g,l,p,x){return d("ddm",q,g,l,p,x)};b.ddmToGeog=function(q,g,l,p){return e("ddm",q,g,l,p)};b.geogToDd=function(q,g,l,p,x){return d("dd",
q,g,l,p,x)};b.ddToGeog=function(q,g,l,p){return e("dd",q,g,l,p)}})(r.PeNotationDms||(r.PeNotationDms={}));r.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=r._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=r._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=r._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
b.geogToMgrsExtended=function(d,e,q,g,l,p,x){r._pe.ensureCache.prepare();let h=0;d&&(h=r._pe.getPointer(d));d=I(q);q=r._pe.ensureFloat64(d);d=Q(e,r.PeDefs.PE_MGRS_MAX);const k=r._pe.ensureInt32(d);if(g=r._pe._pe_geog_to_mgrs_extended(h,e,q,g,l,p,k))for(l=0;l<e;l++)x[l]=r._pe.UTF8ToString(d[l]);return g};b.mgrsToGeogExtended=function(d,e,q,g,l){r._pe.ensureCache.prepare();let p=0;d&&(p=r._pe.getPointer(d));d=q.map(x=>r._pe.ensureString(x));q=r._pe.ensureInt32(d);d=r._pe.ensureFloat64(Array(2*e));(g=
r._pe._pe_mgrs_to_geog_extended(p,e,q,g,d))&&L(l,e,d);return g}})(r.PeNotationMgrs||(r.PeNotationMgrs={}));r.PeNotationUsng=void 0;(function(b){b.geogToUsng=function(d,e,q,g,l,p,x){r._pe.ensureCache.prepare();let h=0;d&&(h=r._pe.getPointer(d));d=I(q);q=r._pe.ensureFloat64(d);d=Q(e,r.PeDefs.PE_MGRS_MAX);const k=r._pe.ensureInt32(d);if(g=r._pe._pe_geog_to_usng(h,e,q,g,l,p,k))for(l=0;l<e;l++)x[l]=r._pe.UTF8ToString(d[l]);return g};b.usngToGeog=function(d,e,q,g){r._pe.ensureCache.prepare();var l=0;d&&
(l=r._pe.getPointer(d));d=q.map(p=>r._pe.ensureString(p));q=r._pe.ensureInt32(d);d=r._pe.ensureFloat64(Array(2*e));(l=r._pe._pe_usng_to_geog(l,e,q,d))&&L(g,e,d);return l}})(r.PeNotationUsng||(r.PeNotationUsng={}));r.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=r._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geogToUtm=function(d,e,q,
g,l){r._pe.ensureCache.prepare();var p=0;d&&(p=r._pe.getPointer(d));d=I(q);q=r._pe.ensureFloat64(d);d=Q(e,r.PeDefs.PE_UTM_MAX);const x=r._pe.ensureInt32(d);if(g=r._pe._pe_geog_to_utm(p,e,q,g,x))for(p=0;p<e;p++)l[p]=r._pe.UTF8ToString(d[p]);return g};b.utmToGeog=function(d,e,q,g,l){r._pe.ensureCache.prepare();let p=0;d&&(p=r._pe.getPointer(d));d=q.map(x=>r._pe.ensureString(x));q=r._pe.ensureInt32(d);d=r._pe.ensureFloat64(Array(2*e));(g=r._pe._pe_utm_to_geog(p,e,q,g,d))&&L(l,e,d);return g}})(r.PeNotationUtm||
(r.PeNotationUtm={}));r.PePCSInfo=void 0;(function(b){const d=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=r._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=r._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=r._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=r._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(e,q=b.PE_PCSINFO_OPTION_DOMAIN){let g,l;d.has(e)&&(l=d.get(e),l[q]&&(g=l[q]));g||(g=r._pe.PePCSInfo.prototype.generate(e,
q),l||(l=[],d.set(e,l)),l[q]=g);return g}})(r.PePCSInfo||(r.PePCSInfo={}));r.PeVersion=void 0;(function(b){b.versionString=function(){return r._pe.PeVersion.prototype.version_string()}})(r.PeVersion||(r.PeVersion={}));const n=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return r._pe},isLoaded:Y,isSupported:fa,load:pa,get PeCSTransformations(){return r.PeCSTransformations},get PeDefs(){return r.PeDefs},get PeFactory(){return r.PeFactory},get PeGCSExtent(){return r.PeGCSExtent},get PeGTlistExtended(){return r.PeGTlistExtended},
get PeGTlistExtendedEntry(){return r.PeGTlistExtendedEntry},get PeGTTransformations(){return r.PeGTTransformations},get PeNotationDms(){return r.PeNotationDms},get PeNotationMgrs(){return r.PeNotationMgrs},get PeNotationUsng(){return r.PeNotationUsng},get PeNotationUtm(){return r.PeNotationUtm},get PePCSInfo(){return r.PePCSInfo},get PeVersion(){return r.PeVersion},_init:ma},Symbol.toStringTag,{value:"Module"}));r._init=ma;r.isLoaded=Y;r.isSupported=fa;r.load=pa;r.pe=n})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I,L,v,n,b,d,e,q,g,l,p,x,h,k,m,y){function D(){return!!Ha&&b.isLoaded()}function C(J){Y.isNone(Ya)&&(Ya=Promise.all([b.load(),(new Promise((W,M)=>S(["../chunks/geometryEngineBase"],W,M))).then(W=>W.geometryEngineBase),new Promise((W,M)=>S(["./geometryAdapters/hydrated"],W,M))]));return Ya.then(([,W,{hydratedAdapter:M}])=>{fa.throwIfAborted(J);Xa=M;Ha=W.default;Ha._enableProjection(b.pe);gb.notify()})}function O(J,W,M=null,ka=null){return Array.isArray(J)?0===J.length?
[]:R(Xa,J,J[0].spatialReference,W,M,ka):R(Xa,[J],J.spatialReference,W,M,ka)[0]}function R(J,W,M,ka,sa=null,ta=null){if(Y.isNone(M)||Y.isNone(ka))return W;if(V(M,ka,sa))return W.map(xa=>Y.unwrap(ha(xa,M,ka)));if(Y.isNone(sa)){const xa=h.cacheKey(M,ka);void 0!==cb[xa]?sa=cb[xa]:(sa=K(M,ka,null),Y.isNone(sa)&&(sa=new h),cb[xa]=sa)}if(Y.isNone(Ha))throw new db;return Y.isSome(ta)?Ha._project(J,W,M,ka,sa,ta):Ha._project(J,W,M,ka,sa)}function K(J,W,M=null){if(Y.isNone(Ha))throw new db;if(Y.isNone(J)||Y.isNone(W))return null;
J=Ha._getTransformation(Xa,J,W,M,null==M?void 0:M.spatialReference);return null!==J?h.fromGE(J):null}function A(J,W){try{const M=O(J,W);if(null==M)return null;"xmin"in J&&"xmin"in M&&(M.zmin=J.zmin,M.zmax=J.zmax);const ka=y.getGeometryZScaler(M.type,J.spatialReference,W);Y.isSome(ka)&&ka(M);return M}catch(M){if(!(M instanceof db))throw M;return null}}function V(J,W,M){return M?!1:k.equals(J,W)?!0:k.isValid(J)&&k.isValid(W)&&!!Pa(J,W,fb)}function ja(){ja=ea._asyncToGenerator(function*(J,W,M,ka){if(D())return fa.waitTick(ka);
if(Array.isArray(J))for(const {source:sa,dest:ta,geographicTransformation:xa}of J){if(!V(sa,ta,xa))return C(ka)}else if(!V(J,W,M))return C(ka);return fa.waitTick(ka)});return ja.apply(this,arguments)}function ha(J,W,M){return J?"x"in J?H(J,W,new d,M,0):"xmin"in J?f(J,W,new v,M,0):"rings"in J?E(J,W,new e,M,0):"paths"in J?w(J,W,new q,M,0):"points"in J?F(J,W,new n,M,0):null:null}function H(J,W,M,ka,sa){Fa[0]=J.x;Fa[1]=J.y;const ta=J.z;Fa[2]=void 0!==ta?ta:sa;if(!U(Fa,W,0,Fa,ka,0,1))return null;M.x=Fa[0];
M.y=Fa[1];M.spatialReference=ka;void 0===ta?(M.z=void 0,M.hasZ=!1):(M.z=Fa[2],M.hasZ=!0);void 0===J.m?(M.m=void 0,M.hasM=!1):(M.m=J.m,M.hasM=!0);return M}function F(J,W,M,ka,sa){const {points:ta,hasZ:xa,hasM:Aa}=J;J=[];const Na=ta.length,Ma=[];for(var Ka of ta)Ma.push(Ka[0],Ka[1],xa?Ka[2]:sa);if(!U(Ma,W,0,Ma,ka,0,Na))return null;for(W=0;W<Na;++W){sa=3*W;Ka=Ma[sa];const Ra=Ma[sa+1];xa&&Aa?J.push([Ka,Ra,Ma[sa+2],ta[W][3]]):xa?J.push([Ka,Ra,Ma[sa+2]]):Aa?J.push([Ka,Ra,ta[W][2]]):J.push([Ka,Ra])}M.points=
J;M.spatialReference=ka;M.hasZ=xa;M.hasM=Aa;return M}function w(J,W,M,ka,sa){const {paths:ta,hasZ:xa,hasM:Aa}=J;J=[];if(!T(ta,xa,Aa,W,J,ka,sa))return null;M.paths=J;M.spatialReference=ka;M.hasZ=xa;M.hasM=Aa;return M}function E(J,W,M,ka,sa){const {rings:ta,hasZ:xa,hasM:Aa}=J;J=[];if(!T(ta,xa,Aa,W,J,ka,sa))return null;M.rings=J;M.spatialReference=ka;M.hasZ=xa;M.hasM=Aa;return M}function f(J,W,M,ka,sa){const {xmin:ta,ymin:xa,xmax:Aa,ymax:Na,hasZ:Ma,hasM:Ka}=J;if(!u(ta,xa,Ma?J.zmin:sa,W,Fa,ka))return null;
M.xmin=Fa[0];M.ymin=Fa[1];Ma&&(M.zmin=Fa[2]);if(!u(Aa,Na,Ma?J.zmax:sa,W,Fa,ka))return null;M.xmax=Fa[0];M.ymax=Fa[1];Ma&&(M.zmax=Fa[2]);Ka&&(M.mmin=J.mmin,M.mmax=J.mmax);M.spatialReference=ka;return M}function u(J,W,M,ka,sa,ta){Ja[0]=J;Ja[1]=W;Ja[2]=M;return U(Ja,ka,0,sa,ta,0,1)}function G(J,W,M,ka){if(Y.isNone(W)||Y.isNone(ka)||2>J.length)return!1;2===J.length&&(Ja[0]=J[0],Ja[1]=J[1],Ja[2]=0,J=Ja);return U(J,W,0,M,ka,0,1)}function N(J,W,M){if(Y.isNone(W))return!1;W=B(W,$a);W=Ta[W][ia.WGS84_COMPARABLE_LON_LAT];
if(Y.isNone(W))return!1;W(J,0,Ja,0);M!==Ja&&(M[0]=Ja[0],M[1]=Ja[1],2<M.length&&(M[2]=Ja[2]));return!0}function U(J,W,M,ka,sa,ta,xa=1){W=Pa(W,sa,fb);if(Y.isNone(W))return!1;if(W===z){if(J===ka&&M===ta)return!0;xa=M+3*xa;for(let Aa=M,Na=ta;Aa<xa;Aa++,Na++)ka[Na]=J[Aa];return!0}xa=M+3*xa;for(let Aa=M,Na=ta;Aa<xa;Aa+=3,Na+=3)W(J,Aa,ka,Na);return!0}function T(J,W,M,ka,sa,ta,xa=0){const Aa=[];for(const Na of J)for(const Ma of Na)Aa.push(Ma[0],Ma[1],W?Ma[2]:xa);if(!U(Aa,ka,0,Aa,ta,0,Aa.length/3))return!1;
ka=0;sa.length=0;for(const Na of J){J=[];for(const Ma of Na)W&&M?J.push([Aa[ka++],Aa[ka++],Aa[ka++],Ma[3]]):W?J.push([Aa[ka++],Aa[ka++],Aa[ka++]]):(M?J.push([Aa[ka++],Aa[ka++],Ma[2]]):J.push([Aa[ka++],Aa[ka++]]),ka++);sa.push(J)}return!0}function P(J,W,M,ka){W=ka+W;if(W<ka/2||M>W)return Number.MAX_VALUE;J=Math.abs(Ua*J)+Math.asin(M/W);return J>=Math.PI/2?Number.MAX_VALUE:M/Math.cos(J)}function a(J,W,M){const ka=Math.sin(J);J=Math.cos(J);const sa=Math.sin(W);W=Math.cos(W);M[0]=-ka;M[4]=-sa*J;M[8]=
W*J;M[12]=0;M[1]=J;M[5]=-sa*ka;M[9]=W*ka;M[13]=0;M[2]=0;M[6]=W;M[10]=sa;M[14]=0;M[3]=0;M[7]=0;M[11]=0;M[15]=1;return M}function c(J,W,M){a(J,W,M);Q.transpose(M,M);return M}function B(J,W){if(W.spatialReference===J)return W.spatialReferenceId;W.spatialReference=J;"metersPerUnit"in W&&(W.metersPerUnit=pa.getMetersPerUnitForSR(J,1));return J.wkt===g.SphericalECEFSpatialReference.wkt?W.spatialReferenceId=ia.SPHERICAL_ECEF:k.isWGS84(J)?W.spatialReferenceId=ia.WGS84:k.isWebMercator(J)?W.spatialReferenceId=
ia.WEB_MERCATOR:k.isPlateCarree(J)?W.spatialReferenceId=ia.PLATE_CARREE:J.wkt===g.WGS84ECEFSpatialReference.wkt?W.spatialReferenceId=ia.WGS84_ECEF:J.wkid===m.SupportedGCSWkids.CGCS2000?W.spatialReferenceId=ia.CGCS2000:J.wkt===g.SphericalPCPFMars.wkt?W.spatialReferenceId=ia.SPHERICAL_MARS_PCPF:J.wkt===g.SphericalPCPFMoon.wkt?W.spatialReferenceId=ia.SPHERICAL_MOON_PCPF:k.isMars(J)?W.spatialReferenceId=ia.GCSMARS2000:k.isMoon(J)?W.spatialReferenceId=ia.GCSMOON2000:W.spatialReferenceId=ia.UNKNOWN}function z(J,
W,M,ka){J!==M&&(M[ka++]=J[W++],M[ka++]=J[W++],M[ka]=J[W])}function Z(J,W,M,ka){M[ka++]=ab*(J[W++]/p.earth.radius);M[ka++]=ab*(Math.PI/2-2*Math.atan(Math.exp(-J[W++]/p.earth.radius)));M[ka]=J[W]}function ca(J,W,M,ka){Z(J,W,M,ka);wa(M,ka,M,ka)}function ba(J,W,M,ka){Z(J,W,M,ka);La(M,ka,M,ka)}function la(J,W,M,ka,sa){var ta=.4999999*Math.PI;ta=t.clamp(Ua*J[W+1],-ta,ta);ta=Math.sin(ta);M[ka++]=Ua*J[W]*sa.radius;M[ka++]=sa.halfSemiMajorAxis*Math.log((1+ta)/(1-ta));M[ka]=J[W+2]}function da(J,W,M,ka){la(J,
W,M,ka,p.earth)}function oa(J,W,M,ka){M[ka]=J[W]*hb;M[ka+1]=J[W+1]*hb;M[ka+2]=J[W+2]}function na(J,W,M,ka){M[ka]=J[W]*bb;M[ka+1]=J[W+1]*bb;M[ka+2]=J[W+2]}function qa(J,W,M,ka){Z(J,W,M,ka);oa(M,ka,M,ka)}function ua(J,W,M,ka,sa){sa+=J[W+2];const ta=Ua*J[W+1];J=Ua*J[W];W=Math.cos(ta);M[ka++]=Math.cos(J)*W*sa;M[ka++]=Math.sin(J)*W*sa;M[ka]=Math.sin(ta)*sa}function ra(J,W,M,ka){ua(J,W,M,ka,p.moon.radius)}function va(J,W,M,ka){ua(J,W,M,ka,p.mars.radius)}function wa(J,W,M,ka){ua(J,W,M,ka,p.earth.radius)}
function ya(J,W,M,ka,sa){var ta=J[W];const xa=J[W+1];W=J[W+2];J=Math.sqrt(ta*ta+xa*xa+W*W);W=t.asinClamped(W/(0===J?1:J));ta=Math.atan2(xa,ta);M[ka++]=ab*ta;M[ka++]=ab*W;M[ka]=J-sa}function Ga(J,W,M,ka){ya(J,W,M,ka,p.moon.radius)}function za(J,W,M,ka){ya(J,W,M,ka,p.mars.radius)}function Ba(J,W,M,ka){ya(J,W,M,ka,p.earth.radius)}function Da(J,W,M,ka){Ba(J,W,M,ka);da(M,ka,M,ka)}function Ea(J,W,M,ka){Ba(J,W,M,ka);La(M,ka,M,ka)}function La(J,W,M,ka){{var sa=p.earth;const xa=Ua*J[W];var ta=Ua*J[W+1];J=
J[W+2];W=Math.sin(ta);ta=Math.cos(ta);const Aa=sa.radius/Math.sqrt(1-sa.eccentricitySquared*W*W);M[ka++]=(Aa+J)*ta*Math.cos(xa);M[ka++]=(Aa+J)*ta*Math.sin(xa);M[ka++]=(Aa*(1-sa.eccentricitySquared)+J)*W}}function Ia(J,W,M,ka){var sa=x.earthEllipsoidConstants,ta=J[W],xa=J[W+1];J=J[W+2];let Aa;W=Math.abs(J);var Na=ta*ta+xa*xa;var Ma=Math.sqrt(Na);var Ka=Na+J*J;var Ra=Math.sqrt(Ka);ta=Math.atan2(xa,ta);var Wa=J*J/Ka;Ka=Na/Ka;xa=sa.a2/Ra;Na=sa.a3-sa.a4/Ra;.3<Ka?(Wa=W/Ra*(1+Ka*(sa.a1+xa+Wa*Na)/Ra),Ra=
Math.asin(Wa),xa=Wa*Wa,Ka=Math.sqrt(1-xa)):(Ka=Ma/Ra*(1-Wa*(sa.a5-xa-Ka*Na)/Ra),Ra=Math.acos(Ka),xa=1-Ka*Ka,Wa=Math.sqrt(xa));Aa=1-p.earth.eccentricitySquared*xa;xa=p.earth.radius/Math.sqrt(Aa);sa=sa.a6*xa;xa=Ma-xa*Ka;Na=W-sa*Wa;W=Ka*xa+Wa*Na;Ma=Ka*Na-Wa*xa;sa=Ma/(sa/Aa+W);Ra+=sa;0>J&&(Ra=-Ra);M[ka++]=ab*ta;M[ka++]=ab*Ra;M[ka]=W+Ma*sa/2}function Ca(J,W,M,ka){Ia(J,W,M,ka);wa(M,ka,M,ka)}function Oa(J,W,M,ka){Ia(J,W,M,ka);da(M,ka,M,ka)}function Pa(J,W,M=Qa()){return Y.isNone(J)||Y.isNone(W)?null:Sa(J,
W,M).projector}function Sa(J,W,M){if(Y.isNone(J)||Y.isNone(W)||M.source.spatialReference===J&&M.dest.spatialReference===W)return M;const ka=B(J,M.source),sa=B(W,M.dest);ka===ia.UNKNOWN&&sa===ia.UNKNOWN?k.equals(J,W)?M.projector=z:M.projector=null:M.projector=Ta[ka][sa];return M}function Qa(){return{source:{spatialReference:null,spatialReferenceId:ia.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ia.UNKNOWN,metersPerUnit:1},projector:z}}let Ha=null,Xa=null,Ya=null,cb={};const gb=
new aa.SimpleObservable;let db=function(J){function W(){return J.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ea._inheritsLoose(W,J);return W}(X);var ia;(function(J){J[J.UNKNOWN=0]="UNKNOWN";J[J.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";J[J.WGS84=2]="WGS84";J[J.WEB_MERCATOR=3]="WEB_MERCATOR";J[J.WGS84_ECEF=4]="WGS84_ECEF";J[J.CGCS2000=5]="CGCS2000";J[J.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";J[J.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";
J[J.GCSMARS2000=8]="GCSMARS2000";J[J.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";J[J.GCSMOON2000=10]="GCSMOON2000";J[J.LON_LAT=11]="LON_LAT";J[J.PLATE_CARREE=12]="PLATE_CARREE"})(ia||(ia={}));const hb=p.earth.radius*Math.PI/180,bb=180/(p.earth.radius*Math.PI),Ta={[ia.WGS84]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:z,[ia.SPHERICAL_ECEF]:wa,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:da,
[ia.PLATE_CARREE]:oa,[ia.WGS84]:z,[ia.WGS84_ECEF]:La},[ia.CGCS2000]:{[ia.CGCS2000]:z,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:z,[ia.SPHERICAL_ECEF]:wa,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:oa,[ia.WGS84]:null,[ia.WGS84_ECEF]:La},[ia.GCSMARS2000]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:z,[ia.GCSMOON2000]:null,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:null,[ia.SPHERICAL_ECEF]:null,
[ia.SPHERICAL_MARS_PCPF]:va,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:null,[ia.WGS84]:null,[ia.WGS84_ECEF]:null},[ia.GCSMOON2000]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:z,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:null,[ia.SPHERICAL_ECEF]:null,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:ra,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:null,[ia.WGS84]:null,[ia.WGS84_ECEF]:null},[ia.WEB_MERCATOR]:{[ia.CGCS2000]:null,
[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:Z,[ia.WGS84_COMPARABLE_LON_LAT]:Z,[ia.SPHERICAL_ECEF]:ca,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:z,[ia.PLATE_CARREE]:qa,[ia.WGS84]:Z,[ia.WGS84_ECEF]:ba},[ia.WGS84_ECEF]:{[ia.CGCS2000]:Ia,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:Ia,[ia.WGS84_COMPARABLE_LON_LAT]:Ia,[ia.SPHERICAL_ECEF]:Ca,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:Oa,
[ia.PLATE_CARREE]:function(J,W,M,ka){Ia(J,W,M,ka);oa(M,ka,M,ka)},[ia.WGS84]:Ia,[ia.WGS84_ECEF]:z},[ia.SPHERICAL_ECEF]:{[ia.CGCS2000]:Ba,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:Ba,[ia.WGS84_COMPARABLE_LON_LAT]:Ba,[ia.SPHERICAL_ECEF]:z,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:Da,[ia.PLATE_CARREE]:function(J,W,M,ka){Ba(J,W,M,ka);oa(M,ka,M,ka)},[ia.WGS84]:Ba,[ia.WGS84_ECEF]:Ea},[ia.SPHERICAL_MARS_PCPF]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:za,
[ia.GCSMOON2000]:null,[ia.LON_LAT]:za,[ia.WGS84_COMPARABLE_LON_LAT]:null,[ia.SPHERICAL_ECEF]:null,[ia.SPHERICAL_MARS_PCPF]:z,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:null,[ia.WGS84]:null,[ia.WGS84_ECEF]:null},[ia.SPHERICAL_MOON_PCPF]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:Ga,[ia.LON_LAT]:Ga,[ia.WGS84_COMPARABLE_LON_LAT]:null,[ia.SPHERICAL_ECEF]:null,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:z,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,
[ia.PLATE_CARREE]:null,[ia.WGS84]:null,[ia.WGS84_ECEF]:null},[ia.UNKNOWN]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:null,[ia.WGS84_COMPARABLE_LON_LAT]:null,[ia.SPHERICAL_ECEF]:null,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:z,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:null,[ia.WGS84]:null,[ia.WGS84_ECEF]:null},[ia.LON_LAT]:{[ia.CGCS2000]:z,[ia.GCSMARS2000]:z,[ia.GCSMOON2000]:z,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:z,[ia.SPHERICAL_ECEF]:wa,
[ia.SPHERICAL_MARS_PCPF]:va,[ia.SPHERICAL_MOON_PCPF]:ra,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:da,[ia.PLATE_CARREE]:oa,[ia.WGS84]:z,[ia.WGS84_ECEF]:La},[ia.WGS84_COMPARABLE_LON_LAT]:{[ia.CGCS2000]:null,[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:z,[ia.WGS84_COMPARABLE_LON_LAT]:z,[ia.SPHERICAL_ECEF]:wa,[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:null,[ia.PLATE_CARREE]:oa,[ia.WGS84]:z,[ia.WGS84_ECEF]:La},[ia.PLATE_CARREE]:{[ia.CGCS2000]:na,
[ia.GCSMARS2000]:null,[ia.GCSMOON2000]:null,[ia.LON_LAT]:na,[ia.WGS84_COMPARABLE_LON_LAT]:na,[ia.SPHERICAL_ECEF]:function(J,W,M,ka){na(J,W,M,ka);wa(M,ka,M,ka)},[ia.SPHERICAL_MARS_PCPF]:null,[ia.SPHERICAL_MOON_PCPF]:null,[ia.UNKNOWN]:null,[ia.WEB_MERCATOR]:function(J,W,M,ka){na(J,W,M,ka);da(M,ka,M,ka)},[ia.PLATE_CARREE]:z,[ia.WGS84]:na,[ia.WGS84_ECEF]:function(J,W,M,ka){na(J,W,M,ka);La(M,ka,M,ka)}}},$a={spatialReference:null,spatialReferenceId:ia.UNKNOWN},ib={spatialReference:null,spatialReferenceId:ia.UNKNOWN},
fb=Qa(),jb=Qa(),Ua=t.deg2rad(1),ab=t.rad2deg(1),Ja=L.create(),Va=L.create(),Za=L.create(),Fa=L.create(),eb=L.create();r.canProjectToWGS84ComparableLonLat=function(J){if(Y.isNone(J))return!1;J=B(J,$a);return!!Ta[J][ia.WGS84_COMPARABLE_LON_LAT]};r.canProjectWithoutEngine=V;r.computeENUToSphericalPCPFLocalRotation=a;r.computeSphericalPCPFToENULocalRotation=c;r.computeTranslationToOriginAndRotation=function(J,W,M,ka){if(Y.isNone(J)||Y.isNone(ka))return!1;var sa=B(J,$a),ta=B(ka,ib);if(sa===ta&&ta!==ia.SPHERICAL_ECEF&&
ta!==ia.SPHERICAL_MARS_PCPF&&ta!==ia.SPHERICAL_MOON_PCPF&&(sa!==ia.UNKNOWN||k.equals(J,ka)))return Q.fromTranslation(M,W),!0;if(ta===ia.SPHERICAL_ECEF||ta===ia.SPHERICAL_MARS_PCPF||ta===ia.SPHERICAL_MOON_PCPF){sa=Ta[sa][ia.LON_LAT];ta=Ta[ia.LON_LAT][ta];if(Y.isNone(sa)||Y.isNone(ta))return!1;sa(W,0,Va,0);ta(Va,0,Za,0);a(Ua*Va[0],Ua*Va[1],M);M[12]=Za[0];M[13]=Za[1];M[14]=Za[2];return!0}if((ta===ia.WEB_MERCATOR||ta===ia.PLATE_CARREE)&&(sa===ia.WGS84||sa===ia.CGCS2000&&ta===ia.PLATE_CARREE||sa===ia.SPHERICAL_ECEF||
sa===ia.WEB_MERCATOR)){J=Ta[sa][ia.LON_LAT];ta=Ta[ia.LON_LAT][ta];if(Y.isNone(J)||Y.isNone(ta))return!1;J(W,0,Va,0);ta(Va,0,Za,0);sa===ia.SPHERICAL_ECEF?c(Ua*Va[0],Ua*Va[1],M):Q.identity(M);M[12]=Za[0];M[13]=Za[1];M[14]=Za[2];return!0}return!1};r.getProjectorName=function(J,W){switch(Pa(J,W,fb)){case z:return"copy3";case wa:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";case oa:return"wgs84ToPlateCarree";case La:return"wgs84ToWGS84ECEF";case Z:return"webMercatorToWGS84";case ca:return"webMercatorToSphericalECEF";
case ba:return"webMercatorToWGS84ECEF";case qa:return"webMercatorToPlateCarree";case Ia:return"wgs84ECEFToWGS84";case Ca:return"wgs84ECEFToSphericalECEF";case Oa:return"wgs84ECEFToWebMercator";case Ba:return"sphericalECEFToWGS84";case Da:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case Ga:return"sphericalMoonPCPFToMoon2000";case Ea:return"sphericalECEFToWGS84ECEF";case va:return"mars2000ToSphericalPCPF";case ra:return"moon2000ToSphericalPCPF";default:return null}};
r.getTransformation=K;r.getTransformations=function(J,W,M=null){if(Y.isNone(Ha))throw new db;J=Ha._getTransformationBySuitability(Xa,J,W,M,null==M?void 0:M.spatialReference);if(null!==J){W=[];for(const ka of J)W.push(h.fromGE(ka));return W}return[]};r.initializeProjection=function(J,W,M,ka){return ja.apply(this,arguments)};r.isLoaded=D;r.load=C;r.localLinearScaleFactors=function(J,W,M,ka){if(Y.isNone(W)||Y.isNone(ka))return!1;const sa=B(W,$a);var ta=B(ka,ib);if(sa===ta&&sa!==ia.UNKNOWN||k.equals(W,
ka))return M[0]=1,M[1]=1,M[2]=1,!0;if(sa===ia.SPHERICAL_ECEF){W=I.length(J);J=W/Math.sqrt(J[0]*J[0]+J[1]*J[1]);W/=p.earth.radius;if(ta===ia.WEB_MERCATOR)return M[0]=J*W,M[1]=J*W,M[2]=1,!0;if(ta===ia.WGS84||ta===ia.CGCS2000)return ta=bb,M[0]=ta*J*W,M[1]=ta*W,M[2]=1,!0}else if(sa===ia.PLATE_CARREE){if(ta===ia.WGS84||ta===ia.CGCS2000)return M[0]=bb,M[1]=bb,M[2]=1,!0;if(ta===ia.WEB_MERCATOR)return ta=J[1]/p.earth.radius,M[0]=1,M[1]=1/Math.cos(ta),M[2]=1,!0}return!1};r.lonLatToSphericalPCPF=function(J,
W,M,ka){const sa=Math.cos(M);J[0]=Math.cos(W)*sa*ka;J[1]=Math.sin(W)*sa*ka;J[2]=Math.sin(M)*ka};r.lonLatToWebMercatorComparable=la;r.project=O;r.projectBoundingRect=function(J,W,M,ka){if(null==J)return!1;if(k.equals(W,ka))return l.copy(M,J),!0;Ja[0]=J[0];Ja[1]=J[1];Ja[2]=0;if(!U(Ja,W,0,Ja,ka,0,1))return!1;M[0]=Ja[0];M[1]=Ja[1];Ja[0]=J[2];Ja[1]=J[3];Ja[2]=0;if(!U(Ja,W,0,Ja,ka,0,1))return!1;M[2]=Ja[0];M[3]=Ja[1];return!0};r.projectBoundingSphere=function(J,W,M,ka){if(Y.isNone(W)||Y.isNone(ka))return!1;
W=Sa(W,ka,jb);if(W.projector===z)return M[0]=J[0],M[1]=J[1],M[2]=J[2],M[3]=J[3],!0;if(Y.isNone(W.projector))return!1;const {source:sa,dest:ta}=W;if(ta.spatialReferenceId===ia.WEB_MERCATOR){W=Ta[sa.spatialReferenceId][ia.WGS84];if(Y.isNone(W))return!1;W(J,0,Va,0);da(Va,0,M,0);M[3]=P(Va[1],J[2],J[3],p.earth.radius);return!0}if(sa.spatialReferenceId!==ia.WGS84&&sa.spatialReferenceId!==ia.CGCS2000||ta.spatialReferenceId!==ia.PLATE_CARREE)W.projector(J,0,M,0),M[3]=J[3]*sa.metersPerUnit/ta.metersPerUnit;
else{ka=Ta[ia.SPHERICAL_ECEF][ia.PLATE_CARREE];let xa=J[3];Y.isSome(Ta[sa.spatialReferenceId][ia.SPHERICAL_ECEF])&&Y.isSome(ka)&&(xa=P(J[1],J[2],J[3],p.earth.radius));W.projector(J,0,M,0);M[3]=xa}return!0};r.projectBuffer=U;r.projectDirection=function(J,W,M,ka,sa){I.copy(Fa,J);I.add(eb,J,W);G(Fa,M,Fa,sa);G(eb,M,eb,sa);I.subtract(ka,eb,Fa);I.normalize(ka,ka)};r.projectExtent=function(J,W,M=W.spatialReference,ka=0){return Y.isSome(M)&&Y.isSome(f(J,J.spatialReference,W,M,ka))};r.projectMany=R;r.projectMultipoint=
function(J,W,M=W.spatialReference,ka=0){return Y.isNone(M)?!1:Y.isSome(F(J,J.spatialReference,W,M,ka))};r.projectOrLoad=function(J,W){return Y.isNone(J)?{pending:null,geometry:null}:k.equals(J.spatialReference,W)?{pending:null,geometry:J}:k.isValid(J.spatialReference)&&k.isValid(W)?V(J.spatialReference,W)?{pending:null,geometry:A(J,W)}:D()?{pending:null,geometry:A(J,W)}:(ma.trackAccess(gb),{pending:C(),geometry:null}):{pending:null,geometry:null}};r.projectPoint=function(J,W,M=W.spatialReference,
ka=0){return Y.isNone(M)?!1:Y.isSome(H(J,J.spatialReference,W,M,ka))};r.projectPointToVector=function(J,W,M,ka=0){Fa[0]=J.x;Fa[1]=J.y;const sa=J.z;Fa[2]=void 0!==sa?sa:ka;return U(Fa,J.spatialReference,0,W,M,0,1)};r.projectPointToWGS84ComparableLonLat=function(J,W){Fa[0]=J.x;Fa[1]=J.y;const M=J.z;Fa[2]=void 0!==M?M:0;return N(Fa,J.spatialReference,W)};r.projectPolygon=function(J,W,M=W.spatialReference,ka=0){return Y.isSome(M)&&Y.isSome(E(J,J.spatialReference,W,M,ka))};r.projectPolygonToWGS84ComparableLonLat=
function({hasZ:J,spatialReference:W,rings:M},ka,sa=0){W=B(W,$a);W=Ta[W][ia.WGS84_COMPARABLE_LON_LAT];if(Y.isNone(W))return!1;J=J?ta=>ta:ta=>I.set(Fa,ta[0],ta[1],sa);for(const ta of M){M=[];for(const xa of ta){const Aa=[0,0,sa];W(J(xa),0,Aa,0);M.push(Aa)}ka.push(M)}return!0};r.projectPolyline=function(J,W,M=W.spatialReference,ka=0){return Y.isSome(M)&&Y.isSome(w(J,J.spatialReference,W,M,ka))};r.projectPolylineToWGS84ComparableLonLat=function({hasZ:J,spatialReference:W,paths:M},ka,sa=0){W=B(W,$a);W=
Ta[W][ia.WGS84_COMPARABLE_LON_LAT];if(Y.isNone(W))return!1;J=J?ta=>ta:ta=>I.set(Fa,ta[0],ta[1],sa);for(const ta of M){M=[];for(const xa of ta){const Aa=[0,0,sa];W(J(xa),0,Aa,0);M.push(Aa)}ka.push(M)}return!0};r.projectVectorToDehydratedPoint=function(J,W,M){return U(J,W,0,Fa,M.spatialReference,0,1)?(M.x=Fa[0],M.y=Fa[1],M.z=Fa[2],M):null};r.projectVectorToPoint=function(J,W,M){if(Y.isNone(W)||Y.isNone(M))return null;const ka=new d({spatialReference:M});return U(J,W,0,Fa,M,0,1)?(ka.x=Fa[0],ka.y=Fa[1],
ka.z=Fa[2],ka):null};r.projectVectorToVector=G;r.projectVectorToWGS84ComparableLonLat=function(J,W,M){return N(J,W,M)};r.projectWithoutEngine=ha;r.projectXYZToVector=u;r.sphericalPCPFtoLonLatElevation=ya;r.test={get loadPromise(){return Ya}};r.tryProjectWithZConversion=A;r.unload=function(){Ya=Xa=Ha=null;cb={}};Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],
function(S,r){let ea=function(){function X(){this._observers=[]}var t=X.prototype;t.observe=function(Y){this._observers.includes(Y)||this._observers.push(Y);return new r.ObservationHandle(this._observers,Y)};t.notify=function(){const Y=this._observers.slice();for(let fa=0;fa<Y.length;++fa){const pa=Y[fa];pa.onInvalidated();pa.onCommitted()}};return X}();S.SimpleObservable=ea;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports",
"./vec3f64","./common"],function(S,r,ea){function X(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function t(a,c,B,z,Z,ca,ba,la,da,oa,na,qa,ua,ra,va,wa,ya){a[0]=c;a[1]=B;a[2]=z;a[3]=Z;a[4]=ca;a[5]=ba;a[6]=la;a[7]=da;a[8]=oa;a[9]=na;a[10]=qa;a[11]=ua;a[12]=ra;a[13]=va;a[14]=wa;a[15]=ya;return a}function Y(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=
0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function fa(a,c){if(a===c){const B=c[1],z=c[2],Z=c[3],ca=c[6],ba=c[7],la=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=B;a[6]=c[9];a[7]=c[13];a[8]=z;a[9]=ca;a[11]=c[14];a[12]=Z;a[13]=ba;a[14]=la}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}function pa(a,c){const B=c[0],z=c[1],Z=c[2],ca=c[3],
ba=c[4],la=c[5],da=c[6],oa=c[7],na=c[8],qa=c[9],ua=c[10],ra=c[11],va=c[12],wa=c[13],ya=c[14];c=c[15];const Ga=B*la-z*ba,za=B*da-Z*ba,Ba=B*oa-ca*ba,Da=z*da-Z*la,Ea=z*oa-ca*la,La=Z*oa-ca*da,Ia=na*wa-qa*va,Ca=na*ya-ua*va,Oa=na*c-ra*va,Pa=qa*ya-ua*wa,Sa=qa*c-ra*wa,Qa=ua*c-ra*ya;let Ha=Ga*Qa-za*Sa+Ba*Pa+Da*Oa-Ea*Ca+La*Ia;if(!Ha)return null;Ha=1/Ha;a[0]=(la*Qa-da*Sa+oa*Pa)*Ha;a[1]=(Z*Sa-z*Qa-ca*Pa)*Ha;a[2]=(wa*La-ya*Ea+c*Da)*Ha;a[3]=(ua*Ea-qa*La-ra*Da)*Ha;a[4]=(da*Oa-ba*Qa-oa*Ca)*Ha;a[5]=(B*Qa-Z*Oa+ca*
Ca)*Ha;a[6]=(ya*Ba-va*La-c*za)*Ha;a[7]=(na*La-ua*Ba+ra*za)*Ha;a[8]=(ba*Sa-la*Oa+oa*Ia)*Ha;a[9]=(z*Oa-B*Sa-ca*Ia)*Ha;a[10]=(va*Ea-wa*Ba+c*Ga)*Ha;a[11]=(qa*Ba-na*Ea-ra*Ga)*Ha;a[12]=(la*Ca-ba*Pa-da*Ia)*Ha;a[13]=(B*Pa-z*Ca+Z*Ia)*Ha;a[14]=(wa*za-va*Da-ya*Ga)*Ha;a[15]=(na*Da-qa*za+ua*Ga)*Ha;return a}function ma(a,c){const B=c[0],z=c[1],Z=c[2],ca=c[3],ba=c[4],la=c[5],da=c[6],oa=c[7],na=c[8],qa=c[9],ua=c[10],ra=c[11],va=c[12],wa=c[13],ya=c[14];c=c[15];a[0]=la*(ua*c-ra*ya)-qa*(da*c-oa*ya)+wa*(da*ra-oa*ua);
a[1]=-(z*(ua*c-ra*ya)-qa*(Z*c-ca*ya)+wa*(Z*ra-ca*ua));a[2]=z*(da*c-oa*ya)-la*(Z*c-ca*ya)+wa*(Z*oa-ca*da);a[3]=-(z*(da*ra-oa*ua)-la*(Z*ra-ca*ua)+qa*(Z*oa-ca*da));a[4]=-(ba*(ua*c-ra*ya)-na*(da*c-oa*ya)+va*(da*ra-oa*ua));a[5]=B*(ua*c-ra*ya)-na*(Z*c-ca*ya)+va*(Z*ra-ca*ua);a[6]=-(B*(da*c-oa*ya)-ba*(Z*c-ca*ya)+va*(Z*oa-ca*da));a[7]=B*(da*ra-oa*ua)-ba*(Z*ra-ca*ua)+na*(Z*oa-ca*da);a[8]=ba*(qa*c-ra*wa)-na*(la*c-oa*wa)+va*(la*ra-oa*qa);a[9]=-(B*(qa*c-ra*wa)-na*(z*c-ca*wa)+va*(z*ra-ca*qa));a[10]=B*(la*c-oa*
wa)-ba*(z*c-ca*wa)+va*(z*oa-ca*la);a[11]=-(B*(la*ra-oa*qa)-ba*(z*ra-ca*qa)+na*(z*oa-ca*la));a[12]=-(ba*(qa*ya-ua*wa)-na*(la*ya-da*wa)+va*(la*ua-da*qa));a[13]=B*(qa*ya-ua*wa)-na*(z*ya-Z*wa)+va*(z*ua-Z*qa);a[14]=-(B*(la*ya-da*wa)-ba*(z*ya-Z*wa)+va*(z*da-Z*la));a[15]=B*(la*ua-da*qa)-ba*(z*ua-Z*qa)+na*(z*da-Z*la);return a}function aa(a){const c=a[0],B=a[1],z=a[2],Z=a[3],ca=a[4],ba=a[5],la=a[6],da=a[7],oa=a[8],na=a[9],qa=a[10],ua=a[11],ra=a[12],va=a[13],wa=a[14];a=a[15];return(c*ba-B*ca)*(qa*a-ua*wa)-
(c*la-z*ca)*(na*a-ua*va)+(c*da-Z*ca)*(na*wa-qa*va)+(B*la-z*ba)*(oa*a-ua*ra)-(B*da-Z*ba)*(oa*wa-qa*ra)+(z*da-Z*la)*(oa*va-na*ra)}function Q(a,c,B){const z=c[0],Z=c[1],ca=c[2],ba=c[3],la=c[4],da=c[5],oa=c[6],na=c[7],qa=c[8],ua=c[9],ra=c[10],va=c[11],wa=c[12],ya=c[13],Ga=c[14];c=c[15];let za=B[0],Ba=B[1],Da=B[2],Ea=B[3];a[0]=za*z+Ba*la+Da*qa+Ea*wa;a[1]=za*Z+Ba*da+Da*ua+Ea*ya;a[2]=za*ca+Ba*oa+Da*ra+Ea*Ga;a[3]=za*ba+Ba*na+Da*va+Ea*c;za=B[4];Ba=B[5];Da=B[6];Ea=B[7];a[4]=za*z+Ba*la+Da*qa+Ea*wa;a[5]=za*Z+
Ba*da+Da*ua+Ea*ya;a[6]=za*ca+Ba*oa+Da*ra+Ea*Ga;a[7]=za*ba+Ba*na+Da*va+Ea*c;za=B[8];Ba=B[9];Da=B[10];Ea=B[11];a[8]=za*z+Ba*la+Da*qa+Ea*wa;a[9]=za*Z+Ba*da+Da*ua+Ea*ya;a[10]=za*ca+Ba*oa+Da*ra+Ea*Ga;a[11]=za*ba+Ba*na+Da*va+Ea*c;za=B[12];Ba=B[13];Da=B[14];Ea=B[15];a[12]=za*z+Ba*la+Da*qa+Ea*wa;a[13]=za*Z+Ba*da+Da*ua+Ea*ya;a[14]=za*ca+Ba*oa+Da*ra+Ea*Ga;a[15]=za*ba+Ba*na+Da*va+Ea*c;return a}function I(a,c,B){const z=B[0],Z=B[1];B=B[2];if(c===a)a[12]=c[0]*z+c[4]*Z+c[8]*B+c[12],a[13]=c[1]*z+c[5]*Z+c[9]*B+c[13],
a[14]=c[2]*z+c[6]*Z+c[10]*B+c[14],a[15]=c[3]*z+c[7]*Z+c[11]*B+c[15];else{const ca=c[0],ba=c[1],la=c[2],da=c[3],oa=c[4],na=c[5],qa=c[6],ua=c[7],ra=c[8],va=c[9],wa=c[10],ya=c[11];a[0]=ca;a[1]=ba;a[2]=la;a[3]=da;a[4]=oa;a[5]=na;a[6]=qa;a[7]=ua;a[8]=ra;a[9]=va;a[10]=wa;a[11]=ya;a[12]=ca*z+oa*Z+ra*B+c[12];a[13]=ba*z+na*Z+va*B+c[13];a[14]=la*z+qa*Z+wa*B+c[14];a[15]=da*z+ua*Z+ya*B+c[15]}return a}function L(a,c,B){const z=B[0],Z=B[1];B=B[2];a[0]=c[0]*z;a[1]=c[1]*z;a[2]=c[2]*z;a[3]=c[3]*z;a[4]=c[4]*Z;a[5]=
c[5]*Z;a[6]=c[6]*Z;a[7]=c[7]*Z;a[8]=c[8]*B;a[9]=c[9]*B;a[10]=c[10]*B;a[11]=c[11]*B;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function v(a,c,B,z){let Z=z[0],ca=z[1];z=z[2];let ba=Math.sqrt(Z*Z+ca*ca+z*z);var la=void 0,da=void 0;let oa=void 0,na=void 0,qa=void 0,ua=void 0,ra=void 0,va=void 0,wa=void 0,ya=void 0,Ga=void 0,za=void 0,Ba=void 0,Da=void 0,Ea=void 0,La=void 0,Ia=void 0,Ca=void 0,Oa=void 0,Pa=void 0,Sa=void 0,Qa=void 0;da=la=void 0;if(ba<ea.EPSILON)return null;ba=1/ba;Z*=ba;
ca*=ba;z*=ba;la=Math.sin(B);da=Math.cos(B);oa=1-da;na=c[0];qa=c[1];ua=c[2];ra=c[3];va=c[4];wa=c[5];ya=c[6];Ga=c[7];za=c[8];Ba=c[9];Da=c[10];Ea=c[11];La=Z*Z*oa+da;Ia=ca*Z*oa+z*la;Ca=z*Z*oa-ca*la;Oa=Z*ca*oa-z*la;Pa=ca*ca*oa+da;Sa=z*ca*oa+Z*la;Qa=Z*z*oa+ca*la;la=ca*z*oa-Z*la;da=z*z*oa+da;a[0]=na*La+va*Ia+za*Ca;a[1]=qa*La+wa*Ia+Ba*Ca;a[2]=ua*La+ya*Ia+Da*Ca;a[3]=ra*La+Ga*Ia+Ea*Ca;a[4]=na*Oa+va*Pa+za*Sa;a[5]=qa*Oa+wa*Pa+Ba*Sa;a[6]=ua*Oa+ya*Pa+Da*Sa;a[7]=ra*Oa+Ga*Pa+Ea*Sa;a[8]=na*Qa+va*la+za*da;a[9]=qa*
Qa+wa*la+Ba*da;a[10]=ua*Qa+ya*la+Da*da;a[11]=ra*Qa+Ga*la+Ea*da;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}function n(a,c,B){const z=Math.sin(B);B=Math.cos(B);const Z=c[4],ca=c[5],ba=c[6],la=c[7],da=c[8],oa=c[9],na=c[10],qa=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=Z*B+da*z;a[5]=ca*B+oa*z;a[6]=ba*B+na*z;a[7]=la*B+qa*z;a[8]=da*B-Z*z;a[9]=oa*B-ca*z;a[10]=na*B-ba*z;a[11]=qa*B-la*z;return a}function b(a,c,B){const z=
Math.sin(B);B=Math.cos(B);const Z=c[0],ca=c[1],ba=c[2],la=c[3],da=c[8],oa=c[9],na=c[10],qa=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=Z*B-da*z;a[1]=ca*B-oa*z;a[2]=ba*B-na*z;a[3]=la*B-qa*z;a[8]=Z*z+da*B;a[9]=ca*z+oa*B;a[10]=ba*z+na*B;a[11]=la*z+qa*B;return a}function d(a,c,B){const z=Math.sin(B);B=Math.cos(B);const Z=c[0],ca=c[1],ba=c[2],la=c[3],da=c[4],oa=c[5],na=c[6],qa=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=
c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=Z*B+da*z;a[1]=ca*B+oa*z;a[2]=ba*B+na*z;a[3]=la*B+qa*z;a[4]=da*B-Z*z;a[5]=oa*B-ca*z;a[6]=na*B-ba*z;a[7]=qa*B-la*z;return a}function e(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function q(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,c,B){let z=B[0],
Z=B[1];B=B[2];let ca=Math.sqrt(z*z+Z*Z+B*B),ba=void 0,la=void 0,da=void 0;if(ca<ea.EPSILON)return null;ca=1/ca;z*=ca;Z*=ca;B*=ca;ba=Math.sin(c);la=Math.cos(c);da=1-la;a[0]=z*z*da+la;a[1]=Z*z*da+B*ba;a[2]=B*z*da-Z*ba;a[3]=0;a[4]=z*Z*da-B*ba;a[5]=Z*Z*da+la;a[6]=B*Z*da+z*ba;a[7]=0;a[8]=z*B*da+Z*ba;a[9]=Z*B*da-z*ba;a[10]=B*B*da+la;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function l(a,c){const B=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=B;a[7]=0;a[8]=0;a[9]=-B;a[10]=
c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function p(a,c){const B=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-B;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=B;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function x(a,c){const B=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=B;a[2]=0;a[3]=0;a[4]=-B;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a,c,B){var z=c[0],Z=c[1],ca=c[2],ba=c[3],la=z+z,da=Z+Z;const oa=ca+ca;c=z*la;const na=
z*da;z*=oa;const qa=Z*da;Z*=oa;ca*=oa;la*=ba;da*=ba;ba*=oa;a[0]=1-(qa+ca);a[1]=na+ba;a[2]=z-da;a[3]=0;a[4]=na-ba;a[5]=1-(c+ca);a[6]=Z+la;a[7]=0;a[8]=z+da;a[9]=Z-la;a[10]=1-(c+qa);a[11]=0;a[12]=B[0];a[13]=B[1];a[14]=B[2];a[15]=1;return a}function k(a,c){const B=P,z=-c[0],Z=-c[1],ca=-c[2],ba=c[3],la=c[4],da=c[5],oa=c[6],na=c[7],qa=z*z+Z*Z+ca*ca+ba*ba;0<qa?(B[0]=2*(la*ba+na*z+da*ca-oa*Z)/qa,B[1]=2*(da*ba+na*Z+oa*z-la*ca)/qa,B[2]=2*(oa*ba+na*ca+la*Z-da*z)/qa):(B[0]=2*(la*ba+na*z+da*ca-oa*Z),B[1]=2*(da*
ba+na*Z+oa*z-la*ca),B[2]=2*(oa*ba+na*ca+la*Z-da*z));h(a,c,B);return a}function m(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a}function y(a,c){const B=c[0],z=c[1],Z=c[2],ca=c[4],ba=c[5],la=c[6],da=c[8],oa=c[9];c=c[10];a[0]=Math.sqrt(B*B+z*z+Z*Z);a[1]=Math.sqrt(ca*ca+ba*ba+la*la);a[2]=Math.sqrt(da*da+oa*oa+c*c);return a}function D(a,c){const B=c[0]+c[5]+c[10];let z=0;0<B?(z=2*Math.sqrt(B+1),a[3]=.25*z,a[0]=(c[6]-c[9])/z,a[1]=(c[8]-c[2])/z,a[2]=(c[1]-c[4])/z):c[0]>c[5]&&c[0]>c[10]?(z=2*Math.sqrt(1+
c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/z,a[0]=.25*z,a[1]=(c[1]+c[4])/z,a[2]=(c[8]+c[2])/z):c[5]>c[10]?(z=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/z,a[0]=(c[1]+c[4])/z,a[1]=.25*z,a[2]=(c[6]+c[9])/z):(z=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/z,a[0]=(c[8]+c[2])/z,a[1]=(c[6]+c[9])/z,a[2]=.25*z);return a}function C(a,c,B,z){var Z=c[0],ca=c[1],ba=c[2],la=c[3],da=Z+Z,oa=ca+ca,na=ba+ba;c=Z*da;const qa=Z*oa;Z*=na;const ua=ca*oa;ca*=na;ba*=na;da*=la;oa*=la;la*=na;na=z[0];const ra=z[1];z=z[2];a[0]=
(1-(ua+ba))*na;a[1]=(qa+la)*na;a[2]=(Z-oa)*na;a[3]=0;a[4]=(qa-la)*ra;a[5]=(1-(c+ba))*ra;a[6]=(ca+da)*ra;a[7]=0;a[8]=(Z+oa)*z;a[9]=(ca-da)*z;a[10]=(1-(c+ua))*z;a[11]=0;a[12]=B[0];a[13]=B[1];a[14]=B[2];a[15]=1;return a}function O(a,c,B,z,Z){var ca=c[0],ba=c[1],la=c[2],da=c[3],oa=ca+ca,na=ba+ba,qa=la+la;c=ca*oa;var ua=ca*na,ra=ca*qa;ca=ba*na;ba*=qa;var va=la*qa;la=da*oa;na*=da;const wa=da*qa;var ya=z[0],Ga=z[1];qa=z[2];z=Z[0];da=Z[1];Z=Z[2];oa=(1-(ca+va))*ya;const za=(ua+wa)*ya;ya*=ra-na;ua=(ua-wa)*
Ga;va=(1-(c+va))*Ga;Ga*=ba+la;ra=(ra+na)*qa;ba=(ba-la)*qa;c=(1-(c+ca))*qa;a[0]=oa;a[1]=za;a[2]=ya;a[3]=0;a[4]=ua;a[5]=va;a[6]=Ga;a[7]=0;a[8]=ra;a[9]=ba;a[10]=c;a[11]=0;a[12]=B[0]+z-(oa*z+ua*da+ra*Z);a[13]=B[1]+da-(za*z+va*da+ba*Z);a[14]=B[2]+Z-(ya*z+Ga*da+c*Z);a[15]=1;return a}function R(a,c){var B=c[0],z=c[1],Z=c[2];c=c[3];var ca=B+B,ba=z+z;const la=Z+Z;B*=ca;const da=z*ca;z*=ba;const oa=Z*ca,na=Z*ba;Z*=la;ca*=c;ba*=c;c*=la;a[0]=1-z-Z;a[1]=da+c;a[2]=oa-ba;a[3]=0;a[4]=da-c;a[5]=1-B-Z;a[6]=na+ca;a[7]=
0;a[8]=oa+ba;a[9]=na-ca;a[10]=1-B-z;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function K(a,c,B,z,Z,ca,ba){const la=1/(B-c),da=1/(Z-z),oa=1/(ca-ba);a[0]=2*ca*la;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*ca*da;a[6]=0;a[7]=0;a[8]=(B+c)*la;a[9]=(Z+z)*da;a[10]=(ba+ca)*oa;a[11]=-1;a[12]=0;a[13]=0;a[14]=ba*ca*2*oa;a[15]=0;return a}function A(a,c,B,z,Z){c=1/Math.tan(c/2);let ca=void 0;a[0]=c/B;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=Z&&Infinity!==
Z?(ca=1/(z-Z),a[10]=(Z+z)*ca,a[14]=2*Z*z*ca):(a[10]=-1,a[14]=-2*z);return a}function V(a,c,B,z){const Z=Math.tan(c.upDegrees*Math.PI/180),ca=Math.tan(c.downDegrees*Math.PI/180),ba=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);const la=2/(ba+c),da=2/(Z+ca);a[0]=la;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=da;a[6]=0;a[7]=0;a[8]=-((ba-c)*la*.5);a[9]=(Z-ca)*da*.5;a[10]=z/(B-z);a[11]=-1;a[12]=0;a[13]=0;a[14]=z*B/(B-z);a[15]=0;return a}function ja(a,c,B,z,Z,ca,ba){const la=1/(c-B),da=
1/(z-Z),oa=1/(ca-ba);a[0]=-2*la;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*da;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*oa;a[11]=0;a[12]=(c+B)*la;a[13]=(Z+z)*da;a[14]=(ba+ca)*oa;a[15]=1;return a}function ha(a,c,B,z){let Z=void 0,ca=void 0;var ba=void 0,la=void 0;let da=void 0,oa=void 0;var na=void 0,qa=void 0;let ua=void 0,ra=void 0;const va=c[0],wa=c[1];c=c[2];ba=z[0];la=z[1];z=z[2];na=B[0];qa=B[1];B=B[2];if(Math.abs(va-na)<ea.EPSILON&&Math.abs(wa-qa)<ea.EPSILON&&Math.abs(c-B)<ea.EPSILON)return Y(a);na=va-na;
qa=wa-qa;ua=c-B;ra=1/Math.sqrt(na*na+qa*qa+ua*ua);na*=ra;qa*=ra;ua*=ra;Z=la*ua-z*qa;ca=z*na-ba*ua;ba=ba*qa-la*na;(ra=Math.sqrt(Z*Z+ca*ca+ba*ba))?(ra=1/ra,Z*=ra,ca*=ra,ba*=ra):ba=ca=Z=0;la=qa*ba-ua*ca;da=ua*Z-na*ba;oa=na*ca-qa*Z;(ra=Math.sqrt(la*la+da*da+oa*oa))?(ra=1/ra,la*=ra,da*=ra,oa*=ra):oa=da=la=0;a[0]=Z;a[1]=la;a[2]=na;a[3]=0;a[4]=ca;a[5]=da;a[6]=qa;a[7]=0;a[8]=ba;a[9]=oa;a[10]=ua;a[11]=0;a[12]=-(Z*va+ca*wa+ba*c);a[13]=-(la*va+da*wa+oa*c);a[14]=-(na*va+qa*wa+ua*c);a[15]=1;return a}function H(a,
c,B,z){const Z=c[0],ca=c[1];c=c[2];var ba=z[0];const la=z[1];var da=z[2];z=Z-B[0];let oa=ca-B[1];B=c-B[2];let na=z*z+oa*oa+B*B;0<na&&(na=1/Math.sqrt(na),z*=na,oa*=na,B*=na);let qa=la*B-da*oa;da=da*z-ba*B;ba=ba*oa-la*z;na=qa*qa+da*da+ba*ba;0<na&&(na=1/Math.sqrt(na),qa*=na,da*=na,ba*=na);a[0]=qa;a[1]=da;a[2]=ba;a[3]=0;a[4]=oa*ba-B*da;a[5]=B*qa-z*ba;a[6]=z*da-oa*qa;a[7]=0;a[8]=z;a[9]=oa;a[10]=B;a[11]=0;a[12]=Z;a[13]=ca;a[14]=c;a[15]=1;return a}function F(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function w(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function E(a,c,B){a[0]=c[0]+B[0];a[1]=c[1]+B[1];a[2]=c[2]+B[2];a[3]=c[3]+B[3];a[4]=c[4]+B[4];a[5]=c[5]+B[5];a[6]=c[6]+B[6];a[7]=c[7]+B[7];a[8]=c[8]+B[8];a[9]=c[9]+B[9];a[10]=c[10]+B[10];a[11]=c[11]+B[11];
a[12]=c[12]+B[12];a[13]=c[13]+B[13];a[14]=c[14]+B[14];a[15]=c[15]+B[15];return a}function f(a,c,B){a[0]=c[0]-B[0];a[1]=c[1]-B[1];a[2]=c[2]-B[2];a[3]=c[3]-B[3];a[4]=c[4]-B[4];a[5]=c[5]-B[5];a[6]=c[6]-B[6];a[7]=c[7]-B[7];a[8]=c[8]-B[8];a[9]=c[9]-B[9];a[10]=c[10]-B[10];a[11]=c[11]-B[11];a[12]=c[12]-B[12];a[13]=c[13]-B[13];a[14]=c[14]-B[14];a[15]=c[15]-B[15];return a}function u(a,c,B){a[0]=c[0]*B;a[1]=c[1]*B;a[2]=c[2]*B;a[3]=c[3]*B;a[4]=c[4]*B;a[5]=c[5]*B;a[6]=c[6]*B;a[7]=c[7]*B;a[8]=c[8]*B;a[9]=c[9]*
B;a[10]=c[10]*B;a[11]=c[11]*B;a[12]=c[12]*B;a[13]=c[13]*B;a[14]=c[14]*B;a[15]=c[15]*B;return a}function G(a,c,B,z){a[0]=c[0]+B[0]*z;a[1]=c[1]+B[1]*z;a[2]=c[2]+B[2]*z;a[3]=c[3]+B[3]*z;a[4]=c[4]+B[4]*z;a[5]=c[5]+B[5]*z;a[6]=c[6]+B[6]*z;a[7]=c[7]+B[7]*z;a[8]=c[8]+B[8]*z;a[9]=c[9]+B[9]*z;a[10]=c[10]+B[10]*z;a[11]=c[11]+B[11]*z;a[12]=c[12]+B[12]*z;a[13]=c[13]+B[13]*z;a[14]=c[14]+B[14]*z;a[15]=c[15]+B[15]*z;return a}function N(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&
a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]}function U(a,c){if(a===c)return!0;const B=a[0],z=a[1],Z=a[2],ca=a[3],ba=a[4],la=a[5],da=a[6],oa=a[7],na=a[8],qa=a[9],ua=a[10],ra=a[11],va=a[12],wa=a[13],ya=a[14];a=a[15];const Ga=c[0],za=c[1],Ba=c[2],Da=c[3],Ea=c[4],La=c[5],Ia=c[6],Ca=c[7],Oa=c[8],Pa=c[9],Sa=c[10],Qa=c[11],Ha=c[12],Xa=c[13],Ya=c[14];c=c[15];return Math.abs(B-Ga)<=ea.EPSILON*Math.max(1,
Math.abs(B),Math.abs(Ga))&&Math.abs(z-za)<=ea.EPSILON*Math.max(1,Math.abs(z),Math.abs(za))&&Math.abs(Z-Ba)<=ea.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Ba))&&Math.abs(ca-Da)<=ea.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Da))&&Math.abs(ba-Ea)<=ea.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Ea))&&Math.abs(la-La)<=ea.EPSILON*Math.max(1,Math.abs(la),Math.abs(La))&&Math.abs(da-Ia)<=ea.EPSILON*Math.max(1,Math.abs(da),Math.abs(Ia))&&Math.abs(oa-Ca)<=ea.EPSILON*Math.max(1,Math.abs(oa),Math.abs(Ca))&&Math.abs(na-
Oa)<=ea.EPSILON*Math.max(1,Math.abs(na),Math.abs(Oa))&&Math.abs(qa-Pa)<=ea.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Pa))&&Math.abs(ua-Sa)<=ea.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Sa))&&Math.abs(ra-Qa)<=ea.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Qa))&&Math.abs(va-Ha)<=ea.EPSILON*Math.max(1,Math.abs(va),Math.abs(Ha))&&Math.abs(wa-Xa)<=ea.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Xa))&&Math.abs(ya-Ya)<=ea.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Ya))&&Math.abs(a-c)<=ea.EPSILON*Math.max(1,Math.abs(a),
Math.abs(c))}function T(a){const c=ea.EPSILON,B=a[0],z=a[1],Z=a[2],ca=a[4],ba=a[5],la=a[6],da=a[8],oa=a[9];a=a[10];return Math.abs(1-(B*B+ca*ca+da*da))<=c&&Math.abs(1-(z*z+ba*ba+oa*oa))<=c&&Math.abs(1-(Z*Z+la*la+a*a))<=c}const P=r.create();r=Object.freeze(Object.defineProperty({__proto__:null,copy:X,set:t,identity:Y,transpose:fa,invert:pa,adjoint:ma,determinant:aa,multiply:Q,translate:I,scale:L,rotate:v,rotateX:n,rotateY:b,rotateZ:d,fromTranslation:e,fromScaling:q,fromRotation:g,fromXRotation:l,fromYRotation:p,
fromZRotation:x,fromRotationTranslation:h,fromQuat2:k,getTranslation:m,getScaling:y,getRotation:D,fromRotationTranslationScale:C,fromRotationTranslationScaleOrigin:O,fromQuat:R,frustum:K,perspective:A,perspectiveFromFieldOfView:V,ortho:ja,lookAt:ha,targetTo:H,str:F,frob:w,add:E,subtract:f,multiplyScalar:u,multiplyScalarAndAdd:G,exactEquals:N,equals:U,isOrthoNormal:T,mul:Q,sub:f},Symbol.toStringTag,{value:"Module"}));S.add=E;S.adjoint=ma;S.copy=X;S.determinant=aa;S.equals=U;S.exactEquals=N;S.frob=
w;S.fromQuat=R;S.fromQuat2=k;S.fromRotation=g;S.fromRotationTranslation=h;S.fromRotationTranslationScale=C;S.fromRotationTranslationScaleOrigin=O;S.fromScaling=q;S.fromTranslation=e;S.fromXRotation=l;S.fromYRotation=p;S.fromZRotation=x;S.frustum=K;S.getRotation=D;S.getScaling=y;S.getTranslation=m;S.identity=Y;S.invert=pa;S.isOrthoNormal=T;S.lookAt=ha;S.mat4=r;S.mul=Q;S.multiply=Q;S.multiplyScalar=u;S.multiplyScalarAndAdd=G;S.ortho=ja;S.perspective=A;S.perspectiveFromFieldOfView=V;S.rotate=v;S.rotateX=
n;S.rotateY=b;S.rotateZ=d;S.scale=L;S.set=t;S.str=F;S.sub=f;S.subtract=f;S.targetTo=H;S.translate=I;S.transpose=fa})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(S,r,ea,X,t){function Y(v=L){return[v[0],v[1],v[2],v[3]]}function fa(v,n){v!==n&&(v[0]=n[0],v[1]=n[1],v[2]=n[2],v[3]=n[3]);return v}function pa(v){return X.isNone(v)||v[0]>=v[2]?0:v[2]-v[0]}function ma(v){return v[1]>=v[3]?0:v[3]-v[1]}
function aa(v,n,b){return n>=v[0]&&b>=v[1]&&n<=v[2]&&b<=v[3]}function Q(v){return null!=v&&4===v.length}const I=[Infinity,Infinity,-Infinity,-Infinity],L=[0,0,0,0];S.NEGATIVE_INFINITY=I;S.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];S.UNIT=[0,0,1,1];S.ZERO=L;S.allFinite=function(v){for(let n=0;4>n;n++)if(!isFinite(v[n]))return!1;return!0};S.area=function(v){return pa(v)*ma(v)};S.center=function(v,n=[0,0]){n[0]=(v[0]+v[2])/2;n[1]=(v[1]+v[3])/2;return n};S.clone=function(v){return[v[0],
v[1],v[2],v[3]]};S.contains=function(v,n){return n[0]>=v[0]&&n[2]<=v[2]&&n[1]>=v[1]&&n[3]<=v[3]};S.containsPoint=function(v,n){return aa(v,n[0],n[1])};S.containsPointObject=function(v,n){return aa(v,n.x,n.y)};S.containsPointWithMargin=function(v,n,b){return n[0]>=v[0]-b&&n[1]>=v[1]-b&&n[0]<=v[2]+b&&n[1]<=v[3]+b};S.containsXY=aa;S.containsXYWithMargin=function(v,n,b,d){return n>=v[0]-d&&b>=v[1]-d&&n<=v[2]+d&&b<=v[3]+d};S.copy=fa;S.create=Y;S.distance=function(v,n){const b=(v[1]+v[3])/2,d=Math.max(Math.abs(n[0]-
(v[0]+v[2])/2)-pa(v)/2,0);v=Math.max(Math.abs(n[1]-b)-ma(v)/2,0);return Math.sqrt(d*d+v*v)};S.empty=function(v){return v?fa(v,I):Y(I)};S.equals=function(v,n){return Q(v)&&Q(n)?v[0]===n[0]&&v[1]===n[1]&&v[2]===n[2]&&v[3]===n[3]:v===n};S.expand=function(v,n,b){if(X.isNone(n))fa(b,v);else if("length"in n)if(Q(n))b[0]=Math.min(v[0],n[0]),b[1]=Math.min(v[1],n[1]),b[2]=Math.max(v[2],n[2]),b[3]=Math.max(v[3],n[3]);else{if(2===n.length||3===n.length)b[0]=Math.min(v[0],n[0]),b[1]=Math.min(v[1],n[1]),b[2]=
Math.max(v[2],n[0]),b[3]=Math.max(v[3],n[1])}else switch(n.type){case "extent":b[0]=Math.min(v[0],n.xmin);b[1]=Math.min(v[1],n.ymin);b[2]=Math.max(v[2],n.xmax);b[3]=Math.max(v[3],n.ymax);break;case "point":b[0]=Math.min(v[0],n.x),b[1]=Math.min(v[1],n.y),b[2]=Math.max(v[2],n.x),b[3]=Math.max(v[3],n.y)}};S.expandPointInPlace=function(v,n){n[0]<v[0]&&(v[0]=n[0]);n[0]>v[2]&&(v[2]=n[0]);n[1]<v[1]&&(v[1]=n[1]);n[1]>v[3]&&(v[3]=n[1])};S.expandWithNestedArray=function(v,n,b=v){const d=n.length;let e=v[0],
q=v[1],g=v[2];v=v[3];for(let l=0;l<d;l++){const p=n[l];e=Math.min(e,p[0]);q=Math.min(q,p[1]);g=Math.max(g,p[0]);v=Math.max(v,p[1])}b[0]=e;b[1]=q;b[2]=g;b[3]=v;return b};S.fromExtent=function(v,n=Y()){n[0]=v.xmin;n[1]=v.ymin;n[2]=v.xmax;n[3]=v.ymax;return n};S.fromValues=function(v,n,b,d,e=Y()){e[0]=v;e[1]=n;e[2]=b;e[3]=d;return e};S.height=ma;S.intersection=function(v,n,b){if(X.isNone(n))return fa(b,v);const d=n[0],e=n[1],q=n[2];n=n[3];b[0]=ea.clamp(v[0],d,q);b[1]=ea.clamp(v[1],e,n);b[2]=ea.clamp(v[2],
d,q);b[3]=ea.clamp(v[3],e,n);return b};S.intersects=function(v,n){return Math.max(n[0],v[0])<=Math.min(n[2],v[2])&&Math.max(n[1],v[1])<=Math.min(n[3],v[3])};S.intersectsSegment=function(v,n,b){const d=v[0],e=v[1],q=v[2];v=v[3];const {x:g,y:l}=n,{x:p,y:x}=b;var h=(m,y)=>0>(x-l)*m+(g-p)*y+(p*l-g*x);n=h(d,v);b=h(q,v);const k=h(q,e);h=h(d,e);return n===b&&b===k&&k===h&&h===n||g<d&&p<d||g>q&&p>q||l>v&&x>v||l<e&&x<e?!1:!0};S.intersectsSphere=function(v,n){const b=n[3];var d=Math.abs(n[0]-.5*(v[0]+v[2]));
const e=.5*(v[2]-v[0]);if(d>b+e)return!1;var q=.5*(v[3]-v[1]);v=Math.abs(n[1]-.5*(v[1]+v[3]));if(v>b+q)return!1;if(d<e||v<q)return!0;d-=e;q=v-q;return d*d+q*q<=b*b};S.is=Q;S.isPoint=function(v){return(0===pa(v)||!isFinite(v[0]))&&(0===ma(v)||!isFinite(v[1]))};S.offset=function(v,n,b,d=v){d[0]=v[0]+n;d[1]=v[1]+b;d[2]=v[2]+n;d[3]=v[3]+b;return d};S.pad=function(v,n,b=v){b[0]=v[0]-n;b[1]=v[1]-n;b[2]=v[2]+n;b[3]=v[3]+n;return b};S.setMax=function(v,n,b=v){b[2]=n[0];b[3]=n[1];b!==v&&(b[0]=v[0],b[1]=v[1]);
return v};S.setMin=function(v,n,b=v){b[0]=n[0];b[1]=n[1];b!==v&&(b[2]=v[2],b[3]=v[3]);return b};S.size=function(v,n){n[0]=v[2]-v[0];n[1]=v[3]-v[1]};S.toExtent=function(v,n){return new t({xmin:v[0],ymin:v[1],xmax:v[2],ymax:v[3],spatialReference:n})};S.width=pa;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(S,r){const ea=Math.PI/180;var X=r.earth.radius;const t=
r.earth.eccentricitySquared;X={a1:X*t,a2:X*t*X*t,a3:X*t*t/2,a4:X*t*X*t*2.5,a5:X*t+X*t*t/2,a6:1-t};r={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:r.earth.radius,f:r.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:r.moon.radius,f:r.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:r.mars.radius,f:r.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,
f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,
f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},
104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:r.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};S.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;S.earthEllipsoidConstants=X;S.spheroids=
r;S.toRadians=ea;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(S,r,ea,X){S.getGeometryZScaler=function(t,Y,fa){if(r.isNone(Y)||r.isNone(fa)||fa.vcsWkid||X.equals(Y,fa))return null;Y=ea.getMetersPerVerticalUnitForSR(Y);fa=ea.getMetersPerVerticalUnitForSR(fa);const pa=Y/fa;if(1===pa)return null;switch(t){case "point":case "esriGeometryPoint":return ma=>
{ma&&null!=ma.z&&(ma.z*=pa)};case "polyline":case "esriGeometryPolyline":return ma=>{if(ma)for(const aa of ma.paths)for(const Q of aa)2<Q.length&&(Q[2]*=pa)};case "polygon":case "esriGeometryPolygon":return ma=>{if(ma)for(const aa of ma.rings)for(const Q of aa)2<Q.length&&(Q[2]*=pa)};case "multipoint":case "esriGeometryMultipoint":return ma=>{if(ma)for(const aa of ma.points)2<aa.length&&(aa[2]*=pa)};case "extent":case "esriGeometryExtent":return ma=>{ma&&null!=ma.zmin&&null!=ma.zmax&&(ma.zmin*=pa,
ma.zmax*=pa)};default:return null}};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe"],function(S,r){function ea(aa,Q=256){Q=Math.min(Q,256);const {size:I,counts:L}=aa;aa=new Uint8Array(I);var v=L.reduce((q,g)=>q+g/Q,0);let n=0;var b=0;let d=0,e=v;for(let q=0;q<I;q++)if(d+=L[q],!(q<I-1&&d+L[q+1]<e)){for(;n<Q-1&&e<d;)n++,e+=v;for(;b<=q;b++)aa[b]=n;b=q+1}for(v=
b;v<I;v++)aa[v]=Q-1;return aa}function X(aa,Q){aa=Math.min(Math.max(aa,-100),100);Q=Math.min(Math.max(Q,-100),100);let I,L;const v=new Uint8Array(256);for(I=0;256>I;I++)0<aa&&100>aa?L=(200*I-25500+510*Q)/(2*(100-aa))+128:0>=aa&&-100<aa?L=(200*I-25500+510*Q)*(100+aa)/2E4+128:100===aa?(L=200*I-25500+256*(100-aa)+510*Q,L=0<L?255:0):-100===aa&&(L=128),v[I]=255<L?255:0>L?0:L;return v}function t(aa){if(0>=aa||255<=aa)return 1;var Q=0;150!==aa&&(Q=150>=aa?45*Math.cos(.01047*aa):17*Math.sin(.021*aa));Q=Math.log((aa+
Q)/255);if(0===Q)return 1;aa=Math.log(aa/255)/Q;return isNaN(aa)?1:Math.min(9.9,Math.max(.01,aa))}function Y(aa){var Q;if(r.isNone(aa)||null==(Q=aa.pixels)||!Q.length)return null;aa.statistics||aa.updateStatistics();const {pixels:I,mask:L,pixelType:v,statistics:n}=aa;aa=aa.width*aa.height;Q=I.length;let b,d;let e;var q;const g=[],l=[];for(e=0;e<Q;e++){var p=new Uint32Array(256);var x=I[e];if("u8"===v)if(b=-.5,d=255.5,L)for(q=0;q<aa;q++)L[q]&&p[x[q]]++;else for(q=0;q<aa;q++)p[x[q]]++;else{b=n[e].minValue;
d=n[e].maxValue;var h=(d-b)/256;var k=new Uint32Array(257);if(L)for(q=0;q<aa;q++)L[q]&&k[Math.floor((x[q]-b)/h)]++;else for(q=0;q<aa;q++)k[Math.floor((x[q]-b)/h)]++;for(q=0;255>q;q++)p[q]=k[q];p[255]=k[255]+k[256]}g.push({min:b,max:d,size:256,counts:p});for(q=x=k=h=0;256>q;q++)h+=p[q],k+=q*p[q];k/=h;for(q=0;256>q;q++)x+=p[q]*(q-k)**2;p=Math.sqrt(x/(h-1));h=(d-b)/256;q=(k+.5)*h+b;p*=h;l.push({min:b,max:d,avg:q,stddev:p})}return{statistics:l,histograms:g}}function fa(aa,Q){if(null==Q||0===Q.length)return aa;
const I=Math.max.apply(null,Q),{minCutOff:L,maxCutOff:v,outMin:n,outMax:b,histogramLut:d}=aa;return L.length===Q.length||L.length<=I?aa:{minCutOff:Q.map(e=>L[e]),maxCutOff:Q.map(e=>v[e]),histogramLut:d?Q.map(e=>d[e]):null,outMin:n,outMax:b}}const pa={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ma=[.299,.587,.114];S.computeGammaValues=function(aa,
Q,I){const L=[];for(let n=0;n<Q.length;n++){let b=0,d=0;var v=0;"min"in Q[n]?{min:b,max:d,avg:v}=Q[n]:[b,d,v]=Q[n];"u8"!==aa&&(v=255*(v-b)/(d-b));I&&(v*=ma[n]);L.push(t(v))}return L};S.createContrastBrightnessLUT=X;S.createHistogramEqualizationLUT=ea;S.createStretchLUT=function(aa){const {minCutOff:Q,maxCutOff:I,gamma:L,pixelType:v}=aa,n=aa.outMin||0,b=aa.outMax||255;if(!["u8","u16","s8","s16"].includes(v))return null;const d=Q.length;let e;let q=0;"s8"===v?q=-127:"s16"===v&&(q=-32767);let g=256;
["u16","s16"].includes(v)&&(g=65536);const l=[],p=b-n;for(e=0;e<d;e++)l[e]=I[e]-Q[e],p/(I[e]-Q[e]);var x=L&&L.length>=d;const h=[];if(x)for(e=0;e<d;e++)h[e]=1<L[e]?2<L[e]?6.5+(L[e]-2)**2.5:6.5+100*(2-L[e])**4:1;let k;const m=[];let y,D,C;if(x)for(e=0;e<d;e++){C=[];for(x=0;x<g;x++)y=x+q,k=(y-Q[e])/l[e],D=1,1<L[e]&&(D-=(1/p)**(k*h[e])),C[x]=y<I[e]&&y>Q[e]?Math.floor(D*p*k**(1/L[e]))+n:y>=I[e]?b:n;m[e]=C}else for(e=0;e<d;e++){C=[];for(x=0;x<g;x++)y=x+q,C[x]=y<=Q[e]?n:y>=I[e]?b:Math.floor((y-Q[e])/l[e]*
p)+n;m[e]=C}if(null!=aa.contrastOffset)for(aa=X(aa.contrastOffset,aa.brightnessOffset),e=0;e<d;e++)for(C=m[e],x=0;x<g;x++)C[x]=aa[C[x]];return{lut:m,offset:q}};S.estimateStatisticsFromHistograms=function(aa){const Q=[];for(let n=0;n<aa.length;n++){const {min:b,max:d,size:e,counts:q}=aa[n];let g=0;var I=0;for(var L=0;L<e;L++)g+=q[L],I+=L*q[L];I/=g;L=0;for(var v=0;v<e;v++)L+=q[v]*(v-I)**2;v=(d-b)/e;Q.push({min:b,max:d,avg:(I+.5)*v+b,stddev:Math.sqrt(L/(g-1))*v})}return Q};S.estimateStatisticsHistograms=
Y;S.getStretchCutoff=function(aa,Q){var I,L,v;const {pixelBlock:n,bandIds:b,returnHistogramLut:d,rasterInfo:e}=Q;Q=aa.stretchType;if(aa.dra)if("minMax"===Q&&r.isSome(n)&&n.statistics)var q=n.statistics.map(D=>[D.minValue,D.maxValue,0,0]);else{var g=Y(n);q=r.isSome(g)?g.statistics:null;g=r.isSome(g)?g.histograms:null}else{var l;q=0<(null==(l=aa.statistics)?void 0:l.length)?aa.statistics:r.unwrap(e.statistics);g=aa.histograms||r.unwrap(e.histograms)}"percentClip"!==Q&&"histogramEqualization"!==Q||null!=
(I=g)&&I.length||(Q="minMax");l=(null==(L=q)?void 0:L.length)||(null==(v=g)?void 0:v.length)||e.bandCount;L=[];v=[];let p;let x,h,k;q&&!Array.isArray(q[0])&&(q=q.map(D=>[D.min,D.max,D.avg,D.stddev]));switch(Q){case "none":q=pa[e.pixelType]||pa.f32;for(I=0;I<l;I++)L[I]=q[0],v[I]=q[1];break;case "minMax":for(I=0;I<l;I++)L[I]=q[I][0],v[I]=q[I][1];break;case "standardDeviation":for(I=0;I<l;I++)L[I]=q[I][2]-aa.numberOfStandardDeviations*q[I][3],v[I]=q[I][2]+aa.numberOfStandardDeviations*q[I][3],L[I]<q[I][0]&&
(L[I]=q[I][0]),v[I]>q[I][1]&&(v[I]=q[I][1]);break;case "histogramEqualization":for(I=0;I<l;I++)L[I]=g[I].min,v[I]=g[I].max;break;case "percentClip":for(I=0;I<g.length;I++){q=g[I];x=new Uint32Array(q.size);var m=[...q.counts];20<=m.length&&(m[0]=m[1]=m[2]=m[m.length-1]=m[m.length-2]=0);p=0;l=(q.max-q.min)/q.size;h=-.5===q.min&&1===l?.5:0;for(k=0;k<q.size;k++)p+=m[k],x[k]=p;m=(aa.minPercent||0)*p/100;for(k=0;k<q.size;k++)if(x[k]>m){L[I]=q.min+l*(k+h);break}m=(1-(aa.maxPercent||0)/100)*p;for(k=q.size-
2;0<=k;k--)if(x[k]<m){v[I]=q.min+l*(k+2-h);break}}break;default:for(I=0;I<l;I++)L[I]=q[I][0],v[I]=q[I][1]}let y;"histogramEqualization"===Q?(Q=g[0].size||256,aa=0,d&&(y=g.map(D=>ea(D)))):(Q=aa.max||255,aa=aa.min||0);return fa({minCutOff:L,maxCutOff:v,outMax:Q,outMin:aa,histogramLut:y},b)};S.stretch=function(aa,Q){var I;if(r.isNone(aa)||null==(I=aa.pixels)||!I.length)return aa;aa=aa.clone();const {pixels:L,mask:v}=aa,{minCutOff:n,maxCutOff:b,gamma:d}=Q;I=Q.outMin||0;Q=Q.outMax||255;const e=aa.width*
aa.height,q=L.length;let g;let l,p,x;const h=Q-I,k=[];for(g=0;g<q;g++)k[g]=b[g]-n[g],h/(b[g]-n[g]);var m=d&&d.length>=q;const y=[];if(m)for(g=0;g<q;g++)y[g]=1<d[g]?2<d[g]?6.5+(d[g]-2)**2.5:6.5+100*(2-d[g])**4:1;if(m)if(null!=v)for(m=0;m<e;m++){if(v[m])for(g=0;g<q;g++)l=L[g][m],x=(l-n[g])/k[g],p=1,1<d[g]&&(p-=(1/h)**(x*y[g])),L[g][m]=l<b[g]&&l>n[g]?Math.floor(p*h*x**(1/d[g]))+I:l>=b[g]?Q:I}else for(m=0;m<e;m++)for(g=0;g<q;g++)l=L[g][m],x=(l-n[g])/k[g],p=1,1<d[g]&&(p-=(1/h)**(x*y[g])),L[g][m]=l<b[g]&&
l>n[g]?Math.floor(p*h*x**(1/d[g]))+I:l>=b[g]?Q:I;else if(null!=v)for(m=0;m<e;m++){if(v[m])for(g=0;g<q;g++)l=L[g][m],L[g][m]=l<b[g]&&l>n[g]?Math.floor((l-n[g])/k[g]*h)+I:l>=b[g]?Q:I}else for(m=0;m<e;m++)for(g=0;g<q;g++)l=L[g][m],L[g][m]=l<b[g]&&l>n[g]?Math.floor((l-n[g])/k[g]*h)+I:l>=b[g]?Q:I;aa.pixelType="u8";aa.updateStatistics();return aa};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports",
"../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(S,r,ea,X,t){function Y(h,k){return b.get(h)/b.get(k)||1}function fa(h,k="geographic"){const [m,y]=h;h=Math.sqrt(m*m+y*y);let D=Math.atan2(y,m)*d;D=(360+D)%360;"geographic"===k&&(D=(450-D)%360);return[h,D]}function pa(h,k="geographic"){let m=h[1];"geographic"===k&&(m=(450-m)%360);m%=360;h=h[0];return[h*Math.cos(m/d),h*Math.sin(m/d)]}function ma(h,k,m="geographic",y=1){if(!t.isValidPixelBlock(h))return h;const {pixels:D,
width:C,height:O}=h;var R=C*O;const K=D[0],A=D[1],V=h.pixelType.startsWith("f")?h.pixelType:"f32",ja=X.createEmptyBand(V,R);R=X.createEmptyBand(V,R);let ha=0;for(let H=0;H<O;H++)for(let F=0;F<C;F++)"vector-uv"===k?([ja[ha],R[ha]]=fa([K[ha],A[ha]],m),ja[ha]*=y):([ja[ha],R[ha]]=pa([K[ha],A[ha]],m),ja[ha]*=y,R[ha]*=y),ha++;h=new X({pixelType:V,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:[ja,R]});h.updateStatistics();return h}function aa(h=
0,k=Math.PI,m=!0){m&&(k=(2*Math.PI-k)%(2*Math.PI));var y=m?-1:1;m=5*y;const D=20*y,C=25*y;y*=2;let [O,R]=[5,0-D],[K,A]=[O+2,R],[V,ja]=[K-0,A+y],[ha,H]=[-5,0-C],[F,w]=[ha+0,H-y];h=Math.ceil(h/5);let E=Math.floor(h/10);h-=8*E;const f=[],u=[];for(let z=0;z<h/2;z++,E--){0>=E&&1===h%2&&z===(h-1)/2&&(ha=0,F=ha+0,H=(H+R)/2,w=H-y);const [Z,ca]=Q(ha,H,k,45);if(0<E){const [ba,la]=Q(K,H,k,45),[da,oa]=Q(O,R,k,45);f.push(ba);f.push(la);f.push(Z);f.push(ca);f.push(da);f.push(oa)}else{const [ba,la]=Q(K,A,k,45),
[da,oa]=Q(V,ja,k,45),[na,qa]=Q(F,w,k,45);u.push(Z);u.push(ca);u.push(na);u.push(qa);u.push(da);u.push(oa);u.push(ba);u.push(la)}H+=m;R+=m;A+=m;ja+=m;w+=m}const [G,N]=Q(5,0+D,k,45),[U,T]=Q(7,0+D,k,45),[P,a]=Q(5,0-C,k,45),[c,B]=Q(7,0-C,k,45);return{pennants:f,barbs:u,shaft:[G,N,U,T,P,a,c,B]}}function Q(h,k,m,y=1){return[Math.sqrt(h*h+k*k)/y,(2*Math.PI+(2*Math.PI+Math.atan2(k,h))%(2*Math.PI)-m)%(2*Math.PI)]}function I(h,k,m,y){m=Y(y||"knots",m);for(y=1;y<k.length;y++)if(y===k.length-1){if(h<k[y]*m)break}else if(h<=
k[y]*m)break;return Math.min(y-1,k.length-2)}function L(h,k,m,y,D){let C=0;switch(k){case "beaufort_kn":C=I(h,g,"knots",m);break;case "beaufort_km":C=I(h,g,"kilometer-per-hour",m);break;case "beaufort_ft":C=I(h,g,"feet-per-second",m);break;case "beaufort_m":C=I(h,g,"meter-per-second",m);break;case "classified_arrow":C=I(h,D,y,m);break;case "ocean_current_m":C=I(h,l,"meter-per-second",m);break;case "ocean_current_kn":C=I(h,p,"knots",m)}return C}function v(h,k){const {style:m,inputUnit:y,outputUnit:D,
breakValues:C}=k;k=e.fromJSON(y);const O=e.fromJSON(D);let R=0,K=0;const {width:A,height:V,mask:ja}=h,ha=h.pixels[0];h=h.pixels[1];var H=ja?ja.filter(f=>0<f).length:A*V;const F=new Float32Array(42*H);H=new Uint32Array(15*H);for(let f=0;f<V;f++)for(let u=0;u<A;u++){var w=f*A+u;if(!ja||ja[f*A+u]){var E;const G=null!=(E=(h[w]+360)%360/180*Math.PI)?E:2*Math.PI*Math.random(),N=L(ha[w],m,k,O,C);for(let U=0;U<q.length;U+=2)F[R++]=(u+.5)/A,F[R++]=(f+.5)/V,F[R++]=q[U],F[R++]=q[U+1]+G,F[R++]=N,F[R++]=ha[w];
w=7*(R/42-1);H[K++]=w;H[K++]=w+1;H[K++]=w+2;H[K++]=w+0;H[K++]=w+4;H[K++]=w+3;H[K++]=w+0;H[K++]=w+2;H[K++]=w+3;H[K++]=w+2;H[K++]=w+5;H[K++]=w+3;H[K++]=w+5;H[K++]=w+6;H[K++]=w+3}}return{vertexData:F,indexData:H}}function n(h,k){let m=0,y=0;const {width:D,height:C,mask:O}=h;h=h.pixels[0];const R=[],K=[];var A=e.fromJSON(k.inputUnit);A=Y(A,"knots");k="wind_speed"===k.style?5:Number.MAX_VALUE;for(let ja=0;ja<C;ja++)for(let ha=0;ha<D;ha++){var V=h[ja*D+ha]*A;if((!O||O[ja*D+ha])&&V<k){for(let H=0;4>H;H++)R[m++]=
(ha+.5)/D,R[m++]=(ja+.5)/C,R[m++]=2>H?-.5:.5,R[m++]=0===H%2?-.5:.5,R[m++]=0,R[m++]=V;V=4*(m/24-1);K[y++]=V;K[y++]=V+1;K[y++]=V+2;K[y++]=V+1;K[y++]=V+2;K[y++]=V+3}}return{vertexData:new Float32Array(R),indexData:new Uint32Array(K)}}const b=new Map;b.set("meter-per-second",1);b.set("kilometer-per-hour",.277778);b.set("knots",.514444);b.set("feet-per-second",.3048);b.set("mile-per-hour",.44704);const d=180/Math.PI,e=new r.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",
esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),q=function(h=0,k=0,m=Math.PI,y=!0){y&&(m=(2*Math.PI-m)%(2*Math.PI));y=y?-1:1;const D=-7*y,C=-2*y,O=-16*y,[R,K]=Q(0,k+13*y,m,21.75),[A,V]=Q(h-5.5,k+D,m,21.75),[ja,ha]=Q(h+5.5,k+D,m,21.75),[H,F]=Q(h-1.5,k+C,m,21.75),[w,E]=Q(h+1.5,k+C,m,21.75),[f,u]=Q(h-1.5,k+O,m,21.75),[G,N]=Q(h+1.5,k+O,m,21.75);return[R,K,A,V,H,F,w,E,ja,ha,f,u,G,N]}(0,0,0),g=[0,1,3,6,10,16,21,27,33,40,47,55,63],l=[0,.5,1,1.5,2],p=[0,.25,.5,1,1.5,
2,2.5,3,3.5,4],x=[];S.convertToLocalDirections=function(h,k,m,y="geographic"){if(!t.isValidPixelBlock(h)||ea.isNone(m))return h;h="vector-magdir"===k?h.clone():ea.unwrap(ma(h,k));const D=h.pixels[1];for(let C=0;C<D.length;C++)D[C]="geographic"===y?(D[C]+m[C]+270)%360:(D[C]+360-m[C])%360;return"vector-magdir"===k?h:ma(h,"vector-magdir")};S.convertVectorFieldData=ma;S.convertVectorFieldUnit=function(h,k,m=1){if(1===m||!t.isValidPixelBlock(h))return h;h=h.clone();const {pixels:y,width:D,height:C}=h,
O=y[0],R=y[1];let K=0;for(let A=0;A<C;A++)for(let V=0;V<D;V++)"vector-uv"===k?(O[K]*=m,R[K]*=m):O[K]*=m,K++;h.updateStatistics();return h};S.createVFMesh=function(h,k){if("simple_scalar"===k.style)var m=n(h,k);else if("wind_speed"===k.style){{if(0===x.length)for(var y=0;30>y;y++)x.push(aa(5*y,0));k=e.fromJSON(k.inputUnit);k=Y(k,"knots");const {width:R,height:K,mask:A}=h;y=h.pixels[0];h=h.pixels[1];const V=[],ja=[];let ha=0,H=0;for(let F=0;F<K;F++)for(let w=0;w<R;w++){var D=F*R+w,C=y[D]*k;if((!A||
A[F*R+w])&&5<=C){const E=null!=(m=(h[D]+360)%360/180*Math.PI)?m:2*Math.PI*Math.random(),{pennants:f,barbs:u,shaft:G}=x[Math.min(Math.floor(C/5),29)];if(0===f.length+u.length)continue;D=V.length/6;const N=(w+.5)/R,U=(F+.5)/K;for(var O=0;O<f.length;O+=2)V[ha++]=N,V[ha++]=U,V[ha++]=f[O],V[ha++]=f[O+1]+E,V[ha++]=0,V[ha++]=C;for(O=0;O<u.length;O+=2)V[ha++]=N,V[ha++]=U,V[ha++]=u[O],V[ha++]=u[O+1]+E,V[ha++]=0,V[ha++]=C;for(O=0;O<G.length;O+=2)V[ha++]=N,V[ha++]=U,V[ha++]=G[O],V[ha++]=G[O+1]+E,V[ha++]=0,V[ha++]=
C;for(C=0;C<f.length/6;C++)ja[H++]=D,ja[H++]=D+1,ja[H++]=D+2,D+=3;for(C=0;C<u.length/8;C++)ja[H++]=D,ja[H++]=D+1,ja[H++]=D+2,ja[H++]=D+1,ja[H++]=D+2,ja[H++]=D+3,D+=4;ja[H++]=D+0;ja[H++]=D+1;ja[H++]=D+2;ja[H++]=D+1;ja[H++]=D+3;ja[H++]=D+2;D+=4}}m={vertexData:new Float32Array(V),indexData:new Uint32Array(ja)}}}else m=v(h,k);return m};S.createVFMeshScalar=n;S.getUnitConversionFactor=Y;S.sampleVectorField=function(h,k,m,y=[0,0],D=.5){const {width:C,height:O,mask:R}=h,[K,A]=h.pixels,[V,ja]=y;h=Math.round((C-
V)/m);y=Math.round((O-ja)/m);var ha=h*y;const H=new Float32Array(ha),F=new Float32Array(ha);ha=new Uint8Array(ha);k="vector-uv"===k;for(let E=0;E<y;E++)for(let f=0;f<h;f++){let u=0;const G=E*h+f,N=Math.max(0,E*m+ja),U=Math.max(0,f*m+V),T=Math.min(O,N+m),P=Math.min(C,U+m);for(let a=N;a<T;a++)for(let c=U;c<P;c++){var w=a*C+c;if(!R||R[w]){u++;w=k?[K[w],A[w]]:[K[w],(360+A[w])%360];const [B,z]=k?w:pa(w);H[G]+=B;F[G]+=z}}if(u>=(T-N)*(P-U)*(1-D)){ha[G]=1;const [a,c]=fa([H[G]/u,F[G]/u]);H[G]=a;F[G]=c}else ha[G]=
0,H[G]=0,F[G]=0}m=new X({width:h,height:y,pixels:[H,F],mask:ha});m.updateStatistics();return m};S.snapImageToSymbolTile=function(h,k,m,y,D){if(ea.isNone(D)||!D.spatialReference.equals(h.spatialReference))return{extent:h,width:Math.round(k/y),height:Math.round(m/y),resolution:h.width/k};const C=D.xmin;D=D.ymax;k=(h.xmax-h.xmin)/k*y;m=(h.ymax-h.ymin)/m*y;h.xmin=C+Math.floor((h.xmin-C)/k)*k;h.xmax=C+Math.ceil((h.xmax-C)/k)*k;h.ymin=D+Math.floor((h.ymin-D)/m)*m;h.ymax=D+Math.ceil((h.ymax-D)/m)*m;return{extent:h,
width:Math.round(h.width/k),height:Math.round(h.height/m),resolution:(k+m)/2}};S.unitKebabDict=e;S.uvComponentToVector=fa;Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(S,r,ea,X){const t={GCSShiftXform:r,IdentityXform:ea,PolynomialXform:X},Y=Object.keys(t);S.isTransformSupported=function(fa){const pa=null==
fa?void 0:fa.type;return!fa||Y.includes(pa)};S.readTransform=function(fa){if(null==fa||!fa.type)return null;var pa=t[null==fa?void 0:fa.type];return pa?(pa=new pa,pa.read(fa),pa):null};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma){X=function(aa){function Q(){var L=aa.apply(this,arguments)||this;L.type="gcs-shift";L.tolerance=1E-8;return L}S._inheritsLoose(Q,aa);var I=Q.prototype;I.forwardTransform=function(L){L=L.clone();if("point"===L.type)return L.x>180+this.tolerance&&(L.x-=360),L;L.xmin>=180-this.tolerance?(L.xmax-=360,L.xmin-=360):L.xmax>180+this.tolerance&&(L.xmin=-180,L.xmax=180);return L};I.inverseTransform=function(L){L=L.clone();if("point"===L.type)return L.x<-this.tolerance&&(L.x+=
360),L;L.xmin<-this.tolerance&&(L.xmin+=360,L.xmax+=360);return L};return Q}(ma);r.__decorate([fa.enumeration({GCSShiftXform:"gcs-shift"})],X.prototype,"type",void 0);r.__decorate([ea.property()],X.prototype,"tolerance",void 0);return X=r.__decorate([pa.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],X)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(S,r,ea){S.enumeration=function(X,t={}){var Y;X=X instanceof
r.JSONMap?X:new r.JSONMap(X,t);X={type:(null!=(Y=null==t?void 0:t.ignoreUnknown)?Y:1)?X.apiValues:String,json:{type:X.jsonValues,read:null!=t&&t.readOnly?!1:{reader:X.read},write:{writer:X.write}}};void 0!==(null==t?void 0:t.readOnly)&&(X.readOnly=!!t.readOnly);void 0!==(null==t?void 0:t.default)&&(X.json.default=t.default);void 0!==(null==t?void 0:t.name)&&(X.json.name=t.name);return ea.property(X)};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(S,r,ea,X,t,Y,fa,pa){ea=function(ma){function aa(){return ma.apply(this,arguments)||this}S._inheritsLoose(aa,ma);var Q=aa.prototype;Q.forwardTransform=function(I){return I};Q.inverseTransform=function(I){return I};S._createClass(aa,[{key:"affectsPixelSize",get:function(){return!1}}]);return aa}(ea.JSONSupport);r.__decorate([X.property()],ea.prototype,"affectsPixelSize",null);r.__decorate([X.property({json:{write:!0}})],ea.prototype,"spatialReference",void 0);return ea=r.__decorate([pa.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
ea)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(S,r,ea,X,t,Y,fa,pa,ma,aa){ea=function(Q){function I(){var L=Q.apply(this,
arguments)||this;L.type="identity";return L}S._inheritsLoose(I,Q);return I}(aa);r.__decorate([pa.enumeration({IdentityXform:"identity"})],ea.prototype,"type",void 0);return ea=r.__decorate([ma.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],ea)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I,L,v){function n(d,e,q){const {x:g,y:l}=e;if(2>q)return{x:d[0]+g*d[2]+l*d[4],y:d[1]+g*d[3]+l*d[5]};if(2===q){e=g*g;q=l*l;var p=g*l;return{x:d[0]+g*d[2]+l*d[4]+e*d[6]+p*d[8]+q*d[10],y:d[1]+g*d[3]+l*d[5]+e*d[7]+p*d[9]+q*d[11]}}e=g*g;q=l*l;p=g*l;const x=e*g,h=e*l,k=g*q,m=l*q;return{x:d[0]+g*d[2]+l*d[4]+e*d[6]+p*d[8]+q*d[10]+x*d[12]+h*d[14]+k*d[16]+m*d[18],y:d[1]+g*d[3]+l*d[5]+e*d[7]+p*d[9]+q*d[11]+x*d[13]+h*d[15]+k*d[17]+m*d[19]}}function b(d,e,q){const {xmin:g,ymin:l,
xmax:p,ymax:x,spatialReference:h}=e;e=[];if(2>q)e.push({x:g,y:x}),e.push({x:p,y:x}),e.push({x:g,y:l}),e.push({x:p,y:l});else{var k=10;for(var m=0;m<k;m++)e.push({x:g,y:l+(x-l)*m/(k-1)}),e.push({x:p,y:l+(x-l)*m/(k-1)});k=8;for(m=1;m<=k;m++)e.push({x:g+(p-g)*m/k,y:l}),e.push({x:g+(p-g)*m/k,y:x})}e=e.map(y=>n(d,y,q));k=e.map(y=>y.x);e=e.map(y=>y.y);return new v({xmin:Math.min.apply(null,k),xmax:Math.max.apply(null,k),ymin:Math.min.apply(null,e),ymax:Math.max.apply(null,e),spatialReference:h})}ea=function(d){function e(){var g=
d.apply(this,arguments)||this;g.polynomialOrder=1;g.type="polynomial";return g}S._inheritsLoose(e,d);var q=e.prototype;q.readForwardCoefficients=function(g,l){const {coeffX:p,coeffY:x}=l;if(null==p||!p.length||null==x||!x.length||p.length!==x.length)return null;g=[];for(l=0;l<p.length;l++)g.push(p[l]),g.push(x[l]);return g};q.writeForwardCoefficients=function(g,l,p){p=[];const x=[];for(let h=0;h<(null==g?void 0:g.length);h++)0===h%2?p.push(g[h]):x.push(g[h]);l.coeffX=p;l.coeffY=x};q.readInverseCoefficients=
function(g,l){const {inverseCoeffX:p,inverseCoeffY:x}=l;if(null==p||!p.length||null==x||!x.length||p.length!==x.length)return null;g=[];for(l=0;l<p.length;l++)g.push(p[l]),g.push(x[l]);return g};q.writeInverseCoefficients=function(g,l,p){p=[];const x=[];for(let h=0;h<(null==g?void 0:g.length);h++)0===h%2?p.push(g[h]):x.push(g[h]);l.inverseCoeffX=p;l.inverseCoeffY=x};q.forwardTransform=function(g){if("point"===g.type){const l=n(this.forwardCoefficients,g,this.polynomialOrder);return new L({x:l.x,y:l.y,
spatialReference:g.spatialReference})}return b(this.forwardCoefficients,g,this.polynomialOrder)};q.inverseTransform=function(g){if("point"===g.type){const l=n(this.inverseCoefficients,g,this.polynomialOrder);return new L({x:l.x,y:l.y,spatialReference:g.spatialReference})}return b(this.inverseCoefficients,g,this.polynomialOrder)};S._createClass(e,[{key:"inverseCoefficients",get:function(){var g=this._get("inverseCoefficients"),l=this._get("forwardCoefficients");if(!g&&l&&2>this.polynomialOrder){{const [p,
x,h,k,m,y]=l;g=h*y-m*k;l=m*k-h*y;g=[(m*x-p*y)/g,(h*x-p*k)/l,y/g,k/l,-m/g,-h/l]}}return g},set:function(g){this._set("inverseCoefficients",g)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return e}(I);r.__decorate([X.property({json:{write:!0}})],ea.prototype,"polynomialOrder",void 0);r.__decorate([X.property()],ea.prototype,"forwardCoefficients",void 0);r.__decorate([ma.reader("forwardCoefficients",["coeffX","coeffY"])],ea.prototype,"readForwardCoefficients",null);r.__decorate([Q.writer("forwardCoefficients")],
ea.prototype,"writeForwardCoefficients",null);r.__decorate([X.property({json:{write:!0}})],ea.prototype,"inverseCoefficients",null);r.__decorate([ma.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],ea.prototype,"readInverseCoefficients",null);r.__decorate([Q.writer("inverseCoefficients")],ea.prototype,"writeInverseCoefficients",null);r.__decorate([X.property()],ea.prototype,"affectsPixelSize",null);r.__decorate([pa.enumeration({PolynomialXform:"polynomial"})],ea.prototype,"type",void 0);
return ea=r.__decorate([aa.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],ea)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I,L,v,n,b){function d(l,p){const {attributeTable:x,bandCount:h}=l;return Y.isNone(x)||1<h||p&&null==x.fields.find(k=>k.name.toLowerCase()===p.toLowerCase())?!1:!0}function e(l){const {bandCount:p,colormap:x}=l;return Y.isSome(x)&&x.length&&1===p}function q(l){return L.isValidPixelBlock(l)&&0!==l.validPixelCount}const g=t.getLogger("esri.renderers.support.RasterSymbolizer");X=function(l){function p(h){return l.call(this,h)||this}S._inheritsLoose(p,l);var x=p.prototype;
x.bind=function(){const {rendererJSON:h}=this;if(!h)return{success:!1};this.lookup={rendererJSON:{}};let k;switch(h.type){case "uniqueValue":k=this._updateUVRenderer(h);break;case "rasterColormap":k=this._updateColormapRenderer(h);break;case "rasterStretch":k=this._updateStretchRenderer(h);break;case "classBreaks":k=this._updateClassBreaksRenderer(h);break;case "rasterShadedRelief":k=this._updateShadedReliefRenderer(h);break;case "vectorField":k=this._updateVectorFieldRenderer();break;case "flowRenderer":k=
this._updateFlowRenderer()}return k};x.symbolize=function(h){let k=h&&h.pixelBlock;if(!q(k))return k;if(h.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(k,h.simpleStretchParams);try{3<k.pixels.length&&(k=L.extractBands(k,[0,1,2]));let m;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":m=this._symbolizeColormap(k);break;case "classBreaks":m=this._symbolizeClassBreaks(k);break;case "rasterStretch":m=this._symbolizeStretch(k,h.bandIds);
break;case "rasterShadedRelief":({extent:h}=h),m=this._symbolizeShadedRelief(k,{isGCS:h.spatialReference.isGeographic,resolution:{x:(h.xmax-h.xmin)/k.width,y:(h.ymax-h.ymin)/k.height}})}return m}catch(m){return g.error("symbolize",m.message),k}};x.simpleStretch=function(h,k){if(!q(h))return h;try{return 3<h.pixels.length&&(h=L.extractBands(h,[0,1,2])),v.stretch(h,k)}catch(m){return g.error("symbolize",m.message),h}};x.generateWebGLParameters=function(h){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){var k;
const {indexedColormap:O,offset:R}=(null==(k=this.lookup)?void 0:k.colormapLut)||{};return{colormap:O,colormapOffset:R,type:"lut"}}const {pixelBlock:m,isGCS:y,resolution:D,bandIds:C}=h;({rendererJSON:h}=this);return"rasterStretch"===h.type?this._generateStretchWebGLParams(m,h,C):"rasterShadedRelief"===h.type?this._generateShadedReliefWebGLParams(h,y,D):"vectorField"===h.type?this._generateVectorFieldWebGLParams(h):null};x._isLUTChanged=function(h){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const k=this.rendererJSON.colorRamp;if(h)return JSON.stringify(k)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};x._symbolizeColormap=function(h){return this._isLUTChanged()&&!this.bind().success?h:L.colorize(h,this.lookup.colormapLut)};x._symbolizeClassBreaks=function(h){const {canUseIndexedLUT:k}=this._analyzeClassBreaks(this.rendererJSON);
return this._isLUTChanged()&&!this.bind().success?h:k?L.colorize(h,this.lookup.colormapLut):L.remapColor(h,this.lookup.remapLut)};x._symbolizeStretch=function(h,k){const {rasterInfo:m}=this,{pixelType:y,bandCount:D}=m,C=this.rendererJSON,O=["u8","u16","s8","s16"].includes(y);let R;var {dra:K}=C;({gamma:V}=this.lookup);if("histogramEqualization"===C.stretchType){var A=K?null:this.lookup.histogramLut;k=v.getStretchCutoff(C,{rasterInfo:m,pixelBlock:h,bandIds:k,returnHistogramLut:!A});var V=v.stretch(h,
{...k,gamma:V});V=L.lookupPixels(V,{lut:K?k.histogramLut:A,offset:0})}else if(O){var ja;if(K)K=v.getStretchCutoff(C,{rasterInfo:m,pixelBlock:h,bandIds:k}),R=v.createStretchLUT({pixelType:y,...K,gamma:V});else{if(this._isLUTChanged()&&!this.bind().success)return h;R=this.lookup?this.lookup.stretchLut:null}if(!R)return h;1<D&&(null==k?void 0:k.length)===(null==(A=Y.unwrap(h))?void 0:A.pixels.length)&&(null==(ja=R)?void 0:ja.lut.length)===D&&(R={lut:k.map(ha=>R.lut[ha]),offset:R.offset});V=L.lookupPixels(h,
R)}else K=v.getStretchCutoff(C,{rasterInfo:m,pixelBlock:h,bandIds:k}),V=v.stretch(h,{...K,gamma:V});if(C.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return h;V=L.colorize(V,this.lookup.colormapLut)}return V};x._symbolizeShadedRelief=function(h,k){var m,y,D=this.rendererJSON;k=n.hillshade(h,{...D,...k});if(!D.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return k;D=this.lookup?this.lookup.hsvMap:null;if(!D)return k;const C=null!=(m=null==(y=Y.unwrap(this.rasterInfo.statistics))?
void 0:y[0])?m:{min:0,max:8E3};n.tintHillshade(k,h,D,C);return k};x._isVectorFieldData=function(){const {bandCount:h,dataType:k}=this.rasterInfo;return 2===h&&("vector-magdir"===k||"vector-uv"===k)};x._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};x._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:
{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};x._updateUVRenderer=function(h){const {bandCount:k,attributeTable:m,pixelType:y}=this.rasterInfo,D=h.field1;if(!D)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const C=h.defaultSymbol;var O=1===k&&["u8","s8"].includes(y);if(!d(this.rasterInfo,D)&&!O)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};
const R=[];if(m){const K=m.fields.find(A=>"value"===A.name.toLowerCase());if(!K)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};m.features.forEach(A=>{var V,ja=h.uniqueValueInfos.find(ha=>String(ha.value)===String(A.attributes[D]));(ja=null==ja?void 0:null==(V=ja.symbol)?void 0:V.color)?R.push([A.attributes[K.name]].concat(ja)):C&&R.push([A.attributes[K.name]].concat(C.color))})}else{if("value"!==D.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};
h.uniqueValueInfos.forEach(K=>{var A;const V=null==K?void 0:null==(A=K.symbol)?void 0:A.color;V?R.push([parseInt(""+K.value,10)].concat(V)):C&&R.push([parseInt(""+K.value,10)].concat(C.color))})}if(0===R.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};O=L.createColormapLUT({colormap:R});this.lookup={rendererJSON:h,colormapLut:O};this.canRenderInWebGL=!0;return{success:!0}};x._updateColormapRenderer=function(h){if(!e(this.rasterInfo))return{success:!1,
error:"Unsupported data; the data source does not have a colormap."};var k=h.colormapInfos.map(m=>[m.value].concat(m.color)).sort((m,y)=>m[0]-y[0]);if(!k||0===k.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};k=L.createColormapLUT({colormap:k});this.lookup={rendererJSON:h,colormapLut:k};this.canRenderInWebGL=!0;return{success:!0}};x._updateShadedReliefRenderer=function(h){{const {bandCount:m,dataType:y,pixelType:D}=this.rasterInfo;var k=
"elevation"===y||"generic"===y&&1===m&&("s16"===D||"f32"===D||"f64"===D)}if(!k)return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(h.colorRamp){k=b.convertColorRampToColormap(h.colorRamp,256,!0);k=L.createColormapLUT({colormap:k});const m=[],y=k.indexedColormap;for(let D=0;D<y.length;D+=4){const C=ea.toHSV({r:y[D],g:y[D+1],b:y[D+2]});m.push([C.h/60,C.s/100,255*C.v/100])}this.lookup={rendererJSON:h,
colormapLut:k,hsvMap:m}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};x._analyzeClassBreaks=function(h){const {attributeTable:k,pixelType:m}=this.rasterInfo,y=Y.isSome(k)?k.fields.find(O=>"value"===O.name.toLowerCase()):null,D=Y.isSome(k)?k.fields.find(O=>O.name.toLowerCase()===h.field.toLowerCase()):null,C=null!=y&&null!==D;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(m)||C,tableValueField:y,tableBreakField:D}};x._updateClassBreaksRenderer=function(h){var {attributeTable:k}=
this.rasterInfo;const {canUseIndexedLUT:m,tableValueField:y,tableBreakField:D}=this._analyzeClassBreaks(h);var C=h.classBreakInfos;if(null==C||!C.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};C=C.sort((V,ja)=>V.classMaxValue-ja.classMaxValue);var O=C[C.length-1],R=h.minValue;if(!m){var K=[];for(k=0;k<C.length;k++){var A;K.push({value:null!=(A=C[k].classMinValue)?A:R,mappedColor:C[k].symbol.color});R=C[k].classMaxValue}K.push({value:O.classMaxValue,
mappedColor:O.symbol.color});this.lookup={rendererJSON:h,remapLut:K};this.canRenderInWebGL=!1;return{success:!0}}A=[];if(null!=y&&null!==D&&y!==D){O=y.name;const V=D.name,ja=C[C.length-1],{classMaxValue:ha}=ja;R=h.minValue;for(K of k.features){k=K.attributes[O];const H=K.attributes[V],F=H===ha?ja:H<R?null:C.find(({classMaxValue:w})=>w>H);F&&A.push([k].concat(F.symbol.color))}}else{R=Math.floor(h.minValue);for(K=0;K<C.length;K++){for(k=C[K];R<k.classMaxValue;R++)A.push([R].concat(k.symbol.color));
R=Math.ceil(k.classMaxValue)}O.classMaxValue===R&&A.push([O.classMaxValue].concat(O.symbol.color))}C=L.createColormapLUT({colormap:A,fillUnspecified:!1});this.lookup={rendererJSON:h,colormapLut:C};this.canRenderInWebGL=!0;return{success:!0}};x._isHistogramRequired=function(h){return"percentClip"===h||"histogramEqualization"===h};x._isValidRasterStatistics=function(h){return Y.isSome(h)&&0<h.length&&null!=h[0].min&&null!=h[0].max};x._updateStretchRenderer=function(h){var k,m,y;let {stretchType:D,dra:C}=
h;if(!("none"===D||null!=(k=h.statistics)&&k.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||C))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var O=Y.unwrap(h.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(h.stretchType)||null!=O&&O.length||C||(D="minMax");const {computeGamma:R,useGamma:K,colorRamp:A}=h;({gamma:k}=h);if(K&&R&&(null==(m=k)||!m.length)){var V;k=null!=(V=h.statistics)&&
V.length?h.statistics:Y.unwrap(this.rasterInfo.statistics);k=v.computeGammaValues(this.rasterInfo.pixelType,k)}V=this.rasterInfo.pixelType;m=!C&&["u8","u16","s8","s16"].includes(V);"histogramEqualization"===D?(O=O.map(ja=>v.createHistogramEqualizationLUT(ja)),this.lookup={rendererJSON:h,histogramLut:O}):m&&(O=v.getStretchCutoff(h,{rasterInfo:this.rasterInfo}),O=v.createStretchLUT({pixelType:V,...O,gamma:K?k:null}),this.lookup={rendererJSON:h,stretchLut:O});A&&(O=b.convertColorRampToColormap(A,256,
!0),this.lookup||(this.lookup={rendererJSON:h}),this.lookup.colormapLut=L.createColormapLUT({colormap:O}),this.lookup.rendererJSON=h);this.lookup.gamma=K&&null!=(y=k)&&y.length?k:null;this.canRenderInWebGL=!0;return{success:!0}};x._generateStretchWebGLParams=function(h,k,m){let y=null,D=null;var C=this.lookup&&this.lookup.colormapLut;k.colorRamp&&C&&(y=C.indexedColormap,D=C.offset);"histogramEqualization"===k.stretchType&&(k={...k,stretchType:"minMax"});({gamma:C}=this.lookup);const O=!!(k.useGamma&&
C&&C.some(F=>1!==F)),{minCutOff:R,maxCutOff:K,outMin:A,outMax:V}=v.getStretchCutoff(k,{rasterInfo:this.rasterInfo,pixelBlock:h,bandIds:m});var ja=0;Y.isSome(h)&&(ja=h.getPlaneCount(),2===ja&&(h=h.clone(),h.statistics=[h.statistics[0]],h.pixels=[h.pixels[0]]));h=Math.min(3,(null==m?void 0:m.length)||ja||this.rasterInfo.bandCount);m=new Float32Array(h);ja=y||O?1:255;let ha;for(ha=0;ha<h;ha++)m[ha]=(V-A)/(K[ha]-R[ha])/ja;const H=new Float32Array(h);if(O)for(ha=0;ha<h;ha++)H[ha]=1<C[ha]?2<C[ha]?6.5+(C[ha]-
2)**2.5:6.5+100*(2-C[ha])**4:1;return{bandCount:h,outMin:A/ja,outMax:V/ja,minCutOff:R,maxCutOff:K,factor:m,useGamma:O,gamma:O?C:[1,1,1],gammaCorrection:O?H:[1,1,1],colormap:y,colormapOffset:D,stretchType:k.stretchType,type:"stretch"}};x._generateShadedReliefWebGLParams=function(h,k,m){var y,D,C;let O=null,R=null;const K=this.lookup&&this.lookup.colormapLut;h.colorRamp&&K&&(O=K.indexedColormap,R=K.offset);k=n.calculateHillshadeParams({...h,isGCS:k,resolution:m});m=null==(y=Y.unwrap(this.rasterInfo.statistics))?
void 0:y[0];return{...k,minValue:null!=(D=null==m?void 0:m.min)?D:0,maxValue:null!=(C=null==m?void 0:m.max)?C:8E3,hillshadeType:"traditional"===h.hillshadeType?0:1,type:"hillshade",colormap:O,colormapOffset:R}};x._generateVectorFieldWebGLParams=function(h){var k,m,y,D,C,O,R,K;const {style:A,inputUnit:V,outputUnit:ja,visualVariables:ha,symbolTileSize:H,flowRepresentation:F}=h;let w;var E=null!=(k=null==(m=this.rasterInfo.statistics)?void 0:m[0].min)?k:0;k=null!=(y=null==(D=this.rasterInfo.statistics)?
void 0:D[0].max)?y:50;y=null!=(C=null==ha?void 0:ha.find(f=>"sizeInfo"===f.type))?C:{type:"sizeInfo",field:"Magnitude",maxDataValue:k,maxSize:.8*H,minDataValue:E,minSize:.2*H};C=null!=(O=y.minDataValue)?O:E;E=null!=(R=y.maxDataValue)?R:k;R=Y.isSome(y.maxSize)&&Y.isSome(y.minSize)?[y.minSize/H,y.maxSize/H]:[.2,.8];"wind_speed"===A&&(R[0]=R[1]=(R[0]+R[1])/2);O=Y.isSome(C)&&Y.isSome(E)?[C,E]:null;if("classified_arrow"===A)if(Y.isSome(C)&&Y.isSome(E)&&Y.isSome(y))for(w=[],C=(y.maxDataValue-y.minDataValue)/
5,E=0;6>E;E++)w.push(y.minDataValue+C*E);else w=[0,1E-6,3.5,7,10.5,14];y="flow_to"===F===("ocean_current_kn"===A||"ocean_current_m"===A)?0:Math.PI;C=null==ha?void 0:ha.find(f=>"rotationInfo"===f.type);h=(null==(K=this.rasterInfo.storageInfo)?0:K.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==C?void 0:C.rotationType)||h.rotationType;return{breakValues:w,dataRange:O,inputUnit:V,outputUnit:ja,symbolTileSize:H,symbolPercentRange:R,style:A||"single_arrow",rotation:y,rotationType:h,
type:"vectorField"}};return p}(X.JSONSupport);r.__decorate([fa.property({json:{write:!0}})],X.prototype,"rendererJSON",void 0);r.__decorate([fa.property({type:I,json:{write:!0}})],X.prototype,"rasterInfo",void 0);r.__decorate([fa.property({json:{write:!0}})],X.prototype,"lookup",void 0);r.__decorate([fa.property()],X.prototype,"canRenderInWebGL",void 0);return X=r.__decorate([Q.subclass("esri.renderers.support.RasterSymbolizer")],X)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I){ea=function(L){function v(n){n=L.call(this,n)||this;n.attributeTable=null;n.bandCount=null;n.colormap=null;n.extent=null;n.format=void 0;n.height=null;n.width=null;n.histograms=null;n.keyProperties={};n.multidimensionalInfo=null;n.noDataValue=null;n.pixelSize=null;n.pixelType=null;n.isPseudoSpatialReference=!1;n.spatialReference=null;n.statistics=null;n.storageInfo=null;n.transform=null;return n}S._inheritsLoose(v,L);S._createClass(v,[{key:"dataType",get:function(){var n,
b,d;const e=null!=(n=null==(b=this.keyProperties)?void 0:null==(d=b.DataType)?void 0:d.toLowerCase())?n:"generic";return"stdtime"===e?"standard-time":e}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(n){n&&this._set("nativeExtent",n)}},{key:"nativePixelSize",get:function(){if(X.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const n=this.nativeExtent;return{x:n.width/this.width,y:n.height/this.height}}},{key:"hasMultidimensionalTranspose",
get:function(){var n;return!(null==(n=this.storageInfo)||!n.transposeInfo)}}]);return v}(ea.JSONSupport);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"attributeTable",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"bandCount",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"colormap",void 0);r.__decorate([t.property({type:String,readOnly:!0})],ea.prototype,"dataType",null);r.__decorate([t.property({type:aa,json:{write:!0}})],ea.prototype,"extent",
void 0);r.__decorate([t.property({type:aa,json:{write:!0}})],ea.prototype,"nativeExtent",null);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"nativePixelSize",null);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"format",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"height",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"width",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"hasMultidimensionalTranspose",null);r.__decorate([t.property({json:{write:!0}})],
ea.prototype,"histograms",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"keyProperties",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"multidimensionalInfo",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"noDataValue",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"pixelSize",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"pixelType",void 0);r.__decorate([t.property()],ea.prototype,"isPseudoSpatialReference",
void 0);r.__decorate([t.property({type:Q,json:{write:!0}})],ea.prototype,"spatialReference",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"statistics",void 0);r.__decorate([t.property({type:I,json:{write:!0}})],ea.prototype,"storageInfo",void 0);r.__decorate([t.property({json:{write:!0}})],ea.prototype,"transform",void 0);return ea=r.__decorate([ma.subclass("esri.layers.support.RasterInfo")],ea)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(S,r,ea,X,t,Y,fa,pa,ma){ea=function(aa){function Q(){var I=aa.apply(this,arguments)||this;I.blockWidth=void 0;I.blockHeight=void 0;I.compression=null;I.origin=null;I.firstPyramidLevel=null;I.maximumPyramidLevel=null;I.pyramidScalingFactor=2;I.pyramidBlockWidth=null;I.pyramidBlockHeight=null;I.isVirtualTileInfo=!1;I.tileInfo=null;I.transposeInfo=null;I.blockBoundary=null;return I}S._inheritsLoose(Q,aa);return Q}(ea.JSONSupport);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,
"blockWidth",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"blockHeight",void 0);r.__decorate([X.property({type:String,json:{write:!0}})],ea.prototype,"compression",void 0);r.__decorate([X.property({type:ma,json:{write:!0}})],ea.prototype,"origin",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"firstPyramidLevel",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"maximumPyramidLevel",void 0);r.__decorate([X.property({json:{write:!0}})],
ea.prototype,"pyramidResolutions",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"pyramidScalingFactor",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"pyramidBlockWidth",void 0);r.__decorate([X.property({type:Number,json:{write:!0}})],ea.prototype,"pyramidBlockHeight",void 0);r.__decorate([X.property({type:Boolean,json:{write:!0}})],ea.prototype,"isVirtualTileInfo",void 0);r.__decorate([X.property({json:{write:!0}})],ea.prototype,"tileInfo",
void 0);r.__decorate([X.property()],ea.prototype,"transposeInfo",void 0);r.__decorate([X.property()],ea.prototype,"blockBoundary",void 0);return ea=r.__decorate([pa.subclass("esri.layers.support.RasterStorageInfo")],ea)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(S,r,ea){function X(t){let {altitude:Y,azimuth:fa}=t;const {hillshadeType:pa,pixelSizePower:ma,pixelSizeFactor:aa,scalingType:Q,isGCS:I,resolution:L}=t;var v=
"multi-directional"===pa?2*t.zFactor:t.zFactor;const {x:n,y:b}=L;t=v/(8*n);var d=v/(8*b);I&&.001<v&&(t/=111E3,d/=111E3);"adjusted"===Q&&(I?(t=111E3*n,d=111E3*b,t=(v+t**ma*aa)/(8*t),d=(v+d**ma*aa)/(8*d)):(t=(v+n**ma*aa)/(8*n),d=(v+b**ma*aa)/(8*b)));var e=(90-Y)*Math.PI/180;v=Math.cos(e);let q=(360-fa+90)*Math.PI/180,g=Math.sin(e)*Math.cos(q);e=Math.sin(e)*Math.sin(q);const l=[315,270,225,360,180,0],p=[60,60,60,60,60,90];var x=new Float32Array([3,5,3,2,1,4]);const h=x.reduce((C,O)=>C+O);x=x.map(C=>
C/h);const k="multi-directional"===pa?l.length:1,m=new Float32Array(6),y=new Float32Array(6),D=new Float32Array(6);if("multi-directional"===pa)for(let C=0;C<k;C++)Y=p[C],fa=l[C],e=(90-Y)*Math.PI/180,v=Math.cos(e),q=(360-fa+90)*Math.PI/180,g=Math.sin(e)*Math.cos(q),e=Math.sin(e)*Math.sin(q),m[C]=v,y[C]=g,D[C]=e;else m.fill(v),y.fill(g),D.fill(e);return{resolution:L,factor:[t,d],sinZcosA:g,sinZsinA:e,cosZ:v,sinZcosAs:y,sinZsinAs:D,cosZs:m,weights:x,hillshadeType:["traditional","multi-directional"].indexOf(pa)}}
S.calculateHillshadeParams=X;S.hillshade=function(t,Y){if(!ea.isValidPixelBlock(t))return t;const {width:fa,height:pa,mask:ma}=t,aa=new Uint8Array(fa*pa);ma&&aa.set(ma);const {factor:Q,sinZcosA:I,sinZsinA:L,cosZ:v,sinZcosAs:n,sinZsinAs:b,cosZs:d,weights:e}=X(Y),[q,g]=Q;var {hillshadeType:l}=Y;const p=t.pixels[0];Y=new Uint8Array(fa*pa);let x;for(let R=1;R<pa-1;R++){const K=R*fa;for(let A=1;A<fa-1;A++)if(ma&&!ma[K+A])Y[K+A]=0;else{var h=8;if(ma&&(h=ma[K-fa+A-1]+ma[K-fa+A]+ma[K-fa+A+1]+ma[K+A-1]+ma[K+
A+1]+ma[K+fa+A-1]+ma[K+fa+A]+ma[K+fa+A+1],7>h)){Y[K+A]=0;aa[K+A]=0;continue}if(7===h){var k=ma[K-fa+A-1]?p[K-fa+A-1]:p[K+A];var m=ma[K-fa+A]?p[K-fa+A]:p[K+A];var y=ma[K-fa+A+1]?p[K-fa+A+1]:p[K+A];h=ma[K+A-1]?p[K+A-1]:p[K+A];x=ma[K+A+1]?p[K+A+1]:p[K+A];var D=ma[K+fa+A-1]?p[K+fa+A-1]:p[K+A];var C=ma[K+fa+A]?p[K+fa+A]:p[K+A];var O=ma[K+fa+A+1]?p[K+fa+A+1]:p[K+A]}else k=p[K-fa+A-1],m=p[K-fa+A],y=p[K-fa+A+1],h=p[K+A-1],x=p[K+A+1],D=p[K+fa+A-1],C=p[K+fa+A],O=p[K+fa+A+1];h=(y+x+x+O-(k+h+h+D))*q;k=(D+C+C+
O-(k+m+m+y))*g;m=Math.sqrt(1+h*h+k*k);y=0;if("traditional"===l)h=255*(v+L*k-I*h)/m,0>h&&(h=0),y=h;else for(D=b.length,C=0;C<D;C++)O=255*(d[C]+b[C]*k-n[C]*h)/m,0>O&&(O=0),y+=O*e[C];Y[K+A]=y&255}}for(l=0;l<pa;l++)Y[l*fa]=Y[l*fa+1],Y[(l+1)*fa-1]=Y[(l+1)*fa-2];for(l=1;l<fa-1;l++)Y[l]=Y[l+fa],Y[l+(pa-1)*fa]=Y[l+(pa-2)*fa];return new r({width:fa,height:pa,pixels:[Y],mask:ma?aa:null,pixelType:"u8",validPixelCount:t.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};S.tintHillshade=function(t,Y,fa,
pa){if(ea.isValidPixelBlock(t)&&ea.isValidPixelBlock(Y)){var {min:ma,max:aa}=pa;pa=t.pixels[0];var {pixels:Q,mask:I}=Y;Y=Q[0];var L=255.00001/(aa-ma),v=new Uint8ClampedArray(Y.length),n=new Uint8ClampedArray(Y.length),b=new Uint8ClampedArray(Y.length),d=fa.length-1;for(let g=0;g<Y.length;g++){if(I&&0===I[g])continue;var e=Math.floor((Y[g]-ma)*L);const [l,p]=fa[0>e?0:e>d?d:e];var q=pa[g];e=q*p;const x=e*(1-Math.abs(l%2-1));q-=e;switch(Math.floor(l)){case 0:v[g]=e+q;n[g]=x+q;b[g]=q;break;case 1:v[g]=
x+q;n[g]=e+q;b[g]=q;break;case 2:v[g]=q;n[g]=e+q;b[g]=x+q;break;case 3:v[g]=q;n[g]=x+q;b[g]=e+q;break;case 4:v[g]=x+q;n[g]=q;b[g]=e+q;break;case 5:case 6:v[g]=e+q,n[g]=q,b[g]=x+q}}t.pixels=[v,n,b];t.updateStatistics()}};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(S,r,ea){function X(n,b){if(!n||!b||n.length!==b.length)return!1;for(let d=
0;d<n.length;d++)if(n[d]>b[d]+2||n[d]<b[d]-2)return!1;return!0}function t(n,b){if(n){b=b?b:L;var d=null,e;"algorithmic"===n.type?b.some(q=>{if(X(n.fromColor.toRgb(),q.fromColor)&&X(n.toColor.toRgb(),q.toColor))return d=q.id,!0}):"multipart"===n.type&&b.some(q=>{if(n.colorRamps&&q.colorRamps&&n.colorRamps.length===q.colorRamps.length&&(e=n.colorRamps,!q.colorRamps.some((g,l)=>{if(!X(e[l].fromColor.toRgb(),(new r(g.fromColor)).toRgb())||!X(e[l].toColor.toRgb(),(new r(g.toColor)).toRgb()))return!0}))){if(d)return!0;
d=q.id}});return d}}function Y(n){return(n=t(n))?v[n]:null}function fa(n){n=n||{};const b=n.numColors||256;return{...n,numColors:b,distanceOffset:n.distanceOffset||0,interpolateAlpha:!!n.interpolateAlpha,distanceInterval:n.distanceInterval||1/(b-1),isCustomInterval:null!=n.isCustomInterval?n.isCustomInterval:null!==n.distanceInterval&&n.distanceInterval!==1/(b-1),weights:n.weights}}function pa(n,b){var d,e;let {fromColor:q,toColor:g}=n;3===q.length&&(q=q.concat([255]));3===g.length&&(g=g.concat([255]));
var l=n.algorithm||"esriCIELabAlgorithm";const {numColors:p,distanceOffset:x,isCustomInterval:h,interpolateAlpha:k}=fa(b);if(1===p&&0===x)return[q];if(2===p&&0===x&&!h)return[q,g];var m={r:q[0],g:q[1],b:q[2]};n={r:g[0],g:g[1],b:g[2]};if("esriCIELabAlgorithm"===l){{l=ea.toLAB(m);n=ea.toLAB(n);const {numColors:O,distanceOffset:R,distanceInterval:K,isCustomInterval:A}=fa(b);let {l:V,a:ja,b:ha}=l;l=(n.l-V)*K;m=(n.a-ja)*K;b=(n.b-ha)*K;var y=[];if(R){var D=R/K;V+=D*l;ja+=D*m;ha+=D*b}for(D=0;D<O-1;D++)y.push({l:V,
a:ja,b:ha}),V+=l,ja+=m,ha+=b;y.push(A?{l:V,a:ja,b:ha}:n);n=y}}else if("esriHSVAlgorithm"===l){{l=ea.toHSV(m);n=ea.toHSV(n);const {numColors:O,distanceOffset:R,distanceInterval:K,isCustomInterval:A}=fa(b);y=0===l.s;D=0===n.s;m=l.h;b=n.h;y&&!D?m=b:D&&!y&&(n={...n,h:m},b=m);y=Math.abs(b-m);180>y?b=(b-m)*K:(y=360-y,b=m>b?y*K:-y*K);y=(n.s-l.s)*K;D=(n.v-l.v)*K;let {s:V,v:ja}=l;l=m;R&&(m=R/K,l=(l+m*b+360)%360,V+=m*y,ja+=m*D);m=[];for(var C=0;C<O-1;C++)m.push({h:l,s:V,v:ja}),l=(l+b+360)%360,V+=y,ja+=D;m.push(A?
{h:l,s:V,v:ja}:n);n=m}}else{{m=ea.toLCH(m);n=ea.toLCH(n);const {numColors:O,distanceOffset:R,distanceInterval:K,isCustomInterval:A}=fa(b);b=m.h;y=n.h;l=2*Math.PI;b<=y?(D=y-b,b=y-b-l,b=Math.abs(b)<Math.abs(D)?b:D):(D=y+l-b,b=y-b,b=Math.abs(b)<Math.abs(D)?b:D);b*=K;y=(n.l-m.l)*K;D=(n.c-m.c)*K;let {l:V,c:ja,h:ha}=m;R&&(m=R/K,V+=m*y,ja+=m*D,ha=(ha+m*b+l)%l);m=[];for(C=0;C<O-1;C++)m.push({l:V,c:ja,h:ha}),V+=y,ja+=D,ha=(ha+b+l)%l;m.push(A?{l:V,c:ja,h:ha}:n);n=m}}l=[];m=null!=(d=q[3])?d:255;d=((null!=(e=
g[3])?e:255)-m)/(p-1);for(e=0;e<p;e++){const {r:O,g:R,b:K}=ea.toRGB(n[e]);l.push([O,R,K,k?Math.round(m+d*e):255])}return l}function ma(n,b){const {numColors:d,interpolateAlpha:e}=fa(b);b=null==b?void 0:b.weights;({colorRamps:n}=n);if(b){const k=b.reduce((m,y)=>m+y);b=b.map(m=>m/k)}else{b=[];for(var q=0;q<n.length;q++)b[q]=1/n.length}q=[];let g=0,l=0;const p=1/(d-1);let x=!1;for(let k=0;k<n.length;k++){var h=x?0:g*p-l;let m=k===n.length-1?d-1-g:(b[k]-h)/p;x=Math.ceil(m)===m;m=Math.ceil(m);0!==m&&(h/=
b[k],h=pa(n[k],{numColors:m,interpolateAlpha:e,distanceOffset:h,distanceInterval:p/b[k]}),g+=h.length,q.push(...h),l+=b[k])}b=[...n[n.length-1].toColor];3===b.length&&b.push(255);q.push(b);return q}function aa(n,b=256,d=!1){n="toJSON"in n?n.toJSON():n;b={numColors:b,interpolateAlpha:d};return"multipart"===n.type?ma(n,b):pa(n,b)}function Q(n){if(n){var b=n.toJSON();return{Algorithm:(null==b?void 0:b.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:I(n.fromColor),ToColor:I(n.toColor)}}}
function I(n){n=ea.toHSV(n);return{type:"HsvColor",Hue:n.h,Saturation:n.s,Value:n.v,AlphaValue:255}}const L=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,
57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,
72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,
117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,
131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",
colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",
fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,
241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,
77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,
15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,
0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},
{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,
21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,
153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},
{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",
fromColor:[215,240,175],toColor:[96,107,45]}],v={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",
coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",
greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",
prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",
redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",
temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};S.PREDEFINED_COLOR_RAMP_NAME_MAP=v;S.PREDEFINED_JSON_COLOR_RAMPS=L;S.convertColorRampToColormap=function(n,b=256,d=!1){n=aa(n,b,d);n.forEach((e,q)=>{e.unshift(q);
d||e.pop()});return n};S.convertColorRampToColors=aa;S.getColorRampId=t;S.getColorRampName=Y;S.getRFxArgColorRampValue=function(n){const b=Y(n);if(n){if("algorithmic"===n.type)return{...Q(n),Name:b};if(n.colorRamps)return n=n.colorRamps.map(Q),{type:"MultiPartColorRamp",NumColorRamps:n.length,ArrayOfColorRamp:n,Name:b}}};S.rgbaConvertTo32Bit=function(n){n=n.reverse().map(b=>{b=b.toString(16);return 2>b.length?"0"+b:b});return 4294967295&Number.parseInt(n.join(""),16)};Object.defineProperties(S,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q){function I(){I=r._asyncToGenerator(function*(k,
m,y,D){const C=performance.now();var O=L(m,y);const R=performance.now();y=n(m,O,y.width,y.height);m=performance.now();O=d(y,!0);y=performance.now();k="Streamlines"===k?e(O,10):q(O);O=performance.now();X("esri-2d-profiler")&&(h.info("I.1","_createFlowFieldFromData (ms)",Math.round(R-C)),h.info("I.2","_getStreamlines (ms)",Math.round(m-R)),h.info("I.3","createAnimatedLinesData (ms)",Math.round(y-m)),h.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(O-y)),h.info("I.5","createFlowMesh (ms)",
Math.round(O-C)),h.info("I.6","Mesh size (bytes)",k.vertexData.buffer.byteLength+k.indexData.buffer.byteLength));yield Promise.resolve();pa.throwIfAborted(D);return k});return I.apply(this,arguments)}function L(k,m){const y=b(m.data,m.width,m.height,k.smoothing);return k.interpolate?(D,C)=>{const O=Math.floor(D),R=Math.floor(C);if(0>O||O>=m.width||0>R||R>=m.height)return[0,0];D-=O;C-=R;const K=O<m.width-1?O+1:O,A=R<m.height-1?R+1:R;return[(y[2*(R*m.width+O)]*(1-C)+y[2*(A*m.width+O)]*C)*(1-D)+(y[2*
(R*m.width+K)]*(1-C)+y[2*(A*m.width+K)]*C)*D,(y[2*(R*m.width+O)+1]*(1-C)+y[2*(A*m.width+O)+1]*C)*(1-D)+(y[2*(R*m.width+K)+1]*(1-C)+y[2*(A*m.width+K)+1]*C)*D]}:(D,C)=>{D=Math.round(D);C=Math.round(C);return 0>D||D>=m.width||0>C||C>=m.height?[0,0]:[y[2*(C*m.width+D)],y[2*(C*m.width+D)+1]]}}function v(k,m,y,D,C,O,R,K,A){const V=[];let ja=0,[ha,H]=m(y,D);ha*=k.velocityScale;H*=k.velocityScale;V.push({x:y,y:D,t:ja,speed:Math.sqrt(ha*ha+H*H)});for(let E=0;E<k.verticesPerLine;E++){let [f,u]=m(y,D);f*=k.velocityScale;
u*=k.velocityScale;const G=Math.sqrt(f*f+u*u);if(G<k.minSpeedThreshold)break;const N=f/G,U=u/G;y+=N*k.segmentLength;D+=U*k.segmentLength;ja+=k.segmentLength/G;if(Math.acos(N*F+U*w)>k.maxTurnAngle)break;if(k.collisions){var F=Math.round(y*A);var w=Math.round(D*A);if(0>F||F>R-1||0>w||w>K-1)break;const T=O[w*R+F];if(-1!==T&&T!==C)break;O[w*R+F]=C}V.push({x:y,y:D,t:ja,speed:G});F=N;w=U}return V}function n(k,m,y,D){const C=[],O=new ma,R=1/Math.max(k.lineCollisionWidth,1),K=Math.round(y*R),A=Math.round(D*
R),V=new Int32Array(K*A);for(var ja=0;ja<V.length;ja++)V[ja]=-1;ja=[];for(let ha=0;ha<D;ha+=k.lineSpacing)for(let H=0;H<y;H+=k.lineSpacing)ja.push({x:H,y:ha,sort:O.getFloat()});ja.sort((ha,H)=>ha.sort-H.sort);for(const {x:ha,y:H}of ja)O.getFloat()<k.density&&(y=v(k,m,ha,H,C.length,V,K,A,R),2>y.length||C.push(y));return C}function b(k,m,y,D){if(0===D)return k;const C=Math.round(3*D),O=Array(2*C+1);var R=0;for(var K=-C;K<=C;K++){var A=Math.exp(-K*K/(D*D));O[K+C]=A;R+=A}for(D=-C;D<=C;D++)O[D+C]/=R;R=
new Float32Array(k.length);for(D=0;D<y;D++)for(K=0;K<m;K++){var V=A=0;for(var ja=-C;ja<=C;ja++)if(!(0>K+ja||K+ja>=m)){var ha=O[ja+C];A+=ha*k[2*(D*m+(K+ja))];V+=ha*k[2*(D*m+(K+ja))+1]}R[2*(D*m+K)]=A;R[2*(D*m+K)+1]=V}k=new Float32Array(k.length);for(D=0;D<m;D++)for(K=0;K<y;K++){V=A=0;for(ja=-C;ja<=C;ja++)0>K+ja||K+ja>=y||(ha=O[ja+C],A+=ha*R[2*((K+ja)*m+D)],V+=ha*R[2*((K+ja)*m+D)+1]);k[2*(K*m+D)]=A;k[2*(K*m+D)+1]=V}return k}function d(k,m){const y=new ma;var D=k.reduce((K,A)=>K+A.length,0);D=new Float32Array(4*
D);const C=Array(k.length);let O=0,R=0;for(const K of k){k=O;for(const A of K)D[4*O]=A.x,D[4*O+1]=A.y,D[4*O+2]=A.t,D[4*O+3]=A.speed,O++;C[R++]={startVertex:k,numberOfVertices:K.length,totalTime:K[K.length-1].t,timeSeed:m?y.getFloat():0}}return{lineVertices:D,lineDescriptors:C}}function e(k,m){function y(F,w,E,f,u,G,N,U){const T=9*A;let P=0;K[T+P++]=F;K[T+P++]=w;K[T+P++]=1;K[T+P++]=E;K[T+P++]=G;K[T+P++]=N;K[T+P++]=f/2;K[T+P++]=u/2;K[T+P++]=U;A++;K[T+P++]=F;K[T+P++]=w;K[T+P++]=-1;K[T+P++]=E;K[T+P++]=
G;K[T+P++]=N;K[T+P++]=-f/2;K[T+P++]=-u/2;K[T+P++]=U;A++}const {lineVertices:D,lineDescriptors:C}=k;var O=k=0;for(var R of C)k+=2*R.numberOfVertices,O+=6*(R.numberOfVertices-1);const K=new Float32Array(9*k);R=new Uint32Array(O);let A=0;k=0;for(const F of C){const {totalTime:w,timeSeed:E}=F;let f=O=null,u=null;var V=null,ja=null,ha=null;for(let G=0;G<F.numberOfVertices;G++){V=D[4*(F.startVertex+G)];const N=D[4*(F.startVertex+G)+1],U=D[4*(F.startVertex+G)+2],T=D[4*(F.startVertex+G)+3];let P=null,a=null;
var H=null;let c=null;0<G&&(P=V-O,a=N-f,H=Math.sqrt(P*P+a*a),P/=H,a/=H,1<G?(ja=P+ja,ha=a+ha,H=Math.sqrt(ja*ja+ha*ha),ja/=H,ha/=H,H=Math.min(1/(ja*P+ha*a),m),ja*=H,ha*=H,H=-ha,c=ja):(H=-a,c=P),null!==H&&null!==c&&(y(O,f,u,H,c,w,E,T),R[k++]=A-2,R[k++]=A,R[k++]=A-1,R[k++]=A,R[k++]=A+1,R[k++]=A-1));O=V;f=N;u=U;ja=P;ha=a;V=T}y(O,f,u,-ha,ja,w,E,V)}return{vertexData:K,indexData:R}}function q(k){function m(z,Z){var ca=U+P,ba=T+a,la=Math.sqrt(ca*ca+ba*ba);ca/=la;ba/=la;var da=U*ca+T*ba,oa=P+c,na=a+B;la=Math.sqrt(oa*
oa+na*na);oa/=la;na/=la;var qa=P*oa+a*na;{la=H;var ua=F,ra=w,va=E;ba=-(ba/da);ca/=da;da=f;var wa=u,ya=G,Ga=N;na=-(na/qa);oa/=qa;qa=16*ja;let za=0;for(const Ba of[1,2])for(const Da of[1,2,3,4])A[qa+za++]=la,A[qa+za++]=ua,A[qa+za++]=ra,A[qa+za++]=va,A[qa+za++]=da,A[qa+za++]=wa,A[qa+za++]=ya,A[qa+za++]=Ga,A[qa+za++]=Ba,A[qa+za++]=Da,A[qa+za++]=z,A[qa+za++]=Z,A[qa+za++]=ba/2,A[qa+za++]=ca/2,A[qa+za++]=na/2,A[qa+za++]=oa/2,ja++}V[ha++]=ja-8;V[ha++]=ja-7;V[ha++]=ja-6;V[ha++]=ja-7;V[ha++]=ja-5;V[ha++]=ja-
6;V[ha++]=ja-4;V[ha++]=ja-3;V[ha++]=ja-2;V[ha++]=ja-3;V[ha++]=ja-1;V[ha++]=ja-2}function y(z,Z,ca,ba,la,da){U=P;T=a;P=c;a=B;null==U&&null==T&&(U=P,T=a);if(null!=f&&null!=u){c=z-f;B=Z-u;const oa=Math.sqrt(c*c+B*B);c/=oa;B/=oa}null!=U&&null!=T&&m(la,da);H=f;F=u;w=G;E=N;f=z;u=Z;G=ca;N=ba}function D(z,Z){U=P;T=a;P=c;a=B;null==U&&null==T&&(U=P,T=a);null!=U&&null!=T&&m(z,Z)}const {lineVertices:C,lineDescriptors:O}=k;let R=k=0;for(var K of O){const z=K.numberOfVertices-1;k+=8*z;R+=12*z}const A=new Float32Array(16*
k),V=new Uint32Array(R);let ja=0,ha=0,H,F,w,E,f,u,G,N,U,T,P,a,c,B;for(const z of O){B=c=a=P=T=U=N=G=u=f=E=w=F=H=null;const {totalTime:Z,timeSeed:ca}=z;for(K=0;K<z.numberOfVertices;K++)y(C[4*(z.startVertex+K)],C[4*(z.startVertex+K)+1],C[4*(z.startVertex+K)+2],C[4*(z.startVertex+K)+3],Z,ca);D(Z,ca)}return{vertexData:A,indexData:V}}function g(k,m){const y=m.pixels,{width:D,height:C}=m,O=new Float32Array(D*C*2),R=m.mask||new Uint8Array(D*C*2);m.mask||R.fill(255);if("vector-uv"===k)for(k=0;k<D*C;k++)O[2*
k]=y[0][k],O[2*k+1]=-y[1][k];else if("vector-magdir"===k)for(k=0;k<D*C;k++){m=y[0][k];const K=Y.deg2rad(y[1][k]),A=Math.sin(K-Math.PI/2);O[2*k]=Math.cos(K-Math.PI/2)*m;O[2*k+1]=A*m}return{data:O,mask:R,width:D,height:C}}function l(){l=r._asyncToGenerator(function*(k,m,y,D,C,O){const R=performance.now();var K=aa.getInfo(m.spatialReference);if(!K)return y=yield p(k,m,y,D,C,O),X("esri-2d-profiler")&&h.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-R)),X("esri-2d-profiler")&&h.info("I.9",
"Number of parts",1),y;const [A,V]=K.valid,ja=Math.ceil(m.width/(V-A)),ha=m.width/ja,H=Math.round(y/ja);let F=m.xmin;const w=[];K=performance.now();for(let E=0;E<ja;E++){const f=new Q({xmin:F,xmax:F+ha,ymin:m.ymin,ymax:m.ymax,spatialReference:m.spatialReference});w.push(p(k,f,H,D,C,O));F+=ha}k=yield Promise.all(w);X("esri-2d-profiler")&&h.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-K));X("esri-2d-profiler")&&h.info("I.9","Number of parts",k.length);D={data:new Float32Array(y*
D*2),mask:new Uint8Array(y*D),width:y,height:D};m=0;for(const E of k){for(k=0;k<E.height;k++)for(C=0;C<E.width;C++)m+C>=y||(D.data[2*(k*y+m+C)]=E.data[2*(k*E.width+C)],D.data[2*(k*y+m+C)+1]=E.data[2*(k*E.width+C)+1],D.mask[k*y+m+C]=E.mask[k*E.width+C]);m+=E.width}X("esri-2d-profiler")&&h.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-R));return D});return l.apply(this,arguments)}function p(k,m,y,D,C,O){return x.apply(this,arguments)}function x(){x=r._asyncToGenerator(function*(k,
m,y,D,C,O){const R={requestProjectedLocalDirections:!0,signal:O};fa.isSome(C)&&(R.timeExtent=C);if("imagery"===k.type)return yield k.load({signal:O}),C=k.rasterInfo.dataType,k=yield k.fetchImage(m,y,D,R),!k||fa.isNone(k.pixelData)||fa.isNone(k.pixelData.pixelBlock)?{data:new Float32Array(y*D*2),mask:new Uint8Array(y*D),width:y,height:D}:g(C,k.pixelData.pixelBlock);yield k.load({signal:O});C=k.rasterInfo.dataType;k=yield k.fetchPixels(m,y,D,R);return!k||fa.isNone(k.pixelBlock)?{data:new Float32Array(y*
D*2),mask:new Uint8Array(y*D),width:y,height:D}:g(C,k.pixelBlock)});return x.apply(this,arguments)}const h=t.getLogger("esri.views.2d.engine.flow.dataUtils");S.createAnimatedLinesData=d;S.createFlowMesh=function(k,m,y,D){return I.apply(this,arguments)};S.createParticlesMesh=q;S.createStreamlinesMesh=e;S.loadImagery=function(k,m,y,D,C,O){return l.apply(this,arguments)};Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/stretchUtils ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent".split(" "),function(S,r,ea,X,t,Y,fa,pa,ma,aa,Q,I,L,v){return function(){function n(){}
var b=n.prototype;b.convertVectorFieldData=function(d){const e=t.fromJSON(d.pixelBlock);d=aa.convertVectorFieldData(e,d.type);return Promise.resolve(ea.isSome(d)&&d.toJSON())};b.decode=function(){var d=S._asyncToGenerator(function*(e){return(e=yield Y.decode(e.data,e.options))&&e.toJSON()});return function(e){return d.apply(this,arguments)}}();b.symbolize=function(d){d.pixelBlock=t.fromJSON(d.pixelBlock);d.extent=d.extent?v.fromJSON(d.extent):null;d=this.symbolizer.symbolize(d);return Promise.resolve(ea.isSome(d)&&
d.toJSON())};b.updateSymbolizer=function(){var d=S._asyncToGenerator(function*(e){var q;this.symbolizer=I.fromJSON(e.symbolizerJSON);e.histograms&&"rasterStretch"===(null==(q=this.symbolizer)?void 0:q.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=e.histograms)});return function(e){return d.apply(this,arguments)}}();b.stretch=function(d){d=this.symbolizer.simpleStretch(t.fromJSON(d.srcPixelBlock),d.stretchParams);return Promise.resolve(ea.isSome(d)&&d.toJSON())};b.estimateStatisticsHistograms=
function(d){d=ma.estimateStatisticsHistograms(t.fromJSON(d.srcPixelBlock));return Promise.resolve(d)};b.split=function(d){const e=fa.split(t.fromJSON(d.srcPixelBlock),d.tileSize,d.maximumPyramidLevel);e&&e.forEach((q,g)=>{e.set(g,null==q?void 0:q.toJSON())});return Promise.resolve(e)};b.mosaicAndTransform=function(){var d=S._asyncToGenerator(function*(e){var q,g=e.srcPixelBlocks.map(x=>x?new t(x):null);let l=g=fa.mosaic(g,e.srcMosaicSize,{blockWidths:e.blockWidths,alignmentInfo:e.alignmentInfo,clipOffset:e.clipOffset,
clipSize:e.clipSize});e.coefs&&(l=fa.approximateTransform(g,e.destDimension,e.coefs,e.sampleSpacing,e.interpolation));let p;e.projectDirections&&e.gcsGrid&&(p=fa.getLocalArithmeticNorthRotations(e.destDimension,e.gcsGrid),l=ea.unwrap(aa.convertToLocalDirections(l,e.isUV?"vector-uv":"vector-magdir",p)));return{pixelBlock:null==(q=l)?void 0:q.toJSON(),localNorthDirections:p}});return function(e){return d.apply(this,arguments)}}();b.createFlowMesh=function(){var d=S._asyncToGenerator(function*(e,q){const g=
{data:new Float32Array(e.flowData.buffer),mask:new Uint8Array(e.flowData.maskBuffer),width:e.flowData.width,height:e.flowData.height},{vertexData:l,indexData:p}=yield L.createFlowMesh(e.meshType,e.simulationSettings,g,q.signal);return{result:{vertexBuffer:l.buffer,indexBuffer:p.buffer},transferList:[l.buffer,p.buffer]}});return function(e,q){return d.apply(this,arguments)}}();b.getProjectionOffsetGrid=function(){var d=S._asyncToGenerator(function*(e){const q=v.fromJSON(e.projectedExtent),g=v.fromJSON(e.srcBufferExtent);
let l=null;e.datumTransformationSteps&&(l=new X({steps:e.datumTransformationSteps}));if(e.includeGCSGrid||pa.requirePE(q.spatialReference,g.spatialReference,l))yield pa.load();const p=e.rasterTransform?Q.readTransform(e.rasterTransform):null;return pa.getProjectionOffsetGrid({...e,projectedExtent:q,srcBufferExtent:g,datumTransformation:l,rasterTransform:p})});return function(e){return d.apply(this,arguments)}}();return n}()});