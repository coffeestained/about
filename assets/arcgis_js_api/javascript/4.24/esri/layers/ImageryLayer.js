// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../kernel ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l,b,c,f,k,g,t,y,r,d,e,h,x,A,z,M,B,C,u,F,L,T,H,G,P,O,V,X,Y,ba,ea,ca,da,Q,W,fa,aa,ia,ja,ka,qa,ma,ya,sa,ra,Ba,za,wa,xa,Ka,Ja,Fa,La,Pa,Ma,Na,Ua){function ab(oa){if(!oa)return null;oa=JSON.stringify(oa).match(/"rasterFunction":"(.*?")/gi);return(oa=null==oa?void 0:oa.map(Oa=>Oa.replace('"rasterFunction":"',"").replace('"',"")))?oa.join("/"):null}const Xa=m.getLogger("esri.layers.mixins.ArcGISImageService"),Va=I.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",
S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),bb=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),cb=f.ensureRange(c.ensureNumber,{min:0,max:255});R.ArcGISImageService=oa=>{oa=function(Oa){function Ra(){var K=Oa.apply(this,arguments)||this;K._functionRasterInfos={};K._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};K._defaultServiceMosaicRule=null;K._serviceSourceType=null;K._serviceSupportsMosaicRule=null;K.rasterAttributeTableFieldPrefix=
"Raster.";K.adjustAspectRatio=null;K.bandCount=null;K.bandIds=void 0;K.capabilities=null;K.compressionQuality=void 0;K.compressionTolerance=.01;K.copyright=null;K.definitionExpression=null;K.exportImageServiceParameters=null;K.rasterInfo=null;K.fields=null;K.fullExtent=null;K.hasMultidimensions=!1;K.imageMaxHeight=4100;K.imageMaxWidth=4100;K.interpolation=void 0;K.minScale=0;K.maxScale=0;K.multidimensionalInfo=null;K.noData=null;K.noDataInterpretation=void 0;K.objectIdField=null;K.geometryType="polygon";
K.typeIdField=null;K.types=[];K.pixelSizeX=null;K.pixelSizeY=null;K.pixelFilter=null;K.raster=void 0;K.viewId=void 0;K.symbolizer=null;K.rasterAttributeTable=null;K.rasterFunctionInfos=null;K.serviceDataType=null;K.spatialReference=null;K.pixelType=null;K.serviceRasterInfo=null;K.sourceJSON=null;K.url=null;K.version=void 0;return K}D._inheritsLoose(Ra,Oa);var pa=Ra.prototype;pa.initialize=function(){this._set("exportImageServiceParameters",new d.ExportImageServiceParameters({layer:this}))};pa.readDefaultServiceMosaicRule=
function(K,N){return this._serviceSupportsMosaicRule?A.fromJSON(N):null};pa.readServiceSourceType=function(K,N){return this._isMosaicDataset(N)?"mosaic-dataset":"raster-dataset"};pa.readServiceSupportsMosaicRule=function(K,N){return this._isMosaicRuleSupported(N)};pa.readBandIds=function(K,N){if(Array.isArray(K)&&0<K.length&&K.every(Z=>"number"===typeof Z))return K};pa.readCapabilities=function(K,N){return this._readCapabilities(N)};pa.writeCompressionQuality=function(K,N,Z){null!=K&&"lerc"!==this.format&&
(N[Z]=K)};pa.writeCompressionTolerance=function(K,N,Z){"lerc"===this.format&&null!=K&&(N[Z]=K)};pa.readFormat=function(K,N){return"esriImageServiceDataTypeVector-UV"===N.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===N.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};pa.readMinScale=function(K,N){return null!=N.minLOD&&null!=N.maxLOD?K:0};pa.readMaxScale=function(K,N){return null!=N.minLOD&&null!=N.maxLOD?K:0};pa.readMosaicRule=function(K,N){return(K=K||N.mosaicRule)?A.fromJSON(K):
this._isMosaicRuleSupported(N)?A.fromJSON(N):null};pa.writeMosaicRule=function(K,N,Z){K=this.mosaicRule;const ha=this.definitionExpression;K?ha&&ha!==K.where&&(K=K.clone(),K.where=ha):ha&&(K=new A({where:ha}));this._isValidCustomizedMosaicRule(K)&&(N[Z]=K.toJSON())};pa.writeNoData=function(K,N,Z){null!=K&&"number"===typeof K&&(N[Z]=cb(K))};pa.readObjectIdField=function(K,N){K||(K=(K=N.fields.filter(Z=>"esriFieldTypeOID"===Z.type||"oid"===Z.type))&&K[0]&&K[0].name);return K};pa.readRenderer=function(K,
N,Z){var ha,la;K=null==N?void 0:null==(ha=N.layerDefinition)?void 0:null==(la=ha.drawingInfo)?void 0:la.renderer;Z=U.read(K,Z);if(null==Z)return null;"vector-field"===Z.type&&N.symbolTileSize&&!K.symbolTileSize&&(Z.symbolTileSize=N.symbolTileSize);x.isSupportedRendererType(Z)||Xa.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return Z};pa.writeRenderer=function(K,N,Z){N.layerDefinition=N.layerDefinition||{};N.layerDefinition.drawingInfo=N.layerDefinition.drawingInfo||
{};N.layerDefinition.drawingInfo.renderer=K.toJSON();"vector-field"===K.type&&(N.symbolTileSize=K.symbolTileSize)};pa.readRenderingRule=function(K,N){K=N.rasterFunctionInfos;return N.renderingRule||K&&K.length&&"None"!==K[0].name?this._isRFTJson(N.renderingRule)?B.fromJSON({rasterFunctionDefinition:N.renderingRule}):B.fromJSON(N.renderingRule||{rasterFunctionInfos:N.rasterFunctionInfos}):null};pa.writeRenderingRule=function(K,N,Z){K=K.toJSON();N[Z]=K.rasterFunctionDefinition?K.rasterFunctionDefinition:
K};pa.readSpatialReference=function(K,N){return(K=K||N.extent.spatialReference)?Ua.fromJSON(K):null};pa.readPixelType=function(K){return Va.fromJSON(K)||K};pa.writePixelType=function(K,N,Z){if(a.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)N[Z]=Va.toJSON(K)};pa.readVersion=function(K,N){(K=N.currentVersion)||(K=N.hasOwnProperty("fields")||N.hasOwnProperty("timeInfo")?10:9.3);return K};pa.applyFilter=function(K){let N=K;this.pixelFilter&&(N=this._clonePixelData(K),
this.pixelFilter(N));return N};pa.applyRenderer=function(){var K=D._asyncToGenerator(function*(N,Z){var ha=N;if(!this._isPicture()&&this.renderer&&this.symbolizer&&!this.pixelFilter){ha=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const la=this._rasterJobHandler.instance,{bandIds:na}=this;la?(ha&&(this.symbolizer.bind(),yield la.updateSymbolizer(this.symbolizer,Z),this._cachedRendererJson=this.renderer.toJSON()),Z=yield la.symbolize({bandIds:na,...N},Z),ha={extent:N.extent,
pixelBlock:Z}):ha={extent:N.extent,pixelBlock:this.symbolizer.symbolize({bandIds:na,...N})}}return ha});return function(N,Z){return K.apply(this,arguments)}}();pa.destroy=function(){this._shutdownJobHandler()};pa.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};pa.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};pa.computeAngles=function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==
Z?void 0:Z.signal);if(!this.capabilities.operations.supportsComputeAngles)throw new S("imagery-layer:compute-angles","this operation is not supported on the input image service");N=c.ensureClass(Ja,N).clone();return P.computeAngles(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.computePixelSpaceLocations=function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==Z?void 0:Z.signal);if(!this.capabilities.operations.supportsComputePixelLocation)throw new S("imagery-layer:compute-pixel-space-locations",
"this operation is not supported on the input image service");N=c.ensureClass(Pa,N).clone();return P.computePixelSpaceLocations(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.computeHistograms=function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==Z?void 0:Z.signal);if(!this.capabilities.operations.supportsComputeHistograms)throw new S("imagery-layer:compute-histograms","this operation is not supported on the input image service");
N=c.ensureClass(Fa,N).clone();const {raster:ha,mosaicRule:la,renderingRule:na}=this;na&&null==N.renderingRule&&(N.renderingRule=na);la&&null==N.mosaicRule&&(N.mosaicRule=la);ha&&null==N.raster&&(N.raster=ha);return P.computeHistograms(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.computeStatisticsHistograms=function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==Z?void 0:Z.signal);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new S("imagery-layer:compute-statistics-histograms",
"this operation is not supported on the input image service");N=c.ensureClass(Fa,N).clone();const {raster:ha,mosaicRule:la,renderingRule:na}=this;na&&null==N.renderingRule&&(N.renderingRule=na);la&&null==N.mosaicRule&&(N.mosaicRule=la);ha&&null==N.raster&&(N.raster=ha);return P.computeStatisticsHistograms(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.getField=function(K){const {fieldsIndex:N}=this;return a.isSome(N)?N.get(K):void 0};pa.getFieldDomain=
function(K,N){return(K=this.getField(K))?K.domain:null};pa.fetchImage=function(K,N,Z,ha={}){if(null==K||null==N||null==Z)return Promise.reject(new S("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const la=this.renderer||this.symbolizer?this.generateRasterInfo(this.renderingRule,{signal:ha.signal}):null;return n.when(la).then(na=>{na&&(this.rasterInfo=na);na={imageServiceParameters:this.getExportImageServiceParameters(K,
N,Z,ha.timeExtent),imageProps:{extent:K,width:N,height:Z,format:this.format},requestAsImageElement:ha.requestAsImageElement&&!this.pixelFilter||!1,signal:ha.signal};return this._requestArrayBuffer(na)})};pa.fetchKeyProperties=function(K){return J(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?null==K?void 0:K.renderingRule:null})}).then(N=>N.data)};pa.fetchRasterAttributeTable=function(K){return 10.1>this.version?Promise.reject(new S("#fetchRasterAttributeTable()",
"Failed to get rasterAttributeTable")):J(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?null==K?void 0:K.renderingRule:null})}).then(N=>ka.fromJSON(N.data))};pa.getCatalogItemRasterInfo=function(K,N){const Z=this._getQueryParams();return Ka.getCatalogItemRasterInfo(this.parsedUrl.path,K,{...N,query:Z})};pa.getCatalogItemICSInfo=function(){var K=D._asyncToGenerator(function*(N,Z){var {data:ha}=yield J(this.parsedUrl.path+"/"+N+"/info/ics",
{query:this._getQueryParams(),...Z});if(ha=ha&&ha.ics){var la=null;try{la=(yield J(this.parsedUrl.path+"/"+N+"/info",{query:this._getQueryParams(),...Z})).data.extent}catch{}if(!la||!la.spatialReference)return{ics:ha,icsToPixelTransform:null,icsExtent:null,northDirection:null};var na=10.7<=this.version?J(this.parsedUrl.path+"/"+N+"/info/icstopixel",{query:this._getQueryParams(),...Z}).then(Ia=>Ia.data).catch(()=>({})):{},ua=la.spatialReference,va={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",
geometries:[la]}),inSR:ua.wkid||JSON.stringify(ua),outSR:"0:"+N};va=J(this.parsedUrl.path+"/project",{query:this._getQueryParams(va),...Z}).then(Ia=>Ia.data).catch(()=>({}));var Aa=(la.xmin+la.xmax)/2,ta=(la.ymax-la.ymin)/6;la=la.ymin+ta;var Ca=[];for(let Ia=0;5>Ia;Ia++)Ca.push({x:Aa,y:la+ta*Ia});N={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Ca}),inSR:ua.wkid||JSON.stringify(ua),outSR:"0:"+N};Z=J(this.parsedUrl.path+"/project",{query:this._getQueryParams(N),...Z}).then(Ia=>
Ia.data).catch(()=>({}));na=yield Promise.all([na,va,Z]);Z=na[0].ipxf;if(null==Z){var Ea,Da,Ga;N=null==(Ea=ha.geodataXform)?void 0:Ea.xf_0;"topup"===(null==N?void 0:null==(Da=N.name)?void 0:Da.toLowerCase())&&6===(null==N?void 0:null==(Ga=N.coefficients)?void 0:Ga.length)&&(Z={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:N.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(Ea=ca.fromJSON(na[1]&&na[1].geometries&&na[1].geometries[0]))Ea.spatialReference=
new Ua({wkid:0,imageCoordinateSystem:ha});Da=na[2].geometries?na[2].geometries.filter(Ia=>null!=Ia&&null!=Ia.x&&null!=Ia.y&&"NaN"!==Ia.x&&"NaN"!==Ia.y):[];Ga=Da.length;if(3>Ga)return{ics:ha,icsToPixelTransform:Z,icsExtent:Ea,northDirection:null};ua=va=N=na=0;for(Aa=0;Aa<Ga;Aa++)na+=Da[Aa].x,N+=Da[Aa].y,va+=Da[Aa].x*Da[Aa].x,ua+=Da[Aa].x*Da[Aa].y;Ga=(Ga*ua-na*N)/(Ga*va-na*na);na=0;N=Da[4].x>Da[0].x;Da=Da[4].y>Da[0].y;Infinity===Ga?na=Da?90:270:0===Ga?na=N?0:180:0<Ga?na=N?180*Math.atan(Ga)/Math.PI:
180*Math.atan(Ga)/Math.PI+180:0>Ga&&(na=Da?180+180*Math.atan(Ga)/Math.PI:360+180*Math.atan(Ga)/Math.PI);return{ics:ha,icsToPixelTransform:Z,icsExtent:Ea,northDirection:na}}});return function(N,Z){return K.apply(this,arguments)}}();pa.generateRasterInfo=function(){var K=D._asyncToGenerator(function*(N,Z){var ha;if((!N||"none"===(null==N?void 0:null==(ha=N.functionName)?void 0:ha.toLowerCase())||this._isVectorFieldResampleFunction(N))&&a.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;
ha=ab(N);if(this._functionRasterInfos[ha])return this._functionRasterInfos[ha];N=this._generateRasterInfo(N,Z);this._functionRasterInfos[ha]=N;try{return yield N}catch{return this._functionRasterInfos[ha]=null}});return function(N,Z){return K.apply(this,arguments)}}();pa.getExportImageServiceParameters=function(K,N,Z,ha){var la;K=K.clone().shiftCentralMeridian();const na=P.getImageSpatialReferenceQueryParameter(K.spatialReference,this.parsedUrl.path);a.isSome(this.serviceRasterInfo)&&this.pixelType!==
this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ua=this.exportImageServiceParameters.toJSON(),{bandIds:va,noData:Aa}=ua;var {renderingRule:ta}=ua,Ca=null==(la=this.renderingRule)?void 0:la.rasterFunctionDefinition;la=!this.renderer||"raster-stretch"===this.renderer.type;null!=va&&va.length&&this._hasRenderingRule(this.renderingRule)&&!Ca&&la?(Ca={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:va}},"Stretch"===ta.rasterFunction?(Ca.rasterFunctionArguments.Raster=
ta.rasterFunctionArguments.Raster,ta.rasterFunctionArguments.Raster=Ca):"Colormap"===ta.rasterFunction?(la=ta.rasterFunctionArguments.Raster,"Stretch"===(null==la?void 0:la.rasterFunction)?(Ca.rasterFunctionArguments.Raster=la.rasterFunctionArguments.Raster,la.rasterFunctionArguments.Raster=Ca):(Ca.rasterFunctionArguments.Raster=la,ta.rasterFunctionArguments.Raster=Ca)):(Ca.rasterFunctionArguments.Raster=ta,ta=Ca),ua.bandIds=void 0):ua.bandIds=null==va?void 0:va.join(",");Aa instanceof Array&&0<Aa.length&&
(ua.noData=Aa.join(","));Ca=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,ha):null;ua.mosaicRule=Ca&&JSON.stringify(Ca);ua.renderingRule=this._getRenderingRuleString(B.fromJSON(ta));ta={};if(ha){const {start:Ea,end:Da}=ha.toJSON();if(Ea&&Da&&Ea===Da)ta.time=""+Ea;else if(null!=Ea||null!=Da)ta.time=`${null==Ea?"null":Ea},${null==Da?"null":Da}`}return{bbox:K.xmin+","+K.ymin+","+K.xmax+","+K.ymax,bboxSR:na,imageSR:na,size:N+","+Z,...ua,
...ta}};pa.getSamples=function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==Z?void 0:Z.signal);if(!this.capabilities.operations.supportsGetSamples)throw new S("imagery-layer:get-samples","getSamples operation is not supported on the input image service");N=c.ensureClass(Ma,N).clone();const {raster:ha}=this;ha&&null==N.raster&&(N.raster=ha);return P.getSamples(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.identify=
function(){var K=D._asyncToGenerator(function*(N,Z){yield this._fetchCapabilities(null==Z?void 0:Z.signal);if(!this.capabilities.operations.supportsIdentify)throw new S("imagery-layer:query-rasters","query operation is not supported on the input image service");N=c.ensureClass(La,N).clone();const {raster:ha,mosaicRule:la,renderingRule:na}=this;na&&null==N.renderingRule&&(N.renderingRule=na);if(la&&null==N.mosaicRule){const ua=this._combineMosaicRuleWithTimeExtent(la,N.timeExtent);N.mosaicRule=a.unwrap(ua)}ha&&
null==N.raster&&(N.raster=ha);return P.identify(this.url,N,this._getRequestOptions(Z))});return function(N,Z){return K.apply(this,arguments)}}();pa.createQuery=function(){const K=new qa;K.outFields=["*"];K.returnGeometry=!0;K.where=this.definitionExpression||"1\x3d1";return K};pa.queryRasters=function(){var K=D._asyncToGenerator(function*(N,Z){({query:N,requestOptions:Z}=yield this._prepareForQuery(N,Z));return X.executeQueryJSON(this.url,N,Z)});return function(N,Z){return K.apply(this,arguments)}}();
pa.queryObjectIds=function(){var K=D._asyncToGenerator(function*(N,Z){({query:N,requestOptions:Z}=yield this._prepareForQuery(N,Z));return Ba.executeForIds(this.url,N,Z)});return function(N,Z){return K.apply(this,arguments)}}();pa.queryRasterCount=function(){var K=D._asyncToGenerator(function*(N,Z){({query:N,requestOptions:Z}=yield this._prepareForQuery(N,Z));return ra.executeForCount(this.url,N,Z)});return function(N,Z){return K.apply(this,arguments)}}();pa.queryVisibleRasters=function(){var K=D._asyncToGenerator(function*(N,
Z){if(!N)throw new S("imagery-layer: query-visible-rasters","missing query parameter");const {pixelSize:ha,returnDomainValues:la,returnTopmostRaster:na,showNoDataRecords:ua}=Z||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let va=!1;var Aa=null,ta=null;const Ca=this.rasterFunctionNamesIndex;a.isSome(N.outFields)&&(va=N.outFields.some(Ha=>!Ha.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version&&(ta=N.outFields.filter(Ha=>Ha.toLowerCase().includes("raster.servicepixelvalue")&&
24<Ha.length).map(Ha=>{Ha=Ha.slice(25);return[this._updateRenderingRulesFunctionName(Ha,Ca),Ha]}),Aa=ta.map(Ha=>new B({functionName:Ha[0]})),ta=ta.map(Ha=>Ha[1]),0===Aa.length?this.renderingRule?(Aa.push(this.renderingRule),ta.push(this.renderingRule.functionName)):Aa=null:this.renderingRule&&!Aa.some(Ha=>Ha.functionName===this.renderingRule.functionName)&&(Aa.push(this.renderingRule),ta.push(this.renderingRule.functionName))));const Ea=a.isNone(N.outSpatialReference)||N.outSpatialReference.equals(this.spatialReference),
Da=N.timeExtent||this.timeExtent,Ga=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Da);Aa=this._getQueryParams({geometry:N.geometry,timeExtent:Da,mosaicRule:Ga,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:Aa,pixelSize:ha,returnCatalogItems:va,returnGeometry:Ea,raster:this.raster,maxItemCount:na?1:null});delete Aa.f;Aa=new La(Aa);try{var Ia,Ya;yield this.generateRasterInfo(this.renderingRule);const Ha=yield P.identify(this.url,Aa,{signal:null==
Z?void 0:Z.signal,query:{...this.customParameters}}),Za=N.outFields,db=Ha.value.toLowerCase().includes("nodata");if(!(va&&!Ea&&(null==Ha?0:null==(Ia=Ha.catalogItems)?0:Ia.features.length))||!ua&&db)return this._processVisibleRastersResponse(Ha,{returnDomainValues:la,templateRRFunctionNames:ta,showNoDataRecords:ua,templateFields:Za});const Sa=this.objectIdField||"ObjectId",$a=Ha.catalogItems.features,eb=$a.map(Ta=>{var Qa;return null==(Qa=Ta.attributes)?void 0:Qa[Sa]}),fb=new qa({objectIds:eb,returnGeometry:!0,
outSpatialReference:N.outSpatialReference,outFields:[Sa]}),Wa=yield this.queryRasters(fb);null!=Wa&&null!=(Ya=Wa.features)&&Ya.length&&Wa.features.forEach(Ta=>{$a.forEach(Qa=>{Qa.attributes[Sa]===Ta.attributes[Sa]&&(Qa.geometry=new fa(Ta.geometry),a.isSome(N.outSpatialReference)&&(Qa.geometry.spatialReference=N.outSpatialReference))})});return this._processVisibleRastersResponse(Ha,{returnDomainValues:la,templateRRFunctionNames:ta,showNoDataRecords:ua,templateFields:Za})}catch{throw new S("imagery-layer:query-visible-rasters",
"encountered error when querying visible rasters");}});return function(N,Z){return K.apply(this,arguments)}}();pa.fetchVariableStatisticsHistograms=function(){var K=D._asyncToGenerator(function*(N,Z){var ha=J(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:N}),signal:Z}).then(la=>{var na;return null==(na=la.data)?void 0:na.statistics});N=J(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:N}),signal:Z}).then(la=>{var na;return null==(na=la.data)?void 0:
na.histograms});ha=yield Promise.all([ha,N]);ha[0]&&ha[0].forEach(la=>{la.avg=la.mean;la.stddev=la.standardDeviation});return{statistics:ha[0]||null,histograms:ha[1]||null}});return function(N,Z){return K.apply(this,arguments)}}();pa.createFlowMesh=function(){var K=D._asyncToGenerator(function*(N,Z){const ha=this._rasterJobHandler.instance;return ha?ha.createFlowMesh(N,Z):Na.createFlowMesh(N.meshType,N.simulationSettings,N.flowData,a.isSome(Z.signal)?Z.signal:(new AbortController).signal)});return function(N,
Z){return K.apply(this,arguments)}}();pa._fetchService=function(){var K=D._asyncToGenerator(function*(N){yield this._fetchServiceInfo(N);a.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var Z=this.sourceJSON;Z=a.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):xa.fetchServiceRasterInfo(this.parsedUrl.path,Z,{signal:N,query:this._getQueryParams()}).then(la=>{this._set("serviceRasterInfo",la);return la});N=this._hasRenderingRule(this.renderingRule)?
this.generateRasterInfo(this.renderingRule,{signal:N}):null;const ha=this._getRasterFunctionInfos();return Promise.all([Z,N,ha]).then(la=>{la[1]?this._set("rasterInfo",la[1]):this._set("rasterInfo",la[0]);la[2]&&this._set("rasterFunctionInfos",la[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),Xa.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));
this.own(q.watch(()=>this.renderingRule,na=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(na).then(ua=>{ua&&(this.rasterInfo=ua)})}));({serviceRasterInfo:la}=this);a.isSome(la)&&la.multidimensionalInfo&&this._updateMultidimensionalDefinition(la)})});return function(N){return K.apply(this,arguments)}}();pa._combineMosaicRuleWithTimeExtent=function(K,N){var Z=this.timeInfo;if(a.isNone(K)||a.isNone(this.multidimensionalInfo)||a.isNone(N)||a.isNone(null==
Z?void 0:Z.startField))return K;const {startField:ha}=Z,la=this.multidimensionalInfo.variables.some(ta=>ta.dimensions.some(Ca=>Ca.name===ha))?ha:"StdTime";K=K.clone();if("mosaic-dataset"===this._serviceSourceType){var na;K.multidimensionalDefinition=null==(na=K.multidimensionalDefinition)?void 0:na.filter(ta=>ta.dimensionName!==la);return this._cleanupMultidimensionalDefinition(K)}K.multidimensionalDefinition=K.multidimensionalDefinition||[];Z=K.multidimensionalDefinition.filter(ta=>ta.dimensionName===
la);na=a.isSome(N.start)?N.start.getTime():null;N=a.isSome(N.end)?N.end.getTime():null;const ua=null==na||null==N||na===N,va=ua?[na||N]:[[na,N]],Aa=10.8<=this.version;Z.length?Z.forEach(ta=>{ta.dimensionName===la&&(Aa?(ta.dimensionName=null,ta.isSlice=null,ta.values=null):(ta.isSlice=ua,ta.values=va))}):Aa||(N=K.multidimensionalDefinition.filter(ta=>null!=ta.variableName&&null==ta.dimensionName),N.length?N.forEach(ta=>{ta.dimensionName=la;ta.isSlice=ua;ta.values=va}):K.multidimensionalDefinition.push(new r({variableName:"",
dimensionName:la,isSlice:ua,values:va})));return this._cleanupMultidimensionalDefinition(K)};pa._cleanupMultidimensionalDefinition=function(K){if(a.isNone(K))return null;K.multidimensionalDefinition&&(K.multidimensionalDefinition=K.multidimensionalDefinition.filter(N=>!(!N.variableName&&!N.dimensionName)),0===K.multidimensionalDefinition.length&&(K.multidimensionalDefinition=null));return"mosaic-dataset"!==this._serviceSourceType&&null==K.multidimensionalDefinition?null:K};pa._prepareForQuery=function(){var K=
D._asyncToGenerator(function*(N,Z){var ha;yield this._fetchCapabilities(null==(ha=Z)?void 0:ha.signal);if(!this.capabilities.operations.supportsQuery)throw new S("imagery-layer:query-rasters","query operation is not supported on the input image service");N=a.isSome(N)?c.ensureClass(qa,N):this.createQuery();Z=this._getRequestOptions(Z);this.raster&&(Z.query={...Z.query,raster:this.raster});return{query:N,requestOptions:Z}});return function(N,Z){return K.apply(this,arguments)}}();pa._initJobHandler=
function(){var K=D._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const N=new u;this._rasterJobHandler.connectionPromise=N.initialize().then(()=>{this._rasterJobHandler.instance=N},()=>null);yield this._rasterJobHandler.connectionPromise});return function(){return K.apply(this,arguments)}}();pa._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=
null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null};pa._isSupportedRenderer=function(K){const {rasterInfo:N,renderingRule:Z}=this;return"unique-value"===K.type&&this._hasRenderingRule(Z)&&1===N.bandCount&&["u8","s8"].includes(N.pixelType)||H.getSupportedRendererTypes(this.rasterInfo).includes(this.renderer.type)};pa._fetchCapabilities=function(){var K=D._asyncToGenerator(function*(N){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(N);
return this.capabilities});return function(N){return K.apply(this,arguments)}}();pa._fetchServiceInfo=function(){var K=D._asyncToGenerator(function*(N){var Z;let ha=this.sourceJSON;if(!ha){const {data:la,ssl:na}=yield J(this.parsedUrl.path,{query:this._getQueryParams(),signal:N});this.sourceJSON=ha=la;na&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(Z=ha.capabilities)?void 0:Z.toLowerCase().split(",").map(la=>la.trim()).indexOf("tilesonly")))throw new S("imagery-layer:fetch-service-info",
"use ImageryTileLayer to open tiles-only image services");this.read(ha,{origin:"service",url:this.parsedUrl})});return function(N){return K.apply(this,arguments)}}();pa._isMosaicDataset=function(K){var N;return K.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===K.serviceSourceType:0<(null==(N=K.fields)?void 0:N.length)};pa._isMosaicRuleSupported=function(K){var N;if(!K)return!1;const Z=this._isMosaicDataset(K);K=10.71<=K.currentVersion&&K.hasMultidimensions&&K.timeInfo&&!(K.objectIdField&&
1<(null==(N=K.fields)?void 0:N.length));return Z||K};pa._isVectorFieldResampleFunction=function(K){if(a.isNone(K))return!1;const {functionName:N,functionArguments:Z}=K;K="resample"===(null==N?void 0:N.toLowerCase());const ha=(null==Z?void 0:Z.ResampleType)||(null==Z?void 0:Z.resampleType);return K&&(7===ha||10===ha)};pa._isPicture=function(){return!this.format||this.format.includes("jpg")||this.format.includes("png")};pa._configRenderer=function(K){if(!this._isPicture()&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&
3<=this.rasterInfo.bandCount){const ha=H.getDefaultBandCombination(this.rasterInfo);!ha||3===this.rasterInfo.bandCount&&0===ha[0]&&1===ha[1]&&2===ha[2]||(this.bandIds=ha)}if(!K){var N,Z;K=H.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(N=this.mosaicRule)?void 0:null==(Z=N.multidimensionalDefinition)?void 0:Z[0].variableName})}N=H.normalizeRendererJSON(K.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=N,this.symbolizer.rasterInfo=this.rasterInfo):
this.symbolizer=new G({rendererJSON:N,rasterInfo:this.rasterInfo});this.symbolizer.bind().success||(this.symbolizer=null)}return K};pa._clonePixelData=function(K){return null==K?K:{extent:K.extent&&K.extent.clone(),pixelBlock:a.isSome(K.pixelBlock)&&K.pixelBlock.clone()}};pa._getQueryParams=function(K){a.isSome(null==K?void 0:K.renderingRule)&&"string"!==typeof K.renderingRule&&(K.renderingRule=this._getRenderingRuleString(K.renderingRule));const {raster:N,viewId:Z}=this;return{raster:N,viewId:Z,
f:"json",...K,...this.customParameters}};pa._getRequestOptions=function(K){return{...K,query:{...null==K?void 0:K.query,...this.customParameters}}};pa._decodePixelBlock=function(K,N,Z){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:K,options:N}):L.decode(K,N,Z)};pa._getRasterFunctionInfos=function(){var K=D._asyncToGenerator(function*(N){const Z=this.sourceJSON.rasterFunctionInfos;if(this.serviceRasterInfo)return Z;if(Z&&10.3<=this.version){var ha;return 1===Z.length&&
"none"===Z[0].name.toLowerCase()?Z:null==(ha=(yield J(this.parsedUrl.path+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:N})).data)?void 0:ha.rasterFunctionInfos}return null});return function(N){return K.apply(this,arguments)}}();pa._requestArrayBuffer=function(){var K=D._asyncToGenerator(function*(N){var Z;const {imageProps:ha,requestAsImageElement:la,signal:na}=N;if(la&&!this.pixelFilter&&-1<(null==(Z=ha.format)?void 0:Z.indexOf("png")))return{imageElement:(yield J(this.parsedUrl.path+
"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...N.imageServiceParameters}),signal:na})).data,params:ha};Z=this._initJobHandler();N=J(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...N.imageServiceParameters}),signal:na});N=(yield Promise.all([N,Z]))[0].data;var ua=Z=ha.format||"jpgpng";"bsq"!==ua&&"bip"!==ua&&(ua=L.getFormat(N));if(!ua)throw new S("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,
new Uint8Array(N)));ua="gif"===Z||"bmp"===Z||Z.includes("png")&&("png"===ua||"jpg"===ua);const va={signal:na};return{pixelData:{pixelBlock:yield ua?L.decode(N,{useCanvas:!0,...ha},va):this._decodePixelBlock(N,{width:ha.width,height:ha.height,planes:null,pixelType:null,noDataValue:null,format:Z},va),extent:ha.extent},params:ha}});return function(N){return K.apply(this,arguments)}}();pa._generateRasterInfo=function(K,N){const Z=this._getQueryParams();return xa.generateRasterInfo(this.parsedUrl.path,
K,{...N,query:Z})};pa._isValidCustomizedMosaicRule=function(K){var N;return K&&JSON.stringify(K.toJSON())!==JSON.stringify(null==(N=this._defaultServiceMosaicRule)?void 0:N.toJSON())};pa._updateMultidimensionalDefinition=function(K){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(K=F.getDefaultMultidimensionalDefinition(K),a.isSome(K)&&0<K.length)){this.mosaicRule=this.mosaicRule||new A;const N=this.mosaicRule.multidimensionalDefinition;if(!N||N&&0>=N.length)this.mosaicRule.multidimensionalDefinition=
K}};pa._processVisibleRastersResponse=function(K,N){N=N||{};const Z=K.value,{templateRRFunctionNames:ha,showNoDataRecords:la,returnDomainValues:na,templateFields:ua}=N;N=K.processedValues;var va=K.catalogItems&&K.catalogItems.features;let Aa=K.properties&&K.properties.Values&&K.properties.Values.map(Ga=>Ga.replace(/ /gi,", "))||[];var ta=this.objectIdField||"ObjectId",Ca="string"===typeof Z&&Z.toLowerCase().includes("nodata");K=[];!Z||va||Ca||(va={},va[ta]=0,va=new p(this.fullExtent,null,va),Aa=[Z],
va=[va]);if(!va)return[];this._updateResponseFieldNames(va,ua);Ca&&!la&&(va=[]);for(ta=0;ta<va.length;ta++){Ca=va[ta];if(null!=Z){var Ea=Aa[ta];var Da=this.renderingRule&&N&&0<N.length&&ha&&0<ha.length&&ha.includes(this.renderingRule.functionName)?N[ha.indexOf(this.renderingRule.functionName)]:Z;if("nodata"===Ea.toLowerCase()&&!la)continue;Ca.attributes["Raster.ItemPixelValue"]=Ea;Ca.attributes["Raster.ServicePixelValue"]=Da;this._updateFeatureWithMagDirValues(Ca,Ea);const Ga=this.fields&&0<this.fields.length;
Da=this.renderingRule&&a.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?Ga?Ea:Z:Da;this.renderingRule||(Da=Ga?Ea:Z);this._updateFeatureWithRasterAttributeTableValues(Ca,Da)}Ca.sourceLayer=Ca.layer=this;na&&this._updateFeatureWithDomainValues(Ca);if(ha&&N&&ha.length===N.length)for(Ea=0;Ea<ha.length;Ea++)Ca.attributes["Raster.ServicePixelValue."+ha[Ea]]=N[Ea];K.push(va[ta])}return K};pa._updateFeatureWithRasterAttributeTableValues=function(K,N){var Z=this.rasterInfo&&this.rasterInfo.attributeTable||
a.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const ha=Z&&Z.features;if(ha){Z=Z.fields;var la=Z.map(va=>va.name).filter(va=>"value"===va.toLowerCase()),na=la&&la[0];if(na){var ua=ha.filter(va=>va.attributes[na]===(null!=N?parseInt(N,10):null));ua&&ua[0]&&Z.forEach(va=>{K.attributes[this.rasterAttributeTableFieldPrefix+va.name]=ua[0].attributes[va.name]})}}};pa._updateFeatureWithMagDirValues=function(K,N){if(this._isVectorDataSet()){var Z=N.split(/,\s*/).map(ha=>parseFloat(ha));
N=Z.map(ha=>[ha]);Z=Z.map(ha=>({minValue:ha,maxValue:ha,noDataValue:null}));N=new z({height:1,width:1,pixelType:"f32",pixels:N,statistics:Z});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:N,extent:new ca(0,0,0,0,this.spatialReference)});N="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[N.pixels[0][0],N.pixels[1][0]]:T.uvComponentToVector([N.pixels[0][0],N.pixels[1][0]]);K.attributes["Raster.Magnitude"]=N[0];K.attributes["Raster.Direction"]=N[1]}};pa._updateFeatureWithDomainValues=
function(K){const N=this.fields&&this.fields.filter(Z=>Z.domain&&"coded-value"===Z.domain.type);null!=N&&N.forEach(Z=>{const ha=K.attributes[Z.name];if(null!=ha){const la=Z.domain.codedValues.find(na=>na.code===ha);la&&(K.attributes[Z.name]=la.name)}})};pa._updateResponseFieldNames=function(K,N){if(N&&!(1>N.length)){var Z=this.fieldsIndex;a.isNone(Z)||K.forEach(ha=>{if(ha&&ha.attributes)for(const la of N)if(Z.has(la)){const na=Z.get(la).name;na!==la&&(ha.attributes[la]=ha.attributes[na],delete ha.attributes[na])}})}};
pa._getRenderingRuleString=function(K){if(this._hasRenderingRule(K)){var N;K=K.toJSON();K=null!=(N=K.rasterFunctionDefinition)?N:K;if(K.thumbnail||K.thumbnailEx)K.thumbnail=K.thumbnailEx=null;return JSON.stringify(K)}return null};pa._hasRenderingRule=function(K){return K&&K.functionName&&"none"!==K.functionName.toLowerCase()};pa._updateRenderingRulesFunctionName=function(K,N){if(K&&!(1>K.length)){if("Raw"===K)return K.replace("Raw","None");var Z=K.toLowerCase().replace(/ /gi,"_");return N.has(Z)?
N.get(Z):K}};pa._isRFTJson=function(K){return K&&K.name&&K.arguments&&K.function&&K.hasOwnProperty("functionType")};pa._isVectorDataSet=function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType};pa._readCapabilities=function(K){const N=K.capabilities?K.capabilities.toLowerCase().split(",").map(ta=>ta.trim()):["image","catalog"],{currentVersion:Z,advancedQueryCapabilities:ha,maxRecordCount:la}=K,na=N.includes("image"),
ua="esriImageServiceDataTypeElevation"===K.serviceDataType,va=!!(K.spatialReference||K.extent&&K.extent.spatialReference),Aa=N.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:na,supportsExportImage:na,supportsIdentify:na,supportsMeasure:N.includes("mensuration")&&va,supportsDownload:N.includes("download"),supportsQuery:N.includes("catalog")&&K.fields&&0<K.fields.length,supportsGetSamples:10.2<=Z&&na,supportsProject:10.3<=Z&&na,supportsComputeStatisticsHistograms:10.4<=
Z&&na,supportsQueryBoundary:10.6<=Z&&na,supportsCalculateVolume:10.7<=Z&&ua,supportsComputePixelLocation:10.7<=Z&&N.includes("catalog"),supportsComputeAngles:10.91<=Z,supportsAdd:Aa,supportsDelete:Aa,supportsEditing:Aa,supportsUpdate:Aa,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:la,
maxRecordCountFactor:void 0,supportsStatistics:!(null==ha||!ha.supportsStatistics),supportsOrderBy:!(null==ha||!ha.supportsOrderBy),supportsDistinct:!(null==ha||!ha.supportsDistinct),supportsPagination:!(null==ha||!ha.supportsPagination),supportsStandardizedQueriesOnly:!(null==ha||!ha.useStandardizedQueries),supportsPercentileStatistics:!(null==ha||!ha.supportsPercentileStatistics),supportsCentroid:!(null==ha||!ha.supportsReturningGeometryCentroid),supportsDistance:!(null==ha||!ha.supportsQueryWithDistance),
supportsExtent:!(null==ha||!ha.supportsReturningQueryExtent),supportsGeometryProperties:!(null==ha||!ha.supportsReturningGeometryProperties),supportsHavingClause:!(null==ha||!ha.supportsHavingClause),supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,
supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!(null==ha||!ha.supportsDefaultSR),supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}};D._createClass(Ra,[{key:"rasterFunctionNamesIndex",get:function(){const K=new Map;if(!this.rasterFunctionInfos||a.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return K;a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(N=>
{K.set(N.name.toLowerCase().replace(/ /gi,"_"),N.name)});return K}},{key:"fieldsIndex",get:function(){return this.fields?new h(this.fields):null}},{key:"format",set:function(K){K&&bb.has(K.toLowerCase())&&this._set("format",K.toLowerCase())}},{key:"mosaicRule",set:function(K){K&&K.mosaicMethod&&(K=A.fromJSON({...K.toJSON(),mosaicMethod:K.mosaicMethod,mosaicOperation:K.mosaicOperation}));this._set("mosaicRule",K)}},{key:"parsedUrl",get:function(){return this.url?l.urlToObject(this.url):null}},{key:"renderer",
set:function(K){this.loaded&&(K=this._configRenderer(K));this._set("renderer",K)}},{key:"rasterFields",get:function(){const K=this.rasterAttributeTableFieldPrefix||"Raster.";var N=new e({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const Z=new e({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ha=new e({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,
editable:!1,length:50,type:"string"});let la=this.fields?w.clone(this.fields):[];la.push(Z);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&la.push(N);10.4<=this.version&&a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(na=>"none"===na.name.toLowerCase())&&la.push(ha);a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(na=>"none"!==na.name.toLowerCase()).forEach(na=>{la.push(new e({name:"Raster.ServicePixelValue."+na.name,alias:na.name,
domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(la.push(new e({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),la.push(new e({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(N=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<N.length&&(N=N.filter(na=>"esriFieldTypeOID"!==na.type&&"value"!==na.name.toLowerCase()).map(na=>{const ua=w.clone(na);ua.name=K+na.name;return ua}),
la=la.concat(N));return la}},{key:"renderingRule",set:function(K){K&&K.rasterFunction&&(K=B.fromJSON({...K.toJSON(),rasterFunction:K.rasterFunction,rasterFunctionArguments:K.rasterFunctionArguments}));this._set("renderingRule",K)}}]);return Ra}(oa);v.__decorate([f.property()],oa.prototype,"_functionRasterInfos",void 0);v.__decorate([f.property()],oa.prototype,"_rasterJobHandler",void 0);v.__decorate([f.property({dependsOn:["_serviceSupportsMosaicRule"]})],oa.prototype,"_defaultServiceMosaicRule",
void 0);v.__decorate([k.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],oa.prototype,"readDefaultServiceMosaicRule",null);v.__decorate([f.property()],oa.prototype,"_cachedRendererJson",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"_serviceSourceType",void 0);v.__decorate([k.reader("_serviceSourceType",["serviceSourceType","fields"])],oa.prototype,"readServiceSourceType",null);v.__decorate([f.property({readOnly:!0})],oa.prototype,"_serviceSupportsMosaicRule",void 0);v.__decorate([k.reader("_serviceSupportsMosaicRule",
["currentVersion","fields"])],oa.prototype,"readServiceSupportsMosaicRule",null);v.__decorate([f.property()],oa.prototype,"rasterAttributeTableFieldPrefix",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"rasterFunctionNamesIndex",null);v.__decorate([f.property()],oa.prototype,"adjustAspectRatio",void 0);v.__decorate([f.property({readOnly:!0}),b.aliasOf("serviceRasterInfo.bandCount")],oa.prototype,"bandCount",void 0);v.__decorate([f.property({type:[c.Integer],json:{write:!0}})],oa.prototype,
"bandIds",void 0);v.__decorate([k.reader("bandIds")],oa.prototype,"readBandIds",null);v.__decorate([f.property({readOnly:!0,json:{read:!1}})],oa.prototype,"capabilities",void 0);v.__decorate([k.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],oa.prototype,"readCapabilities",null);v.__decorate([f.property({type:Number})],oa.prototype,"compressionQuality",void 0);v.__decorate([t.writer("compressionQuality")],oa.prototype,"writeCompressionQuality",null);v.__decorate([f.property({type:Number})],
oa.prototype,"compressionTolerance",void 0);v.__decorate([t.writer("compressionTolerance")],oa.prototype,"writeCompressionTolerance",null);v.__decorate([f.property({json:{read:{source:"copyrightText"}}})],oa.prototype,"copyright",void 0);v.__decorate([f.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],oa.prototype,"definitionExpression",void 0);v.__decorate([f.property({readOnly:!0,constructOnly:!0})],oa.prototype,"exportImageServiceParameters",
void 0);v.__decorate([f.property()],oa.prototype,"rasterInfo",void 0);v.__decorate([f.property({readOnly:!0,type:[e]})],oa.prototype,"fields",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"fieldsIndex",null);v.__decorate([f.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],oa.prototype,"format",null);v.__decorate([k.reader("service","format",["serviceDataType"])],oa.prototype,"readFormat",null);v.__decorate([f.property({type:ca})],oa.prototype,
"fullExtent",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"hasMultidimensions",void 0);v.__decorate([f.property({json:{read:{source:"maxImageHeight"}}})],oa.prototype,"imageMaxHeight",void 0);v.__decorate([f.property({json:{read:{source:"maxImageWidth"}}})],oa.prototype,"imageMaxWidth",void 0);v.__decorate([f.property({type:String,json:{type:M.interpolationKebab.jsonValues,read:M.interpolationKebab.read,write:M.interpolationKebab.write}})],oa.prototype,"interpolation",void 0);v.__decorate([f.property()],
oa.prototype,"minScale",void 0);v.__decorate([k.reader("service","minScale")],oa.prototype,"readMinScale",null);v.__decorate([f.property()],oa.prototype,"maxScale",void 0);v.__decorate([k.reader("service","maxScale")],oa.prototype,"readMaxScale",null);v.__decorate([f.property({type:A})],oa.prototype,"mosaicRule",null);v.__decorate([k.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],oa.prototype,"readMosaicRule",null);v.__decorate([t.writer("mosaicRule")],oa.prototype,"writeMosaicRule",null);
v.__decorate([f.property({readOnly:!0}),b.aliasOf("serviceRasterInfo.multidimensionalInfo")],oa.prototype,"multidimensionalInfo",void 0);v.__decorate([f.property({json:{type:c.Integer}})],oa.prototype,"noData",void 0);v.__decorate([t.writer("noData")],oa.prototype,"writeNoData",null);v.__decorate([f.property({type:String,json:{type:M.noDataInterpretationKebab.jsonValues,read:M.noDataInterpretationKebab.read,write:M.noDataInterpretationKebab.write}})],oa.prototype,"noDataInterpretation",void 0);v.__decorate([f.property({type:String,
readOnly:!0,json:{read:{source:["fields"]}}})],oa.prototype,"objectIdField",void 0);v.__decorate([k.reader("objectIdField")],oa.prototype,"readObjectIdField",null);v.__decorate([f.property({})],oa.prototype,"geometryType",void 0);v.__decorate([f.property({})],oa.prototype,"typeIdField",void 0);v.__decorate([f.property({})],oa.prototype,"types",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"parsedUrl",null);v.__decorate([f.property({readOnly:!0}),b.aliasOf("serviceRasterInfo.pixelSize.x")],
oa.prototype,"pixelSizeX",void 0);v.__decorate([f.property({readOnly:!0}),b.aliasOf("serviceRasterInfo.pixelSize.y")],oa.prototype,"pixelSizeY",void 0);v.__decorate([f.property({type:Function})],oa.prototype,"pixelFilter",void 0);v.__decorate([f.property()],oa.prototype,"raster",void 0);v.__decorate([f.property()],oa.prototype,"viewId",void 0);v.__decorate([f.property({types:U.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:U.websceneRasterRendererTypes,
name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Oa){return{enabled:Oa&&"vector-field"!==Oa.type&&"flow"!==Oa.type}}}}}}})],oa.prototype,"renderer",null);v.__decorate([k.reader("renderer")],oa.prototype,"readRenderer",null);v.__decorate([t.writer("renderer")],oa.prototype,"writeRenderer",null);v.__decorate([f.property()],oa.prototype,"symbolizer",void 0);v.__decorate([f.property(y.opacity)],oa.prototype,"opacity",void 0);v.__decorate([f.property({readOnly:!0}),b.aliasOf("serviceRasterInfo.attributeTable")],
oa.prototype,"rasterAttributeTable",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"rasterFields",null);v.__decorate([f.property({constructOnly:!0})],oa.prototype,"rasterFunctionInfos",void 0);v.__decorate([f.property({type:B})],oa.prototype,"renderingRule",null);v.__decorate([k.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],oa.prototype,"readRenderingRule",null);v.__decorate([t.writer("renderingRule")],oa.prototype,"writeRenderingRule",null);v.__decorate([f.property()],
oa.prototype,"serviceDataType",void 0);v.__decorate([f.property({readOnly:!0,type:Ua})],oa.prototype,"spatialReference",void 0);v.__decorate([k.reader("spatialReference",["spatialReference","extent"])],oa.prototype,"readSpatialReference",null);v.__decorate([f.property({json:{type:Va.jsonValues}})],oa.prototype,"pixelType",void 0);v.__decorate([k.reader("pixelType")],oa.prototype,"readPixelType",null);v.__decorate([t.writer("pixelType")],oa.prototype,"writePixelType",null);v.__decorate([f.property({constructOnly:!0,
type:C})],oa.prototype,"serviceRasterInfo",void 0);v.__decorate([f.property()],oa.prototype,"sourceJSON",void 0);v.__decorate([f.property(y.url)],oa.prototype,"url",void 0);v.__decorate([f.property({readOnly:!0})],oa.prototype,"version",void 0);v.__decorate([k.reader("version",["currentVersion","fields","timeInfo"])],oa.prototype,"readVersion",null);return oa=v.__decorate([g.subclass("esri.layers.mixins.ArcGISImageService")],oa)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(R,D,v,E,p,U,J,S,I){function w(q,l){if(!q)return null;if("classBreaks"===q.type&&q.classificationMethod){var b=q.authoringInfo||{classificationMethod:""};b.classificationMethod=q.classificationMethod;
q.authoringInfo=b}"vectorField"===q.type&&q.visualVariables&&!Array.isArray(q.visualVariables)&&(q.visualVariables=[q.visualVariables]);b=q?n[q.type]||null:null;if(b)return b=new b,b.read(q,l),b;l&&l.messages&&q&&l.messages.push(new D("renderer:unsupported","Renderers of type '"+(q.type||"unknown")+"' are not supported",{definition:q,context:l}));return null}const m={key:"type",base:null,typeMap:{"unique-value":S,"class-breaks":v,"raster-colormap":p,"raster-stretch":J,"vector-field":I,"raster-shaded-relief":U,
flow:E}},a={...m,typeMap:{...m.typeMap}};delete a.typeMap["vector-field"];delete a.typeMap.flow;const n={uniqueValue:S,classBreaks:v,rasterStretch:J,rasterColormap:p,vectorField:I,rasterShadedRelief:U,flowRenderer:E};R.ClassBreaksRenderer=v;R.FlowRenderer=E;R.RasterColormapRenderer=p;R.RasterShadedReliefRenderer=U;R.RasterStretchRenderer=J;R.UniqueValueRenderer=S;R.VectorFieldRenderer=I;R.fromJSON=function(q,l){return w(q,l)};R.rasterRendererTypes=m;R.read=w;R.websceneRasterRendererTypes=a;Object.defineProperties(R,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l){var b;E=new E.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});p=b=function(c){function f(g){g=c.call(this,g)||this;g.density=.8;g.color=new v([255,255,255,1]);g.maxPathLength=200;g.trailWidth=1.5;g.flowSpeed=10;g.trailLength=100;g.smoothing=0;g.flowRepresentation="flow-from";g.type="flow";g.authoringInfo=null;g.legendOptions=null;g.trailCap="butt";g.background="none";return g}R._inheritsLoose(f,c);var k=f.prototype;k.clone=function(){var g,t;const {density:y,
maxPathLength:r,trailWidth:d,flowSpeed:e,trailLength:h,smoothing:x,flowRepresentation:A,trailCap:z,background:M}=this,B=this.color.clone(),C=(this.visualVariables||[]).map(F=>F.clone()),u=null==(g=this.authoringInfo)?void 0:g.clone();g=null==(t=this.legendOptions)?void 0:t.clone();return new b({density:y,color:B,maxPathLength:r,trailWidth:d,flowSpeed:e,trailLength:h,trailCap:z,background:M,smoothing:x,flowRepresentation:A,visualVariables:C,authoringInfo:u,legendOptions:g})};k.getSymbol=function(g,
t){};k.getSymbolAsync=function(){var g=R._asyncToGenerator(function*(t,y){});return function(t,y){return g.apply(this,arguments)}}();k.getSymbols=function(){return[]};return f}(n.VisualVariablesMixin(p.JSONSupport));D.__decorate([J.property({type:Number,json:{write:!0}})],p.prototype,"density",void 0);D.__decorate([J.property({type:v,json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);D.__decorate([J.property({type:Number,cast:U.toPt,json:{write:!0}})],p.prototype,"maxPathLength",void 0);D.__decorate([J.property({type:Number,
cast:U.toPt,json:{write:!0}})],p.prototype,"trailWidth",void 0);D.__decorate([J.property({type:Number,json:{write:!0}})],p.prototype,"flowSpeed",void 0);D.__decorate([J.property({type:Number,json:{write:!0}})],p.prototype,"trailLength",void 0);D.__decorate([J.property({type:Number,cast:U.toPt,json:{write:!1}})],p.prototype,"smoothing",void 0);D.__decorate([J.property({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],p.prototype,"flowRepresentation",void 0);
D.__decorate([m.enumeration({flowRenderer:"flow"})],p.prototype,"type",void 0);D.__decorate([J.property({type:q,json:{write:!0}})],p.prototype,"authoringInfo",void 0);D.__decorate([J.property({type:l.LegendOptions,json:{write:!0}})],p.prototype,"legendOptions",void 0);D.__decorate([J.property({type:String,json:{write:!0}})],p.prototype,"trailCap",void 0);D.__decorate([J.property({type:String,json:{write:!0}})],p.prototype,"background",void 0);return p=b=D.__decorate([a.subclass("esri.renderers.FlowRenderer")],
p)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),function(R,D,v,E,p,U,J,S,I,w,m){var a;v=a=function(n){function q(b){b=n.call(this,b)||this;b.colormapInfos=
null;b.type="raster-colormap";return b}R._inheritsLoose(q,n);q.createFromColormap=function(b,c){if(!b)return null;const f=5===b[0].length;b=[...b].sort(k=>k[0][0]-k[1][0]).map(k=>{var g;return w.fromJSON({value:k[0],color:f?k.slice(1,5):k.slice(1,4).concat([255]),label:c?null!=(g=c[k[0]])?g:"":k[0]})});return new a({colormapInfos:b})};q.createFromColorramp=function(b){b=m.convertColorRampToColormap(b,256);return a.createFromColormap(b)};var l=q.prototype;l.clone=function(){return new a({colormapInfos:this.colormapInfos.map(b=>
b.toJSON())})};l.extractColormap=function(){return this.colormapInfos.map(({value:b,color:c})=>[b,c.r,c.g,c.b,1<c.a?c.a:255*c.a&255]).sort((b,c)=>b[0]-c[0])};return q}(v.JSONSupport);D.__decorate([E.property({type:[w],json:{write:!0}})],v.prototype,"colormapInfos",void 0);D.__decorate([S.enumeration({rasterColormap:"raster-colormap"})],v.prototype,"type",void 0);return v=a=D.__decorate([I.subclass("esri.renderers.RasterColormapRenderer")],v)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,D,v,E,p,U,J,S,I){E=function(w){function m(){var a=w.apply(this,arguments)||this;a.value=null;a.label=null;a.color=null;return a}R._inheritsLoose(m,w);return m}(E.JSONSupport);D.__decorate([p.property({type:Number,json:{write:!0}})],E.prototype,"value",void 0);D.__decorate([p.property({type:String,json:{write:!0}})],E.prototype,"label",void 0);D.__decorate([p.property({type:v,json:{type:[S.Integer],write:!0}})],E.prototype,"color",void 0);return E=D.__decorate([I.subclass("esri.renderers.support.ColormapInfo")],
E)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(R,D,v){function E(l,b){if(!l||!b||l.length!==b.length)return!1;for(let c=0;c<l.length;c++)if(l[c]>b[c]+2||l[c]<b[c]-2)return!1;return!0}function p(l,b){if(l){b=b?b:n;var c=null,f;"algorithmic"===l.type?b.some(k=>{if(E(l.fromColor.toRgb(),k.fromColor)&&E(l.toColor.toRgb(),k.toColor))return c=k.id,!0}):"multipart"===l.type&&b.some(k=>{if(l.colorRamps&&k.colorRamps&&l.colorRamps.length===
k.colorRamps.length&&(f=l.colorRamps,!k.colorRamps.some((g,t)=>{if(!E(f[t].fromColor.toRgb(),(new D(g.fromColor)).toRgb())||!E(f[t].toColor.toRgb(),(new D(g.toColor)).toRgb()))return!0}))){if(c)return!0;c=k.id}});return c}}function U(l){return(l=p(l))?q[l]:null}function J(l){l=l||{};const b=l.numColors||256;return{...l,numColors:b,distanceOffset:l.distanceOffset||0,interpolateAlpha:!!l.interpolateAlpha,distanceInterval:l.distanceInterval||1/(b-1),isCustomInterval:null!=l.isCustomInterval?l.isCustomInterval:
null!==l.distanceInterval&&l.distanceInterval!==1/(b-1),weights:l.weights}}function S(l,b){var c,f;let {fromColor:k,toColor:g}=l;3===k.length&&(k=k.concat([255]));3===g.length&&(g=g.concat([255]));var t=l.algorithm||"esriCIELabAlgorithm";const {numColors:y,distanceOffset:r,isCustomInterval:d,interpolateAlpha:e}=J(b);if(1===y&&0===r)return[k];if(2===y&&0===r&&!d)return[k,g];var h={r:k[0],g:k[1],b:k[2]};l={r:g[0],g:g[1],b:g[2]};if("esriCIELabAlgorithm"===t){{t=v.toLAB(h);l=v.toLAB(l);const {numColors:M,
distanceOffset:B,distanceInterval:C,isCustomInterval:u}=J(b);let {l:F,a:L,b:T}=t;t=(l.l-F)*C;h=(l.a-L)*C;b=(l.b-T)*C;var x=[];if(B){var A=B/C;F+=A*t;L+=A*h;T+=A*b}for(A=0;A<M-1;A++)x.push({l:F,a:L,b:T}),F+=t,L+=h,T+=b;x.push(u?{l:F,a:L,b:T}:l);l=x}}else if("esriHSVAlgorithm"===t){{t=v.toHSV(h);l=v.toHSV(l);const {numColors:M,distanceOffset:B,distanceInterval:C,isCustomInterval:u}=J(b);x=0===t.s;A=0===l.s;h=t.h;b=l.h;x&&!A?h=b:A&&!x&&(l={...l,h},b=h);x=Math.abs(b-h);180>x?b=(b-h)*C:(x=360-x,b=h>b?
x*C:-x*C);x=(l.s-t.s)*C;A=(l.v-t.v)*C;let {s:F,v:L}=t;t=h;B&&(h=B/C,t=(t+h*b+360)%360,F+=h*x,L+=h*A);h=[];for(var z=0;z<M-1;z++)h.push({h:t,s:F,v:L}),t=(t+b+360)%360,F+=x,L+=A;h.push(u?{h:t,s:F,v:L}:l);l=h}}else{{h=v.toLCH(h);l=v.toLCH(l);const {numColors:M,distanceOffset:B,distanceInterval:C,isCustomInterval:u}=J(b);b=h.h;x=l.h;t=2*Math.PI;b<=x?(A=x-b,b=x-b-t,b=Math.abs(b)<Math.abs(A)?b:A):(A=x+t-b,b=x-b,b=Math.abs(b)<Math.abs(A)?b:A);b*=C;x=(l.l-h.l)*C;A=(l.c-h.c)*C;let {l:F,c:L,h:T}=h;B&&(h=B/
C,F+=h*x,L+=h*A,T=(T+h*b+t)%t);h=[];for(z=0;z<M-1;z++)h.push({l:F,c:L,h:T}),F+=x,L+=A,T=(T+b+t)%t;h.push(u?{l:F,c:L,h:T}:l);l=h}}t=[];h=null!=(c=k[3])?c:255;c=((null!=(f=g[3])?f:255)-h)/(y-1);for(f=0;f<y;f++){const {r:M,g:B,b:C}=v.toRGB(l[f]);t.push([M,B,C,e?Math.round(h+c*f):255])}return t}function I(l,b){const {numColors:c,interpolateAlpha:f}=J(b);b=null==b?void 0:b.weights;({colorRamps:l}=l);if(b){const e=b.reduce((h,x)=>h+x);b=b.map(h=>h/e)}else{b=[];for(var k=0;k<l.length;k++)b[k]=1/l.length}k=
[];let g=0,t=0;const y=1/(c-1);let r=!1;for(let e=0;e<l.length;e++){var d=r?0:g*y-t;let h=e===l.length-1?c-1-g:(b[e]-d)/y;r=Math.ceil(h)===h;h=Math.ceil(h);0!==h&&(d/=b[e],d=S(l[e],{numColors:h,interpolateAlpha:f,distanceOffset:d,distanceInterval:y/b[e]}),g+=d.length,k.push(...d),t+=b[e])}b=[...l[l.length-1].toColor];3===b.length&&b.push(255);k.push(b);return k}function w(l,b=256,c=!1){l="toJSON"in l?l.toJSON():l;b={numColors:b,interpolateAlpha:c};return"multipart"===l.type?I(l,b):S(l,b)}function m(l){if(l){var b=
l.toJSON();return{Algorithm:(null==b?void 0:b.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:a(l.fromColor),ToColor:a(l.toColor)}}}function a(l){l=v.toHSV(l);return{type:"HsvColor",Hue:l.h,Saturation:l.s,Value:l.v,AlphaValue:255}}const n=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,
251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,
146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,
102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,
0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,
0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,
252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",
type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,
204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},
{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,
0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,
153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,
255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,
147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],q={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",
brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",
elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",
pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",
purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",
spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};
R.PREDEFINED_COLOR_RAMP_NAME_MAP=q;R.PREDEFINED_JSON_COLOR_RAMPS=n;R.convertColorRampToColormap=function(l,b=256,c=!1){l=w(l,b,c);l.forEach((f,k)=>{f.unshift(k);c||f.pop()});return l};R.convertColorRampToColors=w;R.getColorRampId=p;R.getColorRampName=U;R.getRFxArgColorRampValue=function(l){const b=U(l);if(l){if("algorithmic"===l.type)return{...m(l),Name:b};if(l.colorRamps)return l=l.colorRamps.map(m),{type:"MultiPartColorRamp",NumColorRamps:l.length,ArrayOfColorRamp:l,Name:b}}};R.rgbaConvertTo32Bit=
function(l){l=l.reverse().map(b=>{b=b.toString(16);return 2>b.length?"0"+b:b});return 4294967295&Number.parseInt(l.join(""),16)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(R){function D(w,m){const a=[];let n,q;if(w[0].length!==m.length)throw"dimensions do not match";const l=w.length,b=w[0].length;let c=0;for(n=0;n<l;n++){for(q=c=0;q<b;q++)c+=w[n][q]*m[q];a.push(c)}return a}function v(w){w=
[w.r/255,w.g/255,w.b/255].map(m=>.04045>=m?m/12.92:((m+.055)/1.055)**2.4);w=D(S,w);return{x:100*w[0],y:100*w[1],z:100*w[2]}}function E(w){w=D(I,[w.x/100,w.y/100,w.z/100]).map(m=>Math.min(1,Math.max(.0031308>=m?12.92*m:1.055*m**(1/2.4)-.055,0)));return{r:Math.round(255*w[0]),g:Math.round(255*w[1]),b:Math.round(255*w[2])}}function p(w){w=[w.x/95.047,w.y/100,w.z/108.883].map(m=>m>(6/29)**3?m**(1/3):1/3*(29/6)**2*m+4/29);return{l:116*w[1]-16,a:500*(w[0]-w[1]),b:200*(w[1]-w[2])}}function U(w){const m=
w.l;w=[(m+16)/116+w.a/500,(m+16)/116,(m+16)/116-w.b/200].map(a=>a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*w[0],y:100*w[1],z:108.883*w[2]}}function J(w){if("r"in w&&"g"in w&&"b"in w)return w;if("l"in w&&"c"in w&&"h"in w){var m=w.c;var a=w.h;m={l:w.l,a:m*Math.cos(a),b:m*Math.sin(a)};return E(U(m))}if("l"in w&&"a"in w&&"b"in w)return E(U(w));if("x"in w&&"y"in w&&"z"in w)return E(w);if("h"in w&&"s"in w&&"v"in w){{a=(w.h+360)%360/60;m=w.v/100*255;w=w.s/100*m;const n=w*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a=
{r:w,g:n,b:0};break;case 1:a={r:n,g:w,b:0};break;case 2:a={r:0,g:w,b:n};break;case 3:a={r:0,g:n,b:w};break;case 4:a={r:n,g:0,b:w};break;case 5:case 6:a={r:w,g:0,b:n};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+m-w);a.g=Math.round(a.g+m-w);a.b=Math.round(a.b+m-w);m=a}return m}return w}const S=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],I=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];R.darken=function(w,m){w=p(v(w));w.l*=1-m;return E(U(w))};R.toHSV=function(w){if("h"in
w&&"s"in w&&"v"in w)return w;var m=J(w);{w=m.r;const a=m.g,n=m.b;m=Math.max(w,a,n);const q=m-Math.min(w,a,n);w=0===q?0:m===w?(a-n)/q%6:m===a?(n-w)/q+2:(w-a)/q+4;0>w&&(w+=6);w={h:60*w,s:100*(0===q?0:q/m),v:100/255*m}}return w};R.toLAB=function(w){return"l"in w&&"a"in w&&"b"in w?w:p(v(J(w)))};R.toLCH=function(w){if(!("l"in w&&"c"in w&&"h"in w)){{var m=p(v(J(w)));w=m.l;var a=m.a;const n=m.b;m=Math.sqrt(a*a+n*n);a=Math.atan2(n,a);a=0<a?a:a+2*Math.PI;w={l:w,c:m,h:a}}}return w};R.toRGB=J;R.toXYZ=function(w){return"x"in
w&&"y"in w&&"z"in w?w:v(J(w))};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(R,D,v,E,p,U,J,S,I,w){var m;v=m=function(a){function n(l){l=a.call(this,l)||this;l.altitude=45;l.azimuth=315;l.colorRamp=null;l.hillshadeType="multi-directional";l.pixelSizePower=.664;l.pixelSizeFactor=.024;l.scalingType="none";l.type="raster-shaded-relief";l.zFactor=1;return l}R._inheritsLoose(n,a);var q=n.prototype;q.readColorRamp=function(l){return w.fromJSON(l)};q.clone=function(){return new m({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:E.clone(this.colorRamp)})};return n}(v.JSONSupport);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"altitude",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"azimuth",void 0);D.__decorate([p.property({types:w.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);D.__decorate([S.reader("colorRamp")],v.prototype,"readColorRamp",null);D.__decorate([p.property({type:["traditional",
"multi-directional"],json:{write:!0}})],v.prototype,"hillshadeType",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizePower",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizeFactor",void 0);D.__decorate([p.property({type:["none","adjusted"],json:{write:!0}})],v.prototype,"scalingType",void 0);D.__decorate([J.enumeration({rasterShadedRelief:"raster-shaded-relief"})],v.prototype,"type",void 0);D.__decorate([p.property({type:Number,
json:{write:!0}})],v.prototype,"zFactor",void 0);return v=m=D.__decorate([I.subclass("esri.renderers.RasterShadedReliefRenderer")],v)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a){var n;v=n=function(q){function l(c){c=q.call(this,c)||this;c.colorRamp=null;c.computeGamma=!1;c.dynamicRangeAdjustment=!1;c.gamma=[];c.maxPercent=null;c.minPercent=null;c.numberOfStandardDeviations=null;c.outputMax=null;c.outputMin=null;c.sigmoidStrengthLevel=null;c.statistics=[];c.histograms=null;c.useGamma=!1;c.stretchType="none";c.type="raster-stretch";return c}R._inheritsLoose(l,q);var b=l.prototype;b.readColorRamp=function(c){if(c)return a.fromJSON(c)};b.writeStatistics=
function(c,f,k){var g;null!=(g=c)&&g.length&&(Array.isArray(c[0])||(c=c.map(t=>[t.min,t.max,t.avg,t.stddev])),f[k]=c)};b.readStretchType=function(c,f){c=f.stretchType;"number"===typeof c&&(c=m.stretchTypeFunctionEnum[c]);return m.stretchTypeJSONDict.read(c)};b.clone=function(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:E.clone(this.statistics),gamma:E.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:E.clone(this.colorRamp),histograms:E.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return l}(v.JSONSupport);D.__decorate([p.property({types:a.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);D.__decorate([S.reader("colorRamp")],v.prototype,"readColorRamp",null);D.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"computeGamma",
void 0);D.__decorate([p.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0);D.__decorate([p.property({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"numberOfStandardDeviations",
void 0);D.__decorate([p.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0);D.__decorate([p.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0);D.__decorate([p.property({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0);D.__decorate([p.property()],v.prototype,"histograms",void 0);
D.__decorate([w.writer("statistics")],v.prototype,"writeStatistics",null);D.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0);D.__decorate([p.property({type:m.stretchTypeJSONDict.apiValues,json:{type:m.stretchTypeJSONDict.jsonValues,write:m.stretchTypeJSONDict.write}})],v.prototype,"stretchType",void 0);D.__decorate([S.reader("stretchType",["stretchType"])],v.prototype,"readStretchType",null);D.__decorate([J.enumeration({rasterStretch:"raster-stretch"})],v.prototype,
"type",void 0);return v=n=D.__decorate([I.subclass("esri.renderers.RasterStretchRenderer")],v)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(R,D){D=new D.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});R.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
R.stretchTypeJSONDict=D;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l,b,c,f,k,g,t,y,r,d,e,h,x,A){var z;const M=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);E=new J.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
J=new J.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});S=z=function(B){function C(F){F=B.call(this,F)||this;F.attributeField="Magnitude";F.flowRepresentation="flow-from";F.rotationType="arithmetic";F.style="single-arrow";F.symbolTileSize=50;F.type="vector-field";return F}R._inheritsLoose(C,B);var u=C.prototype;u.readInputUnit=function(F,L){return M.has(F)?c.unitKebabDict.fromJSON(F):null};u.readOutputUnit=function(F,L){return M.has(F)?c.unitKebabDict.fromJSON(F):null};u.clone=function(){return new z({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:I.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};u.getGraphicsFromPixelData=function(){var F=R._asyncToGenerator(function*(L,T=!1,H=[]){var G;const P=[];var O=c.getUnitConversionFactor(this.inputUnit,this.outputUnit),V=(null==(G=this.rotationVariables[0])?void 0:G.rotationType)||this.rotationType;T=T?c.convertVectorFieldData(L.pixelBlock,
"vector-uv",V,O):c.convertVectorFieldUnit(L.pixelBlock,"vector-magdir",O);if(w.isNone(T))return P;L=L.extent;G=T.mask&&0<T.mask.length;O=0;V=(L.xmax-L.xmin)/T.width;const X=(L.ymax-L.ymin)/T.height;for(let ba=0;ba<T.height;ba++)for(let ea=0;ea<T.width;ea++,O++){let ca=new A({x:L.xmin+ea*V+V/2,y:L.ymax-ba*X-X/2,spatialReference:L.spatialReference});ca=(yield b.normalizeCentralMeridian(ca))[0];var Y=H.some(da=>da.intersects(ca));G&&!T.mask[O]||Y||(Y=new p({geometry:{type:"point",x:ca.x,y:ca.y,spatialReference:L.spatialReference},
attributes:{Magnitude:T.pixels[0][O],Direction:T.pixels[1][O]}}),Y.symbol=this._getVisualVariablesAppliedSymbol(Y),P.push(Y))}return P});return function(L){return F.apply(this,arguments)}}();u.getSymbol=function(F,L){};u.getSymbolAsync=function(){var F=R._asyncToGenerator(function*(L,T){});return function(L,T){return F.apply(this,arguments)}}();u.getSymbols=function(){return[]};u.getClassBreakInfos=function(){var F;return null==(F=this.styleRenderer)?void 0:F.classBreakInfos};u.getDefaultSymbol=function(){var F;
return null==(F=this.styleRenderer)?void 0:F.defaultSymbol};u._getDefaultSymbol=function(F){return new e({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new d({width:0}),size:20,color:F||new v([0,92,230])})};u._getVisualVariablesAppliedSymbol=function(F){if(F){var L=this.styleRenderer&&this.styleRenderer.getSymbol(F);L=L.clone();var T=this.sizeVariables,H=this.rotationVariables;T&&T.length&&this.sizeVariables.forEach(G=>h.applySizesToSymbol(L,r.getAllSizes([G],F)));H&&H.length&&(F.attributes.Direction+=
"flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(G=>h.applyRotationToSymbol(L,r.getRotationAngle(G,F),G.axis)));return L}};u._createStyleRenderer=function(F){let L={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(F){case "single-arrow":L=this._createSingleArrowRenderer();break;case "beaufort-kn":L=this._createBeaufortKnotsRenderer();break;case "beaufort-m":L=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":L=this._createBeaufortFeetRenderer();break;case "beaufort-mi":L=this._createBeaufortMilesRenderer();break;case "beaufort-km":L=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":L=this._createCurrentMeterRenderer();break;case "ocean-current-kn":L=this._createCurrentKnotsRenderer();break;case "simple-scalar":L=this._createSimpleScalarRenderer();break;case "wind-barb":L=this._createWindBarbsRenderer();break;case "classified-arrow":L=this._createClassifiedArrowRenderer()}return new f(L)};
u._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};u._createBeaufortKnotsRenderer=function(){const F=this._getDefaultSymbol(new v([214,47,39])),L=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:F,classBreakInfos:L}};u._createBeaufortMeterRenderer=function(){const F=this._getDefaultSymbol(new v([214,
47,39])),L=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:F,classBreakInfos:L}};u._createBeaufortFeetRenderer=function(){const F=this._getDefaultSymbol(new v([214,47,39]));var L=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];L=L.map(T=>3.28084*T);L=this._getClassBreaks(L,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:F,classBreakInfos:L}};u._createBeaufortMilesRenderer=function(){const F=this._getDefaultSymbol(new v([214,47,39]));var L=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];L=L.map(T=>2.23694*T);L=this._getClassBreaks(L,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:F,classBreakInfos:L}};u._createBeaufortKilometersRenderer=function(){const F=this._getDefaultSymbol(new v([214,47,39]));var L=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];L=L.map(T=>3.6*T);L=this._getClassBreaks(L,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:F,
classBreakInfos:L}};u._createCurrentMeterRenderer=function(){const F=this._getDefaultSymbol(new v([177,177,177])),L=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:F,classBreakInfos:L}};u._createCurrentKnotsRenderer=function(){const F=this._getDefaultSymbol(new v([177,177,177])),L=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:F,classBreakInfos:L}};u._createClassifiedArrowRenderer=function(){var F;const L=this._getDefaultSymbol(new v([56,168,0]));var T=[0,1E-6,3.5,7,10.5,14];if(null!=(F=this.sizeVariables)&&F.length){const H=this.sizeVariables[0].minDataValue;F=this.sizeVariables[0].maxDataValue;if(H&&F){const G=(F-H)/5;T=Array.from(Array(6).keys()).map(P=>H+G*P)}}T=this._getClassBreaks(T,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:L,classBreakInfos:T}};u._createSimpleScalarRenderer=
function(){return{defaultSymbol:x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};u._createWindBarbsRenderer=function(){const F=Array.from(Array(31).keys()).map(G=>5*G),L=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],T=x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),H=F.map((G,P)=>{if(P!==F.length-1)if(0===P)var O={minValue:G,maxValue:F[P+1],symbol:T};else O=x.fromJSON({type:"esriPMS",imageData:L[P].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),O={minValue:G,maxValue:F[P+1],symbol:O};return new g(O)});return{defaultSymbol:T,classBreakInfos:H}};u._getClassBreaks=function(F,L){return L.map((T,H)=>new g({minValue:F[H],maxValue:F[H+1],symbol:this._getDefaultSymbol(new v(T))}))};R._createClass(C,[{key:"styleRenderer",
get:function(){const F=this.attributeField,L=this._createStyleRenderer(this.style);L.field=F;return L}},{key:"sizeVariables",get:function(){const F=[];if(this.visualVariables)for(var L of this.visualVariables)"size"===L.type&&F.push(L);0===F.length&&(L=new y({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(L):this._set("visualVariables",[L]),F.push(L));return F}},{key:"rotationVariables",get:function(){const F=[];if(this.visualVariables)for(var L of this.visualVariables)"rotation"===
L.type&&F.push(L);0===F.length&&(L=new t({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(L):this._set("visualVariables",[L]),F.push(L));return F}}]);return C}(k.VisualVariablesMixin(S.JSONSupport));D.__decorate([m.property({type:String,json:{write:!0}})],S.prototype,"attributeField",void 0);D.__decorate([m.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},write:{writer:J.write}}})],S.prototype,"flowRepresentation",void 0);D.__decorate([m.property({type:["geographic",
"arithmetic"],json:{write:!0}})],S.prototype,"rotationType",void 0);D.__decorate([m.property({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],S.prototype,"style",void 0);D.__decorate([m.property({json:{write:!0}})],S.prototype,"symbolTileSize",void 0);D.__decorate([m.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,write:{writer:c.unitKebabDict.write}}})],S.prototype,"inputUnit",void 0);D.__decorate([q.reader("inputUnit")],S.prototype,
"readInputUnit",null);D.__decorate([m.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,read:{reader:c.unitKebabDict.read},write:{writer:c.unitKebabDict.write}}})],S.prototype,"outputUnit",void 0);D.__decorate([q.reader("outputUnit")],S.prototype,"readOutputUnit",null);D.__decorate([n.enumeration({vectorField:"vector-field"})],S.prototype,"type",void 0);D.__decorate([m.property({type:f})],S.prototype,"styleRenderer",null);D.__decorate([m.property({type:y})],S.prototype,
"sizeVariables",null);D.__decorate([m.property({type:t})],S.prototype,"rotationVariables",null);return S=z=D.__decorate([l.subclass("esri.renderers.VectorFieldRenderer")],S)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(R,D,v,E,p){function U(d,e){return b.get(d)/b.get(e)||1}function J(d,e="geographic"){const [h,x]=d;d=Math.sqrt(h*h+x*x);let A=Math.atan2(x,h)*c;A=(360+A)%
360;"geographic"===e&&(A=(450-A)%360);return[d,A]}function S(d,e="geographic"){let h=d[1];"geographic"===e&&(h=(450-h)%360);h%=360;d=d[0];return[d*Math.cos(h/c),d*Math.sin(h/c)]}function I(d,e,h="geographic",x=1){if(!p.isValidPixelBlock(d))return d;const {pixels:A,width:z,height:M}=d;var B=z*M;const C=A[0],u=A[1],F=d.pixelType.startsWith("f")?d.pixelType:"f32",L=E.createEmptyBand(F,B);B=E.createEmptyBand(F,B);let T=0;for(let H=0;H<M;H++)for(let G=0;G<z;G++)"vector-uv"===e?([L[T],B[T]]=J([C[T],u[T]],
h),L[T]*=x):([L[T],B[T]]=S([C[T],u[T]],h),L[T]*=x,B[T]*=x),T++;d=new E({pixelType:F,width:d.width,height:d.height,mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,pixels:[L,B]});d.updateStatistics();return d}function w(d=0,e=Math.PI,h=!0){h&&(e=(2*Math.PI-e)%(2*Math.PI));var x=h?-1:1;h=5*x;const A=20*x,z=25*x;x*=2;let [M,B]=[5,0-A],[C,u]=[M+2,B],[F,L]=[C-0,u+x],[T,H]=[-5,0-z],[G,P]=[T+0,H-x];d=Math.ceil(d/5);let O=Math.floor(d/10);d-=8*O;const V=[],X=[];for(let aa=0;aa<d/2;aa++,
O--){0>=O&&1===d%2&&aa===(d-1)/2&&(T=0,G=T+0,H=(H+B)/2,P=H-x);const [ia,ja]=m(T,H,e,45);if(0<O){const [ka,qa]=m(C,H,e,45),[ma,ya]=m(M,B,e,45);V.push(ka);V.push(qa);V.push(ia);V.push(ja);V.push(ma);V.push(ya)}else{const [ka,qa]=m(C,u,e,45),[ma,ya]=m(F,L,e,45),[sa,ra]=m(G,P,e,45);X.push(ia);X.push(ja);X.push(sa);X.push(ra);X.push(ma);X.push(ya);X.push(ka);X.push(qa)}H+=h;B+=h;u+=h;L+=h;P+=h}const [Y,ba]=m(5,0+A,e,45),[ea,ca]=m(7,0+A,e,45),[da,Q]=m(5,0-z,e,45),[W,fa]=m(7,0-z,e,45);return{pennants:V,
barbs:X,shaft:[Y,ba,ea,ca,da,Q,W,fa]}}function m(d,e,h,x=1){return[Math.sqrt(d*d+e*e)/x,(2*Math.PI+(2*Math.PI+Math.atan2(e,d))%(2*Math.PI)-h)%(2*Math.PI)]}function a(d,e,h,x){h=U(x||"knots",h);for(x=1;x<e.length;x++)if(x===e.length-1){if(d<e[x]*h)break}else if(d<=e[x]*h)break;return Math.min(x-1,e.length-2)}function n(d,e,h,x,A){let z=0;switch(e){case "beaufort_kn":z=a(d,g,"knots",h);break;case "beaufort_km":z=a(d,g,"kilometer-per-hour",h);break;case "beaufort_ft":z=a(d,g,"feet-per-second",h);break;
case "beaufort_m":z=a(d,g,"meter-per-second",h);break;case "classified_arrow":z=a(d,A,x,h);break;case "ocean_current_m":z=a(d,t,"meter-per-second",h);break;case "ocean_current_kn":z=a(d,y,"knots",h)}return z}function q(d,e){const {style:h,inputUnit:x,outputUnit:A,breakValues:z}=e;e=f.fromJSON(x);const M=f.fromJSON(A);let B=0,C=0;const {width:u,height:F,mask:L}=d,T=d.pixels[0];d=d.pixels[1];var H=L?L.filter(V=>0<V).length:u*F;const G=new Float32Array(42*H);H=new Uint32Array(15*H);for(let V=0;V<F;V++)for(let X=
0;X<u;X++){var P=V*u+X;if(!L||L[V*u+X]){var O;const Y=null!=(O=(d[P]+360)%360/180*Math.PI)?O:2*Math.PI*Math.random(),ba=n(T[P],h,e,M,z);for(let ea=0;ea<k.length;ea+=2)G[B++]=(X+.5)/u,G[B++]=(V+.5)/F,G[B++]=k[ea],G[B++]=k[ea+1]+Y,G[B++]=ba,G[B++]=T[P];P=7*(B/42-1);H[C++]=P;H[C++]=P+1;H[C++]=P+2;H[C++]=P+0;H[C++]=P+4;H[C++]=P+3;H[C++]=P+0;H[C++]=P+2;H[C++]=P+3;H[C++]=P+2;H[C++]=P+5;H[C++]=P+3;H[C++]=P+5;H[C++]=P+6;H[C++]=P+3}}return{vertexData:G,indexData:H}}function l(d,e){let h=0,x=0;const {width:A,
height:z,mask:M}=d;d=d.pixels[0];const B=[],C=[];var u=f.fromJSON(e.inputUnit);u=U(u,"knots");e="wind_speed"===e.style?5:Number.MAX_VALUE;for(let L=0;L<z;L++)for(let T=0;T<A;T++){var F=d[L*A+T]*u;if((!M||M[L*A+T])&&F<e){for(let H=0;4>H;H++)B[h++]=(T+.5)/A,B[h++]=(L+.5)/z,B[h++]=2>H?-.5:.5,B[h++]=0===H%2?-.5:.5,B[h++]=0,B[h++]=F;F=4*(h/24-1);C[x++]=F;C[x++]=F+1;C[x++]=F+2;C[x++]=F+1;C[x++]=F+2;C[x++]=F+3}}return{vertexData:new Float32Array(B),indexData:new Uint32Array(C)}}const b=new Map;b.set("meter-per-second",
1);b.set("kilometer-per-hour",.277778);b.set("knots",.514444);b.set("feet-per-second",.3048);b.set("mile-per-hour",.44704);const c=180/Math.PI,f=new D.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),k=function(d=0,e=0,h=Math.PI,x=!0){x&&(h=(2*Math.PI-h)%(2*Math.PI));x=x?-1:1;const A=-7*x,z=-2*x,M=-16*x,[B,C]=m(0,e+13*x,h,21.75),[u,F]=m(d-5.5,e+A,h,21.75),[L,T]=m(d+5.5,
e+A,h,21.75),[H,G]=m(d-1.5,e+z,h,21.75),[P,O]=m(d+1.5,e+z,h,21.75),[V,X]=m(d-1.5,e+M,h,21.75),[Y,ba]=m(d+1.5,e+M,h,21.75);return[B,C,u,F,H,G,P,O,L,T,V,X,Y,ba]}(0,0,0),g=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[0,.5,1,1.5,2],y=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],r=[];R.convertToLocalDirections=function(d,e,h,x="geographic"){if(!p.isValidPixelBlock(d)||v.isNone(h))return d;d="vector-magdir"===e?d.clone():v.unwrap(I(d,e));const A=d.pixels[1];for(let z=0;z<A.length;z++)A[z]="geographic"===x?(A[z]+h[z]+270)%
360:(A[z]+360-h[z])%360;return"vector-magdir"===e?d:I(d,"vector-magdir")};R.convertVectorFieldData=I;R.convertVectorFieldUnit=function(d,e,h=1){if(1===h||!p.isValidPixelBlock(d))return d;d=d.clone();const {pixels:x,width:A,height:z}=d,M=x[0],B=x[1];let C=0;for(let u=0;u<z;u++)for(let F=0;F<A;F++)"vector-uv"===e?(M[C]*=h,B[C]*=h):M[C]*=h,C++;d.updateStatistics();return d};R.createVFMesh=function(d,e){if("simple_scalar"===e.style)var h=l(d,e);else if("wind_speed"===e.style){{if(0===r.length)for(var x=
0;30>x;x++)r.push(w(5*x,0));e=f.fromJSON(e.inputUnit);e=U(e,"knots");const {width:B,height:C,mask:u}=d;x=d.pixels[0];d=d.pixels[1];const F=[],L=[];let T=0,H=0;for(let G=0;G<C;G++)for(let P=0;P<B;P++){var A=G*B+P,z=x[A]*e;if((!u||u[G*B+P])&&5<=z){const O=null!=(h=(d[A]+360)%360/180*Math.PI)?h:2*Math.PI*Math.random(),{pennants:V,barbs:X,shaft:Y}=r[Math.min(Math.floor(z/5),29)];if(0===V.length+X.length)continue;A=F.length/6;const ba=(P+.5)/B,ea=(G+.5)/C;for(var M=0;M<V.length;M+=2)F[T++]=ba,F[T++]=ea,
F[T++]=V[M],F[T++]=V[M+1]+O,F[T++]=0,F[T++]=z;for(M=0;M<X.length;M+=2)F[T++]=ba,F[T++]=ea,F[T++]=X[M],F[T++]=X[M+1]+O,F[T++]=0,F[T++]=z;for(M=0;M<Y.length;M+=2)F[T++]=ba,F[T++]=ea,F[T++]=Y[M],F[T++]=Y[M+1]+O,F[T++]=0,F[T++]=z;for(z=0;z<V.length/6;z++)L[H++]=A,L[H++]=A+1,L[H++]=A+2,A+=3;for(z=0;z<X.length/8;z++)L[H++]=A,L[H++]=A+1,L[H++]=A+2,L[H++]=A+1,L[H++]=A+2,L[H++]=A+3,A+=4;L[H++]=A+0;L[H++]=A+1;L[H++]=A+2;L[H++]=A+1;L[H++]=A+3;L[H++]=A+2;A+=4}}h={vertexData:new Float32Array(F),indexData:new Uint32Array(L)}}}else h=
q(d,e);return h};R.createVFMeshScalar=l;R.getUnitConversionFactor=U;R.sampleVectorField=function(d,e,h,x=[0,0],A=.5){const {width:z,height:M,mask:B}=d,[C,u]=d.pixels,[F,L]=x;d=Math.round((z-F)/h);x=Math.round((M-L)/h);var T=d*x;const H=new Float32Array(T),G=new Float32Array(T);T=new Uint8Array(T);e="vector-uv"===e;for(let O=0;O<x;O++)for(let V=0;V<d;V++){let X=0;const Y=O*d+V,ba=Math.max(0,O*h+L),ea=Math.max(0,V*h+F),ca=Math.min(M,ba+h),da=Math.min(z,ea+h);for(let Q=ba;Q<ca;Q++)for(let W=ea;W<da;W++){var P=
Q*z+W;if(!B||B[P]){X++;P=e?[C[P],u[P]]:[C[P],(360+u[P])%360];const [fa,aa]=e?P:S(P);H[Y]+=fa;G[Y]+=aa}}if(X>=(ca-ba)*(da-ea)*(1-A)){T[Y]=1;const [Q,W]=J([H[Y]/X,G[Y]/X]);H[Y]=Q;G[Y]=W}else T[Y]=0,H[Y]=0,G[Y]=0}h=new E({width:d,height:x,pixels:[H,G],mask:T});h.updateStatistics();return h};R.snapImageToSymbolTile=function(d,e,h,x,A){if(v.isNone(A)||!A.spatialReference.equals(d.spatialReference))return{extent:d,width:Math.round(e/x),height:Math.round(h/x),resolution:d.width/e};const z=A.xmin;A=A.ymax;
e=(d.xmax-d.xmin)/e*x;h=(d.ymax-d.ymin)/h*x;d.xmin=z+Math.floor((d.xmin-z)/e)*e;d.xmax=z+Math.ceil((d.xmax-z)/e)*e;d.ymin=A+Math.floor((d.ymin-A)/h)*h;d.ymax=A+Math.ceil((d.ymax-A)/h)*h;return{extent:d,width:Math.round(d.width/e),height:Math.round(d.height/h),resolution:(e+h)/2}};R.unitKebabDict=f;R.uvComponentToVector=J;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m){var a;const n=J.getLogger("esri.layers.support.PixelBlock");v=a=function(q){function l(c){c=q.call(this,c)||this;c.width=null;c.height=null;c.pixelType="f32";c.validPixelCount=null;c.mask=null;c.maskIsAlpha=!1;c.pixels=null;c.statistics=null;return c}R._inheritsLoose(l,q);l.createEmptyBand=function(c,f){return new (a.getPixelArrayConstructor(c))(f)};l.getPixelArrayConstructor=function(c){let f;switch(c){case "u1":case "u2":case "u4":case "u8":f=Uint8Array;break;case "u16":f=
Uint16Array;break;case "u32":f=Uint32Array;break;case "s8":f=Int8Array;break;case "s16":f=Int16Array;break;case "s32":f=Int32Array;break;case "f32":f=Float32Array;break;case "f64":f=Float64Array;break;case "c64":case "c128":case "unknown":f=Float32Array}return f};var b=l.prototype;b.castPixelType=function(c){if(!c)return"f32";c=c.toLowerCase();["u1","u2","u4"].includes(c)?c="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(c)||(c="f32");return c};b.getPlaneCount=function(){return this.pixels&&
this.pixels.length};b.addData=function(c){if(!c.pixels||c.pixels.length!==this.width*this.height)throw new E("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(c.pixels);this.statistics.push(c.statistics||{minValue:null,maxValue:null})};b.getAsRGBA=function(){const c=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(c);
break;default:this._fillFrom8Bit(c)}return new Uint8ClampedArray(c)};b.getAsRGBAFloat=function(){const c=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(c);return c};b.updateStatistics=function(){this.statistics=this.pixels.map(k=>this._calculateBandStatistics(k,this.mask));const c=this.mask;let f=0;if(c)for(let k=0;k<c.length;k++)c[k]&&f++;else f=this.width*this.height;this.validPixelCount=f};b.clamp=function(c){if(c&&"f64"!==c&&"f32"!==c){switch(c){case "u8":var f=[0,255];break;case "u16":f=
[0,65535];break;case "u32":f=[0,4294967295];break;case "s8":f=[-128,127];break;case "s16":f=[-32768,32767];break;case "s32":f=[-2147483648,2147483647];break;default:f=[-3.4*1E39,3.4*1E39]}var [k,g]=f;f=this.pixels;var t=this.width*this.height,y=f.length,r=[];for(let x=0;x<y;x++){var d=a.createEmptyBand(c,t);var e=f[x];for(let A=0;A<t;A++){var h=e[A];d[A]=h>g?g:h<k?k:h}r.push(d)}this.pixels=r;this.pixelType=c}};b.extractBands=function(c){if(S.isNone(c)||0===c.length||null==this.pixels||0===this.pixels.length)return this;
var f=this.pixels.length;const k=c.some(g=>g>=this.pixels.length);f=f===c.length&&!c.some((g,t)=>g!==t);return k||f?this:new a({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:c.map(g=>this.pixels[g]),statistics:this.statistics&&c.map(g=>this.statistics[g])})};b.clone=function(){const c=new a({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(c.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let f;const k=a.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){c.pixels=[];const g=this.pixels[0].slice;for(f=0;f<this.pixels.length;f++)c.pixels[f]=g?this.pixels[f].slice(0,this.pixels[f].length):new k(this.pixels[f])}if(this.statistics)for(c.statistics=[],f=0;f<this.statistics.length;f++)c.statistics[f]=U.clone(this.statistics[f]);return c};b._fillFrom8Bit=function(c){const {mask:f,
maskIsAlpha:k,pixels:g}=this;if(c&&g&&g.length){var t,y;var r=t=y=g[0];3<=g.length?(t=g[1],y=g[2]):2===g.length&&(t=g[1]);var d=new Uint32Array(c),e=this.width*this.height;if(r.length!==e)n.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(f&&f.length===e)if(k)for(c=0;c<e;c++)f[c]&&(d[c]=f[c]<<24|y[c]<<16|t[c]<<8|r[c]);else for(c=0;c<e;c++)f[c]&&(d[c]=-16777216|y[c]<<16|t[c]<<8|r[c]);else for(c=0;c<e;c++)d[c]=-16777216|y[c]<<16|t[c]<<8|r[c]}else n.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};b._fillFromNon8Bit=function(c){const {pixels:f,mask:k,statistics:g}=this;if(c&&f&&f.length){var t=this.pixelType,y=1,r=0;y=1;g&&0<g.length?(r=g.map(A=>A.minValue).reduce((A,z)=>Math.min(A,z)),y=g.map(A=>A.maxValue-A.minValue).reduce((A,z)=>Math.max(A,z)),y=255/y):(y=255,"s8"===t?(r=-128,y=127):"u16"===t?y=65535:"s16"===t?(r=-32768,y=32767):"u32"===t?y=4294967295:"s32"===t?(r=-2147483648,y=2147483647):"f32"===t?(r=-3.4*1E39,y=3.4*1E39):
"f64"===t&&(r=-Number.MAX_VALUE,y=Number.MAX_VALUE),y=255/(y-r));c=new Uint32Array(c);t=this.width*this.height;var d,e,h;var x=d=e=f[0];if(x.length!==t)return n.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=f.length)if(d=f[1],3<=f.length&&(e=f[2]),k&&k.length===t)for(h=0;h<t;h++)k[h]&&(c[h]=-16777216|(e[h]-r)*y<<16|(d[h]-r)*y<<8|(x[h]-r)*y);else for(h=0;h<t;h++)c[h]=-16777216|(e[h]-r)*y<<16|(d[h]-r)*y<<8|(x[h]-r)*y;else if(k&&k.length===t)for(h=0;h<t;h++)d=(x[h]-
r)*y,k[h]&&(c[h]=-16777216|d<<16|d<<8|d);else for(h=0;h<t;h++)d=(x[h]-r)*y,c[h]=-16777216|d<<16|d<<8|d}else n.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};b._fillFrom32Bit=function(c){const {pixels:f,mask:k}=this;if(!c||!f||!f.length)return n.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let g,t,y,r;g=t=y=f[0];3<=f.length?(t=f[1],y=f[2]):2===f.length&&(t=f[1]);const d=this.width*this.height;if(g.length!==d)return n.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let e=0;if(k&&k.length===d)for(r=0;r<d;r++)c[e++]=g[r],c[e++]=t[r],c[e++]=y[r],c[e++]=k[r]&1;else for(r=0;r<d;r++)c[e++]=g[r],c[e++]=t[r],c[e++]=y[r],c[e++]=1};b._calculateBandStatistics=function(c,f){let k=Infinity,g=-Infinity;const t=c.length;let y,r=0;if(f)for(y=0;y<t;y++)f[y]&&(r=c[y],k=r<k?r:k,g=r>g?r:g);else for(y=0;y<t;y++)r=c[y],k=r<k?r:k,g=r>g?r:g;return{minValue:k,maxValue:g}};return l}(p.JSONSupport);D.__decorate([I.property({json:{write:!0}})],
v.prototype,"width",void 0);D.__decorate([I.property({json:{write:!0}})],v.prototype,"height",void 0);D.__decorate([I.property({json:{write:!0}})],v.prototype,"pixelType",void 0);D.__decorate([w.cast("pixelType")],v.prototype,"castPixelType",null);D.__decorate([I.property({json:{write:!0}})],v.prototype,"validPixelCount",void 0);D.__decorate([I.property({json:{write:!0}})],v.prototype,"mask",void 0);D.__decorate([I.property({json:{write:!0}})],v.prototype,"maskIsAlpha",void 0);D.__decorate([I.property({json:{write:!0}})],
v.prototype,"pixels",void 0);D.__decorate([I.property({json:{write:!0}})],v.prototype,"statistics",void 0);return v=a=D.__decorate([m.subclass("esri.layers.support.PixelBlock")],v)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(R,D,v){function E(b){return D.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function p(b,c,f,k,g,t,y,r){return{xmin:g<=f*b?0:g<f*b+b?g-f*b:b,ymin:t<=
k*c?0:t<k*c+c?t-k*c:c,xmax:g+y<=f*b?0:g+y<f*b+b?g+y-f*b:b,ymax:t+r<=k*c?0:t+r<k*c+c?t+r-k*c:c}}function U(b,c,f,k,g,t){const {width:y,height:r}=f.block,{x:d,y:e}=f.offset,{width:h,height:x}=f.mosaic;f=p(y,r,k,g,d,e,h,x);let A=0;var z=0;if(t){var M=t.hasGCSSShiftTransform?360:t.halfWorldWidth,B=y*t.resolutionX,C=t.startX+k*B;B=C+B;C<M&&B>M?z=t.rightPadding:C>=M&&(A=t.leftMargin-t.rightPadding,z=0)}f.xmax-=z;if("number"===typeof c)for(t=f.ymin;t<f.ymax;t++)for(z=(g*r+t-e)*h+(k*y-d)+A,M=f.xmin;M<f.xmax;M++)b[z+
M]=c;else for(t=f.ymin;t<f.ymax;t++)for(z=(g*r+t-e)*h+(k*y-d)+A,M=t*y,C=f.xmin;C<f.xmax;C++)b[z+C]=c[M+C]}function J(b,c,f={}){const {clipOffset:k,clipSize:g,alignmentInfo:t,blockWidths:y}=f;if(y)return S(b,c,{blockWidths:y});var r=b.find(F=>E(F));if(D.isNone(r))return null;f=g?g.width:c.width;const d=g?g.height:c.height;var e=r.width,h=r.height;const x=c.width/e,A=c.height/h;c={offset:k||{x:0,y:0},mosaic:g||c,block:{width:e,height:h}};e=r.pixelType;h=v.getPixelArrayConstructor(e);var z=r.pixels.length;
r=[];for(var M=0;M<z;M++){var B=new h(f*d);for(let F=0;F<A;F++)for(let L=0;L<x;L++){var C=b[F*x+L];E(C)&&(C=C.pixels[M],U(B,C,c,L,F,t))}r.push(B)}let u;if(b.some(F=>D.isNone(F)||F.mask&&0<F.mask.length))for(u=new Uint8Array(f*d),h=0;h<A;h++)for(z=0;z<x;z++)B=b[h*x+z],(M=D.isSome(B)?B.mask:null)?U(u,M,c,z,h,t):B?U(u,1,c,z,h,t):U(u,0,c,z,h,t);b=new v({width:f,height:d,pixels:r,pixelType:e,mask:u});b.updateStatistics();return b}function S(b,c,f){const k=b.find(z=>D.isSome(z));if(D.isNone(k))return null;
var g=b.some(z=>D.isSome(z)?!!z.mask:!0);const {width:t,height:y}=c;c=g?new Uint8Array(t*y):null;({blockWidths:f}=f);const r=[],d=k.getPlaneCount(),e=v.getPixelArrayConstructor(k.pixelType);if(g)for(let z=0,M=0;z<b.length;M+=f[z],z++)if(g=b[z],E(g)){var h=g.mask;for(var x=0;x<y;x++)for(var A=0;A<f[z];A++)c[x*t+A+M]=null==h?255:h[x*g.width+A]}for(g=0;g<d;g++){h=new e(t*y);for(let z=0,M=0;z<b.length;M+=f[z],z++)if(x=b[z],E(x)&&(A=x.pixels[g],null!=A))for(let B=0;B<y;B++)for(let C=0;C<f[z];C++)h[B*t+
C+M]=A[B*x.width+C];r.push(h)}b=new v({width:t,height:y,mask:c,pixels:r,pixelType:k.pixelType});b.updateStatistics();return b}function I(b){if(!E(b))return null;const c=b.clone(),{width:f,height:k,pixels:g,mask:t}=b;var y=g[0];b=c.pixels[0];for(let e=2;e<k-1;e++){const h=new Map;for(var r=e-2;r<e+2;r++)for(var d=0;4>d;d++){const x=r*f+d;a(h,y[x],t?t[x]:1)}b[e*f]=w(h);b[e*f+1]=b[e*f+2]=b[e*f];for(r=3;r<f-1;r++)d=(e-2)*f+r+1,a(h,y[d],t?t[d]:1),d=(e-1)*f+r+1,a(h,y[d],t?t[d]:1),d=e*f+r+1,a(h,y[d],t?t[d]:
1),d=(e+1)*f+r+1,a(h,y[d],t?t[d]:1),d=(e-2)*f+r-3,m(h,y[d],t?t[d]:1),d=(e-1)*f+r-3,m(h,y[d],t?t[d]:1),d=e*f+r-3,m(h,y[d],t?t[d]:1),d=(e+1)*f+r-3,m(h,y[d],t?t[d]:1),b[e*f+r]=w(h);b[e*f+r+1]=b[e*f+r]}for(y=0;y<f;y++)b[y]=b[f+y]=b[2*f+y],b[(k-1)*f+y]=b[(k-2)*f+y];c.updateStatistics();return c}function w(b){if(0===b.size)return 0;let c=0,f=-1,k=0;const g=b.keys();let t=g.next();for(;!t.done;)k=b.get(t.value),k>c&&(f=t.value,c=k),t=g.next();return f}function m(b,c,f){0!==f&&(f=b.get(c),1===f?b.delete(c):
b.set(c,f-1))}function a(b,c,f){0!==f&&b.set(c,b.has(c)?b.get(c)+1:1)}function n(b,c,f){let {x:k,y:g}=c;const {width:t,height:y}=f;if(0===k&&0===g&&y===b.height&&t===b.width)return b;const {width:r,height:d}=b;c=Math.max(0,g);const e=Math.max(0,k),h=Math.min(k+t,r),x=Math.min(g+y,d);if(0>h||0>x||!E(b))return null;k=Math.max(0,-k);g=Math.max(0,-g);const {pixels:A,mask:z}=b;var M=t*y,B=A.length;const C=[];for(var u=0;u<B;u++){var F=A[u],L=v.createEmptyBand(b.pixelType,M);for(let T=c;T<x;T++){const H=
T*r;let G=(T+g-c)*t+k;for(let P=e;P<h;P++)L[G++]=F[H+P]}C.push(L)}M=new Uint8Array(M);for(B=c;B<x;B++)for(u=B*r,F=(B+g-c)*t+k,L=e;L<h;L++)M[F++]=z?z[u+L]:1;b=new v({width:f.width,height:f.height,pixelType:b.pixelType,pixels:C,mask:M});b.updateStatistics();return b}function q(b,c=!0){if(!E(b))return null;const {pixels:f,width:k,height:g,mask:t,pixelType:y}=b;b=[];const r=Math.round(k/2),d=Math.round(g/2),e=g-1,h=k-1;for(var x=0;x<f.length;x++){var A=f[x],z=v.createEmptyBand(y,r*d),M=0;for(var B=0;B<
g;B+=2)for(var C=0;C<k;C+=2){var u=A[B*k+C];if(c){var F=C===h?u:A[B*k+C+1];const L=B===e?u:A[B*k+C+k],T=C===h?L:B===e?F:A[B*k+C+k+1];z[M++]=(u+F+L+T)/4}else z[M++]=u}b.push(z)}x=null;if(t)for(x=new Uint8Array(r*d),A=0,z=0;z<g;z+=2)for(M=0;M<k;M+=2)B=t[z*k+M],c?(C=M===h?B:t[z*k+M+1],u=z===e?B:t[z*k+M+k],F=M===h?u:z===e?C:t[z*k+M+k+1],x[A++]=B*C*u*F?1:0):x[A++]=B;return new v({width:r,height:d,pixelType:y,pixels:b,mask:x})}function l(b,c,f,k,g=.5){const {width:t,height:y}=b,{width:r,height:d}=c;b=k.cols;
k=k.rows;c=Math.ceil(r/b-.1/b);const e=Math.ceil(d/k-.1/k);let h,x,A,z,M;const B=c*b;var C=B*e*k;const u=new Float32Array(C),F=new Float32Array(C),L=new Uint32Array(C),T=new Uint32Array(C);let H=0,G,P;for(let X=0;X<e;X++)for(let Y=0;Y<c;Y++){var O=12*(X*c+Y);C=f[O];h=f[O+1];x=f[O+2];A=f[O+3];z=f[O+4];M=f[O+5];for(var V=0;V<k;V++){H=(X*k+V)*B+Y*b;P=(V+.5)/k;for(let ba=0;ba<V;ba++)G=(ba+.5)/b,u[H+ba]=(C*G+h*P+x)*t-g,F[H+ba]=(A*G+z*P+M)*y-g,L[H+ba]=Math.round(u[H+ba]),T[H+ba]=Math.round(F[H+ba])}O+=
6;C=f[O];h=f[O+1];x=f[O+2];A=f[O+3];z=f[O+4];M=f[O+5];for(O=0;O<k;O++)for(H=(X*k+O)*B+Y*b,P=(O+.5)/k,V=O;V<b;V++)G=(V+.5)/b,u[H+V]=(C*G+h*P+x)*t-g,F[H+V]=(A*G+z*P+M)*y-g,L[H+V]=Math.round(u[H+V]),T[H+V]=Math.round(F[H+V])}return{offsets_x:u,offsets_y:F,offsets_xi:L,offsets_yi:T,gridWidth:B}}R.approximateTransform=function(b,c,f,k,g="nearest"){if(!E(b))return null;"majority"===g&&(b=I(b));const {pixels:t,mask:y,pixelType:r}=b,d=b.width;var e=b.height;const h=v.getPixelArrayConstructor(r),x=t.length,
{width:A,height:z}=c;b=!1;for(let T=0;T<f.length;T+=3)-1===f[T]&&-1===f[T+1]&&-1===f[T+2]&&(b=!0);const {offsets_x:M,offsets_y:B,offsets_xi:C,offsets_yi:u,gridWidth:F}=l({width:d,height:e},c,f,k,"majority"===g?0:.5);let L;c=(T,H,G)=>{const P=T instanceof Float32Array||T instanceof Float64Array?0:.5;for(let O=0;O<z;O++){L=O*F;for(let V=0;V<A;V++){if(0>M[L]||0>B[L])T[O*A+V]=0;else if(G)T[O*A+V]=H[C[L]+u[L]*d];else{const X=Math.floor(M[L]),Y=Math.floor(B[L]),ba=Math.ceil(M[L]),ea=Math.ceil(B[L]),ca=
M[L]-X,da=B[L]-Y;T[O*A+V]=!y||y[X+Y*d]&&y[X+Y*d]&&y[X+ea*d]&&y[ba+ea*d]?(1-da)*((1-ca)*H[X+Y*d]+ca*H[ba+Y*d])+da*((1-ca)*H[X+ea*d]+ca*H[ba+ea*d])+P:H[C[L]+u[L]*d]}L++}}};f=[];for(e=0;e<x;e++)k=new h(A*z),c(k,t[e],"nearest"===g||"majority"===g),f.push(k);g=new v({width:A,height:z,pixelType:r,pixels:f});if(y)g.mask=new Uint8Array(A*z),c(g.mask,y,!0);else if(b)for(g.mask=new Uint8Array(A*z),b=0;b<A*z;b++)g.mask[b]=0>M[b]||0>B[b]?0:1;g.updateStatistics();return g};R.clip=n;R.colorize=function(b,c){if(!E(b)||
!c&&(c.indexedColormap||c.indexed2DColormap))return b;const f=b.clone();var k=f.pixels;let g=f.mask;const t=f.width*f.height;if(1!==k.length)return b;const {indexedColormap:y,indexed2DColormap:r,offset:d,alphaSpecified:e}=c;c=y.length-1;b=0;k=k[0];const h=new Uint8Array(k.length),x=new Uint8Array(k.length),A=new Uint8Array(k.length);let z=0;if(y)if(g)for(b=0;b<t;b++)g[b]&&(z=4*(k[b]-d),z<d||z>c?g[b]=0:(h[b]=y[z],x[b]=y[z+1],A[b]=y[z+2],g[b]=y[z+3]));else{g=new Uint8Array(t);for(b=0;b<t;b++)z=4*(k[b]-
d),z<d||z>c?g[b]=0:(h[b]=y[z],x[b]=y[z+1],A[b]=y[z+2],g[b]=y[z+3]);f.mask=g}else if(g)for(b=0;b<t;b++)g[b]&&(c=r[k[b]],h[b]=c[0],x[b]=c[1],A[b]=c[2],g[b]=c[3]);else{g=new Uint8Array(t);for(b=0;b<t;b++)c=r[k[b]],h[b]=c[0],x[b]=c[1],A[b]=c[2],g[b]=c[3];f.mask=g}f.pixels=[h,x,A];f.statistics=null;f.pixelType="u8";f.maskIsAlpha=e;return f};R.createColormapLUT=function(b){if(b){var c=b.colormap;if(c&&0!==c.length){c=c.sort((e,h)=>e[0]-h[0]);var f=0;0>c[0][0]&&(f=c[0][0]);var k=Math.max(256,c[c.length-
1][0]-f+1),g=new Uint8Array(4*k),t=[],y=0,r=0,d=5===c[0].length;if(65536<k)return c.forEach(e=>{t[e[0]-f]=d?e.slice(1):e.slice(1).concat([255])}),{indexed2DColormap:t,offset:f,alphaSpecified:d};if(b.fillUnspecified)for(b=c[r],y=b[0]-f;y<k;y++)g[4*y]=b[1],g[4*y+1]=b[2],g[4*y+2]=b[3],g[4*y+3]=d?b[4]:255,y===b[0]-f&&(b=r===c.length-1?b:c[++r]);else for(y=0;y<c.length;y++)b=c[y],r=4*(b[0]-f),g[r]=b[1],g[r+1]=b[2],g[r+2]=b[3],g[r+3]=d?b[4]:255;return{indexedColormap:g,offset:f,alphaSpecified:d}}}};R.extractBands=
function(b,c){if(null==c||!c.length||!E(b))return b;const f=b.pixels.length;return c&&c.some(k=>k>=f)||1===f&&1===c.length&&0===c[0]||f===c.length&&!c.some((k,g)=>k!==g)?b:new v({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:c.map(k=>b.pixels[k]),statistics:b.statistics&&c.map(k=>b.statistics[k])})};R.getClipBounds=p;R.getLocalArithmeticNorthRotations=function(b,c){const {coefficients:f,spacing:k}=c,{offsets_x:g,
offsets_y:t,gridWidth:y}=l(b,b,f,{rows:k[0],cols:k[1]},.5),{width:r,height:d}=b;b=new Float32Array(r*d);c=180/Math.PI;for(let x=0;x<d;x++)for(let A=0;A<r;A++){var e=x*y+A,h=0===x?e:e-y;const z=x===d-1?e:e+y;e=g[h]-g[z];h=t[z]-t[h];isNaN(e)||isNaN(h)?b[x*r+A]=90:(h=Math.atan2(h,e)*c,h=(360+h)%360,b[x*r+A]=h)}return b};R.isValidPixelBlock=E;R.lookupPixels=function(b,c){if(!E(b))return null;const {pixels:f,mask:k}=b,g=b.width*b.height,t=f.length;let y=c.lut;({offset:c}=c);let r,d;y&&1===y[0].length&&
(y=f.map(()=>y));const e=[];let h,x,A;if(c)if(null==k)for(r=0;r<t;r++){h=f[r];x=y[r];A=new Uint8Array(g);for(d=0;d<g;d++)A[d]=x[h[d]-c];e.push(A)}else for(r=0;r<t;r++){h=f[r];x=y[r];A=new Uint8Array(g);for(d=0;d<g;d++)k[d]&&(A[d]=x[h[d]-c]);e.push(A)}else if(null==k)for(r=0;r<t;r++){h=f[r];x=y[r];A=new Uint8Array(g);for(d=0;d<g;d++)A[d]=x[h[d]];e.push(A)}else for(r=0;r<t;r++){h=f[r];x=y[r];A=new Uint8Array(g);for(d=0;d<g;d++)k[d]&&(A[d]=x[h[d]]);e.push(A)}b=new v({width:b.width,height:b.height,pixels:e,
mask:k,pixelType:"u8"});b.updateStatistics();return b};R.mosaic=J;R.mosaicPixelData=function(b,c){if(!b||0===b.length)return null;var f=b.find(x=>x.pixelBlock);if(!f||D.isNone(f.pixelBlock))return null;var k=(f.extent.xmax-f.extent.xmin)/f.pixelBlock.width;const g=(f.extent.ymax-f.extent.ymin)/f.pixelBlock.height,t=.01*Math.min(k,g),y=b.sort((x,A)=>Math.abs(x.extent.ymax-A.extent.ymax)>t?A.extent.ymax-x.extent.ymax:Math.abs(x.extent.xmin-A.extent.xmin)>t?x.extent.xmin-A.extent.xmin:0);var r=Math.min.apply(null,
y.map(x=>x.extent.xmin));const d=Math.min.apply(null,y.map(x=>x.extent.ymin)),e=Math.max.apply(null,y.map(x=>x.extent.xmax)),h=Math.max.apply(null,y.map(x=>x.extent.ymax));b={x:Math.round((c.xmin-r)/k),y:Math.round((h-c.ymax)/g)};r={width:Math.round((e-r)/k),height:Math.round((h-d)/g)};k={width:Math.round((c.xmax-c.xmin)/k),height:Math.round((c.ymax-c.ymin)/g)};if(Math.round(r.width/f.pixelBlock.width)*Math.round(r.height/f.pixelBlock.height)!==y.length||0>b.x||0>b.y||r.width<k.width||r.height<k.height)return null;
f=y.map(x=>x.pixelBlock);f=J(f,r,{clipOffset:b,clipSize:k});return{extent:c,pixelBlock:f}};R.remapColor=function(b,c){if(!E(b))return null;b=b.clone();var {pixels:f}=b;const k=b.width*b.height,g=c.length,t=Math.floor(g/2),y=c[Math.floor(t)];f=f[0];let r,d,e,h,x,A,z=!1;const M=new Uint8Array(k),B=new Uint8Array(k),C=new Uint8Array(k);let u=b.mask;const F=4===c[0].mappedColor.length;u||(u=new Uint8Array(k),u.fill(F?255:1),b.mask=u);for(x=0;x<k;x++)if(u[x]){r=f[x];z=!1;A=t;d=y;e=0;for(h=g-1;1<h-e;){if(r===
d.value){z=!0;break}r>d.value?e=A:h=A;A=Math.floor((e+h)/2);d=c[Math.floor(A)]}z||(r===c[e].value?(d=c[e],z=!0):r===c[h].value?(d=c[h],z=!0):r<c[e].value?(z=!1,d=null):r>c[e].value&&(r<c[h].value?(d=c[e],z=!0):h===g-1?(z=!1,d=null):(d=c[h],z=!0)));z?(M[x]=d.mappedColor[0],B[x]=d.mappedColor[1],C[x]=d.mappedColor[2],u[x]=d.mappedColor[3]):M[x]=B[x]=C[x]=u[x]=0}b.pixels=[M,B,C];b.mask=u;b.pixelType="u8";b.maskIsAlpha=F;return b};R.resampleByMajority=I;R.setValidBoundary=function(b,c,f){if(!E(b))return null;
const {width:k,height:g}=b,t=c.x;c=c.y;const y=f.width+t;f=f.height+c;if(0>t||0>c||y>k||f>g||0===t&&0===c&&y===k&&f===g)return b;b.mask||(b.mask=new Uint8Array(k*g));const r=b.mask;for(let d=0;d<g;d++){const e=d*k;for(let h=0;h<k;h++)r[e+h]=d<c||d>=f||h<t||h>=y?0:1}b.updateStatistics();return b};R.split=function(b,c,f){if(!E(b))return null;const {width:k,height:g}=c;let {width:t,height:y}=b;const r=new Map,d={x:0,y:0};f=null==f?1:1+f;for(let e=0;e<f;e++){const h=Math.ceil(t/k),x=Math.ceil(y/g);for(let A=
0;A<x;A++){d.y=A*g;for(let z=0;z<h;z++){d.x=z*k;const M=n(b,d,c);r.set(`${e}/${A}/${z}`,M)}}e<f-1&&(b=q(b));t=Math.round(t/2);y=Math.round(y/2)}return r};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n){function q(B){B=B.symbolLayers;if(!B)return null;let C=null;B.forEach(u=>{if("object"!==u.type||null==u.resource.href)C="water"===u.type?S.unwrap(u.color):S.isSome(u.material)?S.unwrap(u.material.color):null});return C?new E(C):null}function l(B,C){if(null==C)return B;B=B.toRgba();B[3]*=C;return new E(B)}function b(B,C,u){if(B=B.symbolLayers){var F=L=>{L=S.isSome(L)?L:null;C=C||L||null!=u&&M;return l(C,u)};B.forEach(L=>{if("object"!==L.type||null==L.resource.href||
C)if("water"===L.type)L.color=F(L.color);else{var T=S.isSome(L.material)?L.material.color:null;T=F(T);S.isNone(L.material)?L.material=new n.Symbol3DMaterial({color:T}):L.material.color=T;null!=u&&"outline"in L&&S.isSome(L.outline)&&S.isSome(L.outline.color)&&(L.outline.color=l(L.outline.color,u))}})}}function c(B,C){return f.apply(this,arguments)}function f(){f=v._asyncToGenerator(function*(B,C){(B=B.symbolLayers)&&(yield U.forEach(B,function(){var u=v._asyncToGenerator(function*(F){return k(F,C)});
return function(F){return u.apply(this,arguments)}}()))});return f.apply(this,arguments)}function k(B,C){return g.apply(this,arguments)}function g(){g=v._asyncToGenerator(function*(B,C){switch(B.type){case "extrude":B.size="number"===typeof C[2]?C[2]:0;break;case "icon":case "line":case "text":C=t(C);S.isSome(C)&&(B.size=C);break;case "path":{const u=d(C,w.ONES,[B.width,void 0,B.height]);B.width=x(C[0],B.width,1,u);B.height=x(C[2],B.height,1,u)}break;case "object":yield y(B,C)}});return g.apply(this,
arguments)}function t(B){for(const C of B)if("number"===typeof C)return C;return null}function y(B,C){return r.apply(this,arguments)}function r(){r=v._asyncToGenerator(function*(B,C){const {resourceSize:u,symbolSize:F}=yield e(B),L=d(C,u,F);B.width=x(C[0],F[0],u[0],L);B.depth=x(C[1],F[1],u[1],L);B.height=x(C[2],F[2],u[2],L)});return r.apply(this,arguments)}function d(B,C,u){for(let F=0;3>F;F++){const L=B[F];switch(L){case "symbol-value":return null!=u[F]?u[F]/C[F]:1;case "proportional":break;default:if(L&&
C[F])return L/C[F]}}return 1}function e(B){return h.apply(this,arguments)}function h(){h=v._asyncToGenerator(function*(B){const C=yield(yield new Promise((G,P)=>R(["./symbolLayerUtils"],G,P))).computeObjectLayerResourceSize(B,10),{width:u,height:F,depth:L}=B;B=[u,L,F];let T=1;for(var H=0;3>H;H++)if(null!=B[H]){T=B[H]/C[H];break}for(H=0;3>H;H++)null==B[H]&&(B[H]=C[H]*T);return{resourceSize:C,symbolSize:B}});return h.apply(this,arguments)}function x(B,C,u,F){switch(B){case "proportional":return u*F;
case "symbol-value":return null!=C?C:u;default:return B}}function A(){A=v._asyncToGenerator(function*(B,C){if(B&&C){if(p.isSymbol3D(B))return c(B,C);if(p.isSymbol2D(B)&&(C=t(C),!S.isNone(C)))switch(B.type){case "simple-marker":B.size=C;break;case "picture-marker":{const u=B.width/B.height;1<u?(B.width=C,B.height=C*u):(B.width=C*u,B.height=C);break}case "simple-line":B.width=C;break;case "text":B.font.size=C}}});return A.apply(this,arguments)}const z=/\/resource\/(.*?)\.svg$/,M=new E("white");D.applyColorToSymbol=
function(B,C,u){if(B&&(C||null!=u))if(C&&(C=new E(C)),p.isSymbol3D(B))b(B,C,u);else if(p.isSymbol2D(B)){if(C=C||B.color)B.color=l(C,u);null!=u&&"outline"in B&&B.outline&&B.outline.color&&(B.outline.color=l(B.outline.color,u))}};D.applyOpacityToColor=l;D.applyRotationToSymbol=function(B,C,u){B&&null!=C&&(p.isSymbol3D(B)?(B=B.symbolLayers)&&B.forEach(F=>{if(F&&"object"===F.type)switch(u){case "tilt":F.tilt=C;break;case "roll":F.roll=C;break;default:F.heading=C}}):!p.isSymbol2D(B)||"simple-marker"!==
B.type&&"picture-marker"!==B.type&&"text"!==B.type||(B.angle=C))};D.applySizesToSymbol=function(B,C){return A.apply(this,arguments)};D.getCSSFilterFromEffectList=function(B){if(!B)return null;B=B.effects.filter(C=>"bloom"!==C.type).map(C=>C.toJSON());return m.effectFunctionsFromJSON(B)};D.getColorFromSymbol=function(B,C){if(!B)return null;let u=null;p.isSymbol3D(B)?u=q(B):p.isSymbol2D(B)&&(u=B.color?new E(B.color):null);return u?l(u,C):null};D.getIconHref=function(B,C){C=C.resource.href;return!J("esri-canvas-svg-support")&&
B.styleOrigin&&z.test(C)?C.replace(z,"/resource/png/$1.png"):C};D.getSymbolOutlineSize=function(B){if(!B)return 0;if(p.isSymbol3D(B)){{const C=B.symbolLayers&&B.symbolLayers.length;C?(B=B.symbolLayers.getItemAt(C-1),B="outline"in B?S.get(B,"outline","size"):void 0):B=void 0}return S.isSome(B)?B:0}return(B=a.getStroke(B))&&I.px2pt(B.width)||0};D.isVolumetricSymbol=function(B){if(S.isNone(B)||!("symbolLayers"in B)||S.isNone(B.symbolLayers))return!1;switch(B.type){case "point-3d":return B.symbolLayers.some(C=>
"object"===C.type);case "line-3d":return B.symbolLayers.some(C=>"path"===C.type);case "polygon-3d":return B.symbolLayers.some(C=>"object"===C.type||"extrude"===C.type);default:return!1}};Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(R,D,v,E,p,U,J){function S(n){if(!n)return null;
let q;switch(n.type){case "simple-fill":case "picture-fill":case "simple-marker":q=S(n.outline);break;case "simple-line":{const l=U.pt2px(n.width);"none"!==n.style&&0!==l&&(q={color:n.color,style:a(n.style),width:l,cap:n.cap,join:"miter"===n.join?U.pt2px(n.miterLimit):n.join});break}default:q=null}return q}const I={left:"start",center:"middle",right:"end",justify:"start"},w={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},m=new p(1E3),a=(()=>{const n={};return q=>
{if(n[q])return n[q];const l=q.replace(/-/g,"");return n[q]=l}})();v=new v([128,128,128]);R.defaultThematicColor=v;R.dekebabifyLineStyle=a;R.getFill=function(n){const q=n.style;let l=null;if(n)switch(n.type){case "simple-marker":"cross"!==q&&"x"!==q&&(l=n.color);break;case "simple-fill":"solid"===q?l=n.color:"none"!==q&&(l={type:"pattern",x:0,y:0,src:D.getAssetUrl(`esri/symbols/patterns/${q}.png`),width:5,height:5});break;case "picture-fill":l={type:"pattern",src:n.url,width:U.pt2px(n.width)*n.xscale,
height:U.pt2px(n.height)*n.yscale,x:U.pt2px(n.xoffset),y:U.pt2px(n.yoffset)};break;case "text":l=n.color;break;case "cim":l=J.getCIMSymbolColor(n)}return l};R.getPatternUrlWithColor=function(n,q){const l=n+"-"+q;return void 0!==m.get(l)?Promise.resolve(m.get(l)):E(n,{responseType:"image"}).then(b=>{b=b.data;const c=b.naturalWidth,f=b.naturalHeight,k=document.createElement("canvas");k.width=c;k.height=f;const g=k.getContext("2d");g.fillStyle=q;g.fillRect(0,0,c,f);g.globalCompositeOperation="destination-in";
g.drawImage(b,0,0);b=k.toDataURL();m.put(l,b);return b})};R.getSVGAlign=function(n){return n=(n=n.horizontalAlignment)&&I[n.toLowerCase()]||"middle"};R.getSVGBaseline=function(n){return(n=n.verticalAlignment)&&w[n.toLowerCase()]||"alphabetic"};R.getSVGBaselineShift=function(n){return"bottom"===n.verticalAlignment?"super":null};R.getStroke=S;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(R){return function(){function D(E,
p){this._storage=new R.MemCacheStorage;this._storage.maxSize=E;p&&this._storage.registerRemoveFunc("",p)}var v=D.prototype;v.put=function(E,p){this._storage.put(E,p,1,1)};v.pop=function(E){return this._storage.pop(E)};v.get=function(E){return this._storage.get(E)};v.clear=function(){this._storage.clearAll()};v.destroy=function(){this._storage.destroy()};return D}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(R,D,v){function E(a){a=v.toCIMSymbolJSON(a);
if("CIMTextSymbol"===a.type)return a.height;let n=0;if(a.symbolLayers)for(const q of a.symbolLayers)v.isCIMMarker(q)&&q.size>n?n=q.size:v.isCIMStroke(q)&&q.width>n?n=q.width:v.isCIMFill(q);return n}function p(a,n,q,l){if("CIMTextSymbol"===a.type)a.height*=n;else{if(q&&a.effects)for(const b of a.effects)S(b,n);if(a.symbolLayers)for(const b of a.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":U(b,n,l);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=l&&l.preserveOutlineWidth||
!b.width||(b.width*=n);break;case "CIMPictureFill":b.height&&(b.height*=n);b.offsetX&&(b.offsetX*=n);b.offsetY&&(b.offsetY*=n);break;case "CIMHatchFill":p(b.lineSymbol,n,!0,{...l,preserveOutlineWidth:!1}),b.offsetX&&(b.offsetX*=n),b.offsetY&&(b.offsetY*=n),b.separation&&(b.separation*=n)}}}function U(a,n,q){a.markerPlacement&&J(a.markerPlacement,n);a.offsetX&&(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*n,y:a.anchorPoint.y*
n});a.size*=n;if("CIMVectorMarker"===a.type&&a.markerGraphics)for(const l of a.markerGraphics)a.scaleSymbolsProportionally||p(l.symbol,n,!0,q)}function J(a,n){v.isCIMMarkerStrokePlacement(a)&&a.offset&&(a.offset*=n);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset&&(a.customEndingOffset*=n);a.offsetAlongLine&&(a.offsetAlongLine*=n);if(a.placementTemplate&&a.placementTemplate.length){var q=a.placementTemplate.map(l=>l*n);a.placementTemplate=
q}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset&&(a.maxRandomOffset*=n);a.placementTemplate&&a.placementTemplate.length&&(q=a.placementTemplate.map(l=>l*n),a.placementTemplate=q);break;case "CIMMarkerPlacementOnLine":a.startPointOffset&&(a.startPointOffset*=n);break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine&&(a.offsetAlongLine*=n);break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition&&(a.beginPosition*=n);a.endPosition&&(a.endPosition*=n);break;case "CIMMarkerPlacementPolygonCenter":a.offsetX&&
(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);break;case "CIMMarkerPlacementInsidePolygon":a.offsetX&&(a.offsetX*=n),a.offsetY&&(a.offsetY*=n),a.stepX&&(a.stepX*=n),a.stepY&&(a.stepY*=n)}}function S(a,n){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width&&(a.width*=n);break;case "CIMGeometricEffectBuffer":a.size&&(a.size*=n);break;case "CIMGeometricEffectCut":a.beginCut&&(a.beginCut*=n);a.endCut&&(a.endCut*=n);a.middleCut&&(a.middleCut*=n);break;case "CIMGeometricEffectDashes":a.customEndingOffset&&
(a.customEndingOffset*=n);a.offsetAlongLine&&(a.offsetAlongLine*=n);if(a.dashTemplate&&a.dashTemplate.length){const q=a.dashTemplate.map(l=>l*n);a.dashTemplate=q}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length&&(a.length*=n);break;case "CIMGeometricEffectMove":a.offsetX&&(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset&&(a.offset*=n);break;case "CIMGeometricEffectRegularPolygon":a.radius&&
(a.radius*=n);break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth&&(a.fromWidth*=n);a.length&&(a.length*=n);a.toWidth&&(a.toWidth*=n);break;case "CIMGeometricEffectWave":a.amplitude&&(a.amplitude*=n),a.period&&(a.period*=n)}}function I(a,n){let q;q="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(q.symbolLayers)for(const l of q.symbolLayers)if(!(l.colorLocked||a&&(v.isCIMStroke(l)||v.isCIMMarker(l)&&l.markerPlacement&&v.isCIMMarkerStrokePlacement(l.markerPlacement))))switch(l.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":l.tintColor&&
w(n,l.tintColor);break;case "CIMVectorMarker":l.markerGraphics.forEach(b=>{I(b.symbol,n)});break;case "CIMSolidStroke":case "CIMSolidFill":w(n,l.color);break;case "CIMHatchFill":I(l.lineSymbol,n)}}function w(a,n){for(const q of a)if(q.join(".")===n.join("."))return;a.push(n)}function m(a,n,q){var l="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===l.type?!0:!1;if(l.symbolLayers)for(const b of l.symbolLayers)if(!b.colorLocked){if(a)if(q){if({layersToColor:l}=q,(v.isCIMStroke(b)||v.isCIMMarker(b)&&
b.markerPlacement&&v.isCIMMarkerStrokePlacement(b.markerPlacement))&&"fill"===l||v.isCIMFill(b)&&"outline"===l)continue}else if(v.isCIMStroke(b)||v.isCIMMarker(b)&&b.markerPlacement&&v.isCIMMarkerStrokePlacement(b.markerPlacement))continue;l=n.toArray();switch(b.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":b.tintColor=l;break;case "CIMVectorMarker":b.markerGraphics.forEach(c=>{m(c.symbol,n,q)});break;case "CIMSolidStroke":case "CIMSolidFill":b.color=l;break;case "CIMHatchFill":m(b.lineSymbol,
n,q)}}}R.applyCIMSymbolColor=function(a,n,q){n instanceof D||(n=new D(n));(a=v.toCIMSymbolJSON(a))&&m(a,n,q)};R.applyCIMSymbolRotation=function(a,n,q=!1){a=v.toCIMSymbolJSON(a);q&&0!==n&&(n=360-n);if("CIMTextSymbol"===a.type)a.angle=n;else if("CIMPointSymbol"===a.type&&a.symbolLayers){q=n-(a.angle||0);for(const l of a.symbolLayers)if(v.isCIMMarker(l)){let b=l.rotation||0;b=l.rotateClockwise?b-q:b+q;l.rotation=b}a.angle=n}};R.getCIMSymbolColor=function(a){a=v.toCIMSymbolJSON(a);const n=[];I(a,n);return n.length?
new D(v.fromCIMColor(n[0])):null};R.getCIMSymbolRotation=function(a,n=!1){a=v.toCIMSymbolJSON(a);return"CIMTextSymbol"===a.type||"CIMPointSymbol"===a.type?n&&0!==a.angle?360-a.angle:a.angle||0:0};R.getCIMSymbolSize=E;R.scaleCIMMarker=U;R.scaleCIMSymbolTo=function(a,n,q){const l=v.toCIMSymbolJSON(a);a=E(a);if(0===a)if("CIMTextSymbol"===l.type)l.height=n;else{if(l.symbolLayers)for(const b of l.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":b.size=n;break;case "CIMPictureStroke":case "CIMSolidStroke":b.width=
n}}else p(l,n/a,!1,q)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(R,D){function v(E,p){"string"!==typeof E&&(E=String(E));switch(p){case "LowerCase":return E.toLowerCase();case "Allcaps":return E.toUpperCase();default:return E}}D._adjustTextCase=v;D.colorToArray=function(E){return[E.r,E.g,E.b,E.a]};D.createLabelOverrideFunction=function(E,p,U){const J=m=>{let a=m.length;for(;a--;)if(!" /-,\n".includes(m.charAt(a)))return!1;
return!0},S=[];var I=0;let w=-1;do w=p.indexOf("[",I),w>=I&&(w>I&&(I=p.substr(I,w-I),S.push([I,null,J(I)])),I=w+1,w=p.indexOf("]",I),w>=I&&(w>I&&(I=p.substr(I,w-I),(I=E[I])&&S.push([null,I,!1])),I=w+1));while(-1!==w);I<p.length-1&&(E=p.substr(I),S.push([E,null,J(E)]));return m=>{let a="",n=null;for(const q of S){const [l,b,c]=q;if(l)c?n=l:(n&&(a+=n,n=null),a+=l);else{const f=m.attributes[b];f&&(n&&(a+=n,n=null),a+=f)}}return v(a,U)}};D.evaluateValueOrFunction=function(E,p,U,J){return"function"===
typeof E?E(p,U,J):E};D.fromCIMColor=function(E){return E?{r:E[0],g:E[1],b:E[2],a:E[3]/255}:{r:0,g:0,b:0,a:0}};D.getValue=E=>isNaN(E)||!E?0:E;D.importGeometryEngine=function(){return new Promise((E,p)=>R(["../../geometry/geometryEngineJSON"],E,p))};D.isCIMFill=function(E){return"CIMGradientFill"===E.type||"CIMHatchFill"===E.type||"CIMPictureFill"===E.type||"CIMSolidFill"===E.type||"CIMWaterFill"===E.type};D.isCIMMarker=function(E){return"CIMVectorMarker"===E.type||"CIMPictureMarker"===E.type||"CIMBarChartMarker"===
E.type||"CIMCharacterMarker"===E.type||"CIMPieChartMarker"===E.type||"CIMStackedBarChartMarker"===E.type};D.isCIMMarkerStrokePlacement=function(E){return"CIMMarkerPlacementAlongLineRandomSize"===E.type||"CIMMarkerPlacementAlongLineSameSize"===E.type||"CIMMarkerPlacementAlongLineVariableSize"===E.type||"CIMMarkerPlacementAtExtremities"===E.type||"CIMMarkerPlacementAtMeasuredUnits"===E.type||"CIMMarkerPlacementAtRatioPositions"===E.type||"CIMMarkerPlacementOnLine"===E.type||"CIMMarkerPlacementOnVertices"===
E.type};D.isCIMStroke=function(E){return"CIMGradientStroke"===E.type||"CIMPictureStroke"===E.type||"CIMSolidStroke"===E.type};D.isGeometryEngineRequired=E=>{if(!E)return!1;for(const p of E)switch(p.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};D.resampleHermite=function(E,p,U,J,S,I,w=!0){const m=p/S;U/=I;const a=Math.ceil(m/2),n=Math.ceil(U/2);for(let b=0;b<I;b++)for(let c=0;c<S;c++){const f=4*(c+(w?I-b-1:b)*S);var q=0;let k=0,g=0,t=0,y=0,r=0,d=0;const e=
(b+.5)*U;for(let h=Math.floor(b*U);h<(b+1)*U;h++){var l=Math.abs(e-(h+.5))/n;const x=(c+.5)*m;l*=l;for(let A=Math.floor(c*m);A<(c+1)*m;A++){let z=Math.abs(x-(A+.5))/a;q=Math.sqrt(l+z*z);-1<=q&&1>=q&&(q=2*q*q*q-3*q*q+1,0<q&&(z=4*(A+h*p),d+=q*E[z+3],g+=q,255>E[z+3]&&(q=q*E[z+3]/250),t+=q*E[z],y+=q*E[z+1],r+=q*E[z+2],k+=q))}}J[f]=t/k;J[f+1]=y/k;J[f+2]=r/k;J[f+3]=d/g}};D.toCIMSymbolJSON=function(E){var p;return null==(p=E.data)?void 0:p.symbol};Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(R,D,v,E,p,U,J){var S;v=S=function(I){function w(m){m=I.call(this,m)||this;m.variableName=null;m.dimensionName=null;m.values=[];m.isSlice=!1;return m}R._inheritsLoose(w,I);w.prototype.clone=
function(){return new S({variableName:this.variableName,dimensionName:this.dimensionName,values:E.clone(this.values),isSlice:this.isSlice})};return w}(v.JSONSupport);D.__decorate([p.property({type:String,json:{write:!0}})],v.prototype,"variableName",void 0);D.__decorate([p.property({type:String,json:{write:!0}})],v.prototype,"dimensionName",void 0);D.__decorate([p.property({type:U.types.array(U.types.oneOf([U.types.native(Number),U.types.array(U.types.native(Number))])),json:{write:!0}})],v.prototype,
"values",void 0);D.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"isSlice",void 0);return v=S=D.__decorate([J.subclass("esri.layers.support.DimensionalDefinition")],v)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l){R.ExportImageServiceParameters=function(b){function c(){var k=b.apply(this,arguments)||this;k.layer=null;k.adjustAspectRatio=void 0;k.bandIds=void 0;k.compression=void 0;k.compressionQuality=void 0;k.compressionTolerance=.01;k.interpolation=null;k.noData=null;k.noDataInterpretation=void 0;k.pixelType=void 0;k.lercVersion=2;return k}D._inheritsLoose(c,b);var f=c.prototype;f.writeAdjustAspectRatio=function(k,g,t){10.3>this.layer.version||(g[t]=k)};f.writeCompressionQuality=
function(k,g,t){this.format&&this.format.toLowerCase().includes("jpg")&&null!=k&&(g[t]=k)};f.writeCompressionTolerance=function(k,g,t){"lerc"===this.format&&null!=k&&(g[t]=k)};f.writeLercVersion=function(k,g,t){"lerc"===this.format&&10.5<=this.layer.version&&(g[t]=k)};f.combineRendererWithRenderingRule=function(){var k;const g=this.layer,{rasterInfo:t,renderingRule:y,renderer:r}=g;return r&&a.isSupportedRendererType(r)?a.combineRenderingRules(a.convertRendererToRenderingRule(r,{rasterAttributeTable:t.attributeTable,
pixelType:t.pixelType,dataType:t.dataType,bandProperties:null==(k=t.keyProperties)?void 0:k.BandProperties,convertColorRampToColormap:10.6>g.version,convertToRFT:null!=y&&y.rasterFunctionDefinition?!0:!1}),y):y};f._addResampleRasterFunction=function(k){var g;if("vector-field"!==(null==(g=this.layer.renderer)?void 0:g.type)||"Resample"===(null==k?void 0:k.functionName))return k;g=new l({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?
7:10,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});g=null!=k&&k.rasterFunctionDefinition?new l({rasterFunctionDefinition:a.convertRenderingRuleToRFT(g)}):g;return a.combineRenderingRules(g,k)};D._createClass(c,[{key:"format",get:function(){var k;return"vector-field"===(null==(k=this.layer.renderer)?void 0:k.type)?"lerc":this.layer.format}},{key:"version",get:function(){const k=this.layer;k.commitProperty("bandIds");k.commitProperty("format");k.commitProperty("compressionQuality");
k.commitProperty("compressionTolerance");k.commitProperty("interpolation");k.commitProperty("noData");k.commitProperty("noDataInterpretation");k.commitProperty("mosaicRule");k.commitProperty("renderingRule");k.commitProperty("adjustAspectRatio");k.commitProperty("pixelFilter");k.commitProperty("renderer");k.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(k){this._set("version",k)}},{key:"mosaicRule",get:function(){var k=this.layer;let g=k.mosaicRule;k=k.definitionExpression;
g?k&&k!==g.where&&(g=g.clone(),g.where=k):k&&(g=new n({where:k}));return g}},{key:"renderingRule",get:function(){var k;const g=this.layer;let t=g.renderingRule;const y=g.pixelFilter,r=!g.format||g.format.includes("jpg")||g.format.includes("png");t=this._addResampleRasterFunction(t);r&&!y&&"vector-field"!==(null==(k=g.renderer)?void 0:k.type)&&(t=this.combineRendererWithRenderingRule());return t}}]);return c}(E.JSONSupport);v.__decorate([I.property()],R.ExportImageServiceParameters.prototype,"layer",
void 0);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);v.__decorate([m.writer("adjustAspectRatio")],R.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);v.__decorate([I.property({json:{write:!0}}),p.aliasOf("layer.bandIds")],R.ExportImageServiceParameters.prototype,"bandIds",void 0);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"compression",void 0);v.__decorate([I.property({json:{write:!0}}),
p.aliasOf("layer.compressionQuality")],R.ExportImageServiceParameters.prototype,"compressionQuality",void 0);v.__decorate([m.writer("compressionQuality")],R.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);v.__decorate([I.property({json:{write:!0}}),p.aliasOf("layer.compressionTolerance")],R.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);v.__decorate([m.writer("compressionTolerance")],R.ExportImageServiceParameters.prototype,"writeCompressionTolerance",
null);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"format",null);v.__decorate([I.property({type:String,json:{read:{reader:q.interpolationKebab.read},write:{writer:q.interpolationKebab.write}}}),p.aliasOf("layer.interpolation")],R.ExportImageServiceParameters.prototype,"interpolation",void 0);v.__decorate([I.property({json:{write:!0}}),p.aliasOf("layer.noData")],R.ExportImageServiceParameters.prototype,"noData",void 0);v.__decorate([I.property({type:String,
json:{read:{reader:q.noDataInterpretationKebab.read},write:{writer:q.noDataInterpretationKebab.write}}}),p.aliasOf("layer.noDataInterpretation")],R.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"pixelType",void 0);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"lercVersion",void 0);v.__decorate([m.writer("lercVersion")],R.ExportImageServiceParameters.prototype,
"writeLercVersion",null);v.__decorate([I.property({type:Number})],R.ExportImageServiceParameters.prototype,"version",null);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"mosaicRule",null);v.__decorate([I.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"renderingRule",null);R.ExportImageServiceParameters=v.__decorate([w.subclass("esri.layers.mixins.ExportImageServiceParameters")],R.ExportImageServiceParameters);Object.defineProperties(R,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ./rasterFunctionUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),function(R,D,v,E,p,U,J){function S(r,d){for(const e in r)"raster"===e.toLowerCase()&&("RasterFunctionVariable"===r[e].type?(r[e]=d.rasterFunctionDefinition,r[e].type="RasterFunctionTemplate"):
"RasterFunctionTemplate"===r[e].type&&S(r[e].arguments,d))}function I(r){const d=D.clone(E.schema[r.functionName+"Function"]);r=r.functionArguments;for(const e in r)"raster"===e.toLowerCase()?(d.arguments[e]=I(r[e]),d.arguments[e].type="RasterFunctionTemplate"):"colormap"===e.toLowerCase()?(d.arguments[e].value=f(r[e]),d.arguments.ColorSchemeType.value=0):d.arguments[e].value=r[e];return d}function w(r){const d=r.Raster;return d&&"esri.layers.support.RasterFunction"===d.declaredClass?w(d.functionArguments):
r}function m(r,d){const e=new v;e.functionName="VectorFieldRenderer";const {dataType:h,bandProperties:x}=d,A="vector-uv"===h?!0:!1;let z,M;x&&2===x.length&&(z=x.map(F=>F.BandName.toLowerCase()).indexOf("magnitude"),M=x.map(F=>F.BandName.toLowerCase()).indexOf("direction"));if(-1===z||null===z)z=0,M=1;const B="arithmetic"===r.rotationType?1:2,C="flow-from"===r.flowRepresentation?0:1,u=r.visualVariables?r.visualVariables.find(F=>"Magnitude"===F.field):new J;r={magnitudeBandID:z,directionBandID:M,isUVComponents:A,
referenceSystem:B,massFlowAngleRepresentation:C,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:g[r.style.toLowerCase().replace("-","_")],minimumMagnitude:u.minDataValue,maximumMagnitude:u.maxDataValue,minimumSymbolSize:u.minSize,maximumSymbolSize:u.maxSize};e.functionArguments=r;return d.convertToRFT?new v({rasterFunctionDefinition:I(e)}):e}function a(r,d){const e=d.convertToRFT,h=new v;h.functionName="Stretch";var x=y[U.stretchTypeJSONDict.toJSON(r.stretchType)],
A=c(r.statistics);A={StretchType:x,Statistics:A,DRA:r.dynamicRangeAdjustment,UseGamma:r.useGamma,Gamma:r.gamma,ComputeGamma:r.computeGamma};null!=r.outputMin&&(A.Min=r.outputMin);null!=r.outputMax&&(A.Max=r.outputMax);x===y.standardDeviation?(A.NumberOfStandardDeviations=r.numberOfStandardDeviations,h.outputPixelType="u8"):x===y.percentClip?(A.MinPercent=r.minPercent,A.MaxPercent=r.maxPercent,h.outputPixelType="u8"):x===y.minMax?h.outputPixelType="u8":x===y.sigmoid&&(A.SigmoidStrengthLevel=r.sigmoidStrengthLevel);
h.functionArguments=A;h.variableName="Raster";if(r.colorRamp){A=r.colorRamp;x=new v;if(e)x.functionArguments={ColorRamp:p.getRFxArgColorRampValue(A)};else{const M=p.getColorRampName(A);if(M)x.functionArguments={colorRamp:M};else if(!d.convertColorRampToColormap||"algorithmic"!==A.type&&"multipart"!==A.type){var z;r=r.colorRamp.toJSON();"algorithmic"===r.type?r.algorithm=r.algorithm||"esriCIELabAlgorithm":"multipart"===r.type&&null!=(z=r.colorRamps)&&z.length&&r.colorRamps.forEach(B=>B.algorithm=B.algorithm||
"esriCIELabAlgorithm");x.functionArguments={colorRamp:r}}else x.functionArguments={Colormap:p.convertColorRampToColormap(A,256)}}x.variableName="Raster";x.functionName="Colormap";x.functionArguments.Raster=h;return e?new v({rasterFunctionDefinition:I(x)}):x}return e?new v({rasterFunctionDefinition:I(h)}):h}function n(r,d){const e=[],h=[],x=[],A=[],{pixelType:z,rasterAttributeTable:M}=d,B=M&&M.features,C=l(M);if(B&&Array.isArray(B)&&r.classBreakInfos){r.classBreakInfos.forEach((T,H)=>{const G=T.symbol.color;
let P;G.a&&B.forEach(O=>{P=O.attributes[r.field];(P>=T.minValue&&P<T.maxValue||H===r.classBreakInfos.length-1&&P>=T.minValue)&&A.push([O.attributes[C],G.r,G.g,G.b])})});var u=z?q(A,z):A,F=new v;F.functionName="Colormap";F.functionArguments={};F.functionArguments.Colormap=u;F.variableName="Raster";return d.convertToRFT?new v({rasterFunctionDefinition:I(F)}):F}r.classBreakInfos.forEach((T,H)=>{const G=T.symbol&&T.symbol.color;G.a?(0===H?e.push(T.minValue,T.maxValue+1E-6):e.push(T.minValue+1E-6,T.maxValue+
1E-6),h.push(H),A.push([H,G.r,G.g,G.b])):x.push(T.minValue,T.maxValue)});u=z?q(A,z):A;F=new v;F.functionName="Remap";F.functionArguments={InputRanges:e,OutputValues:h,NoDataRanges:x};F.variableName="Raster";const L=new v;L.functionName="Colormap";L.functionArguments={Colormap:u,Raster:F};return d.convertToRFT?new v({rasterFunctionDefinition:I(L)}):L}function q(r,d){(d=k[String(d).toLowerCase()])&&r.push([Math.floor(d[0]-1),0,0,0],[Math.ceil(d[1]+1),0,0,0]);return r}function l(r){if(r)return{fields:r}=
r,(r=r&&r.find(d=>d&&d.name&&"value"===d.name.toLowerCase()))&&r.name}function b(r,d){var e,h;const x=[],{pixelType:A,rasterAttributeTable:z}=d;var M=z&&z.features;const B=l(z),C=null==(e=r.defaultSymbol)?void 0:null==(h=e.color)?void 0:h.toRgb();if(e=r.uniqueValueInfos)if(M){const u=new Map;e.forEach(L=>{var T;const H=L.value;L=null==(T=L.symbol.color)?void 0:T.toRgb();null!=H&&L&&u.set(String(H),L)});const F=r.field;M.forEach(({attributes:L})=>{var T=String(L[F]);L=L[B];u.has(T)?(T=u.get(T),x.push([L,
...T])):C&&x.push([L,...C])})}else for(r=0;r<e.length;r++)if(h=e[r],M=h.symbol.color,h=+h.value,null!=M&&M.a){if(isNaN(h))return null;x.push([h,M.r,M.g,M.b])}e=A&&0<x.length?q(x,A):x;r=new v;r.functionName="Colormap";r.functionArguments={};r.functionArguments.Colormap=e;r.variableName="Raster";return d.convertToRFT?new v({rasterFunctionDefinition:I(r)}):r}function c(r){const d=[];r.forEach(e=>{Array.isArray(e)?d.push(e):null!=e.min&&null!=e.max&&d.push([e.min,e.max,e.avg||0,e.stddev||0])});return d}
function f(r){const d=[],e=[];r.forEach(h=>{d.push(h[0]);e.push(p.rgbaConvertTo32Bit([...h.slice(1),255]))});return{type:"RasterColormap",values:d,colors:e}}const k={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},g={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},
t=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),y={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};R.combineRenderingRules=function(r,d){if(!r||!d)return D.clone(r||d);r=D.clone(r);if(d.rasterFunctionDefinition){const e=d.rasterFunctionDefinition;if(e.thumbnail||e.thumbnailEx)e.thumbnail=e.thumbnailEx=null;S(r.rasterFunctionDefinition.arguments,d)}else"none"!==d.functionName.toLowerCase()&&(w(r.functionArguments).Raster=
d);return r};R.convertRendererToRenderingRule=function(r,d){d=d||{};switch(r.type){case "raster-stretch":return a(r,d);case "class-breaks":return n(r,d);case "unique-value":return b(r,d);case "raster-colormap":var e=d;(d=r.extractColormap())&&0!==d.length?({pixelType:r}=e,r=r?q(d,r):d,d=new v,d.functionName="Colormap",d.functionArguments={},d.functionArguments.Colormap=r,r=e.convertToRFT?new v({rasterFunctionDefinition:I(d)}):d):r=void 0;return r;case "vector-field":return m(r,d);case "raster-shaded-relief":e=
d.convertToRFT;if("elevation"!==d.dataType)r=new v;else{d=new v;d.functionName="Hillshade";var h="traditional"===r.hillshadeType?0:1,x="none"===r.scalingType?1:3,A={HillshadeType:h,SlopeType:x,ZFactor:r.zFactor};0===h&&(A.Azimuth=r.azimuth,A.Altitude=r.altitude);3===x&&(A.PSPower=r.pixelSizePower,A.PSZFactor=r.pixelSizeFactor);d.functionArguments=A;d.variableName="Raster";r.colorRamp&&(d.functionName="ShadedRelief",e?A.ColorRamp=p.getRFxArgColorRampValue(r.colorRamp):A.Colormap=p.convertColorRampToColormap(r.colorRamp,
256));r=e?new v({rasterFunctionDefinition:I(d)}):d}return r;case "flow":throw Error("Unsupported rendering rule.");}};R.convertRenderingRuleToRFT=I;R.isSupportedRendererType=function(r){return t.has(r.type)};R.pixelTypeRanges=k;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(R,D,v,E,p,U,J,S,I,w){var m;const a=new Set(["raster","raster2","dem","fillraster"]),n=new Set(["rasters"]),q=k=>k&&k.rasterFunction?f.fromJSON(k):k,l=k=>k&&k instanceof f?k.toJSON():k,b=k=>(null==k?void 0:k.functionName)&&!k.declaredClass,c=k=>b(k)?new f(k):k;let f=m=function(k){function g(y){y=k.call(this,y)||this;y.functionName=null;y.outputPixelType="unknown";y.variableName=null;y.rasterFunctionDefinition=null;return y}R._inheritsLoose(g,k);var t=g.prototype;t.readFunctionArguments=function(y){if(null==
y)var r=null;else{y=E.clone(y);var d={};for(r of Object.keys(y))a.has(r.toLowerCase())?d[r]=q(y[r]):n.has(r.toLowerCase())&&Array.isArray(y[r])?d[r]=y[r].map(q):d[r]=y[r];r=d}return r};t.writeFunctionArguments=function(y,r,d){const e={};for(const h of Object.keys(y))a.has(h.toLowerCase())?e[h]=l(y[h]):n.has(h.toLowerCase())&&Array.isArray(y[h])?e[h]=y[h].map(l):e[h]=l(y[h]);r[d]=e};t.readFunctionName=function(y,r){y=r.rasterFunctionInfos;const d=r.name;return d?d:y&&y.length&&"None"!==y[0].name?y[0].name:
r.rasterFunctionDefinition?r.rasterFunctionDefinition.name:r.rasterFunction};t.clone=function(){return new m({functionName:this.functionName,functionArguments:E.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:E.clone(this.rasterFunctionDefinition)})};R._createClass(g,[{key:"functionArguments",set:function(y){if(y){const r=Object.keys(y);if(r.some(d=>a.has(d.toLowerCase())&&b(y[d]))||r.some(d=>n.has(d.toLowerCase())&&Array.isArray(y[d])&&
y[d].some(e=>b(e)))){y=E.clone(y);for(const d of r)a.has(d.toLowerCase())?y[d]=c(y[d]):n.has(d.toLowerCase())&&Array.isArray(y[d])&&(y[d]=y[d].map(e=>c(e)))}}this._set("functionArguments",y)}}]);return g}(v.JSONSupport);D.__decorate([p.property({json:{type:Object,name:"rasterFunctionArguments"}})],f.prototype,"functionArguments",null);D.__decorate([S.reader("functionArguments")],f.prototype,"readFunctionArguments",null);D.__decorate([w.writer("functionArguments")],f.prototype,"writeFunctionArguments",
null);D.__decorate([p.property({json:{type:String,write:{target:"rasterFunction"}}})],f.prototype,"functionName",void 0);D.__decorate([S.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],f.prototype,"readFunctionName",null);D.__decorate([J.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),p.property({json:{default:"unknown"}})],f.prototype,
"outputPixelType",void 0);D.__decorate([p.property({type:String,json:{read:!0,write:!0}})],f.prototype,"variableName",void 0);D.__decorate([p.property({type:Object,json:{name:"rasterFunctionDefinition"}})],f.prototype,"rasterFunctionDefinition",void 0);return f=m=D.__decorate([I.subclass("esri.layers.support.RasterFunction")],f)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(R){R.schema={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",
type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},
MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,
isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n){var q;const l=v.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),b=v.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});v=q=function(c){function f(g){g=c.call(this,g)||this;g.ascending=!0;g.itemRenderingRule=
null;g.lockRasterIds=null;g.method=null;g.multidimensionalDefinition=null;g.objectIds=null;g.operation=null;g.sortField=null;g.sortValue=null;g.viewpoint=null;g.where=null;return g}R._inheritsLoose(f,c);var k=f.prototype;k.readAscending=function(g,t){return null!=t.ascending?t.ascending:null!=t.sortAscending?t.sortAscending:!0};k.readMethod=function(g,t){g=t.mosaicMethod||t.defaultMosaicMethod;switch(g?g.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":g="esriMosaicAttribute";
break;case "lockraster":g="esriMosaicLockRaster";break;case "center":g="esriMosaicCenter";break;case "northwest":g="esriMosaicNorthwest";break;case "nadir":g="esriMosaicNadir";break;case "viewpoint":g="esriMosaicViewpoint";break;case "seamline":g="esriMosaicSeamline";break;case "none":g="esriMosaicNone";break;default:g="esriMosaicNone"}return g=b.fromJSON(g)};k.readOperation=function(g,t){g=t.mosaicOperation;t=t.mosaicOperator&&t.mosaicOperator.toLowerCase();t=g||(t?l.toJSON(t):null);return l.fromJSON(t)||
"first"};k.castSortValue=function(g){return null==g||"string"===typeof g||"number"===typeof g?g:`${g}`};k.clone=function(){return new q({ascending:this.ascending,itemRenderingRule:p.clone(this.itemRenderingRule),lockRasterIds:p.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:p.clone(this.multidimensionalDefinition),objectIds:p.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:p.clone(this.viewpoint),where:this.where})};
return f}(E.JSONSupport);D.__decorate([U.property({type:Boolean,json:{write:!0}})],v.prototype,"ascending",void 0);D.__decorate([S.reader("ascending",["ascending","sortAscending"])],v.prototype,"readAscending",null);D.__decorate([U.property({type:n,json:{write:!0}})],v.prototype,"itemRenderingRule",void 0);D.__decorate([U.property({type:[w.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],v.prototype,"lockRasterIds",void 0);D.__decorate([U.property({type:String,
json:{type:b.jsonValues,write:{target:"mosaicMethod",writer:b.write}}})],v.prototype,"method",void 0);D.__decorate([S.reader("method",["mosaicMethod","defaultMosaicMethod"])],v.prototype,"readMethod",null);D.__decorate([U.property({type:[a],json:{write:!0}})],v.prototype,"multidimensionalDefinition",void 0);D.__decorate([U.property({type:[w.Integer],json:{name:"fids",write:!0}})],v.prototype,"objectIds",void 0);D.__decorate([U.property({json:{type:l.jsonValues,read:{reader:l.read},write:{target:"mosaicOperation",
writer:l.write}}})],v.prototype,"operation",void 0);D.__decorate([S.reader("operation",["mosaicOperation","mosaicOperator"])],v.prototype,"readOperation",null);D.__decorate([U.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],v.prototype,"sortField",void 0);D.__decorate([U.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],v.prototype,"sortValue",void 0);D.__decorate([J.cast("sortValue")],
v.prototype,"castSortValue",null);D.__decorate([U.property({type:m,json:{write:!0}})],v.prototype,"viewpoint",void 0);D.__decorate([U.property({type:String,json:{write:!0}})],v.prototype,"where",void 0);return v=q=D.__decorate([I.subclass("esri.layers.support.MosaicRule")],v)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(R,D){const v=D.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
D=D.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});R.interpolationKebab=v;R.noDataInterpretationKebab=D;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a){v=function(n){function q(l){l=n.call(this,l)||this;l.attributeTable=null;l.bandCount=null;l.colormap=null;l.extent=null;l.format=void 0;l.height=null;l.width=null;l.histograms=null;l.keyProperties={};l.multidimensionalInfo=null;l.noDataValue=null;l.pixelSize=null;l.pixelType=null;l.isPseudoSpatialReference=!1;l.spatialReference=null;l.statistics=null;l.storageInfo=null;l.transform=null;return l}R._inheritsLoose(q,n);R._createClass(q,[{key:"dataType",get:function(){var l,
b,c;const f=null!=(l=null==(b=this.keyProperties)?void 0:null==(c=b.DataType)?void 0:c.toLowerCase())?l:"generic";return"stdtime"===f?"standard-time":f}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(l){l&&this._set("nativeExtent",l)}},{key:"nativePixelSize",get:function(){if(E.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const l=this.nativeExtent;return{x:l.width/this.width,y:l.height/this.height}}},{key:"hasMultidimensionalTranspose",
get:function(){var l;return!(null==(l=this.storageInfo)||!l.transposeInfo)}}]);return q}(v.JSONSupport);D.__decorate([p.property({json:{write:!0}})],v.prototype,"attributeTable",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"bandCount",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"colormap",void 0);D.__decorate([p.property({type:String,readOnly:!0})],v.prototype,"dataType",null);D.__decorate([p.property({type:w,json:{write:!0}})],v.prototype,"extent",void 0);
D.__decorate([p.property({type:w,json:{write:!0}})],v.prototype,"nativeExtent",null);D.__decorate([p.property({json:{write:!0}})],v.prototype,"nativePixelSize",null);D.__decorate([p.property({json:{write:!0}})],v.prototype,"format",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"height",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"width",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"hasMultidimensionalTranspose",null);D.__decorate([p.property({json:{write:!0}})],
v.prototype,"histograms",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"keyProperties",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"multidimensionalInfo",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"noDataValue",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"pixelSize",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"pixelType",void 0);D.__decorate([p.property()],v.prototype,"isPseudoSpatialReference",
void 0);D.__decorate([p.property({type:m,json:{write:!0}})],v.prototype,"spatialReference",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"statistics",void 0);D.__decorate([p.property({type:a,json:{write:!0}})],v.prototype,"storageInfo",void 0);D.__decorate([p.property({json:{write:!0}})],v.prototype,"transform",void 0);return v=D.__decorate([I.subclass("esri.layers.support.RasterInfo")],v)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(R,D,v,E,p,U,J,S,I){v=function(w){function m(){var a=w.apply(this,arguments)||this;a.blockWidth=void 0;a.blockHeight=void 0;a.compression=null;a.origin=null;a.firstPyramidLevel=null;a.maximumPyramidLevel=null;a.pyramidScalingFactor=2;a.pyramidBlockWidth=null;a.pyramidBlockHeight=null;a.isVirtualTileInfo=!1;a.tileInfo=null;a.transposeInfo=null;a.blockBoundary=null;return a}R._inheritsLoose(m,w);return m}(v.JSONSupport);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"blockWidth",
void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"blockHeight",void 0);D.__decorate([E.property({type:String,json:{write:!0}})],v.prototype,"compression",void 0);D.__decorate([E.property({type:I,json:{write:!0}})],v.prototype,"origin",void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"firstPyramidLevel",void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"maximumPyramidLevel",void 0);D.__decorate([E.property({json:{write:!0}})],
v.prototype,"pyramidResolutions",void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"pyramidScalingFactor",void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"pyramidBlockWidth",void 0);D.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"pyramidBlockHeight",void 0);D.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"isVirtualTileInfo",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"tileInfo",
void 0);D.__decorate([E.property()],v.prototype,"transposeInfo",void 0);D.__decorate([E.property()],v.prototype,"blockBoundary",void 0);return v=D.__decorate([S.subclass("esri.layers.support.RasterStorageInfo")],v)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(R,D,v,E,p){return function(){function U(){this._workerThread=null;this._destroyed=!1}var J=U.prototype;
J.initialize=function(){var S=R._asyncToGenerator(function*(){const I=yield E.open("RasterWorker");this._destroyed?I.close():this._workerThread=I});return function(){return S.apply(this,arguments)}}();J.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};J.convertVectorFieldData=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");return(I=
yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:I.pixelBlock.toJSON(),type:I.dataType},w))?new p(I):null});return function(I,w){return S.apply(this,arguments)}}();J.decode=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");return(I=yield this._workerThread.invoke("decode",I,w))?new p(I):null});return function(I,w){return S.apply(this,arguments)}}();J.symbolize=function(){var S=
R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");I={extent:I.extent&&I.extent.toJSON(),pixelBlock:v.isSome(I.pixelBlock)&&I.pixelBlock.toJSON(),simpleStretchParams:I.simpleStretchParams,bandIds:I.bandIds};return(w=yield this._workerThread.invoke("symbolize",I,w))?new p(w):null});return function(I,w){return S.apply(this,arguments)}}();J.updateSymbolizer=function(){var S=R._asyncToGenerator(function*(I,w){var m;
if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");const a=null==I?void 0:null==(m=I.rendererJSON)?void 0:m.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:I.toJSON(),histograms:a},w))});return function(I,w){return S.apply(this,arguments)}}();J.stretch=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");
if(null==I||!I.pixelBlock)return null;I={srcPixelBlock:I.pixelBlock.toJSON(),stretchParams:I.stretchParams};return(w=yield this._workerThread.invoke("stretch",I,w))?new p(w):null});return function(I,w){return S.apply(this,arguments)}}();J.split=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");if(null==I||!I.pixelBlock)return null;I={srcPixelBlock:I.pixelBlock.toJSON(),tileSize:I.tileSize,maximumPyramidLevel:I.maximumPyramidLevel};
const m=yield this._workerThread.invoke("split",I,w);m&&m.forEach((a,n)=>{m.set(n,a?p.fromJSON(a):null)});return m});return function(I,w){return S.apply(this,arguments)}}();J.estimateStatisticsHistograms=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");if(null==I||!I.pixelBlock)return null;I={srcPixelBlock:I.pixelBlock.toJSON()};return yield this._workerThread.invoke("estimateStatisticsHistograms",
I,w)});return function(I,w){return S.apply(this,arguments)}}();J.mosaicAndTransform=function(){var S=R._asyncToGenerator(function*(I,w){var m;if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");if(null==I||null==(m=I.srcPixelBlocks)||!m.length)return{pixelBlock:null};I={...I,srcPixelBlocks:I.srcPixelBlocks.map(a=>v.isSome(a)?a.toJSON():null)};w=yield this._workerThread.invoke("mosaicAndTransform",I,w);return{pixelBlock:w.pixelBlock?new p(w.pixelBlock):
null,localNorthDirections:w.localNorthDirections}});return function(I,w){return S.apply(this,arguments)}}();J.createFlowMesh=function(){var S=R._asyncToGenerator(function*(I,w){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");const m={buffer:I.flowData.data.buffer,maskBuffer:I.flowData.mask.buffer,width:I.flowData.width,height:I.flowData.height},{meshType:a,simulationSettings:n}=I;I=yield this._workerThread.invoke("createFlowMesh",{meshType:a,
flowData:m,simulationSettings:n},{...w,transferList:[m.buffer,m.maskBuffer]});return{vertexData:new Float32Array(I.vertexBuffer),indexData:new Uint32Array(I.indexBuffer)}});return function(I,w){return S.apply(this,arguments)}}();J.getProjectionOffsetGrid=function(S,I){if(!this._workerThread)throw new D("raster-jobhandler:no-connection","no available worker connection");const w=v.isSome(S.datumTransformation)?S.datumTransformation.steps.map(a=>({wkid:a.wkid,wkt:a.wkt,isInverse:a.isInverse})):null,
m=v.isSome(S.rasterTransform)?S.rasterTransform.toJSON():null;S={projectedExtent:S.projectedExtent.toJSON(),srcBufferExtent:S.srcBufferExtent.toJSON(),pixelSize:S.pixelSize,hasWrapAround:S.hasWrapAround,spacing:S.spacing,datumTransformationSteps:w,rasterTransform:m,isAdaptive:S.isAdaptive,includeGCSGrid:S.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",S,I)};return U}()})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/maybe",
"../DimensionalDefinition"],function(R,D,v){function E(J,S,I){const w=S.shift();0===I.length&&I.push({sliceId:-1,multidimensionalDefinition:[]});const m=I.length;for(let a=0;a<m;a++){const n=I.shift().multidimensionalDefinition;w.values.forEach(q=>{I.push({sliceId:-1,multidimensionalDefinition:[...n,{variableName:J,dimensionName:w.name,values:[q]}]})})}S.length&&E(J,S,I)}function p(J,S){var I,{values:w}=S;if(null!=w&&w.length)return Array.isArray(w[0])!==Array.isArray(J)?-1:Array.isArray(w[0])?w.findIndex(n=>
n[0]===J[0]&&n[1]===J[1]):w.indexOf(J);var {extent:m}=S;if(Array.isArray(J)||J<m[0]||J>m[1])return-1;w=S.interval||1;if("ISO8601"!==S.unit)return Math.round((J-m[0])/w);m=m[0];let a=-1;switch((null==(I=S.intervalUnit)?void 0:I.toLowerCase())||"seconds"){case "seconds":a=Math.round((J-m)/1E3/w);break;case "minutes":a=Math.round((J-m)/6E4/w);break;case "hours":a=Math.round((J-m)/36E5/w);break;case "days":a=Math.round((J-m)/864E5/w);break;case "months":S=(new Date(J)).getUTCFullYear()-(new Date(m)).getUTCFullYear();
I=(new Date(m)).getUTCMonth();w=(new Date(J)).getUTCMonth();a=0===S?w-I:w+11-I+12*(S-1);break;case "years":a=Math.round(((new Date(J)).getUTCFullYear()-(new Date(m)).getUTCFullYear())/w);break;case "decades":a=Math.round(((new Date(J)).getUTCFullYear()-(new Date(m)).getUTCFullYear())/10/w)}return a}function U(J){var S,I,w,m=null==(S=J.values)?void 0:S.length;if(m)return m;const {extent:a,unit:n}=J;S=J.interval||1;m=a[1]-a[0];if("ISO8601"!==n)return Math.round(m/S);switch(null!=(I=null==(w=J.intervalUnit)?
void 0:w.toLowerCase())?I:"seconds"){case "seconds":m=Math.round(m/1E3/S);break;case "minutes":m=Math.round(m/6E4/S);break;case "hours":m=Math.round(m/36E5/S);break;case "days":m=Math.round(m/864E5/S);break;case "months":J=(new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear();I=(new Date(a[1][0])).getUTCMonth();w=(new Date(a[1][1])).getUTCMonth();m=0===J?w-I+1:w+11-I+12*(J-1)+1;break;case "years":m=Math.round(((new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear())/S);break;
case "decades":m=Math.round(((new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear())/10/S);break;default:m=0}return m}R.createSlices=function(J,S){const I=[];let w=0;(S?J.variables.filter(m=>m.name.toLowerCase()===S.toLowerCase()):[...J.variables].sort((m,a)=>m.name>a.name?1:-1)).forEach(m=>{const a=[],n=[...m.dimensions].sort((q,l)=>q.name>l.name?-1:1);E(m.name,n,a);a.forEach(q=>{I.push({...q,sliceId:w++})})});return I};R.getDefaultMultidimensionalDefinition=function(J,S){var I;const {multidimensionalInfo:w,
keyProperties:m}=J;if(D.isNone(w))return null;const a=null==m?void 0:m.DefaultVariable;({variables:J}=w);const n=a?null!=(I=J.find(({name:q})=>q===a))?I:J[0]:J[0];return n.dimensions.map(q=>{var l;const {values:b,extent:c}=q;let f=null!=(l=null==b?void 0:b[0])?l:c[0];"stdz"===q.name.toLowerCase()&&!q.hasRanges&&Math.abs(c[1])<=Math.abs(c[0])&&(f=null!=b&&b.length?q.values[b.length-1]:c[1]);return new v({variableName:n.name,dimensionName:q.name,values:[f],isSlice:S?!!q.hasRanges:!0})})};R.getSliceIds=
function(J,S,I){let w=J;S&&(S=[...S].sort((m,a)=>m.dimensionName<a.dimensionName?-1:1),S.forEach(({dimensionName:m,values:a,isSlice:n})=>{a.length&&(w=w.filter(q=>{q=q.multidimensionalDefinition.find(b=>b.dimensionName===m);if(null==q)return!1;const l=q.values[0];return"number"===typeof l?"number"===typeof a[0]?a.includes(l):a.some(b=>b[0]<=l&&b[1]>=l):"number"===typeof a[0]?a.some(b=>l[0]<=b&&l[1]>=b):n?a.some(b=>b[0]===l[0]&&b[0]===l[1]):a.some(b=>b[0]>=l[0]&&b[0]<=l[1]||b[1]>=l[0]&&b[1]<=l[1]||
b[0]<l[0]&&b[1]>l[1])}))}));if(w.length&&I&&D.isSome(I.start)&&D.isSome(I.end)){const m=I.start.getTime(),a=I.end.getTime(),n=w[0].multidimensionalDefinition.findIndex(q=>"StdTime"===q.dimensionName);-1<n&&(w=w.filter(q=>{q=q.multidimensionalDefinition[n].values[0];return m<=q&&a>=q}))}return w.map(m=>m.sliceId)};R.getSliceIndex=function(J,S){let I=0;var w=J[0].variableName;S=[...S.variables].sort((a,n)=>a.name>n.name?1:-1);for(var m=0;m<S.length;m++){const a=S[m],n=[...a.dimensions].sort((q,l)=>
q.name>l.name?-1:1);if(a.name!==w)I+=n.map(q=>U(q)).reduce((q,l)=>q*l);else{w=n.map(q=>U(q));S=n.length;for(let q=0;q<S;q++){m=J.find(l=>l.dimensionName===n[q].name);if(null==m)return null;m=p(m.values[0],n[q]);if(-1===m)return null;w.shift();I=q===S-1?I+m:I+m*w.reduce((l,b)=>l*b)}break}}return I};R.isMultiSliceOrRangeDefinition=function(J){return D.isNone(J)||!J.length?!1:J.some(S=>{if(null==S.values)return!0;const I=S.values.length;return 0===I||1<I||!S.isSlice&&Array.isArray(S.values[0])})};Object.defineProperties(R,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(R,D,v,E,p,U,J,S,I,w,m,a){function n(u,F){return q.apply(this,arguments)}function q(){q=D._asyncToGenerator(function*(u,F){var L;if(!a.isPlatformLittleEndian)throw new v("rasterCoded:decode",
"lerc decoder is not supported on big endian platform");yield J.load();const {offset:T,noDataValue:H}=F;let G=null==(L=F.pixelType)?void 0:L.toUpperCase();G&&!C.has(G)&&(G=null);const {width:P,height:O,pixelType:V,statistics:X,pixels:Y,mask:ba}=J.decode(u,{inputOffset:T,noDataValue:H,pixelType:G,returnPixelInterleavedDims:F.returnPixelInterleavedDims});return new E({width:P,height:O,pixelType:V.toLowerCase(),pixels:Y,mask:ba,statistics:X})});return q.apply(this,arguments)}function l(u,F){return b.apply(this,
arguments)}function b(){b=D._asyncToGenerator(function*(u,F){u=yield m.decode(u,F);u=new E({width:u.width,height:u.height,pixels:u.pixels,pixelType:u.pixelType.toLowerCase(),mask:u.mask,statistics:null});u.updateStatistics();return u});return b.apply(this,arguments)}function c(u,F){return f.apply(this,arguments)}function f(){f=D._asyncToGenerator(function*(u,F){u=yield m.decodeTileOrStrip(u,F.customOptions);u=new E({width:u.width,height:u.height,pixels:u.pixels,pixelType:u.pixelType.toLowerCase(),
mask:u.mask,statistics:null});u.updateStatistics();return u});return f.apply(this,arguments)}function k(u,F){const L=F.pixelType||"u8",T=E.getPixelArrayConstructor(L),H="u8"===L?u:new T(u.buffer),G=[],P=F.planes||1;if(1===P)G.push(H);else for(let O=0;O<P;O++){const V=(F.width||1)*(F.height||u.length),X=new T(V);for(let Y=0;Y<V;Y++)X[Y]=H[Y*P+O];G.push(X)}u=new E({width:F.width||1,height:F.height||u.length,pixels:G,pixelType:L,statistics:null});u.updateStatistics();return u}function g(u,F){u=(new I.Zlib(new Uint8Array(u))).getBytes();
return k(u,F)}function t(u,F){u=S.decode(u,F.offset,F.eof,!F.isInputBigEndian);return k(u,F)}function y(u,F){u=U.decode(u,F.hasNoZlibMask);u=new E({width:u.width,height:u.height,pixels:u.pixels,pixelType:"U8",mask:u.mask,statistics:null});u.updateStatistics();return u}function r(u,F){u=new Uint8Array(u);u=new M(u);const {width:L,height:T}=F;F=L*T;u=u.decode();let H=0;var G=0;let P;G=new Uint8Array(F);for(H=0;H<F;H++)G[H]=u[4*H+3];const O=new E({width:L,height:T,pixels:[],pixelType:"U8",mask:G,statistics:[]});
for(H=0;3>H;H++){P=new Uint8Array(F);for(G=0;G<F;G++)P[G]=u[4*G+H];O.addData({pixels:P})}O.updateStatistics();return O}function d(u,F,L,T){return e.apply(this,arguments)}function e(){e=D._asyncToGenerator(function*(u,F,L,T){u=yield(new p).decode(u,{applyJpegMask:!1,format:F,...L},T);u=new E(u);u.updateStatistics();return u});return e.apply(this,arguments)}function h(u){if(null==u)throw new v("rasterCodec:decode","parameter encodeddata is required.");u=new Uint8Array(u,0,10);let F="";255===u[0]&&216===
u[1]?F="jpg":137===u[0]&&80===u[1]&&78===u[2]&&71===u[3]?F="png":67===u[0]&&110===u[1]&&116===u[2]&&90===u[3]&&73===u[4]&&109===u[5]&&97===u[6]&&103===u[7]&&101===u[8]&&32===u[9]?F="lerc":76===u[0]&&101===u[1]&&114===u[2]&&99===u[3]&&50===u[4]&&32===u[5]?F="lerc2":73===u[0]&&73===u[1]&&42===u[2]&&0===u[3]||77===u[0]&&77===u[1]&&0===u[2]&&42===u[3]||73===u[0]&&73===u[1]&&43===u[2]&&0===u[3]||77===u[0]&&77===u[1]&&0===u[2]&&43===u[3]?F="tiff":71===u[0]&&73===u[1]&&70===u[2]?F="gif":66===u[0]&&77===
u[1]?F="bmp":String.fromCharCode.apply(null,u).toLowerCase().includes("error")&&(F="error");return F}function x(u){let F=null;switch(u){case "lerc":case "lerc2":F=n;break;case "jpg":F=y;break;case "png":F=r;break;case "bsq":case "bip":F=(L,T)=>{{var H=T.pixelType;var G=null;let P=null;switch(H?H.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":P=255;G=Uint8Array;break;case "u16":P=P||65535;G=Uint16Array;break;case "u32":P=P||2**32-1;G=Uint32Array;break;case "s8":P=P||-128;G=Int8Array;
break;case "s16":P=P||-32768;G=Int16Array;break;case "s32":P=P||-(2**31);G=Int32Array;break;default:G=Float32Array}H={pixelTypeCtor:G,noDataValue:P}}({pixelTypeCtor:H}=H);G=w.decode;L=G(L,{width:T.width,height:T.height,pixelType:H,format:u});T=new E({width:T.width,height:T.height,pixels:L.pixels,pixelType:T.pixelType,mask:L.mask,statistics:null});T.updateStatistics();return T};break;case "tiff":F=l;break;case "deflate":F=g;break;case "lzw":F=t;break;case "error":F=()=>{throw new v("rasterCodec:decode",
"input data contains error");};break;default:F=()=>{throw new v("rasterCodec:decode","unsupported raster format");}}return F}function A(u,F=1){if(u){var {pixels:L,width:T,height:H,mask:G}=u;if(L&&0!==L.length){var P=L.length,O=T-1,V=H-1,X=[],Y,ba,ea=E.getPixelArrayConstructor(u.pixelType);if(0===F){for(F=0;F<P;F++){var ca=L[F];var da=new ea(O*V);for(Y=0;Y<V;Y++){var Q=Y*T;for(ba=0;ba<O;ba++)da[Y*O+ba]=ca[Q+ba]}X.push(da)}if(G){var W=new Uint8Array(O*V);for(Y=0;Y<V;Y++)for(Q=Y*T,ba=0;ba<O;ba++)W[Y*
O+ba]=G[Q+ba]}}else{for(F=0;F<P;F++){ca=L[F];da=new ea(O*V);for(Y=0;Y<V;Y++)for(Q=Y*T,ba=0;ba<O;ba++)da[Y*O+ba]=(ca[Q+ba]+ca[Q+ba+1]+ca[Q+T+ba]+ca[Q+T+ba+1])/4;X.push(da)}if(G)for(W=new Uint8Array(O*V),Y=0;Y<V;Y++)for(Q=Y*T,ba=0;ba<O;ba++)W[Y*O+ba]=Math.min.apply(null,[G[Q+ba],G[Q+ba+1],G[Q+T+ba],G[Q+T+ba+1]])}u.width=O;u.height=V;u.mask=W;u.pixels=X}}}function z(){z=D._asyncToGenerator(function*(u,F={},L){if(null==u)throw new v("rasterCodec:decode","missing encodeddata parameter.");let T=F.format&&
F.format.toLowerCase();if(!("bsq"!==T&&"bip"!==T||null!=F.width&&null!=F.height))throw new v("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===T&&F.customOptions)return c(u,F);if(!T||"bsq"!==T&&"bip"!==T&&"deflate"!==T&&"lzw"!==T)T=h(u);F.useCanvas&&B.has(T)?u=yield d(u,T,F,L):(L=x(T),F.isPoint&&(F={...F},F.width++,F.height++),u=yield L(u,F),F.isPoint&&A(u));return u});return z.apply(this,arguments)}var M=function(u){function F(G){var P,O;this.data=G;this.pos=8;this.palette=
[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(O=null;;){var V=this.readUInt32();var X=G=void 0;G=[];for(X=0;4>X;++X)G.push(String.fromCharCode(this.data[this.pos++]));G=G.join("");switch(G){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation=
{numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(V);break;case "fcTL":O&&this.animation.frames.push(O);this.pos+=4;O={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};G=this.readUInt16();V=this.readUInt16()||100;O.delay=1E3*G/V;O.disposeOp=this.data[this.pos++];O.blendOp=this.data[this.pos++];O.data=[];break;case "IDAT":case "fdAT":"fdAT"===G&&(this.pos+=4,V-=4);G=(null!=O?O.data:
void 0)||this.imgData;for(X=0;0<=V?X<V:X>V;0<=V?++X:--X)G.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(V);V=255-this.transparency.indexed.length;if(0<V)for(G=0;0<=V?G<V:G>V;0<=V?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(V)[0];break;case 2:this.transparency.rgb=this.read(V)}break;case "tEXt":X=this.read(V);V=X.indexOf(0);G=String.fromCharCode.apply(String,X.slice(0,
V));this.text[G]=String.fromCharCode.apply(String,X.slice(V+1));break;case "IEND":O&&this.animation.frames.push(O);a:{switch(this.colorType){case 0:case 3:case 4:O=1;break a;case 2:case 6:O=3;break a}O=void 0}this.colors=O;this.hasAlphaChannel=4===(P=this.colorType)||6===P;P=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*P;a:{switch(this.colors){case 1:P="DeviceGray";break a;case 3:P="DeviceRGB";break a}P=void 0}this.colorSpace=P;this.imgData=new Uint8Array(this.imgData);return;
default:this.pos+=V}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var L;F.load=function(G,P,O){"function"===typeof P&&(O=P);var V=new XMLHttpRequest;V.open("GET",G,!0);V.responseType="arraybuffer";V.onload=function(){var X=new Uint8Array(V.response||V.mozResponseArrayBuffer);X=new F(X);"function"===typeof(null!=P?P.getContext:void 0)&&X.render(P);return"function"===typeof O?O(X):void 0};return V.send(null)};F.prototype.read=function(G){var P;var O=[];for(P=
0;0<=G?P<G:P>G;0<=G?++P:--P)O.push(this.data[this.pos++]);return O};F.prototype.readUInt32=function(){var G=this.data[this.pos++]<<24;var P=this.data[this.pos++]<<16;var O=this.data[this.pos++]<<8;var V=this.data[this.pos++];return G|P|O|V};F.prototype.readUInt16=function(){var G=this.data[this.pos++]<<8;var P=this.data[this.pos++];return G|P};F.prototype.decodePixels=function(G){var P,O,V,X,Y,ba,ea,ca;null==G&&(G=this.imgData);if(0===G.length)return new Uint8Array(0);G=new I.Zlib(G);G=G.getBytes();
var da=this.pixelBitlength/8;var Q=da*this.width;var W=new Uint8Array(Q*this.height);var fa=G.length;for(O=X=Y=0;X<fa;){switch(G[X++]){case 0:for(V=P=0;P<Q;V=P+=1)W[O++]=G[X++];break;case 1:for(V=ba=0;ba<Q;V=ba+=1){P=G[X++];var aa=V<da?0:W[O-da];W[O++]=(P+aa)%256}break;case 2:for(V=aa=0;aa<Q;V=aa+=1){P=G[X++];var ia=(V-V%da)/da;ba=Y&&W[(Y-1)*Q+ia*da+V%da];W[O++]=(ba+P)%256}break;case 3:for(V=ca=0;ca<Q;V=ca+=1)P=G[X++],ia=(V-V%da)/da,aa=V<da?0:W[O-da],ba=Y&&W[(Y-1)*Q+ia*da+V%da],W[O++]=(P+Math.floor((aa+
ba)/2))%256;break;case 4:for(V=ca=0;ca<Q;V=ca+=1){P=G[X++];ia=(V-V%da)/da;aa=V<da?0:W[O-da];0===Y?ba=ea=0:(ba=W[(Y-1)*Q+ia*da+V%da],ea=ia&&W[(Y-1)*Q+(ia-1)*da+V%da]);var ja=aa+ba-ea;V=Math.abs(ja-aa);ia=Math.abs(ja-ba);ja=Math.abs(ja-ea);aa=V<=ia&&V<=ja?aa:ia<=ja?ba:ea;W[O++]=(P+aa)%256}break;default:throw Error("Invalid filter algorithm: "+G[X-1]);}Y++}return W};F.prototype.decodePalette=function(){var G,P,O,V;var X=this.palette;var Y=this.transparency.indexed||[];var ba=new Uint8Array((Y.length||
0)+X.length);var ea=0;X.length;var ca=P=G=0;for(O=X.length;P<O;ca=P+=3)ba[ea++]=X[ca],ba[ea++]=X[ca+1],ba[ea++]=X[ca+2],ba[ea++]=null!=(V=Y[G++])?V:255;return ba};F.prototype.copyToImageData=function(G,P){var O,V;var X=this.colors;var Y=null;var ba=this.hasAlphaChannel;this.palette.length&&(Y=null!=(O=this._decodedPalette)?O:this._decodedPalette=this.decodePalette(),X=4,ba=!0);G=G.data||G;var ea=G.length;var ca=Y||P;O=V=0;if(1===X)for(;O<ea;)X=Y?4*P[O/4]:V,V=ca[X++],G[O++]=V,G[O++]=V,G[O++]=V,G[O++]=
ba?ca[X++]:this.transparency.grayscale&&this.transparency.grayscale===V?0:255,V=X;else for(;O<ea;)X=Y?4*P[O/4]:V,G[O++]=ca[X++],G[O++]=ca[X++],G[O++]=ca[X++],G[O++]=ba?ca[X++]:this.transparency.rgb&&this.transparency.rgb[1]===ca[X-3]&&this.transparency.rgb[3]===ca[X-2]&&this.transparency.rgb[5]===ca[X-1]?0:255,V=X};F.prototype.decode=function(){var G=new Uint8Array(this.width*this.height*4);this.copyToImageData(G,this.decodePixels());return G};var T=(L=u.document&&u.document.createElement("canvas"))&&
L.getContext("2d");var H=function(G){T.width=G.width;T.height=G.height;T.clearRect(0,0,G.width,G.height);T.putImageData(G,0,0);G=new Image;G.src=L.toDataURL();return G};F.prototype.decodeFrames=function(G){var P,O;if(this.animation){var V=this.animation.frames;var X=[];var Y=P=0;for(O=V.length;P<O;Y=++P){Y=V[Y];var ba=G.createImageData(Y.width,Y.height);var ea=this.decodePixels(new Uint8Array(Y.data));this.copyToImageData(ba,ea);Y.imageData=ba;X.push(Y.image=H(ba))}return X}};F.prototype.renderFrame=
function(G,P){var O=this.animation.frames;var V=O[P];O=O[P-1];0===P&&G.clearRect(0,0,this.width,this.height);1===(null!=O?O.disposeOp:void 0)?G.clearRect(O.xOffset,O.yOffset,O.width,O.height):2===(null!=O?O.disposeOp:void 0)&&G.putImageData(O.imageData,O.xOffset,O.yOffset);0===V.blendOp&&G.clearRect(V.xOffset,V.yOffset,V.width,V.height);return G.drawImage(V.image,V.xOffset,V.yOffset)};F.prototype.animate=function(G){var P,O=this;var V=0;var X=this.animation;var Y=X.numFrames;var ba=X.frames;var ea=
X.numPlays;return(P=function(){var ca=V++%Y;var da=ba[ca];O.renderFrame(G,ca);if(1<Y&&V/Y<ea)return O.animation._timeout=setTimeout(P,da.delay)})()};F.prototype.stopAnimation=function(){var G;return clearTimeout(null!=(G=this.animation)?G._timeout:void 0)};F.prototype.render=function(G){G._png&&G._png.stopAnimation();G._png=this;G.width=this.width;G.height=this.height;G=G.getContext("2d");if(this.animation)return this.decodeFrames(G),this.animate(G);var P=G.createImageData(this.width,this.height);
this.copyToImageData(P,this.decodePixels());return G.putImageData(P,0,0)};return F}(self);const B=new Set(["jpg","png","bmp","gif"]),C=new Set("S8 U8 S16 U16 S32 U32 F32 F64".split(" "));R.decode=function(u){return z.apply(this,arguments)};R.getFormat=function(u){u=h(u);"lerc2"===u?u="lerc":"error"===u&&(u="");return u};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(R,D,v){return function(){function E(p){p&&(this.canvas=p.canvas,this.ctx=p.ctx||p.canvas&&p.canvas.getContext("2d"))}E.prototype.decode=function(p,U,J){if(!p||10>p.byteLength)throw new R("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:S,height:I,format:w}=U;const {applyJpegMask:m}=U;if(m&&(!S||!I))throw new R("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((a,n)=>{let q=null;"jpg"===w&&m&&(q=E._getMask(p,{width:S,height:I}));const l=new Blob([new Uint8Array(p)],{type:"jpg"==="image/"+w?"jpeg":w}),b=URL.createObjectURL(l),c=new Image;let f;c.src=b;c.onload=()=>{URL.revokeObjectURL(b);if(D.isAborted(J))n(D.createAbortError());else{S=c.width;I=c.height;if(this.canvas){if(this.canvas.width!==S||this.canvas.height!==I)this.canvas.width=S,this.canvas.height=I;this.ctx.clearRect(0,0,S,I)}else this.canvas=document.createElement("canvas"),
this.canvas.width=S,this.canvas.height=I,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(c,0,0);var k=this.ctx.getImageData(0,0,S,I);f=k.data;var g;if(U.renderOnCanvas){if(q)for(g=0;g<q.length;g++)f[4*g+3]=q[g]?255:0;this.ctx.putImageData(k,0,0);a(null)}else{k=S*I;var t=new Uint8Array(k),y=new Uint8Array(k),r=new Uint8Array(k);if(q)for(g=0;g<k;g++)t[g]=f[4*g],y[g]=f[4*g+1],r[g]=f[4*g+2];else for(q=new Uint8Array(k),g=0;g<k;g++)t[g]=f[4*g],y[g]=f[4*g+1],r[g]=f[4*g+2],q[g]=f[4*g+3];a({width:S,
height:I,pixels:[t,y,r],mask:q,pixelType:"u8"})}}};c.onerror=()=>{URL.revokeObjectURL(b);n("cannot load image")}})};E._getMask=function(p,U){let J=null;try{var S=new Uint8Array(p);p=0;var I=S.length-2;for(p=Math.ceil(S.length/2);p<I&&(255!==S[p]||217!==S[p+1]);p++);p+=2;if(p<S.length-1){const w=(new v.Zlib(S.subarray(p))).getBytes();J=new Uint8Array(U.width*U.height);U=0;for(S=0;S<w.length;S++)for(I=7;0<=I;I--)J[U++]=w[S]>>I&1}}catch(w){}return J};return E}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(R){var D={exports:{}};(function(v){(function(E){E=E();void 0!==E&&(v.exports=E)})(function(){var E=function(){function p(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}p.prototype={ensureBuffer:function(U){var J=this.buffer,S=J?J.byteLength:0;if(U<S)return J;for(var I=512;I<U;)I<<=1;U=new Uint8Array(I);for(I=0;I<S;++I)U[I]=J[I];return this.buffer=U},getByte:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(U){var J=this.pos;if(U){this.ensureBuffer(J+U);for(U=J+U;!this.eof&&this.bufferLength<U;)this.readBlock();var S=this.bufferLength;U>S&&(U=S)}else{for(;!this.eof;)this.readBlock();U=this.bufferLength}this.pos=U;return this.buffer.subarray(J,U)},lookChar:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(U,J,S){for(var I=U+J;this.bufferLength<=I&&!this.eof;)this.readBlock();return new Stream(this.buffer,U,J,S)},skip:function(U){U||(U=1);this.pos+=U},reset:function(){this.pos=0}};return p}();return function(){function p(a){throw Error(a);}function U(a){var n=0,q=a[n++],l=a[n++];-1!=q&&-1!=l||p("Invalid header in flate stream");8!=(q&15)&&p("Unknown compression method in flate stream");0!=((q<<8)+l)%31&&p("Bad FCHECK in flate stream");
l&32&&p("FDICT bit set in flate stream");this.bytes=a;this.bytesPos=n;this.codeBuf=this.codeSize=0;E.call(this)}if(!self||!self.Uint32Array)return null;var J=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),I=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,
393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),w=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,
524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,
524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,
524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,
524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,
524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,
524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,
524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],m=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];U.prototype=Object.create(E.prototype);U.prototype.getBits=function(a){for(var n=
this.codeSize,q=this.codeBuf,l=this.bytes,b=this.bytesPos,c;n<a;)"undefined"==typeof(c=l[b++])&&p("Bad encoding in flate stream"),q|=c<<n,n+=8;this.codeBuf=q>>a;this.codeSize=n-=a;this.bytesPos=b;return q&(1<<a)-1};U.prototype.getCode=function(a){var n=a[0],q=a[1];a=this.codeSize;for(var l=this.codeBuf,b=this.bytes,c=this.bytesPos;a<q;){var f;"undefined"==typeof(f=b[c++])&&p("Bad encoding in flate stream");l|=f<<a;a+=8}q=n[l&(1<<q)-1];n=q>>16;q&=65535;(0==a||a<n||0==n)&&p("Bad encoding in flate stream");
this.codeBuf=l>>n;this.codeSize=a-n;this.bytesPos=c;return q};U.prototype.generateHuffmanTable=function(a){for(var n=a.length,q=0,l=0;l<n;++l)a[l]>q&&(q=a[l]);for(var b=1<<q,c=new Uint32Array(b),f=1,k=0,g=2;f<=q;++f,k<<=1,g<<=1)for(var t=0;t<n;++t)if(a[t]==f){var y=0,r=k;for(l=0;l<f;++l)y=y<<1|r&1,r>>=1;for(l=y;l<b;l+=g)c[l]=f<<16|t;++k}return[c,q]};U.prototype.readBlock=function(){function a(y,r,d,e,h){for(y=y.getBits(d)+e;0<y--;)r[k++]=h}var n=this.getBits(3);n&1&&(this.eof=!0);n>>=1;if(0==n){var q=
this.bytes,l=this.bytesPos,b;"undefined"==typeof(b=q[l++])&&p("Bad block header in flate stream");var c=b;"undefined"==typeof(b=q[l++])&&p("Bad block header in flate stream");c|=b<<8;"undefined"==typeof(b=q[l++])&&p("Bad block header in flate stream");n=b;"undefined"==typeof(b=q[l++])&&p("Bad block header in flate stream");(n|b<<8)!=(~c&65535)&&p("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;b=this.bufferLength;n=this.ensureBuffer(b+c);this.bufferLength=c=b+c;for(var f=
b;f<c;++f){if("undefined"==typeof(b=q[l++])){this.eof=!0;break}n[f]=b}this.bytesPos=l}else{if(1==n)l=w,b=m;else if(2==n){n=this.getBits(5)+257;b=this.getBits(5)+1;q=this.getBits(4)+4;l=Array(J.length);for(var k=0;k<q;)l[J[k++]]=this.getBits(3);l=this.generateHuffmanTable(l);k=q=0;b=n+b;for(c=Array(b);k<b;)f=this.getCode(l),16==f?a(this,c,2,3,q):17==f?a(this,c,3,3,q=0):18==f?a(this,c,7,11,q=0):c[k++]=q=f;l=this.generateHuffmanTable(c.slice(0,n));b=this.generateHuffmanTable(c.slice(n,b))}else p("Unknown block type in flate stream");
c=(n=this.buffer)?n.length:0;for(f=this.bufferLength;;){var g=this.getCode(l);if(256>g)f+1>=c&&(n=this.ensureBuffer(f+1),c=n.length),n[f++]=g;else{if(256==g){this.bufferLength=f;break}g-=257;g=S[g];var t=g>>16;0<t&&(t=this.getBits(t));q=(g&65535)+t;g=this.getCode(b);g=I[g];t=g>>16;0<t&&(t=this.getBits(t));g=(g&65535)+t;f+q>=c&&(n=this.ensureBuffer(f+q),c=n.length);for(t=0;t<q;++t,++f)n[f]=n[f-g]}}}};return U}()})})(D);R.Zlib=D.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(R,D){return function(){function v(){}v.decode=function(E,p=!1){const U=new Uint8Array(E);E=new R.JpegImage;E.parse(U);const {width:J,height:S,numComponents:I,eof:w}=E;E=E.getData(J,S,!0);let m;const a=J*S;let n=0,q=0,l=0;if(!p&&w<U.length-1)try{var b=(new D.Zlib(U.subarray(w))).getBytes();m=new Uint8Array(a);for(n=p=0;n<b.length;n++)for(l=7;0<=l;l--)m[p++]=b[n]>>l&1}catch{}b=null;if(1===I&&E.length===J*S)b=[E,E,E];else{b=[];for(n=0;3>n;n++)p=new Uint8Array(a),b.push(p);
for(q=l=0;q<a;q++)for(n=0;3>n;n++)b[n][q]=E[l++]}return{width:J,height:S,pixels:b,mask:m}};return v}()})},"esri/chunks/Jpg":function(){define(["exports"],function(R){var D={exports:{}};(function(v){(function(E){E=E();void 0!==E&&(v.exports=E)})(function(){var E=function(){function p(U){this.message="JPEG error: "+U}p.prototype=Error();p.prototype.name="JpegError";return p.constructor=p}();return function(){function p(){this.decodeTransform=null;this.colorTransform=-1}function U(m,a){for(var n=0,q=
[],l,b,c=16;0<c&&!m[c-1];)c--;q.push({children:[],index:0});var f=q[0],k;for(l=0;l<c;l++){for(b=0;b<m[l];b++){f=q.pop();for(f.children[f.index]=a[n];0<f.index;)f=q.pop();f.index++;for(q.push(f);q.length<=l;)q.push(k={children:[],index:0}),f.children[f.index]=k.children,f=k;n++}l+1<c&&(q.push(k={children:[],index:0}),f.children[f.index]=k.children,f=k)}return q[0].children}function J(m,a,n,q,l,b,c,f,k){function g(){if(0<C)return C--,B>>C&1;B=m[a++];if(255===B){var ca=m[a++];if(ca)throw new E("unexpected marker "+
(B<<8|ca).toString(16));}C=7;return B>>>7}function t(ca){for(;;){ca=ca[g()];if("number"===typeof ca)return ca;if("object"!==typeof ca)throw new E("invalid huffman sequence");}}function y(ca){for(var da=0;0<ca;)da=da<<1|g(),ca--;return da}function r(ca){if(1===ca)return 1===g()?1:-1;var da=y(ca);return da>=1<<ca-1?da:da+(-1<<ca)+1}function d(ca,da){var Q=t(ca.huffmanTableDC);Q=0===Q?0:r(Q);ca.blockData[da]=ca.pred+=Q;for(Q=1;64>Q;){var W=t(ca.huffmanTableAC),fa=W&15;W>>=4;if(0===fa){if(15>W)break;
Q+=16}else Q+=W,ca.blockData[da+w[Q]]=r(fa),Q++}}function e(ca,da){var Q=t(ca.huffmanTableDC);Q=0===Q?0:r(Q)<<k;ca.blockData[da]=ca.pred+=Q}function h(ca,da){ca.blockData[da]|=g()<<k}function x(ca,da){if(0<u)u--;else for(var Q=b;Q<=c;){var W=t(ca.huffmanTableAC),fa=W&15;W>>=4;if(0===fa){if(15>W){u=y(W)+(1<<W)-1;break}Q+=16}else Q+=W,ca.blockData[da+w[Q]]=r(fa)*(1<<k),Q++}}function A(ca,da){for(var Q=b,W=0,fa;Q<=c;){fa=w[Q];switch(F){case 0:W=t(ca.huffmanTableAC);fa=W&15;W>>=4;if(0===fa)15>W?(u=y(W)+
(1<<W),F=4):(W=16,F=1);else{if(1!==fa)throw new E("invalid ACn encoding");L=r(fa);F=W?2:3}continue;case 1:case 2:ca.blockData[da+fa]?ca.blockData[da+fa]+=g()<<k:(W--,0===W&&(F=2===F?3:0));break;case 3:ca.blockData[da+fa]?ca.blockData[da+fa]+=g()<<k:(ca.blockData[da+fa]=L<<k,F=0);break;case 4:ca.blockData[da+fa]&&(ca.blockData[da+fa]+=g()<<k)}Q++}4===F&&(u--,0===u&&(F=0))}var z=n.mcusPerLine,M=a,B=0,C=0,u=0,F=0,L,T=q.length,H,G,P,O;f=n.progressive?0===b?0===f?e:h:0===f?x:A:d;var V=0;n=1===T?q[0].blocksPerLine*
q[0].blocksPerColumn:z*n.mcusPerColumn;for(var X,Y;V<n;){var ba=l?Math.min(n-V,l):n;for(H=0;H<T;H++)q[H].pred=0;u=0;if(1===T){var ea=q[0];for(O=0;O<ba;O++)f(ea,64*((ea.blocksPerLine+1)*(V/ea.blocksPerLine|0)+V%ea.blocksPerLine)),V++}else for(O=0;O<ba;O++){for(H=0;H<T;H++)for(ea=q[H],X=ea.h,Y=ea.v,G=0;G<Y;G++)for(P=0;P<X;P++)f(ea,64*((ea.blocksPerLine+1)*((V/z|0)*ea.v+G)+(V%z*ea.h+P)));V++}C=0;(ea=I(m,a))&&ea.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ea.invalid),a=
ea.offset);ea=ea&&ea.marker;if(!ea||65280>=ea)throw new E("marker was not found");if(65488<=ea&&65495>=ea)a+=2;else break}(ea=I(m,a))&&ea.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ea.invalid),a=ea.offset);return a-M}function S(m,a){m=a.blocksPerLine;for(var n=a.blocksPerColumn,q=new Int16Array(64),l=0;l<n;l++)for(var b=0;b<m;b++){var c=void 0,f=void 0,k=void 0,g=void 0,t=void 0,y=void 0,r=void 0,d=void 0,e=t=y=g=f=c=void 0,h=void 0,x=void 0,A=void 0,z=64*((a.blocksPerLine+
1)*l+b),M=q,B=a.quantizationTable,C=a.blockData;if(!B)throw new E("missing required Quantization Table.");for(var u=0;64>u;u+=8)c=C[z+u],d=C[z+u+1],r=C[z+u+2],y=C[z+u+3],t=C[z+u+4],g=C[z+u+5],k=C[z+u+6],f=C[z+u+7],c*=B[u],0===(d|r|y|t|g|k|f)?(c=5793*c+512>>10,M[u]=c,M[u+1]=c,M[u+2]=c,M[u+3]=c,M[u+4]=c,M[u+5]=c,M[u+6]=c,M[u+7]=c):(d*=B[u+1],r*=B[u+2],y*=B[u+3],t*=B[u+4],g*=B[u+5],k*=B[u+6],f*=B[u+7],A=5793*c+128>>8,x=5793*t+128>>8,h=r,e=k,t=2896*(d-f)+128>>8,f=2896*(d+f)+128>>8,y<<=4,g<<=4,A=A+x+1>>
1,x=A-x,c=3784*h+1567*e+128>>8,h=1567*h-3784*e+128>>8,e=c,t=t+g+1>>1,g=t-g,f=f+y+1>>1,y=f-y,A=A+e+1>>1,e=A-e,x=x+h+1>>1,h=x-h,c=2276*t+3406*f+2048>>12,t=3406*t-2276*f+2048>>12,f=c,c=799*y+4017*g+2048>>12,y=4017*y-799*g+2048>>12,g=c,M[u]=A+f,M[u+7]=A-f,M[u+1]=x+g,M[u+6]=x-g,M[u+2]=h+y,M[u+5]=h-y,M[u+3]=e+t,M[u+4]=e-t);for(B=0;8>B;++B)c=M[B],d=M[B+8],r=M[B+16],y=M[B+24],t=M[B+32],g=M[B+40],k=M[B+48],f=M[B+56],0===(d|r|y|t|g|k|f)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,C[z+B]=c,C[z+B+8]=
c,C[z+B+16]=c,C[z+B+24]=c,C[z+B+32]=c,C[z+B+40]=c,C[z+B+48]=c,C[z+B+56]=c):(A=5793*c+2048>>12,x=5793*t+2048>>12,h=r,e=k,t=2896*(d-f)+2048>>12,f=2896*(d+f)+2048>>12,A=(A+x+1>>1)+4112,x=A-x,c=3784*h+1567*e+2048>>12,h=1567*h-3784*e+2048>>12,e=c,t=t+g+1>>1,g=t-g,f=f+y+1>>1,y=f-y,A=A+e+1>>1,e=A-e,x=x+h+1>>1,h=x-h,c=2276*t+3406*f+2048>>12,t=3406*t-2276*f+2048>>12,f=c,c=799*y+4017*g+2048>>12,y=4017*y-799*g+2048>>12,g=c,c=A+f,f=A-f,d=x+g,k=x-g,r=h+y,g=h-y,y=e+t,t=e-t,c=16>c?0:4080<=c?255:c>>4,d=16>d?0:4080<=
d?255:d>>4,r=16>r?0:4080<=r?255:r>>4,y=16>y?0:4080<=y?255:y>>4,t=16>t?0:4080<=t?255:t>>4,g=16>g?0:4080<=g?255:g>>4,k=16>k?0:4080<=k?255:k>>4,f=16>f?0:4080<=f?255:f>>4,C[z+B]=c,C[z+B+8]=d,C[z+B+16]=r,C[z+B+24]=y,C[z+B+32]=t,C[z+B+40]=g,C[z+B+48]=k,C[z+B+56]=f)}return a.blockData}function I(m,a,n){var q=m.length-1;n=n<a?n:a;if(a>=q)return null;var l=m[a]<<8|m[a+1];if(65472<=l&&65534>=l)return{invalid:null,marker:l,offset:a};for(a=m[n]<<8|m[n+1];!(65472<=a&&65534>=a);){if(++n>=q)return null;a=m[n]<<
8|m[n+1]}return{invalid:l.toString(16),marker:a,offset:n}}if(!self||!self.Uint8ClampedArray)return null;var w=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);p.prototype={parse:function(m){function a(){var B=m[l]<<8|m[l+1];l+=2;return B}function n(){var B=a();B=l+B-2;var C=I(m,B,l);C&&C.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+
C.invalid),B=C.offset);B=m.subarray(l,B);l+=B.length;return B}function q(B){for(var C=Math.ceil(B.samplesPerLine/8/B.maxH),u=Math.ceil(B.scanLines/8/B.maxV),F=0;F<B.components.length;F++){M=B.components[F];var L=Math.ceil(Math.ceil(B.samplesPerLine/8)*M.h/B.maxH),T=Math.ceil(Math.ceil(B.scanLines/8)*M.v/B.maxV);M.blockData=new Int16Array(64*u*M.v*(C*M.h+1));M.blocksPerLine=L;M.blocksPerColumn=T}B.mcusPerLine=C;B.mcusPerColumn=u}var l=0,b=null,c=null,f=[],k=[],g=[],t=a();if(65496!==t)throw new E("SOI not found");
for(t=a();65497!==t;){switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=n();65504===t&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(b={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])});65518===t&&65===y[0]&&100===
y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&(c={version:y[5]<<8|y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:t=a()+l-2;for(var r;l<t;){var d=m[l++],e=new Uint16Array(64);if(0===d>>4)for(y=0;64>y;y++)r=w[y],e[r]=m[l++];else if(1===d>>4)for(y=0;64>y;y++)r=w[y],e[r]=a();else throw new E("DQT - invalid table spec");f[d&15]=e}break;case 65472:case 65473:case 65474:if(h)throw new E("Only single frame JPEGs supported");a();var h={};h.extended=65473===t;h.progressive=
65474===t;h.precision=m[l++];h.scanLines=a();h.samplesPerLine=a();h.components=[];h.componentIds={};y=m[l++];for(t=e=d=0;t<y;t++){r=m[l];var x=m[l+1]>>4;var A=m[l+1]&15;d<x&&(d=x);e<A&&(e=A);x=h.components.push({h:x,v:A,quantizationId:m[l+2],quantizationTable:null});h.componentIds[r]=x-1;l+=3}h.maxH=d;h.maxV=e;q(h);break;case 65476:r=a();for(t=2;t<r;){d=m[l++];e=new Uint8Array(16);for(y=x=0;16>y;y++,l++)x+=e[y]=m[l];A=new Uint8Array(x);for(y=0;y<x;y++,l++)A[y]=m[l];t+=17+x;(0===d>>4?g:k)[d&15]=U(e,
A)}break;case 65501:a();var z=a();break;case 65498:a();r=m[l++];y=[];for(t=0;t<r;t++){d=h.componentIds[m[l++]];var M=h.components[d];d=m[l++];M.huffmanTableDC=g[d>>4];M.huffmanTableAC=k[d&15];y.push(M)}t=m[l++];r=m[l++];d=m[l++];t=J(m,l,h,y,z,t,r,d>>4,d&15);l+=t;break;case 65535:255!==m[l]&&l--;break;default:if(255===m[l-3]&&192<=m[l-2]&&254>=m[l-2])l-=3;else throw new E("unknown marker "+t.toString(16));}t=a()}this.width=h.samplesPerLine;this.height=h.scanLines;this.jfif=b;this.eof=l;this.adobe=
c;this.components=[];for(t=0;t<h.components.length;t++){M=h.components[t];if(b=f[M.quantizationId])M.quantizationTable=b;this.components.push({output:S(h,M),scaleX:M.h/h.maxH,scaleY:M.v/h.maxV,blocksPerLine:M.blocksPerLine,blocksPerColumn:M.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(m,a){var n=this.width/m,q=this.height/a,l,b,c=0,f=this.components.length,k=m*a*f,g=new Uint8ClampedArray(k),t=new Uint32Array(m);for(b=0;b<f;b++){var y=this.components[b];
var r=y.scaleX*n;var d=y.scaleY*q;c=b;var e=y.output;var h=y.blocksPerLine+1<<3;for(l=0;l<m;l++)y=0|l*r,t[l]=(y&4294967288)<<3|y&7;for(r=0;r<a;r++)for(y=0|r*d,y=h*(y&4294967288)|(y&7)<<3,l=0;l<m;l++)g[c]=e[y+t[l]],c+=f}if(a=this.decodeTransform)for(b=0;b<k;)for(m=y=0;y<f;y++,b++,m+=2)g[b]=(g[b]*a[m]>>8)+a[m+1];return g},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(m){for(var a,
n,q,l=0,b=m.length;l<b;l+=3)a=m[l],n=m[l+1],q=m[l+2],m[l]=a-179.456+1.402*q,m[l+1]=a+135.459-.344*n-.714*q,m[l+2]=a-226.816+1.772*n;return m},_convertYcckToRgb:function(m){for(var a,n,q,l,b=0,c=0,f=m.length;c<f;c+=4)a=m[c],n=m[c+1],q=m[c+2],l=m[c+3],m[b++]=-122.67195406894+n*(-6.60635669420364E-5*n+4.37130475926232E-4*q-5.4080610064599E-5*a+4.8449797120281E-4*l-.154362151871126)+q*(-9.57964378445773E-4*q+8.17076911346625E-4*a-.00477271405408747*l+1.53380253221734)+a*(9.61250184130688E-4*a-.00266257332283933*
l+.48357088451265)+l*(-3.36197177618394E-4*l+.484791561490776),m[b++]=107.268039397724+n*(2.19927104525741E-5*n-6.40992018297945E-4*q+6.59397001245577E-4*a+4.26105652938837E-4*l-.176491792462875)+q*(-7.78269941513683E-4*q+.00130872261408275*a+7.70482631801132E-4*l-.151051492775562)+a*(.00126935368114843*a-.00265090189010898*l+.25802910206845)+l*(-3.18913117588328E-4*l-.213742400323665),m[b++]=-20.810012546947+n*(-5.70115196973677E-4*n-2.63409051004589E-5*q+.0020741088115012*a-.00288260236853442*l+
.814272968359295)+q*(-1.53496057440975E-5*q-1.32689043961446E-4*a+5.60833691242812E-4*l-.195152027534049)+a*(.00174418132927582*a-.00255243321439347*l+.116935020465145)+l*(-3.43531996510555E-4*l+.24165260232407);return m},_convertYcckToCmyk:function(m){for(var a,n,q,l=0,b=m.length;l<b;l+=4)a=m[l],n=m[l+1],q=m[l+2],m[l]=434.456-a-1.402*q,m[l+1]=119.541-a+.344*n+.714*q,m[l+2]=481.816-a-1.772*n;return m},_convertCmykToRgb:function(m){for(var a,n,q,l,b=0,c=1/255,f=0,k=m.length;f<k;f+=4)a=m[f]*c,n=m[f+
1]*c,q=m[f+2]*c,l=m[f+3]*c,m[b++]=255+a*(-4.387332384609988*a+54.48615194189176*n+18.82290502165302*q+212.25662451639585*l-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*q-17.873870861415444*l-5.497006427196366)+q*(-2.5217340131683033*q-21.248923337353073*l+17.5119270841813)-l*(21.86122147463605*l+189.48180835922747),m[b++]=255+a*(8.841041422036149*a+60.118027045597366*n+6.871425592049007*q+31.159100130055922*l-79.2970844816548)+n*(-15.310361306967817*n+17.575251261109482*q+131.35250912493976*
l-190.9453302588951)+q*(4.444339102852739*q+9.8632861493405*l-24.86741582555878)-l*(20.737325471181034*l+187.80453709719578),m[b++]=255+a*(.8842522430003296*a+8.078677503112928*n+30.89978309703729*q-.23883238689178934*l-14.183576799673286)+n*(10.49593273432072*n+63.02378494754052*q+50.606957656360734*l-112.23884253719248)+q*(.03296041114873217*q+115.60384449646641*l-193.58209356861505)-l*(22.33816807309886*l+180.12613974708367);return m},getData:function(m,a,n){if(4<this.numComponents)throw new E("Unsupported color mode");
m=this._getLinearizedBlockData(m,a);if(1===this.numComponents&&n){n=m.length;a=new Uint8ClampedArray(3*n);for(var q=0,l=0;l<n;l++){var b=m[l];a[q++]=b;a[q++]=b;a[q++]=b}return a}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(m);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(m):this._convertYcckToCmyk(m);if(n)return this._convertCmykToRgb(m)}return m}};return p}()})})(D);R.JpegImage=D.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require",
"exports","../../../assets"],function(R,D,v){function E(w,m,a){a.set(w.slice(m,m+a.length))}function p(w){const {_malloc:m,_free:a,_lerc_getBlobInfo:n,_lerc_getDataRanges:q,_lerc_decode_4D:l,asm:b}=w;let c;const f=Object.values(b).find(g=>g&&"buffer"in g&&g.buffer===w.HEAPU8.buffer),k=g=>{g=g.map(r=>(r>>3<<3)+16);var t=g.reduce((r,d)=>r+d),y=m(t);c=new Uint8Array(f.buffer);t=g[0];g[0]=y;for(y=1;y<g.length;y++){const r=g[y];g[y]=g[y-1]+t;t=r}return g};I.getBlobInfo=g=>{var t=new Uint8Array(48),y=new Uint8Array(24);
const [r,d,e]=k([g.length,t.length,y.length]);c.set(g,r);c.set(t,d);c.set(y,e);var h=n(r,g.length,d,e,12,3);if(h)throw a(r),`lerc-getBlobInfo: error code is ${h}`;c=new Uint8Array(f.buffer);E(c,d,t);E(c,e,y);t=new Uint32Array(t.buffer);var x=new Float64Array(y.buffer);const [A,z,M,B,C,u,F,L,T,,H]=t;y={version:A,dimCount:M,width:B,height:C,validPixelCount:F,bandCount:u,blobSize:L,maskCount:T,dataType:z,minValue:x[0],maxValue:x[1],maxZerror:x[2],statistics:[],bandCountWithNoData:H};if(H)return y;if(1===
M&&1===u)return a(r),y.statistics.push({minValue:x[0],maxValue:x[1]}),y;h=M*u*8;var G=new Uint8Array(h),P=new Uint8Array(h);t=r;var O=x=0;let V=!1;c.byteLength<r+2*h?(a(r),V=!0,[t,x,O]=k([g.length,h,h]),c.set(g,t)):[x,O]=k([h,h]);c.set(G,x);c.set(P,O);if(h=q(t,g.length,M,u,x,O))throw a(t),V||a(x),`lerc-getDataRanges: error code is ${h}`;c=new Uint8Array(f.buffer);E(c,x,G);E(c,O,P);g=new Float64Array(G.buffer);h=new Float64Array(P.buffer);P=y.statistics;for(G=0;G<u;G++)if(1<M){O=g.slice(G*M,(G+1)*
M);const X=h.slice(G*M,(G+1)*M),Y=Math.min.apply(null,O),ba=Math.max.apply(null,X);P.push({minValue:Y,maxValue:ba,dimStats:{minValues:O,maxValues:X}})}else P.push({minValue:g[G],maxValue:h[G]});a(t);V||a(x);return y};I.decode=(g,t)=>{const {maskCount:y,dimCount:r,bandCount:d,width:e,height:h,dataType:x,bandCountWithNoData:A}=t;var z=U[x],M=e*h;t=new Uint8Array(M*d);z=new Uint8Array(M*r*d*z.size);M=new Uint8Array(d);var B=new Uint8Array(8*d);const [C,u,F,L,T]=k([g.length,t.length,z.length,M.length,
B.length]);c.set(g,C);c.set(t,u);c.set(z,F);c.set(M,L);c.set(B,T);if(g=l(C,g.length,y,u,r,e,h,d,x,F,L,T))throw a(C),`lerc-decode: error code is ${g}`;c=new Uint8Array(f.buffer);E(c,F,z);E(c,u,t);g=null;if(A){E(c,L,M);E(c,T,B);g=[];B=new Float64Array(B.buffer);for(let H=0;H<M.length;H++)g.push(M[H]?B[H]:null)}a(C);return{data:z,maskData:t,noDataValues:g}}}const U=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,
range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let J=null,S=!1;const I={getBlobInfo:null,decode:null};D.decode=function(w,m={}){var a,n=null!=
(a=m.inputOffset)?a:0;a=w instanceof Uint8Array?w.subarray(n):new Uint8Array(w,n);w=I.getBlobInfo(a);const {data:q,maskData:l}=I.decode(a,w),{width:b,height:c,bandCount:f,dimCount:k,dataType:g,maskCount:t,statistics:y}=w;a=U[g];var r=new a.ctor(q.buffer);n=[];const d=[],e=b*c;var h=e*k;for(var x=0;x<f;x++){var A=r.subarray(x*h,(x+1)*h);if(m.returnPixelInterleavedDims)n.push(A);else{a:{var z=e,M=k;if(2>M)break a;const B=new a.ctor(z*M);for(let C=0,u=0;C<z;C++)for(let F=0,L=C;F<M;F++,L+=z)B[L]=A[u++];
A=B}n.push(A)}d.push(l.subarray(x*h,(x+1)*h))}r=0===t?null:1===t?d[0]:new Uint8Array(e);if(1<t)for(r.set(d[0]),h=1;h<d.length;h++)for(x=d[h],A=0;A<e;A++)r[A]&=x[A];({noDataValue:h}=m);x=null!=h&&a.range[0]<=h&&a.range[1]>=h;if(0<t&&x)for(x=0;x<f;x++)for(A=n[x],z=d[x]||r,M=0;M<e;M++)0===z[M]&&(A[M]=h);return{width:b,height:c,bandCount:f,pixelType:m.pixelType&&0===w.version?m.pixelType:a.pixelType,dimCount:k,statistics:y,pixels:n,mask:r,bandMasks:t===f&&1<f?d:null}};D.getBlobInfo=function(w,m={}){var a,
n;w=w instanceof Uint8Array?w.subarray(null!=(a=m.inputOffset)?a:0):new Uint8Array(w,null!=(n=m.inputOffset)?n:0);return I.getBlobInfo(w)};D.isLoaded=function(){return S};D.load=function(){return J?J:J=(new Promise((w,m)=>R(["../../../chunks/lerc-wasm"],w,m))).then(w=>w.lercWasm).then(({default:w})=>w({locateFile:m=>v.getAssetUrl(`esri/layers/support/rasterFormats/${m}`)})).then(w=>{p(w);S=!0})};Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],
function(R){function D(U,J,S,I=!0){if(0!==J%4||0!==S%4){var w=new ArrayBuffer(4*Math.ceil(S/4));w=new Uint8Array(w);U=new Uint8Array(U,J,S);if(I)for(I=0;I<w.length;I+=4)w[I]=U[I+3],w[I+1]=U[I+2],w[I+2]=U[I+1],w[I+3]=U[I];else w.set(U);return new Uint32Array(w.buffer)}if(I){I=new Uint8Array(U,J,S);w=new Uint8Array(I.length);for(U=0;U<w.length;U+=4)w[U]=I[U+3],w[U+1]=I[U+2],w[U+2]=I[U+1],w[U+3]=I[U];return new Uint32Array(w.buffer)}return new Uint32Array(U,J,S/4)}function v(){const U=[];for(let J=0;257>=
J;J++)U[J]=[J];return U}function E(U,J){for(let S=0;S<J.length;S++)U.push(J[S])}const p=new Set;p.add(511);p.add(1023);p.add(2047);p.add(4095);p.add(8191);R.decode=function(U,J,S,I=!0){U=D(U,J,S,I);J=9;I=v();let w=32,m=I.length,a=[],n=1,q=U[0],l=0;const b=U.length;S=8*(4*b-S);const c=[];for(;null!=q;){if(w>=J)w-=J,l=q>>>32-J,q<<=J;else{l=q>>>32-w;q=U[n++];var f=J-w;w=32-f;l=(l<<f)+(q>>>w);q<<=f}if(257===l)break;if(256===l)J=9,I=v(),m=I.length,a=[];else{f=I[l];if(null==f){if(l>I.length)throw"data integrity issue: code does not exist on code page";
a.push(a[0]);I[m++]=a.slice();E(c,a)}else E(c,f),a.push(f[0]),1<a.length&&(I[m++]=a.slice()),a=f.slice();p.has(m)&&J++;0===w&&(q=U[n++],w=32);if(n>b||n===b&&w<=S)break}}return new Uint8Array(c)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const R=D=>{let v=1;switch(D){case Uint8Array:case Int8Array:v=1;break;case Uint16Array:case Int16Array:v=2;break;case Uint32Array:case Int32Array:case Float32Array:v=
4;break;case Float64Array:v=8}return v};return function(){function D(){}D.decode=function(v,E){var p=E.pixelType;const U=[],J=E.width*E.height;var S=Math.floor(v.byteLength/(E.width*E.height*R(E.pixelType)));const {bandIds:I,format:w}=E;E=I&&I.length||Math.floor(v.byteLength/(E.width*E.height*R(E.pixelType)));var m=v.byteLength-v.byteLength%(J*R(p));const a=new p(v,0,J*S);let n,q;let l,b;if("bip"===w)for(n=0;n<E;n++){l=new p(J);b=I?I[n]:n;for(q=0;q<J;q++)l[q]=a[q*S+b];U.push(l)}else if("bsq"===w)for(n=
0;n<E;n++)b=I?I[n]:n,U.push(a.subarray(b*J,(b+1)*J));if(m<v.byteLength-1)if(v=v.slice(m),8*v.byteLength<J)var c=null;else{v=new Uint8Array(v,0,Math.ceil(J/8));p=new Uint8Array(J);for(E=m=E=c=S=0;E<v.length-1;E++)for(c=v[E],m=7;0<=m;m--)p[S++]=c>>m&1;for(m=7;S<J-1;)c=v[v.length-1],p[S++]=c>>m&1,m--;c=p}return{pixels:U,mask:c}};return D}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(R,D,v,E,p,U,J,S,I){function w(H,G){let P="unknown";3===H?P="f32":1===H?1===G?P="u1":2===G?P="u2":4===G?P="u4":8>=G?P="u8":16>=G?P="u16":32>=G&&(P="u32"):2===H&&(8>=G?P="s8":16>=G?P="s16":32>=G&&(P="s32"));return P}function m(H){let G=null;switch(H?H.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":G=Uint8Array;break;case "u16":G=Uint16Array;break;case "u32":G=Uint32Array;break;case "s8":G=Int8Array;break;case "s16":G=Int16Array;break;case "s32":G=Int32Array;break;default:G=Float32Array}return G}
function a(H,G){return{x:G[0]*H.x+G[1]*H.y+G[2],y:G[3]*H.x+G[4]*H.y+G[5]}}function n(H,G){var P;return null==(P=H.get(G))?void 0:P.values}function q(H,G){var P;return null==(P=H.get(G))?void 0:P.values}function l(H,G){var P;return null==(P=H.get(G))?void 0:P.values[0]}function b(H,G){var P;return null==(P=H.get(G))?void 0:P.values[0]}function c(H,G,P,O=0,V=J.TIFF_TAGS,X=4){var Y=8===X;const ba=Y?h(new DataView(H,P,8),0,G):(new DataView(H,P,2)).getUint16(0,G),ea=4+2*X;var ca=Y?8:2;Y=ca+ba*ea;if(P+
Y>H.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:Y};const da=P+Y+4<=H.byteLength?x(new DataView(H,P+Y,8===X?8:4),0,G,8===X):null;P+=ca;ca=new Map;let Q,W,fa,aa,ia;for(let ka=0;ka<ba;ka++){var ja=new DataView(H,P+ea*ka,ea);Q=ja.getUint16(0,G);fa=ja.getUint16(2,G);W=J.getTagName(Q,V);const qa=[];2===X?(aa=ja.getUint16(4,G),ia=ja.getUint16(6,G)):4===X?(aa=ja.getUint32(4,G),ia=ja.getUint32(8,G)):8===X&&(aa=x(ja,4,G,!0),ia=x(ja,12,G,!0),qa.push(ja.getUint32(12,G)),qa.push(ja.getUint32(16,
G)));ja={id:Q,type:fa,valueCount:aa,valueOffset:ia,valueOffsets:qa,values:null};y(H,G,ja,O,!1,X);ca.set(W,ja)}return{success:!0,ifd:ca,nextIFD:da,requiredBufferSize:Y}}function f(H,G,P,O,V){return k.apply(this,arguments)}function k(){k=D._asyncToGenerator(function*(H,G,P,O,V){var X,Y,ba=S.isPlatformLittleEndian===G,ea=b(P,"BITSPERSAMPLE");const ca=null!=(X=b(P,"SAMPLEFORMAT"))?X:1;X=w(ca,ea);ea=null!=(Y=b(P,"COMPRESSION"))?Y:1;Y=m(X);if(34887===ea)return yield p.load(),p.decode(H,{inputOffset:O}).pixels[0];
if(1===ea){var da=H.slice(O,O+V);var Q=new Uint8Array(da)}else if(8===ea||32946===ea)Q=new Uint8Array(H,O,V),Q=new I.Zlib(Q),H=Q.getBytes(),da=new ArrayBuffer(H.length),Q=new Uint8Array(da),Q.set(H);else if(6===ea)Q=new Uint8Array(H,O,V),da=new E.JpegImage,da.parse(Q),H=da.getData(da.width,da.height,!0),da=new ArrayBuffer(H.length),Q=new Uint8Array(da),Q.set(H);else if(7===ea){G=P.get("JPEGTABLES").values;da=G.length-2;Q=new Uint8Array(da+V-2);for(P=0;P<da;P++)Q[P]=G[P];H=new Uint8Array(H,O+2,V-2);
for(O=0;O<H.length;O++)Q[da+O]=H[O];da=new E.JpegImage;da.parse(Q);H=da.getData(da.width,da.height,!0);da=new ArrayBuffer(H.length);Q=new Uint8Array(da);Q.set(H)}else 5===ea&&(Q=U.decode(H,O,V,G),da=Q.buffer);if("u8"!==X&&"s8"!==X&&!ba)switch(da=new ArrayBuffer(Q.length),ba=new Uint8Array(da),X){case "u16":case "s16":for(X=0;X<Q.length;X+=2)ba[X]=Q[X+1],ba[X+1]=Q[X];break;case "u32":case "s32":case "f32":for(X=0;X<Q.length;X+=4)ba[X]=Q[X+3],ba[X+1]=Q[X+2],ba[X+2]=Q[X+1],ba[X+3]=Q[X]}return new Y(da)});
return k.apply(this,arguments)}function g(H,G,P){return t.apply(this,arguments)}function t(){t=D._asyncToGenerator(function*(H,G,P){var O;const V=q(P,"TILEOFFSETS");if(void 0===V)return null;const X=q(P,"TILEBYTECOUNTS"),{width:Y,height:ba,pixelType:ea,tileWidth:ca,tileHeight:da}=r([P]);var Q=d(P,G);const W=G.planes;var fa=Y*ba,aa=b(P,"BITSPERSAMPLE"),ia=34887===(null!=(O=b(P,"COMPRESSION"))?O:1),ja=m(ea);O=[];for(var ka=0;ka<W;ka++)O.push(new ja(fa));let qa,ma,ya,sa,ra,Ba,za,wa;fa=Math.ceil(Y/ca);
if(0===aa%8)if(ia&&Q&&1<W)for(Q=Math.round(V.length/W),aa=0;aa<Q;aa++){var xa=Math.floor(aa/fa)*da;ya=aa%fa*ca;ja=xa*Y+ya;for(ia=0;ia<W;ia++)if(ka=aa*W+ia,0!==X[ka])for(ka=yield f(H,G.littleEndian,P,V[ka],X[ka]),ra=0,sa=ja,za=Math.min(ca,Y-ya),Ba=Math.min(da,ba-xa),wa=O[ia],qa=0;qa<Ba;qa++)for(sa=ja+qa*Y,ra=qa*ca,ma=0;ma<za;ma++,sa++,ra++)wa[sa]=ka[ra]}else for(aa=0;aa<V.length;aa++)if(0!==X[aa])for(xa=Math.floor(aa/fa)*da,ya=aa%fa*ca,ja=xa*Y+ya,ka=yield f(H,G.littleEndian,P,V[aa],X[aa]),ra=0,sa=
ja,za=Math.min(ca,Y-ya),Ba=Math.min(da,ba-xa),xa=0;xa<W;xa++)if(wa=O[xa],Q||ia)for(qa=0;qa<Ba;qa++)for(sa=ja+qa*Y,ra=ca*da*xa+qa*ca,ma=0;ma<za;ma++,sa++,ra++)wa[sa]=ka[ra];else for(qa=0;qa<Ba;qa++)for(sa=ja+qa*Y,ra=qa*ca*W+xa,ma=0;ma<za;ma++,sa++,ra+=W)wa[sa]=ka[ra];return{width:Y,height:ba,pixelType:ea,pixels:O}});return t.apply(this,arguments)}function y(H,G,P,O=0,V=!1,X=4){if(P.values)return!0;var Y=P.type,ba=P.valueCount,ea=P.valueOffset;let ca=[];var da=u[Y],Q=8*da,W=ba*da,fa=ba*u[Y]*8,aa=8===
X?64:32;X=P.valueOffsets;if(fa>aa&&W>(V?H.byteLength:H?H.byteLength-ea+O:0))return P.offlineOffsetSize=[ea,W],P.values=null,!1;if(fa<=aa)if(G||(32>=aa?ea>>>=32-fa:(H=null!=X&&X.length?X[0]:ea>>>0,G=null!=X&&X.length?X[1]:Math.round((ea-H)/4294967296),32>=fa?(ea=H>>>32-fa,X[0]=ea):(ea=H*2**(32-fa)+(G>>>32-fa),X[0]=H,X[1]=G>>>32-fa))),1===ba&&Q===aa)ca=[ea];else if(64===aa)for(H=null!=X&&X.length?X[0]:ea>>>0,ea=null!=X&&X.length?X[1]:Math.round((ea-H)/4294967296),G=H,da=32,H=1;H<=ba;H++)W=32-Q*H%32,
da<Q?(W=G<<W>>>32-da,fa=ea<<32-da>>>32-da,G=ea,ca.push(W+fa*2**(Q-da)),da-=32-(Q-da)):(ca.push(G<<W>>>32-Q),da-=Q),0===da&&(da=32,G=ea);else for(H=1;H<=ba;H++)ca.push(ea<<32-Q*H>>>32-Q);else for(ea-=O,V&&(ea=0),ba=ea;ba<ea+W;ba+=da){switch(Y){case 1:Q=(new DataView(H,ba,1)).getUint8(0);break;case 2:Q=(new DataView(H,ba,1)).getUint8(0);break;case 3:Q=(new DataView(H,ba,2)).getUint16(0,G);break;case 4:case 13:Q=(new DataView(H,ba,4)).getUint32(0,G);break;case 5:Q=(new DataView(H,ba,4)).getUint32(0,
G)/(new DataView(H,ba+4,4)).getUint32(0,G);break;case 6:Q=(new DataView(H,ba,1)).getInt8(0);break;case 7:Q=(new DataView(H,ba,1)).getUint8(0);break;case 8:Q=(new DataView(H,ba,2)).getInt16(0,G);break;case 9:Q=(new DataView(H,ba,4)).getInt32(0,G);break;case 10:Q=(new DataView(H,ba,4)).getInt32(0,G)/(new DataView(H,ba+4,4)).getInt32(0,G);break;case 11:Q=(new DataView(H,ba,4)).getFloat32(0,G);break;case 12:Q=(new DataView(H,ba,8)).getFloat64(0,G);break;case 16:case 18:Q=h(new DataView(H,ba,8),0,G);break;
case 17:X=new DataView(H,ba,8);fa=(Q=G)?X.getInt32(0,Q):X.getUint32(0,Q);X=Q?X.getUint32(4,Q):X.getInt32(4,Q);aa=0<=(Q?fa:X)?1:-1;Q?fa*=aa:X*=aa;Q=aa*(Q?4294967296*X+fa:4294967296*fa+X);break;default:Q=null}ca.push(Q)}if(2===Y){Y="";ea=ca;ca=[];for(H=0;H<ea.length;H++)0===ea[H]&&""!==Y?(ca.push(Y),Y=""):Y+=String.fromCharCode(ea[H]);""===Y&&0!==ca.length||ca.push(Y)}P.values=ca;return!0}function r(H){var G,P,O=H[0];const V=b(O,"TILEWIDTH"),X=b(O,"TILELENGTH"),Y=b(O,"IMAGEWIDTH"),ba=b(O,"IMAGELENGTH");
var ea=b(O,"BITSPERSAMPLE");const ca=b(O,"SAMPLESPERPIXEL");var da=null!=(G=b(O,"SAMPLEFORMAT"))?G:1;G=w(da,ea);const Q=d(O);var W=n(O,"GDAL_NODATA");let fa;null!=W&&W.length&&(fa=W.map(wa=>parseFloat(wa)),fa.some(wa=>isNaN(wa))&&(fa=null));var aa=null!=(P=b(O,"COMPRESSION"))?P:1;switch(aa){case 1:P="NONE";break;case 2:case 3:case 4:case 32771:P="CCITT";break;case 5:P="LZW";break;case 6:case 7:P="JPEG";break;case 32773:P="PACKBITS";break;case 8:case 32946:P="DEFLATE";break;case 34712:P="JPEG2000";
break;case 34887:P="LERC";break;default:P=String(aa)}W=!0;let ia="";F.has(aa)||(W=!1,ia+="unsupported tag compression "+aa);3<da&&(W=!1,ia+="unsupported tag sampleFormat "+da);0!==ea%8&&(W=!1,ia+="unsupported tag bitsPerSample "+ea);ea=l(O,"GEOASCIIPARAMS");if(ea){var ja=(ja=ea.split("|").find(wa=>wa.includes("ESRI PE String \x3d ")))?ja.replace("ESRI PE String \x3d ",""):"";ja=ja.startsWith("COMPD_CS")||ja.startsWith("PROJCS")||ja.startsWith("GEOGCS")?{wkid:null,wkt:ja}:null}da=q(O,"GEOTIEPOINTS");
ea=q(O,"GEOPIXELSCALE");aa=q(O,"GEOTRANSMATRIX");var ka=O.has("GEOKEYDIRECTORY")?O.get("GEOKEYDIRECTORY").data:null;O=!1;if(ka){O=2===b(ka,"GTRasterTypeGeoKey");var qa=b(ka,"GTModelTypeGeoKey");2===qa?(ka=b(ka,"GeographicTypeGeoKey"),1024<=ka&&32766>=ka&&(ja={wkid:ka})):1===qa&&(ka=b(ka,"ProjectedCSTypeGeoKey"),1024<=ka&&32766>=ka&&(ja={wkid:ka}))}let ma;ea&&da&&6<=da.length?(ma=[ea[0],0,da[3]-da[0]*ea[0],0,-Math.abs(ea[1]),da[4]-da[1]*ea[1]],O&&(ma[2]-=.5*ma[0]+.5*ma[1],ma[5]-=.5*ma[3]+.5*ma[4])):
aa&&16===aa.length&&(ma=O?[aa[0],aa[1],aa[3]-.5*aa[0],aa[4],aa[5],aa[7]-.5*aa[5]]:[aa[0],aa[1],aa[3],aa[4],aa[5],aa[7]]);if(ma){O=[{x:0,y:ba},{x:0,y:0},{x:Y,y:ba},{x:Y,y:0}];ka=aa=Number.POSITIVE_INFINITY;let wa=qa=Number.NEGATIVE_INFINITY;for(let xa=0;xa<O.length;xa++)da=a(O[xa],ma),aa=da.x>aa?aa:da.x,qa=da.x<qa?qa:da.x,ka=da.y>ka?ka:da.y,wa=da.y<wa?wa:da.y;ja={xmin:aa,xmax:qa,ymin:ka,ymax:wa,spatialReference:ja}}else ja={xmin:-.5,ymin:.5-ba,xmax:Y-.5,ymax:.5,spatialReference:ja};O=H.filter(wa=>
1===l(wa,"NEWSUBFILETYPE"));let ya,sa,ra;if(0<O.length){ya=Math.round(Math.log(Y/b(O[0],"IMAGEWIDTH"))/Math.LN2);var Ba=O[O.length-1];sa=Math.round(Math.log(Y/b(Ba,"IMAGEWIDTH"))/Math.LN2);ra=b(Ba,"TILEWIDTH");Ba=b(Ba,"TILELENGTH")}ra=0<sa?ra||V:null;Ba=0<sa?Ba||X:null;let za;V&&(za=[{maxCol:Math.ceil(Y/V)-1,maxRow:Math.ceil(ba/X)-1,minRow:0,minCol:0}],O.forEach(wa=>{za.push({maxCol:Math.ceil(b(wa,"IMAGEWIDTH")/b(wa,"TILEWIDTH"))-1,maxRow:Math.ceil(b(wa,"IMAGELENGTH")/b(wa,"TILELENGTH"))-1,minRow:0,
minCol:0})}));O=l(H[0],"GDAL_METADATA");O=T(O);ia+=" "+M({width:Y,height:ba,tileWidth:V,tileHeight:X,planes:ca,ifds:H});return{width:Y,height:ba,tileWidth:V,tileHeight:X,planes:ca,isBSQ:Q,pixelType:G,compression:P,noData:fa,isSupported:W,message:ia,extent:ja,affine:ea?null:ma,firstPyramidLevel:ya,maximumPyramidLevel:sa,pyramidBlockWidth:ra,pyramidBlockHeight:Ba,tileBoundary:za,metadata:O}}function d(H,G){return(H=n(H,"PLANARCONFIGURATION"))?2===H[0]:G?G.isBSQ:!1}function e(H){const {littleEndian:G,
isBigTiff:P,firstIFD:O}=A(H);var V=O;const X=[];do if(V=z(H,G,V,0,J.TIFF_TAGS,P?8:4),V.success)X.push(V.ifd),V=V.nextIFD;else break;while(0<V);return{...r(X),littleEndian:G,isBigTiff:P,ifds:X}}function h(H,G,P){const O=H.getUint32(G,P);H=H.getUint32(G+4,P);return P?4294967296*H+O:4294967296*O+H}function x(H,G,P,O){return O?h(H,G,P):H.getUint32(G,P)}function A(H){var G=new DataView(H,0,16),P=G.getUint16(0,!1);H=null;if(18761===P)H=!0;else if(19789===P)H=!1;else throw"unexpected endianess byte";var O=
G.getUint16(2,H);if(42!==O&&43!==O)throw"unexpected tiff identifier";P=4;if(O=43===O){const V=G.getUint16(P,H);P+=2;if(8!==V)throw"unsupported bigtiff version";if(0!==G.getUint16(P,H))throw"unsupported bigtiff version";P+=2}G=x(G,P,H,O);return{littleEndian:H,isBigTiff:O,firstIFD:G}}function z(H,G,P,O=0,V=J.TIFF_TAGS,X=4){P=c(H,G,P,O,V,X);let Y;const ba=P.ifd;ba&&(J.ifdTags.forEach((ea,ca)=>{ba.has(ca)&&(Y=ba.get(ca),Y.data=c(H,G,Y.valueOffset-O,O,ea).ifd)}),ba.has("GEOKEYDIRECTORY")&&(Y=ba.get("GEOKEYDIRECTORY"),
(V=Y.values)&&4<V.length&&(V=V[0]+"."+V[1]+"."+V[2],Y.data=c(H,G,Y.valueOffset+6-O,O,J.GEO_KEYS,2).ifd,Y.data&&Y.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[V]}))),ba.has("XMP")&&(Y=ba.get("XMP"),V=Y.values,"number"===typeof V[0]&&7===Y.type&&(Y.values=[v.bytesToUTF8(new Uint8Array(V))])));return P}function M(H){const {width:G,height:P,tileHeight:O,tileWidth:V}=H,X=H.planes,Y=V?V*O:G*P;H=b(H.ifds[0],"BITSPERSAMPLE");let ba="";Y*X>2**30/(8<H?H/8:1)&&(ba=V?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return ba}function B(){B=D._asyncToGenerator(function*(H,G){var P;const {headerInfo:O,ifd:V,offsets:X,sizes:Y}=G;var ba=[];for(var ea=0;ea<X.length;ea++){var ca=yield f(H,O.littleEndian,V,X[ea],Y[ea]||H.byteLength);ba.push(ca)}var da=d(V,O);const {pixelType:Q,planes:W}=O;var fa=m(Q);H=b(V,"TILEWIDTH");ea=b(V,"TILELENGTH");var aa=null!=(P=b(V,"COMPRESSION"))?P:1;P=H*ea;ca=[];let ia=ba[0];const ja=34887===aa;for(let ma=0;ma<W;ma++){aa=new fa(P);
if(da&&ja){if(ia=ba[ma],ia.length)for(var ka=0;ka<P;ka++)aa[ka]=ia[ma][ka+ma]}else if(ia.length)if(da||ja&&!da)aa=ia.slice(P*ma,P*(ma+1));else for(ka=0;ka<P;ka++)aa[ka]=ia[ka*W+ma];ca.push(aa)}ba=O.noData?O.noData[0]:G.noDataValue;da=(fa=O.metadata?O.metadata.statistics:null)?fa.map(ma=>ma.min):null;fa=fa?fa.map(ma=>ma.max):null;let qa;if(null!=ba)if(qa=new Uint8Array(P),1E24<Math.abs(ba))for(G=0;G<P;G++)qa[G]=1E-6>Math.abs((ca[0][G]-ba)/ba)?0:1;else for(G=0;G<P;G++)qa[G]=ca[0][G]===ba?0:1;else da&&
fa&&G.applyMinMaxConstraint&&(qa=L(ca,da,fa));return{pixelType:Q,width:H,height:ea,pixels:ca,mask:qa,noDataValue:ba}});return B.apply(this,arguments)}function C(){C=D._asyncToGenerator(function*(H,G={}){var P=G.pyramidLevel||0,O=G.headerInfo||e(H);const {ifds:V,noData:X}=O;if(0===V.length)throw"no valid image file directory";var Y=M(O);if(Y)throw Y;var ba=-1===P?V[V.length-1]:V[P];G=X?X[0]:G.noDataValue;if(O.tileWidth)O=yield g(H,O,ba);else{{var ea;const Ba=S.isPlatformLittleEndian===O.littleEndian,
za=q(ba,"STRIPOFFSETS");if(void 0===za)H=null;else{var {width:ca,height:da,pixelType:Q}=r([ba]);P=O.planes;Y=ca*da;var W=b(ba,"BITSPERSAMPLE"),fa=m(Q),aa=new fa(Y*P),ia=q(ba,"STRIPBYTECOUNTS"),ja=b(ba,"ROWSPERSTRIP");ba=null!=(ea=b(ba,"COMPRESSION"))?ea:1;var ka=ja;if(0===W%8)for(ea=0;ea<za.length;ea++){var qa=ea*ja*ca*P;ka=(ea+1)*ja>da?da-ea*ja:ja;if("u8"===Q||"s8"===Q||Ba)if(8===ba||32946===ba){var ma=new Uint8Array(H,za[ea],ia[ea]);ma=new I.Zlib(ma);var ya=ma.getBytes();var sa=new ArrayBuffer(ya.length);
ma=new Uint8Array(sa);ma.set(ya);ma.length!==ka*ca*P*W/8&&console.log("strip byte counts is different than expected")}else 6===ba?(ma=new Uint8Array(H,za[ea],ia[ea]),sa=new E.JpegImage,sa.parse(ma),ka=sa.getData(sa.width,sa.height,!0),sa=new ArrayBuffer(ka.length),ma=new Uint8Array(sa),ma.set(ka)):5===ba?(ma=U.decode(H,za[ea],ia[ea],O.littleEndian),sa=ma.buffer):1===ba&&(ia[ea]!==ka*ca*P*W/8&&console.log("strip byte counts is different than expected"),sa=H.slice(za[ea],za[ea]+ia[ea]));else{if(6===
ba||8===ba||32946===ba){ma=new Uint8Array(H,za[ea],ia[ea]);ma=new I.Zlib(ma);ma=ma.getBytes();sa=new ArrayBuffer(ma.length);var ra=new Uint8Array(sa);ma.length!==ka*ca*P*W/8&&console.log("strip byte counts is different than expected")}else 1===ba&&(ia[ea]!==ka*ca*P*W/8&&console.log("strip byte counts is different than expected"),sa=new ArrayBuffer(ia[ea]),ma=new Uint8Array(H,za[ea],ia[ea]),ra=new Uint8Array(sa));switch(Q){case "u16":case "s16":for(ka=0;ka<ma.length;ka+=2)ra[ka]=ma[ka+1],ra[ka+1]=
ma[ka];break;case "u32":case "s32":case "f32":for(ka=0;ka<ma.length;ka+=4)ra[ka]=ma[ka+3],ra[ka+1]=ma[ka+2],ra[ka+2]=ma[ka+1],ra[ka+3]=ma[ka]}}ka=new fa(sa);aa.set(ka,qa)}ra=[];if(1===P)ra.push(aa);else for(ea=0;ea<P;ea++){O=new fa(Y);for(H=0;H<Y;H++)O[H]=aa[H*P+ea];ra.push(O)}H={width:ca,height:da,pixelType:Q,pixels:ra}}}O=yield H}if(null!==G){O.mask=new Uint8Array(O.width*O.height);if(1E24<Math.abs(G))for(H=0;H<O.width*O.height;H++)O.mask[H]=1E-6>Math.abs((O.pixels[0][H]-G)/G)?0:1;else for(H=0;H<
O.width*O.height;H++)O.mask[H]=O.pixels[0][H]===G?0:1;O.noDataValue=G}return O});return C.apply(this,arguments)}const u=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],F=new Set([1,5,6,7,8,34712,34887]),L=(H,G,P)=>{if(!(H&&0<H.length&&G&&P))return null;let O,V,X;const Y=H[0].length,ba=H.length,ea=new Uint8Array(Y);for(let da=0;da<ba;da++)if(O=H[da],V=G[da],X=P[da],0===da)for(var ca=0;ca<Y;ca++)ea[ca]=O[ca]<V||O[ca]>X?0:1;else for(ca=0;ca<Y;ca++)ea[ca]&&(ea[ca]=O[ca]<V||O[ca]>X?0:1);return ea},T=H=>{if(!H)return null;
var G=H.match(/<Item(.*?)Item>/gi);if(!G||0===G.length)return null;H=new Map;var P;for(var O=0;O<G.length;O++){var V=G[O];var X=V.slice(6,V.indexOf("\x3e"));var Y=V.indexOf("sample\x3d");-1<Y&&(P=V.slice(Y+8,V.indexOf('"',Y+8)));Y=V.indexOf("name\x3d");-1<Y&&(X=V.slice(Y+6,V.indexOf('"',Y+6)));X&&(V=V.slice(V.indexOf("\x3e")+1,V.indexOf("\x3c/Item\x3e")).trim(),null!=P?H.has(X)?H.get(X)[P]=V:H.set(X,[V]):H.set(X,V));P=null}G=H.get("STATISTICS_MINIMUM");X=H.get("STATISTICS_MAXIMUM");O=H.get("STATISTICS_MEAN");
V=H.get("STATISTICS_STDDEV");P=null;if(G&&X)for(P=[],Y=0;Y<G.length;Y++)P.push({min:parseFloat(G[Y]),max:parseFloat(X[Y]),avg:O&&parseFloat(O[Y]),stddev:V&&parseFloat(V[Y])});X=H.get("BandName");O=H.get("WavelengthMin");V=H.get("WavelengthMax");G=null;if(X)for(G=[],Y=0;Y<X.length;Y++)G.push({BandName:X[Y],WavelengthMin:O&&parseFloat(O[Y]),WavelengthMax:V&&parseFloat(V[Y])});X=H.get("DataType");return{statistics:P,bandProperties:G,dataType:X,rawMetadata:H}};R.decode=function(H){return C.apply(this,
arguments)};R.decodeTileOrStrip=function(H,G){return B.apply(this,arguments)};R.getImageInfo=r;R.isBSQConfig=d;R.parseFieldValues=y;R.parseHeader=e;R.parseIFD=z;R.parseSignature=A;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(R){R.bytesToUTF8=function(D,v){let E=0,p="",U=0,J=0;const S=D.length;for(;E<S;)if(J=D[E++],U=J>>4,8>U?U=1:15===U?(U=4,J=(J&7)<<18|(D[E++]&
63)<<12|(D[E++]&63)<<6|D[E++]&63):14===U?(U=3,J=(J&15)<<12|(D[E++]&63)<<6|D[E++]&63):(U=2,J=(J&31)<<6|D[E++]&63),0!==J||v)p+=String.fromCharCode(J);return p};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const R=(()=>{const p=[];p[254]="NEWSUBFILETYPE";p[255]="SUBFILETYPE";p[256]="IMAGEWIDTH";p[257]="IMAGELENGTH";p[258]="BITSPERSAMPLE";p[259]="COMPRESSION";p[262]="PHOTOMETRICINTERPRETATION";
p[263]="THRESHHOLDING";p[264]="CELLWIDTH";p[265]="CELLLENGTH";p[266]="FILLORDER";p[269]="DOCUMENTNAME";p[270]="IMAGEDESCRIPTION";p[271]="MAKE";p[272]="MODEL";p[273]="STRIPOFFSETS";p[274]="ORIENTATION";p[277]="SAMPLESPERPIXEL";p[278]="ROWSPERSTRIP";p[279]="STRIPBYTECOUNTS";p[280]="MINSAMPLEVALUE";p[281]="MAXSAMPLEVALUE";p[282]="XRESOLUTION";p[283]="YRESOLUTION";p[284]="PLANARCONFIGURATION";p[285]="PAGENAME";p[286]="XPOSITION";p[287]="YPOSITION";p[288]="FREEOFFSETS";p[289]="FREEBYTECOUNTS";p[290]="GRAYRESPONSEUNIT";
p[291]="GRAYRESPONSECURVE";p[292]="T4OPTIONS";p[293]="T6OPTIONS";p[296]="RESOLUTIONUNIT";p[297]="PAGENUMBER";p[300]="COLORRESPONSEUNIT";p[301]="TRANSFERFUNCTION";p[305]="SOFTWARE";p[306]="DATETIME";p[315]="ARTIST";p[316]="HOSTCOMPUTER";p[317]="PREDICTOR";p[318]="WHITEPOINT";p[319]="PRIMARYCHROMATICITIES";p[320]="COLORMAP";p[321]="HALFTONEHINTS";p[322]="TILEWIDTH";p[323]="TILELENGTH";p[324]="TILEOFFSETS";p[325]="TILEBYTECOUNTS";p[326]="BADFAXLINES";p[327]="CLEANFAXDATA";p[328]="CONSECUTIVEBADFAXLINES";
p[330]="SUBIFD";p[332]="INKSET";p[333]="INKNAMES";p[334]="NUMBEROFINKS";p[336]="DOTRANGE";p[337]="TARGETPRINTER";p[338]="EXTRASAMPLES";p[339]="SAMPLEFORMAT";p[340]="SMINSAMPLEVALUE";p[341]="SMAXSAMPLEVALUE";p[342]="TRANSFERRANGE";p[347]="JPEGTABLES";p[512]="JPEGPROC";p[513]="JPEGIFOFFSET";p[514]="JPEGIFBYTECOUNT";p[515]="JPEGRESTARTINTERVAL";p[517]="JPEGLOSSLESSPREDICTORS";p[518]="JPEGPOINTTRANSFORM";p[519]="JPEGQTABLES";p[520]="JPEGDCTABLES";p[521]="JPEGACTABLES";p[529]="YCBCRCOEFFICIENTS";p[530]=
"YCBCRSUBSAMPLING";p[531]="YCBCRPOSITIONING";p[532]="REFERENCEBLACKWHITE";p[700]="XMP";p[33550]="GEOPIXELSCALE";p[33922]="GEOTIEPOINTS";p[33432]="COPYRIGHT";p[42112]="GDAL_METADATA";p[42113]="GDAL_NODATA";p[50844]="RPCCOEFFICIENT";p[34264]="GEOTRANSMATRIX";p[34735]="GEOKEYDIRECTORY";p[34736]="GEODOUBLEPARAMS";p[34737]="GEOASCIIPARAMS";p[34665]="EXIFIFD";p[34853]="GPSIFD";p[40965]="INTEROPERABILITYIFD";return p})(),D=(()=>{const p=[].concat(R);p[36864]="ExifVersion";p[40960]="FlashpixVersion";p[40961]=
"ColorSpace";p[42240]="Gamma";p[37121]="ComponentsConfiguration";p[37122]="CompressedBitsPerPixel";p[40962]="PixelXDimension";p[40963]="PixelYDimension";p[37500]="MakerNote";p[37510]="UserComment";p[40964]="RelatedSoundFile";p[36867]="DateTimeOriginal";p[36868]="DateTimeDigitized";p[36880]="OffsetTime";p[36881]="OffsetTimeOriginal";p[36882]="OffsetTimeDigitized";p[37520]="SubSecTime";p[37521]="SubSecTimeOriginal";p[37522]="SubSecTimeDigitized";p[37888]="Temperature";p[37889]="Humidity";p[37890]="Pressure";
p[37891]="WaterDepth";p[37892]="Acceleration";p[37893]="CameraElevationAngle";p[42016]="ImageUniqueID";p[42032]="CameraOwnerName";p[42033]="BodySerialNumber";p[42034]="LensSpecification";p[42035]="LensMake";p[42036]="LensModel";p[42037]="LensSerialNumber";p[33434]="ExposureTime";p[33437]="FNumber";p[34850]="ExposureProgram";p[34852]="SpectralSensitivity";p[34855]="PhotographicSensitivity";p[34856]="OECF";p[34864]="SensitivityType";p[34865]="StandardOutputSensitivity";p[34866]="RecommendedExposureIndex";
p[34867]="ISOSpeed";p[34868]="ISOSpeedLatitudeyyy";p[34869]="ISOSpeedLatitudezzz";p[37377]="ShutterSpeedValue";p[37378]="ApertureValue";p[37379]="BrightnessValue";p[37380]="ExposureBiasValue";p[37381]="MaxApertureValue";p[37382]="SubjectDistance";p[37383]="MeteringMode";p[37384]="LightSource";p[37385]="Flash";p[37386]="FocalLength";p[37396]="SubjectArea";p[41483]="FlashEnergy";p[41484]="SpatialFrequencyResponse";p[41486]="FocalPlaneXResolution";p[41487]="FocalPlaneYResolution";p[41488]="FocalPlaneResolutionUnit";
p[41492]="SubjectLocation";p[41493]="ExposureIndex";p[41495]="SensingMethod";p[41728]="FileSource";p[41729]="SceneType";p[41730]="CFAPattern";p[41985]="CustomRendered";p[41986]="ExposureMode";p[41987]="WhiteBalance";p[41988]="DigitalZoomRatio";p[41989]="FocalLengthIn35mmFilm";p[41990]="SceneCaptureType";p[41991]="GainControl";p[41992]="Contrast";p[41993]="Saturation";p[41994]="Sharpness";p[41995]="DeviceSettingDescription";p[41996]="SubjectDistanceRange";return p})(),v=(()=>{const p=[];p[1024]="GTModelTypeGeoKey";
p[1025]="GTRasterTypeGeoKey";p[1026]="GTCitationGeoKey";p[2048]="GeographicTypeGeoKey";p[2049]="GeogCitationGeoKey";p[2050]="GeogGeodeticDatumGeoKey";p[2051]="GeogPrimeMeridianGeoKey";p[2052]="GeogLinearUnitsGeoKey";p[2053]="GeogLinearUnitSizeGeoKey";p[2054]="GeogAngularUnitsGeoKey";p[2055]="GeogAngularUnitSizeGeoKey";p[2056]="GeogEllipsoidGeoKey";p[2057]="GeogSemiMajorAxisGeoKey";p[2058]="GeogSemiMinorAxisGeoKey";p[2059]="GeogInvFlatteningGeoKey";p[2061]="GeogPrimeMeridianLongGeoKey";p[2060]="GeogAzimuthUnitsGeoKey";
p[3072]="ProjectedCSTypeGeoKey";p[3073]="PCSCitationGeoKey";p[3074]="ProjectionGeoKey";p[3075]="ProjCoordTransGeoKey";p[3076]="ProjLinearUnitsGeoKey";p[3077]="ProjLinearUnitSizeGeoKey";p[3078]="ProjStdParallel1GeoKey";p[3079]="ProjStdParallel2GeoKey";p[3080]="ProjNatOriginLongGeoKey";p[3081]="ProjNatOriginLatGeoKey";p[3082]="ProjFalseEastingGeoKey";p[3083]="ProjFalseNorthingGeoKey";p[3084]="ProjFalseOriginLongGeoKey";p[3085]="ProjFalseOriginLatGeoKey";p[3086]="ProjFalseOriginEastingGeoKey";p[3087]=
"ProjFalseOriginNorthingGeoKey";p[3088]="ProjCenterLongGeoKey";p[3090]="ProjCenterEastingGeoKey";p[3091]="ProjCenterNorthingGeoKey";p[3092]="ProjScaleAtNatOriginGeoKey";p[3093]="ProjScaleAtCenterGeoKey";p[3094]="ProjAzimuthAngleGeoKey";p[3095]="ProjStraightVertPoleLongGeoKey";p[4096]="VerticalCSTypeGeoKey";p[4097]="VerticalCitationGeoKey";p[4098]="VerticalDatumGeoKey";p[4099]="VerticalUnitsGeoKey";return p})(),E=new Map;E.set("EXIFIFD",D);E.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:R,ifdTags:E,GEO_KEYS:v,getTagName:(p,U)=>{U=(U||R)[p];void 0===U&&(U="unknown"+String(p));return U}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(R){{var D=new ArrayBuffer(4);const v=new Uint8Array(D);(new Uint32Array(D))[0]=1;D=1===v[0]}R.isPlatformLittleEndian=D;Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l,b,c,f,k,g,t,y){function r(Q,W){var fa,aa,ia,ja;Q=d(Q,null==W?void 0:W.variableName);const {bandCount:ka}=Q;let {bandIds:qa,stretchType:ma}=W||{};null!=(fa=qa)&&fa.some(Ba=>Ba>=ka)&&(qa=null);let ya=E.unwrap(Q.statistics),sa=E.unwrap(Q.histograms);if(1<ka){var ra;qa=null!=(ra=qa)&&ra.length?qa:e(Q);ya=null==ya?null:qa.map(Ba=>ya[Ba]);sa=null==sa?null:qa.map(Ba=>sa[Ba])}else qa=[0];null==ma&&(ma=x(Q));fa=!1;switch(ma){case "none":fa=!1;break;case "percent-clip":fa=
!(null!=(aa=sa)&&aa.length);break;default:fa=!(null!=(ia=ya)&&ia.length)}({dataType:aa}=Q);aa=1===(null==(ja=qa)?void 0:ja.length)&&ca.has(aa)?ba:null;ja=new c({stretchType:ma,dynamicRangeAdjustment:fa,colorRamp:aa,outputMin:0,outputMax:255,gamma:1===qa.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ma?ja.maxPercent=ja.minPercent=.25:"standard-deviation"===ma&&(ja.numberOfStandardDeviations=2);if(!fa&&(E.isSome(Q.multidimensionalInfo)||null!=W&&W.includeStatisticsInStretch))if("percent-clip"===
ma)ja.histograms=sa;else if("min-max"===ma||"standard-deviation"===ma)ja.statistics=ya;return ja}function d(Q,W){if(null==W)return Q;let fa=E.unwrap(Q.statistics),aa=E.unwrap(Q.histograms);var {multidimensionalInfo:ia}=Q;if(W&&E.isSome(ia)&&(ia=ia.variables.find(ja=>ja.name===W))){const {statistics:ja,histograms:ka}=ia;null!=ja&&ja.length&&(fa=ja);null!=ka&&ka.length&&(aa=ka)}return J.fromJSON({...Q.toJSON(),statistics:fa,histograms:aa})}function e(Q){const W=Q.bandCount;if(1===W)return null;if(2===
W)return[0];Q=Q.keyProperties&&Q.keyProperties.BandProperties;let fa;if(Q&&Q.length===W){const {red:aa,green:ia,blue:ja,nir:ka}=h(Q);null!=aa&&null!=ia&&null!=ja?fa=[aa,ia,ja]:null!=ka&&null!=aa&&null!=ia&&(fa=[ka,aa,ia])}!fa&&3<=W&&(fa=[0,1,2]);return fa}function h(Q){const W={};for(let ja=0;ja<Q.length;ja++){var fa,aa=Q[ja],ia=null==(fa=aa.BandName)?void 0:fa.toLowerCase();"red"===ia?W.red=ja:"green"===ia?W.green=ja:"blue"===ia?W.blue=ja:"nearinfrared"===ia||"nearinfrared_1"===ia||"nir"===ia?W.nir=
ja:aa.WavelengthMax&&aa.WavelengthMin&&(ia=aa.WavelengthMin,aa=aa.WavelengthMax,null==W.blue&&410<=ia&&480>=ia&&480<=aa&&540>=aa?W.blue=ja:null==W.green&&490<=ia&&560>=ia&&560<=aa&&610>=aa?W.green=ja:null==W.red&&595<=ia&&670>=ia&&660<=aa&&730>=aa?W.red=ja:null==W.nir&&700<=ia&&860>=ia&&800<=aa&&950>=aa&&(W.nir=ja))}return W}function x(Q){let W="percent-clip";const {pixelType:fa,dataType:aa,histograms:ia,statistics:ja}=Q;"u8"!==fa||"processed"!==aa&&E.isSome(ia)&&E.isSome(ja)?"u8"===fa||"elevation"===
aa||ca.has(aa)?W="min-max":E.isSome(ia)?W="percent-clip":E.isSome(ja)&&(W="min-max"):W="none";return W}function A(Q,W,fa,aa){if(!C(Q,W))return null;const {attributeTable:ia,statistics:ja}=Q,ka=z(ia,W),qa=B(ia,"red"),ma=B(ia,"green"),ya=B(ia,"blue");Q=new I;const sa=[],ra=new Set,Ba=!!(qa&&ma&&ya);if(E.isSome(ia))ia.features.forEach(za=>{var wa=za.attributes[ka.name];ra.has(za.attributes[ka.name])||null==wa||(ra.add(wa),wa=!Ba||"single"!==qa.type&&"double"!==qa.type||"single"!==ma.type&&"double"!==
ma.type||"single"!==ya.type&&"double"!==ya.type||ia.features.some(xa=>1<xa.attributes[qa.name]||1<xa.attributes[ma.name]||1<xa.attributes[ya.name])?1:255,sa.push(new a({value:za.attributes[ka.name],label:za.attributes[ka.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:Ba?new D([za.attributes[qa.name]*wa,za.attributes[ma.name]*wa,za.attributes[ya.name]*wa,1]):new D([0,0,0,0])}})))});else if(null!=ja&&ja[0])for(W=ja[0].min;W<=ja[0].max;W++)sa.push(new a({value:W,label:W.toString(),
symbol:{type:"simple-fill",style:"solid",outline:null,color:new D([0,0,0,0])}}));sa.sort((za,wa)=>za.value&&"string"===typeof za.value.valueOf()?0:za.value>wa.value?1:-1);if(!Ba){const za=m.convertColorRampToColormap(ea,sa.length);sa.forEach((wa,xa)=>wa.symbol.color=new D(za[xa].slice(1,4)));Q.colorRamp=ea}if(fa||aa){const za=fa||m.convertColorRampToColormap(aa,sa.length).map(wa=>wa.slice(1));sa.forEach((wa,xa)=>wa.symbol.color=new D(za[xa]));Q.colorRamp=aa}return new f({field:ka.name,uniqueValueInfos:sa,
authoringInfo:Q})}function z(Q,W,fa){let aa;E.isSome(Q)?(aa=W?Q.fields.find(ia=>W.toLowerCase()===ia.name.toLowerCase()):M(Q.fields),aa||(fa||(aa=Q.fields.find(ia=>"string"===ia.type)),aa||(aa=B(Q,"value")))):aa=new U({name:"value"});return aa}function M(Q){let W;for(let fa=0;fa<Q.length;fa++){const aa=Q[fa].name.toLowerCase();if("string"===Q[fa].type){if(aa.startsWith("class")){W=Q[fa];break}null==W&&(aa.endsWith("name")||aa.endsWith("type"))&&(W=Q[fa])}}return W}function B(Q,W){return E.isNone(Q)?
null:Q.fields.find(fa=>fa.name.toLowerCase()===W)}function C(Q,W){const {attributeTable:fa,bandCount:aa}=Q;return E.isNone(fa)&&G(Q)?!0:E.isNone(fa)||1<aa||W&&null==fa.fields.find(ia=>ia.name.toLowerCase()===W.toLowerCase())?!1:!0}function u(Q){const {bandCount:W,colormap:fa}=Q;return E.isSome(fa)&&fa.length&&1===W}function F(Q){if(!u(Q))return null;let W;const {attributeTable:fa,colormap:aa}=Q;if(E.isSome(fa)){const ia=B(fa,"value"),ja=z(fa,null,!0);"string"===ja.type&&(W={},fa.features.forEach(ka=>
{ka=ka.attributes;W[ka[ia.name]]=ja?ka[ja.name]:ka[ia.name]}))}return k.createFromColormap(E.unwrap(aa),W)}function L(Q){const {bandCount:W,dataType:fa,pixelType:aa}=Q;return"elevation"===fa||"generic"===fa&&1===W&&("s16"===aa||"f32"===aa||"f64"===aa)}function T(Q){const {attributeTable:W,bandCount:fa}=Q;return 1===fa&&(E.isSome(W)||E.isSome(Q.histograms))}function H(Q,W,fa){let aa=0,ia=0;E.isSome(Q.attributeTable)?(Q=Q.attributeTable,aa=ia=Q.features[0].attributes[W.name],Q.features.forEach(ja=>
{ja=ja.attributes[W.name];ja<aa&&(aa=ja);ja>ia&&(ia=ja)})):E.isSome(Q.histograms)&&(Q=Q.histograms,aa=Q[0].min,ia=Q[0].max);return(ia-aa)/fa}function G(Q){var W,fa,aa;return["u8","s8"].includes(Q.pixelType)&&null!=(null==(W=Q.statistics)?void 0:null==(fa=W[0])?void 0:fa.min)&&null!=(null==(aa=Q.statistics[0])?void 0:aa.max)&&1===Q.bandCount}function P(Q){({dataType:Q}=Q);return"vector-uv"===Q||"vector-magdir"===Q}function O(Q){({dataType:Q}=Q);return"vector-uv"===Q||"vector-magdir"===Q}function V(Q){if(!P(Q))return null;
if(E.isSome(Q.statistics)&&Q.statistics.length&&("vector-magdir"===Q.dataType||"vector-uv"===Q.dataType)){const {minMagnitude:fa,maxMagnitude:aa}=Y(Q.dataType,Q.statistics);var W=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:fa,maxDataValue:aa}]}Q=E.isSome(Q.multidimensionalInfo)?da.get(Q.multidimensionalInfo.variables[0].unit):null;W=new y({visualVariables:W,inputUnit:Q,rotationType:"geographic"});W.visualVariables=[...W.sizeVariables,...W.rotationVariables];return W}function X(Q){var W;
return{color:null==(W=Q.symbolLayers[0].material)?void 0:W.color,type:"esriSFS",style:"esriSFSSolid"}}function Y(Q,W){if("vector-magdir"===Q)Q=W[0].min,W=W[0].max;else{const fa=W[0].min,aa=W[0].max,ia=W[1].min;W=W[1].max;Q=0;W=Math.max(Math.abs(fa),Math.abs(ia),Math.abs(aa),Math.abs(W))}return{minMagnitude:Q,maxMagnitude:W}}const ba=b.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),
ea=b.fromJSON(m.PREDEFINED_JSON_COLOR_RAMPS[0]),ca=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),da=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);R.createClassBreaksRenderer=function(Q,W){Q=d(Q,null==W?void 0:W.variableName);const {attributeTable:fa}=Q;if(!T(Q))return null;const aa=E.isSome(Q.histograms)?Q.histograms[0]:null,ia=isFinite(null==
W?void 0:W.numClasses)?W.numClasses:5,ja=new I({classificationMethod:null==W?void 0:W.classificationMethod,colorRamp:null==W?void 0:W.colorRamp});let ka=(null==W?void 0:W.field)||"value";const qa=[],ma=[],ya=E.isSome(fa),sa=ya&&fa.fields.find(xa=>"count"===xa.name.toLowerCase()),ra=ya&&fa.fields.find(xa=>xa.name.toLowerCase()===ka.toLowerCase());if(ra){ka=ra.name;const xa=fa.features.length;let Ka=0;fa.features.forEach(Ja=>Ka+=(sa?Ja.attributes[sa.name]:50)/xa);fa.features.forEach(Ja=>{const Fa=Ja.attributes[ra.name];
Ja=sa?Ja.attributes[sa.name]:50;if(0<Ja){ma.push(Ja);Ja=Math.max(1,Math.round(Ja/xa/Ka*1E3));for(let La=0;La<Ja;La++)qa.push(Fa)}})}else{var {pixelType:Ba}=Q;const xa=(aa.max-aa.min)/aa.size,Ka=(Ba=Ba.includes("s")||Ba.includes("u"))&&1===xa?Math.floor(aa.min+.5):aa.min,Ja=Ba&&1===xa?Math.floor(aa.max-.5):aa.max,Fa=aa.size;let La=0,Pa;aa.counts.forEach(Ma=>La+=Ma/Fa);aa.counts.forEach((Ma,Na)=>{if(0<Ma)for(ma.push(Ma),Ma=Math.max(1,Math.round(Ma/Fa/La*1E3)),Pa=ya?fa.features[Na].attributes[ra.name]:
0===Na?Ka:Na===Fa-1?Ja:aa.min+xa*(Na+.5),Na=0;Na<Ma;Na++)qa.push(Pa)})}Ba=(null==W?void 0:W.classificationMethod)||"natural-breaks";let za=null==W?void 0:W.definedInterval;"defined-interval"!==Ba||za||(za=H(Q,ra,ia));Q=l.createGenerateRendererClassBreaks({values:qa,valueFrequency:ma,normalizationTotal:null,definition:new q({classificationMethod:Ba,breakCount:ia,definedInterval:za})});let wa=null==W?void 0:W.colors;wa||(W=(null==W?void 0:W.colorRamp)||ba,ja.colorRamp=W,wa=m.convertColorRampToColormap(W,
Q.classBreaks.length,!0).map(xa=>xa.slice(1)));W=Q.classBreaks.map((xa,Ka)=>new w({minValue:xa.minValue,maxValue:xa.maxValue,label:xa.label,symbol:{type:"simple-fill",color:wa[Ka]}}));return new t({field:ka,classBreakInfos:W,authoringInfo:ja})};R.createColorRamp=function(Q){const W=[];for(let fa=0;fa<Q.length-1;fa++)W[fa]=new n({algorithm:"hsv",fromColor:Q[fa],toColor:Q[fa+1]||new D({r:255,g:255,b:255,a:1})});return 2<Q.length?new b({colorRamps:W}):W[0]};R.createColormapRenderer=F;R.createDefaultRenderer=
function(Q,W){const {attributeTable:fa,colormap:aa}=Q;if(P(Q)){var ia=V(Q);if(E.isSome(ia))return ia}return E.isSome(aa)&&(ia=F(Q),E.isSome(ia))||E.isSome(fa)&&(ia=A(Q),E.isSome(ia))?ia:r(Q,W)};R.createFlowRenderer=function(Q){if(!O(Q))return null;let W;if(E.isSome(Q.statistics)&&0<Q.statistics.length&&("vector-magdir"===Q.dataType||"vector-uv"===Q.dataType)){const {minMagnitude:fa,maxMagnitude:aa}=Y(Q.dataType,Q.statistics);W=[{type:"color",field:"Magnitude",stops:[{value:fa,color:"#1020C0"},{value:aa,
color:"#C02010"}]}]}return new S({visualVariables:W})};R.createShadedReliefRenderer=function(Q,W){var fa;if(!L(Q))return null;({extent:Q}=Q);Q=Q.width*p.getMetersPerUnitForSR(Q.spatialReference);W=null!=(fa=W)?fa:"multi-directional";return new g({hillshadeType:W,scalingType:5E6<Q?"adjusted":"none"})};R.createStretchRenderer=r;R.createUVRenderer=A;R.createVectorFieldRenderer=V;R.estimateMagnitudeRange=Y;R.getBandNames=function(Q,W){var fa;const aa=Q.keyProperties&&Q.keyProperties.BandProperties;W=
null!=(fa=W)&&fa.length?W:Array.from(Array(Q.bandCount).keys());return W.map(ia=>aa&&aa.length===Q.bandCount?aa[ia]&&aa[ia].BandName||"band_"+(ia+1):"band_"+(ia+1))};R.getClassField=z;R.getDefaultBandCombination=e;R.getDefaultInterpolation=function(Q,W,fa){const aa=["nearest","bilinear","cubic","majority"].find(ia=>ia===(null==fa?void 0:fa.toLowerCase()));return"Map"===W?null!=aa?aa:"bilinear":"standard-time"===Q.dataType?null!=aa?aa:"nearest":"thematic"===Q.dataType||Q.attributeTable||Q.colormap?
"nearest"===aa||"majority"===aa?aa:"nearest":null!=aa?aa:"bilinear"};R.getDefinedInterval=H;R.getField=B;R.getSupportedRendererTypes=function(Q){const W=["raster-stretch"];u(Q)&&W.push("raster-colormap");C(Q)&&W.push("unique-value");T(Q)&&W.push("class-breaks");L(Q)&&W.push("raster-shaded-relief");P(Q)&&W.push("vector-field");O(Q)&&W.push("flow");return W};R.getWellKnownBandIndexes=h;R.isClassBreaksSupported=T;R.isColormapRendererSupported=u;R.isFlowRendererSupported=O;R.isShadedReliefRendererSupported=
L;R.isSingleBand8BitRasterWithStats=G;R.isUVRendererSupported=C;R.isVectorFieldRendererSupported=P;R.normalizeRendererJSON=function(Q){if("uniqueValue"===Q.type){var W,fa=Q.uniqueValueInfos,aa=fa[0].symbol;null!=aa&&null!=(W=aa.symbolLayers)&&W.length&&(Q.uniqueValueInfos=fa.map(ia=>({value:ia.value,label:ia.label,symbol:ia.symbol?X(ia.symbol):null})));return Q}"classBreaks"===Q.type&&(W=Q.classBreakInfos,aa=W[0].symbol,null!=aa&&null!=(fa=aa.symbolLayers)&&fa.length&&(Q.classBreakInfos=W.map(ia=>
({classMinValue:ia.classMinValue,classMaxValue:ia.classMaxValue,label:ia.label,symbol:ia.symbol?X(ia.symbol):null}))));return Q};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(R,D,v,E,p,U,J,S,I){p=new v.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});v=new v.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});I=function(w){function m(){var a=w.apply(this,arguments)||this;a.breakCount=null;a.classificationField=
null;a.classificationMethod=null;a.normalizationField=null;a.normalizationType=null;a.type="class-breaks-definition";return a}R._inheritsLoose(m,w);R._createClass(m,[{key:"standardDeviationInterval",set:function(a){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",a)}},{key:"definedInterval",set:function(a){"defined-interval"===this.classificationMethod&&this._set("definedInterval",a)}}]);return m}(I);D.__decorate([E.property({json:{write:!0}})],I.prototype,"breakCount",
void 0);D.__decorate([E.property({json:{write:!0}})],I.prototype,"classificationField",void 0);D.__decorate([E.property({type:String,json:{read:p.read,write:p.write}})],I.prototype,"classificationMethod",void 0);D.__decorate([E.property({json:{write:!0}})],I.prototype,"normalizationField",void 0);D.__decorate([E.property({json:{read:v.read,write:v.write}})],I.prototype,"normalizationType",void 0);D.__decorate([E.property({value:null,json:{write:!0}})],I.prototype,"standardDeviationInterval",null);
D.__decorate([E.property({value:null,json:{write:!0}})],I.prototype,"definedInterval",null);D.__decorate([E.property()],I.prototype,"type",void 0);return I=D.__decorate([S.subclass("esri.rest.support.ClassBreaksDefinition")],I)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m){v=new v.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});E=function(a){function n(){var q=a.apply(this,arguments)||this;q.baseSymbol=null;q.colorRamp=null;q.type=null;return q}R._inheritsLoose(n,a);return n}(E.JSONSupport);D.__decorate([p.property({type:m,json:{write:!0}})],E.prototype,"baseSymbol",void 0);D.__decorate([p.property({types:w.types,json:{read:{reader:w.fromJSON},write:!0}})],E.prototype,"colorRamp",void 0);D.__decorate([p.property({json:{read:v.read,
write:v.write}})],E.prototype,"type",void 0);return E=D.__decorate([I.subclass("esri.rest.support.ClassificationDefinition")],E)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(R){function D(m){const {classificationMethod:a,breakCount:n,normalizationType:q,definedInterval:l}=m.definition,b=[];var c=m.values;if(0===c.length)return[];c=c.sort((r,d)=>r-d);var f=c[0],k=c[c.length-1];if("equal-interval"===a)if(c.length>=n){c=(k-f)/n;m=f;for(var g=1;g<n;g++){var t=Number((f+
g*c).toFixed(6));b.push({minValue:m,maxValue:t,label:v(m,t,q)});m=t}b.push({minValue:m,maxValue:k,label:v(m,k,q)})}else c.forEach(r=>{b.push({minValue:r,maxValue:r,label:v(r,r,q)})});else if("natural-breaks"===a){c=E(c);m=p(c.uniqueValues,m.valueFrequency||c.valueFrequency,n);for(g=1;g<n;g++)c.uniqueValues.length>g&&(t=Number(c.uniqueValues[m[g]].toFixed(6)),b.push({minValue:f,maxValue:t,label:v(f,t,q)}),f=t);b.push({minValue:f,maxValue:k,label:v(f,k,q)})}else if("quantile"===a)if(c.length>=n&&f!==
k){m=Math.ceil(c.length/n);g=0;for(t=1;t<n;t++){var y=m+g-1;y>c.length&&(y=c.length-1);0>y&&(y=0);b.push({minValue:f,maxValue:c[y],label:v(f,c[y],q)});f=c[y];g+=m;m=Math.ceil((c.length-g)/(n-t))}b.push({minValue:f,maxValue:k,label:v(f,k,q)})}else for(k=-1,f=0;f<c.length;f++)m=c[f],m!==k&&(k=m,b.push({minValue:k,maxValue:m,label:v(k,m,q)}),k=m);else if("standard-deviation"===a)if(m=S(c),g=I(c,m),0===g)b.push({minValue:c[0],maxValue:c[0],label:v(c[0],c[0],q)});else{c=J(f,k,n,m,g)*g;g=0;for(t=n;1<=t;t--)y=
Number((m-(t-.5)*c).toFixed(6)),b.push({minValue:f,maxValue:y,label:v(f,y,q)}),f=y,g++;t=Number((m+.5*c).toFixed(6));b.push({minValue:f,maxValue:t,label:v(f,t,q)});f=t;g++;for(y=1;y<=n;y++)t=g===2*n?k:Number((m+(y+.5)*c).toFixed(6)),b.push({minValue:f,maxValue:t,label:v(f,t,q)}),f=t,g++}else if("defined-interval"===a){if(!l)return b;k=c[0];c=c[c.length-1];f=Math.ceil((c-k)/l);m=k;for(g=1;g<f;g++)t=Number((k+g*l).toFixed(6)),b.push({minValue:m,maxValue:t,label:v(m,t,q)}),m=t;b.push({minValue:m,maxValue:c,
label:v(m,c,q)})}return b}function v(m,a,n){let q=null;return q=m===a?n&&"percent-of-total"===n?m+"%":m.toString():n&&"percent-of-total"===n?m+"% - "+a+"%":m+" - "+a}function E(m){const a=[],n=[];let q=Number.MIN_VALUE,l=1,b=-1;for(let c=0;c<m.length;c++){const f=m[c];f===q?(l++,n[b]=l):null!==f&&(a.push(f),q=f,l=1,n.push(l),b++)}return{uniqueValues:a,valueFrequency:n}}function p(m,a,n){var q=m.length;const l=[];n>q&&(n=q);for(var b=0;b<n;b++)l.push(Math.round(b*q/n-1));l.push(q-1);b=U(l,m,a,n);{q=
b.mean;b=b.sdcm;var c=n,f=0,k=0;let t=0,y=0,r=!0;for(let d=0;2>d&&r;d++){0===d&&(r=!1);for(var g=0;g<c-1;g++)for(;l[g+1]+1!==l[g+2];)if(l[g+1]+=1,f=w(g,l,m,a),t=f.sbMean,f=f.sbSdcm,k=w(g+1,l,m,a),y=k.sbMean,k=k.sbSdcm,f+k<b[g]+b[g+1])b[g]=f,b[g+1]=k,q[g]=t,q[g+1]=y,r=!0;else{--l[g+1];break}for(g=c-1;0<g;g--)for(;l[g]!==l[g-1]+1;)if(--l[g],f=w(g-1,l,m,a),t=f.sbMean,f=f.sbSdcm,k=w(g,l,m,a),y=k.sbMean,k=k.sbSdcm,f+k<b[g-1]+b[g])b[g-1]=f,b[g]=k,q[g-1]=t,q[g]=y,r=!0;else{l[g]+=1;break}}q=r}q&&(b=U(l,m,
a,n));return l}function U(m,a,n,q){let l=[];var b=[],c=[];let f=0;const k=[],g=[];for(var t=0;t<q;t++){var y=w(t,m,a,n);k.push(y.sbMean);g.push(y.sbSdcm);f+=g[t]}y=f;for(t=!0;t||f<y;){t=!1;l=[];for(b=0;b<q;b++)l.push(m[b]);for(c=0;c<q;c++)for(y=m[c]+1;y<=m[c+1];y++)if(b=a[y],0<c&&y!==m[c+1]&&Math.abs(b-k[c])>Math.abs(b-k[c-1]))m[c]=y;else if(c<q-1&&m[c]!==y-1&&Math.abs(b-k[c])>Math.abs(b-k[c+1])){m[c+1]=y-1;break}y=f;f=0;b=[];c=[];for(let r=0;r<q;r++){b.push(k[r]);c.push(g[r]);const d=w(r,m,a,n);
k[r]=d.sbMean;g[r]=d.sbSdcm;f+=g[r]}}if(f>y){for(a=0;a<q;a++)m[a]=l[a],k[a]=b[a],g[a]=c[a];f=y}return{mean:k,sdcm:g}}function J(m,a,n,q,l){m=Math.max(q-m,a-q)/l/n;return 1<=m?1:.5<=m?.5:.25}function S(m){let a=0;for(let n=0;n<m.length;n++)a+=m[n];return a/=m.length}function I(m,a){let n=0;for(let q=0;q<m.length;q++){const l=m[q];n+=(l-a)*(l-a)}n/=m.length;return Math.sqrt(n)}function w(m,a,n,q){var l=0,b=0;for(var c=a[m]+1;c<=a[m+1];c++){const f=q[c];l+=n[c]*f;b+=f}0>=b&&console.log("Exception in Natural Breaks calculation");
l/=b;b=0;for(c=a[m]+1;c<=a[m+1];c++)b+=q[c]*(n[c]-l)**2;return{sbMean:l,sbSdcm:b}}R.createGenerateRendererClassBreaks=function(m){const {normalizationTotal:a}=m;return{classBreaks:D(m),normalizationTotal:a}};R.createGenerateRendererUniqueValues=function(m){m=E(m);const a=[],n=m.uniqueValues.length;for(let q=0;q<n;q++){const l=m.uniqueValues[q];a.push({value:l,count:m.valueFrequency[q],label:l.toString()})}return{uniqueValues:a}};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l,b){function c(t,y){const {attributeTable:r,bandCount:d}=t;return U.isNone(r)||1<d||y&&null==r.fields.find(e=>e.name.toLowerCase()===y.toLowerCase())?!1:!0}function f(t){const {bandCount:y,colormap:r}=t;return U.isSome(r)&&r.length&&1===y}function k(t){return n.isValidPixelBlock(t)&&0!==t.validPixelCount}const g=p.getLogger("esri.renderers.support.RasterSymbolizer");E=function(t){function y(d){return t.call(this,d)||this}R._inheritsLoose(y,t);var r=y.prototype;
r.bind=function(){const {rendererJSON:d}=this;if(!d)return{success:!1};this.lookup={rendererJSON:{}};let e;switch(d.type){case "uniqueValue":e=this._updateUVRenderer(d);break;case "rasterColormap":e=this._updateColormapRenderer(d);break;case "rasterStretch":e=this._updateStretchRenderer(d);break;case "classBreaks":e=this._updateClassBreaksRenderer(d);break;case "rasterShadedRelief":e=this._updateShadedReliefRenderer(d);break;case "vectorField":e=this._updateVectorFieldRenderer();break;case "flowRenderer":e=
this._updateFlowRenderer()}return e};r.symbolize=function(d){let e=d&&d.pixelBlock;if(!k(e))return e;if(d.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(e,d.simpleStretchParams);try{3<e.pixels.length&&(e=n.extractBands(e,[0,1,2]));let h;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":h=this._symbolizeColormap(e);break;case "classBreaks":h=this._symbolizeClassBreaks(e);break;case "rasterStretch":h=this._symbolizeStretch(e,d.bandIds);
break;case "rasterShadedRelief":({extent:d}=d),h=this._symbolizeShadedRelief(e,{isGCS:d.spatialReference.isGeographic,resolution:{x:(d.xmax-d.xmin)/e.width,y:(d.ymax-d.ymin)/e.height}})}return h}catch(h){return g.error("symbolize",h.message),e}};r.simpleStretch=function(d,e){if(!k(d))return d;try{return 3<d.pixels.length&&(d=n.extractBands(d,[0,1,2])),q.stretch(d,e)}catch(h){return g.error("symbolize",h.message),d}};r.generateWebGLParameters=function(d){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){var e;
const {indexedColormap:M,offset:B}=(null==(e=this.lookup)?void 0:e.colormapLut)||{};return{colormap:M,colormapOffset:B,type:"lut"}}const {pixelBlock:h,isGCS:x,resolution:A,bandIds:z}=d;({rendererJSON:d}=this);return"rasterStretch"===d.type?this._generateStretchWebGLParams(h,d,z):"rasterShadedRelief"===d.type?this._generateShadedReliefWebGLParams(d,x,A):"vectorField"===d.type?this._generateVectorFieldWebGLParams(d):null};r._isLUTChanged=function(d){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const e=this.rendererJSON.colorRamp;if(d)return JSON.stringify(e)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};r._symbolizeColormap=function(d){return this._isLUTChanged()&&!this.bind().success?d:n.colorize(d,this.lookup.colormapLut)};r._symbolizeClassBreaks=function(d){const {canUseIndexedLUT:e}=this._analyzeClassBreaks(this.rendererJSON);
return this._isLUTChanged()&&!this.bind().success?d:e?n.colorize(d,this.lookup.colormapLut):n.remapColor(d,this.lookup.remapLut)};r._symbolizeStretch=function(d,e){const {rasterInfo:h}=this,{pixelType:x,bandCount:A}=h,z=this.rendererJSON,M=["u8","u16","s8","s16"].includes(x);let B;var {dra:C}=z;({gamma:F}=this.lookup);if("histogramEqualization"===z.stretchType){var u=C?null:this.lookup.histogramLut;e=q.getStretchCutoff(z,{rasterInfo:h,pixelBlock:d,bandIds:e,returnHistogramLut:!u});var F=q.stretch(d,
{...e,gamma:F});F=n.lookupPixels(F,{lut:C?e.histogramLut:u,offset:0})}else if(M){var L;if(C)C=q.getStretchCutoff(z,{rasterInfo:h,pixelBlock:d,bandIds:e}),B=q.createStretchLUT({pixelType:x,...C,gamma:F});else{if(this._isLUTChanged()&&!this.bind().success)return d;B=this.lookup?this.lookup.stretchLut:null}if(!B)return d;1<A&&(null==e?void 0:e.length)===(null==(u=U.unwrap(d))?void 0:u.pixels.length)&&(null==(L=B)?void 0:L.lut.length)===A&&(B={lut:e.map(T=>B.lut[T]),offset:B.offset});F=n.lookupPixels(d,
B)}else C=q.getStretchCutoff(z,{rasterInfo:h,pixelBlock:d,bandIds:e}),F=q.stretch(d,{...C,gamma:F});if(z.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return d;F=n.colorize(F,this.lookup.colormapLut)}return F};r._symbolizeShadedRelief=function(d,e){var h,x,A=this.rendererJSON;e=l.hillshade(d,{...A,...e});if(!A.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return e;A=this.lookup?this.lookup.hsvMap:null;if(!A)return e;const z=null!=(h=null==(x=U.unwrap(this.rasterInfo.statistics))?
void 0:x[0])?h:{min:0,max:8E3};l.tintHillshade(e,d,A,z);return e};r._isVectorFieldData=function(){const {bandCount:d,dataType:e}=this.rasterInfo;return 2===d&&("vector-magdir"===e||"vector-uv"===e)};r._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};r._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:
{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};r._updateUVRenderer=function(d){const {bandCount:e,attributeTable:h,pixelType:x}=this.rasterInfo,A=d.field1;if(!A)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const z=d.defaultSymbol;var M=1===e&&["u8","s8"].includes(x);if(!c(this.rasterInfo,A)&&!M)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};
const B=[];if(h){const C=h.fields.find(u=>"value"===u.name.toLowerCase());if(!C)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};h.features.forEach(u=>{var F,L=d.uniqueValueInfos.find(T=>String(T.value)===String(u.attributes[A]));(L=null==L?void 0:null==(F=L.symbol)?void 0:F.color)?B.push([u.attributes[C.name]].concat(L)):z&&B.push([u.attributes[C.name]].concat(z.color))})}else{if("value"!==A.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};
d.uniqueValueInfos.forEach(C=>{var u;const F=null==C?void 0:null==(u=C.symbol)?void 0:u.color;F?B.push([parseInt(""+C.value,10)].concat(F)):z&&B.push([parseInt(""+C.value,10)].concat(z.color))})}if(0===B.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};M=n.createColormapLUT({colormap:B});this.lookup={rendererJSON:d,colormapLut:M};this.canRenderInWebGL=!0;return{success:!0}};r._updateColormapRenderer=function(d){if(!f(this.rasterInfo))return{success:!1,
error:"Unsupported data; the data source does not have a colormap."};var e=d.colormapInfos.map(h=>[h.value].concat(h.color)).sort((h,x)=>h[0]-x[0]);if(!e||0===e.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};e=n.createColormapLUT({colormap:e});this.lookup={rendererJSON:d,colormapLut:e};this.canRenderInWebGL=!0;return{success:!0}};r._updateShadedReliefRenderer=function(d){{const {bandCount:h,dataType:x,pixelType:A}=this.rasterInfo;var e=
"elevation"===x||"generic"===x&&1===h&&("s16"===A||"f32"===A||"f64"===A)}if(!e)return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(d.colorRamp){e=b.convertColorRampToColormap(d.colorRamp,256,!0);e=n.createColormapLUT({colormap:e});const h=[],x=e.indexedColormap;for(let A=0;A<x.length;A+=4){const z=v.toHSV({r:x[A],g:x[A+1],b:x[A+2]});h.push([z.h/60,z.s/100,255*z.v/100])}this.lookup={rendererJSON:d,
colormapLut:e,hsvMap:h}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};r._analyzeClassBreaks=function(d){const {attributeTable:e,pixelType:h}=this.rasterInfo,x=U.isSome(e)?e.fields.find(M=>"value"===M.name.toLowerCase()):null,A=U.isSome(e)?e.fields.find(M=>M.name.toLowerCase()===d.field.toLowerCase()):null,z=null!=x&&null!==A;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(h)||z,tableValueField:x,tableBreakField:A}};r._updateClassBreaksRenderer=function(d){var {attributeTable:e}=
this.rasterInfo;const {canUseIndexedLUT:h,tableValueField:x,tableBreakField:A}=this._analyzeClassBreaks(d);var z=d.classBreakInfos;if(null==z||!z.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};z=z.sort((F,L)=>F.classMaxValue-L.classMaxValue);var M=z[z.length-1],B=d.minValue;if(!h){var C=[];for(e=0;e<z.length;e++){var u;C.push({value:null!=(u=z[e].classMinValue)?u:B,mappedColor:z[e].symbol.color});B=z[e].classMaxValue}C.push({value:M.classMaxValue,
mappedColor:M.symbol.color});this.lookup={rendererJSON:d,remapLut:C};this.canRenderInWebGL=!1;return{success:!0}}u=[];if(null!=x&&null!==A&&x!==A){M=x.name;const F=A.name,L=z[z.length-1],{classMaxValue:T}=L;B=d.minValue;for(C of e.features){e=C.attributes[M];const H=C.attributes[F],G=H===T?L:H<B?null:z.find(({classMaxValue:P})=>P>H);G&&u.push([e].concat(G.symbol.color))}}else{B=Math.floor(d.minValue);for(C=0;C<z.length;C++){for(e=z[C];B<e.classMaxValue;B++)u.push([B].concat(e.symbol.color));B=Math.ceil(e.classMaxValue)}M.classMaxValue===
B&&u.push([M.classMaxValue].concat(M.symbol.color))}z=n.createColormapLUT({colormap:u,fillUnspecified:!1});this.lookup={rendererJSON:d,colormapLut:z};this.canRenderInWebGL=!0;return{success:!0}};r._isHistogramRequired=function(d){return"percentClip"===d||"histogramEqualization"===d};r._isValidRasterStatistics=function(d){return U.isSome(d)&&0<d.length&&null!=d[0].min&&null!=d[0].max};r._updateStretchRenderer=function(d){var e,h,x;let {stretchType:A,dra:z}=d;if(!("none"===A||null!=(e=d.statistics)&&
e.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||z))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var M=U.unwrap(d.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(d.stretchType)||null!=M&&M.length||z||(A="minMax");const {computeGamma:B,useGamma:C,colorRamp:u}=d;({gamma:e}=d);if(C&&B&&(null==(h=e)||!h.length)){var F;e=null!=(F=d.statistics)&&F.length?d.statistics:U.unwrap(this.rasterInfo.statistics);
e=q.computeGammaValues(this.rasterInfo.pixelType,e)}F=this.rasterInfo.pixelType;h=!z&&["u8","u16","s8","s16"].includes(F);"histogramEqualization"===A?(M=M.map(L=>q.createHistogramEqualizationLUT(L)),this.lookup={rendererJSON:d,histogramLut:M}):h&&(M=q.getStretchCutoff(d,{rasterInfo:this.rasterInfo}),M=q.createStretchLUT({pixelType:F,...M,gamma:C?e:null}),this.lookup={rendererJSON:d,stretchLut:M});u&&(M=b.convertColorRampToColormap(u,256,!0),this.lookup||(this.lookup={rendererJSON:d}),this.lookup.colormapLut=
n.createColormapLUT({colormap:M}),this.lookup.rendererJSON=d);this.lookup.gamma=C&&null!=(x=e)&&x.length?e:null;this.canRenderInWebGL=!0;return{success:!0}};r._generateStretchWebGLParams=function(d,e,h){let x=null,A=null;var z=this.lookup&&this.lookup.colormapLut;e.colorRamp&&z&&(x=z.indexedColormap,A=z.offset);"histogramEqualization"===e.stretchType&&(e={...e,stretchType:"minMax"});({gamma:z}=this.lookup);const M=!!(e.useGamma&&z&&z.some(G=>1!==G)),{minCutOff:B,maxCutOff:C,outMin:u,outMax:F}=q.getStretchCutoff(e,
{rasterInfo:this.rasterInfo,pixelBlock:d,bandIds:h});var L=0;U.isSome(d)&&(L=d.getPlaneCount(),2===L&&(d=d.clone(),d.statistics=[d.statistics[0]],d.pixels=[d.pixels[0]]));d=Math.min(3,(null==h?void 0:h.length)||L||this.rasterInfo.bandCount);h=new Float32Array(d);L=x||M?1:255;let T;for(T=0;T<d;T++)h[T]=(F-u)/(C[T]-B[T])/L;const H=new Float32Array(d);if(M)for(T=0;T<d;T++)H[T]=1<z[T]?2<z[T]?6.5+(z[T]-2)**2.5:6.5+100*(2-z[T])**4:1;return{bandCount:d,outMin:u/L,outMax:F/L,minCutOff:B,maxCutOff:C,factor:h,
useGamma:M,gamma:M?z:[1,1,1],gammaCorrection:M?H:[1,1,1],colormap:x,colormapOffset:A,stretchType:e.stretchType,type:"stretch"}};r._generateShadedReliefWebGLParams=function(d,e,h){var x,A,z;let M=null,B=null;const C=this.lookup&&this.lookup.colormapLut;d.colorRamp&&C&&(M=C.indexedColormap,B=C.offset);e=l.calculateHillshadeParams({...d,isGCS:e,resolution:h});h=null==(x=U.unwrap(this.rasterInfo.statistics))?void 0:x[0];return{...e,minValue:null!=(A=null==h?void 0:h.min)?A:0,maxValue:null!=(z=null==h?
void 0:h.max)?z:8E3,hillshadeType:"traditional"===d.hillshadeType?0:1,type:"hillshade",colormap:M,colormapOffset:B}};r._generateVectorFieldWebGLParams=function(d){var e,h,x,A,z,M,B,C;const {style:u,inputUnit:F,outputUnit:L,visualVariables:T,symbolTileSize:H,flowRepresentation:G}=d;let P;var O=null!=(e=null==(h=this.rasterInfo.statistics)?void 0:h[0].min)?e:0;e=null!=(x=null==(A=this.rasterInfo.statistics)?void 0:A[0].max)?x:50;x=null!=(z=null==T?void 0:T.find(V=>"sizeInfo"===V.type))?z:{type:"sizeInfo",
field:"Magnitude",maxDataValue:e,maxSize:.8*H,minDataValue:O,minSize:.2*H};z=null!=(M=x.minDataValue)?M:O;O=null!=(B=x.maxDataValue)?B:e;B=U.isSome(x.maxSize)&&U.isSome(x.minSize)?[x.minSize/H,x.maxSize/H]:[.2,.8];"wind_speed"===u&&(B[0]=B[1]=(B[0]+B[1])/2);M=U.isSome(z)&&U.isSome(O)?[z,O]:null;if("classified_arrow"===u)if(U.isSome(z)&&U.isSome(O)&&U.isSome(x))for(P=[],z=(x.maxDataValue-x.minDataValue)/5,O=0;6>O;O++)P.push(x.minDataValue+z*O);else P=[0,1E-6,3.5,7,10.5,14];x="flow_to"===G===("ocean_current_kn"===
u||"ocean_current_m"===u)?0:Math.PI;z=null==T?void 0:T.find(V=>"rotationInfo"===V.type);d=(null==(C=this.rasterInfo.storageInfo)?0:C.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==z?void 0:z.rotationType)||d.rotationType;return{breakValues:P,dataRange:M,inputUnit:F,outputUnit:L,symbolTileSize:H,symbolPercentRange:B,style:u||"single_arrow",rotation:x,rotationType:d,type:"vectorField"}};return y}(E.JSONSupport);D.__decorate([J.property({json:{write:!0}})],E.prototype,"rendererJSON",
void 0);D.__decorate([J.property({type:a,json:{write:!0}})],E.prototype,"rasterInfo",void 0);D.__decorate([J.property({json:{write:!0}})],E.prototype,"lookup",void 0);D.__decorate([J.property()],E.prototype,"canRenderInWebGL",void 0);return E=D.__decorate([m.subclass("esri.renderers.support.RasterSymbolizer")],E)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe"],function(R,D){function v(w,m=256){m=Math.min(m,256);const {size:a,counts:n}=w;w=
new Uint8Array(a);var q=n.reduce((k,g)=>k+g/m,0);let l=0;var b=0;let c=0,f=q;for(let k=0;k<a;k++)if(c+=n[k],!(k<a-1&&c+n[k+1]<f)){for(;l<m-1&&f<c;)l++,f+=q;for(;b<=k;b++)w[b]=l;b=k+1}for(q=b;q<a;q++)w[q]=m-1;return w}function E(w,m){w=Math.min(Math.max(w,-100),100);m=Math.min(Math.max(m,-100),100);let a,n;const q=new Uint8Array(256);for(a=0;256>a;a++)0<w&&100>w?n=(200*a-25500+510*m)/(2*(100-w))+128:0>=w&&-100<w?n=(200*a-25500+510*m)*(100+w)/2E4+128:100===w?(n=200*a-25500+256*(100-w)+510*m,n=0<n?255:
0):-100===w&&(n=128),q[a]=255<n?255:0>n?0:n;return q}function p(w){if(0>=w||255<=w)return 1;var m=0;150!==w&&(m=150>=w?45*Math.cos(.01047*w):17*Math.sin(.021*w));m=Math.log((w+m)/255);if(0===m)return 1;w=Math.log(w/255)/m;return isNaN(w)?1:Math.min(9.9,Math.max(.01,w))}function U(w){var m;if(D.isNone(w)||null==(m=w.pixels)||!m.length)return null;w.statistics||w.updateStatistics();const {pixels:a,mask:n,pixelType:q,statistics:l}=w;w=w.width*w.height;m=a.length;let b,c;let f;var k;const g=[],t=[];for(f=
0;f<m;f++){var y=new Uint32Array(256);var r=a[f];if("u8"===q)if(b=-.5,c=255.5,n)for(k=0;k<w;k++)n[k]&&y[r[k]]++;else for(k=0;k<w;k++)y[r[k]]++;else{b=l[f].minValue;c=l[f].maxValue;var d=(c-b)/256;var e=new Uint32Array(257);if(n)for(k=0;k<w;k++)n[k]&&e[Math.floor((r[k]-b)/d)]++;else for(k=0;k<w;k++)e[Math.floor((r[k]-b)/d)]++;for(k=0;255>k;k++)y[k]=e[k];y[255]=e[255]+e[256]}g.push({min:b,max:c,size:256,counts:y});for(k=r=e=d=0;256>k;k++)d+=y[k],e+=k*y[k];e/=d;for(k=0;256>k;k++)r+=y[k]*(k-e)**2;y=Math.sqrt(r/
(d-1));d=(c-b)/256;k=(e+.5)*d+b;y*=d;t.push({min:b,max:c,avg:k,stddev:y})}return{statistics:t,histograms:g}}function J(w,m){if(null==m||0===m.length)return w;const a=Math.max.apply(null,m),{minCutOff:n,maxCutOff:q,outMin:l,outMax:b,histogramLut:c}=w;return n.length===m.length||n.length<=a?w:{minCutOff:m.map(f=>n[f]),maxCutOff:m.map(f=>q[f]),histogramLut:c?m.map(f=>c[f]):null,outMin:l,outMax:b}}const S={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],
s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},I=[.299,.587,.114];R.computeGammaValues=function(w,m,a){const n=[];for(let l=0;l<m.length;l++){let b=0,c=0;var q=0;"min"in m[l]?{min:b,max:c,avg:q}=m[l]:[b,c,q]=m[l];"u8"!==w&&(q=255*(q-b)/(c-b));a&&(q*=I[l]);n.push(p(q))}return n};R.createContrastBrightnessLUT=E;R.createHistogramEqualizationLUT=v;R.createStretchLUT=function(w){const {minCutOff:m,maxCutOff:a,gamma:n,pixelType:q}=w,l=w.outMin||0,b=w.outMax||
255;if(!["u8","u16","s8","s16"].includes(q))return null;const c=m.length;let f;let k=0;"s8"===q?k=-127:"s16"===q&&(k=-32767);let g=256;["u16","s16"].includes(q)&&(g=65536);const t=[],y=b-l;for(f=0;f<c;f++)t[f]=a[f]-m[f],y/(a[f]-m[f]);var r=n&&n.length>=c;const d=[];if(r)for(f=0;f<c;f++)d[f]=1<n[f]?2<n[f]?6.5+(n[f]-2)**2.5:6.5+100*(2-n[f])**4:1;let e;const h=[];let x,A,z;if(r)for(f=0;f<c;f++){z=[];for(r=0;r<g;r++)x=r+k,e=(x-m[f])/t[f],A=1,1<n[f]&&(A-=(1/y)**(e*d[f])),z[r]=x<a[f]&&x>m[f]?Math.floor(A*
y*e**(1/n[f]))+l:x>=a[f]?b:l;h[f]=z}else for(f=0;f<c;f++){z=[];for(r=0;r<g;r++)x=r+k,z[r]=x<=m[f]?l:x>=a[f]?b:Math.floor((x-m[f])/t[f]*y)+l;h[f]=z}if(null!=w.contrastOffset)for(w=E(w.contrastOffset,w.brightnessOffset),f=0;f<c;f++)for(z=h[f],r=0;r<g;r++)z[r]=w[z[r]];return{lut:h,offset:k}};R.estimateStatisticsFromHistograms=function(w){const m=[];for(let l=0;l<w.length;l++){const {min:b,max:c,size:f,counts:k}=w[l];let g=0;var a=0;for(var n=0;n<f;n++)g+=k[n],a+=n*k[n];a/=g;n=0;for(var q=0;q<f;q++)n+=
k[q]*(q-a)**2;q=(c-b)/f;m.push({min:b,max:c,avg:(a+.5)*q+b,stddev:Math.sqrt(n/(g-1))*q})}return m};R.estimateStatisticsHistograms=U;R.getStretchCutoff=function(w,m){var a,n,q;const {pixelBlock:l,bandIds:b,returnHistogramLut:c,rasterInfo:f}=m;m=w.stretchType;if(w.dra)if("minMax"===m&&D.isSome(l)&&l.statistics)var k=l.statistics.map(A=>[A.minValue,A.maxValue,0,0]);else{var g=U(l);k=D.isSome(g)?g.statistics:null;g=D.isSome(g)?g.histograms:null}else{var t;k=0<(null==(t=w.statistics)?void 0:t.length)?
w.statistics:D.unwrap(f.statistics);g=w.histograms||D.unwrap(f.histograms)}"percentClip"!==m&&"histogramEqualization"!==m||null!=(a=g)&&a.length||(m="minMax");t=(null==(n=k)?void 0:n.length)||(null==(q=g)?void 0:q.length)||f.bandCount;n=[];q=[];let y;let r,d,e;k&&!Array.isArray(k[0])&&(k=k.map(A=>[A.min,A.max,A.avg,A.stddev]));switch(m){case "none":k=S[f.pixelType]||S.f32;for(a=0;a<t;a++)n[a]=k[0],q[a]=k[1];break;case "minMax":for(a=0;a<t;a++)n[a]=k[a][0],q[a]=k[a][1];break;case "standardDeviation":for(a=
0;a<t;a++)n[a]=k[a][2]-w.numberOfStandardDeviations*k[a][3],q[a]=k[a][2]+w.numberOfStandardDeviations*k[a][3],n[a]<k[a][0]&&(n[a]=k[a][0]),q[a]>k[a][1]&&(q[a]=k[a][1]);break;case "histogramEqualization":for(a=0;a<t;a++)n[a]=g[a].min,q[a]=g[a].max;break;case "percentClip":for(a=0;a<g.length;a++){k=g[a];r=new Uint32Array(k.size);var h=[...k.counts];20<=h.length&&(h[0]=h[1]=h[2]=h[h.length-1]=h[h.length-2]=0);y=0;t=(k.max-k.min)/k.size;d=-.5===k.min&&1===t?.5:0;for(e=0;e<k.size;e++)y+=h[e],r[e]=y;h=
(w.minPercent||0)*y/100;for(e=0;e<k.size;e++)if(r[e]>h){n[a]=k.min+t*(e+d);break}h=(1-(w.maxPercent||0)/100)*y;for(e=k.size-2;0<=e;e--)if(r[e]<h){q[a]=k.min+t*(e+2-d);break}}break;default:for(a=0;a<t;a++)n[a]=k[a][0],q[a]=k[a][1]}let x;"histogramEqualization"===m?(m=g[0].size||256,w=0,c&&(x=g.map(A=>v(A)))):(m=w.max||255,w=w.min||0);return J({minCutOff:n,maxCutOff:q,outMax:m,outMin:w,histogramLut:x},b)};R.stretch=function(w,m){var a;if(D.isNone(w)||null==(a=w.pixels)||!a.length)return w;w=w.clone();
const {pixels:n,mask:q}=w,{minCutOff:l,maxCutOff:b,gamma:c}=m;a=m.outMin||0;m=m.outMax||255;const f=w.width*w.height,k=n.length;let g;let t,y,r;const d=m-a,e=[];for(g=0;g<k;g++)e[g]=b[g]-l[g],d/(b[g]-l[g]);var h=c&&c.length>=k;const x=[];if(h)for(g=0;g<k;g++)x[g]=1<c[g]?2<c[g]?6.5+(c[g]-2)**2.5:6.5+100*(2-c[g])**4:1;if(h)if(null!=q)for(h=0;h<f;h++){if(q[h])for(g=0;g<k;g++)t=n[g][h],r=(t-l[g])/e[g],y=1,1<c[g]&&(y-=(1/d)**(r*x[g])),n[g][h]=t<b[g]&&t>l[g]?Math.floor(y*d*r**(1/c[g]))+a:t>=b[g]?m:a}else for(h=
0;h<f;h++)for(g=0;g<k;g++)t=n[g][h],r=(t-l[g])/e[g],y=1,1<c[g]&&(y-=(1/d)**(r*x[g])),n[g][h]=t<b[g]&&t>l[g]?Math.floor(y*d*r**(1/c[g]))+a:t>=b[g]?m:a;else if(null!=q)for(h=0;h<f;h++){if(q[h])for(g=0;g<k;g++)t=n[g][h],n[g][h]=t<b[g]&&t>l[g]?Math.floor((t-l[g])/e[g]*d)+a:t>=b[g]?m:a}else for(h=0;h<f;h++)for(g=0;g<k;g++)t=n[g][h],n[g][h]=t<b[g]&&t>l[g]?Math.floor((t-l[g])/e[g]*d)+a:t>=b[g]?m:a;w.pixelType="u8";w.updateStatistics();return w};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(R,D,v){function E(p){let {altitude:U,azimuth:J}=p;const {hillshadeType:S,pixelSizePower:I,pixelSizeFactor:w,scalingType:m,isGCS:a,resolution:n}=p;var q="multi-directional"===S?2*p.zFactor:p.zFactor;const {x:l,y:b}=n;p=q/(8*l);var c=q/(8*b);a&&.001<q&&(p/=111E3,c/=111E3);"adjusted"===m&&(a?(p=111E3*l,c=111E3*b,p=(q+p**I*w)/(8*p),c=(q+c**I*w)/(8*c)):(p=(q+l**I*w)/(8*l),c=(q+b**I*
w)/(8*b)));var f=(90-U)*Math.PI/180;q=Math.cos(f);let k=(360-J+90)*Math.PI/180,g=Math.sin(f)*Math.cos(k);f=Math.sin(f)*Math.sin(k);const t=[315,270,225,360,180,0],y=[60,60,60,60,60,90];var r=new Float32Array([3,5,3,2,1,4]);const d=r.reduce((z,M)=>z+M);r=r.map(z=>z/d);const e="multi-directional"===S?t.length:1,h=new Float32Array(6),x=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===S)for(let z=0;z<e;z++)U=y[z],J=t[z],f=(90-U)*Math.PI/180,q=Math.cos(f),k=(360-J+90)*Math.PI/180,g=Math.sin(f)*
Math.cos(k),f=Math.sin(f)*Math.sin(k),h[z]=q,x[z]=g,A[z]=f;else h.fill(q),x.fill(g),A.fill(f);return{resolution:n,factor:[p,c],sinZcosA:g,sinZsinA:f,cosZ:q,sinZcosAs:x,sinZsinAs:A,cosZs:h,weights:r,hillshadeType:["traditional","multi-directional"].indexOf(S)}}R.calculateHillshadeParams=E;R.hillshade=function(p,U){if(!v.isValidPixelBlock(p))return p;const {width:J,height:S,mask:I}=p,w=new Uint8Array(J*S);I&&w.set(I);const {factor:m,sinZcosA:a,sinZsinA:n,cosZ:q,sinZcosAs:l,sinZsinAs:b,cosZs:c,weights:f}=
E(U),[k,g]=m;var {hillshadeType:t}=U;const y=p.pixels[0];U=new Uint8Array(J*S);let r;for(let B=1;B<S-1;B++){const C=B*J;for(let u=1;u<J-1;u++)if(I&&!I[C+u])U[C+u]=0;else{var d=8;if(I&&(d=I[C-J+u-1]+I[C-J+u]+I[C-J+u+1]+I[C+u-1]+I[C+u+1]+I[C+J+u-1]+I[C+J+u]+I[C+J+u+1],7>d)){U[C+u]=0;w[C+u]=0;continue}if(7===d){var e=I[C-J+u-1]?y[C-J+u-1]:y[C+u];var h=I[C-J+u]?y[C-J+u]:y[C+u];var x=I[C-J+u+1]?y[C-J+u+1]:y[C+u];d=I[C+u-1]?y[C+u-1]:y[C+u];r=I[C+u+1]?y[C+u+1]:y[C+u];var A=I[C+J+u-1]?y[C+J+u-1]:y[C+u];var z=
I[C+J+u]?y[C+J+u]:y[C+u];var M=I[C+J+u+1]?y[C+J+u+1]:y[C+u]}else e=y[C-J+u-1],h=y[C-J+u],x=y[C-J+u+1],d=y[C+u-1],r=y[C+u+1],A=y[C+J+u-1],z=y[C+J+u],M=y[C+J+u+1];d=(x+r+r+M-(e+d+d+A))*k;e=(A+z+z+M-(e+h+h+x))*g;h=Math.sqrt(1+d*d+e*e);x=0;if("traditional"===t)d=255*(q+n*e-a*d)/h,0>d&&(d=0),x=d;else for(A=b.length,z=0;z<A;z++)M=255*(c[z]+b[z]*e-l[z]*d)/h,0>M&&(M=0),x+=M*f[z];U[C+u]=x&255}}for(t=0;t<S;t++)U[t*J]=U[t*J+1],U[(t+1)*J-1]=U[(t+1)*J-2];for(t=1;t<J-1;t++)U[t]=U[t+J],U[t+(S-1)*J]=U[t+(S-2)*J];
return new D({width:J,height:S,pixels:[U],mask:I?w:null,pixelType:"u8",validPixelCount:p.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};R.tintHillshade=function(p,U,J,S){if(v.isValidPixelBlock(p)&&v.isValidPixelBlock(U)){var {min:I,max:w}=S;S=p.pixels[0];var {pixels:m,mask:a}=U;U=m[0];var n=255.00001/(w-I),q=new Uint8ClampedArray(U.length),l=new Uint8ClampedArray(U.length),b=new Uint8ClampedArray(U.length),c=J.length-1;for(let g=0;g<U.length;g++){if(a&&0===a[g])continue;var f=Math.floor((U[g]-
I)*n);const [t,y]=J[0>f?0:f>c?c:f];var k=S[g];f=k*y;const r=f*(1-Math.abs(t%2-1));k-=f;switch(Math.floor(t)){case 0:q[g]=f+k;l[g]=r+k;b[g]=k;break;case 1:q[g]=r+k;l[g]=f+k;b[g]=k;break;case 2:q[g]=k;l[g]=f+k;b[g]=r+k;break;case 3:q[g]=k;l[g]=r+k;b[g]=f+k;break;case 4:q[g]=r+k;l[g]=k;b[g]=f+k;break;case 5:case 6:q[g]=f+k,l[g]=k,b[g]=r+k}}p.pixels=[q,l,b];p.updateStatistics()}};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a){function n(d){const e=null==d?void 0:d.time;if(e&&(null!=e.start||null!=e.end)){const h=[];null!=e.start&&h.push(e.start);null==e.end||h.includes(e.end)||h.push(e.end);d.time=h.join(",")}}function q(d,e,h){return l.apply(this,arguments)}function l(){l=D._asyncToGenerator(function*(d,e,h){d=J.parseUrl(d);var x=yield U.normalizeCentralMeridian(e.geometry?[e.geometry]:[]);e=e.toJSON();n(e);x=x&&x[0];p.isSome(x)&&(e.geometry=x.toJSON());d=J.encode({...d.query,f:"json",
...e});return J.asValidOptions(d,h)});return l.apply(this,arguments)}function b(){b=D._asyncToGenerator(function*(d,e,h){var x,A=e.toJSON();p.isSome(A.angleName)&&(A.angleName=A.angleName.join(","));p.isSome(e.point)&&null!=(x=e.point.spatialReference)&&x.imageCoordinateSystem&&(A.point.spatialReference=y(e.point.spatialReference));p.isSome(e.spatialReference)&&e.spatialReference.imageCoordinateSystem&&(A.spatialReference=r(e.spatialReference));d=J.parseUrl(d);A=J.encode({...d.query,f:"json",...A});
h=J.asValidOptions(A,h);({data:h}=yield E(`${d.path}/computeAngles`,h));h.spatialReference=h.spatialReference?null!=h.spatialReference.geodataXform?new a({wkid:0,imageCoordinateSystem:h.spatialReference}):a.fromJSON(h.spatialReference):null;"NaN"===h.north&&(h.north=null);"NaN"===h.up&&(h.up=null);return new S(h)});return b.apply(this,arguments)}function c(){c=D._asyncToGenerator(function*(d,e,h){var x=e.toJSON();({geometries:e}=e);for(let z=0;z<e.length;z++){var A;null!=(A=e[z].spatialReference)&&
A.imageCoordinateSystem&&(x.geometries.geometries[z].spatialReference=y(e[z].spatialReference))}d=J.parseUrl(d);x=J.encode({...d.query,f:"json",...x});h=J.asValidOptions(x,h);({data:h}=yield E(`${d.path}/computePixelLocation`,h));return w.fromJSON(h)});return c.apply(this,arguments)}function f(){f=D._asyncToGenerator(function*(d,e,h){e=yield q(d,e,h);d=J.parseUrl(d);({data:d}=yield E(`${d.path}/computeStatisticsHistograms`,e));({statistics:e}=d);null!=e&&e.length&&e.forEach(x=>{x.avg=x.mean;x.stddev=
x.standardDeviation});return{statistics:e,histograms:d.histograms}});return f.apply(this,arguments)}function k(){k=D._asyncToGenerator(function*(d,e,h){e=yield q(d,e,h);d=J.parseUrl(d);({data:d}=yield E(`${d.path}/computeHistograms`,e));return{histograms:d.histograms}});return k.apply(this,arguments)}function g(){g=D._asyncToGenerator(function*(d,e,h){var x,A,z=e.toJSON();n(z);null!=(x=z.outFields)&&x.length&&(z.outFields=z.outFields.join(","));e=yield U.normalizeCentralMeridian(e.geometry);e=null==
e?void 0:e[0];p.isSome(e)&&(z.geometry=e.toJSON());d=J.parseUrl(d);z=J.encode({...d.query,f:"json",...z});h=J.asValidOptions(z,h);({data:h}=yield E(`${d.path}/getSamples`,h));h=null==h?void 0:null==(A=h.samples)?void 0:A.map(M=>{const B="NaN"===M.value||""===M.value?null:M.value.split(" ").map(C=>Number(C));return{...M,pixelValue:B}});return m.fromJSON({samples:h})});return g.apply(this,arguments)}function t(){t=D._asyncToGenerator(function*(d,e,h){const x=J.parseUrl(d);return U.normalizeCentralMeridian(e.geometry?
[e.geometry]:[]).then(A=>{var z=e.toJSON();A=A&&A[0];p.isSome(A)&&(z.geometry=JSON.stringify(A.toJSON()));z=J.encode({...x.query,f:"json",...z});z=J.asValidOptions(z,h);return E(x.path+"/identify",z)}).then(A=>I.fromJSON(A.data))});return t.apply(this,arguments)}function y(d){const {imageCoordinateSystem:e}=d;if(e){const {id:h,referenceServiceName:x}=e;return null!=h?x?{icsid:h,icsns:x}:{icsid:h}:{ics:e}}return d.toJSON()}function r(d,e){d=y(d);const {icsid:h,icsns:x,wkid:A}=d;return null!=h?null==
x||null!=e&&e.toLowerCase().includes("/"+x.toLowerCase()+"/")?`0:${h}`:JSON.stringify(d):A?A.toString():JSON.stringify(d)}R.computeAngles=function(d,e,h){return b.apply(this,arguments)};R.computeHistograms=function(d,e,h){return k.apply(this,arguments)};R.computePixelSpaceLocations=function(d,e,h){return c.apply(this,arguments)};R.computeStatisticsHistograms=function(d,e,h){return f.apply(this,arguments)};R.getImageSpatialReferenceJSON=y;R.getImageSpatialReferenceQueryParameter=r;R.getSamples=function(d,
e,h){return g.apply(this,arguments)};R.identify=function(d,e,h){return t.apply(this,arguments)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(R,D,v,E,p,U,J,S,I,w){v=function(m){function a(){var n=m.apply(this,arguments)||this;n.north=null;n.up=null;n.spatialReference=null;return n}R._inheritsLoose(a,m);return a}(E.JSONSupport);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"north",void 0);D.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"up",void 0);D.__decorate([p.property({type:w,json:{write:!0}})],v.prototype,"spatialReference",void 0);return v=D.__decorate([I.subclass("esri.rest.support.ImageAngleResult")],
v)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),function(R,D,v,E,p,U,J,S,I,w){v=function(m){function a(){var n=m.apply(this,arguments)||this;n.catalogItemVisibilities=null;n.catalogItems=
null;n.location=null;n.name=null;n.objectId=null;n.processedValues=null;n.properties=null;n.value=null;return n}R._inheritsLoose(a,m);return a}(v.JSONSupport);D.__decorate([E.property({json:{write:!0}})],v.prototype,"catalogItemVisibilities",void 0);D.__decorate([E.property({type:w,json:{write:!0}})],v.prototype,"catalogItems",void 0);D.__decorate([E.property({type:I,json:{write:!0}})],v.prototype,"location",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"name",void 0);D.__decorate([E.property({json:{write:!0}})],
v.prototype,"objectId",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"processedValues",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"properties",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"value",void 0);return v=D.__decorate([S.subclass("esri.rest.support.ImageIdentifyResult")],v)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,D,v,E,p,U,J,S){v=function(I){function w(){var m=I.apply(this,arguments)||this;m.geometries=null;return m}R._inheritsLoose(w,I);return w}(v.JSONSupport);D.__decorate([E.property({json:{write:!0}})],v.prototype,"geometries",void 0);return v=D.__decorate([S.subclass("esri.rest.support.ImagePixelLocationResult")],v)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(R,D,v,E,p,U,J,S,I){v=function(w){function m(){var a=w.apply(this,arguments)||this;a.samples=null;return a}R._inheritsLoose(m,w);return m}(v.JSONSupport);D.__decorate([E.property({type:[I],json:{write:!0}})],v.prototype,"samples",void 0);return v=D.__decorate([S.subclass("esri.rest.support.ImageSampleResult")],v)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(R,D,v,E,p,U,J,S,I){v=function(w){function m(){var a=w.apply(this,arguments)||this;a.attributes=null;a.location=null;a.locationId=null;a.rasterId=null;a.resolution=null;a.pixelValue=null;return a}R._inheritsLoose(m,w);return m}(v.JSONSupport);D.__decorate([E.property({json:{write:!0}})],v.prototype,"attributes",void 0);D.__decorate([E.property({type:I,json:{write:!0}})],v.prototype,"location",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"locationId",void 0);D.__decorate([E.property({json:{write:!0}})],
v.prototype,"rasterId",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"resolution",void 0);D.__decorate([E.property({json:{write:!0}})],v.prototype,"pixelValue",void 0);return v=D.__decorate([S.subclass("esri.rest.support.ImageSample")],v)})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),
function(R,D,v,E,p,U,J,S,I){function w(a,n,q){return m.apply(this,arguments)}function m(){m=D._asyncToGenerator(function*(a,n,q){var l,b,c,f,k,g,t;a=S.parseUrl(a);const {renderingRule:y,sourceJSON:r}=n||{};n=y?JSON.stringify(y.rasterFunctionDefinition||y):null;n=S.encode({...a.query,renderingRule:n,f:"json"});n=S.asValidOptions(n,q);a=a.path;q=r||(yield v(a,n).then(C=>C.data));var d=q.hasRasterAttributeTable?v(`${a}/rasterAttributeTable`,n):null,e=q.hasColormap?v(`${a}/colormap`,n):null,h=q.hasHistograms?
v(`${a}/histograms`,n):null,x=10.3<=q.currentVersion?v(`${a}/keyProperties`,n):null;a=q.hasMultidimensions?v(`${a}/multidimensionalInfo`,n):null;n=yield Promise.allSettled([d,e,h,x,a]);a=null;if(q.minValues&&q.minValues.length===q.bandCount)for(a=[],d=0;d<q.minValues.length;d++)a.push({min:q.minValues[d],max:q.maxValues[d],avg:q.meanValues[d],stddev:q.stdvValues[d]});e=E.fromJSON(q.extent);d=Math.ceil(e.width/q.pixelSizeX-.1);e=Math.ceil(e.height/q.pixelSizeY-.1);h=U.fromJSON(q.spatialReference||
q.extent.spatialReference);x="fulfilled"===n[0].status?n[0].value?I.fromJSON(n[0].value.data):null:null;const A="fulfilled"===n[1].status?null==(l=n[1].value)?void 0:l.data.colormap:null;l="fulfilled"===n[2].status?null==(b=n[2].value)?void 0:b.data.histograms:null;b="fulfilled"===n[3].status?null!=(c=null==(f=n[3].value)?void 0:f.data)?c:{}:{};c="fulfilled"===n[4].status?null==(k=n[4].value)?void 0:k.data.multidimensionalInfo:null;null!=c&&null!=(g=c.variables)&&g.length&&c.variables.forEach(C=>
{var u;null!=(u=C.statistics)&&u.length&&C.statistics.forEach(F=>{F.avg=F.mean;F.stddev=F.standardDeviation})});const {defaultVariable:z,serviceDataType:M}=q;z&&z!==b.DefaultVariable&&(b.DefaultVariable=z);M&&M.includes("esriImageServiceDataTypeVector")&&!M.includes(b.DataType)&&(b.DataType=M.replace("esriImageServiceDataType",""));let B=q.noDataValue;null!=(t=q.noDataValues)&&t.length&&q.noDataValues.some(C=>C!==B)&&(B=q.noDataValues);return new J({width:d,height:e,bandCount:q.bandCount,extent:E.fromJSON(q.extent),
spatialReference:h,pixelSize:new p({x:q.pixelSizeX,y:q.pixelSizeY,spatialReference:h}),pixelType:q.pixelType.toLowerCase(),statistics:a,attributeTable:x,colormap:A,histograms:l,keyProperties:b,noDataValue:B,multidimensionalInfo:c})});return m.apply(this,arguments)}R.fetchServiceRasterInfo=function(a,n,q){return w(a,{sourceJSON:n},q)};R.generateRasterInfo=function(a,n,q){return w(a,{renderingRule:n},q)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),
function(R,D,v,E,p,U,J,S){function I(){I=D._asyncToGenerator(function*(w,m,a){var n,q;w=S.parseUrl(w);var l=S.encode({...w.query,f:"json"});a=S.asValidOptions(l,a);w=`${w.path}/${m}/info`;m=v(`${w}`,a);a=v(`${w}/keyProperties`,a);a=yield Promise.allSettled([m,a]);m="fulfilled"===a[0].status?a[0].value.data:null;a="fulfilled"===a[1].status?a[1].value.data:null;w=null;null!=(n=m.statistics)&&n.length&&(w=m.statistics.map(g=>({min:g[0],max:g[1],avg:g[2],stddev:g[3]})));n=E.fromJSON(m.extent);l=Math.ceil(n.width/
m.pixelSizeX-.1);const b=Math.ceil(n.height/m.pixelSizeY-.1),c=n.spatialReference,f=new p({x:m.pixelSizeX,y:m.pixelSizeY,spatialReference:c}),k=null!=(q=m.histograms)&&q.length?m.histograms:null;q=new J({origin:m.origin,blockWidth:m.blockWidth,blockHeight:m.blockHeight,firstPyramidLevel:m.firstPyramidLevel,maximumPyramidLevel:m.maxPyramidLevel});return new U({width:l,height:b,bandCount:m.bandCount,extent:n,spatialReference:c,pixelSize:f,pixelType:m.pixelType.toLowerCase(),statistics:w,histograms:k,
keyProperties:a,storageInfo:q})});return I.apply(this,arguments)}R.getCatalogItemRasterInfo=function(w,m,a){return I.apply(this,arguments)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(R,D,v,E,p,U,J,S,I,w){var m;v=m=function(a){function n(){var q=a.apply(this,arguments)||this;q.angleNames=null;q.point=null;q.spatialReference=null;q.rasterId=null;return q}R._inheritsLoose(n,a);n.prototype.clone=function(){return new m(p.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return n}(E.JSONSupport);D.__decorate([U.property({type:[String],json:{name:"angleName",write:!0}})],v.prototype,"angleNames",void 0);D.__decorate([U.property({type:I,
json:{write:!0}})],v.prototype,"point",void 0);D.__decorate([U.property({type:w,json:{write:!0}})],v.prototype,"spatialReference",void 0);D.__decorate([U.property({type:J.Integer,json:{write:!0}})],v.prototype,"rasterId",void 0);return v=m=D.__decorate([S.subclass("esri.rest.support.ImageAngleParameters")],v)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q){var l;p=l=function(b){function c(){var k=b.apply(this,arguments)||this;k.geometry=null;k.mosaicRule=null;k.renderingRule=null;k.pixelSize=null;k.raster=void 0;k.timeExtent=null;return k}R._inheritsLoose(c,b);var f=c.prototype;f.writeGeometry=function(k,g,t){null!=k&&(g.geometryType=m.getJsonType(k),g[t]=k.toJSON())};f.clone=function(){return new l(U.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return c}(p.JSONSupport);D.__decorate([J.property({types:v.geometryTypes,json:{read:m.fromJSON}})],p.prototype,"geometry",void 0);D.__decorate([w.writer("geometry")],p.prototype,"writeGeometry",null);D.__decorate([J.property({type:a,json:{write:!0}})],p.prototype,"mosaicRule",void 0);D.__decorate([J.property({type:n,json:{write:!0}})],p.prototype,"renderingRule",void 0);D.__decorate([J.property({type:q,json:{write:!0}})],p.prototype,"pixelSize",void 0);
D.__decorate([J.property({json:{write:!0}})],p.prototype,"raster",void 0);D.__decorate([J.property({type:E,json:{read:{source:"time"},write:{target:"time"}}})],p.prototype,"timeExtent",void 0);return p=l=D.__decorate([I.subclass("esri.rest.support.ImageHistogramParameters")],p)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q){var l;E=l=function(b){function c(){var k=b.apply(this,arguments)||this;k.geometry=null;k.renderingRules=null;k.pixelSize=null;k.returnGeometry=!0;k.returnCatalogItems=!0;k.returnPixelValues=!0;k.maxItemCount=null;k.timeExtent=null;k.raster=void 0;k.viewId=void 0;k.processAsMultidimensional=!1;return k}R._inheritsLoose(c,b);var f=c.prototype;f.writeGeometry=function(k,g,t){null!=k&&(g.geometryType=a.getJsonType(k),g[t]=JSON.stringify(k.toJSON()))};f.writeMosaicRule=
function(k,g,t){null!=k&&(g[t]=JSON.stringify(k.toJSON()))};f.writeRenderingRule=function(k,g,t){null!=k&&(g[t]=JSON.stringify(k.toJSON()));k.rasterFunctionDefinition&&(g[t]=JSON.stringify(k.rasterFunctionDefinition))};f.writeRenderingRules=function(k,g,t){null!=k&&(g[t]=JSON.stringify(k.map(y=>y.rasterFunctionDefinition||y.toJSON())))};f.writePixelSize=function(k,g,t){null!=k&&(g[t]=JSON.stringify(k))};f.writeTimeExtent=function(k,g,t){if(null!=k){const y=U.isSome(k.start)?k.start.getTime():null;
k=U.isSome(k.end)?k.end.getTime():null;g[t]=null!=y?null!=k?`${y},${k}`:`${y}`:null}};f.clone=function(){return new l(p.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};
R._createClass(c,[{key:"mosaicRule",set:function(k){k&&k.mosaicMethod&&(k=n.fromJSON({...k.toJSON(),mosaicMethod:k.mosaicMethod,mosaicOperation:k.mosaicOperation}));this._set("mosaicRule",k)}},{key:"renderingRule",set:function(k){k&&k.rasterFunction&&(k=q.fromJSON({...k.toJSON(),rasterFunction:k.rasterFunction,rasterFunctionArguments:k.rasterFunctionArguments}));this._set("renderingRule",k)}}]);return c}(E.JSONSupport);D.__decorate([J.property({json:{write:!0}})],E.prototype,"geometry",void 0);D.__decorate([w.writer("geometry")],
E.prototype,"writeGeometry",null);D.__decorate([J.property({type:n,json:{write:!0}})],E.prototype,"mosaicRule",null);D.__decorate([w.writer("mosaicRule")],E.prototype,"writeMosaicRule",null);D.__decorate([J.property({type:q,json:{write:!0}})],E.prototype,"renderingRule",null);D.__decorate([w.writer("renderingRule")],E.prototype,"writeRenderingRule",null);D.__decorate([J.property({type:[q],json:{write:!0}})],E.prototype,"renderingRules",void 0);D.__decorate([w.writer("renderingRules")],E.prototype,
"writeRenderingRules",null);D.__decorate([J.property({type:m,json:{write:!0}})],E.prototype,"pixelSize",void 0);D.__decorate([w.writer("pixelSize")],E.prototype,"writePixelSize",null);D.__decorate([J.property({type:Boolean,json:{write:!0}})],E.prototype,"returnGeometry",void 0);D.__decorate([J.property({type:Boolean,json:{write:!0}})],E.prototype,"returnCatalogItems",void 0);D.__decorate([J.property({type:Boolean,json:{write:!0}})],E.prototype,"returnPixelValues",void 0);D.__decorate([J.property({type:Number,
json:{write:!0}})],E.prototype,"maxItemCount",void 0);D.__decorate([J.property({type:v,json:{write:{target:"time"}}})],E.prototype,"timeExtent",void 0);D.__decorate([w.writer("timeExtent")],E.prototype,"writeTimeExtent",null);D.__decorate([J.property({json:{write:!0}})],E.prototype,"raster",void 0);D.__decorate([J.property({json:{write:!0}})],E.prototype,"viewId",void 0);D.__decorate([J.property({type:Boolean,json:{write:!0}})],E.prototype,"processAsMultidimensional",void 0);return E=l=D.__decorate([I.subclass("esri.rest.support.ImageIdentifyParameters")],
E)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),function(R,D,v,E,p,U,J,S,I,w,m){var a;v=a=function(n){function q(){var b=n.apply(this,
arguments)||this;b.geometries=null;b.rasterId=null;return b}R._inheritsLoose(q,n);var l=q.prototype;l.writeGeometry=function(b,c,f){c.geometries={geometryType:"esriGeometryPoint",geometries:b.map(k=>k.toJSON())}};l.clone=function(){return new a({geometries:this.geometries.map(b=>b.clone()),rasterId:this.rasterId})};return q}(E.JSONSupport);D.__decorate([p.property({type:[m],json:{write:!0}})],v.prototype,"geometries",void 0);D.__decorate([w.writer("geometries")],v.prototype,"writeGeometry",null);
D.__decorate([p.property({type:S.Integer,json:{write:!0}})],v.prototype,"rasterId",void 0);return v=a=D.__decorate([I.subclass("esri.rest.support.ImagePixelLocationParameters")],v)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Point ../../geometry/Multipoint".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m,a,n,q,l){var b;p=b=function(c){function f(){var g=c.apply(this,arguments)||this;g.geometry=null;g.interpolation="nearest";g.mosaicRule=null;g.outFields=null;g.pixelSize=null;g.returnFirstValueOnly=!0;g.sampleDistance=null;g.sampleCount=null;g.sliceId=null;g.timeExtent=null;return g}R._inheritsLoose(f,c);var k=f.prototype;k.writeGeometry=function(g,t,y){null!=g&&(t.geometryType=m.getJsonType(g),t[y]=g.toJSON())};k.clone=function(){return new b(U.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};R._createClass(f,[{key:"locations",set:function(g){if(null!=g&&g.length){const t=new l({spatialReference:g[0].spatialReference});t.points=g.map(y=>[y.x,y.y]);this._set("locations",g);this.geometry=
t}}}]);return f}(p.JSONSupport);D.__decorate([J.property({types:v.geometryTypes,json:{read:m.fromJSON}})],p.prototype,"geometry",void 0);D.__decorate([w.writer("geometry")],p.prototype,"writeGeometry",null);D.__decorate([J.property()],p.prototype,"locations",null);D.__decorate([J.property({type:String,json:{type:n.interpolationKebab.jsonValues,read:n.interpolationKebab.read,write:n.interpolationKebab.write}})],p.prototype,"interpolation",void 0);D.__decorate([J.property({type:a,json:{write:!0}})],
p.prototype,"mosaicRule",void 0);D.__decorate([J.property({type:[String],json:{write:!0}})],p.prototype,"outFields",void 0);D.__decorate([J.property({type:q,json:{write:!0}})],p.prototype,"pixelSize",void 0);D.__decorate([J.property({type:String,json:{write:!0}})],p.prototype,"raster",void 0);D.__decorate([J.property({type:Boolean,json:{write:!0}})],p.prototype,"returnFirstValueOnly",void 0);D.__decorate([J.property({type:Number,json:{write:!0}})],p.prototype,"sampleDistance",void 0);D.__decorate([J.property({type:Number,
json:{write:!0}})],p.prototype,"sampleCount",void 0);D.__decorate([J.property({type:Number,json:{write:!0}})],p.prototype,"sliceId",void 0);D.__decorate([J.property({type:E,json:{read:{source:"time"},write:{target:"time"}}})],p.prototype,"timeExtent",void 0);return p=b=D.__decorate([I.subclass("esri.rest.support.ImageSampleParameters")],p)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(R,D,v,E,p,U,J,S,I,w,m){function a(){a=D._asyncToGenerator(function*(e,h,x,A){const z=performance.now();var M=n(h,x);const B=performance.now();x=l(h,M,x.width,x.height);h=performance.now();M=c(x,!0);x=performance.now();e="Streamlines"===e?f(M,10):k(M);M=performance.now();E("esri-2d-profiler")&&(d.info("I.1","_createFlowFieldFromData (ms)",Math.round(B-z)),d.info("I.2","_getStreamlines (ms)",Math.round(h-B)),d.info("I.3","createAnimatedLinesData (ms)",Math.round(x-h)),d.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(M-x)),d.info("I.5","createFlowMesh (ms)",Math.round(M-z)),d.info("I.6","Mesh size (bytes)",e.vertexData.buffer.byteLength+e.indexData.buffer.byteLength));yield Promise.resolve();S.throwIfAborted(A);return e});return a.apply(this,arguments)}function n(e,h){const x=b(h.data,h.width,h.height,e.smoothing);return e.interpolate?(A,z)=>{const M=Math.floor(A),B=Math.floor(z);if(0>M||M>=h.width||0>B||B>=h.height)return[0,0];A-=M;z-=B;const C=M<h.width-1?M+1:M,u=B<h.height-1?B+1:B;return[(x[2*(B*
h.width+M)]*(1-z)+x[2*(u*h.width+M)]*z)*(1-A)+(x[2*(B*h.width+C)]*(1-z)+x[2*(u*h.width+C)]*z)*A,(x[2*(B*h.width+M)+1]*(1-z)+x[2*(u*h.width+M)+1]*z)*(1-A)+(x[2*(B*h.width+C)+1]*(1-z)+x[2*(u*h.width+C)+1]*z)*A]}:(A,z)=>{A=Math.round(A);z=Math.round(z);return 0>A||A>=h.width||0>z||z>=h.height?[0,0]:[x[2*(z*h.width+A)],x[2*(z*h.width+A)+1]]}}function q(e,h,x,A,z,M,B,C,u){const F=[];let L=0,[T,H]=h(x,A);T*=e.velocityScale;H*=e.velocityScale;F.push({x,y:A,t:L,speed:Math.sqrt(T*T+H*H)});for(let O=0;O<e.verticesPerLine;O++){let [V,
X]=h(x,A);V*=e.velocityScale;X*=e.velocityScale;const Y=Math.sqrt(V*V+X*X);if(Y<e.minSpeedThreshold)break;const ba=V/Y,ea=X/Y;x+=ba*e.segmentLength;A+=ea*e.segmentLength;L+=e.segmentLength/Y;if(Math.acos(ba*G+ea*P)>e.maxTurnAngle)break;if(e.collisions){var G=Math.round(x*u);var P=Math.round(A*u);if(0>G||G>B-1||0>P||P>C-1)break;const ca=M[P*B+G];if(-1!==ca&&ca!==z)break;M[P*B+G]=z}F.push({x,y:A,t:L,speed:Y});G=ba;P=ea}return F}function l(e,h,x,A){const z=[],M=new I,B=1/Math.max(e.lineCollisionWidth,
1),C=Math.round(x*B),u=Math.round(A*B),F=new Int32Array(C*u);for(var L=0;L<F.length;L++)F[L]=-1;L=[];for(let T=0;T<A;T+=e.lineSpacing)for(let H=0;H<x;H+=e.lineSpacing)L.push({x:H,y:T,sort:M.getFloat()});L.sort((T,H)=>T.sort-H.sort);for(const {x:T,y:H}of L)M.getFloat()<e.density&&(x=q(e,h,T,H,z.length,F,C,u,B),2>x.length||z.push(x));return z}function b(e,h,x,A){if(0===A)return e;const z=Math.round(3*A),M=Array(2*z+1);var B=0;for(var C=-z;C<=z;C++){var u=Math.exp(-C*C/(A*A));M[C+z]=u;B+=u}for(A=-z;A<=
z;A++)M[A+z]/=B;B=new Float32Array(e.length);for(A=0;A<x;A++)for(C=0;C<h;C++){var F=u=0;for(var L=-z;L<=z;L++)if(!(0>C+L||C+L>=h)){var T=M[L+z];u+=T*e[2*(A*h+(C+L))];F+=T*e[2*(A*h+(C+L))+1]}B[2*(A*h+C)]=u;B[2*(A*h+C)+1]=F}e=new Float32Array(e.length);for(A=0;A<h;A++)for(C=0;C<x;C++){F=u=0;for(L=-z;L<=z;L++)0>C+L||C+L>=x||(T=M[L+z],u+=T*B[2*((C+L)*h+A)],F+=T*B[2*((C+L)*h+A)+1]);e[2*(C*h+A)]=u;e[2*(C*h+A)+1]=F}return e}function c(e,h){const x=new I;var A=e.reduce((C,u)=>C+u.length,0);A=new Float32Array(4*
A);const z=Array(e.length);let M=0,B=0;for(const C of e){e=M;for(const u of C)A[4*M]=u.x,A[4*M+1]=u.y,A[4*M+2]=u.t,A[4*M+3]=u.speed,M++;z[B++]={startVertex:e,numberOfVertices:C.length,totalTime:C[C.length-1].t,timeSeed:h?x.getFloat():0}}return{lineVertices:A,lineDescriptors:z}}function f(e,h){function x(G,P,O,V,X,Y,ba,ea){const ca=9*u;let da=0;C[ca+da++]=G;C[ca+da++]=P;C[ca+da++]=1;C[ca+da++]=O;C[ca+da++]=Y;C[ca+da++]=ba;C[ca+da++]=V/2;C[ca+da++]=X/2;C[ca+da++]=ea;u++;C[ca+da++]=G;C[ca+da++]=P;C[ca+
da++]=-1;C[ca+da++]=O;C[ca+da++]=Y;C[ca+da++]=ba;C[ca+da++]=-V/2;C[ca+da++]=-X/2;C[ca+da++]=ea;u++}const {lineVertices:A,lineDescriptors:z}=e;var M=e=0;for(var B of z)e+=2*B.numberOfVertices,M+=6*(B.numberOfVertices-1);const C=new Float32Array(9*e);B=new Uint32Array(M);let u=0;e=0;for(const G of z){const {totalTime:P,timeSeed:O}=G;let V=M=null,X=null;var F=null,L=null,T=null;for(let Y=0;Y<G.numberOfVertices;Y++){F=A[4*(G.startVertex+Y)];const ba=A[4*(G.startVertex+Y)+1],ea=A[4*(G.startVertex+Y)+2],
ca=A[4*(G.startVertex+Y)+3];let da=null,Q=null;var H=null;let W=null;0<Y&&(da=F-M,Q=ba-V,H=Math.sqrt(da*da+Q*Q),da/=H,Q/=H,1<Y?(L=da+L,T=Q+T,H=Math.sqrt(L*L+T*T),L/=H,T/=H,H=Math.min(1/(L*da+T*Q),h),L*=H,T*=H,H=-T,W=L):(H=-Q,W=da),null!==H&&null!==W&&(x(M,V,X,H,W,P,O,ca),B[e++]=u-2,B[e++]=u,B[e++]=u-1,B[e++]=u,B[e++]=u+1,B[e++]=u-1));M=F;V=ba;X=ea;L=da;T=Q;F=ca}x(M,V,X,-T,L,P,O,F)}return{vertexData:C,indexData:B}}function k(e){function h(aa,ia){var ja=ea+da,ka=ca+Q,qa=Math.sqrt(ja*ja+ka*ka);ja/=qa;
ka/=qa;var ma=ea*ja+ca*ka,ya=da+W,sa=Q+fa;qa=Math.sqrt(ya*ya+sa*sa);ya/=qa;sa/=qa;var ra=da*ya+Q*sa;{qa=H;var Ba=G,za=P,wa=O;ka=-(ka/ma);ja/=ma;ma=V;var xa=X,Ka=Y,Ja=ba;sa=-(sa/ra);ya/=ra;ra=16*L;let Fa=0;for(const La of[1,2])for(const Pa of[1,2,3,4])u[ra+Fa++]=qa,u[ra+Fa++]=Ba,u[ra+Fa++]=za,u[ra+Fa++]=wa,u[ra+Fa++]=ma,u[ra+Fa++]=xa,u[ra+Fa++]=Ka,u[ra+Fa++]=Ja,u[ra+Fa++]=La,u[ra+Fa++]=Pa,u[ra+Fa++]=aa,u[ra+Fa++]=ia,u[ra+Fa++]=ka/2,u[ra+Fa++]=ja/2,u[ra+Fa++]=sa/2,u[ra+Fa++]=ya/2,L++}F[T++]=L-8;F[T++]=
L-7;F[T++]=L-6;F[T++]=L-7;F[T++]=L-5;F[T++]=L-6;F[T++]=L-4;F[T++]=L-3;F[T++]=L-2;F[T++]=L-3;F[T++]=L-1;F[T++]=L-2}function x(aa,ia,ja,ka,qa,ma){ea=da;ca=Q;da=W;Q=fa;null==ea&&null==ca&&(ea=da,ca=Q);if(null!=V&&null!=X){W=aa-V;fa=ia-X;const ya=Math.sqrt(W*W+fa*fa);W/=ya;fa/=ya}null!=ea&&null!=ca&&h(qa,ma);H=V;G=X;P=Y;O=ba;V=aa;X=ia;Y=ja;ba=ka}function A(aa,ia){ea=da;ca=Q;da=W;Q=fa;null==ea&&null==ca&&(ea=da,ca=Q);null!=ea&&null!=ca&&h(aa,ia)}const {lineVertices:z,lineDescriptors:M}=e;let B=e=0;for(var C of M){const aa=
C.numberOfVertices-1;e+=8*aa;B+=12*aa}const u=new Float32Array(16*e),F=new Uint32Array(B);let L=0,T=0,H,G,P,O,V,X,Y,ba,ea,ca,da,Q,W,fa;for(const aa of M){fa=W=Q=da=ca=ea=ba=Y=X=V=O=P=G=H=null;const {totalTime:ia,timeSeed:ja}=aa;for(C=0;C<aa.numberOfVertices;C++)x(z[4*(aa.startVertex+C)],z[4*(aa.startVertex+C)+1],z[4*(aa.startVertex+C)+2],z[4*(aa.startVertex+C)+3],ia,ja);A(ia,ja)}return{vertexData:u,indexData:F}}function g(e,h){const x=h.pixels,{width:A,height:z}=h,M=new Float32Array(A*z*2),B=h.mask||
new Uint8Array(A*z*2);h.mask||B.fill(255);if("vector-uv"===e)for(e=0;e<A*z;e++)M[2*e]=x[0][e],M[2*e+1]=-x[1][e];else if("vector-magdir"===e)for(e=0;e<A*z;e++){h=x[0][e];const C=U.deg2rad(x[1][e]),u=Math.sin(C-Math.PI/2);M[2*e]=Math.cos(C-Math.PI/2)*h;M[2*e+1]=u*h}return{data:M,mask:B,width:A,height:z}}function t(){t=D._asyncToGenerator(function*(e,h,x,A,z,M){const B=performance.now();var C=w.getInfo(h.spatialReference);if(!C)return x=yield y(e,h,x,A,z,M),E("esri-2d-profiler")&&d.info("I.7","loadImagery, early exit (ms)",
Math.round(performance.now()-B)),E("esri-2d-profiler")&&d.info("I.9","Number of parts",1),x;const [u,F]=C.valid,L=Math.ceil(h.width/(F-u)),T=h.width/L,H=Math.round(x/L);let G=h.xmin;const P=[];C=performance.now();for(let O=0;O<L;O++){const V=new m({xmin:G,xmax:G+T,ymin:h.ymin,ymax:h.ymax,spatialReference:h.spatialReference});P.push(y(e,V,H,A,z,M));G+=T}e=yield Promise.all(P);E("esri-2d-profiler")&&d.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-C));E("esri-2d-profiler")&&
d.info("I.9","Number of parts",e.length);A={data:new Float32Array(x*A*2),mask:new Uint8Array(x*A),width:x,height:A};h=0;for(const O of e){for(e=0;e<O.height;e++)for(z=0;z<O.width;z++)h+z>=x||(A.data[2*(e*x+h+z)]=O.data[2*(e*O.width+z)],A.data[2*(e*x+h+z)+1]=O.data[2*(e*O.width+z)+1],A.mask[e*x+h+z]=O.mask[e*O.width+z]);h+=O.width}E("esri-2d-profiler")&&d.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-B));return A});return t.apply(this,arguments)}function y(e,h,x,A,z,M){return r.apply(this,
arguments)}function r(){r=D._asyncToGenerator(function*(e,h,x,A,z,M){const B={requestProjectedLocalDirections:!0,signal:M};J.isSome(z)&&(B.timeExtent=z);if("imagery"===e.type)return yield e.load({signal:M}),z=e.rasterInfo.dataType,e=yield e.fetchImage(h,x,A,B),!e||J.isNone(e.pixelData)||J.isNone(e.pixelData.pixelBlock)?{data:new Float32Array(x*A*2),mask:new Uint8Array(x*A),width:x,height:A}:g(z,e.pixelData.pixelBlock);yield e.load({signal:M});z=e.rasterInfo.dataType;e=yield e.fetchPixels(h,x,A,B);
return!e||J.isNone(e.pixelBlock)?{data:new Float32Array(x*A*2),mask:new Uint8Array(x*A),width:x,height:A}:g(z,e.pixelBlock)});return r.apply(this,arguments)}const d=p.getLogger("esri.views.2d.engine.flow.dataUtils");R.createAnimatedLinesData=c;R.createFlowMesh=function(e,h,x,A){return a.apply(this,arguments)};R.createParticlesMesh=k;R.createStreamlinesMesh=f;R.loadImagery=function(e,h,x,A,z,M){return t.apply(this,arguments)};Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),function(R,
D,v,E,p,U,J,S,I,w,m,a,n,q,l,b,c,f,k,g,t,y,r,d,e){p=function(h){function x(...z){z=h.call(this,...z)||this;z.legendEnabled=!0;z.isReference=null;z.operationalLayerType="ArcGISImageServiceLayer";z.popupEnabled=!0;z.popupTemplate=null;z.type="imagery";return z}R._inheritsLoose(x,h);var A=x.prototype;A.normalizeCtorArgs=function(z,M){return"string"===typeof z?{url:z,...M}:z};A.load=function(z){const M=E.isSome(z)?z.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
z).catch(U.throwIfAbortError).then(()=>this._fetchService(M)));return Promise.resolve(this)};A.writeOperationalLayerType=function(z,M,B){var C;z="vector-field"===(null==(C=this.renderer)?void 0:C.type);M[B]=z?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};A.createPopupTemplate=function(z){const M=this.rasterFields,B=this.title,C=new Set;var u=!1;let F=!1;this.capabilities&&(u=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,F="esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const L=new Set;u&&L.add("raster.itempixelvalue");for(const T of M)u=T.name.toLowerCase(),L.has(u)||u.includes("raster.servicepixelvalue.")||C.add(T.name);F&&C.add("raster.magnitude").add("raster.direction");return e.createPopupTemplate({fields:M,title:B},{...z,visibleFieldNames:C})};A.queryFeatures=function(z,M){return this.queryRasters(z,M).then(B=>{if(null!=B&&B.features)for(const C of B.features)C.layer=C.sourceLayer=
this;return B})};A.queryFeatureCount=function(z,M){return this.queryRasterCount(z,M)};A.redraw=function(){this.emit("redraw")};A.serviceSupportsSpatialReference=function(z){return d.serviceSupportsSpatialReference(this,z)};R._createClass(x,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return x}(b.BlendLayer(y.TemporalLayer(g.RefreshableLayer(t.ScaleRangeLayer(f.OperationalLayer(k.PortalLayer(q.ArcGISImageService(c.CustomParametersMixin(l.ArcGISService(p.MultiOriginJSONMixin(n)))))))))));
D.__decorate([J.property(r.legendEnabled)],p.prototype,"legendEnabled",void 0);D.__decorate([J.property({type:["show","hide"]})],p.prototype,"listMode",void 0);D.__decorate([J.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);D.__decorate([J.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],
p.prototype,"operationalLayerType",void 0);D.__decorate([a.writer("web-map","operationalLayerType")],p.prototype,"writeOperationalLayerType",null);D.__decorate([J.property(r.popupEnabled)],p.prototype,"popupEnabled",void 0);D.__decorate([J.property({type:v,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",void 0);D.__decorate([J.property({readOnly:!0})],p.prototype,"defaultPopupTemplate",null);D.__decorate([J.property({readOnly:!0,json:{read:!1}})],p.prototype,
"type",void 0);return p=D.__decorate([m.subclass("esri.layers.ImageryLayer")],p)});