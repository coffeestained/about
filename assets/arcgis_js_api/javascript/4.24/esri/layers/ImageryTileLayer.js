// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(X,O,I,J,z,Y,R,P,T){function x(y,t){if(!y)return null;if("classBreaks"===y.type&&y.classificationMethod){var b=y.authoringInfo||{classificationMethod:""};b.classificationMethod=
y.classificationMethod;y.authoringInfo=b}"vectorField"===y.type&&y.visualVariables&&!Array.isArray(y.visualVariables)&&(y.visualVariables=[y.visualVariables]);b=y?n[y.type]||null:null;if(b)return b=new b,b.read(y,t),b;t&&t.messages&&y&&t.messages.push(new O("renderer:unsupported","Renderers of type '"+(y.type||"unknown")+"' are not supported",{definition:y,context:t}));return null}const m={key:"type",base:null,typeMap:{"unique-value":P,"class-breaks":I,"raster-colormap":z,"raster-stretch":R,"vector-field":T,
"raster-shaded-relief":Y,flow:J}},a={...m,typeMap:{...m.typeMap}};delete a.typeMap["vector-field"];delete a.typeMap.flow;const n={uniqueValue:P,classBreaks:I,rasterStretch:R,rasterColormap:z,vectorField:T,rasterShadedRelief:Y,flowRenderer:J};X.ClassBreaksRenderer=I;X.FlowRenderer=J;X.RasterColormapRenderer=z;X.RasterShadedReliefRenderer=Y;X.RasterStretchRenderer=R;X.UniqueValueRenderer=P;X.VectorFieldRenderer=T;X.fromJSON=function(y,t){return x(y,t)};X.rasterRendererTypes=m;X.read=x;X.websceneRasterRendererTypes=
a;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t){var b;J=new J.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});z=b=function(l){function v(w){w=l.call(this,w)||this;w.density=.8;w.color=new I([255,255,255,1]);w.maxPathLength=200;w.trailWidth=1.5;w.flowSpeed=10;w.trailLength=100;w.smoothing=0;w.flowRepresentation="flow-from";w.type="flow";w.authoringInfo=null;w.legendOptions=null;w.trailCap="butt";w.background="none";return w}X._inheritsLoose(v,l);var F=v.prototype;F.clone=function(){var w,B;const {density:D,
maxPathLength:K,trailWidth:f,flowSpeed:e,trailLength:d,smoothing:k,flowRepresentation:p,trailCap:u,background:E}=this,c=this.color.clone(),g=(this.visualVariables||[]).map(r=>r.clone()),h=null==(w=this.authoringInfo)?void 0:w.clone();w=null==(B=this.legendOptions)?void 0:B.clone();return new b({density:D,color:c,maxPathLength:K,trailWidth:f,flowSpeed:e,trailLength:d,trailCap:u,background:E,smoothing:k,flowRepresentation:p,visualVariables:g,authoringInfo:h,legendOptions:w})};F.getSymbol=function(w,
B){};F.getSymbolAsync=function(){var w=X._asyncToGenerator(function*(B,D){});return function(B,D){return w.apply(this,arguments)}}();F.getSymbols=function(){return[]};return v}(n.VisualVariablesMixin(z.JSONSupport));O.__decorate([R.property({type:Number,json:{write:!0}})],z.prototype,"density",void 0);O.__decorate([R.property({type:I,json:{write:{allowNull:!0}}})],z.prototype,"color",void 0);O.__decorate([R.property({type:Number,cast:Y.toPt,json:{write:!0}})],z.prototype,"maxPathLength",void 0);O.__decorate([R.property({type:Number,
cast:Y.toPt,json:{write:!0}})],z.prototype,"trailWidth",void 0);O.__decorate([R.property({type:Number,json:{write:!0}})],z.prototype,"flowSpeed",void 0);O.__decorate([R.property({type:Number,json:{write:!0}})],z.prototype,"trailLength",void 0);O.__decorate([R.property({type:Number,cast:Y.toPt,json:{write:!1}})],z.prototype,"smoothing",void 0);O.__decorate([R.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},write:{writer:J.write}}})],z.prototype,"flowRepresentation",void 0);
O.__decorate([m.enumeration({flowRenderer:"flow"})],z.prototype,"type",void 0);O.__decorate([R.property({type:y,json:{write:!0}})],z.prototype,"authoringInfo",void 0);O.__decorate([R.property({type:t.LegendOptions,json:{write:!0}})],z.prototype,"legendOptions",void 0);O.__decorate([R.property({type:String,json:{write:!0}})],z.prototype,"trailCap",void 0);O.__decorate([R.property({type:String,json:{write:!0}})],z.prototype,"background",void 0);return z=b=O.__decorate([a.subclass("esri.renderers.FlowRenderer")],
z)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),function(X,O,I,J,z,Y,R,P,T,x,m){var a;I=a=function(n){function y(b){b=n.call(this,b)||this;b.colormapInfos=
null;b.type="raster-colormap";return b}X._inheritsLoose(y,n);y.createFromColormap=function(b,l){if(!b)return null;const v=5===b[0].length;b=[...b].sort(F=>F[0][0]-F[1][0]).map(F=>{var w;return x.fromJSON({value:F[0],color:v?F.slice(1,5):F.slice(1,4).concat([255]),label:l?null!=(w=l[F[0]])?w:"":F[0]})});return new a({colormapInfos:b})};y.createFromColorramp=function(b){b=m.convertColorRampToColormap(b,256);return a.createFromColormap(b)};var t=y.prototype;t.clone=function(){return new a({colormapInfos:this.colormapInfos.map(b=>
b.toJSON())})};t.extractColormap=function(){return this.colormapInfos.map(({value:b,color:l})=>[b,l.r,l.g,l.b,1<l.a?l.a:255*l.a&255]).sort((b,l)=>b[0]-l[0])};return y}(I.JSONSupport);O.__decorate([J.property({type:[x],json:{write:!0}})],I.prototype,"colormapInfos",void 0);O.__decorate([P.enumeration({rasterColormap:"raster-colormap"})],I.prototype,"type",void 0);return I=a=O.__decorate([T.subclass("esri.renderers.RasterColormapRenderer")],I)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(X,O,I,J,z,Y,R,P,T){J=function(x){function m(){var a=x.apply(this,arguments)||this;a.value=null;a.label=null;a.color=null;return a}X._inheritsLoose(m,x);return m}(J.JSONSupport);O.__decorate([z.property({type:Number,json:{write:!0}})],J.prototype,"value",void 0);O.__decorate([z.property({type:String,json:{write:!0}})],J.prototype,"label",void 0);O.__decorate([z.property({type:I,json:{type:[P.Integer],write:!0}})],J.prototype,"color",void 0);return J=O.__decorate([T.subclass("esri.renderers.support.ColormapInfo")],
J)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(X,O,I){function J(t,b){if(!t||!b||t.length!==b.length)return!1;for(let l=0;l<t.length;l++)if(t[l]>b[l]+2||t[l]<b[l]-2)return!1;return!0}function z(t,b){if(t){b=b?b:n;var l=null,v;"algorithmic"===t.type?b.some(F=>{if(J(t.fromColor.toRgb(),F.fromColor)&&J(t.toColor.toRgb(),F.toColor))return l=F.id,!0}):"multipart"===t.type&&b.some(F=>{if(t.colorRamps&&F.colorRamps&&t.colorRamps.length===
F.colorRamps.length&&(v=t.colorRamps,!F.colorRamps.some((w,B)=>{if(!J(v[B].fromColor.toRgb(),(new O(w.fromColor)).toRgb())||!J(v[B].toColor.toRgb(),(new O(w.toColor)).toRgb()))return!0}))){if(l)return!0;l=F.id}});return l}}function Y(t){return(t=z(t))?y[t]:null}function R(t){t=t||{};const b=t.numColors||256;return{...t,numColors:b,distanceOffset:t.distanceOffset||0,interpolateAlpha:!!t.interpolateAlpha,distanceInterval:t.distanceInterval||1/(b-1),isCustomInterval:null!=t.isCustomInterval?t.isCustomInterval:
null!==t.distanceInterval&&t.distanceInterval!==1/(b-1),weights:t.weights}}function P(t,b){var l,v;let {fromColor:F,toColor:w}=t;3===F.length&&(F=F.concat([255]));3===w.length&&(w=w.concat([255]));var B=t.algorithm||"esriCIELabAlgorithm";const {numColors:D,distanceOffset:K,isCustomInterval:f,interpolateAlpha:e}=R(b);if(1===D&&0===K)return[F];if(2===D&&0===K&&!f)return[F,w];var d={r:F[0],g:F[1],b:F[2]};t={r:w[0],g:w[1],b:w[2]};if("esriCIELabAlgorithm"===B){{B=I.toLAB(d);t=I.toLAB(t);const {numColors:E,
distanceOffset:c,distanceInterval:g,isCustomInterval:h}=R(b);let {l:r,a:A,b:Q}=B;B=(t.l-r)*g;d=(t.a-A)*g;b=(t.b-Q)*g;var k=[];if(c){var p=c/g;r+=p*B;A+=p*d;Q+=p*b}for(p=0;p<E-1;p++)k.push({l:r,a:A,b:Q}),r+=B,A+=d,Q+=b;k.push(h?{l:r,a:A,b:Q}:t);t=k}}else if("esriHSVAlgorithm"===B){{B=I.toHSV(d);t=I.toHSV(t);const {numColors:E,distanceOffset:c,distanceInterval:g,isCustomInterval:h}=R(b);k=0===B.s;p=0===t.s;d=B.h;b=t.h;k&&!p?d=b:p&&!k&&(t={...t,h:d},b=d);k=Math.abs(b-d);180>k?b=(b-d)*g:(k=360-k,b=d>
b?k*g:-k*g);k=(t.s-B.s)*g;p=(t.v-B.v)*g;let {s:r,v:A}=B;B=d;c&&(d=c/g,B=(B+d*b+360)%360,r+=d*k,A+=d*p);d=[];for(var u=0;u<E-1;u++)d.push({h:B,s:r,v:A}),B=(B+b+360)%360,r+=k,A+=p;d.push(h?{h:B,s:r,v:A}:t);t=d}}else{{d=I.toLCH(d);t=I.toLCH(t);const {numColors:E,distanceOffset:c,distanceInterval:g,isCustomInterval:h}=R(b);b=d.h;k=t.h;B=2*Math.PI;b<=k?(p=k-b,b=k-b-B,b=Math.abs(b)<Math.abs(p)?b:p):(p=k+B-b,b=k-b,b=Math.abs(b)<Math.abs(p)?b:p);b*=g;k=(t.l-d.l)*g;p=(t.c-d.c)*g;let {l:r,c:A,h:Q}=d;c&&(d=
c/g,r+=d*k,A+=d*p,Q=(Q+d*b+B)%B);d=[];for(u=0;u<E-1;u++)d.push({l:r,c:A,h:Q}),r+=k,A+=p,Q=(Q+b+B)%B;d.push(h?{l:r,c:A,h:Q}:t);t=d}}B=[];d=null!=(l=F[3])?l:255;l=((null!=(v=w[3])?v:255)-d)/(D-1);for(v=0;v<D;v++){const {r:E,g:c,b:g}=I.toRGB(t[v]);B.push([E,c,g,e?Math.round(d+l*v):255])}return B}function T(t,b){const {numColors:l,interpolateAlpha:v}=R(b);b=null==b?void 0:b.weights;({colorRamps:t}=t);if(b){const e=b.reduce((d,k)=>d+k);b=b.map(d=>d/e)}else{b=[];for(var F=0;F<t.length;F++)b[F]=1/t.length}F=
[];let w=0,B=0;const D=1/(l-1);let K=!1;for(let e=0;e<t.length;e++){var f=K?0:w*D-B;let d=e===t.length-1?l-1-w:(b[e]-f)/D;K=Math.ceil(d)===d;d=Math.ceil(d);0!==d&&(f/=b[e],f=P(t[e],{numColors:d,interpolateAlpha:v,distanceOffset:f,distanceInterval:D/b[e]}),w+=f.length,F.push(...f),B+=b[e])}b=[...t[t.length-1].toColor];3===b.length&&b.push(255);F.push(b);return F}function x(t,b=256,l=!1){t="toJSON"in t?t.toJSON():t;b={numColors:b,interpolateAlpha:l};return"multipart"===t.type?T(t,b):P(t,b)}function m(t){if(t){var b=
t.toJSON();return{Algorithm:(null==b?void 0:b.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:a(t.fromColor),ToColor:a(t.toColor)}}}function a(t){t=I.toHSV(t);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}const n=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,
251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,
146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,
102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,
0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,
0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,
252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",
type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,
204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},
{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,
0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,
153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,
255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,
147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],y={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",
brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",
elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",
pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",
purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",
spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};
X.PREDEFINED_COLOR_RAMP_NAME_MAP=y;X.PREDEFINED_JSON_COLOR_RAMPS=n;X.convertColorRampToColormap=function(t,b=256,l=!1){t=x(t,b,l);t.forEach((v,F)=>{v.unshift(F);l||v.pop()});return t};X.convertColorRampToColors=x;X.getColorRampId=z;X.getColorRampName=Y;X.getRFxArgColorRampValue=function(t){const b=Y(t);if(t){if("algorithmic"===t.type)return{...m(t),Name:b};if(t.colorRamps)return t=t.colorRamps.map(m),{type:"MultiPartColorRamp",NumColorRamps:t.length,ArrayOfColorRamp:t,Name:b}}};X.rgbaConvertTo32Bit=
function(t){t=t.reverse().map(b=>{b=b.toString(16);return 2>b.length?"0"+b:b});return 4294967295&Number.parseInt(t.join(""),16)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(X){function O(x,m){const a=[];let n,y;if(x[0].length!==m.length)throw"dimensions do not match";const t=x.length,b=x[0].length;let l=0;for(n=0;n<t;n++){for(y=l=0;y<b;y++)l+=x[n][y]*m[y];a.push(l)}return a}function I(x){x=
[x.r/255,x.g/255,x.b/255].map(m=>.04045>=m?m/12.92:((m+.055)/1.055)**2.4);x=O(P,x);return{x:100*x[0],y:100*x[1],z:100*x[2]}}function J(x){x=O(T,[x.x/100,x.y/100,x.z/100]).map(m=>Math.min(1,Math.max(.0031308>=m?12.92*m:1.055*m**(1/2.4)-.055,0)));return{r:Math.round(255*x[0]),g:Math.round(255*x[1]),b:Math.round(255*x[2])}}function z(x){x=[x.x/95.047,x.y/100,x.z/108.883].map(m=>m>(6/29)**3?m**(1/3):1/3*(29/6)**2*m+4/29);return{l:116*x[1]-16,a:500*(x[0]-x[1]),b:200*(x[1]-x[2])}}function Y(x){const m=
x.l;x=[(m+16)/116+x.a/500,(m+16)/116,(m+16)/116-x.b/200].map(a=>a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*x[0],y:100*x[1],z:108.883*x[2]}}function R(x){if("r"in x&&"g"in x&&"b"in x)return x;if("l"in x&&"c"in x&&"h"in x){var m=x.c;var a=x.h;m={l:x.l,a:m*Math.cos(a),b:m*Math.sin(a)};return J(Y(m))}if("l"in x&&"a"in x&&"b"in x)return J(Y(x));if("x"in x&&"y"in x&&"z"in x)return J(x);if("h"in x&&"s"in x&&"v"in x){{a=(x.h+360)%360/60;m=x.v/100*255;x=x.s/100*m;const n=x*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a=
{r:x,g:n,b:0};break;case 1:a={r:n,g:x,b:0};break;case 2:a={r:0,g:x,b:n};break;case 3:a={r:0,g:n,b:x};break;case 4:a={r:n,g:0,b:x};break;case 5:case 6:a={r:x,g:0,b:n};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+m-x);a.g=Math.round(a.g+m-x);a.b=Math.round(a.b+m-x);m=a}return m}return x}const P=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],T=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];X.darken=function(x,m){x=z(I(x));x.l*=1-m;return J(Y(x))};X.toHSV=function(x){if("h"in
x&&"s"in x&&"v"in x)return x;var m=R(x);{x=m.r;const a=m.g,n=m.b;m=Math.max(x,a,n);const y=m-Math.min(x,a,n);x=0===y?0:m===x?(a-n)/y%6:m===a?(n-x)/y+2:(x-a)/y+4;0>x&&(x+=6);x={h:60*x,s:100*(0===y?0:y/m),v:100/255*m}}return x};X.toLAB=function(x){return"l"in x&&"a"in x&&"b"in x?x:z(I(R(x)))};X.toLCH=function(x){if(!("l"in x&&"c"in x&&"h"in x)){{var m=z(I(R(x)));x=m.l;var a=m.a;const n=m.b;m=Math.sqrt(a*a+n*n);a=Math.atan2(n,a);a=0<a?a:a+2*Math.PI;x={l:x,c:m,h:a}}}return x};X.toRGB=R;X.toXYZ=function(x){return"x"in
x&&"y"in x&&"z"in x?x:I(R(x))};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(X,O,I,J,z,Y,R,P,T,x){var m;I=m=function(a){function n(t){t=a.call(this,t)||this;t.altitude=45;t.azimuth=315;t.colorRamp=null;t.hillshadeType="multi-directional";t.pixelSizePower=.664;t.pixelSizeFactor=.024;t.scalingType="none";t.type="raster-shaded-relief";t.zFactor=1;return t}X._inheritsLoose(n,a);var y=n.prototype;y.readColorRamp=function(t){return x.fromJSON(t)};y.clone=function(){return new m({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:J.clone(this.colorRamp)})};return n}(I.JSONSupport);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"altitude",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"azimuth",void 0);O.__decorate([z.property({types:x.types,json:{write:!0}})],I.prototype,"colorRamp",void 0);O.__decorate([P.reader("colorRamp")],I.prototype,"readColorRamp",null);O.__decorate([z.property({type:["traditional",
"multi-directional"],json:{write:!0}})],I.prototype,"hillshadeType",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"pixelSizePower",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"pixelSizeFactor",void 0);O.__decorate([z.property({type:["none","adjusted"],json:{write:!0}})],I.prototype,"scalingType",void 0);O.__decorate([R.enumeration({rasterShadedRelief:"raster-shaded-relief"})],I.prototype,"type",void 0);O.__decorate([z.property({type:Number,
json:{write:!0}})],I.prototype,"zFactor",void 0);return I=m=O.__decorate([T.subclass("esri.renderers.RasterShadedReliefRenderer")],I)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a){var n;I=n=function(y){function t(l){l=y.call(this,l)||this;l.colorRamp=null;l.computeGamma=!1;l.dynamicRangeAdjustment=!1;l.gamma=[];l.maxPercent=null;l.minPercent=null;l.numberOfStandardDeviations=null;l.outputMax=null;l.outputMin=null;l.sigmoidStrengthLevel=null;l.statistics=[];l.histograms=null;l.useGamma=!1;l.stretchType="none";l.type="raster-stretch";return l}X._inheritsLoose(t,y);var b=t.prototype;b.readColorRamp=function(l){if(l)return a.fromJSON(l)};b.writeStatistics=
function(l,v,F){var w;null!=(w=l)&&w.length&&(Array.isArray(l[0])||(l=l.map(B=>[B.min,B.max,B.avg,B.stddev])),v[F]=l)};b.readStretchType=function(l,v){l=v.stretchType;"number"===typeof l&&(l=m.stretchTypeFunctionEnum[l]);return m.stretchTypeJSONDict.read(l)};b.clone=function(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:J.clone(this.statistics),gamma:J.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:J.clone(this.colorRamp),histograms:J.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return t}(I.JSONSupport);O.__decorate([z.property({types:a.types,json:{write:!0}})],I.prototype,"colorRamp",void 0);O.__decorate([P.reader("colorRamp")],I.prototype,"readColorRamp",null);O.__decorate([z.property({type:Boolean,json:{write:!0}})],I.prototype,"computeGamma",
void 0);O.__decorate([z.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],I.prototype,"dynamicRangeAdjustment",void 0);O.__decorate([z.property({type:[Number],json:{write:!0}})],I.prototype,"gamma",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"maxPercent",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"minPercent",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"numberOfStandardDeviations",
void 0);O.__decorate([z.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],I.prototype,"outputMax",void 0);O.__decorate([z.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],I.prototype,"outputMin",void 0);O.__decorate([z.property({type:Number,json:{write:!0}})],I.prototype,"sigmoidStrengthLevel",void 0);O.__decorate([z.property({json:{type:[[Number]],write:!0}})],I.prototype,"statistics",void 0);O.__decorate([z.property()],I.prototype,"histograms",void 0);
O.__decorate([x.writer("statistics")],I.prototype,"writeStatistics",null);O.__decorate([z.property({type:Boolean,json:{write:!0}})],I.prototype,"useGamma",void 0);O.__decorate([z.property({type:m.stretchTypeJSONDict.apiValues,json:{type:m.stretchTypeJSONDict.jsonValues,write:m.stretchTypeJSONDict.write}})],I.prototype,"stretchType",void 0);O.__decorate([P.reader("stretchType",["stretchType"])],I.prototype,"readStretchType",null);O.__decorate([R.enumeration({rasterStretch:"raster-stretch"})],I.prototype,
"type",void 0);return I=n=O.__decorate([T.subclass("esri.renderers.RasterStretchRenderer")],I)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(X,O){O=new O.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});X.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
X.stretchTypeJSONDict=O;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D,K,f,e,d,k,p){var u;const E=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);J=new R.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
R=new R.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});P=u=function(c){function g(r){r=c.call(this,r)||this;r.attributeField="Magnitude";r.flowRepresentation="flow-from";r.rotationType="arithmetic";r.style="single-arrow";r.symbolTileSize=50;r.type="vector-field";return r}X._inheritsLoose(g,c);var h=g.prototype;h.readInputUnit=function(r,A){return E.has(r)?l.unitKebabDict.fromJSON(r):null};h.readOutputUnit=function(r,A){return E.has(r)?l.unitKebabDict.fromJSON(r):null};h.clone=function(){return new u({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:T.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};h.getGraphicsFromPixelData=function(){var r=X._asyncToGenerator(function*(A,Q=!1,C=[]){var G;const S=[];var N=l.getUnitConversionFactor(this.inputUnit,this.outputUnit),q=(null==(G=this.rotationVariables[0])?void 0:G.rotationType)||this.rotationType;Q=Q?l.convertVectorFieldData(A.pixelBlock,
"vector-uv",q,N):l.convertVectorFieldUnit(A.pixelBlock,"vector-magdir",N);if(x.isNone(Q))return S;A=A.extent;G=Q.mask&&0<Q.mask.length;N=0;q=(A.xmax-A.xmin)/Q.width;const H=(A.ymax-A.ymin)/Q.height;for(let W=0;W<Q.height;W++)for(let aa=0;aa<Q.width;aa++,N++){let V=new p({x:A.xmin+aa*q+q/2,y:A.ymax-W*H-H/2,spatialReference:A.spatialReference});V=(yield b.normalizeCentralMeridian(V))[0];var M=C.some(Z=>Z.intersects(V));G&&!Q.mask[N]||M||(M=new z({geometry:{type:"point",x:V.x,y:V.y,spatialReference:A.spatialReference},
attributes:{Magnitude:Q.pixels[0][N],Direction:Q.pixels[1][N]}}),M.symbol=this._getVisualVariablesAppliedSymbol(M),S.push(M))}return S});return function(A){return r.apply(this,arguments)}}();h.getSymbol=function(r,A){};h.getSymbolAsync=function(){var r=X._asyncToGenerator(function*(A,Q){});return function(A,Q){return r.apply(this,arguments)}}();h.getSymbols=function(){return[]};h.getClassBreakInfos=function(){var r;return null==(r=this.styleRenderer)?void 0:r.classBreakInfos};h.getDefaultSymbol=function(){var r;
return null==(r=this.styleRenderer)?void 0:r.defaultSymbol};h._getDefaultSymbol=function(r){return new e({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new f({width:0}),size:20,color:r||new I([0,92,230])})};h._getVisualVariablesAppliedSymbol=function(r){if(r){var A=this.styleRenderer&&this.styleRenderer.getSymbol(r);A=A.clone();var Q=this.sizeVariables,C=this.rotationVariables;Q&&Q.length&&this.sizeVariables.forEach(G=>d.applySizesToSymbol(A,K.getAllSizes([G],r)));C&&C.length&&(r.attributes.Direction+=
"flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(G=>d.applyRotationToSymbol(A,K.getRotationAngle(G,r),G.axis)));return A}};h._createStyleRenderer=function(r){let A={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(r){case "single-arrow":A=this._createSingleArrowRenderer();break;case "beaufort-kn":A=this._createBeaufortKnotsRenderer();break;case "beaufort-m":A=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":A=this._createBeaufortFeetRenderer();break;case "beaufort-mi":A=this._createBeaufortMilesRenderer();break;case "beaufort-km":A=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":A=this._createCurrentMeterRenderer();break;case "ocean-current-kn":A=this._createCurrentKnotsRenderer();break;case "simple-scalar":A=this._createSimpleScalarRenderer();break;case "wind-barb":A=this._createWindBarbsRenderer();break;case "classified-arrow":A=this._createClassifiedArrowRenderer()}return new v(A)};
h._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};h._createBeaufortKnotsRenderer=function(){const r=this._getDefaultSymbol(new I([214,47,39])),A=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:r,classBreakInfos:A}};h._createBeaufortMeterRenderer=function(){const r=this._getDefaultSymbol(new I([214,
47,39])),A=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:A}};h._createBeaufortFeetRenderer=function(){const r=this._getDefaultSymbol(new I([214,47,39]));var A=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A=A.map(Q=>3.28084*Q);A=this._getClassBreaks(A,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:A}};h._createBeaufortMilesRenderer=function(){const r=this._getDefaultSymbol(new I([214,47,39]));var A=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A=A.map(Q=>2.23694*Q);A=this._getClassBreaks(A,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:A}};h._createBeaufortKilometersRenderer=function(){const r=this._getDefaultSymbol(new I([214,47,39]));var A=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A=A.map(Q=>3.6*Q);A=this._getClassBreaks(A,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,
classBreakInfos:A}};h._createCurrentMeterRenderer=function(){const r=this._getDefaultSymbol(new I([177,177,177])),A=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:r,classBreakInfos:A}};h._createCurrentKnotsRenderer=function(){const r=this._getDefaultSymbol(new I([177,177,177])),A=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:r,classBreakInfos:A}};h._createClassifiedArrowRenderer=function(){var r;const A=this._getDefaultSymbol(new I([56,168,0]));var Q=[0,1E-6,3.5,7,10.5,14];if(null!=(r=this.sizeVariables)&&r.length){const C=this.sizeVariables[0].minDataValue;r=this.sizeVariables[0].maxDataValue;if(C&&r){const G=(r-C)/5;Q=Array.from(Array(6).keys()).map(S=>C+G*S)}}Q=this._getClassBreaks(Q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:A,classBreakInfos:Q}};h._createSimpleScalarRenderer=
function(){return{defaultSymbol:k.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};h._createWindBarbsRenderer=function(){const r=Array.from(Array(31).keys()).map(G=>5*G),A=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],Q=k.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),C=r.map((G,S)=>{if(S!==r.length-1)if(0===S)var N={minValue:G,maxValue:r[S+1],symbol:Q};else N=k.fromJSON({type:"esriPMS",imageData:A[S].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),N={minValue:G,maxValue:r[S+1],symbol:N};return new w(N)});return{defaultSymbol:Q,classBreakInfos:C}};h._getClassBreaks=function(r,A){return A.map((Q,C)=>new w({minValue:r[C],maxValue:r[C+1],symbol:this._getDefaultSymbol(new I(Q))}))};X._createClass(g,[{key:"styleRenderer",
get:function(){const r=this.attributeField,A=this._createStyleRenderer(this.style);A.field=r;return A}},{key:"sizeVariables",get:function(){const r=[];if(this.visualVariables)for(var A of this.visualVariables)"size"===A.type&&r.push(A);0===r.length&&(A=new D({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(A):this._set("visualVariables",[A]),r.push(A));return r}},{key:"rotationVariables",get:function(){const r=[];if(this.visualVariables)for(var A of this.visualVariables)"rotation"===
A.type&&r.push(A);0===r.length&&(A=new B({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(A):this._set("visualVariables",[A]),r.push(A));return r}}]);return g}(F.VisualVariablesMixin(P.JSONSupport));O.__decorate([m.property({type:String,json:{write:!0}})],P.prototype,"attributeField",void 0);O.__decorate([m.property({type:R.apiValues,json:{type:R.jsonValues,read:{reader:R.read},write:{writer:R.write}}})],P.prototype,"flowRepresentation",void 0);O.__decorate([m.property({type:["geographic",
"arithmetic"],json:{write:!0}})],P.prototype,"rotationType",void 0);O.__decorate([m.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},write:{writer:J.write}}})],P.prototype,"style",void 0);O.__decorate([m.property({json:{write:!0}})],P.prototype,"symbolTileSize",void 0);O.__decorate([m.property({type:l.unitKebabDict.apiValues,json:{type:l.unitKebabDict.jsonValues,write:{writer:l.unitKebabDict.write}}})],P.prototype,"inputUnit",void 0);O.__decorate([y.reader("inputUnit")],P.prototype,
"readInputUnit",null);O.__decorate([m.property({type:l.unitKebabDict.apiValues,json:{type:l.unitKebabDict.jsonValues,read:{reader:l.unitKebabDict.read},write:{writer:l.unitKebabDict.write}}})],P.prototype,"outputUnit",void 0);O.__decorate([y.reader("outputUnit")],P.prototype,"readOutputUnit",null);O.__decorate([n.enumeration({vectorField:"vector-field"})],P.prototype,"type",void 0);O.__decorate([m.property({type:v})],P.prototype,"styleRenderer",null);O.__decorate([m.property({type:D})],P.prototype,
"sizeVariables",null);O.__decorate([m.property({type:B})],P.prototype,"rotationVariables",null);return P=u=O.__decorate([t.subclass("esri.renderers.VectorFieldRenderer")],P)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(X,O,I,J,z){function Y(f,e){return b.get(f)/b.get(e)||1}function R(f,e="geographic"){const [d,k]=f;f=Math.sqrt(d*d+k*k);let p=Math.atan2(k,d)*l;p=(360+p)%
360;"geographic"===e&&(p=(450-p)%360);return[f,p]}function P(f,e="geographic"){let d=f[1];"geographic"===e&&(d=(450-d)%360);d%=360;f=f[0];return[f*Math.cos(d/l),f*Math.sin(d/l)]}function T(f,e,d="geographic",k=1){if(!z.isValidPixelBlock(f))return f;const {pixels:p,width:u,height:E}=f;var c=u*E;const g=p[0],h=p[1],r=f.pixelType.startsWith("f")?f.pixelType:"f32",A=J.createEmptyBand(r,c);c=J.createEmptyBand(r,c);let Q=0;for(let C=0;C<E;C++)for(let G=0;G<u;G++)"vector-uv"===e?([A[Q],c[Q]]=R([g[Q],h[Q]],
d),A[Q]*=k):([A[Q],c[Q]]=P([g[Q],h[Q]],d),A[Q]*=k,c[Q]*=k),Q++;f=new J({pixelType:r,width:f.width,height:f.height,mask:f.mask,validPixelCount:f.validPixelCount,maskIsAlpha:f.maskIsAlpha,pixels:[A,c]});f.updateStatistics();return f}function x(f=0,e=Math.PI,d=!0){d&&(e=(2*Math.PI-e)%(2*Math.PI));var k=d?-1:1;d=5*k;const p=20*k,u=25*k;k*=2;let [E,c]=[5,0-p],[g,h]=[E+2,c],[r,A]=[g-0,h+k],[Q,C]=[-5,0-u],[G,S]=[Q+0,C-k];f=Math.ceil(f/5);let N=Math.floor(f/10);f-=8*N;const q=[],H=[];for(let ba=0;ba<f/2;ba++,
N--){0>=N&&1===f%2&&ba===(f-1)/2&&(Q=0,G=Q+0,C=(C+c)/2,S=C-k);const [da,ea]=m(Q,C,e,45);if(0<N){const [fa,ja]=m(g,C,e,45),[ha,la]=m(E,c,e,45);q.push(fa);q.push(ja);q.push(da);q.push(ea);q.push(ha);q.push(la)}else{const [fa,ja]=m(g,h,e,45),[ha,la]=m(r,A,e,45),[ia,ka]=m(G,S,e,45);H.push(da);H.push(ea);H.push(ia);H.push(ka);H.push(ha);H.push(la);H.push(fa);H.push(ja)}C+=d;c+=d;h+=d;A+=d;S+=d}const [M,W]=m(5,0+p,e,45),[aa,V]=m(7,0+p,e,45),[Z,L]=m(5,0-u,e,45),[U,ca]=m(7,0-u,e,45);return{pennants:q,barbs:H,
shaft:[M,W,aa,V,Z,L,U,ca]}}function m(f,e,d,k=1){return[Math.sqrt(f*f+e*e)/k,(2*Math.PI+(2*Math.PI+Math.atan2(e,f))%(2*Math.PI)-d)%(2*Math.PI)]}function a(f,e,d,k){d=Y(k||"knots",d);for(k=1;k<e.length;k++)if(k===e.length-1){if(f<e[k]*d)break}else if(f<=e[k]*d)break;return Math.min(k-1,e.length-2)}function n(f,e,d,k,p){let u=0;switch(e){case "beaufort_kn":u=a(f,w,"knots",d);break;case "beaufort_km":u=a(f,w,"kilometer-per-hour",d);break;case "beaufort_ft":u=a(f,w,"feet-per-second",d);break;case "beaufort_m":u=
a(f,w,"meter-per-second",d);break;case "classified_arrow":u=a(f,p,k,d);break;case "ocean_current_m":u=a(f,B,"meter-per-second",d);break;case "ocean_current_kn":u=a(f,D,"knots",d)}return u}function y(f,e){const {style:d,inputUnit:k,outputUnit:p,breakValues:u}=e;e=v.fromJSON(k);const E=v.fromJSON(p);let c=0,g=0;const {width:h,height:r,mask:A}=f,Q=f.pixels[0];f=f.pixels[1];var C=A?A.filter(q=>0<q).length:h*r;const G=new Float32Array(42*C);C=new Uint32Array(15*C);for(let q=0;q<r;q++)for(let H=0;H<h;H++){var S=
q*h+H;if(!A||A[q*h+H]){var N;const M=null!=(N=(f[S]+360)%360/180*Math.PI)?N:2*Math.PI*Math.random(),W=n(Q[S],d,e,E,u);for(let aa=0;aa<F.length;aa+=2)G[c++]=(H+.5)/h,G[c++]=(q+.5)/r,G[c++]=F[aa],G[c++]=F[aa+1]+M,G[c++]=W,G[c++]=Q[S];S=7*(c/42-1);C[g++]=S;C[g++]=S+1;C[g++]=S+2;C[g++]=S+0;C[g++]=S+4;C[g++]=S+3;C[g++]=S+0;C[g++]=S+2;C[g++]=S+3;C[g++]=S+2;C[g++]=S+5;C[g++]=S+3;C[g++]=S+5;C[g++]=S+6;C[g++]=S+3}}return{vertexData:G,indexData:C}}function t(f,e){let d=0,k=0;const {width:p,height:u,mask:E}=
f;f=f.pixels[0];const c=[],g=[];var h=v.fromJSON(e.inputUnit);h=Y(h,"knots");e="wind_speed"===e.style?5:Number.MAX_VALUE;for(let A=0;A<u;A++)for(let Q=0;Q<p;Q++){var r=f[A*p+Q]*h;if((!E||E[A*p+Q])&&r<e){for(let C=0;4>C;C++)c[d++]=(Q+.5)/p,c[d++]=(A+.5)/u,c[d++]=2>C?-.5:.5,c[d++]=0===C%2?-.5:.5,c[d++]=0,c[d++]=r;r=4*(d/24-1);g[k++]=r;g[k++]=r+1;g[k++]=r+2;g[k++]=r+1;g[k++]=r+2;g[k++]=r+3}}return{vertexData:new Float32Array(c),indexData:new Uint32Array(g)}}const b=new Map;b.set("meter-per-second",1);
b.set("kilometer-per-hour",.277778);b.set("knots",.514444);b.set("feet-per-second",.3048);b.set("mile-per-hour",.44704);const l=180/Math.PI,v=new O.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),F=function(f=0,e=0,d=Math.PI,k=!0){k&&(d=(2*Math.PI-d)%(2*Math.PI));k=k?-1:1;const p=-7*k,u=-2*k,E=-16*k,[c,g]=m(0,e+13*k,d,21.75),[h,r]=m(f-5.5,e+p,d,21.75),[A,Q]=m(f+5.5,e+
p,d,21.75),[C,G]=m(f-1.5,e+u,d,21.75),[S,N]=m(f+1.5,e+u,d,21.75),[q,H]=m(f-1.5,e+E,d,21.75),[M,W]=m(f+1.5,e+E,d,21.75);return[c,g,h,r,C,G,S,N,A,Q,q,H,M,W]}(0,0,0),w=[0,1,3,6,10,16,21,27,33,40,47,55,63],B=[0,.5,1,1.5,2],D=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],K=[];X.convertToLocalDirections=function(f,e,d,k="geographic"){if(!z.isValidPixelBlock(f)||I.isNone(d))return f;f="vector-magdir"===e?f.clone():I.unwrap(T(f,e));const p=f.pixels[1];for(let u=0;u<p.length;u++)p[u]="geographic"===k?(p[u]+d[u]+270)%360:
(p[u]+360-d[u])%360;return"vector-magdir"===e?f:T(f,"vector-magdir")};X.convertVectorFieldData=T;X.convertVectorFieldUnit=function(f,e,d=1){if(1===d||!z.isValidPixelBlock(f))return f;f=f.clone();const {pixels:k,width:p,height:u}=f,E=k[0],c=k[1];let g=0;for(let h=0;h<u;h++)for(let r=0;r<p;r++)"vector-uv"===e?(E[g]*=d,c[g]*=d):E[g]*=d,g++;f.updateStatistics();return f};X.createVFMesh=function(f,e){if("simple_scalar"===e.style)var d=t(f,e);else if("wind_speed"===e.style){{if(0===K.length)for(var k=0;30>
k;k++)K.push(x(5*k,0));e=v.fromJSON(e.inputUnit);e=Y(e,"knots");const {width:c,height:g,mask:h}=f;k=f.pixels[0];f=f.pixels[1];const r=[],A=[];let Q=0,C=0;for(let G=0;G<g;G++)for(let S=0;S<c;S++){var p=G*c+S,u=k[p]*e;if((!h||h[G*c+S])&&5<=u){const N=null!=(d=(f[p]+360)%360/180*Math.PI)?d:2*Math.PI*Math.random(),{pennants:q,barbs:H,shaft:M}=K[Math.min(Math.floor(u/5),29)];if(0===q.length+H.length)continue;p=r.length/6;const W=(S+.5)/c,aa=(G+.5)/g;for(var E=0;E<q.length;E+=2)r[Q++]=W,r[Q++]=aa,r[Q++]=
q[E],r[Q++]=q[E+1]+N,r[Q++]=0,r[Q++]=u;for(E=0;E<H.length;E+=2)r[Q++]=W,r[Q++]=aa,r[Q++]=H[E],r[Q++]=H[E+1]+N,r[Q++]=0,r[Q++]=u;for(E=0;E<M.length;E+=2)r[Q++]=W,r[Q++]=aa,r[Q++]=M[E],r[Q++]=M[E+1]+N,r[Q++]=0,r[Q++]=u;for(u=0;u<q.length/6;u++)A[C++]=p,A[C++]=p+1,A[C++]=p+2,p+=3;for(u=0;u<H.length/8;u++)A[C++]=p,A[C++]=p+1,A[C++]=p+2,A[C++]=p+1,A[C++]=p+2,A[C++]=p+3,p+=4;A[C++]=p+0;A[C++]=p+1;A[C++]=p+2;A[C++]=p+1;A[C++]=p+3;A[C++]=p+2;p+=4}}d={vertexData:new Float32Array(r),indexData:new Uint32Array(A)}}}else d=
y(f,e);return d};X.createVFMeshScalar=t;X.getUnitConversionFactor=Y;X.sampleVectorField=function(f,e,d,k=[0,0],p=.5){const {width:u,height:E,mask:c}=f,[g,h]=f.pixels,[r,A]=k;f=Math.round((u-r)/d);k=Math.round((E-A)/d);var Q=f*k;const C=new Float32Array(Q),G=new Float32Array(Q);Q=new Uint8Array(Q);e="vector-uv"===e;for(let N=0;N<k;N++)for(let q=0;q<f;q++){let H=0;const M=N*f+q,W=Math.max(0,N*d+A),aa=Math.max(0,q*d+r),V=Math.min(E,W+d),Z=Math.min(u,aa+d);for(let L=W;L<V;L++)for(let U=aa;U<Z;U++){var S=
L*u+U;if(!c||c[S]){H++;S=e?[g[S],h[S]]:[g[S],(360+h[S])%360];const [ca,ba]=e?S:P(S);C[M]+=ca;G[M]+=ba}}if(H>=(V-W)*(Z-aa)*(1-p)){Q[M]=1;const [L,U]=R([C[M]/H,G[M]/H]);C[M]=L;G[M]=U}else Q[M]=0,C[M]=0,G[M]=0}d=new J({width:f,height:k,pixels:[C,G],mask:Q});d.updateStatistics();return d};X.snapImageToSymbolTile=function(f,e,d,k,p){if(I.isNone(p)||!p.spatialReference.equals(f.spatialReference))return{extent:f,width:Math.round(e/k),height:Math.round(d/k),resolution:f.width/e};const u=p.xmin;p=p.ymax;e=
(f.xmax-f.xmin)/e*k;d=(f.ymax-f.ymin)/d*k;f.xmin=u+Math.floor((f.xmin-u)/e)*e;f.xmax=u+Math.ceil((f.xmax-u)/e)*e;f.ymin=p+Math.floor((f.ymin-p)/d)*d;f.ymax=p+Math.ceil((f.ymax-p)/d)*d;return{extent:f,width:Math.round(f.width/e),height:Math.round(f.height/d),resolution:(e+d)/2}};X.unitKebabDict=v;X.uvComponentToVector=R;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m){var a;const n=R.getLogger("esri.layers.support.PixelBlock");I=a=function(y){function t(l){l=y.call(this,l)||this;l.width=null;l.height=null;l.pixelType="f32";l.validPixelCount=null;l.mask=null;l.maskIsAlpha=!1;l.pixels=null;l.statistics=null;return l}X._inheritsLoose(t,y);t.createEmptyBand=function(l,v){return new (a.getPixelArrayConstructor(l))(v)};t.getPixelArrayConstructor=function(l){let v;switch(l){case "u1":case "u2":case "u4":case "u8":v=Uint8Array;break;case "u16":v=
Uint16Array;break;case "u32":v=Uint32Array;break;case "s8":v=Int8Array;break;case "s16":v=Int16Array;break;case "s32":v=Int32Array;break;case "f32":v=Float32Array;break;case "f64":v=Float64Array;break;case "c64":case "c128":case "unknown":v=Float32Array}return v};var b=t.prototype;b.castPixelType=function(l){if(!l)return"f32";l=l.toLowerCase();["u1","u2","u4"].includes(l)?l="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(l)||(l="f32");return l};b.getPlaneCount=function(){return this.pixels&&
this.pixels.length};b.addData=function(l){if(!l.pixels||l.pixels.length!==this.width*this.height)throw new J("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(l.pixels);this.statistics.push(l.statistics||{minValue:null,maxValue:null})};b.getAsRGBA=function(){const l=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(l);
break;default:this._fillFrom8Bit(l)}return new Uint8ClampedArray(l)};b.getAsRGBAFloat=function(){const l=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(l);return l};b.updateStatistics=function(){this.statistics=this.pixels.map(F=>this._calculateBandStatistics(F,this.mask));const l=this.mask;let v=0;if(l)for(let F=0;F<l.length;F++)l[F]&&v++;else v=this.width*this.height;this.validPixelCount=v};b.clamp=function(l){if(l&&"f64"!==l&&"f32"!==l){switch(l){case "u8":var v=[0,255];break;case "u16":v=
[0,65535];break;case "u32":v=[0,4294967295];break;case "s8":v=[-128,127];break;case "s16":v=[-32768,32767];break;case "s32":v=[-2147483648,2147483647];break;default:v=[-3.4*1E39,3.4*1E39]}var [F,w]=v;v=this.pixels;var B=this.width*this.height,D=v.length,K=[];for(let k=0;k<D;k++){var f=a.createEmptyBand(l,B);var e=v[k];for(let p=0;p<B;p++){var d=e[p];f[p]=d>w?w:d<F?F:d}K.push(f)}this.pixels=K;this.pixelType=l}};b.extractBands=function(l){if(P.isNone(l)||0===l.length||null==this.pixels||0===this.pixels.length)return this;
var v=this.pixels.length;const F=l.some(w=>w>=this.pixels.length);v=v===l.length&&!l.some((w,B)=>w!==B);return F||v?this:new a({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:l.map(w=>this.pixels[w]),statistics:this.statistics&&l.map(w=>this.statistics[w])})};b.clone=function(){const l=new a({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(l.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let v;const F=a.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){l.pixels=[];const w=this.pixels[0].slice;for(v=0;v<this.pixels.length;v++)l.pixels[v]=w?this.pixels[v].slice(0,this.pixels[v].length):new F(this.pixels[v])}if(this.statistics)for(l.statistics=[],v=0;v<this.statistics.length;v++)l.statistics[v]=Y.clone(this.statistics[v]);return l};b._fillFrom8Bit=function(l){const {mask:v,
maskIsAlpha:F,pixels:w}=this;if(l&&w&&w.length){var B,D;var K=B=D=w[0];3<=w.length?(B=w[1],D=w[2]):2===w.length&&(B=w[1]);var f=new Uint32Array(l),e=this.width*this.height;if(K.length!==e)n.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(v&&v.length===e)if(F)for(l=0;l<e;l++)v[l]&&(f[l]=v[l]<<24|D[l]<<16|B[l]<<8|K[l]);else for(l=0;l<e;l++)v[l]&&(f[l]=-16777216|D[l]<<16|B[l]<<8|K[l]);else for(l=0;l<e;l++)f[l]=-16777216|D[l]<<16|B[l]<<8|K[l]}else n.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};b._fillFromNon8Bit=function(l){const {pixels:v,mask:F,statistics:w}=this;if(l&&v&&v.length){var B=this.pixelType,D=1,K=0;D=1;w&&0<w.length?(K=w.map(p=>p.minValue).reduce((p,u)=>Math.min(p,u)),D=w.map(p=>p.maxValue-p.minValue).reduce((p,u)=>Math.max(p,u)),D=255/D):(D=255,"s8"===B?(K=-128,D=127):"u16"===B?D=65535:"s16"===B?(K=-32768,D=32767):"u32"===B?D=4294967295:"s32"===B?(K=-2147483648,D=2147483647):"f32"===B?(K=-3.4*1E39,D=3.4*1E39):
"f64"===B&&(K=-Number.MAX_VALUE,D=Number.MAX_VALUE),D=255/(D-K));l=new Uint32Array(l);B=this.width*this.height;var f,e,d;var k=f=e=v[0];if(k.length!==B)return n.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=v.length)if(f=v[1],3<=v.length&&(e=v[2]),F&&F.length===B)for(d=0;d<B;d++)F[d]&&(l[d]=-16777216|(e[d]-K)*D<<16|(f[d]-K)*D<<8|(k[d]-K)*D);else for(d=0;d<B;d++)l[d]=-16777216|(e[d]-K)*D<<16|(f[d]-K)*D<<8|(k[d]-K)*D;else if(F&&F.length===B)for(d=0;d<B;d++)f=(k[d]-
K)*D,F[d]&&(l[d]=-16777216|f<<16|f<<8|f);else for(d=0;d<B;d++)f=(k[d]-K)*D,l[d]=-16777216|f<<16|f<<8|f}else n.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};b._fillFrom32Bit=function(l){const {pixels:v,mask:F}=this;if(!l||!v||!v.length)return n.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let w,B,D,K;w=B=D=v[0];3<=v.length?(B=v[1],D=v[2]):2===v.length&&(B=v[1]);const f=this.width*this.height;if(w.length!==f)return n.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let e=0;if(F&&F.length===f)for(K=0;K<f;K++)l[e++]=w[K],l[e++]=B[K],l[e++]=D[K],l[e++]=F[K]&1;else for(K=0;K<f;K++)l[e++]=w[K],l[e++]=B[K],l[e++]=D[K],l[e++]=1};b._calculateBandStatistics=function(l,v){let F=Infinity,w=-Infinity;const B=l.length;let D,K=0;if(v)for(D=0;D<B;D++)v[D]&&(K=l[D],F=K<F?K:F,w=K>w?K:w);else for(D=0;D<B;D++)K=l[D],F=K<F?K:F,w=K>w?K:w;return{minValue:F,maxValue:w}};return t}(z.JSONSupport);O.__decorate([T.property({json:{write:!0}})],
I.prototype,"width",void 0);O.__decorate([T.property({json:{write:!0}})],I.prototype,"height",void 0);O.__decorate([T.property({json:{write:!0}})],I.prototype,"pixelType",void 0);O.__decorate([x.cast("pixelType")],I.prototype,"castPixelType",null);O.__decorate([T.property({json:{write:!0}})],I.prototype,"validPixelCount",void 0);O.__decorate([T.property({json:{write:!0}})],I.prototype,"mask",void 0);O.__decorate([T.property({json:{write:!0}})],I.prototype,"maskIsAlpha",void 0);O.__decorate([T.property({json:{write:!0}})],
I.prototype,"pixels",void 0);O.__decorate([T.property({json:{write:!0}})],I.prototype,"statistics",void 0);return I=a=O.__decorate([m.subclass("esri.layers.support.PixelBlock")],I)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(X,O,I){function J(b){return O.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function z(b,l,v,F,w,B,D,K){return{xmin:w<=v*b?0:w<v*b+b?w-v*b:b,ymin:B<=
F*l?0:B<F*l+l?B-F*l:l,xmax:w+D<=v*b?0:w+D<v*b+b?w+D-v*b:b,ymax:B+K<=F*l?0:B+K<F*l+l?B+K-F*l:l}}function Y(b,l,v,F,w,B){const {width:D,height:K}=v.block,{x:f,y:e}=v.offset,{width:d,height:k}=v.mosaic;v=z(D,K,F,w,f,e,d,k);let p=0;var u=0;if(B){var E=B.hasGCSSShiftTransform?360:B.halfWorldWidth,c=D*B.resolutionX,g=B.startX+F*c;c=g+c;g<E&&c>E?u=B.rightPadding:g>=E&&(p=B.leftMargin-B.rightPadding,u=0)}v.xmax-=u;if("number"===typeof l)for(B=v.ymin;B<v.ymax;B++)for(u=(w*K+B-e)*d+(F*D-f)+p,E=v.xmin;E<v.xmax;E++)b[u+
E]=l;else for(B=v.ymin;B<v.ymax;B++)for(u=(w*K+B-e)*d+(F*D-f)+p,E=B*D,g=v.xmin;g<v.xmax;g++)b[u+g]=l[E+g]}function R(b,l,v={}){const {clipOffset:F,clipSize:w,alignmentInfo:B,blockWidths:D}=v;if(D)return P(b,l,{blockWidths:D});var K=b.find(r=>J(r));if(O.isNone(K))return null;v=w?w.width:l.width;const f=w?w.height:l.height;var e=K.width,d=K.height;const k=l.width/e,p=l.height/d;l={offset:F||{x:0,y:0},mosaic:w||l,block:{width:e,height:d}};e=K.pixelType;d=I.getPixelArrayConstructor(e);var u=K.pixels.length;
K=[];for(var E=0;E<u;E++){var c=new d(v*f);for(let r=0;r<p;r++)for(let A=0;A<k;A++){var g=b[r*k+A];J(g)&&(g=g.pixels[E],Y(c,g,l,A,r,B))}K.push(c)}let h;if(b.some(r=>O.isNone(r)||r.mask&&0<r.mask.length))for(h=new Uint8Array(v*f),d=0;d<p;d++)for(u=0;u<k;u++)c=b[d*k+u],(E=O.isSome(c)?c.mask:null)?Y(h,E,l,u,d,B):c?Y(h,1,l,u,d,B):Y(h,0,l,u,d,B);b=new I({width:v,height:f,pixels:K,pixelType:e,mask:h});b.updateStatistics();return b}function P(b,l,v){const F=b.find(u=>O.isSome(u));if(O.isNone(F))return null;
var w=b.some(u=>O.isSome(u)?!!u.mask:!0);const {width:B,height:D}=l;l=w?new Uint8Array(B*D):null;({blockWidths:v}=v);const K=[],f=F.getPlaneCount(),e=I.getPixelArrayConstructor(F.pixelType);if(w)for(let u=0,E=0;u<b.length;E+=v[u],u++)if(w=b[u],J(w)){var d=w.mask;for(var k=0;k<D;k++)for(var p=0;p<v[u];p++)l[k*B+p+E]=null==d?255:d[k*w.width+p]}for(w=0;w<f;w++){d=new e(B*D);for(let u=0,E=0;u<b.length;E+=v[u],u++)if(k=b[u],J(k)&&(p=k.pixels[w],null!=p))for(let c=0;c<D;c++)for(let g=0;g<v[u];g++)d[c*B+
g+E]=p[c*k.width+g];K.push(d)}b=new I({width:B,height:D,mask:l,pixels:K,pixelType:F.pixelType});b.updateStatistics();return b}function T(b){if(!J(b))return null;const l=b.clone(),{width:v,height:F,pixels:w,mask:B}=b;var D=w[0];b=l.pixels[0];for(let e=2;e<F-1;e++){const d=new Map;for(var K=e-2;K<e+2;K++)for(var f=0;4>f;f++){const k=K*v+f;a(d,D[k],B?B[k]:1)}b[e*v]=x(d);b[e*v+1]=b[e*v+2]=b[e*v];for(K=3;K<v-1;K++)f=(e-2)*v+K+1,a(d,D[f],B?B[f]:1),f=(e-1)*v+K+1,a(d,D[f],B?B[f]:1),f=e*v+K+1,a(d,D[f],B?B[f]:
1),f=(e+1)*v+K+1,a(d,D[f],B?B[f]:1),f=(e-2)*v+K-3,m(d,D[f],B?B[f]:1),f=(e-1)*v+K-3,m(d,D[f],B?B[f]:1),f=e*v+K-3,m(d,D[f],B?B[f]:1),f=(e+1)*v+K-3,m(d,D[f],B?B[f]:1),b[e*v+K]=x(d);b[e*v+K+1]=b[e*v+K]}for(D=0;D<v;D++)b[D]=b[v+D]=b[2*v+D],b[(F-1)*v+D]=b[(F-2)*v+D];l.updateStatistics();return l}function x(b){if(0===b.size)return 0;let l=0,v=-1,F=0;const w=b.keys();let B=w.next();for(;!B.done;)F=b.get(B.value),F>l&&(v=B.value,l=F),B=w.next();return v}function m(b,l,v){0!==v&&(v=b.get(l),1===v?b.delete(l):
b.set(l,v-1))}function a(b,l,v){0!==v&&b.set(l,b.has(l)?b.get(l)+1:1)}function n(b,l,v){let {x:F,y:w}=l;const {width:B,height:D}=v;if(0===F&&0===w&&D===b.height&&B===b.width)return b;const {width:K,height:f}=b;l=Math.max(0,w);const e=Math.max(0,F),d=Math.min(F+B,K),k=Math.min(w+D,f);if(0>d||0>k||!J(b))return null;F=Math.max(0,-F);w=Math.max(0,-w);const {pixels:p,mask:u}=b;var E=B*D,c=p.length;const g=[];for(var h=0;h<c;h++){var r=p[h],A=I.createEmptyBand(b.pixelType,E);for(let Q=l;Q<k;Q++){const C=
Q*K;let G=(Q+w-l)*B+F;for(let S=e;S<d;S++)A[G++]=r[C+S]}g.push(A)}E=new Uint8Array(E);for(c=l;c<k;c++)for(h=c*K,r=(c+w-l)*B+F,A=e;A<d;A++)E[r++]=u?u[h+A]:1;b=new I({width:v.width,height:v.height,pixelType:b.pixelType,pixels:g,mask:E});b.updateStatistics();return b}function y(b,l=!0){if(!J(b))return null;const {pixels:v,width:F,height:w,mask:B,pixelType:D}=b;b=[];const K=Math.round(F/2),f=Math.round(w/2),e=w-1,d=F-1;for(var k=0;k<v.length;k++){var p=v[k],u=I.createEmptyBand(D,K*f),E=0;for(var c=0;c<
w;c+=2)for(var g=0;g<F;g+=2){var h=p[c*F+g];if(l){var r=g===d?h:p[c*F+g+1];const A=c===e?h:p[c*F+g+F],Q=g===d?A:c===e?r:p[c*F+g+F+1];u[E++]=(h+r+A+Q)/4}else u[E++]=h}b.push(u)}k=null;if(B)for(k=new Uint8Array(K*f),p=0,u=0;u<w;u+=2)for(E=0;E<F;E+=2)c=B[u*F+E],l?(g=E===d?c:B[u*F+E+1],h=u===e?c:B[u*F+E+F],r=E===d?h:u===e?g:B[u*F+E+F+1],k[p++]=c*g*h*r?1:0):k[p++]=c;return new I({width:K,height:f,pixelType:D,pixels:b,mask:k})}function t(b,l,v,F,w=.5){const {width:B,height:D}=b,{width:K,height:f}=l;b=F.cols;
F=F.rows;l=Math.ceil(K/b-.1/b);const e=Math.ceil(f/F-.1/F);let d,k,p,u,E;const c=l*b;var g=c*e*F;const h=new Float32Array(g),r=new Float32Array(g),A=new Uint32Array(g),Q=new Uint32Array(g);let C=0,G,S;for(let H=0;H<e;H++)for(let M=0;M<l;M++){var N=12*(H*l+M);g=v[N];d=v[N+1];k=v[N+2];p=v[N+3];u=v[N+4];E=v[N+5];for(var q=0;q<F;q++){C=(H*F+q)*c+M*b;S=(q+.5)/F;for(let W=0;W<q;W++)G=(W+.5)/b,h[C+W]=(g*G+d*S+k)*B-w,r[C+W]=(p*G+u*S+E)*D-w,A[C+W]=Math.round(h[C+W]),Q[C+W]=Math.round(r[C+W])}N+=6;g=v[N];d=
v[N+1];k=v[N+2];p=v[N+3];u=v[N+4];E=v[N+5];for(N=0;N<F;N++)for(C=(H*F+N)*c+M*b,S=(N+.5)/F,q=N;q<b;q++)G=(q+.5)/b,h[C+q]=(g*G+d*S+k)*B-w,r[C+q]=(p*G+u*S+E)*D-w,A[C+q]=Math.round(h[C+q]),Q[C+q]=Math.round(r[C+q])}return{offsets_x:h,offsets_y:r,offsets_xi:A,offsets_yi:Q,gridWidth:c}}X.approximateTransform=function(b,l,v,F,w="nearest"){if(!J(b))return null;"majority"===w&&(b=T(b));const {pixels:B,mask:D,pixelType:K}=b,f=b.width;var e=b.height;const d=I.getPixelArrayConstructor(K),k=B.length,{width:p,
height:u}=l;b=!1;for(let Q=0;Q<v.length;Q+=3)-1===v[Q]&&-1===v[Q+1]&&-1===v[Q+2]&&(b=!0);const {offsets_x:E,offsets_y:c,offsets_xi:g,offsets_yi:h,gridWidth:r}=t({width:f,height:e},l,v,F,"majority"===w?0:.5);let A;l=(Q,C,G)=>{const S=Q instanceof Float32Array||Q instanceof Float64Array?0:.5;for(let N=0;N<u;N++){A=N*r;for(let q=0;q<p;q++){if(0>E[A]||0>c[A])Q[N*p+q]=0;else if(G)Q[N*p+q]=C[g[A]+h[A]*f];else{const H=Math.floor(E[A]),M=Math.floor(c[A]),W=Math.ceil(E[A]),aa=Math.ceil(c[A]),V=E[A]-H,Z=c[A]-
M;Q[N*p+q]=!D||D[H+M*f]&&D[H+M*f]&&D[H+aa*f]&&D[W+aa*f]?(1-Z)*((1-V)*C[H+M*f]+V*C[W+M*f])+Z*((1-V)*C[H+aa*f]+V*C[W+aa*f])+S:C[g[A]+h[A]*f]}A++}}};v=[];for(e=0;e<k;e++)F=new d(p*u),l(F,B[e],"nearest"===w||"majority"===w),v.push(F);w=new I({width:p,height:u,pixelType:K,pixels:v});if(D)w.mask=new Uint8Array(p*u),l(w.mask,D,!0);else if(b)for(w.mask=new Uint8Array(p*u),b=0;b<p*u;b++)w.mask[b]=0>E[b]||0>c[b]?0:1;w.updateStatistics();return w};X.clip=n;X.colorize=function(b,l){if(!J(b)||!l&&(l.indexedColormap||
l.indexed2DColormap))return b;const v=b.clone();var F=v.pixels;let w=v.mask;const B=v.width*v.height;if(1!==F.length)return b;const {indexedColormap:D,indexed2DColormap:K,offset:f,alphaSpecified:e}=l;l=D.length-1;b=0;F=F[0];const d=new Uint8Array(F.length),k=new Uint8Array(F.length),p=new Uint8Array(F.length);let u=0;if(D)if(w)for(b=0;b<B;b++)w[b]&&(u=4*(F[b]-f),u<f||u>l?w[b]=0:(d[b]=D[u],k[b]=D[u+1],p[b]=D[u+2],w[b]=D[u+3]));else{w=new Uint8Array(B);for(b=0;b<B;b++)u=4*(F[b]-f),u<f||u>l?w[b]=0:(d[b]=
D[u],k[b]=D[u+1],p[b]=D[u+2],w[b]=D[u+3]);v.mask=w}else if(w)for(b=0;b<B;b++)w[b]&&(l=K[F[b]],d[b]=l[0],k[b]=l[1],p[b]=l[2],w[b]=l[3]);else{w=new Uint8Array(B);for(b=0;b<B;b++)l=K[F[b]],d[b]=l[0],k[b]=l[1],p[b]=l[2],w[b]=l[3];v.mask=w}v.pixels=[d,k,p];v.statistics=null;v.pixelType="u8";v.maskIsAlpha=e;return v};X.createColormapLUT=function(b){if(b){var l=b.colormap;if(l&&0!==l.length){l=l.sort((e,d)=>e[0]-d[0]);var v=0;0>l[0][0]&&(v=l[0][0]);var F=Math.max(256,l[l.length-1][0]-v+1),w=new Uint8Array(4*
F),B=[],D=0,K=0,f=5===l[0].length;if(65536<F)return l.forEach(e=>{B[e[0]-v]=f?e.slice(1):e.slice(1).concat([255])}),{indexed2DColormap:B,offset:v,alphaSpecified:f};if(b.fillUnspecified)for(b=l[K],D=b[0]-v;D<F;D++)w[4*D]=b[1],w[4*D+1]=b[2],w[4*D+2]=b[3],w[4*D+3]=f?b[4]:255,D===b[0]-v&&(b=K===l.length-1?b:l[++K]);else for(D=0;D<l.length;D++)b=l[D],K=4*(b[0]-v),w[K]=b[1],w[K+1]=b[2],w[K+2]=b[3],w[K+3]=f?b[4]:255;return{indexedColormap:w,offset:v,alphaSpecified:f}}}};X.extractBands=function(b,l){if(null==
l||!l.length||!J(b))return b;const v=b.pixels.length;return l&&l.some(F=>F>=v)||1===v&&1===l.length&&0===l[0]||v===l.length&&!l.some((F,w)=>F!==w)?b:new I({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:l.map(F=>b.pixels[F]),statistics:b.statistics&&l.map(F=>b.statistics[F])})};X.getClipBounds=z;X.getLocalArithmeticNorthRotations=function(b,l){const {coefficients:v,spacing:F}=l,{offsets_x:w,offsets_y:B,gridWidth:D}=
t(b,b,v,{rows:F[0],cols:F[1]},.5),{width:K,height:f}=b;b=new Float32Array(K*f);l=180/Math.PI;for(let k=0;k<f;k++)for(let p=0;p<K;p++){var e=k*D+p,d=0===k?e:e-D;const u=k===f-1?e:e+D;e=w[d]-w[u];d=B[u]-B[d];isNaN(e)||isNaN(d)?b[k*K+p]=90:(d=Math.atan2(d,e)*l,d=(360+d)%360,b[k*K+p]=d)}return b};X.isValidPixelBlock=J;X.lookupPixels=function(b,l){if(!J(b))return null;const {pixels:v,mask:F}=b,w=b.width*b.height,B=v.length;let D=l.lut;({offset:l}=l);let K,f;D&&1===D[0].length&&(D=v.map(()=>D));const e=
[];let d,k,p;if(l)if(null==F)for(K=0;K<B;K++){d=v[K];k=D[K];p=new Uint8Array(w);for(f=0;f<w;f++)p[f]=k[d[f]-l];e.push(p)}else for(K=0;K<B;K++){d=v[K];k=D[K];p=new Uint8Array(w);for(f=0;f<w;f++)F[f]&&(p[f]=k[d[f]-l]);e.push(p)}else if(null==F)for(K=0;K<B;K++){d=v[K];k=D[K];p=new Uint8Array(w);for(f=0;f<w;f++)p[f]=k[d[f]];e.push(p)}else for(K=0;K<B;K++){d=v[K];k=D[K];p=new Uint8Array(w);for(f=0;f<w;f++)F[f]&&(p[f]=k[d[f]]);e.push(p)}b=new I({width:b.width,height:b.height,pixels:e,mask:F,pixelType:"u8"});
b.updateStatistics();return b};X.mosaic=R;X.mosaicPixelData=function(b,l){if(!b||0===b.length)return null;var v=b.find(k=>k.pixelBlock);if(!v||O.isNone(v.pixelBlock))return null;var F=(v.extent.xmax-v.extent.xmin)/v.pixelBlock.width;const w=(v.extent.ymax-v.extent.ymin)/v.pixelBlock.height,B=.01*Math.min(F,w),D=b.sort((k,p)=>Math.abs(k.extent.ymax-p.extent.ymax)>B?p.extent.ymax-k.extent.ymax:Math.abs(k.extent.xmin-p.extent.xmin)>B?k.extent.xmin-p.extent.xmin:0);var K=Math.min.apply(null,D.map(k=>
k.extent.xmin));const f=Math.min.apply(null,D.map(k=>k.extent.ymin)),e=Math.max.apply(null,D.map(k=>k.extent.xmax)),d=Math.max.apply(null,D.map(k=>k.extent.ymax));b={x:Math.round((l.xmin-K)/F),y:Math.round((d-l.ymax)/w)};K={width:Math.round((e-K)/F),height:Math.round((d-f)/w)};F={width:Math.round((l.xmax-l.xmin)/F),height:Math.round((l.ymax-l.ymin)/w)};if(Math.round(K.width/v.pixelBlock.width)*Math.round(K.height/v.pixelBlock.height)!==D.length||0>b.x||0>b.y||K.width<F.width||K.height<F.height)return null;
v=D.map(k=>k.pixelBlock);v=R(v,K,{clipOffset:b,clipSize:F});return{extent:l,pixelBlock:v}};X.remapColor=function(b,l){if(!J(b))return null;b=b.clone();var {pixels:v}=b;const F=b.width*b.height,w=l.length,B=Math.floor(w/2),D=l[Math.floor(B)];v=v[0];let K,f,e,d,k,p,u=!1;const E=new Uint8Array(F),c=new Uint8Array(F),g=new Uint8Array(F);let h=b.mask;const r=4===l[0].mappedColor.length;h||(h=new Uint8Array(F),h.fill(r?255:1),b.mask=h);for(k=0;k<F;k++)if(h[k]){K=v[k];u=!1;p=B;f=D;e=0;for(d=w-1;1<d-e;){if(K===
f.value){u=!0;break}K>f.value?e=p:d=p;p=Math.floor((e+d)/2);f=l[Math.floor(p)]}u||(K===l[e].value?(f=l[e],u=!0):K===l[d].value?(f=l[d],u=!0):K<l[e].value?(u=!1,f=null):K>l[e].value&&(K<l[d].value?(f=l[e],u=!0):d===w-1?(u=!1,f=null):(f=l[d],u=!0)));u?(E[k]=f.mappedColor[0],c[k]=f.mappedColor[1],g[k]=f.mappedColor[2],h[k]=f.mappedColor[3]):E[k]=c[k]=g[k]=h[k]=0}b.pixels=[E,c,g];b.mask=h;b.pixelType="u8";b.maskIsAlpha=r;return b};X.resampleByMajority=T;X.setValidBoundary=function(b,l,v){if(!J(b))return null;
const {width:F,height:w}=b,B=l.x;l=l.y;const D=v.width+B;v=v.height+l;if(0>B||0>l||D>F||v>w||0===B&&0===l&&D===F&&v===w)return b;b.mask||(b.mask=new Uint8Array(F*w));const K=b.mask;for(let f=0;f<w;f++){const e=f*F;for(let d=0;d<F;d++)K[e+d]=f<l||f>=v||d<B||d>=D?0:1}b.updateStatistics();return b};X.split=function(b,l,v){if(!J(b))return null;const {width:F,height:w}=l;let {width:B,height:D}=b;const K=new Map,f={x:0,y:0};v=null==v?1:1+v;for(let e=0;e<v;e++){const d=Math.ceil(B/F),k=Math.ceil(D/w);for(let p=
0;p<k;p++){f.y=p*w;for(let u=0;u<d;u++){f.x=u*F;const E=n(b,f,l);K.set(`${e}/${p}/${u}`,E)}}e<v-1&&(b=y(b));B=Math.round(B/2);D=Math.round(D/2)}return K};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n){function y(c){c=c.symbolLayers;if(!c)return null;let g=null;c.forEach(h=>{if("object"!==h.type||null==h.resource.href)g="water"===h.type?P.unwrap(h.color):P.isSome(h.material)?P.unwrap(h.material.color):null});return g?new J(g):null}function t(c,g){if(null==g)return c;c=c.toRgba();c[3]*=g;return new J(c)}function b(c,g,h){if(c=c.symbolLayers){var r=A=>{A=P.isSome(A)?A:null;g=g||A||null!=h&&E;return t(g,h)};c.forEach(A=>{if("object"!==A.type||null==A.resource.href||
g)if("water"===A.type)A.color=r(A.color);else{var Q=P.isSome(A.material)?A.material.color:null;Q=r(Q);P.isNone(A.material)?A.material=new n.Symbol3DMaterial({color:Q}):A.material.color=Q;null!=h&&"outline"in A&&P.isSome(A.outline)&&P.isSome(A.outline.color)&&(A.outline.color=t(A.outline.color,h))}})}}function l(c,g){return v.apply(this,arguments)}function v(){v=I._asyncToGenerator(function*(c,g){(c=c.symbolLayers)&&(yield Y.forEach(c,function(){var h=I._asyncToGenerator(function*(r){return F(r,g)});
return function(r){return h.apply(this,arguments)}}()))});return v.apply(this,arguments)}function F(c,g){return w.apply(this,arguments)}function w(){w=I._asyncToGenerator(function*(c,g){switch(c.type){case "extrude":c.size="number"===typeof g[2]?g[2]:0;break;case "icon":case "line":case "text":g=B(g);P.isSome(g)&&(c.size=g);break;case "path":{const h=f(g,x.ONES,[c.width,void 0,c.height]);c.width=k(g[0],c.width,1,h);c.height=k(g[2],c.height,1,h)}break;case "object":yield D(c,g)}});return w.apply(this,
arguments)}function B(c){for(const g of c)if("number"===typeof g)return g;return null}function D(c,g){return K.apply(this,arguments)}function K(){K=I._asyncToGenerator(function*(c,g){const {resourceSize:h,symbolSize:r}=yield e(c),A=f(g,h,r);c.width=k(g[0],r[0],h[0],A);c.depth=k(g[1],r[1],h[1],A);c.height=k(g[2],r[2],h[2],A)});return K.apply(this,arguments)}function f(c,g,h){for(let r=0;3>r;r++){const A=c[r];switch(A){case "symbol-value":return null!=h[r]?h[r]/g[r]:1;case "proportional":break;default:if(A&&
g[r])return A/g[r]}}return 1}function e(c){return d.apply(this,arguments)}function d(){d=I._asyncToGenerator(function*(c){const g=yield(yield new Promise((G,S)=>X(["./symbolLayerUtils"],G,S))).computeObjectLayerResourceSize(c,10),{width:h,height:r,depth:A}=c;c=[h,A,r];let Q=1;for(var C=0;3>C;C++)if(null!=c[C]){Q=c[C]/g[C];break}for(C=0;3>C;C++)null==c[C]&&(c[C]=g[C]*Q);return{resourceSize:g,symbolSize:c}});return d.apply(this,arguments)}function k(c,g,h,r){switch(c){case "proportional":return h*r;
case "symbol-value":return null!=g?g:h;default:return c}}function p(){p=I._asyncToGenerator(function*(c,g){if(c&&g){if(z.isSymbol3D(c))return l(c,g);if(z.isSymbol2D(c)&&(g=B(g),!P.isNone(g)))switch(c.type){case "simple-marker":c.size=g;break;case "picture-marker":{const h=c.width/c.height;1<h?(c.width=g,c.height=g*h):(c.width=g*h,c.height=g);break}case "simple-line":c.width=g;break;case "text":c.font.size=g}}});return p.apply(this,arguments)}const u=/\/resource\/(.*?)\.svg$/,E=new J("white");O.applyColorToSymbol=
function(c,g,h){if(c&&(g||null!=h))if(g&&(g=new J(g)),z.isSymbol3D(c))b(c,g,h);else if(z.isSymbol2D(c)){if(g=g||c.color)c.color=t(g,h);null!=h&&"outline"in c&&c.outline&&c.outline.color&&(c.outline.color=t(c.outline.color,h))}};O.applyOpacityToColor=t;O.applyRotationToSymbol=function(c,g,h){c&&null!=g&&(z.isSymbol3D(c)?(c=c.symbolLayers)&&c.forEach(r=>{if(r&&"object"===r.type)switch(h){case "tilt":r.tilt=g;break;case "roll":r.roll=g;break;default:r.heading=g}}):!z.isSymbol2D(c)||"simple-marker"!==
c.type&&"picture-marker"!==c.type&&"text"!==c.type||(c.angle=g))};O.applySizesToSymbol=function(c,g){return p.apply(this,arguments)};O.getCSSFilterFromEffectList=function(c){if(!c)return null;c=c.effects.filter(g=>"bloom"!==g.type).map(g=>g.toJSON());return m.effectFunctionsFromJSON(c)};O.getColorFromSymbol=function(c,g){if(!c)return null;let h=null;z.isSymbol3D(c)?h=y(c):z.isSymbol2D(c)&&(h=c.color?new J(c.color):null);return h?t(h,g):null};O.getIconHref=function(c,g){g=g.resource.href;return!R("esri-canvas-svg-support")&&
c.styleOrigin&&u.test(g)?g.replace(u,"/resource/png/$1.png"):g};O.getSymbolOutlineSize=function(c){if(!c)return 0;if(z.isSymbol3D(c)){{const g=c.symbolLayers&&c.symbolLayers.length;g?(c=c.symbolLayers.getItemAt(g-1),c="outline"in c?P.get(c,"outline","size"):void 0):c=void 0}return P.isSome(c)?c:0}return(c=a.getStroke(c))&&T.px2pt(c.width)||0};O.isVolumetricSymbol=function(c){if(P.isNone(c)||!("symbolLayers"in c)||P.isNone(c.symbolLayers))return!1;switch(c.type){case "point-3d":return c.symbolLayers.some(g=>
"object"===g.type);case "line-3d":return c.symbolLayers.some(g=>"path"===g.type);case "polygon-3d":return c.symbolLayers.some(g=>"object"===g.type||"extrude"===g.type);default:return!1}};Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(X,O,I,J,z,Y,R){function P(n){if(!n)return null;
let y;switch(n.type){case "simple-fill":case "picture-fill":case "simple-marker":y=P(n.outline);break;case "simple-line":{const t=Y.pt2px(n.width);"none"!==n.style&&0!==t&&(y={color:n.color,style:a(n.style),width:t,cap:n.cap,join:"miter"===n.join?Y.pt2px(n.miterLimit):n.join});break}default:y=null}return y}const T={left:"start",center:"middle",right:"end",justify:"start"},x={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},m=new z(1E3),a=(()=>{const n={};return y=>
{if(n[y])return n[y];const t=y.replace(/-/g,"");return n[y]=t}})();I=new I([128,128,128]);X.defaultThematicColor=I;X.dekebabifyLineStyle=a;X.getFill=function(n){const y=n.style;let t=null;if(n)switch(n.type){case "simple-marker":"cross"!==y&&"x"!==y&&(t=n.color);break;case "simple-fill":"solid"===y?t=n.color:"none"!==y&&(t={type:"pattern",x:0,y:0,src:O.getAssetUrl(`esri/symbols/patterns/${y}.png`),width:5,height:5});break;case "picture-fill":t={type:"pattern",src:n.url,width:Y.pt2px(n.width)*n.xscale,
height:Y.pt2px(n.height)*n.yscale,x:Y.pt2px(n.xoffset),y:Y.pt2px(n.yoffset)};break;case "text":t=n.color;break;case "cim":t=R.getCIMSymbolColor(n)}return t};X.getPatternUrlWithColor=function(n,y){const t=n+"-"+y;return void 0!==m.get(t)?Promise.resolve(m.get(t)):J(n,{responseType:"image"}).then(b=>{b=b.data;const l=b.naturalWidth,v=b.naturalHeight,F=document.createElement("canvas");F.width=l;F.height=v;const w=F.getContext("2d");w.fillStyle=y;w.fillRect(0,0,l,v);w.globalCompositeOperation="destination-in";
w.drawImage(b,0,0);b=F.toDataURL();m.put(t,b);return b})};X.getSVGAlign=function(n){return n=(n=n.horizontalAlignment)&&T[n.toLowerCase()]||"middle"};X.getSVGBaseline=function(n){return(n=n.verticalAlignment)&&x[n.toLowerCase()]||"alphabetic"};X.getSVGBaselineShift=function(n){return"bottom"===n.verticalAlignment?"super":null};X.getStroke=P;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(X){return function(){function O(J,
z){this._storage=new X.MemCacheStorage;this._storage.maxSize=J;z&&this._storage.registerRemoveFunc("",z)}var I=O.prototype;I.put=function(J,z){this._storage.put(J,z,1,1)};I.pop=function(J){return this._storage.pop(J)};I.get=function(J){return this._storage.get(J)};I.clear=function(){this._storage.clearAll()};I.destroy=function(){this._storage.destroy()};return O}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(X,O,I){function J(a){a=I.toCIMSymbolJSON(a);
if("CIMTextSymbol"===a.type)return a.height;let n=0;if(a.symbolLayers)for(const y of a.symbolLayers)I.isCIMMarker(y)&&y.size>n?n=y.size:I.isCIMStroke(y)&&y.width>n?n=y.width:I.isCIMFill(y);return n}function z(a,n,y,t){if("CIMTextSymbol"===a.type)a.height*=n;else{if(y&&a.effects)for(const b of a.effects)P(b,n);if(a.symbolLayers)for(const b of a.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":Y(b,n,t);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=t&&t.preserveOutlineWidth||
!b.width||(b.width*=n);break;case "CIMPictureFill":b.height&&(b.height*=n);b.offsetX&&(b.offsetX*=n);b.offsetY&&(b.offsetY*=n);break;case "CIMHatchFill":z(b.lineSymbol,n,!0,{...t,preserveOutlineWidth:!1}),b.offsetX&&(b.offsetX*=n),b.offsetY&&(b.offsetY*=n),b.separation&&(b.separation*=n)}}}function Y(a,n,y){a.markerPlacement&&R(a.markerPlacement,n);a.offsetX&&(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*n,y:a.anchorPoint.y*
n});a.size*=n;if("CIMVectorMarker"===a.type&&a.markerGraphics)for(const t of a.markerGraphics)a.scaleSymbolsProportionally||z(t.symbol,n,!0,y)}function R(a,n){I.isCIMMarkerStrokePlacement(a)&&a.offset&&(a.offset*=n);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset&&(a.customEndingOffset*=n);a.offsetAlongLine&&(a.offsetAlongLine*=n);if(a.placementTemplate&&a.placementTemplate.length){var y=a.placementTemplate.map(t=>t*n);a.placementTemplate=
y}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset&&(a.maxRandomOffset*=n);a.placementTemplate&&a.placementTemplate.length&&(y=a.placementTemplate.map(t=>t*n),a.placementTemplate=y);break;case "CIMMarkerPlacementOnLine":a.startPointOffset&&(a.startPointOffset*=n);break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine&&(a.offsetAlongLine*=n);break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition&&(a.beginPosition*=n);a.endPosition&&(a.endPosition*=n);break;case "CIMMarkerPlacementPolygonCenter":a.offsetX&&
(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);break;case "CIMMarkerPlacementInsidePolygon":a.offsetX&&(a.offsetX*=n),a.offsetY&&(a.offsetY*=n),a.stepX&&(a.stepX*=n),a.stepY&&(a.stepY*=n)}}function P(a,n){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width&&(a.width*=n);break;case "CIMGeometricEffectBuffer":a.size&&(a.size*=n);break;case "CIMGeometricEffectCut":a.beginCut&&(a.beginCut*=n);a.endCut&&(a.endCut*=n);a.middleCut&&(a.middleCut*=n);break;case "CIMGeometricEffectDashes":a.customEndingOffset&&
(a.customEndingOffset*=n);a.offsetAlongLine&&(a.offsetAlongLine*=n);if(a.dashTemplate&&a.dashTemplate.length){const y=a.dashTemplate.map(t=>t*n);a.dashTemplate=y}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length&&(a.length*=n);break;case "CIMGeometricEffectMove":a.offsetX&&(a.offsetX*=n);a.offsetY&&(a.offsetY*=n);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset&&(a.offset*=n);break;case "CIMGeometricEffectRegularPolygon":a.radius&&
(a.radius*=n);break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth&&(a.fromWidth*=n);a.length&&(a.length*=n);a.toWidth&&(a.toWidth*=n);break;case "CIMGeometricEffectWave":a.amplitude&&(a.amplitude*=n),a.period&&(a.period*=n)}}function T(a,n){let y;y="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(y.symbolLayers)for(const t of y.symbolLayers)if(!(t.colorLocked||a&&(I.isCIMStroke(t)||I.isCIMMarker(t)&&t.markerPlacement&&I.isCIMMarkerStrokePlacement(t.markerPlacement))))switch(t.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":t.tintColor&&
x(n,t.tintColor);break;case "CIMVectorMarker":t.markerGraphics.forEach(b=>{T(b.symbol,n)});break;case "CIMSolidStroke":case "CIMSolidFill":x(n,t.color);break;case "CIMHatchFill":T(t.lineSymbol,n)}}function x(a,n){for(const y of a)if(y.join(".")===n.join("."))return;a.push(n)}function m(a,n,y){var t="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===t.type?!0:!1;if(t.symbolLayers)for(const b of t.symbolLayers)if(!b.colorLocked){if(a)if(y){if({layersToColor:t}=y,(I.isCIMStroke(b)||I.isCIMMarker(b)&&
b.markerPlacement&&I.isCIMMarkerStrokePlacement(b.markerPlacement))&&"fill"===t||I.isCIMFill(b)&&"outline"===t)continue}else if(I.isCIMStroke(b)||I.isCIMMarker(b)&&b.markerPlacement&&I.isCIMMarkerStrokePlacement(b.markerPlacement))continue;t=n.toArray();switch(b.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":b.tintColor=t;break;case "CIMVectorMarker":b.markerGraphics.forEach(l=>{m(l.symbol,n,y)});break;case "CIMSolidStroke":case "CIMSolidFill":b.color=t;break;case "CIMHatchFill":m(b.lineSymbol,
n,y)}}}X.applyCIMSymbolColor=function(a,n,y){n instanceof O||(n=new O(n));(a=I.toCIMSymbolJSON(a))&&m(a,n,y)};X.applyCIMSymbolRotation=function(a,n,y=!1){a=I.toCIMSymbolJSON(a);y&&0!==n&&(n=360-n);if("CIMTextSymbol"===a.type)a.angle=n;else if("CIMPointSymbol"===a.type&&a.symbolLayers){y=n-(a.angle||0);for(const t of a.symbolLayers)if(I.isCIMMarker(t)){let b=t.rotation||0;b=t.rotateClockwise?b-y:b+y;t.rotation=b}a.angle=n}};X.getCIMSymbolColor=function(a){a=I.toCIMSymbolJSON(a);const n=[];T(a,n);return n.length?
new O(I.fromCIMColor(n[0])):null};X.getCIMSymbolRotation=function(a,n=!1){a=I.toCIMSymbolJSON(a);return"CIMTextSymbol"===a.type||"CIMPointSymbol"===a.type?n&&0!==a.angle?360-a.angle:a.angle||0:0};X.getCIMSymbolSize=J;X.scaleCIMMarker=Y;X.scaleCIMSymbolTo=function(a,n,y){const t=I.toCIMSymbolJSON(a);a=J(a);if(0===a)if("CIMTextSymbol"===t.type)t.height=n;else{if(t.symbolLayers)for(const b of t.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":b.size=n;break;case "CIMPictureStroke":case "CIMSolidStroke":b.width=
n}}else z(t,n/a,!1,y)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(X,O){function I(J,z){"string"!==typeof J&&(J=String(J));switch(z){case "LowerCase":return J.toLowerCase();case "Allcaps":return J.toUpperCase();default:return J}}O._adjustTextCase=I;O.colorToArray=function(J){return[J.r,J.g,J.b,J.a]};O.createLabelOverrideFunction=function(J,z,Y){const R=m=>{let a=m.length;for(;a--;)if(!" /-,\n".includes(m.charAt(a)))return!1;
return!0},P=[];var T=0;let x=-1;do x=z.indexOf("[",T),x>=T&&(x>T&&(T=z.substr(T,x-T),P.push([T,null,R(T)])),T=x+1,x=z.indexOf("]",T),x>=T&&(x>T&&(T=z.substr(T,x-T),(T=J[T])&&P.push([null,T,!1])),T=x+1));while(-1!==x);T<z.length-1&&(J=z.substr(T),P.push([J,null,R(J)]));return m=>{let a="",n=null;for(const y of P){const [t,b,l]=y;if(t)l?n=t:(n&&(a+=n,n=null),a+=t);else{const v=m.attributes[b];v&&(n&&(a+=n,n=null),a+=v)}}return I(a,Y)}};O.evaluateValueOrFunction=function(J,z,Y,R){return"function"===
typeof J?J(z,Y,R):J};O.fromCIMColor=function(J){return J?{r:J[0],g:J[1],b:J[2],a:J[3]/255}:{r:0,g:0,b:0,a:0}};O.getValue=J=>isNaN(J)||!J?0:J;O.importGeometryEngine=function(){return new Promise((J,z)=>X(["../../geometry/geometryEngineJSON"],J,z))};O.isCIMFill=function(J){return"CIMGradientFill"===J.type||"CIMHatchFill"===J.type||"CIMPictureFill"===J.type||"CIMSolidFill"===J.type||"CIMWaterFill"===J.type};O.isCIMMarker=function(J){return"CIMVectorMarker"===J.type||"CIMPictureMarker"===J.type||"CIMBarChartMarker"===
J.type||"CIMCharacterMarker"===J.type||"CIMPieChartMarker"===J.type||"CIMStackedBarChartMarker"===J.type};O.isCIMMarkerStrokePlacement=function(J){return"CIMMarkerPlacementAlongLineRandomSize"===J.type||"CIMMarkerPlacementAlongLineSameSize"===J.type||"CIMMarkerPlacementAlongLineVariableSize"===J.type||"CIMMarkerPlacementAtExtremities"===J.type||"CIMMarkerPlacementAtMeasuredUnits"===J.type||"CIMMarkerPlacementAtRatioPositions"===J.type||"CIMMarkerPlacementOnLine"===J.type||"CIMMarkerPlacementOnVertices"===
J.type};O.isCIMStroke=function(J){return"CIMGradientStroke"===J.type||"CIMPictureStroke"===J.type||"CIMSolidStroke"===J.type};O.isGeometryEngineRequired=J=>{if(!J)return!1;for(const z of J)switch(z.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};O.resampleHermite=function(J,z,Y,R,P,T,x=!0){const m=z/P;Y/=T;const a=Math.ceil(m/2),n=Math.ceil(Y/2);for(let b=0;b<T;b++)for(let l=0;l<P;l++){const v=4*(l+(x?T-b-1:b)*P);var y=0;let F=0,w=0,B=0,D=0,K=0,f=0;const e=
(b+.5)*Y;for(let d=Math.floor(b*Y);d<(b+1)*Y;d++){var t=Math.abs(e-(d+.5))/n;const k=(l+.5)*m;t*=t;for(let p=Math.floor(l*m);p<(l+1)*m;p++){let u=Math.abs(k-(p+.5))/a;y=Math.sqrt(t+u*u);-1<=y&&1>=y&&(y=2*y*y*y-3*y*y+1,0<y&&(u=4*(p+d*z),f+=y*J[u+3],w+=y,255>J[u+3]&&(y=y*J[u+3]/250),B+=y*J[u],D+=y*J[u+1],K+=y*J[u+2],F+=y))}}R[v]=B/F;R[v+1]=D/F;R[v+2]=K/F;R[v+3]=f/w}};O.toCIMSymbolJSON=function(J){var z;return null==(z=J.data)?void 0:z.symbol};Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../rasterRenderers ../../request ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../geometry/support/spatialReferenceUtils ../support/arcgisLayerUrl ../support/commonProperties ../support/DimensionalDefinition ../support/RasterJobHandler ../support/TileInfo ../support/rasterDatasets/multidimensionalUtils ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D,K,f,e,d,k){const p=R.getLogger("esri.layers.mixins.ImageryTileMixin");X.ImageryTileMixin=u=>{u=function(E){function c(){var h=E.apply(this,arguments)||this;h._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};h.bandIds=null;h.copyright=null;h.fullExtent=null;h.interpolation="nearest";h.multidimensionalDefinition=null;h.raster=null;h.rasterInfo=null;h.sourceJSON=null;h.spatialReference=null;h.tileInfo=null;h.symbolizer=null;return h}
O._inheritsLoose(c,E);var g=c.prototype;g.convertVectorFieldData=function(){var h=O._asyncToGenerator(function*(r,A){if(P.isNone(r))return null;const Q=this._rasterJobHandler.instance,C=this.rasterInfo.dataType;return Q?Q.convertVectorFieldData({pixelBlock:r,dataType:C},A):D.convertVectorFieldData(r,C)});return function(r,A){return h.apply(this,arguments)}}();g.createFlowMesh=function(){var h=O._asyncToGenerator(function*(r,A){const Q=this._rasterJobHandler.instance;return Q?Q.createFlowMesh(r,A):
e.createFlowMesh(r.meshType,r.simulationSettings,r.flowData,P.isSome(A.signal)?A.signal:(new AbortController).signal)});return function(r,A){return h.apply(this,arguments)}}();g.normalizeRasterFetchOptions=function(h){var {multidimensionalInfo:r}=this.rasterInfo;if(P.isNone(r))return h;let A=h.multidimensionalDefinition||this.multidimensionalDefinition;if(P.isNone(A)||!A.length)A=B.getDefaultMultidimensionalDefinition(this.raster.rasterInfo);var Q=h.timeExtent||this.timeExtent;if(P.isSome(A)&&P.isSome(Q)&&
(P.isSome(Q.start)||P.isSome(Q.end))){var C,G;A=A.map(M=>M.clone());r=null==(C=r.variables.find(({name:M})=>M===A[0].variableName))?void 0:null==(G=C.dimensions)?void 0:G.find(({name:M})=>"StdTime"===M);C=A.find(({dimensionName:M})=>"StdTime"===M);if(!r||!C)return{...h,multidimensionalDefinition:null};const {start:S,end:N}=Q;Q=P.isNone(S)?null:S.getTime();G=P.isNone(N)?null:N.getTime();const q=null!=Q?Q:G,H=null!=G?G:Q;if(P.isSome(r.values))r=r.values.filter(M=>{if(Array.isArray(M)){if(q===H)return M[0]<=
q&&M[1]>=q;const W=M[0]>=q&&M[1]<=H||M[0]<q&&M[1]>H;return M[0]<=q&&M[1]>q||M[0]<H&&M[1]>=H||W}return q===H?M===q:M>=q&&M<=H}),r.length?(r=r.sort((M,W)=>{var aa,V;if(q===H){var Z,L;return(null!=(Z=M[0])?Z:M)-(null!=(L=W[0])?L:W)}M=Math.abs((null!=(aa=M[1])?aa:M)-H);W=Math.abs((null!=(V=W[1])?V:W)-H);return M-W})[0],C.values=[r]):A=null;else if(r.hasRegularIntervals&&r.extent){const [M,W]=r.extent;q>W||H<M?A=null:C.values=q===H?[q]:[Math.max(M,q),Math.min(W,H)]}}return{...h,multidimensionalDefinition:A}};
g.updateRenderer=function(){var h=O._asyncToGenerator(function*(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var r=this._rasterJobHandler.instance;r&&(this.symbolizer.rendererJSON=K.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.bind(),yield r.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}});return function(){return h.apply(this,arguments)}}();g.applyRenderer=function(){var h=O._asyncToGenerator(function*(r,
A){var Q=r&&r.pixelBlock;if(!(P.isSome(Q)&&Q.pixels&&0<Q.pixels.length))return null;yield this.updateRenderer();Q=this._rasterJobHandler.instance;const {bandIds:C}=this;return Q?yield Q.symbolize({...r,simpleStretchParams:A,bandIds:C}):this.symbolizer.symbolize({...r,simpleStretchParams:A,bandIds:C})});return function(r,A){return h.apply(this,arguments)}}();g.getTileUrl=function(h,r,A){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${h}/${r}/${A}`:""};g.getCompatibleTileInfo=
function(h,r,A=!1){if(!this.loaded||P.isNone(r))return null;if(A&&h.equals(this.spatialReference))return this.tileInfo;A=t.getInfo(h);return w.create({size:256,spatialReference:h,origin:A?{x:A.origin[0],y:A.origin[1]}:{x:r.xmin,y:r.ymax}})};g.getCompatibleFullExtent=function(h){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(h)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(h):null};g.fetchTile=function(){var h=O._asyncToGenerator(function*(r,
A,Q,C={}){if(C.requestAsImageElement)return r=this.getTileUrl(r,A,Q),Y(r,{responseType:"image",query:{...this.refreshParameters,...this.raster.ioConfig.customFetchParameters},signal:C.signal}).then(G=>G.data);if(P.isSome(this.rasterInfo.multidimensionalInfo)&&(C=this.normalizeRasterFetchOptions(C),P.isNone(C.multidimensionalDefinition)))return{extent:this.raster.getTileExtentFromTileInfo(r,A,Q,C.tileInfo||this.rasterInfo.storageInfo.tileInfo),pixelBlock:null};yield this._initJobHandler();"raster-shaded-relief"===
this.renderer.type&&(C={...C,buffer:{cols:1,rows:1}});return this.raster.fetchTile(r,A,Q,C)});return function(r,A,Q){return h.apply(this,arguments)}}();g.fetchPixels=function(){var h=O._asyncToGenerator(function*(r,A,Q,C={}){if(P.isSome(this.rasterInfo.multidimensionalInfo)&&(C=this.normalizeRasterFetchOptions(C),P.isNone(C.multidimensionalDefinition)))return{extent:r,pixelBlock:null};yield this._initJobHandler();return this.raster.fetchPixels(r,A,Q,C)});return function(r,A,Q){return h.apply(this,
arguments)}}();g.identify=function(){var h=O._asyncToGenerator(function*(r,A={}){return!P.isSome(this.rasterInfo.multidimensionalInfo)||this.rasterInfo.hasMultidimensionalTranspose&&(B.isMultiSliceOrRangeDefinition(A.multidimensionalDefinition)||A.transposedVariableName||A.timeExtent)||(A=this.normalizeRasterFetchOptions(A),!P.isNone(A.multidimensionalDefinition))?this.raster.identify(r,A):{location:r,value:null}});return function(r){return h.apply(this,arguments)}}();g.increaseRasterJobHandlerUsage=
function(){this._rasterJobHandler.refCount++};g.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};g.hasStandardTime=function(){var h;const r=this.rasterInfo.multidimensionalInfo;if(P.isNone(r)||"standard-time"!==this.rasterInfo.dataType)return!1;const A=null==(h=this.multidimensionalDefinition[0])?void 0:h.variableName;return r.variables.some(Q=>Q.name===A&&Q.dimensions.some(C=>"StdTime"===C.name))};g.getStandardTimeValue=
function(h){return(new Date(864E5*(h-25569))).toString()};g._configDefaultSettings=function(){this._configDefaultInterpolation();this.multidimensionalDefinition||(this.multidimensionalDefinition=B.getDefaultMultidimensionalDefinition(this.raster.rasterInfo));this._configDefaultRenderer()};g._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const h=new F;this._rasterJobHandler.connectionPromise=h.initialize().then(()=>{this._rasterJobHandler.instance=
h;this.raster.rasterJobHandler=h;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};g._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=this.raster.rasterJobHandler=null};g._configDefaultInterpolation=function(){if(null==this.interpolation){var h;const r=
K.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null==(h=this.sourceJSON)?void 0:h.defaultResamplingMethod);this._set("interpolation",r)}};g._configDefaultRenderer=function(){var h=this.raster.rasterInfo;this.bandIds||(this.bandIds=K.getDefaultBandCombination(h));if(!this.renderer){var r,A,Q;const C=K.createDefaultRenderer(h,{bandIds:this.bandIds,variableName:P.isSome(this.multidimensionalDefinition)?null==(r=this.multidimensionalDefinition[0])?void 0:r.variableName:null});"WCSServer"===
this.raster.datasetFormat&&"raster-stretch"===C.type&&(1E24<(null==(A=h.statistics)?void 0:A[0].max)||-1E24>(null==(Q=h.statistics)?void 0:Q[0].min))&&(C.dynamicRangeAdjustment=!0,C.statistics=null,"none"===C.stretchType&&(C.stretchType="min-max"));this.renderer=C}this.symbolizer?(this.symbolizer.rendererJSON=K.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.rasterInfo=h):this.symbolizer=new f({rendererJSON:this.renderer.toJSON(),rasterInfo:h});h=this.symbolizer.bind();h.success||p.warn("imagery-tile-mixin",
h.error||"The given renderer is not supported by the layer.")};O._createClass(c,[{key:"url",set:function(h){this._set("url",b.sanitizeUrl(h,p))}},{key:"renderer",set:function(h){this._set("renderer",h);this.updateRenderer()}}]);return c}(u);I.__decorate([n.property()],u.prototype,"_cachedRendererJson",void 0);I.__decorate([n.property()],u.prototype,"_compatibleFullExtent",void 0);I.__decorate([n.property()],u.prototype,"_rasterJobHandler",void 0);I.__decorate([n.property()],u.prototype,"bandIds",
void 0);I.__decorate([n.property({json:{origins:{service:{read:{source:"copyrightText"}}}}})],u.prototype,"copyright",void 0);I.__decorate([n.property({type:d,json:{read:!1}}),T.aliasOf("rasterInfo.extent")],u.prototype,"fullExtent",void 0);I.__decorate([n.property()],u.prototype,"interpolation",void 0);I.__decorate([n.property()],u.prototype,"ioConfig",void 0);I.__decorate([n.property({type:[v]})],u.prototype,"multidimensionalDefinition",void 0);I.__decorate([n.property()],u.prototype,"raster",void 0);
I.__decorate([n.property({readOnly:!0}),T.aliasOf("raster.rasterInfo")],u.prototype,"rasterInfo",void 0);I.__decorate([n.property()],u.prototype,"sourceJSON",void 0);I.__decorate([n.property({type:k,json:{read:!1}}),T.aliasOf("rasterInfo.spatialReference")],u.prototype,"spatialReference",void 0);I.__decorate([n.property({type:w,json:{read:!1}}),T.aliasOf("rasterInfo.storageInfo.tileInfo")],u.prototype,"tileInfo",void 0);I.__decorate([n.property(l.url)],u.prototype,"url",null);I.__decorate([n.property({types:z.rasterRendererTypes})],
u.prototype,"renderer",null);I.__decorate([n.property()],u.prototype,"symbolizer",void 0);return u=I.__decorate([y.subclass("esri.layers.ImageryTileMixin")],u)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(X,O,I,J,z,Y,R){var P;I=P=function(T){function x(m){m=T.call(this,m)||this;m.variableName=null;m.dimensionName=null;m.values=[];m.isSlice=!1;return m}X._inheritsLoose(x,T);x.prototype.clone=function(){return new P({variableName:this.variableName,dimensionName:this.dimensionName,values:J.clone(this.values),isSlice:this.isSlice})};return x}(I.JSONSupport);O.__decorate([z.property({type:String,json:{write:!0}})],I.prototype,"variableName",void 0);O.__decorate([z.property({type:String,json:{write:!0}})],
I.prototype,"dimensionName",void 0);O.__decorate([z.property({type:Y.types.array(Y.types.oneOf([Y.types.native(Number),Y.types.array(Y.types.native(Number))])),json:{write:!0}})],I.prototype,"values",void 0);O.__decorate([z.property({type:Boolean,json:{write:!0}})],I.prototype,"isSlice",void 0);return I=P=O.__decorate([R.subclass("esri.layers.support.DimensionalDefinition")],I)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error",
"../../core/maybe","../../core/workers/workers","./PixelBlock"],function(X,O,I,J,z){return function(){function Y(){this._workerThread=null;this._destroyed=!1}var R=Y.prototype;R.initialize=function(){var P=X._asyncToGenerator(function*(){const T=yield J.open("RasterWorker");this._destroyed?T.close():this._workerThread=T});return function(){return P.apply(this,arguments)}}();R.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};R.convertVectorFieldData=
function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");return(T=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:T.pixelBlock.toJSON(),type:T.dataType},x))?new z(T):null});return function(T,x){return P.apply(this,arguments)}}();R.decode=function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");
return(T=yield this._workerThread.invoke("decode",T,x))?new z(T):null});return function(T,x){return P.apply(this,arguments)}}();R.symbolize=function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");T={extent:T.extent&&T.extent.toJSON(),pixelBlock:I.isSome(T.pixelBlock)&&T.pixelBlock.toJSON(),simpleStretchParams:T.simpleStretchParams,bandIds:T.bandIds};return(x=yield this._workerThread.invoke("symbolize",
T,x))?new z(x):null});return function(T,x){return P.apply(this,arguments)}}();R.updateSymbolizer=function(){var P=X._asyncToGenerator(function*(T,x){var m;if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");const a=null==T?void 0:null==(m=T.rendererJSON)?void 0:m.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:T.toJSON(),histograms:a},x))});return function(T,x){return P.apply(this,arguments)}}();R.stretch=
function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");if(null==T||!T.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON(),stretchParams:T.stretchParams};return(x=yield this._workerThread.invoke("stretch",T,x))?new z(x):null});return function(T,x){return P.apply(this,arguments)}}();R.split=function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection",
"no available worker connection");if(null==T||!T.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON(),tileSize:T.tileSize,maximumPyramidLevel:T.maximumPyramidLevel};const m=yield this._workerThread.invoke("split",T,x);m&&m.forEach((a,n)=>{m.set(n,a?z.fromJSON(a):null)});return m});return function(T,x){return P.apply(this,arguments)}}();R.estimateStatisticsHistograms=function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");
if(null==T||!T.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON()};return yield this._workerThread.invoke("estimateStatisticsHistograms",T,x)});return function(T,x){return P.apply(this,arguments)}}();R.mosaicAndTransform=function(){var P=X._asyncToGenerator(function*(T,x){var m;if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");if(null==T||null==(m=T.srcPixelBlocks)||!m.length)return{pixelBlock:null};T={...T,srcPixelBlocks:T.srcPixelBlocks.map(a=>
I.isSome(a)?a.toJSON():null)};x=yield this._workerThread.invoke("mosaicAndTransform",T,x);return{pixelBlock:x.pixelBlock?new z(x.pixelBlock):null,localNorthDirections:x.localNorthDirections}});return function(T,x){return P.apply(this,arguments)}}();R.createFlowMesh=function(){var P=X._asyncToGenerator(function*(T,x){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");const m={buffer:T.flowData.data.buffer,maskBuffer:T.flowData.mask.buffer,width:T.flowData.width,
height:T.flowData.height},{meshType:a,simulationSettings:n}=T;T=yield this._workerThread.invoke("createFlowMesh",{meshType:a,flowData:m,simulationSettings:n},{...x,transferList:[m.buffer,m.maskBuffer]});return{vertexData:new Float32Array(T.vertexBuffer),indexData:new Uint32Array(T.indexBuffer)}});return function(T,x){return P.apply(this,arguments)}}();R.getProjectionOffsetGrid=function(P,T){if(!this._workerThread)throw new O("raster-jobhandler:no-connection","no available worker connection");const x=
I.isSome(P.datumTransformation)?P.datumTransformation.steps.map(a=>({wkid:a.wkid,wkt:a.wkt,isInverse:a.isInverse})):null,m=I.isSome(P.rasterTransform)?P.rasterTransform.toJSON():null;P={projectedExtent:P.projectedExtent.toJSON(),srcBufferExtent:P.srcBufferExtent.toJSON(),pixelSize:P.pixelSize,hasWrapAround:P.hasWrapAround,spacing:P.spacing,datumTransformationSteps:x,rasterTransform:m,isAdaptive:P.isAdaptive,includeGCSGrid:P.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",
P,T)};return Y}()})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F){var w;I=new I.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});J=w=function(B){function D(f){f=B.call(this,f)||this;f.dpi=96;f.format=null;f.origin=null;f.minScale=0;f.maxScale=0;f.size=null;f.spatialReference=null;return f}X._inheritsLoose(D,B);D.create=function(f=
{}){const {resolutionFactor:e=1,scales:d,size:k=256,spatialReference:p=t.WebMercator,numLODs:u=24}=f;if(!l.isValid(p)){f=[];if(d)for(var E=0;E<d.length;E++){var c=d[E];f.push({level:E,scale:c,resolution:c})}else for(E=5E-4,c=u-1;0<=c;c--)f.unshift({level:c,scale:E,resolution:E}),E*=2;return new w({dpi:96,lods:f,origin:new y(0,0,p),size:[k,k],spatialReference:p})}E=l.getInfo(p);f=f.origin?new y({x:f.origin.x,y:f.origin.y,spatialReference:p}):E?new y({x:E.origin[0],y:E.origin[1],spatialReference:p}):
new y({x:0,y:0,spatialReference:p});E=1/(39.37*Y.getMetersPerUnitForSR(p)*96);c=[];if(d)for(var g=0;g<d.length;g++){var h=d[g];c.push({level:g,scale:h,resolution:h*E})}else{var r=l.isGeographic(p)?512/k*5.916575275917094E8:256/k*5.91657527591555E8;g=Math.ceil(u/e);c.push({level:0,scale:r,resolution:r*E});for(h=1;h<g;h++)r/=2**e,c.push({level:h,scale:r,resolution:r*E})}return new w({dpi:96,lods:c,origin:f,size:[k,k],spatialReference:p})};var K=D.prototype;K.readOrigin=function(f,e){return y.fromJSON({spatialReference:e.spatialReference,
...f})};K.readSize=function(f,e){return[e.cols,e.rows]};K.writeSize=function(f,e){e.cols=f[0];e.rows=f[1]};K.zoomToScale=function(f){const e=this.scales;if(0>=f)return e[0];if(f>=e.length-1)return e[e.length-1];{const d=Math.floor(f);return e[d]/(e[d]/e[d+1])**(f-d)}};K.scaleToZoom=function(f){const e=this.scales,d=e.length-1;let k=0;for(;k<d;k++){const p=e[k],u=e[k+1];if(p<=f)break;if(u===f)return k+1;if(p>f&&u<f)return k+Math.log(p/f)/Math.log(p/u)}return k};K.snapScale=function(f,e=.95){f=this.scaleToZoom(f);
return f%Math.floor(f)>=e?this.zoomToScale(Math.ceil(f)):this.zoomToScale(Math.floor(f))};K.tileAt=function(f,e,d,k){var p=this.lodAt(f);if(!p)return null;let u;if("number"===typeof e)u=e,e=d;else{if(l.equals(e.spatialReference,this.spatialReference))u=e.x,e=e.y;else{k=v.project(e,this.spatialReference);if(z.isNone(k))return null;u=k.x;e=k.y}k=d}d=p.resolution*this.size[0];p=p.resolution*this.size[1];k||(k={id:null,level:0,row:0,col:0,extent:b.create()});k.level=f;k.row=Math.floor((this.origin.y-
e)/p+.001);k.col=Math.floor((u-this.origin.x)/d+.001);this.updateTileInfo(k);return k};K.updateTileInfo=function(f,e=w.ExtrapolateOptions.NONE){var d=this.lodAt(f.level);d||e!==w.ExtrapolateOptions.POWER_OF_TWO||(e=this.lods[this.lods.length-1],e.level<f.level&&(d=e));if(d){var k=f.level-d.level;e=d.resolution*this.size[0]/2**k;d=d.resolution*this.size[1]/2**k;f.id=`${f.level}/${f.row}/${f.col}`;f.extent||(f.extent=b.create());f.extent[0]=this.origin.x+f.col*e;f.extent[1]=this.origin.y-(f.row+1)*
d;f.extent[2]=f.extent[0]+e;f.extent[3]=f.extent[1]+d}};K.upsampleTile=function(f){const e=this._upsampleLevels[f.level];if(!e||-1===e.parentLevel)return!1;f.level=e.parentLevel;f.row=Math.floor(f.row/e.factor+.001);f.col=Math.floor(f.col/e.factor+.001);this.updateTileInfo(f);return!0};K.getTileBounds=function(f,e){var {resolution:d}=this.lodAt(e.level);const k=d*this.size[0];d*=this.size[1];f[0]=this.origin.x+e.col*k;f[1]=this.origin.y-(e.row+1)*d;f[2]=f[0]+k;f[3]=f[1]+d;return f};K.lodAt=function(f){return this._levelToLOD&&
this._levelToLOD[f]||null};K.clone=function(){return w.fromJSON(this.write({}))};K.getOrCreateCompatible=function(f,e){if(256===this.size[0]&&256===this.size[1])return 256===f?this:null;const d=[],k=this.lods.length;for(let p=0;p<k;p++){const u=this.lods[p];d.push(new F({level:u.level,scale:u.scale,resolution:u.resolution*e}))}return new w({size:[f,f],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:d})};K._initializeUpsampleLevels=
function(){const f=this.lods;this._upsampleLevels=[];let e=null;for(let d=0;d<f.length;d++){const k=f[d];this._upsampleLevels[k.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/k.resolution:0};e=k}};X._createClass(D,[{key:"isWrappable",get:function(){const {spatialReference:f,origin:e}=this;if(f&&e){const d=l.getInfo(f);return f.isWrappable&&Math.abs(d.origin[0]-e.x)<=d.dx}return!1}},{key:"lods",set:function(f){let e=0,d=0;const k=[];this._levelToLOD={};f&&(e=-Infinity,d=Infinity,f.forEach(p=>
{k.push(p.scale);e=p.scale>e?p.scale:e;d=p.scale<d?p.scale:d;this._levelToLOD[p.level]=p}));this._set("scales",k);this._set("minScale",e);this._set("maxScale",d);this._set("lods",f);this._initializeUpsampleLevels()}}]);return D}(J.JSONSupport);O.__decorate([R.property({type:Number,json:{write:!0}})],J.prototype,"compressionQuality",void 0);O.__decorate([R.property({type:Number,json:{write:!0}})],J.prototype,"dpi",void 0);O.__decorate([R.property({type:String,json:{read:I.read,write:I.write,origins:{"web-scene":{read:!1,
write:!1}}}})],J.prototype,"format",void 0);O.__decorate([R.property({readOnly:!0})],J.prototype,"isWrappable",null);O.__decorate([R.property({type:y,json:{write:!0}})],J.prototype,"origin",void 0);O.__decorate([m.reader("origin")],J.prototype,"readOrigin",null);O.__decorate([R.property({type:[F],value:null,json:{write:!0}})],J.prototype,"lods",null);O.__decorate([R.property({readOnly:!0})],J.prototype,"minScale",void 0);O.__decorate([R.property({readOnly:!0})],J.prototype,"maxScale",void 0);O.__decorate([R.property({readOnly:!0})],
J.prototype,"scales",void 0);O.__decorate([R.property({cast:B=>Array.isArray(B)?B:"number"===typeof B?[B,B]:[256,256]})],J.prototype,"size",void 0);O.__decorate([m.reader("size",["rows","cols"])],J.prototype,"readSize",null);O.__decorate([n.writer("size",{cols:{type:x.Integer},rows:{type:x.Integer}})],J.prototype,"writeSize",null);O.__decorate([R.property({type:t,json:{write:!0}})],J.prototype,"spatialReference",void 0);J=w=O.__decorate([a.subclass("esri.layers.support.TileInfo")],J);(function(B){B=
B.ExtrapolateOptions||(B.ExtrapolateOptions={});B[B.NONE=0]="NONE";B[B.POWER_OF_TWO=1]="POWER_OF_TWO"})(J||(J={}));return J})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(X,O,I,J,z,Y,R,P){var T;I=T=function(x){function m(a){a=
x.call(this,a)||this;a.cols=null;a.level=0;a.levelValue=null;a.origin=null;a.resolution=0;a.rows=null;a.scale=0;return a}X._inheritsLoose(m,x);m.prototype.clone=function(){return new T({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return m}(I.JSONSupport);O.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"cols",void 0);O.__decorate([J.property({type:R.Integer,
json:{write:!0}})],I.prototype,"level",void 0);O.__decorate([J.property({type:String,json:{write:!0}})],I.prototype,"levelValue",void 0);O.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"origin",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"resolution",void 0);O.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,
"rows",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"scale",void 0);return I=T=O.__decorate([P.subclass("esri.layers.support.LOD")],I)})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/maybe","../DimensionalDefinition"],function(X,O,I){function J(R,P,T){const x=P.shift();0===T.length&&T.push({sliceId:-1,multidimensionalDefinition:[]});const m=T.length;for(let a=0;a<m;a++){const n=T.shift().multidimensionalDefinition;
x.values.forEach(y=>{T.push({sliceId:-1,multidimensionalDefinition:[...n,{variableName:R,dimensionName:x.name,values:[y]}]})})}P.length&&J(R,P,T)}function z(R,P){var T,{values:x}=P;if(null!=x&&x.length)return Array.isArray(x[0])!==Array.isArray(R)?-1:Array.isArray(x[0])?x.findIndex(n=>n[0]===R[0]&&n[1]===R[1]):x.indexOf(R);var {extent:m}=P;if(Array.isArray(R)||R<m[0]||R>m[1])return-1;x=P.interval||1;if("ISO8601"!==P.unit)return Math.round((R-m[0])/x);m=m[0];let a=-1;switch((null==(T=P.intervalUnit)?
void 0:T.toLowerCase())||"seconds"){case "seconds":a=Math.round((R-m)/1E3/x);break;case "minutes":a=Math.round((R-m)/6E4/x);break;case "hours":a=Math.round((R-m)/36E5/x);break;case "days":a=Math.round((R-m)/864E5/x);break;case "months":P=(new Date(R)).getUTCFullYear()-(new Date(m)).getUTCFullYear();T=(new Date(m)).getUTCMonth();x=(new Date(R)).getUTCMonth();a=0===P?x-T:x+11-T+12*(P-1);break;case "years":a=Math.round(((new Date(R)).getUTCFullYear()-(new Date(m)).getUTCFullYear())/x);break;case "decades":a=
Math.round(((new Date(R)).getUTCFullYear()-(new Date(m)).getUTCFullYear())/10/x)}return a}function Y(R){var P,T,x,m=null==(P=R.values)?void 0:P.length;if(m)return m;const {extent:a,unit:n}=R;P=R.interval||1;m=a[1]-a[0];if("ISO8601"!==n)return Math.round(m/P);switch(null!=(T=null==(x=R.intervalUnit)?void 0:x.toLowerCase())?T:"seconds"){case "seconds":m=Math.round(m/1E3/P);break;case "minutes":m=Math.round(m/6E4/P);break;case "hours":m=Math.round(m/36E5/P);break;case "days":m=Math.round(m/864E5/P);
break;case "months":R=(new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear();T=(new Date(a[1][0])).getUTCMonth();x=(new Date(a[1][1])).getUTCMonth();m=0===R?x-T+1:x+11-T+12*(R-1)+1;break;case "years":m=Math.round(((new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear())/P);break;case "decades":m=Math.round(((new Date(a[1])).getUTCFullYear()-(new Date(a[0])).getUTCFullYear())/10/P);break;default:m=0}return m}X.createSlices=function(R,P){const T=[];let x=0;(P?R.variables.filter(m=>
m.name.toLowerCase()===P.toLowerCase()):[...R.variables].sort((m,a)=>m.name>a.name?1:-1)).forEach(m=>{const a=[],n=[...m.dimensions].sort((y,t)=>y.name>t.name?-1:1);J(m.name,n,a);a.forEach(y=>{T.push({...y,sliceId:x++})})});return T};X.getDefaultMultidimensionalDefinition=function(R,P){var T;const {multidimensionalInfo:x,keyProperties:m}=R;if(O.isNone(x))return null;const a=null==m?void 0:m.DefaultVariable;({variables:R}=x);const n=a?null!=(T=R.find(({name:y})=>y===a))?T:R[0]:R[0];return n.dimensions.map(y=>
{var t;const {values:b,extent:l}=y;let v=null!=(t=null==b?void 0:b[0])?t:l[0];"stdz"===y.name.toLowerCase()&&!y.hasRanges&&Math.abs(l[1])<=Math.abs(l[0])&&(v=null!=b&&b.length?y.values[b.length-1]:l[1]);return new I({variableName:n.name,dimensionName:y.name,values:[v],isSlice:P?!!y.hasRanges:!0})})};X.getSliceIds=function(R,P,T){let x=R;P&&(P=[...P].sort((m,a)=>m.dimensionName<a.dimensionName?-1:1),P.forEach(({dimensionName:m,values:a,isSlice:n})=>{a.length&&(x=x.filter(y=>{y=y.multidimensionalDefinition.find(b=>
b.dimensionName===m);if(null==y)return!1;const t=y.values[0];return"number"===typeof t?"number"===typeof a[0]?a.includes(t):a.some(b=>b[0]<=t&&b[1]>=t):"number"===typeof a[0]?a.some(b=>t[0]<=b&&t[1]>=b):n?a.some(b=>b[0]===t[0]&&b[0]===t[1]):a.some(b=>b[0]>=t[0]&&b[0]<=t[1]||b[1]>=t[0]&&b[1]<=t[1]||b[0]<t[0]&&b[1]>t[1])}))}));if(x.length&&T&&O.isSome(T.start)&&O.isSome(T.end)){const m=T.start.getTime(),a=T.end.getTime(),n=x[0].multidimensionalDefinition.findIndex(y=>"StdTime"===y.dimensionName);-1<
n&&(x=x.filter(y=>{y=y.multidimensionalDefinition[n].values[0];return m<=y&&a>=y}))}return x.map(m=>m.sliceId)};X.getSliceIndex=function(R,P){let T=0;var x=R[0].variableName;P=[...P.variables].sort((a,n)=>a.name>n.name?1:-1);for(var m=0;m<P.length;m++){const a=P[m],n=[...a.dimensions].sort((y,t)=>y.name>t.name?-1:1);if(a.name!==x)T+=n.map(y=>Y(y)).reduce((y,t)=>y*t);else{x=n.map(y=>Y(y));P=n.length;for(let y=0;y<P;y++){m=R.find(t=>t.dimensionName===n[y].name);if(null==m)return null;m=z(m.values[0],
n[y]);if(-1===m)return null;x.shift();T=y===P-1?T+m:T+m*x.reduce((t,b)=>t*b)}break}}return T};X.isMultiSliceOrRangeDefinition=function(R){return O.isNone(R)||!R.length?!1:R.some(P=>{if(null==P.values)return!0;const T=P.values.length;return 0===T||1<T||!P.isSlice&&Array.isArray(P.values[0])})};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D){function K(L,U){var ca,ba,da,ea;L=f(L,null==U?void 0:U.variableName);const {bandCount:fa}=L;let {bandIds:ja,stretchType:ha}=U||{};null!=(ca=ja)&&ca.some(na=>na>=fa)&&(ja=null);let la=J.unwrap(L.statistics),ia=J.unwrap(L.histograms);if(1<fa){var ka;ja=null!=(ka=ja)&&ka.length?ja:e(L);la=null==la?null:ja.map(na=>la[na]);ia=null==ia?null:ja.map(na=>ia[na])}else ja=[0];null==ha&&(ha=k(L));ca=!1;switch(ha){case "none":ca=!1;break;case "percent-clip":ca=
!(null!=(ba=ia)&&ba.length);break;default:ca=!(null!=(da=la)&&da.length)}({dataType:ba}=L);ba=1===(null==(ea=ja)?void 0:ea.length)&&V.has(ba)?W:null;ea=new l({stretchType:ha,dynamicRangeAdjustment:ca,colorRamp:ba,outputMin:0,outputMax:255,gamma:1===ja.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ha?ea.maxPercent=ea.minPercent=.25:"standard-deviation"===ha&&(ea.numberOfStandardDeviations=2);if(!ca&&(J.isSome(L.multidimensionalInfo)||null!=U&&U.includeStatisticsInStretch))if("percent-clip"===ha)ea.histograms=
ia;else if("min-max"===ha||"standard-deviation"===ha)ea.statistics=la;return ea}function f(L,U){if(null==U)return L;let ca=J.unwrap(L.statistics),ba=J.unwrap(L.histograms);var {multidimensionalInfo:da}=L;if(U&&J.isSome(da)&&(da=da.variables.find(ea=>ea.name===U))){const {statistics:ea,histograms:fa}=da;null!=ea&&ea.length&&(ca=ea);null!=fa&&fa.length&&(ba=fa)}return R.fromJSON({...L.toJSON(),statistics:ca,histograms:ba})}function e(L){const U=L.bandCount;if(1===U)return null;if(2===U)return[0];L=
L.keyProperties&&L.keyProperties.BandProperties;let ca;if(L&&L.length===U){const {red:ba,green:da,blue:ea,nir:fa}=d(L);null!=ba&&null!=da&&null!=ea?ca=[ba,da,ea]:null!=fa&&null!=ba&&null!=da&&(ca=[fa,ba,da])}!ca&&3<=U&&(ca=[0,1,2]);return ca}function d(L){const U={};for(let ea=0;ea<L.length;ea++){var ca,ba=L[ea],da=null==(ca=ba.BandName)?void 0:ca.toLowerCase();"red"===da?U.red=ea:"green"===da?U.green=ea:"blue"===da?U.blue=ea:"nearinfrared"===da||"nearinfrared_1"===da||"nir"===da?U.nir=ea:ba.WavelengthMax&&
ba.WavelengthMin&&(da=ba.WavelengthMin,ba=ba.WavelengthMax,null==U.blue&&410<=da&&480>=da&&480<=ba&&540>=ba?U.blue=ea:null==U.green&&490<=da&&560>=da&&560<=ba&&610>=ba?U.green=ea:null==U.red&&595<=da&&670>=da&&660<=ba&&730>=ba?U.red=ea:null==U.nir&&700<=da&&860>=da&&800<=ba&&950>=ba&&(U.nir=ea))}return U}function k(L){let U="percent-clip";const {pixelType:ca,dataType:ba,histograms:da,statistics:ea}=L;"u8"!==ca||"processed"!==ba&&J.isSome(da)&&J.isSome(ea)?"u8"===ca||"elevation"===ba||V.has(ba)?U=
"min-max":J.isSome(da)?U="percent-clip":J.isSome(ea)&&(U="min-max"):U="none";return U}function p(L,U,ca,ba){if(!g(L,U))return null;const {attributeTable:da,statistics:ea}=L,fa=u(da,U),ja=c(da,"red"),ha=c(da,"green"),la=c(da,"blue");L=new T;const ia=[],ka=new Set,na=!!(ja&&ha&&la);if(J.isSome(da))da.features.forEach(ma=>{var oa=ma.attributes[fa.name];ka.has(ma.attributes[fa.name])||null==oa||(ka.add(oa),oa=!na||"single"!==ja.type&&"double"!==ja.type||"single"!==ha.type&&"double"!==ha.type||"single"!==
la.type&&"double"!==la.type||da.features.some(pa=>1<pa.attributes[ja.name]||1<pa.attributes[ha.name]||1<pa.attributes[la.name])?1:255,ia.push(new a({value:ma.attributes[fa.name],label:ma.attributes[fa.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:na?new O([ma.attributes[ja.name]*oa,ma.attributes[ha.name]*oa,ma.attributes[la.name]*oa,1]):new O([0,0,0,0])}})))});else if(null!=ea&&ea[0])for(U=ea[0].min;U<=ea[0].max;U++)ia.push(new a({value:U,label:U.toString(),symbol:{type:"simple-fill",
style:"solid",outline:null,color:new O([0,0,0,0])}}));ia.sort((ma,oa)=>ma.value&&"string"===typeof ma.value.valueOf()?0:ma.value>oa.value?1:-1);if(!na){const ma=m.convertColorRampToColormap(aa,ia.length);ia.forEach((oa,pa)=>oa.symbol.color=new O(ma[pa].slice(1,4)));L.colorRamp=aa}if(ca||ba){const ma=ca||m.convertColorRampToColormap(ba,ia.length).map(oa=>oa.slice(1));ia.forEach((oa,pa)=>oa.symbol.color=new O(ma[pa]));L.colorRamp=ba}return new v({field:fa.name,uniqueValueInfos:ia,authoringInfo:L})}
function u(L,U,ca){let ba;J.isSome(L)?(ba=U?L.fields.find(da=>U.toLowerCase()===da.name.toLowerCase()):E(L.fields),ba||(ca||(ba=L.fields.find(da=>"string"===da.type)),ba||(ba=c(L,"value")))):ba=new Y({name:"value"});return ba}function E(L){let U;for(let ca=0;ca<L.length;ca++){const ba=L[ca].name.toLowerCase();if("string"===L[ca].type){if(ba.startsWith("class")){U=L[ca];break}null==U&&(ba.endsWith("name")||ba.endsWith("type"))&&(U=L[ca])}}return U}function c(L,U){return J.isNone(L)?null:L.fields.find(ca=>
ca.name.toLowerCase()===U)}function g(L,U){const {attributeTable:ca,bandCount:ba}=L;return J.isNone(ca)&&G(L)?!0:J.isNone(ca)||1<ba||U&&null==ca.fields.find(da=>da.name.toLowerCase()===U.toLowerCase())?!1:!0}function h(L){const {bandCount:U,colormap:ca}=L;return J.isSome(ca)&&ca.length&&1===U}function r(L){if(!h(L))return null;let U;const {attributeTable:ca,colormap:ba}=L;if(J.isSome(ca)){const da=c(ca,"value"),ea=u(ca,null,!0);"string"===ea.type&&(U={},ca.features.forEach(fa=>{fa=fa.attributes;U[fa[da.name]]=
ea?fa[ea.name]:fa[da.name]}))}return F.createFromColormap(J.unwrap(ba),U)}function A(L){const {bandCount:U,dataType:ca,pixelType:ba}=L;return"elevation"===ca||"generic"===ca&&1===U&&("s16"===ba||"f32"===ba||"f64"===ba)}function Q(L){const {attributeTable:U,bandCount:ca}=L;return 1===ca&&(J.isSome(U)||J.isSome(L.histograms))}function C(L,U,ca){let ba=0,da=0;J.isSome(L.attributeTable)?(L=L.attributeTable,ba=da=L.features[0].attributes[U.name],L.features.forEach(ea=>{ea=ea.attributes[U.name];ea<ba&&
(ba=ea);ea>da&&(da=ea)})):J.isSome(L.histograms)&&(L=L.histograms,ba=L[0].min,da=L[0].max);return(da-ba)/ca}function G(L){var U,ca,ba;return["u8","s8"].includes(L.pixelType)&&null!=(null==(U=L.statistics)?void 0:null==(ca=U[0])?void 0:ca.min)&&null!=(null==(ba=L.statistics[0])?void 0:ba.max)&&1===L.bandCount}function S(L){({dataType:L}=L);return"vector-uv"===L||"vector-magdir"===L}function N(L){({dataType:L}=L);return"vector-uv"===L||"vector-magdir"===L}function q(L){if(!S(L))return null;if(J.isSome(L.statistics)&&
L.statistics.length&&("vector-magdir"===L.dataType||"vector-uv"===L.dataType)){const {minMagnitude:ca,maxMagnitude:ba}=M(L.dataType,L.statistics);var U=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:ca,maxDataValue:ba}]}L=J.isSome(L.multidimensionalInfo)?Z.get(L.multidimensionalInfo.variables[0].unit):null;U=new D({visualVariables:U,inputUnit:L,rotationType:"geographic"});U.visualVariables=[...U.sizeVariables,...U.rotationVariables];return U}function H(L){var U;return{color:null==
(U=L.symbolLayers[0].material)?void 0:U.color,type:"esriSFS",style:"esriSFSSolid"}}function M(L,U){if("vector-magdir"===L)L=U[0].min,U=U[0].max;else{const ca=U[0].min,ba=U[0].max,da=U[1].min;U=U[1].max;L=0;U=Math.max(Math.abs(ca),Math.abs(da),Math.abs(ba),Math.abs(U))}return{minMagnitude:L,maxMagnitude:U}}const W=b.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),aa=b.fromJSON(m.PREDEFINED_JSON_COLOR_RAMPS[0]),
V=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),Z=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);X.createClassBreaksRenderer=function(L,U){L=f(L,null==U?void 0:U.variableName);const {attributeTable:ca}=L;if(!Q(L))return null;const ba=J.isSome(L.histograms)?L.histograms[0]:null,da=isFinite(null==U?void 0:U.numClasses)?U.numClasses:5,
ea=new T({classificationMethod:null==U?void 0:U.classificationMethod,colorRamp:null==U?void 0:U.colorRamp});let fa=(null==U?void 0:U.field)||"value";const ja=[],ha=[],la=J.isSome(ca),ia=la&&ca.fields.find(pa=>"count"===pa.name.toLowerCase()),ka=la&&ca.fields.find(pa=>pa.name.toLowerCase()===fa.toLowerCase());if(ka){fa=ka.name;const pa=ca.features.length;let ta=0;ca.features.forEach(sa=>ta+=(ia?sa.attributes[ia.name]:50)/pa);ca.features.forEach(sa=>{const ra=sa.attributes[ka.name];sa=ia?sa.attributes[ia.name]:
50;if(0<sa){ha.push(sa);sa=Math.max(1,Math.round(sa/pa/ta*1E3));for(let ua=0;ua<sa;ua++)ja.push(ra)}})}else{var {pixelType:na}=L;const pa=(ba.max-ba.min)/ba.size,ta=(na=na.includes("s")||na.includes("u"))&&1===pa?Math.floor(ba.min+.5):ba.min,sa=na&&1===pa?Math.floor(ba.max-.5):ba.max,ra=ba.size;let ua=0,xa;ba.counts.forEach(va=>ua+=va/ra);ba.counts.forEach((va,wa)=>{if(0<va)for(ha.push(va),va=Math.max(1,Math.round(va/ra/ua*1E3)),xa=la?ca.features[wa].attributes[ka.name]:0===wa?ta:wa===ra-1?sa:ba.min+
pa*(wa+.5),wa=0;wa<va;wa++)ja.push(xa)})}na=(null==U?void 0:U.classificationMethod)||"natural-breaks";let ma=null==U?void 0:U.definedInterval;"defined-interval"!==na||ma||(ma=C(L,ka,da));L=t.createGenerateRendererClassBreaks({values:ja,valueFrequency:ha,normalizationTotal:null,definition:new y({classificationMethod:na,breakCount:da,definedInterval:ma})});let oa=null==U?void 0:U.colors;oa||(U=(null==U?void 0:U.colorRamp)||W,ea.colorRamp=U,oa=m.convertColorRampToColormap(U,L.classBreaks.length,!0).map(pa=>
pa.slice(1)));U=L.classBreaks.map((pa,ta)=>new x({minValue:pa.minValue,maxValue:pa.maxValue,label:pa.label,symbol:{type:"simple-fill",color:oa[ta]}}));return new B({field:fa,classBreakInfos:U,authoringInfo:ea})};X.createColorRamp=function(L){const U=[];for(let ca=0;ca<L.length-1;ca++)U[ca]=new n({algorithm:"hsv",fromColor:L[ca],toColor:L[ca+1]||new O({r:255,g:255,b:255,a:1})});return 2<L.length?new b({colorRamps:U}):U[0]};X.createColormapRenderer=r;X.createDefaultRenderer=function(L,U){const {attributeTable:ca,
colormap:ba}=L;if(S(L)){var da=q(L);if(J.isSome(da))return da}return J.isSome(ba)&&(da=r(L),J.isSome(da))||J.isSome(ca)&&(da=p(L),J.isSome(da))?da:K(L,U)};X.createFlowRenderer=function(L){if(!N(L))return null;let U;if(J.isSome(L.statistics)&&0<L.statistics.length&&("vector-magdir"===L.dataType||"vector-uv"===L.dataType)){const {minMagnitude:ca,maxMagnitude:ba}=M(L.dataType,L.statistics);U=[{type:"color",field:"Magnitude",stops:[{value:ca,color:"#1020C0"},{value:ba,color:"#C02010"}]}]}return new P({visualVariables:U})};
X.createShadedReliefRenderer=function(L,U){var ca;if(!A(L))return null;({extent:L}=L);L=L.width*z.getMetersPerUnitForSR(L.spatialReference);U=null!=(ca=U)?ca:"multi-directional";return new w({hillshadeType:U,scalingType:5E6<L?"adjusted":"none"})};X.createStretchRenderer=K;X.createUVRenderer=p;X.createVectorFieldRenderer=q;X.estimateMagnitudeRange=M;X.getBandNames=function(L,U){var ca;const ba=L.keyProperties&&L.keyProperties.BandProperties;U=null!=(ca=U)&&ca.length?U:Array.from(Array(L.bandCount).keys());
return U.map(da=>ba&&ba.length===L.bandCount?ba[da]&&ba[da].BandName||"band_"+(da+1):"band_"+(da+1))};X.getClassField=u;X.getDefaultBandCombination=e;X.getDefaultInterpolation=function(L,U,ca){const ba=["nearest","bilinear","cubic","majority"].find(da=>da===(null==ca?void 0:ca.toLowerCase()));return"Map"===U?null!=ba?ba:"bilinear":"standard-time"===L.dataType?null!=ba?ba:"nearest":"thematic"===L.dataType||L.attributeTable||L.colormap?"nearest"===ba||"majority"===ba?ba:"nearest":null!=ba?ba:"bilinear"};
X.getDefinedInterval=C;X.getField=c;X.getSupportedRendererTypes=function(L){const U=["raster-stretch"];h(L)&&U.push("raster-colormap");g(L)&&U.push("unique-value");Q(L)&&U.push("class-breaks");A(L)&&U.push("raster-shaded-relief");S(L)&&U.push("vector-field");N(L)&&U.push("flow");return U};X.getWellKnownBandIndexes=d;X.isClassBreaksSupported=Q;X.isColormapRendererSupported=h;X.isFlowRendererSupported=N;X.isShadedReliefRendererSupported=A;X.isSingleBand8BitRasterWithStats=G;X.isUVRendererSupported=
g;X.isVectorFieldRendererSupported=S;X.normalizeRendererJSON=function(L){if("uniqueValue"===L.type){var U,ca=L.uniqueValueInfos,ba=ca[0].symbol;null!=ba&&null!=(U=ba.symbolLayers)&&U.length&&(L.uniqueValueInfos=ca.map(da=>({value:da.value,label:da.label,symbol:da.symbol?H(da.symbol):null})));return L}"classBreaks"===L.type&&(U=L.classBreakInfos,ba=U[0].symbol,null!=ba&&null!=(ca=ba.symbolLayers)&&ca.length&&(L.classBreakInfos=U.map(da=>({classMinValue:da.classMinValue,classMaxValue:da.classMaxValue,
label:da.label,symbol:da.symbol?H(da.symbol):null}))));return L};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a){I=function(n){function y(t){t=n.call(this,t)||this;t.attributeTable=null;t.bandCount=null;t.colormap=null;t.extent=null;t.format=void 0;t.height=null;t.width=null;t.histograms=null;t.keyProperties={};t.multidimensionalInfo=null;t.noDataValue=null;t.pixelSize=null;t.pixelType=null;t.isPseudoSpatialReference=!1;t.spatialReference=null;t.statistics=null;t.storageInfo=null;t.transform=null;return t}X._inheritsLoose(y,n);X._createClass(y,[{key:"dataType",get:function(){var t,
b,l;const v=null!=(t=null==(b=this.keyProperties)?void 0:null==(l=b.DataType)?void 0:l.toLowerCase())?t:"generic";return"stdtime"===v?"standard-time":v}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(t){t&&this._set("nativeExtent",t)}},{key:"nativePixelSize",get:function(){if(J.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const t=this.nativeExtent;return{x:t.width/this.width,y:t.height/this.height}}},{key:"hasMultidimensionalTranspose",
get:function(){var t;return!(null==(t=this.storageInfo)||!t.transposeInfo)}}]);return y}(I.JSONSupport);O.__decorate([z.property({json:{write:!0}})],I.prototype,"attributeTable",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"bandCount",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"colormap",void 0);O.__decorate([z.property({type:String,readOnly:!0})],I.prototype,"dataType",null);O.__decorate([z.property({type:x,json:{write:!0}})],I.prototype,"extent",void 0);
O.__decorate([z.property({type:x,json:{write:!0}})],I.prototype,"nativeExtent",null);O.__decorate([z.property({json:{write:!0}})],I.prototype,"nativePixelSize",null);O.__decorate([z.property({json:{write:!0}})],I.prototype,"format",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"height",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"width",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"hasMultidimensionalTranspose",null);O.__decorate([z.property({json:{write:!0}})],
I.prototype,"histograms",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"keyProperties",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"multidimensionalInfo",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"noDataValue",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"pixelSize",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"pixelType",void 0);O.__decorate([z.property()],I.prototype,"isPseudoSpatialReference",
void 0);O.__decorate([z.property({type:m,json:{write:!0}})],I.prototype,"spatialReference",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"statistics",void 0);O.__decorate([z.property({type:a,json:{write:!0}})],I.prototype,"storageInfo",void 0);O.__decorate([z.property({json:{write:!0}})],I.prototype,"transform",void 0);return I=O.__decorate([T.subclass("esri.layers.support.RasterInfo")],I)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(X,O,I,J,z,Y,R,P,T){I=function(x){function m(){var a=x.apply(this,arguments)||this;a.blockWidth=void 0;a.blockHeight=void 0;a.compression=null;a.origin=null;a.firstPyramidLevel=null;a.maximumPyramidLevel=null;a.pyramidScalingFactor=2;a.pyramidBlockWidth=null;a.pyramidBlockHeight=null;a.isVirtualTileInfo=!1;a.tileInfo=null;a.transposeInfo=null;a.blockBoundary=null;return a}X._inheritsLoose(m,x);return m}(I.JSONSupport);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"blockWidth",
void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"blockHeight",void 0);O.__decorate([J.property({type:String,json:{write:!0}})],I.prototype,"compression",void 0);O.__decorate([J.property({type:T,json:{write:!0}})],I.prototype,"origin",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"firstPyramidLevel",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"maximumPyramidLevel",void 0);O.__decorate([J.property({json:{write:!0}})],
I.prototype,"pyramidResolutions",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"pyramidScalingFactor",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"pyramidBlockWidth",void 0);O.__decorate([J.property({type:Number,json:{write:!0}})],I.prototype,"pyramidBlockHeight",void 0);O.__decorate([J.property({type:Boolean,json:{write:!0}})],I.prototype,"isVirtualTileInfo",void 0);O.__decorate([J.property({json:{write:!0}})],I.prototype,"tileInfo",
void 0);O.__decorate([J.property()],I.prototype,"transposeInfo",void 0);O.__decorate([J.property()],I.prototype,"blockBoundary",void 0);return I=O.__decorate([P.subclass("esri.layers.support.RasterStorageInfo")],I)})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(X,O,I,J,z,Y,R,P,T){z=new I.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});I=new I.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});T=function(x){function m(){var a=x.apply(this,arguments)||this;a.breakCount=null;a.classificationField=
null;a.classificationMethod=null;a.normalizationField=null;a.normalizationType=null;a.type="class-breaks-definition";return a}X._inheritsLoose(m,x);X._createClass(m,[{key:"standardDeviationInterval",set:function(a){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",a)}},{key:"definedInterval",set:function(a){"defined-interval"===this.classificationMethod&&this._set("definedInterval",a)}}]);return m}(T);O.__decorate([J.property({json:{write:!0}})],T.prototype,"breakCount",
void 0);O.__decorate([J.property({json:{write:!0}})],T.prototype,"classificationField",void 0);O.__decorate([J.property({type:String,json:{read:z.read,write:z.write}})],T.prototype,"classificationMethod",void 0);O.__decorate([J.property({json:{write:!0}})],T.prototype,"normalizationField",void 0);O.__decorate([J.property({json:{read:I.read,write:I.write}})],T.prototype,"normalizationType",void 0);O.__decorate([J.property({value:null,json:{write:!0}})],T.prototype,"standardDeviationInterval",null);
O.__decorate([J.property({value:null,json:{write:!0}})],T.prototype,"definedInterval",null);O.__decorate([J.property()],T.prototype,"type",void 0);return T=O.__decorate([P.subclass("esri.rest.support.ClassBreaksDefinition")],T)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m){I=new I.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});J=function(a){function n(){var y=a.apply(this,arguments)||this;y.baseSymbol=null;y.colorRamp=null;y.type=null;return y}X._inheritsLoose(n,a);return n}(J.JSONSupport);O.__decorate([z.property({type:m,json:{write:!0}})],J.prototype,"baseSymbol",void 0);O.__decorate([z.property({types:x.types,json:{read:{reader:x.fromJSON},write:!0}})],J.prototype,"colorRamp",void 0);O.__decorate([z.property({json:{read:I.read,
write:I.write}})],J.prototype,"type",void 0);return J=O.__decorate([T.subclass("esri.rest.support.ClassificationDefinition")],J)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(X){function O(m){const {classificationMethod:a,breakCount:n,normalizationType:y,definedInterval:t}=m.definition,b=[];var l=m.values;if(0===l.length)return[];l=l.sort((K,f)=>K-f);var v=l[0],F=l[l.length-1];if("equal-interval"===a)if(l.length>=n){l=(F-v)/n;m=v;for(var w=1;w<n;w++){var B=Number((v+
w*l).toFixed(6));b.push({minValue:m,maxValue:B,label:I(m,B,y)});m=B}b.push({minValue:m,maxValue:F,label:I(m,F,y)})}else l.forEach(K=>{b.push({minValue:K,maxValue:K,label:I(K,K,y)})});else if("natural-breaks"===a){l=J(l);m=z(l.uniqueValues,m.valueFrequency||l.valueFrequency,n);for(w=1;w<n;w++)l.uniqueValues.length>w&&(B=Number(l.uniqueValues[m[w]].toFixed(6)),b.push({minValue:v,maxValue:B,label:I(v,B,y)}),v=B);b.push({minValue:v,maxValue:F,label:I(v,F,y)})}else if("quantile"===a)if(l.length>=n&&v!==
F){m=Math.ceil(l.length/n);w=0;for(B=1;B<n;B++){var D=m+w-1;D>l.length&&(D=l.length-1);0>D&&(D=0);b.push({minValue:v,maxValue:l[D],label:I(v,l[D],y)});v=l[D];w+=m;m=Math.ceil((l.length-w)/(n-B))}b.push({minValue:v,maxValue:F,label:I(v,F,y)})}else for(F=-1,v=0;v<l.length;v++)m=l[v],m!==F&&(F=m,b.push({minValue:F,maxValue:m,label:I(F,m,y)}),F=m);else if("standard-deviation"===a)if(m=P(l),w=T(l,m),0===w)b.push({minValue:l[0],maxValue:l[0],label:I(l[0],l[0],y)});else{l=R(v,F,n,m,w)*w;w=0;for(B=n;1<=B;B--)D=
Number((m-(B-.5)*l).toFixed(6)),b.push({minValue:v,maxValue:D,label:I(v,D,y)}),v=D,w++;B=Number((m+.5*l).toFixed(6));b.push({minValue:v,maxValue:B,label:I(v,B,y)});v=B;w++;for(D=1;D<=n;D++)B=w===2*n?F:Number((m+(D+.5)*l).toFixed(6)),b.push({minValue:v,maxValue:B,label:I(v,B,y)}),v=B,w++}else if("defined-interval"===a){if(!t)return b;F=l[0];l=l[l.length-1];v=Math.ceil((l-F)/t);m=F;for(w=1;w<v;w++)B=Number((F+w*t).toFixed(6)),b.push({minValue:m,maxValue:B,label:I(m,B,y)}),m=B;b.push({minValue:m,maxValue:l,
label:I(m,l,y)})}return b}function I(m,a,n){let y=null;return y=m===a?n&&"percent-of-total"===n?m+"%":m.toString():n&&"percent-of-total"===n?m+"% - "+a+"%":m+" - "+a}function J(m){const a=[],n=[];let y=Number.MIN_VALUE,t=1,b=-1;for(let l=0;l<m.length;l++){const v=m[l];v===y?(t++,n[b]=t):null!==v&&(a.push(v),y=v,t=1,n.push(t),b++)}return{uniqueValues:a,valueFrequency:n}}function z(m,a,n){var y=m.length;const t=[];n>y&&(n=y);for(var b=0;b<n;b++)t.push(Math.round(b*y/n-1));t.push(y-1);b=Y(t,m,a,n);{y=
b.mean;b=b.sdcm;var l=n,v=0,F=0;let B=0,D=0,K=!0;for(let f=0;2>f&&K;f++){0===f&&(K=!1);for(var w=0;w<l-1;w++)for(;t[w+1]+1!==t[w+2];)if(t[w+1]+=1,v=x(w,t,m,a),B=v.sbMean,v=v.sbSdcm,F=x(w+1,t,m,a),D=F.sbMean,F=F.sbSdcm,v+F<b[w]+b[w+1])b[w]=v,b[w+1]=F,y[w]=B,y[w+1]=D,K=!0;else{--t[w+1];break}for(w=l-1;0<w;w--)for(;t[w]!==t[w-1]+1;)if(--t[w],v=x(w-1,t,m,a),B=v.sbMean,v=v.sbSdcm,F=x(w,t,m,a),D=F.sbMean,F=F.sbSdcm,v+F<b[w-1]+b[w])b[w-1]=v,b[w]=F,y[w-1]=B,y[w]=D,K=!0;else{t[w]+=1;break}}y=K}y&&(b=Y(t,m,
a,n));return t}function Y(m,a,n,y){let t=[];var b=[],l=[];let v=0;const F=[],w=[];for(var B=0;B<y;B++){var D=x(B,m,a,n);F.push(D.sbMean);w.push(D.sbSdcm);v+=w[B]}D=v;for(B=!0;B||v<D;){B=!1;t=[];for(b=0;b<y;b++)t.push(m[b]);for(l=0;l<y;l++)for(D=m[l]+1;D<=m[l+1];D++)if(b=a[D],0<l&&D!==m[l+1]&&Math.abs(b-F[l])>Math.abs(b-F[l-1]))m[l]=D;else if(l<y-1&&m[l]!==D-1&&Math.abs(b-F[l])>Math.abs(b-F[l+1])){m[l+1]=D-1;break}D=v;v=0;b=[];l=[];for(let K=0;K<y;K++){b.push(F[K]);l.push(w[K]);const f=x(K,m,a,n);
F[K]=f.sbMean;w[K]=f.sbSdcm;v+=w[K]}}if(v>D){for(a=0;a<y;a++)m[a]=t[a],F[a]=b[a],w[a]=l[a];v=D}return{mean:F,sdcm:w}}function R(m,a,n,y,t){m=Math.max(y-m,a-y)/t/n;return 1<=m?1:.5<=m?.5:.25}function P(m){let a=0;for(let n=0;n<m.length;n++)a+=m[n];return a/=m.length}function T(m,a){let n=0;for(let y=0;y<m.length;y++){const t=m[y];n+=(t-a)*(t-a)}n/=m.length;return Math.sqrt(n)}function x(m,a,n,y){var t=0,b=0;for(var l=a[m]+1;l<=a[m+1];l++){const v=y[l];t+=n[l]*v;b+=v}0>=b&&console.log("Exception in Natural Breaks calculation");
t/=b;b=0;for(l=a[m]+1;l<=a[m+1];l++)b+=y[l]*(n[l]-t)**2;return{sbMean:t,sbSdcm:b}}X.createGenerateRendererClassBreaks=function(m){const {normalizationTotal:a}=m;return{classBreaks:O(m),normalizationTotal:a}};X.createGenerateRendererUniqueValues=function(m){m=J(m);const a=[],n=m.uniqueValues.length;for(let y=0;y<n;y++){const t=m.uniqueValues[y];a.push({value:t,count:m.valueFrequency[y],label:t.toString()})}return{uniqueValues:a}};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b){function l(B,D){const {attributeTable:K,bandCount:f}=B;return Y.isNone(K)||1<f||D&&null==K.fields.find(e=>e.name.toLowerCase()===D.toLowerCase())?!1:!0}function v(B){const {bandCount:D,colormap:K}=B;return Y.isSome(K)&&K.length&&1===D}function F(B){return n.isValidPixelBlock(B)&&0!==B.validPixelCount}const w=z.getLogger("esri.renderers.support.RasterSymbolizer");J=function(B){function D(f){return B.call(this,f)||this}X._inheritsLoose(D,B);var K=D.prototype;
K.bind=function(){const {rendererJSON:f}=this;if(!f)return{success:!1};this.lookup={rendererJSON:{}};let e;switch(f.type){case "uniqueValue":e=this._updateUVRenderer(f);break;case "rasterColormap":e=this._updateColormapRenderer(f);break;case "rasterStretch":e=this._updateStretchRenderer(f);break;case "classBreaks":e=this._updateClassBreaksRenderer(f);break;case "rasterShadedRelief":e=this._updateShadedReliefRenderer(f);break;case "vectorField":e=this._updateVectorFieldRenderer();break;case "flowRenderer":e=
this._updateFlowRenderer()}return e};K.symbolize=function(f){let e=f&&f.pixelBlock;if(!F(e))return e;if(f.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(e,f.simpleStretchParams);try{3<e.pixels.length&&(e=n.extractBands(e,[0,1,2]));let d;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":d=this._symbolizeColormap(e);break;case "classBreaks":d=this._symbolizeClassBreaks(e);break;case "rasterStretch":d=this._symbolizeStretch(e,f.bandIds);
break;case "rasterShadedRelief":({extent:f}=f),d=this._symbolizeShadedRelief(e,{isGCS:f.spatialReference.isGeographic,resolution:{x:(f.xmax-f.xmin)/e.width,y:(f.ymax-f.ymin)/e.height}})}return d}catch(d){return w.error("symbolize",d.message),e}};K.simpleStretch=function(f,e){if(!F(f))return f;try{return 3<f.pixels.length&&(f=n.extractBands(f,[0,1,2])),y.stretch(f,e)}catch(d){return w.error("symbolize",d.message),f}};K.generateWebGLParameters=function(f){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){var e;
const {indexedColormap:E,offset:c}=(null==(e=this.lookup)?void 0:e.colormapLut)||{};return{colormap:E,colormapOffset:c,type:"lut"}}const {pixelBlock:d,isGCS:k,resolution:p,bandIds:u}=f;({rendererJSON:f}=this);return"rasterStretch"===f.type?this._generateStretchWebGLParams(d,f,u):"rasterShadedRelief"===f.type?this._generateShadedReliefWebGLParams(f,k,p):"vectorField"===f.type?this._generateVectorFieldWebGLParams(f):null};K._isLUTChanged=function(f){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const e=this.rendererJSON.colorRamp;if(f)return JSON.stringify(e)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};K._symbolizeColormap=function(f){return this._isLUTChanged()&&!this.bind().success?f:n.colorize(f,this.lookup.colormapLut)};K._symbolizeClassBreaks=function(f){const {canUseIndexedLUT:e}=this._analyzeClassBreaks(this.rendererJSON);
return this._isLUTChanged()&&!this.bind().success?f:e?n.colorize(f,this.lookup.colormapLut):n.remapColor(f,this.lookup.remapLut)};K._symbolizeStretch=function(f,e){const {rasterInfo:d}=this,{pixelType:k,bandCount:p}=d,u=this.rendererJSON,E=["u8","u16","s8","s16"].includes(k);let c;var {dra:g}=u;({gamma:r}=this.lookup);if("histogramEqualization"===u.stretchType){var h=g?null:this.lookup.histogramLut;e=y.getStretchCutoff(u,{rasterInfo:d,pixelBlock:f,bandIds:e,returnHistogramLut:!h});var r=y.stretch(f,
{...e,gamma:r});r=n.lookupPixels(r,{lut:g?e.histogramLut:h,offset:0})}else if(E){var A;if(g)g=y.getStretchCutoff(u,{rasterInfo:d,pixelBlock:f,bandIds:e}),c=y.createStretchLUT({pixelType:k,...g,gamma:r});else{if(this._isLUTChanged()&&!this.bind().success)return f;c=this.lookup?this.lookup.stretchLut:null}if(!c)return f;1<p&&(null==e?void 0:e.length)===(null==(h=Y.unwrap(f))?void 0:h.pixels.length)&&(null==(A=c)?void 0:A.lut.length)===p&&(c={lut:e.map(Q=>c.lut[Q]),offset:c.offset});r=n.lookupPixels(f,
c)}else g=y.getStretchCutoff(u,{rasterInfo:d,pixelBlock:f,bandIds:e}),r=y.stretch(f,{...g,gamma:r});if(u.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return f;r=n.colorize(r,this.lookup.colormapLut)}return r};K._symbolizeShadedRelief=function(f,e){var d,k,p=this.rendererJSON;e=t.hillshade(f,{...p,...e});if(!p.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return e;p=this.lookup?this.lookup.hsvMap:null;if(!p)return e;const u=null!=(d=null==(k=Y.unwrap(this.rasterInfo.statistics))?
void 0:k[0])?d:{min:0,max:8E3};t.tintHillshade(e,f,p,u);return e};K._isVectorFieldData=function(){const {bandCount:f,dataType:e}=this.rasterInfo;return 2===f&&("vector-magdir"===e||"vector-uv"===e)};K._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};K._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:
{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};K._updateUVRenderer=function(f){const {bandCount:e,attributeTable:d,pixelType:k}=this.rasterInfo,p=f.field1;if(!p)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const u=f.defaultSymbol;var E=1===e&&["u8","s8"].includes(k);if(!l(this.rasterInfo,p)&&!E)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};
const c=[];if(d){const g=d.fields.find(h=>"value"===h.name.toLowerCase());if(!g)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};d.features.forEach(h=>{var r,A=f.uniqueValueInfos.find(Q=>String(Q.value)===String(h.attributes[p]));(A=null==A?void 0:null==(r=A.symbol)?void 0:r.color)?c.push([h.attributes[g.name]].concat(A)):u&&c.push([h.attributes[g.name]].concat(u.color))})}else{if("value"!==p.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};
f.uniqueValueInfos.forEach(g=>{var h;const r=null==g?void 0:null==(h=g.symbol)?void 0:h.color;r?c.push([parseInt(""+g.value,10)].concat(r)):u&&c.push([parseInt(""+g.value,10)].concat(u.color))})}if(0===c.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};E=n.createColormapLUT({colormap:c});this.lookup={rendererJSON:f,colormapLut:E};this.canRenderInWebGL=!0;return{success:!0}};K._updateColormapRenderer=function(f){if(!v(this.rasterInfo))return{success:!1,
error:"Unsupported data; the data source does not have a colormap."};var e=f.colormapInfos.map(d=>[d.value].concat(d.color)).sort((d,k)=>d[0]-k[0]);if(!e||0===e.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};e=n.createColormapLUT({colormap:e});this.lookup={rendererJSON:f,colormapLut:e};this.canRenderInWebGL=!0;return{success:!0}};K._updateShadedReliefRenderer=function(f){{const {bandCount:d,dataType:k,pixelType:p}=this.rasterInfo;var e=
"elevation"===k||"generic"===k&&1===d&&("s16"===p||"f32"===p||"f64"===p)}if(!e)return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(f.colorRamp){e=b.convertColorRampToColormap(f.colorRamp,256,!0);e=n.createColormapLUT({colormap:e});const d=[],k=e.indexedColormap;for(let p=0;p<k.length;p+=4){const u=I.toHSV({r:k[p],g:k[p+1],b:k[p+2]});d.push([u.h/60,u.s/100,255*u.v/100])}this.lookup={rendererJSON:f,
colormapLut:e,hsvMap:d}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};K._analyzeClassBreaks=function(f){const {attributeTable:e,pixelType:d}=this.rasterInfo,k=Y.isSome(e)?e.fields.find(E=>"value"===E.name.toLowerCase()):null,p=Y.isSome(e)?e.fields.find(E=>E.name.toLowerCase()===f.field.toLowerCase()):null,u=null!=k&&null!==p;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(d)||u,tableValueField:k,tableBreakField:p}};K._updateClassBreaksRenderer=function(f){var {attributeTable:e}=
this.rasterInfo;const {canUseIndexedLUT:d,tableValueField:k,tableBreakField:p}=this._analyzeClassBreaks(f);var u=f.classBreakInfos;if(null==u||!u.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};u=u.sort((r,A)=>r.classMaxValue-A.classMaxValue);var E=u[u.length-1],c=f.minValue;if(!d){var g=[];for(e=0;e<u.length;e++){var h;g.push({value:null!=(h=u[e].classMinValue)?h:c,mappedColor:u[e].symbol.color});c=u[e].classMaxValue}g.push({value:E.classMaxValue,
mappedColor:E.symbol.color});this.lookup={rendererJSON:f,remapLut:g};this.canRenderInWebGL=!1;return{success:!0}}h=[];if(null!=k&&null!==p&&k!==p){E=k.name;const r=p.name,A=u[u.length-1],{classMaxValue:Q}=A;c=f.minValue;for(g of e.features){e=g.attributes[E];const C=g.attributes[r],G=C===Q?A:C<c?null:u.find(({classMaxValue:S})=>S>C);G&&h.push([e].concat(G.symbol.color))}}else{c=Math.floor(f.minValue);for(g=0;g<u.length;g++){for(e=u[g];c<e.classMaxValue;c++)h.push([c].concat(e.symbol.color));c=Math.ceil(e.classMaxValue)}E.classMaxValue===
c&&h.push([E.classMaxValue].concat(E.symbol.color))}u=n.createColormapLUT({colormap:h,fillUnspecified:!1});this.lookup={rendererJSON:f,colormapLut:u};this.canRenderInWebGL=!0;return{success:!0}};K._isHistogramRequired=function(f){return"percentClip"===f||"histogramEqualization"===f};K._isValidRasterStatistics=function(f){return Y.isSome(f)&&0<f.length&&null!=f[0].min&&null!=f[0].max};K._updateStretchRenderer=function(f){var e,d,k;let {stretchType:p,dra:u}=f;if(!("none"===p||null!=(e=f.statistics)&&
e.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||u))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var E=Y.unwrap(f.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(f.stretchType)||null!=E&&E.length||u||(p="minMax");const {computeGamma:c,useGamma:g,colorRamp:h}=f;({gamma:e}=f);if(g&&c&&(null==(d=e)||!d.length)){var r;e=null!=(r=f.statistics)&&r.length?f.statistics:Y.unwrap(this.rasterInfo.statistics);
e=y.computeGammaValues(this.rasterInfo.pixelType,e)}r=this.rasterInfo.pixelType;d=!u&&["u8","u16","s8","s16"].includes(r);"histogramEqualization"===p?(E=E.map(A=>y.createHistogramEqualizationLUT(A)),this.lookup={rendererJSON:f,histogramLut:E}):d&&(E=y.getStretchCutoff(f,{rasterInfo:this.rasterInfo}),E=y.createStretchLUT({pixelType:r,...E,gamma:g?e:null}),this.lookup={rendererJSON:f,stretchLut:E});h&&(E=b.convertColorRampToColormap(h,256,!0),this.lookup||(this.lookup={rendererJSON:f}),this.lookup.colormapLut=
n.createColormapLUT({colormap:E}),this.lookup.rendererJSON=f);this.lookup.gamma=g&&null!=(k=e)&&k.length?e:null;this.canRenderInWebGL=!0;return{success:!0}};K._generateStretchWebGLParams=function(f,e,d){let k=null,p=null;var u=this.lookup&&this.lookup.colormapLut;e.colorRamp&&u&&(k=u.indexedColormap,p=u.offset);"histogramEqualization"===e.stretchType&&(e={...e,stretchType:"minMax"});({gamma:u}=this.lookup);const E=!!(e.useGamma&&u&&u.some(G=>1!==G)),{minCutOff:c,maxCutOff:g,outMin:h,outMax:r}=y.getStretchCutoff(e,
{rasterInfo:this.rasterInfo,pixelBlock:f,bandIds:d});var A=0;Y.isSome(f)&&(A=f.getPlaneCount(),2===A&&(f=f.clone(),f.statistics=[f.statistics[0]],f.pixels=[f.pixels[0]]));f=Math.min(3,(null==d?void 0:d.length)||A||this.rasterInfo.bandCount);d=new Float32Array(f);A=k||E?1:255;let Q;for(Q=0;Q<f;Q++)d[Q]=(r-h)/(g[Q]-c[Q])/A;const C=new Float32Array(f);if(E)for(Q=0;Q<f;Q++)C[Q]=1<u[Q]?2<u[Q]?6.5+(u[Q]-2)**2.5:6.5+100*(2-u[Q])**4:1;return{bandCount:f,outMin:h/A,outMax:r/A,minCutOff:c,maxCutOff:g,factor:d,
useGamma:E,gamma:E?u:[1,1,1],gammaCorrection:E?C:[1,1,1],colormap:k,colormapOffset:p,stretchType:e.stretchType,type:"stretch"}};K._generateShadedReliefWebGLParams=function(f,e,d){var k,p,u;let E=null,c=null;const g=this.lookup&&this.lookup.colormapLut;f.colorRamp&&g&&(E=g.indexedColormap,c=g.offset);e=t.calculateHillshadeParams({...f,isGCS:e,resolution:d});d=null==(k=Y.unwrap(this.rasterInfo.statistics))?void 0:k[0];return{...e,minValue:null!=(p=null==d?void 0:d.min)?p:0,maxValue:null!=(u=null==d?
void 0:d.max)?u:8E3,hillshadeType:"traditional"===f.hillshadeType?0:1,type:"hillshade",colormap:E,colormapOffset:c}};K._generateVectorFieldWebGLParams=function(f){var e,d,k,p,u,E,c,g;const {style:h,inputUnit:r,outputUnit:A,visualVariables:Q,symbolTileSize:C,flowRepresentation:G}=f;let S;var N=null!=(e=null==(d=this.rasterInfo.statistics)?void 0:d[0].min)?e:0;e=null!=(k=null==(p=this.rasterInfo.statistics)?void 0:p[0].max)?k:50;k=null!=(u=null==Q?void 0:Q.find(q=>"sizeInfo"===q.type))?u:{type:"sizeInfo",
field:"Magnitude",maxDataValue:e,maxSize:.8*C,minDataValue:N,minSize:.2*C};u=null!=(E=k.minDataValue)?E:N;N=null!=(c=k.maxDataValue)?c:e;c=Y.isSome(k.maxSize)&&Y.isSome(k.minSize)?[k.minSize/C,k.maxSize/C]:[.2,.8];"wind_speed"===h&&(c[0]=c[1]=(c[0]+c[1])/2);E=Y.isSome(u)&&Y.isSome(N)?[u,N]:null;if("classified_arrow"===h)if(Y.isSome(u)&&Y.isSome(N)&&Y.isSome(k))for(S=[],u=(k.maxDataValue-k.minDataValue)/5,N=0;6>N;N++)S.push(k.minDataValue+u*N);else S=[0,1E-6,3.5,7,10.5,14];k="flow_to"===G===("ocean_current_kn"===
h||"ocean_current_m"===h)?0:Math.PI;u=null==Q?void 0:Q.find(q=>"rotationInfo"===q.type);f=(null==(g=this.rasterInfo.storageInfo)?0:g.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==u?void 0:u.rotationType)||f.rotationType;return{breakValues:S,dataRange:E,inputUnit:r,outputUnit:A,symbolTileSize:C,symbolPercentRange:c,style:h||"single_arrow",rotation:k,rotationType:f,type:"vectorField"}};return D}(J.JSONSupport);O.__decorate([R.property({json:{write:!0}})],J.prototype,"rendererJSON",
void 0);O.__decorate([R.property({type:a,json:{write:!0}})],J.prototype,"rasterInfo",void 0);O.__decorate([R.property({json:{write:!0}})],J.prototype,"lookup",void 0);O.__decorate([R.property()],J.prototype,"canRenderInWebGL",void 0);return J=O.__decorate([m.subclass("esri.renderers.support.RasterSymbolizer")],J)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe"],function(X,O){function I(x,m=256){m=Math.min(m,256);const {size:a,counts:n}=x;x=
new Uint8Array(a);var y=n.reduce((F,w)=>F+w/m,0);let t=0;var b=0;let l=0,v=y;for(let F=0;F<a;F++)if(l+=n[F],!(F<a-1&&l+n[F+1]<v)){for(;t<m-1&&v<l;)t++,v+=y;for(;b<=F;b++)x[b]=t;b=F+1}for(y=b;y<a;y++)x[y]=m-1;return x}function J(x,m){x=Math.min(Math.max(x,-100),100);m=Math.min(Math.max(m,-100),100);let a,n;const y=new Uint8Array(256);for(a=0;256>a;a++)0<x&&100>x?n=(200*a-25500+510*m)/(2*(100-x))+128:0>=x&&-100<x?n=(200*a-25500+510*m)*(100+x)/2E4+128:100===x?(n=200*a-25500+256*(100-x)+510*m,n=0<n?255:
0):-100===x&&(n=128),y[a]=255<n?255:0>n?0:n;return y}function z(x){if(0>=x||255<=x)return 1;var m=0;150!==x&&(m=150>=x?45*Math.cos(.01047*x):17*Math.sin(.021*x));m=Math.log((x+m)/255);if(0===m)return 1;x=Math.log(x/255)/m;return isNaN(x)?1:Math.min(9.9,Math.max(.01,x))}function Y(x){var m;if(O.isNone(x)||null==(m=x.pixels)||!m.length)return null;x.statistics||x.updateStatistics();const {pixels:a,mask:n,pixelType:y,statistics:t}=x;x=x.width*x.height;m=a.length;let b,l;let v;var F;const w=[],B=[];for(v=
0;v<m;v++){var D=new Uint32Array(256);var K=a[v];if("u8"===y)if(b=-.5,l=255.5,n)for(F=0;F<x;F++)n[F]&&D[K[F]]++;else for(F=0;F<x;F++)D[K[F]]++;else{b=t[v].minValue;l=t[v].maxValue;var f=(l-b)/256;var e=new Uint32Array(257);if(n)for(F=0;F<x;F++)n[F]&&e[Math.floor((K[F]-b)/f)]++;else for(F=0;F<x;F++)e[Math.floor((K[F]-b)/f)]++;for(F=0;255>F;F++)D[F]=e[F];D[255]=e[255]+e[256]}w.push({min:b,max:l,size:256,counts:D});for(F=K=e=f=0;256>F;F++)f+=D[F],e+=F*D[F];e/=f;for(F=0;256>F;F++)K+=D[F]*(F-e)**2;D=Math.sqrt(K/
(f-1));f=(l-b)/256;F=(e+.5)*f+b;D*=f;B.push({min:b,max:l,avg:F,stddev:D})}return{statistics:B,histograms:w}}function R(x,m){if(null==m||0===m.length)return x;const a=Math.max.apply(null,m),{minCutOff:n,maxCutOff:y,outMin:t,outMax:b,histogramLut:l}=x;return n.length===m.length||n.length<=a?x:{minCutOff:m.map(v=>n[v]),maxCutOff:m.map(v=>y[v]),histogramLut:l?m.map(v=>l[v]):null,outMin:t,outMax:b}}const P={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],
s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},T=[.299,.587,.114];X.computeGammaValues=function(x,m,a){const n=[];for(let t=0;t<m.length;t++){let b=0,l=0;var y=0;"min"in m[t]?{min:b,max:l,avg:y}=m[t]:[b,l,y]=m[t];"u8"!==x&&(y=255*(y-b)/(l-b));a&&(y*=T[t]);n.push(z(y))}return n};X.createContrastBrightnessLUT=J;X.createHistogramEqualizationLUT=I;X.createStretchLUT=function(x){const {minCutOff:m,maxCutOff:a,gamma:n,pixelType:y}=x,t=x.outMin||0,b=x.outMax||
255;if(!["u8","u16","s8","s16"].includes(y))return null;const l=m.length;let v;let F=0;"s8"===y?F=-127:"s16"===y&&(F=-32767);let w=256;["u16","s16"].includes(y)&&(w=65536);const B=[],D=b-t;for(v=0;v<l;v++)B[v]=a[v]-m[v],D/(a[v]-m[v]);var K=n&&n.length>=l;const f=[];if(K)for(v=0;v<l;v++)f[v]=1<n[v]?2<n[v]?6.5+(n[v]-2)**2.5:6.5+100*(2-n[v])**4:1;let e;const d=[];let k,p,u;if(K)for(v=0;v<l;v++){u=[];for(K=0;K<w;K++)k=K+F,e=(k-m[v])/B[v],p=1,1<n[v]&&(p-=(1/D)**(e*f[v])),u[K]=k<a[v]&&k>m[v]?Math.floor(p*
D*e**(1/n[v]))+t:k>=a[v]?b:t;d[v]=u}else for(v=0;v<l;v++){u=[];for(K=0;K<w;K++)k=K+F,u[K]=k<=m[v]?t:k>=a[v]?b:Math.floor((k-m[v])/B[v]*D)+t;d[v]=u}if(null!=x.contrastOffset)for(x=J(x.contrastOffset,x.brightnessOffset),v=0;v<l;v++)for(u=d[v],K=0;K<w;K++)u[K]=x[u[K]];return{lut:d,offset:F}};X.estimateStatisticsFromHistograms=function(x){const m=[];for(let t=0;t<x.length;t++){const {min:b,max:l,size:v,counts:F}=x[t];let w=0;var a=0;for(var n=0;n<v;n++)w+=F[n],a+=n*F[n];a/=w;n=0;for(var y=0;y<v;y++)n+=
F[y]*(y-a)**2;y=(l-b)/v;m.push({min:b,max:l,avg:(a+.5)*y+b,stddev:Math.sqrt(n/(w-1))*y})}return m};X.estimateStatisticsHistograms=Y;X.getStretchCutoff=function(x,m){var a,n,y;const {pixelBlock:t,bandIds:b,returnHistogramLut:l,rasterInfo:v}=m;m=x.stretchType;if(x.dra)if("minMax"===m&&O.isSome(t)&&t.statistics)var F=t.statistics.map(p=>[p.minValue,p.maxValue,0,0]);else{var w=Y(t);F=O.isSome(w)?w.statistics:null;w=O.isSome(w)?w.histograms:null}else{var B;F=0<(null==(B=x.statistics)?void 0:B.length)?
x.statistics:O.unwrap(v.statistics);w=x.histograms||O.unwrap(v.histograms)}"percentClip"!==m&&"histogramEqualization"!==m||null!=(a=w)&&a.length||(m="minMax");B=(null==(n=F)?void 0:n.length)||(null==(y=w)?void 0:y.length)||v.bandCount;n=[];y=[];let D;let K,f,e;F&&!Array.isArray(F[0])&&(F=F.map(p=>[p.min,p.max,p.avg,p.stddev]));switch(m){case "none":F=P[v.pixelType]||P.f32;for(a=0;a<B;a++)n[a]=F[0],y[a]=F[1];break;case "minMax":for(a=0;a<B;a++)n[a]=F[a][0],y[a]=F[a][1];break;case "standardDeviation":for(a=
0;a<B;a++)n[a]=F[a][2]-x.numberOfStandardDeviations*F[a][3],y[a]=F[a][2]+x.numberOfStandardDeviations*F[a][3],n[a]<F[a][0]&&(n[a]=F[a][0]),y[a]>F[a][1]&&(y[a]=F[a][1]);break;case "histogramEqualization":for(a=0;a<B;a++)n[a]=w[a].min,y[a]=w[a].max;break;case "percentClip":for(a=0;a<w.length;a++){F=w[a];K=new Uint32Array(F.size);var d=[...F.counts];20<=d.length&&(d[0]=d[1]=d[2]=d[d.length-1]=d[d.length-2]=0);D=0;B=(F.max-F.min)/F.size;f=-.5===F.min&&1===B?.5:0;for(e=0;e<F.size;e++)D+=d[e],K[e]=D;d=
(x.minPercent||0)*D/100;for(e=0;e<F.size;e++)if(K[e]>d){n[a]=F.min+B*(e+f);break}d=(1-(x.maxPercent||0)/100)*D;for(e=F.size-2;0<=e;e--)if(K[e]<d){y[a]=F.min+B*(e+2-f);break}}break;default:for(a=0;a<B;a++)n[a]=F[a][0],y[a]=F[a][1]}let k;"histogramEqualization"===m?(m=w[0].size||256,x=0,l&&(k=w.map(p=>I(p)))):(m=x.max||255,x=x.min||0);return R({minCutOff:n,maxCutOff:y,outMax:m,outMin:x,histogramLut:k},b)};X.stretch=function(x,m){var a;if(O.isNone(x)||null==(a=x.pixels)||!a.length)return x;x=x.clone();
const {pixels:n,mask:y}=x,{minCutOff:t,maxCutOff:b,gamma:l}=m;a=m.outMin||0;m=m.outMax||255;const v=x.width*x.height,F=n.length;let w;let B,D,K;const f=m-a,e=[];for(w=0;w<F;w++)e[w]=b[w]-t[w],f/(b[w]-t[w]);var d=l&&l.length>=F;const k=[];if(d)for(w=0;w<F;w++)k[w]=1<l[w]?2<l[w]?6.5+(l[w]-2)**2.5:6.5+100*(2-l[w])**4:1;if(d)if(null!=y)for(d=0;d<v;d++){if(y[d])for(w=0;w<F;w++)B=n[w][d],K=(B-t[w])/e[w],D=1,1<l[w]&&(D-=(1/f)**(K*k[w])),n[w][d]=B<b[w]&&B>t[w]?Math.floor(D*f*K**(1/l[w]))+a:B>=b[w]?m:a}else for(d=
0;d<v;d++)for(w=0;w<F;w++)B=n[w][d],K=(B-t[w])/e[w],D=1,1<l[w]&&(D-=(1/f)**(K*k[w])),n[w][d]=B<b[w]&&B>t[w]?Math.floor(D*f*K**(1/l[w]))+a:B>=b[w]?m:a;else if(null!=y)for(d=0;d<v;d++){if(y[d])for(w=0;w<F;w++)B=n[w][d],n[w][d]=B<b[w]&&B>t[w]?Math.floor((B-t[w])/e[w]*f)+a:B>=b[w]?m:a}else for(d=0;d<v;d++)for(w=0;w<F;w++)B=n[w][d],n[w][d]=B<b[w]&&B>t[w]?Math.floor((B-t[w])/e[w]*f)+a:B>=b[w]?m:a;x.pixelType="u8";x.updateStatistics();return x};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(X,O,I){function J(z){let {altitude:Y,azimuth:R}=z;const {hillshadeType:P,pixelSizePower:T,pixelSizeFactor:x,scalingType:m,isGCS:a,resolution:n}=z;var y="multi-directional"===P?2*z.zFactor:z.zFactor;const {x:t,y:b}=n;z=y/(8*t);var l=y/(8*b);a&&.001<y&&(z/=111E3,l/=111E3);"adjusted"===m&&(a?(z=111E3*t,l=111E3*b,z=(y+z**T*x)/(8*z),l=(y+l**T*x)/(8*l)):(z=(y+t**T*x)/(8*t),l=(y+b**T*
x)/(8*b)));var v=(90-Y)*Math.PI/180;y=Math.cos(v);let F=(360-R+90)*Math.PI/180,w=Math.sin(v)*Math.cos(F);v=Math.sin(v)*Math.sin(F);const B=[315,270,225,360,180,0],D=[60,60,60,60,60,90];var K=new Float32Array([3,5,3,2,1,4]);const f=K.reduce((u,E)=>u+E);K=K.map(u=>u/f);const e="multi-directional"===P?B.length:1,d=new Float32Array(6),k=new Float32Array(6),p=new Float32Array(6);if("multi-directional"===P)for(let u=0;u<e;u++)Y=D[u],R=B[u],v=(90-Y)*Math.PI/180,y=Math.cos(v),F=(360-R+90)*Math.PI/180,w=Math.sin(v)*
Math.cos(F),v=Math.sin(v)*Math.sin(F),d[u]=y,k[u]=w,p[u]=v;else d.fill(y),k.fill(w),p.fill(v);return{resolution:n,factor:[z,l],sinZcosA:w,sinZsinA:v,cosZ:y,sinZcosAs:k,sinZsinAs:p,cosZs:d,weights:K,hillshadeType:["traditional","multi-directional"].indexOf(P)}}X.calculateHillshadeParams=J;X.hillshade=function(z,Y){if(!I.isValidPixelBlock(z))return z;const {width:R,height:P,mask:T}=z,x=new Uint8Array(R*P);T&&x.set(T);const {factor:m,sinZcosA:a,sinZsinA:n,cosZ:y,sinZcosAs:t,sinZsinAs:b,cosZs:l,weights:v}=
J(Y),[F,w]=m;var {hillshadeType:B}=Y;const D=z.pixels[0];Y=new Uint8Array(R*P);let K;for(let c=1;c<P-1;c++){const g=c*R;for(let h=1;h<R-1;h++)if(T&&!T[g+h])Y[g+h]=0;else{var f=8;if(T&&(f=T[g-R+h-1]+T[g-R+h]+T[g-R+h+1]+T[g+h-1]+T[g+h+1]+T[g+R+h-1]+T[g+R+h]+T[g+R+h+1],7>f)){Y[g+h]=0;x[g+h]=0;continue}if(7===f){var e=T[g-R+h-1]?D[g-R+h-1]:D[g+h];var d=T[g-R+h]?D[g-R+h]:D[g+h];var k=T[g-R+h+1]?D[g-R+h+1]:D[g+h];f=T[g+h-1]?D[g+h-1]:D[g+h];K=T[g+h+1]?D[g+h+1]:D[g+h];var p=T[g+R+h-1]?D[g+R+h-1]:D[g+h];var u=
T[g+R+h]?D[g+R+h]:D[g+h];var E=T[g+R+h+1]?D[g+R+h+1]:D[g+h]}else e=D[g-R+h-1],d=D[g-R+h],k=D[g-R+h+1],f=D[g+h-1],K=D[g+h+1],p=D[g+R+h-1],u=D[g+R+h],E=D[g+R+h+1];f=(k+K+K+E-(e+f+f+p))*F;e=(p+u+u+E-(e+d+d+k))*w;d=Math.sqrt(1+f*f+e*e);k=0;if("traditional"===B)f=255*(y+n*e-a*f)/d,0>f&&(f=0),k=f;else for(p=b.length,u=0;u<p;u++)E=255*(l[u]+b[u]*e-t[u]*f)/d,0>E&&(E=0),k+=E*v[u];Y[g+h]=k&255}}for(B=0;B<P;B++)Y[B*R]=Y[B*R+1],Y[(B+1)*R-1]=Y[(B+1)*R-2];for(B=1;B<R-1;B++)Y[B]=Y[B+R],Y[B+(P-1)*R]=Y[B+(P-2)*R];
return new O({width:R,height:P,pixels:[Y],mask:T?x:null,pixelType:"u8",validPixelCount:z.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};X.tintHillshade=function(z,Y,R,P){if(I.isValidPixelBlock(z)&&I.isValidPixelBlock(Y)){var {min:T,max:x}=P;P=z.pixels[0];var {pixels:m,mask:a}=Y;Y=m[0];var n=255.00001/(x-T),y=new Uint8ClampedArray(Y.length),t=new Uint8ClampedArray(Y.length),b=new Uint8ClampedArray(Y.length),l=R.length-1;for(let w=0;w<Y.length;w++){if(a&&0===a[w])continue;var v=Math.floor((Y[w]-
T)*n);const [B,D]=R[0>v?0:v>l?l:v];var F=P[w];v=F*D;const K=v*(1-Math.abs(B%2-1));F-=v;switch(Math.floor(B)){case 0:y[w]=v+F;t[w]=K+F;b[w]=F;break;case 1:y[w]=K+F;t[w]=v+F;b[w]=F;break;case 2:y[w]=F;t[w]=v+F;b[w]=K+F;break;case 3:y[w]=F;t[w]=K+F;b[w]=v+F;break;case 4:y[w]=K+F;t[w]=F;b[w]=v+F;break;case 5:case 6:y[w]=v+F,t[w]=F,b[w]=K+F}}z.pixels=[y,t,b];z.updateStatistics()}};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m){function a(){a=O._asyncToGenerator(function*(e,d,k,p){const u=performance.now();var E=n(d,k);const c=performance.now();k=t(d,E,k.width,k.height);d=performance.now();E=l(k,!0);k=performance.now();e="Streamlines"===e?v(E,10):F(E);E=performance.now();J("esri-2d-profiler")&&(f.info("I.1","_createFlowFieldFromData (ms)",Math.round(c-u)),f.info("I.2","_getStreamlines (ms)",Math.round(d-c)),f.info("I.3","createAnimatedLinesData (ms)",Math.round(k-d)),f.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(E-k)),f.info("I.5","createFlowMesh (ms)",Math.round(E-u)),f.info("I.6","Mesh size (bytes)",e.vertexData.buffer.byteLength+e.indexData.buffer.byteLength));yield Promise.resolve();P.throwIfAborted(p);return e});return a.apply(this,arguments)}function n(e,d){const k=b(d.data,d.width,d.height,e.smoothing);return e.interpolate?(p,u)=>{const E=Math.floor(p),c=Math.floor(u);if(0>E||E>=d.width||0>c||c>=d.height)return[0,0];p-=E;u-=c;const g=E<d.width-1?E+1:E,h=c<d.height-1?c+1:c;return[(k[2*(c*
d.width+E)]*(1-u)+k[2*(h*d.width+E)]*u)*(1-p)+(k[2*(c*d.width+g)]*(1-u)+k[2*(h*d.width+g)]*u)*p,(k[2*(c*d.width+E)+1]*(1-u)+k[2*(h*d.width+E)+1]*u)*(1-p)+(k[2*(c*d.width+g)+1]*(1-u)+k[2*(h*d.width+g)+1]*u)*p]}:(p,u)=>{p=Math.round(p);u=Math.round(u);return 0>p||p>=d.width||0>u||u>=d.height?[0,0]:[k[2*(u*d.width+p)],k[2*(u*d.width+p)+1]]}}function y(e,d,k,p,u,E,c,g,h){const r=[];let A=0,[Q,C]=d(k,p);Q*=e.velocityScale;C*=e.velocityScale;r.push({x:k,y:p,t:A,speed:Math.sqrt(Q*Q+C*C)});for(let N=0;N<
e.verticesPerLine;N++){let [q,H]=d(k,p);q*=e.velocityScale;H*=e.velocityScale;const M=Math.sqrt(q*q+H*H);if(M<e.minSpeedThreshold)break;const W=q/M,aa=H/M;k+=W*e.segmentLength;p+=aa*e.segmentLength;A+=e.segmentLength/M;if(Math.acos(W*G+aa*S)>e.maxTurnAngle)break;if(e.collisions){var G=Math.round(k*h);var S=Math.round(p*h);if(0>G||G>c-1||0>S||S>g-1)break;const V=E[S*c+G];if(-1!==V&&V!==u)break;E[S*c+G]=u}r.push({x:k,y:p,t:A,speed:M});G=W;S=aa}return r}function t(e,d,k,p){const u=[],E=new T,c=1/Math.max(e.lineCollisionWidth,
1),g=Math.round(k*c),h=Math.round(p*c),r=new Int32Array(g*h);for(var A=0;A<r.length;A++)r[A]=-1;A=[];for(let Q=0;Q<p;Q+=e.lineSpacing)for(let C=0;C<k;C+=e.lineSpacing)A.push({x:C,y:Q,sort:E.getFloat()});A.sort((Q,C)=>Q.sort-C.sort);for(const {x:Q,y:C}of A)E.getFloat()<e.density&&(k=y(e,d,Q,C,u.length,r,g,h,c),2>k.length||u.push(k));return u}function b(e,d,k,p){if(0===p)return e;const u=Math.round(3*p),E=Array(2*u+1);var c=0;for(var g=-u;g<=u;g++){var h=Math.exp(-g*g/(p*p));E[g+u]=h;c+=h}for(p=-u;p<=
u;p++)E[p+u]/=c;c=new Float32Array(e.length);for(p=0;p<k;p++)for(g=0;g<d;g++){var r=h=0;for(var A=-u;A<=u;A++)if(!(0>g+A||g+A>=d)){var Q=E[A+u];h+=Q*e[2*(p*d+(g+A))];r+=Q*e[2*(p*d+(g+A))+1]}c[2*(p*d+g)]=h;c[2*(p*d+g)+1]=r}e=new Float32Array(e.length);for(p=0;p<d;p++)for(g=0;g<k;g++){r=h=0;for(A=-u;A<=u;A++)0>g+A||g+A>=k||(Q=E[A+u],h+=Q*c[2*((g+A)*d+p)],r+=Q*c[2*((g+A)*d+p)+1]);e[2*(g*d+p)]=h;e[2*(g*d+p)+1]=r}return e}function l(e,d){const k=new T;var p=e.reduce((g,h)=>g+h.length,0);p=new Float32Array(4*
p);const u=Array(e.length);let E=0,c=0;for(const g of e){e=E;for(const h of g)p[4*E]=h.x,p[4*E+1]=h.y,p[4*E+2]=h.t,p[4*E+3]=h.speed,E++;u[c++]={startVertex:e,numberOfVertices:g.length,totalTime:g[g.length-1].t,timeSeed:d?k.getFloat():0}}return{lineVertices:p,lineDescriptors:u}}function v(e,d){function k(G,S,N,q,H,M,W,aa){const V=9*h;let Z=0;g[V+Z++]=G;g[V+Z++]=S;g[V+Z++]=1;g[V+Z++]=N;g[V+Z++]=M;g[V+Z++]=W;g[V+Z++]=q/2;g[V+Z++]=H/2;g[V+Z++]=aa;h++;g[V+Z++]=G;g[V+Z++]=S;g[V+Z++]=-1;g[V+Z++]=N;g[V+Z++]=
M;g[V+Z++]=W;g[V+Z++]=-q/2;g[V+Z++]=-H/2;g[V+Z++]=aa;h++}const {lineVertices:p,lineDescriptors:u}=e;var E=e=0;for(var c of u)e+=2*c.numberOfVertices,E+=6*(c.numberOfVertices-1);const g=new Float32Array(9*e);c=new Uint32Array(E);let h=0;e=0;for(const G of u){const {totalTime:S,timeSeed:N}=G;let q=E=null,H=null;var r=null,A=null,Q=null;for(let M=0;M<G.numberOfVertices;M++){r=p[4*(G.startVertex+M)];const W=p[4*(G.startVertex+M)+1],aa=p[4*(G.startVertex+M)+2],V=p[4*(G.startVertex+M)+3];let Z=null,L=null;
var C=null;let U=null;0<M&&(Z=r-E,L=W-q,C=Math.sqrt(Z*Z+L*L),Z/=C,L/=C,1<M?(A=Z+A,Q=L+Q,C=Math.sqrt(A*A+Q*Q),A/=C,Q/=C,C=Math.min(1/(A*Z+Q*L),d),A*=C,Q*=C,C=-Q,U=A):(C=-L,U=Z),null!==C&&null!==U&&(k(E,q,H,C,U,S,N,V),c[e++]=h-2,c[e++]=h,c[e++]=h-1,c[e++]=h,c[e++]=h+1,c[e++]=h-1));E=r;q=W;H=aa;A=Z;Q=L;r=V}k(E,q,H,-Q,A,S,N,r)}return{vertexData:g,indexData:c}}function F(e){function d(ba,da){var ea=aa+Z,fa=V+L,ja=Math.sqrt(ea*ea+fa*fa);ea/=ja;fa/=ja;var ha=aa*ea+V*fa,la=Z+U,ia=L+ca;ja=Math.sqrt(la*la+
ia*ia);la/=ja;ia/=ja;var ka=Z*la+L*ia;{ja=C;var na=G,ma=S,oa=N;fa=-(fa/ha);ea/=ha;ha=q;var pa=H,ta=M,sa=W;ia=-(ia/ka);la/=ka;ka=16*A;let ra=0;for(const ua of[1,2])for(const xa of[1,2,3,4])h[ka+ra++]=ja,h[ka+ra++]=na,h[ka+ra++]=ma,h[ka+ra++]=oa,h[ka+ra++]=ha,h[ka+ra++]=pa,h[ka+ra++]=ta,h[ka+ra++]=sa,h[ka+ra++]=ua,h[ka+ra++]=xa,h[ka+ra++]=ba,h[ka+ra++]=da,h[ka+ra++]=fa/2,h[ka+ra++]=ea/2,h[ka+ra++]=ia/2,h[ka+ra++]=la/2,A++}r[Q++]=A-8;r[Q++]=A-7;r[Q++]=A-6;r[Q++]=A-7;r[Q++]=A-5;r[Q++]=A-6;r[Q++]=A-4;
r[Q++]=A-3;r[Q++]=A-2;r[Q++]=A-3;r[Q++]=A-1;r[Q++]=A-2}function k(ba,da,ea,fa,ja,ha){aa=Z;V=L;Z=U;L=ca;null==aa&&null==V&&(aa=Z,V=L);if(null!=q&&null!=H){U=ba-q;ca=da-H;const la=Math.sqrt(U*U+ca*ca);U/=la;ca/=la}null!=aa&&null!=V&&d(ja,ha);C=q;G=H;S=M;N=W;q=ba;H=da;M=ea;W=fa}function p(ba,da){aa=Z;V=L;Z=U;L=ca;null==aa&&null==V&&(aa=Z,V=L);null!=aa&&null!=V&&d(ba,da)}const {lineVertices:u,lineDescriptors:E}=e;let c=e=0;for(var g of E){const ba=g.numberOfVertices-1;e+=8*ba;c+=12*ba}const h=new Float32Array(16*
e),r=new Uint32Array(c);let A=0,Q=0,C,G,S,N,q,H,M,W,aa,V,Z,L,U,ca;for(const ba of E){ca=U=L=Z=V=aa=W=M=H=q=N=S=G=C=null;const {totalTime:da,timeSeed:ea}=ba;for(g=0;g<ba.numberOfVertices;g++)k(u[4*(ba.startVertex+g)],u[4*(ba.startVertex+g)+1],u[4*(ba.startVertex+g)+2],u[4*(ba.startVertex+g)+3],da,ea);p(da,ea)}return{vertexData:h,indexData:r}}function w(e,d){const k=d.pixels,{width:p,height:u}=d,E=new Float32Array(p*u*2),c=d.mask||new Uint8Array(p*u*2);d.mask||c.fill(255);if("vector-uv"===e)for(e=0;e<
p*u;e++)E[2*e]=k[0][e],E[2*e+1]=-k[1][e];else if("vector-magdir"===e)for(e=0;e<p*u;e++){d=k[0][e];const g=Y.deg2rad(k[1][e]),h=Math.sin(g-Math.PI/2);E[2*e]=Math.cos(g-Math.PI/2)*d;E[2*e+1]=h*d}return{data:E,mask:c,width:p,height:u}}function B(){B=O._asyncToGenerator(function*(e,d,k,p,u,E){const c=performance.now();var g=x.getInfo(d.spatialReference);if(!g)return k=yield D(e,d,k,p,u,E),J("esri-2d-profiler")&&f.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-c)),J("esri-2d-profiler")&&
f.info("I.9","Number of parts",1),k;const [h,r]=g.valid,A=Math.ceil(d.width/(r-h)),Q=d.width/A,C=Math.round(k/A);let G=d.xmin;const S=[];g=performance.now();for(let N=0;N<A;N++){const q=new m({xmin:G,xmax:G+Q,ymin:d.ymin,ymax:d.ymax,spatialReference:d.spatialReference});S.push(D(e,q,C,p,u,E));G+=Q}e=yield Promise.all(S);J("esri-2d-profiler")&&f.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-g));J("esri-2d-profiler")&&f.info("I.9","Number of parts",e.length);p={data:new Float32Array(k*
p*2),mask:new Uint8Array(k*p),width:k,height:p};d=0;for(const N of e){for(e=0;e<N.height;e++)for(u=0;u<N.width;u++)d+u>=k||(p.data[2*(e*k+d+u)]=N.data[2*(e*N.width+u)],p.data[2*(e*k+d+u)+1]=N.data[2*(e*N.width+u)+1],p.mask[e*k+d+u]=N.mask[e*N.width+u]);d+=N.width}J("esri-2d-profiler")&&f.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-c));return p});return B.apply(this,arguments)}function D(e,d,k,p,u,E){return K.apply(this,arguments)}function K(){K=O._asyncToGenerator(function*(e,
d,k,p,u,E){const c={requestProjectedLocalDirections:!0,signal:E};R.isSome(u)&&(c.timeExtent=u);if("imagery"===e.type)return yield e.load({signal:E}),u=e.rasterInfo.dataType,e=yield e.fetchImage(d,k,p,c),!e||R.isNone(e.pixelData)||R.isNone(e.pixelData.pixelBlock)?{data:new Float32Array(k*p*2),mask:new Uint8Array(k*p),width:k,height:p}:w(u,e.pixelData.pixelBlock);yield e.load({signal:E});u=e.rasterInfo.dataType;e=yield e.fetchPixels(d,k,p,c);return!e||R.isNone(e.pixelBlock)?{data:new Float32Array(k*
p*2),mask:new Uint8Array(k*p),width:k,height:p}:w(u,e.pixelBlock)});return K.apply(this,arguments)}const f=z.getLogger("esri.views.2d.engine.flow.dataUtils");X.createAnimatedLinesData=l;X.createFlowMesh=function(e,d,k,p){return a.apply(this,arguments)};X.createParticlesMesh=F;X.createStreamlinesMesh=v;X.loadImagery=function(e,d,k,p,u,E){return B.apply(this,arguments)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterEnums":function(){define(["exports",
"../../core/jsonMap"],function(X,O){const I=O.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});O=O.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});X.interpolationKebab=I;X.noDataInterpretationKebab=O;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),
function(X,O,I,J,z,Y,R){const P=new Map;P.set("CRF",{desc:"Cloud Raster Format",constructor:I});P.set("MRF",{desc:"Meta Raster Format",constructor:Y});P.set("TIFF",{desc:"GeoTIFF",constructor:R});P.set("RasterTileServer",{desc:"Raster Tile Server",constructor:z});P.set("JPG",{desc:"JPG Raster Format",constructor:J});P.set("PNG",{desc:"PNG Raster Format",constructor:J});P.set("GIF",{desc:"GIF Raster Format",constructor:J});P.set("BMP",{desc:"BMP Raster Format",constructor:J});return function(){function T(){}
T.open=function(){var x=X._asyncToGenerator(function*(m){const {url:a,ioConfig:n,sourceJSON:y}=m;let t=m.datasetFormat;null==t&&a.lastIndexOf(".")&&(t=a.slice(a.lastIndexOf(".")+1).toUpperCase());if("OVR"===t||"TIF"===t)t="TIFF";else if("JPG"===t||"JPEG"===t||"JFIF"===t)t="JPG";a.toLowerCase().includes("/imageserver")&&!a.toLowerCase().includes("/wcsserver")&&(t="RasterTileServer");const b={bandIds:null,sampling:null},l={url:a,sourceJSON:y,datasetFormat:t,ioConfig:n||b};let v,F;if(this.supportedFormats.has(t)){if("CRF"===
t&&!n.enableCRF)throw new O("rasterfactory:open",`cannot open raster: ${a}`);v=P.get(t).constructor;F=new v(l);yield F.open({signal:m.signal});return F}if(t)throw new O("rasterfactory:open","not a supported format "+t);const w=Array.from(P.keys());let B=0;const D=()=>{t=w[B++];if(!t||"CRF"===t&&!n.enableCRF)return null;v=P.get(t).constructor;F=new v(l);return F.open({signal:m.signal}).then(()=>F).catch(()=>D())};return D()});return function(m){return x.apply(this,arguments)}}();T.register=function(x,
m,a){P.has(x.toUpperCase())||P.set(x.toUpperCase(),{desc:m,constructor:a})};X._createClass(T,null,[{key:"supportedFormats",get:function(){const x=new Set;P.forEach((m,a)=>x.add(a));return x}}]);return T}()})},"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../TileInfo ./BaseRaster ./DBFParser ../rasterTransforms/utils ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w){const B=new Map;B.set("int16","esriFieldTypeSmallInteger");B.set("int32","esriFieldTypeInteger");B.set("int64","esriFieldTypeInteger");B.set("float32","esriFieldTypeSingle");B.set("float64","esriFieldTypeDouble");B.set("text","esriFieldTypeString");I=function(D){function K(){var e=D.apply(this,arguments)||this;e.storageInfo=null;e.datasetFormat="CRF";return e}X._inheritsLoose(K,D);var f=K.prototype;f.open=function(){var e=X._asyncToGenerator(function*(d){yield this.init();
({data:d}=yield this.request(this.url+"/conf.json",{signal:null==d?void 0:d.signal}));if(!this._validateHeader(d))throw new J("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:k,rasterInfo:p}=this._parseHeader(d);"thematic"===p.dataType&&(d=yield this._fetchAuxiliaryInformation(),p.attributeTable=d);this._set("storageInfo",k);this._set("rasterInfo",p);this.ioConfig.retryCount=this.ioConfig.retryCount||0});return function(d){return e.apply(this,
arguments)}}();f.fetchRawTile=function(){var e=X._asyncToGenerator(function*(d,k,p,u={}){var {transposeInfo:E}=this.rasterInfo.storageInfo,{transposedVariableName:c}=u;d=(E=!(!E||!c))?0:this.rasterInfo.storageInfo.maximumPyramidLevel-d;if(0>d)return null;c=this._buildCacheFilePath(d,k,p,u.multidimensionalDefinition,c);k=this._getIndexRecordFromBundle(k,p,E);p=yield this.request(c,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:u.signal});if(!p)return null;p=new Uint8Array(p.data);
k=this._getTileEndAndContentType(p,k);if(0===k.recordSize)return null;u=yield this.request(c,{range:{from:k.position,to:k.position+k.recordSize},responseType:"array-buffer",signal:u.signal});if(!u)return null;const [g,h]=this._getTileSize(E);return this.decodePixelBlock(u.data,{width:g,height:h,planes:null,pixelType:null,returnPixelInterleavedDims:E})});return function(d,k,p){return e.apply(this,arguments)}}();f._validateHeader=function(e){const d="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");
return e&&"RasterInfo"===e.type&&!d.some(k=>!e[k])};f._parseHeader=function(e){var d,k,p="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[e.pixelType];const {bandCount:u,histograms:E,colormap:c,blockWidth:g,blockHeight:h,firstPyramidLevel:r,maximumPyramidLevel:A}=e,Q=e.statistics&&e.statistics.map(ca=>({min:ca.min,max:ca.max,avg:ca.mean,stddev:ca.standardDeviation,median:ca.median,mode:ca.mode}));var C=e.extent.spatialReference,G=null==(d=e.geodataXform)?void 0:d.spatialReference;d=new v(null!=
C&&C.wkid||null!=C&&C.wkt?C:G);C=new F({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent.xmax,ymax:e.extent.ymax,spatialReference:d});G=new w({x:e.pixelSizeX,y:e.pixelSizeY,spatialReference:d});const S=Math.round((C.xmax-C.xmin)/G.x),N=Math.round((C.ymax-C.ymin)/G.y),q=this._parseTransform(e.geodataXform),H=q?C:null;q&&(C=q.forwardTransform(C),G.x=(C.xmax-C.xmin)/S,G.y=(C.ymax-C.ymin)/N);const M=null!=(k=e.properties)?k:{};var W=e.format.toLowerCase().replace("cache/","");k=new w(e.origin.x,e.origin.y,
d);let aa;var V;if(c&&c.colors)for(aa=[],V=0;V<c.colors.length;V++){var Z=c.colors[V];var L=c.values?c.values[V]:V;aa.push([L,Z&255,Z<<16>>>24,Z<<8>>>24,Z>>>24])}Z=e.LODInfos;L=[];for(V=0;V<Z.levels.length;V++)L.push({level:Z.levels[V],resolution:Z.resolutions[V],scale:96/.0254*Z.resolutions[V]});Z=new n({dpi:96,lods:L,format:W,origin:k,size:[g,h],spatialReference:d});W={recordSize:8,packetSize:e.packetSize,headerSize:e.packetSize*e.packetSize*8+64};L=[{maxCol:Math.ceil(S/g)-1,maxRow:Math.ceil(N/
h)-1,minCol:0,minRow:0}];let U=2;if(0<A)for(V=0;V<A;V++)L.push({maxCol:Math.ceil(S/U/g)-1,maxRow:Math.ceil(N/U/h)-1,minCol:0,minRow:0}),U*=2;e=e.mdInfo;V=null;e&&M._yxs&&(V=M._yxs,V={packetSize:V.PacketSize,tileSize:[V.TileXSize,V.TileYSize]});p=new m({width:S,height:N,pixelType:p,bandCount:u,extent:C,nativeExtent:H,transform:q,spatialReference:d,pixelSize:G,keyProperties:M,statistics:Q,histograms:E,multidimensionalInfo:e,colormap:aa,storageInfo:new a({blockWidth:g,blockHeight:h,pyramidBlockWidth:g,
pyramidBlockHeight:h,origin:k,tileInfo:Z,transposeInfo:V,firstPyramidLevel:r,maximumPyramidLevel:A,blockBoundary:L})});return{storageInfo:W,rasterInfo:p}};f._parseTransform=function(e){var d,k;if(!b.isTransformSupported(e))throw new J("cloudraster:open","the data contains unsupported geodata transform types");e=b.readTransform(e);if("identity"===e.type)return null;if("polynomial"!==e.type||null==(d=e.forwardCoefficients)||!d.length||null==(k=e.inverseCoefficients)||!k.length)throw new J("cloudraster:open",
"the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");return e};f._fetchAuxiliaryInformation=function(){var e=X._asyncToGenerator(function*(d){var k=this.request(this.url+"/conf.vat.json",{signal:d}).then(u=>u.data).catch(()=>null);d=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:d}).then(u=>u.data).catch(()=>null);k=yield Promise.all([k,d]);let p;if(k[0]){d=k[0].fields;const u=k[0].values;if(d&&u){d=d.map(c=>
({type:"OID"===c.name?"esriFieldTypeOID":B.get(c.type),name:c.name,alias:c.alias||c.name}));const E=u.map(c=>({attributes:c}));d&&u&&(p={fields:d,features:E})}}!p&&k[1]&&(p=t.parse(k[1]).recordSet);return l.fromJSON(p)});return function(d){return e.apply(this,arguments)}}();f._buildCacheFilePath=function(e,d,k,p,u){var E=this._getPackageSize(!!u);k=Math.floor(k/E)*E;d="R"+this._toHexString4(Math.floor(d/E)*E)+"C"+this._toHexString4(k);E="L";E=10<=e?E+e.toString():E+("0"+e.toString());({multidimensionalInfo:e}=
this.rasterInfo);const c=null==p?void 0:p[0];if(z.isNone(e)||!c)return`${this.url}/_alllayers/${E}/${d}.bundle`;p="_yxs";if(!u){p=e.variables.find(g=>g.name===c.variableName).dimensions[0].values.indexOf(c.values[0]).toString(16);e=4-p.length;for(k=0;k<e;k++)p="0"+p;p="S"+p}u=this._getVariableFolderName(u||c.variableName);return`${this.url}/_alllayers/${u}/${p}/${E}/${d}.bundle`};f._getPackageSize=function(e=!1){const {transposeInfo:d}=this.rasterInfo.storageInfo;return e&&z.isSome(d)?d.packetSize:
this.storageInfo.packetSize};f._getTileSize=function(e=!1){const {storageInfo:d}=this.rasterInfo,{transposeInfo:k}=d;return e&&z.isSome(k)?k.tileSize:d.tileInfo.size};f._getVariableFolderName=function(e){e=e.trim();return""===e?"_v":e.replace(/[\{|\}\-]/g,"_").replace("\\*","_v")};f._getIndexRecordFromBundle=function(e,d,k=!1){k=this._getPackageSize(k);e=e%k*k+d%k;if(0>e)throw"Invalid level / row / col";return e*this.storageInfo.recordSize+64};f._getTileEndAndContentType=function(e,d){e=e.subarray(d,
d+8);d=0;let k;for(k=0;5>k;k++)d|=(e[k]&255)<<8*k;const p=d&0xffffffffff;d=0;for(k=5;8>k;k++)d|=(e[k]&255)<<8*(k-5);return{position:p,recordSize:d&0xffffffffff}};f._toHexString4=function(e){e=e.toString(16);if(4!==e.length){let d=4-e.length;for(;0<d--;)e="0"+e}return e};return K}(y);O.__decorate([Y.property({readOnly:!0})],I.prototype,"storageInfo",void 0);O.__decorate([Y.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);return I=O.__decorate([x.subclass("esri.layers.support.rasterDatasets.CloudRaster")],
I)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../request ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../arcgisLayerUrl ../commonProperties ../RasterStorageInfo ../TileInfo ./multidimensionalUtils ./RawBlockCache ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterFunctions/rasterProjectionHelper ../rasterFunctions/vectorFieldUtils ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D,K,f,e,d,k){I=function(p){function u(){var c=p.apply(this,arguments)||this;c.rasterJobHandler=null;c.datasetName=null;c.datasetFormat=null;c.rasterInfo=null;c.ioConfig={sampling:"closest"};return c}X._inheritsLoose(u,p);var E=u.prototype;E.init=function(){var c=X._asyncToGenerator(function*(){const g=f.load();this.addResolvingPromise(g);yield this.when()});return function(){return c.apply(this,arguments)}}();E.normalizeCtorArgs=function(c){c&&c.ioConfig&&
(c={...c,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:F.create(),...c.ioConfig}});return c};E.open=function(){var c=X._asyncToGenerator(function*(g){throw new z("BaseRaster:open-not-implemented","open() is not implemented");});return function(g){return c.apply(this,arguments)}}();E.fetchTile=function(){var c=X._asyncToGenerator(function*(g,h,r,A={}){const Q=A.tileInfo||this.rasterInfo.storageInfo.tileInfo;g=this.getTileExtentFromTileInfo(g,h,r,Q);return this.fetchPixels(g,Q.size[0],
Q.size[1],A)});return function(g,h,r){return c.apply(this,arguments)}}();E.identify=function(){var c=X._asyncToGenerator(function*(g,h={}){var r,A;const {multidimensionalDefinition:Q,timeExtent:C}=h,{hasMultidimensionalTranspose:G,multidimensionalInfo:S}=this.rasterInfo;var {transposedVariableName:N}=h;const q=P.isSome(S)&&G&&(null!=C||w.isMultiSliceOrRangeDefinition(Q));q&&!N&&(N=P.isSome(Q)&&0<Q.length?Q[0].variableName:S.variables[0].name,h={...h,transposedVariableName:N});h=this._getRequestOptionsWithSliceId(h);
const {spatialReference:H,extent:M}=this.rasterInfo;var {datumTransformation:W}=h;W=f.projectPoint(g,H,W);if(!M.intersects(W)||P.isSome(this.rasterInfo.transform)&&(W=this.rasterInfo.transform.inverseTransform(W),!this.rasterInfo.nativeExtent.intersects(W)))return{location:W,value:null};let aa=0;const V=N&&P.isSome(S)&&this.rasterInfo.hasMultidimensionalTranspose;if(!V)if(h.srcResolution)aa=f.snapPyramid(h.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(aa=yield this.computeBestPyramidLevelForLocation(g,
h),null==aa)return{location:W,value:null};g=this.identifyPixelLocation(W,aa,null,V);if(null===g)return{location:W,value:null};const {row:Z,col:L,rowOffset:U,colOffset:ca,blockWidth:ba}=g;N=null!=(r=N)?r:P.unwrap(h.sliceId);r=B.getRasterId(this.url,N);N=`${aa}/${Z}/${L}`;g=B.getBlock(r,null,N);P.isNone(g)&&(g=this.fetchRawTile(aa,Z,L,h),B.putBlock(r,null,N,g));r=yield g;return P.isNone(r)||null==(A=r.pixels)||!A.length?{location:W,value:null}:this._processIdentifyResult(r,{srcLocation:W,position:U*
ba+ca,pyramidLevel:aa,useTransposedTile:V,requestSomeSlices:q,identifyOptions:h})});return function(g){return c.apply(this,arguments)}}();E.fetchPixels=function(){var c=X._asyncToGenerator(function*(g,h,r,A={}){g=f.snapExtent(g);A=this._getRequestOptionsWithSliceId(A);if(A.requestRawData)return this._fetchPixels(g,h,r,A);var Q=f.getWorldWidth(g.spatialReference),C=f.getWorldWrapCount(g);if(P.isNone(Q)||0===C||1===C&&this._isGlobalWrappableSource)return this._fetchPixels(g,h,r,A);if(3<=C)return{extent:g,
pixelBlock:null};const G=[],{xmin:S,xmax:N}=g,q=Math.round(Q/(N-S)*h),H=q-Math.round((Q/2-S)/(N-S)*h);let M=0;const W=[];for(let V=0;V<=C;V++){var aa=new k({xmin:0===V?S:-Q/2,xmax:V===C?N-Q*V:Q/2,ymin:g.ymin,ymax:g.ymax,spatialReference:g.spatialReference});const Z=0===V?q-H:V===C?h-M:q;M+=Z;W.push(Z);aa=A.disableWrapAround&&0<V?null:this._fetchPixels(aa,Z,r,A);G.push(aa)}Q=(yield Promise.all(G)).map(V=>null==V?void 0:V.pixelBlock);C=null;h={width:h,height:r};C=this.rasterJobHandler?(yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:Q,
srcMosaicSize:h,destDimension:null,coefs:null,sampleSpacing:null,interpolation:"nearest",alignmentInfo:null,blockWidths:W},A)).pixelBlock:K.mosaic(Q,h,{blockWidths:W});A=f.projectExtent(g,this.rasterInfo.spatialReference,A.datumTransformation);return{extent:g,srcExtent:A,pixelBlock:C}});return function(g,h,r){return c.apply(this,arguments)}}();E.fetchRawPixels=function(){var c=X._asyncToGenerator(function*(g,h,r,A={}){h={x:Math.floor(h.x),y:Math.floor(h.y)};const Q=yield this._fetchRawTiles(g,h,r,
A),{nativeExtent:C,nativePixelSize:G,storageInfo:S}=this.rasterInfo;var N=2**g,q=G.x*N;N*=G.y;q=new k({xmin:C.xmin+q*h.x,xmax:C.xmin+q*(h.x+r.width-1),ymin:C.ymax-N*(h.y+r.height-1),ymax:C.ymax-N*h.y,spatialReference:C.spatialReference});if(!Q)return{extent:q,srcExtent:q,pixelBlock:null};const {pixelBlocks:H,mosaicSize:M}=Q;if(1===H.length&&P.isSome(H[0])&&H[0].width===r.width&&H[0].height===r.height)return{extent:q,srcExtent:q,pixelBlock:Q.pixelBlocks[0]};g={x:h.x%(0<g?S.pyramidBlockWidth:S.blockWidth),
y:h.y%(0<g?S.pyramidBlockHeight:S.blockHeight)};r=this.rasterJobHandler?(yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:H,srcMosaicSize:M,destDimension:r,clipOffset:g,clipSize:r,coefs:null,sampleSpacing:null,interpolation:A.interpolation,alignmentInfo:null,blockWidths:null},A)).pixelBlock:K.mosaic(H,M,{clipOffset:g,clipSize:r});return{extent:q,srcExtent:q,pixelBlock:r}});return function(g,h,r){return c.apply(this,arguments)}}();E.fetchRawTile=function(c,g,h,r){throw new z("BaseRaster:read-not-implemented",
"fetchRawTile() is not implemented");};E.computeExtent=function(c){return f.projectExtent(this.rasterInfo.extent,c)};E.decodePixelBlock=function(c,g){return!this.rasterJobHandler||g.useCanvas?D.decode(c,g):this.rasterJobHandler.decode({data:c,options:g})};E.request=function(){var c=X._asyncToGenerator(function*(g,h,r){var A,Q;const {customFetchParameters:C}=this.ioConfig,{range:G,query:S,headers:N}=h;r=null!=(A=null!=(Q=r)?Q:h.retryCount)?A:this.ioConfig.retryCount;A=G?{Range:`bytes=${G.from}-${G.to}`}:
null;try{return yield J(g,{...h,query:{...S,...C},headers:{...N,...A}})}catch(q){if(0<r)return r--,this.request(g,h,r);throw q;}});return function(g,h,r){return c.apply(this,arguments)}}();E.getSliceIndex=function(c){const {multidimensionalInfo:g}=this.rasterInfo;return P.isNone(g)||P.isNone(c)||0===c.length?null:w.getSliceIndex(c,g)};E.getTileExtentFromTileInfo=function(c,g,h,r){c=r.lodAt(c);return this.getTileExtent({x:c.resolution,y:c.resolution},g,h,r.origin,r.spatialReference,r.size)};E.updateTileInfo=
function(){const {storageInfo:c,spatialReference:g,extent:h,pixelSize:r}=this.rasterInfo;if(!c.tileInfo){const Q=[];var A=c.maximumPyramidLevel||0;let C=Math.max(r.x,r.y),G=1/.0254*96*C;for(let S=0;S<=A;S++)Q.push({level:A-S,resolution:C,scale:G}),C*=2,G*=2;A=new d({x:h.xmin,y:h.ymax,spatialReference:g});c.tileInfo=new F({origin:A,size:[c.blockWidth,c.blockHeight],spatialReference:g,lods:Q});c.isVirtualTileInfo=!0}};E.createRemoteDatasetStorageInfo=function(c,g=512,h=512,r){const {width:A,height:Q,
nativeExtent:C,pixelSize:G,spatialReference:S}=c,N=new d({x:C.xmin,y:C.ymax,spatialReference:S});null==r&&(r=Math.max(0,Math.round(Math.log(Math.max(A,Q))/Math.LN2-8)));const q=this.computeBlockBoundary(C,512,512,{x:C.xmin,y:C.ymax},[G],r);c.storageInfo=new v({blockWidth:g,blockHeight:h,pyramidBlockWidth:g,pyramidBlockHeight:h,origin:N,firstPyramidLevel:1,maximumPyramidLevel:r,blockBoundary:q})};E.computeBestPyramidLevelForLocation=function(){var c=X._asyncToGenerator(function*(g,h){return 0});return function(g){return c.apply(this,
arguments)}}();E.computeBlockBoundary=function(c,g,h,r,A,Q=0,C=2){if(1===A.length&&0<Q){A=[...A];let {x:N,y:q}=A[0];for(let H=0;H<Q;H++)N*=C,q*=C,A.push({x:N,y:q})}Q=[];const {x:G,y:S}=r;for(r=0;r<A.length;r++){const {x:N,y:q}=A[r];Q.push({minCol:Math.floor((c.xmin-G+.1*N)/g/N),maxCol:Math.floor((c.xmax-G-.1*N)/g/N),minRow:Math.floor((S-c.ymax+.1*q)/h/q),maxRow:Math.floor((S-c.ymin-.1*q)/h/q)})}return Q};E.getPyramidPixelSize=function(c){const {nativePixelSize:g}=this.rasterInfo,{pyramidResolutions:h,
pyramidScalingFactor:r}=this.rasterInfo.storageInfo;if(0===c)return g;if(P.isSome(h)&&h.length)return h[c-1];c=r**c;return{x:g.x*c,y:g.y*c}};E.identifyPixelLocation=function(c,g,h,r){const {spatialReference:A,nativeExtent:Q,storageInfo:C}=this.rasterInfo,{maximumPyramidLevel:G,origin:S,transposeInfo:N}=C,q=r&&P.isSome(N)?N.tileSize[0]:C.blockWidth;r=r&&P.isSome(N)?N.tileSize[1]:C.blockHeight;c=f.projectPoint(c,A,h);if(!Q.intersects(c)||0>g||g>G)return null;h=this.getPyramidPixelSize(g);const {x:H,
y:M}=h;h=(S.y-c.y)/M/r;const W=(c.x-S.x)/H/q;return{pyramidLevel:g,row:Math.floor(h),col:Math.floor(W),rowOffset:Math.min(r-1,Math.floor((h-Math.floor(h))*r)),colOffset:Math.min(q-1,Math.floor((W-Math.floor(W))*q)),blockWidth:q,srcLocation:c}};E.getTileExtent=function(c,g,h,r,A,Q){const [C,G]=Q;h=r.x+h*C*c.x;g=r.y-g*G*c.y;return new k({xmin:h,xmax:h+C*c.x,ymin:g-G*c.y,ymax:g,spatialReference:A})};E.getBlockWidthHeight=function(c){return{blockWidth:0<c?this.rasterInfo.storageInfo.pyramidBlockWidth:
this.rasterInfo.storageInfo.blockWidth,blockHeight:0<c?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}};E.isBlockOutside=function(c,g,h){c=this.rasterInfo.storageInfo.blockBoundary[c];return!c||c.maxRow<g||c.maxCol<h||c.minRow>g||c.minCol>h};E._fetchPixels=function(){var c=X._asyncToGenerator(function*(g,h,r,A={}){var Q=f.getWorldWrapCount(g);if(2<=Q)return{extent:g,pixelBlock:null};var C=this._getSourceDataInfo(g,h,r,A);const {pyramidLevel:G,pyramidResolution:S,
srcResolution:N,srcExtent:q,srcWidth:H,srcHeight:M}=C;if(0===H||0===M)return{extent:g,srcExtent:q,pixelBlock:null};var W=P.unwrap(this.rasterInfo.transform),aa="gcs-shift"===(null==W?void 0:W.type),V=P.isSome(f.getWorldWidth(g.spatialReference));if(aa||!V)Q=f.getWorldWrapCount(C.srcExtent,aa);var Z=this.rasterInfo.storageInfo,L={x:Math.floor((q.xmin-Z.origin.x)/S.x+.1),y:Math.floor((Z.origin.y-q.ymax)/S.y+.1)};C=yield this._fetchRawTiles(G,L,{width:H,height:M,wrapCount:Q},A);if(!C)return{extent:g,
srcExtent:q,pixelBlock:null};aa=0<G?Z.pyramidBlockWidth:Z.blockWidth;const U=0<G?Z.pyramidBlockHeight:Z.blockHeight,ca=aa===H&&U===M&&0===L.x%aa&&0===L.y%U;L=new d({x:(g.xmax-g.xmin)/h,y:(g.ymax-g.ymin)/r,spatialReference:g.spatialReference});const ba=!g.spatialReference.equals(this.rasterInfo.spatialReference);({datumTransformation:Z}=A);if(!ba&&ca&&1===C.pixelBlocks.length&&aa===h&&U===r&&N.x===L.x&&N.y===L.y)return{extent:g,srcExtent:q,pixelBlock:C.pixelBlocks[0]};aa=V&&P.isSome(f.getWorldWidth(q.spatialReference));
(V=A.requestProjectedLocalDirections&&this.rasterInfo.dataType.startsWith("vector"))&&!this.rasterJobHandler&&(yield f.load());Q=this.rasterJobHandler?yield this.rasterJobHandler.getProjectionOffsetGrid({projectedExtent:g,srcBufferExtent:C.extent,pixelSize:L.toJSON(),datumTransformation:Z,rasterTransform:W,hasWrapAround:0<Q||aa,isAdaptive:!1!==this.ioConfig.optimizeProjectionAccuracy,includeGCSGrid:V},A):f.getProjectionOffsetGrid({projectedExtent:g,srcBufferExtent:C.extent,pixelSize:L,datumTransformation:Z,
rasterTransform:W,hasWrapAround:0<Q||aa,isAdaptive:!1,includeGCSGrid:V});W=!A.requestRawData;aa={rows:Q.spacing[0],cols:Q.spacing[1]};L=P.unwrap(this._getRasterTileAlignmentInfo(G,C.extent.xmin));const {pixelBlocks:da,mosaicSize:ea,isPartiallyFilled:fa}=C;C=null;this.rasterJobHandler?(h=yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:da,srcMosaicSize:ea,destDimension:W?{width:h,height:r}:null,coefs:W?Q.coefficients:null,sampleSpacing:W?aa:null,projectDirections:V,gcsGrid:V?Q.gcsGrid:
null,isUV:"vector-uv"===this.rasterInfo.dataType,interpolation:A.interpolation,alignmentInfo:L,blockWidths:null},A),{pixelBlock:W,localNorthDirections:C}=h):(L=K.mosaic(da,ea,{alignmentInfo:L}),W=W?K.approximateTransform(L,{width:h,height:r},Q.coefficients,aa,A.interpolation):L,V&&Q.gcsGrid&&(C=K.getLocalArithmeticNorthRotations({width:h,height:r},Q.gcsGrid),W=e.convertToLocalDirections(W,this.rasterInfo.dataType,C)));return A.requestRawData||V?{srcExtent:q,pixelBlock:W,transformGrid:Q,localNorthDirections:C,
extent:g,isPartiallyFilled:fa}:{srcExtent:q,extent:g,pixelBlock:W}});return function(g,h,r){return c.apply(this,arguments)}}();E._fetchRawTiles=function(){var c=X._asyncToGenerator(function*(g,h,r,A){const {origin:Q,blockBoundary:C}=this.rasterInfo.storageInfo,{blockWidth:G,blockHeight:S}=this.getBlockWidthHeight(g);let {x:N,y:q}=h,{width:H,height:M,wrapCount:W}=r;var aa=this._getRasterTileAlignmentInfo(g,0);A.buffer&&(N-=A.buffer.cols,q-=A.buffer.rows,H+=2*A.buffer.cols,M+=2*A.buffer.rows);var V=
0,Z=0;let L=0;W&&P.isSome(aa)&&({worldColumnCountFromOrigin:Z,originColumnOffset:L,rightPadding:V}=aa,Z*aa.blockWidth-V>=N+H&&(V=0));h=Math.floor(N/G);r=Math.floor(q/S);const U=Math.floor((N+H+V-1)/G);V=Math.floor((q+M+V-1)/S);var ca=C[g];if(!ca)return null;const {minRow:ba,minCol:da,maxCol:ea,maxRow:fa}=ca;if(0===W&&(V<ba||U<da||r>fa||h>ea))return null;ca=[];let ja=!1;const ha=null==this.ioConfig.allowPartialFill?A.allowPartialFill:this.ioConfig.allowPartialFill;for(let ka=r;ka<=V;ka++)for(let na=
h;na<=U;na++){let ma=na;!A.disableWrapAround&&W&&P.isSome(aa)&&Z<=na&&(ma=na-Z-L);if(ka>=ba&&ma>=da&&fa>=ka&&ea>=ma){const oa=this._fetchRawTile(g,ka,ma,A);ha?ca.push(new Promise(pa=>{oa.then(ta=>pa(ta)).catch(()=>{ja=!0;pa(null)})})):ca.push(oa)}else ca.push(null)}if(0===ca.length)return null;A=yield Promise.all(ca);aa={height:(V-r+1)*S,width:(U-h+1)*G};({spatialReference:Z}=this.rasterInfo);g=this.getPyramidPixelSize(g);const {x:la,y:ia}=g;return{extent:new k({xmin:Q.x+h*G*la,xmax:Q.x+(U+1)*G*la,
ymin:Q.y-(V+1)*S*ia,ymax:Q.y-r*S*ia,spatialReference:Z}),pixelBlocks:A,mosaicSize:aa,isPartiallyFilled:ja}});return function(g,h,r,A){return c.apply(this,arguments)}}();E._fetchRawTile=function(c,g,h,r){var A=this.rasterInfo.storageInfo.blockBoundary[c];if(!A)return Promise.resolve(null);const {minRow:Q,minCol:C,maxCol:G,maxRow:S}=A;if(g<Q||h<C||g>S||h>G)return Promise.resolve(null);const N=B.getRasterId(this.url,r.sliceId),q=`${c}/${g}/${h}`;A=B.getBlock(N,r.registryId,q);if(P.isNone(A)){const H=
new AbortController;A=this.fetchRawTile(c,g,h,{...r,signal:H.signal});B.putBlock(N,r.registryId,q,A,H);A.catch(()=>B.deleteBlock(N,r.registryId,q))}if(r.signal)x.onAbort(r,()=>{B.decreaseRefCount(N,r.registryId,q)});return A};E._computeMagDirValues=function(c){var g;const {bandCount:h,dataType:r}=this.rasterInfo;if((2!==h||"vector-magdir"!==r)&&"vector-uv"!==r||2!==(null==c?void 0:c.length)||null==(g=c[0])||!g.length)return null;g=c[0].length;if("vector-magdir"===r)return g=c[1].map(G=>(G+360)%360),
[c[0],g];const [A,Q]=c;c=[];const C=[];for(let G=0;G<g;G++){const [S,N]=e.uvComponentToVector([A[G],Q[G]]);c.push(S);C.push(N)}return[c,C]};E._getRasterTileAlignmentInfo=function(c,g){null==this._rasterTileAlighmentInfo&&(this._rasterTileAlighmentInfo=f.getRasterDatasetAlignmentInfo(this.rasterInfo));return P.isNone(this._rasterTileAlighmentInfo.pyramidsInfo)?null:{startX:g,halfWorldWidth:this._rasterTileAlighmentInfo.halfWorldWidth,hasGCSSShiftTransform:this._rasterTileAlighmentInfo.hasGCSSShiftTransform,
...this._rasterTileAlighmentInfo.pyramidsInfo[c]}};E._getSourceDataInfo=function(c,g,h,r={}){const A={datumTransformation:r.datumTransformation,pyramidLevel:0,pyramidResolution:null,srcExtent:null,srcHeight:0,srcResolution:null,srcWidth:0};r.srcResolution&&(A.srcResolution=r.srcResolution,this._updateSourceDataInfo(c,A));var Q=this.rasterInfo.storageInfo.maximumPyramidLevel||0;const {srcWidth:C,srcHeight:G,pyramidLevel:S}=A;var N=C/g;const q=G/h,H=S<Q&&16<=N*q;if(H||S===Q&&(8<N||8<q)||0===C||0===
G){var M=new d({x:(c.xmax-c.xmin)/g,y:(c.ymax-c.ymin)/h,spatialReference:c.spatialReference});M=f.projectResolution(M,this.rasterInfo.spatialReference,c,A.datumTransformation);const W=!M||r.srcResolution&&M.x+M.y<r.srcResolution.x+r.srcResolution.y;H&&r.srcResolution&&W&&(N=Math.round(Math.log(Math.max(N,q))/Math.LN2)-1,Q-S+3>=N&&(Q=2**N,M={x:r.srcResolution.x*Q,y:r.srcResolution.y*Q}));M&&(A.srcResolution=M,this._updateSourceDataInfo(c,A))}if(8<A.srcWidth/g||8<A.srcHeight/h)A.srcWidth=0,A.srcHeight=
0;return A};E._updateSourceDataInfo=function(c,g){g.srcWidth=0;g.srcHeight=0;var h=this.rasterInfo.spatialReference;const {srcResolution:r,datumTransformation:A}=g,{pyramidLevel:Q,pyramidResolution:C,excessiveReading:G}=f.snapPyramid(r,this.rasterInfo,this.ioConfig.sampling);G||(c=g.srcExtent||f.projectExtent(c,h,A),null!=c&&((h=P.unwrap(this.rasterInfo.transform))&&(c=h.inverseTransform(c)),g.srcExtent=c,h=Math.ceil((c.xmax-c.xmin)/C.x-.1),c=Math.ceil((c.ymax-c.ymin)/C.y-.1),g.pyramidLevel=Q,g.pyramidResolution=
C,g.srcWidth=h,g.srcHeight=c))};E._getRequestOptionsWithSliceId=function(c){P.isSome(this.rasterInfo.multidimensionalInfo)&&null==c.sliceId&&(c={...c,sliceId:this.getSliceIndex(c.multidimensionalDefinition)});return c};E._processIdentifyResult=function(c,g){const {srcLocation:h,position:r,pyramidLevel:A,useTransposedTile:Q}=g,C=c.pixels[0].length/c.width/c.height;if(c.mask&&!c.mask[r])return{location:h,value:null};const {multidimensionalInfo:G}=this.rasterInfo;if(P.isNone(G)||!Q)return g=c.pixels.map(aa=>
aa[r]),c={location:h,value:g,pyramidLevel:A},g=this._computeMagDirValues(g.map(aa=>[aa])),null!=g&&g.length&&(c.magdirValue=g.map(aa=>aa[0])),c;let S=c.pixels.map(aa=>Array.prototype.slice.call(aa,r*C,r*C+C)),N=this._computeMagDirValues(S);const {requestSomeSlices:q,identifyOptions:H}=g;let M=w.createSlices(G,H.transposedVariableName);if(q){var W;const aa=w.getSliceIds(M,P.unwrap(H.multidimensionalDefinition),P.unwrap(H.timeExtent));S=S.map(V=>aa.map(Z=>V[Z]));N=null==(W=N)?void 0:W.map(V=>aa.map(Z=>
V[Z]));M=aa.map(V=>M[V])}c=M.map((aa,V)=>{var Z;const L={value:S.map(U=>U[V]),multidimensionalDefinition:aa.multidimensionalDefinition,variableName:aa.multidimensionalDefinition[0].variableName,dimensionValues:{}};null!=(Z=N)&&Z.length&&(L.magdirValue=[N[0][V],N[1][V]]);aa.multidimensionalDefinition.forEach(U=>L.dimensionValues[U.dimensionName]=U.values[0]);return L});return{location:h,value:null,dataSeries:c,pyramidLevel:A}};X._createClass(u,[{key:"_isGlobalWrappableSource",get:function(){const {rasterInfo:c}=
this,g=f.getWorldWidth(c.spatialReference);return P.isSome(g)&&c.extent.width>=g/2}},{key:"url",set:function(c){this._set("url",b.sanitizeUrl(c,R.getLogger(this.declaredClass)))}}]);return u}(T.EsriPromiseMixin(Y.JSONSupport));O.__decorate([m.property()],I.prototype,"_rasterTileAlighmentInfo",void 0);O.__decorate([m.property({readOnly:!0})],I.prototype,"_isGlobalWrappableSource",null);O.__decorate([m.property(l.url)],I.prototype,"url",null);O.__decorate([m.property({type:String,json:{write:!0}})],
I.prototype,"datasetName",void 0);O.__decorate([m.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);O.__decorate([m.property()],I.prototype,"rasterInfo",void 0);O.__decorate([m.property()],I.prototype,"ioConfig",void 0);O.__decorate([m.property()],I.prototype,"sourceJSON",void 0);return I=O.__decorate([t.subclass("esri.layers.support.rasterDatasets.BaseRaster")],I)})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../geometry ../../../core/maybe ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper ../../../geometry/Point".split(" "),
function(X,O,I,J,z,Y){function R(x,m){if(!P.has(x))return null;x=P.get(x);return null==x[m]?null:x[m]}const P=new Map,T=new J;X.decreaseRefCount=function(x,m,a){if(!P.has(x))return null==m?T.decreaseRefCount(x,a):0;const n=P.get(x);if(null==n[m])return T.decreaseRefCount(x,a);m=n[m].cache;if(m.has(a)){x=m.get(a);x.refCount--;if(0===x.refCount){m.delete(a);for(m=0;m<n.length;m++)n[m]&&n[m].cache.has(a)&&n[m].cache.delete(a);x.controller&&x.controller.abort()}return x.refCount}return 0};X.deleteBlock=
function(x,m,a){if(P.has(x)){var n=P.get(x);null==n[m]?T.deleteBlock(x,a):n[m].cache.delete(a)}else null==m&&T.deleteBlock(x,a)};X.deleteRaster=function(x){P.delete(x)};X.getBlock=function(x,m,a){if(!P.has(x))return null==m?T.getBlock(x,a):null;var n=P.get(x);if(null==n[m]){for(m=0;m<n.length;m++)if(n[m]&&n[m].cache.has(a))return a=n[m].cache.get(a),a.refCount++,a.block;return T.getBlock(x,a)}x=n[m].cache;if(x.has(a))return a=x.get(a),a.refCount++,a.block;for(let y=0;y<n.length;y++)if(y!==m&&n[y]&&
n[y]&&n[y].cache.has(a))return n=n[y].cache.get(a),n.refCount++,x.set(a,n),n.block;return null};X.getRasterId=function(x,m){return null==m?x:`${x}?sliceId=${m}`};X.putBlock=function(x,m,a,n,y=null){if(P.has(x)){var t=P.get(x);if(null==t[m])T.putBlock(x,a,n,y);else{var b={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:y};n.then(()=>b.isResolved=!0).catch(()=>b.isRejected=!0);t[m].cache.set(a,b)}}else null==m&&T.putBlock(x,a,n,y)};X.register=function(x,m){m={extent:null,rasterInfo:m,cache:new Map};
if(P.has(x))return x=P.get(x),x.push(m),x.length-1;P.set(x,[m]);return 0};X.unregister=function(x,m){if(P.has(x)){const a=P.get(x);a[m]=null;a.some(n=>null!=n)||P.delete(x)}};X.update=function(x,m,a,n,y,t,b=null){x=R(x,m);m=x.extent;const {cache:l,rasterInfo:v}=x;if(!m||m.xmin!==a.xmin||m.xmax!==a.xmax||m.ymin!==a.ymin||m.ymax!==a.ymax){m=a.clone().normalize();var {spatialReference:F,transform:w}=v,B=new Set;for(let k=0;k<m.length;k++){var D=m[k];if(D.xmax-D.xmin<=n||D.ymax-D.ymin<=n)continue;var K=
z.projectExtent(D,F,b);I.isSome(w)&&(K=w.inverseTransform(K));var f=new Y({x:n,y:n,spatialReference:D.spatialReference});if(null==y&&(y=z.projectResolution(f,F,D,b),!y))return;const {pyramidLevel:p,pyramidResolution:u,excessiveReading:E}=z.snapPyramid(y,v,t||"closest");if(E)return;({storageInfo:D}=v);var {origin:e}=D;f=Math.max(0,Math.floor((K.xmin-e.x)/u.x));e=Math.max(0,Math.floor((e.y-K.ymax)/u.y));const c=0<p?D.pyramidBlockWidth:D.blockWidth,g=0<p?D.pyramidBlockHeight:D.blockHeight;D=Math.max(0,
Math.floor(f/c)-1);var d=Math.max(0,Math.floor(e/g)-1);f=Math.floor((f+Math.ceil((K.xmax-K.xmin)/u.x-.1)-1)/c)+1;K=Math.floor((e+Math.ceil((K.ymax-K.ymin)/u.y-.1)-1)/g)+1;for(e=d;e<=K;e++)for(d=D;d<=f;d++)B.add(`${p}/${e}/${d}`)}l.forEach((k,p)=>{B.has(p)||(k=l.get(p),(null==k||k.isResolved||k.isRejected)&&l.delete(p))});x.extent={xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function X(I=
15E3,J=5E3){this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=I;this._interval=Math.min(I,J)}var O=X.prototype;O.decreaseRefCount=function(I,J){I=I+"/"+J;J=this._cachedBlocks;if(J.has(I)){const z=J.get(I);z.refCount--;0>=z.refCount&&(J.delete(I),z.controller&&z.controller.abort());return z.refCount}return 0};O.getBlock=function(I,J){I=I+"/"+J;J=this._cachedBlocks;if(J.has(I)){const z=J.get(I);z.ts=Date.now();z.refCount++;J.delete(I);J.set(I,z);return z.block}return null};O.putBlock=
function(I,J,z,Y=null){const R=this._cachedBlocks;I=I+"/"+J;R.has(I)?(z=R.get(I),z.ts=Date.now(),z.refCount++):R.set(I,{block:z,ts:Date.now(),refCount:1,controller:Y});this._trim();this._updateTimer()};O.deleteBlock=function(I,J){const z=this._cachedBlocks;I=I+"/"+J;z.has(I)&&z.delete(I)};O.updateMaxSize=function(I){this._size=I;this._trim()};O.empty=function(){this._cachedBlocks.clear();this._clearTimer()};O.getCurrentSize=function(){return this._cachedBlocks.size};O._updateTimer=function(){if(null==
this._timer){var I=this._cachedBlocks;this._timer=setInterval(()=>{const J=Array.from(I),z=Date.now();for(let Y=0;Y<J.length;Y++)if(J[Y][1].ts<=z-this._duration)I.delete(J[Y][0]);else break;0===I.size&&this._clearTimer()},this._interval)}};O._trim=function(){const I=this._cachedBlocks;if(!(-1===this._size||this._size>=I.size)){var J=Array.from(I);for(let z=0;z<J.length-this._size;z++)I.delete(J[z][0])}};O._clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return X}()})},
"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),function(X,O,I,J,z,Y,R,P,T,x,m,a){function n(q,H,M){return!P.canProjectWithoutEngine(q,H,M)}function y(q,H,M){if((q=n(q,
H,M))&&!P.isLoaded())throw new J("rasterprojectionhelper-project","projection engine is not loaded");return q}function t(){t=O._asyncToGenerator(function*(){if(P.isLoaded())return null;yield P.load()});return t.apply(this,arguments)}function b(q,H,M,W=null){const aa=q.spatialReference;if(aa.equals(H))return q;y(aa,H,W);M=M.center;M=new T({xmin:M.x-q.x/2,xmax:M.x+q.x/2,ymin:M.y-q.y/2,ymax:M.y+q.y/2,spatialReference:aa});W=P.project(M,H,W);M=E(H);z.isNone(W)||z.isSome(M)&&W.width>=M?(H=Y.getMetersPerUnitForSR(aa)/
Y.getMetersPerUnitForSR(H),q={x:q.x*H,y:q.y*H}):q={x:W.width,y:W.height};return q}function l(q,H=.01){return Y.getMetersPerUnitForSR(q)?H/Y.getMetersPerUnitForSR(q):0}function v(q,H,M=null,W=!0){var aa=q.spatialReference;if(aa.equals(H))return q;y(aa,H,M);M=P.project(q,H,M);if(!W||!M)return M;W=c(aa,!0);H=c(H,!0);(aa=l(aa))&&z.isSome(W)&&z.isSome(H)&&(0<M.x&&Math.abs(q.x-W[0])<aa?M.x-=H[1]-H[0]:0>M.x&&Math.abs(q.x-W[1])<aa&&(M.x+=H[1]-H[0]));return M}function F(q){const {inSR:H,outSR:M,datumTransformation:W,
preferPE:aa}=q;if(H.equals(M))return{points:q}=f(q,null),q;if(H.isWebMercator&&M.isWGS84||H.isWGS84&&M.isWebMercator){{const {cols:ca,rows:ba,xres:da,yres:ea,usePixelCenter:fa,inSR:ja,outSR:ha}=q;let {xmin:la,ymax:ia}=q;fa&&(la+=da/2,ia-=ea/2);q=[];var V=[],Z=Math.max(ca,ba);for(var L=0;L<Z;L++){var U=P.project(new x({x:la+da*Math.min(ca,L),y:ia-ea*Math.min(ba,L),spatialReference:ja}),ha);L<=ca&&q.push(U.x);L<=ba&&V.push(U.y)}Z=[];for(L=0;L<ca;L++)for(U=0;U<ba;U++)Z.push([q[L],V[U]]);q=Z}return q}if(y(H,
M,W)&&aa){if(H.isGeographic)return B(q);V=D(H);if(z.isSome(V))return B(q)}return w(q)}function w(q){var {points:H}=f(q,null);H=H.map(M=>new x(M[0],M[1],q.inSR));return P.project(H,q.outSR,q.datumTransformation).map(M=>M?[M.x,M.y]:[NaN,NaN])}function B(q){const {inSR:H,outSR:M,datumTransformation:W}=q,aa=D(H),{points:V,mask:Z}=f(q,aa);H.isGeographic||(q=H.wkid?R.PeFactory.coordsys(H.wkid):R.PeFactory.fromString(H.isGeographic?R.PeDefs.PE_TYPE_GEOGCS:R.PeDefs.PE_TYPE_PROJCS,H.wkt),R.PeCSTransformations.projToGeog(q,
V.length,V));z.isSome(W)&&W.steps.length&&W.steps.forEach(L=>{const U=L.wkid?R.PeFactory.geogtran(L.wkid):R.PeFactory.fromString(R.PeDefs.PE_TYPE_GEOGTRAN,L.wkt);R.PeGTTransformations.geogToGeog(U,V.length,V,null,L.isInverse?R.PeDefs.PE_TRANSFORM_2_TO_1:R.PeDefs.PE_TRANSFORM_1_TO_2)});M.isGeographic||(q=D(M,!0),q=z.isSome(q)&&q.isEnvelope?[q.bbox[1],q.bbox[3]]:[-90,90],e(V,q),q=M.wkid?R.PeFactory.coordsys(M.wkid):R.PeFactory.fromString(M.isGeographic?R.PeDefs.PE_TYPE_GEOGCS:R.PeDefs.PE_TYPE_PROJCS,
M.wkt),R.PeCSTransformations.geogToProj(q,V.length,V));q=V;if(Z&&V.length!==Z.length){q=[];for(let L=0,U=0;L<Z.length;L++)Z[L]?q.push(V[U++]):q.push([NaN,NaN])}return q}function D(q,H=!1){var M=q.wkid||q.wkt;if(!M||q.isGeographic)return null;M=String(M);if(S.has(M))return M=S.get(M),H?null==M?void 0:M.gcs:null==M?void 0:M.pcs;var W=q.wkid?R.PeFactory.coordsys(q.wkid):R.PeFactory.fromString(q.isGeographic?R.PeDefs.PE_TYPE_GEOGCS:R.PeDefs.PE_TYPE_PROJCS,q.wkt);q=l(q,1E-4);q=K(W,q);W=K(W,0,!0);S.set(M,
{pcs:q,gcs:W});return H?W:q}function K(q,H=0,M=!1){var W=R.PePCSInfo.generate(q),aa=M?q.horizonGcsGenerate():q.horizonPcsGenerate();if(null==aa||!aa.length)return null;q=!1;var V=aa.find(ba=>1===ba.getInclusive()&&1===ba.getKind());if(!V){V=aa.find(ba=>1===ba.getInclusive()&&0===ba.getKind());if(!V)return null;q=!0}M=M?0:(2===W.getNorthPoleLocation()?1:0)|(2===W.getSouthPoleLocation()?2:0);W=W.isPannableRectangle();V=V.getCoord();if(q)return{isEnvelope:q,isPannable:W,vertices:V,coef:null,bbox:[V[0][0]-
H,V[0][1]-H,V[1][0]+H,V[1][1]+H],poleLocation:M};H=0;q=[];let [Z,L]=V[0],[U,ca]=V[0];for(let ba=0,da=V.length;ba<da;ba++){H++;H===da&&(H=0);const [ea,fa]=V[ba],[ja,ha]=V[H];if(ha===fa)q.push([ea,ja,fa,ha,2]);else{aa=(ja-ea)/(ha-fa||1E-4);const la=ea-aa*fa;fa<ha?q.push([aa,la,fa,ha,0]):q.push([aa,la,ha,fa,1])}Z=Z<ea?Z:ea;L=L<fa?L:fa;U=U>ea?U:ea;ca=ca>fa?ca:fa}return{isEnvelope:!1,isPannable:W,vertices:V,coef:q,bbox:[Z,L,U,ca],poleLocation:M}}function f(q,H){const M=[],{cols:W,rows:aa,xres:V,yres:Z,
usePixelCenter:L}=q;let {xmin:U,ymax:ca}=q;L&&(U+=V/2,ca-=Z/2);if(z.isNone(H)){for(q=0;q<W;q++)for(H=0;H<aa;H++)M.push([U+V*q,ca-Z*H]);return{points:M}}q=new Uint8Array(W*aa);if(H.isEnvelope){const {bbox:[la,ia,ka,na]}=H;for(let ma=0,oa=0;ma<W;ma++){var ba=U+V*ma,da=H.isPannable||ba>=la&&ba<=ka;for(var ea=0;ea<aa;ea++,oa++){var fa=ca-Z*ea;da&&fa>=ia&&fa<=na&&(M.push([ba,fa]),q[oa]=1)}}return{points:M,mask:q}}({coef:ba}=H);H=[];for(da=0;da<aa;da++){var ja=ca-Z*da;ea=[];fa=[];for(var ha=0;ha<ba.length;ha++){const [la,
ia,ka,na,ma]=ba[ha];ja===ka&&ka===na?(ea.push(la),ea.push(ia),fa.push(2),fa.push(2)):ja>=ka&&ja<=na&&(ea.push(la*ja+ia),fa.push(ma))}ja=ea;if(2<ea.length){ha=2===fa[0]?0:fa[0];let la=ea[0];ja=[];for(let ia=1;ia<fa.length;ia++)if(2!==fa[ia]||ia===fa.length-1)fa[ia]!==ha&&(ja.push(0===ha?Math.min(la,ea[ia-1]):Math.max(la,ea[ia-1])),ha=fa[ia],la=ea[ia]),ia===fa.length-1&&ja.push(0===fa[ia]?Math.min(la,ea[ia]):Math.max(la,ea[ia]));ja.sort((ia,ka)=>ia-ka)}else ea[0]>ea[1]&&(ja=[ea[1],ea[0]]);H.push(ja)}for(let la=
0,ia=0;la<W;la++)for(ba=U+V*la,da=0;da<aa;da++,ia++)if(ea=ca-Z*da,fa=H[da],2===fa.length)ba>=fa[0]&&ba<=fa[1]&&(M.push([ba,ea]),q[ia]=1);else if(2<fa.length){ja=!1;for(ha=0;ha<fa.length;ha+=2)if(ba>=fa[ha]&&ba<=fa[ha+1]){ja=!0;break}ja&&(M.push([ba,ea]),q[ia]=1)}return{points:M,mask:q}}function e(q,H){const [M,W]=H;for(H=0;H<q.length;H++){const aa=q[H][1];if(aa<M||aa>W)q[H]=[NaN,NaN]}}function d(q){const H=E(q[0].spatialReference);if(2>q.length||z.isNone(H))return q[0];let {xmin:M,xmax:W,ymin:aa,
ymax:V}=q[0];for(let Z=1;Z<q.length;Z++){const L=q[Z];W=L.xmax+H*Z;aa=Math.min(aa,L.ymin);V=Math.max(V,L.ymax)}return new T({xmin:M,xmax:W,ymin:aa,ymax:V,spatialReference:q[0].spatialReference})}function k(q,H,M=null,W=!0){var aa=q.spatialReference;if(aa.equals(H))return q;var V=h(q);const Z=E(aa,!0);var L=E(H);if(0===V||z.isNone(Z)||z.isNone(L))return V=u(q,H,M,W),z.isNone(Z)&&z.isSome(L)&&Math.abs(V.width-L)<l(H)&&P.isLoaded()&&(aa=D(aa),z.isSome(aa)&&aa.poleLocation===Q.None&&q.width<(aa.bbox[2]-
aa.bbox[0])/2)?p(q,H)||V:V;L=q.clone().normalize();if(1===L.length&&q.xmax<Z&&q.xmax-Z/2>l(aa)){const {xmin:U,xmax:ca}=q;for(let ba=0;ba<=V;ba++)L[ba]=new T({xmin:0===ba?U:-Z/2,xmax:ba===V?ca-Z*ba:Z/2,ymin:q.ymin,ymax:q.ymax,spatialReference:aa})}q=L.map(U=>u(U,H,M,W));return d(q.filter(U=>!!U))}function p(q,H){const M=E(H);if(z.isNone(M))return null;let {xmin:W,ymin:aa,xmax:V,ymax:Z}=q;var L=q.spatialReference;q=new m({spatialReference:L,rings:[[[W,aa],[V,aa],[V,Z],[W,Z],[W,aa]]]});q=P.project(q,
H);if(2!==q.rings.length||!q.rings[0].length||!q.rings[1].length)return null;({rings:q}=q);L=l(L);H=new T({spatialReference:H});for(let U=0;2>U;U++){W=V=q[U][0][0];aa=Z=q[U][0][1];for(let ca=0;ca<q[U].length;ca++)W=W>q[U][ca][0]?q[U][ca][0]:W,V=V<q[U][ca][0]?q[U][ca][0]:V,aa=aa>q[U][ca][1]?q[U][ca][1]:aa,Z=Z<q[U][ca][1]?q[U][ca][1]:Z;if(0===U)H.ymin=aa,H.ymax=Z,H.xmin=W,H.xmax=V;else if(H.ymin=Math.min(H.ymin,aa),H.ymax=Math.max(H.ymax,Z),Math.abs(V-M/2)<L)H.xmin=W,H.xmax+=M;else if(Math.abs(W+M/
2)<L)H.xmax=V+M;else return null}return H}function u(q,H,M=null,W=!0,aa=!0){const V=q.spatialReference;if(V.equals(H))return q;y(V,H,M);const Z=P.project(q,H,M);if(aa&&H.isWebMercator&&Z&&(Z.ymax=Math.min(2.0037508342787E7,Z.ymax),Z.ymin=Math.max(-2.0037508342787E7,Z.ymin),Z.ymin>=Z.ymax))return null;if(!W||!Z)return Z;var L=c(V,!0);W=c(H,!0);if(z.isNone(L)||z.isNone(W))return Z;aa=l(V,.001);const U=l(V,500);var ca=l(H,.001);if(Math.abs(Z.xmin-W[0])<ca&&Math.abs(Z.xmax-W[1])<ca){ca=Math.abs(q.xmin-
L[0]);L=Math.abs(L[1]-q.xmax);if(ca<aa&&L>U){Z.xmin=W[0];var ba=[];ba.push(new x(q.xmax,q.ymin,V));ba.push(new x(q.xmax,(q.ymin+q.ymax)/2,V));ba.push(new x(q.xmax,q.ymax,V));ba=ba.map(da=>v(da,H,M)).filter(da=>!isNaN(null==da?void 0:da.x)).map(da=>da.x);Z.xmax=Math.max.apply(null,ba)}L<aa&&ca>U&&(Z.xmax=W[1],W=[],W.push(new x(q.xmin,q.ymin,V)),W.push(new x(q.xmin,(q.ymin+q.ymax)/2,V)),W.push(new x(q.xmin,q.ymax,V)),q=W.map(da=>v(da,H,M)).filter(da=>!isNaN(null==da?void 0:da.x)).map(da=>da.x),Z.xmin=
Math.min.apply(null,q))}else q=l(H,.001),Math.abs(Z.xmin-W[0])<q&&(Z.xmin=W[0]),Math.abs(Z.xmax-W[1])<q&&(Z.xmax=W[1]);return Z}function E(q,H=!1){return q.isWebMercator?2*(H?2.0037508342787E7:2.0037508342788905E7):q.wkid&&q.isGeographic?360:2*G[q.wkid]||null}function c(q,H=!1){if(q.isGeographic)return[-180,180];q=E(q,H);return z.isSome(q)?[-q/2,q/2]:null}function g(q,H,M,W){q=(q-H)/M;0!==q-Math.floor(q)?q=Math.floor(q):W&&--q;return q}function h(q,H=!1){var M=E(q.spatialReference);if(z.isNone(M))return 0;
const W=H?0:-(M/2),aa=l(q.spatialReference),V=!H&&Math.abs(q.xmin+M/2)<aa?-M/2:q.xmin;q=g(!H&&Math.abs(q.xmax-M/2)<aa?M/2:q.xmax,W,M,!0);M=g(V,W,M,!1);return q-M}function r(q){const {projectedExtent:H,srcBufferExtent:M,pixelSize:W,datumTransformation:aa,rasterTransform:V}=q;var Z=H.spatialReference;const L=M.spatialReference;var U=y(Z,L);const {xmin:ca,ymin:ba,xmax:da,ymax:ea}=H,fa=E(L),ja=z.isSome(fa)&&(q.hasWrapAround||"gcs-shift"===(null==V?void 0:V.type));q=q.spacing||[32,32];var ha=q[0]*W.x,
la=q[1]*W.y;const ia=1===q[0],ka=Math.ceil((da-ca)/ha-.1/q[0])+(ia?0:1),na=Math.ceil((ea-ba)/la-.1/q[1])+(ia?0:1);ha=F({cols:ka,rows:na,xmin:ca,ymax:ea,xres:ha,yres:la,inSR:Z,outSR:L,datumTransformation:aa,preferPE:4>=q[0],usePixelCenter:ia});la=[];let ma,oa=0;const pa=ia?-1:NaN,{xmin:ta,xmax:sa,ymax:ra,width:ua,height:xa}=M,va=l(L,500),wa=z.isSome(fa)&&0<ta&&sa>fa/2;var ya=!1;U&&(ya=D(Z),ya=z.isSome(ya)&&0<ya.poleLocation);for(Z=0;Z<ka;Z++){U=[];for(let za=0;za<na;za++){var qa=ha[Z*na+za];ja&&qa[0]>
sa&&qa[0]>fa/2-va?qa[0]-=fa:ja&&0===Z&&0>qa[0]&&wa&&!V&&(qa[0]+=fa);!qa||isNaN(qa[0])||isNaN(qa[1])?(la.push(pa),la.push(pa),U.push(null),oa++):(V&&(qa=V.inverseTransform(new x({x:qa[0],y:qa[1],spatialReference:L})),qa=[qa.x,qa.y]),U.push(qa),0<Z&&ja&&ma[za]&&qa[0]<ma[za][0]&&(qa[0]+=fa,ya&&qa[0]>sa&&qa[0]>fa&&(qa[0]-=fa)),la.push((qa[0]-ta)/ua),la.push((ra-qa[1])/xa))}ma=U}return{offsets:la,error:null,coefficients:null,outofBoundPointCount:oa,spacing:q,size:ia?[ka,na]:[ka-1,na-1]}}function A(q,H,
M){const {cols:W,rows:aa}=H;H=new Float32Array((W-1)*(aa-1)*12);const V=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),Z=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let ea=0;ea<W-1;ea++){for(var L=0;L<aa-1;L++){var U=ea*aa*2+2*L,ca=q[U];const fa=q[U+1];var ba=q[U+2],da=q[U+3];U+=2*aa;const ja=q[U],ha=q[U+1],la=q[U+2];U=q[U+3];let ia=0,ka=12*(L*(W-1)+ea);for(let na=0;3>na;na++)H[ka++]=V[ia++]*ca+V[ia++]*ba+V[ia++]*la;ia=0;for(ba=0;3>ba;ba++)H[ka++]=V[ia++]*fa+V[ia++]*da+V[ia++]*U;ia=0;for(da=0;3>da;da++)H[ka++]=
Z[ia++]*ca+Z[ia++]*ja+Z[ia++]*la;ia=0;for(ca=0;3>ca;ca++)H[ka++]=Z[ia++]*fa+Z[ia++]*ha+Z[ia++]*U}if(M)for(L=0;L<H.length;L++)isNaN(H[L])&&(H[L]=-1)}return H}var Q;(function(q){q[q.None=0]="None";q[q.North=1]="North";q[q.South=2]="South";q[q.Both=3]="Both"})(Q||(Q={}));const C=(q,H,M,W=0)=>{if(1===M[0])return[0,0];var aa=1,V=-1,Z=1,L=-1;for(var U=0;U<q.length;U+=2)isNaN(q[U])||(aa=aa>q[U]?q[U]:aa,V=V>q[U]?V:q[U],Z=Z>q[U+1]?q[U+1]:Z,L=L>q[U+1]?L:q[U+1]);const {cols:ca,rows:ba}=H;H=(V-aa)/ca/M[0];M=
(L-Z)/ba/M[1];W*=2;Z=0;L=!1;aa=[0,0];for(V=0;V<ca-3;V++){for(U=0;U<ba-3;U++){var da=V*ba*2+2*U;const ea=Math.abs(((q[da]+q[da+4]+q[da+4*ba]+q[da+4*ba+4])/4-q[da+2*ba+2])/H);da=Math.abs(((q[da+1]+q[da+5]+q[da+4*ba+1]+q[da+4*ba+5])/4-q[da+2*ba+3])/M);ea+da>Z&&(Z=ea+da,aa=[ea,da]);if(W&&Z>W){L=!0;break}}if(L)break}return aa},G={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,
32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,
54100:2.0037508342789244E7,54101:2.0037508342789244E7},S=new Map,N=new Map;X.computeProjectedScales=function(q,H,M=512,W=!0){const {extent:aa,spatialReference:V,pixelSize:Z}=q,L=b(new x({x:Z.x,y:Z.y,spatialReference:V}),H,aa);if(null==L)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var U=(L.x+L.y)/2,ca=Y.getMetersPerUnitForSR(H);U=U*ca*96*39.37;const ba=H.isGeographic?256/M*2.958287637958547E8:256/M*5.91657527591555E8;M="vector-magdir"===q.dataType||"vector-uv"===
q.dataType;const da=k(aa,H);M||W&&(H.isGeographic||H.isWebMercator)&&(M=0>da.xmin*da.xmax);W=U;if(M)W=ba,q=H.isGeographic?1.341104507446289E-6:.29858214164761665,ca=96*q*ca*39.37,H=b(new x({x:q,y:q,spatialReference:{wkid:H.isGeographic?4326:3857}}),V,da),H.x*=W/ca,H.y*=W/ca;else{H={x:Z.x,y:Z.y};q=Math.ceil(Math.log(Math.min(q.width,q.height)/32)/Math.LN2);for(ca=0;W<.5005*ba&&ca<q;)ca++,W*=2,H.x*=2,H.y*=2;1.001>=Math.max(W,ba)/Math.min(W,ba)&&(W=ba)}q=[W];ca=[{x:H.x,y:H.y}];for(U=Math.min(70.5310735,
U)/1.001;W>=U;)W/=2,H.x/=2,H.y/=2,q.push(W),ca.push({x:H.x,y:H.y});return{projectedPixelSize:L,scales:q,srcResolutions:ca,isCustomTilingScheme:!M}};X.defaultGridSpacing=32;X.defaultProjectionToleranceInPixels=4;X.getDefaultDatumTransformationForDataset=function(q,H,M){return y(q.spatialReference,H)?M?P.getTransformation(H,q.spatialReference,q):P.getTransformation(q.spatialReference,H,q):null};X.getProjectedGridPoints=F;X.getProjectionOffsetGrid=function(q){var H=q.isAdaptive&&null==q.spacing;let M=
q.spacing||[32,32],W=r(q);var aa={cols:W.size[0]+1,rows:W.size[1]+1};const V=0<W.outofBoundPointCount&&W.outofBoundPointCount<W.offsets.length/2;let Z=W.outofBoundPointCount===W.offsets.length/2||H&&V?[0,0]:C(W.offsets,aa,M,4);const L=(Z[0]+Z[1])/2;var U=q.projectedExtent.spatialReference;const ca=q.srcBufferExtent.spatialReference;H&&(V||4<L)&&(n(U,ca,q.datumTransformation)&&(U.isGeographic||z.isSome(D(U))),M=[4,4],W=r({...q,spacing:M}),aa={cols:W.size[0]+1,rows:W.size[1]+1},Z=C(W.offsets,aa,M,4));
W.error=Z;1<M[0]&&(W.coefficients=A(W.offsets,aa,V));!q.includeGCSGrid||U.isGeographic||U.isWebMercator||(ca.isGeographic?W.gcsGrid={offsets:W.offsets,coefficients:W.coefficients,spacing:M}:(H=D(U),z.isSome(H)&&!H.isEnvelope&&(U&&!U.isGeographic&&(H=String(U.wkid||U.wkt),N.has(H)?U=N.get(H):(U=(U.wkid?R.PeFactory.coordsys(U.wkid):R.PeFactory.fromString(R.PeDefs.PE_TYPE_PROJCS,U.wkt)).getGeogcs().getCode(),N.set(H,U)),U=new a({wkid:U})),U=k(q.projectedExtent,U),{offsets:q}=r({...q,srcBufferExtent:U,
spacing:M}),aa=A(q,aa,V),W.gcsGrid={offsets:q,coefficients:aa,spacing:M})));return W};X.getRasterDatasetAlignmentInfo=function(q){const H=q.storageInfo.origin.x;var M=E(q.spatialReference,!0);if(z.isNone(M))return{originX:H,halfWorldWidth:null,pyramidsInfo:null};const W=M/2,{nativePixelSize:aa,storageInfo:V,extent:Z}=q,{maximumPyramidLevel:L,blockWidth:U,pyramidScalingFactor:ca}=V;let ba=aa.x;const da=[];q=z.isSome(q.transform)&&"gcs-shift"===q.transform.type;const ea=H+(q?0:W);M=q?M-H:W-H;for(let fa=
0;fa<=L;fa++){const ja=(Z.xmax-H)/ba/U,ha=M/ba/U;da.push({resolutionX:ba,blockWidth:U,datsetColumnCount:0===ja-Math.floor(ja)?ja:Math.ceil(ja),worldColumnCountFromOrigin:0===ha-Math.floor(ha)?ha:Math.ceil(ha),leftMargin:Math.round(ea/ba)%U,rightPadding:(U-Math.round(M/ba)%U)%U,originColumnOffset:Math.floor(ea/ba/U)});ba*=ca}return{originX:H,halfWorldWidth:W,pyramidsInfo:da,hasGCSSShiftTransform:q}};X.getWorldWidth=E;X.getWorldWrapCount=h;X.load=function(){return t.apply(this,arguments)};X.minimumGridSpacing=
4;X.projectExtent=k;X.projectPoint=v;X.projectResolution=b;X.requirePE=n;X.snapExtent=function(q){q=q.clone().normalize();return 1===q.length?q[0]:d(q)};X.snapPyramid=function(q,H,M){const {storageInfo:W,pixelSize:aa}=H;let V=!1;var {pyramidResolutions:Z}=W;if(z.isSome(Z)&&Z.length){q=(q.x+q.y)/2;var L=Z[Z.length-1];L=(L.x+L.y)/2;var U=(aa.x+aa.y)/2;if(q<=U)var ca=0;else if(q>=L)ca=Z.length,V=8<q/L;else{L=U;for(let ba=1;ba<=Z.length;ba++){U=(Z[ba-1].x+Z[ba-1].y)/2;if(q<=U){q===U?ca=ba:"down"===M?
(ca=ba-1,V=8<q/L):ca="up"===M?ba:q-L>U-q||2<q/L?ba:ba-1;break}L=U}}M=0===ca?aa:Z[ca-1];V&&(Z=Math.min(M.x,M.y),q=Y.getMetersPerUnitForSR(H.spatialReference),19567<Z*q&&(V=!1));return{pyramidLevel:ca,pyramidResolution:new x({x:M.x,y:M.y,spatialReference:H.spatialReference}),excessiveReading:V}}ca=Math.log(q.x/aa.x)/Math.LN2;q=Math.log(q.y/aa.y)/Math.LN2;Z=H.storageInfo.maximumPyramidLevel||0;ca="down"===M?Math.floor(Math.min(ca,q)):"up"===M?Math.ceil(Math.max(ca,q)):Math.round((ca+q)/2);0>ca?ca=0:
ca>Z&&(V=ca>Z+3,ca=Z);M=2**ca;H=new x({x:M*H.nativePixelSize.x,y:M*H.nativePixelSize.y,spatialReference:H.spatialReference});return{pyramidLevel:ca,pyramidResolution:H,excessiveReading:V}};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a){function n(h,r){return y.apply(this,arguments)}function y(){y=O._asyncToGenerator(function*(h,r){var A;if(!a.isPlatformLittleEndian)throw new I("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield R.load();const {offset:Q,noDataValue:C}=r;let G=null==(A=r.pixelType)?void 0:A.toUpperCase();G&&!g.has(G)&&(G=null);const {width:S,height:N,pixelType:q,statistics:H,pixels:M,mask:W}=R.decode(h,{inputOffset:Q,noDataValue:C,pixelType:G,returnPixelInterleavedDims:r.returnPixelInterleavedDims});
return new J({width:S,height:N,pixelType:q.toLowerCase(),pixels:M,mask:W,statistics:H})});return y.apply(this,arguments)}function t(h,r){return b.apply(this,arguments)}function b(){b=O._asyncToGenerator(function*(h,r){h=yield m.decode(h,r);h=new J({width:h.width,height:h.height,pixels:h.pixels,pixelType:h.pixelType.toLowerCase(),mask:h.mask,statistics:null});h.updateStatistics();return h});return b.apply(this,arguments)}function l(h,r){return v.apply(this,arguments)}function v(){v=O._asyncToGenerator(function*(h,
r){h=yield m.decodeTileOrStrip(h,r.customOptions);h=new J({width:h.width,height:h.height,pixels:h.pixels,pixelType:h.pixelType.toLowerCase(),mask:h.mask,statistics:null});h.updateStatistics();return h});return v.apply(this,arguments)}function F(h,r){const A=r.pixelType||"u8",Q=J.getPixelArrayConstructor(A),C="u8"===A?h:new Q(h.buffer),G=[],S=r.planes||1;if(1===S)G.push(C);else for(let N=0;N<S;N++){const q=(r.width||1)*(r.height||h.length),H=new Q(q);for(let M=0;M<q;M++)H[M]=C[M*S+N];G.push(H)}h=new J({width:r.width||
1,height:r.height||h.length,pixels:G,pixelType:A,statistics:null});h.updateStatistics();return h}function w(h,r){h=(new T.Zlib(new Uint8Array(h))).getBytes();return F(h,r)}function B(h,r){h=P.decode(h,r.offset,r.eof,!r.isInputBigEndian);return F(h,r)}function D(h,r){h=Y.decode(h,r.hasNoZlibMask);h=new J({width:h.width,height:h.height,pixels:h.pixels,pixelType:"U8",mask:h.mask,statistics:null});h.updateStatistics();return h}function K(h,r){h=new Uint8Array(h);h=new E(h);const {width:A,height:Q}=r;
r=A*Q;h=h.decode();let C=0;var G=0;let S;G=new Uint8Array(r);for(C=0;C<r;C++)G[C]=h[4*C+3];const N=new J({width:A,height:Q,pixels:[],pixelType:"U8",mask:G,statistics:[]});for(C=0;3>C;C++){S=new Uint8Array(r);for(G=0;G<r;G++)S[G]=h[4*G+C];N.addData({pixels:S})}N.updateStatistics();return N}function f(h,r,A,Q){return e.apply(this,arguments)}function e(){e=O._asyncToGenerator(function*(h,r,A,Q){h=yield(new z).decode(h,{applyJpegMask:!1,format:r,...A},Q);h=new J(h);h.updateStatistics();return h});return e.apply(this,
arguments)}function d(h){if(null==h)throw new I("rasterCodec:decode","parameter encodeddata is required.");h=new Uint8Array(h,0,10);let r="";255===h[0]&&216===h[1]?r="jpg":137===h[0]&&80===h[1]&&78===h[2]&&71===h[3]?r="png":67===h[0]&&110===h[1]&&116===h[2]&&90===h[3]&&73===h[4]&&109===h[5]&&97===h[6]&&103===h[7]&&101===h[8]&&32===h[9]?r="lerc":76===h[0]&&101===h[1]&&114===h[2]&&99===h[3]&&50===h[4]&&32===h[5]?r="lerc2":73===h[0]&&73===h[1]&&42===h[2]&&0===h[3]||77===h[0]&&77===h[1]&&0===h[2]&&42===
h[3]||73===h[0]&&73===h[1]&&43===h[2]&&0===h[3]||77===h[0]&&77===h[1]&&0===h[2]&&43===h[3]?r="tiff":71===h[0]&&73===h[1]&&70===h[2]?r="gif":66===h[0]&&77===h[1]?r="bmp":String.fromCharCode.apply(null,h).toLowerCase().includes("error")&&(r="error");return r}function k(h){let r=null;switch(h){case "lerc":case "lerc2":r=n;break;case "jpg":r=D;break;case "png":r=K;break;case "bsq":case "bip":r=(A,Q)=>{{var C=Q.pixelType;var G=null;let S=null;switch(C?C.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":S=
255;G=Uint8Array;break;case "u16":S=S||65535;G=Uint16Array;break;case "u32":S=S||2**32-1;G=Uint32Array;break;case "s8":S=S||-128;G=Int8Array;break;case "s16":S=S||-32768;G=Int16Array;break;case "s32":S=S||-(2**31);G=Int32Array;break;default:G=Float32Array}C={pixelTypeCtor:G,noDataValue:S}}({pixelTypeCtor:C}=C);G=x.decode;A=G(A,{width:Q.width,height:Q.height,pixelType:C,format:h});Q=new J({width:Q.width,height:Q.height,pixels:A.pixels,pixelType:Q.pixelType,mask:A.mask,statistics:null});Q.updateStatistics();
return Q};break;case "tiff":r=t;break;case "deflate":r=w;break;case "lzw":r=B;break;case "error":r=()=>{throw new I("rasterCodec:decode","input data contains error");};break;default:r=()=>{throw new I("rasterCodec:decode","unsupported raster format");}}return r}function p(h,r=1){if(h){var {pixels:A,width:Q,height:C,mask:G}=h;if(A&&0!==A.length){var S=A.length,N=Q-1,q=C-1,H=[],M,W,aa=J.getPixelArrayConstructor(h.pixelType);if(0===r){for(r=0;r<S;r++){var V=A[r];var Z=new aa(N*q);for(M=0;M<q;M++){var L=
M*Q;for(W=0;W<N;W++)Z[M*N+W]=V[L+W]}H.push(Z)}if(G){var U=new Uint8Array(N*q);for(M=0;M<q;M++)for(L=M*Q,W=0;W<N;W++)U[M*N+W]=G[L+W]}}else{for(r=0;r<S;r++){V=A[r];Z=new aa(N*q);for(M=0;M<q;M++)for(L=M*Q,W=0;W<N;W++)Z[M*N+W]=(V[L+W]+V[L+W+1]+V[L+Q+W]+V[L+Q+W+1])/4;H.push(Z)}if(G)for(U=new Uint8Array(N*q),M=0;M<q;M++)for(L=M*Q,W=0;W<N;W++)U[M*N+W]=Math.min.apply(null,[G[L+W],G[L+W+1],G[L+Q+W],G[L+Q+W+1]])}h.width=N;h.height=q;h.mask=U;h.pixels=H}}}function u(){u=O._asyncToGenerator(function*(h,r={},
A){if(null==h)throw new I("rasterCodec:decode","missing encodeddata parameter.");let Q=r.format&&r.format.toLowerCase();if(!("bsq"!==Q&&"bip"!==Q||null!=r.width&&null!=r.height))throw new I("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===Q&&r.customOptions)return l(h,r);if(!Q||"bsq"!==Q&&"bip"!==Q&&"deflate"!==Q&&"lzw"!==Q)Q=d(h);r.useCanvas&&c.has(Q)?h=yield f(h,Q,r,A):(A=k(Q),r.isPoint&&(r={...r},r.width++,r.height++),h=yield A(h,r),r.isPoint&&p(h));return h});
return u.apply(this,arguments)}var E=function(h){function r(G){var S,N;this.data=G;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(N=null;;){var q=this.readUInt32();var H=G=void 0;G=[];for(H=0;4>H;++H)G.push(String.fromCharCode(this.data[this.pos++]));G=G.join("");switch(G){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];
this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(q);break;case "fcTL":N&&this.animation.frames.push(N);this.pos+=4;N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};G=this.readUInt16();q=this.readUInt16()||100;N.delay=1E3*G/q;N.disposeOp=this.data[this.pos++];N.blendOp=
this.data[this.pos++];N.data=[];break;case "IDAT":case "fdAT":"fdAT"===G&&(this.pos+=4,q-=4);G=(null!=N?N.data:void 0)||this.imgData;for(H=0;0<=q?H<q:H>q;0<=q?++H:--H)G.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(q);q=255-this.transparency.indexed.length;if(0<q)for(G=0;0<=q?G<q:G>q;0<=q?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(q)[0];break;case 2:this.transparency.rgb=
this.read(q)}break;case "tEXt":H=this.read(q);q=H.indexOf(0);G=String.fromCharCode.apply(String,H.slice(0,q));this.text[G]=String.fromCharCode.apply(String,H.slice(q+1));break;case "IEND":N&&this.animation.frames.push(N);a:{switch(this.colorType){case 0:case 3:case 4:N=1;break a;case 2:case 6:N=3;break a}N=void 0}this.colors=N;this.hasAlphaChannel=4===(S=this.colorType)||6===S;S=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*S;a:{switch(this.colors){case 1:S="DeviceGray";break a;
case 3:S="DeviceRGB";break a}S=void 0}this.colorSpace=S;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=q}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var A;r.load=function(G,S,N){"function"===typeof S&&(N=S);var q=new XMLHttpRequest;q.open("GET",G,!0);q.responseType="arraybuffer";q.onload=function(){var H=new Uint8Array(q.response||q.mozResponseArrayBuffer);H=new r(H);"function"===typeof(null!=S?S.getContext:void 0)&&H.render(S);return"function"===
typeof N?N(H):void 0};return q.send(null)};r.prototype.read=function(G){var S;var N=[];for(S=0;0<=G?S<G:S>G;0<=G?++S:--S)N.push(this.data[this.pos++]);return N};r.prototype.readUInt32=function(){var G=this.data[this.pos++]<<24;var S=this.data[this.pos++]<<16;var N=this.data[this.pos++]<<8;var q=this.data[this.pos++];return G|S|N|q};r.prototype.readUInt16=function(){var G=this.data[this.pos++]<<8;var S=this.data[this.pos++];return G|S};r.prototype.decodePixels=function(G){var S,N,q,H,M,W,aa,V;null==
G&&(G=this.imgData);if(0===G.length)return new Uint8Array(0);G=new T.Zlib(G);G=G.getBytes();var Z=this.pixelBitlength/8;var L=Z*this.width;var U=new Uint8Array(L*this.height);var ca=G.length;for(N=H=M=0;H<ca;){switch(G[H++]){case 0:for(q=S=0;S<L;q=S+=1)U[N++]=G[H++];break;case 1:for(q=W=0;W<L;q=W+=1){S=G[H++];var ba=q<Z?0:U[N-Z];U[N++]=(S+ba)%256}break;case 2:for(q=ba=0;ba<L;q=ba+=1){S=G[H++];var da=(q-q%Z)/Z;W=M&&U[(M-1)*L+da*Z+q%Z];U[N++]=(W+S)%256}break;case 3:for(q=V=0;V<L;q=V+=1)S=G[H++],da=
(q-q%Z)/Z,ba=q<Z?0:U[N-Z],W=M&&U[(M-1)*L+da*Z+q%Z],U[N++]=(S+Math.floor((ba+W)/2))%256;break;case 4:for(q=V=0;V<L;q=V+=1){S=G[H++];da=(q-q%Z)/Z;ba=q<Z?0:U[N-Z];0===M?W=aa=0:(W=U[(M-1)*L+da*Z+q%Z],aa=da&&U[(M-1)*L+(da-1)*Z+q%Z]);var ea=ba+W-aa;q=Math.abs(ea-ba);da=Math.abs(ea-W);ea=Math.abs(ea-aa);ba=q<=da&&q<=ea?ba:da<=ea?W:aa;U[N++]=(S+ba)%256}break;default:throw Error("Invalid filter algorithm: "+G[H-1]);}M++}return U};r.prototype.decodePalette=function(){var G,S,N,q;var H=this.palette;var M=this.transparency.indexed||
[];var W=new Uint8Array((M.length||0)+H.length);var aa=0;H.length;var V=S=G=0;for(N=H.length;S<N;V=S+=3)W[aa++]=H[V],W[aa++]=H[V+1],W[aa++]=H[V+2],W[aa++]=null!=(q=M[G++])?q:255;return W};r.prototype.copyToImageData=function(G,S){var N,q;var H=this.colors;var M=null;var W=this.hasAlphaChannel;this.palette.length&&(M=null!=(N=this._decodedPalette)?N:this._decodedPalette=this.decodePalette(),H=4,W=!0);G=G.data||G;var aa=G.length;var V=M||S;N=q=0;if(1===H)for(;N<aa;)H=M?4*S[N/4]:q,q=V[H++],G[N++]=q,
G[N++]=q,G[N++]=q,G[N++]=W?V[H++]:this.transparency.grayscale&&this.transparency.grayscale===q?0:255,q=H;else for(;N<aa;)H=M?4*S[N/4]:q,G[N++]=V[H++],G[N++]=V[H++],G[N++]=V[H++],G[N++]=W?V[H++]:this.transparency.rgb&&this.transparency.rgb[1]===V[H-3]&&this.transparency.rgb[3]===V[H-2]&&this.transparency.rgb[5]===V[H-1]?0:255,q=H};r.prototype.decode=function(){var G=new Uint8Array(this.width*this.height*4);this.copyToImageData(G,this.decodePixels());return G};var Q=(A=h.document&&h.document.createElement("canvas"))&&
A.getContext("2d");var C=function(G){Q.width=G.width;Q.height=G.height;Q.clearRect(0,0,G.width,G.height);Q.putImageData(G,0,0);G=new Image;G.src=A.toDataURL();return G};r.prototype.decodeFrames=function(G){var S,N;if(this.animation){var q=this.animation.frames;var H=[];var M=S=0;for(N=q.length;S<N;M=++S){M=q[M];var W=G.createImageData(M.width,M.height);var aa=this.decodePixels(new Uint8Array(M.data));this.copyToImageData(W,aa);M.imageData=W;H.push(M.image=C(W))}return H}};r.prototype.renderFrame=
function(G,S){var N=this.animation.frames;var q=N[S];N=N[S-1];0===S&&G.clearRect(0,0,this.width,this.height);1===(null!=N?N.disposeOp:void 0)?G.clearRect(N.xOffset,N.yOffset,N.width,N.height):2===(null!=N?N.disposeOp:void 0)&&G.putImageData(N.imageData,N.xOffset,N.yOffset);0===q.blendOp&&G.clearRect(q.xOffset,q.yOffset,q.width,q.height);return G.drawImage(q.image,q.xOffset,q.yOffset)};r.prototype.animate=function(G){var S,N=this;var q=0;var H=this.animation;var M=H.numFrames;var W=H.frames;var aa=
H.numPlays;return(S=function(){var V=q++%M;var Z=W[V];N.renderFrame(G,V);if(1<M&&q/M<aa)return N.animation._timeout=setTimeout(S,Z.delay)})()};r.prototype.stopAnimation=function(){var G;return clearTimeout(null!=(G=this.animation)?G._timeout:void 0)};r.prototype.render=function(G){G._png&&G._png.stopAnimation();G._png=this;G.width=this.width;G.height=this.height;G=G.getContext("2d");if(this.animation)return this.decodeFrames(G),this.animate(G);var S=G.createImageData(this.width,this.height);this.copyToImageData(S,
this.decodePixels());return G.putImageData(S,0,0)};return r}(self);const c=new Set(["jpg","png","bmp","gif"]),g=new Set("S8 U8 S16 U16 S32 U32 F32 F64".split(" "));X.decode=function(h){return u.apply(this,arguments)};X.getFormat=function(h){h=d(h);"lerc2"===h?h="lerc":"error"===h&&(h="");return h};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils",
"../../../chunks/Zlib"],function(X,O,I){return function(){function J(z){z&&(this.canvas=z.canvas,this.ctx=z.ctx||z.canvas&&z.canvas.getContext("2d"))}J.prototype.decode=function(z,Y,R){if(!z||10>z.byteLength)throw new X("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:P,height:T,format:x}=Y;const {applyJpegMask:m}=Y;if(m&&(!P||!T))throw new X("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((a,
n)=>{let y=null;"jpg"===x&&m&&(y=J._getMask(z,{width:P,height:T}));const t=new Blob([new Uint8Array(z)],{type:"jpg"==="image/"+x?"jpeg":x}),b=URL.createObjectURL(t),l=new Image;let v;l.src=b;l.onload=()=>{URL.revokeObjectURL(b);if(O.isAborted(R))n(O.createAbortError());else{P=l.width;T=l.height;if(this.canvas){if(this.canvas.width!==P||this.canvas.height!==T)this.canvas.width=P,this.canvas.height=T;this.ctx.clearRect(0,0,P,T)}else this.canvas=document.createElement("canvas"),this.canvas.width=P,this.canvas.height=
T,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(l,0,0);var F=this.ctx.getImageData(0,0,P,T);v=F.data;var w;if(Y.renderOnCanvas){if(y)for(w=0;w<y.length;w++)v[4*w+3]=y[w]?255:0;this.ctx.putImageData(F,0,0);a(null)}else{F=P*T;var B=new Uint8Array(F),D=new Uint8Array(F),K=new Uint8Array(F);if(y)for(w=0;w<F;w++)B[w]=v[4*w],D[w]=v[4*w+1],K[w]=v[4*w+2];else for(y=new Uint8Array(F),w=0;w<F;w++)B[w]=v[4*w],D[w]=v[4*w+1],K[w]=v[4*w+2],y[w]=v[4*w+3];a({width:P,height:T,pixels:[B,D,K],mask:y,pixelType:"u8"})}}};
l.onerror=()=>{URL.revokeObjectURL(b);n("cannot load image")}})};J._getMask=function(z,Y){let R=null;try{var P=new Uint8Array(z);z=0;var T=P.length-2;for(z=Math.ceil(P.length/2);z<T&&(255!==P[z]||217!==P[z+1]);z++);z+=2;if(z<P.length-1){const x=(new I.Zlib(P.subarray(z))).getBytes();R=new Uint8Array(Y.width*Y.height);Y=0;for(P=0;P<x.length;P++)for(T=7;0<=T;T--)R[Y++]=x[P]>>T&1}}catch(x){}return R};return J}()})},"esri/chunks/Zlib":function(){define(["exports"],function(X){var O={exports:{}};(function(I){(function(J){J=
J();void 0!==J&&(I.exports=J)})(function(){var J=function(){function z(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}z.prototype={ensureBuffer:function(Y){var R=this.buffer,P=R?R.byteLength:0;if(Y<P)return R;for(var T=512;T<Y;)T<<=1;Y=new Uint8Array(T);for(T=0;T<P;++T)Y[T]=R[T];return this.buffer=Y},getByte:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(Y){var R=this.pos;if(Y){this.ensureBuffer(R+
Y);for(Y=R+Y;!this.eof&&this.bufferLength<Y;)this.readBlock();var P=this.bufferLength;Y>P&&(Y=P)}else{for(;!this.eof;)this.readBlock();Y=this.bufferLength}this.pos=Y;return this.buffer.subarray(R,Y)},lookChar:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var Y=this.pos;this.bufferLength<=Y;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},
makeSubStream:function(Y,R,P){for(var T=Y+R;this.bufferLength<=T&&!this.eof;)this.readBlock();return new Stream(this.buffer,Y,R,P)},skip:function(Y){Y||(Y=1);this.pos+=Y},reset:function(){this.pos=0}};return z}();return function(){function z(a){throw Error(a);}function Y(a){var n=0,y=a[n++],t=a[n++];-1!=y&&-1!=t||z("Invalid header in flate stream");8!=(y&15)&&z("Unknown compression method in flate stream");0!=((y<<8)+t)%31&&z("Bad FCHECK in flate stream");t&32&&z("FDICT bit set in flate stream");
this.bytes=a;this.bytesPos=n;this.codeBuf=this.codeSize=0;J.call(this)}if(!self||!self.Uint32Array)return null;var R=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),T=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,
590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),x=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,
590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,
524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,
589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,
589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,
590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,
524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,
589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],m=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];Y.prototype=Object.create(J.prototype);Y.prototype.getBits=function(a){for(var n=this.codeSize,y=this.codeBuf,
t=this.bytes,b=this.bytesPos,l;n<a;)"undefined"==typeof(l=t[b++])&&z("Bad encoding in flate stream"),y|=l<<n,n+=8;this.codeBuf=y>>a;this.codeSize=n-=a;this.bytesPos=b;return y&(1<<a)-1};Y.prototype.getCode=function(a){var n=a[0],y=a[1];a=this.codeSize;for(var t=this.codeBuf,b=this.bytes,l=this.bytesPos;a<y;){var v;"undefined"==typeof(v=b[l++])&&z("Bad encoding in flate stream");t|=v<<a;a+=8}y=n[t&(1<<y)-1];n=y>>16;y&=65535;(0==a||a<n||0==n)&&z("Bad encoding in flate stream");this.codeBuf=t>>n;this.codeSize=
a-n;this.bytesPos=l;return y};Y.prototype.generateHuffmanTable=function(a){for(var n=a.length,y=0,t=0;t<n;++t)a[t]>y&&(y=a[t]);for(var b=1<<y,l=new Uint32Array(b),v=1,F=0,w=2;v<=y;++v,F<<=1,w<<=1)for(var B=0;B<n;++B)if(a[B]==v){var D=0,K=F;for(t=0;t<v;++t)D=D<<1|K&1,K>>=1;for(t=D;t<b;t+=w)l[t]=v<<16|B;++F}return[l,y]};Y.prototype.readBlock=function(){function a(D,K,f,e,d){for(D=D.getBits(f)+e;0<D--;)K[F++]=d}var n=this.getBits(3);n&1&&(this.eof=!0);n>>=1;if(0==n){var y=this.bytes,t=this.bytesPos,
b;"undefined"==typeof(b=y[t++])&&z("Bad block header in flate stream");var l=b;"undefined"==typeof(b=y[t++])&&z("Bad block header in flate stream");l|=b<<8;"undefined"==typeof(b=y[t++])&&z("Bad block header in flate stream");n=b;"undefined"==typeof(b=y[t++])&&z("Bad block header in flate stream");(n|b<<8)!=(~l&65535)&&z("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;b=this.bufferLength;n=this.ensureBuffer(b+l);this.bufferLength=l=b+l;for(var v=b;v<l;++v){if("undefined"==
typeof(b=y[t++])){this.eof=!0;break}n[v]=b}this.bytesPos=t}else{if(1==n)t=x,b=m;else if(2==n){n=this.getBits(5)+257;b=this.getBits(5)+1;y=this.getBits(4)+4;t=Array(R.length);for(var F=0;F<y;)t[R[F++]]=this.getBits(3);t=this.generateHuffmanTable(t);F=y=0;b=n+b;for(l=Array(b);F<b;)v=this.getCode(t),16==v?a(this,l,2,3,y):17==v?a(this,l,3,3,y=0):18==v?a(this,l,7,11,y=0):l[F++]=y=v;t=this.generateHuffmanTable(l.slice(0,n));b=this.generateHuffmanTable(l.slice(n,b))}else z("Unknown block type in flate stream");
l=(n=this.buffer)?n.length:0;for(v=this.bufferLength;;){var w=this.getCode(t);if(256>w)v+1>=l&&(n=this.ensureBuffer(v+1),l=n.length),n[v++]=w;else{if(256==w){this.bufferLength=v;break}w-=257;w=P[w];var B=w>>16;0<B&&(B=this.getBits(B));y=(w&65535)+B;w=this.getCode(b);w=T[w];B=w>>16;0<B&&(B=this.getBits(B));w=(w&65535)+B;v+y>=l&&(n=this.ensureBuffer(v+y),l=n.length);for(B=0;B<y;++B,++v)n[v]=n[v-w]}}}};return Y}()})})(O);X.Zlib=O.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(X,O){return function(){function I(){}I.decode=function(J,z=!1){const Y=new Uint8Array(J);J=new X.JpegImage;J.parse(Y);const {width:R,height:P,numComponents:T,eof:x}=J;J=J.getData(R,P,!0);let m;const a=R*P;let n=0,y=0,t=0;if(!z&&x<Y.length-1)try{var b=(new O.Zlib(Y.subarray(x))).getBytes();m=new Uint8Array(a);for(n=z=0;n<b.length;n++)for(t=7;0<=t;t--)m[z++]=b[n]>>t&1}catch{}b=null;if(1===T&&J.length===R*P)b=[J,J,J];else{b=[];for(n=0;3>n;n++)z=new Uint8Array(a),b.push(z);
for(y=t=0;y<a;y++)for(n=0;3>n;n++)b[n][y]=J[t++]}return{width:R,height:P,pixels:b,mask:m}};return I}()})},"esri/chunks/Jpg":function(){define(["exports"],function(X){var O={exports:{}};(function(I){(function(J){J=J();void 0!==J&&(I.exports=J)})(function(){var J=function(){function z(Y){this.message="JPEG error: "+Y}z.prototype=Error();z.prototype.name="JpegError";return z.constructor=z}();return function(){function z(){this.decodeTransform=null;this.colorTransform=-1}function Y(m,a){for(var n=0,y=
[],t,b,l=16;0<l&&!m[l-1];)l--;y.push({children:[],index:0});var v=y[0],F;for(t=0;t<l;t++){for(b=0;b<m[t];b++){v=y.pop();for(v.children[v.index]=a[n];0<v.index;)v=y.pop();v.index++;for(y.push(v);y.length<=t;)y.push(F={children:[],index:0}),v.children[v.index]=F.children,v=F;n++}t+1<l&&(y.push(F={children:[],index:0}),v.children[v.index]=F.children,v=F)}return y[0].children}function R(m,a,n,y,t,b,l,v,F){function w(){if(0<g)return g--,c>>g&1;c=m[a++];if(255===c){var V=m[a++];if(V)throw new J("unexpected marker "+
(c<<8|V).toString(16));}g=7;return c>>>7}function B(V){for(;;){V=V[w()];if("number"===typeof V)return V;if("object"!==typeof V)throw new J("invalid huffman sequence");}}function D(V){for(var Z=0;0<V;)Z=Z<<1|w(),V--;return Z}function K(V){if(1===V)return 1===w()?1:-1;var Z=D(V);return Z>=1<<V-1?Z:Z+(-1<<V)+1}function f(V,Z){var L=B(V.huffmanTableDC);L=0===L?0:K(L);V.blockData[Z]=V.pred+=L;for(L=1;64>L;){var U=B(V.huffmanTableAC),ca=U&15;U>>=4;if(0===ca){if(15>U)break;L+=16}else L+=U,V.blockData[Z+
x[L]]=K(ca),L++}}function e(V,Z){var L=B(V.huffmanTableDC);L=0===L?0:K(L)<<F;V.blockData[Z]=V.pred+=L}function d(V,Z){V.blockData[Z]|=w()<<F}function k(V,Z){if(0<h)h--;else for(var L=b;L<=l;){var U=B(V.huffmanTableAC),ca=U&15;U>>=4;if(0===ca){if(15>U){h=D(U)+(1<<U)-1;break}L+=16}else L+=U,V.blockData[Z+x[L]]=K(ca)*(1<<F),L++}}function p(V,Z){for(var L=b,U=0,ca;L<=l;){ca=x[L];switch(r){case 0:U=B(V.huffmanTableAC);ca=U&15;U>>=4;if(0===ca)15>U?(h=D(U)+(1<<U),r=4):(U=16,r=1);else{if(1!==ca)throw new J("invalid ACn encoding");
A=K(ca);r=U?2:3}continue;case 1:case 2:V.blockData[Z+ca]?V.blockData[Z+ca]+=w()<<F:(U--,0===U&&(r=2===r?3:0));break;case 3:V.blockData[Z+ca]?V.blockData[Z+ca]+=w()<<F:(V.blockData[Z+ca]=A<<F,r=0);break;case 4:V.blockData[Z+ca]&&(V.blockData[Z+ca]+=w()<<F)}L++}4===r&&(h--,0===h&&(r=0))}var u=n.mcusPerLine,E=a,c=0,g=0,h=0,r=0,A,Q=y.length,C,G,S,N;v=n.progressive?0===b?0===v?e:d:0===v?k:p:f;var q=0;n=1===Q?y[0].blocksPerLine*y[0].blocksPerColumn:u*n.mcusPerColumn;for(var H,M;q<n;){var W=t?Math.min(n-
q,t):n;for(C=0;C<Q;C++)y[C].pred=0;h=0;if(1===Q){var aa=y[0];for(N=0;N<W;N++)v(aa,64*((aa.blocksPerLine+1)*(q/aa.blocksPerLine|0)+q%aa.blocksPerLine)),q++}else for(N=0;N<W;N++){for(C=0;C<Q;C++)for(aa=y[C],H=aa.h,M=aa.v,G=0;G<M;G++)for(S=0;S<H;S++)v(aa,64*((aa.blocksPerLine+1)*((q/u|0)*aa.v+G)+(q%u*aa.h+S)));q++}g=0;(aa=T(m,a))&&aa.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+aa.invalid),a=aa.offset);aa=aa&&aa.marker;if(!aa||65280>=aa)throw new J("marker was not found");
if(65488<=aa&&65495>=aa)a+=2;else break}(aa=T(m,a))&&aa.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+aa.invalid),a=aa.offset);return a-E}function P(m,a){m=a.blocksPerLine;for(var n=a.blocksPerColumn,y=new Int16Array(64),t=0;t<n;t++)for(var b=0;b<m;b++){var l=void 0,v=void 0,F=void 0,w=void 0,B=void 0,D=void 0,K=void 0,f=void 0,e=B=D=w=v=l=void 0,d=void 0,k=void 0,p=void 0,u=64*((a.blocksPerLine+1)*t+b),E=y,c=a.quantizationTable,g=a.blockData;if(!c)throw new J("missing required Quantization Table.");
for(var h=0;64>h;h+=8)l=g[u+h],f=g[u+h+1],K=g[u+h+2],D=g[u+h+3],B=g[u+h+4],w=g[u+h+5],F=g[u+h+6],v=g[u+h+7],l*=c[h],0===(f|K|D|B|w|F|v)?(l=5793*l+512>>10,E[h]=l,E[h+1]=l,E[h+2]=l,E[h+3]=l,E[h+4]=l,E[h+5]=l,E[h+6]=l,E[h+7]=l):(f*=c[h+1],K*=c[h+2],D*=c[h+3],B*=c[h+4],w*=c[h+5],F*=c[h+6],v*=c[h+7],p=5793*l+128>>8,k=5793*B+128>>8,d=K,e=F,B=2896*(f-v)+128>>8,v=2896*(f+v)+128>>8,D<<=4,w<<=4,p=p+k+1>>1,k=p-k,l=3784*d+1567*e+128>>8,d=1567*d-3784*e+128>>8,e=l,B=B+w+1>>1,w=B-w,v=v+D+1>>1,D=v-D,p=p+e+1>>1,e=
p-e,k=k+d+1>>1,d=k-d,l=2276*B+3406*v+2048>>12,B=3406*B-2276*v+2048>>12,v=l,l=799*D+4017*w+2048>>12,D=4017*D-799*w+2048>>12,w=l,E[h]=p+v,E[h+7]=p-v,E[h+1]=k+w,E[h+6]=k-w,E[h+2]=d+D,E[h+5]=d-D,E[h+3]=e+B,E[h+4]=e-B);for(c=0;8>c;++c)l=E[c],f=E[c+8],K=E[c+16],D=E[c+24],B=E[c+32],w=E[c+40],F=E[c+48],v=E[c+56],0===(f|K|D|B|w|F|v)?(l=5793*l+8192>>14,l=-2040>l?0:2024<=l?255:l+2056>>4,g[u+c]=l,g[u+c+8]=l,g[u+c+16]=l,g[u+c+24]=l,g[u+c+32]=l,g[u+c+40]=l,g[u+c+48]=l,g[u+c+56]=l):(p=5793*l+2048>>12,k=5793*B+2048>>
12,d=K,e=F,B=2896*(f-v)+2048>>12,v=2896*(f+v)+2048>>12,p=(p+k+1>>1)+4112,k=p-k,l=3784*d+1567*e+2048>>12,d=1567*d-3784*e+2048>>12,e=l,B=B+w+1>>1,w=B-w,v=v+D+1>>1,D=v-D,p=p+e+1>>1,e=p-e,k=k+d+1>>1,d=k-d,l=2276*B+3406*v+2048>>12,B=3406*B-2276*v+2048>>12,v=l,l=799*D+4017*w+2048>>12,D=4017*D-799*w+2048>>12,w=l,l=p+v,v=p-v,f=k+w,F=k-w,K=d+D,w=d-D,D=e+B,B=e-B,l=16>l?0:4080<=l?255:l>>4,f=16>f?0:4080<=f?255:f>>4,K=16>K?0:4080<=K?255:K>>4,D=16>D?0:4080<=D?255:D>>4,B=16>B?0:4080<=B?255:B>>4,w=16>w?0:4080<=w?
255:w>>4,F=16>F?0:4080<=F?255:F>>4,v=16>v?0:4080<=v?255:v>>4,g[u+c]=l,g[u+c+8]=f,g[u+c+16]=K,g[u+c+24]=D,g[u+c+32]=B,g[u+c+40]=w,g[u+c+48]=F,g[u+c+56]=v)}return a.blockData}function T(m,a,n){var y=m.length-1;n=n<a?n:a;if(a>=y)return null;var t=m[a]<<8|m[a+1];if(65472<=t&&65534>=t)return{invalid:null,marker:t,offset:a};for(a=m[n]<<8|m[n+1];!(65472<=a&&65534>=a);){if(++n>=y)return null;a=m[n]<<8|m[n+1]}return{invalid:t.toString(16),marker:a,offset:n}}if(!self||!self.Uint8ClampedArray)return null;var x=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);z.prototype={parse:function(m){function a(){var c=m[t]<<8|m[t+1];t+=2;return c}function n(){var c=a();c=t+c-2;var g=T(m,c,t);g&&g.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+g.invalid),c=g.offset);c=m.subarray(t,c);t+=c.length;return c}function y(c){for(var g=Math.ceil(c.samplesPerLine/
8/c.maxH),h=Math.ceil(c.scanLines/8/c.maxV),r=0;r<c.components.length;r++){E=c.components[r];var A=Math.ceil(Math.ceil(c.samplesPerLine/8)*E.h/c.maxH),Q=Math.ceil(Math.ceil(c.scanLines/8)*E.v/c.maxV);E.blockData=new Int16Array(64*h*E.v*(g*E.h+1));E.blocksPerLine=A;E.blocksPerColumn=Q}c.mcusPerLine=g;c.mcusPerColumn=h}var t=0,b=null,l=null,v=[],F=[],w=[],B=a();if(65496!==B)throw new J("SOI not found");for(B=a();65497!==B;){switch(B){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var D=
n();65504===B&&74===D[0]&&70===D[1]&&73===D[2]&&70===D[3]&&0===D[4]&&(b={version:{major:D[5],minor:D[6]},densityUnits:D[7],xDensity:D[8]<<8|D[9],yDensity:D[10]<<8|D[11],thumbWidth:D[12],thumbHeight:D[13],thumbData:D.subarray(14,14+3*D[12]*D[13])});65518===B&&65===D[0]&&100===D[1]&&111===D[2]&&98===D[3]&&101===D[4]&&(l={version:D[5]<<8|D[6],flags0:D[7]<<8|D[8],flags1:D[9]<<8|D[10],transformCode:D[11]});break;case 65499:B=a()+t-2;for(var K;t<B;){var f=m[t++],e=new Uint16Array(64);if(0===f>>4)for(D=
0;64>D;D++)K=x[D],e[K]=m[t++];else if(1===f>>4)for(D=0;64>D;D++)K=x[D],e[K]=a();else throw new J("DQT - invalid table spec");v[f&15]=e}break;case 65472:case 65473:case 65474:if(d)throw new J("Only single frame JPEGs supported");a();var d={};d.extended=65473===B;d.progressive=65474===B;d.precision=m[t++];d.scanLines=a();d.samplesPerLine=a();d.components=[];d.componentIds={};D=m[t++];for(B=e=f=0;B<D;B++){K=m[t];var k=m[t+1]>>4;var p=m[t+1]&15;f<k&&(f=k);e<p&&(e=p);k=d.components.push({h:k,v:p,quantizationId:m[t+
2],quantizationTable:null});d.componentIds[K]=k-1;t+=3}d.maxH=f;d.maxV=e;y(d);break;case 65476:K=a();for(B=2;B<K;){f=m[t++];e=new Uint8Array(16);for(D=k=0;16>D;D++,t++)k+=e[D]=m[t];p=new Uint8Array(k);for(D=0;D<k;D++,t++)p[D]=m[t];B+=17+k;(0===f>>4?w:F)[f&15]=Y(e,p)}break;case 65501:a();var u=a();break;case 65498:a();K=m[t++];D=[];for(B=0;B<K;B++){f=d.componentIds[m[t++]];var E=d.components[f];f=m[t++];E.huffmanTableDC=w[f>>4];E.huffmanTableAC=F[f&15];D.push(E)}B=m[t++];K=m[t++];f=m[t++];B=R(m,t,
d,D,u,B,K,f>>4,f&15);t+=B;break;case 65535:255!==m[t]&&t--;break;default:if(255===m[t-3]&&192<=m[t-2]&&254>=m[t-2])t-=3;else throw new J("unknown marker "+B.toString(16));}B=a()}this.width=d.samplesPerLine;this.height=d.scanLines;this.jfif=b;this.eof=t;this.adobe=l;this.components=[];for(B=0;B<d.components.length;B++){E=d.components[B];if(b=v[E.quantizationId])E.quantizationTable=b;this.components.push({output:P(d,E),scaleX:E.h/d.maxH,scaleY:E.v/d.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(m,a){var n=this.width/m,y=this.height/a,t,b,l=0,v=this.components.length,F=m*a*v,w=new Uint8ClampedArray(F),B=new Uint32Array(m);for(b=0;b<v;b++){var D=this.components[b];var K=D.scaleX*n;var f=D.scaleY*y;l=b;var e=D.output;var d=D.blocksPerLine+1<<3;for(t=0;t<m;t++)D=0|t*K,B[t]=(D&4294967288)<<3|D&7;for(K=0;K<a;K++)for(D=0|K*f,D=d*(D&4294967288)|(D&7)<<3,t=0;t<m;t++)w[l]=e[D+B[t]],l+=v}if(a=this.decodeTransform)for(b=0;b<F;)for(m=D=0;D<v;D++,
b++,m+=2)w[b]=(w[b]*a[m]>>8)+a[m+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(m){for(var a,n,y,t=0,b=m.length;t<b;t+=3)a=m[t],n=m[t+1],y=m[t+2],m[t]=a-179.456+1.402*y,m[t+1]=a+135.459-.344*n-.714*y,m[t+2]=a-226.816+1.772*n;return m},_convertYcckToRgb:function(m){for(var a,n,y,t,b=0,l=0,v=m.length;l<v;l+=4)a=m[l],n=m[l+1],y=m[l+2],t=m[l+3],m[b++]=
-122.67195406894+n*(-6.60635669420364E-5*n+4.37130475926232E-4*y-5.4080610064599E-5*a+4.8449797120281E-4*t-.154362151871126)+y*(-9.57964378445773E-4*y+8.17076911346625E-4*a-.00477271405408747*t+1.53380253221734)+a*(9.61250184130688E-4*a-.00266257332283933*t+.48357088451265)+t*(-3.36197177618394E-4*t+.484791561490776),m[b++]=107.268039397724+n*(2.19927104525741E-5*n-6.40992018297945E-4*y+6.59397001245577E-4*a+4.26105652938837E-4*t-.176491792462875)+y*(-7.78269941513683E-4*y+.00130872261408275*a+7.70482631801132E-4*
t-.151051492775562)+a*(.00126935368114843*a-.00265090189010898*t+.25802910206845)+t*(-3.18913117588328E-4*t-.213742400323665),m[b++]=-20.810012546947+n*(-5.70115196973677E-4*n-2.63409051004589E-5*y+.0020741088115012*a-.00288260236853442*t+.814272968359295)+y*(-1.53496057440975E-5*y-1.32689043961446E-4*a+5.60833691242812E-4*t-.195152027534049)+a*(.00174418132927582*a-.00255243321439347*t+.116935020465145)+t*(-3.43531996510555E-4*t+.24165260232407);return m},_convertYcckToCmyk:function(m){for(var a,
n,y,t=0,b=m.length;t<b;t+=4)a=m[t],n=m[t+1],y=m[t+2],m[t]=434.456-a-1.402*y,m[t+1]=119.541-a+.344*n+.714*y,m[t+2]=481.816-a-1.772*n;return m},_convertCmykToRgb:function(m){for(var a,n,y,t,b=0,l=1/255,v=0,F=m.length;v<F;v+=4)a=m[v]*l,n=m[v+1]*l,y=m[v+2]*l,t=m[v+3]*l,m[b++]=255+a*(-4.387332384609988*a+54.48615194189176*n+18.82290502165302*y+212.25662451639585*t-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*y-17.873870861415444*t-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*
t+17.5119270841813)-t*(21.86122147463605*t+189.48180835922747),m[b++]=255+a*(8.841041422036149*a+60.118027045597366*n+6.871425592049007*y+31.159100130055922*t-79.2970844816548)+n*(-15.310361306967817*n+17.575251261109482*y+131.35250912493976*t-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*t-24.86741582555878)-t*(20.737325471181034*t+187.80453709719578),m[b++]=255+a*(.8842522430003296*a+8.078677503112928*n+30.89978309703729*y-.23883238689178934*t-14.183576799673286)+n*(10.49593273432072*
n+63.02378494754052*y+50.606957656360734*t-112.23884253719248)+y*(.03296041114873217*y+115.60384449646641*t-193.58209356861505)-t*(22.33816807309886*t+180.12613974708367);return m},getData:function(m,a,n){if(4<this.numComponents)throw new J("Unsupported color mode");m=this._getLinearizedBlockData(m,a);if(1===this.numComponents&&n){n=m.length;a=new Uint8ClampedArray(3*n);for(var y=0,t=0;t<n;t++){var b=m[t];a[y++]=b;a[y++]=b;a[y++]=b}return a}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(m);
if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(m):this._convertYcckToCmyk(m);if(n)return this._convertCmykToRgb(m)}return m}};return z}()})})(O);X.JpegImage=O.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(X,O,I){function J(x,m,a){a.set(x.slice(m,m+a.length))}function z(x){const {_malloc:m,_free:a,_lerc_getBlobInfo:n,_lerc_getDataRanges:y,_lerc_decode_4D:t,asm:b}=x;let l;const v=
Object.values(b).find(w=>w&&"buffer"in w&&w.buffer===x.HEAPU8.buffer),F=w=>{w=w.map(K=>(K>>3<<3)+16);var B=w.reduce((K,f)=>K+f),D=m(B);l=new Uint8Array(v.buffer);B=w[0];w[0]=D;for(D=1;D<w.length;D++){const K=w[D];w[D]=w[D-1]+B;B=K}return w};T.getBlobInfo=w=>{var B=new Uint8Array(48),D=new Uint8Array(24);const [K,f,e]=F([w.length,B.length,D.length]);l.set(w,K);l.set(B,f);l.set(D,e);var d=n(K,w.length,f,e,12,3);if(d)throw a(K),`lerc-getBlobInfo: error code is ${d}`;l=new Uint8Array(v.buffer);J(l,f,
B);J(l,e,D);B=new Uint32Array(B.buffer);var k=new Float64Array(D.buffer);const [p,u,E,c,g,h,r,A,Q,,C]=B;D={version:p,dimCount:E,width:c,height:g,validPixelCount:r,bandCount:h,blobSize:A,maskCount:Q,dataType:u,minValue:k[0],maxValue:k[1],maxZerror:k[2],statistics:[],bandCountWithNoData:C};if(C)return D;if(1===E&&1===h)return a(K),D.statistics.push({minValue:k[0],maxValue:k[1]}),D;d=E*h*8;var G=new Uint8Array(d),S=new Uint8Array(d);B=K;var N=k=0;let q=!1;l.byteLength<K+2*d?(a(K),q=!0,[B,k,N]=F([w.length,
d,d]),l.set(w,B)):[k,N]=F([d,d]);l.set(G,k);l.set(S,N);if(d=y(B,w.length,E,h,k,N))throw a(B),q||a(k),`lerc-getDataRanges: error code is ${d}`;l=new Uint8Array(v.buffer);J(l,k,G);J(l,N,S);w=new Float64Array(G.buffer);d=new Float64Array(S.buffer);S=D.statistics;for(G=0;G<h;G++)if(1<E){N=w.slice(G*E,(G+1)*E);const H=d.slice(G*E,(G+1)*E),M=Math.min.apply(null,N),W=Math.max.apply(null,H);S.push({minValue:M,maxValue:W,dimStats:{minValues:N,maxValues:H}})}else S.push({minValue:w[G],maxValue:d[G]});a(B);
q||a(k);return D};T.decode=(w,B)=>{const {maskCount:D,dimCount:K,bandCount:f,width:e,height:d,dataType:k,bandCountWithNoData:p}=B;var u=Y[k],E=e*d;B=new Uint8Array(E*f);u=new Uint8Array(E*K*f*u.size);E=new Uint8Array(f);var c=new Uint8Array(8*f);const [g,h,r,A,Q]=F([w.length,B.length,u.length,E.length,c.length]);l.set(w,g);l.set(B,h);l.set(u,r);l.set(E,A);l.set(c,Q);if(w=t(g,w.length,D,h,K,e,d,f,k,r,A,Q))throw a(g),`lerc-decode: error code is ${w}`;l=new Uint8Array(v.buffer);J(l,r,u);J(l,h,B);w=null;
if(p){J(l,A,E);J(l,Q,c);w=[];c=new Float64Array(c.buffer);for(let C=0;C<E.length;C++)w.push(E[C]?c[C]:null)}a(g);return{data:u,maskData:B,noDataValues:w}}}const Y=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,
range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let R=null,P=!1;const T={getBlobInfo:null,decode:null};O.decode=function(x,m={}){var a,n=null!=(a=m.inputOffset)?a:0;a=x instanceof Uint8Array?x.subarray(n):new Uint8Array(x,n);x=T.getBlobInfo(a);const {data:y,maskData:t}=T.decode(a,x),{width:b,height:l,bandCount:v,dimCount:F,dataType:w,
maskCount:B,statistics:D}=x;a=Y[w];var K=new a.ctor(y.buffer);n=[];const f=[],e=b*l;var d=e*F;for(var k=0;k<v;k++){var p=K.subarray(k*d,(k+1)*d);if(m.returnPixelInterleavedDims)n.push(p);else{a:{var u=e,E=F;if(2>E)break a;const c=new a.ctor(u*E);for(let g=0,h=0;g<u;g++)for(let r=0,A=g;r<E;r++,A+=u)c[A]=p[h++];p=c}n.push(p)}f.push(t.subarray(k*d,(k+1)*d))}K=0===B?null:1===B?f[0]:new Uint8Array(e);if(1<B)for(K.set(f[0]),d=1;d<f.length;d++)for(k=f[d],p=0;p<e;p++)K[p]&=k[p];({noDataValue:d}=m);k=null!=
d&&a.range[0]<=d&&a.range[1]>=d;if(0<B&&k)for(k=0;k<v;k++)for(p=n[k],u=f[k]||K,E=0;E<e;E++)0===u[E]&&(p[E]=d);return{width:b,height:l,bandCount:v,pixelType:m.pixelType&&0===x.version?m.pixelType:a.pixelType,dimCount:F,statistics:D,pixels:n,mask:K,bandMasks:B===v&&1<v?f:null}};O.getBlobInfo=function(x,m={}){var a,n;x=x instanceof Uint8Array?x.subarray(null!=(a=m.inputOffset)?a:0):new Uint8Array(x,null!=(n=m.inputOffset)?n:0);return T.getBlobInfo(x)};O.isLoaded=function(){return P};O.load=function(){return R?
R:R=(new Promise((x,m)=>X(["../../../chunks/lerc-wasm"],x,m))).then(x=>x.lercWasm).then(({default:x})=>x({locateFile:m=>I.getAssetUrl(`esri/layers/support/rasterFormats/${m}`)})).then(x=>{z(x);P=!0})};Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(X){function O(Y,R,P,T=!0){if(0!==R%4||0!==P%4){var x=new ArrayBuffer(4*Math.ceil(P/4));x=new Uint8Array(x);Y=new Uint8Array(Y,R,P);
if(T)for(T=0;T<x.length;T+=4)x[T]=Y[T+3],x[T+1]=Y[T+2],x[T+2]=Y[T+1],x[T+3]=Y[T];else x.set(Y);return new Uint32Array(x.buffer)}if(T){T=new Uint8Array(Y,R,P);x=new Uint8Array(T.length);for(Y=0;Y<x.length;Y+=4)x[Y]=T[Y+3],x[Y+1]=T[Y+2],x[Y+2]=T[Y+1],x[Y+3]=T[Y];return new Uint32Array(x.buffer)}return new Uint32Array(Y,R,P/4)}function I(){const Y=[];for(let R=0;257>=R;R++)Y[R]=[R];return Y}function J(Y,R){for(let P=0;P<R.length;P++)Y.push(R[P])}const z=new Set;z.add(511);z.add(1023);z.add(2047);z.add(4095);
z.add(8191);X.decode=function(Y,R,P,T=!0){Y=O(Y,R,P,T);R=9;T=I();let x=32,m=T.length,a=[],n=1,y=Y[0],t=0;const b=Y.length;P=8*(4*b-P);const l=[];for(;null!=y;){if(x>=R)x-=R,t=y>>>32-R,y<<=R;else{t=y>>>32-x;y=Y[n++];var v=R-x;x=32-v;t=(t<<v)+(y>>>x);y<<=v}if(257===t)break;if(256===t)R=9,T=I(),m=T.length,a=[];else{v=T[t];if(null==v){if(t>T.length)throw"data integrity issue: code does not exist on code page";a.push(a[0]);T[m++]=a.slice();J(l,a)}else J(l,v),a.push(v[0]),1<a.length&&(T[m++]=a.slice()),
a=v.slice();z.has(m)&&R++;0===x&&(y=Y[n++],x=32);if(n>b||n===b&&x<=P)break}}return new Uint8Array(l)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const X=O=>{let I=1;switch(O){case Uint8Array:case Int8Array:I=1;break;case Uint16Array:case Int16Array:I=2;break;case Uint32Array:case Int32Array:case Float32Array:I=4;break;case Float64Array:I=8}return I};return function(){function O(){}
O.decode=function(I,J){var z=J.pixelType;const Y=[],R=J.width*J.height;var P=Math.floor(I.byteLength/(J.width*J.height*X(J.pixelType)));const {bandIds:T,format:x}=J;J=T&&T.length||Math.floor(I.byteLength/(J.width*J.height*X(J.pixelType)));var m=I.byteLength-I.byteLength%(R*X(z));const a=new z(I,0,R*P);let n,y;let t,b;if("bip"===x)for(n=0;n<J;n++){t=new z(R);b=T?T[n]:n;for(y=0;y<R;y++)t[y]=a[y*P+b];Y.push(t)}else if("bsq"===x)for(n=0;n<J;n++)b=T?T[n]:n,Y.push(a.subarray(b*R,(b+1)*R));if(m<I.byteLength-
1)if(I=I.slice(m),8*I.byteLength<R)var l=null;else{I=new Uint8Array(I,0,Math.ceil(R/8));z=new Uint8Array(R);for(J=m=J=l=P=0;J<I.length-1;J++)for(l=I[J],m=7;0<=m;m--)z[P++]=l>>m&1;for(m=7;P<R-1;)l=I[I.length-1],z[P++]=l>>m&1,m--;l=z}return{pixels:Y,mask:l}};return O}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(X,O,I,J,z,Y,R,P,T){function x(C,G){let S="unknown";3===C?S="f32":1===C?1===G?S="u1":2===G?S="u2":4===G?S="u4":8>=G?S="u8":16>=G?S="u16":32>=G&&(S="u32"):2===C&&(8>=G?S="s8":16>=G?S="s16":32>=G&&(S="s32"));return S}function m(C){let G=null;switch(C?C.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":G=Uint8Array;break;case "u16":G=Uint16Array;break;case "u32":G=Uint32Array;break;case "s8":G=Int8Array;break;case "s16":G=Int16Array;break;case "s32":G=Int32Array;break;default:G=Float32Array}return G}
function a(C,G){return{x:G[0]*C.x+G[1]*C.y+G[2],y:G[3]*C.x+G[4]*C.y+G[5]}}function n(C,G){var S;return null==(S=C.get(G))?void 0:S.values}function y(C,G){var S;return null==(S=C.get(G))?void 0:S.values}function t(C,G){var S;return null==(S=C.get(G))?void 0:S.values[0]}function b(C,G){var S;return null==(S=C.get(G))?void 0:S.values[0]}function l(C,G,S,N=0,q=R.TIFF_TAGS,H=4){var M=8===H;const W=M?d(new DataView(C,S,8),0,G):(new DataView(C,S,2)).getUint16(0,G),aa=4+2*H;var V=M?8:2;M=V+W*aa;if(S+M>C.byteLength)return{success:!1,
ifd:null,nextIFD:null,requiredBufferSize:M};const Z=S+M+4<=C.byteLength?k(new DataView(C,S+M,8===H?8:4),0,G,8===H):null;S+=V;V=new Map;let L,U,ca,ba,da;for(let fa=0;fa<W;fa++){var ea=new DataView(C,S+aa*fa,aa);L=ea.getUint16(0,G);ca=ea.getUint16(2,G);U=R.getTagName(L,q);const ja=[];2===H?(ba=ea.getUint16(4,G),da=ea.getUint16(6,G)):4===H?(ba=ea.getUint32(4,G),da=ea.getUint32(8,G)):8===H&&(ba=k(ea,4,G,!0),da=k(ea,12,G,!0),ja.push(ea.getUint32(12,G)),ja.push(ea.getUint32(16,G)));ea={id:L,type:ca,valueCount:ba,
valueOffset:da,valueOffsets:ja,values:null};D(C,G,ea,N,!1,H);V.set(U,ea)}return{success:!0,ifd:V,nextIFD:Z,requiredBufferSize:M}}function v(C,G,S,N,q){return F.apply(this,arguments)}function F(){F=O._asyncToGenerator(function*(C,G,S,N,q){var H,M,W=P.isPlatformLittleEndian===G,aa=b(S,"BITSPERSAMPLE");const V=null!=(H=b(S,"SAMPLEFORMAT"))?H:1;H=x(V,aa);aa=null!=(M=b(S,"COMPRESSION"))?M:1;M=m(H);if(34887===aa)return yield z.load(),z.decode(C,{inputOffset:N}).pixels[0];if(1===aa){var Z=C.slice(N,N+q);
var L=new Uint8Array(Z)}else if(8===aa||32946===aa)L=new Uint8Array(C,N,q),L=new T.Zlib(L),C=L.getBytes(),Z=new ArrayBuffer(C.length),L=new Uint8Array(Z),L.set(C);else if(6===aa)L=new Uint8Array(C,N,q),Z=new J.JpegImage,Z.parse(L),C=Z.getData(Z.width,Z.height,!0),Z=new ArrayBuffer(C.length),L=new Uint8Array(Z),L.set(C);else if(7===aa){G=S.get("JPEGTABLES").values;Z=G.length-2;L=new Uint8Array(Z+q-2);for(S=0;S<Z;S++)L[S]=G[S];C=new Uint8Array(C,N+2,q-2);for(N=0;N<C.length;N++)L[Z+N]=C[N];Z=new J.JpegImage;
Z.parse(L);C=Z.getData(Z.width,Z.height,!0);Z=new ArrayBuffer(C.length);L=new Uint8Array(Z);L.set(C)}else 5===aa&&(L=Y.decode(C,N,q,G),Z=L.buffer);if("u8"!==H&&"s8"!==H&&!W)switch(Z=new ArrayBuffer(L.length),W=new Uint8Array(Z),H){case "u16":case "s16":for(H=0;H<L.length;H+=2)W[H]=L[H+1],W[H+1]=L[H];break;case "u32":case "s32":case "f32":for(H=0;H<L.length;H+=4)W[H]=L[H+3],W[H+1]=L[H+2],W[H+2]=L[H+1],W[H+3]=L[H]}return new M(Z)});return F.apply(this,arguments)}function w(C,G,S){return B.apply(this,
arguments)}function B(){B=O._asyncToGenerator(function*(C,G,S){var N;const q=y(S,"TILEOFFSETS");if(void 0===q)return null;const H=y(S,"TILEBYTECOUNTS"),{width:M,height:W,pixelType:aa,tileWidth:V,tileHeight:Z}=K([S]);var L=f(S,G);const U=G.planes;var ca=M*W,ba=b(S,"BITSPERSAMPLE"),da=34887===(null!=(N=b(S,"COMPRESSION"))?N:1),ea=m(aa);N=[];for(var fa=0;fa<U;fa++)N.push(new ea(ca));let ja,ha,la,ia,ka,na,ma,oa;ca=Math.ceil(M/V);if(0===ba%8)if(da&&L&&1<U)for(L=Math.round(q.length/U),ba=0;ba<L;ba++){var pa=
Math.floor(ba/ca)*Z;la=ba%ca*V;ea=pa*M+la;for(da=0;da<U;da++)if(fa=ba*U+da,0!==H[fa])for(fa=yield v(C,G.littleEndian,S,q[fa],H[fa]),ka=0,ia=ea,ma=Math.min(V,M-la),na=Math.min(Z,W-pa),oa=N[da],ja=0;ja<na;ja++)for(ia=ea+ja*M,ka=ja*V,ha=0;ha<ma;ha++,ia++,ka++)oa[ia]=fa[ka]}else for(ba=0;ba<q.length;ba++)if(0!==H[ba])for(pa=Math.floor(ba/ca)*Z,la=ba%ca*V,ea=pa*M+la,fa=yield v(C,G.littleEndian,S,q[ba],H[ba]),ka=0,ia=ea,ma=Math.min(V,M-la),na=Math.min(Z,W-pa),pa=0;pa<U;pa++)if(oa=N[pa],L||da)for(ja=0;ja<
na;ja++)for(ia=ea+ja*M,ka=V*Z*pa+ja*V,ha=0;ha<ma;ha++,ia++,ka++)oa[ia]=fa[ka];else for(ja=0;ja<na;ja++)for(ia=ea+ja*M,ka=ja*V*U+pa,ha=0;ha<ma;ha++,ia++,ka+=U)oa[ia]=fa[ka];return{width:M,height:W,pixelType:aa,pixels:N}});return B.apply(this,arguments)}function D(C,G,S,N=0,q=!1,H=4){if(S.values)return!0;var M=S.type,W=S.valueCount,aa=S.valueOffset;let V=[];var Z=h[M],L=8*Z,U=W*Z,ca=W*h[M]*8,ba=8===H?64:32;H=S.valueOffsets;if(ca>ba&&U>(q?C.byteLength:C?C.byteLength-aa+N:0))return S.offlineOffsetSize=
[aa,U],S.values=null,!1;if(ca<=ba)if(G||(32>=ba?aa>>>=32-ca:(C=null!=H&&H.length?H[0]:aa>>>0,G=null!=H&&H.length?H[1]:Math.round((aa-C)/4294967296),32>=ca?(aa=C>>>32-ca,H[0]=aa):(aa=C*2**(32-ca)+(G>>>32-ca),H[0]=C,H[1]=G>>>32-ca))),1===W&&L===ba)V=[aa];else if(64===ba)for(C=null!=H&&H.length?H[0]:aa>>>0,aa=null!=H&&H.length?H[1]:Math.round((aa-C)/4294967296),G=C,Z=32,C=1;C<=W;C++)U=32-L*C%32,Z<L?(U=G<<U>>>32-Z,ca=aa<<32-Z>>>32-Z,G=aa,V.push(U+ca*2**(L-Z)),Z-=32-(L-Z)):(V.push(G<<U>>>32-L),Z-=L),0===
Z&&(Z=32,G=aa);else for(C=1;C<=W;C++)V.push(aa<<32-L*C>>>32-L);else for(aa-=N,q&&(aa=0),W=aa;W<aa+U;W+=Z){switch(M){case 1:L=(new DataView(C,W,1)).getUint8(0);break;case 2:L=(new DataView(C,W,1)).getUint8(0);break;case 3:L=(new DataView(C,W,2)).getUint16(0,G);break;case 4:case 13:L=(new DataView(C,W,4)).getUint32(0,G);break;case 5:L=(new DataView(C,W,4)).getUint32(0,G)/(new DataView(C,W+4,4)).getUint32(0,G);break;case 6:L=(new DataView(C,W,1)).getInt8(0);break;case 7:L=(new DataView(C,W,1)).getUint8(0);
break;case 8:L=(new DataView(C,W,2)).getInt16(0,G);break;case 9:L=(new DataView(C,W,4)).getInt32(0,G);break;case 10:L=(new DataView(C,W,4)).getInt32(0,G)/(new DataView(C,W+4,4)).getInt32(0,G);break;case 11:L=(new DataView(C,W,4)).getFloat32(0,G);break;case 12:L=(new DataView(C,W,8)).getFloat64(0,G);break;case 16:case 18:L=d(new DataView(C,W,8),0,G);break;case 17:H=new DataView(C,W,8);ca=(L=G)?H.getInt32(0,L):H.getUint32(0,L);H=L?H.getUint32(4,L):H.getInt32(4,L);ba=0<=(L?ca:H)?1:-1;L?ca*=ba:H*=ba;
L=ba*(L?4294967296*H+ca:4294967296*ca+H);break;default:L=null}V.push(L)}if(2===M){M="";aa=V;V=[];for(C=0;C<aa.length;C++)0===aa[C]&&""!==M?(V.push(M),M=""):M+=String.fromCharCode(aa[C]);""===M&&0!==V.length||V.push(M)}S.values=V;return!0}function K(C){var G,S,N=C[0];const q=b(N,"TILEWIDTH"),H=b(N,"TILELENGTH"),M=b(N,"IMAGEWIDTH"),W=b(N,"IMAGELENGTH");var aa=b(N,"BITSPERSAMPLE");const V=b(N,"SAMPLESPERPIXEL");var Z=null!=(G=b(N,"SAMPLEFORMAT"))?G:1;G=x(Z,aa);const L=f(N);var U=n(N,"GDAL_NODATA");let ca;
null!=U&&U.length&&(ca=U.map(oa=>parseFloat(oa)),ca.some(oa=>isNaN(oa))&&(ca=null));var ba=null!=(S=b(N,"COMPRESSION"))?S:1;switch(ba){case 1:S="NONE";break;case 2:case 3:case 4:case 32771:S="CCITT";break;case 5:S="LZW";break;case 6:case 7:S="JPEG";break;case 32773:S="PACKBITS";break;case 8:case 32946:S="DEFLATE";break;case 34712:S="JPEG2000";break;case 34887:S="LERC";break;default:S=String(ba)}U=!0;let da="";r.has(ba)||(U=!1,da+="unsupported tag compression "+ba);3<Z&&(U=!1,da+="unsupported tag sampleFormat "+
Z);0!==aa%8&&(U=!1,da+="unsupported tag bitsPerSample "+aa);aa=t(N,"GEOASCIIPARAMS");if(aa){var ea=(ea=aa.split("|").find(oa=>oa.includes("ESRI PE String \x3d ")))?ea.replace("ESRI PE String \x3d ",""):"";ea=ea.startsWith("COMPD_CS")||ea.startsWith("PROJCS")||ea.startsWith("GEOGCS")?{wkid:null,wkt:ea}:null}Z=y(N,"GEOTIEPOINTS");aa=y(N,"GEOPIXELSCALE");ba=y(N,"GEOTRANSMATRIX");var fa=N.has("GEOKEYDIRECTORY")?N.get("GEOKEYDIRECTORY").data:null;N=!1;if(fa){N=2===b(fa,"GTRasterTypeGeoKey");var ja=b(fa,
"GTModelTypeGeoKey");2===ja?(fa=b(fa,"GeographicTypeGeoKey"),1024<=fa&&32766>=fa&&(ea={wkid:fa})):1===ja&&(fa=b(fa,"ProjectedCSTypeGeoKey"),1024<=fa&&32766>=fa&&(ea={wkid:fa}))}let ha;aa&&Z&&6<=Z.length?(ha=[aa[0],0,Z[3]-Z[0]*aa[0],0,-Math.abs(aa[1]),Z[4]-Z[1]*aa[1]],N&&(ha[2]-=.5*ha[0]+.5*ha[1],ha[5]-=.5*ha[3]+.5*ha[4])):ba&&16===ba.length&&(ha=N?[ba[0],ba[1],ba[3]-.5*ba[0],ba[4],ba[5],ba[7]-.5*ba[5]]:[ba[0],ba[1],ba[3],ba[4],ba[5],ba[7]]);if(ha){N=[{x:0,y:W},{x:0,y:0},{x:M,y:W},{x:M,y:0}];fa=ba=
Number.POSITIVE_INFINITY;let oa=ja=Number.NEGATIVE_INFINITY;for(let pa=0;pa<N.length;pa++)Z=a(N[pa],ha),ba=Z.x>ba?ba:Z.x,ja=Z.x<ja?ja:Z.x,fa=Z.y>fa?fa:Z.y,oa=Z.y<oa?oa:Z.y;ea={xmin:ba,xmax:ja,ymin:fa,ymax:oa,spatialReference:ea}}else ea={xmin:-.5,ymin:.5-W,xmax:M-.5,ymax:.5,spatialReference:ea};N=C.filter(oa=>1===t(oa,"NEWSUBFILETYPE"));let la,ia,ka;if(0<N.length){la=Math.round(Math.log(M/b(N[0],"IMAGEWIDTH"))/Math.LN2);var na=N[N.length-1];ia=Math.round(Math.log(M/b(na,"IMAGEWIDTH"))/Math.LN2);ka=
b(na,"TILEWIDTH");na=b(na,"TILELENGTH")}ka=0<ia?ka||q:null;na=0<ia?na||H:null;let ma;q&&(ma=[{maxCol:Math.ceil(M/q)-1,maxRow:Math.ceil(W/H)-1,minRow:0,minCol:0}],N.forEach(oa=>{ma.push({maxCol:Math.ceil(b(oa,"IMAGEWIDTH")/b(oa,"TILEWIDTH"))-1,maxRow:Math.ceil(b(oa,"IMAGELENGTH")/b(oa,"TILELENGTH"))-1,minRow:0,minCol:0})}));N=t(C[0],"GDAL_METADATA");N=Q(N);da+=" "+E({width:M,height:W,tileWidth:q,tileHeight:H,planes:V,ifds:C});return{width:M,height:W,tileWidth:q,tileHeight:H,planes:V,isBSQ:L,pixelType:G,
compression:S,noData:ca,isSupported:U,message:da,extent:ea,affine:aa?null:ha,firstPyramidLevel:la,maximumPyramidLevel:ia,pyramidBlockWidth:ka,pyramidBlockHeight:na,tileBoundary:ma,metadata:N}}function f(C,G){return(C=n(C,"PLANARCONFIGURATION"))?2===C[0]:G?G.isBSQ:!1}function e(C){const {littleEndian:G,isBigTiff:S,firstIFD:N}=p(C);var q=N;const H=[];do if(q=u(C,G,q,0,R.TIFF_TAGS,S?8:4),q.success)H.push(q.ifd),q=q.nextIFD;else break;while(0<q);return{...K(H),littleEndian:G,isBigTiff:S,ifds:H}}function d(C,
G,S){const N=C.getUint32(G,S);C=C.getUint32(G+4,S);return S?4294967296*C+N:4294967296*N+C}function k(C,G,S,N){return N?d(C,G,S):C.getUint32(G,S)}function p(C){var G=new DataView(C,0,16),S=G.getUint16(0,!1);C=null;if(18761===S)C=!0;else if(19789===S)C=!1;else throw"unexpected endianess byte";var N=G.getUint16(2,C);if(42!==N&&43!==N)throw"unexpected tiff identifier";S=4;if(N=43===N){const q=G.getUint16(S,C);S+=2;if(8!==q)throw"unsupported bigtiff version";if(0!==G.getUint16(S,C))throw"unsupported bigtiff version";
S+=2}G=k(G,S,C,N);return{littleEndian:C,isBigTiff:N,firstIFD:G}}function u(C,G,S,N=0,q=R.TIFF_TAGS,H=4){S=l(C,G,S,N,q,H);let M;const W=S.ifd;W&&(R.ifdTags.forEach((aa,V)=>{W.has(V)&&(M=W.get(V),M.data=l(C,G,M.valueOffset-N,N,aa).ifd)}),W.has("GEOKEYDIRECTORY")&&(M=W.get("GEOKEYDIRECTORY"),(q=M.values)&&4<q.length&&(q=q[0]+"."+q[1]+"."+q[2],M.data=l(C,G,M.valueOffset+6-N,N,R.GEO_KEYS,2).ifd,M.data&&M.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[q]}))),W.has("XMP")&&
(M=W.get("XMP"),q=M.values,"number"===typeof q[0]&&7===M.type&&(M.values=[I.bytesToUTF8(new Uint8Array(q))])));return S}function E(C){const {width:G,height:S,tileHeight:N,tileWidth:q}=C,H=C.planes,M=q?q*N:G*S;C=b(C.ifds[0],"BITSPERSAMPLE");let W="";M*H>2**30/(8<C?C/8:1)&&(W=q?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return W}function c(){c=O._asyncToGenerator(function*(C,G){var S;const {headerInfo:N,ifd:q,offsets:H,sizes:M}=
G;var W=[];for(var aa=0;aa<H.length;aa++){var V=yield v(C,N.littleEndian,q,H[aa],M[aa]||C.byteLength);W.push(V)}var Z=f(q,N);const {pixelType:L,planes:U}=N;var ca=m(L);C=b(q,"TILEWIDTH");aa=b(q,"TILELENGTH");var ba=null!=(S=b(q,"COMPRESSION"))?S:1;S=C*aa;V=[];let da=W[0];const ea=34887===ba;for(let ha=0;ha<U;ha++){ba=new ca(S);if(Z&&ea){if(da=W[ha],da.length)for(var fa=0;fa<S;fa++)ba[fa]=da[ha][fa+ha]}else if(da.length)if(Z||ea&&!Z)ba=da.slice(S*ha,S*(ha+1));else for(fa=0;fa<S;fa++)ba[fa]=da[fa*U+
ha];V.push(ba)}W=N.noData?N.noData[0]:G.noDataValue;Z=(ca=N.metadata?N.metadata.statistics:null)?ca.map(ha=>ha.min):null;ca=ca?ca.map(ha=>ha.max):null;let ja;if(null!=W)if(ja=new Uint8Array(S),1E24<Math.abs(W))for(G=0;G<S;G++)ja[G]=1E-6>Math.abs((V[0][G]-W)/W)?0:1;else for(G=0;G<S;G++)ja[G]=V[0][G]===W?0:1;else Z&&ca&&G.applyMinMaxConstraint&&(ja=A(V,Z,ca));return{pixelType:L,width:C,height:aa,pixels:V,mask:ja,noDataValue:W}});return c.apply(this,arguments)}function g(){g=O._asyncToGenerator(function*(C,
G={}){var S=G.pyramidLevel||0,N=G.headerInfo||e(C);const {ifds:q,noData:H}=N;if(0===q.length)throw"no valid image file directory";var M=E(N);if(M)throw M;var W=-1===S?q[q.length-1]:q[S];G=H?H[0]:G.noDataValue;if(N.tileWidth)N=yield w(C,N,W);else{{var aa;const na=P.isPlatformLittleEndian===N.littleEndian,ma=y(W,"STRIPOFFSETS");if(void 0===ma)C=null;else{var {width:V,height:Z,pixelType:L}=K([W]);S=N.planes;M=V*Z;var U=b(W,"BITSPERSAMPLE"),ca=m(L),ba=new ca(M*S),da=y(W,"STRIPBYTECOUNTS"),ea=b(W,"ROWSPERSTRIP");
W=null!=(aa=b(W,"COMPRESSION"))?aa:1;var fa=ea;if(0===U%8)for(aa=0;aa<ma.length;aa++){var ja=aa*ea*V*S;fa=(aa+1)*ea>Z?Z-aa*ea:ea;if("u8"===L||"s8"===L||na)if(8===W||32946===W){var ha=new Uint8Array(C,ma[aa],da[aa]);ha=new T.Zlib(ha);var la=ha.getBytes();var ia=new ArrayBuffer(la.length);ha=new Uint8Array(ia);ha.set(la);ha.length!==fa*V*S*U/8&&console.log("strip byte counts is different than expected")}else 6===W?(ha=new Uint8Array(C,ma[aa],da[aa]),ia=new J.JpegImage,ia.parse(ha),fa=ia.getData(ia.width,
ia.height,!0),ia=new ArrayBuffer(fa.length),ha=new Uint8Array(ia),ha.set(fa)):5===W?(ha=Y.decode(C,ma[aa],da[aa],N.littleEndian),ia=ha.buffer):1===W&&(da[aa]!==fa*V*S*U/8&&console.log("strip byte counts is different than expected"),ia=C.slice(ma[aa],ma[aa]+da[aa]));else{if(6===W||8===W||32946===W){ha=new Uint8Array(C,ma[aa],da[aa]);ha=new T.Zlib(ha);ha=ha.getBytes();ia=new ArrayBuffer(ha.length);var ka=new Uint8Array(ia);ha.length!==fa*V*S*U/8&&console.log("strip byte counts is different than expected")}else 1===
W&&(da[aa]!==fa*V*S*U/8&&console.log("strip byte counts is different than expected"),ia=new ArrayBuffer(da[aa]),ha=new Uint8Array(C,ma[aa],da[aa]),ka=new Uint8Array(ia));switch(L){case "u16":case "s16":for(fa=0;fa<ha.length;fa+=2)ka[fa]=ha[fa+1],ka[fa+1]=ha[fa];break;case "u32":case "s32":case "f32":for(fa=0;fa<ha.length;fa+=4)ka[fa]=ha[fa+3],ka[fa+1]=ha[fa+2],ka[fa+2]=ha[fa+1],ka[fa+3]=ha[fa]}}fa=new ca(ia);ba.set(fa,ja)}ka=[];if(1===S)ka.push(ba);else for(aa=0;aa<S;aa++){N=new ca(M);for(C=0;C<M;C++)N[C]=
ba[C*S+aa];ka.push(N)}C={width:V,height:Z,pixelType:L,pixels:ka}}}N=yield C}if(null!==G){N.mask=new Uint8Array(N.width*N.height);if(1E24<Math.abs(G))for(C=0;C<N.width*N.height;C++)N.mask[C]=1E-6>Math.abs((N.pixels[0][C]-G)/G)?0:1;else for(C=0;C<N.width*N.height;C++)N.mask[C]=N.pixels[0][C]===G?0:1;N.noDataValue=G}return N});return g.apply(this,arguments)}const h=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],r=new Set([1,5,6,7,8,34712,34887]),A=(C,G,S)=>{if(!(C&&0<C.length&&G&&S))return null;let N,q,
H;const M=C[0].length,W=C.length,aa=new Uint8Array(M);for(let Z=0;Z<W;Z++)if(N=C[Z],q=G[Z],H=S[Z],0===Z)for(var V=0;V<M;V++)aa[V]=N[V]<q||N[V]>H?0:1;else for(V=0;V<M;V++)aa[V]&&(aa[V]=N[V]<q||N[V]>H?0:1);return aa},Q=C=>{if(!C)return null;var G=C.match(/<Item(.*?)Item>/gi);if(!G||0===G.length)return null;C=new Map;var S;for(var N=0;N<G.length;N++){var q=G[N];var H=q.slice(6,q.indexOf("\x3e"));var M=q.indexOf("sample\x3d");-1<M&&(S=q.slice(M+8,q.indexOf('"',M+8)));M=q.indexOf("name\x3d");-1<M&&(H=
q.slice(M+6,q.indexOf('"',M+6)));H&&(q=q.slice(q.indexOf("\x3e")+1,q.indexOf("\x3c/Item\x3e")).trim(),null!=S?C.has(H)?C.get(H)[S]=q:C.set(H,[q]):C.set(H,q));S=null}G=C.get("STATISTICS_MINIMUM");H=C.get("STATISTICS_MAXIMUM");N=C.get("STATISTICS_MEAN");q=C.get("STATISTICS_STDDEV");S=null;if(G&&H)for(S=[],M=0;M<G.length;M++)S.push({min:parseFloat(G[M]),max:parseFloat(H[M]),avg:N&&parseFloat(N[M]),stddev:q&&parseFloat(q[M])});H=C.get("BandName");N=C.get("WavelengthMin");q=C.get("WavelengthMax");G=null;
if(H)for(G=[],M=0;M<H.length;M++)G.push({BandName:H[M],WavelengthMin:N&&parseFloat(N[M]),WavelengthMax:q&&parseFloat(q[M])});H=C.get("DataType");return{statistics:S,bandProperties:G,dataType:H,rawMetadata:C}};X.decode=function(C){return g.apply(this,arguments)};X.decodeTileOrStrip=function(C,G){return c.apply(this,arguments)};X.getImageInfo=K;X.isBSQConfig=f;X.parseFieldValues=D;X.parseHeader=e;X.parseIFD=u;X.parseSignature=p;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(X){X.bytesToUTF8=function(O,I){let J=0,z="",Y=0,R=0;const P=O.length;for(;J<P;)if(R=O[J++],Y=R>>4,8>Y?Y=1:15===Y?(Y=4,R=(R&7)<<18|(O[J++]&63)<<12|(O[J++]&63)<<6|O[J++]&63):14===Y?(Y=3,R=(R&15)<<12|(O[J++]&63)<<6|O[J++]&63):(Y=2,R=(R&31)<<6|O[J++]&63),0!==R||I)z+=String.fromCharCode(R);return z};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const X=
(()=>{const z=[];z[254]="NEWSUBFILETYPE";z[255]="SUBFILETYPE";z[256]="IMAGEWIDTH";z[257]="IMAGELENGTH";z[258]="BITSPERSAMPLE";z[259]="COMPRESSION";z[262]="PHOTOMETRICINTERPRETATION";z[263]="THRESHHOLDING";z[264]="CELLWIDTH";z[265]="CELLLENGTH";z[266]="FILLORDER";z[269]="DOCUMENTNAME";z[270]="IMAGEDESCRIPTION";z[271]="MAKE";z[272]="MODEL";z[273]="STRIPOFFSETS";z[274]="ORIENTATION";z[277]="SAMPLESPERPIXEL";z[278]="ROWSPERSTRIP";z[279]="STRIPBYTECOUNTS";z[280]="MINSAMPLEVALUE";z[281]="MAXSAMPLEVALUE";
z[282]="XRESOLUTION";z[283]="YRESOLUTION";z[284]="PLANARCONFIGURATION";z[285]="PAGENAME";z[286]="XPOSITION";z[287]="YPOSITION";z[288]="FREEOFFSETS";z[289]="FREEBYTECOUNTS";z[290]="GRAYRESPONSEUNIT";z[291]="GRAYRESPONSECURVE";z[292]="T4OPTIONS";z[293]="T6OPTIONS";z[296]="RESOLUTIONUNIT";z[297]="PAGENUMBER";z[300]="COLORRESPONSEUNIT";z[301]="TRANSFERFUNCTION";z[305]="SOFTWARE";z[306]="DATETIME";z[315]="ARTIST";z[316]="HOSTCOMPUTER";z[317]="PREDICTOR";z[318]="WHITEPOINT";z[319]="PRIMARYCHROMATICITIES";
z[320]="COLORMAP";z[321]="HALFTONEHINTS";z[322]="TILEWIDTH";z[323]="TILELENGTH";z[324]="TILEOFFSETS";z[325]="TILEBYTECOUNTS";z[326]="BADFAXLINES";z[327]="CLEANFAXDATA";z[328]="CONSECUTIVEBADFAXLINES";z[330]="SUBIFD";z[332]="INKSET";z[333]="INKNAMES";z[334]="NUMBEROFINKS";z[336]="DOTRANGE";z[337]="TARGETPRINTER";z[338]="EXTRASAMPLES";z[339]="SAMPLEFORMAT";z[340]="SMINSAMPLEVALUE";z[341]="SMAXSAMPLEVALUE";z[342]="TRANSFERRANGE";z[347]="JPEGTABLES";z[512]="JPEGPROC";z[513]="JPEGIFOFFSET";z[514]="JPEGIFBYTECOUNT";
z[515]="JPEGRESTARTINTERVAL";z[517]="JPEGLOSSLESSPREDICTORS";z[518]="JPEGPOINTTRANSFORM";z[519]="JPEGQTABLES";z[520]="JPEGDCTABLES";z[521]="JPEGACTABLES";z[529]="YCBCRCOEFFICIENTS";z[530]="YCBCRSUBSAMPLING";z[531]="YCBCRPOSITIONING";z[532]="REFERENCEBLACKWHITE";z[700]="XMP";z[33550]="GEOPIXELSCALE";z[33922]="GEOTIEPOINTS";z[33432]="COPYRIGHT";z[42112]="GDAL_METADATA";z[42113]="GDAL_NODATA";z[50844]="RPCCOEFFICIENT";z[34264]="GEOTRANSMATRIX";z[34735]="GEOKEYDIRECTORY";z[34736]="GEODOUBLEPARAMS";z[34737]=
"GEOASCIIPARAMS";z[34665]="EXIFIFD";z[34853]="GPSIFD";z[40965]="INTEROPERABILITYIFD";return z})(),O=(()=>{const z=[].concat(X);z[36864]="ExifVersion";z[40960]="FlashpixVersion";z[40961]="ColorSpace";z[42240]="Gamma";z[37121]="ComponentsConfiguration";z[37122]="CompressedBitsPerPixel";z[40962]="PixelXDimension";z[40963]="PixelYDimension";z[37500]="MakerNote";z[37510]="UserComment";z[40964]="RelatedSoundFile";z[36867]="DateTimeOriginal";z[36868]="DateTimeDigitized";z[36880]="OffsetTime";z[36881]="OffsetTimeOriginal";
z[36882]="OffsetTimeDigitized";z[37520]="SubSecTime";z[37521]="SubSecTimeOriginal";z[37522]="SubSecTimeDigitized";z[37888]="Temperature";z[37889]="Humidity";z[37890]="Pressure";z[37891]="WaterDepth";z[37892]="Acceleration";z[37893]="CameraElevationAngle";z[42016]="ImageUniqueID";z[42032]="CameraOwnerName";z[42033]="BodySerialNumber";z[42034]="LensSpecification";z[42035]="LensMake";z[42036]="LensModel";z[42037]="LensSerialNumber";z[33434]="ExposureTime";z[33437]="FNumber";z[34850]="ExposureProgram";
z[34852]="SpectralSensitivity";z[34855]="PhotographicSensitivity";z[34856]="OECF";z[34864]="SensitivityType";z[34865]="StandardOutputSensitivity";z[34866]="RecommendedExposureIndex";z[34867]="ISOSpeed";z[34868]="ISOSpeedLatitudeyyy";z[34869]="ISOSpeedLatitudezzz";z[37377]="ShutterSpeedValue";z[37378]="ApertureValue";z[37379]="BrightnessValue";z[37380]="ExposureBiasValue";z[37381]="MaxApertureValue";z[37382]="SubjectDistance";z[37383]="MeteringMode";z[37384]="LightSource";z[37385]="Flash";z[37386]=
"FocalLength";z[37396]="SubjectArea";z[41483]="FlashEnergy";z[41484]="SpatialFrequencyResponse";z[41486]="FocalPlaneXResolution";z[41487]="FocalPlaneYResolution";z[41488]="FocalPlaneResolutionUnit";z[41492]="SubjectLocation";z[41493]="ExposureIndex";z[41495]="SensingMethod";z[41728]="FileSource";z[41729]="SceneType";z[41730]="CFAPattern";z[41985]="CustomRendered";z[41986]="ExposureMode";z[41987]="WhiteBalance";z[41988]="DigitalZoomRatio";z[41989]="FocalLengthIn35mmFilm";z[41990]="SceneCaptureType";
z[41991]="GainControl";z[41992]="Contrast";z[41993]="Saturation";z[41994]="Sharpness";z[41995]="DeviceSettingDescription";z[41996]="SubjectDistanceRange";return z})(),I=(()=>{const z=[];z[1024]="GTModelTypeGeoKey";z[1025]="GTRasterTypeGeoKey";z[1026]="GTCitationGeoKey";z[2048]="GeographicTypeGeoKey";z[2049]="GeogCitationGeoKey";z[2050]="GeogGeodeticDatumGeoKey";z[2051]="GeogPrimeMeridianGeoKey";z[2052]="GeogLinearUnitsGeoKey";z[2053]="GeogLinearUnitSizeGeoKey";z[2054]="GeogAngularUnitsGeoKey";z[2055]=
"GeogAngularUnitSizeGeoKey";z[2056]="GeogEllipsoidGeoKey";z[2057]="GeogSemiMajorAxisGeoKey";z[2058]="GeogSemiMinorAxisGeoKey";z[2059]="GeogInvFlatteningGeoKey";z[2061]="GeogPrimeMeridianLongGeoKey";z[2060]="GeogAzimuthUnitsGeoKey";z[3072]="ProjectedCSTypeGeoKey";z[3073]="PCSCitationGeoKey";z[3074]="ProjectionGeoKey";z[3075]="ProjCoordTransGeoKey";z[3076]="ProjLinearUnitsGeoKey";z[3077]="ProjLinearUnitSizeGeoKey";z[3078]="ProjStdParallel1GeoKey";z[3079]="ProjStdParallel2GeoKey";z[3080]="ProjNatOriginLongGeoKey";
z[3081]="ProjNatOriginLatGeoKey";z[3082]="ProjFalseEastingGeoKey";z[3083]="ProjFalseNorthingGeoKey";z[3084]="ProjFalseOriginLongGeoKey";z[3085]="ProjFalseOriginLatGeoKey";z[3086]="ProjFalseOriginEastingGeoKey";z[3087]="ProjFalseOriginNorthingGeoKey";z[3088]="ProjCenterLongGeoKey";z[3090]="ProjCenterEastingGeoKey";z[3091]="ProjCenterNorthingGeoKey";z[3092]="ProjScaleAtNatOriginGeoKey";z[3093]="ProjScaleAtCenterGeoKey";z[3094]="ProjAzimuthAngleGeoKey";z[3095]="ProjStraightVertPoleLongGeoKey";z[4096]=
"VerticalCSTypeGeoKey";z[4097]="VerticalCitationGeoKey";z[4098]="VerticalDatumGeoKey";z[4099]="VerticalUnitsGeoKey";return z})(),J=new Map;J.set("EXIFIFD",O);J.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:X,ifdTags:J,GEO_KEYS:I,getTagName:(z,Y)=>{Y=(Y||X)[z];void 0===Y&&(Y="unknown"+String(z));return Y}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(X){{var O=new ArrayBuffer(4);const I=new Uint8Array(O);(new Uint32Array(O))[0]=1;O=1===I[0]}X.isPlatformLittleEndian=O;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./byteStreamUtils"],function(X,O){function I(J){var z=J.fields;J=J.records;const Y=z.some(m=>"oid"===m.name.toLowerCase())?"OBJECTID":"OID";z=[{name:Y,type:"esriFieldTypeOID",alias:"OID"}].concat(z.map(m=>({name:m.name,type:"esriFieldType"+m.typeName,alias:m.name})));const R=z.map(m=>m.name),P=[];let T=0,x=0;J.forEach(m=>{const a={};a[Y]=T++;for(x=1;x<R.length;x++)a[R[x]]=m[x-1];P.push({attributes:a})});return{displayFieldName:"",fields:z,features:P}}return function(){function J(){}J.parse=function(z){var Y=
new DataView(z),R=Y.getUint8(0)&3;if(3!==R)return{header:{version:R},recordSet:null};const P=Y.getUint32(4,!0);var T=Y.getUint16(8,!0);const x=Y.getUint16(10,!0);T={version:R,recordCount:P,headerByteCount:T,recordByteCount:x};let m=32;const a=[],n=[];if(3===R){for(;13!==Y.getUint8(m);)R=String.fromCharCode(Y.getUint8(m+11)).trim(),a.push({name:O.bytesToUTF8(new Uint8Array(z,m,11)),type:R,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(R)],length:Y.getUint8(m+
16)}),m+=32;m+=1;if(0<a.length)for(;n.length<P&&z.byteLength-m>x;){const y=[];32===Y.getUint8(m)?(m+=1,a.forEach(t=>{if("C"===t.type)y.push(O.bytesToUTF8(new Uint8Array(z,m,t.length)).trim());else if("N"===t.type)y.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(z,m,t.length)).trim(),10));else if("F"===t.type)y.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(z,m,t.length)).trim()));else if("D"===t.type){const b=String.fromCharCode.apply(null,new Uint8Array(z,m,t.length)).trim();
y.push(new Date(parseInt(b.substring(0,4),10),parseInt(b.substring(4,6),10)-1,parseInt(b.substring(6,8),10)))}m+=t.length}),n.push(y)):m+=x}}Y=I({fields:a,records:n});return{header:T,fields:a,records:n,recordSet:Y}};X._createClass(J,null,[{key:"supportedVersions",get:function(){return[5]}}]);return J}()})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(X,O,I,J){const z={GCSShiftXform:O,IdentityXform:I,
PolynomialXform:J},Y=Object.keys(z);X.isTransformSupported=function(R){const P=null==R?void 0:R.type;return!R||Y.includes(P)};X.readTransform=function(R){if(null==R||!R.type)return null;var P=z[null==R?void 0:R.type];return P?(P=new P,P.read(R),P):null};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(X,O,I,J,z,Y,R,P,T){J=function(x){function m(){var n=x.apply(this,arguments)||this;n.type="gcs-shift";n.tolerance=1E-8;return n}X._inheritsLoose(m,x);var a=m.prototype;a.forwardTransform=function(n){n=n.clone();if("point"===n.type)return n.x>180+this.tolerance&&(n.x-=360),n;n.xmin>=180-this.tolerance?(n.xmax-=360,n.xmin-=360):n.xmax>180+this.tolerance&&(n.xmin=-180,n.xmax=180);return n};a.inverseTransform=function(n){n=n.clone();if("point"===n.type)return n.x<-this.tolerance&&(n.x+=360),n;
n.xmin<-this.tolerance&&(n.xmin+=360,n.xmax+=360);return n};return m}(T);O.__decorate([R.enumeration({GCSShiftXform:"gcs-shift"})],J.prototype,"type",void 0);O.__decorate([I.property()],J.prototype,"tolerance",void 0);return J=O.__decorate([P.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],J)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(X,O,I,J,z,Y,R,P){I=function(T){function x(){return T.apply(this,arguments)||this}X._inheritsLoose(x,T);var m=x.prototype;m.forwardTransform=function(a){return a};m.inverseTransform=function(a){return a};X._createClass(x,[{key:"affectsPixelSize",get:function(){return!1}}]);return x}(I.JSONSupport);O.__decorate([J.property()],I.prototype,"affectsPixelSize",null);O.__decorate([J.property({json:{write:!0}})],I.prototype,"spatialReference",void 0);return I=O.__decorate([P.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
I)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(X,O,I,J,z,Y,R,P,T,x){I=function(m){function a(){var n=m.apply(this,
arguments)||this;n.type="identity";return n}X._inheritsLoose(a,m);return a}(x);O.__decorate([P.enumeration({IdentityXform:"identity"})],I.prototype,"type",void 0);return I=O.__decorate([T.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],I)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y){function t(l,v,F){const {x:w,y:B}=v;if(2>F)return{x:l[0]+w*l[2]+B*l[4],y:l[1]+w*l[3]+B*l[5]};if(2===F){v=w*w;F=B*B;var D=w*B;return{x:l[0]+w*l[2]+B*l[4]+v*l[6]+D*l[8]+F*l[10],y:l[1]+w*l[3]+B*l[5]+v*l[7]+D*l[9]+F*l[11]}}v=w*w;F=B*B;D=w*B;const K=v*w,f=v*B,e=w*F,d=B*F;return{x:l[0]+w*l[2]+B*l[4]+v*l[6]+D*l[8]+F*l[10]+K*l[12]+f*l[14]+e*l[16]+d*l[18],y:l[1]+w*l[3]+B*l[5]+v*l[7]+D*l[9]+F*l[11]+K*l[13]+f*l[15]+e*l[17]+d*l[19]}}function b(l,v,F){const {xmin:w,ymin:B,
xmax:D,ymax:K,spatialReference:f}=v;v=[];if(2>F)v.push({x:w,y:K}),v.push({x:D,y:K}),v.push({x:w,y:B}),v.push({x:D,y:B});else{var e=10;for(var d=0;d<e;d++)v.push({x:w,y:B+(K-B)*d/(e-1)}),v.push({x:D,y:B+(K-B)*d/(e-1)});e=8;for(d=1;d<=e;d++)v.push({x:w+(D-w)*d/e,y:B}),v.push({x:w+(D-w)*d/e,y:K})}v=v.map(k=>t(l,k,F));e=v.map(k=>k.x);v=v.map(k=>k.y);return new y({xmin:Math.min.apply(null,e),xmax:Math.max.apply(null,e),ymin:Math.min.apply(null,v),ymax:Math.max.apply(null,v),spatialReference:f})}I=function(l){function v(){var w=
l.apply(this,arguments)||this;w.polynomialOrder=1;w.type="polynomial";return w}X._inheritsLoose(v,l);var F=v.prototype;F.readForwardCoefficients=function(w,B){const {coeffX:D,coeffY:K}=B;if(null==D||!D.length||null==K||!K.length||D.length!==K.length)return null;w=[];for(B=0;B<D.length;B++)w.push(D[B]),w.push(K[B]);return w};F.writeForwardCoefficients=function(w,B,D){D=[];const K=[];for(let f=0;f<(null==w?void 0:w.length);f++)0===f%2?D.push(w[f]):K.push(w[f]);B.coeffX=D;B.coeffY=K};F.readInverseCoefficients=
function(w,B){const {inverseCoeffX:D,inverseCoeffY:K}=B;if(null==D||!D.length||null==K||!K.length||D.length!==K.length)return null;w=[];for(B=0;B<D.length;B++)w.push(D[B]),w.push(K[B]);return w};F.writeInverseCoefficients=function(w,B,D){D=[];const K=[];for(let f=0;f<(null==w?void 0:w.length);f++)0===f%2?D.push(w[f]):K.push(w[f]);B.inverseCoeffX=D;B.inverseCoeffY=K};F.forwardTransform=function(w){if("point"===w.type){const B=t(this.forwardCoefficients,w,this.polynomialOrder);return new n({x:B.x,y:B.y,
spatialReference:w.spatialReference})}return b(this.forwardCoefficients,w,this.polynomialOrder)};F.inverseTransform=function(w){if("point"===w.type){const B=t(this.inverseCoefficients,w,this.polynomialOrder);return new n({x:B.x,y:B.y,spatialReference:w.spatialReference})}return b(this.inverseCoefficients,w,this.polynomialOrder)};X._createClass(v,[{key:"inverseCoefficients",get:function(){var w=this._get("inverseCoefficients"),B=this._get("forwardCoefficients");if(!w&&B&&2>this.polynomialOrder){{const [D,
K,f,e,d,k]=B;w=f*k-d*e;B=d*e-f*k;w=[(d*K-D*k)/w,(f*K-D*e)/B,k/w,e/B,-d/w,-f/B]}}return w},set:function(w){this._set("inverseCoefficients",w)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return v}(a);O.__decorate([J.property({json:{write:!0}})],I.prototype,"polynomialOrder",void 0);O.__decorate([J.property()],I.prototype,"forwardCoefficients",void 0);O.__decorate([T.reader("forwardCoefficients",["coeffX","coeffY"])],I.prototype,"readForwardCoefficients",null);O.__decorate([m.writer("forwardCoefficients")],
I.prototype,"writeForwardCoefficients",null);O.__decorate([J.property({json:{write:!0}})],I.prototype,"inverseCoefficients",null);O.__decorate([T.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],I.prototype,"readInverseCoefficients",null);O.__decorate([m.writer("inverseCoefficients")],I.prototype,"writeInverseCoefficients",null);O.__decorate([J.property()],I.prototype,"affectsPixelSize",null);O.__decorate([P.enumeration({PolynomialXform:"polynomial"})],I.prototype,"type",void 0);return I=
O.__decorate([x.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],I)})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/has ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRaster ./InMemoryRaster ./pamParser ../rasterFormats/RasterCodec ../rasterFunctions/stretchUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F){I=function(w){function B(){return w.apply(this,arguments)||this}X._inheritsLoose(B,w);var D=B.prototype;D.open=function(){var K=X._asyncToGenerator(function*(f){yield this.init();var e=yield this._fetchData(f);let {spatialReference:d,statistics:k,histograms:p,transform:u}=yield this._fetchAuxiliaryData(f);(f=!d)&&(d=new v({wkid:3857}));null!=p&&p.length&&null==k&&(k=b.estimateStatisticsFromHistograms(p));const {width:E,height:c}=e;let g=new F({xmin:-.5,
ymin:.5-c,xmax:E-.5,ymax:.5,spatialReference:d});const h=u?u.forwardTransform(g):g;var r=!0;u&&(r=(r=u.forwardCoefficients)&&0===r[1]&&0===r[2])&&(u=null,g=h);e=new n({data:{extent:h,nativeExtent:g,transform:u,pixelBlock:e,statistics:k,histograms:p,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:f}});yield e.open();e.data=null;this._set("rasterInfo",e.rasterInfo);this._inMemoryRaster=e});return function(f){return K.apply(this,arguments)}}();D.fetchRawTile=function(K,f,e,d={}){return this._inMemoryRaster.fetchRawTile(K,
f,e,d)};D._fetchData=function(){var K=X._asyncToGenerator(function*(f){({data:f}=yield this.request(this.url,{responseType:"array-buffer",signal:null==f?void 0:f.signal}));var e=t.getFormat(f).toUpperCase();if("JPG"===e||"PNG"===e||"GIF"===e||"BMP"===e)this._set("datasetFormat",e);else throw new J("image-aux-raster:open","the data is not a supported format");e=e.toLowerCase();const d="gif"===e||"bmp"===e||!z("ios");return yield this.decodePixelBlock(f,{format:e,useCanvas:d,hasNoZlibMask:!0})});return function(f){return K.apply(this,
arguments)}}();D._fetchAuxiliaryData=function(){var K=X._asyncToGenerator(function*(f){var e,d;f=Y.unwrap(null==f?void 0:f.signal);var k=null!=(e=this.ioConfig.skipExtensions)?e:[];e=k.includes("aux.xml")?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:f});var p=this.datasetFormat;p="JPG"===p?"jgw":"PNG"===p?"pgw":"BMP"===p?"bpw":null;k=k.includes(p)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+p,{responseType:"text",signal:f});k=yield R.eachAlways([e,k]);if(null!=
f&&f.aborted)throw R.createAbortError();f=y.parsePAMInfo(null==(d=k[0].value)?void 0:d.data);f.transform||(d=k[1].value?k[1].value.data.split("\n").slice(0,6).map(u=>Number(u)):null,f.transform=6===(null==d?void 0:d.length)?new l({forwardCoefficients:[d[4],d[5],d[0],-d[1],d[2],-d[3]]}):null);return f});return function(f){return K.apply(this,arguments)}}();return B}(a);O.__decorate([P.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);return I=O.__decorate([m.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],
I)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ./BaseRaster ../rasterFunctions/pixelUtils ../rasterFunctions/stretchUtils ../../../geometry/Extent ../../../geometry/SpatialReference".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l){I=function(v){function F(){var B=v.apply(this,arguments)||this;B.datasetFormat="MEMORY";return B}X._inheritsLoose(F,v);var w=F.prototype;w.open=function(){var B=X._asyncToGenerator(function*(D){var K;yield this.init();const {pixelBlock:f,statistics:e,histograms:d,name:k,keyProperties:p,nativeExtent:u,transform:E}=this.data,{width:c,height:g,pixelType:h}=f,r=this.data.extent||new b({xmin:-.5,ymin:.5,xmax:c-.5,ymax:g-.5,spatialReference:new l({wkid:3857})}),
A=null!=(K=this.data.isPseudoSpatialReference)?K:!this.data.extent;K=new a({width:c,height:g,pixelType:h,extent:r,nativeExtent:u,transform:E,pixelSize:{x:r.width/c,y:r.height/g},spatialReference:r.spatialReference,bandCount:3,keyProperties:p||{},statistics:e,isPseudoSpatialReference:A,histograms:d});this.createRemoteDatasetStorageInfo(K,512,512);this._set("rasterInfo",K);this.updateTileInfo();yield this._buildInMemoryRaster(f,{width:512,height:512},D);this.datasetName=k;this.url="/InMemory/"+k});
return function(D){return B.apply(this,arguments)}}();w.fetchRawTile=function(B,D,K,f){B=this._pixelBlockTiles.get(`${B}/${D}/${K}`);return Promise.resolve(B)};w._buildInMemoryRaster=function(){var B=X._asyncToGenerator(function*(D,K,f){var e=this.rasterInfo.storageInfo.maximumPyramidLevel;const d=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:D,tileSize:K,maximumPyramidLevel:e},f):Promise.resolve(y.split(D,K,e));K=z.isSome(this.rasterInfo.statistics);e=z.isSome(this.rasterInfo.histograms);
D=K?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:D},f):Promise.resolve(t.estimateStatisticsHistograms(D));D=yield Y.eachAlways([d,D]);if(!D[0].value&&D[1].value)throw new J("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=D[0].value;if(!K){var k;this.rasterInfo.statistics=null==(k=D[1].value)?void 0:k.statistics}if(!e){var p;this.rasterInfo.histograms=null==(p=D[1].value)?void 0:
p.histograms}});return function(D,K,f){return B.apply(this,arguments)}}();return F}(n);O.__decorate([R.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);O.__decorate([R.property()],I.prototype,"data",void 0);return I=O.__decorate([m.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],I)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry","./xmlUtilities","../rasterTransforms/PolynomialTransform","../../../geometry/SpatialReference"],
function(X,O,I,J,z){function Y(m,a){if(!m||!a)return null;const n=[];for(let y=0;y<m.length;y++)n.push(m[y]),n.push(a[y]);return n}function R(m){var a,n=I.getElement(m,"GeodataXform");m=I.getElementNumericValue(n,"SpatialReference/WKID")||I.getElementValue(n,"SpatialReference/WKT");m=T(m);if("typens:PolynomialXform"!==n.getAttribute("xsi:type"))return{spatialReference:m,transform:null};var y=null!=(a=I.getElementNumericValue(n,"PolynomialOrder"))?a:1,t=I.getElementNumericValues(n,"CoeffX/Double");
const b=I.getElementNumericValues(n,"CoeffY/Double");a=I.getElementNumericValues(n,"InverseCoeffX/Double");n=I.getElementNumericValues(n,"InverseCoeffY/Double");t=Y(t,b);n=Y(a,n);y=new J({spatialReference:m,polynomialOrder:y,forwardCoefficients:t,inverseCoefficients:n});return{spatialReference:m,transform:y}}function P(m){var a;const n=I.getElementNumericValue(m,"NoDataValue");var y=I.getElement(m,"Histograms/HistItem");const t=I.getElementNumericValue(y,"HistMin"),b=I.getElementNumericValue(y,"HistMax"),
l=I.getElementNumericValue(y,"BucketCount");y=null==(a=I.getElementValue(y,"HistCounts"))?void 0:a.split("|").map(D=>Number(D));let v,F,w,B;I.getElements(m,"Metadata/MDI").forEach(D=>{var K;const f=Number(null!=(K=D.textContent)?K:D.nodeValue);switch(D.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":v=f;break;case "STATISTICS_MAXIMUM":F=f;break;case "STATISTICS_MEAN":w=f;break;case "STATISTICS_STDDEV":B=f}});m=I.getElementNumericValue(m,"Metadata/SourceBandIndex");return{noDataValue:n,
histogram:null!=y&&y.length&&null!=v&&null!=F?{min:t,max:b,size:l||y.length,counts:y}:null,sourceBandIndex:m,statistics:null!=v&&null!=F?{min:v,max:F,avg:w,stddev:B}:null}}function T(m){if(!m)return null;var a=Number(m);if(!isNaN(a)&&0!==a)return new z({wkid:a});m=String(m);if(m.startsWith("COMPD_CS")){if(!m.includes("VERTCS")||!m.includes("GEOGCS")&&!m.startsWith("PROJCS"))return null;a=m.indexOf("VERTCS");var n=m.indexOf("PROJCS");n=-1<n?n:m.indexOf("GEOGCS");if(-1===n)return null;n=m.slice(n,m.lastIndexOf("]",
a)+1).trim();m=m.slice(a,m.lastIndexOf("]")).trim();a=(a=x(n))?new z({wkid:a}):new z({wkt:n});if(m=x(m))a.vcsWkid=m;return a}if(!m.startsWith("GEOGCS")&&!m.startsWith("PROJCS"))return null;a=x(m);return 0!==a?new z({wkid:a}):new z({wkt:m})}function x(m){var a,n=m.replace(/\]/g,"[").replace(/"/g,"").split("[").map(t=>t.trim()).filter(t=>""!==t);n=n[n.length-1].split(",");const y=null==(a=n[0])?void 0:a.toLowerCase();return"epsg"!==y&&"esri"!==y||!m.endsWith('"]]')||(m=Number(n[1]),isNaN(m)||0===m)?
0:m}X.parsePAMInfo=function(m){var a;if("pamdataset"!==(null==m?void 0:null==(a=m.documentElement.tagName)?void 0:a.toLowerCase()))return{};const n={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};m.documentElement.childNodes.forEach(y=>{if(1===y.nodeType)if(I.isSameTagIgnoreNS(y,"SRS"))n.spatialReference||(y=I.getElementValue(y),n.spatialReference=T(y));else if(I.isSameTagIgnoreNS(y,"Metadata"))if("xml:ESRI"===y.getAttribute("domain")){const {spatialReference:t,
transform:b}=R(y);n.transform=b;n.spatialReference||(n.spatialReference=t)}else I.getElements(y,"MDI").forEach(t=>n.metadata[t.getAttribute("key")]=I.getElementValue(t));else I.isSameTagIgnoreNS(y,"PAMRasterBand")&&(y=P(y),null!=y.sourceBandIndex&&null==n.rasterBands[y.sourceBandIndex]?n.rasterBands[y.sourceBandIndex]=y:n.rasterBands.push(y))});if(m=n.rasterBands)n.statistics=m[0].statistics?m.map(y=>y.statistics):null,n.histograms=m[0].histogram?m.map(y=>y.histogram):null;return n};X.parseSpatialReference=
T;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(X){function O(Y,R){if(!Y||!R)return[];var P=R;R.includes("/")?(P=R.slice(0,R.indexOf("/")),R=R.slice(R.indexOf("/")+1)):R="";const T=[];if(R){Y=O(Y,P);for(P=0;P<Y.length;P++)O(Y[P],R).forEach(x=>T.push(x));return T}R=Y.getElementsByTagNameNS("*",P);if(!R||0===R.length)return[];for(Y=0;Y<R.length;Y++)T.push(R[Y]||R.item[Y]);
return T}function I(Y,R){if(!Y||!R)return null;let P=R;R.includes("/")?(P=R.slice(0,R.indexOf("/")),R=R.slice(R.indexOf("/")+1)):R="";Y=O(Y,P);return 0<Y.length?R?I(Y[0],R):Y[0]:null}function J(Y,R=null){if(Y=R?I(Y,R):Y)if(Y=Y.textContent||Y.nodeValue)return Y.trim();return null}function z(Y,R){Y=O(Y,R);R=[];let P;for(let T=0;T<Y.length;T++)if(P=Y[T].textContent||Y[T].nodeValue)P=P.trim(),""!==P&&R.push(P);return R}X.getElement=I;X.getElementNumericValue=function(Y,R){Y=J(Y,R);return Number(Y)};X.getElementNumericValues=
function(Y,R){return z(Y,R).map(P=>Number(P))};X.getElementValue=J;X.getElementValues=z;X.getElements=O;X.getNodeNameIgnoreNS=function(Y){return Y.nodeName.slice(Y.nodeName.lastIndexOf(":")+1)};X.getSpaceDelimitedNumericValues=function(Y,R=null){Y=J(Y,R);return null==Y?void 0:Y.split(" ").map(P=>Number(P))};X.isSameTagIgnoreNS=function(Y,R){var P;Y=null==Y?void 0:null==(P=Y.nodeName)?void 0:P.toLowerCase();R=R.toLowerCase();return Y.slice(Y.lastIndexOf(":")+1)===R};Object.defineProperties(X,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../serviceTileInfoProperty ../TileInfo ../TilemapCache ./BaseRaster ../rasterFunctions/pixelUtils ../rasterTransforms/GCSShiftTransform ../../../rest/imageService/fetchRasterInfo ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D,K){I=function(f){function e(){var k=f.apply(this,arguments)||this;k._levelOffset=0;k._tilemapCache=null;k._slices=null;k.datasetFormat="RasterTileServer";return k}X._inheritsLoose(e,f);var d=e.prototype;d.open=function(){var k=X._asyncToGenerator(function*(p){yield this.init();p=p&&p.signal;var u=this.sourceJSON?{data:this.sourceJSON}:yield this.request(this.url,{query:{f:"json"},signal:p});u.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));
const E=u.data;this.sourceJSON=E;if(!E)throw new J("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!E.tileInfo)throw new J("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();u="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=E.cacheType;null==this.tileType&&(u.includes(E.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===E.tileInfo.format.toLowerCase()?this.tileType="Elevation":
this.tileType="Raster");this.datasetName=E.name.slice(E.name.indexOf("/")+1);p=yield this._fetchRasterInfo({signal:p});if(z.isSome(p)){u="Map"===this.tileType?y.readServiceTileInfo(E.tileInfo,E):t.fromJSON(E.tileInfo);const {extent:r,pixelSize:A}=p,Q=.5/p.width*A.x;let C,G;var c=u.lodAt(Math.max.apply(null,u.lods.map(V=>V.level)));"Map"!==this.tileType&&0!==E.maxScale&&("Raster"===this.tileType?(C=u.lods.find(V=>V.resolution===A.x))||(C=u.lods[u.lods.length-1]):(C=u.lods.find(V=>Math.abs(V.scale-
E.maxScale)<Q))||(C=u.lods.filter(V=>V.scale>E.maxScale).sort((V,Z)=>V.scale>Z.scale?1:-1)[0]),A.x=A.y=C.resolution,p.width=Math.ceil((r.xmax-r.xmin)/A.x-.1),p.height=Math.ceil((r.ymax-r.ymin)/A.y-.1));C||(C=c);c=u.lodAt(Math.min.apply(null,u.lods.map(V=>V.level)));"Map"===this.tileType?this._levelOffset=u.lods[0].level:0!==E.minScale&&"Elevation"===this.tileType&&(G=u.lods.find(V=>Math.abs(V.scale-E.minScale)<Q),this._levelOffset=G.level-c.level);G||(G=c);const S=Math.max(A.x,A.y);if(Math.abs(A.x-
A.y)>Q||!u.lods.some(V=>Math.abs(V.resolution-S)<Q))A.x=A.y=C.resolution,p.width=Math.ceil((r.xmax-r.xmin)/A.x-.1),p.height=Math.ceil((r.ymax-r.ymin)/A.y-.1);c=C.level-G.level;const [N,q]=u.size,H=[];u.lods.forEach(V=>{V.level>=G.level&&V.level<=C.level&&H.push({x:V.resolution,y:V.resolution})});H.sort((V,Z)=>V.x-Z.x);const M=this.computeBlockBoundary(r,N,q,u.origin,H,c),W=1<H.length?H.slice(1):null;let aa;if(E.transposeInfo){var g,h;aa={tileSize:[E.transposeInfo.rows,E.transposeInfo.cols],packetSize:null!=
(g=null==(h=p.keyProperties)?void 0:h._yxs.PacketSize)?g:0}}p.storageInfo=new n({blockWidth:u.size[0],blockHeight:u.size[1],pyramidBlockWidth:u.size[0],pyramidBlockHeight:u.size[1],pyramidResolutions:W,compression:u.format,origin:u.origin,firstPyramidLevel:1,maximumPyramidLevel:c,tileInfo:u,transposeInfo:aa,blockBoundary:M});this._fixGCSShift(p);this._set("rasterInfo",p)}else throw new J("image-server-raster:open","cannot initialize image service");E.capabilities.toLowerCase().includes("tilemap")&&
(g={tileInfo:p.storageInfo.tileInfo,parsedUrl:Y.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new b.TilemapCache({layer:g}))});return function(p){return k.apply(this,arguments)}}();d.fetchRawTile=function(){var k=X._asyncToGenerator(function*(p,u,E,c={}){const {storageInfo:g,extent:h}=this.rasterInfo;var {transposeInfo:r}=g,A=z.isSome(r)&&!!c.transposedVariableName;if(this._slices&&!A&&null==c.sliceId)return null;({data:c}=yield this.request(`${this.url}/tile/${A?
0:g.maximumPyramidLevel-p+this._levelOffset}/${u}/${E}`,{query:this._slices?A?{variable:c.transposedVariableName}:{sliceId:c.sliceId||0}:null,responseType:"array-buffer",signal:c.signal}));if(!c)return null;r=A?r.tileSize:g.tileInfo.size;A=yield this.decodePixelBlock(c,{width:r[0],height:r[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType,returnPixelInterleavedDims:A});r=g.blockBoundary[p];if("jpg"!==g.compression||E>r.minCol&&E<r.maxCol&&u>r.minRow&&u<r.maxRow)return A;const {origin:Q,
blockWidth:C,blockHeight:G}=g,{x:S,y:N}=this.getPyramidPixelSize(p);var q=Math.round((h.xmin-Q.x)/S)%C;p=Math.round((h.xmax-Q.x)/S)%C||C;var H=Math.round((Q.y-h.ymax)/N)%G;c=Math.round((Q.y-h.ymin)/N)%G||G;q=E===r.minCol?q:0;H=u===r.minRow?H:0;v.setValidBoundary(A,{x:q,y:H},{width:(E===r.maxCol?p:C)-q,height:(u===r.maxRow?c:G)-H});return A});return function(p,u,E){return k.apply(this,arguments)}}();d.getSliceIndex=function(k){if(!this._slices||z.isNone(k)||0===k.length)return null;for(let p=0;p<this._slices.length;p++){const u=
this._slices[p].multidimensionalDefinition;if(u.length===k.length&&!u.some(E=>{var c=k.find(h=>E.variableName===h.variableName&&h.dimensionName===E.dimensionName);if(!c)return!0;const g=Array.isArray(E.values[0])?`${E.values[0][0]}-${E.values[0][1]}`:E.values[0];c=Array.isArray(c.values[0])?`${c.values[0][0]}-${c.values[0][1]}`:c.values[0];return g!==c}))return p}return null};d.fetchVariableStatisticsHistograms=function(){var k=X._asyncToGenerator(function*(p,u){var E=this.request(this.url+"/statistics",
{query:{variable:p,f:"json"},signal:u}).then(c=>{var g;return null==(g=c.data)?void 0:g.statistics});p=this.request(this.url+"/histograms",{query:{variable:p,f:"json"},signal:u}).then(c=>{var g;return null==(g=c.data)?void 0:g.histograms});E=yield Promise.all([E,p]);E[0]&&E[0].forEach(c=>{c.avg=c.mean;c.stddev=c.standardDeviation});return{statistics:E[0]||null,histograms:E[1]||null}});return function(p,u){return k.apply(this,arguments)}}();d.computeBestPyramidLevelForLocation=function(){var k=X._asyncToGenerator(function*(p,
u={}){if(!this._tilemapCache)return 0;p=this.identifyPixelLocation(p,0,z.unwrap(u.datumTransformation));if(null===p)return null;let E=0;var {maximumPyramidLevel:c}=this.rasterInfo.storageInfo;c=c-E+this._levelOffset;const g=p.srcLocation;for(;0<=c;){try{if("available"===(yield this._tilemapCache.fetchAvailability(c,p.row,p.col,u)))break}catch{}c--;E++;p=this.identifyPixelLocation(g,E,z.unwrap(u.datumTransformation));if(null===p)return null}return-1===c||null==p?null:E});return function(p){return k.apply(this,
arguments)}}();d._fetchRasterInfo=function(){var k=X._asyncToGenerator(function*(p){var u=this.sourceJSON;if("Map"===this.tileType){p=Math.ceil((u.extent.xmax-u.extent.xmin)/u.pixelSizeX-.1);var E=Math.ceil((u.extent.ymax-u.extent.ymin)/u.pixelSizeY-.1);const c=B.fromJSON(u.spatialReference||u.extent.spatialReference),g=new D({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:c});return new a({width:p,height:E,bandCount:3,extent:K.fromJSON(u.extent),spatialReference:c,pixelSize:g,pixelType:"u8",statistics:null,
keyProperties:{DataType:"processed"}})}({signal:E}=p);p=w.fetchServiceRasterInfo(this.url,this.sourceJSON,{signal:E,query:this.ioConfig.customFetchParameters});u=u.hasMultidimensions?this.request(`${this.url}/slices`,{query:{f:"json"},signal:E}).then(c=>c.data&&c.data.slices).catch(()=>null):null;u=yield Promise.all([p,u]);this._slices=u[1];return u[0]});return function(p){return k.apply(this,arguments)}}();d._fixScaleInServiceInfo=function(){const {sourceJSON:k}=this;k.minScale&&0>k.minScale&&(k.minScale=
0);k.maxScale&&0>k.maxScale&&(k.maxScale=0)};d._fixGCSShift=function(k){const {extent:p,spatialReference:u}=k;0===p.xmin&&360===p.xmax&&u.wkid&&u.isGeographic&&(k.nativeExtent=k.extent,k.transform=new F,k.extent=k.transform.forwardTransform(p))};return e}(l);O.__decorate([R.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);O.__decorate([R.property()],I.prototype,"tileType",void 0);return I=O.__decorate([m.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],
I)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(X,O){function I(z,Y,R,P){if(!z)return null;const {minScale:T,maxScale:x,minLOD:m,maxLOD:a}=Y;if(null!=m&&null!=a)return P&&P.ignoreMinMaxLOD?O.fromJSON(z):O.fromJSON({...z,lods:z.lods.filter(({level:n})=>null!=n&&n>=m&&n<=a)});if(0!==T&&0!==x){const n=T?Math.round(1E4*T)/1E4:Infinity,y=x?Math.round(1E4*x)/1E4:-Infinity;return O.fromJSON({...z,lods:z.lods.filter(t=>{t=Math.round(1E4*t.scale)/1E4;
return t<=n&&t>=y})})}return O.fromJSON(z)}const J={type:O,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:I}}}}};X.readServiceTileInfo=I;X.serviceTileInfoProperty=J;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/byteSizeEstimations ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B){var D;const K=T.getLogger("esri.layers.support.TilemapCache");X.TilemapCache=D=function(f){function e(k){k=f.call(this,k)||this;k._pendingTilemapRequests={};k._availableLevels={};k.levels=5;k.cacheByteSize=2*Y.ByteSizeUnit.MEGABYTES;k.request=J;k._prefetchingEnabled=!0;return k}O._inheritsLoose(e,f);var d=e.prototype;d.initialize=function(){this._tilemapCache=new x(this.cacheByteSize);this.own([n.watch(()=>{const {layer:k}=this;return[null==k?void 0:
k.parsedUrl,null==k?void 0:k.tileServers,null==k?void 0:k.apiKey,null==k?void 0:k.customParameters]},()=>this._initializeTilemapDefinition()),n.watch(()=>{var k,p;return null==(k=this.layer)?void 0:null==(p=k.tileInfo)?void 0:p.lods},k=>this._initializeAvailableLevels(k),n.syncAndInitial)]);this._initializeTilemapDefinition()};d.castLevels=function(k){return 2>=k?(K.error("Minimum levels for Tilemap is 3, but got ",k),3):k};d.fetchTilemap=function(k,p,u,E){if(!this._availableLevels[k])return Promise.reject(new R("tilemap-cache:level-unavailable",
`Level ${k} is unavailable in the service`));const c=this._tmpTilemapDefinition;if(k=this._tilemapFromCache(k,p,u,c))return Promise.resolve(k);const g=E&&E.signal;E={...E,signal:null};return new Promise((h,r)=>{a.onAbort(g,()=>r(a.createAbortError()));const A=B.tilemapDefinitionId(c);let Q=this._pendingTilemapRequests[A];if(!Q){Q=B.Tilemap.fromDefinition(c,E).then(G=>{this._tilemapCache.put(A,G,G.byteSize);return G});const C=()=>delete this._pendingTilemapRequests[A];this._pendingTilemapRequests[A]=
Q;Q.then(C,C)}Q.then(h,r)})};d.getAvailability=function(k,p,u){return this._availableLevels[k]?(k=this._tilemapFromCache(k,p,u,this._tmpTilemapDefinition))?k.getAvailability(p,u):"unknown":"unavailable"};d.fetchAvailability=function(k,p,u,E){return this._availableLevels[k]?this.fetchTilemap(k,p,u,E).catch(c=>c).then(c=>{if(c instanceof B.Tilemap){c=c.getAvailability(p,u);if("unavailable"===c)throw new R("tile-map:tile-unavailable","Tile is not available",{level:k,row:p,col:u});return c}if(a.isAbortError(c))throw c;
return"unknown"}):Promise.reject(new R("tilemap-cache:level-unavailable",`Level ${k} is unavailable in the service`))};d.fetchAvailabilityUpsample=function(k,p,u,E,c){E.level=k;E.row=p;E.col=u;const g=this.layer.tileInfo;g.updateTileInfo(E);const h=this.fetchAvailability(k,p,u,c).catch(r=>{if(a.isAbortError(r))throw r;if(g.upsampleTile(E))return this.fetchAvailabilityUpsample(E.level,E.row,E.col,E);throw r;});this._fetchAvailabilityUpsamplePrefetch(E.id,k,p,u,c,h);return h};d._fetchAvailabilityUpsamplePrefetch=
function(){var k=O._asyncToGenerator(function*(p,u,E,c,g,h){if(this._prefetchingEnabled){var r=`prefetch-${p}`;if(!this.handles.has(r)){var A=new AbortController;h.then(()=>A.abort(),()=>A.abort());var Q=!1;this.handles.add({remove(){Q||(Q=!0,A.abort())}},r);yield y.waitTicks(10,A.signal).catch(()=>{});Q||(Q=!0,this.handles.remove(r));if(!a.isAborted(A))for(p={id:p,level:u,row:E,col:c},g={...g,signal:A.signal},u=this.layer.tileInfo,E=0;D._prefetches.length<D._maxPrefetch&&u.upsampleTile(p);++E){const C=
this.fetchAvailability(p.level,p.row,p.col,g);D._prefetches.push(C);c=()=>{D._prefetches.removeUnordered(C)};C.then(c,c)}}}});return function(p,u,E,c,g,h){return k.apply(this,arguments)}}();d._initializeTilemapDefinition=function(){var k;if(this.layer.parsedUrl){var {parsedUrl:p,apiKey:u,customParameters:E}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:p.path,query:t.objectToQuery({...p.query,...E,token:null!=u?u:null==(k=p.query)?void 0:k.token}),tileServers:this.layer.tileServers,
request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};d._tilemapFromCache=function(k,p,u,E){E.level=k;E.row=p-p%this.size;E.col=u-u%this.size;k=B.tilemapDefinitionId(E);return this._tilemapCache.get(k)};d._initializeAvailableLevels=function(k){this._availableLevels={};k&&k.forEach(p=>this._availableLevels[p.level]=!0)};O._createClass(e,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const k=this;return{get prefetchingEnabled(){return k._prefetchingEnabled},
set prefetchingEnabled(p){k._prefetchingEnabled=p},hasTilemap(p,u,E){return!!k._tilemapFromCache(p,u,E,k._tmpTilemapDefinition)}}}}]);return e}(P.HandleOwnerMixin(z));X.TilemapCache._maxPrefetch=4;X.TilemapCache._prefetches=new m({initialSize:D._maxPrefetch});I.__decorate([b.property({constructOnly:!0,type:Number})],X.TilemapCache.prototype,"levels",void 0);I.__decorate([F.cast("levels")],X.TilemapCache.prototype,"castLevels",null);I.__decorate([b.property({readOnly:!0,type:Number})],X.TilemapCache.prototype,
"size",null);I.__decorate([b.property({constructOnly:!0,type:Number})],X.TilemapCache.prototype,"cacheByteSize",void 0);I.__decorate([b.property({constructOnly:!0})],X.TilemapCache.prototype,"layer",void 0);I.__decorate([b.property({constructOnly:!0})],X.TilemapCache.prototype,"request",void 0);X.TilemapCache=D=I.__decorate([w.subclass("esri.layers.support.TilemapCache")],X.TilemapCache);Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],
function(X){function O(I){return 32+I.length}X.ByteSizeUnit=void 0;(function(I){I[I.KILOBYTES=1024]="KILOBYTES";I[I.MEGABYTES=1048576]="MEGABYTES";I[I.GIGABYTES=1073741824]="GIGABYTES"})(X.ByteSizeUnit||(X.ByteSizeUnit={}));X.estimateAttributesObjectSize=function(I){if(!I)return 0;let J=32;for(const z in I)if(I.hasOwnProperty(z)){const Y=I[z];switch(typeof Y){case "string":J+=O(Y);break;case "number":J+=16;break;case "boolean":J+=4}}return J};X.estimateFixedArraySize=function(I,J){return 32+I.length*
J};X.estimateNumberByteSize=function(){return 16};X.estimateStringByteSize=O;Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error","../../core/lang"],function(X,O,I,J,z){function Y(P){if("vector-tile"===P.service.type)var T=`${P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`;else T=P.service.tileServers,T=`${T&&T.length?
T[P.row%T.length]:P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`;(P=P.service.query)&&(T=`${T}?${P}`);return T}let R=function(){function P(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var T=P.prototype;T.getAvailability=function(x,m){if("unknown"!==this._allAvailability)return this._allAvailability;x=(x-this.location.top)*this.location.width+(m-this.location.left);m=x>>3;const a=this._tileAvailabilityBitSet;return 0>
m||m>a.length?"unknown":a[m]&1<<x%8?"available":"unavailable"};T._updateFromData=function(x){let m=!0,a=!0;const n=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let y=0;for(let t=0;t<x.length;t++){const b=t%8;x[t]?(a=!1,n[y]|=1<<b):m=!1;7===b&&++y}a?this._allAvailability="unavailable":m?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)};P.fromDefinition=function(x,m){const a=x.service.request||O,{row:n,
col:y,width:t,height:b}=x,l={query:{f:"json"}};m=m?{...l,...m}:l;return a(Y(x),m).then(v=>v.data).catch(v=>{if(v&&v.details&&422===v.details.httpStatus)return{location:{top:n,left:y,width:t,height:b},valid:!0,data:I.constant(t*b,0)};throw v;}).then(v=>{if(v.location&&(v.location.top!==n||v.location.left!==y||v.location.width!==t||v.location.height!==b))throw new J("tilemap:location-mismatch","Tilemap response for different location than requested",{response:v,definition:{top:n,left:y,width:t,height:b}});
return P.fromJSON(v)})};P.fromJSON=function(x){P._validateJSON(x);const m=new P;m.location=Object.freeze(z.clone(x.location));m._updateFromData(x.data);return Object.freeze(m)};P._validateJSON=function(x){if(!x||!x.location)throw new J("tilemap:missing-location","Location missing from tilemap response");if(!1===x.valid)throw new J("tilemap:invalid","Tilemap response was marked as invalid");if(!x.data)throw new J("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(x.data))throw new J("tilemap:data-mismatch",
"Data must be an array of numbers");if(x.data.length!==x.location.width*x.location.height)throw new J("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return P}();X.Tilemap=R;X.tilemapDefinitionId=function(P){return`${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),
function(X,O,I,J,z,Y,R,P,T){function x(a,n,y){return m.apply(this,arguments)}function m(){m=O._asyncToGenerator(function*(a,n,y){var t,b,l,v,F,w,B;a=P.parseUrl(a);const {renderingRule:D,sourceJSON:K}=n||{};n=D?JSON.stringify(D.rasterFunctionDefinition||D):null;n=P.encode({...a.query,renderingRule:n,f:"json"});n=P.asValidOptions(n,y);a=a.path;y=K||(yield I(a,n).then(g=>g.data));var f=y.hasRasterAttributeTable?I(`${a}/rasterAttributeTable`,n):null,e=y.hasColormap?I(`${a}/colormap`,n):null,d=y.hasHistograms?
I(`${a}/histograms`,n):null,k=10.3<=y.currentVersion?I(`${a}/keyProperties`,n):null;a=y.hasMultidimensions?I(`${a}/multidimensionalInfo`,n):null;n=yield Promise.allSettled([f,e,d,k,a]);a=null;if(y.minValues&&y.minValues.length===y.bandCount)for(a=[],f=0;f<y.minValues.length;f++)a.push({min:y.minValues[f],max:y.maxValues[f],avg:y.meanValues[f],stddev:y.stdvValues[f]});e=J.fromJSON(y.extent);f=Math.ceil(e.width/y.pixelSizeX-.1);e=Math.ceil(e.height/y.pixelSizeY-.1);d=Y.fromJSON(y.spatialReference||
y.extent.spatialReference);k="fulfilled"===n[0].status?n[0].value?T.fromJSON(n[0].value.data):null:null;const p="fulfilled"===n[1].status?null==(t=n[1].value)?void 0:t.data.colormap:null;t="fulfilled"===n[2].status?null==(b=n[2].value)?void 0:b.data.histograms:null;b="fulfilled"===n[3].status?null!=(l=null==(v=n[3].value)?void 0:v.data)?l:{}:{};l="fulfilled"===n[4].status?null==(F=n[4].value)?void 0:F.data.multidimensionalInfo:null;null!=l&&null!=(w=l.variables)&&w.length&&l.variables.forEach(g=>
{var h;null!=(h=g.statistics)&&h.length&&g.statistics.forEach(r=>{r.avg=r.mean;r.stddev=r.standardDeviation})});const {defaultVariable:u,serviceDataType:E}=y;u&&u!==b.DefaultVariable&&(b.DefaultVariable=u);E&&E.includes("esriImageServiceDataTypeVector")&&!E.includes(b.DataType)&&(b.DataType=E.replace("esriImageServiceDataType",""));let c=y.noDataValue;null!=(B=y.noDataValues)&&B.length&&y.noDataValues.some(g=>g!==c)&&(c=y.noDataValues);return new R({width:f,height:e,bandCount:y.bandCount,extent:J.fromJSON(y.extent),
spatialReference:d,pixelSize:new z({x:y.pixelSizeX,y:y.pixelSizeY,spatialReference:d}),pixelType:y.pixelType.toLowerCase(),statistics:a,attributeTable:k,colormap:p,histograms:t,keyProperties:b,noDataValue:c,multidimensionalInfo:l})});return m.apply(this,arguments)}X.fetchServiceRasterInfo=function(a,n,y){return x(a,{sourceJSON:n},y)};X.generateRasterInfo=function(a,n,y){return x(a,{renderingRule:n},y)};Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ./xmlUtilities ../rasterFormats/utils ../rasterFunctions/stretchUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B){const D=new Map;D.set("Int8","s8");D.set("UInt8","u8");D.set("Int16","s16");D.set("UInt16","u16");D.set("Int32","s32");D.set("UInt32","u32");D.set("Float32","f32");D.set("Float64","f32");D.set("Double64","f32");const K=new Map;K.set("none",{blobExtension:".til",isOneSegment:!0,decoderFormat:"bip"});K.set("lerc",{blobExtension:".lrc",isOneSegment:!1,decoderFormat:"lerc"});K.set("deflate",{blobExtension:".pzp",isOneSegment:!0,decoderFormat:"deflate"});
K.set("jpeg",{blobExtension:".pjg",isOneSegment:!0,decoderFormat:"jpg"});I=function(f){function e(){var k=f.apply(this,arguments)||this;k._files=null;k._storageIndex=null;k.datasetFormat="MRF";return k}X._inheritsLoose(e,f);var d=e.prototype;d.open=function(){var k=X._asyncToGenerator(function*(p){var u;yield this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var E=p?z.unwrap(p.signal):null,c=yield this.request(this.url,{responseType:"xml",signal:E});const {rasterInfo:g,files:h}=
this._parseHeader(c.data);if(-1===(null==(u=this.ioConfig.skipExtensions)?void 0:u.indexOf("aux.xml"))&&(p=yield this._fetchAuxiliaryData(p),null!=p)){var r;g.statistics=null!=(r=p.statistics)?r:g.statistics;(g.histograms=p.histograms)&&z.isNone(g.statistics)&&(g.statistics=v.estimateStatisticsFromHistograms(p.histograms))}this._set("rasterInfo",g);this._files=h;E=yield this.request(h.index,{responseType:"array-buffer",signal:E});this._storageIndex=this._parseIndex(E.data);const {blockWidth:A,blockHeight:Q}=
this.rasterInfo.storageInfo;E=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:C,height:G}=this.rasterInfo;r=[];p=this._getBandSegmentCount();u=0;for(c=-1;u<this._storageIndex.length;){c++;const S=Math.ceil(C/A/E**c)-1,N=Math.ceil(G/Q/E**c)-1;u+=(S+1)*(N+1)*p*4;r.push({maxRow:N,maxCol:S,minCol:0,minRow:0})}this.rasterInfo.storageInfo.blockBoundary=r;0<c&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=c);this.updateTileInfo()});return function(p){return k.apply(this,
arguments)}}();d.fetchRawTile=function(){var k=X._asyncToGenerator(function*(p,u,E,c={}){const {blockWidth:g,blockHeight:h,blockBoundary:r}=this.rasterInfo.storageInfo;var A=r[p];if(!A||A.maxRow<u||A.maxCol<E||A.minRow>u||A.minCol>E)return null;const {bandCount:Q,pixelType:C}=this.rasterInfo,{ranges:G,actualTileWidth:S,actualTileHeight:N}=this._getTileLocation(p,u,E);if(!G||0===G.length)return null;if(0===G[0].from&&0===G[0].to)return p=new Uint8Array(g*h),new m({width:g,height:h,pixels:null,mask:p,
validPixelCount:0});({bandIds:u}=this.ioConfig);E=this._getBandSegmentCount();A=[];for(p=p=0;p<E;p++)(!u||-1<u.indexOf[p])&&A.push(this.request(this._files.data,{range:{from:G[p].from,to:G[p].to},responseType:"array-buffer",signal:c.signal}));c=yield Promise.all(A);p=c.map(H=>H.data.byteLength).reduce((H,M)=>H+M);A=new Uint8Array(p);let q=0;for(p=0;p<E;p++)A.set(new Uint8Array(c[p].data),q),q+=c[p].data.byteLength;p=K.get(this.rasterInfo.storageInfo.compression).decoderFormat;u=yield this.decodePixelBlock(A.buffer,
{width:g,height:h,format:p,planes:(null==u?void 0:u.length)||Q,pixelType:C});if(z.isSome(this.rasterInfo.noDataValue)&&"lerc"!==p&&!u.mask&&(c=this.rasterInfo.noDataValue[0],null!=c)){E=u.width*u.height;A=new Uint8Array(E);if(1E24<Math.abs(c))for(p=0;p<E;p++)1E-6<Math.abs((u.pixels[0][p]-c)/c)&&(A[p]=1);else for(p=0;p<E;p++)u.pixels[0][p]!==c&&(A[p]=1);u.mask=A}E=c=0;if(S!==g||N!==h)if(A=u.mask)for(p=0;p<h;p++)for(E=p*g,c=p<N?S:0;c<g;c++)A[E+c]=0;else for(A=new Uint8Array(g*h),u.mask=A,p=0;p<N;p++)for(E=
p*g,c=0;c<S;c++)A[E+c]=1;return u});return function(p,u,E){return k.apply(this,arguments)}}();d._parseIndex=function(k){if(0<k.byteLength%16)throw"invalid array buffer must be multiples of 16";let p,u,E,c,g;if(l.isPlatformLittleEndian){p=new Uint8Array(k);E=new ArrayBuffer(k.byteLength);u=new Uint8Array(E);for(c=0;c<k.byteLength/4;c++)for(g=0;4>g;g++)u[4*c+g]=p[4*c+3-g];k=new Uint32Array(E)}else k=new Uint32Array(k);return k};d._getBandSegmentCount=function(){return K.get(this.rasterInfo.storageInfo.compression).isOneSegment?
1:this.rasterInfo.bandCount};d._getTileLocation=function(k,p,u){const {blockWidth:E,blockHeight:c,pyramidScalingFactor:g}=this.rasterInfo.storageInfo,{width:h,height:r}=this.rasterInfo,A=this._getBandSegmentCount();let Q,C;var G,S=0;let N=0;for(G=0;G<k;G++)N=g**G,Q=Math.ceil(h/E/N),C=Math.ceil(r/c/N),S+=Q*C;N=g**k;Q=Math.ceil(h/E/N);C=Math.ceil(r/c/N);S=4*(S+(p*Q+u))*A;k=this._storageIndex.subarray(S,S+4*A);S=G=0;const q=[];for(let H=0;H<A;H++)G=k[4*H]*2**32+k[4*H+1],S=G+k[4*H+2]*2**32+k[4*H+3],q.push({from:G,
to:S});return{ranges:q,actualTileWidth:u<Q-1?E:Math.ceil(h/N)-E*(Q-1),actualTileHeight:p<C-1?c:Math.ceil(r/N)-c*(C-1)}};d._parseHeader=function(k){var p=b.getElement(k,"MRF_META/Raster");if(!p)throw new J("mrf:open","not a valid MRF format");var u=b.getElement(p,"Size"),E=parseInt(u.getAttribute("x"),10),c=parseInt(u.getAttribute("y"),10);const g=parseInt(u.getAttribute("c"),10);u=(b.getElementValue(p,"Compression")||"none").toLowerCase();if(!K.has(u))throw new J("mrf:open","currently does not support compression "+
u);var h=b.getElementValue(p,"DataType")||"UInt8";const r=D.get(h);if(null==r)throw new J("mrf:open","currently does not support pixel type "+h);var A=b.getElement(p,"PageSize");h=parseInt(A.getAttribute("x"),10);A=parseInt(A.getAttribute("y"),10);p=b.getElement(p,"DataValues");let Q;p&&(p=p.getAttribute("NoData"),null!=p&&(Q=p.trim().split(" ").map(H=>parseFloat(H))));if(b.getElement(k,"MRF_META/CachedSource"))throw new J("mrf:open","currently does not support MRF referencing other data files");
var C=b.getElement(k,"MRF_META/GeoTags"),G=b.getElement(C,"BoundingBox");p=!1;if(null!=G){var S=parseFloat(G.getAttribute("minx"));var N=parseFloat(G.getAttribute("miny"));const H=parseFloat(G.getAttribute("maxx"));G=parseFloat(G.getAttribute("maxy"));C=b.getElementValue(C,"Projection")||"";var q;"LOCAL_CS[]"!==C?C.toLowerCase().startsWith("epsg:")?(C=Number(C.slice(5)),isNaN(C)||0===C||(q=new F({wkid:C}))):q=t.parseSpatialReference(C):(p=!0,q=new F({wkid:3857}));S=new w(S,N,H,G);S.spatialReference=
q}else p=!0,S=new w({xmin:-.5,ymin:.5-c,xmax:E-.5,ymax:.5,spatialReference:new F({wkid:3857})});q=b.getElement(k,"MRF_META/Rsets");N=parseInt(q&&q.getAttribute("scale")||"2",10);q=S.spatialReference;h=new n({origin:new B({x:S.xmin,y:S.ymax,spatialReference:q}),blockWidth:h,blockHeight:A,pyramidBlockWidth:h,pyramidBlockHeight:A,compression:u,pyramidScalingFactor:N});A=new B({x:S.width/E,y:S.height/c,spatialReference:q});E=new a({width:E,height:c,extent:S,isPseudoSpatialReference:p,spatialReference:q,
bandCount:g,pixelType:r,pixelSize:A,noDataValue:Q,storageInfo:h});c=b.getElementValue(k,"datafile");k=b.getElementValue(k,"IndexFile");k={mrf:this.url,index:k||this.url.replace(".mrf",".idx"),data:c||this.url.replace(".mrf",K.get(u).blobExtension)};return{rasterInfo:E,files:k}};d._fetchAuxiliaryData=function(){var k=X._asyncToGenerator(function*(p){try{const {data:u}=yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==p?void 0:p.signal});return t.parsePAMInfo(u)}catch{return null}});
return function(p){return k.apply(this,arguments)}}();return e}(y);O.__decorate([Y.property()],I.prototype,"_files",void 0);O.__decorate([Y.property()],I.prototype,"_storageIndex",void 0);O.__decorate([Y.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);return I=O.__decorate([x.subclass("esri.layers.support.rasterIO.MRFRaster")],I)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ../rasterFormats/TiffDecoder ../rasterFormats/TiffTags ../rasterFunctions/stretchUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(X,O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B){const D=(K,f)=>(K=K.get(f))&&K.values[0];I=function(K){function f(){var d=K.apply(this,arguments)||this;d._files=null;d._headerInfo=null;d._bufferSize=1048576;d.datasetFormat="TIFF";return d}X._inheritsLoose(f,K);var e=f.prototype;e.open=function(){var d=X._asyncToGenerator(function*(k){var p,u,E;yield this.init();var c=k?z.unwrap(k.signal):null,{data:g}=yield this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:"array-buffer",
signal:c});if(!g)throw new J("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:h,firstIFD:r,isBigTiff:A}=t.parseSignature(g),Q=[];yield this._readIFDs(Q,g,h,r,0,A?8:4,c);c=t.getImageInfo(Q);const {width:C,height:G,tileWidth:S,tileHeight:N,planes:q,pixelType:H,compression:M,firstPyramidLevel:W,maximumPyramidLevel:aa,pyramidBlockWidth:V,pyramidBlockHeight:Z,tileBoundary:L,affine:U,metadata:ca}=c;g=(null==(p=c.extent.spatialReference)?
void 0:p.wkt)||(null==(u=c.extent.spatialReference)?void 0:u.wkid);p=y.parseSpatialReference(g);g=!1;null==p&&(g=!0,p=new F({wkid:3857}));var ba=(u=new w({...c.extent,spatialReference:p}),new B({x:u.xmin,y:u.ymax,spatialReference:p}));ba=new a({blockWidth:S,blockHeight:N,pyramidBlockWidth:V,pyramidBlockHeight:Z,compression:M,origin:ba,firstPyramidLevel:W,maximumPyramidLevel:aa,blockBoundary:L});const da=new B({x:(u.xmax-u.xmin)/C,y:(u.ymax-u.ymin)/G,spatialReference:p});g=new m({width:C,height:G,
bandCount:q,pixelType:H,compression:M,pixelSize:da,storageInfo:ba,spatialReference:p,isPseudoSpatialReference:g,keyProperties:ca?{BandProperties:ca.bandProperties,DataType:ca.dataType}:{},extent:u,statistics:ca?ca.statistics:null});null!=U&&U.length&&(g.nativeExtent=new w({xmin:-.5,ymin:.5-G,xmax:C-.5,ymax:.5,spatialReference:p}),g.transform=new v({polynomialOrder:1,forwardCoefficients:[U[2]+U[0]/2,U[5]-U[3]/2,U[0],U[3],-U[1],-U[4]]}),g.extent=g.transform.forwardTransform(g.nativeExtent),g.pixelSize=
new B({x:(u.xmax-u.xmin)/C,y:(u.ymax-u.ymin)/G,spatialReference:p}),ba.origin.x=-.5,ba.origin.y=.5);if(null==(E=this.ioConfig.skipExtensions)||!E.includes("aux.xml"))if(k=yield this._fetchAuxiliaryData(k),null!=k){var ea;g.statistics=null!=(ea=k.statistics)?ea:g.statistics;(g.histograms=k.histograms)&&z.isNone(g.statistics)&&(g.statistics=l.estimateStatisticsFromHistograms(k.histograms));k.transform&&!U&&(g.transform=k.transform,g.nativeExtent=g.extent,ea=g.transform.forwardTransform(g.nativeExtent),
g.pixelSize=new B({x:(ea.xmax-ea.xmin)/C,y:(ea.ymax-ea.ymin)/G,spatialReference:p}),g.extent=ea);g.spatialReference||(g.spatialReference=k.spatialReference)}this._set("rasterInfo",g);this._headerInfo={littleEndian:h,isBigTiff:A,ifds:Q,...c};if(!this._headerInfo.isSupported)throw new J("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()});return function(k){return d.apply(this,arguments)}}();e.fetchRawTile=function(){var d=X._asyncToGenerator(function*(k,
p,u,E={}){var c;if(null==(c=this._headerInfo)||!c.isSupported||this.isBlockOutside(k,p,u))return null;p=this._getTileLocation(k,p,u);if(!p)return null;const {ranges:g,actualTileWidth:h,actualTileHeight:r,ifd:A}=p;p=g.map(S=>this.request(this.url,{range:S,responseType:"array-buffer",signal:E.signal}));p=yield Promise.all(p);u=p.map(S=>S.data.byteLength).reduce((S,N)=>S+N);u=1===p.length?p[0].data:new ArrayBuffer(u);c=[0];var Q=[0];if(1<p.length){const S=new Uint8Array(u);for(let N=0,q=0;N<p.length;N++){const H=
p[N].data;S.set(new Uint8Array(H),q);c[N]=q;q+=H.byteLength;Q[N]=H.byteLength}}const {blockWidth:C,blockHeight:G}=this.getBlockWidthHeight(k);k=yield this.decodePixelBlock(u,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:A,offsets:c,sizes:Q},width:C,height:G,planes:null,pixelType:null});if(h!==C||r!==G)if(Q=k.mask)for(p=0;p<G;p++)for(c=p*C,u=p<r?h:0;u<C;u++)Q[c+u]=0;else for(Q=new Uint8Array(C*G),k.mask=Q,p=0;p<r;p++)for(c=p*C,u=0;u<h;u++)Q[c+u]=1;return k});return function(k,p,u){return d.apply(this,
arguments)}}();e._readIFDs=function(){var d=X._asyncToGenerator(function*(k,p,u,E,c,g=4,h){if(!E)return null;if(E>=p.byteLength||0>E)p=(yield this.request(this.url,{range:{from:E+c,to:E+c+this._bufferSize},responseType:"array-buffer",signal:h})).data,c=E+c,E=0;E=yield this._readIFD(p,u,E,c,b.TIFF_TAGS,g,h);k.push(E.ifd);if(!E.nextIFD)return null;yield this._readIFDs(k,p,u,E.nextIFD-c,c,g,h)});return function(k,p,u,E,c){return d.apply(this,arguments)}}();e._readIFD=function(){var d=X._asyncToGenerator(function*(k,
p,u,E,c=b.TIFF_TAGS,g=4,h){if(!k)return null;u=t.parseIFD(k,p,u,E,c,g);if(u.success){const r=[];u.ifd.forEach(A=>{A.values||r.push(A)});0<r.length&&(g=r.map(A=>A.offlineOffsetSize),c=Math.min.apply(null,g.map(A=>A[0])),Math.min.apply(null,g.map(A=>A[0]+A[1]))-c<=this._bufferSize&&({data:g}=yield this.request(this.url,{range:{from:c,to:c+this._bufferSize},responseType:"array-buffer",signal:h}),k=g,E=c,r.forEach(A=>t.parseFieldValues(k,p,A,E))));u.ifd.has("GEOKEYDIRECTORY")&&(c=u.ifd.get("GEOKEYDIRECTORY"),
(g=c.values)&&4<g.length&&(g=g[0]+"."+g[1]+"."+g[2],h=yield this._readIFD(k,p,c.valueOffset+6-E,E,b.GEO_KEYS,2,h),c.data=h.ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[g]})));return u}if(u.requiredBufferSize&&u.requiredBufferSize!==k.byteLength)return k=(yield this.request(this.url,{range:{from:E,to:E+u.requiredBufferSize+4},responseType:"array-buffer",signal:h})).data,k.byteLength<u.requiredBufferSize?null:this._readIFD(k,p,0,E,b.TIFF_TAGS,4,h)});return function(k,
p,u,E){return d.apply(this,arguments)}}();e._getTileLocation=function(d,k,p){const {firstPyramidLevel:u,blockBoundary:E}=this.rasterInfo.storageInfo;var c=0===d?0:d-(u-1);d=this._headerInfo.ifds[c];if(!d)return null;var g=t.isBSQConfig(d,this._headerInfo);var h=(h=d.get("TILEOFFSETS"))&&h.values;if(void 0===h)return null;var r=(r=d.get("TILEBYTECOUNTS"))&&r.values;const {minRow:A,minCol:Q,maxRow:C,maxCol:G}=E[c];if(k>C||p>G||k<A||p<Q)return null;c=D(d,"IMAGEWIDTH");const S=D(d,"IMAGELENGTH"),N=D(d,
"TILEWIDTH"),q=D(d,"TILELENGTH"),H=g?this.rasterInfo.bandCount:1,M=H*k*(G+1)+p,W=[{from:h[M],to:h[M+H-1]+r[M+H-1]-1}];if(g){g=!0;for(let aa=0;aa<H;aa++)if(h[M+aa]+r[M+aa]!==h[M+aa+1]){g=!1;break}if(!g)for(g=0;g<H;g++)W[g]={from:h[M+g],to:h[M+g]+r[M+g]-1}}r=r[M];return null==h[M]||null==r?null:{ranges:W,ifd:d,actualTileWidth:p===G?c%N:N,actualTileHeight:k===C?S%q:q}};e._fetchAuxiliaryData=function(){var d=X._asyncToGenerator(function*(k){try{const {data:p}=yield this.request(this.url+".aux.xml",{responseType:"xml",
signal:null==k?void 0:k.signal});return y.parsePAMInfo(p)}catch{return null}});return function(k){return d.apply(this,arguments)}}();return f}(n);O.__decorate([Y.property()],I.prototype,"_files",void 0);O.__decorate([Y.property()],I.prototype,"_headerInfo",void 0);O.__decorate([Y.property()],I.prototype,"_bufferSize",void 0);O.__decorate([Y.property({type:String,json:{write:!0}})],I.prototype,"datasetFormat",void 0);return I=O.__decorate([x.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
I)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../rasterRenderers ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/Field ./support/rasterEnums ./support/rasterDatasets/RasterFactory ../support/popupUtils".split(" "),function(X,
O,I,J,z,Y,R,P,T,x,m,a,n,y,t,b,l,v,F,w,B,D,K,f,e,d,k,p,u,E){R=function(c){function g(...r){r=c.call(this,...r)||this;r.bandIds=null;r.interpolation=null;r.legendEnabled=!0;r.isReference=null;r.listMode="show";r.sourceJSON=null;r.version=null;r.title=null;r.type="imagery-tile";r.operationalLayerType="ArcGISTiledImageServiceLayer";r.popupEnabled=!0;r.popupTemplate=null;r.fields=null;return r}X._inheritsLoose(g,c);var h=g.prototype;h.normalizeCtorArgs=function(r,A){return"string"===typeof r?{url:r,...A}:
r};h.load=function(r){const A=Y.isSome(r)?r.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},r).catch(P.throwIfAbortError).then(()=>this._openRaster(A)));return Promise.resolve(this)};h.readRenderer=function(r,A,Q){r=J.read(A&&A.layerDefinition&&A.layerDefinition.drawingInfo&&A.layerDefinition.drawingInfo.renderer,Q)||void 0;if(null!=r)return r};h.createPopupTemplate=function(r){return E.createPopupTemplate({fields:this.rasterFields,title:this.title},r)};
h.write=function(r,A){const {raster:Q}=this;if(this.loaded?"RasterTileServer"===Q.datasetFormat&&("Raster"===Q.tileType||"Map"===Q.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return c.prototype.write.call(this,r,A);A&&A.messages&&A.messages.push(new z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${A.origin}/${A.layerContainerType||"operational-layers"}`}'`,{layer:this}));return null};h._openRaster=
function(){var r=X._asyncToGenerator(function*(A){this.raster?(this.raster.rasterInfo||(yield this.raster.open()),this.url=this.raster.url):this.raster=yield u.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters},signal:A});({rasterInfo:A}=this.raster);if(!A)throw new z("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&this.read("Map"===
this.raster.tileType&&null!=this.sourceJSON.minLOD&&null!=this.sourceJSON.maxLOD?this.sourceJSON:{...this.sourceJSON,minScale:0,maxScale:0},{origin:"service"});null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings();this.own(T.watch(()=>this.customParameters,Q=>{this.raster.ioConfig.customFetchParameters=Q}))});return function(A){return r.apply(this,arguments)}}();X._createClass(g,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"rasterFields",get:function(){var r,A;let Q=[new k({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const C=null==(r=this.rasterInfo)?void 0:null==(A=r.attributeTable)?void 0:A.fields;C&&(r=C.filter(S=>"oid"!==S.type&&"value"!==S.name.toLowerCase()).map(S=>{const N=S.clone();N.name="Raster."+S.name;return N}),Q=Q.concat(r));r=this.rasterInfo.dataType;if(("vector-magdir"===r||"vector-uv"===r)&&Y.isSome(this.rasterInfo.multidimensionalInfo)){var G;
r=null==(G=this.rasterInfo.multidimensionalInfo.variables[0].unit)?void 0:G.trim();Q.push(new k({name:"Raster.Magnitude",alias:"Magnitude"+(r?` (${r})`:""),domain:null,editable:!1,type:"double"}));Q.push(new k({name:"Raster.Direction",alias:"Direction (\u00b0)",domain:null,editable:!1,type:"double"}))}return Q}},{key:"renderer",set:function(r){this._set("renderer",r);this.updateRenderer()}}]);return g}(v.BlendLayer(f.ScaleRangeLayer(B.OperationalLayer(D.PortalLayer(F.CustomParametersMixin(w.ImageryTileMixin(e.TemporalLayer(K.RefreshableLayer(R.MultiOriginJSONMixin(l))))))))));
O.__decorate([x.property({type:[n.Integer],json:{write:{overridePolicy(){var c;return{enabled:!this.loaded||"Raster"===this.raster.tileType||"0,1,2"!==(null==(c=this.bandIds)?void 0:c.join(","))}}}}})],R.prototype,"bandIds",void 0);O.__decorate([x.property({json:{write:{overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType||"bilinear"!==this.interpolation}}}}}),y.enumeration(p.interpolationKebab)],R.prototype,"interpolation",void 0);O.__decorate([x.property({json:{write:!0}})],
R.prototype,"multidimensionalDefinition",void 0);O.__decorate([x.property(d.legendEnabled)],R.prototype,"legendEnabled",void 0);O.__decorate([x.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,"isReference",void 0);O.__decorate([x.property({type:["show","hide"]})],R.prototype,"listMode",void 0);O.__decorate([x.property({json:{read:!0,write:!0}})],R.prototype,"blendMode",void 0);O.__decorate([x.property()],R.prototype,"sourceJSON",void 0);O.__decorate([x.property({readOnly:!0,
json:{origins:{service:{read:{source:"currentVersion"}}}}})],R.prototype,"version",void 0);O.__decorate([x.property()],R.prototype,"title",void 0);O.__decorate([x.property({readOnly:!0,json:{read:!1}})],R.prototype,"type",void 0);O.__decorate([x.property({type:["ArcGISTiledImageServiceLayer"]})],R.prototype,"operationalLayerType",void 0);O.__decorate([x.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(c,g){return!g.disablePopup}},write:{target:"disablePopup",overridePolicy(){return{enabled:!this.loaded||
"Raster"===this.raster.tileType}},writer(c,g,h){g[h]=!c}}}})],R.prototype,"popupEnabled",void 0);O.__decorate([x.property({type:I,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType}}}}})],R.prototype,"popupTemplate",void 0);O.__decorate([x.property({readOnly:!0})],R.prototype,"defaultPopupTemplate",null);O.__decorate([x.property({readOnly:!0,type:[k]})],R.prototype,"fields",void 0);O.__decorate([x.property({readOnly:!0,
type:[k]})],R.prototype,"rasterFields",null);O.__decorate([x.property({types:J.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(){var c;const g="raster-stretch"===(null==(c=this.renderer)?void 0:c.type)&&"none"===this.renderer.stretchType&&!this.renderer.useGamma;return{enabled:!this.loaded||"Raster"===this.raster.tileType||!g}}},origins:{"web-scene":{types:J.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(c){return{enabled:c&&
"vector-field"!==c.type&&"flow"!==c.type}}}}}}})],R.prototype,"renderer",null);O.__decorate([t.reader("renderer")],R.prototype,"readRenderer",null);return R=O.__decorate([b.subclass("esri.layers.ImageryTileLayer")],R)});