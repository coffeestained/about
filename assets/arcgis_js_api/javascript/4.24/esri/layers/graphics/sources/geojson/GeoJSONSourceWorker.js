// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(h,d,ca,Z,v,y,B,r){function t(g,D){return g?D?4:3:D?3:2}function u(g,D,X,Y){if(g){if(X)return D&&Y?b:La;if(D&&Y)return Za}else if(D&&Y)return La;return Ja}function z({scale:g,translate:D},X){return Math.round((X-D[0])/g[0])}function O({scale:g,translate:D},
X){return Math.round((D[1]-X)/g[1])}function Q({scale:g,translate:D},X){return X*g[0]+D[0]}function n({scale:g,translate:D},X){return D[1]-X*g[1]}function L(g){g=g.coords;return{x:g[0],y:g[1]}}function c(g,D){g.coords[0]=D.x;g.coords[1]=D.y;return g}function k(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function M(g,D){g.coords[0]=D.x;g.coords[1]=D.y;g.coords[2]=D.z;return g}function E(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function l(g,D){g.coords[0]=D.x;g.coords[1]=D.y;g.coords[2]=D.m;return g}
function q(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function m(g,D){g.coords[0]=D.x;g.coords[1]=D.y;g.coords[2]=D.z;g.coords[3]=D.m;return g}function x(g,D){return g&&D?m:g?M:D?l:c}function N(g,D,X,Y,ka){X=x(X,Y);for(const ia of D){const {geometry:H,attributes:P}=ia;let da;H&&(da=X(new r,H));g.push(new y.OptimizedFeature(da,P,null,P[ka]))}return g}function K(g,D,X,Y){for(const ka of D){const {geometry:ia,attributes:H}=ka;let P;ia&&(P=ha(ia,X,Y));g.push({attributes:H,geometry:P})}return g}
function ha(g,D,X){if(Z.isNone(g))return null;const Y=t(D,X),ka=[];for(let ia=0;ia<g.coords.length;ia+=Y){const H=[];for(let P=0;P<Y;P++)H.push(g.coords[ia+P]);ka.push(H)}return D?X?{points:ka,hasZ:D,hasM:X}:{points:ka,hasZ:D}:X?{points:ka,hasM:X}:{points:ka}}function F(g,D,X,Y,ka){X=t(X,Y);for(const ia of D){D=ia.geometry;Y=ia.attributes;let H;D&&(H=G(new r,D,X));g.push(new y.OptimizedFeature(H,Y,null,Y[ka]))}return g}function G(g,D,X=t(D.hasZ,D.hasM)){g.lengths[0]=D.points.length;const Y=g.coords;
let ka=0;for(const ia of D.points)for(D=0;D<X;D++)Y[ka++]=ia[D];return g}function U(g,D,X){if(!g)return null;const Y=t(D,X),{coords:ka,lengths:ia}=g;g=[];let H=0;for(const P of ia){const da=[];for(let ra=0;ra<P;ra++){const sa=[];for(let xa=0;xa<Y;xa++)sa.push(ka[H++]);da.push(sa)}g.push(da)}return D?X?{paths:g,hasZ:D,hasM:X}:{paths:g,hasZ:D}:X?{paths:g,hasM:X}:{paths:g}}function T(g,D,X,Y,ka){X=t(X,Y);for(const ia of D){D=ia.geometry;Y=ia.attributes;let H;D&&(H=I(new r,D,X));g.push(new y.OptimizedFeature(H,
Y,null,Y[ka]))}return g}function I(g,D,X=t(D.hasZ,D.hasM)){const {lengths:Y,coords:ka}=g;let ia=0;for(const H of D.paths){for(const P of H)for(D=0;D<X;D++)ka[ia++]=P[D];Y.push(H.length)}return g}function A(g,D,X){if(!g)return null;const Y=t(D,X),{coords:ka,lengths:ia}=g;g=[];let H=0;for(const P of ia){const da=[];for(let ra=0;ra<P;ra++){const sa=[];for(let xa=0;xa<Y;xa++)sa.push(ka[H++]);da.push(sa)}g.push(da)}return D?X?{rings:g,hasZ:D,hasM:X}:{rings:g,hasZ:D}:X?{rings:g,hasM:X}:{rings:g}}function e(g,
D,X,Y,ka){for(const ia of D){D=ia.geometry;const H=ia.centroid,P=ia.attributes;let da;D&&(da=J(new r,D,X,Y));Z.isSome(H)?g.push(new y.OptimizedFeature(da,P,c(new r,H),P[ka])):g.push(new y.OptimizedFeature(da,P,null,P[ka]))}return g}function J(g,D,X=D.hasZ,Y=D.hasM){W(g,D.rings,X,Y);return g}function W(g,D,X,Y){X=t(X,Y);const {lengths:ka,coords:ia}=g;Y=0;ka.length=ia.length=0;for(const H of D){for(const P of H)for(D=0;D<X;D++)ia[Y++]=P[D];ka.push(H.length)}return g}function R(g,D,X,Y,ka,ia){g.length=
0;if(!X){for(const H of D)g.push(new y.OptimizedFeature(null,H.attributes,null,H.attributes[ia]));return g}switch(X){case "esriGeometryPoint":return N(g,D,Y,ka,ia);case "esriGeometryMultipoint":return F(g,D,Y,ka,ia);case "esriGeometryPolyline":return T(g,D,Y,ka,ia);case "esriGeometryPolygon":return e(g,D,Y,ka,ia);default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`)),g.length=0}return g}function ja(g,D,X,Y){g=g&&("coords"in g?g:g.geometry);if(Z.isNone(g))return null;
switch(D){case "esriGeometryPoint":return D=L,X&&Y?D=q:X?D=k:Y&&(D=E),D(g);case "esriGeometryMultipoint":return ha(g,X,Y);case "esriGeometryPolyline":return U(g,X,Y);case "esriGeometryPolygon":return A(g,X,Y);default:wa.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${D}'`))}}function ma(g,D,X,Y,ka){g.length=0;if(Z.isNone(X)){for(const P of D)g.push({attributes:P.attributes});return g}switch(X){case "esriGeometryPoint":var ia=L;Y&&ka?ia=q:Y?ia=k:ka&&(ia=E);
for(var H of D){const {geometry:P,attributes:da}=H;Y=Z.isSome(P)?ia(P):null;g.push({attributes:da,geometry:Y})}break;case "esriGeometryMultipoint":return K(g,D,Y,ka);case "esriGeometryPolyline":for(const P of D){const {geometry:da,attributes:ra}=P;let sa;Z.isSome(da)&&(sa=U(da,Y,ka));g.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(ia of D){const {geometry:P,attributes:da,centroid:ra}=ia;let sa;Z.isSome(P)&&(sa=A(P,Y,ka));Z.isSome(ra)?(H=L(ra),g.push({attributes:da,centroid:H,
geometry:sa})):g.push({attributes:da,geometry:sa})}break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`))}return g}function S(g,D,X,Y,ka,ia,H=X,P=Y){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(Z.isNone(D)||!D.coords.length)return null;ka=Ma[ka];const {coords:da,lengths:ra}=D;D=t(X,Y);const sa=t(X&&H,Y&&P);X=u(X,Y,H,P);if(!ra.length)return X(g.coords,da,0,0,z(ia,da[0]),O(ia,da[1])),g.lengths.length&&(g.lengths.length=
0),g.coords.length=D,g;let xa,Aa=0,Ba,Ia=0;for(const Ha of ra){if(Ha<ka)continue;let Ea=0;Ba=Ia;P=Y=z(ia,da[Aa]);xa=H=O(ia,da[Aa+1]);X(g.coords,da,Ba,Aa,P,xa);Ea++;Aa+=D;Ba+=sa;for(let Fa=1;Fa<Ha;Fa++,Aa+=D)if(P=z(ia,da[Aa]),xa=O(ia,da[Aa+1]),P!==Y||xa!==H)X(g.coords,da,Ba,Aa,P-Y,xa-H),Ba+=sa,Ea++,Y=P,H=xa;Ea>=ka&&(g.lengths.push(Ea),Ia=Ba)}g.coords.length=Ia;return g.coords.length?g:null}function na(g,D,X,Y,ka,ia,H){let P=Y,da=0;for(let sa=ia+X;sa<H;sa+=X){{var ra=D[sa];const xa=D[sa+1],Aa=D[H],
Ba=D[H+1];let Ia=D[ia],Ha=D[ia+1],Ea=Aa-Ia,Fa=Ba-Ha;if(0!==Ea||0!==Fa){const Ga=((ra-Ia)*Ea+(xa-Ha)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ia=Aa,Ha=Ba):0<Ga&&(Ia+=Ea*Ga,Ha+=Fa*Ga)}Ea=ra-Ia;Fa=xa-Ha;ra=Ea*Ea+Fa*Fa}ra>P&&(da=sa,P=ra)}P>Y&&(da-ia>X&&na(g,D,X,Y,ka,ia,da),ka(g,D,g.length,da,D[da],D[da+1]),H-da>X&&na(g,D,X,Y,ka,da,H))}function oa(g,D,X,Y,ka){const {coords:ia,lengths:H}=D,P=X?Y?b:La:Y?La:Ja;X=t(X,Y);if(!ia.length)return g!==D&&(g.lengths.length=0,g.coords.length=0),g;if(!H.length)return P(g.coords,ia,
0,0,Q(ka,ia[0]),n(ka,ia[1])),g!==D&&(g.lengths.length=0,g.coords.length=X),g;const [da,ra]=ka.scale;Y=0;for(let sa=0;sa<H.length;sa++){const xa=H[sa];g.lengths[sa]=xa;let Aa=Q(ka,ia[Y]),Ba=n(ka,ia[Y+1]);P(g.coords,ia,Y,Y,Aa,Ba);Y+=X;for(let Ia=1;Ia<xa;Ia++,Y+=X)Aa+=ia[Y]*da,Ba-=ia[Y+1]*ra,P(g.coords,ia,Y,Y,Aa,Ba)}g!==D&&(g.lengths.length=H.length,g.coords.length=ia.length);return g}function qa(g,D,X,Y){let ka=0,ia=g[Y*D],H=g[Y*(D+1)];for(let P=1;P<X;P++){const da=ia+g[Y*(D+P)],ra=H+g[Y*(D+P)+1],sa=
(da-ia)*(ra+H);ia=da;H=ra;ka+=sa}return.5*ka}const wa=ca.getLogger("esri.layers.graphics.featureConversionUtils"),Ma={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ja=(g,D,X,Y,ka,ia)=>{g[X]=ka;g[X+1]=ia},La=(g,D,X,Y,ka,ia)=>{g[X]=ka;g[X+1]=ia;g[X+2]=D[Y+2]},Za=(g,D,X,Y,ka,ia)=>{g[X]=ka;g[X+1]=ia;g[X+2]=D[Y+3]},b=(g,D,X,Y,ka,ia)=>{g[X]=ka;g[X+1]=ia;g[X+2]=D[Y+2];g[X+3]=D[Y+3]},p=[],fa=[];h.convertFromFeature=function(g,D,X,Y,ka){p[0]=g;[g]=R(fa,p,D,X,Y,
ka);p.length=fa.length=0;return g};h.convertFromFeatureSet=function(g,D){const X=new B,{hasM:Y,hasZ:ka,features:ia,objectIdFieldName:H,spatialReference:P,geometryType:da,exceededTransferLimit:ra,transform:sa,fields:xa}=g;xa&&(X.fields=xa);X.geometryType=da;X.objectIdFieldName=H||D;X.spatialReference=P;if(!X.objectIdFieldName)return wa.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),X;ia&&R(X.features,ia,da,ka,Y,X.objectIdFieldName);ra&&(X.exceededTransferLimit=
ra);Y&&(X.hasM=Y);ka&&(X.hasZ=ka);sa&&(X.transform=sa);return X};h.convertFromFeatures=R;h.convertFromGeometry=function(g,D,X){if(Z.isNone(g))return null;const Y=new r;"hasZ"in g&&null==D&&(D=g.hasZ);"hasM"in g&&null==X&&(X=g.hasM);if(v.isPoint(g))return x(null!=D?D:null!=g.z,null!=X?X:null!=g.m)(Y,g);if(v.isPolygon(g))return J(Y,g,D,X);if(v.isPolyline(g))return I(Y,g,t(D,X));if(v.isMultipoint(g))return G(Y,g,t(D,X));wa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${g}'`))};
h.convertFromGraphics=function(g,D,X,Y,ka,ia){const H=g.length;switch(X){case "esriGeometryPoint":N(g,D,Y,ka,ia);break;case "esriGeometryMultipoint":F(g,D,Y,ka,ia);break;case "esriGeometryPolyline":T(g,D,Y,ka,ia);break;case "esriGeometryPolygon":e(g,D,Y,ka,ia);break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`))}for(Y=0;Y<D.length;Y++)g[Y+H].geometryType=X,g[Y+H].insertAfter=D[Y].insertAfter,g[Y+H].groupId=D[Y].groupId;return g};h.convertFromMultipoint=
G;h.convertFromMultipointFeatures=F;h.convertFromNestedArray=W;h.convertFromPoint=function(g,D,X=x(null!=D.z,null!=D.m)){return X(g,D)};h.convertFromPointFeatures=N;h.convertFromPolygon=J;h.convertFromPolyline=I;h.convertFromPolylineFeatures=T;h.convertToFeature=function(g,D,X,Y){fa[0]=g;ma(p,fa,D,X,Y);g=p[0];p.length=fa.length=0;return g};h.convertToFeatureSet=function(g){const {objectIdFieldName:D,spatialReference:X,transform:Y,fields:ka,hasM:ia,hasZ:H,features:P,geometryType:da,exceededTransferLimit:ra,
uniqueIdField:sa,queryGeometry:xa,queryGeometryType:Aa}=g;g=ma([],P,da,H,ia);const Ba=ja(xa,Aa,!1,!1);g={features:g,fields:ka,geometryType:da,objectIdFieldName:D,spatialReference:X,uniqueIdField:sa,queryGeometry:Ba};Y&&(g.transform=Y);ra&&(g.exceededTransferLimit=ra);ia&&(g.hasM=ia);H&&(g.hasZ=H);return g};h.convertToFeatures=ma;h.convertToGeometry=ja;h.convertToMultipoint=ha;h.convertToMultipointFeatures=K;h.convertToPoint=function(g,D,X){return g?D?X?q(g):k(g):X?E(g):L(g):null};h.convertToPolygon=
A;h.convertToPolyline=U;h.deltaDecodeGeometry=function(g,D){if(Z.isNone(g))return null;const X=g.clone(),Y=g.coords;g=g.lengths;let ka=0;for(let P=0;P<g.length;P++){const da=g[P];var ia=Y[D*ka],H=Y[D*ka+1];for(let ra=1;ra<da;ra++)ia+=Y[D*(ka+ra)],H+=Y[D*(ka+ra)+1],X.coords[D*(ka+ra)]=ia,X.coords[D*(ka+ra)+1]=H;ka+=da}return X};h.deltaEncodeGeometry=function(g,D){const X=g.clone(),Y=g.coords;g=g.lengths;let ka=0;for(let H=0;H<g.length;H++){const P=g[H];let da=Y[D*ka];var ia=Y[D*ka+1];for(let ra=1;ra<
P;ra++){const sa=Y[D*(ka+ra)],xa=Y[D*(ka+ra)+1];ia=xa-ia;X.coords[D*(ka+ra)]=sa-da;X.coords[D*(ka+ra)+1]=ia;da=sa;ia=xa}ka+=P}return X};h.generalizeOptimizedGeometry=function(g,D,X,Y,ka,ia,H=X,P=Y){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!D||!D.coords.length)return null;ka=Ma[ka];const {coords:da,lengths:ra}=D;D=t(X,Y);const sa=t(X&&H,Y&&P);X=u(X,Y,H,P);if(!ra.length)return X(g.coords,da,0,0,da[0],da[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=
D,g;Y=0;ia*=ia;for(const xa of ra){if(xa<ka){Y+=xa*D;continue}H=g.coords.length/sa;P=Y;const Aa=Y+(xa-1)*D;X(g.coords,da,g.coords.length,P,da[P],da[P+1]);na(g.coords,da,D,ia,X,P,Aa);X(g.coords,da,g.coords.length,Aa,da[Aa],da[Aa+1]);P=g.coords.length/sa-H;P>=ka?g.lengths.push(P):g.coords.length=H*sa;Y+=xa*D}return g.coords.length?g:null};h.getBoundsOptimizedGeometry=function(g,D,X,Y){if(Z.isNone(D)||!D.coords||!D.coords.length)return null;X=t(X,Y);let ka=Y=Number.POSITIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,
H=Number.NEGATIVE_INFINITY;if(D&&D.coords){D=D.coords;for(let P=0;P<D.length;P+=X){const da=D[P],ra=D[P+1];Y=Math.min(Y,da);ia=Math.max(ia,da);ka=Math.min(ka,ra);H=Math.max(H,ra)}}g[0]=Y;g[1]=ka;g[2]=ia;g[3]=H;return g};h.getQuantizedArea=function(g,D){const {coords:X,lengths:Y}=g;let ka=g=0;for(let ia=0;ia<Y.length;ia++)ka+=qa(X,g,Y[ia],D),g+=ia;return Math.abs(ka)};h.getQuantizedBoundsOptimizedGeometry=function(g,D,X,Y){X=t(X,Y);const {lengths:ka,coords:ia}=D;Y=D=Number.POSITIVE_INFINITY;let H=
Number.NEGATIVE_INFINITY,P=Number.NEGATIVE_INFINITY,da=0;for(const ra of ka){let sa=ia[da],xa=ia[da+1];D=Math.min(sa,D);Y=Math.min(xa,Y);H=Math.max(sa,H);P=Math.max(xa,P);da+=X;for(let Aa=1;Aa<ra;Aa++,da+=X){const Ba=ia[da],Ia=ia[da+1];sa+=Ba;xa+=Ia;0>Ba&&(D=Math.min(D,sa));0<Ba&&(H=Math.max(H,sa));0>Ia?Y=Math.min(Y,xa):0<Ia&&(P=Math.max(P,xa))}}g[0]=D;g[1]=Y;g[2]=H;g[3]=P;return g};h.getSignedQuantizedRingArea=qa;h.quantizeOptimizedFeatureSet=function(g,D){const {geometryType:X,features:Y,hasM:ka,
hasZ:ia}=D;if(!g)return D;for(let H=0;H<Y.length;H++){const P=Y[H],da=P.weakClone();da.geometry=new r;S(da.geometry,P.geometry,ka,ia,X,g);P.centroid&&(da.centroid=new r,S(da.centroid,P.centroid,ka,ia,"esriGeometryPoint",g));Y[H]=da}D.transform=g;return D};h.quantizeOptimizedGeometry=S;h.quantizeX=z;h.quantizeY=O;h.removeCollinearVectices=function(g,D,X,Y,ka){if(!D||!D.coords||!D.coords.length)return null;X=Ma[X];const {coords:ia,lengths:H}=D;D=u(Y,ka,Y,ka);Y=t(Y,ka);let P=ka=0,da=0,ra=0;for(const Aa of H){P=
ra;D(g.coords,ia,P,ka,ia[ka],ia[ka+1]);ka+=Y;var sa=ia[ka];let Ba=ia[ka+1],Ia=sa,Ha=Ba;var xa=Ba/sa;P+=Y;D(g.coords,ia,P,ka,Ia,Ha);ka+=Y;for(let Ea=2;Ea<Aa;Ea++){sa=ia[ka];Ba=ia[ka+1];const Fa=Ba/sa,Ga=xa===Fa||!isFinite(xa)&&!isFinite(Fa);xa=Ga&&isFinite(Fa)?0<=xa&&0<=Fa||0>=xa&&0>=Fa:0<=Ha&&0<=Ba||0>=Ha&&0>=Ba;Ga&&xa?(Ia+=sa,Ha+=Ba):(Ia=sa,Ha=Ba,P+=Y);D(g.coords,ia,P,ka,Ia,Ha);ka+=Y;xa=Fa}P+=Y;sa=(P-ra)/Y;sa>=X&&(g.lengths[da]=sa,ra=P,da++)}g.coords.length>ra&&(g.coords.length=ra);g.lengths.length>
da&&(g.lengths.length=da);return g.coords.length&&g.lengths.length?g:null};h.removeZMValues=function(g,D,X,Y,ka,ia){const H=t(X,Y);X=u(X,Y,ka,ia);Y=D.coords;g.coords.length=0;g.lengths.length=0;g.lengths.push(...D.lengths);for(D=0;D<Y.length;D+=H)X(g.coords,Y,g.coords.length,D,Y[D],Y[D+1]);return g};h.unquantizeOptimizedFeatureSet=function(g){const {transform:D,features:X,hasM:Y,hasZ:ka}=g;if(!D)return g;for(const ia of X)Z.isSome(ia.geometry)&&oa(ia.geometry,ia.geometry,Y,ka,D),Z.isSome(ia.centroid)&&
oa(ia.centroid,ia.centroid,Y,ka,D);g.transform=null;return g};h.unquantizeOptimizedGeometry=oa;h.unquantizeX=Q;h.unquantizeY=n;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(h,d,ca){let Z=function(){function y(B=null,r={},t,u){this.geometry=B;this.attributes=r;this.centroid=t;this.objectId=u;this.geohashY=this.geohashX=
this.displayId=0}y.prototype.weakClone=function(){const B=new y(this.geometry,this.attributes,this.centroid,this.objectId);B.displayId=this.displayId;B.geohashX=this.geohashX;B.geohashY=this.geohashY;return B};return y}(),v=function(y){function B(){return y.apply(this,arguments)||this}d._inheritsLoose(B,y);return B}(Z);h.OptimizedFeature=Z;h.OptimizedFeatureWithGeometry=v;h.hasGeometry=function(y){return!(ca.isNone(y.geometry)||!y.geometry.coords||!y.geometry.coords.length)};Object.defineProperties(h,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function h(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}h.prototype.weakClone=function(){const d=
new h;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;
return d};return h}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function d(Z=[],v=[],y=!1){this.lengths=null!=Z?Z:[];this.coords=null!=v?v:[];this.hasIndeterminateRingOrder=y}d.fromRect=function(Z){const [v,y,B,r]=Z;Z=B-v;const t=r-y;return new d([5],[v,y,Z,0,0,t,-Z,0,0,-t])};var ca=d.prototype;ca.forEachVertex=function(Z){let v=0;this.lengths.length||Z(this.coords[0],this.coords[1]);for(let y=0;y<this.lengths.length;y++){const B=
this.lengths[y];for(let r=0;r<B;r++)Z(this.coords[2*(r+v)],this.coords[2*(r+v)+1]);v+=B}};ca.clone=function(Z){return Z?(Z.set(this.coords),new d(this.lengths.slice(),Z,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};h._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Z,v)=>Z+v)}}]);return d}()})},
"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(h,d,ca,Z,v,y,B,r,t,u){return function(){function z(Q){this.geometryInfo=Q;this._boundsStore=new t.BoundsStore;this._featuresById=new Map;
this._markedIds=new Set;this.events=new ca;this.featureAdapter=u.optimizedFeatureQueryEngineAdapter}var O=z.prototype;O.add=function(Q){this._add(Q);this._emitChanged()};O.addMany=function(Q){for(const n of Q)this._add(n);this._emitChanged()};O.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};O.removeById=function(Q){Q=this._featuresById.get(Q);if(!Q)return null;this._remove(Q);this._emitChanged();return Q};O.removeManyById=function(Q){this._boundsStore.invalidateIndex();
for(const n of Q)(Q=this._featuresById.get(n))&&this._remove(Q);this._emitChanged()};O.forEachBounds=function(Q,n,L){for(const c of Q)(Q=this._boundsStore.get(c.objectId))&&n(y.fromRect(L,Q))};O.getFeature=function(Q){return this._featuresById.get(Q)};O.has=function(Q){return this._featuresById.has(Q)};O.toArray=function(){return Array.from(this._featuresById.values())};O.forEach=function(Q){this._featuresById.forEach(n=>Q(n))};O.forEachInBounds=function(Q,n){this._boundsStore.forEachInBounds(Q,L=>
{n(this._featuresById.get(L))})};O.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};O.sweep=function(){let Q=!1;this._featuresById.forEach((n,L)=>{this._markedIds.has(L)||(Q=!0,this._remove(n))});this._markedIds.clear();Q&&this._emitChanged()};O._emitChanged=function(){this.events.emit("changed",void 0)};O._add=function(Q){if(Q){var n=Q.objectId;if(null==n)Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:Q}));else{var L=this._featuresById.get(n);this._markedIds.add(n);if(L){Q.displayId=L.displayId;var c=this._boundsStore.get(n);this._boundsStore.delete(n)}else if(v.isSome(this.onFeatureAdd))this.onFeatureAdd(Q);!v.isNone(Q.geometry)&&Q.geometry.coords&&Q.geometry.coords.length?(c=r.getBoundsOptimizedGeometry(v.isSome(c)?c:B.create(),Q.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),v.isSome(c)&&this._boundsStore.set(n,c)):this._boundsStore.set(n,null);this._featuresById.set(n,
Q)}}};O._remove=function(Q){if(v.isSome(this.onFeatureRemove))this.onFeatureRemove(Q);this._markedIds.delete(Q.objectId);this._boundsStore.delete(Q.objectId);this._featuresById.delete(Q.objectId);return Q};h._createClass(z,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let Q=0;this._featuresById.forEach(n=>{v.isSome(n.geometry)&&n.geometry.coords&&(Q+=n.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:Q/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return z}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(h,
d,ca,Z,v){let y=function(){function B(){this._emitter=new B.EventEmitter(this)}var r=B.prototype;r.emit=function(t,u){return this._emitter.emit(t,u)};r.on=function(t,u){return this._emitter.on(t,u)};r.once=function(t,u){return this._emitter.once(t,u)};r.hasEventListener=function(t){return this._emitter.hasEventListener(t)};return B}();(function(B){let r=function(){function u(O=null){this.target=O;this._listenersMap=null}var z=u.prototype;z.clear=function(){this._listenersMap&&this._listenersMap.clear();
this._listenersMap=null};z.emit=function(O,Q){O=this._listenersMap&&this._listenersMap.get(O);if(!O)return!1;const n=this.target||this;[...O].forEach(L=>{L.call(n,Q)});return 0<O.length};z.on=function(O,Q){if(Array.isArray(O)){var n=O.map(L=>this.on(L,Q));return Z.handlesGroup(n)}if(O.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);n=this._listenersMap.get(O)||[];n.push(Q);this._listenersMap.set(O,
n);return{remove:()=>{const L=this._listenersMap&&this._listenersMap.get(O)||[],c=L.indexOf(Q);0<=c&&L.splice(c,1)}}};z.once=function(O,Q){const n=this.on(O,L=>{n.remove();Q.call(null,L)});return n};z.hasEventListener=function(O){O=this._listenersMap&&this._listenersMap.get(O);return null!=O&&0<O.length};return u}();B.EventEmitter=r;B.EventedMixin=u=>{u=function(z){function O(){var n=z.apply(this,arguments)||this;n._emitter=new r;return n}h._inheritsLoose(O,z);var Q=O.prototype;Q.destroy=function(){this._emitter.clear()};
Q.emit=function(n,L){return this._emitter.emit(n,L)};Q.on=function(n,L){return this._emitter.on(n,L)};Q.once=function(n,L){return this._emitter.once(n,L)};Q.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return O}(u);return u=d.__decorate([v.subclass("esri.core.Evented")],u)};let t=function(u){function z(){var Q=u.apply(this,arguments)||this;Q._emitter=new y.EventEmitter(h._assertThisInitialized(Q));return Q}h._inheritsLoose(z,u);var O=z.prototype;O.destroy=function(){this._emitter.clear()};
O.emit=function(Q,n){return this._emitter.emit(Q,n)};O.on=function(Q,n){return this._emitter.on(Q,n)};O.once=function(Q,n){return this._emitter.once(Q,n)};O.hasEventListener=function(Q){return this._emitter.hasEventListener(Q)};return z}(ca);t=d.__decorate([v.subclass("esri.core.Evented")],t);B.EventedAccessor=t})(y||(y={}));return y})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(h,d,ca,Z){function v(c=n){return[c[0],
c[1],c[2],c[3],c[4],c[5]]}function y(c,k,M,E,l,q,m=v()){m[0]=c;m[1]=k;m[2]=M;m[3]=E;m[4]=l;m[5]=q;return m}function B(c){return c[0]>=c[3]?0:c[3]-c[0]}function r(c){return c[1]>=c[4]?0:c[4]-c[1]}function t(c){return c[2]>=c[5]?0:c[5]-c[2]}function u(c,k){return Math.max(k[0],c[0])<=Math.min(k[3],c[3])&&Math.max(k[1],c[1])<=Math.min(k[4],c[4])&&Math.max(k[2],c[2])<=Math.min(k[5],c[5])}function z(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];return c}function O(c){return 6===c.length}
const Q=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],n=[0,0,0,0,0,0],L=v();h.NEGATIVE_INFINITY=Q;h.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];h.ZERO=n;h.allFinite=function(c){for(let k=0;6>k;k++)if(!isFinite(c[k]))return!1;return!0};h.center=function(c,k=[0,0,0]){k[0]=c[0]+B(c)/2;k[1]=c[1]+r(c)/2;k[2]=c[2]+t(c)/2;return k};h.contains=function(c,k){return k[0]>=c[0]&&k[1]>=c[1]&&k[2]>=c[2]&&k[3]<=c[3]&&k[4]<=c[4]&&k[5]<=c[5]};h.containsPoint=function(c,
k){return k[0]>=c[0]&&k[1]>=c[1]&&k[2]>=c[2]&&k[0]<=c[3]&&k[1]<=c[4]&&k[2]<=c[5]};h.containsPointWithMargin=function(c,k,M){return k[0]>=c[0]-M&&k[1]>=c[1]-M&&k[2]>=c[2]-M&&k[0]<=c[3]+M&&k[1]<=c[4]+M&&k[2]<=c[5]+M};h.create=v;h.depth=r;h.diameter=function(c){const k=B(c),M=t(c);c=r(c);return Math.sqrt(k*k+M*M+c*c)};h.empty=function(c){return c?z(c,Q):v(Q)};h.equals=function(c,k,M){if(d.isNone(c)||d.isNone(k))return c===k;if(!O(c)||!O(k))return!1;if(M)for(let E=0;E<c.length;E++){if(!M(c[E],k[E]))return!1}else for(M=
0;M<c.length;M++)if(c[M]!==k[M])return!1;return!0};h.expandWithAABB=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[2]=Math.min(c[2],k[2]);c[3]=Math.max(c[3],k[3]);c[4]=Math.max(c[4],k[4]);c[5]=Math.max(c[5],k[5])};h.expandWithBuffer=function(c,k,M=0,E=k.length/3){let l=c[0],q=c[1],m=c[2],x=c[3],N=c[4],K=c[5];for(let ha=0;ha<E;ha++)l=Math.min(l,k[M+3*ha]),q=Math.min(q,k[M+3*ha+1]),m=Math.min(m,k[M+3*ha+2]),x=Math.max(x,k[M+3*ha]),N=Math.max(N,k[M+3*ha+1]),K=Math.max(K,k[M+3*ha+2]);
c[0]=l;c[1]=q;c[2]=m;c[3]=x;c[4]=N;c[5]=K};h.expandWithNestedArray=function(c,k,M){const E=k.length;let l=c[0],q=c[1],m=c[2],x=c[3],N=c[4],K=c[5];if(M)for(M=0;M<E;M++){var ha=k[M];l=Math.min(l,ha[0]);q=Math.min(q,ha[1]);m=Math.min(m,ha[2]);x=Math.max(x,ha[0]);N=Math.max(N,ha[1]);K=Math.max(K,ha[2])}else for(M=0;M<E;M++)ha=k[M],l=Math.min(l,ha[0]),q=Math.min(q,ha[1]),x=Math.max(x,ha[0]),N=Math.max(N,ha[1]);c[0]=l;c[1]=q;c[2]=m;c[3]=x;c[4]=N;c[5]=K};h.expandWithOffset=function(c,k,M,E){c[0]=Math.min(c[0],
c[0]+k);c[3]=Math.max(c[3],c[3]+k);c[1]=Math.min(c[1],c[1]+M);c[4]=Math.max(c[4],c[4]+M);c[2]=Math.min(c[2],c[2]+E);c[5]=Math.max(c[5],c[5]+E)};h.expandWithRect=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[3]=Math.max(c[3],k[2]);c[4]=Math.max(c[4],k[3])};h.expandWithVec3=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[2]=Math.min(c[2],k[2]);c[3]=Math.max(c[3],k[0]);c[4]=Math.max(c[4],k[1]);c[5]=Math.max(c[5],k[2])};h.fromExtent=function(c,k=v()){k[0]=c.xmin;
k[1]=c.ymin;k[2]=c.zmin;k[3]=c.xmax;k[4]=c.ymax;k[5]=c.zmax;return k};h.fromMinMax=function(c,k,M=v()){M[0]=c[0];M[1]=c[1];M[2]=c[2];M[3]=k[0];M[4]=k[1];M[5]=k[2];return M};h.fromRect=function(c,k){c[0]=k[0];c[1]=k[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=k[2];c[4]=k[3];c[5]=Number.POSITIVE_INFINITY;return c};h.fromValues=y;h.getMax=function(c,k){k[0]=c[3];k[1]=c[4];k[2]=c[5];return k};h.getMin=function(c,k){k[0]=c[0];k[1]=c[1];k[2]=c[2];return k};h.height=t;h.intersects=u;h.intersectsClippingArea=function(c,
k){return d.isNone(k)?!0:u(c,k)};h.is=O;h.isPoint=function(c){return 0===B(c)&&0===r(c)&&0===t(c)};h.maximumDimension=function(c){return Math.max(B(c),t(c),r(c))};h.offset=function(c,k,M,E,l=c){l[0]=c[0]+k;l[1]=c[1]+M;l[2]=c[2]+E;l[3]=c[3]+k;l[4]=c[4]+M;l[5]=c[5]+E;return l};h.scale=function(c,k,M=c){const E=c[0]+B(c)/2,l=c[1]+r(c)/2,q=c[2]+t(c)/2;M[0]=E+(c[0]-E)*k;M[1]=l+(c[1]-l)*k;M[2]=q+(c[2]-q)*k;M[3]=E+(c[3]-E)*k;M[4]=l+(c[4]-l)*k;M[5]=q+(c[5]-q)*k;return M};h.set=z;h.setMax=function(c,k,M=c){M[3]=
k[0];M[4]=k[1];M[5]=k[2];M!==c&&(M[0]=c[0],M[1]=c[1],M[2]=c[2]);return c};h.setMin=function(c,k,M=c){M[0]=k[0];M[1]=k[1];M[2]=k[2];M!==c&&(M[3]=c[3],M[4]=c[4],M[5]=c[5]);return M};h.size=function(c,k=[0,0,0]){k[0]=B(c);k[1]=r(c);k[2]=t(c);return k};h.toExtent=function(c,k){return isFinite(c[2])||isFinite(c[5])?new ca({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:k}):new ca({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:k})};h.toRect=function(c,k){k||(k=Z.create());
k[0]=c[0];k[1]=c[1];k[2]=c[3];k[3]=c[4];return k};h.width=B;h.wrap=function(c,k,M,E,l,q){return y(c,k,M,E,l,q,L)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(h,d,ca,Z,v){function y(n=Q){return[n[0],n[1],n[2],n[3]]}function B(n,L){n!==L&&(n[0]=L[0],n[1]=L[1],n[2]=L[2],n[3]=L[3]);return n}function r(n){return Z.isNone(n)||
n[0]>=n[2]?0:n[2]-n[0]}function t(n){return n[1]>=n[3]?0:n[3]-n[1]}function u(n,L,c){return L>=n[0]&&c>=n[1]&&L<=n[2]&&c<=n[3]}function z(n){return null!=n&&4===n.length}const O=[Infinity,Infinity,-Infinity,-Infinity],Q=[0,0,0,0];h.NEGATIVE_INFINITY=O;h.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];h.UNIT=[0,0,1,1];h.ZERO=Q;h.allFinite=function(n){for(let L=0;4>L;L++)if(!isFinite(n[L]))return!1;return!0};h.area=function(n){return r(n)*t(n)};h.center=function(n,L=[0,0]){L[0]=(n[0]+n[2])/
2;L[1]=(n[1]+n[3])/2;return L};h.clone=function(n){return[n[0],n[1],n[2],n[3]]};h.contains=function(n,L){return L[0]>=n[0]&&L[2]<=n[2]&&L[1]>=n[1]&&L[3]<=n[3]};h.containsPoint=function(n,L){return u(n,L[0],L[1])};h.containsPointObject=function(n,L){return u(n,L.x,L.y)};h.containsPointWithMargin=function(n,L,c){return L[0]>=n[0]-c&&L[1]>=n[1]-c&&L[0]<=n[2]+c&&L[1]<=n[3]+c};h.containsXY=u;h.containsXYWithMargin=function(n,L,c,k){return L>=n[0]-k&&c>=n[1]-k&&L<=n[2]+k&&c<=n[3]+k};h.copy=B;h.create=y;
h.distance=function(n,L){const c=(n[1]+n[3])/2,k=Math.max(Math.abs(L[0]-(n[0]+n[2])/2)-r(n)/2,0);n=Math.max(Math.abs(L[1]-c)-t(n)/2,0);return Math.sqrt(k*k+n*n)};h.empty=function(n){return n?B(n,O):y(O)};h.equals=function(n,L){return z(n)&&z(L)?n[0]===L[0]&&n[1]===L[1]&&n[2]===L[2]&&n[3]===L[3]:n===L};h.expand=function(n,L,c){if(Z.isNone(L))B(c,n);else if("length"in L)if(z(L))c[0]=Math.min(n[0],L[0]),c[1]=Math.min(n[1],L[1]),c[2]=Math.max(n[2],L[2]),c[3]=Math.max(n[3],L[3]);else{if(2===L.length||
3===L.length)c[0]=Math.min(n[0],L[0]),c[1]=Math.min(n[1],L[1]),c[2]=Math.max(n[2],L[0]),c[3]=Math.max(n[3],L[1])}else switch(L.type){case "extent":c[0]=Math.min(n[0],L.xmin);c[1]=Math.min(n[1],L.ymin);c[2]=Math.max(n[2],L.xmax);c[3]=Math.max(n[3],L.ymax);break;case "point":c[0]=Math.min(n[0],L.x),c[1]=Math.min(n[1],L.y),c[2]=Math.max(n[2],L.x),c[3]=Math.max(n[3],L.y)}};h.expandPointInPlace=function(n,L){L[0]<n[0]&&(n[0]=L[0]);L[0]>n[2]&&(n[2]=L[0]);L[1]<n[1]&&(n[1]=L[1]);L[1]>n[3]&&(n[3]=L[1])};h.expandWithNestedArray=
function(n,L,c=n){const k=L.length;let M=n[0],E=n[1],l=n[2];n=n[3];for(let q=0;q<k;q++){const m=L[q];M=Math.min(M,m[0]);E=Math.min(E,m[1]);l=Math.max(l,m[0]);n=Math.max(n,m[1])}c[0]=M;c[1]=E;c[2]=l;c[3]=n;return c};h.fromExtent=function(n,L=y()){L[0]=n.xmin;L[1]=n.ymin;L[2]=n.xmax;L[3]=n.ymax;return L};h.fromValues=function(n,L,c,k,M=y()){M[0]=n;M[1]=L;M[2]=c;M[3]=k;return M};h.height=t;h.intersection=function(n,L,c){if(Z.isNone(L))return B(c,n);const k=L[0],M=L[1],E=L[2];L=L[3];c[0]=ca.clamp(n[0],
k,E);c[1]=ca.clamp(n[1],M,L);c[2]=ca.clamp(n[2],k,E);c[3]=ca.clamp(n[3],M,L);return c};h.intersects=function(n,L){return Math.max(L[0],n[0])<=Math.min(L[2],n[2])&&Math.max(L[1],n[1])<=Math.min(L[3],n[3])};h.intersectsSegment=function(n,L,c){const k=n[0],M=n[1],E=n[2];n=n[3];const {x:l,y:q}=L,{x:m,y:x}=c;var N=(ha,F)=>0>(x-q)*ha+(l-m)*F+(m*q-l*x);L=N(k,n);c=N(E,n);const K=N(E,M);N=N(k,M);return L===c&&c===K&&K===N&&N===L||l<k&&m<k||l>E&&m>E||q>n&&x>n||q<M&&x<M?!1:!0};h.intersectsSphere=function(n,
L){const c=L[3];var k=Math.abs(L[0]-.5*(n[0]+n[2]));const M=.5*(n[2]-n[0]);if(k>c+M)return!1;var E=.5*(n[3]-n[1]);n=Math.abs(L[1]-.5*(n[1]+n[3]));if(n>c+E)return!1;if(k<M||n<E)return!0;k-=M;E=n-E;return k*k+E*E<=c*c};h.is=z;h.isPoint=function(n){return(0===r(n)||!isFinite(n[0]))&&(0===t(n)||!isFinite(n[1]))};h.offset=function(n,L,c,k=n){k[0]=n[0]+L;k[1]=n[1]+c;k[2]=n[2]+L;k[3]=n[3]+c;return k};h.pad=function(n,L,c=n){c[0]=n[0]-L;c[1]=n[1]-L;c[2]=n[2]+L;c[3]=n[3]+L;return c};h.setMax=function(n,L,
c=n){c[2]=L[0];c[3]=L[1];c!==n&&(c[0]=n[0],c[1]=n[1]);return n};h.setMin=function(n,L,c=n){c[0]=L[0];c[1]=L[1];c!==n&&(c[2]=n[2],c[3]=n[3]);return c};h.size=function(n,L){L[0]=n[2]-n[0];L[1]=n[3]-n[1]};h.toExtent=function(n,L){return new v({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:L})};h.width=r;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(h,d,ca,Z,v){function y(t,u,z){B.minX=u[0];B.minY=u[1];B.maxX=u[2];B.maxY=u[3];t.search(B,z)}const B={minX:0,minY:0,maxX:0,maxY:0};let r=function(){function t(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,ca("esri-csp-restrictions")?z=>({minX:z[0],minY:z[1],maxX:z[2],maxY:z[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const z=Array(this._idByBounds.size);let O=0;this._idByBounds.forEach((Q,n)=>{z[O++]=n});this._indexInvalid=!1;this._index.clear();this._index.load(z)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(z=>this._idByBounds.has(z))),this._boundsToLoad.length=0)}}var u=t.prototype;u.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};u.delete=function(z){const O=
this._boundsById.get(z);this._boundsById.delete(z);O&&(this._idByBounds.delete(O),this._indexInvalid||this._index.remove(O))};u.forEachInBounds=function(z,O){this._loadIndex();y(this._index,z,Q=>O(this._idByBounds.get(Q)))};u.get=function(z){return this._boundsById.get(z)};u.has=function(z){return this._boundsById.has(z)};u.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};u.set=function(z,O){if(!this._indexInvalid){const Q=this._boundsById.get(z);
Q&&(this._index.remove(Q),this._idByBounds.delete(Q))}this._boundsById.set(z,O);O&&(this._idByBounds.set(O,z),this._indexInvalid||(this._boundsToLoad.push(O),5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(t,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const z=v.empty();for(const O of this._boundsById.values())O&&(z[0]=Math.min(O[0],z[0]),z[1]=Math.min(O[1],z[1]),z[2]=Math.max(O[2],z[2]),z[3]=Math.max(O[3],z[3]));return z}},{key:"valid",get:function(){return!this._indexInvalid}}]);
return t}();h.BoundsStore=r;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(h,d,ca,Z,v,y){function B(K,ha){r(K,0,K.children.length,ha,K)}function r(K,ha,F,G,U){U||(U=new x([]));U.minX=Infinity;U.minY=Infinity;U.maxX=-Infinity;U.maxY=-Infinity;for(let T=ha,I;T<
F;T++)I=K.children[T],t(U,K.leaf?G(I):I);return U}function t(K,ha){K.minX=Math.min(K.minX,ha.minX);K.minY=Math.min(K.minY,ha.minY);K.maxX=Math.max(K.maxX,ha.maxX);K.maxY=Math.max(K.maxY,ha.maxY)}function u(K,ha){return K.minX-ha.minX}function z(K,ha){return K.minY-ha.minY}function O(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function Q(K){return K.maxX-K.minX+(K.maxY-K.minY)}function n(K,ha){return K.minX<=ha.minX&&K.minY<=ha.minY&&ha.maxX<=K.maxX&&ha.maxY<=K.maxY}function L(K,ha){return ha.minX<=K.maxX&&
ha.minY<=K.maxY&&ha.maxX>=K.minX&&ha.maxY>=K.minY}function c(K,ha,F,G,U){for(ha=[ha,F];ha.length;){F=Z.assumeNonNull(ha.pop());const T=Z.assumeNonNull(ha.pop());if(F-T<=G)continue;const I=T+Math.ceil((F-T)/G/2)*G;y.quickselect(K,I,T,F,U);ha.push(T,I,I,F)}}let k=function(){function K(F=9,G){this.compareMinX=u;this.compareMinY=z;this._toBBox=U=>U;this._maxEntries=Math.max(4,F||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));G&&("function"===typeof G?this._toBBox=G:this._initFormat(G));
this.clear()}var ha=K.prototype;ha.destroy=function(){this.clear();M.prune();E.prune();l.prune();q.prune()};ha.all=function(F){this._all(this.data,F)};ha.search=function(F,G){let U=this.data;const T=this._toBBox;if(L(F,U))for(M.clear();U;){for(let I=0,A=U.children.length;I<A;I++){const e=U.children[I],J=U.leaf?T(e):e;L(F,J)&&(U.leaf?G(e):n(F,J)?this._all(e,G):M.push(e))}U=M.pop()}};ha.collides=function(F){let G=this.data;const U=this._toBBox;if(!L(F,G))return!1;for(M.clear();G;){for(let T=0,I=G.children.length;T<
I;T++){const A=G.children[T],e=G.leaf?U(A):A;if(L(F,e)){if(G.leaf||n(F,e))return!0;M.push(A)}}G=M.pop()}return!1};ha.load=function(F){if(!F.length)return this;if(F.length<this._minEntries){for(let G=0,U=F.length;G<U;G++)this.insert(F[G]);return this}F=this._build(F.slice(0,F.length),0,F.length-1,0);if(this.data.children.length)if(this.data.height===F.height)this._splitRoot(this.data,F);else{if(this.data.height<F.height){const G=this.data;this.data=F;F=G}this._insert(F,this.data.height-F.height-1,
!0)}else this.data=F;return this};ha.insert=function(F){F&&this._insert(F,this.data.height-1);return this};ha.clear=function(){this.data=new x([]);return this};ha.remove=function(F){if(!F)return this;let G=this.data,U=null,T=0,I=!1,A;const e=this._toBBox(F);l.clear();for(q.clear();G||0<l.length;){if(!G){var J;G=Z.assumeNonNull(l.pop());U=l.data[l.length-1];T=null!=(J=q.pop())?J:0;I=!0}if(G.leaf&&(A=ca.indexOf(G.children,F,G.children.length,G.indexHint),-1!==A)){G.children.splice(A,1);l.push(G);this._condense(l);
break}I||G.leaf||!n(G,e)?U?(T++,G=U.children[T],I=!1):G=null:(l.push(G),q.push(T),T=0,U=G,G=G.children[0])}return this};ha.toJSON=function(){return this.data};ha.fromJSON=function(F){this.data=F;return this};ha._all=function(F,G){for(E.clear();F;){var U;if(!0===F.leaf)for(const T of F.children)G(T);else E.pushArray(F.children);F=null!=(U=E.pop())?U:null}};ha._build=function(F,G,U,T){var I=U-G+1,A=this._maxEntries;if(I<=A)return F=new x(F.slice(G,U+1)),B(F,this._toBBox),F;T||(T=Math.ceil(Math.log(I)/
Math.log(A)),A=Math.ceil(I/A**(T-1)));const e=new N([]);e.height=T;I=Math.ceil(I/A);A=I*Math.ceil(Math.sqrt(A));for(c(F,G,U,A,this.compareMinX);G<=U;G+=A){const J=Math.min(G+A-1,U);c(F,G,J,I,this.compareMinY);for(let W=G;W<=J;W+=I)e.children.push(this._build(F,W,Math.min(W+I-1,J),T-1))}B(e,this._toBBox);return e};ha._chooseSubtree=function(F,G,U,T){for(;;){T.push(G);if(!0===G.leaf||T.length-1===U)break;let I=Infinity,A=Infinity,e=void 0;for(let J=0,W=G.children.length;J<W;J++){const R=G.children[J],
ja=O(R),ma=(Math.max(R.maxX,F.maxX)-Math.min(R.minX,F.minX))*(Math.max(R.maxY,F.maxY)-Math.min(R.minY,F.minY))-ja;ma<A?(A=ma,I=ja<I?ja:I,e=R):ma===A&&ja<I&&(I=ja,e=R)}G=e||G.children[0]}return G};ha._insert=function(F,G,U){var T=this._toBBox;U=U?F:T(F);l.clear();T=this._chooseSubtree(U,this.data,G,l);T.children.push(F);for(t(T,U);0<=G;)if(l.data[G].children.length>this._maxEntries)this._split(l,G),G--;else break;this._adjustParentBBoxes(U,l,G)};ha._split=function(F,G){const U=F.data[G];var T=U.children.length;
const I=this._minEntries;this._chooseSplitAxis(U,I,T);(T=this._chooseSplitIndex(U,I,T))?(T=U.children.splice(T,U.children.length-T),T=U.leaf?new x(T):new N(T),T.height=U.height,B(U,this._toBBox),B(T,this._toBBox),G?F.data[G-1].children.push(T):this._splitRoot(U,T)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ha._splitRoot=function(F,G){this.data=new N([F,G]);this.data.height=F.height+1;B(this.data,this._toBBox)};ha._chooseSplitIndex=function(F,G,U){let T,
I,A=void 0;T=I=Infinity;for(let J=G;J<=U-G;J++){var e=r(F,0,J,this._toBBox);const W=r(F,J,U,this._toBBox),R=Math.max(0,Math.min(e.maxX,W.maxX)-Math.max(e.minX,W.minX))*Math.max(0,Math.min(e.maxY,W.maxY)-Math.max(e.minY,W.minY));e=O(e)+O(W);R<T?(T=R,A=J,I=e<I?e:I):R===T&&e<I&&(I=e,A=J)}return A};ha._chooseSplitAxis=function(F,G,U){const T=F.leaf?this.compareMinX:u,I=F.leaf?this.compareMinY:z,A=this._allDistMargin(F,G,U,T);G=this._allDistMargin(F,G,U,I);A<G&&F.children.sort(T)};ha._allDistMargin=function(F,
G,U,T){F.children.sort(T);T=this._toBBox;var I=r(F,0,G,T);const A=r(F,U-G,U,T);let e=Q(I)+Q(A);for(let J=G;J<U-G;J++){const W=F.children[J];t(I,F.leaf?T(W):W);e+=Q(I)}for(U=U-G-1;U>=G;U--)I=F.children[U],t(A,F.leaf?T(I):I),e+=Q(A);return e};ha._adjustParentBBoxes=function(F,G,U){for(;0<=U;U--)t(G.data[U],F)};ha._condense=function(F){for(let G=F.length-1;0<=G;G--){const U=F.data[G];if(0===U.children.length)if(0<G){const T=F.data[G-1],I=T.children;I.splice(ca.indexOf(I,U,I.length,T.indexHint),1)}else this.clear();
else B(U,this._toBBox)}};ha._initFormat=function(F){const G=["return a"," - b",";"];this.compareMinX=new Function("a","b",G.join(F[0]));this.compareMinY=new Function("a","b",G.join(F[1]));this._toBBox=new Function("a","return {minX: a"+F[0]+", minY: a"+F[1]+", maxX: a"+F[2]+", maxY: a"+F[3]+"};")};return K}();const M=new v,E=new v,l=new v,q=new v({deallocator:void 0});v=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let m=function(K){function ha(){var F=K.apply(this,arguments)||
this;F.height=1;F.indexHint=new ca.PositionHint;return F}d._inheritsLoose(ha,K);return ha}(v),x=function(K){function ha(F){var G=K.call(this)||this;G.children=F;G.leaf=!0;return G}d._inheritsLoose(ha,K);return ha}(m),N=function(K){function ha(F){var G=K.call(this)||this;G.children=F;G.leaf=!1;return G}d._inheritsLoose(ha,K);return ha}(m);h.BBox=v;h.PooledRBush=k;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],
function(h){var d={exports:{}};(function(ca){(function(Z){Z=Z();void 0!==Z&&(ca.exports=Z)})(function(){function Z(B,r,t,u,z){for(;u>t;){if(600<u-t){var O=u-t+1,Q=r-t+1,n=Math.log(O),L=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*L*(O-L)/O)*(0>Q-O/2?-1:1);Z(B,r,Math.max(t,Math.floor(r-Q*L/O+n)),Math.min(u,Math.floor(r+(O-Q)*L/O+n)),z)}O=B[r];Q=t;L=u;v(B,t,r);for(0<z(B[u],O)&&v(B,t,u);Q<L;){v(B,Q,L);Q++;for(L--;0>z(B[Q],O);)Q++;for(;0<z(B[L],O);)L--}0===z(B[t],O)?v(B,t,L):(L++,v(B,L,u));L<=r&&(t=L+1);r<=L&&
(u=L-1)}}function v(B,r,t){var u=B[r];B[r]=B[t];B[t]=u}function y(B,r){return B<r?-1:B>r?1:0}return function(B,r,t,u,z){Z(B,r,t||0,u||B.length-1,z||y)}})})(d);h.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(h,d,ca,Z,v){h.optimizedFeatureQueryEngineAdapter={getObjectId(y){return y.objectId},getAttributes(y){return y.attributes},getAttribute(y,
B){return y.attributes[B]},cloneWithGeometry(y,B){return new Z.OptimizedFeature(B,y.attributes,null,y.objectId)},getGeometry(y){return y.geometry},getCentroid(y,B){d.isNone(y.centroid)&&(y.centroid=ca.getCentroidOptimizedGeometry(new v,y.geometry,B.hasZ,B.hasM));return y.centroid}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(h,d){function ca(v,y,B,r,t,u,z=1){u=
t?u?4:3:u?3:2;let O=B,Q=B+u,n=0,L=0,c=B=0,k=0;for(let M=0,E=r-1;M<E;M++,O+=u,Q+=u){r=y[O];const l=y[O+1],q=y[O+2],m=y[Q],x=y[Q+1],N=y[Q+2];let K=r*x-m*l;c+=K;n+=(r+m)*K;L+=(l+x)*K;t&&(K=r*N-m*q,B+=(q+N)*K,k+=K);r<v[0]&&(v[0]=r);r>v[1]&&(v[1]=r);l<v[2]&&(v[2]=l);l>v[3]&&(v[3]=l);t&&(q<v[4]&&(v[4]=q),q>v[5]&&(v[5]=q))}0<c*z&&(c*=-1);0<k*z&&(k*=-1);if(!c)return null;v=[n,L,.5*c];t&&(v[3]=B,v[4]=.5*k);return v}function Z(v,y,B,r,t){t=r?t?4:3:t?3:2;let u=y,z=y+t,O=0,Q=0,n=0,L=0;for(let E=0,l=B-1;E<l;E++,
u+=t,z+=t){var c=v[u];const q=v[u+1],m=v[u+2],x=v[z],N=v[z+1],K=v[z+2];if(r){{var k=x-c;var M=N-q;const ha=K-m;k=Math.sqrt(k*k+M*M+ha*ha)}}else k=x-c,M=N-q,k=Math.sqrt(k*k+M*M);k&&(O+=k,r?(c=[c+.5*(x-c),q+.5*(N-q),m+.5*(K-m)],Q+=k*c[0],n+=k*c[1],L+=k*c[2]):(c=[c+.5*(x-c),q+.5*(N-q)],Q+=k*c[0],n+=k*c[1]))}return 0<O?r?[Q/O,n/O,L/O]:[Q/O,n/O]:0<B?r?[v[y],v[y+1],v[y+2]]:[v[y],v[y+1]]:null}h.getCentroidOptimizedGeometry=function(v,y,B,r,t){if(d.isNone(y)||!y.lengths.length)return null;const u="upperLeft"===
(null==t?void 0:t.originPosition)?-1:1;v.lengths.length&&(v.lengths.length=0);v.coords.length&&(v.coords.length=0);t=v.coords;const z=[],O=B?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:Q,coords:n}=y,L=B?r?4:3:r?3:2;let c=0;for(var k of Q){const M=ca(O,n,c,k,B,r,u);M&&z.push(M);c+=k*
L}z.sort((M,E)=>{let l=u*M[2]-u*E[2];0===l&&B&&(l=M[4]-E[4]);return l});z.length&&(k=6*z[0][2],t[0]=z[0][0]/k,t[1]=z[0][1]/k,B&&(k=6*z[0][4],t[2]=0!==k?z[0][3]/k:0),t[0]<O[0]||t[0]>O[1]||t[1]<O[2]||t[1]>O[3]||B&&(t[2]<O[4]||t[2]>O[5]))&&(t.length=0);if(!t.length)if(y=y.lengths[0]?Z(n,0,Q[0],B,r):null)t[0]=y[0],t[1]=y[1],B&&2<y.length&&(t[2]=y[2]);else return null;return v};h.lineCentroid=Z;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(h,d,ca,Z,v,y,B){function r(c,k){if(!k)return null;if("x"in k){var M={x:0,y:0};[M.x,M.y]=c(k.x,k.y,O);null!=k.z&&(M.z=k.z);null!=k.m&&(M.m=k.m);return M}if("xmin"in k)return M={xmin:0,ymin:0,xmax:0,ymax:0},[M.xmin,M.ymin]=c(k.xmin,k.ymin,O),[M.xmax,M.ymax]=c(k.xmax,k.ymax,O),k.hasZ&&(M.zmin=k.zmin,M.zmax=k.zmax,M.hasZ=!0),k.hasM&&(M.mmin=k.mmin,M.mmax=k.mmax,M.hasM=!0),M;if("rings"in k)return{rings:t(k.rings,c),hasM:k.hasM,hasZ:k.hasZ};if("paths"in k)return{paths:t(k.paths,c),hasM:k.hasM,
hasZ:k.hasZ};if("points"in k)return{points:u(k.points,c),hasM:k.hasM,hasZ:k.hasZ}}function t(c,k){const M=[];for(const E of c)M.push(u(E,k));return M}function u(c,k){const M=[];for(const E of c)c=k(E[0],E[1],[0,0]),M.push(c),2<E.length&&c.push(E[2]),3<E.length&&c.push(E[3]);return M}function z(){z=d._asyncToGenerator(function*(c,k){k&&(c=Array.isArray(c)?c.map(M=>ca.isSome(M.geometry)&&M.geometry.spatialReference):[c],yield Z.initializeProjection(c.map(M=>({source:M,dest:k}))))});return z.apply(this,
arguments)}const O=[0,0],Q=r.bind(null,B.lngLatToXY),n=r.bind(null,B.xyToLngLat),L=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var k=c.prototype;k.push=function(){var M=d._asyncToGenerator(function*(E,l,q){if(!(E&&E.length&&l&&q)||y.equals(l,q))return E;const m={geometries:E,inSpatialReference:l,outSpatialReference:q,resolve:null};this._jobs.push(m);return new Promise(x=>{m.resolve=x;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(E,l,q){return M.apply(this,arguments)}}();k._process=function(){this._timer=null;const M=this._jobs.shift();if(M){var {geometries:E,inSpatialReference:l,outSpatialReference:q,resolve:m}=M;B.canProject(l,q)?y.isWebMercator(q)?m(E.map(Q)):m(E.map(n)):m(Z.projectMany(v.jsonAdapter,E,l,q,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());h.checkProjectionSupport=function(c,k){return z.apply(this,arguments)};h.project=function(c,k,M,E){if(!c)return c;
M||(M=k,k=c.spatialReference);return y.isValid(k)&&y.isValid(M)&&!y.equals(k,M)?B.canProject(k,M)?(c=y.isWebMercator(M)?Q(c):n(c),c.spatialReference=M,c):Z.projectMany(v.jsonAdapter,[c],k,M,null,E)[0]:c};h.projectMany=function(c,k,M){return L.push(c,k,M)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n,L,c,k,M,E,l,q,m,x,N,K,ha,F){function G(){return!!Ra&&c.isLoaded()}function U(V){y.isNone(qb)&&(qb=Promise.all([c.load(),(new Promise((ea,ba)=>h(["../chunks/geometryEngineBase"],ea,ba))).then(ea=>ea.geometryEngineBase),new Promise((ea,ba)=>h(["./geometryAdapters/hydrated"],ea,ba))]));return qb.then(([,ea,{hydratedAdapter:ba}])=>{B.throwIfAborted(V);mb=ba;Ra=ea.default;Ra._enableProjection(c.pe);Tb.notify()})}function T(V,ea,ba=null,pa=null){return Array.isArray(V)?
0===V.length?[]:I(mb,V,V[0].spatialReference,ea,ba,pa):I(mb,[V],V.spatialReference,ea,ba,pa)[0]}function I(V,ea,ba,pa,ya=null,za=null){if(y.isNone(ba)||y.isNone(pa))return ea;if(J(ba,pa,ya))return ea.map(Da=>y.unwrap(R(Da,ba,pa)));if(y.isNone(ya)){const Da=N.cacheKey(ba,pa);void 0!==Cb[Da]?ya=Cb[Da]:(ya=A(ba,pa,null),y.isNone(ya)&&(ya=new N),Cb[Da]=ya)}if(y.isNone(Ra))throw new Fb;return y.isSome(za)?Ra._project(V,ea,ba,pa,ya,za):Ra._project(V,ea,ba,pa,ya)}function A(V,ea,ba=null){if(y.isNone(Ra))throw new Fb;
if(y.isNone(V)||y.isNone(ea))return null;V=Ra._getTransformation(mb,V,ea,ba,null==ba?void 0:ba.spatialReference);return null!==V?N.fromGE(V):null}function e(V,ea){try{const ba=T(V,ea);if(null==ba)return null;"xmin"in V&&"xmin"in ba&&(ba.zmin=V.zmin,ba.zmax=V.zmax);const pa=F.getGeometryZScaler(ba.type,V.spatialReference,ea);y.isSome(pa)&&pa(ba);return ba}catch(ba){if(!(ba instanceof Fb))throw ba;return null}}function J(V,ea,ba){return ba?!1:K.equals(V,ea)?!0:K.isValid(V)&&K.isValid(ea)&&!!Ya(V,ea,
Ub)}function W(){W=ca._asyncToGenerator(function*(V,ea,ba,pa){if(G())return B.waitTick(pa);if(Array.isArray(V))for(const {source:ya,dest:za,geographicTransformation:Da}of V){if(!J(ya,za,Da))return U(pa)}else if(!J(V,ea,ba))return U(pa);return B.waitTick(pa)});return W.apply(this,arguments)}function R(V,ea,ba){return V?"x"in V?ja(V,ea,new k,ba,0):"xmin"in V?oa(V,ea,new n,ba,0):"rings"in V?na(V,ea,new M,ba,0):"paths"in V?S(V,ea,new E,ba,0):"points"in V?ma(V,ea,new L,ba,0):null:null}function ja(V,ea,
ba,pa,ya){Oa[0]=V.x;Oa[1]=V.y;const za=V.z;Oa[2]=void 0!==za?za:ya;if(!Ja(Oa,ea,0,Oa,pa,0,1))return null;ba.x=Oa[0];ba.y=Oa[1];ba.spatialReference=pa;void 0===za?(ba.z=void 0,ba.hasZ=!1):(ba.z=Oa[2],ba.hasZ=!0);void 0===V.m?(ba.m=void 0,ba.hasM=!1):(ba.m=V.m,ba.hasM=!0);return ba}function ma(V,ea,ba,pa,ya){const {points:za,hasZ:Da,hasM:Ka}=V;V=[];const Va=za.length,Ua=[];for(var Ta of za)Ua.push(Ta[0],Ta[1],Da?Ta[2]:ya);if(!Ja(Ua,ea,0,Ua,pa,0,Va))return null;for(ea=0;ea<Va;++ea){ya=3*ea;Ta=Ua[ya];
const cb=Ua[ya+1];Da&&Ka?V.push([Ta,cb,Ua[ya+2],za[ea][3]]):Da?V.push([Ta,cb,Ua[ya+2]]):Ka?V.push([Ta,cb,za[ea][2]]):V.push([Ta,cb])}ba.points=V;ba.spatialReference=pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function S(V,ea,ba,pa,ya){const {paths:za,hasZ:Da,hasM:Ka}=V;V=[];if(!La(za,Da,Ka,ea,V,pa,ya))return null;ba.paths=V;ba.spatialReference=pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function na(V,ea,ba,pa,ya){const {rings:za,hasZ:Da,hasM:Ka}=V;V=[];if(!La(za,Da,Ka,ea,V,pa,ya))return null;ba.rings=V;ba.spatialReference=
pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function oa(V,ea,ba,pa,ya){const {xmin:za,ymin:Da,xmax:Ka,ymax:Va,hasZ:Ua,hasM:Ta}=V;if(!qa(za,Da,Ua?V.zmin:ya,ea,Oa,pa))return null;ba.xmin=Oa[0];ba.ymin=Oa[1];Ua&&(ba.zmin=Oa[2]);if(!qa(Ka,Va,Ua?V.zmax:ya,ea,Oa,pa))return null;ba.xmax=Oa[0];ba.ymax=Oa[1];Ua&&(ba.zmax=Oa[2]);Ta&&(ba.mmin=V.mmin,ba.mmax=V.mmax);ba.spatialReference=pa;return ba}function qa(V,ea,ba,pa,ya,za){Sa[0]=V;Sa[1]=ea;Sa[2]=ba;return Ja(Sa,pa,0,ya,za,0,1)}function wa(V,ea,ba,pa){if(y.isNone(ea)||
y.isNone(pa)||2>V.length)return!1;2===V.length&&(Sa[0]=V[0],Sa[1]=V[1],Sa[2]=0,V=Sa);return Ja(V,ea,0,ba,pa,0,1)}function Ma(V,ea,ba){if(y.isNone(ea))return!1;ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(y.isNone(ea))return!1;ea(V,0,Sa,0);ba!==Sa&&(ba[0]=Sa[0],ba[1]=Sa[1],2<ba.length&&(ba[2]=Sa[2]));return!0}function Ja(V,ea,ba,pa,ya,za,Da=1){ea=Ya(ea,ya,Ub);if(y.isNone(ea))return!1;if(ea===g){if(V===pa&&ba===za)return!0;Da=ba+3*Da;for(let Ka=ba,Va=za;Ka<Da;Ka++,Va++)pa[Va]=V[Ka];return!0}Da=
ba+3*Da;for(let Ka=ba,Va=za;Ka<Da;Ka+=3,Va+=3)ea(V,Ka,pa,Va);return!0}function La(V,ea,ba,pa,ya,za,Da=0){const Ka=[];for(const Va of V)for(const Ua of Va)Ka.push(Ua[0],Ua[1],ea?Ua[2]:Da);if(!Ja(Ka,pa,0,Ka,za,0,Ka.length/3))return!1;pa=0;ya.length=0;for(const Va of V){V=[];for(const Ua of Va)ea&&ba?V.push([Ka[pa++],Ka[pa++],Ka[pa++],Ua[3]]):ea?V.push([Ka[pa++],Ka[pa++],Ka[pa++]]):(ba?V.push([Ka[pa++],Ka[pa++],Ua[2]]):V.push([Ka[pa++],Ka[pa++]]),pa++);ya.push(V)}return!0}function Za(V,ea,ba,pa){ea=
pa+ea;if(ea<pa/2||ba>ea)return Number.MAX_VALUE;V=Math.abs(lb*V)+Math.asin(ba/ea);return V>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(V)}function b(V,ea,ba){const pa=Math.sin(V);V=Math.cos(V);const ya=Math.sin(ea);ea=Math.cos(ea);ba[0]=-pa;ba[4]=-ya*V;ba[8]=ea*V;ba[12]=0;ba[1]=V;ba[5]=-ya*pa;ba[9]=ea*pa;ba[13]=0;ba[2]=0;ba[6]=ea;ba[10]=ya;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function p(V,ea,ba){b(V,ea,ba);z.transpose(ba,ba);return ba}function fa(V,ea){if(ea.spatialReference===V)return ea.spatialReferenceId;
ea.spatialReference=V;"metersPerUnit"in ea&&(ea.metersPerUnit=r.getMetersPerUnitForSR(V,1));return V.wkt===l.SphericalECEFSpatialReference.wkt?ea.spatialReferenceId=la.SPHERICAL_ECEF:K.isWGS84(V)?ea.spatialReferenceId=la.WGS84:K.isWebMercator(V)?ea.spatialReferenceId=la.WEB_MERCATOR:K.isPlateCarree(V)?ea.spatialReferenceId=la.PLATE_CARREE:V.wkt===l.WGS84ECEFSpatialReference.wkt?ea.spatialReferenceId=la.WGS84_ECEF:V.wkid===ha.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=la.CGCS2000:V.wkt===l.SphericalPCPFMars.wkt?
ea.spatialReferenceId=la.SPHERICAL_MARS_PCPF:V.wkt===l.SphericalPCPFMoon.wkt?ea.spatialReferenceId=la.SPHERICAL_MOON_PCPF:K.isMars(V)?ea.spatialReferenceId=la.GCSMARS2000:K.isMoon(V)?ea.spatialReferenceId=la.GCSMOON2000:ea.spatialReferenceId=la.UNKNOWN}function g(V,ea,ba,pa){V!==ba&&(ba[pa++]=V[ea++],ba[pa++]=V[ea++],ba[pa]=V[ea])}function D(V,ea,ba,pa){ba[pa++]=wb*(V[ea++]/m.earth.radius);ba[pa++]=wb*(Math.PI/2-2*Math.atan(Math.exp(-V[ea++]/m.earth.radius)));ba[pa]=V[ea]}function X(V,ea,ba,pa){D(V,
ea,ba,pa);Aa(ba,pa,ba,pa)}function Y(V,ea,ba,pa){D(V,ea,ba,pa);Qa(ba,pa,ba,pa)}function ka(V,ea,ba,pa,ya){var za=.4999999*Math.PI;za=v.clamp(lb*V[ea+1],-za,za);za=Math.sin(za);ba[pa++]=lb*V[ea]*ya.radius;ba[pa++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));ba[pa]=V[ea+2]}function ia(V,ea,ba,pa){ka(V,ea,ba,pa,m.earth)}function H(V,ea,ba,pa){ba[pa]=V[ea]*Vb;ba[pa+1]=V[ea+1]*Vb;ba[pa+2]=V[ea+2]}function P(V,ea,ba,pa){ba[pa]=V[ea]*Db;ba[pa+1]=V[ea+1]*Db;ba[pa+2]=V[ea+2]}function da(V,ea,ba,pa){D(V,ea,
ba,pa);H(ba,pa,ba,pa)}function ra(V,ea,ba,pa,ya){ya+=V[ea+2];const za=lb*V[ea+1];V=lb*V[ea];ea=Math.cos(za);ba[pa++]=Math.cos(V)*ea*ya;ba[pa++]=Math.sin(V)*ea*ya;ba[pa]=Math.sin(za)*ya}function sa(V,ea,ba,pa){ra(V,ea,ba,pa,m.moon.radius)}function xa(V,ea,ba,pa){ra(V,ea,ba,pa,m.mars.radius)}function Aa(V,ea,ba,pa){ra(V,ea,ba,pa,m.earth.radius)}function Ba(V,ea,ba,pa,ya){var za=V[ea];const Da=V[ea+1];ea=V[ea+2];V=Math.sqrt(za*za+Da*Da+ea*ea);ea=v.asinClamped(ea/(0===V?1:V));za=Math.atan2(Da,za);ba[pa++]=
wb*za;ba[pa++]=wb*ea;ba[pa]=V-ya}function Ia(V,ea,ba,pa){Ba(V,ea,ba,pa,m.moon.radius)}function Ha(V,ea,ba,pa){Ba(V,ea,ba,pa,m.mars.radius)}function Ea(V,ea,ba,pa){Ba(V,ea,ba,pa,m.earth.radius)}function Fa(V,ea,ba,pa){Ea(V,ea,ba,pa);ia(ba,pa,ba,pa)}function Ga(V,ea,ba,pa){Ea(V,ea,ba,pa);Qa(ba,pa,ba,pa)}function Qa(V,ea,ba,pa){{var ya=m.earth;const Da=lb*V[ea];var za=lb*V[ea+1];V=V[ea+2];ea=Math.sin(za);za=Math.cos(za);const Ka=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ea*ea);ba[pa++]=(Ka+V)*za*
Math.cos(Da);ba[pa++]=(Ka+V)*za*Math.sin(Da);ba[pa++]=(Ka*(1-ya.eccentricitySquared)+V)*ea}}function ta(V,ea,ba,pa){var ya=x.earthEllipsoidConstants,za=V[ea],Da=V[ea+1];V=V[ea+2];let Ka;ea=Math.abs(V);var Va=za*za+Da*Da;var Ua=Math.sqrt(Va);var Ta=Va+V*V;var cb=Math.sqrt(Ta);za=Math.atan2(Da,za);var nb=V*V/Ta;Ta=Va/Ta;Da=ya.a2/cb;Va=ya.a3-ya.a4/cb;.3<Ta?(nb=ea/cb*(1+Ta*(ya.a1+Da+nb*Va)/cb),cb=Math.asin(nb),Da=nb*nb,Ta=Math.sqrt(1-Da)):(Ta=Ua/cb*(1-nb*(ya.a5-Da-Ta*Va)/cb),cb=Math.acos(Ta),Da=1-Ta*
Ta,nb=Math.sqrt(Da));Ka=1-m.earth.eccentricitySquared*Da;Da=m.earth.radius/Math.sqrt(Ka);ya=ya.a6*Da;Da=Ua-Da*Ta;Va=ea-ya*nb;ea=Ta*Da+nb*Va;Ua=Ta*Va-nb*Da;ya=Ua/(ya/Ka+ea);cb+=ya;0>V&&(cb=-cb);ba[pa++]=wb*za;ba[pa++]=wb*cb;ba[pa]=ea+Ua*ya/2}function $a(V,ea,ba,pa){ta(V,ea,ba,pa);Aa(ba,pa,ba,pa)}function ab(V,ea,ba,pa){ta(V,ea,ba,pa);ia(ba,pa,ba,pa)}function Ya(V,ea,ba=bb()){return y.isNone(V)||y.isNone(ea)?null:a(V,ea,ba).projector}function a(V,ea,ba){if(y.isNone(V)||y.isNone(ea)||ba.source.spatialReference===
V&&ba.dest.spatialReference===ea)return ba;const pa=fa(V,ba.source),ya=fa(ea,ba.dest);pa===la.UNKNOWN&&ya===la.UNKNOWN?K.equals(V,ea)?ba.projector=g:ba.projector=null:ba.projector=gb[pa][ya];return ba}function bb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:g}}let Ra=null,mb=null,qb=null,Cb={};const Tb=new u.SimpleObservable;let Fb=function(V){function ea(){return V.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ca._inheritsLoose(ea,V);return ea}(Z);var la;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";
V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const Vb=m.earth.radius*Math.PI/180,Db=180/(m.earth.radius*Math.PI),gb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:H,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.CGCS2000]:{[la.CGCS2000]:g,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:H,[la.WGS84]:null,[la.WGS84_ECEF]:Qa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:g,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,
[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:g,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:sa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:D,[la.WGS84_COMPARABLE_LON_LAT]:D,
[la.SPHERICAL_ECEF]:X,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:g,[la.PLATE_CARREE]:da,[la.WGS84]:D,[la.WGS84_ECEF]:Y},[la.WGS84_ECEF]:{[la.CGCS2000]:ta,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ta,[la.WGS84_COMPARABLE_LON_LAT]:ta,[la.SPHERICAL_ECEF]:$a,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(V,ea,ba,pa){ta(V,ea,ba,pa);H(ba,pa,ba,pa)},[la.WGS84]:ta,
[la.WGS84_ECEF]:g},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ea,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ea,[la.WGS84_COMPARABLE_LON_LAT]:Ea,[la.SPHERICAL_ECEF]:g,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(V,ea,ba,pa){Ea(V,ea,ba,pa);H(ba,pa,ba,pa)},[la.WGS84]:Ea,[la.WGS84_ECEF]:Ga},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ha,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:null,
[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:g,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ia,[la.LON_LAT]:Ia,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:g,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:g,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:g,[la.GCSMARS2000]:g,[la.GCSMOON2000]:g,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:sa,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:H,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:H,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.PLATE_CARREE]:{[la.CGCS2000]:P,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:P,
[la.WGS84_COMPARABLE_LON_LAT]:P,[la.SPHERICAL_ECEF]:function(V,ea,ba,pa){P(V,ea,ba,pa);Aa(ba,pa,ba,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(V,ea,ba,pa){P(V,ea,ba,pa);ia(ba,pa,ba,pa)},[la.PLATE_CARREE]:g,[la.WGS84]:P,[la.WGS84_ECEF]:function(V,ea,ba,pa){P(V,ea,ba,pa);Qa(ba,pa,ba,pa)}}},rb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Gb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub=bb(),yc=bb(),lb=v.deg2rad(1),
wb=v.rad2deg(1),Sa=Q.create(),fb=Q.create(),sb=Q.create(),Oa=Q.create(),Hb=Q.create();d.canProjectToWGS84ComparableLonLat=function(V){if(y.isNone(V))return!1;V=fa(V,rb);return!!gb[V][la.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=J;d.computeENUToSphericalPCPFLocalRotation=b;d.computeSphericalPCPFToENULocalRotation=p;d.computeTranslationToOriginAndRotation=function(V,ea,ba,pa){if(y.isNone(V)||y.isNone(pa))return!1;var ya=fa(V,rb),za=fa(pa,Gb);if(ya===za&&za!==la.SPHERICAL_ECEF&&za!==la.SPHERICAL_MARS_PCPF&&
za!==la.SPHERICAL_MOON_PCPF&&(ya!==la.UNKNOWN||K.equals(V,pa)))return z.fromTranslation(ba,ea),!0;if(za===la.SPHERICAL_ECEF||za===la.SPHERICAL_MARS_PCPF||za===la.SPHERICAL_MOON_PCPF){ya=gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(y.isNone(ya)||y.isNone(za))return!1;ya(ea,0,fb,0);za(fb,0,sb,0);b(lb*fb[0],lb*fb[1],ba);ba[12]=sb[0];ba[13]=sb[1];ba[14]=sb[2];return!0}if((za===la.WEB_MERCATOR||za===la.PLATE_CARREE)&&(ya===la.WGS84||ya===la.CGCS2000&&za===la.PLATE_CARREE||ya===la.SPHERICAL_ECEF||ya===la.WEB_MERCATOR)){V=
gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(y.isNone(V)||y.isNone(za))return!1;V(ea,0,fb,0);za(fb,0,sb,0);ya===la.SPHERICAL_ECEF?p(lb*fb[0],lb*fb[1],ba):z.identity(ba);ba[12]=sb[0];ba[13]=sb[1];ba[14]=sb[2];return!0}return!1};d.getProjectorName=function(V,ea){switch(Ya(V,ea,Ub)){case g:return"copy3";case Aa:return"wgs84ToSphericalECEF";case ia:return"wgs84ToWebMercator";case H:return"wgs84ToPlateCarree";case Qa:return"wgs84ToWGS84ECEF";case D:return"webMercatorToWGS84";case X:return"webMercatorToSphericalECEF";
case Y:return"webMercatorToWGS84ECEF";case da:return"webMercatorToPlateCarree";case ta:return"wgs84ECEFToWGS84";case $a:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ea:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case Ia:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case xa:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};
d.getTransformation=A;d.getTransformations=function(V,ea,ba=null){if(y.isNone(Ra))throw new Fb;V=Ra._getTransformationBySuitability(mb,V,ea,ba,null==ba?void 0:ba.spatialReference);if(null!==V){ea=[];for(const pa of V)ea.push(N.fromGE(pa));return ea}return[]};d.initializeProjection=function(V,ea,ba,pa){return W.apply(this,arguments)};d.isLoaded=G;d.load=U;d.localLinearScaleFactors=function(V,ea,ba,pa){if(y.isNone(ea)||y.isNone(pa))return!1;const ya=fa(ea,rb);var za=fa(pa,Gb);if(ya===za&&ya!==la.UNKNOWN||
K.equals(ea,pa))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(ya===la.SPHERICAL_ECEF){ea=O.length(V);V=ea/Math.sqrt(V[0]*V[0]+V[1]*V[1]);ea/=m.earth.radius;if(za===la.WEB_MERCATOR)return ba[0]=V*ea,ba[1]=V*ea,ba[2]=1,!0;if(za===la.WGS84||za===la.CGCS2000)return za=Db,ba[0]=za*V*ea,ba[1]=za*ea,ba[2]=1,!0}else if(ya===la.PLATE_CARREE){if(za===la.WGS84||za===la.CGCS2000)return ba[0]=Db,ba[1]=Db,ba[2]=1,!0;if(za===la.WEB_MERCATOR)return za=V[1]/m.earth.radius,ba[0]=1,ba[1]=1/Math.cos(za),ba[2]=1,!0}return!1};
d.lonLatToSphericalPCPF=function(V,ea,ba,pa){const ya=Math.cos(ba);V[0]=Math.cos(ea)*ya*pa;V[1]=Math.sin(ea)*ya*pa;V[2]=Math.sin(ba)*pa};d.lonLatToWebMercatorComparable=ka;d.project=T;d.projectBoundingRect=function(V,ea,ba,pa){if(null==V)return!1;if(K.equals(ea,pa))return q.copy(ba,V),!0;Sa[0]=V[0];Sa[1]=V[1];Sa[2]=0;if(!Ja(Sa,ea,0,Sa,pa,0,1))return!1;ba[0]=Sa[0];ba[1]=Sa[1];Sa[0]=V[2];Sa[1]=V[3];Sa[2]=0;if(!Ja(Sa,ea,0,Sa,pa,0,1))return!1;ba[2]=Sa[0];ba[3]=Sa[1];return!0};d.projectBoundingSphere=
function(V,ea,ba,pa){if(y.isNone(ea)||y.isNone(pa))return!1;ea=a(ea,pa,yc);if(ea.projector===g)return ba[0]=V[0],ba[1]=V[1],ba[2]=V[2],ba[3]=V[3],!0;if(y.isNone(ea.projector))return!1;const {source:ya,dest:za}=ea;if(za.spatialReferenceId===la.WEB_MERCATOR){ea=gb[ya.spatialReferenceId][la.WGS84];if(y.isNone(ea))return!1;ea(V,0,fb,0);ia(fb,0,ba,0);ba[3]=Za(fb[1],V[2],V[3],m.earth.radius);return!0}if(ya.spatialReferenceId!==la.WGS84&&ya.spatialReferenceId!==la.CGCS2000||za.spatialReferenceId!==la.PLATE_CARREE)ea.projector(V,
0,ba,0),ba[3]=V[3]*ya.metersPerUnit/za.metersPerUnit;else{pa=gb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Da=V[3];y.isSome(gb[ya.spatialReferenceId][la.SPHERICAL_ECEF])&&y.isSome(pa)&&(Da=Za(V[1],V[2],V[3],m.earth.radius));ea.projector(V,0,ba,0);ba[3]=Da}return!0};d.projectBuffer=Ja;d.projectDirection=function(V,ea,ba,pa,ya){O.copy(Oa,V);O.add(Hb,V,ea);wa(Oa,ba,Oa,ya);wa(Hb,ba,Hb,ya);O.subtract(pa,Hb,Oa);O.normalize(pa,pa)};d.projectExtent=function(V,ea,ba=ea.spatialReference,pa=0){return y.isSome(ba)&&
y.isSome(oa(V,V.spatialReference,ea,ba,pa))};d.projectMany=I;d.projectMultipoint=function(V,ea,ba=ea.spatialReference,pa=0){return y.isNone(ba)?!1:y.isSome(ma(V,V.spatialReference,ea,ba,pa))};d.projectOrLoad=function(V,ea){return y.isNone(V)?{pending:null,geometry:null}:K.equals(V.spatialReference,ea)?{pending:null,geometry:V}:K.isValid(V.spatialReference)&&K.isValid(ea)?J(V.spatialReference,ea)?{pending:null,geometry:e(V,ea)}:G()?{pending:null,geometry:e(V,ea)}:(t.trackAccess(Tb),{pending:U(),geometry:null}):
{pending:null,geometry:null}};d.projectPoint=function(V,ea,ba=ea.spatialReference,pa=0){return y.isNone(ba)?!1:y.isSome(ja(V,V.spatialReference,ea,ba,pa))};d.projectPointToVector=function(V,ea,ba,pa=0){Oa[0]=V.x;Oa[1]=V.y;const ya=V.z;Oa[2]=void 0!==ya?ya:pa;return Ja(Oa,V.spatialReference,0,ea,ba,0,1)};d.projectPointToWGS84ComparableLonLat=function(V,ea){Oa[0]=V.x;Oa[1]=V.y;const ba=V.z;Oa[2]=void 0!==ba?ba:0;return Ma(Oa,V.spatialReference,ea)};d.projectPolygon=function(V,ea,ba=ea.spatialReference,
pa=0){return y.isSome(ba)&&y.isSome(na(V,V.spatialReference,ea,ba,pa))};d.projectPolygonToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ea,rings:ba},pa,ya=0){ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(y.isNone(ea))return!1;V=V?za=>za:za=>O.set(Oa,za[0],za[1],ya);for(const za of ba){ba=[];for(const Da of za){const Ka=[0,0,ya];ea(V(Da),0,Ka,0);ba.push(Ka)}pa.push(ba)}return!0};d.projectPolyline=function(V,ea,ba=ea.spatialReference,pa=0){return y.isSome(ba)&&y.isSome(S(V,V.spatialReference,
ea,ba,pa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ea,paths:ba},pa,ya=0){ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(y.isNone(ea))return!1;V=V?za=>za:za=>O.set(Oa,za[0],za[1],ya);for(const za of ba){ba=[];for(const Da of za){const Ka=[0,0,ya];ea(V(Da),0,Ka,0);ba.push(Ka)}pa.push(ba)}return!0};d.projectVectorToDehydratedPoint=function(V,ea,ba){return Ja(V,ea,0,Oa,ba.spatialReference,0,1)?(ba.x=Oa[0],ba.y=Oa[1],ba.z=Oa[2],ba):null};d.projectVectorToPoint=
function(V,ea,ba){if(y.isNone(ea)||y.isNone(ba))return null;const pa=new k({spatialReference:ba});return Ja(V,ea,0,Oa,ba,0,1)?(pa.x=Oa[0],pa.y=Oa[1],pa.z=Oa[2],pa):null};d.projectVectorToVector=wa;d.projectVectorToWGS84ComparableLonLat=function(V,ea,ba){return Ma(V,ea,ba)};d.projectWithoutEngine=R;d.projectXYZToVector=qa;d.sphericalPCPFtoLonLatElevation=Ba;d.test={get loadPromise(){return qb}};d.tryProjectWithZConversion=e;d.unload=function(){qb=mb=Ra=null;Cb={}};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(h,d,ca,Z,v,y,B,r,t){function u(S){S=J[S];if(!S)throw Error("unknown type");return S}function z(S){return e[S].baseUnit}function O(S,na=null){na=na||u(S);return e[na].baseUnit===S}function Q(S,
na,oa){if(na===oa)return S;const qa=u(na);if(qa!==u(oa))throw Error("incompatible units");S=O(na,qa)?S:S*e[qa].units[na].inBaseUnits;return O(oa,qa)?S:S/e[qa].units[oa].inBaseUnits}function n(S,na){S=Q(S,na,"meters");return 3E3>Math.abs(S)?"meters":"kilometers"}function L(S,na){S=Q(S,na,"meters");return 1E5>Math.abs(S)?"meters":"kilometers"}function c(S,na){S=Q(S,na,"feet");return 1E3>Math.abs(S)?"feet":"miles"}function k(S,na){S=Q(S,na,"feet");return 1E5>Math.abs(S)?"feet":"miles"}function M(S,na){S=
Q(S,na,"square-meters");return 3E6>Math.abs(S)?"square-meters":"square-kilometers"}function E(S,na){S=Q(S,na,"square-feet");return 1E6>Math.abs(S)?"square-feet":"square-miles"}function l(S){return A.fromJSON(S.toLowerCase())||null}function q(S){const na=m(S),oa=S instanceof y?v.getReferenceEllipsoid(S).metersPerDegree:1E5;return na>=oa?"meters":K(S)}function m(S,na=B.earth.metersPerDegree){return Z.unwrapOr(x(S,!0),na)}function x(S,na=!1){let oa,qa,wa=null;null!=S&&("object"===typeof S?(oa=S.wkid,
qa=S.wkt):"number"===typeof S?oa=S:"string"===typeof S&&(qa=S));if(oa){if(r.isWKIDFromMars(oa))return B.mars.metersPerDegree;if(r.isWKIDFromMoon(oa))return B.moon.metersPerDegree;wa=U.values[U[oa]];!wa&&na&&I.has(oa)&&(wa=F)}else qa&&(/^PROJCS/i.test(qa)?wa=N(G.exec(qa),wa):/^GEOCCS/i.test(qa)&&(wa=N(T.exec(qa),wa)));return wa}function N(S,na){return S&&S[1]?parseFloat(S[1].split(",")[1]):na}function K(S){var na=null;if(null!=S)if("object"===typeof S){var oa=S.wkid;var qa=S.wkt}else"number"===typeof S?
oa=S:"string"===typeof S&&(qa=S);if(oa)na=U.units[U[oa]];else if(qa&&(S=/^PROJCS/i.test(qa)?G:/^GEOCCS/i.test(qa)?T:null)&&(qa=S.exec(qa))&&qa[1]&&(qa=qa[1],na=(na=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&na[1],!na||!U.units.includes(na)))for(qa=parseFloat(qa.split(",")[1]),na=null,S=U.values,oa=0;oa<S.length;++oa)if(1E-7>Math.abs(qa-S[oa])){na=U.units[oa];break}return Z.isSome(na)?l(na):null}function ha(S){S=K(S);if(Z.isNone(S))return null;switch(S){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const F=B.earth.radius*Math.PI/200,G=/UNIT\[([^\]]+)\]\]$/i,U=t,T=/UNIT\[([^\]]+)\]/i,I=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),A=ca.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};t={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(S=>S*S)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const e={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:t},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},J=(()=>{const S={};for(const na in e)for(const oa in e[na].units)S[oa]=na;return S})(),W="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),R=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ja={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ma={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};d=ca.strict()(ja);t=ca.strict()(ma);ca=ca.strict()({...ja,...ma});h.areaUnitFromSpatialReference=function(S){S=K(S);return Z.isNone(S)?null:R.get(S)};h.areaUnitsJSONMap=d;h.baseUnitForUnit=function(S){return z(u(S))};h.baseUnitForUnitType=z;h.convertUnit=Q;h.getDefaultUnitForView=function(S){var na;if(Z.isNone(S))return"metric";var oa=S.map;if(oa=oa&&"portalItem"in oa?null==(na=oa.portalItem)?void 0:na.portal:null){var qa,wa;switch(null!=(qa=null==oa?void 0:null==(wa=oa.user)?void 0:
wa.units)?qa:oa.units){case "metric":return"metric";case "english":return"imperial"}}return Z.unwrapOr(ha(S.spatialReference),"metric")};h.getDefaultUnitSystem=ha;h.getMetersPerUnit=x;h.getMetersPerUnitForSR=m;h.getMetersPerVerticalUnitForSR=function(S){if(S&&"object"===typeof S&&!r.isEarth(S))return 1;S=m(S);return 1E5<S?1:S};h.getUnitString=K;h.getVerticalUnitStringForSR=q;h.inchesPerMeter=39.37;h.isBaseUnit=O;h.isMeasurementSystem=function(S){return"imperial"===S||"metric"===S};h.lengthToDegrees=
function(S,na,oa){return Q(S,na,"meters")/(oa*Math.PI/180)};h.lengthUnitFromSpatialReference=function(S){S=K(S);return Z.isNone(S)||!W.includes(S)?null:S};h.lengthUnitsJSONMap=t;h.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");h.measurementLengthUnits=W;h.preferredAreaUnit=function(S,na,oa){switch(oa){case "metric":return M(S,na);case "imperial":return E(S,na);default:return oa}};
h.preferredImperialAreaUnit=E;h.preferredImperialLengthUnit=c;h.preferredImperialVerticalLengthUnit=k;h.preferredLengthUnit=function(S,na,oa){switch(oa){case "metric":return n(S,na);case "imperial":return c(S,na);default:return oa}};h.preferredMetricAreaUnit=M;h.preferredMetricLengthUnit=n;h.preferredMetricVerticalLengthUnit=L;h.preferredVerticalLengthUnit=function(S,na,oa){switch(oa){case "metric":return L(S,na);case "imperial":return k(S,na);default:return oa}};h.unitFromRESTJSON=l;h.unitToRESTJSON=
function(S){return A.toJSON(S)||null};h.unitType=u;h.unitsJSONMap=ca;h.verticalLengthUnitFromSpatialReference=function(S){S=q(S);return Z.isNone(S)||!W.includes(S)?null:S};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(h,d,ca,Z){function v(u){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${u.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const y=v(ca.earth),B=v(ca.mars),r=v(ca.moon),t=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ca.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});h.SphericalECEFSpatialReference=y;h.SphericalPCPFMars=
B;h.SphericalPCPFMoon=r;h.WGS84ECEFSpatialReference=t;h.createSphericalPCPF=v;h.getReferenceEllipsoid=function(u){return u&&(Z.isMars(u)||u===B)?ca.mars:u&&(Z.isMoon(u)||u===r)?ca.moon:ca.earth};h.getReferenceEllipsoidFromWKID=function(u){return Z.isWKIDFromMars(u)?ca.mars:Z.isWKIDFromMoon(u)?ca.moon:ca.earth};h.getSphericalPCPF=function(u){return u&&(Z.isMars(u)||u===B)?B:u&&(Z.isMoon(u)||u===r)?r:y};h.getSphericalPCPFForEllipsoid=function(u){return u&&u===ca.mars?B:u&&u===ca.moon?r:y};Object.defineProperties(h,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(h,d){let ca=function(){function Z(){this._observers=[]}var v=Z.prototype;v.observe=function(y){this._observers.includes(y)||this._observers.push(y);return new d.ObservationHandle(this._observers,y)};v.notify=function(){const y=this._observers.slice();for(let B=0;B<y.length;++B){const r=y[B];r.onInvalidated();r.onCommitted()}};
return Z}();h.SimpleObservable=ca;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(h,d,ca){function Z(b,p){b[0]=p[0];b[1]=p[1];b[2]=p[2];b[3]=p[3];b[4]=p[4];b[5]=p[5];b[6]=p[6];b[7]=p[7];b[8]=p[8];b[9]=p[9];b[10]=p[10];b[11]=p[11];b[12]=p[12];b[13]=p[13];b[14]=p[14];b[15]=p[15];return b}function v(b,p,fa,g,D,X,Y,ka,ia,H,P,da,ra,sa,xa,Aa,Ba){b[0]=p;b[1]=fa;b[2]=g;b[3]=D;b[4]=
X;b[5]=Y;b[6]=ka;b[7]=ia;b[8]=H;b[9]=P;b[10]=da;b[11]=ra;b[12]=sa;b[13]=xa;b[14]=Aa;b[15]=Ba;return b}function y(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function B(b,p){if(b===p){const fa=p[1],g=p[2],D=p[3],X=p[6],Y=p[7],ka=p[11];b[1]=p[4];b[2]=p[8];b[3]=p[12];b[4]=fa;b[6]=p[9];b[7]=p[13];b[8]=g;b[9]=X;b[11]=p[14];b[12]=D;b[13]=Y;b[14]=ka}else b[0]=p[0],b[1]=p[4],b[2]=p[8],b[3]=p[12],b[4]=p[1],b[5]=p[5],b[6]=
p[9],b[7]=p[13],b[8]=p[2],b[9]=p[6],b[10]=p[10],b[11]=p[14],b[12]=p[3],b[13]=p[7],b[14]=p[11],b[15]=p[15];return b}function r(b,p){const fa=p[0],g=p[1],D=p[2],X=p[3],Y=p[4],ka=p[5],ia=p[6],H=p[7],P=p[8],da=p[9],ra=p[10],sa=p[11],xa=p[12],Aa=p[13],Ba=p[14];p=p[15];const Ia=fa*ka-g*Y,Ha=fa*ia-D*Y,Ea=fa*H-X*Y,Fa=g*ia-D*ka,Ga=g*H-X*ka,Qa=D*H-X*ia,ta=P*Aa-da*xa,$a=P*Ba-ra*xa,ab=P*p-sa*xa,Ya=da*Ba-ra*Aa,a=da*p-sa*Aa,bb=ra*p-sa*Ba;let Ra=Ia*bb-Ha*a+Ea*Ya+Fa*ab-Ga*$a+Qa*ta;if(!Ra)return null;Ra=1/Ra;b[0]=
(ka*bb-ia*a+H*Ya)*Ra;b[1]=(D*a-g*bb-X*Ya)*Ra;b[2]=(Aa*Qa-Ba*Ga+p*Fa)*Ra;b[3]=(ra*Ga-da*Qa-sa*Fa)*Ra;b[4]=(ia*ab-Y*bb-H*$a)*Ra;b[5]=(fa*bb-D*ab+X*$a)*Ra;b[6]=(Ba*Ea-xa*Qa-p*Ha)*Ra;b[7]=(P*Qa-ra*Ea+sa*Ha)*Ra;b[8]=(Y*a-ka*ab+H*ta)*Ra;b[9]=(g*ab-fa*a-X*ta)*Ra;b[10]=(xa*Ga-Aa*Ea+p*Ia)*Ra;b[11]=(da*Ea-P*Ga-sa*Ia)*Ra;b[12]=(ka*$a-Y*Ya-ia*ta)*Ra;b[13]=(fa*Ya-g*$a+D*ta)*Ra;b[14]=(Aa*Ha-xa*Fa-Ba*Ia)*Ra;b[15]=(P*Fa-da*Ha+ra*Ia)*Ra;return b}function t(b,p){const fa=p[0],g=p[1],D=p[2],X=p[3],Y=p[4],ka=p[5],ia=
p[6],H=p[7],P=p[8],da=p[9],ra=p[10],sa=p[11],xa=p[12],Aa=p[13],Ba=p[14];p=p[15];b[0]=ka*(ra*p-sa*Ba)-da*(ia*p-H*Ba)+Aa*(ia*sa-H*ra);b[1]=-(g*(ra*p-sa*Ba)-da*(D*p-X*Ba)+Aa*(D*sa-X*ra));b[2]=g*(ia*p-H*Ba)-ka*(D*p-X*Ba)+Aa*(D*H-X*ia);b[3]=-(g*(ia*sa-H*ra)-ka*(D*sa-X*ra)+da*(D*H-X*ia));b[4]=-(Y*(ra*p-sa*Ba)-P*(ia*p-H*Ba)+xa*(ia*sa-H*ra));b[5]=fa*(ra*p-sa*Ba)-P*(D*p-X*Ba)+xa*(D*sa-X*ra);b[6]=-(fa*(ia*p-H*Ba)-Y*(D*p-X*Ba)+xa*(D*H-X*ia));b[7]=fa*(ia*sa-H*ra)-Y*(D*sa-X*ra)+P*(D*H-X*ia);b[8]=Y*(da*p-sa*Aa)-
P*(ka*p-H*Aa)+xa*(ka*sa-H*da);b[9]=-(fa*(da*p-sa*Aa)-P*(g*p-X*Aa)+xa*(g*sa-X*da));b[10]=fa*(ka*p-H*Aa)-Y*(g*p-X*Aa)+xa*(g*H-X*ka);b[11]=-(fa*(ka*sa-H*da)-Y*(g*sa-X*da)+P*(g*H-X*ka));b[12]=-(Y*(da*Ba-ra*Aa)-P*(ka*Ba-ia*Aa)+xa*(ka*ra-ia*da));b[13]=fa*(da*Ba-ra*Aa)-P*(g*Ba-D*Aa)+xa*(g*ra-D*da);b[14]=-(fa*(ka*Ba-ia*Aa)-Y*(g*Ba-D*Aa)+xa*(g*ia-D*ka));b[15]=fa*(ka*ra-ia*da)-Y*(g*ra-D*da)+P*(g*ia-D*ka);return b}function u(b){const p=b[0],fa=b[1],g=b[2],D=b[3],X=b[4],Y=b[5],ka=b[6],ia=b[7],H=b[8],P=b[9],da=
b[10],ra=b[11],sa=b[12],xa=b[13],Aa=b[14];b=b[15];return(p*Y-fa*X)*(da*b-ra*Aa)-(p*ka-g*X)*(P*b-ra*xa)+(p*ia-D*X)*(P*Aa-da*xa)+(fa*ka-g*Y)*(H*b-ra*sa)-(fa*ia-D*Y)*(H*Aa-da*sa)+(g*ia-D*ka)*(H*xa-P*sa)}function z(b,p,fa){const g=p[0],D=p[1],X=p[2],Y=p[3],ka=p[4],ia=p[5],H=p[6],P=p[7],da=p[8],ra=p[9],sa=p[10],xa=p[11],Aa=p[12],Ba=p[13],Ia=p[14];p=p[15];let Ha=fa[0],Ea=fa[1],Fa=fa[2],Ga=fa[3];b[0]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[1]=Ha*D+Ea*ia+Fa*ra+Ga*Ba;b[2]=Ha*X+Ea*H+Fa*sa+Ga*Ia;b[3]=Ha*Y+Ea*P+Fa*xa+Ga*p;
Ha=fa[4];Ea=fa[5];Fa=fa[6];Ga=fa[7];b[4]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[5]=Ha*D+Ea*ia+Fa*ra+Ga*Ba;b[6]=Ha*X+Ea*H+Fa*sa+Ga*Ia;b[7]=Ha*Y+Ea*P+Fa*xa+Ga*p;Ha=fa[8];Ea=fa[9];Fa=fa[10];Ga=fa[11];b[8]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[9]=Ha*D+Ea*ia+Fa*ra+Ga*Ba;b[10]=Ha*X+Ea*H+Fa*sa+Ga*Ia;b[11]=Ha*Y+Ea*P+Fa*xa+Ga*p;Ha=fa[12];Ea=fa[13];Fa=fa[14];Ga=fa[15];b[12]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[13]=Ha*D+Ea*ia+Fa*ra+Ga*Ba;b[14]=Ha*X+Ea*H+Fa*sa+Ga*Ia;b[15]=Ha*Y+Ea*P+Fa*xa+Ga*p;return b}function O(b,p,fa){const g=fa[0],D=fa[1];fa=fa[2];
if(p===b)b[12]=p[0]*g+p[4]*D+p[8]*fa+p[12],b[13]=p[1]*g+p[5]*D+p[9]*fa+p[13],b[14]=p[2]*g+p[6]*D+p[10]*fa+p[14],b[15]=p[3]*g+p[7]*D+p[11]*fa+p[15];else{const X=p[0],Y=p[1],ka=p[2],ia=p[3],H=p[4],P=p[5],da=p[6],ra=p[7],sa=p[8],xa=p[9],Aa=p[10],Ba=p[11];b[0]=X;b[1]=Y;b[2]=ka;b[3]=ia;b[4]=H;b[5]=P;b[6]=da;b[7]=ra;b[8]=sa;b[9]=xa;b[10]=Aa;b[11]=Ba;b[12]=X*g+H*D+sa*fa+p[12];b[13]=Y*g+P*D+xa*fa+p[13];b[14]=ka*g+da*D+Aa*fa+p[14];b[15]=ia*g+ra*D+Ba*fa+p[15]}return b}function Q(b,p,fa){const g=fa[0],D=fa[1];
fa=fa[2];b[0]=p[0]*g;b[1]=p[1]*g;b[2]=p[2]*g;b[3]=p[3]*g;b[4]=p[4]*D;b[5]=p[5]*D;b[6]=p[6]*D;b[7]=p[7]*D;b[8]=p[8]*fa;b[9]=p[9]*fa;b[10]=p[10]*fa;b[11]=p[11]*fa;b[12]=p[12];b[13]=p[13];b[14]=p[14];b[15]=p[15];return b}function n(b,p,fa,g){let D=g[0],X=g[1];g=g[2];let Y=Math.sqrt(D*D+X*X+g*g);var ka=void 0,ia=void 0;let H=void 0,P=void 0,da=void 0,ra=void 0,sa=void 0,xa=void 0,Aa=void 0,Ba=void 0,Ia=void 0,Ha=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Qa=void 0,ta=void 0,$a=void 0,ab=void 0,Ya=void 0,a=
void 0,bb=void 0;ia=ka=void 0;if(Y<ca.EPSILON)return null;Y=1/Y;D*=Y;X*=Y;g*=Y;ka=Math.sin(fa);ia=Math.cos(fa);H=1-ia;P=p[0];da=p[1];ra=p[2];sa=p[3];xa=p[4];Aa=p[5];Ba=p[6];Ia=p[7];Ha=p[8];Ea=p[9];Fa=p[10];Ga=p[11];Qa=D*D*H+ia;ta=X*D*H+g*ka;$a=g*D*H-X*ka;ab=D*X*H-g*ka;Ya=X*X*H+ia;a=g*X*H+D*ka;bb=D*g*H+X*ka;ka=X*g*H-D*ka;ia=g*g*H+ia;b[0]=P*Qa+xa*ta+Ha*$a;b[1]=da*Qa+Aa*ta+Ea*$a;b[2]=ra*Qa+Ba*ta+Fa*$a;b[3]=sa*Qa+Ia*ta+Ga*$a;b[4]=P*ab+xa*Ya+Ha*a;b[5]=da*ab+Aa*Ya+Ea*a;b[6]=ra*ab+Ba*Ya+Fa*a;b[7]=sa*ab+
Ia*Ya+Ga*a;b[8]=P*bb+xa*ka+Ha*ia;b[9]=da*bb+Aa*ka+Ea*ia;b[10]=ra*bb+Ba*ka+Fa*ia;b[11]=sa*bb+Ia*ka+Ga*ia;p!==b&&(b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);return b}function L(b,p,fa){const g=Math.sin(fa);fa=Math.cos(fa);const D=p[4],X=p[5],Y=p[6],ka=p[7],ia=p[8],H=p[9],P=p[10],da=p[11];p!==b&&(b[0]=p[0],b[1]=p[1],b[2]=p[2],b[3]=p[3],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[4]=D*fa+ia*g;b[5]=X*fa+H*g;b[6]=Y*fa+P*g;b[7]=ka*fa+da*g;b[8]=ia*fa-D*g;b[9]=H*fa-X*g;b[10]=P*fa-Y*g;b[11]=da*
fa-ka*g;return b}function c(b,p,fa){const g=Math.sin(fa);fa=Math.cos(fa);const D=p[0],X=p[1],Y=p[2],ka=p[3],ia=p[8],H=p[9],P=p[10],da=p[11];p!==b&&(b[4]=p[4],b[5]=p[5],b[6]=p[6],b[7]=p[7],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[0]=D*fa-ia*g;b[1]=X*fa-H*g;b[2]=Y*fa-P*g;b[3]=ka*fa-da*g;b[8]=D*g+ia*fa;b[9]=X*g+H*fa;b[10]=Y*g+P*fa;b[11]=ka*g+da*fa;return b}function k(b,p,fa){const g=Math.sin(fa);fa=Math.cos(fa);const D=p[0],X=p[1],Y=p[2],ka=p[3],ia=p[4],H=p[5],P=p[6],da=p[7];p!==b&&(b[8]=p[8],
b[9]=p[9],b[10]=p[10],b[11]=p[11],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[0]=D*fa+ia*g;b[1]=X*fa+H*g;b[2]=Y*fa+P*g;b[3]=ka*fa+da*g;b[4]=ia*fa-D*g;b[5]=H*fa-X*g;b[6]=P*fa-Y*g;b[7]=da*fa-ka*g;return b}function M(b,p){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=p[0];b[13]=p[1];b[14]=p[2];b[15]=1;return b}function E(b,p){b[0]=p[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=p[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=p[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=
1;return b}function l(b,p,fa){let g=fa[0],D=fa[1];fa=fa[2];let X=Math.sqrt(g*g+D*D+fa*fa),Y=void 0,ka=void 0,ia=void 0;if(X<ca.EPSILON)return null;X=1/X;g*=X;D*=X;fa*=X;Y=Math.sin(p);ka=Math.cos(p);ia=1-ka;b[0]=g*g*ia+ka;b[1]=D*g*ia+fa*Y;b[2]=fa*g*ia-D*Y;b[3]=0;b[4]=g*D*ia-fa*Y;b[5]=D*D*ia+ka;b[6]=fa*D*ia+g*Y;b[7]=0;b[8]=g*fa*ia+D*Y;b[9]=D*fa*ia-g*Y;b[10]=fa*fa*ia+ka;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function q(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=p;b[6]=fa;b[7]=0;b[8]=0;b[9]=-fa;b[10]=p;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function m(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=p;b[1]=0;b[2]=-fa;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=fa;b[9]=0;b[10]=p;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function x(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=p;b[1]=fa;b[2]=0;b[3]=0;b[4]=-fa;b[5]=p;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function N(b,p,fa){var g=p[0],D=p[1],X=p[2],
Y=p[3],ka=g+g,ia=D+D;const H=X+X;p=g*ka;const P=g*ia;g*=H;const da=D*ia;D*=H;X*=H;ka*=Y;ia*=Y;Y*=H;b[0]=1-(da+X);b[1]=P+Y;b[2]=g-ia;b[3]=0;b[4]=P-Y;b[5]=1-(p+X);b[6]=D+ka;b[7]=0;b[8]=g+ia;b[9]=D-ka;b[10]=1-(p+da);b[11]=0;b[12]=fa[0];b[13]=fa[1];b[14]=fa[2];b[15]=1;return b}function K(b,p){const fa=Za,g=-p[0],D=-p[1],X=-p[2],Y=p[3],ka=p[4],ia=p[5],H=p[6],P=p[7],da=g*g+D*D+X*X+Y*Y;0<da?(fa[0]=2*(ka*Y+P*g+ia*X-H*D)/da,fa[1]=2*(ia*Y+P*D+H*g-ka*X)/da,fa[2]=2*(H*Y+P*X+ka*D-ia*g)/da):(fa[0]=2*(ka*Y+P*g+
ia*X-H*D),fa[1]=2*(ia*Y+P*D+H*g-ka*X),fa[2]=2*(H*Y+P*X+ka*D-ia*g));N(b,p,fa);return b}function ha(b,p){b[0]=p[12];b[1]=p[13];b[2]=p[14];return b}function F(b,p){const fa=p[0],g=p[1],D=p[2],X=p[4],Y=p[5],ka=p[6],ia=p[8],H=p[9];p=p[10];b[0]=Math.sqrt(fa*fa+g*g+D*D);b[1]=Math.sqrt(X*X+Y*Y+ka*ka);b[2]=Math.sqrt(ia*ia+H*H+p*p);return b}function G(b,p){const fa=p[0]+p[5]+p[10];let g=0;0<fa?(g=2*Math.sqrt(fa+1),b[3]=.25*g,b[0]=(p[6]-p[9])/g,b[1]=(p[8]-p[2])/g,b[2]=(p[1]-p[4])/g):p[0]>p[5]&&p[0]>p[10]?(g=
2*Math.sqrt(1+p[0]-p[5]-p[10]),b[3]=(p[6]-p[9])/g,b[0]=.25*g,b[1]=(p[1]+p[4])/g,b[2]=(p[8]+p[2])/g):p[5]>p[10]?(g=2*Math.sqrt(1+p[5]-p[0]-p[10]),b[3]=(p[8]-p[2])/g,b[0]=(p[1]+p[4])/g,b[1]=.25*g,b[2]=(p[6]+p[9])/g):(g=2*Math.sqrt(1+p[10]-p[0]-p[5]),b[3]=(p[1]-p[4])/g,b[0]=(p[8]+p[2])/g,b[1]=(p[6]+p[9])/g,b[2]=.25*g);return b}function U(b,p,fa,g){var D=p[0],X=p[1],Y=p[2],ka=p[3],ia=D+D,H=X+X,P=Y+Y;p=D*ia;const da=D*H;D*=P;const ra=X*H;X*=P;Y*=P;ia*=ka;H*=ka;ka*=P;P=g[0];const sa=g[1];g=g[2];b[0]=(1-
(ra+Y))*P;b[1]=(da+ka)*P;b[2]=(D-H)*P;b[3]=0;b[4]=(da-ka)*sa;b[5]=(1-(p+Y))*sa;b[6]=(X+ia)*sa;b[7]=0;b[8]=(D+H)*g;b[9]=(X-ia)*g;b[10]=(1-(p+ra))*g;b[11]=0;b[12]=fa[0];b[13]=fa[1];b[14]=fa[2];b[15]=1;return b}function T(b,p,fa,g,D){var X=p[0],Y=p[1],ka=p[2],ia=p[3],H=X+X,P=Y+Y,da=ka+ka;p=X*H;var ra=X*P,sa=X*da;X=Y*P;Y*=da;var xa=ka*da;ka=ia*H;P*=ia;const Aa=ia*da;var Ba=g[0],Ia=g[1];da=g[2];g=D[0];ia=D[1];D=D[2];H=(1-(X+xa))*Ba;const Ha=(ra+Aa)*Ba;Ba*=sa-P;ra=(ra-Aa)*Ia;xa=(1-(p+xa))*Ia;Ia*=Y+ka;sa=
(sa+P)*da;Y=(Y-ka)*da;p=(1-(p+X))*da;b[0]=H;b[1]=Ha;b[2]=Ba;b[3]=0;b[4]=ra;b[5]=xa;b[6]=Ia;b[7]=0;b[8]=sa;b[9]=Y;b[10]=p;b[11]=0;b[12]=fa[0]+g-(H*g+ra*ia+sa*D);b[13]=fa[1]+ia-(Ha*g+xa*ia+Y*D);b[14]=fa[2]+D-(Ba*g+Ia*ia+p*D);b[15]=1;return b}function I(b,p){var fa=p[0],g=p[1],D=p[2];p=p[3];var X=fa+fa,Y=g+g;const ka=D+D;fa*=X;const ia=g*X;g*=Y;const H=D*X,P=D*Y;D*=ka;X*=p;Y*=p;p*=ka;b[0]=1-g-D;b[1]=ia+p;b[2]=H-Y;b[3]=0;b[4]=ia-p;b[5]=1-fa-D;b[6]=P+X;b[7]=0;b[8]=H+Y;b[9]=P-X;b[10]=1-fa-g;b[11]=0;b[12]=
0;b[13]=0;b[14]=0;b[15]=1;return b}function A(b,p,fa,g,D,X,Y){const ka=1/(fa-p),ia=1/(D-g),H=1/(X-Y);b[0]=2*X*ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*X*ia;b[6]=0;b[7]=0;b[8]=(fa+p)*ka;b[9]=(D+g)*ia;b[10]=(Y+X)*H;b[11]=-1;b[12]=0;b[13]=0;b[14]=Y*X*2*H;b[15]=0;return b}function e(b,p,fa,g,D){p=1/Math.tan(p/2);let X=void 0;b[0]=p/fa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=p;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=D&&Infinity!==D?(X=1/(g-D),b[10]=(D+g)*X,b[14]=2*D*g*X):(b[10]=-1,b[14]=
-2*g);return b}function J(b,p,fa,g){const D=Math.tan(p.upDegrees*Math.PI/180),X=Math.tan(p.downDegrees*Math.PI/180),Y=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const ka=2/(Y+p),ia=2/(D+X);b[0]=ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=ia;b[6]=0;b[7]=0;b[8]=-((Y-p)*ka*.5);b[9]=(D-X)*ia*.5;b[10]=g/(fa-g);b[11]=-1;b[12]=0;b[13]=0;b[14]=g*fa/(fa-g);b[15]=0;return b}function W(b,p,fa,g,D,X,Y){const ka=1/(p-fa),ia=1/(g-D),H=1/(X-Y);b[0]=-2*ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
-2*ia;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*H;b[11]=0;b[12]=(p+fa)*ka;b[13]=(D+g)*ia;b[14]=(Y+X)*H;b[15]=1;return b}function R(b,p,fa,g){let D=void 0,X=void 0;var Y=void 0,ka=void 0;let ia=void 0,H=void 0;var P=void 0,da=void 0;let ra=void 0,sa=void 0;const xa=p[0],Aa=p[1];p=p[2];Y=g[0];ka=g[1];g=g[2];P=fa[0];da=fa[1];fa=fa[2];if(Math.abs(xa-P)<ca.EPSILON&&Math.abs(Aa-da)<ca.EPSILON&&Math.abs(p-fa)<ca.EPSILON)return y(b);P=xa-P;da=Aa-da;ra=p-fa;sa=1/Math.sqrt(P*P+da*da+ra*ra);P*=sa;da*=sa;ra*=sa;D=
ka*ra-g*da;X=g*P-Y*ra;Y=Y*da-ka*P;(sa=Math.sqrt(D*D+X*X+Y*Y))?(sa=1/sa,D*=sa,X*=sa,Y*=sa):Y=X=D=0;ka=da*Y-ra*X;ia=ra*D-P*Y;H=P*X-da*D;(sa=Math.sqrt(ka*ka+ia*ia+H*H))?(sa=1/sa,ka*=sa,ia*=sa,H*=sa):H=ia=ka=0;b[0]=D;b[1]=ka;b[2]=P;b[3]=0;b[4]=X;b[5]=ia;b[6]=da;b[7]=0;b[8]=Y;b[9]=H;b[10]=ra;b[11]=0;b[12]=-(D*xa+X*Aa+Y*p);b[13]=-(ka*xa+ia*Aa+H*p);b[14]=-(P*xa+da*Aa+ra*p);b[15]=1;return b}function ja(b,p,fa,g){const D=p[0],X=p[1];p=p[2];var Y=g[0];const ka=g[1];var ia=g[2];g=D-fa[0];let H=X-fa[1];fa=p-
fa[2];let P=g*g+H*H+fa*fa;0<P&&(P=1/Math.sqrt(P),g*=P,H*=P,fa*=P);let da=ka*fa-ia*H;ia=ia*g-Y*fa;Y=Y*H-ka*g;P=da*da+ia*ia+Y*Y;0<P&&(P=1/Math.sqrt(P),da*=P,ia*=P,Y*=P);b[0]=da;b[1]=ia;b[2]=Y;b[3]=0;b[4]=H*Y-fa*ia;b[5]=fa*da-g*Y;b[6]=g*ia-H*da;b[7]=0;b[8]=g;b[9]=H;b[10]=fa;b[11]=0;b[12]=D;b[13]=X;b[14]=p;b[15]=1;return b}function ma(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+
b[15]+")"}function S(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function na(b,p,fa){b[0]=p[0]+fa[0];b[1]=p[1]+fa[1];b[2]=p[2]+fa[2];b[3]=p[3]+fa[3];b[4]=p[4]+fa[4];b[5]=p[5]+fa[5];b[6]=p[6]+fa[6];b[7]=p[7]+fa[7];b[8]=p[8]+fa[8];b[9]=p[9]+fa[9];b[10]=p[10]+fa[10];b[11]=p[11]+fa[11];b[12]=p[12]+fa[12];b[13]=p[13]+fa[13];b[14]=p[14]+fa[14];b[15]=p[15]+fa[15];return b}function oa(b,p,fa){b[0]=
p[0]-fa[0];b[1]=p[1]-fa[1];b[2]=p[2]-fa[2];b[3]=p[3]-fa[3];b[4]=p[4]-fa[4];b[5]=p[5]-fa[5];b[6]=p[6]-fa[6];b[7]=p[7]-fa[7];b[8]=p[8]-fa[8];b[9]=p[9]-fa[9];b[10]=p[10]-fa[10];b[11]=p[11]-fa[11];b[12]=p[12]-fa[12];b[13]=p[13]-fa[13];b[14]=p[14]-fa[14];b[15]=p[15]-fa[15];return b}function qa(b,p,fa){b[0]=p[0]*fa;b[1]=p[1]*fa;b[2]=p[2]*fa;b[3]=p[3]*fa;b[4]=p[4]*fa;b[5]=p[5]*fa;b[6]=p[6]*fa;b[7]=p[7]*fa;b[8]=p[8]*fa;b[9]=p[9]*fa;b[10]=p[10]*fa;b[11]=p[11]*fa;b[12]=p[12]*fa;b[13]=p[13]*fa;b[14]=p[14]*fa;
b[15]=p[15]*fa;return b}function wa(b,p,fa,g){b[0]=p[0]+fa[0]*g;b[1]=p[1]+fa[1]*g;b[2]=p[2]+fa[2]*g;b[3]=p[3]+fa[3]*g;b[4]=p[4]+fa[4]*g;b[5]=p[5]+fa[5]*g;b[6]=p[6]+fa[6]*g;b[7]=p[7]+fa[7]*g;b[8]=p[8]+fa[8]*g;b[9]=p[9]+fa[9]*g;b[10]=p[10]+fa[10]*g;b[11]=p[11]+fa[11]*g;b[12]=p[12]+fa[12]*g;b[13]=p[13]+fa[13]*g;b[14]=p[14]+fa[14]*g;b[15]=p[15]+fa[15]*g;return b}function Ma(b,p){return b[0]===p[0]&&b[1]===p[1]&&b[2]===p[2]&&b[3]===p[3]&&b[4]===p[4]&&b[5]===p[5]&&b[6]===p[6]&&b[7]===p[7]&&b[8]===p[8]&&
b[9]===p[9]&&b[10]===p[10]&&b[11]===p[11]&&b[12]===p[12]&&b[13]===p[13]&&b[14]===p[14]&&b[15]===p[15]}function Ja(b,p){if(b===p)return!0;const fa=b[0],g=b[1],D=b[2],X=b[3],Y=b[4],ka=b[5],ia=b[6],H=b[7],P=b[8],da=b[9],ra=b[10],sa=b[11],xa=b[12],Aa=b[13],Ba=b[14];b=b[15];const Ia=p[0],Ha=p[1],Ea=p[2],Fa=p[3],Ga=p[4],Qa=p[5],ta=p[6],$a=p[7],ab=p[8],Ya=p[9],a=p[10],bb=p[11],Ra=p[12],mb=p[13],qb=p[14];p=p[15];return Math.abs(fa-Ia)<=ca.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ia))&&Math.abs(g-Ha)<=ca.EPSILON*
Math.max(1,Math.abs(g),Math.abs(Ha))&&Math.abs(D-Ea)<=ca.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ea))&&Math.abs(X-Fa)<=ca.EPSILON*Math.max(1,Math.abs(X),Math.abs(Fa))&&Math.abs(Y-Ga)<=ca.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ga))&&Math.abs(ka-Qa)<=ca.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Qa))&&Math.abs(ia-ta)<=ca.EPSILON*Math.max(1,Math.abs(ia),Math.abs(ta))&&Math.abs(H-$a)<=ca.EPSILON*Math.max(1,Math.abs(H),Math.abs($a))&&Math.abs(P-ab)<=ca.EPSILON*Math.max(1,Math.abs(P),Math.abs(ab))&&Math.abs(da-
Ya)<=ca.EPSILON*Math.max(1,Math.abs(da),Math.abs(Ya))&&Math.abs(ra-a)<=ca.EPSILON*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-bb)<=ca.EPSILON*Math.max(1,Math.abs(sa),Math.abs(bb))&&Math.abs(xa-Ra)<=ca.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ra))&&Math.abs(Aa-mb)<=ca.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(mb))&&Math.abs(Ba-qb)<=ca.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(qb))&&Math.abs(b-p)<=ca.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))}function La(b){const p=ca.EPSILON,fa=b[0],g=b[1],D=
b[2],X=b[4],Y=b[5],ka=b[6],ia=b[8],H=b[9];b=b[10];return Math.abs(1-(fa*fa+X*X+ia*ia))<=p&&Math.abs(1-(g*g+Y*Y+H*H))<=p&&Math.abs(1-(D*D+ka*ka+b*b))<=p}const Za=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,copy:Z,set:v,identity:y,transpose:B,invert:r,adjoint:t,determinant:u,multiply:z,translate:O,scale:Q,rotate:n,rotateX:L,rotateY:c,rotateZ:k,fromTranslation:M,fromScaling:E,fromRotation:l,fromXRotation:q,fromYRotation:m,fromZRotation:x,fromRotationTranslation:N,fromQuat2:K,getTranslation:ha,
getScaling:F,getRotation:G,fromRotationTranslationScale:U,fromRotationTranslationScaleOrigin:T,fromQuat:I,frustum:A,perspective:e,perspectiveFromFieldOfView:J,ortho:W,lookAt:R,targetTo:ja,str:ma,frob:S,add:na,subtract:oa,multiplyScalar:qa,multiplyScalarAndAdd:wa,exactEquals:Ma,equals:Ja,isOrthoNormal:La,mul:z,sub:oa},Symbol.toStringTag,{value:"Module"}));h.add=na;h.adjoint=t;h.copy=Z;h.determinant=u;h.equals=Ja;h.exactEquals=Ma;h.frob=S;h.fromQuat=I;h.fromQuat2=K;h.fromRotation=l;h.fromRotationTranslation=
N;h.fromRotationTranslationScale=U;h.fromRotationTranslationScaleOrigin=T;h.fromScaling=E;h.fromTranslation=M;h.fromXRotation=q;h.fromYRotation=m;h.fromZRotation=x;h.frustum=A;h.getRotation=G;h.getScaling=F;h.getTranslation=ha;h.identity=y;h.invert=r;h.isOrthoNormal=La;h.lookAt=R;h.mat4=d;h.mul=z;h.multiply=z;h.multiplyScalar=qa;h.multiplyScalarAndAdd=wa;h.ortho=W;h.perspective=e;h.perspectiveFromFieldOfView=J;h.rotate=n;h.rotateX=L;h.rotateY=c;h.rotateZ=k;h.scale=Q;h.set=v;h.str=ma;h.sub=oa;h.subtract=
oa;h.targetTo=ja;h.translate=O;h.transpose=B})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(h,d,ca,Z,v){function y(){return!!d._pe}function B(){return!!v("esri-wasm")}function r(){return n?n:n=(new Promise((c,k)=>h(["./pe-wasm"],c,k))).then(c=>c.peWasm).then(({default:c})=>c({locateFile:k=>Z.getAssetUrl(`esri/geometry/support/${k}`)})).then(c=>{t(c)})}function t(c){function k(l,q,m){l[q]=m(l[q])}d._pe=c;d.PeDefs.init();
d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(l){function q(){return l.apply(this,arguments)||this}ca._inheritsLoose(q,l);q.prototype.destroy=function(){d._pe.destroy(this)};return q}(d._pe.PeGCSExtent);c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var M of c)k(M.prototype,"getName",l=>function(){return l.call(this,Array(d.PeDefs.PE_NAME_MAX))});
for(const l of[d._pe.PeGeogtran,d._pe.PeProjcs])k(l.prototype,"getParameters",q=>function(){const m=Array(d.PeDefs.PE_PARM_MAX);let x=q.call(this);for(let N=0;N<m.length;N++){const K=d._pe.getValue(x,"*");m[N]=K?d._pe.wrapPointer(K,d._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return m});k(d._pe.PeHorizon.prototype,"getCoord",l=>function(){const q=this.getSize();if(!q)return null;const m=[],x=l.call(this);Q(m,q,x);return m});k(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const q=
d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;var x=l.call(this);if(!d._pe.compare(x,d._pe.NULL)){m=[x];const N=this.getSteps();if(1<N){x=d._pe.getPointer(x);for(let K=1;K<N;K++)m.push(d._pe.wrapPointer(x+q*K,d._pe.PeGTlistExtendedGTs))}}return m}});const E=d._pe._pe_getPeHorizonSize();M=l=>function(){let q=this._cache;q||(this._cache=q=new Map);if(q.has(l))return q.get(l);let m=null;var x=l.call(this);if(!d._pe.compare(x,d._pe.NULL)){m=[x];const N=x.getNump();if(1<N){x=d._pe.getPointer(x);
for(let K=1;K<N;K++)m.push(d._pe.wrapPointer(x+E*K,d._pe.PeHorizon))}}q.set(l,m);return m};k(d._pe.PeProjcs.prototype,"horizonGcsGenerate",M);k(d._pe.PeProjcs.prototype,"horizonPcsGenerate",M);d._pe.PeObject.prototype.toString=function(l=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const q=d._pe.getPointer(this),m=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(q,l,m))}}function u(c){if(c){var k=d._pe.getClass(c);k&&(k=d._pe.getCache(k))&&
(c=d._pe.getPointer(c))&&delete k[c]}}function z(c,k){const M=[];k=Array(k);for(let E=0;E<c;E++)M.push(d._pe.ensureInt8(k));return M}function O(c){let k;Array.isArray(c[0])?(k=[],c.forEach(M=>{k.push(M[0],M[1])})):k=c;return k}function Q(c,k,M,E=!1){if(E)for(E=0;E<2*k;E++)c[E]=d._pe.getValue(M+E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===c.length;for(let l=0;l<k;l++)E&&(c[l]=Array(2)),c[l][0]=d._pe.getValue(M,"double"),c[l][1]=d._pe.getValue(M+Float64Array.BYTES_PER_ELEMENT,"double"),M+=
2*Float64Array.BYTES_PER_ELEMENT}}let n;d._pe=null;d.PeCSTransformations=void 0;(function(c){function k(l,q,m){d._pe.ensureCache.prepare();var x=O(m);const N=m===x;x=d._pe.ensureFloat64(x);(l=d._pe._pe_geog_to_proj(d._pe.getPointer(l),q,x))&&Q(m,q,x,N);return l}function M(l,q,m){return E(l,q,m,0)}function E(l,q,m,x){d._pe.ensureCache.prepare();var N=O(m);const K=m===N;N=d._pe.ensureFloat64(N);(l=d._pe._pe_proj_to_geog_center(d._pe.getPointer(l),q,N,x))&&Q(m,q,N,K);return l}c.geogToProj=k;c.projGeog=
function(l,q,m,x){switch(x){case d.PeDefs.PE_TRANSFORM_P_TO_G:return M(l,q,m);case d.PeDefs.PE_TRANSFORM_G_TO_P:return k(l,q,m)}return 0};c.projToGeog=M;c.projToGeogCenter=E})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;
c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;
c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(c){function k(q,m){let x=null,N=M[q];N||(N={},M[q]=N);N.hasOwnProperty(String(m))?x=
N[m]:(q=d._pe.PeFactory.prototype.factoryByType(q,m),d._pe.compare(q,d._pe.NULL)||(x=q,N[m]=x));return x=l(x)}const M={},E={},l=q=>{if(q){const m=q.getType();switch(m){case d.PeDefs.PE_TYPE_GEOGCS:q=d._pe.castObject(q,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:q=d._pe.castObject(q,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:q=d._pe.castObject(q,d._pe.PeGeogtran);break;default:m&d.PeDefs.PE_TYPE_UNIT&&(q=d._pe.castObject(q,d._pe.PeUnit))}}return q};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};
c.coordsys=function(q){return k(d.PeDefs.PE_TYPE_COORDSYS,q)};c.factoryByType=k;c.fromString=function(q,m){let x=null,N=E[q];N||(N={},E[q]=N);N.hasOwnProperty(m)?x=N[m]:(q=d._pe.PeFactory.prototype.fromString(q,m),d._pe.compare(q,d._pe.NULL)||(x=q,N[m]=x));return x=l(x)};c.geogcs=function(q){return k(d.PeDefs.PE_TYPE_GEOGCS,q)};c.geogtran=function(q){return k(d.PeDefs.PE_TYPE_GEOGTRAN,q)};c.getCode=function(q){return d._pe.PeFactory.prototype.getCode(q)};c.projcs=function(q){return k(d.PeDefs.PE_TYPE_PROJCS,
q)};c.unit=function(q){return k(d.PeDefs.PE_TYPE_UNIT,q)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let k;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;k=d._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(M,E,l,q,m,x){let N=null;const K=new d._pe.PeInteger(x);try{const ha=d._pe.PeGTlistExtended.prototype.getGTlist(M,E,l,q,m,K);if(x=K.val)if(N=[ha],1<x){const F=d._pe.getPointer(ha);for(M=
1;M<x;M++)N.push(d._pe.wrapPointer(F+k*M,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(K)}return N}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(k){if(k&&k.length){for(const M of k)u(M),M.getEntries().forEach(E=>{u(E);E=E.getGeogtran();u(E);E.getParameters().forEach(u);[E.getGeogcs1(),E.getGeogcs2()].forEach(l=>{u(l);const q=l.getDatum();u(q);u(q.getSpheroid());u(l.getPrimem());u(l.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(k[0])}}})(d.PeGTlistExtendedEntry||
(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(k,M,E,l,q){d._pe.ensureCache.prepare();var m=O(E);const x=E===m;m=d._pe.ensureFloat64(m);let N=0;l&&(N=d._pe.ensureFloat64(l));(k=d._pe._pe_geog_to_geog(d._pe.getPointer(k),M,m,N,q))&&Q(E,M,m,x);return k}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const k=(E,l,q,m,x,N)=>{d._pe.ensureCache.prepare();switch(E){case "dd":var K=d._pe._pe_geog_to_dd;var ha=d.PeDefs.PE_DD_MAX;
break;case "ddm":K=d._pe._pe_geog_to_ddm;ha=d.PeDefs.PE_DDM_MAX;break;case "dms":K=d._pe._pe_geog_to_dms,ha=d.PeDefs.PE_DMS_MAX}E=0;l&&(E=d._pe.getPointer(l));l=O(m);l=d._pe.ensureFloat64(l);ha=z(q,ha);m=d._pe.ensureInt32(ha);if(x=K(E,q,l,x,m))for(K=0;K<q;K++)N[K]=d._pe.UTF8ToString(ha[K]);return x},M=(E,l,q,m,x)=>{d._pe.ensureCache.prepare();switch(E){case "dd":var N=d._pe._pe_dd_to_geog;break;case "ddm":N=d._pe._pe_ddm_to_geog;break;case "dms":N=d._pe._pe_dms_to_geog}E=0;l&&(E=d._pe.getPointer(l));
l=m.map(K=>d._pe.ensureString(K));m=d._pe.ensureInt32(l);l=d._pe.ensureFloat64(Array(2*q));(N=N(E,q,m,l))&&Q(x,q,l);return N};c.geogToDms=function(E,l,q,m,x){return k("dms",E,l,q,m,x)};c.dmsToGeog=function(E,l,q,m){return M("dms",E,l,q,m)};c.geogToDdm=function(E,l,q,m,x){return k("ddm",E,l,q,m,x)};c.ddmToGeog=function(E,l,q,m){return M("ddm",E,l,q,m)};c.geogToDd=function(E,l,q,m,x){return k("dd",E,l,q,m,x)};c.ddToGeog=function(E,l,q,m){return M("dd",E,l,q,m)}})(d.PeNotationDms||(d.PeNotationDms={}));
d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(k,M,E,l,q,m,x){d._pe.ensureCache.prepare();let N=0;k&&
(N=d._pe.getPointer(k));k=O(E);E=d._pe.ensureFloat64(k);k=z(M,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(k);if(l=d._pe._pe_geog_to_mgrs_extended(N,M,E,l,q,m,K))for(q=0;q<M;q++)x[q]=d._pe.UTF8ToString(k[q]);return l};c.mgrsToGeogExtended=function(k,M,E,l,q){d._pe.ensureCache.prepare();let m=0;k&&(m=d._pe.getPointer(k));k=E.map(x=>d._pe.ensureString(x));E=d._pe.ensureInt32(k);k=d._pe.ensureFloat64(Array(2*M));(l=d._pe._pe_mgrs_to_geog_extended(m,M,E,l,k))&&Q(q,M,k);return l}})(d.PeNotationMgrs||
(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(k,M,E,l,q,m,x){d._pe.ensureCache.prepare();let N=0;k&&(N=d._pe.getPointer(k));k=O(E);E=d._pe.ensureFloat64(k);k=z(M,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(k);if(l=d._pe._pe_geog_to_usng(N,M,E,l,q,m,K))for(q=0;q<M;q++)x[q]=d._pe.UTF8ToString(k[q]);return l};c.usngToGeog=function(k,M,E,l){d._pe.ensureCache.prepare();var q=0;k&&(q=d._pe.getPointer(k));k=E.map(m=>d._pe.ensureString(m));E=d._pe.ensureInt32(k);k=
d._pe.ensureFloat64(Array(2*M));(q=d._pe._pe_usng_to_geog(q,M,E,k))&&Q(l,M,k);return q}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geogToUtm=function(k,M,E,l,q){d._pe.ensureCache.prepare();var m=0;k&&(m=d._pe.getPointer(k));k=O(E);E=d._pe.ensureFloat64(k);
k=z(M,d.PeDefs.PE_UTM_MAX);const x=d._pe.ensureInt32(k);if(l=d._pe._pe_geog_to_utm(m,M,E,l,x))for(m=0;m<M;m++)q[m]=d._pe.UTF8ToString(k[m]);return l};c.utmToGeog=function(k,M,E,l,q){d._pe.ensureCache.prepare();let m=0;k&&(m=d._pe.getPointer(k));k=E.map(x=>d._pe.ensureString(x));E=d._pe.ensureInt32(k);k=d._pe.ensureFloat64(Array(2*M));(l=d._pe._pe_utm_to_geog(m,M,E,l,k))&&Q(q,M,k);return l}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const k=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(M,E=c.PE_PCSINFO_OPTION_DOMAIN){let l,q;k.has(M)&&(q=k.get(M),q[E]&&(l=q[E]));l||(l=d._pe.PePCSInfo.prototype.generate(M,E),q||(q=[],k.set(M,q)),q[E]=l);return l}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.versionString=
function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const L=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return d._pe},isLoaded:y,isSupported:B,load:r,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},
get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:t},Symbol.toStringTag,{value:"Module"}));d._init=t;d.isLoaded=y;d.isSupported=B;d.load=r;d.pe=L})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(h,d){const ca=Math.PI/180;var Z=d.earth.radius;const v=
d.earth.eccentricitySquared;Z={a1:Z*v,a2:Z*v*Z*v,a3:Z*v*v/2,a4:Z*v*Z*v*2.5,a5:Z*v+Z*v*v/2,a6:1-v};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,
f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,
f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},
104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};h.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;h.earthEllipsoidConstants=Z;h.spheroids=
d;h.toRadians=ca;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(h){return function(){function d(Z){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Z&&Z.steps)for(const v of Z.steps)v instanceof h?this.steps.push(v):this.steps.push(new h({wkid:v.wkid,wkt:v.wkt,isInverse:v.isInverse}))}d.cacheKey=function(Z,v){return[void 0!==
Z.wkid&&null!==Z.wkid?Z.wkid.toString():"-1",void 0!==Z.wkt&&null!==Z.wkt?Z.wkt.toString():"",void 0!==v.wkid&&null!==v.wkid?v.wkid.toString():"-1",void 0!==v.wkt&&null!==v.wkt?v.wkt.toString():""].join()};d.fromGE=function(Z){const v=new d;let y="";for(const B of Z.steps)Z=h.fromGE(B),v.steps.push(Z),y+=Z.uid.toString()+",";v._cached_projection={};v._gtlistentry=null;v._chain=y;return v};var ca=d.prototype;ca.getInverse=function(){const Z=new d;Z.steps=[];for(let v=this.steps.length-1;0<=v;v--)Z.steps.push(this.steps[v].getInverse());
return Z};ca.getGTListEntry=function(){let Z="";for(const v of this.steps)Z+=v.uid.toString()+",";Z!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Z);return this._gtlistentry};ca.assignCachedGe=function(Z,v,y){this._cached_projection[d.cacheKey(Z,v)]=y};ca.getCachedGeTransformation=function(Z,v){let y="";for(const B of this.steps)y+=B.uid.toString()+",";y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=y);Z=this._cached_projection[d.cacheKey(Z,
v)];return void 0===Z?null:Z};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){let d=0;return function(){function ca(Z=null){this.uid=d++;Z?(this._wkt=void 0!==Z.wkt?Z.wkt:null,this._wkid=void 0!==Z.wkid?Z.wkid:-1,this._isInverse=void 0!==Z.isInverse?!0===Z.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ca.fromGE=function(Z){const v=new ca;v._wkt=Z.wkt;v._wkid=Z.wkid;v._isInverse=Z.isInverse;
return v};ca.prototype.getInverse=function(){const Z=new ca;Z._wkt=this.wkt;Z._wkid=this._wkid;Z._isInverse=!this.isInverse;return Z};h._createClass(ca,[{key:"wkt",get:function(){return this._wkt},set:function(Z){this._wkt=Z;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(Z){this._wkid=Z;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Z){this._isInverse=Z;this.uid=d++}}]);return ca}()})},"esri/geometry/support/zscale":function(){define(["exports",
"../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(h,d,ca,Z){h.getGeometryZScaler=function(v,y,B){if(d.isNone(y)||d.isNone(B)||B.vcsWkid||Z.equals(y,B))return null;y=ca.getMetersPerVerticalUnitForSR(y);B=ca.getMetersPerVerticalUnitForSR(B);const r=y/B;if(1===r)return null;switch(v){case "point":case "esriGeometryPoint":return t=>{t&&null!=t.z&&(t.z*=r)};case "polyline":case "esriGeometryPolyline":return t=>{if(t)for(const u of t.paths)for(const z of u)2<z.length&&(z[2]*=
r)};case "polygon":case "esriGeometryPolygon":return t=>{if(t)for(const u of t.rings)for(const z of u)2<z.length&&(z[2]*=r)};case "multipoint":case "esriGeometryMultipoint":return t=>{if(t)for(const u of t.points)2<u.length&&(u[2]*=r)};case "extent":case "esriGeometryExtent":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=r,t.zmax*=r)};default:return null}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],
function(h){let d=function(B,r,t){this.x=B;this.y=r;this.spatialReference=t;this.m=this.z=void 0},ca=function(B,r,t,u){this.rings=B;this.spatialReference=r;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);u&&(this.hasM=u)},Z=function(B,r,t,u){this.paths=B;this.spatialReference=r;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);u&&(this.hasM=u)},v=function(B,r,t,u){this.points=B;this.spatialReference=r;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);u&&(this.hasM=u)},y=function(B,r,t,u,z){this.xmin=B;this.ymin=
r;this.xmax=t;this.ymax=u;this.spatialReference=z;this.mmax=this.mmin=this.zmax=this.zmin=void 0};h.jsonAdapter={convertToGEGeometry:function(B,r){return null==r?null:B.convertJSONToGeometry(r)},exportPoint:function(B,r,t){t=new d(B.getPointX(r),B.getPointY(r),t);const u=B.hasZ(r),z=B.hasM(r);u&&(t.z=B.getPointZ(r));z&&(t.m=B.getPointM(r));return t},exportPolygon:function(B,r,t){return new ca(B.exportPaths(r),t,B.hasZ(r),B.hasM(r))},exportPolyline:function(B,r,t){return new Z(B.exportPaths(r),t,B.hasZ(r),
B.hasM(r))},exportMultipoint:function(B,r,t){return new v(B.exportPoints(r),t,B.hasZ(r),B.hasM(r))},exportExtent:function(B,r,t){var u=B.hasZ(r);const z=B.hasM(r);t=new y(B.getXMin(r),B.getYMin(r),B.getXMax(r),B.getYMax(r),t);u&&(u=B.getZExtent(r),t.zmin=u.vmin,t.zmax=u.vmax);z&&(B=B.getMExtent(r),t.mmin=B.vmin,t.mmax=B.vmax);return t}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n,L,c,k,M,E,l,q,m,x,N,K){function ha(e){return e.every(J=>"exceedslimit"!==J.statisticType)}const F=new B.MemCacheStorage(2E6);let G=0,U=function(){function e(W){this.capabilities={query:M.queryCapabilities};this.geometryType=W.geometryType;this.hasM=W.hasM;this.hasZ=W.hasZ;this.objectIdField=W.objectIdField;this.spatialReference=W.spatialReference;this.definitionExpression=W.definitionExpression;this.featureStore=W.featureStore;this.aggregateAdapter=W.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=W.timeInfo;W.cacheSpatialQueries&&(this._geometryQueryCache=new B.MemCache(G++ +"$$",F));this.fieldsIndex=new x(W.fields);W.scheduler&&W.priority&&(this._frameTask=W.scheduler.registerTask(W.priority))}var J=e.prototype;J.destroy=function(){this._frameTask=y.removeMaybe(this._frameTask);this.clearCache();y.destroyMaybe(this._geometryQueryCache);this._changeHandle=y.removeMaybe(this._changeHandle);y.destroyMaybe(this.fieldsIndex)};
J.clearCache=function(){var W;null==(W=this._geometryQueryCache)?void 0:W.clear();this._timeExtent=this._allItems=null};J.executeQuery=function(){var W=d._asyncToGenerator(function*(R,ja){try{return(yield this._executeQuery(R,{},ja)).createQueryResponse()}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new E.QueryEngineResult([],R,this)).createQueryResponse()}});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForCount=function(){var W=d._asyncToGenerator(function*(R=
{},ja){try{return(yield this._executeQuery(R,{returnGeometry:!1,returnCentroid:!1,outSR:null},ja)).createQueryResponseForCount()}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}});return function(){return W.apply(this,arguments)}}();J.executeQueryForExtent=function(){var W=d._asyncToGenerator(function*(R,ja){const ma=R.outSR;try{const S=yield this._executeQuery(R,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),na=S.size;if(!na)return{count:0,extent:null};t.set(I,t.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(S.items,wa=>t.expandWithAABB(I,wa),T);const oa={xmin:I[0],ymin:I[1],xmax:I[3],ymax:I[4],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(I[2])&&isFinite(I[5])&&(oa.zmin=I[2],oa.zmax=I[5]);const qa=k.project(oa,S.spatialReference,ma);qa.spatialReference=m.cleanFromGeometryEngine(ma||this.spatialReference);if(0===qa.xmax-qa.xmin){const wa=r.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=wa;qa.xmax+=wa}if(0===qa.ymax-qa.ymin){const wa=
r.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=wa;qa.ymax+=wa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const wa=r.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=wa;qa.zmax+=wa}return{count:na,extent:qa}}catch(S){if(S===m.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw S;}});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForIds=function(){var W=d._asyncToGenerator(function*(R,ja){return this.executeQueryForIdSet(R,ja).then(ma=>
Array.from(ma))});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForIdSet=function(){var W=d._asyncToGenerator(function*(R,ja){try{const ma=yield this._executeQuery(R,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),S=ma.items,na=new Set;yield this._reschedule(()=>{for(const oa of S)na.add(ma.featureAdapter.getObjectId(oa))},ja);return na}catch(ma){if(ma===m.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForSnapping=
function(){var W=d._asyncToGenerator(function*(R,ja){const {point:ma,distance:S,types:na}=R;if(na===E.SnappingTypes.NONE)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(R.query),ja),qa=!n.equals(ma.spatialReference,this.spatialReference);qa&&(yield k.checkProjectionSupport(ma.spatialReference,this.spatialReference));var wa="number"===typeof S?S:S.x,Ma="number"===typeof S?S:S.y;wa={xmin:ma.x-wa,xmax:ma.x+wa,ymin:ma.y-Ma,ymax:ma.y+Ma,spatialReference:ma.spatialReference};
wa=qa?k.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ma=(yield Q.normalizeCentralMeridian(O.fromJSON(ma),null,{signal:ja}))[0];const Ja=(yield Q.normalizeCentralMeridian(O.fromJSON(wa),null,{signal:ja}))[0];if(y.isNone(Ma)||y.isNone(Ja))return{candidates:[]};const La=new E.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),oa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(La),ja);yield this._reschedule(()=>this._executeTimeQuery(La),ja);yield this._reschedule(()=>
this._executeAttributesQuery(La),ja);ja=Ma.toJSON();ja=qa?k.project(ja,this.spatialReference):ja;return La.createSnappingResponse({...R,point:ja,distance:qa?Math.max(wa.xmax-wa.xmin,wa.ymax-wa.ymin)/2:S},ma.spatialReference)});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForLatestObservations=function(){var W=d._asyncToGenerator(function*(R,ja){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:R,timeInfo:this.timeInfo});try{const ma=yield this._executeQuery(R,{},ja);yield this._reschedule(()=>this._filterLatest(ma),ja);return ma.createQueryResponse()}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new E.QueryEngineResult([],R,this)).createQueryResponse()}});return function(R,ja){return W.apply(this,arguments)}}();J.executeQueryForSummaryStatistics=function(){var W=d._asyncToGenerator(function*(R={},ja,ma){const {field:S,normalizationField:na,valueExpression:oa}=ja;
return(yield this._getQueryEngineResultForStats(R,{field:S,normalizationField:na,valueExpression:oa},ma)).createSummaryStatisticsResponse(ja)});return function(){return W.apply(this,arguments)}}();J.executeQueryForUniqueValues=function(){var W=d._asyncToGenerator(function*(R={},ja,ma){const {field:S,valueExpression:na}=ja;return(yield this._getQueryEngineResultForStats(R,{field:S,valueExpression:na},ma)).createUniqueValuesResponse(ja)});return function(){return W.apply(this,arguments)}}();J.executeQueryForClassBreaks=
function(){var W=d._asyncToGenerator(function*(R={},ja,ma){const {field:S,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(R,{field:S,normalizationField:na,valueExpression:oa},ma)).createClassBreaksResponse(ja)});return function(){return W.apply(this,arguments)}}();J.executeQueryForHistogram=function(){var W=d._asyncToGenerator(function*(R={},ja,ma){const {field:S,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(R,
{field:S,normalizationField:na,valueExpression:oa},ma)).createHistogramResponse(ja)});return function(){return W.apply(this,arguments)}}();J._schedule=function(){var W=d._asyncToGenerator(function*(R,ja){return y.isSome(this._frameTask)?this._frameTask.schedule(R,ja):R(K.noBudget)});return function(R,ja){return W.apply(this,arguments)}}();J._reschedule=function(){var W=d._asyncToGenerator(function*(R,ja){return y.isSome(this._frameTask)?this._frameTask.reschedule(R,ja):R(K.noBudget)});return function(R,
ja){return W.apply(this,arguments)}}();J._getAll=function(W){y.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new E.QueryEngineResult(this._allItems,W,this)};J._executeQuery=function(){var W=d._asyncToGenerator(function*(R,ja,ma){R=v.clone(R);R=yield this._schedule(()=>m.normalizeQuery(R,this.definitionExpression,this.spatialReference),ma);R=yield this._reschedule(()=>this._checkQuerySupport(R),ma);R={...R,...ja};const S=yield this._reschedule(()=>this._executeSceneFilterQuery(R,
ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(R,S,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),ma);return na});return function(R,ja,ma){return W.apply(this,arguments)}}();J._executeSceneFilterQuery=function(){var W=d._asyncToGenerator(function*(R,ja){var ma=this;if(y.isNone(R.sceneFilter))return null;
const {outSR:S,returnGeometry:na,returnCentroid:oa}=R;var qa=this.featureStore.featureSpatialReference,wa=R.sceneFilter.geometry;const Ma=y.isNone(qa)||n.equals(qa,wa.spatialReference)?wa:k.project(wa,qa);if(!Ma)return null;qa=na||oa;qa=n.isValid(S)&&!n.equals(this.spatialReference,S)&&qa?function(){var b=d._asyncToGenerator(function*(p){return ma._project(p,S)});return function(p){return b.apply(this,arguments)}}():b=>b;const Ja=this.featureAdapter;wa=this._searchFeatures(this._getQueryBBoxes(Ma));
if("disjoint"===R.sceneFilter.spatialRelationship){if(!wa.length)return null;const b=new Set;for(var La of wa)b.add(Ja.getObjectId(La));const p=yield this._reschedule(()=>this.featureStore.toArray(),ja);La=yield this._reschedule(d._asyncToGenerator(function*(){const fa=yield l.getSpatialQueryOperator("esriSpatialRelDisjoint",Ma,ma.geometryType,ma.hasZ,ma.hasM),g=yield ma._runSpatialFilter(p,D=>!b.has(Ja.getObjectId(D))||fa(Ja.getGeometry(D)),ja);return new E.QueryEngineResult(g,R,ma)}),ja);return qa(La)}if(!wa.length)return new E.QueryEngineResult([],
R,this);if(this._canExecuteSinglePass(Ma,R))return qa(new E.QueryEngineResult(wa,R,this));const Za=yield l.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);La=yield this._runSpatialFilter(wa,b=>Za(Ja.getGeometry(b)),ja);return qa(new E.QueryEngineResult(La,R,this))});return function(R,ja){return W.apply(this,arguments)}}();J._executeGeometryQuery=function(){var W=d._asyncToGenerator(function*(R,ja,ma){var S=this;if(y.isSome(ja)&&0===ja.items.length)return ja;
R=y.isSome(ja)?ja.query:R;const {geometry:na,outSR:oa,spatialRel:qa,returnGeometry:wa,returnCentroid:Ma}=R;var Ja=this.featureStore.featureSpatialReference;const La=!na||y.isNone(Ja)||n.equals(Ja,na.spatialReference)?na:k.project(na,Ja),Za=wa||Ma,b=n.isValid(oa)&&!n.equals(this.spatialReference,oa),p=this._geometryQueryCache&&y.isNone(ja)?b&&Za?JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa}):
null;Ja=p?this._geometryQueryCache.get(p):null;if(y.isSome(Ja))return new E.QueryEngineResult(Ja,R,this);Ja=function(){var Y=d._asyncToGenerator(function*(ka){b&&Za&&(yield S._project(ka,oa));p&&S._geometryQueryCache.put(p,ka.items,ka.items.length+1);return ka});return function(ka){return Y.apply(this,arguments)}}();if(!La)return Ja(y.isSome(ja)?ja:this._getAll(R));const fa=this.featureAdapter;let g=this._searchFeatures(this._getQueryBBoxes(na));if("esriSpatialRelDisjoint"===qa){if(!g.length)return Ja(y.isSome(ja)?
ja:this._getAll(R));const Y=new Set;for(var D of g)Y.add(fa.getObjectId(D));const ka=y.isSome(ja)?ja.items:yield this._reschedule(()=>this.featureStore.toArray(),ma);D=yield this._reschedule(d._asyncToGenerator(function*(){const ia=yield l.getSpatialQueryOperator(qa,La,S.geometryType,S.hasZ,S.hasM),H=yield S._runSpatialFilter(ka,P=>!Y.has(fa.getObjectId(P))||ia(fa.getGeometry(P)),ma);return new E.QueryEngineResult(H,R,S)}),ma);return Ja(D)}if(y.isSome(ja)){const Y=new ca.PositionHint;g=g.filter(ka=>
0<=ca.indexOf(ja.items,ka,ja.items.length,Y))}if(!g.length)return Ja=new E.QueryEngineResult([],R,this),p&&this._geometryQueryCache.put(p,Ja.items,1),Ja;if(this._canExecuteSinglePass(La,R))return Ja(new E.QueryEngineResult(g,R,this));const X=yield l.getSpatialQueryOperator(qa,La,this.geometryType,this.hasZ,this.hasM);D=yield this._runSpatialFilter(g,Y=>X(fa.getGeometry(Y)),ma);return Ja(new E.QueryEngineResult(D,R,this))});return function(R,ja,ma){return W.apply(this,arguments)}}();J._executeAggregateIdsQuery=
function(W){if(0!==W.items.length&&W.query.aggregateIds&&W.query.aggregateIds.length&&!y.isNone(this.aggregateAdapter)){var R=new Set;for(const ma of W.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ma).forEach(S=>R.add(S));var ja=this.featureAdapter.getObjectId;W.items=W.items.filter(ma=>R.has(ja(ma)))}};J._executeObjectIdsQuery=function(W){if(0!==W.items.length&&W.query.objectIds&&W.query.objectIds.length){var R=new Set(W.query.objectIds),ja=this.featureAdapter.getObjectId;W.items=
W.items.filter(ma=>R.has(ja(ma)))}};J._executeTimeQuery=function(W){if(0!==W.items.length){var R=q.getTimeOperator(this.timeInfo,W.query.timeExtent,this.featureAdapter);y.isNone(R)||(W.items=W.items.filter(R))}};J._executeAttributesQuery=function(W){if(0!==W.items.length){var R=c.getWhereClause(W.query.where,this.fieldsIndex);if(R){if(!R.isStandardized)throw new TypeError("Where clause is not standardized");W.items=W.items.filter(ja=>R.testFeature(ja,this.featureAdapter))}}};J._runSpatialFilter=function(){var W=
d._asyncToGenerator(function*(R,ja,ma){var S=this;if(!ja)return R;if(y.isNone(this._frameTask))return R.filter(wa=>ja(wa));let na=0;const oa=[],qa=function(){var wa=d._asyncToGenerator(function*(Ma){for(;na<R.length;){const Ja=R[na++];ja(Ja)&&(oa.push(Ja),Ma.madeProgress());Ma.done&&(yield S._reschedule(La=>qa(La),ma))}});return function(Ma){return wa.apply(this,arguments)}}();return this._reschedule(wa=>qa(wa),ma).then(()=>oa)});return function(R,ja,ma){return W.apply(this,arguments)}}();J._filterLatest=
function(W){const {trackIdField:R,startTimeField:ja,endTimeField:ma}=this.timeInfo,S=ma||ja,na=new Map,oa=this.featureAdapter.getAttribute;for(const qa of W.items){const wa=oa(qa,R),Ma=oa(qa,S),Ja=na.get(wa);(!Ja||Ma>oa(Ja,S))&&na.set(wa,qa)}W.items=Array.from(na.values())};J._canExecuteSinglePass=function(W,R){({spatialRel:R}=R);return l.canQueryWithRBush(W)&&("esriSpatialRelEnvelopeIntersects"===R||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===R||"esriSpatialRelContains"===
R||"esriSpatialRelWithin"===R))};J._project=function(){var W=d._asyncToGenerator(function*(R,ja){if(!ja||n.equals(this.spatialReference,ja))return R;const ma=this.featureAdapter;ja=yield k.projectMany(R.items.map(S=>m.getGeometry(this.geometryType,this.hasZ,this.hasM,ma.getGeometry(S))),this.spatialReference,ja);R.items=ja.map((S,na)=>ma.cloneWithGeometry(R.items[na],L.convertFromGeometry(S,this.hasZ,this.hasM)));return R});return function(R,ja){return W.apply(this,arguments)}}();J._getQueryBBoxes=
function(W){if(l.canQueryWithRBush(W)){if(O.isExtent(W))return[u.fromValues(W.xmin,W.ymin,W.xmax,W.ymax)];if(O.isPolygon(W))return W.rings.map(R=>u.fromValues(Math.min(R[0][0],R[2][0]),Math.min(R[0][1],R[2][1]),Math.max(R[0][0],R[2][0]),Math.max(R[0][1],R[2][1])))}return[z.getBoundsXY(u.create(),W)]};J._searchFeatures=function(W){for(const R of W)this.featureStore.forEachInBounds(R,ja=>A.add(ja));W=Array.from(A.values());A.clear();return W};J._checkStatisticsSupport=function(){var W=d._asyncToGenerator(function*(R,
ja){if(0>R.distance||null!=R.geometryPrecision||R.multipatchOption||R.pixelSize||R.relationParam||R.text||R.outStatistics||R.groupByFieldsForStatistics||R.having||R.orderByFields)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:R});this._checkAttributesQuerySupport(R);return Promise.all([this._checkStatisticsParamsSupport(ja),l.checkSpatialQuerySupport(R,this.geometryType,this.spatialReference),k.checkProjectionSupport(this.spatialReference,R.outSR)]).then(()=>R)});
return function(R,ja){return W.apply(this,arguments)}}();J._checkStatisticsParamsSupport=function(){var W=d._asyncToGenerator(function*(R){var ja=[];R.valueExpression&&({arcadeUtils:ja}=yield N.loadArcade(),ja=ja.extractFieldNames(R.valueExpression));R.field&&ja.push(R.field);R.normalizationField&&ja.push(R.normalizationField);if(!ja.length)throw new Z("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:R});c.validateFields(this.fieldsIndex,ja,"params contains missing fields")});
return function(R){return W.apply(this,arguments)}}();J._checkQuerySupport=function(){var W=d._asyncToGenerator(function*(R){if(0>R.distance||null!=R.geometryPrecision||R.multipatchOption||R.pixelSize||R.relationParam||R.text)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:R});this._checkAttributesQuerySupport(R);this._checkStatisticsQuerySupport(R);return Promise.all([l.checkSpatialQuerySupport(R,this.geometryType,this.spatialReference),k.checkProjectionSupport(this.spatialReference,
R.outSR)]).then(()=>R)});return function(R){return W.apply(this,arguments)}}();J._checkAttributesQuerySupport=function(W){const {outFields:R,orderByFields:ja,returnDistinctValues:ma,outStatistics:S}=W,na=S?S.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const oa=ja.map(qa=>{const wa=qa.toLowerCase();return wa.includes(" asc")?wa.split(" asc")[0]:wa.includes(" desc")?wa.split(" desc")[0]:qa}).filter(qa=>!na.includes(qa));c.validateFields(this.fieldsIndex,
oa,"orderByFields contains missing fields")}if(R&&0<R.length)c.validateFields(this.fieldsIndex,R,"outFields contains missing fields");else if(ma)throw new Z("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:W});c.validateWhere(this.fieldsIndex,W.where)};J._checkStatisticsQuerySupport=function(W){const {outStatistics:R,groupByFieldsForStatistics:ja,having:ma}=W;var S=ja&&ja.length,na=R&&R.length;if(ma){if(!S||!na)throw new Z("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:W});c.validateHaving(this.fieldsIndex,ma,R)}if(na&&ha(R)){na=R.map(oa=>oa.onStatisticField).filter(Boolean);c.validateFields(this.fieldsIndex,na,"onStatisticFields contains missing fields");S&&c.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const oa of R){const {onStatisticField:qa,statisticType:wa}=oa;if(("percentile_disc"===wa||"percentile_cont"===wa)&&"statisticParameters"in
oa){if({statisticParameters:S}=oa,!S)throw new Z("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:oa,query:W});}else if("count"!==wa&&qa&&c.hasInvalidFieldType(qa,this.fieldsIndex))throw new Z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:oa,query:W});}}};J._getQueryEngineResultForStats=function(){var W=d._asyncToGenerator(function*(R,ja,ma){R=v.clone(R);try{R=yield this._schedule(()=>m.normalizeQuery(R,
this.definitionExpression,this.spatialReference),ma);R=yield this._reschedule(()=>this._checkStatisticsSupport(R,ja),ma);const S=yield this._reschedule(()=>this._executeSceneFilterQuery(R,ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(R,S,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),
ma);return na}catch(S){if(S!==m.QUERY_ENGINE_EMPTY_RESULT)throw S;return new E.QueryEngineResult([],R,this)}});return function(R,ja,ma){return W.apply(this,arguments)}}();d._createClass(e,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const W=this.featureStore.fullBounds;return y.isNone(W)?null:{xmin:W[0],ymin:W[1],xmax:W[2],ymax:W[3],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=q.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return e}();const T=t.create(),I=t.create(),A=new Set;h.Feature=function(e,J=null,W,R,ja){this.attributes=e;this.geometry=W;this.centroid=R;this.filterFlags=ja;this.groupId=-1;this.displayId=J};h.QueryEngine=U;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(h,d,ca,Z){h.RemoveMode=void 0;(function(B){B[B.ALL=0]="ALL";B[B.SOME=1]="SOME"})(h.RemoveMode||(h.RemoveMode={}));let v=function(){function B(t,u,z){this._namespace=t;this._storage=u;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";z&&(this._storage.registerRemoveFunc(this._namespace,z),this._removeFunc=!0)}var r=B.prototype;r.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};r.resetHitRate=function(){this._hit=this._miss=0};r.put=function(t,u,z,O=0){this._storage.put(this._namespace+t,u,z,O)};r.get=function(t){t=this._storage.get(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};r.pop=function(t){t=this._storage.pop(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};r.updateSize=function(t,u,z){this._storage.updateSize(this._namespace+t,u,z)};r.clear=function(){this._storage.clear(this._namespace)};
r.clearAll=function(){this._storage.clearAll()};r.getStats=function(){return this._storage.getStats()};r.resetStats=function(){this._storage.resetStats()};d._createClass(B,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return B}(),y=function(){function B(t=10485760){this._maxSize=t;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Z;this._users=new Z}var r=B.prototype;r.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};r.register=function(t){this._users.push(t)};r.deregister=function(t){this._users.removeUnordered(t)};r.registerRemoveFunc=function(t,u){this._removeFuncs.push([t,u])};r.deregisterRemoveFunc=function(t){this._removeFuncs.filterInPlace(u=>u[0]!==t)};r.put=function(t,u,z,O){const Q=this._db.get(t);Q&&(this._size-=
Q.size,this._db.delete(t),Q.entry!==u&&this._notifyRemove(t,Q.entry,h.RemoveMode.ALL));z>this._maxSize?this._notifyRemove(t,u,h.RemoveMode.ALL):void 0===u?console.warn("Refusing to cache undefined entry "):!z||0>z?console.warn("Refusing to cache entry with invalid size "+z):(O=1+Math.max(O,-3)- -3,this._db.set(t,{entry:u,size:z,lifetime:O,lives:O}),this._size+=z,this._checkSizeLimit())};r.updateSize=function(t,u,z){const O=this._db.get(t);if(O&&O.entry===u){for(this._size-=O.size;z>this._maxSize;)if(z=
this._notifyRemove(t,u,h.RemoveMode.SOME),!(ca.isSome(z)&&0<z)){this._db.delete(t);return}O.size=z;this._size+=z;this._checkSizeLimit()}};r.pop=function(t){const u=this._db.get(t);if(u)return this._size-=u.size,this._db.delete(t),++this._hit,u.entry;++this._miss};r.get=function(t){const u=this._db.get(t);if(void 0===u)++this._miss;else return this._db.delete(t),u.lives=u.lifetime,this._db.set(t,u),++this._hit,u.entry};r.getStats=function(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},u={},z=[];this._db.forEach((n,L)=>{const c=n.lifetime;z[c]=(z[c]||0)+n.size;this._users.forAll(k=>{k=k.namespace;L.startsWith(k)&&(u[k]=(u[k]||0)+n.size)})});const O={};this._users.forAll(n=>{const L=n.namespace;!isNaN(n.hitRate)&&0<n.hitRate?(u[L]=u[L]||0,O[L]=Math.round(100*n.hitRate)+"%"):O[L]="0%"});var Q=Object.keys(u);Q.sort((n,L)=>u[L]-u[n]);Q.forEach(n=>t[n]=Math.round(u[n]/2**20)+"MB / "+O[n]);
for(Q=z.length-1;0<=Q;--Q){const n=z[Q];n&&(t["Priority "+(Q+-3-1)]=Math.round(n/this.size*100)+"%")}return t};r.resetStats=function(){this._hit=this._miss=0;this._users.forAll(t=>t.resetHitRate())};r.clear=function(t){this._db.forEach((u,z)=>{z.startsWith(t)&&(this._size-=u.size,this._db.delete(z),this._notifyRemove(z,u.entry,h.RemoveMode.ALL))})};r.clearAll=function(){this._db.forEach((t,u)=>this._notifyRemove(u,t.entry,h.RemoveMode.ALL));this._size=0;this._db.clear()};r._getHitRate=function(){return this._hit/
(this._hit+this._miss)};r._notifyRemove=function(t,u,z){let O;this._removeFuncs.some(Q=>t.startsWith(Q[0])?(Q=Q[1](u,z),"number"===typeof Q&&(O=Q),!0):!1);return O};r._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [t,u]of this._db){this._db.delete(t);if(1>=u.lives){this._size-=u.size;const z=this._notifyRemove(t,u.entry,h.RemoveMode.SOME);ca.isSome(z)&&0<z&&(this._size+=z,u.lives=u.lifetime,u.size=z,this._db.set(t,u))}else--u.lives,this._db.set(t,u);if(this._size<=.9*this.maxSize)break}};
d._createClass(B,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(t){this._maxSize=Math.max(t,0);this._checkSizeLimit()}}]);return B}();h.MIN_PRIORITY=-3;h.MemCache=v;h.MemCacheStorage=y;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q){function n(m){const x=[];let N=0,K=0;for(let ha=0;ha<m.length;ha++){const F=m[ha];let G=null;for(let U=0;U<F.length;U++)G=F[U],x.push(G),0===U?K=N=G[0]:(N=Math.min(N,G[0]),K=Math.max(K,G[0]));G&&x.push([(N+K)/2,0])}return x}function L(m,x){if(!(m instanceof r||m instanceof B))throw q.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Z("straightLineDensify: the input geometry is neither polyline nor polygon");var N=t.getGeometryParts(m);
const K=[];for(const F of N){N=[];K.push(N);N.push([F[0][0],F[0][1]]);for(let G=0;G<F.length-1;G++){const U=F[G][0],T=F[G][1],I=F[G+1][0],A=F[G+1][1];var ha=Math.sqrt((I-U)*(I-U)+(A-T)*(A-T));const e=(A-T)/ha,J=(I-U)/ha,W=ha/x;if(1<W){for(let R=1;R<=W-1;R++){const ja=R*x;N.push([J*ja+U,e*ja+T])}ha=(ha+Math.floor(W-1)*x)/2;N.push([J*ha+U,e*ha+T])}N.push([I,A])}}return"polygon"===m.type?new B({rings:K,spatialReference:m.spatialReference}):new r({paths:K,spatialReference:m.spatialReference})}function c(m,
x,N){x&&(m=L(m,1E6),m=z.webMercatorToGeographic(m,!0));N&&(m=t.updatePolyGeometry(m,N));return m}function k(m,x,N){if(Array.isArray(m)){var K=m[0];K>x?(N=t.offsetMagnitude(K,x),m[0]=K+-2*N*x):K<N&&(x=t.offsetMagnitude(K,N),m[0]=K+-2*x*N)}else K=m.x,K>x?(N=t.offsetMagnitude(K,x),m=m.clone().offset(-2*N*x,0)):K<N&&(x=t.offsetMagnitude(K,N),m=m.clone().offset(-2*x*N,0));return m}function M(m,x){let N=-1;for(let K=0;K<x.cutIndexes.length;K++){const ha=x.cutIndexes[K],F=x.geometries[K],G=t.getGeometryParts(F);
for(let U=0;U<G.length;U++){const T=G[U];T.some(I=>{if(180>I[0])return!0;I=0;for(var A=0;A<T.length;A++){var e=T[A][0];I=e>I?e:I}I=Number(I.toFixed(9));I=-360*t.offsetMagnitude(I,180);for(A=0;A<T.length;A++)e=F.getPoint(U,A),F.setPoint(U,A,e.clone().offset(I,0));return!0})}if(ha===N)if("polygon"===m[0].type)for(const U of t.getGeometryParts(F))m[ha]=m[ha].addRing(U);else{if("polyline"===m[0].type)for(const U of t.getGeometryParts(F))m[ha]=m[ha].addPath(U)}else N=ha,m[ha]=F}return m}function E(m,x,
N){return l.apply(this,arguments)}function l(){l=d._asyncToGenerator(function*(m,x,N){var K;if(!Array.isArray(m))return E([m],x);x&&"string"!==typeof x&&q.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");x="string"===typeof x?x:null!=(K=null==x?void 0:x.url)?K:ca.geometryServiceUrl;let ha,F,G;let U=0;var T=[];K=[];for(var I of m)if(y.isNone(I))K.push(I);else{if(!A){var A=I.spatialReference;var e=u.getInfo(A);var J=(ha=A.isWebMercator)?102100:4326;F=t.cutParams[J].maxX;
G=t.cutParams[J].minX;var W=t.cutParams[J].plus180Line;J=t.cutParams[J].minus180Line}if(e)if("mesh"===I.type)K.push(I);else if("point"===I.type)K.push(k(I.clone(),F,G));else if("multipoint"===I.type){var R=I.clone();R.points=R.points.map(ja=>k(ja,F,G));K.push(R)}else if("extent"===I.type)R=I.clone()._normalize(!1,!1,e),K.push(R.rings?new B(R):R);else if(I.extent){R=I.extent;const ja=2*t.offsetMagnitude(R.xmin,G)*F;let ma=0===ja?I.clone():t.updatePolyGeometry(I.clone(),ja);R.offset(ja,0);R.intersects(W)&&
R.xmax!==F?(U=R.xmax>U?R.xmax:U,ma=c(ma,ha),T.push(ma),K.push("cut")):R.intersects(J)&&R.xmin!==G?(U=2*R.xmax*F>U?2*R.xmax*F:U,ma=c(ma,ha,360),T.push(ma),K.push("cut")):K.push(ma)}else K.push(I.clone());else K.push(I)}A=t.offsetMagnitude(U,F);e=-90;W=A;for(I=new r;0<A;)J=-180+360*A,I.addPath([[J,e],[J,-1*e]]),e*=-1,A--;if(0<T.length&&0<W){A=yield O.cut(x,T,I,N);A=M(T,A);e=[];T=[];for(W=0;W<K.length;W++)I=K[W],"cut"!==I?T.push(I):(I=A.shift(),J=m[W],y.isSome(J)&&"polygon"===J.type&&J.rings&&1<J.rings.length&&
I.rings.length>=J.rings.length?(e.push(I),T.push("simplify")):T.push(ha?z.geographicToWebMercator(I):I));if(!e.length)return T;K=yield Q.simplify(x,e,N);m=[];for(N=0;N<T.length;N++)x=T[N],"simplify"!==x?m.push(x):m.push(ha?z.geographicToWebMercator(K.shift()):K.shift());return m}m=[];for(N=0;N<K.length;N++)x=K[N],"cut"!==x?m.push(x):(x=T.shift(),m.push(!0===ha?z.geographicToWebMercator(x):x));return m});return l.apply(this,arguments)}const q=v.getLogger("esri.geometry.support.normalizeUtils");h.getDenormalizedExtent=
function(m){if(!m)return null;const x=m.extent;if(!x)return null;var N=m.spatialReference&&u.getInfo(m.spatialReference);if(!N)return x;const [K,ha]=N.valid;({width:N}=x);let {xmin:F,xmax:G}=x;[F,G]=[G,F];if("extent"===m.type||0===N||N<=ha||N>2*ha||F<K||G>ha)return x;let U;switch(m.type){case "polygon":if(1<m.rings.length)U=n(m.rings);else return x;break;case "polyline":if(1<m.paths.length)U=n(m.paths);else return x;break;case "multipoint":U=m.points}m=x.clone();for(let T=0;T<U.length;T++){let I=
U[T][0];0>I?(I+=ha,G=Math.max(I,G)):(I-=ha,F=Math.min(I,F))}m.xmin=F;m.xmax=G;return m.width<N?(m.xmin-=ha,m.xmax-=ha,m):x};h.normalizeCentralMeridian=E;h.normalizeMapX=function(m,x){if(x=u.getInfo(x)){const [N,K]=x.valid;x=K-N;if(m<N)for(;m<N;)m+=x;if(m>K)for(;m>K;)m-=x}return m};h.straightLineDensify=L;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(h,d,ca,Z){function v(y){return Z.isPolygon(y)?y.rings:y.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,
-180],[180,180]]],spatialReference:ca.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ca.WGS84})}};h.cutParams=d;h.getGeometryParts=v;h.offsetMagnitude=function(y,B){return Math.ceil((y-B)/(2*B))};h.updatePolyGeometry=function(y,B){const r=v(y);for(const t of r)for(const u of t)u[0]+=B;return y};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(h,d,ca,Z,v,y){function B(){B=d._asyncToGenerator(function*(r,t,u,z){r="string"===typeof r?v.urlToObject(r):r;const O=t[0].spatialReference;t={...z,query:{...r.query,f:"json",sr:JSON.stringify(O),target:JSON.stringify({geometryType:y.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(u)}};t=yield Z(r.path+"/cut",t);const {cutIndexes:Q,geometries:n=[]}=t.data;return{cutIndexes:Q,geometries:n.map(L=>{L=y.fromJSON(L);L.spatialReference=O;return L})}});return B.apply(this,arguments)}h.cut=
function(r,t,u,z){return B.apply(this,arguments)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(h,d,ca,Z,v){function y(){y=d._asyncToGenerator(function*(t,u,z){const O="string"===typeof t?Z.urlToObject(t):t;t=u[0].spatialReference;const Q=v.getJsonType(u[0]);u={...z,query:{...O.query,
f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),geometries:JSON.stringify(B(u))}};u=yield ca(O.path+"/simplify",u);return r(u.data,Q,t)});return y.apply(this,arguments)}function B(t){return{geometryType:v.getJsonType(t[0]),geometries:t.map(u=>u.toJSON())}}function r(t,u,z){const O=v.getGeometryType(u);return t.map(Q=>{Q=O.fromJSON(Q);Q.spatialReference=z;return Q})}h.simplify=function(t,u,z){return y.apply(this,arguments)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(h,d,ca){function Z(t,u){return t?B.get(t,u):null}function v(t,u,z,O=!0){const Q=[];for(const n of u)if("*"!==n&&!t.has(n))if(O){u=y(n);try{const L=Z(u,t);if(!L)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:u});if(!L.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:L});v(t,L.fieldNames,
"expression contains missing fields")}catch(L){if((u=L&&L.details)&&(u.clause||u.where))throw L;u&&u.missingFields?Q.push(...u.missingFields):Q.push(n)}}else Q.push(n);if(Q.length)throw new d("feature-store:unsupported-query",z,{missingFields:Q});}function y(t){return t.split(" as ")[0]}const B=new ca.WhereClauseCache(50,500),r=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));h.getAliasFromFieldName=
function(t){return t.split(" as ")[1]};h.getExpressionFromFieldName=y;h.getWhereClause=Z;h.hasInvalidFieldType=function(t,u){return(t=u.get(t))?!r.has(t.type):!1};h.validateFields=v;h.validateHaving=function(t,u,z){if(!u)return!0;const O=B.get(u,t);if(!O)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:u});if(!O.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:u});v(t,O.fieldNames,"having contains missing fields");
if(!O.getExpressions().every(Q=>{const {aggregateType:n,field:L}=Q,c=t.has(L)&&t.get(L).name;return z.some(k=>{const {onStatisticField:M,statisticType:E}=k;return(t.has(M)&&t.get(M).name)===c&&E.toLowerCase().trim()===n})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:u});return!0};h.validateWhere=function(t,u){if(!u)return!0;const z=B.get(u,t);if(!z)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:u});
if(!z.isStandardized)throw new d("feature-store:unsupported-query","where clause is not standard",{where:u});v(t,z.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(h,d,ca){let Z=function(){function v(y,B){this._cache=new d(y);this._invalidCache=new d(B)}v.prototype.get=function(y,B){const r=`${B.uid}:${y}`,
t=this._cache.get(r);if(t)return t;if(void 0!==this._invalidCache.get(r))return null;try{const u=ca.WhereClause.create(y,B);this._cache.put(r,u);return u}catch{return this._invalidCache.put(r,null),null}};return v}();h.WhereClauseCache=Z;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(h){return function(){function d(Z,v){this._storage=new h.MemCacheStorage;this._storage.maxSize=Z;v&&this._storage.registerRemoveFunc("",
v)}var ca=d.prototype;ca.put=function(Z,v){this._storage.put(Z,v,1,1)};ca.pop=function(Z){return this._storage.pop(Z)};ca.get=function(Z){return this._storage.get(Z)};ca.clear=function(){this._storage.clearAll()};ca.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(h,d,ca,Z,v,y){function B(I,A){I+="";return I.length>=
A?I:Array(A-I.length+1).join("0")+I}function r(I,A,e="0",J="0",W="0",R="0",ja="",ma="0",S="0"){return"+"===ja||"-"===ja?(I=`${B(parseInt(I,10),4)}-${B(parseInt(A,10),2)}-${B(parseInt(e,10),2)}`,A="",10>parseFloat(R)&&(A="0"),J=`${B(parseInt(J,10),2)}:${B(parseInt(W,10),2)}:${A+parseFloat(R).toString()}`,ja=`${ja}${B(parseInt(ma,10),2)}:${B(parseInt(S,10),2)}`,new Date(I+"T"+J+ja)):new Date(parseInt(I,10),parseInt(A,10)-1,parseInt(e,10),parseInt(J,10),parseInt(W,10),parseFloat(R))}function t(I){let A=
m.exec(I);if(null!==A){const [,e,J,W,R,ja,ma]=A;return r(e,J,W,R,ja,ma)}A=x.exec(I);if(null!==A){const [,e,J,W,R,ja,ma,S,na,oa]=A;return r(e,J,W,R,ja,ma,S,na,oa)}A=N.exec(I);if(null!==A){const [,e,J,W,R,ja,ma,S,na]=A;return r(e,J,W,R,ja,"0",ma,S,na)}A=K.exec(I);if(null!==A){const [,e,J,W,R,ja]=A;return r(e,J,W,R,ja)}A=q.exec(I);if(null!==A){const [,e,J,W]=A;return r(e,J,W)}throw Error("SQL Invalid Timestamp");}function u(I){I=q.exec(I);if(null===I)throw Error("SQL Invalid Date");const [,A,e,J]=I;
return new Date(parseInt(A,10),parseInt(e,10)-1,parseInt(J,10))}function z(I){return Array.isArray(I)?I:[I]}function O(I){return null!==I?!0!==I:null}function Q(I,A){return null!=I&&null!=A?!0===I&&!0===A:!1===I||!1===A?!1:null}function n(I,A){return null!=I&&null!=A?!0===I||!0===A:!0===I||!0===A?!0:null}function L(I,A){if(null==I)return null;let e=!1;for(const J of A)if(null==J)e=null;else if(I===J){e=!0;break}return e}function c(I,A,e){if(null==I)return null;{let J="",W=U.Normal;for(let R=0;R<A.length;R++){const ja=
A.charAt(R);switch(W){case U.Normal:ja===e?W=U.Escaped:J="-[]/{}()*+?.\\^$|".includes(ja)?J+("\\"+ja):"%"===ja?J+".*":"_"===ja?J+".":J+ja;break;case U.Escaped:J="-[]/{}()*+?.\\^$|".includes(ja)?J+("\\"+ja):J+ja,W=U.Normal}}A=new RegExp("^"+J+"$","m")}return A.test(I)}function k(I){return I instanceof Date?I.valueOf():I}function M(I,A,e){if(null==A||null==e)return null;A=k(A);e=k(e);switch(I){case "\x3c\x3e":return A!==e;case "\x3d":return A===e;case "\x3e":return A>e;case "\x3c":return A<e;case "\x3e\x3d":return A>=
e;case "\x3c\x3d":return A<=e}}function E(I,A,e){if(A instanceof v.SqlInterval)if(e instanceof Date)switch(I){case "+":return new Date(A.valueInMilliseconds()+e.getTime());case "-":return A.valueInMilliseconds()-e.getTime();case "*":return A.valueInMilliseconds()*e.getTime();case "/":return A.valueInMilliseconds()/e.getTime()}else if(e instanceof v.SqlInterval)switch(I){case "+":return v.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+e.valueInMilliseconds());case "-":return v.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-
e.valueInMilliseconds());case "*":return A.valueInMilliseconds()*e.valueInMilliseconds();case "/":return A.valueInMilliseconds()/e.valueInMilliseconds()}else A=A.valueInMilliseconds();else if(e instanceof v.SqlInterval)if(A instanceof Date)switch(I){case "+":return new Date(e.valueInMilliseconds()+A.getTime());case "-":return new Date(A.getTime()-e.valueInMilliseconds());case "*":return A.getTime()*e.valueInMilliseconds();case "/":return A.getTime()/e.valueInMilliseconds()}else e=e.valueInMilliseconds();
else if(A instanceof Date&&"number"===typeof e)switch(e*=864E5,A=A.getTime(),I){case "+":return new Date(A+e);case "-":return new Date(A-e);case "*":return new Date(A*e);case "/":return new Date(A/e)}else if(e instanceof Date&&"number"===typeof A)switch(A*=864E5,e=e.getTime(),I){case "+":return new Date(A+e);case "-":return new Date(A-e);case "*":return new Date(A*e);case "/":return new Date(A/e)}switch(I){case "+":return A+e;case "-":return A-e;case "*":return A*e;case "/":return A/e}}function l(I,
A,e,J){I=J.getAttribute(I,A);return null!=I&&1===e[A]?new Date(I):I}const q=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,K=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ha=new Set(["current_timestamp","current_date","current_time"]);let F=function(){function I(){}
I.makeBool=function(A){return!0===A};I.featureValue=function(A,e,J,W){return l(A,e,J,W)};I.equalsNull=function(A){return null===A};I.applyLike=function(A,e,J){return c(A,e,J)};I.ensureArray=function(A){return z(A)};I.applyIn=function(A,e){return L(A,e)};I.currentDate=function(){const A=new Date;A.setHours(0,0,0,0);return A};I.makeSqlInterval=function(A,e,J){return v.SqlInterval.createFromValueAndQualifer(A,e,J)};I.convertInterval=function(A){return A instanceof v.SqlInterval?A.valueInMilliseconds():
A};I.currentTimestamp=function(){return new Date};I.compare=function(A,e,J){return M(A,e,J)};I.calculate=function(A,e,J){return E(A,e,J)};I.makeComparable=function(A){return k(A)};I.evaluateFunction=function(A,e){return v.evaluateFunction(A,e)};I.lookup=function(A,e){A=e[A];return void 0===A?null:A};I.between=function(A,e){return null==A||null==e[0]||null==e[1]?null:A>=e[0]&&A<=e[1]};I.notbetween=function(A,e){return null==A||null==e[0]||null==e[1]?null:A<e[0]||A>e[1]};I.ternaryNot=function(A){return O(A)};
I.ternaryAnd=function(A,e){return Q(A,e)};I.ternaryOr=function(A,e){return n(A,e)};return I}(),G=function(){function I(e,J){this.fieldsIndex=J;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=y.WhereGrammar.parse(e);const {isStandardized:W,isAggregate:R,referencedFieldNames:ja}=this._extractExpressionInfo(J);this.referencedFieldNames=ja;this.isStandardized=W;this.isAggregate=R}I.create=function(e,J){return new I(e,J)};var A=I.prototype;A.testSet=function(e,J=T){const W=
{};for(const R of this.fieldNames)W[R]=e.map(ja=>J.getAttribute(ja,R));return!!this._evaluateNode(this.parseTree,{attributes:W},T)};A.calculateValue=function(e,J=T){e=this._evaluateNode(this.parseTree,e,J);return e instanceof v.SqlInterval?e.valueInMilliseconds()/864E5:e};A.calculateValueCompiled=function(e,J=T){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(e,this.parameters,J,this.datefields);if(ca("esri-csp-restrictions"))return this.calculateValue(e,J);this._compileMe();
return this.parseTree._compiledVersion(e,this.parameters,J,this.datefields)};A.testFeature=function(e,J=T){return!!this._evaluateNode(this.parseTree,e,J)};A.testFeatureCompiled=function(e,J=T){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(e,this.parameters,J,this.datefields);if(ca("esri-csp-restrictions"))return this.testFeature(e,J);this._compileMe();return!!this.parseTree._compiledVersion(e,this.parameters,J,this.datefields)};A.getFunctions=function(){const e=
new Set;this._visitAll(this.parseTree,J=>{"function"===J.type&&e.add(J.name.toLowerCase())});return Array.from(e)};A.getExpressions=function(){const e=new Map;this._visitAll(this.parseTree,J=>{if("function"===J.type){const W=J.name.toLowerCase();J=J.args.value[0];if("column-reference"===J.type){J=J.column;const R=`${W}-${J}`;e.has(R)||e.set(R,{aggregateType:W,field:J})}}});return[...e.values()]};A.getVariables=function(){const e=new Set;this._visitAll(this.parseTree,J=>{"parameter"===J.type&&e.add(J.value.toLowerCase())});
return Array.from(e)};A._compileMe=function(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",e)).bind(F)};A._extractExpressionInfo=function(e){const J=[],W=new Set;let R=!0,ja=!0;this._visitAll(this.parseTree,ma=>{switch(ma.type){case "column-reference":{const S=e.get(ma.column);let na,oa;S?na=oa=S.name:(oa=ma.column,na=oa.toLowerCase());!S||"date"!==S.type&&
"esriFieldTypeDate"!==S.type||(this.datefields[S.name]=1);W.has(na)||(W.add(na),J.push(oa));ma.column=oa;break}case "function":{const {name:S,args:na}=ma;ma=na.value.length;R&&(R=v.isStandardized(S,ma));ja&&(ja=Z.isAggregate(S,ma))}}});return{referencedFieldNames:Array.from(J),isStandardized:R,isAggregate:ja}};A._visitAll=function(e,J){if(null!=e)switch(J(e),e.type){case "when-clause":this._visitAll(e.operand,J);this._visitAll(e.value,J);break;case "case-expression":for(const W of e.clauses)this._visitAll(W,
J);"simple"===e.format&&this._visitAll(e.operand,J);null!==e.else&&this._visitAll(e.else,J);break;case "expression-list":for(const W of e.value)this._visitAll(W,J);break;case "unary-expression":this._visitAll(e.expr,J);break;case "binary-expression":this._visitAll(e.left,J);this._visitAll(e.right,J);break;case "function":this._visitAll(e.args,J)}};A.evaluateNodeToJavaScript=function(e){switch(e.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+
","+JSON.stringify(e.op)+")";case "case-expression":var J="";if("simple"===e.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";J="( ";for(let R=0;R<e.clauses.length;R++)J+=" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[R].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[R].value)+") : "}else for(J="( ",W=0;W<e.clauses.length;W++)J+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(e.clauses[W].value)+") : ";J=null!==e.else?J+this.evaluateNodeToJavaScript(e.else):J+"null";return J+=" )";case "parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case "expression-list":J="[";for(W of e.value)"["!==J&&(J+=","),J+=this.evaluateNodeToJavaScript(W);return J+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case "binary-expression":switch(e.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "IS":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+
this.evaluateNodeToJavaScript(e.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw Error("Not Supported Operator "+e.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(e.value);case "date":return"(new Date("+u(e.value).getTime().toString()+"))";case "timestamp":return"(new Date("+t(e.value).getTime().toString()+"))";case "current-time":return"date"===
e.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw Error("Unsupported sql syntax "+e.type);};A._evaluateNode=function(e,J,W){switch(e.type){case "interval":return J=this._evaluateNode(e.value,J,W),v.SqlInterval.createFromValueAndQualifer(J,e.qualifier,e.op);case "case-expression":if("simple"===
e.format){var R=k(this._evaluateNode(e.operand,J,W));for(var ja=0;ja<e.clauses.length;ja++)if(R===k(this._evaluateNode(e.clauses[ja].operand,J,W)))return this._evaluateNode(e.clauses[ja].value,J,W)}else for(R=0;R<e.clauses.length;R++)if(!0===this._evaluateNode(e.clauses[R].operand,J,W))return this._evaluateNode(e.clauses[R].value,J,W);return null!==e.else?this._evaluateNode(e.else,J,W):null;case "parameter":return this.parameters[e.value.toLowerCase()];case "expression-list":R=[];for(ja of e.value)R.push(this._evaluateNode(ja,
J,W));return R;case "unary-expression":return O(this._evaluateNode(e.expr,J,W));case "binary-expression":switch(e.operator){case "AND":return Q(this._evaluateNode(e.left,J,W),this._evaluateNode(e.right,J,W));case "OR":return n(this._evaluateNode(e.left,J,W),this._evaluateNode(e.right,J,W));case "IS":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(e.left,J,W);case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(e.left,
J,W);case "IN":return R=z(this._evaluateNode(e.right,J,W)),L(this._evaluateNode(e.left,J,W),R);case "NOT IN":return R=z(this._evaluateNode(e.right,J,W)),O(L(this._evaluateNode(e.left,J,W),R));case "BETWEEN":return R=this._evaluateNode(e.left,J,W),e=this._evaluateNode(e.right,J,W),null==R||null==e[0]||null==e[1]?null:R>=k(e[0])&&R<=k(e[1]);case "NOTBETWEEN":return R=this._evaluateNode(e.left,J,W),e=this._evaluateNode(e.right,J,W),null==R||null==e[0]||null==e[1]?null:R<k(e[0])||R>k(e[1]);case "LIKE":return c(this._evaluateNode(e.left,
J,W),this._evaluateNode(e.right,J,W),e.escape);case "NOT LIKE":return O(c(this._evaluateNode(e.left,J,W),this._evaluateNode(e.right,J,W),e.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return M(e.operator,this._evaluateNode(e.left,J,W),this._evaluateNode(e.right,J,W));case "-":case "+":case "*":case "/":return E(e.operator,this._evaluateNode(e.left,J,W),this._evaluateNode(e.right,J,W))}case "null":case "boolean":case "string":case "number":return e.value;
case "date":return u(e.value);case "timestamp":return t(e.value);case "current-time":return J=new Date,"date"===e.mode&&J.setHours(0,0,0,0),J;case "column-reference":return l(J,e.column,this.datefields,W);case "function":return J=this._evaluateNode(e.args,J,W),this.isAggregate?Z.aggregateFunction(e.name,J):v.evaluateFunction(e.name,J)}throw Error("Unsupported sql syntax "+e.type);};d._createClass(I,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||ha.has(e.name.toLowerCase()))});return this._hasDateFunctions}}]);return I}();var U;(function(I){I[I.Normal=0]="Normal";I[I.Escaped=1]="Escaped"})(U||(U={}));const T={getAttribute(I,A){return(I&&"object"===typeof I.attributes?I.attributes:I)[A]}};h.WhereClause=G;h.defaultAttributeAdapter=
T;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(h){function d(v){let y=0;for(let B=0;B<v.length;B++)y+=v[B];return y/v.length}function ca(v){const y=d(v),B=v.length;let r=0;for(const t of v)r+=(t-y)**2;return 1<B?r/(B-1):0}const Z={min:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.min.apply(Math,v[0])},max:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.max.apply(Math,
v[0])},avg:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:d(v[0])},sum:{minParams:1,maxParams:1,evaluate:v=>{if(null==v[0])v=null;else{{v=v[0];let y=0;for(let B=0;B<v.length;B++)y+=v[B];v=y}}return v}},stddev:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.sqrt(ca(v[0]))},count:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:v[0].length},var:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:ca(v[0])}};h.aggregateFunction=function(v,y){const B=Z[v.toLowerCase()];if(null==B)throw Error("Function Not Recognised");
if(y.length<B.minParams||y.length>B.maxParams)throw Error(`Invalid Parameter count for call to ${v.toUpperCase()}`);return B.evaluate(y)};h.isAggregate=function(v,y){v=Z[v.toLowerCase()];return null!=v&&y>=v.minParams&&y<=v.maxParams};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(h,d){let ca=function(){function v(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}v._fixDefaults=function(y){if(null!==y.precision||null!==y.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};v.createFromMilliseconds=function(y){const B=new v;B.second=y/1E3;return B};v.createFromValueAndQualifer=function(y,B,r){let t=null;const u=new v;u.op="-"===r?"-":"+";if("interval-period"===B.type){v._fixDefaults(B);if("year"===B.period||"month"===B.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(y))u[B.period]=
parseFloat(y);else throw Error("Illegal Interval");}else{v._fixDefaults(B.start);v._fixDefaults(B.end);if("year"===B.start.period||"month"===B.start.period)throw Error("Year-Month Intervals not supported");if("year"===B.end.period||"month"===B.end.period)throw Error("Year-Month Intervals not supported");switch(B.start.period){case "day":switch(B.end.period){case "hour":t=/^[0-9]{1,} [0-9]{1,}$/;if(t.test(y))u[B.start.period]=parseFloat(y.split(" ")[0]),u[B.end.period]=parseFloat(y.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(t.test(y))u[B.start.period]=parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),u.hour=parseFloat(y[0]),u.minute=parseFloat(y[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(y))u[B.start.period]=parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),u.hour=parseFloat(y[0]),u.minute=parseFloat(y[1]),u.second=
parseFloat(y[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(B.end.period){case "minute":t=/^[0-9]{1,}:[0-9]{1,}$/;if(t.test(y))u.hour=parseFloat(y.split(":")[0]),u.minute=parseFloat(y.split(":")[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(y))y=y.split(":"),u.hour=parseFloat(y[0]),u.minute=parseFloat(y[1]),u.second=parseFloat(y[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(B.end.period){case "second":t=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(y))y=y.split(":"),u.minute=parseFloat(y[0]),u.second=parseFloat(y[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return u};v.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+
365/12*this.month*864E5+31536E6*this.year)};return v}();const Z={extract:{minParams:2,maxParams:2,evaluate:([v,y])=>{if(null==y)return null;if(y instanceof Date)switch(v.toUpperCase()){case "SECOND":return y.getSeconds();case "MINUTE":return y.getMinutes();case "HOUR":return y.getHours();case "DAY":return y.getDate();case "MONTH":return y.getMonth()+1;case "YEAR":return y.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:v=>{if(2===v.length){const [y,
B]=v;return null==y||null==B?null:y.toString().substring(B-1)}if(3===v.length){const [y,B,r]=v;return null==y||null==B||null==r?null:0>=r?"":y.toString().substring(B-1,B+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([v,y])=>null==v||null==y?null:y.indexOf(v)+1},trim:{minParams:2,maxParams:3,evaluate:v=>{var y=3===v.length,B=y?v[1]:" ";y=y?v[2]:v[1];if(null==B||null==y)return null;B=`(${d.escapeRegExpString(B)})`;switch(v[0]){case "BOTH":return y.replace(new RegExp(`^${B}*|${B}*$`,"g"),"");case "LEADING":return y.replace(new RegExp(`^${B}*`,
"g"),"");case "TRAILING":return y.replace(new RegExp(`${B}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.abs(v[0])},ceiling:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.ceil(v[0])},floor:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.floor(v[0])},log:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.log(v[0])},log10:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.log(v[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.sin(v[0])},cos:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.cos(v[0])},tan:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.tan(v[0])},asin:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.asin(v[0])},acos:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.acos(v[0])},atan:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.atan(v[0])},sign:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:
0<v[0]?1:0>v[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:v=>null==v[0]||null==v[1]?null:v[0]**v[1]},mod:{minParams:2,maxParams:2,evaluate:v=>null==v[0]||null==v[1]?null:v[0]%v[1]},round:{minParams:1,maxParams:2,evaluate:v=>{const y=v[0];v=2===v.length?10**v[1]:1;return null==y?null:Math.round(y*v)/v}},truncate:{minParams:1,maxParams:2,evaluate:v=>null==v[0]?null:1===v.length?parseInt(v[0].toFixed(0),10):parseFloat(v[0].toFixed(v[1]))},char_length:{minParams:1,maxParams:1,evaluate:v=>"string"===
typeof v[0]||v[0]instanceof String?v[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:v=>{let y="";for(let B=0;B<v.length;B++){if(null==v[B])return null;y+=v[B].toString()}return y}},lower:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:v[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:v[0].toString().toUpperCase()}};h.SqlInterval=ca;h.evaluateFunction=function(v,y){const B=Z[v.toLowerCase()];if(null==B)throw Error("Function Not Recognised");
if(y.length<B.minParams||y.length>B.maxParams)throw Error(`Invalid Parameter count for call to ${v.toUpperCase()}`);return B.evaluate(y)};h.isStandardized=function(v,y){v=Z[v.toLowerCase()];return null!=v&&y>=v.minParams&&y<=v.maxParams};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(h,d){var ca={exports:{}};(function(v){(function(y,B){v.exports&&(v.exports=
B())})(d.commonjsGlobal,function(){function y(r,t,u,z){r=Error.call(this,r);Object.setPrototypeOf&&Object.setPrototypeOf(r,y.prototype);r.expected=t;r.found=u;r.location=z;r.name="SyntaxError";return r}function B(r,t,u){u=u||" ";if(r.length>t)return r;t-=r.length;u+=u.repeat(t);return r+u.slice(0,t)}(function(r,t){function u(){this.constructor=r}u.prototype=t.prototype;r.prototype=new u})(y,Error);y.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var u=null,z;for(z=0;z<
r.length;z++)if(r[z].source===this.location.source){u=r[z].text.split(/\r\n|\n|\r/g);break}r=this.location.start;z=this.location.source+":"+r.line+":"+r.column;if(u){var O=this.location.end,Q=B("",r.line.toString().length);u=u[r.line-1];O=r.line===O.line?O.column:u.length+1;t+="\n --\x3e "+z+"\n"+Q+" |\n"+r.line+" | "+u+"\n"+Q+" | "+B("",r.column-1)+B("",O-r.column,"^")}else t+="\n at "+z}return t};y.buildMessage=function(r,t){function u(L){return L.charCodeAt(0).toString(16).toUpperCase()}function z(L){return L.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+u(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+u(c)})}function O(L){return L.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+u(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(c){return"\\x"+u(c)})}function Q(L){return n[L.type](L)}var n={literal:function(L){return'"'+z(L.text)+'"'},class:function(L){var c=L.parts.map(function(k){return Array.isArray(k)?O(k[0])+"-"+O(k[1]):O(k)});return"["+(L.inverted?"^":"")+c+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(L){return L.description}};return"Expected "+function(L){L=L.map(Q);var c,k;L.sort();if(0<L.length){for(k=c=1;c<L.length;c++)L[c-1]!==L[c]&&(L[k]=L[c],k++);L.length=
k}switch(L.length){case 1:return L[0];case 2:return L[0]+" or "+L[1];default:return L.slice(0,-1).join(", ")+", or "+L[L.length-1]}}(r)+" but "+(t?'"'+z(t)+'"':"end of input")+" found."};return{SyntaxError:y,parse:function(r,t){function u(w,C){return{type:"literal",text:w,ignoreCase:C}}function z(w,C,aa){return{type:"class",parts:w,inverted:C,ignoreCase:aa}}function O(w){var C=fc[w],aa;if(!C){for(aa=w-1;!fc[aa];)aa--;C=fc[aa];for(C={line:C.line,column:C.column};aa<w;)10===r.charCodeAt(aa)?(C.line++,
C.column=1):C.column++,aa++;fc[w]=C}return C}function Q(w,C){var aa=O(w),ua=O(C);return{source:bb,start:{offset:w,line:aa.line,column:aa.column},end:{offset:C,line:ua.line,column:ua.column}}}function n(w){f<tb||(f>tb&&(tb=f,zc=[]),zc.push(w))}function L(){var w=f;ta();var C=k();C!==a?(ta(),w=C):(f=w,w=a);return w}function c(){var w=f;var C=k();if(C!==a){w=[];var aa=f;var ua=ta();var Ca=Fa();if(Ca!==a){var Na=ta();var Pa=k();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;for(;aa!==a;)w.push(aa),
aa=f,ua=ta(),Ca=Fa(),Ca!==a?(Na=ta(),Pa=k(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);aa={type:"expression-list"};C=[C];for(ua=0;ua<w.length;ua++)C.push(w[ua][3]);aa.value=C;w=aa}else f=w,w=a;return w}function k(){var w=f;var C=M();if(C!==a){w=[];var aa=f;var ua=ta();var Ca=X();if(Ca!==a){var Na=ta();var Pa=M();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;for(;aa!==a;)w.push(aa),aa=f,ua=ta(),Ca=X(),Ca!==a?(Na=ta(),Pa=M(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);w=Ya(C,
w)}else f=w,w=a;return w}function M(){var w=f;var C=E();if(C!==a){w=[];var aa=f;var ua=ta();var Ca=D();if(Ca!==a){var Na=ta();var Pa=E();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;for(;aa!==a;)w.push(aa),aa=f,ua=ta(),Ca=D(),Ca!==a?(Na=ta(),Pa=E(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);w=Ya(C,w)}else f=w,w=a;return w}function E(){var w=f;var C=g();if(C===a){C=f;if(33===r.charCodeAt(f)){var aa=qb;f++}else aa=a,0===va&&n(rd);if(aa!==a){var ua=f;va++;if(61===r.charCodeAt(f)){var Ca=
Cb;f++}else Ca=a,0===va&&n(Pc);va--;Ca===a?ua=void 0:(f=ua,ua=a);ua!==a?C=aa=[aa,ua]:(f=C,C=a)}else f=C,C=a}C!==a?(aa=ta(),ua=E(),ua!==a?w={type:"unary-expression",operator:"NOT",expr:ua}:(f=w,w=a)):(f=w,w=a);if(w===a){C=f;w=x();if(w!==a){ta();C=[];aa=f;ua=ta();Ca=l();if(Ca!==a){var Na=ta();var Pa=x();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;if(aa!==a)for(;aa!==a;)C.push(aa),aa=f,ua=ta(),Ca=l(),Ca!==a?(Na=ta(),Pa=x(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);else C=a;C!==a&&
(C={type:"arithmetic",tail:C});C===a&&(C=f,aa=m(),aa!==a?(ta(),ua=Ga(),ua!==a?(ta(),ua=c(),ua!==a?(ta(),Ca=Qa(),Ca!==a?C={op:aa,right:ua}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a)):(f=C,C=a),C===a&&(C=f,aa=m(),aa!==a?(ta(),ua=Ga(),ua!==a?(ta(),ua=Qa(),ua!==a?C={op:aa,right:{type:"expression-list",value:[]}}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a),C===a&&(C=f,aa=m(),aa!==a?(ta(),ua=A(),ua!==a?C={op:aa,right:ua}:(f=C,C=a)):(f=C,C=a))),C===a&&(C=f,Ca=g(),Ca!==a?(ta(),aa=Y(),aa!==a?(ta(),ua=x(),ua!==a?(ta(),Na=D(),Na!==
a?(ta(),Ca=x(),Ca!==a?C={op:"NOT"+aa,right:{type:"expression-list",value:[ua,Ca]}}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a)):(f=C,C=a)):(f=C,C=a),C===a&&(C=f,Ca=Y(),Ca!==a?(ta(),aa=x(),aa!==a?(ta(),ua=D(),ua!==a?(ta(),Na=x(),Na!==a?C={op:Ca,right:{type:"expression-list",value:[aa,Na]}}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a)):(f=C,C=a)),C===a&&(C=f,aa=p(),aa!==a?(ta(),ua=g(),ua!==a?(ta(),ua=x(),ua!==a?C={op:aa+"NOT",right:ua}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a),C===a&&(C=f,aa=p(),aa!==a?(ta(),ua=x(),ua!==a?C={op:aa,right:ua}:
(f=C,C=a)):(f=C,C=a)),C===a&&(C=f,aa=q(),aa!==a?(ta(),ua=ma(),ua!==a?(ta(),Ca=f,r.substr(f,6).toLowerCase()===ya?(Na=r.substr(f,6),f+=6):(Na=a,0===va&&n(sd)),Na!==a?(Na=f,va++,Pa=T(),va--,Pa===a?Na=void 0:(f=Na,Na=a),Na!==a?Ca="ESCAPE":(f=Ca,Ca=a)):(f=Ca,Ca=a),Ca!==a?(ta(),Ca=S(),Ca!==a?C={op:aa,right:ua,escape:Ca.value}:(f=C,C=a)):(f=C,C=a)):(f=C,C=a)):(f=C,C=a),C===a&&(C=f,aa=q(),aa!==a?(ta(),ua=ma(),ua!==a?C={op:aa,right:ua,escape:""}:(f=C,C=a)):(f=C,C=a))))));C===a&&(C=null);""==C||void 0==C||
null==C?C=w:(aa=null,C=aa="arithmetic"==C.type?Ya(w,C.tail):ab(C.op,w,C.right,C.escape))}else f=C,C=a;w=C}return w}function l(){if(r.substr(f,2)===Tb){var w=Tb;f+=2}else w=a,0===va&&n(td);w===a&&(62===r.charCodeAt(f)?(w=Fb,f++):(w=a,0===va&&n(ud)),w===a&&(r.substr(f,2)===la?(w=la,f+=2):(w=a,0===va&&n(vd)),w===a&&(r.substr(f,2)===Vb?(w=Vb,f+=2):(w=a,0===va&&n(wd)),w===a&&(60===r.charCodeAt(f)?(w=Db,f++):(w=a,0===va&&n(xd)),w===a&&(61===r.charCodeAt(f)?(w=Cb,f++):(w=a,0===va&&n(Pc)),w===a&&(r.substr(f,
2)===gb?(w=gb,f+=2):(w=a,0===va&&n(yd))))))));return w}function q(){var w=w=f;var C=g();if(C!==a){var aa=ta();var ua=fa();ua!==a?w=C=[C,aa,ua]:(f=w,w=a)}else f=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=fa());return w}function m(){var w=w=f;var C=g();if(C!==a){var aa=ta();var ua=b();ua!==a?w=C=[C,aa,ua]:(f=w,w=a)}else f=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=b());return w}function x(){var w=f;var C=K();if(C!==a){w=[];var aa=f;var ua=ta();var Ca=N();if(Ca!==a){var Na=ta();var Pa=K();Pa!==a?aa=ua=[ua,
Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;for(;aa!==a;)w.push(aa),aa=f,ua=ta(),Ca=N(),Ca!==a?(Na=ta(),Pa=K(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);w=Ya(C,w)}else f=w,w=a;return w}function N(){if(43===r.charCodeAt(f)){var w=rb;f++}else w=a,0===va&&n(Ac);w===a&&(45===r.charCodeAt(f)?(w=Gb,f++):(w=a,0===va&&n(Bc)));return w}function K(){var w=f;var C=F();if(C!==a){w=[];var aa=f;var ua=ta();var Ca=ha();if(Ca!==a){var Na=ta();var Pa=F();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)}else f=aa,aa=a;for(;aa!==
a;)w.push(aa),aa=f,ua=ta(),Ca=ha(),Ca!==a?(Na=ta(),Pa=F(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(f=aa,aa=a)):(f=aa,aa=a);w=Ya(C,w)}else f=w,w=a;return w}function ha(){if(42===r.charCodeAt(f)){var w=Ub;f++}else w=a,0===va&&n(zd);w===a&&(47===r.charCodeAt(f)?(w=yc,f++):(w=a,0===va&&n(Ad)));return w}function F(){var w=S();if(w===a){var C=f;var aa=f;var ua=wa();if(ua!==a){var Ca=Ma();if(Ca!==a){var Na=Ja();Na!==a?aa=parseFloat(ua+Ca+Na):(f=aa,aa=a)}else f=aa,aa=a}else f=aa,aa=a;aa===a&&(aa=f,ua=wa(),ua!==a?(Ca=
Ma(),Ca!==a?aa=parseFloat(ua+Ca):(f=aa,aa=a)):(f=aa,aa=a),aa===a&&(aa=f,ua=wa(),ua!==a?(Ca=Ja(),Ca!==a?aa=parseFloat(ua+Ca):(f=aa,aa=a)):(f=aa,aa=a),aa===a&&(aa=f,ua=wa(),ua!==a&&(ua=parseFloat(ua)),aa=ua)));var Pa=aa;if(Pa!==a){var gc=f;va++;var Bd=U();va--;Bd===a?gc=void 0:(f=gc,gc=a);gc!==a?C={type:"number",value:Pa}:(f=C,C=a)}else f=C,C=a;w=C;if(w===a){var Wb=f;var Ib=f;if(r.substr(f,4).toLowerCase()===Hb){var hc=r.substr(f,4);f+=4}else hc=a,0===va&&n(Cd);if(hc!==a){var Xb=f;va++;var Dd=T();va--;
Dd===a?Xb=void 0:(f=Xb,Xb=a);Xb!==a?Ib=hc=[hc,Xb]:(f=Ib,Ib=a)}else f=Ib,Ib=a;var Eb=Ib;Eb!==a&&(Eb={type:"boolean",value:!0});Wb=Eb;if(Wb===a){Wb=f;var Jb=f;if(r.substr(f,5).toLowerCase()===V){var ic=r.substr(f,5);f+=5}else ic=a,0===va&&n(Ed);if(ic!==a){var Yb=f;va++;var Fd=T();va--;Fd===a?Yb=void 0:(f=Yb,Yb=a);Yb!==a?Jb=ic=[ic,Yb]:(f=Jb,Jb=a)}else f=Jb,Jb=a;Eb=Jb;Eb!==a&&(Eb={type:"boolean",value:!1});Wb=Eb}w=Wb;if(w===a){var Kb=f;if(r.substr(f,4).toLowerCase()===Oa){var jc=r.substr(f,4);f+=4}else jc=
a,0===va&&n(Gd);if(jc!==a){var Zb=f;va++;var Hd=T();va--;Hd===a?Zb=void 0:(f=Zb,Zb=a);Zb!==a?Kb=jc=[jc,Zb]:(f=Kb,Kb=a)}else f=Kb,Kb=a;var Cc=Kb;Cc!==a&&(Cc={type:"null",value:null});w=Cc;if(w===a){var Lb=f;var Mb=f;if(r.substr(f,4).toLowerCase()===Id){var Qc=r.substr(f,4);f+=4}else Qc=a,0===va&&n(Jd);if(Qc!==a){var kc=f;va++;var Kd=T();va--;Kd===a?kc=void 0:(f=kc,kc=a);kc!==a?Mb="DATE":(f=Mb,Mb=a)}else f=Mb,Mb=a;if(Mb!==a){ta();var Rc=ma();Rc!==a?Lb={type:"date",value:Rc.value}:(f=Lb,Lb=a)}else f=
Lb,Lb=a;w=Lb;if(w===a){var Nb=f;var Ob=f;if(r.substr(f,9).toLowerCase()===Ld){var Sc=r.substr(f,9);f+=9}else Sc=a,0===va&&n(Md);if(Sc!==a){var lc=f;va++;var Nd=T();va--;Nd===a?lc=void 0:(f=lc,lc=a);lc!==a?Ob="TIMESTAMP":(f=Ob,Ob=a)}else f=Ob,Ob=a;if(Ob!==a){ta();var Tc=ma();Tc!==a?Nb={type:"timestamp",value:Tc.value}:(f=Nb,Nb=a)}else f=Nb,Nb=a;w=Nb;if(w===a){var db=f;var Dc=H();if(Dc!==a){ta();if(45===r.charCodeAt(f)){var xb=Gb;f++}else xb=a,0===va&&n(Bc);xb===a&&(43===r.charCodeAt(f)?(xb=rb,f++):
(xb=a,0===va&&n(Ac)));if(xb!==a){ta();var $b=ma();if($b!==a){ta();var Uc=J();Uc!==a?db={type:"interval",value:$b,qualifier:Uc,op:xb}:(f=db,db=a)}else f=db,db=a}else f=db,db=a}else f=db,db=a;db===a&&(db=f,Dc=H(),Dc!==a?(ta(),xb=ma(),xb!==a?(ta(),$b=J(),$b!==a?db={type:"interval",value:xb,qualifier:$b,op:""}:(f=db,db=a)):(f=db,db=a)):(f=db,db=a));w=db}}}}}}var Wa=w;if(Wa===a){var ib=f;var Pb=f;if(r.substr(f,7).toLowerCase()===nb){var Vc=r.substr(f,7);f+=7}else Vc=a,0===va&&n(Od);if(Vc!==a){var mc=f;
va++;var Pd=T();va--;Pd===a?mc=void 0:(f=mc,mc=a);mc!==a?Pb="EXTRACT":(f=Pb,Pb=a)}else f=Pb,Pb=a;if(Pb!==a){ta();var Qd=Ga();if(Qd!==a){ta();var ob=P();ob===a&&(ob=da(),ob===a&&(ob=ra(),ob===a&&(ob=sa(),ob===a&&(ob=xa(),ob===a&&(ob=Aa())))));var Wc=ob;if(Wc!==a){ta();var Rd=ka();if(Rd!==a){ta();var Xc=k();if(Xc!==a){ta();var Sd=Qa();Sd!==a?ib={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Wc},Xc]}}:(f=ib,ib=a)}else f=ib,ib=a}else f=ib,ib=a}else f=ib,ib=a}else f=
ib,ib=a}else f=ib,ib=a;Wa=ib;if(Wa===a){var jb=f;var Qb=f;if(r.substr(f,9).toLowerCase()===cb){var Yc=r.substr(f,9);f+=9}else Yc=a,0===va&&n(Td);if(Yc!==a){var nc=f;va++;var Ud=T();va--;Ud===a?nc=void 0:(f=nc,nc=a);nc!==a?Qb="SUBSTRING":(f=Qb,Qb=a)}else f=Qb,Qb=a;if(Qb!==a){ta();var Vd=Ga();if(Vd!==a){ta();var Ec=k();if(Ec!==a){ta();var Wd=ka();if(Wd!==a){ta();var Fc=k();if(Fc!==a){ta();var yb=f;var Rb=f;if(r.substr(f,3).toLowerCase()===Ta){var Zc=r.substr(f,3);f+=3}else Zc=a,0===va&&n(Xd);if(Zc!==
a){var oc=f;va++;var Yd=T();va--;Yd===a?oc=void 0:(f=oc,oc=a);oc!==a?Rb="FOR":(f=Rb,Rb=a)}else f=Rb,Rb=a;var ac=Rb;if(ac!==a){var Zd=ta();var $c=k();if($c!==a){var $d=ta();yb=ac=[ac,Zd,$c,$d]}else f=yb,yb=a}else f=yb,yb=a;yb===a&&(yb=null);ac=Qa();ac!==a?jb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(f=jb,jb=a)}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a;Wa=jb;if(Wa===a){var Xa=f;var Gc=ia();if(Gc!==a){ta();var Hc=
Ga();if(Hc!==a){ta();var zb=e();zb===a&&(zb=null);ta();var bc=k();if(bc!==a){ta();var Ic=ka();if(Ic!==a){ta();var ad=k();if(ad!==a){ta();var ae=Qa();ae!==a?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc,ad]}}:(f=Xa,Xa=a)}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a}else f=Xa,Xa=a;Xa===a&&(Xa=f,Gc=ia(),Gc!==a?(ta(),Hc=Ga(),Hc!==a?(ta(),zb=e(),zb===a&&(zb=null),ta(),bc=k(),bc!==a?(ta(),Ic=Qa(),Ic!==a?Xa={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc]}}:(f=Xa,Xa=a)):(f=Xa,Xa=a)):(f=Xa,Xa=a)):(f=Xa,Xa=a));Wa=Xa;if(Wa===a){var kb=f;var Sb=f;if(r.substr(f,8).toLowerCase()===be){var bd=r.substr(f,8);f+=8}else bd=a,0===va&&n(ce);if(bd!==a){var pc=f;va++;var de=T();va--;de===a?pc=void 0:(f=pc,pc=a);pc!==a?Sb="POSITION":(f=Sb,Sb=a)}else f=Sb,Sb=a;if(Sb!==a){ta();var ee=Ga();if(ee!==a){ta();var cd=k();if(cd!==a){ta();var fe=b();if(fe!==a){ta();var dd=k();if(dd!==
a){ta();var ge=Qa();ge!==a?kb={type:"function",name:"position",args:{type:"expression-list",value:[cd,dd]}}:(f=kb,kb=a)}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a}else f=kb,kb=a;Wa=kb;if(Wa===a){var Bb=f;var qc;var pb=f;pb=qc=G();if(pb===a)if(pb=f,96===r.charCodeAt(f)?(qc=ed,f++):(qc=a,0===va&&n(fd)),qc!==a){var rc=[];if(gd.test(r.charAt(f))){var Ab=r.charAt(f);f++}else Ab=a,0===va&&n(hd);if(Ab!==a)for(;Ab!==a;)rc.push(Ab),gd.test(r.charAt(f))?(Ab=r.charAt(f),f++):(Ab=a,0===va&&n(hd));
else rc=a;rc!==a?(96===r.charCodeAt(f)?(Ab=ed,f++):(Ab=a,0===va&&n(fd)),Ab!==a?pb=rc.join(""):(f=pb,pb=a)):(f=pb,pb=a)}else f=pb,pb=a;var id=pb;if(id!==a){ta();var he=Ga();if(he!==a){ta();var sc=c();sc===a&&(sc=null);ta();var ie=Qa();ie!==a?Bb={type:"function",name:id,args:sc?sc:{type:"expression-list",value:[]}}:(f=Bb,Bb=a)}else f=Bb,Bb=a}else f=Bb,Bb=a;Wa=Bb;if(Wa===a){var ub;var eb=f;var Jc=Ba();if(Jc!==a){ta();var cc=k();if(cc!==a){ta();var dc=[];for(ub=oa();ub!==a;)dc.push(ub),ub=oa();ub=ta();
var tc=Ia();tc!==a?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:null}:(f=eb,eb=a)}else f=eb,eb=a}else f=eb,eb=a;if(eb===a)if(eb=f,Jc=Ba(),Jc!==a)if(ta(),cc=k(),cc!==a){ta();dc=[];for(ub=oa();ub!==a;)dc.push(ub),ub=oa();ub=ta();tc=qa();if(tc!==a){ta();var je=Ia();je!==a?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:tc.value}:(f=eb,eb=a)}else f=eb,eb=a}else f=eb,eb=a;else f=eb,eb=a;var Kc=eb;if(Kc===a){var vb;var hb=f;var Lc=Ba();if(Lc!==a){ta();var ec=
[];for(vb=na();vb!==a;)ec.push(vb),vb=na();vb=ta();var uc=Ia();uc!==a?hb={type:"case-expression",format:"searched",clauses:ec,else:null}:(f=hb,hb=a)}else f=hb,hb=a;if(hb===a)if(hb=f,Lc=Ba(),Lc!==a){ta();ec=[];for(vb=na();vb!==a;)ec.push(vb),vb=na();vb=ta();uc=qa();if(uc!==a){ta();var ke=Ia();ke!==a?hb={type:"case-expression",format:"searched",clauses:ec,else:uc.value}:(f=hb,hb=a)}else f=hb,hb=a}else f=hb,hb=a;Kc=hb}Wa=Kc;if(Wa===a){var vc;var wc=f;var jd=U();if(jd!==a){var kd=[];for(vc=I();vc!==a;)kd.push(vc),
vc=I();wc=jd+kd.join("")}else f=wc,wc=a;var xc=wc;if(xc!==a){var Mc=xc;xc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Wa=xc;if(Wa===a&&(Wa=A(),Wa===a)){Wa=f;var le=Ga();if(le!==a){ta();var Nc=k();if(Nc!==a){ta();var me=Qa();me!==a?(Nc.paren=!0,Wa=Nc):(f=Wa,Wa=a)}else f=Wa,Wa=a}else f=Wa,Wa=a}}}}}}}}return Wa}function G(){var w;var C=f;var aa=U();if(aa!==a){C=[];for(w=
T();w!==a;)C.push(w),w=T();C=aa+C.join("")}else f=C,C=a;return C}function U(){if(ne.test(r.charAt(f))){var w=r.charAt(f);f++}else w=a,0===va&&n(oe);return w}function T(){if(pe.test(r.charAt(f))){var w=r.charAt(f);f++}else w=a,0===va&&n(qe);return w}function I(){if(re.test(r.charAt(f))){var w=r.charAt(f);f++}else w=a,0===va&&n(se);return w}function A(){var w=f;if(64===r.charCodeAt(f)){var C=lb;f++}else C=a,0===va&&n(te);if(C!==a){var aa=G();aa!==a?w=C=[C,aa]:(f=w,w=a)}else f=w,w=a;w!==a&&(w={type:"parameter",
value:w[1]});return w}function e(){var w=f;if(r.substr(f,7).toLowerCase()===ue){var C=r.substr(f,7);f+=7}else C=a,0===va&&n(ve);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="LEADING":(f=w,w=a)}else f=w,w=a;w===a&&(w=f,r.substr(f,8).toLowerCase()===we?(C=r.substr(f,8),f+=8):(C=a,0===va&&n(xe)),C!==a?(C=f,va++,aa=T(),va--,aa===a?C=void 0:(f=C,C=a),C!==a?w="TRAILING":(f=w,w=a)):(f=w,w=a),w===a&&(w=f,r.substr(f,4).toLowerCase()===ye?(C=r.substr(f,4),f+=4):(C=a,0===va&&n(ze)),C!==
a?(C=f,va++,aa=T(),va--,aa===a?C=void 0:(f=C,C=a),C!==a?w="BOTH":(f=w,w=a)):(f=w,w=a)));return w}function J(){var w=f;var C=f;var aa=W();if(aa!==a){ta();var ua=Ga();if(ua!==a)if(ta(),ua=ja(),ua!==a){ta();var Ca=Qa();Ca!==a?C={type:"interval-period",period:aa.value,precision:ua,secondary:null}:(f=C,C=a)}else f=C,C=a;else f=C,C=a}else f=C,C=a;C===a&&(C=f,aa=W(),aa!==a&&(aa=ld(aa)),C=aa);if(C!==a)if(ta(),aa=f,r.substr(f,2).toLowerCase()===Ae?(ua=r.substr(f,2),f+=2):(ua=a,0===va&&n(Be)),ua!==a?(ua=f,
va++,Ca=T(),va--,Ca===a?ua=void 0:(f=ua,ua=a),ua!==a?aa="TO":(f=aa,aa=a)):(f=aa,aa=a),aa!==a){ta();aa=f;ua=W();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});aa=ua;if(aa===a){aa=f;ua=Aa();if(ua!==a)if(ta(),ua=Ga(),ua!==a)if(ta(),ua=ja(),ua!==a)if(ta(),Ca=Fa(),Ca!==a)if(ta(),Ca=R(),Ca!==a){ta();var Na=Qa();Na!==a?aa=md(ua,Ca):(f=aa,aa=a)}else f=aa,aa=a;else f=aa,aa=a;else f=aa,aa=a;else f=aa,aa=a;else f=aa,aa=a;aa===a&&(aa=f,ua=Aa(),ua!==a?(ta(),ua=Ga(),ua!==a?
(ta(),ua=ja(),ua!==a?(ta(),Ca=Qa(),Ca!==a?aa={type:"interval-period",period:"second",precision:ua,secondary:null}:(f=aa,aa=a)):(f=aa,aa=a)):(f=aa,aa=a)):(f=aa,aa=a),aa===a&&(aa=f,ua=Aa(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),aa=ua))}aa!==a?w={type:"interval-qualifier",start:C,end:aa}:(f=w,w=a)}else f=w,w=a;else f=w,w=a;w===a&&(w=f,aa=W(),aa!==a?(ta(),C=Ga(),C!==a?(ta(),C=R(),C!==a?(ta(),ua=Qa(),ua!==a?w={type:"interval-period",period:aa.value,precision:C,
secondary:null}:(f=w,w=a)):(f=w,w=a)):(f=w,w=a)):(f=w,w=a),w===a&&(w=f,aa=W(),aa!==a&&(aa=ld(aa)),w=aa,w===a&&(w=f,aa=Aa(),aa!==a?(ta(),C=Ga(),C!==a?(ta(),C=ja(),C!==a?(ta(),ua=Fa(),ua!==a?(ta(),aa=R(),aa!==a?(ta(),ua=Qa(),ua!==a?w=md(C,aa):(f=w,w=a)):(f=w,w=a)):(f=w,w=a)):(f=w,w=a)):(f=w,w=a)):(f=w,w=a),w===a&&(w=f,aa=Aa(),aa!==a?(ta(),C=Ga(),C!==a?(ta(),C=R(),C!==a?(ta(),ua=Qa(),ua!==a?w={type:"interval-period",period:"second",precision:C,secondary:null}:(f=w,w=a)):(f=w,w=a)):(f=w,w=a)):(f=w,w=
a),w===a&&(w=f,aa=Aa(),aa!==a&&(aa={type:"interval-period",period:"second",precision:null,secondary:null}),w=aa)))));return w}function W(){var w=f;w=ra();w!==a&&(w={type:"string",value:"day"});w===a&&(w=f,w=sa(),w!==a&&(w={type:"string",value:"hour"}),w===a&&(w=f,w=xa(),w!==a&&(w={type:"string",value:"minute"}),w===a&&(w=f,w=da(),w!==a&&(w={type:"string",value:"month"}),w===a&&(w=f,w=P(),w!==a&&(w={type:"string",value:"year"})))));return w}function R(){var w=La();w!==a&&(w=parseFloat(w));return w}
function ja(){var w=La();w!==a&&(w=parseFloat(w));return w}function ma(){var w=S();w===a&&(w=A());return w}function S(){var w=f;if(39===r.charCodeAt(f)){var C=wb;f++}else C=a,0===va&&n(nd);C===a&&(r.substr(f,2)===Sa?(C=Sa,f+=2):(C=a,0===va&&n(Ce)));if(C!==a){C=[];var aa=f;r.substr(f,2)===fb?(aa=fb,f+=2):(aa=a,0===va&&n(od));aa!==a&&(aa="'");aa===a&&(pd.test(r.charAt(f))?(aa=r.charAt(f),f++):(aa=a,0===va&&n(qd)));for(;aa!==a;)C.push(aa),aa=f,r.substr(f,2)===fb?(aa=fb,f+=2):(aa=a,0===va&&n(od)),aa!==
a&&(aa="'"),aa===a&&(pd.test(r.charAt(f))?(aa=r.charAt(f),f++):(aa=a,0===va&&n(qd)));39===r.charCodeAt(f)?(aa=wb,f++):(aa=a,0===va&&n(nd));aa!==a?w={type:"string",value:C.join("")}:(f=w,w=a)}else f=w,w=a;return w}function na(){var w=f;if(Ha()!==a){ta();var C=k();if(C!==a){ta();var aa=Ea();aa!==a?(ta(),aa=k(),aa!==a?w={type:"when-clause",operand:C,value:aa}:(f=w,w=a)):(f=w,w=a)}else f=w,w=a}else f=w,w=a;return w}function oa(){var w=f;if(Ha()!==a){ta();var C=k();if(C!==a){ta();var aa=Ea();aa!==a?(ta(),
aa=k(),aa!==a?w={type:"when-clause",operand:C,value:aa}:(f=w,w=a)):(f=w,w=a)}else f=w,w=a}else f=w,w=a;return w}function qa(){var w=f;var C=f;if(r.substr(f,4).toLowerCase()===De){var aa=r.substr(f,4);f+=4}else aa=a,0===va&&n(Ee);if(aa!==a){aa=f;va++;var ua=T();va--;ua===a?aa=void 0:(f=aa,aa=a);aa!==a?C="ELSE":(f=C,C=a)}else f=C,C=a;C!==a?(ta(),C=k(),C!==a?w={type:"else-clause",value:C}:(f=w,w=a)):(f=w,w=a);return w}function wa(){var w=La();if(w===a){w=f;if(45===r.charCodeAt(f)){var C=Gb;f++}else C=
a,0===va&&n(Bc);C===a&&(43===r.charCodeAt(f)?(C=rb,f++):(C=a,0===va&&n(Ac)));if(C!==a){var aa=La();aa!==a?w=C[0]+aa:(f=w,w=a)}else f=w,w=a}return w}function Ma(){var w=f;if(46===r.charCodeAt(f)){var C=sb;f++}else C=a,0===va&&n(Fe);C!==a?(w=La(),w===a&&(w=null),w="."+(null!=w?w:"")):(f=w,w=a);return w}function Ja(){var w;var C=w=f;if(Ge.test(r.charAt(f))){var aa=r.charAt(f);f++}else aa=a,0===va&&n(He);aa!==a?(Ie.test(r.charAt(f))?(C=r.charAt(f),f++):(C=a,0===va&&n(Je)),C===a&&(C=null),C="e"+(null===
C?"":C)):(f=C,C=a);C!==a?(aa=La(),aa!==a?w=C+aa:(f=w,w=a)):(f=w,w=a);return w}function La(){var w=[];var C=Za();if(C!==a)for(;C!==a;)w.push(C),C=Za();else w=a;w!==a&&(w=w.join(""));return w}function Za(){if(Ke.test(r.charAt(f))){var w=r.charAt(f);f++}else w=a,0===va&&n(Le);return w}function b(){var w=f;if(r.substr(f,2).toLowerCase()===ea){var C=r.substr(f,2);f+=2}else C=a,0===va&&n(Me);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="IN":(f=w,w=a)}else f=w,w=a;return w}function p(){var w=
f;if(r.substr(f,2).toLowerCase()===ba){var C=r.substr(f,2);f+=2}else C=a,0===va&&n(Ne);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="IS":(f=w,w=a)}else f=w,w=a;return w}function fa(){var w=f;if(r.substr(f,4).toLowerCase()===pa){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(Oe);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="LIKE":(f=w,w=a)}else f=w,w=a;return w}function g(){var w=f;if(r.substr(f,3).toLowerCase()===za){var C=r.substr(f,3);f+=3}else C=a,0===
va&&n(Pe);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="NOT":(f=w,w=a)}else f=w,w=a;return w}function D(){var w=f;if(r.substr(f,3).toLowerCase()===Da){var C=r.substr(f,3);f+=3}else C=a,0===va&&n(Qe);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="AND":(f=w,w=a)}else f=w,w=a;return w}function X(){var w=f;if(r.substr(f,2).toLowerCase()===Ka){var C=r.substr(f,2);f+=2}else C=a,0===va&&n(Re);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==
a?w="OR":(f=w,w=a)}else f=w,w=a;return w}function Y(){var w=f;if(r.substr(f,7).toLowerCase()===Va){var C=r.substr(f,7);f+=7}else C=a,0===va&&n(Se);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="BETWEEN":(f=w,w=a)}else f=w,w=a;return w}function ka(){var w=f;if(r.substr(f,4).toLowerCase()===Ua){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(Te);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="FROM":(f=w,w=a)}else f=w,w=a;return w}function ia(){var w=f;if(r.substr(f,
4).toLowerCase()===Ue){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(Ve);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="TRIM":(f=w,w=a)}else f=w,w=a;return w}function H(){var w=f;if(r.substr(f,8).toLowerCase()===We){var C=r.substr(f,8);f+=8}else C=a,0===va&&n(Xe);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="INTERVAL":(f=w,w=a)}else f=w,w=a;return w}function P(){var w=f;if(r.substr(f,4).toLowerCase()===Ye){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(Ze);
if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="YEAR":(f=w,w=a)}else f=w,w=a;return w}function da(){var w=f;if(r.substr(f,5).toLowerCase()===$e){var C=r.substr(f,5);f+=5}else C=a,0===va&&n(af);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="MONTH":(f=w,w=a)}else f=w,w=a;return w}function ra(){var w=f;if(r.substr(f,3).toLowerCase()===bf){var C=r.substr(f,3);f+=3}else C=a,0===va&&n(cf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="DAY":
(f=w,w=a)}else f=w,w=a;return w}function sa(){var w=f;if(r.substr(f,4).toLowerCase()===df){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(ef);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="HOUR":(f=w,w=a)}else f=w,w=a;return w}function xa(){var w=f;if(r.substr(f,6).toLowerCase()===ff){var C=r.substr(f,6);f+=6}else C=a,0===va&&n(gf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="MINUTE":(f=w,w=a)}else f=w,w=a;return w}function Aa(){var w=f;if(r.substr(f,6).toLowerCase()===
hf){var C=r.substr(f,6);f+=6}else C=a,0===va&&n(jf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="SECOND":(f=w,w=a)}else f=w,w=a;return w}function Ba(){var w=f;if(r.substr(f,4).toLowerCase()===kf){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(lf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="CASE":(f=w,w=a)}else f=w,w=a;return w}function Ia(){var w=f;if(r.substr(f,3).toLowerCase()===mf){var C=r.substr(f,3);f+=3}else C=a,0===va&&n(nf);if(C!==a){C=f;va++;
var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="END":(f=w,w=a)}else f=w,w=a;return w}function Ha(){var w=f;if(r.substr(f,4).toLowerCase()===of){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(pf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="WHEN":(f=w,w=a)}else f=w,w=a;return w}function Ea(){var w=f;if(r.substr(f,4).toLowerCase()===qf){var C=r.substr(f,4);f+=4}else C=a,0===va&&n(rf);if(C!==a){C=f;va++;var aa=T();va--;aa===a?C=void 0:(f=C,C=a);C!==a?w="THEN":(f=w,w=a)}else f=
w,w=a;return w}function Fa(){if(44===r.charCodeAt(f)){var w=sf;f++}else w=a,0===va&&n(tf);return w}function Ga(){if(40===r.charCodeAt(f)){var w=uf;f++}else w=a,0===va&&n(vf);return w}function Qa(){if(41===r.charCodeAt(f)){var w=wf;f++}else w=a,0===va&&n(xf);return w}function ta(){var w;var C=[];for(w=$a();w!==a;)C.push(w),w=$a();return C}function $a(){if(yf.test(r.charAt(f))){var w=r.charAt(f);f++}else w=a,0===va&&n(zf);return w}function ab(w,C,aa,ua){w={type:"binary-expression",operator:w,left:C,
right:aa};void 0!==ua&&(w.escape=ua);return w}function Ya(w,C){for(var aa=0;aa<C.length;aa++)w=ab(C[aa][1],w,C[aa][3]);return w}t=void 0!==t?t:{};var a={},bb=t.grammarSource,Ra={start:L},mb=L,qb="!",Cb="\x3d",Tb="\x3e\x3d",Fb="\x3e",la="\x3c\x3d",Vb="\x3c\x3e",Db="\x3c",gb="!\x3d",rb="+",Gb="-",Ub="*",yc="/",lb="@",wb="'",Sa="N'",fb="''",sb=".",Oa="null",Hb="true",V="false",ea="in",ba="is",pa="like",ya="escape",za="not",Da="and",Ka="or",Va="between",Ua="from",Ta="for",cb="substring",nb="extract",
Ue="trim",be="position",Ld="timestamp",Id="date",ue="leading",we="trailing",ye="both",Ae="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",De="else",sf=",",uf="(",wf=")",ed="`",ne=/^[A-Za-z_\x80-\uFFFF]/,pe=/^[A-Za-z0-9_]/,re=/^[A-Za-z0-9_.\x80-\uFFFF]/,pd=/^[^']/,Ke=/^[0-9]/,Ge=/^[eE]/,Ie=/^[+\-]/,yf=/^[ \t\n\r]/,gd=/^[^`]/,rd=u("!",!1),Pc=u("\x3d",!1),td=u("\x3e\x3d",!1),ud=u("\x3e",!1),vd=u("\x3c\x3d",!1),wd=u("\x3c\x3e",!1),
xd=u("\x3c",!1),yd=u("!\x3d",!1),Ac=u("+",!1),Bc=u("-",!1),zd=u("*",!1),Ad=u("/",!1),oe=z([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),qe=z([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),se=z([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),te=u("@",!1),nd=u("'",!1),Ce=u("N'",!1),od=u("''",!1),qd=z(["'"],!0,!1),Fe=u(".",!1),Le=z([["0","9"]],!1,!1),He=z(["e","E"],!1,!1),Je=z(["+","-"],!1,!1),Gd=u("NULL",!0),Cd=u("TRUE",!0),Ed=u("FALSE",!0),Me=u("IN",!0),Ne=u("IS",!0),Oe=u("LIKE",
!0),sd=u("ESCAPE",!0),Pe=u("NOT",!0),Qe=u("AND",!0),Re=u("OR",!0),Se=u("BETWEEN",!0),Te=u("FROM",!0),Xd=u("FOR",!0),Td=u("SUBSTRING",!0),Od=u("EXTRACT",!0),Ve=u("TRIM",!0),ce=u("POSITION",!0),Md=u("TIMESTAMP",!0),Jd=u("DATE",!0),ve=u("LEADING",!0),xe=u("TRAILING",!0),ze=u("BOTH",!0),Be=u("TO",!0),Xe=u("INTERVAL",!0),Ze=u("YEAR",!0),af=u("MONTH",!0),cf=u("DAY",!0),ef=u("HOUR",!0),gf=u("MINUTE",!0),jf=u("SECOND",!0),lf=u("CASE",!0),nf=u("END",!0),pf=u("WHEN",!0),rf=u("THEN",!0),Ee=u("ELSE",!0),tf=u(",",
!1),vf=u("(",!1),xf=u(")",!1),zf=z([" ","\t","\n","\r"],!1,!1),fd=u("`",!1),hd=z(["`"],!0,!1),ld=function(w){return{type:"interval-period",period:w.value,precision:null,secondary:null}},md=function(w,C){return{type:"interval-period",period:"second",precision:w,secondary:C}},f=0,fc=[{line:1,column:1}],tb=0,zc=[],va=0;if("startRule"in t){if(!(t.startRule in Ra))throw Error("Can't start parsing from rule \""+t.startRule+'".');mb=Ra[t.startRule]}var Oc=mb();if(Oc!==a&&f===r.length)return Oc;Oc!==a&&f<
r.length&&n({type:"end"});throw function(w,C,aa){return new y(y.buildMessage(w,C),w,C,aa)}(zc,tb<r.length?r.charAt(tb):null,tb<r.length?Q(tb,tb+1):Q(tb,tb));}}})})(ca);let Z=function(){function v(){}v.parse=function(y){return ca.exports.parse(y)};return v}();h.WhereGrammar=Z;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(h){h.commonjsGlobal="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};h.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};h.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(h){h.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n){function L(M,E,l,q,m,x){m-=l;x-=q;M=Math.min(1,Math.max(0,((M-l)*m+(E-q)*x)/(m*m+x*x)));return{x:l+m*M,y:q+x*M}}function c(M,E){return M?E?4:3:E?3:2}let k=function(){function M(l,q,m){this.items=l;this.query=q;this.geometryType=m.geometryType;this.hasM=m.hasM;this.hasZ=m.hasZ;this.fieldsIndex=m.fieldsIndex;this.objectIdField=m.objectIdField;this.spatialReference=m.spatialReference;this.featureAdapter=m.featureAdapter}var E=M.prototype;E.createQueryResponseForCount=
function(){const l=new t(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return l.countDistinctValues(this.items);const {groupByFieldsForStatistics:q,having:m,outStatistics:x}=this.query;if(null==q||!q.length)return 1;const N=new Map,K=new Map,ha=new Set;for(const U of x){var {statisticType:F}=U;F="exceedslimit"!==F?U.onStatisticField:void 0;if(!K.has(F)){var G=[];for(const T of q){const I=this._getAttributeValues(l,T,N);G.push(I)}K.set(F,this._calculateUniqueValues(G,
l.returnDistinctValues))}F=K.get(F);for(const T in F){const {data:I,items:A}=F[T];G=I.join(",");m&&!l.validateItems(A,m)||ha.add(G)}}return ha.size};E.createQueryResponse=function(){var l=ca._asyncToGenerator(function*(){let q;q=this.query.outStatistics?this.query.outStatistics.some(m=>"exceedslimit"===m.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&
(r.isValid(this.query.outSR)&&!r.equals(this.query.geometry.spatialReference,this.query.outSR)?q.queryGeometry=z.cleanFromGeometryEngine({spatialReference:this.query.outSR,...u.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):q.queryGeometry=z.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return q});return function(){return l.apply(this,arguments)}}();E.createSnappingResponse=function(l,q){const m=this.featureAdapter,x=c(this.hasZ,
this.hasM),{x:N,y:K}=l.point,ha="number"===typeof l.distance?l.distance:l.distance.x,F="number"===typeof l.distance?l.distance:l.distance.y,G={candidates:[]},U="esriGeometryPolygon"===this.geometryType;q=this._getPointCreator(l.point,this.spatialReference,q);for(const ja of this.items){var T=m.getGeometry(ja);if(Z.isNone(T))continue;const {coords:ma,lengths:S}=T;if(l.types&d.SnappingTypes.EDGE){T=0;for(var I=0;I<S.length;I++){var A=S[I];for(var e=0;e<A;e++,T+=x){var J=ma[T],W=ma[T+1];if(e!==A-1){const na=
ma[T+x],oa=ma[T+x+1],{x:qa,y:wa}=L(N,K,J,W,na,oa);var R=(N-qa)/ha;const Ma=(K-wa)/F;R=R*R+Ma*Ma;1>=R&&G.candidates.push({type:"edge",objectId:m.getObjectId(ja),distance:Math.sqrt(R),target:q(qa,wa),start:q(J,W),end:q(na,oa)})}}}}if(l.types&d.SnappingTypes.VERTEX)for(T=U?ma.length-x:ma.length,I=0;I<T;I+=x)A=ma[I],e=ma[I+1],J=(N-A)/ha,W=(K-e)/F,J=J*J+W*W,1>=J&&G.candidates.push({type:"vertex",objectId:m.getObjectId(ja),distance:Math.sqrt(J),target:q(A,e)})}G.candidates.sort((ja,ma)=>ja.distance-ma.distance);
return G};E._getPointCreator=function(l,q,m){const x=Z.isSome(m)&&!r.equals(q,m)?N=>u.project(N,q,m):N=>N;return null!=l.z&&null!=l.m?(N,K)=>x({x:N,y:K,z:l.z,m:l.m}):null!=l.z?(N,K)=>x({x:N,y:K,z:l.z}):null!=l.m?(N,K)=>x({x:N,y:K,m:l.m}):(N,K)=>x({x:N,y:K})};E.createSummaryStatisticsResponse=function(){var l=ca._asyncToGenerator(function*(q){const {field:m,valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,minValue:F,maxValue:G,scale:U}=q;q=this.fieldsIndex.isDateField(m);
var T=yield this._getDataValues({field:m,valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,scale:U});const I=Q.isNullCountSupported({normalizationType:K,normalizationField:N,minValue:F,maxValue:G}),A=this.fieldsIndex.get(m),e={value:.5,fieldType:null==A?void 0:A.type};T=O.isStringField(A)?Q.calculateStringStatistics({values:T,supportsNullCount:I,percentileParams:e}):Q.calculateStatistics({values:T,minValue:F,maxValue:G,useSampleStdDev:!K,supportsNullCount:I,percentileParams:e});
return Q.processSummaryStatisticsResult(T,q)});return function(q){return l.apply(this,arguments)}}();E.createUniqueValuesResponse=function(){var l=ca._asyncToGenerator(function*(q){const {field:m,valueExpression:x,domain:N,returnAllCodedValues:K,scale:ha}=q;q=yield this._getDataValues({field:m,valueExpression:x,scale:ha});q=Q.calculateUniqueValuesCount(q);return Q.createUVResult(q,N,K)});return function(q){return l.apply(this,arguments)}}();E.createClassBreaksResponse=function(){var l=ca._asyncToGenerator(function*(q){const {field:m,
valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,classificationMethod:F,standardDeviationInterval:G,minValue:U,maxValue:T,numClasses:I,scale:A}=q;q=yield this._getDataValues({field:m,valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,scale:A});q=Q.calculateClassBreaks(q,{field:m,normalizationField:N,normalizationType:K,normalizationTotal:ha,classificationMethod:F,standardDeviationInterval:G,minValue:U,maxValue:T,numClasses:I});return Q.resolveCBResult(q,
F)});return function(q){return l.apply(this,arguments)}}();E.createHistogramResponse=function(){var l=ca._asyncToGenerator(function*(q){const {field:m,valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,classificationMethod:F,standardDeviationInterval:G,minValue:U,maxValue:T,numBins:I,scale:A}=q;q=yield this._getDataValues({field:m,valueExpression:x,normalizationField:N,normalizationType:K,normalizationTotal:ha,scale:A});return Q.calculateHistogram(q,{field:m,normalizationField:N,
normalizationType:K,normalizationTotal:ha,classificationMethod:F,standardDeviationInterval:G,minValue:U,maxValue:T,numBins:I})});return function(q){return l.apply(this,arguments)}}();E._sortFeatures=function(l,q,m){if(1<l.length&&q&&q.length)for(const x of q.reverse()){q=x.split(" ");const N=q[0],K=this.fieldsIndex.get(N);q=q[1]&&"desc"===q[1].toLowerCase();const ha=Q.getAttributeComparator(null==K?void 0:K.type,q);l.sort((F,G)=>{F=m(F,N,K);G=m(G,N,K);return ha(F,G)})}};E._createFeatureQueryResponse=
function(l){const q=this.items,{geometryType:m,hasM:x,hasZ:N,objectIdField:K,spatialReference:ha}=this,{outFields:F,outSR:G,quantizationParameters:U,resultRecordCount:T,resultOffset:I,returnZ:A,returnM:e}=l,J=null!=T?q.length>(I||0)+T:!1,W=F&&(F.includes("*")?[...this.fieldsIndex.fields]:F.map(R=>this.fieldsIndex.get(R)));return{exceededTransferLimit:J,features:this._createFeatures(l,q),fields:W,geometryType:m,hasM:x&&e,hasZ:N&&A,objectIdFieldName:K,spatialReference:z.cleanFromGeometryEngine(G?G:
ha),transform:U&&B.toQuantizationTransform(U)||null}};E._createFeatures=function(l,q){const m=new t(l,this.featureAdapter,this.fieldsIndex),{hasM:x,hasZ:N}=this,{orderByFields:K,quantizationParameters:ha,returnGeometry:F,returnCentroid:G,maxAllowableOffset:U,resultOffset:T,resultRecordCount:I,returnZ:A=!1,returnM:e=!1}=l,J=N&&A,W=x&&e;l=[];var R=0;q=[...q];this._sortFeatures(q,K,(S,na,oa)=>m.getFieldValue(S,na,oa));if(F||G){var ja=B.toQuantizationTransform(ha);if(F&&!G)for(var ma of q)l[R++]={attributes:m.getAttributes(ma),
geometry:z.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),U,ja,J,W)};else if(!F&&G)for(const S of q)l[R++]={attributes:m.getAttributes(S),centroid:z.transformCentroid(this,this.featureAdapter.getCentroid(S,this),ja)};else for(const S of q)l[R++]={attributes:m.getAttributes(S),centroid:z.transformCentroid(this,this.featureAdapter.getCentroid(S,this),ja),geometry:z.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(S),U,ja,J,W)}}else for(ja of q)(ma=
m.getAttributes(ja))&&(l[R++]={attributes:ma});R=T||0;null!=I&&(l=l.slice(R,Math.min(l.length,R+I)));return l};E._createExceedsLimitQueryResponse=function(l){var q=!1;let m=Number.POSITIVE_INFINITY,x=Number.POSITIVE_INFINITY;q=Number.POSITIVE_INFINITY;for(const N of l.outStatistics)if("exceedslimit"===N.statisticType){m=null!=N.maxPointCount?N.maxPointCount:Number.POSITIVE_INFINITY;x=null!=N.maxRecordCount?N.maxRecordCount:Number.POSITIVE_INFINITY;q=null!=N.maxVertexCount?N.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)q=this.items.length>m;else if(this.items.length>x)q=!0;else{l=this.hasZ?this.hasM?4:3:this.hasM?3:2;const N=this.featureAdapter;q=this.items.reduce((K,ha)=>{ha=N.getGeometry(ha);return K+(Z.isSome(ha)&&ha.coords.length||0)},0)/l>q}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(q)}}]}};E._createStatisticsQueryResponse=
function(){var l=ca._asyncToGenerator(function*(q){var m={attributes:{}};const x=[],N=new Map,K=new Map,ha=new Map,F=new Map,G=new t(q,this.featureAdapter,this.fieldsIndex);var U=q.outStatistics;const {groupByFieldsForStatistics:T,having:I,orderByFields:A}=q;q=T&&T.length;const e=!!q,J=e&&T[0],W=e&&!this.fieldsIndex.get(J);for(const na of U){const {outStatisticFieldName:oa,statisticType:qa}=na;U=na;var R="exceedslimit"!==qa?na.onStatisticField:void 0;const wa="percentile_disc"===qa||"percentile_cont"===
qa,Ma="EnvelopeAggregate"===qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa,Ja=e&&1===q&&(R===J||W)&&"count"===qa;if(e){if(!ha.has(R)){var ja=[];for(const La of T){var ma=this._getAttributeValues(G,La,N);ja.push(ma)}ha.set(R,this._calculateUniqueValues(ja,G.returnDistinctValues))}ja=ha.get(R);for(const La in ja){const {count:Za,data:b,items:p,itemPositions:fa}=ja[La];ma=b.join(",");if(!I||G.validateItems(p,I)){const g=F.get(ma)||{attributes:{}};if(Ma){g.aggregateGeometries||(g.aggregateGeometries=
{});const {aggregateGeometries:D,outStatisticFieldName:X}=yield this._getAggregateGeometry(U,p);g.aggregateGeometries[X]=D}else{var S=null;if(Ja)S=Za;else{const D=this._getAttributeValues(G,R,N);S=fa.map(X=>D[X]);S=wa&&"statisticParameters"in U?this._getPercentileValue(U,S):this._getStatisticValue(U,S,null,G.returnDistinctValues)}g.attributes[oa]=S}T.forEach((D,X)=>g.attributes[this.fieldsIndex.get(D)?D:`EXPR_${X+1}`]=b[X]);F.set(ma,g)}}}else if(Ma){m.aggregateGeometries||(m.aggregateGeometries={});
const {aggregateGeometries:La,outStatisticFieldName:Za}=yield this._getAggregateGeometry(U,this.items);m.aggregateGeometries[Za]=La}else R=this._getAttributeValues(G,R,N),m.attributes[oa]=wa&&"statisticParameters"in U?this._getPercentileValue(U,R):this._getStatisticValue(U,R,K,G.returnDistinctValues);x.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}m=e?Array.from(F.values()):[m];this._sortFeatures(m,A,(na,oa)=>na.attributes[oa]);return{fields:x,features:m}});return function(q){return l.apply(this,
arguments)}}();E._getAggregateGeometry=function(){var l=ca._asyncToGenerator(function*(q,m){var x=yield new Promise((A,e)=>h(["../../../geometry/geometryEngineJSON"],A,e));const {statisticType:N,outStatisticFieldName:K}=q,{featureAdapter:ha,spatialReference:F,geometryType:G,hasZ:U,hasM:T}=this;m=m.map(A=>z.getGeometry(G,U,T,ha.getGeometry(A)));const I=x.convexHull(F,m,!0)[0];q={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===N?(x=I?y.getPolygonExtent(I):y.getGeometryExtent(x.union(F,
m)),q.aggregateGeometries={...x,spatialReference:F},q.outStatisticFieldName=K||"extent"):"CentroidAggregate"===N?(x=I?v.polygonCentroid(I):v.extentCentroid(y.getGeometryExtent(x.union(F,m))),q.aggregateGeometries={x:x[0],y:x[1],spatialReference:F},q.outStatisticFieldName=K||"centroid"):"ConvexHullAggregate"===N&&(q.aggregateGeometries=I,q.outStatisticFieldName=K||"convexHull");return q});return function(q,m){return l.apply(this,arguments)}}();E._getStatisticValue=function(l,q,m,x){const {onStatisticField:N,
statisticType:K}=l;l=null;l=null!=m&&m.has(N)?m.get(N):O.isStringField(this.fieldsIndex.get(N))?Q.calculateStringStatistics({values:q,returnDistinct:x}):Q.calculateStatistics({values:q,minValue:null,maxValue:null,useSampleStdDev:!0});m&&m.set(N,l);return l["var"===K?"variance":K]};E._getPercentileValue=function(l,q){const {onStatisticField:m,statisticParameters:x,statisticType:N}=l,{value:K,orderBy:ha}=x;l=this.fieldsIndex.get(m);return Q.calculatePercentile(q,{value:K,orderBy:ha,fieldType:null==
l?void 0:l.type,isDiscrete:"percentile_disc"===N})};E._getAttributeValues=function(l,q,m){if(m.has(q))return m.get(q);const x=this.fieldsIndex.get(q),N=this.items.map(K=>l.getFieldValue(K,q,x));m.set(q,N);return N};E._getAttributeNormalizedValues=function(l,q){return this.items.map(m=>l.getNormalizedValue(m,{field:q.field,fieldInfo:this.fieldsIndex.get(q.field),normalizationField:q.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(q.normalizationField),normalizationType:q.normalizationType,
normalizationTotal:q.normalizationTotal}))};E._getAttributeExpressionValues=function(){var l=ca._asyncToGenerator(function*(q,m,x){const {arcadeUtils:N}=yield n.loadArcade();m=N.createFunction(m);x=x&&N.getViewInfo(x);return q.getExpressionValues(this.items,m,x,N)});return function(q,m,x){return l.apply(this,arguments)}}();E._calculateUniqueValues=function(l,q){const m={},x=this.items,N=x.length;for(let K=0;K<N;K++){const ha=x[K],F=[];for(const U of l)F.push(U[K]);const G=F.join(",");q?null==m[G]&&
(m[G]={count:1,data:F,items:[ha],itemPositions:[K]}):null==m[G]?m[G]={count:1,data:F,items:[ha],itemPositions:[K]}:(m[G].count++,m[G].items.push(ha),m[G].itemPositions.push(K))}return m};E._getDataValues=function(){var l=ca._asyncToGenerator(function*(q){const m=new t(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:x,field:N,normalizationField:K,normalizationType:ha,normalizationTotal:F,scale:G}=q;q=x?{viewingMode:"map",scale:G,spatialReference:this.query.outSR||this.spatialReference}:
null;return x?this._getAttributeExpressionValues(m,x,q):this._getAttributeNormalizedValues(m,{field:N,normalizationField:K,normalizationType:ha,normalizationTotal:F})});return function(q){return l.apply(this,arguments)}}();ca._createClass(M,[{key:"size",get:function(){return this.items.length}}]);return M}();d.SnappingTypes=void 0;(function(M){M[M.NONE=0]="NONE";M[M.EDGE=1]="EDGE";M[M.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));d.QueryEngineResult=k;Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(h,d,ca){function Z({scale:F,translate:G},U){return Math.round((U-G[0])/F[0])}function v({scale:F,translate:G},U){return Math.round((G[1]-U)/F[1])}function y(F,G,U){const T=[];let I,A,e,J;for(let W=0;W<U.length;W++){const R=U[W];if(0<W){if(e=Z(F,R[0]),J=v(F,R[1]),e!==I||J!==A)T.push(G(R,e-I,J-A)),I=e,A=J}else I=Z(F,R[0]),A=v(F,R[1]),T.push(G(R,
I,A))}return 0<T.length?T:null}function B(F,G,U,T){return y(F,U?T?ha:K:T?K:N,G)}function r(F,G,U,T){const I=[];U=U?T?ha:K:T?K:N;for(T=0;T<G.length;T++){const A=y(F,U,G[T]);A&&3<=A.length&&I.push(A)}return I.length?I:null}function t(F,G,U,T){const I=[];U=U?T?ha:K:T?K:N;for(T=0;T<G.length;T++){const A=y(F,U,G[T]);A&&2<=A.length&&I.push(A)}return I.length?I:null}function u({scale:F,translate:G},U){return U*F[0]+G[0]}function z({scale:F,translate:G},U){return G[1]-U*F[1]}function O(F,G,U){const T=Array(U.length);
if(!U.length)return T;const [I,A]=F.scale;let e=u(F,U[0][0]);F=z(F,U[0][1]);T[0]=G(U[0],e,F);for(let J=1;J<U.length;J++){const W=U[J];e+=W[0]*I;F-=W[1]*A;T[J]=G(W,e,F)}return T}function Q(F,G,U){const T=Array(U.length);for(let I=0;I<U.length;I++)T[I]=O(F,G,U[I]);return T}function n(F,G,U,T){return O(F,U?T?ha:K:T?K:N,G)}function L(F,G,U,T){return Q(F,U?T?ha:K:T?K:N,G)}function c(F,G,U,T){return Q(F,U?T?ha:K:T?K:N,G)}function k(F,G,U){let [T,I]=U[0],A=Math.min(T,G[0]),e=Math.min(I,G[1]),J=Math.max(T,
G[2]);G=Math.max(I,G[3]);for(let W=1;W<U.length;W++){const [R,ja]=U[W];T+=R;I+=ja;0>R&&(A=Math.min(A,T));0<R&&(J=Math.max(J,T));0>ja?e=Math.min(e,I):0<ja&&(G=Math.max(G,I))}F[0]=A;F[1]=e;F[2]=J;F[3]=G;return F}function M(F,G){if(!G.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;for(let U=0;U<G.length;U++)k(F,F,G[U]);return F}function E(F,G,U,T,I){G.xmin=Z(F,U.xmin);G.ymin=v(F,U.ymin);G.xmax=Z(F,U.xmax);G.ymax=v(F,U.ymax);G!==U&&(T&&(G.zmin=U.zmin,G.zmax=U.zmax),
I&&(G.mmin=U.mmin,G.mmax=U.mmax));return G}function l(F,G,U,T,I){G.points=B(F,U.points,T,I);return G}function q(F,G,U,T,I){G.x=Z(F,U.x);G.y=v(F,U.y);G!==U&&(T&&(G.z=U.z),I&&(G.m=U.m));return G}function m(F,G,U,T,I){F=r(F,U.rings,T,I);if(!F)return null;G.rings=F;return G}function x(F,G,U,T,I){F=t(F,U.paths,T,I);if(!F)return null;G.paths=F;return G}const N=(F,G,U)=>[G,U],K=(F,G,U)=>[G,U,F[2]],ha=(F,G,U)=>[G,U,F[2],F[3]];h.equals=function(F,G){if(F===G||null==F&&null==G)return!0;if(null==F||null==G)return!1;
let U,T,I,A;F&&"upperLeft"===F.originPosition?(U=F.translate[0],T=F.translate[1],F=F.scale[0]):(U=d.isSome(F.extent)?F.extent.xmin:0,T=d.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);G&&"upperLeft"===G.originPosition?(I=G.translate[0],A=G.translate[1],G=G.scale[0]):(I=d.isSome(G.extent)?G.extent.xmin:0,A=d.isSome(G.extent)?G.extent.ymax:0,G=G.tolerance);return U===I&&T===A&&F===G};h.getQuantizedBoundsCoordsArray=k;h.getQuantizedBoundsCoordsArrayArray=M;h.getQuantizedBoundsPaths=function(F){return M([0,
0,0,0],F)};h.getQuantizedBoundsPoints=function(F){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return k(G,G,F)};h.getQuantizedBoundsRings=function(F){return M([0,0,0,0],F)};h.quantizeBounds=function(F,G,U){G[0]=Z(F,U[0]);G[3]=v(F,U[1]);G[2]=Z(F,U[2]);G[1]=v(F,U[3]);return G};h.quantizeExtent=E;h.quantizeGeometry=function(F,G){return F&&G?ca.isPoint(G)?q(F,{},G,!1,!1):ca.isPolyline(G)?x(F,{},G,!1,!1):ca.isPolygon(G)?m(F,{},G,!1,!1):ca.isMultipoint(G)?
l(F,{},G,!1,!1):ca.isExtent(G)?E(F,{},G,!1,!1):null:null};h.quantizeMultipoint=l;h.quantizePaths=t;h.quantizePoint=q;h.quantizePoints=B;h.quantizePolygon=m;h.quantizePolyline=x;h.quantizeRings=r;h.quantizeX=Z;h.quantizeY=v;h.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":F.originPosition,scale:F.tolerance?[F.tolerance,F.tolerance]:[1,1],translate:d.isSome(F.extent)?[F.extent.xmin,F.extent.ymax]:[0,
0]}:null};h.unquantizeBounds=function(F,G,U){return U?(G[0]=u(F,U[0]),G[1]=z(F,U[3]),G[2]=u(F,U[2]),G[3]=z(F,U[1]),G):[u(F,G[0]),z(F,G[3]),u(F,G[2]),z(F,G[1])]};h.unquantizeCoordsArray=O;h.unquantizeCoordsArrayArray=Q;h.unquantizeExtent=function(F,G,U,T,I){G.xmin=u(F,U.xmin);G.ymin=z(F,U.ymin);G.xmax=u(F,U.xmax);G.ymax=z(F,U.ymax);G!==U&&(T&&(G.zmin=U.zmin,G.zmax=U.zmax),I&&(G.mmin=U.mmin,G.mmax=U.mmax));return G};h.unquantizeMultipoint=function(F,G,U,T,I){d.isSome(U)&&(G.points=n(F,U.points,T,I));
return G};h.unquantizePaths=L;h.unquantizePoint=function(F,G,U,T,I){if(d.isNone(U))return G;G.x=u(F,U.x);G.y=z(F,U.y);G!==U&&(T&&(G.z=U.z),I&&(G.m=U.m));return G};h.unquantizePoints=n;h.unquantizePolygon=function(F,G,U,T,I){d.isSome(U)&&(G.rings=c(F,U.rings,T,I));return G};h.unquantizePolyline=function(F,G,U,T,I){d.isSome(U)&&(G.paths=L(F,U.paths,T,I));return G};h.unquantizeRings=c;h.unquantizeX=u;h.unquantizeY=z;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(h,d,ca){return function(){function Z(y,B,r){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=y.returnDistinctValues;this.fieldsIndex=r;this.featureAdapter=B;if((B=y.outFields)&&!B.includes("*")){this.outFields=B;y=0;for(const u of B){var t=d.getExpressionFromFieldName(u);t=(B=this.fieldsIndex.get(t))?null:d.getWhereClause(t,
r);B=B?B.name:d.getAliasFromFieldName(u)||`FIELD_EXP_${y++}`;this._fieldDataCache.set(u,{alias:B,clause:t})}}}var v=Z.prototype;v.countDistinctValues=function(y){if(!this.returnDistinctValues)return y.length;y.forEach(B=>this.getAttributes(B));return this._returnDistinctMap.size};v.getAttributes=function(y){y=this._processAttributesForOutFields(y);return this._processAttributesForDistinctValues(y)};v.getFieldValue=function(y,B,r){const t=r?r.name:B;let u=null;this._fieldDataCache.has(t)?u=this._fieldDataCache.get(t).clause:
r||(u=d.getWhereClause(B,this.fieldsIndex),this._fieldDataCache.set(t,{alias:t,clause:u}));return r?this.featureAdapter.getAttribute(y,t):u.calculateValue(y,this.featureAdapter)};v.getNormalizedValue=function(y,B){const r=B.normalizationType,t=B.normalizationTotal;let u=this.getFieldValue(y,B.field,B.fieldInfo);r&&Number.isFinite(u)&&(y=this.getFieldValue(y,B.normalizationField,B.normalizationFieldInfo),u=ca.getNormalizedValue(u,r,y,t));return u};v.getExpressionValue=function(y,B,r,t){y={attributes:this.featureAdapter.getAttributes(y),
layer:{fields:this.fieldsIndex.fields}};r=t.createExecContext(y,r);return t.executeFunction(B,r)};v.getExpressionValues=function(y,B,r,t){const u={fields:this.fieldsIndex.fields};return y.map(z=>{z={attributes:this.featureAdapter.getAttributes(z),layer:u};z=t.createExecContext(z,r);return t.executeFunction(B,z)})};v.validateItem=function(y,B){this._fieldDataCache.has(B)||this._fieldDataCache.set(B,{alias:B,clause:d.getWhereClause(B,this.fieldsIndex)});return this._fieldDataCache.get(B).clause.testFeature(y,
this.featureAdapter)};v.validateItems=function(y,B){this._fieldDataCache.has(B)||this._fieldDataCache.set(B,{alias:B,clause:d.getWhereClause(B,this.fieldsIndex)});return this._fieldDataCache.get(B).clause.testSet(y,this.featureAdapter)};v._processAttributesForOutFields=function(y){const B=this.outFields;if(!B||!B.length)return this.featureAdapter.getAttributes(y);const r={};for(const t of B){const {alias:u,clause:z}=this._fieldDataCache.get(t);r[u]=z?z.calculateValue(y,this.featureAdapter):this.featureAdapter.getAttribute(y,
u)}return r};v._processAttributesForDistinctValues=function(y){if(h.isNone(y)||!this.returnDistinctValues)return y;var B=this.outFields,r=[];if(B)for(const u of B){var {alias:t}=this._fieldDataCache.get(u);r.push(y[t])}else for(t in y)r.push(y[t]);B=`${(B||["*"]).join(",")}=${r.join(",")}`;r=this._returnDistinctMap.get(B)||0;this._returnDistinctMap.set(B,++r);return 1<r?null:y};return Z}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(h,d,ca){function Z(l){const q=null!=l.minValue||null!=l.maxValue,m=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!q&&!m}function v(l){const {values:q,useSampleStdDev:m,supportsNullCount:x}=l;var N=Number.POSITIVE_INFINITY;let K=Number.NEGATIVE_INFINITY,ha=null,F=null;var G=null;let U=null,T=0;const I=null==l.minValue?-Infinity:l.minValue,A=null==l.maxValue?Infinity:l.maxValue;for(const e of q)Number.isFinite(e)?e>=I&&e<=A&&(ha+=
e,N=Math.min(N,e),K=Math.max(K,e),T++):"string"===typeof e&&T++;if(T&&null!=ha){F=ha/T;G=0;for(const e of q)Number.isFinite(e)&&e>=I&&e<=A&&(G+=(e-F)**2);U=m?1<T?G/(T-1):0:0<T?G/T:0;G=Math.sqrt(U)}else K=N=null;N={avg:F,count:T,max:K,min:N,stddev:G,sum:ha,variance:U};x&&(N.nullcount=q.length-T);l.percentileParams&&(N.median=y(q,l.percentileParams));return N}function y(l,q){const {fieldType:m,value:x,orderBy:N,isDiscrete:K}=q,ha=B(m,"desc"===N);l=[...l].filter(T=>null!=T).sort((T,I)=>ha(T,I));if(0===
l.length)return null;if(0>=x)return l[0];if(1<=x)return l[l.length-1];var F=(l.length-1)*x,G=Math.floor(F);q=G+1;F%=1;G=l[G];const U=l[q];return q>=l.length||K||"string"===typeof G||"string"===typeof U?G:G*(1-F)+U*F}function B(l,q){const m=q?1:-1,x=t(q),N=r(q);if(!l||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...M].includes(l))return(K,ha)=>"number"===typeof K&&"number"===typeof ha?x(K,ha):"string"===typeof K&&"string"===typeof ha?N(K,ha):m;if("esriFieldTypeDate"===
l)return(K,ha)=>{K=(new Date(K)).getTime();ha=(new Date(ha)).getTime();return isNaN(K)||isNaN(ha)?m:x(K,ha)};if(M.has(l))return(K,ha)=>x(K,ha);if("esriFieldTypeString"===l)return(K,ha)=>N(K,ha);if("esriFieldTypeGUID"===l||"esriFieldTypeGlobalID"===l){const K=r(q);return(ha,F)=>K(u(ha),u(F))}return q?(K,ha)=>1:(K,ha)=>-1}function r(l){return l?(q,m)=>{var x,N;q=null==(x=q)?void 0:x.toUpperCase();m=null==(N=m)?void 0:N.toUpperCase();return q>m?-1:q<m?1:0}:(q,m)=>{var x,N;q=null==(x=q)?void 0:x.toUpperCase();
m=null==(N=m)?void 0:N.toUpperCase();return q<m?-1:q>m?1:0}}function t(l){return l?(q,m)=>m-q:(q,m)=>q-m}function u(l){return l.substr(24,12)+l.substr(19,4)+l.substr(16,2)+l.substr(14,2)+l.substr(11,2)+l.substr(9,2)+l.substr(6,2)+l.substr(4,2)+l.substr(2,2)+l.substr(0,2)}function z(l,q){const m=Q({field:q.field,normalizationType:q.normalizationType,normalizationField:q.normalizationField,classificationMethod:q.classificationMethod,standardDeviationInterval:q.standardDeviationInterval,breakCount:q.numClasses||
5});l=O(l,q.minValue,q.maxValue);return ca.createGenerateRendererClassBreaks({definition:m,values:l,normalizationTotal:q.normalizationTotal})}function O(l,q,m){q=null==q?-Infinity:q;m=null==m?Infinity:m;return l.filter(x=>Number.isFinite(x)&&x>=q&&x<=m)}function Q(l){const q=l.field,m=l.classificationMethod||"equal-interval",x=l.normalizationType,N=l.normalizationField,K=new d;K.classificationField=q;K.breakCount=l.breakCount;K.classificationMethod=m;K.standardDeviationInterval="standard-deviation"===
m?l.standardDeviationInterval||1:void 0;K.normalizationType=x;K.normalizationField="field"===x?N:void 0;return K}function n(l,q){const {field:m,classificationMethod:x,standardDeviationInterval:N,normalizationType:K,normalizationField:ha,normalizationTotal:F,minValue:G,maxValue:U}=q,T=q.numBins||10;let I=q=null,A=null;x&&"equal-interval"!==x||K?({classBreaks:l}=z(l,{field:m,normalizationType:K,normalizationField:ha,normalizationTotal:F,classificationMethod:x,standardDeviationInterval:N,minValue:G,
maxValue:U,numClasses:T}),q=l[0].minValue,I=l[l.length-1].maxValue,A=l.map(e=>[e.minValue,e.maxValue])):(null!=G&&null!=U?(q=G,I=U):(l=v({values:l,minValue:G,maxValue:U,useSampleStdDev:!K,supportsNullCount:Z({normalizationType:K,normalizationField:ha,minValue:G,maxValue:U})}),q=l.min,I=l.max),A=c(q,I,T));return{min:q,max:I,intervals:A}}function L(l,q){let m=-1;for(let x=l.length-1;0<=x;x--)if(q>=l[x][0]){m=x;break}return m}function c(l,q,m){const x=(q-l)/m,N=[];let K;for(let ha=1;ha<=m;ha++)K=l+x,
K=Number(K.toFixed(16)),N.push([l,ha===m?q:K]),l=K;return N}const k=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,M=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),E="min max avg stddev count sum variance nullcount median".split(" ");h.calculateClassBreaks=z;h.calculateHistogram=function(l,q){const {min:m,max:x,intervals:N}=n(l,q),K=N.map((ha,F)=>({minValue:N[F][0],maxValue:N[F][1],count:0}));for(const ha of l)null!=ha&&ha>=m&&ha<=x&&(l=L(N,ha),
-1<l&&K[l].count++);return{bins:K,minValue:m,maxValue:x,normalizationTotal:q.normalizationTotal}};h.calculatePercentile=y;h.calculateStatistics=v;h.calculateStringStatistics=function(l){const q=l.returnDistinct?[...new Set(l.values)]:l.values,m=q.filter(N=>null!=N).length,x={count:m};l.supportsNullCount&&(x.nullcount=q.length-m);l.percentileParams&&(x.median=y(q,l.percentileParams));return x};h.calculateUniqueValuesCount=function(l){const q={};for(let m of l){if(null==m||"string"===typeof m&&""===
m.trim())m=null;null==q[m]?q[m]={count:1,data:m}:q[m].count++}return{count:q}};h.createClassBreaksDefinition=Q;h.createUVResult=function(l,q,m){const x=l.count;l=[];m&&q&&"coded-value"===q.type&&q.codedValues.forEach(N=>{N=N.code;x.hasOwnProperty(N)||(x[N]={data:N,count:0})});for(const N in x)q=x[N],l.push({value:q.data,count:q.count,label:q.label});return{uniqueValueInfos:l}};h.getAttributeComparator=B;h.getEqualIntervalBins=c;h.getNormalizedValue=function(l,q,m,x){let N=null;switch(q){case "log":0!==
l&&(N=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(x)&&0!==x&&(N=l/x*100);break;case "field":Number.isFinite(m)&&0!==m&&(N=l/m);break;case "natural-log":0<l&&(N=Math.log(l));break;case "square-root":0<l&&(N=l**.5)}return N};h.isNullCountSupported=Z;h.processSummaryStatisticsResult=function(l,q){let m;for(m in l)E.includes(m)&&(Number.isFinite(l[m])||(l[m]=null));if(!q)return l;["avg","stddev","variance"].forEach(x=>{null!=l[x]&&(l[x]=Math.ceil(l[x]))});return l};h.resolveCBResult=
function(l,q){let m=l.classBreaks;const x=m[0].minValue,N=m[m.length-1].maxValue,K="standard-deviation"===q;m=m.map(ha=>{const F=ha.label;ha={minValue:ha.minValue,maxValue:ha.maxValue,label:F};if(K&&F){const G=F.match(k).map(U=>+U.trim());2===G.length?(ha.minStdDev=G[0],ha.maxStdDev=G[1],0>G[0]&&0<G[1]&&(ha.hasAvg=!0)):1===G.length&&(F.includes("\x3c")?(ha.minStdDev=null,ha.maxStdDev=G[0]):F.includes("\x3e")&&(ha.minStdDev=G[0],ha.maxStdDev=null))}return ha});return{minValue:x,maxValue:N,classBreakInfos:m,
normalizationTotal:l.normalizationTotal}};h.statisticTypes=E;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(h,d,ca,Z,v,y,B,r,t){v=new ca.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ca=new ca.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});t=function(u){function z(){var O=u.apply(this,arguments)||this;O.breakCount=null;O.classificationField=
null;O.classificationMethod=null;O.normalizationField=null;O.normalizationType=null;O.type="class-breaks-definition";return O}h._inheritsLoose(z,u);h._createClass(z,[{key:"standardDeviationInterval",set:function(O){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",O)}},{key:"definedInterval",set:function(O){"defined-interval"===this.classificationMethod&&this._set("definedInterval",O)}}]);return z}(t);d.__decorate([Z.property({json:{write:!0}})],t.prototype,"breakCount",
void 0);d.__decorate([Z.property({json:{write:!0}})],t.prototype,"classificationField",void 0);d.__decorate([Z.property({type:String,json:{read:v.read,write:v.write}})],t.prototype,"classificationMethod",void 0);d.__decorate([Z.property({json:{write:!0}})],t.prototype,"normalizationField",void 0);d.__decorate([Z.property({json:{read:ca.read,write:ca.write}})],t.prototype,"normalizationType",void 0);d.__decorate([Z.property({value:null,json:{write:!0}})],t.prototype,"standardDeviationInterval",null);
d.__decorate([Z.property({value:null,json:{write:!0}})],t.prototype,"definedInterval",null);d.__decorate([Z.property()],t.prototype,"type",void 0);return t=d.__decorate([r.subclass("esri.rest.support.ClassBreaksDefinition")],t)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z){ca=new ca.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Z=function(O){function Q(){var n=O.apply(this,arguments)||this;n.baseSymbol=null;n.colorRamp=null;n.type=null;return n}h._inheritsLoose(Q,O);return Q}(Z.JSONSupport);d.__decorate([v.property({type:z,json:{write:!0}})],Z.prototype,"baseSymbol",void 0);d.__decorate([v.property({types:u.types,json:{read:{reader:u.fromJSON},write:!0}})],Z.prototype,"colorRamp",void 0);
d.__decorate([v.property({json:{read:ca.read,write:ca.write}})],Z.prototype,"type",void 0);return Z=d.__decorate([t.subclass("esri.rest.support.ClassificationDefinition")],Z)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(h,d,ca,Z){ca={key:"type",base:ca,typeMap:{algorithmic:d,multipart:Z}};h.fromJSON=function(v){return v&&v.type?"algorithmic"===v.type?d.fromJSON(v):"multipart"===v.type?Z.fromJSON(v):null:null};
h.types=ca;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(h,d,ca,Z,v,y,B,r,t){var u;t=u=function(z){function O(Q){Q=
z.call(this,Q)||this;Q.algorithm=null;Q.fromColor=null;Q.toColor=null;Q.type="algorithmic";return Q}h._inheritsLoose(O,z);O.prototype.clone=function(){return new u({fromColor:Z.clone(this.fromColor),toColor:Z.clone(this.toColor),algorithm:this.algorithm})};return O}(t);d.__decorate([B.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],t.prototype,"algorithm",void 0);d.__decorate([v.property({type:ca,json:{type:[y.Integer],write:!0}})],t.prototype,"fromColor",
void 0);d.__decorate([v.property({type:ca,json:{type:[y.Integer],write:!0}})],t.prototype,"toColor",void 0);d.__decorate([v.property({type:["algorithmic"]})],t.prototype,"type",void 0);return t=u=d.__decorate([r.subclass("esri.rest.support.AlgorithmicColorRamp")],t)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(h,d,ca){h.enumeration=function(Z,v={}){var y;Z=Z instanceof d.JSONMap?Z:new d.JSONMap(Z,v);Z={type:(null!=(y=null==
v?void 0:v.ignoreUnknown)?y:1)?Z.apiValues:String,json:{type:Z.jsonValues,read:null!=v&&v.readOnly?!1:{reader:Z.read},write:{writer:Z.write}}};void 0!==(null==v?void 0:v.readOnly)&&(Z.readOnly=!!v.readOnly);void 0!==(null==v?void 0:v.default)&&(Z.json.default=v.default);void 0!==(null==v?void 0:v.name)&&(Z.json.name=v.name);return ca.property(Z)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,d,ca,Z,v,y,B,r){ca=function(t){function u(z){z=t.call(this,z)||this;z.type=null;return z}h._inheritsLoose(u,t);return u}(ca.JSONSupport);d.__decorate([Z.property({readOnly:!0,json:{read:!1,write:!0}})],ca.prototype,"type",void 0);return ca=d.__decorate([r.subclass("esri.rest.support.ColorRamp")],ca)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(h,d,ca,Z,v,y,B,r){var t;v=t=function(u){function z(O){O=u.call(this,O)||this;O.colorRamps=null;O.type="multipart";return O}h._inheritsLoose(z,u);z.prototype.clone=function(){return new t({colorRamps:ca.clone(this.colorRamps)})};return z}(r);d.__decorate([Z.property({type:[B],json:{write:!0}})],v.prototype,"colorRamps",void 0);d.__decorate([Z.property({type:["multipart"]})],v.prototype,"type",void 0);return v=t=d.__decorate([y.subclass("esri.rest.support.MultipartColorRamp")],v)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z){Z=new Z.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let O=0;v=function(Q){function n(c){c=Q.call(this,c)||this;c.id=`sym${O++}`;c.type=null;c.color=new ca([0,0,0,1]);
return c}h._inheritsLoose(n,Q);var L=n.prototype;L.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};L.collectRequiredFields=function(){var c=h._asyncToGenerator(function*(k,M){});return function(k,M){return c.apply(this,arguments)}}();L.hash=function(){return JSON.stringify(this.toJSON())};L.clone=function(){};return n}(v.JSONSupport);d.__decorate([y.property({type:Z.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Z.write}}})],v.prototype,"type",void 0);d.__decorate([y.property({type:ca,
json:{write:{allowNull:!0}}})],v.prototype,"color",void 0);d.__decorate([u.reader("color")],v.prototype,"readColor",null);return v=d.__decorate([z.subclass("esri.symbols.Symbol")],v)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(h){function d(z){const {classificationMethod:O,breakCount:Q,normalizationType:n,definedInterval:L}=z.definition,c=[];var k=z.values;if(0===k.length)return[];k=k.sort((x,N)=>x-N);var M=k[0],E=k[k.length-1];if("equal-interval"===O)if(k.length>=
Q){k=(E-M)/Q;z=M;for(var l=1;l<Q;l++){var q=Number((M+l*k).toFixed(6));c.push({minValue:z,maxValue:q,label:ca(z,q,n)});z=q}c.push({minValue:z,maxValue:E,label:ca(z,E,n)})}else k.forEach(x=>{c.push({minValue:x,maxValue:x,label:ca(x,x,n)})});else if("natural-breaks"===O){k=Z(k);z=v(k.uniqueValues,z.valueFrequency||k.valueFrequency,Q);for(l=1;l<Q;l++)k.uniqueValues.length>l&&(q=Number(k.uniqueValues[z[l]].toFixed(6)),c.push({minValue:M,maxValue:q,label:ca(M,q,n)}),M=q);c.push({minValue:M,maxValue:E,
label:ca(M,E,n)})}else if("quantile"===O)if(k.length>=Q&&M!==E){z=Math.ceil(k.length/Q);l=0;for(q=1;q<Q;q++){var m=z+l-1;m>k.length&&(m=k.length-1);0>m&&(m=0);c.push({minValue:M,maxValue:k[m],label:ca(M,k[m],n)});M=k[m];l+=z;z=Math.ceil((k.length-l)/(Q-q))}c.push({minValue:M,maxValue:E,label:ca(M,E,n)})}else for(E=-1,M=0;M<k.length;M++)z=k[M],z!==E&&(E=z,c.push({minValue:E,maxValue:z,label:ca(E,z,n)}),E=z);else if("standard-deviation"===O)if(z=r(k),l=t(k,z),0===l)c.push({minValue:k[0],maxValue:k[0],
label:ca(k[0],k[0],n)});else{k=B(M,E,Q,z,l)*l;l=0;for(q=Q;1<=q;q--)m=Number((z-(q-.5)*k).toFixed(6)),c.push({minValue:M,maxValue:m,label:ca(M,m,n)}),M=m,l++;q=Number((z+.5*k).toFixed(6));c.push({minValue:M,maxValue:q,label:ca(M,q,n)});M=q;l++;for(m=1;m<=Q;m++)q=l===2*Q?E:Number((z+(m+.5)*k).toFixed(6)),c.push({minValue:M,maxValue:q,label:ca(M,q,n)}),M=q,l++}else if("defined-interval"===O){if(!L)return c;E=k[0];k=k[k.length-1];M=Math.ceil((k-E)/L);z=E;for(l=1;l<M;l++)q=Number((E+l*L).toFixed(6)),c.push({minValue:z,
maxValue:q,label:ca(z,q,n)}),z=q;c.push({minValue:z,maxValue:k,label:ca(z,k,n)})}return c}function ca(z,O,Q){let n=null;return n=z===O?Q&&"percent-of-total"===Q?z+"%":z.toString():Q&&"percent-of-total"===Q?z+"% - "+O+"%":z+" - "+O}function Z(z){const O=[],Q=[];let n=Number.MIN_VALUE,L=1,c=-1;for(let k=0;k<z.length;k++){const M=z[k];M===n?(L++,Q[c]=L):null!==M&&(O.push(M),n=M,L=1,Q.push(L),c++)}return{uniqueValues:O,valueFrequency:Q}}function v(z,O,Q){var n=z.length;const L=[];Q>n&&(Q=n);for(var c=
0;c<Q;c++)L.push(Math.round(c*n/Q-1));L.push(n-1);c=y(L,z,O,Q);{n=c.mean;c=c.sdcm;var k=Q,M=0,E=0;let q=0,m=0,x=!0;for(let N=0;2>N&&x;N++){0===N&&(x=!1);for(var l=0;l<k-1;l++)for(;L[l+1]+1!==L[l+2];)if(L[l+1]+=1,M=u(l,L,z,O),q=M.sbMean,M=M.sbSdcm,E=u(l+1,L,z,O),m=E.sbMean,E=E.sbSdcm,M+E<c[l]+c[l+1])c[l]=M,c[l+1]=E,n[l]=q,n[l+1]=m,x=!0;else{--L[l+1];break}for(l=k-1;0<l;l--)for(;L[l]!==L[l-1]+1;)if(--L[l],M=u(l-1,L,z,O),q=M.sbMean,M=M.sbSdcm,E=u(l,L,z,O),m=E.sbMean,E=E.sbSdcm,M+E<c[l-1]+c[l])c[l-1]=
M,c[l]=E,n[l-1]=q,n[l]=m,x=!0;else{L[l]+=1;break}}n=x}n&&(c=y(L,z,O,Q));return L}function y(z,O,Q,n){let L=[];var c=[],k=[];let M=0;const E=[],l=[];for(var q=0;q<n;q++){var m=u(q,z,O,Q);E.push(m.sbMean);l.push(m.sbSdcm);M+=l[q]}m=M;for(q=!0;q||M<m;){q=!1;L=[];for(c=0;c<n;c++)L.push(z[c]);for(k=0;k<n;k++)for(m=z[k]+1;m<=z[k+1];m++)if(c=O[m],0<k&&m!==z[k+1]&&Math.abs(c-E[k])>Math.abs(c-E[k-1]))z[k]=m;else if(k<n-1&&z[k]!==m-1&&Math.abs(c-E[k])>Math.abs(c-E[k+1])){z[k+1]=m-1;break}m=M;M=0;c=[];k=[];
for(let x=0;x<n;x++){c.push(E[x]);k.push(l[x]);const N=u(x,z,O,Q);E[x]=N.sbMean;l[x]=N.sbSdcm;M+=l[x]}}if(M>m){for(O=0;O<n;O++)z[O]=L[O],E[O]=c[O],l[O]=k[O];M=m}return{mean:E,sdcm:l}}function B(z,O,Q,n,L){z=Math.max(n-z,O-n)/L/Q;return 1<=z?1:.5<=z?.5:.25}function r(z){let O=0;for(let Q=0;Q<z.length;Q++)O+=z[Q];return O/=z.length}function t(z,O){let Q=0;for(let n=0;n<z.length;n++){const L=z[n];Q+=(L-O)*(L-O)}Q/=z.length;return Math.sqrt(Q)}function u(z,O,Q,n){var L=0,c=0;for(var k=O[z]+1;k<=O[z+1];k++){const M=
n[k];L+=Q[k]*M;c+=M}0>=c&&console.log("Exception in Natural Breaks calculation");L/=c;c=0;for(k=O[z]+1;k<=O[z+1];k++)c+=n[k]*(Q[k]-L)**2;return{sbMean:L,sbSdcm:c}}h.createGenerateRendererClassBreaks=function(z){const {normalizationTotal:O}=z;return{classBreaks:d(z),normalizationTotal:O}};h.createGenerateRendererUniqueValues=function(z){z=Z(z);const O=[],Q=z.uniqueValues.length;for(let n=0;n<Q;n++){const L=z.uniqueValues[n];O.push({value:L,count:z.valueFrequency[n],label:L.toString()})}return{uniqueValues:O}};
Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n){function L(T,I,A,e=T.hasZ,J=T.hasM){if(v.isNone(I))return null;const W=T.hasZ&&e,R=T.hasM&&J;return A?(T=O.quantizeOptimizedGeometry(F,I,T.hasZ,T.hasM,"esriGeometryPoint",A,e,J),O.convertToPoint(T,W,R)):O.convertToPoint(I,W,R)}function c(){c=ca._asyncToGenerator(function*(T,I,A){const {outFields:e,orderByFields:J,groupByFieldsForStatistics:W,outStatistics:R}=T;if(e)for(var ja=0;ja<e.length;ja++)e[ja]=e[ja].trim();if(J)for(ja=0;ja<J.length;ja++)J[ja]=J[ja].trim();
if(W)for(ja=0;ja<W.length;ja++)W[ja]=W[ja].trim();if(R)for(ja=0;ja<R.length;ja++)R[ja].onStatisticField&&(R[ja].onStatisticField=R[ja].onStatisticField.trim());T.geometry&&!T.outSR&&(T.outSR=T.geometry.spatialReference);return k(T,I,A)});return c.apply(this,arguments)}function k(T,I,A){return M.apply(this,arguments)}function M(){M=ca._asyncToGenerator(function*(T,I,A){if(!T)return null;var {where:e}=T;T.where=e=e&&e.trim();if(!e||/^1 *= *1$/.test(e)||I&&I===e)T.where=null;if(!T.geometry)return T;
I=yield E(T);T.distance=0;T.units=null;"esriSpatialRelEnvelopeIntersects"===T.spatialRel&&({spatialReference:e}=T.geometry,I=B.getGeometryExtent(I),I.spatialReference=e);T.geometry=I;yield n.checkProjectionSupport(I.spatialReference,A);I=(yield t.normalizeCentralMeridian(r.fromJSON(I)))[0];if(v.isNone(I))throw N;I=I.toJSON();I=yield n.project(I,I.spatialReference,A);if(!I)throw N;I.spatialReference=A;T.geometry=I;return T});return M.apply(this,arguments)}function E(T){return l.apply(this,arguments)}
function l(){l=ca._asyncToGenerator(function*(T){const {geometry:I,distance:A,units:e}=T;if(null==A||"vertexAttributes"in I)return I;var J=I.spatialReference;T=e?x.fromJSON(e):y.getUnitString(J);J=J&&(u.isGeographic(J)||u.isWebMercator(J))?I:yield n.checkProjectionSupport(J,u.WGS84).then(()=>n.project(I,u.WGS84));return(yield q())(J.spatialReference,J,A,T)});return l.apply(this,arguments)}function q(){return m.apply(this,arguments)}function m(){m=ca._asyncToGenerator(function*(){return(yield new Promise((T,
I)=>h(["../../../geometry/geometryEngineJSON"],T,I))).geodesicBuffer});return m.apply(this,arguments)}const x=new Z.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),N=Object.freeze({}),K=new Q,ha=new Q,F=new Q,G={esriGeometryPoint:O.convertToPoint,esriGeometryPolyline:O.convertToPolyline,esriGeometryPolygon:O.convertToPolygon,esriGeometryMultipoint:O.convertToMultipoint},
U=(T,I)=>"_geVersion"!==T?I:void 0;d.QUERY_ENGINE_EMPTY_RESULT=N;d.cleanFromGeometryEngine=function(T){return T&&"_geVersion"in T?JSON.parse(JSON.stringify(T,U)):T};d.getCentroid=function(T,I,A){if("esriGeometryPolygon"!==T.geometryType||!I||!I.centroid&&!I.geometry)return null;I.centroid||(I.centroid=z.getCentroidOptimizedGeometry(new Q,I.geometry,T.hasZ,T.hasM));return L(T,I.centroid,A)};d.getGeometry=function(T,I,A,e,J,W,R=I,ja=A){const ma=I&&R,S=A&&ja;e=v.isSome(e)?"coords"in e?e:e.geometry:null;
if(v.isNone(e))return null;if(J)return I=O.generalizeOptimizedGeometry(ha,e,I,A,T,J,R,ja),W&&(I=O.quantizeOptimizedGeometry(F,I,ma,S,T,W)),G[T](I,ma,S);if(W)return W=O.quantizeOptimizedGeometry(F,e,I,A,T,W,R,ja),G[T](W,ma,S);O.removeZMValues(K,e,I,A,R,ja);return G[T](K,ma,S)};d.normalizeQuery=function(T,I,A){return c.apply(this,arguments)};d.normalizeQueryLike=k;d.transformCentroid=L;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(h,d,ca,Z,v,y,B,r){function t(H,P,da){if(H)for(const ra of H)(H=(H=y.getDeepValue(ra,P))&&"function"!==typeof H&&da.get(H))&&y.setDeepValue(ra,H.name,P)}function u(H,P){if(!H||!P)return[];p.clear();z(p,H,P);return Array.from(p).sort()}function z(H,P,da){var ra;if(da)if(null!=P&&null!=(ra=P.fields)&&ra.length)if(da.includes("*"))for(const {name:sa}of P.fields)H.add(sa);else for(const sa of da)O(H,P,sa);else if(da.includes("*"))H.clear(),H.add("*");else for(const sa of da)H.add(sa)}function O(H,
P,da){"string"===typeof da&&(P?(P=P.get(da))&&H.add(P.name):H.add(da))}function Q(H,P,da){return n.apply(this,arguments)}function n(){n=ca._asyncToGenerator(function*(H,P,da){var ra;if(da){var {arcadeUtils:sa}=yield r.loadArcade();da=sa.extractFieldNames(da,null==P?void 0:null==(ra=P.fields)?void 0:ra.map(xa=>xa.name));for(const xa of da)O(H,P,xa)}});return n.apply(this,arguments)}function L(H,P,da){return c.apply(this,arguments)}function c(){c=ca._asyncToGenerator(function*(H,P,da){if(da&&"1\x3d1"!==
da){const ra=(yield new Promise((sa,xa)=>h(["../../core/sql/WhereClause"],sa,xa))).WhereClause.create(da,P);if(!ra.isStandardized)throw new Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:da});z(H,P,ra.fieldNames)}});return c.apply(this,arguments)}function k(H,P){for(const da of H)if(da&&da.valueType&&da.valueType===P)return da.name;return null}function M(){M=ca._asyncToGenerator(function*(H){if(!H)return[];const P=new Set;yield E(P,H);return Array.from(P).sort()});return M.apply(this,
arguments)}function E(H,P){return l.apply(this,arguments)}function l(){l=ca._asyncToGenerator(function*(H,P){if(P){var da=y.getDeepValue("elevationInfo.featureExpressionInfo",P);if(da)return da.collectRequiredFields(H,P.fieldsIndex)}});return l.apply(this,arguments)}function q(H,P,da){return m.apply(this,arguments)}function m(){m=ca._asyncToGenerator(function*(H,P,da){da.outStatistic.onStatisticValueExpression?Q(H,P,da.outStatistic.onStatisticValueExpression):H.add(da.outStatistic.onStatisticField)});
return m.apply(this,arguments)}function x(){x=ca._asyncToGenerator(function*(H,P,da){var ra,sa;if(P&&da&&"fields"in da){var xa=[];null!=(ra=da.popupTemplate)&&ra.expressionInfos&&xa.push(...da.popupTemplate.expressionInfos.map(Aa=>Q(H,P.fieldsIndex,Aa.expression)));if(Array.isArray(null==(sa=da.popupTemplate)?void 0:sa.content)){ra=da.popupTemplate.content;for(const Aa of ra)"expression"===Aa.type&&Aa.expressionInfo&&xa.push(Q(H,P.fieldsIndex,Aa.expressionInfo.expression))}da.fields&&xa.push(...da.fields.map(Aa=>
q(H,P.fieldsIndex,Aa)));yield Promise.all(xa)}});return x.apply(this,arguments)}function N(){N=ca._asyncToGenerator(function*(H,P,da){P&&(P.timeInfo&&v.isSome(da)&&da.timeExtent&&z(H,P.fieldsIndex,[P.timeInfo.startField,P.timeInfo.endField]),P.floorInfo&&z(H,P.fieldsIndex,[P.floorInfo.floorField]),v.isSome(da)&&v.isSome(da.where)&&(yield L(H,P.fieldsIndex,da.where)))});return N.apply(this,arguments)}function K(){K=ca._asyncToGenerator(function*(H,P,da){P&&da&&(yield Promise.all(da.map(ra=>ha(H,P,
ra))))});return K.apply(this,arguments)}function ha(H,P,da){return F.apply(this,arguments)}function F(){F=ca._asyncToGenerator(function*(H,P,da){P&&da&&(da.valueExpression?yield Q(H,P.fieldsIndex,da.valueExpression):da.field&&O(H,P.fieldsIndex,da.field))});return F.apply(this,arguments)}function G(){G=ca._asyncToGenerator(function*(H){if(!H)return[];const P="timeInfo"in H&&H.timeInfo;return P?u(H.fieldsIndex,[H.trackIdField,P.startField,P.endField]):[]});return G.apply(this,arguments)}function U(){U=
ca._asyncToGenerator(function*(H){if(!H)return[];const P=new Set;yield T(P,H);return Array.from(P).sort()});return U.apply(this,arguments)}function T(H,P){return I.apply(this,arguments)}function I(){I=ca._asyncToGenerator(function*(H,P){const {labelingInfo:da,fieldsIndex:ra}=P;da&&da.length&&(yield Promise.all(da.map(sa=>A(H,ra,sa))))});return I.apply(this,arguments)}function A(H,P,da){return e.apply(this,arguments)}function e(){e=ca._asyncToGenerator(function*(H,P,da){if(da){var ra=da.getLabelExpression();
da=da.where;"arcade"===ra.type?yield Q(H,P,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{O(H,P,sa.slice(1,-1))});yield L(H,P,da)}});return e.apply(this,arguments)}function J(H){return"number"===typeof H&&!isNaN(H)&&isFinite(H)}function W(H){return null===H||J(H)}function R(H){return null===H||fa(H)}function ja(H){return null!=H&&"string"===typeof H}function ma(H){return null===H||ja(H)}function S(){return!0}function na(H,P){let da;switch(H.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=
H.nullable?R:fa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=H.nullable?W:J;break;case "string":case "esriFieldTypeString":da=H.nullable?ma:ja;break;default:da=S}return 1===arguments.length?da:da(P)}function oa(H){return null!=H&&D.has(H.type)}function qa(H,P){return H.nullable&&null===P?null:oa(H)&&!wa(H.type,Number(P))?d.NumericRangeValidationError.OUT_OF_RANGE:na(H,P)?H.domain?B.validateDomainValue(H.domain,P):null:d.TypeValidationError.INVALID_TYPE}
function wa(H,P){return(H="string"===typeof H?Ma(H):H)?H.isInteger?fa(P)&&P>=H.min&&P<=H.max:P>=H.min&&P<=H.max:!1}function Ma(H){switch(H){case "esriFieldTypeSmallInteger":case "small-integer":return X;case "esriFieldTypeInteger":case "integer":return Y;case "esriFieldTypeSingle":case "single":return ka;case "esriFieldTypeDouble":case "double":return ia}}function Ja(H,P,da){if(!P||!P.attributes||!H){if(v.isSome(da))for(var ra of H)da.add(ra);return!0}P=P.attributes;ra=!1;for(const sa of H)if(!(sa in
P))if(ra=!0,v.isSome(da))da.add(sa);else break;return ra}function La(){La=ca._asyncToGenerator(function*(H,P){const da=new Set;for(const ra of P)yield Q(da,H.fieldsIndex,ra);return Array.from(da).sort()});return La.apply(this,arguments)}const Za="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),b=["field","normalizationField"],p=new Set,fa=(()=>"isInteger"in Number?
Number.isInteger:H=>"number"===typeof H&&isFinite(H)&&Math.floor(H)===H)(),g=["integer","small-integer","single","double"],D=new Set([...g,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const X={min:-32768,max:32767,isInteger:!0},Y={min:-2147483648,max:2147483647,isInteger:!0},ka={min:-3.4E38,max:1.2E38,isInteger:!1},ia={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=Q;d.collectElevationFields=E;d.collectFeatureReductionFields=function(H,P,da){return x.apply(this,arguments)};d.collectField=O;d.collectFields=z;d.collectFilterFields=function(H,P,da){return N.apply(this,arguments)};d.collectLabelingFields=T;d.collectOrderByInfos=function(H,P,da){return K.apply(this,
arguments)};d.doubleRange=ia;d.featureHasFields=function(H,P){return!Ja(H,P,null)};d.fixFields=u;d.fixRendererFields=function(H,P){if(null!=H&&null!=P)for(const da of Array.isArray(H)?H:[H])if(t(Za,da,P),"visualVariables"in da&&da.visualVariables)for(const ra of da.visualVariables)t(b,ra,P)};d.fixTimeInfoFields=function(H,P){if(null!=H&&null!=P&&P.fields.length)if("startField"in H){var da=P.get(H.startField);P=P.get(H.endField);H.startField=da&&da.name||null;H.endField=P&&P.name||null}else da=P.get(H.startTimeField),
P=P.get(H.endTimeField),H.startTimeField=da&&da.name||null,H.endTimeField=P&&P.name||null};d.getDisplayFieldName=function({displayField:H,fields:P}){if(H)return H;if(!P||!P.length)return null;if(!(H=k(P,"name-or-title")||k(P,"unique-identifier")||k(P,"type-or-category")))a:{for(const da of P)if(da&&da.name&&(P=da.name.toLowerCase(),P.includes("name")||P.includes("title"))){H=da.name;break a}H=null}return H};d.getElevationFields=function(H){return M.apply(this,arguments)};d.getExpressionFields=function(H,
P){return La.apply(this,arguments)};d.getFeatureEditFields=function(H){if(!H)return[];const P="editFieldsInfo"in H&&H.editFieldsInfo;return P?u(H.fieldsIndex,[P&&P.creatorField,P&&P.creationDateField,P&&P.editorField,P&&P.editDateField]):[]};d.getFeatureGeometryFields=function(H){if(!H)return[];const P=H.geometryFieldsInfo;return P?u(H.fieldsIndex,[P.shapeAreaField,P.shapeLengthField]):[]};d.getFieldDefaultValue=function(H){const P=H.defaultValue;if(void 0!==P&&na(H,P))return P;if(H.nullable)return null};
d.getFieldRange=function(H){const P=B.getDomainRange(H.domain);if(P)return P;if(oa(H))return Ma(H.type)};d.getLabelingFields=function(H){return U.apply(this,arguments)};d.getNumericTypeForValue=function(H){if(!J(H))return null;if(fa(H)){if(H>=X.min&&H<=X.max)return"esriFieldTypeSmallInteger";if(H>=Y.min&&H<=Y.max)return"esriFieldTypeInteger"}return H>=ka.min&&H<=ka.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(H){return G.apply(this,arguments)};d.integerRange=Y;d.isDateField=
function(H){return null!=H&&("date"===H.type||"esriFieldTypeDate"===H.type)};d.isNumberInRange=wa;d.isNumericField=oa;d.isRasterPixelValueField=function(H){return["raster.itempixelvalue","raster.servicepixelvalue"].some(P=>H.toLowerCase().startsWith(P))};d.isStringField=function(H){return null!=H&&("string"===H.type||"esriFieldTypeString"===H.type)};d.isValidFieldValue=function(H,P){return null===qa(H,P)};d.isValueMatchingFieldType=na;d.numericTypes=g;d.packFields=function(H,P,da=1){if(!P||!H)return[];
if(P.includes("*"))return["*"];P=u(H,P);return P.length/H.fields.length>=da?["*"]:P};d.populateMissingFields=Ja;d.rendererFields=Za;d.sanitizeNullFieldValue=function(H){return null==H||"number"===typeof H&&isNaN(H)?null:H};d.singleRange=ka;d.smallIntegerRange=X;d.unpackFieldNames=function(H,P){return v.isNone(P)||v.isNone(H)?[]:P.includes("*")?H.fields.map(da=>da.name):P};d.validateFieldValue=qa;d.validationErrorToString=function(H,P,da){switch(H){case B.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;
case B.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${P.name}, type: ${P.type}, nullable: ${P.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Ma(P.type);return`Value ${da} is out of range for the number type - field: ${P.name}, type: ${P.type}, value range is ${ra} to ${sa}`}}};
d.visualVariableFields=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(h){function d(ca,Z){switch(ca.type){case "range":{const v="range"in ca?ca.range[1]:ca.maxValue;if(+Z<("range"in ca?ca.range[0]:ca.minValue)||+Z>v)return h.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ca.codedValues||ca.codedValues.every(v=>null==v||v.code!==Z))return h.DomainValidationError.INVALID_CODED_VALUE}return null}
h.DomainValidationError=void 0;(function(ca){ca.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ca.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(h.DomainValidationError||(h.DomainValidationError={}));h.getDomainRange=function(ca){if(ca&&"range"===ca.type)return{min:"range"in ca?ca.range[0]:ca.minValue,max:"range"in ca?ca.range[1]:ca.maxValue}};h.isValidDomainValue=function(ca,Z){return null===d(ca,Z)};h.validateDomainValue=d;Object.defineProperties(h,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(h,d,ca,Z,v,y){function B(){r||(r=ca._asyncToGenerator(function*(){const u=yield new Promise((z,O)=>h(["./arcadeUtils"],z,O));return{arcade:u.arcade,arcadeUtils:u,Dictionary:u.Dictionary,Feature:u.arcadeFeature}})());return r}let r;Z=(u,z,O)=>t.create(u,z,O,null,["$feature","$view"]);
let t=function(){function u(O,Q,n,L,c,k,M,E){this.script=O;this.evaluate=c;this.fields=Array.isArray(M)?M:M.fields;this._syntaxTree=L;this._arcade=Q;this._arcadeDictionary=n;this._arcadeFeature=k;this._spatialReference=E;this._referencesGeometry=Q.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}u.create=function(){var O=ca._asyncToGenerator(function*(Q,n,L,c,k,M){const {arcade:E,Feature:l,Dictionary:q}=yield B(),m=y.fromJSON(n);
n=E.parseScript(Q,M);k=k.reduce((F,G)=>({...F,[G]:null}),{});let x=null;v.isSome(c)&&(x=new q(c),x.immutable=!0,k.$config=null);c=E.scriptUsesGeometryEngine(n)&&E.enableGeometrySupport();M=E.scriptUsesFeatureSet(n)&&E.enableFeatureSetSupport();const N=E.scriptIsAsync(n)&&E.enableAsyncSupport();k={vars:k,spatialReference:m,useAsync:!!N};const K=new q;K.immutable=!1;K.setField("scale",0);const ha=E.compileScript(n,k);yield Promise.all([c,M,N]);return new u(Q,E,q,n,F=>{"$view"in F&&F.$view&&(K.setField("scale",
F.$view.scale),F.$view=K);x&&(F.$config=x);return ha({vars:F,spatialReference:m})},new l,L,m)});return function(Q,n,L,c,k,M){return O.apply(this,arguments)}}();var z=u.prototype;z.repurposeFeature=function(O){O.geometry&&!O.geometry.spatialReference&&(O.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(O.geometry,O.attributes,{fields:this.fields});return this._arcadeFeature};z.createDictionary=function(){return new this._arcadeDictionary};z.referencesMember=
function(O){return this._arcade.referencesMember(this._syntaxTree,O)};z.referencesFunction=function(O){return this._arcade.referencesFunction(this._syntaxTree,O)};z.referencesGeometry=function(){return this._referencesGeometry};z.referencesScale=function(){return this._referencesScale};z.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return u}();d.ArcadeExpression=t;d.createDictionaryExpression=(u,z,O,Q)=>t.create(u,z,O,Q,["$feature","$view"]);
d.createLabelExpression=(u,z,O)=>t.create(u,z,O,null,["$feature"]);d.createRendererExpression=Z;d.createVVExpression=Z;d.loadArcade=B;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q){function n(){return new Promise((M,E)=>h(["../../../geometry/geometryEngineJSON"],M,E))}function L(){L=ca._asyncToGenerator(function*(M,E,l){const {spatialRel:q,geometry:m}=M;if(m){if(!0!==k.spatialRelationship[q])throw new Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:M});if(r.isValid(m.spatialReference)&&r.isValid(l)){if(!0!==k.queryGeometry[B.getJsonType(m)])throw new Z("feature-store:unsupported-query","Unsupported query geometry type",
{query:M});if(!0!==k.layerGeometry[E])throw new Z("feature-store:unsupported-query","Unsupported layer geometry type",{query:M});if(M.outSR)return O.checkProjectionSupport(M.geometry&&M.geometry.spatialReference,M.outSR)}}});return L.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},k={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(M){if(B.isExtent(M))return!0;if(B.isPolygon(M)){for(const E of M.rings)if(5!==E.length||E[0][0]!==E[1][0]||E[0][0]!==E[4][0]||E[2][0]!==E[3][0]||E[0][1]!==E[3][1]||E[0][1]!==E[4][1]||E[1][1]!==E[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(M,E,l){return L.apply(this,arguments)};d.getSpatialQueryOperator=function(M,
E,l,q,m){if(B.isPolygon(E)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M)){const x=u.convertFromPolygon(new z,E,!1,!1);return Promise.resolve(N=>t.polygonContainsPoint(x,!1,!1,N))}if(B.isPolygon(E)&&"esriGeometryMultipoint"===l){const x=u.convertFromPolygon(new z,E,!1,!1);if("esriSpatialRelContains"===M)return Promise.resolve(N=>t.polygonContainsMultipoint(x,!1,!1,N,q,m))}if(B.isExtent(E)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===
M))return Promise.resolve(x=>v.extentContainsPoint(E,Q.getGeometry(l,q,m,x)));if(B.isExtent(E)&&"esriGeometryMultipoint"===l&&"esriSpatialRelContains"===M)return Promise.resolve(x=>v.extentContainsMultipoint(E,Q.getGeometry(l,q,m,x)));if(B.isExtent(E)&&"esriSpatialRelIntersects"===M){const x=y.getExtentIntersector(l);return Promise.resolve(N=>x(E,Q.getGeometry(l,q,m,N)))}return n().then(x=>{const N=x[c[M]].bind(null,E.spatialReference,E);return K=>N(Q.getGeometry(l,q,m,K))})};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(h,d){h.extentIntersectsExtent=d.extentIntersectsExtent;h.extentIntersectsMultipoint=d.extentIntersectsMultipoint;h.extentIntersectsPoint=d.extentIntersectsPoint;h.extentIntersectsPolygon=d.extentIntersectsPolygon;h.extentIntersectsPolyline=d.extentIntersectsPolyline;h.extentIntersectsRings=d.extentIntersectsRings;h.getFeatureExtentIntersector=
d.getFeatureExtentIntersector;h.isSelfIntersecting=d.isSelfIntersecting;h.segmentIntersects=d.segmentIntersects;h.getExtentIntersector=function(ca){return"mesh"===ca?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ca)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(h){function d(ca,Z,v,y,B){if(!ca)return!1;Z=Z?v?4:3:v?3:2;const {coords:r,lengths:t}=ca;v=!1;ca=0;for(const z of t){var u=
ca;for(let O=ca,Q=ca+z*Z;O<Q;O+=Z){u=O+Z;u===Q&&(u=ca);const n=r[O],L=r[O+1],c=r[u];u=r[u+1];(L<B&&u>=B||u<B&&L>=B)&&n+(B-L)/(u-L)*(c-n)<y&&(v=!v)}ca+=z*Z}return v}h.polygonContainsCoords=d;h.polygonContainsMultipoint=function(ca,Z,v,y,B,r){B=B?r?4:3:r?3:2;const {coords:t,lengths:u}=y;if(!u)return!1;for(let z=0,O=0;z<u.length;z++,O+=B)if(!d(ca,Z,v,t[O],t[O+1]))return!1;return!0};h.polygonContainsPoint=function(ca,Z,v,y){return d(ca,Z,v,y.coords[0],y.coords[1])};Object.defineProperties(h,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(h){function d(v,y,B,r,t){if(null!=r&&null!=t)return u=>{const z=v.getAttribute(u,y);u=v.getAttribute(u,B);return(null==z||z<=t)&&(null==u||u>=r)};if(null!=r)return u=>{u=v.getAttribute(u,B);return null==u||u>=r};if(null!=t)return u=>{u=v.getAttribute(u,y);return null==u||u<=t}}function ca(v,y,B,r){if(null!=B&&null!=r&&B===r)return t=>v.getAttribute(t,y)===B;if(null!=B&&null!=r)return t=>
{t=v.getAttribute(t,y);return t>=B&&t<=r};if(null!=B)return t=>v.getAttribute(t,y)>=B;if(null!=r)return t=>v.getAttribute(t,y)<=r}function Z(){return()=>!1}h.getTimeExtent=function(v,y){if(!v)return null;const B=y.featureAdapter,{startTimeField:r,endTimeField:t}=v;let u=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY;if(r&&t)y.forEach(O=>{const Q=B.getAttribute(O,r);O=B.getAttribute(O,t);null==Q||isNaN(Q)||(u=Math.min(u,Q));null==O||isNaN(O)||(z=Math.max(z,O))});else{const O=r||t;y.forEach(Q=>
{Q=B.getAttribute(Q,O);null==Q||isNaN(Q)||(u=Math.min(u,Q),z=Math.max(z,Q))})}return{start:u,end:z}};h.getTimeOperator=function(v,y,B){if(!y||!v)return null;const {startTimeField:r,endTimeField:t}=v;if(!r&&!t)return null;const {start:u,end:z}=y;return null===u&&null===z?null:void 0===u&&void 0===z?Z():r&&t?d(B,r,t,u,z):ca(B,r||t,u,z)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(h,d){function ca(v){return"oid"===v.type||"esriFieldTypeOID"===v.type}function Z(v){return"global-id"===v.type||"esriFieldTypeGlobalID"===v.type}return function(){function v(B){this.fields=B;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(B){var r=[];for(const t of B)if(B=t&&t.name){const u=B.toLowerCase().trim();this._fieldsMap.set(B,t);this._fieldsMap.set(u,t);r.push(u);
"date"===t.type||"esriFieldTypeDate"===t.type?(this.dateFields.push(t),this._dateFieldsSet.add(t)):d.isNumericField(t)&&(this._numericFieldsSet.add(t),this.numericFields.push(t));ca(t)||Z(t)||(t.editable=null==t.editable?!0:!!t.editable,t.nullable=null==t.nullable?!0:!!t.nullable)}r.sort();this.uid=r.join(",")}}var y=v.prototype;y.destroy=function(){this._fieldsMap.clear()};y.has=function(B){return null!=this.get(B)};y.get=function(B){return null!=B?this._fieldsMap.get(B)||this._fieldsMap.get(B.toLowerCase().trim()):
void 0};y.isDateField=function(B){return this._dateFieldsSet.has(this.get(B))};y.isNumericField=function(B){return this._numericFieldsSet.has(this.get(B))};y.normalizeFieldName=function(B){if(B=this.get(B))return B.name};h._createClass(v,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const B of this.fields)ca(B)||Z(B)||B.nullable||void 0!==d.getFieldDefaultValue(B)||this._requiredFields.push(B)}return this._requiredFields}}]);return v}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n,L,c,k,M,E){function l(A){return m.has(A)?m.get(A):"number"===typeof A?A:1}const q=y.getLogger("esri.views.support.Scheduler");h.TaskPriority=void 0;(function(A){A.RESOURCE_CONTROLLER="schedule";A.SLIDE="slide";A.STREAM_DATA_LOADER="stream loader";A.ELEVATION_QUERY="elevation query";A.TERRAIN_SURFACE="terrain";A.SURFACE_GEOMETRY_UPDATES="surface geometry updates";A.GRAPHICS_CORE="Graphics3D";A.I3S_CONTROLLER="I3S";A.POINT_CLOUD_LAYER="point cloud";A.FEATURE_TILE_FETCHER=
"feature fetcher";A.OVERLAY="overlay";A.STAGE="stage";A.GRAPHICS_DECONFLICTOR="graphics deconflictor";A.FILTER_VISIBILITY="Graphics3D filter visibility";A.SCALE_VISIBILITY="Graphics3D scale visibility";A.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";A.POINT_OF_INTEREST_FREQUENT="POI frequent";A.POINT_OF_INTEREST_INFREQUENT="POI infrequent";A.LABELER="labeler";A.FEATURE_QUERY_ENGINE="feature query";A.FEATURE_TILE_TREE="feature tile tree";A.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";A.ELEVATION_ALIGNMENT=
"elevation alignment";A.TEXT_TEXTURE_ATLAS="text texture atlas";A.TEXTURE_UNLOAD="texture unload";A.LINE_OF_SIGHT_TOOL="line of sight tool";A.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";A.ELEVATION_PROFILE="elevation profile";A.SNAPPING="snapping";A.SHADOW_ACCUMULATOR="shadow accumulator";A.CLOUDS_GENERATOR="cloud generator";A[A.TEST_PRIO=1]="TEST_PRIO"})(h.TaskPriority||(h.TaskPriority={}));const m=new Map([[h.TaskPriority.RESOURCE_CONTROLLER,0],[h.TaskPriority.SLIDE,0],[h.TaskPriority.STREAM_DATA_LOADER,
0],[h.TaskPriority.ELEVATION_QUERY,0],[h.TaskPriority.TERRAIN_SURFACE,1],[h.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[h.TaskPriority.GRAPHICS_CORE,2],[h.TaskPriority.I3S_CONTROLLER,2],[h.TaskPriority.POINT_CLOUD_LAYER,2],[h.TaskPriority.FEATURE_TILE_FETCHER,2],[h.TaskPriority.OVERLAY,4],[h.TaskPriority.STAGE,4],[h.TaskPriority.GRAPHICS_DECONFLICTOR,4],[h.TaskPriority.FILTER_VISIBILITY,4],[h.TaskPriority.SCALE_VISIBILITY,4],[h.TaskPriority.FRUSTUM_VISIBILITY,4],[h.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[h.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[h.TaskPriority.LABELER,8],[h.TaskPriority.FEATURE_QUERY_ENGINE,8],[h.TaskPriority.FEATURE_TILE_TREE,16],[h.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[h.TaskPriority.ELEVATION_ALIGNMENT,12],[h.TaskPriority.TEXT_TEXTURE_ATLAS,12],[h.TaskPriority.CLOUDS_GENERATOR,12],[h.TaskPriority.TEXTURE_UNLOAD,12],[h.TaskPriority.LINE_OF_SIGHT_TOOL,16],[h.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[h.TaskPriority.SNAPPING,0],[h.TaskPriority.SHADOW_ACCUMULATOR,
30]]);h.State=void 0;(function(A){A[A.ANIMATING=0]="ANIMATING";A[A.INTERACTING=1]="INTERACTING";A[A.IDLE=2]="IDLE"})(h.State||(h.State={}));const x=O.Milliseconds(6.5),N=O.Milliseconds(1),K=O.Milliseconds(30),ha=O.Milliseconds(1E3/30),F=O.Milliseconds(100);var G;(function(A){let e=function(R){function ja(){var S=R.call(this)||this;S.updating=!0;S._microTaskQueued=!1;S.performanceInfo={total:new r("total"),tasks:new Map};S._frameTaskTimes=new Map;S._budget=new W;S._state=h.State.INTERACTING;S._tasks=
new t;S._runQueue=new t;S._load=0;S._idleStateCallbacks=new t;S._idleUpdatesStartFired=!1;S._maxReschedule=I;S._forceTask=!1;S._debug=!1;S._debugHandle=z.watch(()=>E.SCHEDULER_LOG_SLOW_TASKS,qa=>S._debug=qa,z.initial);for(const qa of Object.keys(h.TaskPriority))S.performanceInfo.tasks.set(h.TaskPriority[qa],new r(h.TaskPriority[qa]));let na;const oa=d._assertThisInitialized(S);S._test={get state(){return B.unwrapOr(na,oa._state)},set state(qa){na=qa},FRAME_SAFETY_BUDGET:x,INTERACTING_BUDGET:ha,IDLE_BUDGET:F,
get availableBudget(){return oa._budget.budget},usedBudget:0,getBudget:()=>oa._budget,setBudget:qa=>oa._budget=qa,updateTask:qa=>S._updateTask(qa),getState:qa=>S._getState(qa),getRuntime:qa=>S._getRuntime(qa),frameTaskTimes:S._frameTaskTimes,resetRuntimes:()=>S._resetRuntimes(),getRunning:()=>S._getRunning()};return S}d._inheritsLoose(ja,R);var ma=ja.prototype;ma.destroy=function(){this._tasks.toArray().forEach(S=>S.remove());this._tasks.clear();B.removeMaybe(this._debugHandle);this.updating=this._microTaskQueued=
!1};ma.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=I,this._schedule(),this.frame()))}))};ma.registerTask=function(S,na){const oa=l(S);na=new J(this,S,na,oa);this._tasks.push(na);this.performanceInfo.tasks.has(S)||this.performanceInfo.tasks.set(S,new r(S));return na};ma.registerIdleStateCallbacks=function(S,na){const oa={idleBegin:S,idleEnd:na};this._idleStateCallbacks.push(oa);
this.state===h.State.IDLE&&this._idleUpdatesStartFired&&oa.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(oa),set idleBegin(wa){qa._idleUpdatesStartFired&&(oa.idleEnd(),qa._state===h.State.IDLE&&wa());oa.idleBegin=wa},set idleEnd(wa){oa.idleEnd=wa}}};ma.updateBudget=function(S){this._test.usedBudget=0;let na=x,oa=S.frameDuration,qa=N;switch(this.state){case h.State.IDLE:na=O.Milliseconds(0);oa=O.Milliseconds(Math.max(F,S.frameDuration));qa=K;break;case h.State.INTERACTING:oa=
O.Milliseconds(Math.max(ha,S.frameDuration))}oa=O.Milliseconds(oa-S.elapsedFrameTime-na);if(this.state!==h.State.IDLE&&oa<N&&!this._forceTask)return this._forceTask=!0,!1;oa=O.Milliseconds(Math.max(oa,qa));this._budget.reset(oa,this.state);this._maxReschedule=I;this._updateLoad();return this._schedule()};ma.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case h.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(S=>S.idleBegin()));
this._runIdle();break;case h.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ma.stopFrame=function(){this._budget.reset(O.Milliseconds(0),this._state);this._budget.madeProgress()};ma._removeIdleStateCallbacks=function(S){this._idleUpdatesStartFired&&S.idleEnd();this._idleStateCallbacks.removeUnordered(S)};ma.removeTask=function(S){this._tasks.removeUnordered(S);this._runQueue.removeUnordered(S)};ma._updateTask=function(S){this._tasks.forAll(na=>
{na.name===S&&na.setPriority(S)})};ma._getState=function(S){if(this._runQueue.some(oa=>oa.name===S))return h.TaskState.SCHEDULED;let na=h.TaskState.IDLE;this._tasks.forAll(oa=>{oa.name===S&&oa.needsUpdate&&(1>=oa.schedulePriority?na=h.TaskState.READY:na!==h.TaskState.READY&&(na=h.TaskState.WAITING))});return na};ma._getRuntime=function(S){let na=0;this._tasks.forAll(oa=>{oa.name===S&&(na+=oa.runtime)});return na};ma._resetRuntimes=function(){this._tasks.forAll(S=>S.runtime=0)};ma._getRunning=function(){const S=
new Map;this._tasks.forAll(oa=>{oa.needsUpdate&&S.set(oa.name,(S.get(oa.name)||0)+1)});if(0===S.size)return null;let na="";S.forEach((oa,qa)=>{na=1<oa?na+` ${oa}x ${qa}`:na+` ${qa}`});return na};ma._runIdle=function(){this._run()};ma._runInteracting=function(){this._run()};ma._runAnimating=function(){this._run()};ma._updateLoad=function(){const S=this._tasks.reduce((na,oa)=>oa.needsUpdate?++na:na,0);this._load=.9*this._load+S*(1-.9)};ma._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(S=>
{if(S.needsUpdate)return!0;S.schedulePriority=S.basePriority;return!1});for(this._tasks.forAll(S=>{0===S.basePriority&&S.needsUpdate&&!this._runQueue.includes(S)&&this._runQueue.unshift(S)});0===this._runQueue.length;){let S=!1,na=0;this._tasks.forAll(oa=>{if(oa.needsUpdate&&0!==oa.schedulePriority&&0!==oa.basePriority)switch(S=!0,na=Math.max(na,oa.basePriority),oa.schedulePriority){case 1:oa.schedulePriority=0;this._runQueue.push(oa);break;default:--oa.schedulePriority}});if(!S)return this.updating=
!1;this._maxReschedule===I&&(this._maxReschedule=na);--this._maxReschedule}return this.updating=!0};ma._run=function(){const S=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var na=this._budget.now();const oa=this._runQueue.pop();this._budget.resetProgress();try{oa.task.runTask(this._budget)}catch(qa){q.error(`Exception in task "${oa.name}"`,qa)}oa.schedulePriority=oa.basePriority;na=this._budget.now()-na;oa.runtime+=na;this._frameTaskTimes.set(oa.priority,this._frameTaskTimes.get(oa.priority)+
na);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",oa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-S);return}}while(this._schedule());this.updating=this._tasks.some(oa=>oa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-S)};ma._startFrameTaskTimes=function(){for(const S of Object.keys(h.TaskPriority))this._frameTaskTimes.set(h.TaskPriority[S],
0)};ma._recordFrameTaskTimes=function(S){this._frameTaskTimes.forEach((na,oa)=>this.performanceInfo.tasks.get(oa).record(na));this.performanceInfo.total.record(S)};d._createClass(ja,[{key:"load",get:function(){return this._load}},{key:"state",get:function(){return B.isNone(this._test.state)?this._state:this._test.state},set:function(S){this._state!==S&&(this._state=S,this.state!==h.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(na=>na.idleEnd())))}},
{key:"test",get:function(){return this._test}}]);return ja}(Z);ca.__decorate([Q.property()],e.prototype,"updating",void 0);e=ca.__decorate([k.subclass("esri.views.support.Scheduler")],e);A.Scheduler=e;let J=function(R){function ja(S,na,oa,qa){var wa=R.call(this,{})||this;wa._scheduler=S;wa.name=na;wa._basePriority=qa;wa.runtime=0;wa._queue=new M.PromiseQueue;wa._handles=new v;wa.schedulePriority=wa._basePriority;wa.task=B.isSome(oa)?oa:wa._queue;wa._handles.add(z.when(()=>wa.task.running,()=>S.activate()));
return wa}d._inheritsLoose(ja,R);var ma=ja.prototype;ma.normalizeCtorArgs=function(){return{}};ma.remove=function(){this.processQueue(U);this._scheduler.removeTask(this);this.schedule=T.schedule;this.reschedule=T.reschedule;this._handles.destroy()};ma.setPriority=function(S){this.name=S;S=l(S);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=S;this._basePriority=S};ma.schedule=function(S,na,oa){return this._queue.push(S,na,oa)};ma.reschedule=function(S,na,oa){return this._queue.unshift(S,
na,oa)};ma.processQueue=function(S){this._queue.runTask(S)};d._createClass(ja,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(S){this.setPriority(S)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ja}(Z);ca.__decorate([Q.property({constructOnly:!0})],J.prototype,"task",void 0);ca.__decorate([Q.property({readOnly:!0})],J.prototype,
"updating",null);J=ca.__decorate([k.subclass("esri.views.support.SchedulerTask")],J);let W=function(){function R(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=h.State.IDLE;this._didWork=!1;this._enabled=!0}var ja=R.prototype;ja.run=function(ma){if(this.done)return!1;!0===ma()&&(this._didWork=!0);return!0};ja.madeProgress=function(){this._didWork=!0};ja.reset=function(ma,S){this._begin=this.now();this._budget=ma;this._state=S;this._didWork=!1};ja.now=
function(){return performance.now()};ja.resetProgress=function(){this._didWork=!1};d._createClass(R,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ma){this._enabled=ma}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-
this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return R}();A.Budget=W})(G||(G={}));h.TaskState=void 0;(function(A){A.SCHEDULED="s";A.READY="r";A.WAITING="w";A.IDLE="i"})(h.TaskState||(h.TaskState={}));const U=(()=>{const A=new G.Budget;A.enabled=!1;return A})(),T=new (function(){function A(){}var e=A.prototype;e.remove=function(){};e.processQueue=function(){};e.schedule=function(J,W,R){try{if(u.isAborted(W)){const ja=u.createAbortError();return R?Promise.resolve(R(ja)):
Promise.reject(ja)}return u.when(J(U))}catch(ja){return Promise.reject(ja)}};e.reschedule=function(J,W,R){return this.schedule(J,W,R)};return A}()),I=Number.MAX_SAFE_INTEGER;h.ImmediateTask=T;h.getTaskPriority=l;h.newScheduler=function(){return new G.Scheduler};h.noBudget=U;h.taskPriorities=m;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(h,d,ca,Z,v,y,B){ca=function(r){function t(z){z=r.call(this,z)||this;z._groups=new Map;return z}h._inheritsLoose(t,r);var u=t.prototype;u.destroy=function(){this.removeAll()};u.add=function(z,O){if(!this._isHandle(z)&&!Array.isArray(z)&&!Z.isCollection(z))return this;const Q=this._getOrCreateGroup(O);Array.isArray(z)||Z.isCollection(z)?z.forEach(n=>this._isHandle(n)&&Q.push(n)):Q.push(z);this.notifyChange("size");return this};u.forEach=function(z,O){if("function"===typeof z)this._groups.forEach(Q=>
Q.forEach(z));else{const Q=this._getGroup(z);Q&&O&&Q.forEach(O)}};u.has=function(z){return this._groups.has(this._ensureGroupKey(z))};u.remove=function(z){if(Array.isArray(z)||Z.isCollection(z))return z.forEach(this.remove,this),this;if(!this.has(z))return this;const O=this._getGroup(z);for(let Q=0;Q<O.length;Q++)O[Q].remove();this._deleteGroup(z);this.notifyChange("size");return this};u.removeAll=function(){this._groups.forEach(z=>{for(let O=0;O<z.length;O++)z[O].remove()});this._groups.clear();
this.notifyChange("size");return this};u._isHandle=function(z){return z&&!!z.remove};u._getOrCreateGroup=function(z){if(this.has(z))return this._getGroup(z);const O=[];this._groups.set(this._ensureGroupKey(z),O);return O};u._getGroup=function(z){return v.assumeNonNull(this._groups.get(this._ensureGroupKey(z)))};u._deleteGroup=function(z){return this._groups.delete(this._ensureGroupKey(z))};u._ensureGroupKey=function(z){return z||"_default_"};h._createClass(t,[{key:"size",get:function(){let z=0;this._groups.forEach(O=>
{z+=O.length});return z}}]);return t}(ca);d.__decorate([y.property({readOnly:!0})],ca.prototype,"size",null);return ca=d.__decorate([B.subclass("esri.core.Handles")],ca)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u,z,O,Q,n,L){function c(U){return U?U instanceof G?U.toArray():U.length?Array.prototype.slice.apply(U):[]:[]}function k(U){if(U&&U.length)return U[0]}function M(U,T,I,A){T&&T.forEach((e,J,W)=>{U.push(e);M(U,I.call(A,e,J,W),I,A)})}var E;let l=function(){function U(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var T=U.prototype;T.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};T.reset=function(I){this.defaultPrevented=
!1;this.item=I};return U}();const q=new B(l,void 0,U=>{U.item=null;U.target=null;U.defaultPrevented=!1;U.cancellable=!1}),m=()=>{},x=new Set,N=new Set,K=new Set,ha=new Map;let F=0,G=E=function(U,T){function I(e){e=U.call(this,e)||this;e._chgListeners=[];e._notifications=null;e._timer=null;e._observable=new L.SimpleObservable;e.length=0;e._items=[];Object.defineProperty(h._assertThisInitialized(e),"uid",{value:F++});return e}h._inheritsLoose(I,U);I.isCollection=function(e){return null!=e&&e instanceof
E};var A=I.prototype;A.normalizeCtorArgs=function(e){return e?Array.isArray(e)||e instanceof E?{items:e}:e:{}};A.destroy=function(){this.removeAll()};A[T]=function*(){yield*this.items};A.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this._emitter.hasEventListener(e)};A.on=function(e,J){if("change"===e){const W=this._chgListeners,R={removed:!1,callback:J};W.push(R);this._notifications&&this._notifications.push({listeners:W.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=m;R.removed=!0;W.splice(W.indexOf(R),1)}}}return this._emitter.on(e,J)};A.once=function(e,J){const W=this.on(e,J);return{remove(){W.remove()}}};A.add=function(e,J){n.trackAccess(this._observable);if(this._emitBeforeChanges(r.ObservableChangesType.ADD))return this;J=this.getNextIndex(null!=J?J:null);this._splice(J,0,[e]);this._emitAfterChanges(r.ObservableChangesType.ADD);return this};A.addMany=function(e,J=this._items.length){n.trackAccess(this._observable);if(!e||!e.length||
this._emitBeforeChanges(r.ObservableChangesType.ADD))return this;J=this.getNextIndex(J);this._splice(J,0,c(e));this._emitAfterChanges(r.ObservableChangesType.ADD);return this};A.at=function(e){n.trackAccess(this._observable);e=Math.trunc(e)||0;0>e&&(e+=this.length);if(!(0>e||e>=this.length))return this._items[e]};A.removeAll=function(){n.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(r.ObservableChangesType.REMOVE))return[];const e=this._splice(0,this.length)||[];this._emitAfterChanges(r.ObservableChangesType.REMOVE);
return e};A.clone=function(){n.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(v.clone)})};A.concat=function(...e){n.trackAccess(this._observable);e=e.map(c);return this._createNewInstance({items:this._items.concat(...e)})};A.drain=function(e,J){n.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(r.ObservableChangesType.REMOVE)){var W=y.assumeNonNull(this._splice(0,this.length)),R=W.length;for(let ja=0;ja<R;ja++)e.call(J,W[ja],ja,W);this._emitAfterChanges(r.ObservableChangesType.REMOVE)}};
A.every=function(e,J){n.trackAccess(this._observable);return this._items.every(e,J)};A.filter=function(e,J){n.trackAccess(this._observable);let W;W=2===arguments.length?this._items.filter(e,J):this._items.filter(e);return this._createNewInstance({items:W})};A.find=function(e,J){n.trackAccess(this._observable);return this._items.find(e,J)};A.findIndex=function(e,J){n.trackAccess(this._observable);return this._items.findIndex(e,J)};A.flatten=function(e,J){n.trackAccess(this._observable);const W=[];
M(W,this,e,J);return new E(W)};A.forEach=function(e,J){n.trackAccess(this._observable);return this._items.forEach(e,J)};A.getItemAt=function(e){n.trackAccess(this._observable);return this._items[e]};A.getNextIndex=function(e){n.trackAccess(this._observable);const J=this.length;e=null==e?J:e;0>e?e=0:e>J&&(e=J);return e};A.includes=function(e,J=0){n.trackAccess(this._observable);return this._items.includes(e,J)};A.indexOf=function(e,J=0){n.trackAccess(this._observable);return this._items.indexOf(e,
J)};A.join=function(e=","){n.trackAccess(this._observable);return this._items.join(e)};A.lastIndexOf=function(e,J=this.length-1){n.trackAccess(this._observable);return this._items.lastIndexOf(e,J)};A.map=function(e,J){n.trackAccess(this._observable);e=this._items.map(e,J);return new E({items:e})};A.reorder=function(e,J=this.length-1){n.trackAccess(this._observable);const W=this.indexOf(e);if(-1!==W){0>J?J=0:J>=this.length&&(J=this.length-1);if(W!==J){if(this._emitBeforeChanges(r.ObservableChangesType.MOVE))return e;
this._splice(W,1);this._splice(J,0,[e]);this._emitAfterChanges(r.ObservableChangesType.MOVE)}return e}};A.pop=function(){n.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(r.ObservableChangesType.REMOVE)){var e=k(this._splice(this.length-1,1));this._emitAfterChanges(r.ObservableChangesType.REMOVE);return e}};A.push=function(...e){n.trackAccess(this._observable);if(this._emitBeforeChanges(r.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,e);this._emitAfterChanges(r.ObservableChangesType.ADD);
return this.length};A.reduce=function(e,J){n.trackAccess(this._observable);const W=this._items;return 2===arguments.length?W.reduce(e,J):W.reduce(e)};A.reduceRight=function(e,J){n.trackAccess(this._observable);const W=this._items;return 2===arguments.length?W.reduceRight(e,J):W.reduceRight(e)};A.remove=function(e){n.trackAccess(this._observable);return this.removeAt(this.indexOf(e))};A.removeAt=function(e){n.trackAccess(this._observable);if(!(0>e||e>=this.length||this._emitBeforeChanges(r.ObservableChangesType.REMOVE)))return e=
k(this._splice(e,1)),this._emitAfterChanges(r.ObservableChangesType.REMOVE),e};A.removeMany=function(e){n.trackAccess(this._observable);if(!e||!e.length||this._emitBeforeChanges(r.ObservableChangesType.REMOVE))return[];e=e instanceof E?e.toArray():e;const J=this._items,W=[],R=e.length;for(let na=0;na<R;na++){var ja=J.indexOf(e[na]);if(-1<ja){{var ma=na+1;var S=ja+1;const oa=Math.min(e.length-ma,J.length-S);let qa=0;for(;qa<oa&&e[ma+qa]===J[S+qa];)qa++;ma=qa}ma=1+ma;(ja=this._splice(ja,ma))&&0<ja.length&&
W.push.apply(W,ja);na+=ma-1}}this._emitAfterChanges(r.ObservableChangesType.REMOVE);return W};A.reverse=function(){n.trackAccess(this._observable);if(this._emitBeforeChanges(r.ObservableChangesType.MOVE))return this;const e=this._splice(0,this.length);e&&(e.reverse(),this._splice(0,0,e));this._emitAfterChanges(r.ObservableChangesType.MOVE);return this};A.shift=function(){n.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(r.ObservableChangesType.REMOVE)){var e=k(this._splice(0,
1));this._emitAfterChanges(r.ObservableChangesType.REMOVE);return e}};A.slice=function(e=0,J=this.length){n.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(e,J)})};A.some=function(e,J){n.trackAccess(this._observable);return this._items.some(e,J)};A.sort=function(e){n.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(r.ObservableChangesType.MOVE))return this;const J=y.assumeNonNull(this._splice(0,this.length));arguments.length?J.sort(e):J.sort();
this._splice(0,0,J);this._emitAfterChanges(r.ObservableChangesType.MOVE);return this};A.splice=function(e,J,...W){n.trackAccess(this._observable);const R=(J?r.ObservableChangesType.REMOVE:0)|(W.length?r.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(R))return[];e=this._splice(e,J,W)||[];this._emitAfterChanges(R);return e};A.toArray=function(){n.trackAccess(this._observable);return this._items.slice()};A.toJSON=function(){n.trackAccess(this._observable);return this.toArray()};A.toLocaleString=
function(){n.trackAccess(this._observable);return this._items.toLocaleString()};A.toString=function(){n.trackAccess(this._observable);return this._items.toString()};A.unshift=function(...e){n.trackAccess(this._observable);if(!e.length||this._emitBeforeChanges(r.ObservableChangesType.ADD))return this.length;this._splice(0,0,e);this._emitAfterChanges(r.ObservableChangesType.ADD);return this.length};A._createNewInstance=function(e){return new this.constructor(e)};A._splice=function(e,J,W){const R=this._items;
var ja=this.itemType;let ma=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=t.schedule(()=>this._dispatchChange()));if(J){ma=R.splice(e,J);if(this.hasEventListener("before-remove")){var S=q.acquire();S.target=this;S.cancellable=!0;for(let qa=0,wa=ma.length;qa<wa;qa++)J=ma[qa],S.reset(J),this.emit("before-remove",S),S.defaultPrevented&&(ma.splice(qa,
1),R.splice(e,0,J),e+=1,--qa,--wa);q.release(S)}this.length=this._items.length;if(this.hasEventListener("after-remove")){J=q.acquire();J.target=this;J.cancellable=!1;S=ma.length;for(let qa=0;qa<S;qa++)J.reset(ma[qa]),this.emit("after-remove",J);q.release(J)}}if(W&&W.length){if(ja){J=[];for(var na of W)W=ja.ensureType(na),null==W&&null!=na||J.push(W);W=J}ja=this.hasEventListener("before-add");na=this.hasEventListener("after-add");J=e===this.length;if(ja||na){var oa=q.acquire();oa.target=this;oa.cancellable=
!0;S=q.acquire();S.target=this;S.cancellable=!1;for(const qa of W)ja?(oa.reset(qa),this.emit("before-add",oa),oa.defaultPrevented||(J?R.push(qa):R.splice(e++,0,qa),this._set("length",R.length),na&&(S.reset(qa),this.emit("after-add",S)))):(J?R.push(qa):R.splice(e++,0,qa),this._set("length",R.length),S.reset(qa),this.emit("after-add",S));q.release(S);q.release(oa)}else{if(J)for(oa of W)R.push(oa);else R.splice(e,0,...W);this._set("length",R.length)}}(W&&W.length||ma&&ma.length)&&this._notifyChangeEvent(W,
ma);return ma};A._emitBeforeChanges=function(e){let J=!1;if(this.hasEventListener("before-changes")){const W=q.acquire();W.target=this;W.cancellable=!0;W.type=e;this.emit("before-changes",W);J=W.defaultPrevented;q.release(W)}return J};A._emitAfterChanges=function(e){if(this.hasEventListener("after-changes")){const J=q.acquire();J.target=this;J.cancellable=!1;J.type=e;this.emit("after-changes",J);q.release(J)}this._observable.notify()};A._notifyChangeEvent=function(e,J){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:J})};A._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var e=this._notifications;this._notifications=null;for(const J of e){e=J.changes;x.clear();N.clear();K.clear();for(const {added:na,removed:oa}of e){if(na)if(0===K.size&&0===N.size)for(const qa of na)x.add(qa);else for(const qa of na)N.has(qa)?(K.add(qa),N.delete(qa)):K.has(qa)||x.add(qa);
if(oa)if(0===K.size&&0===x.size)for(const qa of oa)N.add(qa);else for(const qa of oa)x.has(qa)?x.delete(qa):(K.delete(qa),N.add(qa))}const W=ca.acquire();x.forEach(na=>{W.push(na)});const R=ca.acquire();N.forEach(na=>{R.push(na)});const ja=this._items,ma=J.items,S=ca.acquire();K.forEach(na=>{ma.indexOf(na)!==ja.indexOf(na)&&S.push(na)});if(J.listeners&&(W.length||R.length||S.length)){e={target:this,added:W,removed:R,moved:S};const na=J.listeners.length;for(let oa=0;oa<na;oa++){const qa=J.listeners[oa];
qa.removed||qa.callback.call(this,e)}}ca.release(W);ca.release(R);ca.release(S)}x.clear();N.clear();K.clear()}};h._createClass(I,[{key:"items",get:function(){n.trackAccess(this._observable);return this._items},set:function(e){this._emitBeforeChanges(r.ObservableChangesType.ADD)||(this._splice(0,this.length,c(e)),this._emitAfterChanges(r.ObservableChangesType.ADD))}}]);return I}(Z.EventedAccessor,Symbol.iterator);G.ofType=U=>{if(!U)return E;if(ha.has(U))return ha.get(U);let T=null;if("function"===
typeof U)T=U.prototype.declaredClass;else if(U.base)T=U.base.prototype.declaredClass;else for(var I in U.typeMap){const A=U.typeMap[I].prototype.declaredClass;T=T?T+` | ${A}`:A}I=function(A){function e(){return A.apply(this,arguments)||this}h._inheritsLoose(e,A);return e}(E);d.__decorate([O.shared({Type:U,ensureType:"function"===typeof U?z.ensureType(U):z.ensureOneOfType(U)})],I.prototype,"itemType",void 0);I=d.__decorate([Q.subclass(`esri.core.Collection<${T}>`)],I);ha.set(U,I);return I};d.__decorate([u.property()],
G.prototype,"length",void 0);d.__decorate([u.property()],G.prototype,"items",null);return G=E=d.__decorate([Q.subclass("esri.core.Collection")],G)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(h){h.ObservableChangesType=void 0;var d=h.ObservableChangesType||(h.ObservableChangesType={});d[d.ADD=1]="ADD";d[d.REMOVE=2]="REMOVE";d[d.MOVE=4]="MOVE";Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(h){h.shared=function(d){return(ca,Z)=>{ca[Z]=d}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(h,d,ca,Z,v,y,B){function r(Q,n,L={}){return t(Q,n,L,z)}function t(Q,n,L={},c){let k=null;const M=L.once?(E,l)=>{c(E)&&(Z.removeMaybe(k),n(E,l))}:(E,l)=>{c(E)&&n(E,l)};k=y.watchTracked(Q,
M,L.sync,L.equals);L.initial&&(Q=Q(),M(Q,Q));return k}function u(Q,n,L){if(v.isAborted(L))return Promise.reject(v.createAbortError());const c=Q();if(null!=n&&n(c))return Promise.resolve(c);let k=null;return new Promise((M,E)=>{k=ca.handlesGroup([v.onAbort(L,()=>{k=Z.removeMaybe(k);E(v.createAbortError())}),t(Q,l=>{k=Z.removeMaybe(k);M(l)},{sync:!1,once:!0},null!=n?n:z)])})}function z(Q){return!0}function O(Q){return!!Q}h.autorun=B.autorun;h.initial={initial:!0};h.on=function(Q,n,L,c={}){function k(){E&&
l&&(l.remove(),null==c.onListenerRemove?void 0:c.onListenerRemove(E),l=E=null)}function M(x){c.once&&c.once&&Z.removeMaybe(q);L(x)}let E=null,l=null,q=null;const m=r(Q,(x,N)=>{k();d.isEventTarget(x)&&(E=x,l=d.on(x,n,M),null==c.onListenerAdd?void 0:c.onListenerAdd(x))},{sync:c.sync,initial:!0});return q=ca.makeHandle(()=>{m.remove();k()})};h.once=function(Q,n){return u(Q,null,n)};h.pausable=function(Q,n,L={}){let c=!1;const k=r(Q,(M,E)=>{c||n(M,E)},L);return{remove(){k.remove()},pause(){c=!0},resume(){c=
!1}}};h.sync={sync:!0};h.syncAndInitial={sync:!0,initial:!0};h.watch=r;h.when=function(Q,n,L={}){return t(Q,n,L,O)};h.whenOnce=function(Q,n){return u(Q,O,n)};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,d,ca,Z,v,y,B,r,t,u){h.PromiseQueue=function(O){function Q(){var L=O.apply(this,arguments)||this;L._tasks=[];L.running=!1;return L}d._inheritsLoose(Q,O);var n=Q.prototype;n.destroy=function(){this.cancelAll()};n.runTask=function(L){for(;!L.done&&this._process(L);)L.madeProgress()};n.push=function(L,c,k){this.running=!0;return new Promise((M,E)=>this._tasks.push(new z(M,E,L,c,k)))};n.unshift=function(L,c,k){this.running=!0;return new Promise((M,E)=>this._tasks.unshift(new z(M,E,L,c,k)))};
n._process=function(L){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const k=v.isAborted(c.signal);if(k&&!c.abortCallback)c.reject(v.createAbortError());else{const M=k?c.abortCallback(v.createAbortError()):c.callback(L);v.isPromiseLike(M)?M.then(c.resolve,c.reject):c.resolve(M)}}catch(k){c.reject(k)}this.running=0<this._tasks.length;return!0};n.cancelAll=function(){const L=v.createAbortError();for(const c of this._tasks)if(c.abortCallback){const k=c.abortCallback(L);c.resolve(k)}else c.reject(L);
this._tasks.length=0;this.running=!1};d._createClass(Q,[{key:"length",get:function(){return this._tasks.length}}]);return Q}(Z);ca.__decorate([y.property()],h.PromiseQueue.prototype,"running",void 0);h.PromiseQueue=ca.__decorate([u.subclass("esri.layers.support.PromiseQueue")],h.PromiseQueue);let z=function(O,Q,n,L,c){this.resolve=O;this.reject=Q;this.callback=n;this.signal=L;this.abortCallback=c};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,d,ca,Z,v,y,B,r){ca=function(t){function u(){var z=t.apply(this,arguments)||this;z.SCHEDULER_LOG_SLOW_TASKS=!1;z.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return z}h._inheritsLoose(u,t);return u}(ca);d.__decorate([Z.property()],ca.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([Z.property()],ca.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ca=d.__decorate([r.subclass("esri.views.support.DebugFlags")],ca);return new ca})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(h,d,ca,Z,v){function*y(E){switch(E.type){case "Feature":yield E;break;case "FeatureCollection":for(const l of E.features)l&&(yield l)}}function*B(E){if(!E)return null;switch(E.type){case "Point":yield E.coordinates;break;case "LineString":case "MultiPoint":yield*E.coordinates;break;case "MultiLineString":case "Polygon":for(const l of E.coordinates)yield*l;break;case "MultiPolygon":for(const l of E.coordinates)for(const q of l)yield*q}}
function*r(E,l={}){const {geometryType:q,objectIdField:m}=l;for(const N of E){var x;const {geometry:K,properties:ha,id:F}=N;if(K&&M[K.type]!==q)continue;E=ha||{};let G=null!=(x=E[m])?x:null;m&&null!=F&&!E[m]&&(E[m]=G=F);yield new ca.OptimizedFeature(K?O(new Z,K,l):null,E,null,G)}}function t(E){for(const l of E)if(2<l.length)return!0;return!1}function u(E){let l=0;for(let q=0;q<E.length;q++){const m=E[q],x=E[(q+1)%E.length];l+=m[0]*x[1]-x[0]*m[1]}return 0>=l}function z(E){const l=E[0],q=E[E.length-
1];l[0]===q[0]&&l[1]===q[1]&&l[2]===q[2]||E.push(l);return E}function O(E,l,q){switch(l.type){case "LineString":return L(E,l.coordinates,q),E;case "MultiLineString":for(const x of l.coordinates)L(E,x,q);return E;case "MultiPoint":return L(E,l.coordinates,q),E;case "MultiPolygon":for(var m of l.coordinates)for(Q(E,m[0],q),l=1;l<m.length;l++)n(E,m[l],q);return E;case "Point":return k(E,l.coordinates,q),E;case "Polygon":m=l.coordinates;Q(E,m[0],q);for(l=1;l<m.length;l++)n(E,m[l],q);return E}}function Q(E,
l,q){l=z(l);u(l)?L(E,l,q):c(E,l,q)}function n(E,l,q){l=z(l);u(l)?c(E,l,q):L(E,l,q)}function L(E,l,q){for(const m of l)k(E,m,q);E.lengths.push(l.length)}function c(E,l,q){for(let m=l.length-1;0<=m;m--)k(E,l[m],q);E.lengths.push(l.length)}function k(E,l,q){const [m,x,N]=l;E.coords.push(m,x);q.hasZ&&E.coords.push(N||0)}const M={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
h.createOptimizedFeatures=function(E,l){return Array.from(r(y(E),l))};h.getGeometryType=function(E){return M[E]};h.inferLayerProperties=function(E,l={}){const q=[];var m=new Set;const x=new Set;var N=!1;let K=null,ha=!1,F=void 0;({geometryType:l=null}=l);var G=!1;for(const U of y(E)){const {geometry:T,properties:I,id:A}=U;if(T&&(l||(l=M[T.type]),M[T.type]!==l))continue;N||(N=B(T),N=t(N));!ha&&(ha=null!=A)&&(F=typeof A,K=Object.keys(I).filter(e=>I[e]===A));ha&&null!=A&&(1<K.length?K=K.filter(e=>I[e]===
A):1===K.length&&(K=I[K[0]]===A?K:[]));if(!G&&I){E=!0;for(const e in I)if(!m.has(e))if(G=I[e],null==G)E=!1,x.add(e);else{a:switch(typeof G){case "string":G="esriFieldTypeString";break a;case "number":G="esriFieldTypeDouble";break a;default:G="unknown"}"unknown"===G?x.add(e):(x.delete(e),m.add(e),q.push({name:e,alias:e,type:G}))}G=E}}if(m=K&&1===K.length&&K[0]||null)for(const U of q)if(U.name===m&&v.isNumericField(U)){U.type="esriFieldTypeOID";break}return{fields:q,geometryType:l,hasZ:N,objectIdFieldName:m,
objectIdFieldType:F,unknownFields:Array.from(x)}};h.validateGeoJSON=function(E){if(!E)throw new d("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==E.type&&"FeatureCollection"!==E.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:E});({crs:E}=E);if(E){var l="string"===typeof E?E:"name"===E.type?E.properties.name:"EPSG"===E.type?E.properties.code:null,q=/.*(CRS84H?|4326)$/i;if(!l||!q.test(l))throw new d("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:E});}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(h,d,ca,Z,v){const y=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let B=1;h.createCapabilities=function(r,t){return{analytics:{supportsCacheHint:!1},attachment:null,
data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:r},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:Z.queryCapabilities,queryRelated:{supportsCount:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};h.createDefaultAttributesFunction=function(r,t){if(d("esri-csp-restrictions"))return()=>({[t]:null,
...r});try{let u=`this.${t} = null;`;for(const O in r){const Q=y.test(O)?`.${O}`:`["${O}"]`;u+=`this${Q} = ${JSON.stringify(r[O])};`}const z=(new Function(`\n      return class AttributesClass$${B++} {\n        constructor() {\n          ${u};\n        }\n      }\n    `))();return()=>new z}catch(u){return()=>({[t]:null,...r})}};h.createDefaultTemplate=function(r={}){return[{name:"New Feature",description:"",prototype:{attributes:ca.clone(r)}}]};h.createDrawingInfo=function(r){return{renderer:{type:"simple",
symbol:"esriGeometryPoint"===r||"esriGeometryMultipoint"===r?v.defaultPointSymbolJSON:"esriGeometryPolyline"===r?v.defaultPolylineSymbolJSON:v.defaultPolygonSymbolJSON}}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(h){const d=[252,146,31,255],ca={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},
Z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};h.defaultColor=d;h.defaultOutlineColor=[153,153,153,255];h.defaultPointSymbolJSON=ca;h.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};h.defaultPolylineSymbolJSON=Z;h.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,
0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};h.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};h.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};h.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),
function(h,d,ca,Z,v,y){function B(c){return new O(c)}function r(){return t.apply(this,arguments)}function t(){t=ca._asyncToGenerator(function*(){Z.isNone(L)&&(L=yield new Promise((c,k)=>h(["../../../../geometry/geometryEngineJSON"],c,k)));return L});return t.apply(this,arguments)}function u(){u=ca._asyncToGenerator(function*(c,k){!v.isValid(c)||"esriGeometryPolygon"!==k&&"esriGeometryPolyline"!==k||(yield r())});return u.apply(this,arguments)}let z=function(){this.description=this.code=null},O=function(c){this.error=
new z;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=c},Q=function(c){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=c};const n=new Set;let L;d.createFeatureEditErrorResult=B;d.createFeatureEditSuccessResult=function(c){return new Q(c)};d.loadGeometryEngine=r;d.loadGeometryEngineForSimplify=function(c,k){return u.apply(this,arguments)};d.mixAttributes=function(c,k,M,E=!1,l){n.clear();for(const N in M){const K=c.get(N);if(K){var q=M[N];{var m=
K;var x=q;let ha=x;"string"===typeof x&&y.isNumericField(m)?ha=parseFloat(x):null!=x&&y.isStringField(m)&&"string"!==typeof x&&(ha=String(x));m=y.sanitizeNullFieldValue(ha)}m!==q&&l&&l.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:K,originalValue:q,sanitizedValue:m}});n.add(K.name);if(K&&(E||K.editable)){if(q=y.validateFieldValue(K,m))return B(y.validationErrorToString(q,K,m));k[K.name]=m}}}for(const N of c.requiredFields)if(!n.has(N.name))return B(`missing required field "${N.name}"`);
return null};d.simplify=function(c,k){if(!c||!v.isValid(k))return c;if("rings"in c||"paths"in c){if(Z.isNone(L))throw new TypeError("geometry engine not loaded");return L.simplify(k,c)}return c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(h,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});h.kebabDict=d;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(h,
d,ca,Z,v,y,B,r,t,u,z,O,Q,n,L,c,k,M){const E={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function l(){var m=this;this._queryEngine=null;this._snapshotFeatures=function(){var x=h._asyncToGenerator(function*(N){N=yield m._fetch(N);return m._createFeatures(N)});return function(N){return x.apply(this,arguments)}}()}var q=l.prototype;q.destroy=function(){var m;null==(m=this._queryEngine)?void 0:m.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=
null};q.load=function(){var m=h._asyncToGenerator(function*(x,N={}){this.loadOptions={url:x.url,customParameters:x.customParameters};var K=[];yield this._checkProjection(x.spatialReference);var ha=null;x.url&&(ha=yield this._fetch(null==N?void 0:N.signal));var F=Q.inferLayerProperties(ha,{geometryType:x.geometryType});N=x.fields||F.fields||[];const G=null!=x.hasZ?x.hasZ:F.hasZ,U=F.geometryType,T=x.objectIdField||F.objectIdFieldName||"__OBJECTID",I=x.spatialReference||r.WGS84;x=x.timeInfo;N===F.fields&&
0<F.unknownFields.length&&K.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:F.unknownFields}});let A=N.find(J=>J.name===T);A?("esriFieldTypeString"!==A.type&&(A.type="esriFieldTypeOID"),A.editable=!1,A.nullable=!1):(A={alias:T,name:T,type:"string"===F.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},N.unshift(A));F={};for(var e of N){null==e.name&&(e.name=e.alias);
null==e.alias&&(e.alias=e.name);if(!e.name)throw new ca("geojson-layer:invalid-field-name","field name is missing",{field:e});if(!k.kebabDict.jsonValues.includes(e.type))throw new ca("geojson-layer:invalid-field-type",`invalid type for field "${e.name}"`,{field:e});if(e.name!==A.name){const J=M.getFieldDefaultValue(e);void 0!==J&&(F[e.name]=J)}}this._fieldsIndex=new c(N);e=this._fieldsIndex.requiredFields.indexOf(A);-1<e&&this._fieldsIndex.requiredFields.splice(e,1);x&&(x.startTimeField&&((e=this._fieldsIndex.get(x.startTimeField))?
(x.startTimeField=e.name,e.type="esriFieldTypeDate"):x.startTimeField=null),x.endTimeField&&((e=this._fieldsIndex.get(x.endTimeField))?(x.endTimeField=e.name,e.type="esriFieldTypeDate"):x.endTimeField=null),x.trackIdField&&((e=this._fieldsIndex.get(x.trackIdField))?x.trackIdField=e.name:(x.trackIdField=null,K.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:x}}))),x.startTimeField||x.endTimeField||(K.push({name:"geojson-layer:invalid-timeInfo",
message:"startTimeField and endTimeField are missing",details:{timeInfo:x}}),x=null));e=U?n.createDrawingInfo(U):null;K={warnings:K,featureErrors:[],layerDefinition:{...E,drawingInfo:e,templates:n.createDefaultTemplate(F),extent:null,geometryType:U,objectIdField:T,fields:N,hasZ:!!G,timeInfo:x}};this._queryEngine=new O.QueryEngine({fields:N,geometryType:U,hasM:!1,hasZ:G,objectIdField:T,spatialReference:I,timeInfo:x,featureStore:new u({geometryType:U,hasM:!1,hasZ:G}),cacheSpatialQueries:!0});this._createDefaultAttributes=
n.createDefaultAttributesFunction(F,T);ha=yield this._createFeatures(ha);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,ha);ha=this._normalizeFeatures(ha,K.warnings,K.featureErrors);this._queryEngine.featureStore.addMany(ha);K.layerDefinition.extent=this._queryEngine.fullExtent;if(K.layerDefinition.timeInfo){const {start:J,end:W}=this._queryEngine.timeExtent;K.layerDefinition.timeInfo.timeExtent=[J,W]}return K});return function(x){return m.apply(this,arguments)}}();q.applyEdits=
function(){var m=h._asyncToGenerator(function*(x){const {spatialReference:N,geometryType:K}=this._queryEngine;yield Promise.all([L.loadGeometryEngineForSimplify(N,K),z.checkProjectionSupport(x.adds,N),z.checkProjectionSupport(x.updates,N)]);yield this._waitSnapshotComplete();return this._applyEdits(x)});return function(x){return m.apply(this,arguments)}}();q.queryFeatures=function(){var m=h._asyncToGenerator(function*(x={},N={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(x,
N.signal)});return function(){return m.apply(this,arguments)}}();q.queryFeatureCount=function(){var m=h._asyncToGenerator(function*(x={},N={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(x,N.signal)});return function(){return m.apply(this,arguments)}}();q.queryObjectIds=function(){var m=h._asyncToGenerator(function*(x={},N={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(x,N.signal)});return function(){return m.apply(this,arguments)}}();
q.queryExtent=function(){var m=h._asyncToGenerator(function*(x={},N={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(x,N.signal)});return function(){return m.apply(this,arguments)}}();q.querySnapping=function(){var m=h._asyncToGenerator(function*(x,N={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(x,N.signal)});return function(x){return m.apply(this,arguments)}}();q.refresh=function(){var m=h._asyncToGenerator(function*(x){var N;
this.loadOptions.customParameters=x;null==(N=this._snapshotTask)?void 0:N.abort();this._snapshotTask=y.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(K=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,K);(K=this._normalizeFeatures(K))&&this._queryEngine.featureStore.addMany(K)},K=>{this._queryEngine.featureStore.clear();y.isAbortError(K)||Z.getLogger("esri.layers.GeoJSONLayer").error(new ca("geojson-layer:refresh",
"An error occurred during refresh",{error:K}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(x){return m.apply(this,arguments)}}();q._createFeatures=function(){var m=h._asyncToGenerator(function*(x){const {geometryType:N,hasZ:K,objectIdField:ha}=this._queryEngine;x=Q.createOptimizedFeatures(x,{geometryType:N,hasZ:K,objectIdField:ha});if(!r.equals(this._queryEngine.spatialReference,r.WGS84))for(const F of x)v.isSome(F.geometry)&&
(F.geometry=t.convertFromGeometry(z.project(t.convertToGeometry(F.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),r.WGS84,this._queryEngine.spatialReference)));return x});return function(x){return m.apply(this,arguments)}}();q._waitSnapshotComplete=function(){var m=h._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return m.apply(this,arguments)}}();
q._fetch=function(){var m=h._asyncToGenerator(function*(x){const {url:N,customParameters:K}=this.loadOptions;x=(yield d(N,{responseType:"json",query:{...K},signal:x})).data;yield Q.validateGeoJSON(x);return x});return function(x){return m.apply(this,arguments)}}();q._normalizeFeatures=function(m,x,N){const {objectIdField:K}=this._queryEngine,ha=[];for(const F of m){m=this._createDefaultAttributes();const G=L.mixAttributes(this._fieldsIndex,m,F.attributes,!0,x);G?null==N?void 0:N.push(G):(this._assignObjectId(m,
F.attributes,!0),F.attributes=m,F.objectId=m[K],ha.push(F))}return ha};q._applyEdits=function(m){const {adds:x,updates:N,deletes:K}=m;m={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};x&&x.length&&this._applyAddEdits(m,x);N&&N.length&&this._applyUpdateEdits(m,N);if(K&&K.length){for(const ha of K)m.deleteResults.push(L.createFeatureEditSuccessResult(ha));this._queryEngine.featureStore.removeManyById(K)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,
featureEditResults:m}};q._applyAddEdits=function(m,x){const {addResults:N}=m,{geometryType:K,hasM:ha,hasZ:F,objectIdField:G,spatialReference:U,featureStore:T}=this._queryEngine,I=[];for(const A of x){if(A.geometry&&K!==B.getJsonType(A.geometry)){N.push(L.createFeatureEditErrorResult("Incorrect geometry type."));continue}x=this._createDefaultAttributes();const e=L.mixAttributes(this._fieldsIndex,x,A.attributes);e?N.push(e):(this._assignObjectId(x,A.attributes),A.attributes=x,null!=A.uid&&(m.uidToObjectId[A.uid]=
A.attributes[G]),v.isSome(A.geometry)&&(A.geometry=z.project(L.simplify(A.geometry,U),A.geometry.spatialReference,U)),I.push(A),N.push(L.createFeatureEditSuccessResult(A.attributes[G])))}T.addMany(t.convertFromFeatures([],I,K,F,ha,G))};q._applyUpdateEdits=function({updateResults:m},x){const {geometryType:N,hasM:K,hasZ:ha,objectIdField:F,spatialReference:G,featureStore:U}=this._queryEngine;for(const T of x){const {attributes:I,geometry:A}=T;x=I&&I[F];if(null==x){m.push(L.createFeatureEditErrorResult(`Identifier field ${F} missing`));
continue}if(!U.has(x)){m.push(L.createFeatureEditErrorResult(`Feature with object id ${x} missing`));continue}const e=t.convertToFeature(U.getFeature(x),N,ha,K);if(v.isSome(A)){if(N!==B.getJsonType(A)){m.push(L.createFeatureEditErrorResult("Incorrect geometry type."));continue}e.geometry=z.project(L.simplify(A,G),A.spatialReference,G)}if(I){const J=L.mixAttributes(this._fieldsIndex,e.attributes,I);if(J){m.push(J);continue}}U.add(t.convertFromFeature(e,N,ha,K,F));m.push(L.createFeatureEditSuccessResult(x))}};
q._createObjectIdGenerator=function(m,x){const N=m.fieldsIndex.get(m.objectIdField);if("esriFieldTypeString"===N.type)return()=>N.name+"-"+Date.now().toString(16);let K=Number.NEGATIVE_INFINITY;for(const ha of x)ha.objectId&&(K=Math.max(K,ha.objectId));K=Math.max(0,K)+1;return()=>K++};q._assignObjectId=function(m,x,N=!1){const K=this._queryEngine.objectIdField;m[K]=N&&K in x?x[K]:this._objectIdGenerator()};q._checkProjection=function(){var m=h._asyncToGenerator(function*(x){try{yield z.checkProjectionSupport(r.WGS84,
x)}catch{throw new ca("geojson-layer","Projection not supported");}});return function(x){return m.apply(this,arguments)}}();return l}()});