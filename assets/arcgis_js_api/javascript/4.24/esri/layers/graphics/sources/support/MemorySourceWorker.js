// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,d,ca,Y,t,x,z,n){function p(g,C){return g?C?4:3:C?3:2}function q(g,C,X,Z){if(g){if(X)return C&&Z?b:La;if(C&&Z)return Za}else if(C&&Z)return La;return Ja}function y({scale:g,translate:C},X){return Math.round((X-C[0])/g[0])}function L({scale:g,translate:C},
X){return Math.round((C[1]-X)/g[1])}function R({scale:g,translate:C},X){return X*g[0]+C[0]}function l({scale:g,translate:C},X){return C[1]-X*g[1]}function M(g){g=g.coords;return{x:g[0],y:g[1]}}function c(g,C){g.coords[0]=C.x;g.coords[1]=C.y;return g}function h(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function K(g,C){g.coords[0]=C.x;g.coords[1]=C.y;g.coords[2]=C.z;return g}function W(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function r(g,C){g.coords[0]=C.x;g.coords[1]=C.y;g.coords[2]=C.m;return g}
function w(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function u(g,C){g.coords[0]=C.x;g.coords[1]=C.y;g.coords[2]=C.z;g.coords[3]=C.m;return g}function F(g,C){return g&&C?u:g?K:C?r:c}function J(g,C,X,Z,ka){X=F(X,Z);for(const ja of C){const {geometry:D,attributes:O}=ja;let da;D&&(da=X(new n,D));g.push(new x.OptimizedFeature(da,O,null,O[ka]))}return g}function P(g,C,X,Z){for(const ka of C){const {geometry:ja,attributes:D}=ka;let O;ja&&(O=ha(ja,X,Z));g.push({attributes:D,geometry:O})}return g}
function ha(g,C,X){if(Y.isNone(g))return null;const Z=p(C,X),ka=[];for(let ja=0;ja<g.coords.length;ja+=Z){const D=[];for(let O=0;O<Z;O++)D.push(g.coords[ja+O]);ka.push(D)}return C?X?{points:ka,hasZ:C,hasM:X}:{points:ka,hasZ:C}:X?{points:ka,hasM:X}:{points:ka}}function E(g,C,X,Z,ka){X=p(X,Z);for(const ja of C){C=ja.geometry;Z=ja.attributes;let D;C&&(D=G(new n,C,X));g.push(new x.OptimizedFeature(D,Z,null,Z[ka]))}return g}function G(g,C,X=p(C.hasZ,C.hasM)){g.lengths[0]=C.points.length;const Z=g.coords;
let ka=0;for(const ja of C.points)for(C=0;C<X;C++)Z[ka++]=ja[C];return g}function U(g,C,X){if(!g)return null;const Z=p(C,X),{coords:ka,lengths:ja}=g;g=[];let D=0;for(const O of ja){const da=[];for(let ra=0;ra<O;ra++){const sa=[];for(let xa=0;xa<Z;xa++)sa.push(ka[D++]);da.push(sa)}g.push(da)}return C?X?{paths:g,hasZ:C,hasM:X}:{paths:g,hasZ:C}:X?{paths:g,hasM:X}:{paths:g}}function S(g,C,X,Z,ka){X=p(X,Z);for(const ja of C){C=ja.geometry;Z=ja.attributes;let D;C&&(D=H(new n,C,X));g.push(new x.OptimizedFeature(D,
Z,null,Z[ka]))}return g}function H(g,C,X=p(C.hasZ,C.hasM)){const {lengths:Z,coords:ka}=g;let ja=0;for(const D of C.paths){for(const O of D)for(C=0;C<X;C++)ka[ja++]=O[C];Z.push(D.length)}return g}function A(g,C,X){if(!g)return null;const Z=p(C,X),{coords:ka,lengths:ja}=g;g=[];let D=0;for(const O of ja){const da=[];for(let ra=0;ra<O;ra++){const sa=[];for(let xa=0;xa<Z;xa++)sa.push(ka[D++]);da.push(sa)}g.push(da)}return C?X?{rings:g,hasZ:C,hasM:X}:{rings:g,hasZ:C}:X?{rings:g,hasM:X}:{rings:g}}function f(g,
C,X,Z,ka){for(const ja of C){C=ja.geometry;const D=ja.centroid,O=ja.attributes;let da;C&&(da=I(new n,C,X,Z));Y.isSome(D)?g.push(new x.OptimizedFeature(da,O,c(new n,D),O[ka])):g.push(new x.OptimizedFeature(da,O,null,O[ka]))}return g}function I(g,C,X=C.hasZ,Z=C.hasM){T(g,C.rings,X,Z);return g}function T(g,C,X,Z){X=p(X,Z);const {lengths:ka,coords:ja}=g;Z=0;ka.length=ja.length=0;for(const D of C){for(const O of D)for(C=0;C<X;C++)ja[Z++]=O[C];ka.push(D.length)}return g}function N(g,C,X,Z,ka,ja){g.length=
0;if(!X){for(const D of C)g.push(new x.OptimizedFeature(null,D.attributes,null,D.attributes[ja]));return g}switch(X){case "esriGeometryPoint":return J(g,C,Z,ka,ja);case "esriGeometryMultipoint":return E(g,C,Z,ka,ja);case "esriGeometryPolyline":return S(g,C,Z,ka,ja);case "esriGeometryPolygon":return f(g,C,Z,ka,ja);default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`)),g.length=0}return g}function ea(g,C,X,Z){g=g&&("coords"in g?g:g.geometry);if(Y.isNone(g))return null;
switch(C){case "esriGeometryPoint":return C=M,X&&Z?C=w:X?C=h:Z&&(C=W),C(g);case "esriGeometryMultipoint":return ha(g,X,Z);case "esriGeometryPolyline":return U(g,X,Z);case "esriGeometryPolygon":return A(g,X,Z);default:wa.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${C}'`))}}function ma(g,C,X,Z,ka){g.length=0;if(Y.isNone(X)){for(const O of C)g.push({attributes:O.attributes});return g}switch(X){case "esriGeometryPoint":var ja=M;Z&&ka?ja=w:Z?ja=h:ka&&(ja=W);
for(var D of C){const {geometry:O,attributes:da}=D;Z=Y.isSome(O)?ja(O):null;g.push({attributes:da,geometry:Z})}break;case "esriGeometryMultipoint":return P(g,C,Z,ka);case "esriGeometryPolyline":for(const O of C){const {geometry:da,attributes:ra}=O;let sa;Y.isSome(da)&&(sa=U(da,Z,ka));g.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(ja of C){const {geometry:O,attributes:da,centroid:ra}=ja;let sa;Y.isSome(O)&&(sa=A(O,Z,ka));Y.isSome(ra)?(D=M(ra),g.push({attributes:da,centroid:D,
geometry:sa})):g.push({attributes:da,geometry:sa})}break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`))}return g}function Q(g,C,X,Z,ka,ja,D=X,O=Z){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(Y.isNone(C)||!C.coords.length)return null;ka=Ma[ka];const {coords:da,lengths:ra}=C;C=p(X,Z);const sa=p(X&&D,Z&&O);X=q(X,Z,D,O);if(!ra.length)return X(g.coords,da,0,0,y(ja,da[0]),L(ja,da[1])),g.lengths.length&&(g.lengths.length=
0),g.coords.length=C,g;let xa,Aa=0,Ba,Ia=0;for(const Ha of ra){if(Ha<ka)continue;let Ea=0;Ba=Ia;O=Z=y(ja,da[Aa]);xa=D=L(ja,da[Aa+1]);X(g.coords,da,Ba,Aa,O,xa);Ea++;Aa+=C;Ba+=sa;for(let Fa=1;Fa<Ha;Fa++,Aa+=C)if(O=y(ja,da[Aa]),xa=L(ja,da[Aa+1]),O!==Z||xa!==D)X(g.coords,da,Ba,Aa,O-Z,xa-D),Ba+=sa,Ea++,Z=O,D=xa;Ea>=ka&&(g.lengths.push(Ea),Ia=Ba)}g.coords.length=Ia;return g.coords.length?g:null}function na(g,C,X,Z,ka,ja,D){let O=Z,da=0;for(let sa=ja+X;sa<D;sa+=X){{var ra=C[sa];const xa=C[sa+1],Aa=C[D],
Ba=C[D+1];let Ia=C[ja],Ha=C[ja+1],Ea=Aa-Ia,Fa=Ba-Ha;if(0!==Ea||0!==Fa){const Ga=((ra-Ia)*Ea+(xa-Ha)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ia=Aa,Ha=Ba):0<Ga&&(Ia+=Ea*Ga,Ha+=Fa*Ga)}Ea=ra-Ia;Fa=xa-Ha;ra=Ea*Ea+Fa*Fa}ra>O&&(da=sa,O=ra)}O>Z&&(da-ja>X&&na(g,C,X,Z,ka,ja,da),ka(g,C,g.length,da,C[da],C[da+1]),D-da>X&&na(g,C,X,Z,ka,da,D))}function oa(g,C,X,Z,ka){const {coords:ja,lengths:D}=C,O=X?Z?b:La:Z?La:Ja;X=p(X,Z);if(!ja.length)return g!==C&&(g.lengths.length=0,g.coords.length=0),g;if(!D.length)return O(g.coords,ja,
0,0,R(ka,ja[0]),l(ka,ja[1])),g!==C&&(g.lengths.length=0,g.coords.length=X),g;const [da,ra]=ka.scale;Z=0;for(let sa=0;sa<D.length;sa++){const xa=D[sa];g.lengths[sa]=xa;let Aa=R(ka,ja[Z]),Ba=l(ka,ja[Z+1]);O(g.coords,ja,Z,Z,Aa,Ba);Z+=X;for(let Ia=1;Ia<xa;Ia++,Z+=X)Aa+=ja[Z]*da,Ba-=ja[Z+1]*ra,O(g.coords,ja,Z,Z,Aa,Ba)}g!==C&&(g.lengths.length=D.length,g.coords.length=ja.length);return g}function qa(g,C,X,Z){let ka=0,ja=g[Z*C],D=g[Z*(C+1)];for(let O=1;O<X;O++){const da=ja+g[Z*(C+O)],ra=D+g[Z*(C+O)+1],sa=
(da-ja)*(ra+D);ja=da;D=ra;ka+=sa}return.5*ka}const wa=ca.getLogger("esri.layers.graphics.featureConversionUtils"),Ma={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ja=(g,C,X,Z,ka,ja)=>{g[X]=ka;g[X+1]=ja},La=(g,C,X,Z,ka,ja)=>{g[X]=ka;g[X+1]=ja;g[X+2]=C[Z+2]},Za=(g,C,X,Z,ka,ja)=>{g[X]=ka;g[X+1]=ja;g[X+2]=C[Z+3]},b=(g,C,X,Z,ka,ja)=>{g[X]=ka;g[X+1]=ja;g[X+2]=C[Z+2];g[X+3]=C[Z+3]},m=[],ia=[];k.convertFromFeature=function(g,C,X,Z,ka){m[0]=g;[g]=N(ia,m,C,X,Z,
ka);m.length=ia.length=0;return g};k.convertFromFeatureSet=function(g,C){const X=new z,{hasM:Z,hasZ:ka,features:ja,objectIdFieldName:D,spatialReference:O,geometryType:da,exceededTransferLimit:ra,transform:sa,fields:xa}=g;xa&&(X.fields=xa);X.geometryType=da;X.objectIdFieldName=D||C;X.spatialReference=O;if(!X.objectIdFieldName)return wa.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),X;ja&&N(X.features,ja,da,ka,Z,X.objectIdFieldName);ra&&(X.exceededTransferLimit=
ra);Z&&(X.hasM=Z);ka&&(X.hasZ=ka);sa&&(X.transform=sa);return X};k.convertFromFeatures=N;k.convertFromGeometry=function(g,C,X){if(Y.isNone(g))return null;const Z=new n;"hasZ"in g&&null==C&&(C=g.hasZ);"hasM"in g&&null==X&&(X=g.hasM);if(t.isPoint(g))return F(null!=C?C:null!=g.z,null!=X?X:null!=g.m)(Z,g);if(t.isPolygon(g))return I(Z,g,C,X);if(t.isPolyline(g))return H(Z,g,p(C,X));if(t.isMultipoint(g))return G(Z,g,p(C,X));wa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${g}'`))};
k.convertFromGraphics=function(g,C,X,Z,ka,ja){const D=g.length;switch(X){case "esriGeometryPoint":J(g,C,Z,ka,ja);break;case "esriGeometryMultipoint":E(g,C,Z,ka,ja);break;case "esriGeometryPolyline":S(g,C,Z,ka,ja);break;case "esriGeometryPolygon":f(g,C,Z,ka,ja);break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${X}'`))}for(Z=0;Z<C.length;Z++)g[Z+D].geometryType=X,g[Z+D].insertAfter=C[Z].insertAfter,g[Z+D].groupId=C[Z].groupId;return g};k.convertFromMultipoint=
G;k.convertFromMultipointFeatures=E;k.convertFromNestedArray=T;k.convertFromPoint=function(g,C,X=F(null!=C.z,null!=C.m)){return X(g,C)};k.convertFromPointFeatures=J;k.convertFromPolygon=I;k.convertFromPolyline=H;k.convertFromPolylineFeatures=S;k.convertToFeature=function(g,C,X,Z){ia[0]=g;ma(m,ia,C,X,Z);g=m[0];m.length=ia.length=0;return g};k.convertToFeatureSet=function(g){const {objectIdFieldName:C,spatialReference:X,transform:Z,fields:ka,hasM:ja,hasZ:D,features:O,geometryType:da,exceededTransferLimit:ra,
uniqueIdField:sa,queryGeometry:xa,queryGeometryType:Aa}=g;g=ma([],O,da,D,ja);const Ba=ea(xa,Aa,!1,!1);g={features:g,fields:ka,geometryType:da,objectIdFieldName:C,spatialReference:X,uniqueIdField:sa,queryGeometry:Ba};Z&&(g.transform=Z);ra&&(g.exceededTransferLimit=ra);ja&&(g.hasM=ja);D&&(g.hasZ=D);return g};k.convertToFeatures=ma;k.convertToGeometry=ea;k.convertToMultipoint=ha;k.convertToMultipointFeatures=P;k.convertToPoint=function(g,C,X){return g?C?X?w(g):h(g):X?W(g):M(g):null};k.convertToPolygon=
A;k.convertToPolyline=U;k.deltaDecodeGeometry=function(g,C){if(Y.isNone(g))return null;const X=g.clone(),Z=g.coords;g=g.lengths;let ka=0;for(let O=0;O<g.length;O++){const da=g[O];var ja=Z[C*ka],D=Z[C*ka+1];for(let ra=1;ra<da;ra++)ja+=Z[C*(ka+ra)],D+=Z[C*(ka+ra)+1],X.coords[C*(ka+ra)]=ja,X.coords[C*(ka+ra)+1]=D;ka+=da}return X};k.deltaEncodeGeometry=function(g,C){const X=g.clone(),Z=g.coords;g=g.lengths;let ka=0;for(let D=0;D<g.length;D++){const O=g[D];let da=Z[C*ka];var ja=Z[C*ka+1];for(let ra=1;ra<
O;ra++){const sa=Z[C*(ka+ra)],xa=Z[C*(ka+ra)+1];ja=xa-ja;X.coords[C*(ka+ra)]=sa-da;X.coords[C*(ka+ra)+1]=ja;da=sa;ja=xa}ka+=O}return X};k.generalizeOptimizedGeometry=function(g,C,X,Z,ka,ja,D=X,O=Z){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!C||!C.coords.length)return null;ka=Ma[ka];const {coords:da,lengths:ra}=C;C=p(X,Z);const sa=p(X&&D,Z&&O);X=q(X,Z,D,O);if(!ra.length)return X(g.coords,da,0,0,da[0],da[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=
C,g;Z=0;ja*=ja;for(const xa of ra){if(xa<ka){Z+=xa*C;continue}D=g.coords.length/sa;O=Z;const Aa=Z+(xa-1)*C;X(g.coords,da,g.coords.length,O,da[O],da[O+1]);na(g.coords,da,C,ja,X,O,Aa);X(g.coords,da,g.coords.length,Aa,da[Aa],da[Aa+1]);O=g.coords.length/sa-D;O>=ka?g.lengths.push(O):g.coords.length=D*sa;Z+=xa*C}return g.coords.length?g:null};k.getBoundsOptimizedGeometry=function(g,C,X,Z){if(Y.isNone(C)||!C.coords||!C.coords.length)return null;X=p(X,Z);let ka=Z=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,
D=Number.NEGATIVE_INFINITY;if(C&&C.coords){C=C.coords;for(let O=0;O<C.length;O+=X){const da=C[O],ra=C[O+1];Z=Math.min(Z,da);ja=Math.max(ja,da);ka=Math.min(ka,ra);D=Math.max(D,ra)}}g[0]=Z;g[1]=ka;g[2]=ja;g[3]=D;return g};k.getQuantizedArea=function(g,C){const {coords:X,lengths:Z}=g;let ka=g=0;for(let ja=0;ja<Z.length;ja++)ka+=qa(X,g,Z[ja],C),g+=ja;return Math.abs(ka)};k.getQuantizedBoundsOptimizedGeometry=function(g,C,X,Z){X=p(X,Z);const {lengths:ka,coords:ja}=C;Z=C=Number.POSITIVE_INFINITY;let D=
Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,da=0;for(const ra of ka){let sa=ja[da],xa=ja[da+1];C=Math.min(sa,C);Z=Math.min(xa,Z);D=Math.max(sa,D);O=Math.max(xa,O);da+=X;for(let Aa=1;Aa<ra;Aa++,da+=X){const Ba=ja[da],Ia=ja[da+1];sa+=Ba;xa+=Ia;0>Ba&&(C=Math.min(C,sa));0<Ba&&(D=Math.max(D,sa));0>Ia?Z=Math.min(Z,xa):0<Ia&&(O=Math.max(O,xa))}}g[0]=C;g[1]=Z;g[2]=D;g[3]=O;return g};k.getSignedQuantizedRingArea=qa;k.quantizeOptimizedFeatureSet=function(g,C){const {geometryType:X,features:Z,hasM:ka,
hasZ:ja}=C;if(!g)return C;for(let D=0;D<Z.length;D++){const O=Z[D],da=O.weakClone();da.geometry=new n;Q(da.geometry,O.geometry,ka,ja,X,g);O.centroid&&(da.centroid=new n,Q(da.centroid,O.centroid,ka,ja,"esriGeometryPoint",g));Z[D]=da}C.transform=g;return C};k.quantizeOptimizedGeometry=Q;k.quantizeX=y;k.quantizeY=L;k.removeCollinearVectices=function(g,C,X,Z,ka){if(!C||!C.coords||!C.coords.length)return null;X=Ma[X];const {coords:ja,lengths:D}=C;C=q(Z,ka,Z,ka);Z=p(Z,ka);let O=ka=0,da=0,ra=0;for(const Aa of D){O=
ra;C(g.coords,ja,O,ka,ja[ka],ja[ka+1]);ka+=Z;var sa=ja[ka];let Ba=ja[ka+1],Ia=sa,Ha=Ba;var xa=Ba/sa;O+=Z;C(g.coords,ja,O,ka,Ia,Ha);ka+=Z;for(let Ea=2;Ea<Aa;Ea++){sa=ja[ka];Ba=ja[ka+1];const Fa=Ba/sa,Ga=xa===Fa||!isFinite(xa)&&!isFinite(Fa);xa=Ga&&isFinite(Fa)?0<=xa&&0<=Fa||0>=xa&&0>=Fa:0<=Ha&&0<=Ba||0>=Ha&&0>=Ba;Ga&&xa?(Ia+=sa,Ha+=Ba):(Ia=sa,Ha=Ba,O+=Z);C(g.coords,ja,O,ka,Ia,Ha);ka+=Z;xa=Fa}O+=Z;sa=(O-ra)/Z;sa>=X&&(g.lengths[da]=sa,ra=O,da++)}g.coords.length>ra&&(g.coords.length=ra);g.lengths.length>
da&&(g.lengths.length=da);return g.coords.length&&g.lengths.length?g:null};k.removeZMValues=function(g,C,X,Z,ka,ja){const D=p(X,Z);X=q(X,Z,ka,ja);Z=C.coords;g.coords.length=0;g.lengths.length=0;g.lengths.push(...C.lengths);for(C=0;C<Z.length;C+=D)X(g.coords,Z,g.coords.length,C,Z[C],Z[C+1]);return g};k.unquantizeOptimizedFeatureSet=function(g){const {transform:C,features:X,hasM:Z,hasZ:ka}=g;if(!C)return g;for(const ja of X)Y.isSome(ja.geometry)&&oa(ja.geometry,ja.geometry,Z,ka,C),Y.isSome(ja.centroid)&&
oa(ja.centroid,ja.centroid,Z,ka,C);g.transform=null;return g};k.unquantizeOptimizedGeometry=oa;k.unquantizeX=R;k.unquantizeY=l;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,d,ca){let Y=function(){function x(z=null,n={},p,q){this.geometry=z;this.attributes=n;this.centroid=p;this.objectId=q;this.geohashY=this.geohashX=
this.displayId=0}x.prototype.weakClone=function(){const z=new x(this.geometry,this.attributes,this.centroid,this.objectId);z.displayId=this.displayId;z.geohashX=this.geohashX;z.geohashY=this.geohashY;return z};return x}(),t=function(x){function z(){return x.apply(this,arguments)||this}d._inheritsLoose(z,x);return z}(Y);k.OptimizedFeature=Y;k.OptimizedFeatureWithGeometry=t;k.hasGeometry=function(x){return!(ca.isNone(x.geometry)||!x.geometry.coords||!x.geometry.coords.length)};Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const d=
new k;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;
return d};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function d(Y=[],t=[],x=!1){this.lengths=null!=Y?Y:[];this.coords=null!=t?t:[];this.hasIndeterminateRingOrder=x}d.fromRect=function(Y){const [t,x,z,n]=Y;Y=z-t;const p=n-x;return new d([5],[t,x,Y,0,0,p,-Y,0,0,-p])};var ca=d.prototype;ca.forEachVertex=function(Y){let t=0;this.lengths.length||Y(this.coords[0],this.coords[1]);for(let x=0;x<this.lengths.length;x++){const z=
this.lengths[x];for(let n=0;n<z;n++)Y(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=z}};ca.clone=function(Y){return Y?(Y.set(this.coords),new d(this.lengths.slice(),Y,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Y,t)=>Y+t)}}]);return d}()})},
"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(k){k.findLastObjectIdFromFeatures=function(d,ca){let Y=0;for(const x of ca){var t;ca=null==(t=x.attributes)?void 0:t[d];"number"===typeof ca&&isFinite(ca)&&(Y=Math.max(Y,ca))}return Y};k.initialObjectId=1;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q){return function(){function y(R){this.geometryInfo=R;this._boundsStore=new p.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ca;this.featureAdapter=q.optimizedFeatureQueryEngineAdapter}var L=y.prototype;L.add=function(R){this._add(R);this._emitChanged()};L.addMany=function(R){for(const l of R)this._add(l);this._emitChanged()};L.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};L.removeById=function(R){R=
this._featuresById.get(R);if(!R)return null;this._remove(R);this._emitChanged();return R};L.removeManyById=function(R){this._boundsStore.invalidateIndex();for(const l of R)(R=this._featuresById.get(l))&&this._remove(R);this._emitChanged()};L.forEachBounds=function(R,l,M){for(const c of R)(R=this._boundsStore.get(c.objectId))&&l(x.fromRect(M,R))};L.getFeature=function(R){return this._featuresById.get(R)};L.has=function(R){return this._featuresById.has(R)};L.toArray=function(){return Array.from(this._featuresById.values())};
L.forEach=function(R){this._featuresById.forEach(l=>R(l))};L.forEachInBounds=function(R,l){this._boundsStore.forEachInBounds(R,M=>{l(this._featuresById.get(M))})};L.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};L.sweep=function(){let R=!1;this._featuresById.forEach((l,M)=>{this._markedIds.has(M)||(R=!0,this._remove(l))});this._markedIds.clear();R&&this._emitChanged()};L._emitChanged=function(){this.events.emit("changed",void 0)};L._add=function(R){if(R){var l=
R.objectId;if(null==l)Y.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature","feature id is missing",{feature:R}));else{var M=this._featuresById.get(l);this._markedIds.add(l);if(M){R.displayId=M.displayId;var c=this._boundsStore.get(l);this._boundsStore.delete(l)}else if(t.isSome(this.onFeatureAdd))this.onFeatureAdd(R);!t.isNone(R.geometry)&&R.geometry.coords&&R.geometry.coords.length?(c=n.getBoundsOptimizedGeometry(t.isSome(c)?c:z.create(),R.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),t.isSome(c)&&this._boundsStore.set(l,c)):this._boundsStore.set(l,null);this._featuresById.set(l,R)}}};L._remove=function(R){if(t.isSome(this.onFeatureRemove))this.onFeatureRemove(R);this._markedIds.delete(R.objectId);this._boundsStore.delete(R.objectId);this._featuresById.delete(R.objectId);return R};k._createClass(y,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let R=0;this._featuresById.forEach(l=>{t.isSome(l.geometry)&&l.geometry.coords&&(R+=l.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:R/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return y}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,d,ca,Y,t){let x=function(){function z(){this._emitter=new z.EventEmitter(this)}var n=z.prototype;n.emit=function(p,q){return this._emitter.emit(p,q)};n.on=function(p,q){return this._emitter.on(p,q)};n.once=function(p,q){return this._emitter.once(p,q)};n.hasEventListener=function(p){return this._emitter.hasEventListener(p)};return z}();(function(z){let n=function(){function q(L=null){this.target=L;this._listenersMap=null}
var y=q.prototype;y.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};y.emit=function(L,R){L=this._listenersMap&&this._listenersMap.get(L);if(!L)return!1;const l=this.target||this;[...L].forEach(M=>{M.call(l,R)});return 0<L.length};y.on=function(L,R){if(Array.isArray(L)){var l=L.map(M=>this.on(M,R));return Y.handlesGroup(l)}if(L.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);l=this._listenersMap.get(L)||[];l.push(R);this._listenersMap.set(L,l);return{remove:()=>{const M=this._listenersMap&&this._listenersMap.get(L)||[],c=M.indexOf(R);0<=c&&M.splice(c,1)}}};y.once=function(L,R){const l=this.on(L,M=>{l.remove();R.call(null,M)});return l};y.hasEventListener=function(L){L=this._listenersMap&&this._listenersMap.get(L);return null!=L&&0<L.length};return q}();z.EventEmitter=n;z.EventedMixin=q=>{q=function(y){function L(){var l=y.apply(this,arguments)||
this;l._emitter=new n;return l}k._inheritsLoose(L,y);var R=L.prototype;R.destroy=function(){this._emitter.clear()};R.emit=function(l,M){return this._emitter.emit(l,M)};R.on=function(l,M){return this._emitter.on(l,M)};R.once=function(l,M){return this._emitter.once(l,M)};R.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return L}(q);return q=d.__decorate([t.subclass("esri.core.Evented")],q)};let p=function(q){function y(){var R=q.apply(this,arguments)||this;R._emitter=new x.EventEmitter(k._assertThisInitialized(R));
return R}k._inheritsLoose(y,q);var L=y.prototype;L.destroy=function(){this._emitter.clear()};L.emit=function(R,l){return this._emitter.emit(R,l)};L.on=function(R,l){return this._emitter.on(R,l)};L.once=function(R,l){return this._emitter.once(R,l)};L.hasEventListener=function(R){return this._emitter.hasEventListener(R)};return y}(ca);p=d.__decorate([t.subclass("esri.core.Evented")],p);z.EventedAccessor=p})(x||(x={}));return x})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe",
"../Extent","./aaBoundingRect"],function(k,d,ca,Y){function t(c=l){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function x(c,h,K,W,r,w,u=t()){u[0]=c;u[1]=h;u[2]=K;u[3]=W;u[4]=r;u[5]=w;return u}function z(c){return c[0]>=c[3]?0:c[3]-c[0]}function n(c){return c[1]>=c[4]?0:c[4]-c[1]}function p(c){return c[2]>=c[5]?0:c[5]-c[2]}function q(c,h){return Math.max(h[0],c[0])<=Math.min(h[3],c[3])&&Math.max(h[1],c[1])<=Math.min(h[4],c[4])&&Math.max(h[2],c[2])<=Math.min(h[5],c[5])}function y(c,h){c[0]=h[0];c[1]=h[1];
c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=h[5];return c}function L(c){return 6===c.length}const R=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],l=[0,0,0,0,0,0],M=t();k.NEGATIVE_INFINITY=R;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=l;k.allFinite=function(c){for(let h=0;6>h;h++)if(!isFinite(c[h]))return!1;return!0};k.center=function(c,h=[0,0,0]){h[0]=c[0]+z(c)/2;h[1]=c[1]+n(c)/2;h[2]=c[2]+p(c)/2;return h};k.contains=function(c,h){return h[0]>=c[0]&&h[1]>=
c[1]&&h[2]>=c[2]&&h[3]<=c[3]&&h[4]<=c[4]&&h[5]<=c[5]};k.containsPoint=function(c,h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[0]<=c[3]&&h[1]<=c[4]&&h[2]<=c[5]};k.containsPointWithMargin=function(c,h,K){return h[0]>=c[0]-K&&h[1]>=c[1]-K&&h[2]>=c[2]-K&&h[0]<=c[3]+K&&h[1]<=c[4]+K&&h[2]<=c[5]+K};k.create=t;k.depth=n;k.diameter=function(c){const h=z(c),K=p(c);c=n(c);return Math.sqrt(h*h+K*K+c*c)};k.empty=function(c){return c?y(c,R):t(R)};k.equals=function(c,h,K){if(d.isNone(c)||d.isNone(h))return c===
h;if(!L(c)||!L(h))return!1;if(K)for(let W=0;W<c.length;W++){if(!K(c[W],h[W]))return!1}else for(K=0;K<c.length;K++)if(c[K]!==h[K])return!1;return!0};k.expandWithAABB=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[3]);c[4]=Math.max(c[4],h[4]);c[5]=Math.max(c[5],h[5])};k.expandWithBuffer=function(c,h,K=0,W=h.length/3){let r=c[0],w=c[1],u=c[2],F=c[3],J=c[4],P=c[5];for(let ha=0;ha<W;ha++)r=Math.min(r,h[K+3*ha]),w=Math.min(w,h[K+3*ha+1]),u=
Math.min(u,h[K+3*ha+2]),F=Math.max(F,h[K+3*ha]),J=Math.max(J,h[K+3*ha+1]),P=Math.max(P,h[K+3*ha+2]);c[0]=r;c[1]=w;c[2]=u;c[3]=F;c[4]=J;c[5]=P};k.expandWithNestedArray=function(c,h,K){const W=h.length;let r=c[0],w=c[1],u=c[2],F=c[3],J=c[4],P=c[5];if(K)for(K=0;K<W;K++){var ha=h[K];r=Math.min(r,ha[0]);w=Math.min(w,ha[1]);u=Math.min(u,ha[2]);F=Math.max(F,ha[0]);J=Math.max(J,ha[1]);P=Math.max(P,ha[2])}else for(K=0;K<W;K++)ha=h[K],r=Math.min(r,ha[0]),w=Math.min(w,ha[1]),F=Math.max(F,ha[0]),J=Math.max(J,
ha[1]);c[0]=r;c[1]=w;c[2]=u;c[3]=F;c[4]=J;c[5]=P};k.expandWithOffset=function(c,h,K,W){c[0]=Math.min(c[0],c[0]+h);c[3]=Math.max(c[3],c[3]+h);c[1]=Math.min(c[1],c[1]+K);c[4]=Math.max(c[4],c[4]+K);c[2]=Math.min(c[2],c[2]+W);c[5]=Math.max(c[5],c[5]+W)};k.expandWithRect=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[3]=Math.max(c[3],h[2]);c[4]=Math.max(c[4],h[3])};k.expandWithVec3=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],
h[0]);c[4]=Math.max(c[4],h[1]);c[5]=Math.max(c[5],h[2])};k.fromExtent=function(c,h=t()){h[0]=c.xmin;h[1]=c.ymin;h[2]=c.zmin;h[3]=c.xmax;h[4]=c.ymax;h[5]=c.zmax;return h};k.fromMinMax=function(c,h,K=t()){K[0]=c[0];K[1]=c[1];K[2]=c[2];K[3]=h[0];K[4]=h[1];K[5]=h[2];return K};k.fromRect=function(c,h){c[0]=h[0];c[1]=h[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=h[2];c[4]=h[3];c[5]=Number.POSITIVE_INFINITY;return c};k.fromValues=x;k.getMax=function(c,h){h[0]=c[3];h[1]=c[4];h[2]=c[5];return h};k.getMin=function(c,
h){h[0]=c[0];h[1]=c[1];h[2]=c[2];return h};k.height=p;k.intersects=q;k.intersectsClippingArea=function(c,h){return d.isNone(h)?!0:q(c,h)};k.is=L;k.isPoint=function(c){return 0===z(c)&&0===n(c)&&0===p(c)};k.maximumDimension=function(c){return Math.max(z(c),p(c),n(c))};k.offset=function(c,h,K,W,r=c){r[0]=c[0]+h;r[1]=c[1]+K;r[2]=c[2]+W;r[3]=c[3]+h;r[4]=c[4]+K;r[5]=c[5]+W;return r};k.scale=function(c,h,K=c){const W=c[0]+z(c)/2,r=c[1]+n(c)/2,w=c[2]+p(c)/2;K[0]=W+(c[0]-W)*h;K[1]=r+(c[1]-r)*h;K[2]=w+(c[2]-
w)*h;K[3]=W+(c[3]-W)*h;K[4]=r+(c[4]-r)*h;K[5]=w+(c[5]-w)*h;return K};k.set=y;k.setMax=function(c,h,K=c){K[3]=h[0];K[4]=h[1];K[5]=h[2];K!==c&&(K[0]=c[0],K[1]=c[1],K[2]=c[2]);return c};k.setMin=function(c,h,K=c){K[0]=h[0];K[1]=h[1];K[2]=h[2];K!==c&&(K[3]=c[3],K[4]=c[4],K[5]=c[5]);return K};k.size=function(c,h=[0,0,0]){h[0]=z(c);h[1]=n(c);h[2]=p(c);return h};k.toExtent=function(c,h){return isFinite(c[2])||isFinite(c[5])?new ca({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:h}):
new ca({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:h})};k.toRect=function(c,h){h||(h=Y.create());h[0]=c[0];h[1]=c[1];h[2]=c[3];h[3]=c[4];return h};k.width=z;k.wrap=function(c,h,K,W,r,w){return x(c,h,K,W,r,w,M)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,d,ca,Y,t){function x(l=R){return[l[0],
l[1],l[2],l[3]]}function z(l,M){l!==M&&(l[0]=M[0],l[1]=M[1],l[2]=M[2],l[3]=M[3]);return l}function n(l){return Y.isNone(l)||l[0]>=l[2]?0:l[2]-l[0]}function p(l){return l[1]>=l[3]?0:l[3]-l[1]}function q(l,M,c){return M>=l[0]&&c>=l[1]&&M<=l[2]&&c<=l[3]}function y(l){return null!=l&&4===l.length}const L=[Infinity,Infinity,-Infinity,-Infinity],R=[0,0,0,0];k.NEGATIVE_INFINITY=L;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=R;k.allFinite=function(l){for(let M=0;4>M;M++)if(!isFinite(l[M]))return!1;
return!0};k.area=function(l){return n(l)*p(l)};k.center=function(l,M=[0,0]){M[0]=(l[0]+l[2])/2;M[1]=(l[1]+l[3])/2;return M};k.clone=function(l){return[l[0],l[1],l[2],l[3]]};k.contains=function(l,M){return M[0]>=l[0]&&M[2]<=l[2]&&M[1]>=l[1]&&M[3]<=l[3]};k.containsPoint=function(l,M){return q(l,M[0],M[1])};k.containsPointObject=function(l,M){return q(l,M.x,M.y)};k.containsPointWithMargin=function(l,M,c){return M[0]>=l[0]-c&&M[1]>=l[1]-c&&M[0]<=l[2]+c&&M[1]<=l[3]+c};k.containsXY=q;k.containsXYWithMargin=
function(l,M,c,h){return M>=l[0]-h&&c>=l[1]-h&&M<=l[2]+h&&c<=l[3]+h};k.copy=z;k.create=x;k.distance=function(l,M){const c=(l[1]+l[3])/2,h=Math.max(Math.abs(M[0]-(l[0]+l[2])/2)-n(l)/2,0);l=Math.max(Math.abs(M[1]-c)-p(l)/2,0);return Math.sqrt(h*h+l*l)};k.empty=function(l){return l?z(l,L):x(L)};k.equals=function(l,M){return y(l)&&y(M)?l[0]===M[0]&&l[1]===M[1]&&l[2]===M[2]&&l[3]===M[3]:l===M};k.expand=function(l,M,c){if(Y.isNone(M))z(c,l);else if("length"in M)if(y(M))c[0]=Math.min(l[0],M[0]),c[1]=Math.min(l[1],
M[1]),c[2]=Math.max(l[2],M[2]),c[3]=Math.max(l[3],M[3]);else{if(2===M.length||3===M.length)c[0]=Math.min(l[0],M[0]),c[1]=Math.min(l[1],M[1]),c[2]=Math.max(l[2],M[0]),c[3]=Math.max(l[3],M[1])}else switch(M.type){case "extent":c[0]=Math.min(l[0],M.xmin);c[1]=Math.min(l[1],M.ymin);c[2]=Math.max(l[2],M.xmax);c[3]=Math.max(l[3],M.ymax);break;case "point":c[0]=Math.min(l[0],M.x),c[1]=Math.min(l[1],M.y),c[2]=Math.max(l[2],M.x),c[3]=Math.max(l[3],M.y)}};k.expandPointInPlace=function(l,M){M[0]<l[0]&&(l[0]=
M[0]);M[0]>l[2]&&(l[2]=M[0]);M[1]<l[1]&&(l[1]=M[1]);M[1]>l[3]&&(l[3]=M[1])};k.expandWithNestedArray=function(l,M,c=l){const h=M.length;let K=l[0],W=l[1],r=l[2];l=l[3];for(let w=0;w<h;w++){const u=M[w];K=Math.min(K,u[0]);W=Math.min(W,u[1]);r=Math.max(r,u[0]);l=Math.max(l,u[1])}c[0]=K;c[1]=W;c[2]=r;c[3]=l;return c};k.fromExtent=function(l,M=x()){M[0]=l.xmin;M[1]=l.ymin;M[2]=l.xmax;M[3]=l.ymax;return M};k.fromValues=function(l,M,c,h,K=x()){K[0]=l;K[1]=M;K[2]=c;K[3]=h;return K};k.height=p;k.intersection=
function(l,M,c){if(Y.isNone(M))return z(c,l);const h=M[0],K=M[1],W=M[2];M=M[3];c[0]=ca.clamp(l[0],h,W);c[1]=ca.clamp(l[1],K,M);c[2]=ca.clamp(l[2],h,W);c[3]=ca.clamp(l[3],K,M);return c};k.intersects=function(l,M){return Math.max(M[0],l[0])<=Math.min(M[2],l[2])&&Math.max(M[1],l[1])<=Math.min(M[3],l[3])};k.intersectsSegment=function(l,M,c){const h=l[0],K=l[1],W=l[2];l=l[3];const {x:r,y:w}=M,{x:u,y:F}=c;var J=(ha,E)=>0>(F-w)*ha+(r-u)*E+(u*w-r*F);M=J(h,l);c=J(W,l);const P=J(W,K);J=J(h,K);return M===c&&
c===P&&P===J&&J===M||r<h&&u<h||r>W&&u>W||w>l&&F>l||w<K&&F<K?!1:!0};k.intersectsSphere=function(l,M){const c=M[3];var h=Math.abs(M[0]-.5*(l[0]+l[2]));const K=.5*(l[2]-l[0]);if(h>c+K)return!1;var W=.5*(l[3]-l[1]);l=Math.abs(M[1]-.5*(l[1]+l[3]));if(l>c+W)return!1;if(h<K||l<W)return!0;h-=K;W=l-W;return h*h+W*W<=c*c};k.is=y;k.isPoint=function(l){return(0===n(l)||!isFinite(l[0]))&&(0===p(l)||!isFinite(l[1]))};k.offset=function(l,M,c,h=l){h[0]=l[0]+M;h[1]=l[1]+c;h[2]=l[2]+M;h[3]=l[3]+c;return h};k.pad=function(l,
M,c=l){c[0]=l[0]-M;c[1]=l[1]-M;c[2]=l[2]+M;c[3]=l[3]+M;return c};k.setMax=function(l,M,c=l){c[2]=M[0];c[3]=M[1];c!==l&&(c[0]=l[0],c[1]=l[1]);return l};k.setMin=function(l,M,c=l){c[0]=M[0];c[1]=M[1];c!==l&&(c[2]=l[2],c[3]=l[3]);return c};k.size=function(l,M){M[0]=l[2]-l[0];M[1]=l[3]-l[1]};k.toExtent=function(l,M){return new t({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:M})};k.width=n;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(k,d,ca,Y,t){function x(p,q,y){z.minX=q[0];z.minY=q[1];z.maxX=q[2];z.maxY=q[3];p.search(z,y)}const z={minX:0,minY:0,maxX:0,maxY:0};let n=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Y.PooledRBush(9,ca("esri-csp-restrictions")?y=>({minX:y[0],minY:y[1],maxX:y[2],
maxY:y[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const y=Array(this._idByBounds.size);let L=0;this._idByBounds.forEach((R,l)=>{y[L++]=l});this._indexInvalid=!1;this._index.clear();this._index.load(y)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(y=>this._idByBounds.has(y))),this._boundsToLoad.length=0)}}var q=p.prototype;q.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();
this._index.clear()};q.delete=function(y){const L=this._boundsById.get(y);this._boundsById.delete(y);L&&(this._idByBounds.delete(L),this._indexInvalid||this._index.remove(L))};q.forEachInBounds=function(y,L){this._loadIndex();x(this._index,y,R=>L(this._idByBounds.get(R)))};q.get=function(y){return this._boundsById.get(y)};q.has=function(y){return this._boundsById.has(y)};q.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};q.set=function(y,L){if(!this._indexInvalid){const R=
this._boundsById.get(y);R&&(this._index.remove(R),this._idByBounds.delete(R))}this._boundsById.set(y,L);L&&(this._idByBounds.set(L,y),this._indexInvalid||(this._boundsToLoad.push(L),5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const y=t.empty();for(const L of this._boundsById.values())L&&(y[0]=Math.min(L[0],y[0]),y[1]=Math.min(L[1],y[1]),y[2]=Math.max(L[2],y[2]),y[3]=Math.max(L[3],y[3]));return y}},{key:"valid",
get:function(){return!this._indexInvalid}}]);return p}();k.BoundsStore=n;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,d,ca,Y,t,x){function z(P,ha){n(P,0,P.children.length,ha,P)}function n(P,ha,E,G,U){U||(U=new F([]));U.minX=Infinity;U.minY=Infinity;U.maxX=
-Infinity;U.maxY=-Infinity;for(let S=ha,H;S<E;S++)H=P.children[S],p(U,P.leaf?G(H):H);return U}function p(P,ha){P.minX=Math.min(P.minX,ha.minX);P.minY=Math.min(P.minY,ha.minY);P.maxX=Math.max(P.maxX,ha.maxX);P.maxY=Math.max(P.maxY,ha.maxY)}function q(P,ha){return P.minX-ha.minX}function y(P,ha){return P.minY-ha.minY}function L(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function R(P){return P.maxX-P.minX+(P.maxY-P.minY)}function l(P,ha){return P.minX<=ha.minX&&P.minY<=ha.minY&&ha.maxX<=P.maxX&&ha.maxY<=
P.maxY}function M(P,ha){return ha.minX<=P.maxX&&ha.minY<=P.maxY&&ha.maxX>=P.minX&&ha.maxY>=P.minY}function c(P,ha,E,G,U){for(ha=[ha,E];ha.length;){E=Y.assumeNonNull(ha.pop());const S=Y.assumeNonNull(ha.pop());if(E-S<=G)continue;const H=S+Math.ceil((E-S)/G/2)*G;x.quickselect(P,H,S,E,U);ha.push(S,H,H,E)}}let h=function(){function P(E=9,G){this.compareMinX=q;this.compareMinY=y;this._toBBox=U=>U;this._maxEntries=Math.max(4,E||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));G&&("function"===
typeof G?this._toBBox=G:this._initFormat(G));this.clear()}var ha=P.prototype;ha.destroy=function(){this.clear();K.prune();W.prune();r.prune();w.prune()};ha.all=function(E){this._all(this.data,E)};ha.search=function(E,G){let U=this.data;const S=this._toBBox;if(M(E,U))for(K.clear();U;){for(let H=0,A=U.children.length;H<A;H++){const f=U.children[H],I=U.leaf?S(f):f;M(E,I)&&(U.leaf?G(f):l(E,I)?this._all(f,G):K.push(f))}U=K.pop()}};ha.collides=function(E){let G=this.data;const U=this._toBBox;if(!M(E,G))return!1;
for(K.clear();G;){for(let S=0,H=G.children.length;S<H;S++){const A=G.children[S],f=G.leaf?U(A):A;if(M(E,f)){if(G.leaf||l(E,f))return!0;K.push(A)}}G=K.pop()}return!1};ha.load=function(E){if(!E.length)return this;if(E.length<this._minEntries){for(let G=0,U=E.length;G<U;G++)this.insert(E[G]);return this}E=this._build(E.slice(0,E.length),0,E.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){const G=this.data;this.data=
E;E=G}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this};ha.insert=function(E){E&&this._insert(E,this.data.height-1);return this};ha.clear=function(){this.data=new F([]);return this};ha.remove=function(E){if(!E)return this;let G=this.data,U=null,S=0,H=!1,A;const f=this._toBBox(E);r.clear();for(w.clear();G||0<r.length;){if(!G){var I;G=Y.assumeNonNull(r.pop());U=r.data[r.length-1];S=null!=(I=w.pop())?I:0;H=!0}if(G.leaf&&(A=ca.indexOf(G.children,E,G.children.length,G.indexHint),
-1!==A)){G.children.splice(A,1);r.push(G);this._condense(r);break}H||G.leaf||!l(G,f)?U?(S++,G=U.children[S],H=!1):G=null:(r.push(G),w.push(S),S=0,U=G,G=G.children[0])}return this};ha.toJSON=function(){return this.data};ha.fromJSON=function(E){this.data=E;return this};ha._all=function(E,G){for(W.clear();E;){var U;if(!0===E.leaf)for(const S of E.children)G(S);else W.pushArray(E.children);E=null!=(U=W.pop())?U:null}};ha._build=function(E,G,U,S){var H=U-G+1,A=this._maxEntries;if(H<=A)return E=new F(E.slice(G,
U+1)),z(E,this._toBBox),E;S||(S=Math.ceil(Math.log(H)/Math.log(A)),A=Math.ceil(H/A**(S-1)));const f=new J([]);f.height=S;H=Math.ceil(H/A);A=H*Math.ceil(Math.sqrt(A));for(c(E,G,U,A,this.compareMinX);G<=U;G+=A){const I=Math.min(G+A-1,U);c(E,G,I,H,this.compareMinY);for(let T=G;T<=I;T+=H)f.children.push(this._build(E,T,Math.min(T+H-1,I),S-1))}z(f,this._toBBox);return f};ha._chooseSubtree=function(E,G,U,S){for(;;){S.push(G);if(!0===G.leaf||S.length-1===U)break;let H=Infinity,A=Infinity,f=void 0;for(let I=
0,T=G.children.length;I<T;I++){const N=G.children[I],ea=L(N),ma=(Math.max(N.maxX,E.maxX)-Math.min(N.minX,E.minX))*(Math.max(N.maxY,E.maxY)-Math.min(N.minY,E.minY))-ea;ma<A?(A=ma,H=ea<H?ea:H,f=N):ma===A&&ea<H&&(H=ea,f=N)}G=f||G.children[0]}return G};ha._insert=function(E,G,U){var S=this._toBBox;U=U?E:S(E);r.clear();S=this._chooseSubtree(U,this.data,G,r);S.children.push(E);for(p(S,U);0<=G;)if(r.data[G].children.length>this._maxEntries)this._split(r,G),G--;else break;this._adjustParentBBoxes(U,r,G)};
ha._split=function(E,G){const U=E.data[G];var S=U.children.length;const H=this._minEntries;this._chooseSplitAxis(U,H,S);(S=this._chooseSplitIndex(U,H,S))?(S=U.children.splice(S,U.children.length-S),S=U.leaf?new F(S):new J(S),S.height=U.height,z(U,this._toBBox),z(S,this._toBBox),G?E.data[G-1].children.push(S):this._splitRoot(U,S)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ha._splitRoot=function(E,G){this.data=new J([E,G]);this.data.height=E.height+1;z(this.data,
this._toBBox)};ha._chooseSplitIndex=function(E,G,U){let S,H,A=void 0;S=H=Infinity;for(let I=G;I<=U-G;I++){var f=n(E,0,I,this._toBBox);const T=n(E,I,U,this._toBBox),N=Math.max(0,Math.min(f.maxX,T.maxX)-Math.max(f.minX,T.minX))*Math.max(0,Math.min(f.maxY,T.maxY)-Math.max(f.minY,T.minY));f=L(f)+L(T);N<S?(S=N,A=I,H=f<H?f:H):N===S&&f<H&&(H=f,A=I)}return A};ha._chooseSplitAxis=function(E,G,U){const S=E.leaf?this.compareMinX:q,H=E.leaf?this.compareMinY:y,A=this._allDistMargin(E,G,U,S);G=this._allDistMargin(E,
G,U,H);A<G&&E.children.sort(S)};ha._allDistMargin=function(E,G,U,S){E.children.sort(S);S=this._toBBox;var H=n(E,0,G,S);const A=n(E,U-G,U,S);let f=R(H)+R(A);for(let I=G;I<U-G;I++){const T=E.children[I];p(H,E.leaf?S(T):T);f+=R(H)}for(U=U-G-1;U>=G;U--)H=E.children[U],p(A,E.leaf?S(H):H),f+=R(A);return f};ha._adjustParentBBoxes=function(E,G,U){for(;0<=U;U--)p(G.data[U],E)};ha._condense=function(E){for(let G=E.length-1;0<=G;G--){const U=E.data[G];if(0===U.children.length)if(0<G){const S=E.data[G-1],H=S.children;
H.splice(ca.indexOf(H,U,H.length,S.indexHint),1)}else this.clear();else z(U,this._toBBox)}};ha._initFormat=function(E){const G=["return a"," - b",";"];this.compareMinX=new Function("a","b",G.join(E[0]));this.compareMinY=new Function("a","b",G.join(E[1]));this._toBBox=new Function("a","return {minX: a"+E[0]+", minY: a"+E[1]+", maxX: a"+E[2]+", maxY: a"+E[3]+"};")};return P}();const K=new t,W=new t,r=new t,w=new t({deallocator:void 0});t=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};
let u=function(P){function ha(){var E=P.apply(this,arguments)||this;E.height=1;E.indexHint=new ca.PositionHint;return E}d._inheritsLoose(ha,P);return ha}(t),F=function(P){function ha(E){var G=P.call(this)||this;G.children=E;G.leaf=!0;return G}d._inheritsLoose(ha,P);return ha}(u),J=function(P){function ha(E){var G=P.call(this)||this;G.children=E;G.leaf=!1;return G}d._inheritsLoose(ha,P);return ha}(u);k.BBox=t;k.PooledRBush=h;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/quickselect":function(){define(["exports"],function(k){var d={exports:{}};(function(ca){(function(Y){Y=Y();void 0!==Y&&(ca.exports=Y)})(function(){function Y(z,n,p,q,y){for(;q>p;){if(600<q-p){var L=q-p+1,R=n-p+1,l=Math.log(L),M=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*M*(L-M)/L)*(0>R-L/2?-1:1);Y(z,n,Math.max(p,Math.floor(n-R*M/L+l)),Math.min(q,Math.floor(n+(L-R)*M/L+l)),y)}L=z[n];R=p;M=q;t(z,p,n);for(0<y(z[q],L)&&t(z,p,q);R<M;){t(z,R,M);R++;for(M--;0>y(z[R],L);)R++;for(;0<y(z[M],L);)M--}0===
y(z[p],L)?t(z,p,M):(M++,t(z,M,q));M<=n&&(p=M+1);n<=M&&(q=M-1)}}function t(z,n,p){var q=z[n];z[n]=z[p];z[p]=q}function x(z,n){return z<n?-1:z>n?1:0}return function(z,n,p,q,y){Y(z,n,p||0,q||z.length-1,y||x)}})})(d);k.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,d,ca,Y,t){k.optimizedFeatureQueryEngineAdapter={getObjectId(x){return x.objectId},
getAttributes(x){return x.attributes},getAttribute(x,z){return x.attributes[z]},cloneWithGeometry(x,z){return new Y.OptimizedFeature(z,x.attributes,null,x.objectId)},getGeometry(x){return x.geometry},getCentroid(x,z){d.isNone(x.centroid)&&(x.centroid=ca.getCentroidOptimizedGeometry(new t,x.geometry,z.hasZ,z.hasM));return x.centroid}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],
function(k,d){function ca(t,x,z,n,p,q,y=1){q=p?q?4:3:q?3:2;let L=z,R=z+q,l=0,M=0,c=z=0,h=0;for(let K=0,W=n-1;K<W;K++,L+=q,R+=q){n=x[L];const r=x[L+1],w=x[L+2],u=x[R],F=x[R+1],J=x[R+2];let P=n*F-u*r;c+=P;l+=(n+u)*P;M+=(r+F)*P;p&&(P=n*J-u*w,z+=(w+J)*P,h+=P);n<t[0]&&(t[0]=n);n>t[1]&&(t[1]=n);r<t[2]&&(t[2]=r);r>t[3]&&(t[3]=r);p&&(w<t[4]&&(t[4]=w),w>t[5]&&(t[5]=w))}0<c*y&&(c*=-1);0<h*y&&(h*=-1);if(!c)return null;t=[l,M,.5*c];p&&(t[3]=z,t[4]=.5*h);return t}function Y(t,x,z,n,p){p=n?p?4:3:p?3:2;let q=x,
y=x+p,L=0,R=0,l=0,M=0;for(let W=0,r=z-1;W<r;W++,q+=p,y+=p){var c=t[q];const w=t[q+1],u=t[q+2],F=t[y],J=t[y+1],P=t[y+2];if(n){{var h=F-c;var K=J-w;const ha=P-u;h=Math.sqrt(h*h+K*K+ha*ha)}}else h=F-c,K=J-w,h=Math.sqrt(h*h+K*K);h&&(L+=h,n?(c=[c+.5*(F-c),w+.5*(J-w),u+.5*(P-u)],R+=h*c[0],l+=h*c[1],M+=h*c[2]):(c=[c+.5*(F-c),w+.5*(J-w)],R+=h*c[0],l+=h*c[1]))}return 0<L?n?[R/L,l/L,M/L]:[R/L,l/L]:0<z?n?[t[x],t[x+1],t[x+2]]:[t[x],t[x+1]]:null}k.getCentroidOptimizedGeometry=function(t,x,z,n,p){if(d.isNone(x)||
!x.lengths.length)return null;const q="upperLeft"===(null==p?void 0:p.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0);t.coords.length&&(t.coords.length=0);p=t.coords;const y=[],L=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:R,coords:l}=x,M=z?n?4:3:n?3:2;let c=0;for(var h of R){const K=
ca(L,l,c,h,z,n,q);K&&y.push(K);c+=h*M}y.sort((K,W)=>{let r=q*K[2]-q*W[2];0===r&&z&&(r=K[4]-W[4]);return r});y.length&&(h=6*y[0][2],p[0]=y[0][0]/h,p[1]=y[0][1]/h,z&&(h=6*y[0][4],p[2]=0!==h?y[0][3]/h:0),p[0]<L[0]||p[0]>L[1]||p[1]<L[2]||p[1]>L[3]||z&&(p[2]<L[4]||p[2]>L[5]))&&(p.length=0);if(!p.length)if(x=x.lengths[0]?Y(l,0,R[0],z,n):null)p[0]=x[0],p[1]=x[1],z&&2<x.length&&(p[2]=x[2]);else return null;return t};k.lineCentroid=Y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(k,d,ca,Y,t,x,z){function n(c,h){if(!h)return null;if("x"in h){var K={x:0,y:0};[K.x,K.y]=c(h.x,h.y,L);null!=h.z&&(K.z=h.z);null!=h.m&&(K.m=h.m);return K}if("xmin"in h)return K={xmin:0,ymin:0,
xmax:0,ymax:0},[K.xmin,K.ymin]=c(h.xmin,h.ymin,L),[K.xmax,K.ymax]=c(h.xmax,h.ymax,L),h.hasZ&&(K.zmin=h.zmin,K.zmax=h.zmax,K.hasZ=!0),h.hasM&&(K.mmin=h.mmin,K.mmax=h.mmax,K.hasM=!0),K;if("rings"in h)return{rings:p(h.rings,c),hasM:h.hasM,hasZ:h.hasZ};if("paths"in h)return{paths:p(h.paths,c),hasM:h.hasM,hasZ:h.hasZ};if("points"in h)return{points:q(h.points,c),hasM:h.hasM,hasZ:h.hasZ}}function p(c,h){const K=[];for(const W of c)K.push(q(W,h));return K}function q(c,h){const K=[];for(const W of c)c=h(W[0],
W[1],[0,0]),K.push(c),2<W.length&&c.push(W[2]),3<W.length&&c.push(W[3]);return K}function y(){y=d._asyncToGenerator(function*(c,h){h&&(c=Array.isArray(c)?c.map(K=>ca.isSome(K.geometry)&&K.geometry.spatialReference):[c],yield Y.initializeProjection(c.map(K=>({source:K,dest:h}))))});return y.apply(this,arguments)}const L=[0,0],R=n.bind(null,z.lngLatToXY),l=n.bind(null,z.xyToLngLat),M=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var h=c.prototype;
h.push=function(){var K=d._asyncToGenerator(function*(W,r,w){if(!(W&&W.length&&r&&w)||x.equals(r,w))return W;const u={geometries:W,inSpatialReference:r,outSpatialReference:w,resolve:null};this._jobs.push(u);return new Promise(F=>{u.resolve=F;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(W,r,w){return K.apply(this,arguments)}}();h._process=function(){this._timer=null;const K=this._jobs.shift();if(K){var {geometries:W,inSpatialReference:r,outSpatialReference:w,resolve:u}=
K;z.canProject(r,w)?x.isWebMercator(w)?u(W.map(R)):u(W.map(l)):u(Y.projectMany(t.jsonAdapter,W,r,w,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());k.checkProjectionSupport=function(c,h){return y.apply(this,arguments)};k.project=function(c,h,K,W){if(!c)return c;K||(K=h,h=c.spatialReference);return x.isValid(h)&&x.isValid(K)&&!x.equals(h,K)?z.canProject(h,K)?(c=x.isWebMercator(K)?R(c):l(c),c.spatialReference=K,c):Y.projectMany(t.jsonAdapter,[c],h,K,null,W)[0]:
c};k.projectMany=function(c,h,K){return M.push(c,h,K)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l,M,c,h,K,W,r,w,u,F,J,P,ha,E){function G(){return!!Ra&&c.isLoaded()}function U(V){x.isNone(qb)&&(qb=Promise.all([c.load(),(new Promise((fa,ba)=>k(["../chunks/geometryEngineBase"],fa,ba))).then(fa=>fa.geometryEngineBase),new Promise((fa,ba)=>k(["./geometryAdapters/hydrated"],fa,ba))]));return qb.then(([,fa,{hydratedAdapter:ba}])=>{z.throwIfAborted(V);mb=ba;Ra=fa.default;Ra._enableProjection(c.pe);Tb.notify()})}function S(V,fa,ba=null,pa=null){return Array.isArray(V)?
0===V.length?[]:H(mb,V,V[0].spatialReference,fa,ba,pa):H(mb,[V],V.spatialReference,fa,ba,pa)[0]}function H(V,fa,ba,pa,ya=null,za=null){if(x.isNone(ba)||x.isNone(pa))return fa;if(I(ba,pa,ya))return fa.map(Da=>x.unwrap(N(Da,ba,pa)));if(x.isNone(ya)){const Da=J.cacheKey(ba,pa);void 0!==Cb[Da]?ya=Cb[Da]:(ya=A(ba,pa,null),x.isNone(ya)&&(ya=new J),Cb[Da]=ya)}if(x.isNone(Ra))throw new Fb;return x.isSome(za)?Ra._project(V,fa,ba,pa,ya,za):Ra._project(V,fa,ba,pa,ya)}function A(V,fa,ba=null){if(x.isNone(Ra))throw new Fb;
if(x.isNone(V)||x.isNone(fa))return null;V=Ra._getTransformation(mb,V,fa,ba,null==ba?void 0:ba.spatialReference);return null!==V?J.fromGE(V):null}function f(V,fa){try{const ba=S(V,fa);if(null==ba)return null;"xmin"in V&&"xmin"in ba&&(ba.zmin=V.zmin,ba.zmax=V.zmax);const pa=E.getGeometryZScaler(ba.type,V.spatialReference,fa);x.isSome(pa)&&pa(ba);return ba}catch(ba){if(!(ba instanceof Fb))throw ba;return null}}function I(V,fa,ba){return ba?!1:P.equals(V,fa)?!0:P.isValid(V)&&P.isValid(fa)&&!!Ya(V,fa,
Ub)}function T(){T=ca._asyncToGenerator(function*(V,fa,ba,pa){if(G())return z.waitTick(pa);if(Array.isArray(V))for(const {source:ya,dest:za,geographicTransformation:Da}of V){if(!I(ya,za,Da))return U(pa)}else if(!I(V,fa,ba))return U(pa);return z.waitTick(pa)});return T.apply(this,arguments)}function N(V,fa,ba){return V?"x"in V?ea(V,fa,new h,ba,0):"xmin"in V?oa(V,fa,new l,ba,0):"rings"in V?na(V,fa,new K,ba,0):"paths"in V?Q(V,fa,new W,ba,0):"points"in V?ma(V,fa,new M,ba,0):null:null}function ea(V,fa,
ba,pa,ya){Oa[0]=V.x;Oa[1]=V.y;const za=V.z;Oa[2]=void 0!==za?za:ya;if(!Ja(Oa,fa,0,Oa,pa,0,1))return null;ba.x=Oa[0];ba.y=Oa[1];ba.spatialReference=pa;void 0===za?(ba.z=void 0,ba.hasZ=!1):(ba.z=Oa[2],ba.hasZ=!0);void 0===V.m?(ba.m=void 0,ba.hasM=!1):(ba.m=V.m,ba.hasM=!0);return ba}function ma(V,fa,ba,pa,ya){const {points:za,hasZ:Da,hasM:Ka}=V;V=[];const Va=za.length,Ua=[];for(var Ta of za)Ua.push(Ta[0],Ta[1],Da?Ta[2]:ya);if(!Ja(Ua,fa,0,Ua,pa,0,Va))return null;for(fa=0;fa<Va;++fa){ya=3*fa;Ta=Ua[ya];
const cb=Ua[ya+1];Da&&Ka?V.push([Ta,cb,Ua[ya+2],za[fa][3]]):Da?V.push([Ta,cb,Ua[ya+2]]):Ka?V.push([Ta,cb,za[fa][2]]):V.push([Ta,cb])}ba.points=V;ba.spatialReference=pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function Q(V,fa,ba,pa,ya){const {paths:za,hasZ:Da,hasM:Ka}=V;V=[];if(!La(za,Da,Ka,fa,V,pa,ya))return null;ba.paths=V;ba.spatialReference=pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function na(V,fa,ba,pa,ya){const {rings:za,hasZ:Da,hasM:Ka}=V;V=[];if(!La(za,Da,Ka,fa,V,pa,ya))return null;ba.rings=V;ba.spatialReference=
pa;ba.hasZ=Da;ba.hasM=Ka;return ba}function oa(V,fa,ba,pa,ya){const {xmin:za,ymin:Da,xmax:Ka,ymax:Va,hasZ:Ua,hasM:Ta}=V;if(!qa(za,Da,Ua?V.zmin:ya,fa,Oa,pa))return null;ba.xmin=Oa[0];ba.ymin=Oa[1];Ua&&(ba.zmin=Oa[2]);if(!qa(Ka,Va,Ua?V.zmax:ya,fa,Oa,pa))return null;ba.xmax=Oa[0];ba.ymax=Oa[1];Ua&&(ba.zmax=Oa[2]);Ta&&(ba.mmin=V.mmin,ba.mmax=V.mmax);ba.spatialReference=pa;return ba}function qa(V,fa,ba,pa,ya,za){Sa[0]=V;Sa[1]=fa;Sa[2]=ba;return Ja(Sa,pa,0,ya,za,0,1)}function wa(V,fa,ba,pa){if(x.isNone(fa)||
x.isNone(pa)||2>V.length)return!1;2===V.length&&(Sa[0]=V[0],Sa[1]=V[1],Sa[2]=0,V=Sa);return Ja(V,fa,0,ba,pa,0,1)}function Ma(V,fa,ba){if(x.isNone(fa))return!1;fa=ia(fa,rb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(fa))return!1;fa(V,0,Sa,0);ba!==Sa&&(ba[0]=Sa[0],ba[1]=Sa[1],2<ba.length&&(ba[2]=Sa[2]));return!0}function Ja(V,fa,ba,pa,ya,za,Da=1){fa=Ya(fa,ya,Ub);if(x.isNone(fa))return!1;if(fa===g){if(V===pa&&ba===za)return!0;Da=ba+3*Da;for(let Ka=ba,Va=za;Ka<Da;Ka++,Va++)pa[Va]=V[Ka];return!0}Da=
ba+3*Da;for(let Ka=ba,Va=za;Ka<Da;Ka+=3,Va+=3)fa(V,Ka,pa,Va);return!0}function La(V,fa,ba,pa,ya,za,Da=0){const Ka=[];for(const Va of V)for(const Ua of Va)Ka.push(Ua[0],Ua[1],fa?Ua[2]:Da);if(!Ja(Ka,pa,0,Ka,za,0,Ka.length/3))return!1;pa=0;ya.length=0;for(const Va of V){V=[];for(const Ua of Va)fa&&ba?V.push([Ka[pa++],Ka[pa++],Ka[pa++],Ua[3]]):fa?V.push([Ka[pa++],Ka[pa++],Ka[pa++]]):(ba?V.push([Ka[pa++],Ka[pa++],Ua[2]]):V.push([Ka[pa++],Ka[pa++]]),pa++);ya.push(V)}return!0}function Za(V,fa,ba,pa){fa=
pa+fa;if(fa<pa/2||ba>fa)return Number.MAX_VALUE;V=Math.abs(lb*V)+Math.asin(ba/fa);return V>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(V)}function b(V,fa,ba){const pa=Math.sin(V);V=Math.cos(V);const ya=Math.sin(fa);fa=Math.cos(fa);ba[0]=-pa;ba[4]=-ya*V;ba[8]=fa*V;ba[12]=0;ba[1]=V;ba[5]=-ya*pa;ba[9]=fa*pa;ba[13]=0;ba[2]=0;ba[6]=fa;ba[10]=ya;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function m(V,fa,ba){b(V,fa,ba);y.transpose(ba,ba);return ba}function ia(V,fa){if(fa.spatialReference===V)return fa.spatialReferenceId;
fa.spatialReference=V;"metersPerUnit"in fa&&(fa.metersPerUnit=n.getMetersPerUnitForSR(V,1));return V.wkt===r.SphericalECEFSpatialReference.wkt?fa.spatialReferenceId=la.SPHERICAL_ECEF:P.isWGS84(V)?fa.spatialReferenceId=la.WGS84:P.isWebMercator(V)?fa.spatialReferenceId=la.WEB_MERCATOR:P.isPlateCarree(V)?fa.spatialReferenceId=la.PLATE_CARREE:V.wkt===r.WGS84ECEFSpatialReference.wkt?fa.spatialReferenceId=la.WGS84_ECEF:V.wkid===ha.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=la.CGCS2000:V.wkt===r.SphericalPCPFMars.wkt?
fa.spatialReferenceId=la.SPHERICAL_MARS_PCPF:V.wkt===r.SphericalPCPFMoon.wkt?fa.spatialReferenceId=la.SPHERICAL_MOON_PCPF:P.isMars(V)?fa.spatialReferenceId=la.GCSMARS2000:P.isMoon(V)?fa.spatialReferenceId=la.GCSMOON2000:fa.spatialReferenceId=la.UNKNOWN}function g(V,fa,ba,pa){V!==ba&&(ba[pa++]=V[fa++],ba[pa++]=V[fa++],ba[pa]=V[fa])}function C(V,fa,ba,pa){ba[pa++]=wb*(V[fa++]/u.earth.radius);ba[pa++]=wb*(Math.PI/2-2*Math.atan(Math.exp(-V[fa++]/u.earth.radius)));ba[pa]=V[fa]}function X(V,fa,ba,pa){C(V,
fa,ba,pa);Aa(ba,pa,ba,pa)}function Z(V,fa,ba,pa){C(V,fa,ba,pa);Qa(ba,pa,ba,pa)}function ka(V,fa,ba,pa,ya){var za=.4999999*Math.PI;za=t.clamp(lb*V[fa+1],-za,za);za=Math.sin(za);ba[pa++]=lb*V[fa]*ya.radius;ba[pa++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));ba[pa]=V[fa+2]}function ja(V,fa,ba,pa){ka(V,fa,ba,pa,u.earth)}function D(V,fa,ba,pa){ba[pa]=V[fa]*Vb;ba[pa+1]=V[fa+1]*Vb;ba[pa+2]=V[fa+2]}function O(V,fa,ba,pa){ba[pa]=V[fa]*Db;ba[pa+1]=V[fa+1]*Db;ba[pa+2]=V[fa+2]}function da(V,fa,ba,pa){C(V,fa,
ba,pa);D(ba,pa,ba,pa)}function ra(V,fa,ba,pa,ya){ya+=V[fa+2];const za=lb*V[fa+1];V=lb*V[fa];fa=Math.cos(za);ba[pa++]=Math.cos(V)*fa*ya;ba[pa++]=Math.sin(V)*fa*ya;ba[pa]=Math.sin(za)*ya}function sa(V,fa,ba,pa){ra(V,fa,ba,pa,u.moon.radius)}function xa(V,fa,ba,pa){ra(V,fa,ba,pa,u.mars.radius)}function Aa(V,fa,ba,pa){ra(V,fa,ba,pa,u.earth.radius)}function Ba(V,fa,ba,pa,ya){var za=V[fa];const Da=V[fa+1];fa=V[fa+2];V=Math.sqrt(za*za+Da*Da+fa*fa);fa=t.asinClamped(fa/(0===V?1:V));za=Math.atan2(Da,za);ba[pa++]=
wb*za;ba[pa++]=wb*fa;ba[pa]=V-ya}function Ia(V,fa,ba,pa){Ba(V,fa,ba,pa,u.moon.radius)}function Ha(V,fa,ba,pa){Ba(V,fa,ba,pa,u.mars.radius)}function Ea(V,fa,ba,pa){Ba(V,fa,ba,pa,u.earth.radius)}function Fa(V,fa,ba,pa){Ea(V,fa,ba,pa);ja(ba,pa,ba,pa)}function Ga(V,fa,ba,pa){Ea(V,fa,ba,pa);Qa(ba,pa,ba,pa)}function Qa(V,fa,ba,pa){{var ya=u.earth;const Da=lb*V[fa];var za=lb*V[fa+1];V=V[fa+2];fa=Math.sin(za);za=Math.cos(za);const Ka=ya.radius/Math.sqrt(1-ya.eccentricitySquared*fa*fa);ba[pa++]=(Ka+V)*za*
Math.cos(Da);ba[pa++]=(Ka+V)*za*Math.sin(Da);ba[pa++]=(Ka*(1-ya.eccentricitySquared)+V)*fa}}function ta(V,fa,ba,pa){var ya=F.earthEllipsoidConstants,za=V[fa],Da=V[fa+1];V=V[fa+2];let Ka;fa=Math.abs(V);var Va=za*za+Da*Da;var Ua=Math.sqrt(Va);var Ta=Va+V*V;var cb=Math.sqrt(Ta);za=Math.atan2(Da,za);var nb=V*V/Ta;Ta=Va/Ta;Da=ya.a2/cb;Va=ya.a3-ya.a4/cb;.3<Ta?(nb=fa/cb*(1+Ta*(ya.a1+Da+nb*Va)/cb),cb=Math.asin(nb),Da=nb*nb,Ta=Math.sqrt(1-Da)):(Ta=Ua/cb*(1-nb*(ya.a5-Da-Ta*Va)/cb),cb=Math.acos(Ta),Da=1-Ta*
Ta,nb=Math.sqrt(Da));Ka=1-u.earth.eccentricitySquared*Da;Da=u.earth.radius/Math.sqrt(Ka);ya=ya.a6*Da;Da=Ua-Da*Ta;Va=fa-ya*nb;fa=Ta*Da+nb*Va;Ua=Ta*Va-nb*Da;ya=Ua/(ya/Ka+fa);cb+=ya;0>V&&(cb=-cb);ba[pa++]=wb*za;ba[pa++]=wb*cb;ba[pa]=fa+Ua*ya/2}function $a(V,fa,ba,pa){ta(V,fa,ba,pa);Aa(ba,pa,ba,pa)}function ab(V,fa,ba,pa){ta(V,fa,ba,pa);ja(ba,pa,ba,pa)}function Ya(V,fa,ba=bb()){return x.isNone(V)||x.isNone(fa)?null:a(V,fa,ba).projector}function a(V,fa,ba){if(x.isNone(V)||x.isNone(fa)||ba.source.spatialReference===
V&&ba.dest.spatialReference===fa)return ba;const pa=ia(V,ba.source),ya=ia(fa,ba.dest);pa===la.UNKNOWN&&ya===la.UNKNOWN?P.equals(V,fa)?ba.projector=g:ba.projector=null:ba.projector=gb[pa][ya];return ba}function bb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:g}}let Ra=null,mb=null,qb=null,Cb={};const Tb=new q.SimpleObservable;let Fb=function(V){function fa(){return V.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ca._inheritsLoose(fa,V);return fa}(Y);var la;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";
V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const Vb=u.earth.radius*Math.PI/180,Db=180/(u.earth.radius*Math.PI),gb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ja,[la.PLATE_CARREE]:D,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.CGCS2000]:{[la.CGCS2000]:g,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:D,[la.WGS84]:null,[la.WGS84_ECEF]:Qa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:g,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,
[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:g,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:sa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:C,[la.WGS84_COMPARABLE_LON_LAT]:C,
[la.SPHERICAL_ECEF]:X,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:g,[la.PLATE_CARREE]:da,[la.WGS84]:C,[la.WGS84_ECEF]:Z},[la.WGS84_ECEF]:{[la.CGCS2000]:ta,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ta,[la.WGS84_COMPARABLE_LON_LAT]:ta,[la.SPHERICAL_ECEF]:$a,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(V,fa,ba,pa){ta(V,fa,ba,pa);D(ba,pa,ba,pa)},[la.WGS84]:ta,
[la.WGS84_ECEF]:g},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ea,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ea,[la.WGS84_COMPARABLE_LON_LAT]:Ea,[la.SPHERICAL_ECEF]:g,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(V,fa,ba,pa){Ea(V,fa,ba,pa);D(ba,pa,ba,pa)},[la.WGS84]:Ea,[la.WGS84_ECEF]:Ga},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ha,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:null,
[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:g,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ia,[la.LON_LAT]:Ia,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:g,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:g,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:g,[la.GCSMARS2000]:g,[la.GCSMOON2000]:g,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:sa,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ja,[la.PLATE_CARREE]:D,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:g,[la.WGS84_COMPARABLE_LON_LAT]:g,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:D,[la.WGS84]:g,[la.WGS84_ECEF]:Qa},[la.PLATE_CARREE]:{[la.CGCS2000]:O,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:O,
[la.WGS84_COMPARABLE_LON_LAT]:O,[la.SPHERICAL_ECEF]:function(V,fa,ba,pa){O(V,fa,ba,pa);Aa(ba,pa,ba,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(V,fa,ba,pa){O(V,fa,ba,pa);ja(ba,pa,ba,pa)},[la.PLATE_CARREE]:g,[la.WGS84]:O,[la.WGS84_ECEF]:function(V,fa,ba,pa){O(V,fa,ba,pa);Qa(ba,pa,ba,pa)}}},rb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Gb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub=bb(),yc=bb(),lb=t.deg2rad(1),
wb=t.rad2deg(1),Sa=R.create(),fb=R.create(),sb=R.create(),Oa=R.create(),Hb=R.create();d.canProjectToWGS84ComparableLonLat=function(V){if(x.isNone(V))return!1;V=ia(V,rb);return!!gb[V][la.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=I;d.computeENUToSphericalPCPFLocalRotation=b;d.computeSphericalPCPFToENULocalRotation=m;d.computeTranslationToOriginAndRotation=function(V,fa,ba,pa){if(x.isNone(V)||x.isNone(pa))return!1;var ya=ia(V,rb),za=ia(pa,Gb);if(ya===za&&za!==la.SPHERICAL_ECEF&&za!==la.SPHERICAL_MARS_PCPF&&
za!==la.SPHERICAL_MOON_PCPF&&(ya!==la.UNKNOWN||P.equals(V,pa)))return y.fromTranslation(ba,fa),!0;if(za===la.SPHERICAL_ECEF||za===la.SPHERICAL_MARS_PCPF||za===la.SPHERICAL_MOON_PCPF){ya=gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(x.isNone(ya)||x.isNone(za))return!1;ya(fa,0,fb,0);za(fb,0,sb,0);b(lb*fb[0],lb*fb[1],ba);ba[12]=sb[0];ba[13]=sb[1];ba[14]=sb[2];return!0}if((za===la.WEB_MERCATOR||za===la.PLATE_CARREE)&&(ya===la.WGS84||ya===la.CGCS2000&&za===la.PLATE_CARREE||ya===la.SPHERICAL_ECEF||ya===la.WEB_MERCATOR)){V=
gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(x.isNone(V)||x.isNone(za))return!1;V(fa,0,fb,0);za(fb,0,sb,0);ya===la.SPHERICAL_ECEF?m(lb*fb[0],lb*fb[1],ba):y.identity(ba);ba[12]=sb[0];ba[13]=sb[1];ba[14]=sb[2];return!0}return!1};d.getProjectorName=function(V,fa){switch(Ya(V,fa,Ub)){case g:return"copy3";case Aa:return"wgs84ToSphericalECEF";case ja:return"wgs84ToWebMercator";case D:return"wgs84ToPlateCarree";case Qa:return"wgs84ToWGS84ECEF";case C:return"webMercatorToWGS84";case X:return"webMercatorToSphericalECEF";
case Z:return"webMercatorToWGS84ECEF";case da:return"webMercatorToPlateCarree";case ta:return"wgs84ECEFToWGS84";case $a:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ea:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case Ia:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case xa:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};
d.getTransformation=A;d.getTransformations=function(V,fa,ba=null){if(x.isNone(Ra))throw new Fb;V=Ra._getTransformationBySuitability(mb,V,fa,ba,null==ba?void 0:ba.spatialReference);if(null!==V){fa=[];for(const pa of V)fa.push(J.fromGE(pa));return fa}return[]};d.initializeProjection=function(V,fa,ba,pa){return T.apply(this,arguments)};d.isLoaded=G;d.load=U;d.localLinearScaleFactors=function(V,fa,ba,pa){if(x.isNone(fa)||x.isNone(pa))return!1;const ya=ia(fa,rb);var za=ia(pa,Gb);if(ya===za&&ya!==la.UNKNOWN||
P.equals(fa,pa))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(ya===la.SPHERICAL_ECEF){fa=L.length(V);V=fa/Math.sqrt(V[0]*V[0]+V[1]*V[1]);fa/=u.earth.radius;if(za===la.WEB_MERCATOR)return ba[0]=V*fa,ba[1]=V*fa,ba[2]=1,!0;if(za===la.WGS84||za===la.CGCS2000)return za=Db,ba[0]=za*V*fa,ba[1]=za*fa,ba[2]=1,!0}else if(ya===la.PLATE_CARREE){if(za===la.WGS84||za===la.CGCS2000)return ba[0]=Db,ba[1]=Db,ba[2]=1,!0;if(za===la.WEB_MERCATOR)return za=V[1]/u.earth.radius,ba[0]=1,ba[1]=1/Math.cos(za),ba[2]=1,!0}return!1};
d.lonLatToSphericalPCPF=function(V,fa,ba,pa){const ya=Math.cos(ba);V[0]=Math.cos(fa)*ya*pa;V[1]=Math.sin(fa)*ya*pa;V[2]=Math.sin(ba)*pa};d.lonLatToWebMercatorComparable=ka;d.project=S;d.projectBoundingRect=function(V,fa,ba,pa){if(null==V)return!1;if(P.equals(fa,pa))return w.copy(ba,V),!0;Sa[0]=V[0];Sa[1]=V[1];Sa[2]=0;if(!Ja(Sa,fa,0,Sa,pa,0,1))return!1;ba[0]=Sa[0];ba[1]=Sa[1];Sa[0]=V[2];Sa[1]=V[3];Sa[2]=0;if(!Ja(Sa,fa,0,Sa,pa,0,1))return!1;ba[2]=Sa[0];ba[3]=Sa[1];return!0};d.projectBoundingSphere=
function(V,fa,ba,pa){if(x.isNone(fa)||x.isNone(pa))return!1;fa=a(fa,pa,yc);if(fa.projector===g)return ba[0]=V[0],ba[1]=V[1],ba[2]=V[2],ba[3]=V[3],!0;if(x.isNone(fa.projector))return!1;const {source:ya,dest:za}=fa;if(za.spatialReferenceId===la.WEB_MERCATOR){fa=gb[ya.spatialReferenceId][la.WGS84];if(x.isNone(fa))return!1;fa(V,0,fb,0);ja(fb,0,ba,0);ba[3]=Za(fb[1],V[2],V[3],u.earth.radius);return!0}if(ya.spatialReferenceId!==la.WGS84&&ya.spatialReferenceId!==la.CGCS2000||za.spatialReferenceId!==la.PLATE_CARREE)fa.projector(V,
0,ba,0),ba[3]=V[3]*ya.metersPerUnit/za.metersPerUnit;else{pa=gb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Da=V[3];x.isSome(gb[ya.spatialReferenceId][la.SPHERICAL_ECEF])&&x.isSome(pa)&&(Da=Za(V[1],V[2],V[3],u.earth.radius));fa.projector(V,0,ba,0);ba[3]=Da}return!0};d.projectBuffer=Ja;d.projectDirection=function(V,fa,ba,pa,ya){L.copy(Oa,V);L.add(Hb,V,fa);wa(Oa,ba,Oa,ya);wa(Hb,ba,Hb,ya);L.subtract(pa,Hb,Oa);L.normalize(pa,pa)};d.projectExtent=function(V,fa,ba=fa.spatialReference,pa=0){return x.isSome(ba)&&
x.isSome(oa(V,V.spatialReference,fa,ba,pa))};d.projectMany=H;d.projectMultipoint=function(V,fa,ba=fa.spatialReference,pa=0){return x.isNone(ba)?!1:x.isSome(ma(V,V.spatialReference,fa,ba,pa))};d.projectOrLoad=function(V,fa){return x.isNone(V)?{pending:null,geometry:null}:P.equals(V.spatialReference,fa)?{pending:null,geometry:V}:P.isValid(V.spatialReference)&&P.isValid(fa)?I(V.spatialReference,fa)?{pending:null,geometry:f(V,fa)}:G()?{pending:null,geometry:f(V,fa)}:(p.trackAccess(Tb),{pending:U(),geometry:null}):
{pending:null,geometry:null}};d.projectPoint=function(V,fa,ba=fa.spatialReference,pa=0){return x.isNone(ba)?!1:x.isSome(ea(V,V.spatialReference,fa,ba,pa))};d.projectPointToVector=function(V,fa,ba,pa=0){Oa[0]=V.x;Oa[1]=V.y;const ya=V.z;Oa[2]=void 0!==ya?ya:pa;return Ja(Oa,V.spatialReference,0,fa,ba,0,1)};d.projectPointToWGS84ComparableLonLat=function(V,fa){Oa[0]=V.x;Oa[1]=V.y;const ba=V.z;Oa[2]=void 0!==ba?ba:0;return Ma(Oa,V.spatialReference,fa)};d.projectPolygon=function(V,fa,ba=fa.spatialReference,
pa=0){return x.isSome(ba)&&x.isSome(na(V,V.spatialReference,fa,ba,pa))};d.projectPolygonToWGS84ComparableLonLat=function({hasZ:V,spatialReference:fa,rings:ba},pa,ya=0){fa=ia(fa,rb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(fa))return!1;V=V?za=>za:za=>L.set(Oa,za[0],za[1],ya);for(const za of ba){ba=[];for(const Da of za){const Ka=[0,0,ya];fa(V(Da),0,Ka,0);ba.push(Ka)}pa.push(ba)}return!0};d.projectPolyline=function(V,fa,ba=fa.spatialReference,pa=0){return x.isSome(ba)&&x.isSome(Q(V,V.spatialReference,
fa,ba,pa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:V,spatialReference:fa,paths:ba},pa,ya=0){fa=ia(fa,rb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(fa))return!1;V=V?za=>za:za=>L.set(Oa,za[0],za[1],ya);for(const za of ba){ba=[];for(const Da of za){const Ka=[0,0,ya];fa(V(Da),0,Ka,0);ba.push(Ka)}pa.push(ba)}return!0};d.projectVectorToDehydratedPoint=function(V,fa,ba){return Ja(V,fa,0,Oa,ba.spatialReference,0,1)?(ba.x=Oa[0],ba.y=Oa[1],ba.z=Oa[2],ba):null};d.projectVectorToPoint=
function(V,fa,ba){if(x.isNone(fa)||x.isNone(ba))return null;const pa=new h({spatialReference:ba});return Ja(V,fa,0,Oa,ba,0,1)?(pa.x=Oa[0],pa.y=Oa[1],pa.z=Oa[2],pa):null};d.projectVectorToVector=wa;d.projectVectorToWGS84ComparableLonLat=function(V,fa,ba){return Ma(V,fa,ba)};d.projectWithoutEngine=N;d.projectXYZToVector=qa;d.sphericalPCPFtoLonLatElevation=Ba;d.test={get loadPromise(){return qb}};d.tryProjectWithZConversion=f;d.unload=function(){qb=mb=Ra=null;Cb={}};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(k,d,ca,Y,t,x,z,n,p){function q(Q){Q=I[Q];if(!Q)throw Error("unknown type");return Q}function y(Q){return f[Q].baseUnit}function L(Q,na=null){na=na||q(Q);return f[na].baseUnit===Q}function R(Q,
na,oa){if(na===oa)return Q;const qa=q(na);if(qa!==q(oa))throw Error("incompatible units");Q=L(na,qa)?Q:Q*f[qa].units[na].inBaseUnits;return L(oa,qa)?Q:Q/f[qa].units[oa].inBaseUnits}function l(Q,na){Q=R(Q,na,"meters");return 3E3>Math.abs(Q)?"meters":"kilometers"}function M(Q,na){Q=R(Q,na,"meters");return 1E5>Math.abs(Q)?"meters":"kilometers"}function c(Q,na){Q=R(Q,na,"feet");return 1E3>Math.abs(Q)?"feet":"miles"}function h(Q,na){Q=R(Q,na,"feet");return 1E5>Math.abs(Q)?"feet":"miles"}function K(Q,na){Q=
R(Q,na,"square-meters");return 3E6>Math.abs(Q)?"square-meters":"square-kilometers"}function W(Q,na){Q=R(Q,na,"square-feet");return 1E6>Math.abs(Q)?"square-feet":"square-miles"}function r(Q){return A.fromJSON(Q.toLowerCase())||null}function w(Q){const na=u(Q),oa=Q instanceof x?t.getReferenceEllipsoid(Q).metersPerDegree:1E5;return na>=oa?"meters":P(Q)}function u(Q,na=z.earth.metersPerDegree){return Y.unwrapOr(F(Q,!0),na)}function F(Q,na=!1){let oa,qa,wa=null;null!=Q&&("object"===typeof Q?(oa=Q.wkid,
qa=Q.wkt):"number"===typeof Q?oa=Q:"string"===typeof Q&&(qa=Q));if(oa){if(n.isWKIDFromMars(oa))return z.mars.metersPerDegree;if(n.isWKIDFromMoon(oa))return z.moon.metersPerDegree;wa=U.values[U[oa]];!wa&&na&&H.has(oa)&&(wa=E)}else qa&&(/^PROJCS/i.test(qa)?wa=J(G.exec(qa),wa):/^GEOCCS/i.test(qa)&&(wa=J(S.exec(qa),wa)));return wa}function J(Q,na){return Q&&Q[1]?parseFloat(Q[1].split(",")[1]):na}function P(Q){var na=null;if(null!=Q)if("object"===typeof Q){var oa=Q.wkid;var qa=Q.wkt}else"number"===typeof Q?
oa=Q:"string"===typeof Q&&(qa=Q);if(oa)na=U.units[U[oa]];else if(qa&&(Q=/^PROJCS/i.test(qa)?G:/^GEOCCS/i.test(qa)?S:null)&&(qa=Q.exec(qa))&&qa[1]&&(qa=qa[1],na=(na=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&na[1],!na||!U.units.includes(na)))for(qa=parseFloat(qa.split(",")[1]),na=null,Q=U.values,oa=0;oa<Q.length;++oa)if(1E-7>Math.abs(qa-Q[oa])){na=U.units[oa];break}return Y.isSome(na)?r(na):null}function ha(Q){Q=P(Q);if(Y.isNone(Q))return null;switch(Q){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const E=z.earth.radius*Math.PI/200,G=/UNIT\[([^\]]+)\]\]$/i,U=p,S=/UNIT\[([^\]]+)\]/i,H=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),A=ca.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};p={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(Q=>Q*Q)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const f={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:p},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},I=(()=>{const Q={};for(const na in f)for(const oa in f[na].units)Q[oa]=na;return Q})(),T="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),N=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ea={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ma={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};d=ca.strict()(ea);p=ca.strict()(ma);ca=ca.strict()({...ea,...ma});k.areaUnitFromSpatialReference=function(Q){Q=P(Q);return Y.isNone(Q)?null:N.get(Q)};k.areaUnitsJSONMap=d;k.baseUnitForUnit=function(Q){return y(q(Q))};k.baseUnitForUnitType=y;k.convertUnit=R;k.getDefaultUnitForView=function(Q){var na;if(Y.isNone(Q))return"metric";var oa=Q.map;if(oa=oa&&"portalItem"in oa?null==(na=oa.portalItem)?void 0:na.portal:null){var qa,wa;switch(null!=(qa=null==oa?void 0:null==(wa=oa.user)?void 0:
wa.units)?qa:oa.units){case "metric":return"metric";case "english":return"imperial"}}return Y.unwrapOr(ha(Q.spatialReference),"metric")};k.getDefaultUnitSystem=ha;k.getMetersPerUnit=F;k.getMetersPerUnitForSR=u;k.getMetersPerVerticalUnitForSR=function(Q){if(Q&&"object"===typeof Q&&!n.isEarth(Q))return 1;Q=u(Q);return 1E5<Q?1:Q};k.getUnitString=P;k.getVerticalUnitStringForSR=w;k.inchesPerMeter=39.37;k.isBaseUnit=L;k.isMeasurementSystem=function(Q){return"imperial"===Q||"metric"===Q};k.lengthToDegrees=
function(Q,na,oa){return R(Q,na,"meters")/(oa*Math.PI/180)};k.lengthUnitFromSpatialReference=function(Q){Q=P(Q);return Y.isNone(Q)||!T.includes(Q)?null:Q};k.lengthUnitsJSONMap=p;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits=T;k.preferredAreaUnit=function(Q,na,oa){switch(oa){case "metric":return K(Q,na);case "imperial":return W(Q,na);default:return oa}};
k.preferredImperialAreaUnit=W;k.preferredImperialLengthUnit=c;k.preferredImperialVerticalLengthUnit=h;k.preferredLengthUnit=function(Q,na,oa){switch(oa){case "metric":return l(Q,na);case "imperial":return c(Q,na);default:return oa}};k.preferredMetricAreaUnit=K;k.preferredMetricLengthUnit=l;k.preferredMetricVerticalLengthUnit=M;k.preferredVerticalLengthUnit=function(Q,na,oa){switch(oa){case "metric":return M(Q,na);case "imperial":return h(Q,na);default:return oa}};k.unitFromRESTJSON=r;k.unitToRESTJSON=
function(Q){return A.toJSON(Q)||null};k.unitType=q;k.unitsJSONMap=ca;k.verticalLengthUnitFromSpatialReference=function(Q){Q=w(Q);return Y.isNone(Q)||!T.includes(Q)?null:Q};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,d,ca,Y){function t(q){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${q.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const x=t(ca.earth),z=t(ca.mars),n=t(ca.moon),p=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ca.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=x;k.SphericalPCPFMars=
z;k.SphericalPCPFMoon=n;k.WGS84ECEFSpatialReference=p;k.createSphericalPCPF=t;k.getReferenceEllipsoid=function(q){return q&&(Y.isMars(q)||q===z)?ca.mars:q&&(Y.isMoon(q)||q===n)?ca.moon:ca.earth};k.getReferenceEllipsoidFromWKID=function(q){return Y.isWKIDFromMars(q)?ca.mars:Y.isWKIDFromMoon(q)?ca.moon:ca.earth};k.getSphericalPCPF=function(q){return q&&(Y.isMars(q)||q===z)?z:q&&(Y.isMoon(q)||q===n)?n:x};k.getSphericalPCPFForEllipsoid=function(q){return q&&q===ca.mars?z:q&&q===ca.moon?n:x};Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,d){let ca=function(){function Y(){this._observers=[]}var t=Y.prototype;t.observe=function(x){this._observers.includes(x)||this._observers.push(x);return new d.ObservationHandle(this._observers,x)};t.notify=function(){const x=this._observers.slice();for(let z=0;z<x.length;++z){const n=x[z];n.onInvalidated();n.onCommitted()}};
return Y}();k.SimpleObservable=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,d,ca){function Y(b,m){b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=m[3];b[4]=m[4];b[5]=m[5];b[6]=m[6];b[7]=m[7];b[8]=m[8];b[9]=m[9];b[10]=m[10];b[11]=m[11];b[12]=m[12];b[13]=m[13];b[14]=m[14];b[15]=m[15];return b}function t(b,m,ia,g,C,X,Z,ka,ja,D,O,da,ra,sa,xa,Aa,Ba){b[0]=m;b[1]=ia;b[2]=g;b[3]=C;b[4]=
X;b[5]=Z;b[6]=ka;b[7]=ja;b[8]=D;b[9]=O;b[10]=da;b[11]=ra;b[12]=sa;b[13]=xa;b[14]=Aa;b[15]=Ba;return b}function x(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function z(b,m){if(b===m){const ia=m[1],g=m[2],C=m[3],X=m[6],Z=m[7],ka=m[11];b[1]=m[4];b[2]=m[8];b[3]=m[12];b[4]=ia;b[6]=m[9];b[7]=m[13];b[8]=g;b[9]=X;b[11]=m[14];b[12]=C;b[13]=Z;b[14]=ka}else b[0]=m[0],b[1]=m[4],b[2]=m[8],b[3]=m[12],b[4]=m[1],b[5]=m[5],b[6]=
m[9],b[7]=m[13],b[8]=m[2],b[9]=m[6],b[10]=m[10],b[11]=m[14],b[12]=m[3],b[13]=m[7],b[14]=m[11],b[15]=m[15];return b}function n(b,m){const ia=m[0],g=m[1],C=m[2],X=m[3],Z=m[4],ka=m[5],ja=m[6],D=m[7],O=m[8],da=m[9],ra=m[10],sa=m[11],xa=m[12],Aa=m[13],Ba=m[14];m=m[15];const Ia=ia*ka-g*Z,Ha=ia*ja-C*Z,Ea=ia*D-X*Z,Fa=g*ja-C*ka,Ga=g*D-X*ka,Qa=C*D-X*ja,ta=O*Aa-da*xa,$a=O*Ba-ra*xa,ab=O*m-sa*xa,Ya=da*Ba-ra*Aa,a=da*m-sa*Aa,bb=ra*m-sa*Ba;let Ra=Ia*bb-Ha*a+Ea*Ya+Fa*ab-Ga*$a+Qa*ta;if(!Ra)return null;Ra=1/Ra;b[0]=
(ka*bb-ja*a+D*Ya)*Ra;b[1]=(C*a-g*bb-X*Ya)*Ra;b[2]=(Aa*Qa-Ba*Ga+m*Fa)*Ra;b[3]=(ra*Ga-da*Qa-sa*Fa)*Ra;b[4]=(ja*ab-Z*bb-D*$a)*Ra;b[5]=(ia*bb-C*ab+X*$a)*Ra;b[6]=(Ba*Ea-xa*Qa-m*Ha)*Ra;b[7]=(O*Qa-ra*Ea+sa*Ha)*Ra;b[8]=(Z*a-ka*ab+D*ta)*Ra;b[9]=(g*ab-ia*a-X*ta)*Ra;b[10]=(xa*Ga-Aa*Ea+m*Ia)*Ra;b[11]=(da*Ea-O*Ga-sa*Ia)*Ra;b[12]=(ka*$a-Z*Ya-ja*ta)*Ra;b[13]=(ia*Ya-g*$a+C*ta)*Ra;b[14]=(Aa*Ha-xa*Fa-Ba*Ia)*Ra;b[15]=(O*Fa-da*Ha+ra*Ia)*Ra;return b}function p(b,m){const ia=m[0],g=m[1],C=m[2],X=m[3],Z=m[4],ka=m[5],ja=
m[6],D=m[7],O=m[8],da=m[9],ra=m[10],sa=m[11],xa=m[12],Aa=m[13],Ba=m[14];m=m[15];b[0]=ka*(ra*m-sa*Ba)-da*(ja*m-D*Ba)+Aa*(ja*sa-D*ra);b[1]=-(g*(ra*m-sa*Ba)-da*(C*m-X*Ba)+Aa*(C*sa-X*ra));b[2]=g*(ja*m-D*Ba)-ka*(C*m-X*Ba)+Aa*(C*D-X*ja);b[3]=-(g*(ja*sa-D*ra)-ka*(C*sa-X*ra)+da*(C*D-X*ja));b[4]=-(Z*(ra*m-sa*Ba)-O*(ja*m-D*Ba)+xa*(ja*sa-D*ra));b[5]=ia*(ra*m-sa*Ba)-O*(C*m-X*Ba)+xa*(C*sa-X*ra);b[6]=-(ia*(ja*m-D*Ba)-Z*(C*m-X*Ba)+xa*(C*D-X*ja));b[7]=ia*(ja*sa-D*ra)-Z*(C*sa-X*ra)+O*(C*D-X*ja);b[8]=Z*(da*m-sa*Aa)-
O*(ka*m-D*Aa)+xa*(ka*sa-D*da);b[9]=-(ia*(da*m-sa*Aa)-O*(g*m-X*Aa)+xa*(g*sa-X*da));b[10]=ia*(ka*m-D*Aa)-Z*(g*m-X*Aa)+xa*(g*D-X*ka);b[11]=-(ia*(ka*sa-D*da)-Z*(g*sa-X*da)+O*(g*D-X*ka));b[12]=-(Z*(da*Ba-ra*Aa)-O*(ka*Ba-ja*Aa)+xa*(ka*ra-ja*da));b[13]=ia*(da*Ba-ra*Aa)-O*(g*Ba-C*Aa)+xa*(g*ra-C*da);b[14]=-(ia*(ka*Ba-ja*Aa)-Z*(g*Ba-C*Aa)+xa*(g*ja-C*ka));b[15]=ia*(ka*ra-ja*da)-Z*(g*ra-C*da)+O*(g*ja-C*ka);return b}function q(b){const m=b[0],ia=b[1],g=b[2],C=b[3],X=b[4],Z=b[5],ka=b[6],ja=b[7],D=b[8],O=b[9],da=
b[10],ra=b[11],sa=b[12],xa=b[13],Aa=b[14];b=b[15];return(m*Z-ia*X)*(da*b-ra*Aa)-(m*ka-g*X)*(O*b-ra*xa)+(m*ja-C*X)*(O*Aa-da*xa)+(ia*ka-g*Z)*(D*b-ra*sa)-(ia*ja-C*Z)*(D*Aa-da*sa)+(g*ja-C*ka)*(D*xa-O*sa)}function y(b,m,ia){const g=m[0],C=m[1],X=m[2],Z=m[3],ka=m[4],ja=m[5],D=m[6],O=m[7],da=m[8],ra=m[9],sa=m[10],xa=m[11],Aa=m[12],Ba=m[13],Ia=m[14];m=m[15];let Ha=ia[0],Ea=ia[1],Fa=ia[2],Ga=ia[3];b[0]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[1]=Ha*C+Ea*ja+Fa*ra+Ga*Ba;b[2]=Ha*X+Ea*D+Fa*sa+Ga*Ia;b[3]=Ha*Z+Ea*O+Fa*xa+Ga*m;
Ha=ia[4];Ea=ia[5];Fa=ia[6];Ga=ia[7];b[4]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[5]=Ha*C+Ea*ja+Fa*ra+Ga*Ba;b[6]=Ha*X+Ea*D+Fa*sa+Ga*Ia;b[7]=Ha*Z+Ea*O+Fa*xa+Ga*m;Ha=ia[8];Ea=ia[9];Fa=ia[10];Ga=ia[11];b[8]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[9]=Ha*C+Ea*ja+Fa*ra+Ga*Ba;b[10]=Ha*X+Ea*D+Fa*sa+Ga*Ia;b[11]=Ha*Z+Ea*O+Fa*xa+Ga*m;Ha=ia[12];Ea=ia[13];Fa=ia[14];Ga=ia[15];b[12]=Ha*g+Ea*ka+Fa*da+Ga*Aa;b[13]=Ha*C+Ea*ja+Fa*ra+Ga*Ba;b[14]=Ha*X+Ea*D+Fa*sa+Ga*Ia;b[15]=Ha*Z+Ea*O+Fa*xa+Ga*m;return b}function L(b,m,ia){const g=ia[0],C=ia[1];ia=ia[2];
if(m===b)b[12]=m[0]*g+m[4]*C+m[8]*ia+m[12],b[13]=m[1]*g+m[5]*C+m[9]*ia+m[13],b[14]=m[2]*g+m[6]*C+m[10]*ia+m[14],b[15]=m[3]*g+m[7]*C+m[11]*ia+m[15];else{const X=m[0],Z=m[1],ka=m[2],ja=m[3],D=m[4],O=m[5],da=m[6],ra=m[7],sa=m[8],xa=m[9],Aa=m[10],Ba=m[11];b[0]=X;b[1]=Z;b[2]=ka;b[3]=ja;b[4]=D;b[5]=O;b[6]=da;b[7]=ra;b[8]=sa;b[9]=xa;b[10]=Aa;b[11]=Ba;b[12]=X*g+D*C+sa*ia+m[12];b[13]=Z*g+O*C+xa*ia+m[13];b[14]=ka*g+da*C+Aa*ia+m[14];b[15]=ja*g+ra*C+Ba*ia+m[15]}return b}function R(b,m,ia){const g=ia[0],C=ia[1];
ia=ia[2];b[0]=m[0]*g;b[1]=m[1]*g;b[2]=m[2]*g;b[3]=m[3]*g;b[4]=m[4]*C;b[5]=m[5]*C;b[6]=m[6]*C;b[7]=m[7]*C;b[8]=m[8]*ia;b[9]=m[9]*ia;b[10]=m[10]*ia;b[11]=m[11]*ia;b[12]=m[12];b[13]=m[13];b[14]=m[14];b[15]=m[15];return b}function l(b,m,ia,g){let C=g[0],X=g[1];g=g[2];let Z=Math.sqrt(C*C+X*X+g*g);var ka=void 0,ja=void 0;let D=void 0,O=void 0,da=void 0,ra=void 0,sa=void 0,xa=void 0,Aa=void 0,Ba=void 0,Ia=void 0,Ha=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Qa=void 0,ta=void 0,$a=void 0,ab=void 0,Ya=void 0,a=
void 0,bb=void 0;ja=ka=void 0;if(Z<ca.EPSILON)return null;Z=1/Z;C*=Z;X*=Z;g*=Z;ka=Math.sin(ia);ja=Math.cos(ia);D=1-ja;O=m[0];da=m[1];ra=m[2];sa=m[3];xa=m[4];Aa=m[5];Ba=m[6];Ia=m[7];Ha=m[8];Ea=m[9];Fa=m[10];Ga=m[11];Qa=C*C*D+ja;ta=X*C*D+g*ka;$a=g*C*D-X*ka;ab=C*X*D-g*ka;Ya=X*X*D+ja;a=g*X*D+C*ka;bb=C*g*D+X*ka;ka=X*g*D-C*ka;ja=g*g*D+ja;b[0]=O*Qa+xa*ta+Ha*$a;b[1]=da*Qa+Aa*ta+Ea*$a;b[2]=ra*Qa+Ba*ta+Fa*$a;b[3]=sa*Qa+Ia*ta+Ga*$a;b[4]=O*ab+xa*Ya+Ha*a;b[5]=da*ab+Aa*Ya+Ea*a;b[6]=ra*ab+Ba*Ya+Fa*a;b[7]=sa*ab+
Ia*Ya+Ga*a;b[8]=O*bb+xa*ka+Ha*ja;b[9]=da*bb+Aa*ka+Ea*ja;b[10]=ra*bb+Ba*ka+Fa*ja;b[11]=sa*bb+Ia*ka+Ga*ja;m!==b&&(b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);return b}function M(b,m,ia){const g=Math.sin(ia);ia=Math.cos(ia);const C=m[4],X=m[5],Z=m[6],ka=m[7],ja=m[8],D=m[9],O=m[10],da=m[11];m!==b&&(b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=m[3],b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);b[4]=C*ia+ja*g;b[5]=X*ia+D*g;b[6]=Z*ia+O*g;b[7]=ka*ia+da*g;b[8]=ja*ia-C*g;b[9]=D*ia-X*g;b[10]=O*ia-Z*g;b[11]=da*
ia-ka*g;return b}function c(b,m,ia){const g=Math.sin(ia);ia=Math.cos(ia);const C=m[0],X=m[1],Z=m[2],ka=m[3],ja=m[8],D=m[9],O=m[10],da=m[11];m!==b&&(b[4]=m[4],b[5]=m[5],b[6]=m[6],b[7]=m[7],b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);b[0]=C*ia-ja*g;b[1]=X*ia-D*g;b[2]=Z*ia-O*g;b[3]=ka*ia-da*g;b[8]=C*g+ja*ia;b[9]=X*g+D*ia;b[10]=Z*g+O*ia;b[11]=ka*g+da*ia;return b}function h(b,m,ia){const g=Math.sin(ia);ia=Math.cos(ia);const C=m[0],X=m[1],Z=m[2],ka=m[3],ja=m[4],D=m[5],O=m[6],da=m[7];m!==b&&(b[8]=m[8],
b[9]=m[9],b[10]=m[10],b[11]=m[11],b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);b[0]=C*ia+ja*g;b[1]=X*ia+D*g;b[2]=Z*ia+O*g;b[3]=ka*ia+da*g;b[4]=ja*ia-C*g;b[5]=D*ia-X*g;b[6]=O*ia-Z*g;b[7]=da*ia-ka*g;return b}function K(b,m){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=m[0];b[13]=m[1];b[14]=m[2];b[15]=1;return b}function W(b,m){b[0]=m[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=m[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=
1;return b}function r(b,m,ia){let g=ia[0],C=ia[1];ia=ia[2];let X=Math.sqrt(g*g+C*C+ia*ia),Z=void 0,ka=void 0,ja=void 0;if(X<ca.EPSILON)return null;X=1/X;g*=X;C*=X;ia*=X;Z=Math.sin(m);ka=Math.cos(m);ja=1-ka;b[0]=g*g*ja+ka;b[1]=C*g*ja+ia*Z;b[2]=ia*g*ja-C*Z;b[3]=0;b[4]=g*C*ja-ia*Z;b[5]=C*C*ja+ka;b[6]=ia*C*ja+g*Z;b[7]=0;b[8]=g*ia*ja+C*Z;b[9]=C*ia*ja-g*Z;b[10]=ia*ia*ja+ka;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function w(b,m){const ia=Math.sin(m);m=Math.cos(m);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=m;b[6]=ia;b[7]=0;b[8]=0;b[9]=-ia;b[10]=m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function u(b,m){const ia=Math.sin(m);m=Math.cos(m);b[0]=m;b[1]=0;b[2]=-ia;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=ia;b[9]=0;b[10]=m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function F(b,m){const ia=Math.sin(m);m=Math.cos(m);b[0]=m;b[1]=ia;b[2]=0;b[3]=0;b[4]=-ia;b[5]=m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function J(b,m,ia){var g=m[0],C=m[1],X=m[2],
Z=m[3],ka=g+g,ja=C+C;const D=X+X;m=g*ka;const O=g*ja;g*=D;const da=C*ja;C*=D;X*=D;ka*=Z;ja*=Z;Z*=D;b[0]=1-(da+X);b[1]=O+Z;b[2]=g-ja;b[3]=0;b[4]=O-Z;b[5]=1-(m+X);b[6]=C+ka;b[7]=0;b[8]=g+ja;b[9]=C-ka;b[10]=1-(m+da);b[11]=0;b[12]=ia[0];b[13]=ia[1];b[14]=ia[2];b[15]=1;return b}function P(b,m){const ia=Za,g=-m[0],C=-m[1],X=-m[2],Z=m[3],ka=m[4],ja=m[5],D=m[6],O=m[7],da=g*g+C*C+X*X+Z*Z;0<da?(ia[0]=2*(ka*Z+O*g+ja*X-D*C)/da,ia[1]=2*(ja*Z+O*C+D*g-ka*X)/da,ia[2]=2*(D*Z+O*X+ka*C-ja*g)/da):(ia[0]=2*(ka*Z+O*g+
ja*X-D*C),ia[1]=2*(ja*Z+O*C+D*g-ka*X),ia[2]=2*(D*Z+O*X+ka*C-ja*g));J(b,m,ia);return b}function ha(b,m){b[0]=m[12];b[1]=m[13];b[2]=m[14];return b}function E(b,m){const ia=m[0],g=m[1],C=m[2],X=m[4],Z=m[5],ka=m[6],ja=m[8],D=m[9];m=m[10];b[0]=Math.sqrt(ia*ia+g*g+C*C);b[1]=Math.sqrt(X*X+Z*Z+ka*ka);b[2]=Math.sqrt(ja*ja+D*D+m*m);return b}function G(b,m){const ia=m[0]+m[5]+m[10];let g=0;0<ia?(g=2*Math.sqrt(ia+1),b[3]=.25*g,b[0]=(m[6]-m[9])/g,b[1]=(m[8]-m[2])/g,b[2]=(m[1]-m[4])/g):m[0]>m[5]&&m[0]>m[10]?(g=
2*Math.sqrt(1+m[0]-m[5]-m[10]),b[3]=(m[6]-m[9])/g,b[0]=.25*g,b[1]=(m[1]+m[4])/g,b[2]=(m[8]+m[2])/g):m[5]>m[10]?(g=2*Math.sqrt(1+m[5]-m[0]-m[10]),b[3]=(m[8]-m[2])/g,b[0]=(m[1]+m[4])/g,b[1]=.25*g,b[2]=(m[6]+m[9])/g):(g=2*Math.sqrt(1+m[10]-m[0]-m[5]),b[3]=(m[1]-m[4])/g,b[0]=(m[8]+m[2])/g,b[1]=(m[6]+m[9])/g,b[2]=.25*g);return b}function U(b,m,ia,g){var C=m[0],X=m[1],Z=m[2],ka=m[3],ja=C+C,D=X+X,O=Z+Z;m=C*ja;const da=C*D;C*=O;const ra=X*D;X*=O;Z*=O;ja*=ka;D*=ka;ka*=O;O=g[0];const sa=g[1];g=g[2];b[0]=(1-
(ra+Z))*O;b[1]=(da+ka)*O;b[2]=(C-D)*O;b[3]=0;b[4]=(da-ka)*sa;b[5]=(1-(m+Z))*sa;b[6]=(X+ja)*sa;b[7]=0;b[8]=(C+D)*g;b[9]=(X-ja)*g;b[10]=(1-(m+ra))*g;b[11]=0;b[12]=ia[0];b[13]=ia[1];b[14]=ia[2];b[15]=1;return b}function S(b,m,ia,g,C){var X=m[0],Z=m[1],ka=m[2],ja=m[3],D=X+X,O=Z+Z,da=ka+ka;m=X*D;var ra=X*O,sa=X*da;X=Z*O;Z*=da;var xa=ka*da;ka=ja*D;O*=ja;const Aa=ja*da;var Ba=g[0],Ia=g[1];da=g[2];g=C[0];ja=C[1];C=C[2];D=(1-(X+xa))*Ba;const Ha=(ra+Aa)*Ba;Ba*=sa-O;ra=(ra-Aa)*Ia;xa=(1-(m+xa))*Ia;Ia*=Z+ka;sa=
(sa+O)*da;Z=(Z-ka)*da;m=(1-(m+X))*da;b[0]=D;b[1]=Ha;b[2]=Ba;b[3]=0;b[4]=ra;b[5]=xa;b[6]=Ia;b[7]=0;b[8]=sa;b[9]=Z;b[10]=m;b[11]=0;b[12]=ia[0]+g-(D*g+ra*ja+sa*C);b[13]=ia[1]+ja-(Ha*g+xa*ja+Z*C);b[14]=ia[2]+C-(Ba*g+Ia*ja+m*C);b[15]=1;return b}function H(b,m){var ia=m[0],g=m[1],C=m[2];m=m[3];var X=ia+ia,Z=g+g;const ka=C+C;ia*=X;const ja=g*X;g*=Z;const D=C*X,O=C*Z;C*=ka;X*=m;Z*=m;m*=ka;b[0]=1-g-C;b[1]=ja+m;b[2]=D-Z;b[3]=0;b[4]=ja-m;b[5]=1-ia-C;b[6]=O+X;b[7]=0;b[8]=D+Z;b[9]=O-X;b[10]=1-ia-g;b[11]=0;b[12]=
0;b[13]=0;b[14]=0;b[15]=1;return b}function A(b,m,ia,g,C,X,Z){const ka=1/(ia-m),ja=1/(C-g),D=1/(X-Z);b[0]=2*X*ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*X*ja;b[6]=0;b[7]=0;b[8]=(ia+m)*ka;b[9]=(C+g)*ja;b[10]=(Z+X)*D;b[11]=-1;b[12]=0;b[13]=0;b[14]=Z*X*2*D;b[15]=0;return b}function f(b,m,ia,g,C){m=1/Math.tan(m/2);let X=void 0;b[0]=m/ia;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=C&&Infinity!==C?(X=1/(g-C),b[10]=(C+g)*X,b[14]=2*C*g*X):(b[10]=-1,b[14]=
-2*g);return b}function I(b,m,ia,g){const C=Math.tan(m.upDegrees*Math.PI/180),X=Math.tan(m.downDegrees*Math.PI/180),Z=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);const ka=2/(Z+m),ja=2/(C+X);b[0]=ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=ja;b[6]=0;b[7]=0;b[8]=-((Z-m)*ka*.5);b[9]=(C-X)*ja*.5;b[10]=g/(ia-g);b[11]=-1;b[12]=0;b[13]=0;b[14]=g*ia/(ia-g);b[15]=0;return b}function T(b,m,ia,g,C,X,Z){const ka=1/(m-ia),ja=1/(g-C),D=1/(X-Z);b[0]=-2*ka;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
-2*ja;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*D;b[11]=0;b[12]=(m+ia)*ka;b[13]=(C+g)*ja;b[14]=(Z+X)*D;b[15]=1;return b}function N(b,m,ia,g){let C=void 0,X=void 0;var Z=void 0,ka=void 0;let ja=void 0,D=void 0;var O=void 0,da=void 0;let ra=void 0,sa=void 0;const xa=m[0],Aa=m[1];m=m[2];Z=g[0];ka=g[1];g=g[2];O=ia[0];da=ia[1];ia=ia[2];if(Math.abs(xa-O)<ca.EPSILON&&Math.abs(Aa-da)<ca.EPSILON&&Math.abs(m-ia)<ca.EPSILON)return x(b);O=xa-O;da=Aa-da;ra=m-ia;sa=1/Math.sqrt(O*O+da*da+ra*ra);O*=sa;da*=sa;ra*=sa;C=
ka*ra-g*da;X=g*O-Z*ra;Z=Z*da-ka*O;(sa=Math.sqrt(C*C+X*X+Z*Z))?(sa=1/sa,C*=sa,X*=sa,Z*=sa):Z=X=C=0;ka=da*Z-ra*X;ja=ra*C-O*Z;D=O*X-da*C;(sa=Math.sqrt(ka*ka+ja*ja+D*D))?(sa=1/sa,ka*=sa,ja*=sa,D*=sa):D=ja=ka=0;b[0]=C;b[1]=ka;b[2]=O;b[3]=0;b[4]=X;b[5]=ja;b[6]=da;b[7]=0;b[8]=Z;b[9]=D;b[10]=ra;b[11]=0;b[12]=-(C*xa+X*Aa+Z*m);b[13]=-(ka*xa+ja*Aa+D*m);b[14]=-(O*xa+da*Aa+ra*m);b[15]=1;return b}function ea(b,m,ia,g){const C=m[0],X=m[1];m=m[2];var Z=g[0];const ka=g[1];var ja=g[2];g=C-ia[0];let D=X-ia[1];ia=m-
ia[2];let O=g*g+D*D+ia*ia;0<O&&(O=1/Math.sqrt(O),g*=O,D*=O,ia*=O);let da=ka*ia-ja*D;ja=ja*g-Z*ia;Z=Z*D-ka*g;O=da*da+ja*ja+Z*Z;0<O&&(O=1/Math.sqrt(O),da*=O,ja*=O,Z*=O);b[0]=da;b[1]=ja;b[2]=Z;b[3]=0;b[4]=D*Z-ia*ja;b[5]=ia*da-g*Z;b[6]=g*ja-D*da;b[7]=0;b[8]=g;b[9]=D;b[10]=ia;b[11]=0;b[12]=C;b[13]=X;b[14]=m;b[15]=1;return b}function ma(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+
b[15]+")"}function Q(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function na(b,m,ia){b[0]=m[0]+ia[0];b[1]=m[1]+ia[1];b[2]=m[2]+ia[2];b[3]=m[3]+ia[3];b[4]=m[4]+ia[4];b[5]=m[5]+ia[5];b[6]=m[6]+ia[6];b[7]=m[7]+ia[7];b[8]=m[8]+ia[8];b[9]=m[9]+ia[9];b[10]=m[10]+ia[10];b[11]=m[11]+ia[11];b[12]=m[12]+ia[12];b[13]=m[13]+ia[13];b[14]=m[14]+ia[14];b[15]=m[15]+ia[15];return b}function oa(b,m,ia){b[0]=
m[0]-ia[0];b[1]=m[1]-ia[1];b[2]=m[2]-ia[2];b[3]=m[3]-ia[3];b[4]=m[4]-ia[4];b[5]=m[5]-ia[5];b[6]=m[6]-ia[6];b[7]=m[7]-ia[7];b[8]=m[8]-ia[8];b[9]=m[9]-ia[9];b[10]=m[10]-ia[10];b[11]=m[11]-ia[11];b[12]=m[12]-ia[12];b[13]=m[13]-ia[13];b[14]=m[14]-ia[14];b[15]=m[15]-ia[15];return b}function qa(b,m,ia){b[0]=m[0]*ia;b[1]=m[1]*ia;b[2]=m[2]*ia;b[3]=m[3]*ia;b[4]=m[4]*ia;b[5]=m[5]*ia;b[6]=m[6]*ia;b[7]=m[7]*ia;b[8]=m[8]*ia;b[9]=m[9]*ia;b[10]=m[10]*ia;b[11]=m[11]*ia;b[12]=m[12]*ia;b[13]=m[13]*ia;b[14]=m[14]*ia;
b[15]=m[15]*ia;return b}function wa(b,m,ia,g){b[0]=m[0]+ia[0]*g;b[1]=m[1]+ia[1]*g;b[2]=m[2]+ia[2]*g;b[3]=m[3]+ia[3]*g;b[4]=m[4]+ia[4]*g;b[5]=m[5]+ia[5]*g;b[6]=m[6]+ia[6]*g;b[7]=m[7]+ia[7]*g;b[8]=m[8]+ia[8]*g;b[9]=m[9]+ia[9]*g;b[10]=m[10]+ia[10]*g;b[11]=m[11]+ia[11]*g;b[12]=m[12]+ia[12]*g;b[13]=m[13]+ia[13]*g;b[14]=m[14]+ia[14]*g;b[15]=m[15]+ia[15]*g;return b}function Ma(b,m){return b[0]===m[0]&&b[1]===m[1]&&b[2]===m[2]&&b[3]===m[3]&&b[4]===m[4]&&b[5]===m[5]&&b[6]===m[6]&&b[7]===m[7]&&b[8]===m[8]&&
b[9]===m[9]&&b[10]===m[10]&&b[11]===m[11]&&b[12]===m[12]&&b[13]===m[13]&&b[14]===m[14]&&b[15]===m[15]}function Ja(b,m){if(b===m)return!0;const ia=b[0],g=b[1],C=b[2],X=b[3],Z=b[4],ka=b[5],ja=b[6],D=b[7],O=b[8],da=b[9],ra=b[10],sa=b[11],xa=b[12],Aa=b[13],Ba=b[14];b=b[15];const Ia=m[0],Ha=m[1],Ea=m[2],Fa=m[3],Ga=m[4],Qa=m[5],ta=m[6],$a=m[7],ab=m[8],Ya=m[9],a=m[10],bb=m[11],Ra=m[12],mb=m[13],qb=m[14];m=m[15];return Math.abs(ia-Ia)<=ca.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ia))&&Math.abs(g-Ha)<=ca.EPSILON*
Math.max(1,Math.abs(g),Math.abs(Ha))&&Math.abs(C-Ea)<=ca.EPSILON*Math.max(1,Math.abs(C),Math.abs(Ea))&&Math.abs(X-Fa)<=ca.EPSILON*Math.max(1,Math.abs(X),Math.abs(Fa))&&Math.abs(Z-Ga)<=ca.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Ga))&&Math.abs(ka-Qa)<=ca.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Qa))&&Math.abs(ja-ta)<=ca.EPSILON*Math.max(1,Math.abs(ja),Math.abs(ta))&&Math.abs(D-$a)<=ca.EPSILON*Math.max(1,Math.abs(D),Math.abs($a))&&Math.abs(O-ab)<=ca.EPSILON*Math.max(1,Math.abs(O),Math.abs(ab))&&Math.abs(da-
Ya)<=ca.EPSILON*Math.max(1,Math.abs(da),Math.abs(Ya))&&Math.abs(ra-a)<=ca.EPSILON*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-bb)<=ca.EPSILON*Math.max(1,Math.abs(sa),Math.abs(bb))&&Math.abs(xa-Ra)<=ca.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ra))&&Math.abs(Aa-mb)<=ca.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(mb))&&Math.abs(Ba-qb)<=ca.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(qb))&&Math.abs(b-m)<=ca.EPSILON*Math.max(1,Math.abs(b),Math.abs(m))}function La(b){const m=ca.EPSILON,ia=b[0],g=b[1],C=
b[2],X=b[4],Z=b[5],ka=b[6],ja=b[8],D=b[9];b=b[10];return Math.abs(1-(ia*ia+X*X+ja*ja))<=m&&Math.abs(1-(g*g+Z*Z+D*D))<=m&&Math.abs(1-(C*C+ka*ka+b*b))<=m}const Za=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,copy:Y,set:t,identity:x,transpose:z,invert:n,adjoint:p,determinant:q,multiply:y,translate:L,scale:R,rotate:l,rotateX:M,rotateY:c,rotateZ:h,fromTranslation:K,fromScaling:W,fromRotation:r,fromXRotation:w,fromYRotation:u,fromZRotation:F,fromRotationTranslation:J,fromQuat2:P,getTranslation:ha,
getScaling:E,getRotation:G,fromRotationTranslationScale:U,fromRotationTranslationScaleOrigin:S,fromQuat:H,frustum:A,perspective:f,perspectiveFromFieldOfView:I,ortho:T,lookAt:N,targetTo:ea,str:ma,frob:Q,add:na,subtract:oa,multiplyScalar:qa,multiplyScalarAndAdd:wa,exactEquals:Ma,equals:Ja,isOrthoNormal:La,mul:y,sub:oa},Symbol.toStringTag,{value:"Module"}));k.add=na;k.adjoint=p;k.copy=Y;k.determinant=q;k.equals=Ja;k.exactEquals=Ma;k.frob=Q;k.fromQuat=H;k.fromQuat2=P;k.fromRotation=r;k.fromRotationTranslation=
J;k.fromRotationTranslationScale=U;k.fromRotationTranslationScaleOrigin=S;k.fromScaling=W;k.fromTranslation=K;k.fromXRotation=w;k.fromYRotation=u;k.fromZRotation=F;k.frustum=A;k.getRotation=G;k.getScaling=E;k.getTranslation=ha;k.identity=x;k.invert=n;k.isOrthoNormal=La;k.lookAt=N;k.mat4=d;k.mul=y;k.multiply=y;k.multiplyScalar=qa;k.multiplyScalarAndAdd=wa;k.ortho=T;k.perspective=f;k.perspectiveFromFieldOfView=I;k.rotate=l;k.rotateX=M;k.rotateY=c;k.rotateZ=h;k.scale=R;k.set=t;k.str=ma;k.sub=oa;k.subtract=
oa;k.targetTo=ea;k.translate=L;k.transpose=z})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,d,ca,Y,t){function x(){return!!d._pe}function z(){return!!t("esri-wasm")}function n(){return l?l:l=(new Promise((c,h)=>k(["./pe-wasm"],c,h))).then(c=>c.peWasm).then(({default:c})=>c({locateFile:h=>Y.getAssetUrl(`esri/geometry/support/${h}`)})).then(c=>{p(c)})}function p(c){function h(r,w,u){r[w]=u(r[w])}d._pe=c;d.PeDefs.init();
d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(r){function w(){return r.apply(this,arguments)||this}ca._inheritsLoose(w,r);w.prototype.destroy=function(){d._pe.destroy(this)};return w}(d._pe.PeGCSExtent);c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var K of c)h(K.prototype,"getName",r=>function(){return r.call(this,Array(d.PeDefs.PE_NAME_MAX))});
for(const r of[d._pe.PeGeogtran,d._pe.PeProjcs])h(r.prototype,"getParameters",w=>function(){const u=Array(d.PeDefs.PE_PARM_MAX);let F=w.call(this);for(let J=0;J<u.length;J++){const P=d._pe.getValue(F,"*");u[J]=P?d._pe.wrapPointer(P,d._pe.PeParameter):null;F+=Int32Array.BYTES_PER_ELEMENT}return u});h(d._pe.PeHorizon.prototype,"getCoord",r=>function(){const w=this.getSize();if(!w)return null;const u=[],F=r.call(this);R(u,w,F);return u});h(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const w=
d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let u=null;var F=r.call(this);if(!d._pe.compare(F,d._pe.NULL)){u=[F];const J=this.getSteps();if(1<J){F=d._pe.getPointer(F);for(let P=1;P<J;P++)u.push(d._pe.wrapPointer(F+w*P,d._pe.PeGTlistExtendedGTs))}}return u}});const W=d._pe._pe_getPeHorizonSize();K=r=>function(){let w=this._cache;w||(this._cache=w=new Map);if(w.has(r))return w.get(r);let u=null;var F=r.call(this);if(!d._pe.compare(F,d._pe.NULL)){u=[F];const J=F.getNump();if(1<J){F=d._pe.getPointer(F);
for(let P=1;P<J;P++)u.push(d._pe.wrapPointer(F+W*P,d._pe.PeHorizon))}}w.set(r,u);return u};h(d._pe.PeProjcs.prototype,"horizonGcsGenerate",K);h(d._pe.PeProjcs.prototype,"horizonPcsGenerate",K);d._pe.PeObject.prototype.toString=function(r=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const w=d._pe.getPointer(this),u=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(w,r,u))}}function q(c){if(c){var h=d._pe.getClass(c);h&&(h=d._pe.getCache(h))&&
(c=d._pe.getPointer(c))&&delete h[c]}}function y(c,h){const K=[];h=Array(h);for(let W=0;W<c;W++)K.push(d._pe.ensureInt8(h));return K}function L(c){let h;Array.isArray(c[0])?(h=[],c.forEach(K=>{h.push(K[0],K[1])})):h=c;return h}function R(c,h,K,W=!1){if(W)for(W=0;W<2*h;W++)c[W]=d._pe.getValue(K+W*Float64Array.BYTES_PER_ELEMENT,"double");else{W=0===c.length;for(let r=0;r<h;r++)W&&(c[r]=Array(2)),c[r][0]=d._pe.getValue(K,"double"),c[r][1]=d._pe.getValue(K+Float64Array.BYTES_PER_ELEMENT,"double"),K+=
2*Float64Array.BYTES_PER_ELEMENT}}let l;d._pe=null;d.PeCSTransformations=void 0;(function(c){function h(r,w,u){d._pe.ensureCache.prepare();var F=L(u);const J=u===F;F=d._pe.ensureFloat64(F);(r=d._pe._pe_geog_to_proj(d._pe.getPointer(r),w,F))&&R(u,w,F,J);return r}function K(r,w,u){return W(r,w,u,0)}function W(r,w,u,F){d._pe.ensureCache.prepare();var J=L(u);const P=u===J;J=d._pe.ensureFloat64(J);(r=d._pe._pe_proj_to_geog_center(d._pe.getPointer(r),w,J,F))&&R(u,w,J,P);return r}c.geogToProj=h;c.projGeog=
function(r,w,u,F){switch(F){case d.PeDefs.PE_TRANSFORM_P_TO_G:return K(r,w,u);case d.PeDefs.PE_TRANSFORM_G_TO_P:return h(r,w,u)}return 0};c.projToGeog=K;c.projToGeogCenter=W})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;
c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;
c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(c){function h(w,u){let F=null,J=K[w];J||(J={},K[w]=J);J.hasOwnProperty(String(u))?F=
J[u]:(w=d._pe.PeFactory.prototype.factoryByType(w,u),d._pe.compare(w,d._pe.NULL)||(F=w,J[u]=F));return F=r(F)}const K={},W={},r=w=>{if(w){const u=w.getType();switch(u){case d.PeDefs.PE_TYPE_GEOGCS:w=d._pe.castObject(w,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:w=d._pe.castObject(w,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:w=d._pe.castObject(w,d._pe.PeGeogtran);break;default:u&d.PeDefs.PE_TYPE_UNIT&&(w=d._pe.castObject(w,d._pe.PeUnit))}}return w};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};
c.coordsys=function(w){return h(d.PeDefs.PE_TYPE_COORDSYS,w)};c.factoryByType=h;c.fromString=function(w,u){let F=null,J=W[w];J||(J={},W[w]=J);J.hasOwnProperty(u)?F=J[u]:(w=d._pe.PeFactory.prototype.fromString(w,u),d._pe.compare(w,d._pe.NULL)||(F=w,J[u]=F));return F=r(F)};c.geogcs=function(w){return h(d.PeDefs.PE_TYPE_GEOGCS,w)};c.geogtran=function(w){return h(d.PeDefs.PE_TYPE_GEOGTRAN,w)};c.getCode=function(w){return d._pe.PeFactory.prototype.getCode(w)};c.projcs=function(w){return h(d.PeDefs.PE_TYPE_PROJCS,
w)};c.unit=function(w){return h(d.PeDefs.PE_TYPE_UNIT,w)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let h;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;h=d._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(K,W,r,w,u,F){let J=null;const P=new d._pe.PeInteger(F);try{const ha=d._pe.PeGTlistExtended.prototype.getGTlist(K,W,r,w,u,P);if(F=P.val)if(J=[ha],1<F){const E=d._pe.getPointer(ha);for(K=
1;K<F;K++)J.push(d._pe.wrapPointer(E+h*K,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(P)}return J}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(h){if(h&&h.length){for(const K of h)q(K),K.getEntries().forEach(W=>{q(W);W=W.getGeogtran();q(W);W.getParameters().forEach(q);[W.getGeogcs1(),W.getGeogcs2()].forEach(r=>{q(r);const w=r.getDatum();q(w);q(w.getSpheroid());q(r.getPrimem());q(r.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(h[0])}}})(d.PeGTlistExtendedEntry||
(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(h,K,W,r,w){d._pe.ensureCache.prepare();var u=L(W);const F=W===u;u=d._pe.ensureFloat64(u);let J=0;r&&(J=d._pe.ensureFloat64(r));(h=d._pe._pe_geog_to_geog(d._pe.getPointer(h),K,u,J,w))&&R(W,K,u,F);return h}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const h=(W,r,w,u,F,J)=>{d._pe.ensureCache.prepare();switch(W){case "dd":var P=d._pe._pe_geog_to_dd;var ha=d.PeDefs.PE_DD_MAX;
break;case "ddm":P=d._pe._pe_geog_to_ddm;ha=d.PeDefs.PE_DDM_MAX;break;case "dms":P=d._pe._pe_geog_to_dms,ha=d.PeDefs.PE_DMS_MAX}W=0;r&&(W=d._pe.getPointer(r));r=L(u);r=d._pe.ensureFloat64(r);ha=y(w,ha);u=d._pe.ensureInt32(ha);if(F=P(W,w,r,F,u))for(P=0;P<w;P++)J[P]=d._pe.UTF8ToString(ha[P]);return F},K=(W,r,w,u,F)=>{d._pe.ensureCache.prepare();switch(W){case "dd":var J=d._pe._pe_dd_to_geog;break;case "ddm":J=d._pe._pe_ddm_to_geog;break;case "dms":J=d._pe._pe_dms_to_geog}W=0;r&&(W=d._pe.getPointer(r));
r=u.map(P=>d._pe.ensureString(P));u=d._pe.ensureInt32(r);r=d._pe.ensureFloat64(Array(2*w));(J=J(W,w,u,r))&&R(F,w,r);return J};c.geogToDms=function(W,r,w,u,F){return h("dms",W,r,w,u,F)};c.dmsToGeog=function(W,r,w,u){return K("dms",W,r,w,u)};c.geogToDdm=function(W,r,w,u,F){return h("ddm",W,r,w,u,F)};c.ddmToGeog=function(W,r,w,u){return K("ddm",W,r,w,u)};c.geogToDd=function(W,r,w,u,F){return h("dd",W,r,w,u,F)};c.ddToGeog=function(W,r,w,u){return K("dd",W,r,w,u)}})(d.PeNotationDms||(d.PeNotationDms={}));
d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(h,K,W,r,w,u,F){d._pe.ensureCache.prepare();let J=0;h&&
(J=d._pe.getPointer(h));h=L(W);W=d._pe.ensureFloat64(h);h=y(K,d.PeDefs.PE_MGRS_MAX);const P=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_mgrs_extended(J,K,W,r,w,u,P))for(w=0;w<K;w++)F[w]=d._pe.UTF8ToString(h[w]);return r};c.mgrsToGeogExtended=function(h,K,W,r,w){d._pe.ensureCache.prepare();let u=0;h&&(u=d._pe.getPointer(h));h=W.map(F=>d._pe.ensureString(F));W=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*K));(r=d._pe._pe_mgrs_to_geog_extended(u,K,W,r,h))&&R(w,K,h);return r}})(d.PeNotationMgrs||
(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(h,K,W,r,w,u,F){d._pe.ensureCache.prepare();let J=0;h&&(J=d._pe.getPointer(h));h=L(W);W=d._pe.ensureFloat64(h);h=y(K,d.PeDefs.PE_MGRS_MAX);const P=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_usng(J,K,W,r,w,u,P))for(w=0;w<K;w++)F[w]=d._pe.UTF8ToString(h[w]);return r};c.usngToGeog=function(h,K,W,r){d._pe.ensureCache.prepare();var w=0;h&&(w=d._pe.getPointer(h));h=W.map(u=>d._pe.ensureString(u));W=d._pe.ensureInt32(h);h=
d._pe.ensureFloat64(Array(2*K));(w=d._pe._pe_usng_to_geog(w,K,W,h))&&R(r,K,h);return w}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geogToUtm=function(h,K,W,r,w){d._pe.ensureCache.prepare();var u=0;h&&(u=d._pe.getPointer(h));h=L(W);W=d._pe.ensureFloat64(h);
h=y(K,d.PeDefs.PE_UTM_MAX);const F=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_utm(u,K,W,r,F))for(u=0;u<K;u++)w[u]=d._pe.UTF8ToString(h[u]);return r};c.utmToGeog=function(h,K,W,r,w){d._pe.ensureCache.prepare();let u=0;h&&(u=d._pe.getPointer(h));h=W.map(F=>d._pe.ensureString(F));W=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*K));(r=d._pe._pe_utm_to_geog(u,K,W,r,h))&&R(w,K,h);return r}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const h=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(K,W=c.PE_PCSINFO_OPTION_DOMAIN){let r,w;h.has(K)&&(w=h.get(K),w[W]&&(r=w[W]));r||(r=d._pe.PePCSInfo.prototype.generate(K,W),w||(w=[],h.set(K,w)),w[W]=r);return r}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.versionString=
function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const M=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return d._pe},isLoaded:x,isSupported:z,load:n,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},
get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:p},Symbol.toStringTag,{value:"Module"}));d._init=p;d.isLoaded=x;d.isSupported=z;d.load=n;d.pe=M})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,d){const ca=Math.PI/180;var Y=d.earth.radius;const t=
d.earth.eccentricitySquared;Y={a1:Y*t,a2:Y*t*Y*t,a3:Y*t*t/2,a4:Y*t*Y*t*2.5,a5:Y*t+Y*t*t/2,a6:1-t};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,
f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,
f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},
104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=Y;k.spheroids=
d;k.toRadians=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(k){return function(){function d(Y){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Y&&Y.steps)for(const t of Y.steps)t instanceof k?this.steps.push(t):this.steps.push(new k({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}d.cacheKey=function(Y,t){return[void 0!==
Y.wkid&&null!==Y.wkid?Y.wkid.toString():"-1",void 0!==Y.wkt&&null!==Y.wkt?Y.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};d.fromGE=function(Y){const t=new d;let x="";for(const z of Y.steps)Y=k.fromGE(z),t.steps.push(Y),x+=Y.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=x;return t};var ca=d.prototype;ca.getInverse=function(){const Y=new d;Y.steps=[];for(let t=this.steps.length-1;0<=t;t--)Y.steps.push(this.steps[t].getInverse());
return Y};ca.getGTListEntry=function(){let Y="";for(const t of this.steps)Y+=t.uid.toString()+",";Y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Y);return this._gtlistentry};ca.assignCachedGe=function(Y,t,x){this._cached_projection[d.cacheKey(Y,t)]=x};ca.getCachedGeTransformation=function(Y,t){let x="";for(const z of this.steps)x+=z.uid.toString()+",";x!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=x);Y=this._cached_projection[d.cacheKey(Y,
t)];return void 0===Y?null:Y};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let d=0;return function(){function ca(Y=null){this.uid=d++;Y?(this._wkt=void 0!==Y.wkt?Y.wkt:null,this._wkid=void 0!==Y.wkid?Y.wkid:-1,this._isInverse=void 0!==Y.isInverse?!0===Y.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ca.fromGE=function(Y){const t=new ca;t._wkt=Y.wkt;t._wkid=Y.wkid;t._isInverse=Y.isInverse;
return t};ca.prototype.getInverse=function(){const Y=new ca;Y._wkt=this.wkt;Y._wkid=this._wkid;Y._isInverse=!this.isInverse;return Y};k._createClass(ca,[{key:"wkt",get:function(){return this._wkt},set:function(Y){this._wkt=Y;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(Y){this._wkid=Y;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Y){this._isInverse=Y;this.uid=d++}}]);return ca}()})},"esri/geometry/support/zscale":function(){define(["exports",
"../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,d,ca,Y){k.getGeometryZScaler=function(t,x,z){if(d.isNone(x)||d.isNone(z)||z.vcsWkid||Y.equals(x,z))return null;x=ca.getMetersPerVerticalUnitForSR(x);z=ca.getMetersPerVerticalUnitForSR(z);const n=x/z;if(1===n)return null;switch(t){case "point":case "esriGeometryPoint":return p=>{p&&null!=p.z&&(p.z*=n)};case "polyline":case "esriGeometryPolyline":return p=>{if(p)for(const q of p.paths)for(const y of q)2<y.length&&(y[2]*=
n)};case "polygon":case "esriGeometryPolygon":return p=>{if(p)for(const q of p.rings)for(const y of q)2<y.length&&(y[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return p=>{if(p)for(const q of p.points)2<q.length&&(q[2]*=n)};case "extent":case "esriGeometryExtent":return p=>{p&&null!=p.zmin&&null!=p.zmax&&(p.zmin*=n,p.zmax*=n)};default:return null}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],
function(k){let d=function(z,n,p){this.x=z;this.y=n;this.spatialReference=p;this.m=this.z=void 0},ca=function(z,n,p,q){this.rings=z;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},Y=function(z,n,p,q){this.paths=z;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},t=function(z,n,p,q){this.points=z;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},x=function(z,n,p,q,y){this.xmin=z;this.ymin=
n;this.xmax=p;this.ymax=q;this.spatialReference=y;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(z,n){return null==n?null:z.convertJSONToGeometry(n)},exportPoint:function(z,n,p){p=new d(z.getPointX(n),z.getPointY(n),p);const q=z.hasZ(n),y=z.hasM(n);q&&(p.z=z.getPointZ(n));y&&(p.m=z.getPointM(n));return p},exportPolygon:function(z,n,p){return new ca(z.exportPaths(n),p,z.hasZ(n),z.hasM(n))},exportPolyline:function(z,n,p){return new Y(z.exportPaths(n),p,z.hasZ(n),
z.hasM(n))},exportMultipoint:function(z,n,p){return new t(z.exportPoints(n),p,z.hasZ(n),z.hasM(n))},exportExtent:function(z,n,p){var q=z.hasZ(n);const y=z.hasM(n);p=new x(z.getXMin(n),z.getYMin(n),z.getXMax(n),z.getYMax(n),p);q&&(q=z.getZExtent(n),p.zmin=q.vmin,p.zmax=q.vmax);y&&(z=z.getMExtent(n),p.mmin=z.vmin,p.mmax=z.vmax);return p}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l,M,c,h,K,W,r,w,u,F,J,P){function ha(f){return f.every(I=>"exceedslimit"!==I.statisticType)}const E=new z.MemCacheStorage(2E6);let G=0,U=function(){function f(T){this.capabilities={query:K.queryCapabilities};this.geometryType=T.geometryType;this.hasM=T.hasM;this.hasZ=T.hasZ;this.objectIdField=T.objectIdField;this.spatialReference=T.spatialReference;this.definitionExpression=T.definitionExpression;this.featureStore=T.featureStore;this.aggregateAdapter=T.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=T.timeInfo;T.cacheSpatialQueries&&(this._geometryQueryCache=new z.MemCache(G++ +"$$",E));this.fieldsIndex=new F(T.fields);T.scheduler&&T.priority&&(this._frameTask=T.scheduler.registerTask(T.priority))}var I=f.prototype;I.destroy=function(){this._frameTask=x.removeMaybe(this._frameTask);this.clearCache();x.destroyMaybe(this._geometryQueryCache);this._changeHandle=x.removeMaybe(this._changeHandle);x.destroyMaybe(this.fieldsIndex)};
I.clearCache=function(){var T;null==(T=this._geometryQueryCache)?void 0:T.clear();this._timeExtent=this._allItems=null};I.executeQuery=function(){var T=d._asyncToGenerator(function*(N,ea){try{return(yield this._executeQuery(N,{},ea)).createQueryResponse()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new W.QueryEngineResult([],N,this)).createQueryResponse()}});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForCount=function(){var T=d._asyncToGenerator(function*(N=
{},ea){try{return(yield this._executeQuery(N,{returnGeometry:!1,returnCentroid:!1,outSR:null},ea)).createQueryResponseForCount()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}});return function(){return T.apply(this,arguments)}}();I.executeQueryForExtent=function(){var T=d._asyncToGenerator(function*(N,ea){const ma=N.outSR;try{const Q=yield this._executeQuery(N,{returnGeometry:!0,returnCentroid:!1,outSR:null},ea),na=Q.size;if(!na)return{count:0,extent:null};p.set(H,p.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(Q.items,wa=>p.expandWithAABB(H,wa),S);const oa={xmin:H[0],ymin:H[1],xmax:H[3],ymax:H[4],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(H[2])&&isFinite(H[5])&&(oa.zmin=H[2],oa.zmax=H[5]);const qa=h.project(oa,Q.spatialReference,ma);qa.spatialReference=u.cleanFromGeometryEngine(ma||this.spatialReference);if(0===qa.xmax-qa.xmin){const wa=n.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=wa;qa.xmax+=wa}if(0===qa.ymax-qa.ymin){const wa=
n.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=wa;qa.ymax+=wa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const wa=n.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=wa;qa.zmax+=wa}return{count:na,extent:qa}}catch(Q){if(Q===u.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw Q;}});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForIds=function(){var T=d._asyncToGenerator(function*(N,ea){return this.executeQueryForIdSet(N,ea).then(ma=>
Array.from(ma))});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForIdSet=function(){var T=d._asyncToGenerator(function*(N,ea){try{const ma=yield this._executeQuery(N,{returnGeometry:!0,returnCentroid:!1,outSR:null},ea),Q=ma.items,na=new Set;yield this._reschedule(()=>{for(const oa of Q)na.add(ma.featureAdapter.getObjectId(oa))},ea);return na}catch(ma){if(ma===u.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForSnapping=
function(){var T=d._asyncToGenerator(function*(N,ea){const {point:ma,distance:Q,types:na}=N;if(na===W.SnappingTypes.NONE)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(N.query),ea),qa=!l.equals(ma.spatialReference,this.spatialReference);qa&&(yield h.checkProjectionSupport(ma.spatialReference,this.spatialReference));var wa="number"===typeof Q?Q:Q.x,Ma="number"===typeof Q?Q:Q.y;wa={xmin:ma.x-wa,xmax:ma.x+wa,ymin:ma.y-Ma,ymax:ma.y+Ma,spatialReference:ma.spatialReference};
wa=qa?h.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ma=(yield R.normalizeCentralMeridian(L.fromJSON(ma),null,{signal:ea}))[0];const Ja=(yield R.normalizeCentralMeridian(L.fromJSON(wa),null,{signal:ea}))[0];if(x.isNone(Ma)||x.isNone(Ja))return{candidates:[]};const La=new W.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),oa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(La),ea);yield this._reschedule(()=>this._executeTimeQuery(La),ea);yield this._reschedule(()=>
this._executeAttributesQuery(La),ea);ea=Ma.toJSON();ea=qa?h.project(ea,this.spatialReference):ea;return La.createSnappingResponse({...N,point:ea,distance:qa?Math.max(wa.xmax-wa.xmin,wa.ymax-wa.ymin)/2:Q},ma.spatialReference)});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForLatestObservations=function(){var T=d._asyncToGenerator(function*(N,ea){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:N,timeInfo:this.timeInfo});try{const ma=yield this._executeQuery(N,{},ea);yield this._reschedule(()=>this._filterLatest(ma),ea);return ma.createQueryResponse()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new W.QueryEngineResult([],N,this)).createQueryResponse()}});return function(N,ea){return T.apply(this,arguments)}}();I.executeQueryForSummaryStatistics=function(){var T=d._asyncToGenerator(function*(N={},ea,ma){const {field:Q,normalizationField:na,valueExpression:oa}=ea;
return(yield this._getQueryEngineResultForStats(N,{field:Q,normalizationField:na,valueExpression:oa},ma)).createSummaryStatisticsResponse(ea)});return function(){return T.apply(this,arguments)}}();I.executeQueryForUniqueValues=function(){var T=d._asyncToGenerator(function*(N={},ea,ma){const {field:Q,valueExpression:na}=ea;return(yield this._getQueryEngineResultForStats(N,{field:Q,valueExpression:na},ma)).createUniqueValuesResponse(ea)});return function(){return T.apply(this,arguments)}}();I.executeQueryForClassBreaks=
function(){var T=d._asyncToGenerator(function*(N={},ea,ma){const {field:Q,normalizationField:na,valueExpression:oa}=ea;return(yield this._getQueryEngineResultForStats(N,{field:Q,normalizationField:na,valueExpression:oa},ma)).createClassBreaksResponse(ea)});return function(){return T.apply(this,arguments)}}();I.executeQueryForHistogram=function(){var T=d._asyncToGenerator(function*(N={},ea,ma){const {field:Q,normalizationField:na,valueExpression:oa}=ea;return(yield this._getQueryEngineResultForStats(N,
{field:Q,normalizationField:na,valueExpression:oa},ma)).createHistogramResponse(ea)});return function(){return T.apply(this,arguments)}}();I._schedule=function(){var T=d._asyncToGenerator(function*(N,ea){return x.isSome(this._frameTask)?this._frameTask.schedule(N,ea):N(P.noBudget)});return function(N,ea){return T.apply(this,arguments)}}();I._reschedule=function(){var T=d._asyncToGenerator(function*(N,ea){return x.isSome(this._frameTask)?this._frameTask.reschedule(N,ea):N(P.noBudget)});return function(N,
ea){return T.apply(this,arguments)}}();I._getAll=function(T){x.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new W.QueryEngineResult(this._allItems,T,this)};I._executeQuery=function(){var T=d._asyncToGenerator(function*(N,ea,ma){N=t.clone(N);N=yield this._schedule(()=>u.normalizeQuery(N,this.definitionExpression,this.spatialReference),ma);N=yield this._reschedule(()=>this._checkQuerySupport(N),ma);N={...N,...ea};const Q=yield this._reschedule(()=>this._executeSceneFilterQuery(N,
ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(N,Q,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),ma);return na});return function(N,ea,ma){return T.apply(this,arguments)}}();I._executeSceneFilterQuery=function(){var T=d._asyncToGenerator(function*(N,ea){var ma=this;if(x.isNone(N.sceneFilter))return null;
const {outSR:Q,returnGeometry:na,returnCentroid:oa}=N;var qa=this.featureStore.featureSpatialReference,wa=N.sceneFilter.geometry;const Ma=x.isNone(qa)||l.equals(qa,wa.spatialReference)?wa:h.project(wa,qa);if(!Ma)return null;qa=na||oa;qa=l.isValid(Q)&&!l.equals(this.spatialReference,Q)&&qa?function(){var b=d._asyncToGenerator(function*(m){return ma._project(m,Q)});return function(m){return b.apply(this,arguments)}}():b=>b;const Ja=this.featureAdapter;wa=this._searchFeatures(this._getQueryBBoxes(Ma));
if("disjoint"===N.sceneFilter.spatialRelationship){if(!wa.length)return null;const b=new Set;for(var La of wa)b.add(Ja.getObjectId(La));const m=yield this._reschedule(()=>this.featureStore.toArray(),ea);La=yield this._reschedule(d._asyncToGenerator(function*(){const ia=yield r.getSpatialQueryOperator("esriSpatialRelDisjoint",Ma,ma.geometryType,ma.hasZ,ma.hasM),g=yield ma._runSpatialFilter(m,C=>!b.has(Ja.getObjectId(C))||ia(Ja.getGeometry(C)),ea);return new W.QueryEngineResult(g,N,ma)}),ea);return qa(La)}if(!wa.length)return new W.QueryEngineResult([],
N,this);if(this._canExecuteSinglePass(Ma,N))return qa(new W.QueryEngineResult(wa,N,this));const Za=yield r.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);La=yield this._runSpatialFilter(wa,b=>Za(Ja.getGeometry(b)),ea);return qa(new W.QueryEngineResult(La,N,this))});return function(N,ea){return T.apply(this,arguments)}}();I._executeGeometryQuery=function(){var T=d._asyncToGenerator(function*(N,ea,ma){var Q=this;if(x.isSome(ea)&&0===ea.items.length)return ea;
N=x.isSome(ea)?ea.query:N;const {geometry:na,outSR:oa,spatialRel:qa,returnGeometry:wa,returnCentroid:Ma}=N;var Ja=this.featureStore.featureSpatialReference;const La=!na||x.isNone(Ja)||l.equals(Ja,na.spatialReference)?na:h.project(na,Ja),Za=wa||Ma,b=l.isValid(oa)&&!l.equals(this.spatialReference,oa),m=this._geometryQueryCache&&x.isNone(ea)?b&&Za?JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa}):
null;Ja=m?this._geometryQueryCache.get(m):null;if(x.isSome(Ja))return new W.QueryEngineResult(Ja,N,this);Ja=function(){var Z=d._asyncToGenerator(function*(ka){b&&Za&&(yield Q._project(ka,oa));m&&Q._geometryQueryCache.put(m,ka.items,ka.items.length+1);return ka});return function(ka){return Z.apply(this,arguments)}}();if(!La)return Ja(x.isSome(ea)?ea:this._getAll(N));const ia=this.featureAdapter;let g=this._searchFeatures(this._getQueryBBoxes(na));if("esriSpatialRelDisjoint"===qa){if(!g.length)return Ja(x.isSome(ea)?
ea:this._getAll(N));const Z=new Set;for(var C of g)Z.add(ia.getObjectId(C));const ka=x.isSome(ea)?ea.items:yield this._reschedule(()=>this.featureStore.toArray(),ma);C=yield this._reschedule(d._asyncToGenerator(function*(){const ja=yield r.getSpatialQueryOperator(qa,La,Q.geometryType,Q.hasZ,Q.hasM),D=yield Q._runSpatialFilter(ka,O=>!Z.has(ia.getObjectId(O))||ja(ia.getGeometry(O)),ma);return new W.QueryEngineResult(D,N,Q)}),ma);return Ja(C)}if(x.isSome(ea)){const Z=new ca.PositionHint;g=g.filter(ka=>
0<=ca.indexOf(ea.items,ka,ea.items.length,Z))}if(!g.length)return Ja=new W.QueryEngineResult([],N,this),m&&this._geometryQueryCache.put(m,Ja.items,1),Ja;if(this._canExecuteSinglePass(La,N))return Ja(new W.QueryEngineResult(g,N,this));const X=yield r.getSpatialQueryOperator(qa,La,this.geometryType,this.hasZ,this.hasM);C=yield this._runSpatialFilter(g,Z=>X(ia.getGeometry(Z)),ma);return Ja(new W.QueryEngineResult(C,N,this))});return function(N,ea,ma){return T.apply(this,arguments)}}();I._executeAggregateIdsQuery=
function(T){if(0!==T.items.length&&T.query.aggregateIds&&T.query.aggregateIds.length&&!x.isNone(this.aggregateAdapter)){var N=new Set;for(const ma of T.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ma).forEach(Q=>N.add(Q));var ea=this.featureAdapter.getObjectId;T.items=T.items.filter(ma=>N.has(ea(ma)))}};I._executeObjectIdsQuery=function(T){if(0!==T.items.length&&T.query.objectIds&&T.query.objectIds.length){var N=new Set(T.query.objectIds),ea=this.featureAdapter.getObjectId;T.items=
T.items.filter(ma=>N.has(ea(ma)))}};I._executeTimeQuery=function(T){if(0!==T.items.length){var N=w.getTimeOperator(this.timeInfo,T.query.timeExtent,this.featureAdapter);x.isNone(N)||(T.items=T.items.filter(N))}};I._executeAttributesQuery=function(T){if(0!==T.items.length){var N=c.getWhereClause(T.query.where,this.fieldsIndex);if(N){if(!N.isStandardized)throw new TypeError("Where clause is not standardized");T.items=T.items.filter(ea=>N.testFeature(ea,this.featureAdapter))}}};I._runSpatialFilter=function(){var T=
d._asyncToGenerator(function*(N,ea,ma){var Q=this;if(!ea)return N;if(x.isNone(this._frameTask))return N.filter(wa=>ea(wa));let na=0;const oa=[],qa=function(){var wa=d._asyncToGenerator(function*(Ma){for(;na<N.length;){const Ja=N[na++];ea(Ja)&&(oa.push(Ja),Ma.madeProgress());Ma.done&&(yield Q._reschedule(La=>qa(La),ma))}});return function(Ma){return wa.apply(this,arguments)}}();return this._reschedule(wa=>qa(wa),ma).then(()=>oa)});return function(N,ea,ma){return T.apply(this,arguments)}}();I._filterLatest=
function(T){const {trackIdField:N,startTimeField:ea,endTimeField:ma}=this.timeInfo,Q=ma||ea,na=new Map,oa=this.featureAdapter.getAttribute;for(const qa of T.items){const wa=oa(qa,N),Ma=oa(qa,Q),Ja=na.get(wa);(!Ja||Ma>oa(Ja,Q))&&na.set(wa,qa)}T.items=Array.from(na.values())};I._canExecuteSinglePass=function(T,N){({spatialRel:N}=N);return r.canQueryWithRBush(T)&&("esriSpatialRelEnvelopeIntersects"===N||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===
N||"esriSpatialRelWithin"===N))};I._project=function(){var T=d._asyncToGenerator(function*(N,ea){if(!ea||l.equals(this.spatialReference,ea))return N;const ma=this.featureAdapter;ea=yield h.projectMany(N.items.map(Q=>u.getGeometry(this.geometryType,this.hasZ,this.hasM,ma.getGeometry(Q))),this.spatialReference,ea);N.items=ea.map((Q,na)=>ma.cloneWithGeometry(N.items[na],M.convertFromGeometry(Q,this.hasZ,this.hasM)));return N});return function(N,ea){return T.apply(this,arguments)}}();I._getQueryBBoxes=
function(T){if(r.canQueryWithRBush(T)){if(L.isExtent(T))return[q.fromValues(T.xmin,T.ymin,T.xmax,T.ymax)];if(L.isPolygon(T))return T.rings.map(N=>q.fromValues(Math.min(N[0][0],N[2][0]),Math.min(N[0][1],N[2][1]),Math.max(N[0][0],N[2][0]),Math.max(N[0][1],N[2][1])))}return[y.getBoundsXY(q.create(),T)]};I._searchFeatures=function(T){for(const N of T)this.featureStore.forEachInBounds(N,ea=>A.add(ea));T=Array.from(A.values());A.clear();return T};I._checkStatisticsSupport=function(){var T=d._asyncToGenerator(function*(N,
ea){if(0>N.distance||null!=N.geometryPrecision||N.multipatchOption||N.pixelSize||N.relationParam||N.text||N.outStatistics||N.groupByFieldsForStatistics||N.having||N.orderByFields)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:N});this._checkAttributesQuerySupport(N);return Promise.all([this._checkStatisticsParamsSupport(ea),r.checkSpatialQuerySupport(N,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,N.outSR)]).then(()=>N)});
return function(N,ea){return T.apply(this,arguments)}}();I._checkStatisticsParamsSupport=function(){var T=d._asyncToGenerator(function*(N){var ea=[];N.valueExpression&&({arcadeUtils:ea}=yield J.loadArcade(),ea=ea.extractFieldNames(N.valueExpression));N.field&&ea.push(N.field);N.normalizationField&&ea.push(N.normalizationField);if(!ea.length)throw new Y("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:N});c.validateFields(this.fieldsIndex,ea,"params contains missing fields")});
return function(N){return T.apply(this,arguments)}}();I._checkQuerySupport=function(){var T=d._asyncToGenerator(function*(N){if(0>N.distance||null!=N.geometryPrecision||N.multipatchOption||N.pixelSize||N.relationParam||N.text)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:N});this._checkAttributesQuerySupport(N);this._checkStatisticsQuerySupport(N);return Promise.all([r.checkSpatialQuerySupport(N,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,
N.outSR)]).then(()=>N)});return function(N){return T.apply(this,arguments)}}();I._checkAttributesQuerySupport=function(T){const {outFields:N,orderByFields:ea,returnDistinctValues:ma,outStatistics:Q}=T,na=Q?Q.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ea&&0<ea.length){const oa=ea.map(qa=>{const wa=qa.toLowerCase();return wa.includes(" asc")?wa.split(" asc")[0]:wa.includes(" desc")?wa.split(" desc")[0]:qa}).filter(qa=>!na.includes(qa));c.validateFields(this.fieldsIndex,
oa,"orderByFields contains missing fields")}if(N&&0<N.length)c.validateFields(this.fieldsIndex,N,"outFields contains missing fields");else if(ma)throw new Y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:T});c.validateWhere(this.fieldsIndex,T.where)};I._checkStatisticsQuerySupport=function(T){const {outStatistics:N,groupByFieldsForStatistics:ea,having:ma}=T;var Q=ea&&ea.length,na=N&&N.length;if(ma){if(!Q||!na)throw new Y("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:T});c.validateHaving(this.fieldsIndex,ma,N)}if(na&&ha(N)){na=N.map(oa=>oa.onStatisticField).filter(Boolean);c.validateFields(this.fieldsIndex,na,"onStatisticFields contains missing fields");Q&&c.validateFields(this.fieldsIndex,ea,"groupByFieldsForStatistics contains missing fields");for(const oa of N){const {onStatisticField:qa,statisticType:wa}=oa;if(("percentile_disc"===wa||"percentile_cont"===wa)&&"statisticParameters"in
oa){if({statisticParameters:Q}=oa,!Q)throw new Y("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:oa,query:T});}else if("count"!==wa&&qa&&c.hasInvalidFieldType(qa,this.fieldsIndex))throw new Y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:oa,query:T});}}};I._getQueryEngineResultForStats=function(){var T=d._asyncToGenerator(function*(N,ea,ma){N=t.clone(N);try{N=yield this._schedule(()=>u.normalizeQuery(N,
this.definitionExpression,this.spatialReference),ma);N=yield this._reschedule(()=>this._checkStatisticsSupport(N,ea),ma);const Q=yield this._reschedule(()=>this._executeSceneFilterQuery(N,ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(N,Q,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),
ma);return na}catch(Q){if(Q!==u.QUERY_ENGINE_EMPTY_RESULT)throw Q;return new W.QueryEngineResult([],N,this)}});return function(N,ea,ma){return T.apply(this,arguments)}}();d._createClass(f,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const T=this.featureStore.fullBounds;return x.isNone(T)?null:{xmin:T[0],ymin:T[1],xmax:T[2],ymax:T[3],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=w.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return f}();const S=p.create(),H=p.create(),A=new Set;k.Feature=function(f,I=null,T,N,ea){this.attributes=f;this.geometry=T;this.centroid=N;this.filterFlags=ea;this.groupId=-1;this.displayId=I};k.QueryEngine=U;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(k,d,ca,Y){k.RemoveMode=void 0;(function(z){z[z.ALL=0]="ALL";z[z.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let t=function(){function z(p,q,y){this._namespace=p;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";y&&(this._storage.registerRemoveFunc(this._namespace,y),this._removeFunc=!0)}var n=z.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(p,q,y,L=0){this._storage.put(this._namespace+p,q,y,L)};n.get=function(p){p=this._storage.get(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};n.pop=function(p){p=this._storage.pop(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};n.updateSize=function(p,q,y){this._storage.updateSize(this._namespace+p,q,y)};n.clear=function(){this._storage.clear(this._namespace)};
n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};d._createClass(z,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return z}(),x=function(){function z(p=10485760){this._maxSize=p;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Y;this._users=new Y}var n=z.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(p){this._users.push(p)};n.deregister=function(p){this._users.removeUnordered(p)};n.registerRemoveFunc=function(p,q){this._removeFuncs.push([p,q])};n.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(q=>q[0]!==p)};n.put=function(p,q,y,L){const R=this._db.get(p);R&&(this._size-=
R.size,this._db.delete(p),R.entry!==q&&this._notifyRemove(p,R.entry,k.RemoveMode.ALL));y>this._maxSize?this._notifyRemove(p,q,k.RemoveMode.ALL):void 0===q?console.warn("Refusing to cache undefined entry "):!y||0>y?console.warn("Refusing to cache entry with invalid size "+y):(L=1+Math.max(L,-3)- -3,this._db.set(p,{entry:q,size:y,lifetime:L,lives:L}),this._size+=y,this._checkSizeLimit())};n.updateSize=function(p,q,y){const L=this._db.get(p);if(L&&L.entry===q){for(this._size-=L.size;y>this._maxSize;)if(y=
this._notifyRemove(p,q,k.RemoveMode.SOME),!(ca.isSome(y)&&0<y)){this._db.delete(p);return}L.size=y;this._size+=y;this._checkSizeLimit()}};n.pop=function(p){const q=this._db.get(p);if(q)return this._size-=q.size,this._db.delete(p),++this._hit,q.entry;++this._miss};n.get=function(p){const q=this._db.get(p);if(void 0===q)++this._miss;else return this._db.delete(p),q.lives=q.lifetime,this._db.set(p,q),++this._hit,q.entry};n.getStats=function(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},y=[];this._db.forEach((l,M)=>{const c=l.lifetime;y[c]=(y[c]||0)+l.size;this._users.forAll(h=>{h=h.namespace;M.startsWith(h)&&(q[h]=(q[h]||0)+l.size)})});const L={};this._users.forAll(l=>{const M=l.namespace;!isNaN(l.hitRate)&&0<l.hitRate?(q[M]=q[M]||0,L[M]=Math.round(100*l.hitRate)+"%"):L[M]="0%"});var R=Object.keys(q);R.sort((l,M)=>q[M]-q[l]);R.forEach(l=>p[l]=Math.round(q[l]/2**20)+"MB / "+L[l]);
for(R=y.length-1;0<=R;--R){const l=y[R];l&&(p["Priority "+(R+-3-1)]=Math.round(l/this.size*100)+"%")}return p};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};n.clear=function(p){this._db.forEach((q,y)=>{y.startsWith(p)&&(this._size-=q.size,this._db.delete(y),this._notifyRemove(y,q.entry,k.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((p,q)=>this._notifyRemove(q,p.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/
(this._hit+this._miss)};n._notifyRemove=function(p,q,y){let L;this._removeFuncs.some(R=>p.startsWith(R[0])?(R=R[1](q,y),"number"===typeof R&&(L=R),!0):!1);return L};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [p,q]of this._db){this._db.delete(p);if(1>=q.lives){this._size-=q.size;const y=this._notifyRemove(p,q.entry,k.RemoveMode.SOME);ca.isSome(y)&&0<y&&(this._size+=y,q.lives=q.lifetime,q.size=y,this._db.set(p,q))}else--q.lives,this._db.set(p,q);if(this._size<=.9*this.maxSize)break}};
d._createClass(z,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimit()}}]);return z}();k.MIN_PRIORITY=-3;k.MemCache=t;k.MemCacheStorage=x;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R){function l(u){const F=[];let J=0,P=0;for(let ha=0;ha<u.length;ha++){const E=u[ha];let G=null;for(let U=0;U<E.length;U++)G=E[U],F.push(G),0===U?P=J=G[0]:(J=Math.min(J,G[0]),P=Math.max(P,G[0]));G&&F.push([(J+P)/2,0])}return F}function M(u,F){if(!(u instanceof n||u instanceof z))throw w.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Y("straightLineDensify: the input geometry is neither polyline nor polygon");var J=p.getGeometryParts(u);
const P=[];for(const E of J){J=[];P.push(J);J.push([E[0][0],E[0][1]]);for(let G=0;G<E.length-1;G++){const U=E[G][0],S=E[G][1],H=E[G+1][0],A=E[G+1][1];var ha=Math.sqrt((H-U)*(H-U)+(A-S)*(A-S));const f=(A-S)/ha,I=(H-U)/ha,T=ha/F;if(1<T){for(let N=1;N<=T-1;N++){const ea=N*F;J.push([I*ea+U,f*ea+S])}ha=(ha+Math.floor(T-1)*F)/2;J.push([I*ha+U,f*ha+S])}J.push([H,A])}}return"polygon"===u.type?new z({rings:P,spatialReference:u.spatialReference}):new n({paths:P,spatialReference:u.spatialReference})}function c(u,
F,J){F&&(u=M(u,1E6),u=y.webMercatorToGeographic(u,!0));J&&(u=p.updatePolyGeometry(u,J));return u}function h(u,F,J){if(Array.isArray(u)){var P=u[0];P>F?(J=p.offsetMagnitude(P,F),u[0]=P+-2*J*F):P<J&&(F=p.offsetMagnitude(P,J),u[0]=P+-2*F*J)}else P=u.x,P>F?(J=p.offsetMagnitude(P,F),u=u.clone().offset(-2*J*F,0)):P<J&&(F=p.offsetMagnitude(P,J),u=u.clone().offset(-2*F*J,0));return u}function K(u,F){let J=-1;for(let P=0;P<F.cutIndexes.length;P++){const ha=F.cutIndexes[P],E=F.geometries[P],G=p.getGeometryParts(E);
for(let U=0;U<G.length;U++){const S=G[U];S.some(H=>{if(180>H[0])return!0;H=0;for(var A=0;A<S.length;A++){var f=S[A][0];H=f>H?f:H}H=Number(H.toFixed(9));H=-360*p.offsetMagnitude(H,180);for(A=0;A<S.length;A++)f=E.getPoint(U,A),E.setPoint(U,A,f.clone().offset(H,0));return!0})}if(ha===J)if("polygon"===u[0].type)for(const U of p.getGeometryParts(E))u[ha]=u[ha].addRing(U);else{if("polyline"===u[0].type)for(const U of p.getGeometryParts(E))u[ha]=u[ha].addPath(U)}else J=ha,u[ha]=E}return u}function W(u,F,
J){return r.apply(this,arguments)}function r(){r=d._asyncToGenerator(function*(u,F,J){var P;if(!Array.isArray(u))return W([u],F);F&&"string"!==typeof F&&w.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");F="string"===typeof F?F:null!=(P=null==F?void 0:F.url)?P:ca.geometryServiceUrl;let ha,E,G;let U=0;var S=[];P=[];for(var H of u)if(x.isNone(H))P.push(H);else{if(!A){var A=H.spatialReference;var f=q.getInfo(A);var I=(ha=A.isWebMercator)?102100:4326;E=p.cutParams[I].maxX;
G=p.cutParams[I].minX;var T=p.cutParams[I].plus180Line;I=p.cutParams[I].minus180Line}if(f)if("mesh"===H.type)P.push(H);else if("point"===H.type)P.push(h(H.clone(),E,G));else if("multipoint"===H.type){var N=H.clone();N.points=N.points.map(ea=>h(ea,E,G));P.push(N)}else if("extent"===H.type)N=H.clone()._normalize(!1,!1,f),P.push(N.rings?new z(N):N);else if(H.extent){N=H.extent;const ea=2*p.offsetMagnitude(N.xmin,G)*E;let ma=0===ea?H.clone():p.updatePolyGeometry(H.clone(),ea);N.offset(ea,0);N.intersects(T)&&
N.xmax!==E?(U=N.xmax>U?N.xmax:U,ma=c(ma,ha),S.push(ma),P.push("cut")):N.intersects(I)&&N.xmin!==G?(U=2*N.xmax*E>U?2*N.xmax*E:U,ma=c(ma,ha,360),S.push(ma),P.push("cut")):P.push(ma)}else P.push(H.clone());else P.push(H)}A=p.offsetMagnitude(U,E);f=-90;T=A;for(H=new n;0<A;)I=-180+360*A,H.addPath([[I,f],[I,-1*f]]),f*=-1,A--;if(0<S.length&&0<T){A=yield L.cut(F,S,H,J);A=K(S,A);f=[];S=[];for(T=0;T<P.length;T++)H=P[T],"cut"!==H?S.push(H):(H=A.shift(),I=u[T],x.isSome(I)&&"polygon"===I.type&&I.rings&&1<I.rings.length&&
H.rings.length>=I.rings.length?(f.push(H),S.push("simplify")):S.push(ha?y.geographicToWebMercator(H):H));if(!f.length)return S;P=yield R.simplify(F,f,J);u=[];for(J=0;J<S.length;J++)F=S[J],"simplify"!==F?u.push(F):u.push(ha?y.geographicToWebMercator(P.shift()):P.shift());return u}u=[];for(J=0;J<P.length;J++)F=P[J],"cut"!==F?u.push(F):(F=S.shift(),u.push(!0===ha?y.geographicToWebMercator(F):F));return u});return r.apply(this,arguments)}const w=t.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=
function(u){if(!u)return null;const F=u.extent;if(!F)return null;var J=u.spatialReference&&q.getInfo(u.spatialReference);if(!J)return F;const [P,ha]=J.valid;({width:J}=F);let {xmin:E,xmax:G}=F;[E,G]=[G,E];if("extent"===u.type||0===J||J<=ha||J>2*ha||E<P||G>ha)return F;let U;switch(u.type){case "polygon":if(1<u.rings.length)U=l(u.rings);else return F;break;case "polyline":if(1<u.paths.length)U=l(u.paths);else return F;break;case "multipoint":U=u.points}u=F.clone();for(let S=0;S<U.length;S++){let H=
U[S][0];0>H?(H+=ha,G=Math.max(H,G)):(H-=ha,E=Math.min(H,E))}u.xmin=E;u.xmax=G;return u.width<J?(u.xmin-=ha,u.xmax-=ha,u):F};k.normalizeCentralMeridian=W;k.normalizeMapX=function(u,F){if(F=q.getInfo(F)){const [J,P]=F.valid;F=P-J;if(u<J)for(;u<J;)u+=F;if(u>P)for(;u>P;)u-=F}return u};k.straightLineDensify=M;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(k,d,ca,Y){function t(x){return Y.isPolygon(x)?x.rings:x.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,
-180],[180,180]]],spatialReference:ca.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ca.WGS84})}};k.cutParams=d;k.getGeometryParts=t;k.offsetMagnitude=function(x,z){return Math.ceil((x-z)/(2*z))};k.updatePolyGeometry=function(x,z){const n=t(x);for(const p of n)for(const q of p)q[0]+=z;return x};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,d,ca,Y,t,x){function z(){z=d._asyncToGenerator(function*(n,p,q,y){n="string"===typeof n?t.urlToObject(n):n;const L=p[0].spatialReference;p={...y,query:{...n.query,f:"json",sr:JSON.stringify(L),target:JSON.stringify({geometryType:x.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(q)}};p=yield Y(n.path+"/cut",p);const {cutIndexes:R,geometries:l=[]}=p.data;return{cutIndexes:R,geometries:l.map(M=>{M=x.fromJSON(M);M.spatialReference=L;return M})}});return z.apply(this,arguments)}k.cut=
function(n,p,q,y){return z.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,d,ca,Y,t){function x(){x=d._asyncToGenerator(function*(p,q,y){const L="string"===typeof p?Y.urlToObject(p):p;p=q[0].spatialReference;const R=t.getJsonType(q[0]);q={...y,query:{...L.query,
f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(z(q))}};q=yield ca(L.path+"/simplify",q);return n(q.data,R,p)});return x.apply(this,arguments)}function z(p){return{geometryType:t.getJsonType(p[0]),geometries:p.map(q=>q.toJSON())}}function n(p,q,y){const L=t.getGeometryType(q);return p.map(R=>{R=L.fromJSON(R);R.spatialReference=y;return R})}k.simplify=function(p,q,y){return x.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,d,ca){function Y(p,q){return p?z.get(p,q):null}function t(p,q,y,L=!0){const R=[];for(const l of q)if("*"!==l&&!p.has(l))if(L){q=x(l);try{const M=Y(q,p);if(!M)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!M.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:M});t(p,M.fieldNames,
"expression contains missing fields")}catch(M){if((q=M&&M.details)&&(q.clause||q.where))throw M;q&&q.missingFields?R.push(...q.missingFields):R.push(l)}}else R.push(l);if(R.length)throw new d("feature-store:unsupported-query",y,{missingFields:R});}function x(p){return p.split(" as ")[0]}const z=new ca.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=
function(p){return p.split(" as ")[1]};k.getExpressionFromFieldName=x;k.getWhereClause=Y;k.hasInvalidFieldType=function(p,q){return(p=q.get(p))?!n.has(p.type):!1};k.validateFields=t;k.validateHaving=function(p,q,y){if(!q)return!0;const L=z.get(q,p);if(!L)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:q});if(!L.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:q});t(p,L.fieldNames,"having contains missing fields");
if(!L.getExpressions().every(R=>{const {aggregateType:l,field:M}=R,c=p.has(M)&&p.get(M).name;return y.some(h=>{const {onStatisticField:K,statisticType:W}=h;return(p.has(K)&&p.get(K).name)===c&&W.toLowerCase().trim()===l})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:q});return!0};k.validateWhere=function(p,q){if(!q)return!0;const y=z.get(q,p);if(!y)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:q});
if(!y.isStandardized)throw new d("feature-store:unsupported-query","where clause is not standard",{where:q});t(p,y.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,d,ca){let Y=function(){function t(x,z){this._cache=new d(x);this._invalidCache=new d(z)}t.prototype.get=function(x,z){const n=`${z.uid}:${x}`,
p=this._cache.get(n);if(p)return p;if(void 0!==this._invalidCache.get(n))return null;try{const q=ca.WhereClause.create(x,z);this._cache.put(n,q);return q}catch{return this._invalidCache.put(n,null),null}};return t}();k.WhereClauseCache=Y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function d(Y,t){this._storage=new k.MemCacheStorage;this._storage.maxSize=Y;t&&this._storage.registerRemoveFunc("",
t)}var ca=d.prototype;ca.put=function(Y,t){this._storage.put(Y,t,1,1)};ca.pop=function(Y){return this._storage.pop(Y)};ca.get=function(Y){return this._storage.get(Y)};ca.clear=function(){this._storage.clearAll()};ca.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,d,ca,Y,t,x){function z(H,A){H+="";return H.length>=
A?H:Array(A-H.length+1).join("0")+H}function n(H,A,f="0",I="0",T="0",N="0",ea="",ma="0",Q="0"){return"+"===ea||"-"===ea?(H=`${z(parseInt(H,10),4)}-${z(parseInt(A,10),2)}-${z(parseInt(f,10),2)}`,A="",10>parseFloat(N)&&(A="0"),I=`${z(parseInt(I,10),2)}:${z(parseInt(T,10),2)}:${A+parseFloat(N).toString()}`,ea=`${ea}${z(parseInt(ma,10),2)}:${z(parseInt(Q,10),2)}`,new Date(H+"T"+I+ea)):new Date(parseInt(H,10),parseInt(A,10)-1,parseInt(f,10),parseInt(I,10),parseInt(T,10),parseFloat(N))}function p(H){let A=
u.exec(H);if(null!==A){const [,f,I,T,N,ea,ma]=A;return n(f,I,T,N,ea,ma)}A=F.exec(H);if(null!==A){const [,f,I,T,N,ea,ma,Q,na,oa]=A;return n(f,I,T,N,ea,ma,Q,na,oa)}A=J.exec(H);if(null!==A){const [,f,I,T,N,ea,ma,Q,na]=A;return n(f,I,T,N,ea,"0",ma,Q,na)}A=P.exec(H);if(null!==A){const [,f,I,T,N,ea]=A;return n(f,I,T,N,ea)}A=w.exec(H);if(null!==A){const [,f,I,T]=A;return n(f,I,T)}throw Error("SQL Invalid Timestamp");}function q(H){H=w.exec(H);if(null===H)throw Error("SQL Invalid Date");const [,A,f,I]=H;
return new Date(parseInt(A,10),parseInt(f,10)-1,parseInt(I,10))}function y(H){return Array.isArray(H)?H:[H]}function L(H){return null!==H?!0!==H:null}function R(H,A){return null!=H&&null!=A?!0===H&&!0===A:!1===H||!1===A?!1:null}function l(H,A){return null!=H&&null!=A?!0===H||!0===A:!0===H||!0===A?!0:null}function M(H,A){if(null==H)return null;let f=!1;for(const I of A)if(null==I)f=null;else if(H===I){f=!0;break}return f}function c(H,A,f){if(null==H)return null;{let I="",T=U.Normal;for(let N=0;N<A.length;N++){const ea=
A.charAt(N);switch(T){case U.Normal:ea===f?T=U.Escaped:I="-[]/{}()*+?.\\^$|".includes(ea)?I+("\\"+ea):"%"===ea?I+".*":"_"===ea?I+".":I+ea;break;case U.Escaped:I="-[]/{}()*+?.\\^$|".includes(ea)?I+("\\"+ea):I+ea,T=U.Normal}}A=new RegExp("^"+I+"$","m")}return A.test(H)}function h(H){return H instanceof Date?H.valueOf():H}function K(H,A,f){if(null==A||null==f)return null;A=h(A);f=h(f);switch(H){case "\x3c\x3e":return A!==f;case "\x3d":return A===f;case "\x3e":return A>f;case "\x3c":return A<f;case "\x3e\x3d":return A>=
f;case "\x3c\x3d":return A<=f}}function W(H,A,f){if(A instanceof t.SqlInterval)if(f instanceof Date)switch(H){case "+":return new Date(A.valueInMilliseconds()+f.getTime());case "-":return A.valueInMilliseconds()-f.getTime();case "*":return A.valueInMilliseconds()*f.getTime();case "/":return A.valueInMilliseconds()/f.getTime()}else if(f instanceof t.SqlInterval)switch(H){case "+":return t.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+f.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-
f.valueInMilliseconds());case "*":return A.valueInMilliseconds()*f.valueInMilliseconds();case "/":return A.valueInMilliseconds()/f.valueInMilliseconds()}else A=A.valueInMilliseconds();else if(f instanceof t.SqlInterval)if(A instanceof Date)switch(H){case "+":return new Date(f.valueInMilliseconds()+A.getTime());case "-":return new Date(A.getTime()-f.valueInMilliseconds());case "*":return A.getTime()*f.valueInMilliseconds();case "/":return A.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();
else if(A instanceof Date&&"number"===typeof f)switch(f*=864E5,A=A.getTime(),H){case "+":return new Date(A+f);case "-":return new Date(A-f);case "*":return new Date(A*f);case "/":return new Date(A/f)}else if(f instanceof Date&&"number"===typeof A)switch(A*=864E5,f=f.getTime(),H){case "+":return new Date(A+f);case "-":return new Date(A-f);case "*":return new Date(A*f);case "/":return new Date(A/f)}switch(H){case "+":return A+f;case "-":return A-f;case "*":return A*f;case "/":return A/f}}function r(H,
A,f,I){H=I.getAttribute(H,A);return null!=H&&1===f[A]?new Date(H):H}const w=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ha=new Set(["current_timestamp","current_date","current_time"]);let E=function(){function H(){}
H.makeBool=function(A){return!0===A};H.featureValue=function(A,f,I,T){return r(A,f,I,T)};H.equalsNull=function(A){return null===A};H.applyLike=function(A,f,I){return c(A,f,I)};H.ensureArray=function(A){return y(A)};H.applyIn=function(A,f){return M(A,f)};H.currentDate=function(){const A=new Date;A.setHours(0,0,0,0);return A};H.makeSqlInterval=function(A,f,I){return t.SqlInterval.createFromValueAndQualifer(A,f,I)};H.convertInterval=function(A){return A instanceof t.SqlInterval?A.valueInMilliseconds():
A};H.currentTimestamp=function(){return new Date};H.compare=function(A,f,I){return K(A,f,I)};H.calculate=function(A,f,I){return W(A,f,I)};H.makeComparable=function(A){return h(A)};H.evaluateFunction=function(A,f){return t.evaluateFunction(A,f)};H.lookup=function(A,f){A=f[A];return void 0===A?null:A};H.between=function(A,f){return null==A||null==f[0]||null==f[1]?null:A>=f[0]&&A<=f[1]};H.notbetween=function(A,f){return null==A||null==f[0]||null==f[1]?null:A<f[0]||A>f[1]};H.ternaryNot=function(A){return L(A)};
H.ternaryAnd=function(A,f){return R(A,f)};H.ternaryOr=function(A,f){return l(A,f)};return H}(),G=function(){function H(f,I){this.fieldsIndex=I;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=x.WhereGrammar.parse(f);const {isStandardized:T,isAggregate:N,referencedFieldNames:ea}=this._extractExpressionInfo(I);this.referencedFieldNames=ea;this.isStandardized=T;this.isAggregate=N}H.create=function(f,I){return new H(f,I)};var A=H.prototype;A.testSet=function(f,I=S){const T=
{};for(const N of this.fieldNames)T[N]=f.map(ea=>I.getAttribute(ea,N));return!!this._evaluateNode(this.parseTree,{attributes:T},S)};A.calculateValue=function(f,I=S){f=this._evaluateNode(this.parseTree,f,I);return f instanceof t.SqlInterval?f.valueInMilliseconds()/864E5:f};A.calculateValueCompiled=function(f,I=S){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,I,this.datefields);if(ca("esri-csp-restrictions"))return this.calculateValue(f,I);this._compileMe();
return this.parseTree._compiledVersion(f,this.parameters,I,this.datefields)};A.testFeature=function(f,I=S){return!!this._evaluateNode(this.parseTree,f,I)};A.testFeatureCompiled=function(f,I=S){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,this.parameters,I,this.datefields);if(ca("esri-csp-restrictions"))return this.testFeature(f,I);this._compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,I,this.datefields)};A.getFunctions=function(){const f=
new Set;this._visitAll(this.parseTree,I=>{"function"===I.type&&f.add(I.name.toLowerCase())});return Array.from(f)};A.getExpressions=function(){const f=new Map;this._visitAll(this.parseTree,I=>{if("function"===I.type){const T=I.name.toLowerCase();I=I.args.value[0];if("column-reference"===I.type){I=I.column;const N=`${T}-${I}`;f.has(N)||f.set(N,{aggregateType:T,field:I})}}});return[...f.values()]};A.getVariables=function(){const f=new Set;this._visitAll(this.parseTree,I=>{"parameter"===I.type&&f.add(I.value.toLowerCase())});
return Array.from(f)};A._compileMe=function(){const f="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",f)).bind(E)};A._extractExpressionInfo=function(f){const I=[],T=new Set;let N=!0,ea=!0;this._visitAll(this.parseTree,ma=>{switch(ma.type){case "column-reference":{const Q=f.get(ma.column);let na,oa;Q?na=oa=Q.name:(oa=ma.column,na=oa.toLowerCase());!Q||"date"!==Q.type&&
"esriFieldTypeDate"!==Q.type||(this.datefields[Q.name]=1);T.has(na)||(T.add(na),I.push(oa));ma.column=oa;break}case "function":{const {name:Q,args:na}=ma;ma=na.value.length;N&&(N=t.isStandardized(Q,ma));ea&&(ea=Y.isAggregate(Q,ma))}}});return{referencedFieldNames:Array.from(I),isStandardized:N,isAggregate:ea}};A._visitAll=function(f,I){if(null!=f)switch(I(f),f.type){case "when-clause":this._visitAll(f.operand,I);this._visitAll(f.value,I);break;case "case-expression":for(const T of f.clauses)this._visitAll(T,
I);"simple"===f.format&&this._visitAll(f.operand,I);null!==f.else&&this._visitAll(f.else,I);break;case "expression-list":for(const T of f.value)this._visitAll(T,I);break;case "unary-expression":this._visitAll(f.expr,I);break;case "binary-expression":this._visitAll(f.left,I);this._visitAll(f.right,I);break;case "function":this._visitAll(f.args,I)}};A.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+
","+JSON.stringify(f.op)+")";case "case-expression":var I="";if("simple"===f.format){var T="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";I="( ";for(let N=0;N<f.clauses.length;N++)I+=" ("+T+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[N].operand)+")) ? ("+this.evaluateNodeToJavaScript(f.clauses[N].value)+") : "}else for(I="( ",T=0;T<f.clauses.length;T++)I+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[T].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(f.clauses[T].value)+") : ";I=null!==f.else?I+this.evaluateNodeToJavaScript(f.else):I+"null";return I+=" )";case "parameter":return"this.lookup("+JSON.stringify(f.value.toLowerCase())+",lookups)";case "expression-list":I="[";for(T of f.value)"["!==I&&(I+=","),I+=this.evaluateNodeToJavaScript(T);return I+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary-expression":switch(f.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+
this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")"}throw Error("Not Supported Operator "+f.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+q(f.value).getTime().toString()+"))";case "timestamp":return"(new Date("+p(f.value).getTime().toString()+"))";case "current-time":return"date"===
f.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};A._evaluateNode=function(f,I,T){switch(f.type){case "interval":return I=this._evaluateNode(f.value,I,T),t.SqlInterval.createFromValueAndQualifer(I,f.qualifier,f.op);case "case-expression":if("simple"===
f.format){var N=h(this._evaluateNode(f.operand,I,T));for(var ea=0;ea<f.clauses.length;ea++)if(N===h(this._evaluateNode(f.clauses[ea].operand,I,T)))return this._evaluateNode(f.clauses[ea].value,I,T)}else for(N=0;N<f.clauses.length;N++)if(!0===this._evaluateNode(f.clauses[N].operand,I,T))return this._evaluateNode(f.clauses[N].value,I,T);return null!==f.else?this._evaluateNode(f.else,I,T):null;case "parameter":return this.parameters[f.value.toLowerCase()];case "expression-list":N=[];for(ea of f.value)N.push(this._evaluateNode(ea,
I,T));return N;case "unary-expression":return L(this._evaluateNode(f.expr,I,T));case "binary-expression":switch(f.operator){case "AND":return R(this._evaluateNode(f.left,I,T),this._evaluateNode(f.right,I,T));case "OR":return l(this._evaluateNode(f.left,I,T),this._evaluateNode(f.right,I,T));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(f.left,I,T);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(f.left,
I,T);case "IN":return N=y(this._evaluateNode(f.right,I,T)),M(this._evaluateNode(f.left,I,T),N);case "NOT IN":return N=y(this._evaluateNode(f.right,I,T)),L(M(this._evaluateNode(f.left,I,T),N));case "BETWEEN":return N=this._evaluateNode(f.left,I,T),f=this._evaluateNode(f.right,I,T),null==N||null==f[0]||null==f[1]?null:N>=h(f[0])&&N<=h(f[1]);case "NOTBETWEEN":return N=this._evaluateNode(f.left,I,T),f=this._evaluateNode(f.right,I,T),null==N||null==f[0]||null==f[1]?null:N<h(f[0])||N>h(f[1]);case "LIKE":return c(this._evaluateNode(f.left,
I,T),this._evaluateNode(f.right,I,T),f.escape);case "NOT LIKE":return L(c(this._evaluateNode(f.left,I,T),this._evaluateNode(f.right,I,T),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return K(f.operator,this._evaluateNode(f.left,I,T),this._evaluateNode(f.right,I,T));case "-":case "+":case "*":case "/":return W(f.operator,this._evaluateNode(f.left,I,T),this._evaluateNode(f.right,I,T))}case "null":case "boolean":case "string":case "number":return f.value;
case "date":return q(f.value);case "timestamp":return p(f.value);case "current-time":return I=new Date,"date"===f.mode&&I.setHours(0,0,0,0),I;case "column-reference":return r(I,f.column,this.datefields,T);case "function":return I=this._evaluateNode(f.args,I,T),this.isAggregate?Y.aggregateFunction(f.name,I):t.evaluateFunction(f.name,I)}throw Error("Unsupported sql syntax "+f.type);};d._createClass(H,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,f=>{"current-time"===f.type?this._hasDateFunctions=!0:"function"===f.type&&(this._hasDateFunctions=this._hasDateFunctions||ha.has(f.name.toLowerCase()))});return this._hasDateFunctions}}]);return H}();var U;(function(H){H[H.Normal=0]="Normal";H[H.Escaped=1]="Escaped"})(U||(U={}));const S={getAttribute(H,A){return(H&&"object"===typeof H.attributes?H.attributes:H)[A]}};k.WhereClause=G;k.defaultAttributeAdapter=
S;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function d(t){let x=0;for(let z=0;z<t.length;z++)x+=t[z];return x/t.length}function ca(t){const x=d(t),z=t.length;let n=0;for(const p of t)n+=(p-x)**2;return 1<z?n/(z-1):0}const Y={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.max.apply(Math,
t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:d(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{{t=t[0];let x=0;for(let z=0;z<t.length;z++)x+=t[z];t=x}}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(ca(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:ca(t[0])}};k.aggregateFunction=function(t,x){const z=Y[t.toLowerCase()];if(null==z)throw Error("Function Not Recognised");
if(x.length<z.minParams||x.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return z.evaluate(x)};k.isAggregate=function(t,x){t=Y[t.toLowerCase()];return null!=t&&x>=t.minParams&&x<=t.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,d){let ca=function(){function t(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}t._fixDefaults=function(x){if(null!==x.precision||null!==x.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=function(x){const z=new t;z.second=x/1E3;return z};t.createFromValueAndQualifer=function(x,z,n){let p=null;const q=new t;q.op="-"===n?"-":"+";if("interval-period"===z.type){t._fixDefaults(z);if("year"===z.period||"month"===z.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(x))q[z.period]=
parseFloat(x);else throw Error("Illegal Interval");}else{t._fixDefaults(z.start);t._fixDefaults(z.end);if("year"===z.start.period||"month"===z.start.period)throw Error("Year-Month Intervals not supported");if("year"===z.end.period||"month"===z.end.period)throw Error("Year-Month Intervals not supported");switch(z.start.period){case "day":switch(z.end.period){case "hour":p=/^[0-9]{1,} [0-9]{1,}$/;if(p.test(x))q[z.start.period]=parseFloat(x.split(" ")[0]),q[z.end.period]=parseFloat(x.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":p=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(p.test(x))q[z.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]);else throw Error("Illegal Interval");break;case "second":p=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(x))q[z.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]),q.second=
parseFloat(x[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(z.end.period){case "minute":p=/^[0-9]{1,}:[0-9]{1,}$/;if(p.test(x))q.hour=parseFloat(x.split(":")[0]),q.minute=parseFloat(x.split(":")[1]);else throw Error("Illegal Interval");break;case "second":p=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(x))x=x.split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]),q.second=parseFloat(x[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(z.end.period){case "second":p=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(x))x=x.split(":"),q.minute=parseFloat(x[0]),q.second=parseFloat(x[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return q};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+
365/12*this.month*864E5+31536E6*this.year)};return t}();const Y={extract:{minParams:2,maxParams:2,evaluate:([t,x])=>{if(null==x)return null;if(x instanceof Date)switch(t.toUpperCase()){case "SECOND":return x.getSeconds();case "MINUTE":return x.getMinutes();case "HOUR":return x.getHours();case "DAY":return x.getDate();case "MONTH":return x.getMonth()+1;case "YEAR":return x.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(2===t.length){const [x,
z]=t;return null==x||null==z?null:x.toString().substring(z-1)}if(3===t.length){const [x,z,n]=t;return null==x||null==z||null==n?null:0>=n?"":x.toString().substring(z-1,z+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,x])=>null==t||null==x?null:x.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var x=3===t.length,z=x?t[1]:" ";x=x?t[2]:t[1];if(null==z||null==x)return null;z=`(${d.escapeRegExpString(z)})`;switch(t[0]){case "BOTH":return x.replace(new RegExp(`^${z}*|${z}*$`,"g"),"");case "LEADING":return x.replace(new RegExp(`^${z}*`,
"g"),"");case "TRAILING":return x.replace(new RegExp(`${z}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:
0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const x=t[0];t=2===t.length?10**t[1]:1;return null==x?null:Math.round(x*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>"string"===
typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let x="";for(let z=0;z<t.length;z++){if(null==t[z])return null;x+=t[z].toString()}return x}},lower:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};k.SqlInterval=ca;k.evaluateFunction=function(t,x){const z=Y[t.toLowerCase()];if(null==z)throw Error("Function Not Recognised");
if(x.length<z.minParams||x.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return z.evaluate(x)};k.isStandardized=function(t,x){t=Y[t.toLowerCase()];return null!=t&&x>=t.minParams&&x<=t.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,d){var ca={exports:{}};(function(t){(function(x,z){t.exports&&(t.exports=
z())})(d.commonjsGlobal,function(){function x(n,p,q,y){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,x.prototype);n.expected=p;n.found=q;n.location=y;n.name="SyntaxError";return n}function z(n,p,q){q=q||" ";if(n.length>p)return n;p-=n.length;q+=q.repeat(p);return n+q.slice(0,p)}(function(n,p){function q(){this.constructor=n}q.prototype=p.prototype;n.prototype=new q})(x,Error);x.prototype.format=function(n){var p="Error: "+this.message;if(this.location){var q=null,y;for(y=0;y<
n.length;y++)if(n[y].source===this.location.source){q=n[y].text.split(/\r\n|\n|\r/g);break}n=this.location.start;y=this.location.source+":"+n.line+":"+n.column;if(q){var L=this.location.end,R=z("",n.line.toString().length);q=q[n.line-1];L=n.line===L.line?L.column:q.length+1;p+="\n --\x3e "+y+"\n"+R+" |\n"+n.line+" | "+q+"\n"+R+" | "+z("",n.column-1)+z("",L-n.column,"^")}else p+="\n at "+y}return p};x.buildMessage=function(n,p){function q(M){return M.charCodeAt(0).toString(16).toUpperCase()}function y(M){return M.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+q(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+q(c)})}function L(M){return M.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+q(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(c){return"\\x"+q(c)})}function R(M){return l[M.type](M)}var l={literal:function(M){return'"'+y(M.text)+'"'},class:function(M){var c=M.parts.map(function(h){return Array.isArray(h)?L(h[0])+"-"+L(h[1]):L(h)});return"["+(M.inverted?"^":"")+c+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(M){return M.description}};return"Expected "+function(M){M=M.map(R);var c,h;M.sort();if(0<M.length){for(h=c=1;c<M.length;c++)M[c-1]!==M[c]&&(M[h]=M[c],h++);M.length=
h}switch(M.length){case 1:return M[0];case 2:return M[0]+" or "+M[1];default:return M.slice(0,-1).join(", ")+", or "+M[M.length-1]}}(n)+" but "+(p?'"'+y(p)+'"':"end of input")+" found."};return{SyntaxError:x,parse:function(n,p){function q(v,B){return{type:"literal",text:v,ignoreCase:B}}function y(v,B,aa){return{type:"class",parts:v,inverted:B,ignoreCase:aa}}function L(v){var B=fc[v],aa;if(!B){for(aa=v-1;!fc[aa];)aa--;B=fc[aa];for(B={line:B.line,column:B.column};aa<v;)10===n.charCodeAt(aa)?(B.line++,
B.column=1):B.column++,aa++;fc[v]=B}return B}function R(v,B){var aa=L(v),ua=L(B);return{source:bb,start:{offset:v,line:aa.line,column:aa.column},end:{offset:B,line:ua.line,column:ua.column}}}function l(v){e<tb||(e>tb&&(tb=e,zc=[]),zc.push(v))}function M(){var v=e;ta();var B=h();B!==a?(ta(),v=B):(e=v,v=a);return v}function c(){var v=e;var B=h();if(B!==a){v=[];var aa=e;var ua=ta();var Ca=Fa();if(Ca!==a){var Na=ta();var Pa=h();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;for(;aa!==a;)v.push(aa),
aa=e,ua=ta(),Ca=Fa(),Ca!==a?(Na=ta(),Pa=h(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);aa={type:"expression-list"};B=[B];for(ua=0;ua<v.length;ua++)B.push(v[ua][3]);aa.value=B;v=aa}else e=v,v=a;return v}function h(){var v=e;var B=K();if(B!==a){v=[];var aa=e;var ua=ta();var Ca=X();if(Ca!==a){var Na=ta();var Pa=K();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;for(;aa!==a;)v.push(aa),aa=e,ua=ta(),Ca=X(),Ca!==a?(Na=ta(),Pa=K(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);v=Ya(B,
v)}else e=v,v=a;return v}function K(){var v=e;var B=W();if(B!==a){v=[];var aa=e;var ua=ta();var Ca=C();if(Ca!==a){var Na=ta();var Pa=W();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;for(;aa!==a;)v.push(aa),aa=e,ua=ta(),Ca=C(),Ca!==a?(Na=ta(),Pa=W(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);v=Ya(B,v)}else e=v,v=a;return v}function W(){var v=e;var B=g();if(B===a){B=e;if(33===n.charCodeAt(e)){var aa=qb;e++}else aa=a,0===va&&l(rd);if(aa!==a){var ua=e;va++;if(61===n.charCodeAt(e)){var Ca=
Cb;e++}else Ca=a,0===va&&l(Pc);va--;Ca===a?ua=void 0:(e=ua,ua=a);ua!==a?B=aa=[aa,ua]:(e=B,B=a)}else e=B,B=a}B!==a?(aa=ta(),ua=W(),ua!==a?v={type:"unary-expression",operator:"NOT",expr:ua}:(e=v,v=a)):(e=v,v=a);if(v===a){B=e;v=F();if(v!==a){ta();B=[];aa=e;ua=ta();Ca=r();if(Ca!==a){var Na=ta();var Pa=F();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;if(aa!==a)for(;aa!==a;)B.push(aa),aa=e,ua=ta(),Ca=r(),Ca!==a?(Na=ta(),Pa=F(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);else B=a;B!==a&&
(B={type:"arithmetic",tail:B});B===a&&(B=e,aa=u(),aa!==a?(ta(),ua=Ga(),ua!==a?(ta(),ua=c(),ua!==a?(ta(),Ca=Qa(),Ca!==a?B={op:aa,right:ua}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a)):(e=B,B=a),B===a&&(B=e,aa=u(),aa!==a?(ta(),ua=Ga(),ua!==a?(ta(),ua=Qa(),ua!==a?B={op:aa,right:{type:"expression-list",value:[]}}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a),B===a&&(B=e,aa=u(),aa!==a?(ta(),ua=A(),ua!==a?B={op:aa,right:ua}:(e=B,B=a)):(e=B,B=a))),B===a&&(B=e,Ca=g(),Ca!==a?(ta(),aa=Z(),aa!==a?(ta(),ua=F(),ua!==a?(ta(),Na=C(),Na!==
a?(ta(),Ca=F(),Ca!==a?B={op:"NOT"+aa,right:{type:"expression-list",value:[ua,Ca]}}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a)):(e=B,B=a)):(e=B,B=a),B===a&&(B=e,Ca=Z(),Ca!==a?(ta(),aa=F(),aa!==a?(ta(),ua=C(),ua!==a?(ta(),Na=F(),Na!==a?B={op:Ca,right:{type:"expression-list",value:[aa,Na]}}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a)):(e=B,B=a)),B===a&&(B=e,aa=m(),aa!==a?(ta(),ua=g(),ua!==a?(ta(),ua=F(),ua!==a?B={op:aa+"NOT",right:ua}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a),B===a&&(B=e,aa=m(),aa!==a?(ta(),ua=F(),ua!==a?B={op:aa,right:ua}:
(e=B,B=a)):(e=B,B=a)),B===a&&(B=e,aa=w(),aa!==a?(ta(),ua=ma(),ua!==a?(ta(),Ca=e,n.substr(e,6).toLowerCase()===ya?(Na=n.substr(e,6),e+=6):(Na=a,0===va&&l(sd)),Na!==a?(Na=e,va++,Pa=S(),va--,Pa===a?Na=void 0:(e=Na,Na=a),Na!==a?Ca="ESCAPE":(e=Ca,Ca=a)):(e=Ca,Ca=a),Ca!==a?(ta(),Ca=Q(),Ca!==a?B={op:aa,right:ua,escape:Ca.value}:(e=B,B=a)):(e=B,B=a)):(e=B,B=a)):(e=B,B=a),B===a&&(B=e,aa=w(),aa!==a?(ta(),ua=ma(),ua!==a?B={op:aa,right:ua,escape:""}:(e=B,B=a)):(e=B,B=a))))));B===a&&(B=null);""==B||void 0==B||
null==B?B=v:(aa=null,B=aa="arithmetic"==B.type?Ya(v,B.tail):ab(B.op,v,B.right,B.escape))}else e=B,B=a;v=B}return v}function r(){if(n.substr(e,2)===Tb){var v=Tb;e+=2}else v=a,0===va&&l(td);v===a&&(62===n.charCodeAt(e)?(v=Fb,e++):(v=a,0===va&&l(ud)),v===a&&(n.substr(e,2)===la?(v=la,e+=2):(v=a,0===va&&l(vd)),v===a&&(n.substr(e,2)===Vb?(v=Vb,e+=2):(v=a,0===va&&l(wd)),v===a&&(60===n.charCodeAt(e)?(v=Db,e++):(v=a,0===va&&l(xd)),v===a&&(61===n.charCodeAt(e)?(v=Cb,e++):(v=a,0===va&&l(Pc)),v===a&&(n.substr(e,
2)===gb?(v=gb,e+=2):(v=a,0===va&&l(yd))))))));return v}function w(){var v=v=e;var B=g();if(B!==a){var aa=ta();var ua=ia();ua!==a?v=B=[B,aa,ua]:(e=v,v=a)}else e=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=ia());return v}function u(){var v=v=e;var B=g();if(B!==a){var aa=ta();var ua=b();ua!==a?v=B=[B,aa,ua]:(e=v,v=a)}else e=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=b());return v}function F(){var v=e;var B=P();if(B!==a){v=[];var aa=e;var ua=ta();var Ca=J();if(Ca!==a){var Na=ta();var Pa=P();Pa!==a?aa=ua=[ua,
Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;for(;aa!==a;)v.push(aa),aa=e,ua=ta(),Ca=J(),Ca!==a?(Na=ta(),Pa=P(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);v=Ya(B,v)}else e=v,v=a;return v}function J(){if(43===n.charCodeAt(e)){var v=rb;e++}else v=a,0===va&&l(Ac);v===a&&(45===n.charCodeAt(e)?(v=Gb,e++):(v=a,0===va&&l(Bc)));return v}function P(){var v=e;var B=E();if(B!==a){v=[];var aa=e;var ua=ta();var Ca=ha();if(Ca!==a){var Na=ta();var Pa=E();Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)}else e=aa,aa=a;for(;aa!==
a;)v.push(aa),aa=e,ua=ta(),Ca=ha(),Ca!==a?(Na=ta(),Pa=E(),Pa!==a?aa=ua=[ua,Ca,Na,Pa]:(e=aa,aa=a)):(e=aa,aa=a);v=Ya(B,v)}else e=v,v=a;return v}function ha(){if(42===n.charCodeAt(e)){var v=Ub;e++}else v=a,0===va&&l(zd);v===a&&(47===n.charCodeAt(e)?(v=yc,e++):(v=a,0===va&&l(Ad)));return v}function E(){var v=Q();if(v===a){var B=e;var aa=e;var ua=wa();if(ua!==a){var Ca=Ma();if(Ca!==a){var Na=Ja();Na!==a?aa=parseFloat(ua+Ca+Na):(e=aa,aa=a)}else e=aa,aa=a}else e=aa,aa=a;aa===a&&(aa=e,ua=wa(),ua!==a?(Ca=
Ma(),Ca!==a?aa=parseFloat(ua+Ca):(e=aa,aa=a)):(e=aa,aa=a),aa===a&&(aa=e,ua=wa(),ua!==a?(Ca=Ja(),Ca!==a?aa=parseFloat(ua+Ca):(e=aa,aa=a)):(e=aa,aa=a),aa===a&&(aa=e,ua=wa(),ua!==a&&(ua=parseFloat(ua)),aa=ua)));var Pa=aa;if(Pa!==a){var gc=e;va++;var Bd=U();va--;Bd===a?gc=void 0:(e=gc,gc=a);gc!==a?B={type:"number",value:Pa}:(e=B,B=a)}else e=B,B=a;v=B;if(v===a){var Wb=e;var Ib=e;if(n.substr(e,4).toLowerCase()===Hb){var hc=n.substr(e,4);e+=4}else hc=a,0===va&&l(Cd);if(hc!==a){var Xb=e;va++;var Dd=S();va--;
Dd===a?Xb=void 0:(e=Xb,Xb=a);Xb!==a?Ib=hc=[hc,Xb]:(e=Ib,Ib=a)}else e=Ib,Ib=a;var Eb=Ib;Eb!==a&&(Eb={type:"boolean",value:!0});Wb=Eb;if(Wb===a){Wb=e;var Jb=e;if(n.substr(e,5).toLowerCase()===V){var ic=n.substr(e,5);e+=5}else ic=a,0===va&&l(Ed);if(ic!==a){var Yb=e;va++;var Fd=S();va--;Fd===a?Yb=void 0:(e=Yb,Yb=a);Yb!==a?Jb=ic=[ic,Yb]:(e=Jb,Jb=a)}else e=Jb,Jb=a;Eb=Jb;Eb!==a&&(Eb={type:"boolean",value:!1});Wb=Eb}v=Wb;if(v===a){var Kb=e;if(n.substr(e,4).toLowerCase()===Oa){var jc=n.substr(e,4);e+=4}else jc=
a,0===va&&l(Gd);if(jc!==a){var Zb=e;va++;var Hd=S();va--;Hd===a?Zb=void 0:(e=Zb,Zb=a);Zb!==a?Kb=jc=[jc,Zb]:(e=Kb,Kb=a)}else e=Kb,Kb=a;var Cc=Kb;Cc!==a&&(Cc={type:"null",value:null});v=Cc;if(v===a){var Lb=e;var Mb=e;if(n.substr(e,4).toLowerCase()===Id){var Qc=n.substr(e,4);e+=4}else Qc=a,0===va&&l(Jd);if(Qc!==a){var kc=e;va++;var Kd=S();va--;Kd===a?kc=void 0:(e=kc,kc=a);kc!==a?Mb="DATE":(e=Mb,Mb=a)}else e=Mb,Mb=a;if(Mb!==a){ta();var Rc=ma();Rc!==a?Lb={type:"date",value:Rc.value}:(e=Lb,Lb=a)}else e=
Lb,Lb=a;v=Lb;if(v===a){var Nb=e;var Ob=e;if(n.substr(e,9).toLowerCase()===Ld){var Sc=n.substr(e,9);e+=9}else Sc=a,0===va&&l(Md);if(Sc!==a){var lc=e;va++;var Nd=S();va--;Nd===a?lc=void 0:(e=lc,lc=a);lc!==a?Ob="TIMESTAMP":(e=Ob,Ob=a)}else e=Ob,Ob=a;if(Ob!==a){ta();var Tc=ma();Tc!==a?Nb={type:"timestamp",value:Tc.value}:(e=Nb,Nb=a)}else e=Nb,Nb=a;v=Nb;if(v===a){var db=e;var Dc=D();if(Dc!==a){ta();if(45===n.charCodeAt(e)){var xb=Gb;e++}else xb=a,0===va&&l(Bc);xb===a&&(43===n.charCodeAt(e)?(xb=rb,e++):
(xb=a,0===va&&l(Ac)));if(xb!==a){ta();var $b=ma();if($b!==a){ta();var Uc=I();Uc!==a?db={type:"interval",value:$b,qualifier:Uc,op:xb}:(e=db,db=a)}else e=db,db=a}else e=db,db=a}else e=db,db=a;db===a&&(db=e,Dc=D(),Dc!==a?(ta(),xb=ma(),xb!==a?(ta(),$b=I(),$b!==a?db={type:"interval",value:xb,qualifier:$b,op:""}:(e=db,db=a)):(e=db,db=a)):(e=db,db=a));v=db}}}}}}var Wa=v;if(Wa===a){var ib=e;var Pb=e;if(n.substr(e,7).toLowerCase()===nb){var Vc=n.substr(e,7);e+=7}else Vc=a,0===va&&l(Od);if(Vc!==a){var mc=e;
va++;var Pd=S();va--;Pd===a?mc=void 0:(e=mc,mc=a);mc!==a?Pb="EXTRACT":(e=Pb,Pb=a)}else e=Pb,Pb=a;if(Pb!==a){ta();var Qd=Ga();if(Qd!==a){ta();var ob=O();ob===a&&(ob=da(),ob===a&&(ob=ra(),ob===a&&(ob=sa(),ob===a&&(ob=xa(),ob===a&&(ob=Aa())))));var Wc=ob;if(Wc!==a){ta();var Rd=ka();if(Rd!==a){ta();var Xc=h();if(Xc!==a){ta();var Sd=Qa();Sd!==a?ib={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Wc},Xc]}}:(e=ib,ib=a)}else e=ib,ib=a}else e=ib,ib=a}else e=ib,ib=a}else e=
ib,ib=a}else e=ib,ib=a;Wa=ib;if(Wa===a){var jb=e;var Qb=e;if(n.substr(e,9).toLowerCase()===cb){var Yc=n.substr(e,9);e+=9}else Yc=a,0===va&&l(Td);if(Yc!==a){var nc=e;va++;var Ud=S();va--;Ud===a?nc=void 0:(e=nc,nc=a);nc!==a?Qb="SUBSTRING":(e=Qb,Qb=a)}else e=Qb,Qb=a;if(Qb!==a){ta();var Vd=Ga();if(Vd!==a){ta();var Ec=h();if(Ec!==a){ta();var Wd=ka();if(Wd!==a){ta();var Fc=h();if(Fc!==a){ta();var yb=e;var Rb=e;if(n.substr(e,3).toLowerCase()===Ta){var Zc=n.substr(e,3);e+=3}else Zc=a,0===va&&l(Xd);if(Zc!==
a){var oc=e;va++;var Yd=S();va--;Yd===a?oc=void 0:(e=oc,oc=a);oc!==a?Rb="FOR":(e=Rb,Rb=a)}else e=Rb,Rb=a;var ac=Rb;if(ac!==a){var Zd=ta();var $c=h();if($c!==a){var $d=ta();yb=ac=[ac,Zd,$c,$d]}else e=yb,yb=a}else e=yb,yb=a;yb===a&&(yb=null);ac=Qa();ac!==a?jb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(e=jb,jb=a)}else e=jb,jb=a}else e=jb,jb=a}else e=jb,jb=a}else e=jb,jb=a}else e=jb,jb=a;Wa=jb;if(Wa===a){var Xa=e;var Gc=ja();if(Gc!==a){ta();var Hc=
Ga();if(Hc!==a){ta();var zb=f();zb===a&&(zb=null);ta();var bc=h();if(bc!==a){ta();var Ic=ka();if(Ic!==a){ta();var ad=h();if(ad!==a){ta();var ae=Qa();ae!==a?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc,ad]}}:(e=Xa,Xa=a)}else e=Xa,Xa=a}else e=Xa,Xa=a}else e=Xa,Xa=a}else e=Xa,Xa=a}else e=Xa,Xa=a;Xa===a&&(Xa=e,Gc=ja(),Gc!==a?(ta(),Hc=Ga(),Hc!==a?(ta(),zb=f(),zb===a&&(zb=null),ta(),bc=h(),bc!==a?(ta(),Ic=Qa(),Ic!==a?Xa={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc]}}:(e=Xa,Xa=a)):(e=Xa,Xa=a)):(e=Xa,Xa=a)):(e=Xa,Xa=a));Wa=Xa;if(Wa===a){var kb=e;var Sb=e;if(n.substr(e,8).toLowerCase()===be){var bd=n.substr(e,8);e+=8}else bd=a,0===va&&l(ce);if(bd!==a){var pc=e;va++;var de=S();va--;de===a?pc=void 0:(e=pc,pc=a);pc!==a?Sb="POSITION":(e=Sb,Sb=a)}else e=Sb,Sb=a;if(Sb!==a){ta();var ee=Ga();if(ee!==a){ta();var cd=h();if(cd!==a){ta();var fe=b();if(fe!==a){ta();var dd=h();if(dd!==
a){ta();var ge=Qa();ge!==a?kb={type:"function",name:"position",args:{type:"expression-list",value:[cd,dd]}}:(e=kb,kb=a)}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a;Wa=kb;if(Wa===a){var Bb=e;var qc;var pb=e;pb=qc=G();if(pb===a)if(pb=e,96===n.charCodeAt(e)?(qc=ed,e++):(qc=a,0===va&&l(fd)),qc!==a){var rc=[];if(gd.test(n.charAt(e))){var Ab=n.charAt(e);e++}else Ab=a,0===va&&l(hd);if(Ab!==a)for(;Ab!==a;)rc.push(Ab),gd.test(n.charAt(e))?(Ab=n.charAt(e),e++):(Ab=a,0===va&&l(hd));
else rc=a;rc!==a?(96===n.charCodeAt(e)?(Ab=ed,e++):(Ab=a,0===va&&l(fd)),Ab!==a?pb=rc.join(""):(e=pb,pb=a)):(e=pb,pb=a)}else e=pb,pb=a;var id=pb;if(id!==a){ta();var he=Ga();if(he!==a){ta();var sc=c();sc===a&&(sc=null);ta();var ie=Qa();ie!==a?Bb={type:"function",name:id,args:sc?sc:{type:"expression-list",value:[]}}:(e=Bb,Bb=a)}else e=Bb,Bb=a}else e=Bb,Bb=a;Wa=Bb;if(Wa===a){var ub;var eb=e;var Jc=Ba();if(Jc!==a){ta();var cc=h();if(cc!==a){ta();var dc=[];for(ub=oa();ub!==a;)dc.push(ub),ub=oa();ub=ta();
var tc=Ia();tc!==a?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:null}:(e=eb,eb=a)}else e=eb,eb=a}else e=eb,eb=a;if(eb===a)if(eb=e,Jc=Ba(),Jc!==a)if(ta(),cc=h(),cc!==a){ta();dc=[];for(ub=oa();ub!==a;)dc.push(ub),ub=oa();ub=ta();tc=qa();if(tc!==a){ta();var je=Ia();je!==a?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:tc.value}:(e=eb,eb=a)}else e=eb,eb=a}else e=eb,eb=a;else e=eb,eb=a;var Kc=eb;if(Kc===a){var vb;var hb=e;var Lc=Ba();if(Lc!==a){ta();var ec=
[];for(vb=na();vb!==a;)ec.push(vb),vb=na();vb=ta();var uc=Ia();uc!==a?hb={type:"case-expression",format:"searched",clauses:ec,else:null}:(e=hb,hb=a)}else e=hb,hb=a;if(hb===a)if(hb=e,Lc=Ba(),Lc!==a){ta();ec=[];for(vb=na();vb!==a;)ec.push(vb),vb=na();vb=ta();uc=qa();if(uc!==a){ta();var ke=Ia();ke!==a?hb={type:"case-expression",format:"searched",clauses:ec,else:uc.value}:(e=hb,hb=a)}else e=hb,hb=a}else e=hb,hb=a;Kc=hb}Wa=Kc;if(Wa===a){var vc;var wc=e;var jd=U();if(jd!==a){var kd=[];for(vc=H();vc!==a;)kd.push(vc),
vc=H();wc=jd+kd.join("")}else e=wc,wc=a;var xc=wc;if(xc!==a){var Mc=xc;xc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Wa=xc;if(Wa===a&&(Wa=A(),Wa===a)){Wa=e;var le=Ga();if(le!==a){ta();var Nc=h();if(Nc!==a){ta();var me=Qa();me!==a?(Nc.paren=!0,Wa=Nc):(e=Wa,Wa=a)}else e=Wa,Wa=a}else e=Wa,Wa=a}}}}}}}}return Wa}function G(){var v;var B=e;var aa=U();if(aa!==a){B=[];for(v=
S();v!==a;)B.push(v),v=S();B=aa+B.join("")}else e=B,B=a;return B}function U(){if(ne.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&l(oe);return v}function S(){if(pe.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&l(qe);return v}function H(){if(re.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&l(se);return v}function A(){var v=e;if(64===n.charCodeAt(e)){var B=lb;e++}else B=a,0===va&&l(te);if(B!==a){var aa=G();aa!==a?v=B=[B,aa]:(e=v,v=a)}else e=v,v=a;v!==a&&(v={type:"parameter",
value:v[1]});return v}function f(){var v=e;if(n.substr(e,7).toLowerCase()===ue){var B=n.substr(e,7);e+=7}else B=a,0===va&&l(ve);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="LEADING":(e=v,v=a)}else e=v,v=a;v===a&&(v=e,n.substr(e,8).toLowerCase()===we?(B=n.substr(e,8),e+=8):(B=a,0===va&&l(xe)),B!==a?(B=e,va++,aa=S(),va--,aa===a?B=void 0:(e=B,B=a),B!==a?v="TRAILING":(e=v,v=a)):(e=v,v=a),v===a&&(v=e,n.substr(e,4).toLowerCase()===ye?(B=n.substr(e,4),e+=4):(B=a,0===va&&l(ze)),B!==
a?(B=e,va++,aa=S(),va--,aa===a?B=void 0:(e=B,B=a),B!==a?v="BOTH":(e=v,v=a)):(e=v,v=a)));return v}function I(){var v=e;var B=e;var aa=T();if(aa!==a){ta();var ua=Ga();if(ua!==a)if(ta(),ua=ea(),ua!==a){ta();var Ca=Qa();Ca!==a?B={type:"interval-period",period:aa.value,precision:ua,secondary:null}:(e=B,B=a)}else e=B,B=a;else e=B,B=a}else e=B,B=a;B===a&&(B=e,aa=T(),aa!==a&&(aa=ld(aa)),B=aa);if(B!==a)if(ta(),aa=e,n.substr(e,2).toLowerCase()===Ae?(ua=n.substr(e,2),e+=2):(ua=a,0===va&&l(Be)),ua!==a?(ua=e,
va++,Ca=S(),va--,Ca===a?ua=void 0:(e=ua,ua=a),ua!==a?aa="TO":(e=aa,aa=a)):(e=aa,aa=a),aa!==a){ta();aa=e;ua=T();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});aa=ua;if(aa===a){aa=e;ua=Aa();if(ua!==a)if(ta(),ua=Ga(),ua!==a)if(ta(),ua=ea(),ua!==a)if(ta(),Ca=Fa(),Ca!==a)if(ta(),Ca=N(),Ca!==a){ta();var Na=Qa();Na!==a?aa=md(ua,Ca):(e=aa,aa=a)}else e=aa,aa=a;else e=aa,aa=a;else e=aa,aa=a;else e=aa,aa=a;else e=aa,aa=a;aa===a&&(aa=e,ua=Aa(),ua!==a?(ta(),ua=Ga(),ua!==a?
(ta(),ua=ea(),ua!==a?(ta(),Ca=Qa(),Ca!==a?aa={type:"interval-period",period:"second",precision:ua,secondary:null}:(e=aa,aa=a)):(e=aa,aa=a)):(e=aa,aa=a)):(e=aa,aa=a),aa===a&&(aa=e,ua=Aa(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),aa=ua))}aa!==a?v={type:"interval-qualifier",start:B,end:aa}:(e=v,v=a)}else e=v,v=a;else e=v,v=a;v===a&&(v=e,aa=T(),aa!==a?(ta(),B=Ga(),B!==a?(ta(),B=N(),B!==a?(ta(),ua=Qa(),ua!==a?v={type:"interval-period",period:aa.value,precision:B,
secondary:null}:(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a),v===a&&(v=e,aa=T(),aa!==a&&(aa=ld(aa)),v=aa,v===a&&(v=e,aa=Aa(),aa!==a?(ta(),B=Ga(),B!==a?(ta(),B=ea(),B!==a?(ta(),ua=Fa(),ua!==a?(ta(),aa=N(),aa!==a?(ta(),ua=Qa(),ua!==a?v=md(B,aa):(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a),v===a&&(v=e,aa=Aa(),aa!==a?(ta(),B=Ga(),B!==a?(ta(),B=N(),B!==a?(ta(),ua=Qa(),ua!==a?v={type:"interval-period",period:"second",precision:B,secondary:null}:(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=
a),v===a&&(v=e,aa=Aa(),aa!==a&&(aa={type:"interval-period",period:"second",precision:null,secondary:null}),v=aa)))));return v}function T(){var v=e;v=ra();v!==a&&(v={type:"string",value:"day"});v===a&&(v=e,v=sa(),v!==a&&(v={type:"string",value:"hour"}),v===a&&(v=e,v=xa(),v!==a&&(v={type:"string",value:"minute"}),v===a&&(v=e,v=da(),v!==a&&(v={type:"string",value:"month"}),v===a&&(v=e,v=O(),v!==a&&(v={type:"string",value:"year"})))));return v}function N(){var v=La();v!==a&&(v=parseFloat(v));return v}
function ea(){var v=La();v!==a&&(v=parseFloat(v));return v}function ma(){var v=Q();v===a&&(v=A());return v}function Q(){var v=e;if(39===n.charCodeAt(e)){var B=wb;e++}else B=a,0===va&&l(nd);B===a&&(n.substr(e,2)===Sa?(B=Sa,e+=2):(B=a,0===va&&l(Ce)));if(B!==a){B=[];var aa=e;n.substr(e,2)===fb?(aa=fb,e+=2):(aa=a,0===va&&l(od));aa!==a&&(aa="'");aa===a&&(pd.test(n.charAt(e))?(aa=n.charAt(e),e++):(aa=a,0===va&&l(qd)));for(;aa!==a;)B.push(aa),aa=e,n.substr(e,2)===fb?(aa=fb,e+=2):(aa=a,0===va&&l(od)),aa!==
a&&(aa="'"),aa===a&&(pd.test(n.charAt(e))?(aa=n.charAt(e),e++):(aa=a,0===va&&l(qd)));39===n.charCodeAt(e)?(aa=wb,e++):(aa=a,0===va&&l(nd));aa!==a?v={type:"string",value:B.join("")}:(e=v,v=a)}else e=v,v=a;return v}function na(){var v=e;if(Ha()!==a){ta();var B=h();if(B!==a){ta();var aa=Ea();aa!==a?(ta(),aa=h(),aa!==a?v={type:"when-clause",operand:B,value:aa}:(e=v,v=a)):(e=v,v=a)}else e=v,v=a}else e=v,v=a;return v}function oa(){var v=e;if(Ha()!==a){ta();var B=h();if(B!==a){ta();var aa=Ea();aa!==a?(ta(),
aa=h(),aa!==a?v={type:"when-clause",operand:B,value:aa}:(e=v,v=a)):(e=v,v=a)}else e=v,v=a}else e=v,v=a;return v}function qa(){var v=e;var B=e;if(n.substr(e,4).toLowerCase()===De){var aa=n.substr(e,4);e+=4}else aa=a,0===va&&l(Ee);if(aa!==a){aa=e;va++;var ua=S();va--;ua===a?aa=void 0:(e=aa,aa=a);aa!==a?B="ELSE":(e=B,B=a)}else e=B,B=a;B!==a?(ta(),B=h(),B!==a?v={type:"else-clause",value:B}:(e=v,v=a)):(e=v,v=a);return v}function wa(){var v=La();if(v===a){v=e;if(45===n.charCodeAt(e)){var B=Gb;e++}else B=
a,0===va&&l(Bc);B===a&&(43===n.charCodeAt(e)?(B=rb,e++):(B=a,0===va&&l(Ac)));if(B!==a){var aa=La();aa!==a?v=B[0]+aa:(e=v,v=a)}else e=v,v=a}return v}function Ma(){var v=e;if(46===n.charCodeAt(e)){var B=sb;e++}else B=a,0===va&&l(Fe);B!==a?(v=La(),v===a&&(v=null),v="."+(null!=v?v:"")):(e=v,v=a);return v}function Ja(){var v;var B=v=e;if(Ge.test(n.charAt(e))){var aa=n.charAt(e);e++}else aa=a,0===va&&l(He);aa!==a?(Ie.test(n.charAt(e))?(B=n.charAt(e),e++):(B=a,0===va&&l(Je)),B===a&&(B=null),B="e"+(null===
B?"":B)):(e=B,B=a);B!==a?(aa=La(),aa!==a?v=B+aa:(e=v,v=a)):(e=v,v=a);return v}function La(){var v=[];var B=Za();if(B!==a)for(;B!==a;)v.push(B),B=Za();else v=a;v!==a&&(v=v.join(""));return v}function Za(){if(Ke.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&l(Le);return v}function b(){var v=e;if(n.substr(e,2).toLowerCase()===fa){var B=n.substr(e,2);e+=2}else B=a,0===va&&l(Me);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="IN":(e=v,v=a)}else e=v,v=a;return v}function m(){var v=
e;if(n.substr(e,2).toLowerCase()===ba){var B=n.substr(e,2);e+=2}else B=a,0===va&&l(Ne);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="IS":(e=v,v=a)}else e=v,v=a;return v}function ia(){var v=e;if(n.substr(e,4).toLowerCase()===pa){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(Oe);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="LIKE":(e=v,v=a)}else e=v,v=a;return v}function g(){var v=e;if(n.substr(e,3).toLowerCase()===za){var B=n.substr(e,3);e+=3}else B=a,0===
va&&l(Pe);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="NOT":(e=v,v=a)}else e=v,v=a;return v}function C(){var v=e;if(n.substr(e,3).toLowerCase()===Da){var B=n.substr(e,3);e+=3}else B=a,0===va&&l(Qe);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="AND":(e=v,v=a)}else e=v,v=a;return v}function X(){var v=e;if(n.substr(e,2).toLowerCase()===Ka){var B=n.substr(e,2);e+=2}else B=a,0===va&&l(Re);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==
a?v="OR":(e=v,v=a)}else e=v,v=a;return v}function Z(){var v=e;if(n.substr(e,7).toLowerCase()===Va){var B=n.substr(e,7);e+=7}else B=a,0===va&&l(Se);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="BETWEEN":(e=v,v=a)}else e=v,v=a;return v}function ka(){var v=e;if(n.substr(e,4).toLowerCase()===Ua){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(Te);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="FROM":(e=v,v=a)}else e=v,v=a;return v}function ja(){var v=e;if(n.substr(e,
4).toLowerCase()===Ue){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(Ve);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="TRIM":(e=v,v=a)}else e=v,v=a;return v}function D(){var v=e;if(n.substr(e,8).toLowerCase()===We){var B=n.substr(e,8);e+=8}else B=a,0===va&&l(Xe);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="INTERVAL":(e=v,v=a)}else e=v,v=a;return v}function O(){var v=e;if(n.substr(e,4).toLowerCase()===Ye){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(Ze);
if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="YEAR":(e=v,v=a)}else e=v,v=a;return v}function da(){var v=e;if(n.substr(e,5).toLowerCase()===$e){var B=n.substr(e,5);e+=5}else B=a,0===va&&l(af);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="MONTH":(e=v,v=a)}else e=v,v=a;return v}function ra(){var v=e;if(n.substr(e,3).toLowerCase()===bf){var B=n.substr(e,3);e+=3}else B=a,0===va&&l(cf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="DAY":
(e=v,v=a)}else e=v,v=a;return v}function sa(){var v=e;if(n.substr(e,4).toLowerCase()===df){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(ef);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="HOUR":(e=v,v=a)}else e=v,v=a;return v}function xa(){var v=e;if(n.substr(e,6).toLowerCase()===ff){var B=n.substr(e,6);e+=6}else B=a,0===va&&l(gf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="MINUTE":(e=v,v=a)}else e=v,v=a;return v}function Aa(){var v=e;if(n.substr(e,6).toLowerCase()===
hf){var B=n.substr(e,6);e+=6}else B=a,0===va&&l(jf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="SECOND":(e=v,v=a)}else e=v,v=a;return v}function Ba(){var v=e;if(n.substr(e,4).toLowerCase()===kf){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(lf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="CASE":(e=v,v=a)}else e=v,v=a;return v}function Ia(){var v=e;if(n.substr(e,3).toLowerCase()===mf){var B=n.substr(e,3);e+=3}else B=a,0===va&&l(nf);if(B!==a){B=e;va++;
var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="END":(e=v,v=a)}else e=v,v=a;return v}function Ha(){var v=e;if(n.substr(e,4).toLowerCase()===of){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(pf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="WHEN":(e=v,v=a)}else e=v,v=a;return v}function Ea(){var v=e;if(n.substr(e,4).toLowerCase()===qf){var B=n.substr(e,4);e+=4}else B=a,0===va&&l(rf);if(B!==a){B=e;va++;var aa=S();va--;aa===a?B=void 0:(e=B,B=a);B!==a?v="THEN":(e=v,v=a)}else e=
v,v=a;return v}function Fa(){if(44===n.charCodeAt(e)){var v=sf;e++}else v=a,0===va&&l(tf);return v}function Ga(){if(40===n.charCodeAt(e)){var v=uf;e++}else v=a,0===va&&l(vf);return v}function Qa(){if(41===n.charCodeAt(e)){var v=wf;e++}else v=a,0===va&&l(xf);return v}function ta(){var v;var B=[];for(v=$a();v!==a;)B.push(v),v=$a();return B}function $a(){if(yf.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&l(zf);return v}function ab(v,B,aa,ua){v={type:"binary-expression",operator:v,left:B,
right:aa};void 0!==ua&&(v.escape=ua);return v}function Ya(v,B){for(var aa=0;aa<B.length;aa++)v=ab(B[aa][1],v,B[aa][3]);return v}p=void 0!==p?p:{};var a={},bb=p.grammarSource,Ra={start:M},mb=M,qb="!",Cb="\x3d",Tb="\x3e\x3d",Fb="\x3e",la="\x3c\x3d",Vb="\x3c\x3e",Db="\x3c",gb="!\x3d",rb="+",Gb="-",Ub="*",yc="/",lb="@",wb="'",Sa="N'",fb="''",sb=".",Oa="null",Hb="true",V="false",fa="in",ba="is",pa="like",ya="escape",za="not",Da="and",Ka="or",Va="between",Ua="from",Ta="for",cb="substring",nb="extract",
Ue="trim",be="position",Ld="timestamp",Id="date",ue="leading",we="trailing",ye="both",Ae="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",De="else",sf=",",uf="(",wf=")",ed="`",ne=/^[A-Za-z_\x80-\uFFFF]/,pe=/^[A-Za-z0-9_]/,re=/^[A-Za-z0-9_.\x80-\uFFFF]/,pd=/^[^']/,Ke=/^[0-9]/,Ge=/^[eE]/,Ie=/^[+\-]/,yf=/^[ \t\n\r]/,gd=/^[^`]/,rd=q("!",!1),Pc=q("\x3d",!1),td=q("\x3e\x3d",!1),ud=q("\x3e",!1),vd=q("\x3c\x3d",!1),wd=q("\x3c\x3e",!1),
xd=q("\x3c",!1),yd=q("!\x3d",!1),Ac=q("+",!1),Bc=q("-",!1),zd=q("*",!1),Ad=q("/",!1),oe=y([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),qe=y([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),se=y([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),te=q("@",!1),nd=q("'",!1),Ce=q("N'",!1),od=q("''",!1),qd=y(["'"],!0,!1),Fe=q(".",!1),Le=y([["0","9"]],!1,!1),He=y(["e","E"],!1,!1),Je=y(["+","-"],!1,!1),Gd=q("NULL",!0),Cd=q("TRUE",!0),Ed=q("FALSE",!0),Me=q("IN",!0),Ne=q("IS",!0),Oe=q("LIKE",
!0),sd=q("ESCAPE",!0),Pe=q("NOT",!0),Qe=q("AND",!0),Re=q("OR",!0),Se=q("BETWEEN",!0),Te=q("FROM",!0),Xd=q("FOR",!0),Td=q("SUBSTRING",!0),Od=q("EXTRACT",!0),Ve=q("TRIM",!0),ce=q("POSITION",!0),Md=q("TIMESTAMP",!0),Jd=q("DATE",!0),ve=q("LEADING",!0),xe=q("TRAILING",!0),ze=q("BOTH",!0),Be=q("TO",!0),Xe=q("INTERVAL",!0),Ze=q("YEAR",!0),af=q("MONTH",!0),cf=q("DAY",!0),ef=q("HOUR",!0),gf=q("MINUTE",!0),jf=q("SECOND",!0),lf=q("CASE",!0),nf=q("END",!0),pf=q("WHEN",!0),rf=q("THEN",!0),Ee=q("ELSE",!0),tf=q(",",
!1),vf=q("(",!1),xf=q(")",!1),zf=y([" ","\t","\n","\r"],!1,!1),fd=q("`",!1),hd=y(["`"],!0,!1),ld=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},md=function(v,B){return{type:"interval-period",period:"second",precision:v,secondary:B}},e=0,fc=[{line:1,column:1}],tb=0,zc=[],va=0;if("startRule"in p){if(!(p.startRule in Ra))throw Error("Can't start parsing from rule \""+p.startRule+'".');mb=Ra[p.startRule]}var Oc=mb();if(Oc!==a&&e===n.length)return Oc;Oc!==a&&e<
n.length&&l({type:"end"});throw function(v,B,aa){return new x(x.buildMessage(v,B),v,B,aa)}(zc,tb<n.length?n.charAt(tb):null,tb<n.length?R(tb,tb+1):R(tb,tb));}}})})(ca);let Y=function(){function t(){}t.parse=function(x){return ca.exports.parse(x)};return t}();k.WhereGrammar=Y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l){function M(K,W,r,w,u,F){u-=r;F-=w;K=Math.min(1,Math.max(0,((K-r)*u+(W-w)*F)/(u*u+F*F)));return{x:r+u*K,y:w+F*K}}function c(K,W){return K?W?4:3:W?3:2}let h=function(){function K(r,w,u){this.items=r;this.query=w;this.geometryType=u.geometryType;this.hasM=u.hasM;this.hasZ=u.hasZ;this.fieldsIndex=u.fieldsIndex;this.objectIdField=u.objectIdField;this.spatialReference=u.spatialReference;this.featureAdapter=u.featureAdapter}var W=K.prototype;W.createQueryResponseForCount=
function(){const r=new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return r.countDistinctValues(this.items);const {groupByFieldsForStatistics:w,having:u,outStatistics:F}=this.query;if(null==w||!w.length)return 1;const J=new Map,P=new Map,ha=new Set;for(const U of F){var {statisticType:E}=U;E="exceedslimit"!==E?U.onStatisticField:void 0;if(!P.has(E)){var G=[];for(const S of w){const H=this._getAttributeValues(r,S,J);G.push(H)}P.set(E,this._calculateUniqueValues(G,
r.returnDistinctValues))}E=P.get(E);for(const S in E){const {data:H,items:A}=E[S];G=H.join(",");u&&!r.validateItems(A,u)||ha.add(G)}}return ha.size};W.createQueryResponse=function(){var r=ca._asyncToGenerator(function*(){let w;w=this.query.outStatistics?this.query.outStatistics.some(u=>"exceedslimit"===u.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&
(n.isValid(this.query.outSR)&&!n.equals(this.query.geometry.spatialReference,this.query.outSR)?w.queryGeometry=y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...q.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):w.queryGeometry=y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return w});return function(){return r.apply(this,arguments)}}();W.createSnappingResponse=function(r,w){const u=this.featureAdapter,F=c(this.hasZ,
this.hasM),{x:J,y:P}=r.point,ha="number"===typeof r.distance?r.distance:r.distance.x,E="number"===typeof r.distance?r.distance:r.distance.y,G={candidates:[]},U="esriGeometryPolygon"===this.geometryType;w=this._getPointCreator(r.point,this.spatialReference,w);for(const ea of this.items){var S=u.getGeometry(ea);if(Y.isNone(S))continue;const {coords:ma,lengths:Q}=S;if(r.types&d.SnappingTypes.EDGE){S=0;for(var H=0;H<Q.length;H++){var A=Q[H];for(var f=0;f<A;f++,S+=F){var I=ma[S],T=ma[S+1];if(f!==A-1){const na=
ma[S+F],oa=ma[S+F+1],{x:qa,y:wa}=M(J,P,I,T,na,oa);var N=(J-qa)/ha;const Ma=(P-wa)/E;N=N*N+Ma*Ma;1>=N&&G.candidates.push({type:"edge",objectId:u.getObjectId(ea),distance:Math.sqrt(N),target:w(qa,wa),start:w(I,T),end:w(na,oa)})}}}}if(r.types&d.SnappingTypes.VERTEX)for(S=U?ma.length-F:ma.length,H=0;H<S;H+=F)A=ma[H],f=ma[H+1],I=(J-A)/ha,T=(P-f)/E,I=I*I+T*T,1>=I&&G.candidates.push({type:"vertex",objectId:u.getObjectId(ea),distance:Math.sqrt(I),target:w(A,f)})}G.candidates.sort((ea,ma)=>ea.distance-ma.distance);
return G};W._getPointCreator=function(r,w,u){const F=Y.isSome(u)&&!n.equals(w,u)?J=>q.project(J,w,u):J=>J;return null!=r.z&&null!=r.m?(J,P)=>F({x:J,y:P,z:r.z,m:r.m}):null!=r.z?(J,P)=>F({x:J,y:P,z:r.z}):null!=r.m?(J,P)=>F({x:J,y:P,m:r.m}):(J,P)=>F({x:J,y:P})};W.createSummaryStatisticsResponse=function(){var r=ca._asyncToGenerator(function*(w){const {field:u,valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,minValue:E,maxValue:G,scale:U}=w;w=this.fieldsIndex.isDateField(u);
var S=yield this._getDataValues({field:u,valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,scale:U});const H=R.isNullCountSupported({normalizationType:P,normalizationField:J,minValue:E,maxValue:G}),A=this.fieldsIndex.get(u),f={value:.5,fieldType:null==A?void 0:A.type};S=L.isStringField(A)?R.calculateStringStatistics({values:S,supportsNullCount:H,percentileParams:f}):R.calculateStatistics({values:S,minValue:E,maxValue:G,useSampleStdDev:!P,supportsNullCount:H,percentileParams:f});
return R.processSummaryStatisticsResult(S,w)});return function(w){return r.apply(this,arguments)}}();W.createUniqueValuesResponse=function(){var r=ca._asyncToGenerator(function*(w){const {field:u,valueExpression:F,domain:J,returnAllCodedValues:P,scale:ha}=w;w=yield this._getDataValues({field:u,valueExpression:F,scale:ha});w=R.calculateUniqueValuesCount(w);return R.createUVResult(w,J,P)});return function(w){return r.apply(this,arguments)}}();W.createClassBreaksResponse=function(){var r=ca._asyncToGenerator(function*(w){const {field:u,
valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,classificationMethod:E,standardDeviationInterval:G,minValue:U,maxValue:S,numClasses:H,scale:A}=w;w=yield this._getDataValues({field:u,valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,scale:A});w=R.calculateClassBreaks(w,{field:u,normalizationField:J,normalizationType:P,normalizationTotal:ha,classificationMethod:E,standardDeviationInterval:G,minValue:U,maxValue:S,numClasses:H});return R.resolveCBResult(w,
E)});return function(w){return r.apply(this,arguments)}}();W.createHistogramResponse=function(){var r=ca._asyncToGenerator(function*(w){const {field:u,valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,classificationMethod:E,standardDeviationInterval:G,minValue:U,maxValue:S,numBins:H,scale:A}=w;w=yield this._getDataValues({field:u,valueExpression:F,normalizationField:J,normalizationType:P,normalizationTotal:ha,scale:A});return R.calculateHistogram(w,{field:u,normalizationField:J,
normalizationType:P,normalizationTotal:ha,classificationMethod:E,standardDeviationInterval:G,minValue:U,maxValue:S,numBins:H})});return function(w){return r.apply(this,arguments)}}();W._sortFeatures=function(r,w,u){if(1<r.length&&w&&w.length)for(const F of w.reverse()){w=F.split(" ");const J=w[0],P=this.fieldsIndex.get(J);w=w[1]&&"desc"===w[1].toLowerCase();const ha=R.getAttributeComparator(null==P?void 0:P.type,w);r.sort((E,G)=>{E=u(E,J,P);G=u(G,J,P);return ha(E,G)})}};W._createFeatureQueryResponse=
function(r){const w=this.items,{geometryType:u,hasM:F,hasZ:J,objectIdField:P,spatialReference:ha}=this,{outFields:E,outSR:G,quantizationParameters:U,resultRecordCount:S,resultOffset:H,returnZ:A,returnM:f}=r,I=null!=S?w.length>(H||0)+S:!1,T=E&&(E.includes("*")?[...this.fieldsIndex.fields]:E.map(N=>this.fieldsIndex.get(N)));return{exceededTransferLimit:I,features:this._createFeatures(r,w),fields:T,geometryType:u,hasM:F&&f,hasZ:J&&A,objectIdFieldName:P,spatialReference:y.cleanFromGeometryEngine(G?G:
ha),transform:U&&z.toQuantizationTransform(U)||null}};W._createFeatures=function(r,w){const u=new p(r,this.featureAdapter,this.fieldsIndex),{hasM:F,hasZ:J}=this,{orderByFields:P,quantizationParameters:ha,returnGeometry:E,returnCentroid:G,maxAllowableOffset:U,resultOffset:S,resultRecordCount:H,returnZ:A=!1,returnM:f=!1}=r,I=J&&A,T=F&&f;r=[];var N=0;w=[...w];this._sortFeatures(w,P,(Q,na,oa)=>u.getFieldValue(Q,na,oa));if(E||G){var ea=z.toQuantizationTransform(ha);if(E&&!G)for(var ma of w)r[N++]={attributes:u.getAttributes(ma),
geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),U,ea,I,T)};else if(!E&&G)for(const Q of w)r[N++]={attributes:u.getAttributes(Q),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(Q,this),ea)};else for(const Q of w)r[N++]={attributes:u.getAttributes(Q),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(Q,this),ea),geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Q),U,ea,I,T)}}else for(ea of w)(ma=
u.getAttributes(ea))&&(r[N++]={attributes:ma});N=S||0;null!=H&&(r=r.slice(N,Math.min(r.length,N+H)));return r};W._createExceedsLimitQueryResponse=function(r){var w=!1;let u=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY;w=Number.POSITIVE_INFINITY;for(const J of r.outStatistics)if("exceedslimit"===J.statisticType){u=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;F=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;w=null!=J.maxVertexCount?J.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)w=this.items.length>u;else if(this.items.length>F)w=!0;else{r=this.hasZ?this.hasM?4:3:this.hasM?3:2;const J=this.featureAdapter;w=this.items.reduce((P,ha)=>{ha=J.getGeometry(ha);return P+(Y.isSome(ha)&&ha.coords.length||0)},0)/r>w}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(w)}}]}};W._createStatisticsQueryResponse=
function(){var r=ca._asyncToGenerator(function*(w){var u={attributes:{}};const F=[],J=new Map,P=new Map,ha=new Map,E=new Map,G=new p(w,this.featureAdapter,this.fieldsIndex);var U=w.outStatistics;const {groupByFieldsForStatistics:S,having:H,orderByFields:A}=w;w=S&&S.length;const f=!!w,I=f&&S[0],T=f&&!this.fieldsIndex.get(I);for(const na of U){const {outStatisticFieldName:oa,statisticType:qa}=na;U=na;var N="exceedslimit"!==qa?na.onStatisticField:void 0;const wa="percentile_disc"===qa||"percentile_cont"===
qa,Ma="EnvelopeAggregate"===qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa,Ja=f&&1===w&&(N===I||T)&&"count"===qa;if(f){if(!ha.has(N)){var ea=[];for(const La of S){var ma=this._getAttributeValues(G,La,J);ea.push(ma)}ha.set(N,this._calculateUniqueValues(ea,G.returnDistinctValues))}ea=ha.get(N);for(const La in ea){const {count:Za,data:b,items:m,itemPositions:ia}=ea[La];ma=b.join(",");if(!H||G.validateItems(m,H)){const g=E.get(ma)||{attributes:{}};if(Ma){g.aggregateGeometries||(g.aggregateGeometries=
{});const {aggregateGeometries:C,outStatisticFieldName:X}=yield this._getAggregateGeometry(U,m);g.aggregateGeometries[X]=C}else{var Q=null;if(Ja)Q=Za;else{const C=this._getAttributeValues(G,N,J);Q=ia.map(X=>C[X]);Q=wa&&"statisticParameters"in U?this._getPercentileValue(U,Q):this._getStatisticValue(U,Q,null,G.returnDistinctValues)}g.attributes[oa]=Q}S.forEach((C,X)=>g.attributes[this.fieldsIndex.get(C)?C:`EXPR_${X+1}`]=b[X]);E.set(ma,g)}}}else if(Ma){u.aggregateGeometries||(u.aggregateGeometries={});
const {aggregateGeometries:La,outStatisticFieldName:Za}=yield this._getAggregateGeometry(U,this.items);u.aggregateGeometries[Za]=La}else N=this._getAttributeValues(G,N,J),u.attributes[oa]=wa&&"statisticParameters"in U?this._getPercentileValue(U,N):this._getStatisticValue(U,N,P,G.returnDistinctValues);F.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}u=f?Array.from(E.values()):[u];this._sortFeatures(u,A,(na,oa)=>na.attributes[oa]);return{fields:F,features:u}});return function(w){return r.apply(this,
arguments)}}();W._getAggregateGeometry=function(){var r=ca._asyncToGenerator(function*(w,u){var F=yield new Promise((A,f)=>k(["../../../geometry/geometryEngineJSON"],A,f));const {statisticType:J,outStatisticFieldName:P}=w,{featureAdapter:ha,spatialReference:E,geometryType:G,hasZ:U,hasM:S}=this;u=u.map(A=>y.getGeometry(G,U,S,ha.getGeometry(A)));const H=F.convexHull(E,u,!0)[0];w={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===J?(F=H?x.getPolygonExtent(H):x.getGeometryExtent(F.union(E,
u)),w.aggregateGeometries={...F,spatialReference:E},w.outStatisticFieldName=P||"extent"):"CentroidAggregate"===J?(F=H?t.polygonCentroid(H):t.extentCentroid(x.getGeometryExtent(F.union(E,u))),w.aggregateGeometries={x:F[0],y:F[1],spatialReference:E},w.outStatisticFieldName=P||"centroid"):"ConvexHullAggregate"===J&&(w.aggregateGeometries=H,w.outStatisticFieldName=P||"convexHull");return w});return function(w,u){return r.apply(this,arguments)}}();W._getStatisticValue=function(r,w,u,F){const {onStatisticField:J,
statisticType:P}=r;r=null;r=null!=u&&u.has(J)?u.get(J):L.isStringField(this.fieldsIndex.get(J))?R.calculateStringStatistics({values:w,returnDistinct:F}):R.calculateStatistics({values:w,minValue:null,maxValue:null,useSampleStdDev:!0});u&&u.set(J,r);return r["var"===P?"variance":P]};W._getPercentileValue=function(r,w){const {onStatisticField:u,statisticParameters:F,statisticType:J}=r,{value:P,orderBy:ha}=F;r=this.fieldsIndex.get(u);return R.calculatePercentile(w,{value:P,orderBy:ha,fieldType:null==
r?void 0:r.type,isDiscrete:"percentile_disc"===J})};W._getAttributeValues=function(r,w,u){if(u.has(w))return u.get(w);const F=this.fieldsIndex.get(w),J=this.items.map(P=>r.getFieldValue(P,w,F));u.set(w,J);return J};W._getAttributeNormalizedValues=function(r,w){return this.items.map(u=>r.getNormalizedValue(u,{field:w.field,fieldInfo:this.fieldsIndex.get(w.field),normalizationField:w.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(w.normalizationField),normalizationType:w.normalizationType,
normalizationTotal:w.normalizationTotal}))};W._getAttributeExpressionValues=function(){var r=ca._asyncToGenerator(function*(w,u,F){const {arcadeUtils:J}=yield l.loadArcade();u=J.createFunction(u);F=F&&J.getViewInfo(F);return w.getExpressionValues(this.items,u,F,J)});return function(w,u,F){return r.apply(this,arguments)}}();W._calculateUniqueValues=function(r,w){const u={},F=this.items,J=F.length;for(let P=0;P<J;P++){const ha=F[P],E=[];for(const U of r)E.push(U[P]);const G=E.join(",");w?null==u[G]&&
(u[G]={count:1,data:E,items:[ha],itemPositions:[P]}):null==u[G]?u[G]={count:1,data:E,items:[ha],itemPositions:[P]}:(u[G].count++,u[G].items.push(ha),u[G].itemPositions.push(P))}return u};W._getDataValues=function(){var r=ca._asyncToGenerator(function*(w){const u=new p(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:F,field:J,normalizationField:P,normalizationType:ha,normalizationTotal:E,scale:G}=w;w=F?{viewingMode:"map",scale:G,spatialReference:this.query.outSR||this.spatialReference}:
null;return F?this._getAttributeExpressionValues(u,F,w):this._getAttributeNormalizedValues(u,{field:J,normalizationField:P,normalizationType:ha,normalizationTotal:E})});return function(w){return r.apply(this,arguments)}}();ca._createClass(K,[{key:"size",get:function(){return this.items.length}}]);return K}();d.SnappingTypes=void 0;(function(K){K[K.NONE=0]="NONE";K[K.EDGE=1]="EDGE";K[K.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));d.QueryEngineResult=h;Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,d,ca){function Y({scale:E,translate:G},U){return Math.round((U-G[0])/E[0])}function t({scale:E,translate:G},U){return Math.round((G[1]-U)/E[1])}function x(E,G,U){const S=[];let H,A,f,I;for(let T=0;T<U.length;T++){const N=U[T];if(0<T){if(f=Y(E,N[0]),I=t(E,N[1]),f!==H||I!==A)S.push(G(N,f-H,I-A)),H=f,A=I}else H=Y(E,N[0]),A=t(E,N[1]),S.push(G(N,
H,A))}return 0<S.length?S:null}function z(E,G,U,S){return x(E,U?S?ha:P:S?P:J,G)}function n(E,G,U,S){const H=[];U=U?S?ha:P:S?P:J;for(S=0;S<G.length;S++){const A=x(E,U,G[S]);A&&3<=A.length&&H.push(A)}return H.length?H:null}function p(E,G,U,S){const H=[];U=U?S?ha:P:S?P:J;for(S=0;S<G.length;S++){const A=x(E,U,G[S]);A&&2<=A.length&&H.push(A)}return H.length?H:null}function q({scale:E,translate:G},U){return U*E[0]+G[0]}function y({scale:E,translate:G},U){return G[1]-U*E[1]}function L(E,G,U){const S=Array(U.length);
if(!U.length)return S;const [H,A]=E.scale;let f=q(E,U[0][0]);E=y(E,U[0][1]);S[0]=G(U[0],f,E);for(let I=1;I<U.length;I++){const T=U[I];f+=T[0]*H;E-=T[1]*A;S[I]=G(T,f,E)}return S}function R(E,G,U){const S=Array(U.length);for(let H=0;H<U.length;H++)S[H]=L(E,G,U[H]);return S}function l(E,G,U,S){return L(E,U?S?ha:P:S?P:J,G)}function M(E,G,U,S){return R(E,U?S?ha:P:S?P:J,G)}function c(E,G,U,S){return R(E,U?S?ha:P:S?P:J,G)}function h(E,G,U){let [S,H]=U[0],A=Math.min(S,G[0]),f=Math.min(H,G[1]),I=Math.max(S,
G[2]);G=Math.max(H,G[3]);for(let T=1;T<U.length;T++){const [N,ea]=U[T];S+=N;H+=ea;0>N&&(A=Math.min(A,S));0<N&&(I=Math.max(I,S));0>ea?f=Math.min(f,H):0<ea&&(G=Math.max(G,H))}E[0]=A;E[1]=f;E[2]=I;E[3]=G;return E}function K(E,G){if(!G.length)return null;E[0]=E[1]=Number.POSITIVE_INFINITY;E[2]=E[3]=Number.NEGATIVE_INFINITY;for(let U=0;U<G.length;U++)h(E,E,G[U]);return E}function W(E,G,U,S,H){G.xmin=Y(E,U.xmin);G.ymin=t(E,U.ymin);G.xmax=Y(E,U.xmax);G.ymax=t(E,U.ymax);G!==U&&(S&&(G.zmin=U.zmin,G.zmax=U.zmax),
H&&(G.mmin=U.mmin,G.mmax=U.mmax));return G}function r(E,G,U,S,H){G.points=z(E,U.points,S,H);return G}function w(E,G,U,S,H){G.x=Y(E,U.x);G.y=t(E,U.y);G!==U&&(S&&(G.z=U.z),H&&(G.m=U.m));return G}function u(E,G,U,S,H){E=n(E,U.rings,S,H);if(!E)return null;G.rings=E;return G}function F(E,G,U,S,H){E=p(E,U.paths,S,H);if(!E)return null;G.paths=E;return G}const J=(E,G,U)=>[G,U],P=(E,G,U)=>[G,U,E[2]],ha=(E,G,U)=>[G,U,E[2],E[3]];k.equals=function(E,G){if(E===G||null==E&&null==G)return!0;if(null==E||null==G)return!1;
let U,S,H,A;E&&"upperLeft"===E.originPosition?(U=E.translate[0],S=E.translate[1],E=E.scale[0]):(U=d.isSome(E.extent)?E.extent.xmin:0,S=d.isSome(E.extent)?E.extent.ymax:0,E=E.tolerance);G&&"upperLeft"===G.originPosition?(H=G.translate[0],A=G.translate[1],G=G.scale[0]):(H=d.isSome(G.extent)?G.extent.xmin:0,A=d.isSome(G.extent)?G.extent.ymax:0,G=G.tolerance);return U===H&&S===A&&E===G};k.getQuantizedBoundsCoordsArray=h;k.getQuantizedBoundsCoordsArrayArray=K;k.getQuantizedBoundsPaths=function(E){return K([0,
0,0,0],E)};k.getQuantizedBoundsPoints=function(E){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return h(G,G,E)};k.getQuantizedBoundsRings=function(E){return K([0,0,0,0],E)};k.quantizeBounds=function(E,G,U){G[0]=Y(E,U[0]);G[3]=t(E,U[1]);G[2]=Y(E,U[2]);G[1]=t(E,U[3]);return G};k.quantizeExtent=W;k.quantizeGeometry=function(E,G){return E&&G?ca.isPoint(G)?w(E,{},G,!1,!1):ca.isPolyline(G)?F(E,{},G,!1,!1):ca.isPolygon(G)?u(E,{},G,!1,!1):ca.isMultipoint(G)?
r(E,{},G,!1,!1):ca.isExtent(G)?W(E,{},G,!1,!1):null:null};k.quantizeMultipoint=r;k.quantizePaths=p;k.quantizePoint=w;k.quantizePoints=z;k.quantizePolygon=u;k.quantizePolyline=F;k.quantizeRings=n;k.quantizeX=Y;k.quantizeY=t;k.toQuantizationTransform=function(E){return E?{originPosition:"upper-left"===E.originPosition?"upperLeft":"lower-left"===E.originPosition?"lowerLeft":E.originPosition,scale:E.tolerance?[E.tolerance,E.tolerance]:[1,1],translate:d.isSome(E.extent)?[E.extent.xmin,E.extent.ymax]:[0,
0]}:null};k.unquantizeBounds=function(E,G,U){return U?(G[0]=q(E,U[0]),G[1]=y(E,U[3]),G[2]=q(E,U[2]),G[3]=y(E,U[1]),G):[q(E,G[0]),y(E,G[3]),q(E,G[2]),y(E,G[1])]};k.unquantizeCoordsArray=L;k.unquantizeCoordsArrayArray=R;k.unquantizeExtent=function(E,G,U,S,H){G.xmin=q(E,U.xmin);G.ymin=y(E,U.ymin);G.xmax=q(E,U.xmax);G.ymax=y(E,U.ymax);G!==U&&(S&&(G.zmin=U.zmin,G.zmax=U.zmax),H&&(G.mmin=U.mmin,G.mmax=U.mmax));return G};k.unquantizeMultipoint=function(E,G,U,S,H){d.isSome(U)&&(G.points=l(E,U.points,S,H));
return G};k.unquantizePaths=M;k.unquantizePoint=function(E,G,U,S,H){if(d.isNone(U))return G;G.x=q(E,U.x);G.y=y(E,U.y);G!==U&&(S&&(G.z=U.z),H&&(G.m=U.m));return G};k.unquantizePoints=l;k.unquantizePolygon=function(E,G,U,S,H){d.isSome(U)&&(G.rings=c(E,U.rings,S,H));return G};k.unquantizePolyline=function(E,G,U,S,H){d.isSome(U)&&(G.paths=M(E,U.paths,S,H));return G};k.unquantizeRings=c;k.unquantizeX=q;k.unquantizeY=y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(k,d,ca){return function(){function Y(x,z,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=x.returnDistinctValues;this.fieldsIndex=n;this.featureAdapter=z;if((z=x.outFields)&&!z.includes("*")){this.outFields=z;x=0;for(const q of z){var p=d.getExpressionFromFieldName(q);p=(z=this.fieldsIndex.get(p))?null:d.getWhereClause(p,
n);z=z?z.name:d.getAliasFromFieldName(q)||`FIELD_EXP_${x++}`;this._fieldDataCache.set(q,{alias:z,clause:p})}}}var t=Y.prototype;t.countDistinctValues=function(x){if(!this.returnDistinctValues)return x.length;x.forEach(z=>this.getAttributes(z));return this._returnDistinctMap.size};t.getAttributes=function(x){x=this._processAttributesForOutFields(x);return this._processAttributesForDistinctValues(x)};t.getFieldValue=function(x,z,n){const p=n?n.name:z;let q=null;this._fieldDataCache.has(p)?q=this._fieldDataCache.get(p).clause:
n||(q=d.getWhereClause(z,this.fieldsIndex),this._fieldDataCache.set(p,{alias:p,clause:q}));return n?this.featureAdapter.getAttribute(x,p):q.calculateValue(x,this.featureAdapter)};t.getNormalizedValue=function(x,z){const n=z.normalizationType,p=z.normalizationTotal;let q=this.getFieldValue(x,z.field,z.fieldInfo);n&&Number.isFinite(q)&&(x=this.getFieldValue(x,z.normalizationField,z.normalizationFieldInfo),q=ca.getNormalizedValue(q,n,x,p));return q};t.getExpressionValue=function(x,z,n,p){x={attributes:this.featureAdapter.getAttributes(x),
layer:{fields:this.fieldsIndex.fields}};n=p.createExecContext(x,n);return p.executeFunction(z,n)};t.getExpressionValues=function(x,z,n,p){const q={fields:this.fieldsIndex.fields};return x.map(y=>{y={attributes:this.featureAdapter.getAttributes(y),layer:q};y=p.createExecContext(y,n);return p.executeFunction(z,y)})};t.validateItem=function(x,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testFeature(x,
this.featureAdapter)};t.validateItems=function(x,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testSet(x,this.featureAdapter)};t._processAttributesForOutFields=function(x){const z=this.outFields;if(!z||!z.length)return this.featureAdapter.getAttributes(x);const n={};for(const p of z){const {alias:q,clause:y}=this._fieldDataCache.get(p);n[q]=y?y.calculateValue(x,this.featureAdapter):this.featureAdapter.getAttribute(x,
q)}return n};t._processAttributesForDistinctValues=function(x){if(k.isNone(x)||!this.returnDistinctValues)return x;var z=this.outFields,n=[];if(z)for(const q of z){var {alias:p}=this._fieldDataCache.get(q);n.push(x[p])}else for(p in x)n.push(x[p]);z=`${(z||["*"]).join(",")}=${n.join(",")}`;n=this._returnDistinctMap.get(z)||0;this._returnDistinctMap.set(z,++n);return 1<n?null:x};return Y}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(k,d,ca){function Y(r){const w=null!=r.minValue||null!=r.maxValue,u=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!w&&!u}function t(r){const {values:w,useSampleStdDev:u,supportsNullCount:F}=r;var J=Number.POSITIVE_INFINITY;let P=Number.NEGATIVE_INFINITY,ha=null,E=null;var G=null;let U=null,S=0;const H=null==r.minValue?-Infinity:r.minValue,A=null==r.maxValue?Infinity:r.maxValue;for(const f of w)Number.isFinite(f)?f>=H&&f<=A&&(ha+=
f,J=Math.min(J,f),P=Math.max(P,f),S++):"string"===typeof f&&S++;if(S&&null!=ha){E=ha/S;G=0;for(const f of w)Number.isFinite(f)&&f>=H&&f<=A&&(G+=(f-E)**2);U=u?1<S?G/(S-1):0:0<S?G/S:0;G=Math.sqrt(U)}else P=J=null;J={avg:E,count:S,max:P,min:J,stddev:G,sum:ha,variance:U};F&&(J.nullcount=w.length-S);r.percentileParams&&(J.median=x(w,r.percentileParams));return J}function x(r,w){const {fieldType:u,value:F,orderBy:J,isDiscrete:P}=w,ha=z(u,"desc"===J);r=[...r].filter(S=>null!=S).sort((S,H)=>ha(S,H));if(0===
r.length)return null;if(0>=F)return r[0];if(1<=F)return r[r.length-1];var E=(r.length-1)*F,G=Math.floor(E);w=G+1;E%=1;G=r[G];const U=r[w];return w>=r.length||P||"string"===typeof G||"string"===typeof U?G:G*(1-E)+U*E}function z(r,w){const u=w?1:-1,F=p(w),J=n(w);if(!r||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...K].includes(r))return(P,ha)=>"number"===typeof P&&"number"===typeof ha?F(P,ha):"string"===typeof P&&"string"===typeof ha?J(P,ha):u;if("esriFieldTypeDate"===
r)return(P,ha)=>{P=(new Date(P)).getTime();ha=(new Date(ha)).getTime();return isNaN(P)||isNaN(ha)?u:F(P,ha)};if(K.has(r))return(P,ha)=>F(P,ha);if("esriFieldTypeString"===r)return(P,ha)=>J(P,ha);if("esriFieldTypeGUID"===r||"esriFieldTypeGlobalID"===r){const P=n(w);return(ha,E)=>P(q(ha),q(E))}return w?(P,ha)=>1:(P,ha)=>-1}function n(r){return r?(w,u)=>{var F,J;w=null==(F=w)?void 0:F.toUpperCase();u=null==(J=u)?void 0:J.toUpperCase();return w>u?-1:w<u?1:0}:(w,u)=>{var F,J;w=null==(F=w)?void 0:F.toUpperCase();
u=null==(J=u)?void 0:J.toUpperCase();return w<u?-1:w>u?1:0}}function p(r){return r?(w,u)=>u-w:(w,u)=>w-u}function q(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function y(r,w){const u=R({field:w.field,normalizationType:w.normalizationType,normalizationField:w.normalizationField,classificationMethod:w.classificationMethod,standardDeviationInterval:w.standardDeviationInterval,breakCount:w.numClasses||
5});r=L(r,w.minValue,w.maxValue);return ca.createGenerateRendererClassBreaks({definition:u,values:r,normalizationTotal:w.normalizationTotal})}function L(r,w,u){w=null==w?-Infinity:w;u=null==u?Infinity:u;return r.filter(F=>Number.isFinite(F)&&F>=w&&F<=u)}function R(r){const w=r.field,u=r.classificationMethod||"equal-interval",F=r.normalizationType,J=r.normalizationField,P=new d;P.classificationField=w;P.breakCount=r.breakCount;P.classificationMethod=u;P.standardDeviationInterval="standard-deviation"===
u?r.standardDeviationInterval||1:void 0;P.normalizationType=F;P.normalizationField="field"===F?J:void 0;return P}function l(r,w){const {field:u,classificationMethod:F,standardDeviationInterval:J,normalizationType:P,normalizationField:ha,normalizationTotal:E,minValue:G,maxValue:U}=w,S=w.numBins||10;let H=w=null,A=null;F&&"equal-interval"!==F||P?({classBreaks:r}=y(r,{field:u,normalizationType:P,normalizationField:ha,normalizationTotal:E,classificationMethod:F,standardDeviationInterval:J,minValue:G,
maxValue:U,numClasses:S}),w=r[0].minValue,H=r[r.length-1].maxValue,A=r.map(f=>[f.minValue,f.maxValue])):(null!=G&&null!=U?(w=G,H=U):(r=t({values:r,minValue:G,maxValue:U,useSampleStdDev:!P,supportsNullCount:Y({normalizationType:P,normalizationField:ha,minValue:G,maxValue:U})}),w=r.min,H=r.max),A=c(w,H,S));return{min:w,max:H,intervals:A}}function M(r,w){let u=-1;for(let F=r.length-1;0<=F;F--)if(w>=r[F][0]){u=F;break}return u}function c(r,w,u){const F=(w-r)/u,J=[];let P;for(let ha=1;ha<=u;ha++)P=r+F,
P=Number(P.toFixed(16)),J.push([r,ha===u?w:P]),r=P;return J}const h=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,K=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),W="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=y;k.calculateHistogram=function(r,w){const {min:u,max:F,intervals:J}=l(r,w),P=J.map((ha,E)=>({minValue:J[E][0],maxValue:J[E][1],count:0}));for(const ha of r)null!=ha&&ha>=u&&ha<=F&&(r=M(J,ha),
-1<r&&P[r].count++);return{bins:P,minValue:u,maxValue:F,normalizationTotal:w.normalizationTotal}};k.calculatePercentile=x;k.calculateStatistics=t;k.calculateStringStatistics=function(r){const w=r.returnDistinct?[...new Set(r.values)]:r.values,u=w.filter(J=>null!=J).length,F={count:u};r.supportsNullCount&&(F.nullcount=w.length-u);r.percentileParams&&(F.median=x(w,r.percentileParams));return F};k.calculateUniqueValuesCount=function(r){const w={};for(let u of r){if(null==u||"string"===typeof u&&""===
u.trim())u=null;null==w[u]?w[u]={count:1,data:u}:w[u].count++}return{count:w}};k.createClassBreaksDefinition=R;k.createUVResult=function(r,w,u){const F=r.count;r=[];u&&w&&"coded-value"===w.type&&w.codedValues.forEach(J=>{J=J.code;F.hasOwnProperty(J)||(F[J]={data:J,count:0})});for(const J in F)w=F[J],r.push({value:w.data,count:w.count,label:w.label});return{uniqueValueInfos:r}};k.getAttributeComparator=z;k.getEqualIntervalBins=c;k.getNormalizedValue=function(r,w,u,F){let J=null;switch(w){case "log":0!==
r&&(J=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(F)&&0!==F&&(J=r/F*100);break;case "field":Number.isFinite(u)&&0!==u&&(J=r/u);break;case "natural-log":0<r&&(J=Math.log(r));break;case "square-root":0<r&&(J=r**.5)}return J};k.isNullCountSupported=Y;k.processSummaryStatisticsResult=function(r,w){let u;for(u in r)W.includes(u)&&(Number.isFinite(r[u])||(r[u]=null));if(!w)return r;["avg","stddev","variance"].forEach(F=>{null!=r[F]&&(r[F]=Math.ceil(r[F]))});return r};k.resolveCBResult=
function(r,w){let u=r.classBreaks;const F=u[0].minValue,J=u[u.length-1].maxValue,P="standard-deviation"===w;u=u.map(ha=>{const E=ha.label;ha={minValue:ha.minValue,maxValue:ha.maxValue,label:E};if(P&&E){const G=E.match(h).map(U=>+U.trim());2===G.length?(ha.minStdDev=G[0],ha.maxStdDev=G[1],0>G[0]&&0<G[1]&&(ha.hasAvg=!0)):1===G.length&&(E.includes("\x3c")?(ha.minStdDev=null,ha.maxStdDev=G[0]):E.includes("\x3e")&&(ha.minStdDev=G[0],ha.maxStdDev=null))}return ha});return{minValue:F,maxValue:J,classBreakInfos:u,
normalizationTotal:r.normalizationTotal}};k.statisticTypes=W;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,d,ca,Y,t,x,z,n,p){t=new ca.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ca=new ca.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});p=function(q){function y(){var L=q.apply(this,arguments)||this;L.breakCount=null;L.classificationField=
null;L.classificationMethod=null;L.normalizationField=null;L.normalizationType=null;L.type="class-breaks-definition";return L}k._inheritsLoose(y,q);k._createClass(y,[{key:"standardDeviationInterval",set:function(L){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",L)}},{key:"definedInterval",set:function(L){"defined-interval"===this.classificationMethod&&this._set("definedInterval",L)}}]);return y}(p);d.__decorate([Y.property({json:{write:!0}})],p.prototype,"breakCount",
void 0);d.__decorate([Y.property({json:{write:!0}})],p.prototype,"classificationField",void 0);d.__decorate([Y.property({type:String,json:{read:t.read,write:t.write}})],p.prototype,"classificationMethod",void 0);d.__decorate([Y.property({json:{write:!0}})],p.prototype,"normalizationField",void 0);d.__decorate([Y.property({json:{read:ca.read,write:ca.write}})],p.prototype,"normalizationType",void 0);d.__decorate([Y.property({value:null,json:{write:!0}})],p.prototype,"standardDeviationInterval",null);
d.__decorate([Y.property({value:null,json:{write:!0}})],p.prototype,"definedInterval",null);d.__decorate([Y.property()],p.prototype,"type",void 0);return p=d.__decorate([n.subclass("esri.rest.support.ClassBreaksDefinition")],p)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y){ca=new ca.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Y=function(L){function R(){var l=L.apply(this,arguments)||this;l.baseSymbol=null;l.colorRamp=null;l.type=null;return l}k._inheritsLoose(R,L);return R}(Y.JSONSupport);d.__decorate([t.property({type:y,json:{write:!0}})],Y.prototype,"baseSymbol",void 0);d.__decorate([t.property({types:q.types,json:{read:{reader:q.fromJSON},write:!0}})],Y.prototype,"colorRamp",void 0);
d.__decorate([t.property({json:{read:ca.read,write:ca.write}})],Y.prototype,"type",void 0);return Y=d.__decorate([p.subclass("esri.rest.support.ClassificationDefinition")],Y)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,d,ca,Y){ca={key:"type",base:ca,typeMap:{algorithmic:d,multipart:Y}};k.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?d.fromJSON(t):"multipart"===t.type?Y.fromJSON(t):null:null};
k.types=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,d,ca,Y,t,x,z,n,p){var q;p=q=function(y){function L(R){R=
y.call(this,R)||this;R.algorithm=null;R.fromColor=null;R.toColor=null;R.type="algorithmic";return R}k._inheritsLoose(L,y);L.prototype.clone=function(){return new q({fromColor:Y.clone(this.fromColor),toColor:Y.clone(this.toColor),algorithm:this.algorithm})};return L}(p);d.__decorate([z.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0);d.__decorate([t.property({type:ca,json:{type:[x.Integer],write:!0}})],p.prototype,"fromColor",
void 0);d.__decorate([t.property({type:ca,json:{type:[x.Integer],write:!0}})],p.prototype,"toColor",void 0);d.__decorate([t.property({type:["algorithmic"]})],p.prototype,"type",void 0);return p=q=d.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,d,ca){k.enumeration=function(Y,t={}){var x;Y=Y instanceof d.JSONMap?Y:new d.JSONMap(Y,t);Y={type:(null!=(x=null==
t?void 0:t.ignoreUnknown)?x:1)?Y.apiValues:String,json:{type:Y.jsonValues,read:null!=t&&t.readOnly?!1:{reader:Y.read},write:{writer:Y.write}}};void 0!==(null==t?void 0:t.readOnly)&&(Y.readOnly=!!t.readOnly);void 0!==(null==t?void 0:t.default)&&(Y.json.default=t.default);void 0!==(null==t?void 0:t.name)&&(Y.json.name=t.name);return ca.property(Y)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,Y,t,x,z,n){ca=function(p){function q(y){y=p.call(this,y)||this;y.type=null;return y}k._inheritsLoose(q,p);return q}(ca.JSONSupport);d.__decorate([Y.property({readOnly:!0,json:{read:!1,write:!0}})],ca.prototype,"type",void 0);return ca=d.__decorate([n.subclass("esri.rest.support.ColorRamp")],ca)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,d,ca,Y,t,x,z,n){var p;t=p=function(q){function y(L){L=q.call(this,L)||this;L.colorRamps=null;L.type="multipart";return L}k._inheritsLoose(y,q);y.prototype.clone=function(){return new p({colorRamps:ca.clone(this.colorRamps)})};return y}(n);d.__decorate([Y.property({type:[z],json:{write:!0}})],t.prototype,"colorRamps",void 0);d.__decorate([Y.property({type:["multipart"]})],t.prototype,"type",void 0);return t=p=d.__decorate([x.subclass("esri.rest.support.MultipartColorRamp")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y){Y=new Y.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let L=0;t=function(R){function l(c){c=R.call(this,c)||this;c.id=`sym${L++}`;c.type=null;c.color=new ca([0,0,0,1]);
return c}k._inheritsLoose(l,R);var M=l.prototype;M.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};M.collectRequiredFields=function(){var c=k._asyncToGenerator(function*(h,K){});return function(h,K){return c.apply(this,arguments)}}();M.hash=function(){return JSON.stringify(this.toJSON())};M.clone=function(){};return l}(t.JSONSupport);d.__decorate([x.property({type:Y.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Y.write}}})],t.prototype,"type",void 0);d.__decorate([x.property({type:ca,
json:{write:{allowNull:!0}}})],t.prototype,"color",void 0);d.__decorate([q.reader("color")],t.prototype,"readColor",null);return t=d.__decorate([y.subclass("esri.symbols.Symbol")],t)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function d(y){const {classificationMethod:L,breakCount:R,normalizationType:l,definedInterval:M}=y.definition,c=[];var h=y.values;if(0===h.length)return[];h=h.sort((F,J)=>F-J);var K=h[0],W=h[h.length-1];if("equal-interval"===L)if(h.length>=
R){h=(W-K)/R;y=K;for(var r=1;r<R;r++){var w=Number((K+r*h).toFixed(6));c.push({minValue:y,maxValue:w,label:ca(y,w,l)});y=w}c.push({minValue:y,maxValue:W,label:ca(y,W,l)})}else h.forEach(F=>{c.push({minValue:F,maxValue:F,label:ca(F,F,l)})});else if("natural-breaks"===L){h=Y(h);y=t(h.uniqueValues,y.valueFrequency||h.valueFrequency,R);for(r=1;r<R;r++)h.uniqueValues.length>r&&(w=Number(h.uniqueValues[y[r]].toFixed(6)),c.push({minValue:K,maxValue:w,label:ca(K,w,l)}),K=w);c.push({minValue:K,maxValue:W,
label:ca(K,W,l)})}else if("quantile"===L)if(h.length>=R&&K!==W){y=Math.ceil(h.length/R);r=0;for(w=1;w<R;w++){var u=y+r-1;u>h.length&&(u=h.length-1);0>u&&(u=0);c.push({minValue:K,maxValue:h[u],label:ca(K,h[u],l)});K=h[u];r+=y;y=Math.ceil((h.length-r)/(R-w))}c.push({minValue:K,maxValue:W,label:ca(K,W,l)})}else for(W=-1,K=0;K<h.length;K++)y=h[K],y!==W&&(W=y,c.push({minValue:W,maxValue:y,label:ca(W,y,l)}),W=y);else if("standard-deviation"===L)if(y=n(h),r=p(h,y),0===r)c.push({minValue:h[0],maxValue:h[0],
label:ca(h[0],h[0],l)});else{h=z(K,W,R,y,r)*r;r=0;for(w=R;1<=w;w--)u=Number((y-(w-.5)*h).toFixed(6)),c.push({minValue:K,maxValue:u,label:ca(K,u,l)}),K=u,r++;w=Number((y+.5*h).toFixed(6));c.push({minValue:K,maxValue:w,label:ca(K,w,l)});K=w;r++;for(u=1;u<=R;u++)w=r===2*R?W:Number((y+(u+.5)*h).toFixed(6)),c.push({minValue:K,maxValue:w,label:ca(K,w,l)}),K=w,r++}else if("defined-interval"===L){if(!M)return c;W=h[0];h=h[h.length-1];K=Math.ceil((h-W)/M);y=W;for(r=1;r<K;r++)w=Number((W+r*M).toFixed(6)),c.push({minValue:y,
maxValue:w,label:ca(y,w,l)}),y=w;c.push({minValue:y,maxValue:h,label:ca(y,h,l)})}return c}function ca(y,L,R){let l=null;return l=y===L?R&&"percent-of-total"===R?y+"%":y.toString():R&&"percent-of-total"===R?y+"% - "+L+"%":y+" - "+L}function Y(y){const L=[],R=[];let l=Number.MIN_VALUE,M=1,c=-1;for(let h=0;h<y.length;h++){const K=y[h];K===l?(M++,R[c]=M):null!==K&&(L.push(K),l=K,M=1,R.push(M),c++)}return{uniqueValues:L,valueFrequency:R}}function t(y,L,R){var l=y.length;const M=[];R>l&&(R=l);for(var c=
0;c<R;c++)M.push(Math.round(c*l/R-1));M.push(l-1);c=x(M,y,L,R);{l=c.mean;c=c.sdcm;var h=R,K=0,W=0;let w=0,u=0,F=!0;for(let J=0;2>J&&F;J++){0===J&&(F=!1);for(var r=0;r<h-1;r++)for(;M[r+1]+1!==M[r+2];)if(M[r+1]+=1,K=q(r,M,y,L),w=K.sbMean,K=K.sbSdcm,W=q(r+1,M,y,L),u=W.sbMean,W=W.sbSdcm,K+W<c[r]+c[r+1])c[r]=K,c[r+1]=W,l[r]=w,l[r+1]=u,F=!0;else{--M[r+1];break}for(r=h-1;0<r;r--)for(;M[r]!==M[r-1]+1;)if(--M[r],K=q(r-1,M,y,L),w=K.sbMean,K=K.sbSdcm,W=q(r,M,y,L),u=W.sbMean,W=W.sbSdcm,K+W<c[r-1]+c[r])c[r-1]=
K,c[r]=W,l[r-1]=w,l[r]=u,F=!0;else{M[r]+=1;break}}l=F}l&&(c=x(M,y,L,R));return M}function x(y,L,R,l){let M=[];var c=[],h=[];let K=0;const W=[],r=[];for(var w=0;w<l;w++){var u=q(w,y,L,R);W.push(u.sbMean);r.push(u.sbSdcm);K+=r[w]}u=K;for(w=!0;w||K<u;){w=!1;M=[];for(c=0;c<l;c++)M.push(y[c]);for(h=0;h<l;h++)for(u=y[h]+1;u<=y[h+1];u++)if(c=L[u],0<h&&u!==y[h+1]&&Math.abs(c-W[h])>Math.abs(c-W[h-1]))y[h]=u;else if(h<l-1&&y[h]!==u-1&&Math.abs(c-W[h])>Math.abs(c-W[h+1])){y[h+1]=u-1;break}u=K;K=0;c=[];h=[];
for(let F=0;F<l;F++){c.push(W[F]);h.push(r[F]);const J=q(F,y,L,R);W[F]=J.sbMean;r[F]=J.sbSdcm;K+=r[F]}}if(K>u){for(L=0;L<l;L++)y[L]=M[L],W[L]=c[L],r[L]=h[L];K=u}return{mean:W,sdcm:r}}function z(y,L,R,l,M){y=Math.max(l-y,L-l)/M/R;return 1<=y?1:.5<=y?.5:.25}function n(y){let L=0;for(let R=0;R<y.length;R++)L+=y[R];return L/=y.length}function p(y,L){let R=0;for(let l=0;l<y.length;l++){const M=y[l];R+=(M-L)*(M-L)}R/=y.length;return Math.sqrt(R)}function q(y,L,R,l){var M=0,c=0;for(var h=L[y]+1;h<=L[y+1];h++){const K=
l[h];M+=R[h]*K;c+=K}0>=c&&console.log("Exception in Natural Breaks calculation");M/=c;c=0;for(h=L[y]+1;h<=L[y+1];h++)c+=l[h]*(R[h]-M)**2;return{sbMean:M,sbSdcm:c}}k.createGenerateRendererClassBreaks=function(y){const {normalizationTotal:L}=y;return{classBreaks:d(y),normalizationTotal:L}};k.createGenerateRendererUniqueValues=function(y){y=Y(y);const L=[],R=y.uniqueValues.length;for(let l=0;l<R;l++){const M=y.uniqueValues[l];L.push({value:M,count:y.valueFrequency[l],label:M.toString()})}return{uniqueValues:L}};
Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l){function M(S,H,A,f=S.hasZ,I=S.hasM){if(t.isNone(H))return null;const T=S.hasZ&&f,N=S.hasM&&I;return A?(S=L.quantizeOptimizedGeometry(E,H,S.hasZ,S.hasM,"esriGeometryPoint",A,f,I),L.convertToPoint(S,T,N)):L.convertToPoint(H,T,N)}function c(){c=ca._asyncToGenerator(function*(S,H,A){const {outFields:f,orderByFields:I,groupByFieldsForStatistics:T,outStatistics:N}=S;if(f)for(var ea=0;ea<f.length;ea++)f[ea]=f[ea].trim();if(I)for(ea=0;ea<I.length;ea++)I[ea]=I[ea].trim();
if(T)for(ea=0;ea<T.length;ea++)T[ea]=T[ea].trim();if(N)for(ea=0;ea<N.length;ea++)N[ea].onStatisticField&&(N[ea].onStatisticField=N[ea].onStatisticField.trim());S.geometry&&!S.outSR&&(S.outSR=S.geometry.spatialReference);return h(S,H,A)});return c.apply(this,arguments)}function h(S,H,A){return K.apply(this,arguments)}function K(){K=ca._asyncToGenerator(function*(S,H,A){if(!S)return null;var {where:f}=S;S.where=f=f&&f.trim();if(!f||/^1 *= *1$/.test(f)||H&&H===f)S.where=null;if(!S.geometry)return S;
H=yield W(S);S.distance=0;S.units=null;"esriSpatialRelEnvelopeIntersects"===S.spatialRel&&({spatialReference:f}=S.geometry,H=z.getGeometryExtent(H),H.spatialReference=f);S.geometry=H;yield l.checkProjectionSupport(H.spatialReference,A);H=(yield p.normalizeCentralMeridian(n.fromJSON(H)))[0];if(t.isNone(H))throw J;H=H.toJSON();H=yield l.project(H,H.spatialReference,A);if(!H)throw J;H.spatialReference=A;S.geometry=H;return S});return K.apply(this,arguments)}function W(S){return r.apply(this,arguments)}
function r(){r=ca._asyncToGenerator(function*(S){const {geometry:H,distance:A,units:f}=S;if(null==A||"vertexAttributes"in H)return H;var I=H.spatialReference;S=f?F.fromJSON(f):x.getUnitString(I);I=I&&(q.isGeographic(I)||q.isWebMercator(I))?H:yield l.checkProjectionSupport(I,q.WGS84).then(()=>l.project(H,q.WGS84));return(yield w())(I.spatialReference,I,A,S)});return r.apply(this,arguments)}function w(){return u.apply(this,arguments)}function u(){u=ca._asyncToGenerator(function*(){return(yield new Promise((S,
H)=>k(["../../../geometry/geometryEngineJSON"],S,H))).geodesicBuffer});return u.apply(this,arguments)}const F=new Y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J=Object.freeze({}),P=new R,ha=new R,E=new R,G={esriGeometryPoint:L.convertToPoint,esriGeometryPolyline:L.convertToPolyline,esriGeometryPolygon:L.convertToPolygon,esriGeometryMultipoint:L.convertToMultipoint},
U=(S,H)=>"_geVersion"!==S?H:void 0;d.QUERY_ENGINE_EMPTY_RESULT=J;d.cleanFromGeometryEngine=function(S){return S&&"_geVersion"in S?JSON.parse(JSON.stringify(S,U)):S};d.getCentroid=function(S,H,A){if("esriGeometryPolygon"!==S.geometryType||!H||!H.centroid&&!H.geometry)return null;H.centroid||(H.centroid=y.getCentroidOptimizedGeometry(new R,H.geometry,S.hasZ,S.hasM));return M(S,H.centroid,A)};d.getGeometry=function(S,H,A,f,I,T,N=H,ea=A){const ma=H&&N,Q=A&&ea;f=t.isSome(f)?"coords"in f?f:f.geometry:null;
if(t.isNone(f))return null;if(I)return H=L.generalizeOptimizedGeometry(ha,f,H,A,S,I,N,ea),T&&(H=L.quantizeOptimizedGeometry(E,H,ma,Q,S,T)),G[S](H,ma,Q);if(T)return T=L.quantizeOptimizedGeometry(E,f,H,A,S,T,N,ea),G[S](T,ma,Q);L.removeZMValues(P,f,H,A,N,ea);return G[S](P,ma,Q)};d.normalizeQuery=function(S,H,A){return c.apply(this,arguments)};d.normalizeQueryLike=h;d.transformCentroid=M;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(k,d,ca,Y,t,x,z,n){function p(D,O,da){if(D)for(const ra of D)(D=(D=x.getDeepValue(ra,O))&&"function"!==typeof D&&da.get(D))&&x.setDeepValue(ra,D.name,O)}function q(D,O){if(!D||!O)return[];m.clear();y(m,D,O);return Array.from(m).sort()}function y(D,O,da){var ra;if(da)if(null!=O&&null!=(ra=O.fields)&&ra.length)if(da.includes("*"))for(const {name:sa}of O.fields)D.add(sa);else for(const sa of da)L(D,O,sa);else if(da.includes("*"))D.clear(),D.add("*");else for(const sa of da)D.add(sa)}function L(D,
O,da){"string"===typeof da&&(O?(O=O.get(da))&&D.add(O.name):D.add(da))}function R(D,O,da){return l.apply(this,arguments)}function l(){l=ca._asyncToGenerator(function*(D,O,da){var ra;if(da){var {arcadeUtils:sa}=yield n.loadArcade();da=sa.extractFieldNames(da,null==O?void 0:null==(ra=O.fields)?void 0:ra.map(xa=>xa.name));for(const xa of da)L(D,O,xa)}});return l.apply(this,arguments)}function M(D,O,da){return c.apply(this,arguments)}function c(){c=ca._asyncToGenerator(function*(D,O,da){if(da&&"1\x3d1"!==
da){const ra=(yield new Promise((sa,xa)=>k(["../../core/sql/WhereClause"],sa,xa))).WhereClause.create(da,O);if(!ra.isStandardized)throw new Y("fieldUtils:collectFilterFields","Where clause is not standardized",{where:da});y(D,O,ra.fieldNames)}});return c.apply(this,arguments)}function h(D,O){for(const da of D)if(da&&da.valueType&&da.valueType===O)return da.name;return null}function K(){K=ca._asyncToGenerator(function*(D){if(!D)return[];const O=new Set;yield W(O,D);return Array.from(O).sort()});return K.apply(this,
arguments)}function W(D,O){return r.apply(this,arguments)}function r(){r=ca._asyncToGenerator(function*(D,O){if(O){var da=x.getDeepValue("elevationInfo.featureExpressionInfo",O);if(da)return da.collectRequiredFields(D,O.fieldsIndex)}});return r.apply(this,arguments)}function w(D,O,da){return u.apply(this,arguments)}function u(){u=ca._asyncToGenerator(function*(D,O,da){da.outStatistic.onStatisticValueExpression?R(D,O,da.outStatistic.onStatisticValueExpression):D.add(da.outStatistic.onStatisticField)});
return u.apply(this,arguments)}function F(){F=ca._asyncToGenerator(function*(D,O,da){var ra,sa;if(O&&da&&"fields"in da){var xa=[];null!=(ra=da.popupTemplate)&&ra.expressionInfos&&xa.push(...da.popupTemplate.expressionInfos.map(Aa=>R(D,O.fieldsIndex,Aa.expression)));if(Array.isArray(null==(sa=da.popupTemplate)?void 0:sa.content)){ra=da.popupTemplate.content;for(const Aa of ra)"expression"===Aa.type&&Aa.expressionInfo&&xa.push(R(D,O.fieldsIndex,Aa.expressionInfo.expression))}da.fields&&xa.push(...da.fields.map(Aa=>
w(D,O.fieldsIndex,Aa)));yield Promise.all(xa)}});return F.apply(this,arguments)}function J(){J=ca._asyncToGenerator(function*(D,O,da){O&&(O.timeInfo&&t.isSome(da)&&da.timeExtent&&y(D,O.fieldsIndex,[O.timeInfo.startField,O.timeInfo.endField]),O.floorInfo&&y(D,O.fieldsIndex,[O.floorInfo.floorField]),t.isSome(da)&&t.isSome(da.where)&&(yield M(D,O.fieldsIndex,da.where)))});return J.apply(this,arguments)}function P(){P=ca._asyncToGenerator(function*(D,O,da){O&&da&&(yield Promise.all(da.map(ra=>ha(D,O,
ra))))});return P.apply(this,arguments)}function ha(D,O,da){return E.apply(this,arguments)}function E(){E=ca._asyncToGenerator(function*(D,O,da){O&&da&&(da.valueExpression?yield R(D,O.fieldsIndex,da.valueExpression):da.field&&L(D,O.fieldsIndex,da.field))});return E.apply(this,arguments)}function G(){G=ca._asyncToGenerator(function*(D){if(!D)return[];const O="timeInfo"in D&&D.timeInfo;return O?q(D.fieldsIndex,[D.trackIdField,O.startField,O.endField]):[]});return G.apply(this,arguments)}function U(){U=
ca._asyncToGenerator(function*(D){if(!D)return[];const O=new Set;yield S(O,D);return Array.from(O).sort()});return U.apply(this,arguments)}function S(D,O){return H.apply(this,arguments)}function H(){H=ca._asyncToGenerator(function*(D,O){const {labelingInfo:da,fieldsIndex:ra}=O;da&&da.length&&(yield Promise.all(da.map(sa=>A(D,ra,sa))))});return H.apply(this,arguments)}function A(D,O,da){return f.apply(this,arguments)}function f(){f=ca._asyncToGenerator(function*(D,O,da){if(da){var ra=da.getLabelExpression();
da=da.where;"arcade"===ra.type?yield R(D,O,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{L(D,O,sa.slice(1,-1))});yield M(D,O,da)}});return f.apply(this,arguments)}function I(D){return"number"===typeof D&&!isNaN(D)&&isFinite(D)}function T(D){return null===D||I(D)}function N(D){return null===D||ia(D)}function ea(D){return null!=D&&"string"===typeof D}function ma(D){return null===D||ea(D)}function Q(){return!0}function na(D,O){let da;switch(D.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=
D.nullable?N:ia;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=D.nullable?T:I;break;case "string":case "esriFieldTypeString":da=D.nullable?ma:ea;break;default:da=Q}return 1===arguments.length?da:da(O)}function oa(D){return null!=D&&C.has(D.type)}function qa(D,O){return D.nullable&&null===O?null:oa(D)&&!wa(D.type,Number(O))?d.NumericRangeValidationError.OUT_OF_RANGE:na(D,O)?D.domain?z.validateDomainValue(D.domain,O):null:d.TypeValidationError.INVALID_TYPE}
function wa(D,O){return(D="string"===typeof D?Ma(D):D)?D.isInteger?ia(O)&&O>=D.min&&O<=D.max:O>=D.min&&O<=D.max:!1}function Ma(D){switch(D){case "esriFieldTypeSmallInteger":case "small-integer":return X;case "esriFieldTypeInteger":case "integer":return Z;case "esriFieldTypeSingle":case "single":return ka;case "esriFieldTypeDouble":case "double":return ja}}function Ja(D,O,da){if(!O||!O.attributes||!D){if(t.isSome(da))for(var ra of D)da.add(ra);return!0}O=O.attributes;ra=!1;for(const sa of D)if(!(sa in
O))if(ra=!0,t.isSome(da))da.add(sa);else break;return ra}function La(){La=ca._asyncToGenerator(function*(D,O){const da=new Set;for(const ra of O)yield R(da,D.fieldsIndex,ra);return Array.from(da).sort()});return La.apply(this,arguments)}const Za="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),b=["field","normalizationField"],m=new Set,ia=(()=>"isInteger"in Number?
Number.isInteger:D=>"number"===typeof D&&isFinite(D)&&Math.floor(D)===D)(),g=["integer","small-integer","single","double"],C=new Set([...g,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const X={min:-32768,max:32767,isInteger:!0},Z={min:-2147483648,max:2147483647,isInteger:!0},ka={min:-3.4E38,max:1.2E38,isInteger:!1},ja={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=R;d.collectElevationFields=W;d.collectFeatureReductionFields=function(D,O,da){return F.apply(this,arguments)};d.collectField=L;d.collectFields=y;d.collectFilterFields=function(D,O,da){return J.apply(this,arguments)};d.collectLabelingFields=S;d.collectOrderByInfos=function(D,O,da){return P.apply(this,
arguments)};d.doubleRange=ja;d.featureHasFields=function(D,O){return!Ja(D,O,null)};d.fixFields=q;d.fixRendererFields=function(D,O){if(null!=D&&null!=O)for(const da of Array.isArray(D)?D:[D])if(p(Za,da,O),"visualVariables"in da&&da.visualVariables)for(const ra of da.visualVariables)p(b,ra,O)};d.fixTimeInfoFields=function(D,O){if(null!=D&&null!=O&&O.fields.length)if("startField"in D){var da=O.get(D.startField);O=O.get(D.endField);D.startField=da&&da.name||null;D.endField=O&&O.name||null}else da=O.get(D.startTimeField),
O=O.get(D.endTimeField),D.startTimeField=da&&da.name||null,D.endTimeField=O&&O.name||null};d.getDisplayFieldName=function({displayField:D,fields:O}){if(D)return D;if(!O||!O.length)return null;if(!(D=h(O,"name-or-title")||h(O,"unique-identifier")||h(O,"type-or-category")))a:{for(const da of O)if(da&&da.name&&(O=da.name.toLowerCase(),O.includes("name")||O.includes("title"))){D=da.name;break a}D=null}return D};d.getElevationFields=function(D){return K.apply(this,arguments)};d.getExpressionFields=function(D,
O){return La.apply(this,arguments)};d.getFeatureEditFields=function(D){if(!D)return[];const O="editFieldsInfo"in D&&D.editFieldsInfo;return O?q(D.fieldsIndex,[O&&O.creatorField,O&&O.creationDateField,O&&O.editorField,O&&O.editDateField]):[]};d.getFeatureGeometryFields=function(D){if(!D)return[];const O=D.geometryFieldsInfo;return O?q(D.fieldsIndex,[O.shapeAreaField,O.shapeLengthField]):[]};d.getFieldDefaultValue=function(D){const O=D.defaultValue;if(void 0!==O&&na(D,O))return O;if(D.nullable)return null};
d.getFieldRange=function(D){const O=z.getDomainRange(D.domain);if(O)return O;if(oa(D))return Ma(D.type)};d.getLabelingFields=function(D){return U.apply(this,arguments)};d.getNumericTypeForValue=function(D){if(!I(D))return null;if(ia(D)){if(D>=X.min&&D<=X.max)return"esriFieldTypeSmallInteger";if(D>=Z.min&&D<=Z.max)return"esriFieldTypeInteger"}return D>=ka.min&&D<=ka.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(D){return G.apply(this,arguments)};d.integerRange=Z;d.isDateField=
function(D){return null!=D&&("date"===D.type||"esriFieldTypeDate"===D.type)};d.isNumberInRange=wa;d.isNumericField=oa;d.isRasterPixelValueField=function(D){return["raster.itempixelvalue","raster.servicepixelvalue"].some(O=>D.toLowerCase().startsWith(O))};d.isStringField=function(D){return null!=D&&("string"===D.type||"esriFieldTypeString"===D.type)};d.isValidFieldValue=function(D,O){return null===qa(D,O)};d.isValueMatchingFieldType=na;d.numericTypes=g;d.packFields=function(D,O,da=1){if(!O||!D)return[];
if(O.includes("*"))return["*"];O=q(D,O);return O.length/D.fields.length>=da?["*"]:O};d.populateMissingFields=Ja;d.rendererFields=Za;d.sanitizeNullFieldValue=function(D){return null==D||"number"===typeof D&&isNaN(D)?null:D};d.singleRange=ka;d.smallIntegerRange=X;d.unpackFieldNames=function(D,O){return t.isNone(O)||t.isNone(D)?[]:O.includes("*")?D.fields.map(da=>da.name):O};d.validateFieldValue=qa;d.validationErrorToString=function(D,O,da){switch(D){case z.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;
case z.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${O.name}, type: ${O.type}, nullable: ${O.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Ma(O.type);return`Value ${da} is out of range for the number type - field: ${O.name}, type: ${O.type}, value range is ${ra} to ${sa}`}}};
d.visualVariableFields=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(k){function d(ca,Y){switch(ca.type){case "range":{const t="range"in ca?ca.range[1]:ca.maxValue;if(+Y<("range"in ca?ca.range[0]:ca.minValue)||+Y>t)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ca.codedValues||ca.codedValues.every(t=>null==t||t.code!==Y))return k.DomainValidationError.INVALID_CODED_VALUE}return null}
k.DomainValidationError=void 0;(function(ca){ca.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ca.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(ca){if(ca&&"range"===ca.type)return{min:"range"in ca?ca.range[0]:ca.minValue,max:"range"in ca?ca.range[1]:ca.maxValue}};k.isValidDomainValue=function(ca,Y){return null===d(ca,Y)};k.validateDomainValue=d;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(k,d,ca,Y,t,x){function z(){n||(n=ca._asyncToGenerator(function*(){const q=yield new Promise((y,L)=>k(["./arcadeUtils"],y,L));return{arcade:q.arcade,arcadeUtils:q,Dictionary:q.Dictionary,Feature:q.arcadeFeature}})());return n}let n;Y=(q,y,L)=>p.create(q,y,L,null,["$feature","$view"]);
let p=function(){function q(L,R,l,M,c,h,K,W){this.script=L;this.evaluate=c;this.fields=Array.isArray(K)?K:K.fields;this._syntaxTree=M;this._arcade=R;this._arcadeDictionary=l;this._arcadeFeature=h;this._spatialReference=W;this._referencesGeometry=R.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}q.create=function(){var L=ca._asyncToGenerator(function*(R,l,M,c,h,K){const {arcade:W,Feature:r,Dictionary:w}=yield z(),u=x.fromJSON(l);
l=W.parseScript(R,K);h=h.reduce((E,G)=>({...E,[G]:null}),{});let F=null;t.isSome(c)&&(F=new w(c),F.immutable=!0,h.$config=null);c=W.scriptUsesGeometryEngine(l)&&W.enableGeometrySupport();K=W.scriptUsesFeatureSet(l)&&W.enableFeatureSetSupport();const J=W.scriptIsAsync(l)&&W.enableAsyncSupport();h={vars:h,spatialReference:u,useAsync:!!J};const P=new w;P.immutable=!1;P.setField("scale",0);const ha=W.compileScript(l,h);yield Promise.all([c,K,J]);return new q(R,W,w,l,E=>{"$view"in E&&E.$view&&(P.setField("scale",
E.$view.scale),E.$view=P);F&&(E.$config=F);return ha({vars:E,spatialReference:u})},new r,M,u)});return function(R,l,M,c,h,K){return L.apply(this,arguments)}}();var y=q.prototype;y.repurposeFeature=function(L){L.geometry&&!L.geometry.spatialReference&&(L.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(L.geometry,L.attributes,{fields:this.fields});return this._arcadeFeature};y.createDictionary=function(){return new this._arcadeDictionary};y.referencesMember=
function(L){return this._arcade.referencesMember(this._syntaxTree,L)};y.referencesFunction=function(L){return this._arcade.referencesFunction(this._syntaxTree,L)};y.referencesGeometry=function(){return this._referencesGeometry};y.referencesScale=function(){return this._referencesScale};y.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return q}();d.ArcadeExpression=p;d.createDictionaryExpression=(q,y,L,R)=>p.create(q,y,L,R,["$feature","$view"]);
d.createLabelExpression=(q,y,L)=>p.create(q,y,L,null,["$feature"]);d.createRendererExpression=Y;d.createVVExpression=Y;d.loadArcade=z;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R){function l(){return new Promise((K,W)=>k(["../../../geometry/geometryEngineJSON"],K,W))}function M(){M=ca._asyncToGenerator(function*(K,W,r){const {spatialRel:w,geometry:u}=K;if(u){if(!0!==h.spatialRelationship[w])throw new Y("feature-store:unsupported-query","Unsupported query spatial relationship",{query:K});if(n.isValid(u.spatialReference)&&n.isValid(r)){if(!0!==h.queryGeometry[z.getJsonType(u)])throw new Y("feature-store:unsupported-query","Unsupported query geometry type",
{query:K});if(!0!==h.layerGeometry[W])throw new Y("feature-store:unsupported-query","Unsupported layer geometry type",{query:K});if(K.outSR)return L.checkProjectionSupport(K.geometry&&K.geometry.spatialReference,K.outSR)}}});return M.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},h={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(K){if(z.isExtent(K))return!0;if(z.isPolygon(K)){for(const W of K.rings)if(5!==W.length||W[0][0]!==W[1][0]||W[0][0]!==W[4][0]||W[2][0]!==W[3][0]||W[0][1]!==W[3][1]||W[0][1]!==W[4][1]||W[1][1]!==W[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(K,W,r){return M.apply(this,arguments)};d.getSpatialQueryOperator=function(K,
W,r,w,u){if(z.isPolygon(W)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===K)){const F=q.convertFromPolygon(new y,W,!1,!1);return Promise.resolve(J=>p.polygonContainsPoint(F,!1,!1,J))}if(z.isPolygon(W)&&"esriGeometryMultipoint"===r){const F=q.convertFromPolygon(new y,W,!1,!1);if("esriSpatialRelContains"===K)return Promise.resolve(J=>p.polygonContainsMultipoint(F,!1,!1,J,w,u))}if(z.isExtent(W)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===
K))return Promise.resolve(F=>t.extentContainsPoint(W,R.getGeometry(r,w,u,F)));if(z.isExtent(W)&&"esriGeometryMultipoint"===r&&"esriSpatialRelContains"===K)return Promise.resolve(F=>t.extentContainsMultipoint(W,R.getGeometry(r,w,u,F)));if(z.isExtent(W)&&"esriSpatialRelIntersects"===K){const F=x.getExtentIntersector(r);return Promise.resolve(J=>F(W,R.getGeometry(r,w,u,J)))}return l().then(F=>{const J=F[c[K]].bind(null,W.spatialReference,W);return P=>J(R.getGeometry(r,w,u,P))})};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,d){k.extentIntersectsExtent=d.extentIntersectsExtent;k.extentIntersectsMultipoint=d.extentIntersectsMultipoint;k.extentIntersectsPoint=d.extentIntersectsPoint;k.extentIntersectsPolygon=d.extentIntersectsPolygon;k.extentIntersectsPolyline=d.extentIntersectsPolyline;k.extentIntersectsRings=d.extentIntersectsRings;k.getFeatureExtentIntersector=
d.getFeatureExtentIntersector;k.isSelfIntersecting=d.isSelfIntersecting;k.segmentIntersects=d.segmentIntersects;k.getExtentIntersector=function(ca){return"mesh"===ca?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ca)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function d(ca,Y,t,x,z){if(!ca)return!1;Y=Y?t?4:3:t?3:2;const {coords:n,lengths:p}=ca;t=!1;ca=0;for(const y of p){var q=
ca;for(let L=ca,R=ca+y*Y;L<R;L+=Y){q=L+Y;q===R&&(q=ca);const l=n[L],M=n[L+1],c=n[q];q=n[q+1];(M<z&&q>=z||q<z&&M>=z)&&l+(z-M)/(q-M)*(c-l)<x&&(t=!t)}ca+=y*Y}return t}k.polygonContainsCoords=d;k.polygonContainsMultipoint=function(ca,Y,t,x,z,n){z=z?n?4:3:n?3:2;const {coords:p,lengths:q}=x;if(!q)return!1;for(let y=0,L=0;y<q.length;y++,L+=z)if(!d(ca,Y,t,p[L],p[L+1]))return!1;return!0};k.polygonContainsPoint=function(ca,Y,t,x){return d(ca,Y,t,x.coords[0],x.coords[1])};Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function d(t,x,z,n,p){if(null!=n&&null!=p)return q=>{const y=t.getAttribute(q,x);q=t.getAttribute(q,z);return(null==y||y<=p)&&(null==q||q>=n)};if(null!=n)return q=>{q=t.getAttribute(q,z);return null==q||q>=n};if(null!=p)return q=>{q=t.getAttribute(q,x);return null==q||q<=p}}function ca(t,x,z,n){if(null!=z&&null!=n&&z===n)return p=>t.getAttribute(p,x)===z;if(null!=z&&null!=n)return p=>
{p=t.getAttribute(p,x);return p>=z&&p<=n};if(null!=z)return p=>t.getAttribute(p,x)>=z;if(null!=n)return p=>t.getAttribute(p,x)<=n}function Y(){return()=>!1}k.getTimeExtent=function(t,x){if(!t)return null;const z=x.featureAdapter,{startTimeField:n,endTimeField:p}=t;let q=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(n&&p)x.forEach(L=>{const R=z.getAttribute(L,n);L=z.getAttribute(L,p);null==R||isNaN(R)||(q=Math.min(q,R));null==L||isNaN(L)||(y=Math.max(y,L))});else{const L=n||p;x.forEach(R=>
{R=z.getAttribute(R,L);null==R||isNaN(R)||(q=Math.min(q,R),y=Math.max(y,R))})}return{start:q,end:y}};k.getTimeOperator=function(t,x,z){if(!x||!t)return null;const {startTimeField:n,endTimeField:p}=t;if(!n&&!p)return null;const {start:q,end:y}=x;return null===q&&null===y?null:void 0===q&&void 0===y?Y():n&&p?d(z,n,p,q,y):ca(z,n||p,q,y)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(k,d){function ca(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function Y(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}return function(){function t(z){this.fields=z;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(z){var n=[];for(const p of z)if(z=p&&p.name){const q=z.toLowerCase().trim();this._fieldsMap.set(z,p);this._fieldsMap.set(q,p);n.push(q);
"date"===p.type||"esriFieldTypeDate"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):d.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));ca(p)||Y(p)||(p.editable=null==p.editable?!0:!!p.editable,p.nullable=null==p.nullable?!0:!!p.nullable)}n.sort();this.uid=n.join(",")}}var x=t.prototype;x.destroy=function(){this._fieldsMap.clear()};x.has=function(z){return null!=this.get(z)};x.get=function(z){return null!=z?this._fieldsMap.get(z)||this._fieldsMap.get(z.toLowerCase().trim()):
void 0};x.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};x.isNumericField=function(z){return this._numericFieldsSet.has(this.get(z))};x.normalizeFieldName=function(z){if(z=this.get(z))return z.name};k._createClass(t,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const z of this.fields)ca(z)||Y(z)||z.nullable||void 0!==d.getFieldDefaultValue(z)||this._requiredFields.push(z)}return this._requiredFields}}]);return t}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l,M,c,h,K,W){function r(A){return u.has(A)?u.get(A):"number"===typeof A?A:1}const w=x.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(A){A.RESOURCE_CONTROLLER="schedule";A.SLIDE="slide";A.STREAM_DATA_LOADER="stream loader";A.ELEVATION_QUERY="elevation query";A.TERRAIN_SURFACE="terrain";A.SURFACE_GEOMETRY_UPDATES="surface geometry updates";A.GRAPHICS_CORE="Graphics3D";A.I3S_CONTROLLER="I3S";A.POINT_CLOUD_LAYER="point cloud";A.FEATURE_TILE_FETCHER=
"feature fetcher";A.OVERLAY="overlay";A.STAGE="stage";A.GRAPHICS_DECONFLICTOR="graphics deconflictor";A.FILTER_VISIBILITY="Graphics3D filter visibility";A.SCALE_VISIBILITY="Graphics3D scale visibility";A.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";A.POINT_OF_INTEREST_FREQUENT="POI frequent";A.POINT_OF_INTEREST_INFREQUENT="POI infrequent";A.LABELER="labeler";A.FEATURE_QUERY_ENGINE="feature query";A.FEATURE_TILE_TREE="feature tile tree";A.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";A.ELEVATION_ALIGNMENT=
"elevation alignment";A.TEXT_TEXTURE_ATLAS="text texture atlas";A.TEXTURE_UNLOAD="texture unload";A.LINE_OF_SIGHT_TOOL="line of sight tool";A.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";A.ELEVATION_PROFILE="elevation profile";A.SNAPPING="snapping";A.SHADOW_ACCUMULATOR="shadow accumulator";A.CLOUDS_GENERATOR="cloud generator";A[A.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const u=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(A){A[A.ANIMATING=0]="ANIMATING";A[A.INTERACTING=1]="INTERACTING";A[A.IDLE=2]="IDLE"})(k.State||(k.State={}));const F=L.Milliseconds(6.5),J=L.Milliseconds(1),P=L.Milliseconds(30),ha=L.Milliseconds(1E3/30),E=L.Milliseconds(100);var G;(function(A){let f=function(N){function ea(){var Q=N.call(this)||this;Q.updating=!0;Q._microTaskQueued=!1;Q.performanceInfo={total:new n("total"),tasks:new Map};Q._frameTaskTimes=new Map;Q._budget=new T;Q._state=k.State.INTERACTING;Q._tasks=
new p;Q._runQueue=new p;Q._load=0;Q._idleStateCallbacks=new p;Q._idleUpdatesStartFired=!1;Q._maxReschedule=H;Q._forceTask=!1;Q._debug=!1;Q._debugHandle=y.watch(()=>W.SCHEDULER_LOG_SLOW_TASKS,qa=>Q._debug=qa,y.initial);for(const qa of Object.keys(k.TaskPriority))Q.performanceInfo.tasks.set(k.TaskPriority[qa],new n(k.TaskPriority[qa]));let na;const oa=d._assertThisInitialized(Q);Q._test={get state(){return z.unwrapOr(na,oa._state)},set state(qa){na=qa},FRAME_SAFETY_BUDGET:F,INTERACTING_BUDGET:ha,IDLE_BUDGET:E,
get availableBudget(){return oa._budget.budget},usedBudget:0,getBudget:()=>oa._budget,setBudget:qa=>oa._budget=qa,updateTask:qa=>Q._updateTask(qa),getState:qa=>Q._getState(qa),getRuntime:qa=>Q._getRuntime(qa),frameTaskTimes:Q._frameTaskTimes,resetRuntimes:()=>Q._resetRuntimes(),getRunning:()=>Q._getRunning()};return Q}d._inheritsLoose(ea,N);var ma=ea.prototype;ma.destroy=function(){this._tasks.toArray().forEach(Q=>Q.remove());this._tasks.clear();z.removeMaybe(this._debugHandle);this.updating=this._microTaskQueued=
!1};ma.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=H,this._schedule(),this.frame()))}))};ma.registerTask=function(Q,na){const oa=r(Q);na=new I(this,Q,na,oa);this._tasks.push(na);this.performanceInfo.tasks.has(Q)||this.performanceInfo.tasks.set(Q,new n(Q));return na};ma.registerIdleStateCallbacks=function(Q,na){const oa={idleBegin:Q,idleEnd:na};this._idleStateCallbacks.push(oa);
this.state===k.State.IDLE&&this._idleUpdatesStartFired&&oa.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(oa),set idleBegin(wa){qa._idleUpdatesStartFired&&(oa.idleEnd(),qa._state===k.State.IDLE&&wa());oa.idleBegin=wa},set idleEnd(wa){oa.idleEnd=wa}}};ma.updateBudget=function(Q){this._test.usedBudget=0;let na=F,oa=Q.frameDuration,qa=J;switch(this.state){case k.State.IDLE:na=L.Milliseconds(0);oa=L.Milliseconds(Math.max(E,Q.frameDuration));qa=P;break;case k.State.INTERACTING:oa=
L.Milliseconds(Math.max(ha,Q.frameDuration))}oa=L.Milliseconds(oa-Q.elapsedFrameTime-na);if(this.state!==k.State.IDLE&&oa<J&&!this._forceTask)return this._forceTask=!0,!1;oa=L.Milliseconds(Math.max(oa,qa));this._budget.reset(oa,this.state);this._maxReschedule=H;this._updateLoad();return this._schedule()};ma.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Q=>Q.idleBegin()));
this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ma.stopFrame=function(){this._budget.reset(L.Milliseconds(0),this._state);this._budget.madeProgress()};ma._removeIdleStateCallbacks=function(Q){this._idleUpdatesStartFired&&Q.idleEnd();this._idleStateCallbacks.removeUnordered(Q)};ma.removeTask=function(Q){this._tasks.removeUnordered(Q);this._runQueue.removeUnordered(Q)};ma._updateTask=function(Q){this._tasks.forAll(na=>
{na.name===Q&&na.setPriority(Q)})};ma._getState=function(Q){if(this._runQueue.some(oa=>oa.name===Q))return k.TaskState.SCHEDULED;let na=k.TaskState.IDLE;this._tasks.forAll(oa=>{oa.name===Q&&oa.needsUpdate&&(1>=oa.schedulePriority?na=k.TaskState.READY:na!==k.TaskState.READY&&(na=k.TaskState.WAITING))});return na};ma._getRuntime=function(Q){let na=0;this._tasks.forAll(oa=>{oa.name===Q&&(na+=oa.runtime)});return na};ma._resetRuntimes=function(){this._tasks.forAll(Q=>Q.runtime=0)};ma._getRunning=function(){const Q=
new Map;this._tasks.forAll(oa=>{oa.needsUpdate&&Q.set(oa.name,(Q.get(oa.name)||0)+1)});if(0===Q.size)return null;let na="";Q.forEach((oa,qa)=>{na=1<oa?na+` ${oa}x ${qa}`:na+` ${qa}`});return na};ma._runIdle=function(){this._run()};ma._runInteracting=function(){this._run()};ma._runAnimating=function(){this._run()};ma._updateLoad=function(){const Q=this._tasks.reduce((na,oa)=>oa.needsUpdate?++na:na,0);this._load=.9*this._load+Q*(1-.9)};ma._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(Q=>
{if(Q.needsUpdate)return!0;Q.schedulePriority=Q.basePriority;return!1});for(this._tasks.forAll(Q=>{0===Q.basePriority&&Q.needsUpdate&&!this._runQueue.includes(Q)&&this._runQueue.unshift(Q)});0===this._runQueue.length;){let Q=!1,na=0;this._tasks.forAll(oa=>{if(oa.needsUpdate&&0!==oa.schedulePriority&&0!==oa.basePriority)switch(Q=!0,na=Math.max(na,oa.basePriority),oa.schedulePriority){case 1:oa.schedulePriority=0;this._runQueue.push(oa);break;default:--oa.schedulePriority}});if(!Q)return this.updating=
!1;this._maxReschedule===H&&(this._maxReschedule=na);--this._maxReschedule}return this.updating=!0};ma._run=function(){const Q=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var na=this._budget.now();const oa=this._runQueue.pop();this._budget.resetProgress();try{oa.task.runTask(this._budget)}catch(qa){w.error(`Exception in task "${oa.name}"`,qa)}oa.schedulePriority=oa.basePriority;na=this._budget.now()-na;oa.runtime+=na;this._frameTaskTimes.set(oa.priority,this._frameTaskTimes.get(oa.priority)+
na);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",oa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-Q);return}}while(this._schedule());this.updating=this._tasks.some(oa=>oa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-Q)};ma._startFrameTaskTimes=function(){for(const Q of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[Q],
0)};ma._recordFrameTaskTimes=function(Q){this._frameTaskTimes.forEach((na,oa)=>this.performanceInfo.tasks.get(oa).record(na));this.performanceInfo.total.record(Q)};d._createClass(ea,[{key:"load",get:function(){return this._load}},{key:"state",get:function(){return z.isNone(this._test.state)?this._state:this._test.state},set:function(Q){this._state!==Q&&(this._state=Q,this.state!==k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(na=>na.idleEnd())))}},
{key:"test",get:function(){return this._test}}]);return ea}(Y);ca.__decorate([R.property()],f.prototype,"updating",void 0);f=ca.__decorate([h.subclass("esri.views.support.Scheduler")],f);A.Scheduler=f;let I=function(N){function ea(Q,na,oa,qa){var wa=N.call(this,{})||this;wa._scheduler=Q;wa.name=na;wa._basePriority=qa;wa.runtime=0;wa._queue=new K.PromiseQueue;wa._handles=new t;wa.schedulePriority=wa._basePriority;wa.task=z.isSome(oa)?oa:wa._queue;wa._handles.add(y.when(()=>wa.task.running,()=>Q.activate()));
return wa}d._inheritsLoose(ea,N);var ma=ea.prototype;ma.normalizeCtorArgs=function(){return{}};ma.remove=function(){this.processQueue(U);this._scheduler.removeTask(this);this.schedule=S.schedule;this.reschedule=S.reschedule;this._handles.destroy()};ma.setPriority=function(Q){this.name=Q;Q=r(Q);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=Q;this._basePriority=Q};ma.schedule=function(Q,na,oa){return this._queue.push(Q,na,oa)};ma.reschedule=function(Q,na,oa){return this._queue.unshift(Q,
na,oa)};ma.processQueue=function(Q){this._queue.runTask(Q)};d._createClass(ea,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(Q){this.setPriority(Q)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ea}(Y);ca.__decorate([R.property({constructOnly:!0})],I.prototype,"task",void 0);ca.__decorate([R.property({readOnly:!0})],I.prototype,
"updating",null);I=ca.__decorate([h.subclass("esri.views.support.SchedulerTask")],I);let T=function(){function N(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ea=N.prototype;ea.run=function(ma){if(this.done)return!1;!0===ma()&&(this._didWork=!0);return!0};ea.madeProgress=function(){this._didWork=!0};ea.reset=function(ma,Q){this._begin=this.now();this._budget=ma;this._state=Q;this._didWork=!1};ea.now=
function(){return performance.now()};ea.resetProgress=function(){this._didWork=!1};d._createClass(N,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ma){this._enabled=ma}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-
this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return N}();A.Budget=T})(G||(G={}));k.TaskState=void 0;(function(A){A.SCHEDULED="s";A.READY="r";A.WAITING="w";A.IDLE="i"})(k.TaskState||(k.TaskState={}));const U=(()=>{const A=new G.Budget;A.enabled=!1;return A})(),S=new (function(){function A(){}var f=A.prototype;f.remove=function(){};f.processQueue=function(){};f.schedule=function(I,T,N){try{if(q.isAborted(T)){const ea=q.createAbortError();return N?Promise.resolve(N(ea)):
Promise.reject(ea)}return q.when(I(U))}catch(ea){return Promise.reject(ea)}};f.reschedule=function(I,T,N){return this.schedule(I,T,N)};return A}()),H=Number.MAX_SAFE_INTEGER;k.ImmediateTask=S;k.getTaskPriority=r;k.newScheduler=function(){return new G.Scheduler};k.noBudget=U;k.taskPriorities=u;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,Y,t,x,z){ca=function(n){function p(y){y=n.call(this,y)||this;y._groups=new Map;return y}k._inheritsLoose(p,n);var q=p.prototype;q.destroy=function(){this.removeAll()};q.add=function(y,L){if(!this._isHandle(y)&&!Array.isArray(y)&&!Y.isCollection(y))return this;const R=this._getOrCreateGroup(L);Array.isArray(y)||Y.isCollection(y)?y.forEach(l=>this._isHandle(l)&&R.push(l)):R.push(y);this.notifyChange("size");return this};q.forEach=function(y,L){if("function"===typeof y)this._groups.forEach(R=>
R.forEach(y));else{const R=this._getGroup(y);R&&L&&R.forEach(L)}};q.has=function(y){return this._groups.has(this._ensureGroupKey(y))};q.remove=function(y){if(Array.isArray(y)||Y.isCollection(y))return y.forEach(this.remove,this),this;if(!this.has(y))return this;const L=this._getGroup(y);for(let R=0;R<L.length;R++)L[R].remove();this._deleteGroup(y);this.notifyChange("size");return this};q.removeAll=function(){this._groups.forEach(y=>{for(let L=0;L<y.length;L++)y[L].remove()});this._groups.clear();
this.notifyChange("size");return this};q._isHandle=function(y){return y&&!!y.remove};q._getOrCreateGroup=function(y){if(this.has(y))return this._getGroup(y);const L=[];this._groups.set(this._ensureGroupKey(y),L);return L};q._getGroup=function(y){return t.assumeNonNull(this._groups.get(this._ensureGroupKey(y)))};q._deleteGroup=function(y){return this._groups.delete(this._ensureGroupKey(y))};q._ensureGroupKey=function(y){return y||"_default_"};k._createClass(p,[{key:"size",get:function(){let y=0;this._groups.forEach(L=>
{y+=L.length});return y}}]);return p}(ca);d.__decorate([x.property({readOnly:!0})],ca.prototype,"size",null);return ca=d.__decorate([z.subclass("esri.core.Handles")],ca)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l,M){function c(U){return U?U instanceof G?U.toArray():U.length?Array.prototype.slice.apply(U):[]:[]}function h(U){if(U&&U.length)return U[0]}function K(U,S,H,A){S&&S.forEach((f,I,T)=>{U.push(f);K(U,H.call(A,f,I,T),H,A)})}var W;let r=function(){function U(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var S=U.prototype;S.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};S.reset=function(H){this.defaultPrevented=
!1;this.item=H};return U}();const w=new z(r,void 0,U=>{U.item=null;U.target=null;U.defaultPrevented=!1;U.cancellable=!1}),u=()=>{},F=new Set,J=new Set,P=new Set,ha=new Map;let E=0,G=W=function(U,S){function H(f){f=U.call(this,f)||this;f._chgListeners=[];f._notifications=null;f._timer=null;f._observable=new M.SimpleObservable;f.length=0;f._items=[];Object.defineProperty(k._assertThisInitialized(f),"uid",{value:E++});return f}k._inheritsLoose(H,U);H.isCollection=function(f){return null!=f&&f instanceof
W};var A=H.prototype;A.normalizeCtorArgs=function(f){return f?Array.isArray(f)||f instanceof W?{items:f}:f:{}};A.destroy=function(){this.removeAll()};A[S]=function*(){yield*this.items};A.hasEventListener=function(f){return"change"===f?0<this._chgListeners.length:this._emitter.hasEventListener(f)};A.on=function(f,I){if("change"===f){const T=this._chgListeners,N={removed:!1,callback:I};T.push(N);this._notifications&&this._notifications.push({listeners:T.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=u;N.removed=!0;T.splice(T.indexOf(N),1)}}}return this._emitter.on(f,I)};A.once=function(f,I){const T=this.on(f,I);return{remove(){T.remove()}}};A.add=function(f,I){l.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;I=this.getNextIndex(null!=I?I:null);this._splice(I,0,[f]);this._emitAfterChanges(n.ObservableChangesType.ADD);return this};A.addMany=function(f,I=this._items.length){l.trackAccess(this._observable);if(!f||!f.length||
this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;I=this.getNextIndex(I);this._splice(I,0,c(f));this._emitAfterChanges(n.ObservableChangesType.ADD);return this};A.at=function(f){l.trackAccess(this._observable);f=Math.trunc(f)||0;0>f&&(f+=this.length);if(!(0>f||f>=this.length))return this._items[f]};A.removeAll=function(){l.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];const f=this._splice(0,this.length)||[];this._emitAfterChanges(n.ObservableChangesType.REMOVE);
return f};A.clone=function(){l.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(t.clone)})};A.concat=function(...f){l.trackAccess(this._observable);f=f.map(c);return this._createNewInstance({items:this._items.concat(...f)})};A.drain=function(f,I){l.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var T=x.assumeNonNull(this._splice(0,this.length)),N=T.length;for(let ea=0;ea<N;ea++)f.call(I,T[ea],ea,T);this._emitAfterChanges(n.ObservableChangesType.REMOVE)}};
A.every=function(f,I){l.trackAccess(this._observable);return this._items.every(f,I)};A.filter=function(f,I){l.trackAccess(this._observable);let T;T=2===arguments.length?this._items.filter(f,I):this._items.filter(f);return this._createNewInstance({items:T})};A.find=function(f,I){l.trackAccess(this._observable);return this._items.find(f,I)};A.findIndex=function(f,I){l.trackAccess(this._observable);return this._items.findIndex(f,I)};A.flatten=function(f,I){l.trackAccess(this._observable);const T=[];
K(T,this,f,I);return new W(T)};A.forEach=function(f,I){l.trackAccess(this._observable);return this._items.forEach(f,I)};A.getItemAt=function(f){l.trackAccess(this._observable);return this._items[f]};A.getNextIndex=function(f){l.trackAccess(this._observable);const I=this.length;f=null==f?I:f;0>f?f=0:f>I&&(f=I);return f};A.includes=function(f,I=0){l.trackAccess(this._observable);return this._items.includes(f,I)};A.indexOf=function(f,I=0){l.trackAccess(this._observable);return this._items.indexOf(f,
I)};A.join=function(f=","){l.trackAccess(this._observable);return this._items.join(f)};A.lastIndexOf=function(f,I=this.length-1){l.trackAccess(this._observable);return this._items.lastIndexOf(f,I)};A.map=function(f,I){l.trackAccess(this._observable);f=this._items.map(f,I);return new W({items:f})};A.reorder=function(f,I=this.length-1){l.trackAccess(this._observable);const T=this.indexOf(f);if(-1!==T){0>I?I=0:I>=this.length&&(I=this.length-1);if(T!==I){if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return f;
this._splice(T,1);this._splice(I,0,[f]);this._emitAfterChanges(n.ObservableChangesType.MOVE)}return f}};A.pop=function(){l.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var f=h(this._splice(this.length-1,1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return f}};A.push=function(...f){l.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,f);this._emitAfterChanges(n.ObservableChangesType.ADD);
return this.length};A.reduce=function(f,I){l.trackAccess(this._observable);const T=this._items;return 2===arguments.length?T.reduce(f,I):T.reduce(f)};A.reduceRight=function(f,I){l.trackAccess(this._observable);const T=this._items;return 2===arguments.length?T.reduceRight(f,I):T.reduceRight(f)};A.remove=function(f){l.trackAccess(this._observable);return this.removeAt(this.indexOf(f))};A.removeAt=function(f){l.trackAccess(this._observable);if(!(0>f||f>=this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE)))return f=
h(this._splice(f,1)),this._emitAfterChanges(n.ObservableChangesType.REMOVE),f};A.removeMany=function(f){l.trackAccess(this._observable);if(!f||!f.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];f=f instanceof W?f.toArray():f;const I=this._items,T=[],N=f.length;for(let na=0;na<N;na++){var ea=I.indexOf(f[na]);if(-1<ea){{var ma=na+1;var Q=ea+1;const oa=Math.min(f.length-ma,I.length-Q);let qa=0;for(;qa<oa&&f[ma+qa]===I[Q+qa];)qa++;ma=qa}ma=1+ma;(ea=this._splice(ea,ma))&&0<ea.length&&
T.push.apply(T,ea);na+=ma-1}}this._emitAfterChanges(n.ObservableChangesType.REMOVE);return T};A.reverse=function(){l.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const f=this._splice(0,this.length);f&&(f.reverse(),this._splice(0,0,f));this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};A.shift=function(){l.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var f=h(this._splice(0,
1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return f}};A.slice=function(f=0,I=this.length){l.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(f,I)})};A.some=function(f,I){l.trackAccess(this._observable);return this._items.some(f,I)};A.sort=function(f){l.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const I=x.assumeNonNull(this._splice(0,this.length));arguments.length?I.sort(f):I.sort();
this._splice(0,0,I);this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};A.splice=function(f,I,...T){l.trackAccess(this._observable);const N=(I?n.ObservableChangesType.REMOVE:0)|(T.length?n.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(N))return[];f=this._splice(f,I,T)||[];this._emitAfterChanges(N);return f};A.toArray=function(){l.trackAccess(this._observable);return this._items.slice()};A.toJSON=function(){l.trackAccess(this._observable);return this.toArray()};A.toLocaleString=
function(){l.trackAccess(this._observable);return this._items.toLocaleString()};A.toString=function(){l.trackAccess(this._observable);return this._items.toString()};A.unshift=function(...f){l.trackAccess(this._observable);if(!f.length||this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(0,0,f);this._emitAfterChanges(n.ObservableChangesType.ADD);return this.length};A._createNewInstance=function(f){return new this.constructor(f)};A._splice=function(f,I,T){const N=this._items;
var ea=this.itemType;let ma=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=p.schedule(()=>this._dispatchChange()));if(I){ma=N.splice(f,I);if(this.hasEventListener("before-remove")){var Q=w.acquire();Q.target=this;Q.cancellable=!0;for(let qa=0,wa=ma.length;qa<wa;qa++)I=ma[qa],Q.reset(I),this.emit("before-remove",Q),Q.defaultPrevented&&(ma.splice(qa,
1),N.splice(f,0,I),f+=1,--qa,--wa);w.release(Q)}this.length=this._items.length;if(this.hasEventListener("after-remove")){I=w.acquire();I.target=this;I.cancellable=!1;Q=ma.length;for(let qa=0;qa<Q;qa++)I.reset(ma[qa]),this.emit("after-remove",I);w.release(I)}}if(T&&T.length){if(ea){I=[];for(var na of T)T=ea.ensureType(na),null==T&&null!=na||I.push(T);T=I}ea=this.hasEventListener("before-add");na=this.hasEventListener("after-add");I=f===this.length;if(ea||na){var oa=w.acquire();oa.target=this;oa.cancellable=
!0;Q=w.acquire();Q.target=this;Q.cancellable=!1;for(const qa of T)ea?(oa.reset(qa),this.emit("before-add",oa),oa.defaultPrevented||(I?N.push(qa):N.splice(f++,0,qa),this._set("length",N.length),na&&(Q.reset(qa),this.emit("after-add",Q)))):(I?N.push(qa):N.splice(f++,0,qa),this._set("length",N.length),Q.reset(qa),this.emit("after-add",Q));w.release(Q);w.release(oa)}else{if(I)for(oa of T)N.push(oa);else N.splice(f,0,...T);this._set("length",N.length)}}(T&&T.length||ma&&ma.length)&&this._notifyChangeEvent(T,
ma);return ma};A._emitBeforeChanges=function(f){let I=!1;if(this.hasEventListener("before-changes")){const T=w.acquire();T.target=this;T.cancellable=!0;T.type=f;this.emit("before-changes",T);I=T.defaultPrevented;w.release(T)}return I};A._emitAfterChanges=function(f){if(this.hasEventListener("after-changes")){const I=w.acquire();I.target=this;I.cancellable=!1;I.type=f;this.emit("after-changes",I);w.release(I)}this._observable.notify()};A._notifyChangeEvent=function(f,I){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:f,removed:I})};A._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var f=this._notifications;this._notifications=null;for(const I of f){f=I.changes;F.clear();J.clear();P.clear();for(const {added:na,removed:oa}of f){if(na)if(0===P.size&&0===J.size)for(const qa of na)F.add(qa);else for(const qa of na)J.has(qa)?(P.add(qa),J.delete(qa)):P.has(qa)||F.add(qa);
if(oa)if(0===P.size&&0===F.size)for(const qa of oa)J.add(qa);else for(const qa of oa)F.has(qa)?F.delete(qa):(P.delete(qa),J.add(qa))}const T=ca.acquire();F.forEach(na=>{T.push(na)});const N=ca.acquire();J.forEach(na=>{N.push(na)});const ea=this._items,ma=I.items,Q=ca.acquire();P.forEach(na=>{ma.indexOf(na)!==ea.indexOf(na)&&Q.push(na)});if(I.listeners&&(T.length||N.length||Q.length)){f={target:this,added:T,removed:N,moved:Q};const na=I.listeners.length;for(let oa=0;oa<na;oa++){const qa=I.listeners[oa];
qa.removed||qa.callback.call(this,f)}}ca.release(T);ca.release(N);ca.release(Q)}F.clear();J.clear();P.clear()}};k._createClass(H,[{key:"items",get:function(){l.trackAccess(this._observable);return this._items},set:function(f){this._emitBeforeChanges(n.ObservableChangesType.ADD)||(this._splice(0,this.length,c(f)),this._emitAfterChanges(n.ObservableChangesType.ADD))}}]);return H}(Y.EventedAccessor,Symbol.iterator);G.ofType=U=>{if(!U)return W;if(ha.has(U))return ha.get(U);let S=null;if("function"===
typeof U)S=U.prototype.declaredClass;else if(U.base)S=U.base.prototype.declaredClass;else for(var H in U.typeMap){const A=U.typeMap[H].prototype.declaredClass;S=S?S+` | ${A}`:A}H=function(A){function f(){return A.apply(this,arguments)||this}k._inheritsLoose(f,A);return f}(W);d.__decorate([L.shared({Type:U,ensureType:"function"===typeof U?y.ensureType(U):y.ensureOneOfType(U)})],H.prototype,"itemType",void 0);H=d.__decorate([R.subclass(`esri.core.Collection<${S}>`)],H);ha.set(U,H);return H};d.__decorate([q.property()],
G.prototype,"length",void 0);d.__decorate([q.property()],G.prototype,"items",null);return G=W=d.__decorate([R.subclass("esri.core.Collection")],G)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var d=k.ObservableChangesType||(k.ObservableChangesType={});d[d.ADD=1]="ADD";d[d.REMOVE=2]="REMOVE";d[d.MOVE=4]="MOVE";Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(d){return(ca,Y)=>{ca[Y]=d}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,d,ca,Y,t,x,z){function n(R,l,M={}){return p(R,l,M,y)}function p(R,l,M={},c){let h=null;const K=M.once?(W,r)=>{c(W)&&(Y.removeMaybe(h),l(W,r))}:(W,r)=>{c(W)&&l(W,r)};h=x.watchTracked(R,
K,M.sync,M.equals);M.initial&&(R=R(),K(R,R));return h}function q(R,l,M){if(t.isAborted(M))return Promise.reject(t.createAbortError());const c=R();if(null!=l&&l(c))return Promise.resolve(c);let h=null;return new Promise((K,W)=>{h=ca.handlesGroup([t.onAbort(M,()=>{h=Y.removeMaybe(h);W(t.createAbortError())}),p(R,r=>{h=Y.removeMaybe(h);K(r)},{sync:!1,once:!0},null!=l?l:y)])})}function y(R){return!0}function L(R){return!!R}k.autorun=z.autorun;k.initial={initial:!0};k.on=function(R,l,M,c={}){function h(){W&&
r&&(r.remove(),null==c.onListenerRemove?void 0:c.onListenerRemove(W),r=W=null)}function K(F){c.once&&c.once&&Y.removeMaybe(w);M(F)}let W=null,r=null,w=null;const u=n(R,(F,J)=>{h();d.isEventTarget(F)&&(W=F,r=d.on(F,l,K),null==c.onListenerAdd?void 0:c.onListenerAdd(F))},{sync:c.sync,initial:!0});return w=ca.makeHandle(()=>{u.remove();h()})};k.once=function(R,l){return q(R,null,l)};k.pausable=function(R,l,M={}){let c=!1;const h=n(R,(K,W)=>{c||l(K,W)},M);return{remove(){h.remove()},pause(){c=!0},resume(){c=
!1}}};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=n;k.when=function(R,l,M={}){return p(R,l,M,L)};k.whenOnce=function(R,l){return q(R,L,l)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,Y,t,x,z,n,p,q){k.PromiseQueue=function(L){function R(){var M=L.apply(this,arguments)||this;M._tasks=[];M.running=!1;return M}d._inheritsLoose(R,L);var l=R.prototype;l.destroy=function(){this.cancelAll()};l.runTask=function(M){for(;!M.done&&this._process(M);)M.madeProgress()};l.push=function(M,c,h){this.running=!0;return new Promise((K,W)=>this._tasks.push(new y(K,W,M,c,h)))};l.unshift=function(M,c,h){this.running=!0;return new Promise((K,W)=>this._tasks.unshift(new y(K,W,M,c,h)))};
l._process=function(M){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const h=t.isAborted(c.signal);if(h&&!c.abortCallback)c.reject(t.createAbortError());else{const K=h?c.abortCallback(t.createAbortError()):c.callback(M);t.isPromiseLike(K)?K.then(c.resolve,c.reject):c.resolve(K)}}catch(h){c.reject(h)}this.running=0<this._tasks.length;return!0};l.cancelAll=function(){const M=t.createAbortError();for(const c of this._tasks)if(c.abortCallback){const h=c.abortCallback(M);c.resolve(h)}else c.reject(M);
this._tasks.length=0;this.running=!1};d._createClass(R,[{key:"length",get:function(){return this._tasks.length}}]);return R}(Y);ca.__decorate([x.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=ca.__decorate([q.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let y=function(L,R,l,M,c){this.resolve=L;this.reject=R;this.callback=l;this.signal=M;this.abortCallback=c};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,Y,t,x,z,n){ca=function(p){function q(){var y=p.apply(this,arguments)||this;y.SCHEDULER_LOG_SLOW_TASKS=!1;y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return y}k._inheritsLoose(q,p);return q}(ca);d.__decorate([Y.property()],ca.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([Y.property()],ca.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ca=d.__decorate([n.subclass("esri.views.support.DebugFlags")],ca);return new ca})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,d,ca,Y,t){const x=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let z=1;k.createCapabilities=function(n,p){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:p,supportsDelete:p,
supportsEditing:p,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:p,supportsExceedsLimitStatistics:!0},query:Y.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:p,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,
supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=function(n,p){if(d("esri-csp-restrictions"))return()=>({[p]:null,...n});try{let q=`this.${p} = null;`;for(const L in n){const R=x.test(L)?`.${L}`:`["${L}"]`;q+=`this${R} = ${JSON.stringify(n[L])};`}const y=(new Function(`\n      return class AttributesClass$${z++} {\n        constructor() {\n          ${q};\n        }\n      }\n    `))();
return()=>new y}catch(q){return()=>({[p]:null,...n})}};k.createDefaultTemplate=function(n={}){return[{name:"New Feature",description:"",prototype:{attributes:ca.clone(n)}}]};k.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?t.defaultPointSymbolJSON:"esriGeometryPolyline"===n?t.defaultPolylineSymbolJSON:t.defaultPolygonSymbolJSON}}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(k){const d=[252,146,31,255],ca={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Y={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};k.defaultColor=d;k.defaultOutlineColor=[153,153,153,255];k.defaultPointSymbolJSON=ca;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=
Y;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(k,d,ca,Y,t,x){function z(c){return new L(c)}function n(){return p.apply(this,arguments)}function p(){p=ca._asyncToGenerator(function*(){Y.isNone(M)&&
(M=yield new Promise((c,h)=>k(["../../../../geometry/geometryEngineJSON"],c,h)));return M});return p.apply(this,arguments)}function q(){q=ca._asyncToGenerator(function*(c,h){!t.isValid(c)||"esriGeometryPolygon"!==h&&"esriGeometryPolyline"!==h||(yield n())});return q.apply(this,arguments)}let y=function(){this.description=this.code=null},L=function(c){this.error=new y;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=c},R=function(c){this.globalId=null;this.success=
!0;this.objectId=this.uniqueId=c};const l=new Set;let M;d.createFeatureEditErrorResult=z;d.createFeatureEditSuccessResult=function(c){return new R(c)};d.loadGeometryEngine=n;d.loadGeometryEngineForSimplify=function(c,h){return q.apply(this,arguments)};d.mixAttributes=function(c,h,K,W=!1,r){l.clear();for(const J in K){const P=c.get(J);if(P){var w=K[J];{var u=P;var F=w;let ha=F;"string"===typeof F&&x.isNumericField(u)?ha=parseFloat(F):null!=F&&x.isStringField(u)&&"string"!==typeof F&&(ha=String(F));
u=x.sanitizeNullFieldValue(ha)}u!==w&&r&&r.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:P,originalValue:w,sanitizedValue:u}});l.add(P.name);if(P&&(W||P.editable)){if(w=x.validateFieldValue(P,u))return z(x.validationErrorToString(w,P,u));h[P.name]=u}}}for(const J of c.requiredFields)if(!l.has(J.name))return z(`missing required field "${J.name}"`);return null};d.simplify=function(c,h){if(!c||!t.isValid(h))return c;if("rings"in c||"paths"in
c){if(Y.isNone(M))throw new TypeError("geometry engine not loaded");return M.simplify(h,c)}return c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(k,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",
esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=d;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(k,d,ca,Y,t,x,z,n,p,q,y,L,R,l,M){function c(w){return Y.isPoint(w)?
null!=w.z:!!w.hasZ}function h(w){return Y.isPoint(w)?null!=w.m:!!w.hasM}const K=t.WGS84,W={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:t.WGS84},r={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function w(){this._nextObjectId=this._queryEngine=null}var u=w.prototype;u.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};u.load=function(){var F=k._asyncToGenerator(function*(J){var P=
[];const {features:ha}=J;var E=this._inferLayerProperties(ha,J.fields);const G=J.fields||[],U=null!=J.hasM?J.hasM:E.hasM,S=null!=J.hasZ?J.hasZ:E.hasZ;var H=!J.spatialReference&&!E.spatialReference;const A=H?K:J.spatialReference||E.spatialReference,f=H?W:null,I=J.geometryType||E.geometryType;let T=J.objectIdField||E.objectIdField;J=J.timeInfo;if(I&&(H&&P.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!I))throw new d("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!T)throw new d("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");E.objectIdField&&T!==E.objectIdField&&(P.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${T}" doesn't match the field name "${E.objectIdField}", found in the provided fields`}),T=E.objectIdField);if(T&&!E.objectIdField){let ea=null;G.some(ma=>ma.name===T?(ea=ma,!0):!1)?
(ea.type="esriFieldTypeOID",ea.editable=!1,ea.nullable=!1):G.unshift({alias:T,name:T,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ea of G){null==ea.name&&(ea.name=ea.alias);null==ea.alias&&(ea.alias=ea.name);if(!ea.name)throw new d("feature-layer:invalid-field-name","field name is missing",{field:ea});ea.name===T&&(ea.type="esriFieldTypeOID");if(!l.kebabDict.jsonValues.includes(ea.type))throw new d("feature-layer:invalid-field-type",`invalid type for field "${ea.name}"`,{field:ea});
}E={};for(var N of G)"esriFieldTypeOID"!==N.type&&"esriFieldTypeGlobalID"!==N.type&&(H=M.getFieldDefaultValue(N),void 0!==H&&(E[N.name]=H));this._fieldsIndex=new R(G);this._createDefaultAttributes=y.createDefaultAttributesFunction(E,T);J&&(J.startTimeField&&((N=this._fieldsIndex.get(J.startTimeField))?(J.startTimeField=N.name,N.type="esriFieldTypeDate"):J.startTimeField=null),J.endTimeField&&((N=this._fieldsIndex.get(J.endTimeField))?(J.endTimeField=N.name,N.type="esriFieldTypeDate"):J.endTimeField=
null),J.trackIdField&&((N=this._fieldsIndex.get(J.trackIdField))?J.trackIdField=N.name:(J.trackIdField=null,P.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:J}}))),J.startTimeField||J.endTimeField||(P.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:J}}),J=null));P={warnings:P,featureErrors:[],layerDefinition:{...r,drawingInfo:y.createDrawingInfo(I),templates:y.createDefaultTemplate(E),
extent:f,geometryType:I,objectIdField:T,fields:G,hasZ:!!S,hasM:!!U,timeInfo:J},assignedObjectIds:{}};this._queryEngine=new q.QueryEngine({fields:G,geometryType:I,hasM:U,hasZ:S,objectIdField:T,spatialReference:A,featureStore:new n({geometryType:I,hasM:U,hasZ:S}),timeInfo:J,cacheSpatialQueries:!0});if(!ha||!ha.length)return this._nextObjectId=z.initialObjectId,P;this._nextObjectId=z.findLastObjectIdFromFeatures(T,ha)+1;yield p.checkProjectionSupport(ha,A);return this._loadInitialFeatures(P,ha)});return function(J){return F.apply(this,
arguments)}}();u.applyEdits=function(){var F=k._asyncToGenerator(function*(J){const {spatialReference:P,geometryType:ha}=this._queryEngine;yield Promise.all([L.loadGeometryEngineForSimplify(P,ha),p.checkProjectionSupport(J.adds,P),p.checkProjectionSupport(J.updates,P)]);return this._applyEdits(J)});return function(J){return F.apply(this,arguments)}}();u.queryFeatures=function(F,J={}){return this._queryEngine.executeQuery(F,J.signal)};u.queryFeatureCount=function(F,J={}){return this._queryEngine.executeQueryForCount(F,
J.signal)};u.queryObjectIds=function(F,J={}){return this._queryEngine.executeQueryForIds(F,J.signal)};u.queryExtent=function(F,J={}){return this._queryEngine.executeQueryForExtent(F,J.signal)};u.querySnapping=function(F,J={}){return this._queryEngine.executeQueryForSnapping(F,J.signal)};u._inferLayerProperties=function(F,J){let P=void 0,ha=void 0,E=null,G=null,U=null;for(const S of F)if(F=S.geometry,!ca.isNone(F)&&(E||(E=Y.getJsonType(F)),G||(G=F.spatialReference),null==P&&(P=c(F)),null==ha&&(ha=
h(F)),E&&G&&null!=P&&null!=ha))break;if(J&&J.length){let S=null;J.some(H=>{const A="esriFieldTypeOID"===H.type,f=!H.type&&H.name&&"objectid"===H.name.toLowerCase();S=H;return A||f})&&(U=S.name)}return{geometryType:E,spatialReference:G,objectIdField:U,hasM:ha,hasZ:P}};u._loadInitialFeatures=function(F,J){const {geometryType:P,hasM:ha,hasZ:E,objectIdField:G,spatialReference:U,featureStore:S}=this._queryEngine,H=[];for(const A of J){null!=A.uid&&(F.assignedObjectIds[A.uid]=-1);if(A.geometry&&P!==Y.getJsonType(A.geometry)){F.featureErrors.push(L.createFeatureEditErrorResult("Incorrect geometry type."));
continue}J=this._createDefaultAttributes();const f=L.mixAttributes(this._fieldsIndex,J,A.attributes,!0,F.warnings);f?F.featureErrors.push(f):(this._assignObjectId(J,A.attributes,!0),A.attributes=J,null!=A.uid&&(F.assignedObjectIds[A.uid]=A.attributes[G]),ca.isSome(A.geometry)&&(A.geometry=p.project(A.geometry,A.geometry.spatialReference,U)),H.push(A))}S.addMany(x.convertFromFeatures([],H,P,E,ha,G));F.layerDefinition.extent=this._queryEngine.fullExtent;if(F.layerDefinition.timeInfo){const {start:A,
end:f}=this._queryEngine.timeExtent;F.layerDefinition.timeInfo.timeExtent=[A,f]}return F};u._applyEdits=function(F){const {adds:J,updates:P,deletes:ha}=F;F={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};J&&J.length&&this._applyAddEdits(F,J);P&&P.length&&this._applyUpdateEdits(F,P);if(ha&&ha.length){for(const E of ha)F.deleteResults.push(L.createFeatureEditSuccessResult(E));this._queryEngine.featureStore.removeManyById(ha)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:F}};
u._applyAddEdits=function(F,J){const {addResults:P}=F,{geometryType:ha,hasM:E,hasZ:G,objectIdField:U,spatialReference:S,featureStore:H}=this._queryEngine,A=[];for(const f of J){if(f.geometry&&ha!==Y.getJsonType(f.geometry)){P.push(L.createFeatureEditErrorResult("Incorrect geometry type."));continue}J=this._createDefaultAttributes();const I=L.mixAttributes(this._fieldsIndex,J,f.attributes);I?P.push(I):(this._assignObjectId(J,f.attributes),f.attributes=J,null!=f.uid&&(F.uidToObjectId[f.uid]=f.attributes[U]),
ca.isSome(f.geometry)&&(f.geometry=p.project(L.simplify(f.geometry,S),f.geometry.spatialReference,S)),A.push(f),P.push(L.createFeatureEditSuccessResult(f.attributes[U])))}H.addMany(x.convertFromFeatures([],A,ha,G,E,U))};u._applyUpdateEdits=function({updateResults:F},J){const {geometryType:P,hasM:ha,hasZ:E,objectIdField:G,spatialReference:U,featureStore:S}=this._queryEngine;for(const H of J){const {attributes:A,geometry:f}=H;J=A&&A[G];if(null==J){F.push(L.createFeatureEditErrorResult(`Identifier field ${G} missing`));
continue}if(!S.has(J)){F.push(L.createFeatureEditErrorResult(`Feature with object id ${J} missing`));continue}const I=x.convertToFeature(S.getFeature(J),P,E,ha);if(ca.isSome(f)){if(P!==Y.getJsonType(f)){F.push(L.createFeatureEditErrorResult("Incorrect geometry type."));continue}I.geometry=p.project(L.simplify(f,U),f.spatialReference,U)}if(A){const T=L.mixAttributes(this._fieldsIndex,I.attributes,A);if(T){F.push(T);continue}}S.add(x.convertFromFeature(I,P,E,ha,G));F.push(L.createFeatureEditSuccessResult(J))}};
u._assignObjectId=function(F,J,P=!1){const ha=this._queryEngine.objectIdField;P?J&&isFinite(J[ha])?F[ha]=J[ha]:F[ha]=this._nextObjectId++:F[ha]=this._nextObjectId++};return w}()});