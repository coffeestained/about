// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,d,Z,Q,p,x,z,v){function r(e,A){return e?A?4:3:A?3:2}function t(e,A,S,U){if(e){if(S)return A&&U?a:Ma;if(A&&U)return wa}else if(A&&U)return Ma;return Ja}function y({scale:e,translate:A},S){return Math.round((S-A[0])/e[0])}function G({scale:e,translate:A},
S){return Math.round((A[1]-S)/e[1])}function I({scale:e,translate:A},S){return S*e[0]+A[0]}function m({scale:e,translate:A},S){return A[1]-S*e[1]}function J(e){e=e.coords;return{x:e[0],y:e[1]}}function c(e,A){e.coords[0]=A.x;e.coords[1]=A.y;return e}function h(e){e=e.coords;return{x:e[0],y:e[1],z:e[2]}}function D(e,A){e.coords[0]=A.x;e.coords[1]=A.y;e.coords[2]=A.z;return e}function B(e){e=e.coords;return{x:e[0],y:e[1],m:e[2]}}function n(e,A){e.coords[0]=A.x;e.coords[1]=A.y;e.coords[2]=A.m;return e}
function q(e){e=e.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function u(e,A){e.coords[0]=A.x;e.coords[1]=A.y;e.coords[2]=A.z;e.coords[3]=A.m;return e}function N(e,A){return e&&A?u:e?D:A?n:c}function ba(e,A,S,U,ia){S=N(S,U);for(const fa of A){const {geometry:F,attributes:O}=fa;let ea;F&&(ea=S(new v,F));e.push(new x.OptimizedFeature(ea,O,null,O[ia]))}return e}function T(e,A,S,U){for(const ia of A){const {geometry:fa,attributes:F}=ia;let O;fa&&(O=ka(fa,S,U));e.push({attributes:F,geometry:O})}return e}
function ka(e,A,S){if(Q.isNone(e))return null;const U=r(A,S),ia=[];for(let fa=0;fa<e.coords.length;fa+=U){const F=[];for(let O=0;O<U;O++)F.push(e.coords[fa+O]);ia.push(F)}return A?S?{points:ia,hasZ:A,hasM:S}:{points:ia,hasZ:A}:S?{points:ia,hasM:S}:{points:ia}}function M(e,A,S,U,ia){S=r(S,U);for(const fa of A){A=fa.geometry;U=fa.attributes;let F;A&&(F=H(new v,A,S));e.push(new x.OptimizedFeature(F,U,null,U[ia]))}return e}function H(e,A,S=r(A.hasZ,A.hasM)){e.lengths[0]=A.points.length;const U=e.coords;
let ia=0;for(const fa of A.points)for(A=0;A<S;A++)U[ia++]=fa[A];return e}function W(e,A,S){if(!e)return null;const U=r(A,S),{coords:ia,lengths:fa}=e;e=[];let F=0;for(const O of fa){const ea=[];for(let ra=0;ra<O;ra++){const sa=[];for(let ya=0;ya<U;ya++)sa.push(ia[F++]);ea.push(sa)}e.push(ea)}return A?S?{paths:e,hasZ:A,hasM:S}:{paths:e,hasZ:A}:S?{paths:e,hasM:S}:{paths:e}}function V(e,A,S,U,ia){S=r(S,U);for(const fa of A){A=fa.geometry;U=fa.attributes;let F;A&&(F=K(new v,A,S));e.push(new x.OptimizedFeature(F,
U,null,U[ia]))}return e}function K(e,A,S=r(A.hasZ,A.hasM)){const {lengths:U,coords:ia}=e;let fa=0;for(const F of A.paths){for(const O of F)for(A=0;A<S;A++)ia[fa++]=O[A];U.push(F.length)}return e}function E(e,A,S){if(!e)return null;const U=r(A,S),{coords:ia,lengths:fa}=e;e=[];let F=0;for(const O of fa){const ea=[];for(let ra=0;ra<O;ra++){const sa=[];for(let ya=0;ya<U;ya++)sa.push(ia[F++]);ea.push(sa)}e.push(ea)}return A?S?{rings:e,hasZ:A,hasM:S}:{rings:e,hasZ:A}:S?{rings:e,hasM:S}:{rings:e}}function l(e,
A,S,U,ia){for(const fa of A){A=fa.geometry;const F=fa.centroid,O=fa.attributes;let ea;A&&(ea=L(new v,A,S,U));Q.isSome(F)?e.push(new x.OptimizedFeature(ea,O,c(new v,F),O[ia])):e.push(new x.OptimizedFeature(ea,O,null,O[ia]))}return e}function L(e,A,S=A.hasZ,U=A.hasM){X(e,A.rings,S,U);return e}function X(e,A,S,U){S=r(S,U);const {lengths:ia,coords:fa}=e;U=0;ia.length=fa.length=0;for(const F of A){for(const O of F)for(A=0;A<S;A++)fa[U++]=O[A];ia.push(F.length)}return e}function P(e,A,S,U,ia,fa){e.length=
0;if(!S){for(const F of A)e.push(new x.OptimizedFeature(null,F.attributes,null,F.attributes[fa]));return e}switch(S){case "esriGeometryPoint":return ba(e,A,U,ia,fa);case "esriGeometryMultipoint":return M(e,A,U,ia,fa);case "esriGeometryPolyline":return V(e,A,U,ia,fa);case "esriGeometryPolygon":return l(e,A,U,ia,fa);default:xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`)),e.length=0}return e}function ja(e,A,S,U){e=e&&("coords"in e?e:e.geometry);
if(Q.isNone(e))return null;switch(A){case "esriGeometryPoint":return A=J,S&&U?A=q:S?A=h:U&&(A=B),A(e);case "esriGeometryMultipoint":return ka(e,S,U);case "esriGeometryPolyline":return W(e,S,U);case "esriGeometryPolygon":return E(e,S,U);default:xa.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${A}'`))}}function ma(e,A,S,U,ia){e.length=0;if(Q.isNone(S)){for(const O of A)e.push({attributes:O.attributes});return e}switch(S){case "esriGeometryPoint":var fa=J;
U&&ia?fa=q:U?fa=h:ia&&(fa=B);for(var F of A){const {geometry:O,attributes:ea}=F;U=Q.isSome(O)?fa(O):null;e.push({attributes:ea,geometry:U})}break;case "esriGeometryMultipoint":return T(e,A,U,ia);case "esriGeometryPolyline":for(const O of A){const {geometry:ea,attributes:ra}=O;let sa;Q.isSome(ea)&&(sa=W(ea,U,ia));e.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(fa of A){const {geometry:O,attributes:ea,centroid:ra}=fa;let sa;Q.isSome(O)&&(sa=E(O,U,ia));Q.isSome(ra)?(F=J(ra),
e.push({attributes:ea,centroid:F,geometry:sa})):e.push({attributes:ea,geometry:sa})}break;default:xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`))}return e}function R(e,A,S,U,ia,fa,F=S,O=U){e.lengths.length&&(e.lengths.length=0);e.coords.length&&(e.coords.length=0);if(Q.isNone(A)||!A.coords.length)return null;ia=Na[ia];const {coords:ea,lengths:ra}=A;A=r(S,U);const sa=r(S&&F,U&&O);S=t(S,U,F,O);if(!ra.length)return S(e.coords,ea,0,0,y(fa,ea[0]),
G(fa,ea[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=A,e;let ya,Ba=0,Ca,Ka=0;for(const Ia of ra){if(Ia<ia)continue;let Fa=0;Ca=Ka;O=U=y(fa,ea[Ba]);ya=F=G(fa,ea[Ba+1]);S(e.coords,ea,Ca,Ba,O,ya);Fa++;Ba+=A;Ca+=sa;for(let Ga=1;Ga<Ia;Ga++,Ba+=A)if(O=y(fa,ea[Ba]),ya=G(fa,ea[Ba+1]),O!==U||ya!==F)S(e.coords,ea,Ca,Ba,O-U,ya-F),Ca+=sa,Fa++,U=O,F=ya;Fa>=ia&&(e.lengths.push(Fa),Ka=Ca)}e.coords.length=Ka;return e.coords.length?e:null}function na(e,A,S,U,ia,fa,F){let O=U,ea=0;for(let sa=fa+S;sa<
F;sa+=S){{var ra=A[sa];const ya=A[sa+1],Ba=A[F],Ca=A[F+1];let Ka=A[fa],Ia=A[fa+1],Fa=Ba-Ka,Ga=Ca-Ia;if(0!==Fa||0!==Ga){const Ha=((ra-Ka)*Fa+(ya-Ia)*Ga)/(Fa*Fa+Ga*Ga);1<Ha?(Ka=Ba,Ia=Ca):0<Ha&&(Ka+=Fa*Ha,Ia+=Ga*Ha)}Fa=ra-Ka;Ga=ya-Ia;ra=Fa*Fa+Ga*Ga}ra>O&&(ea=sa,O=ra)}O>U&&(ea-fa>S&&na(e,A,S,U,ia,fa,ea),ia(e,A,e.length,ea,A[ea],A[ea+1]),F-ea>S&&na(e,A,S,U,ia,ea,F))}function oa(e,A,S,U,ia){const {coords:fa,lengths:F}=A,O=S?U?a:Ma:U?Ma:Ja;S=r(S,U);if(!fa.length)return e!==A&&(e.lengths.length=0,e.coords.length=
0),e;if(!F.length)return O(e.coords,fa,0,0,I(ia,fa[0]),m(ia,fa[1])),e!==A&&(e.lengths.length=0,e.coords.length=S),e;const [ea,ra]=ia.scale;U=0;for(let sa=0;sa<F.length;sa++){const ya=F[sa];e.lengths[sa]=ya;let Ba=I(ia,fa[U]),Ca=m(ia,fa[U+1]);O(e.coords,fa,U,U,Ba,Ca);U+=S;for(let Ka=1;Ka<ya;Ka++,U+=S)Ba+=fa[U]*ea,Ca-=fa[U+1]*ra,O(e.coords,fa,U,U,Ba,Ca)}e!==A&&(e.lengths.length=F.length,e.coords.length=fa.length);return e}function qa(e,A,S,U){let ia=0,fa=e[U*A],F=e[U*(A+1)];for(let O=1;O<S;O++){const ea=
fa+e[U*(A+O)],ra=F+e[U*(A+O)+1],sa=(ea-fa)*(ra+F);fa=ea;F=ra;ia+=sa}return.5*ia}const xa=Z.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ja=(e,A,S,U,ia,fa)=>{e[S]=ia;e[S+1]=fa},Ma=(e,A,S,U,ia,fa)=>{e[S]=ia;e[S+1]=fa;e[S+2]=A[U+2]},wa=(e,A,S,U,ia,fa)=>{e[S]=ia;e[S+1]=fa;e[S+2]=A[U+3]},a=(e,A,S,U,ia,fa)=>{e[S]=ia;e[S+1]=fa;e[S+2]=A[U+2];e[S+3]=A[U+3]},g=[],aa=[];k.convertFromFeature=function(e,
A,S,U,ia){g[0]=e;[e]=P(aa,g,A,S,U,ia);g.length=aa.length=0;return e};k.convertFromFeatureSet=function(e,A){const S=new z,{hasM:U,hasZ:ia,features:fa,objectIdFieldName:F,spatialReference:O,geometryType:ea,exceededTransferLimit:ra,transform:sa,fields:ya}=e;ya&&(S.fields=ya);S.geometryType=ea;S.objectIdFieldName=F||A;S.spatialReference=O;if(!S.objectIdFieldName)return xa.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;fa&&P(S.features,fa,ea,ia,U,S.objectIdFieldName);
ra&&(S.exceededTransferLimit=ra);U&&(S.hasM=U);ia&&(S.hasZ=ia);sa&&(S.transform=sa);return S};k.convertFromFeatures=P;k.convertFromGeometry=function(e,A,S){if(Q.isNone(e))return null;const U=new v;"hasZ"in e&&null==A&&(A=e.hasZ);"hasM"in e&&null==S&&(S=e.hasM);if(p.isPoint(e))return N(null!=A?A:null!=e.z,null!=S?S:null!=e.m)(U,e);if(p.isPolygon(e))return L(U,e,A,S);if(p.isPolyline(e))return K(U,e,r(A,S));if(p.isMultipoint(e))return H(U,e,r(A,S));xa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${e}'`))};
k.convertFromGraphics=function(e,A,S,U,ia,fa){const F=e.length;switch(S){case "esriGeometryPoint":ba(e,A,U,ia,fa);break;case "esriGeometryMultipoint":M(e,A,U,ia,fa);break;case "esriGeometryPolyline":V(e,A,U,ia,fa);break;case "esriGeometryPolygon":l(e,A,U,ia,fa);break;default:xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`))}for(U=0;U<A.length;U++)e[U+F].geometryType=S,e[U+F].insertAfter=A[U].insertAfter,e[U+F].groupId=A[U].groupId;return e};k.convertFromMultipoint=
H;k.convertFromMultipointFeatures=M;k.convertFromNestedArray=X;k.convertFromPoint=function(e,A,S=N(null!=A.z,null!=A.m)){return S(e,A)};k.convertFromPointFeatures=ba;k.convertFromPolygon=L;k.convertFromPolyline=K;k.convertFromPolylineFeatures=V;k.convertToFeature=function(e,A,S,U){aa[0]=e;ma(g,aa,A,S,U);e=g[0];g.length=aa.length=0;return e};k.convertToFeatureSet=function(e){const {objectIdFieldName:A,spatialReference:S,transform:U,fields:ia,hasM:fa,hasZ:F,features:O,geometryType:ea,exceededTransferLimit:ra,
uniqueIdField:sa,queryGeometry:ya,queryGeometryType:Ba}=e;e=ma([],O,ea,F,fa);const Ca=ja(ya,Ba,!1,!1);e={features:e,fields:ia,geometryType:ea,objectIdFieldName:A,spatialReference:S,uniqueIdField:sa,queryGeometry:Ca};U&&(e.transform=U);ra&&(e.exceededTransferLimit=ra);fa&&(e.hasM=fa);F&&(e.hasZ=F);return e};k.convertToFeatures=ma;k.convertToGeometry=ja;k.convertToMultipoint=ka;k.convertToMultipointFeatures=T;k.convertToPoint=function(e,A,S){return e?A?S?q(e):h(e):S?B(e):J(e):null};k.convertToPolygon=
E;k.convertToPolyline=W;k.deltaDecodeGeometry=function(e,A){if(Q.isNone(e))return null;const S=e.clone(),U=e.coords;e=e.lengths;let ia=0;for(let O=0;O<e.length;O++){const ea=e[O];var fa=U[A*ia],F=U[A*ia+1];for(let ra=1;ra<ea;ra++)fa+=U[A*(ia+ra)],F+=U[A*(ia+ra)+1],S.coords[A*(ia+ra)]=fa,S.coords[A*(ia+ra)+1]=F;ia+=ea}return S};k.deltaEncodeGeometry=function(e,A){const S=e.clone(),U=e.coords;e=e.lengths;let ia=0;for(let F=0;F<e.length;F++){const O=e[F];let ea=U[A*ia];var fa=U[A*ia+1];for(let ra=1;ra<
O;ra++){const sa=U[A*(ia+ra)],ya=U[A*(ia+ra)+1];fa=ya-fa;S.coords[A*(ia+ra)]=sa-ea;S.coords[A*(ia+ra)+1]=fa;ea=sa;fa=ya}ia+=O}return S};k.generalizeOptimizedGeometry=function(e,A,S,U,ia,fa,F=S,O=U){e.lengths.length&&(e.lengths.length=0);e.coords.length&&(e.coords.length=0);if(!A||!A.coords.length)return null;ia=Na[ia];const {coords:ea,lengths:ra}=A;A=r(S,U);const sa=r(S&&F,U&&O);S=t(S,U,F,O);if(!ra.length)return S(e.coords,ea,0,0,ea[0],ea[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=
A,e;U=0;fa*=fa;for(const ya of ra){if(ya<ia){U+=ya*A;continue}F=e.coords.length/sa;O=U;const Ba=U+(ya-1)*A;S(e.coords,ea,e.coords.length,O,ea[O],ea[O+1]);na(e.coords,ea,A,fa,S,O,Ba);S(e.coords,ea,e.coords.length,Ba,ea[Ba],ea[Ba+1]);O=e.coords.length/sa-F;O>=ia?e.lengths.push(O):e.coords.length=F*sa;U+=ya*A}return e.coords.length?e:null};k.getBoundsOptimizedGeometry=function(e,A,S,U){if(Q.isNone(A)||!A.coords||!A.coords.length)return null;S=r(S,U);let ia=U=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY,
F=Number.NEGATIVE_INFINITY;if(A&&A.coords){A=A.coords;for(let O=0;O<A.length;O+=S){const ea=A[O],ra=A[O+1];U=Math.min(U,ea);fa=Math.max(fa,ea);ia=Math.min(ia,ra);F=Math.max(F,ra)}}e[0]=U;e[1]=ia;e[2]=fa;e[3]=F;return e};k.getQuantizedArea=function(e,A){const {coords:S,lengths:U}=e;let ia=e=0;for(let fa=0;fa<U.length;fa++)ia+=qa(S,e,U[fa],A),e+=fa;return Math.abs(ia)};k.getQuantizedBoundsOptimizedGeometry=function(e,A,S,U){S=r(S,U);const {lengths:ia,coords:fa}=A;U=A=Number.POSITIVE_INFINITY;let F=
Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,ea=0;for(const ra of ia){let sa=fa[ea],ya=fa[ea+1];A=Math.min(sa,A);U=Math.min(ya,U);F=Math.max(sa,F);O=Math.max(ya,O);ea+=S;for(let Ba=1;Ba<ra;Ba++,ea+=S){const Ca=fa[ea],Ka=fa[ea+1];sa+=Ca;ya+=Ka;0>Ca&&(A=Math.min(A,sa));0<Ca&&(F=Math.max(F,sa));0>Ka?U=Math.min(U,ya):0<Ka&&(O=Math.max(O,ya))}}e[0]=A;e[1]=U;e[2]=F;e[3]=O;return e};k.getSignedQuantizedRingArea=qa;k.quantizeOptimizedFeatureSet=function(e,A){const {geometryType:S,features:U,hasM:ia,
hasZ:fa}=A;if(!e)return A;for(let F=0;F<U.length;F++){const O=U[F],ea=O.weakClone();ea.geometry=new v;R(ea.geometry,O.geometry,ia,fa,S,e);O.centroid&&(ea.centroid=new v,R(ea.centroid,O.centroid,ia,fa,"esriGeometryPoint",e));U[F]=ea}A.transform=e;return A};k.quantizeOptimizedGeometry=R;k.quantizeX=y;k.quantizeY=G;k.removeCollinearVectices=function(e,A,S,U,ia){if(!A||!A.coords||!A.coords.length)return null;S=Na[S];const {coords:fa,lengths:F}=A;A=t(U,ia,U,ia);U=r(U,ia);let O=ia=0,ea=0,ra=0;for(const Ba of F){O=
ra;A(e.coords,fa,O,ia,fa[ia],fa[ia+1]);ia+=U;var sa=fa[ia];let Ca=fa[ia+1],Ka=sa,Ia=Ca;var ya=Ca/sa;O+=U;A(e.coords,fa,O,ia,Ka,Ia);ia+=U;for(let Fa=2;Fa<Ba;Fa++){sa=fa[ia];Ca=fa[ia+1];const Ga=Ca/sa,Ha=ya===Ga||!isFinite(ya)&&!isFinite(Ga);ya=Ha&&isFinite(Ga)?0<=ya&&0<=Ga||0>=ya&&0>=Ga:0<=Ia&&0<=Ca||0>=Ia&&0>=Ca;Ha&&ya?(Ka+=sa,Ia+=Ca):(Ka=sa,Ia=Ca,O+=U);A(e.coords,fa,O,ia,Ka,Ia);ia+=U;ya=Ga}O+=U;sa=(O-ra)/U;sa>=S&&(e.lengths[ea]=sa,ra=O,ea++)}e.coords.length>ra&&(e.coords.length=ra);e.lengths.length>
ea&&(e.lengths.length=ea);return e.coords.length&&e.lengths.length?e:null};k.removeZMValues=function(e,A,S,U,ia,fa){const F=r(S,U);S=t(S,U,ia,fa);U=A.coords;e.coords.length=0;e.lengths.length=0;e.lengths.push(...A.lengths);for(A=0;A<U.length;A+=F)S(e.coords,U,e.coords.length,A,U[A],U[A+1]);return e};k.unquantizeOptimizedFeatureSet=function(e){const {transform:A,features:S,hasM:U,hasZ:ia}=e;if(!A)return e;for(const fa of S)Q.isSome(fa.geometry)&&oa(fa.geometry,fa.geometry,U,ia,A),Q.isSome(fa.centroid)&&
oa(fa.centroid,fa.centroid,U,ia,A);e.transform=null;return e};k.unquantizeOptimizedGeometry=oa;k.unquantizeX=I;k.unquantizeY=m;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,d,Z){let Q=function(){function x(z=null,v={},r,t){this.geometry=z;this.attributes=v;this.centroid=r;this.objectId=t;this.geohashY=this.geohashX=
this.displayId=0}x.prototype.weakClone=function(){const z=new x(this.geometry,this.attributes,this.centroid,this.objectId);z.displayId=this.displayId;z.geohashX=this.geohashX;z.geohashY=this.geohashY;return z};return x}(),p=function(x){function z(){return x.apply(this,arguments)||this}d._inheritsLoose(z,x);return z}(Q);k.OptimizedFeature=Q;k.OptimizedFeatureWithGeometry=p;k.hasGeometry=function(x){return!(Z.isNone(x.geometry)||!x.geometry.coords||!x.geometry.coords.length)};Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const d=
new k;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;
return d};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function d(Q=[],p=[],x=!1){this.lengths=null!=Q?Q:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=x}d.fromRect=function(Q){const [p,x,z,v]=Q;Q=z-p;const r=v-x;return new d([5],[p,x,Q,0,0,r,-Q,0,0,-r])};var Z=d.prototype;Z.forEachVertex=function(Q){let p=0;this.lengths.length||Q(this.coords[0],this.coords[1]);for(let x=0;x<this.lengths.length;x++){const z=
this.lengths[x];for(let v=0;v<z;v++)Q(this.coords[2*(v+p)],this.coords[2*(v+p)+1]);p+=z}};Z.clone=function(Q){return Q?(Q.set(this.coords),new d(this.lengths.slice(),Q,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Q,p)=>Q+p)}}]);return d}()})},
"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(k,d,Z,Q,p,x,z,v,r,t){return function(){function y(I){this.geometryInfo=I;this._boundsStore=new r.BoundsStore;this._featuresById=new Map;this._markedIds=
new Set;this.events=new Z;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}var G=y.prototype;G.add=function(I){this._add(I);this._emitChanged()};G.addMany=function(I){for(const m of I)this._add(m);this._emitChanged()};G.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};G.removeById=function(I){I=this._featuresById.get(I);if(!I)return null;this._remove(I);this._emitChanged();return I};G.removeManyById=function(I){this._boundsStore.invalidateIndex();
for(const m of I)(I=this._featuresById.get(m))&&this._remove(I);this._emitChanged()};G.forEachBounds=function(I,m,J){for(const c of I)(I=this._boundsStore.get(c.objectId))&&m(x.fromRect(J,I))};G.getFeature=function(I){return this._featuresById.get(I)};G.has=function(I){return this._featuresById.has(I)};G.toArray=function(){return Array.from(this._featuresById.values())};G.forEach=function(I){this._featuresById.forEach(m=>I(m))};G.forEachInBounds=function(I,m){this._boundsStore.forEachInBounds(I,J=>
{m(this._featuresById.get(J))})};G.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};G.sweep=function(){let I=!1;this._featuresById.forEach((m,J)=>{this._markedIds.has(J)||(I=!0,this._remove(m))});this._markedIds.clear();I&&this._emitChanged()};G._emitChanged=function(){this.events.emit("changed",void 0)};G._add=function(I){if(I){var m=I.objectId;if(null==m)Q.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:I}));else{var J=this._featuresById.get(m);this._markedIds.add(m);if(J){I.displayId=J.displayId;var c=this._boundsStore.get(m);this._boundsStore.delete(m)}else if(p.isSome(this.onFeatureAdd))this.onFeatureAdd(I);!p.isNone(I.geometry)&&I.geometry.coords&&I.geometry.coords.length?(c=v.getBoundsOptimizedGeometry(p.isSome(c)?c:z.create(),I.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),p.isSome(c)&&this._boundsStore.set(m,c)):this._boundsStore.set(m,null);this._featuresById.set(m,
I)}}};G._remove=function(I){if(p.isSome(this.onFeatureRemove))this.onFeatureRemove(I);this._markedIds.delete(I.objectId);this._boundsStore.delete(I.objectId);this._featuresById.delete(I.objectId);return I};k._createClass(y,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let I=0;this._featuresById.forEach(m=>{p.isSome(m.geometry)&&m.geometry.coords&&(I+=m.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:I/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return y}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,
d,Z,Q,p){let x=function(){function z(){this._emitter=new z.EventEmitter(this)}var v=z.prototype;v.emit=function(r,t){return this._emitter.emit(r,t)};v.on=function(r,t){return this._emitter.on(r,t)};v.once=function(r,t){return this._emitter.once(r,t)};v.hasEventListener=function(r){return this._emitter.hasEventListener(r)};return z}();(function(z){let v=function(){function t(G=null){this.target=G;this._listenersMap=null}var y=t.prototype;y.clear=function(){this._listenersMap&&this._listenersMap.clear();
this._listenersMap=null};y.emit=function(G,I){G=this._listenersMap&&this._listenersMap.get(G);if(!G)return!1;const m=this.target||this;[...G].forEach(J=>{J.call(m,I)});return 0<G.length};y.on=function(G,I){if(Array.isArray(G)){var m=G.map(J=>this.on(J,I));return Q.handlesGroup(m)}if(G.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);m=this._listenersMap.get(G)||[];m.push(I);this._listenersMap.set(G,
m);return{remove:()=>{const J=this._listenersMap&&this._listenersMap.get(G)||[],c=J.indexOf(I);0<=c&&J.splice(c,1)}}};y.once=function(G,I){const m=this.on(G,J=>{m.remove();I.call(null,J)});return m};y.hasEventListener=function(G){G=this._listenersMap&&this._listenersMap.get(G);return null!=G&&0<G.length};return t}();z.EventEmitter=v;z.EventedMixin=t=>{t=function(y){function G(){var m=y.apply(this,arguments)||this;m._emitter=new v;return m}k._inheritsLoose(G,y);var I=G.prototype;I.destroy=function(){this._emitter.clear()};
I.emit=function(m,J){return this._emitter.emit(m,J)};I.on=function(m,J){return this._emitter.on(m,J)};I.once=function(m,J){return this._emitter.once(m,J)};I.hasEventListener=function(m){return this._emitter.hasEventListener(m)};return G}(t);return t=d.__decorate([p.subclass("esri.core.Evented")],t)};let r=function(t){function y(){var I=t.apply(this,arguments)||this;I._emitter=new x.EventEmitter(k._assertThisInitialized(I));return I}k._inheritsLoose(y,t);var G=y.prototype;G.destroy=function(){this._emitter.clear()};
G.emit=function(I,m){return this._emitter.emit(I,m)};G.on=function(I,m){return this._emitter.on(I,m)};G.once=function(I,m){return this._emitter.once(I,m)};G.hasEventListener=function(I){return this._emitter.hasEventListener(I)};return y}(Z);r=d.__decorate([p.subclass("esri.core.Evented")],r);z.EventedAccessor=r})(x||(x={}));return x})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(k,d,Z,Q){function p(c=m){return[c[0],
c[1],c[2],c[3],c[4],c[5]]}function x(c,h,D,B,n,q,u=p()){u[0]=c;u[1]=h;u[2]=D;u[3]=B;u[4]=n;u[5]=q;return u}function z(c){return c[0]>=c[3]?0:c[3]-c[0]}function v(c){return c[1]>=c[4]?0:c[4]-c[1]}function r(c){return c[2]>=c[5]?0:c[5]-c[2]}function t(c,h){return Math.max(h[0],c[0])<=Math.min(h[3],c[3])&&Math.max(h[1],c[1])<=Math.min(h[4],c[4])&&Math.max(h[2],c[2])<=Math.min(h[5],c[5])}function y(c,h){c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=h[5];return c}function G(c){return 6===c.length}
const I=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],m=[0,0,0,0,0,0],J=p();k.NEGATIVE_INFINITY=I;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=m;k.allFinite=function(c){for(let h=0;6>h;h++)if(!isFinite(c[h]))return!1;return!0};k.center=function(c,h=[0,0,0]){h[0]=c[0]+z(c)/2;h[1]=c[1]+v(c)/2;h[2]=c[2]+r(c)/2;return h};k.contains=function(c,h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[3]<=c[3]&&h[4]<=c[4]&&h[5]<=c[5]};k.containsPoint=function(c,
h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[0]<=c[3]&&h[1]<=c[4]&&h[2]<=c[5]};k.containsPointWithMargin=function(c,h,D){return h[0]>=c[0]-D&&h[1]>=c[1]-D&&h[2]>=c[2]-D&&h[0]<=c[3]+D&&h[1]<=c[4]+D&&h[2]<=c[5]+D};k.create=p;k.depth=v;k.diameter=function(c){const h=z(c),D=r(c);c=v(c);return Math.sqrt(h*h+D*D+c*c)};k.empty=function(c){return c?y(c,I):p(I)};k.equals=function(c,h,D){if(d.isNone(c)||d.isNone(h))return c===h;if(!G(c)||!G(h))return!1;if(D)for(let B=0;B<c.length;B++){if(!D(c[B],h[B]))return!1}else for(D=
0;D<c.length;D++)if(c[D]!==h[D])return!1;return!0};k.expandWithAABB=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[3]);c[4]=Math.max(c[4],h[4]);c[5]=Math.max(c[5],h[5])};k.expandWithBuffer=function(c,h,D=0,B=h.length/3){let n=c[0],q=c[1],u=c[2],N=c[3],ba=c[4],T=c[5];for(let ka=0;ka<B;ka++)n=Math.min(n,h[D+3*ka]),q=Math.min(q,h[D+3*ka+1]),u=Math.min(u,h[D+3*ka+2]),N=Math.max(N,h[D+3*ka]),ba=Math.max(ba,h[D+3*ka+1]),T=Math.max(T,h[D+3*ka+
2]);c[0]=n;c[1]=q;c[2]=u;c[3]=N;c[4]=ba;c[5]=T};k.expandWithNestedArray=function(c,h,D){const B=h.length;let n=c[0],q=c[1],u=c[2],N=c[3],ba=c[4],T=c[5];if(D)for(D=0;D<B;D++){var ka=h[D];n=Math.min(n,ka[0]);q=Math.min(q,ka[1]);u=Math.min(u,ka[2]);N=Math.max(N,ka[0]);ba=Math.max(ba,ka[1]);T=Math.max(T,ka[2])}else for(D=0;D<B;D++)ka=h[D],n=Math.min(n,ka[0]),q=Math.min(q,ka[1]),N=Math.max(N,ka[0]),ba=Math.max(ba,ka[1]);c[0]=n;c[1]=q;c[2]=u;c[3]=N;c[4]=ba;c[5]=T};k.expandWithOffset=function(c,h,D,B){c[0]=
Math.min(c[0],c[0]+h);c[3]=Math.max(c[3],c[3]+h);c[1]=Math.min(c[1],c[1]+D);c[4]=Math.max(c[4],c[4]+D);c[2]=Math.min(c[2],c[2]+B);c[5]=Math.max(c[5],c[5]+B)};k.expandWithRect=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[3]=Math.max(c[3],h[2]);c[4]=Math.max(c[4],h[3])};k.expandWithVec3=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[0]);c[4]=Math.max(c[4],h[1]);c[5]=Math.max(c[5],h[2])};k.fromExtent=function(c,h=p()){h[0]=
c.xmin;h[1]=c.ymin;h[2]=c.zmin;h[3]=c.xmax;h[4]=c.ymax;h[5]=c.zmax;return h};k.fromMinMax=function(c,h,D=p()){D[0]=c[0];D[1]=c[1];D[2]=c[2];D[3]=h[0];D[4]=h[1];D[5]=h[2];return D};k.fromRect=function(c,h){c[0]=h[0];c[1]=h[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=h[2];c[4]=h[3];c[5]=Number.POSITIVE_INFINITY;return c};k.fromValues=x;k.getMax=function(c,h){h[0]=c[3];h[1]=c[4];h[2]=c[5];return h};k.getMin=function(c,h){h[0]=c[0];h[1]=c[1];h[2]=c[2];return h};k.height=r;k.intersects=t;k.intersectsClippingArea=
function(c,h){return d.isNone(h)?!0:t(c,h)};k.is=G;k.isPoint=function(c){return 0===z(c)&&0===v(c)&&0===r(c)};k.maximumDimension=function(c){return Math.max(z(c),r(c),v(c))};k.offset=function(c,h,D,B,n=c){n[0]=c[0]+h;n[1]=c[1]+D;n[2]=c[2]+B;n[3]=c[3]+h;n[4]=c[4]+D;n[5]=c[5]+B;return n};k.scale=function(c,h,D=c){const B=c[0]+z(c)/2,n=c[1]+v(c)/2,q=c[2]+r(c)/2;D[0]=B+(c[0]-B)*h;D[1]=n+(c[1]-n)*h;D[2]=q+(c[2]-q)*h;D[3]=B+(c[3]-B)*h;D[4]=n+(c[4]-n)*h;D[5]=q+(c[5]-q)*h;return D};k.set=y;k.setMax=function(c,
h,D=c){D[3]=h[0];D[4]=h[1];D[5]=h[2];D!==c&&(D[0]=c[0],D[1]=c[1],D[2]=c[2]);return c};k.setMin=function(c,h,D=c){D[0]=h[0];D[1]=h[1];D[2]=h[2];D!==c&&(D[3]=c[3],D[4]=c[4],D[5]=c[5]);return D};k.size=function(c,h=[0,0,0]){h[0]=z(c);h[1]=v(c);h[2]=r(c);return h};k.toExtent=function(c,h){return isFinite(c[2])||isFinite(c[5])?new Z({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:h}):new Z({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:h})};k.toRect=function(c,
h){h||(h=Q.create());h[0]=c[0];h[1]=c[1];h[2]=c[3];h[3]=c[4];return h};k.width=z;k.wrap=function(c,h,D,B,n,q){return x(c,h,D,B,n,q,J)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,d,Z,Q,p){function x(m=I){return[m[0],m[1],m[2],m[3]]}function z(m,J){m!==J&&(m[0]=J[0],m[1]=J[1],m[2]=J[2],m[3]=J[3]);return m}
function v(m){return Q.isNone(m)||m[0]>=m[2]?0:m[2]-m[0]}function r(m){return m[1]>=m[3]?0:m[3]-m[1]}function t(m,J,c){return J>=m[0]&&c>=m[1]&&J<=m[2]&&c<=m[3]}function y(m){return null!=m&&4===m.length}const G=[Infinity,Infinity,-Infinity,-Infinity],I=[0,0,0,0];k.NEGATIVE_INFINITY=G;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=I;k.allFinite=function(m){for(let J=0;4>J;J++)if(!isFinite(m[J]))return!1;return!0};k.area=function(m){return v(m)*r(m)};k.center=function(m,
J=[0,0]){J[0]=(m[0]+m[2])/2;J[1]=(m[1]+m[3])/2;return J};k.clone=function(m){return[m[0],m[1],m[2],m[3]]};k.contains=function(m,J){return J[0]>=m[0]&&J[2]<=m[2]&&J[1]>=m[1]&&J[3]<=m[3]};k.containsPoint=function(m,J){return t(m,J[0],J[1])};k.containsPointObject=function(m,J){return t(m,J.x,J.y)};k.containsPointWithMargin=function(m,J,c){return J[0]>=m[0]-c&&J[1]>=m[1]-c&&J[0]<=m[2]+c&&J[1]<=m[3]+c};k.containsXY=t;k.containsXYWithMargin=function(m,J,c,h){return J>=m[0]-h&&c>=m[1]-h&&J<=m[2]+h&&c<=m[3]+
h};k.copy=z;k.create=x;k.distance=function(m,J){const c=(m[1]+m[3])/2,h=Math.max(Math.abs(J[0]-(m[0]+m[2])/2)-v(m)/2,0);m=Math.max(Math.abs(J[1]-c)-r(m)/2,0);return Math.sqrt(h*h+m*m)};k.empty=function(m){return m?z(m,G):x(G)};k.equals=function(m,J){return y(m)&&y(J)?m[0]===J[0]&&m[1]===J[1]&&m[2]===J[2]&&m[3]===J[3]:m===J};k.expand=function(m,J,c){if(Q.isNone(J))z(c,m);else if("length"in J)if(y(J))c[0]=Math.min(m[0],J[0]),c[1]=Math.min(m[1],J[1]),c[2]=Math.max(m[2],J[2]),c[3]=Math.max(m[3],J[3]);
else{if(2===J.length||3===J.length)c[0]=Math.min(m[0],J[0]),c[1]=Math.min(m[1],J[1]),c[2]=Math.max(m[2],J[0]),c[3]=Math.max(m[3],J[1])}else switch(J.type){case "extent":c[0]=Math.min(m[0],J.xmin);c[1]=Math.min(m[1],J.ymin);c[2]=Math.max(m[2],J.xmax);c[3]=Math.max(m[3],J.ymax);break;case "point":c[0]=Math.min(m[0],J.x),c[1]=Math.min(m[1],J.y),c[2]=Math.max(m[2],J.x),c[3]=Math.max(m[3],J.y)}};k.expandPointInPlace=function(m,J){J[0]<m[0]&&(m[0]=J[0]);J[0]>m[2]&&(m[2]=J[0]);J[1]<m[1]&&(m[1]=J[1]);J[1]>
m[3]&&(m[3]=J[1])};k.expandWithNestedArray=function(m,J,c=m){const h=J.length;let D=m[0],B=m[1],n=m[2];m=m[3];for(let q=0;q<h;q++){const u=J[q];D=Math.min(D,u[0]);B=Math.min(B,u[1]);n=Math.max(n,u[0]);m=Math.max(m,u[1])}c[0]=D;c[1]=B;c[2]=n;c[3]=m;return c};k.fromExtent=function(m,J=x()){J[0]=m.xmin;J[1]=m.ymin;J[2]=m.xmax;J[3]=m.ymax;return J};k.fromValues=function(m,J,c,h,D=x()){D[0]=m;D[1]=J;D[2]=c;D[3]=h;return D};k.height=r;k.intersection=function(m,J,c){if(Q.isNone(J))return z(c,m);const h=
J[0],D=J[1],B=J[2];J=J[3];c[0]=Z.clamp(m[0],h,B);c[1]=Z.clamp(m[1],D,J);c[2]=Z.clamp(m[2],h,B);c[3]=Z.clamp(m[3],D,J);return c};k.intersects=function(m,J){return Math.max(J[0],m[0])<=Math.min(J[2],m[2])&&Math.max(J[1],m[1])<=Math.min(J[3],m[3])};k.intersectsSegment=function(m,J,c){const h=m[0],D=m[1],B=m[2];m=m[3];const {x:n,y:q}=J,{x:u,y:N}=c;var ba=(ka,M)=>0>(N-q)*ka+(n-u)*M+(u*q-n*N);J=ba(h,m);c=ba(B,m);const T=ba(B,D);ba=ba(h,D);return J===c&&c===T&&T===ba&&ba===J||n<h&&u<h||n>B&&u>B||q>m&&N>
m||q<D&&N<D?!1:!0};k.intersectsSphere=function(m,J){const c=J[3];var h=Math.abs(J[0]-.5*(m[0]+m[2]));const D=.5*(m[2]-m[0]);if(h>c+D)return!1;var B=.5*(m[3]-m[1]);m=Math.abs(J[1]-.5*(m[1]+m[3]));if(m>c+B)return!1;if(h<D||m<B)return!0;h-=D;B=m-B;return h*h+B*B<=c*c};k.is=y;k.isPoint=function(m){return(0===v(m)||!isFinite(m[0]))&&(0===r(m)||!isFinite(m[1]))};k.offset=function(m,J,c,h=m){h[0]=m[0]+J;h[1]=m[1]+c;h[2]=m[2]+J;h[3]=m[3]+c;return h};k.pad=function(m,J,c=m){c[0]=m[0]-J;c[1]=m[1]-J;c[2]=m[2]+
J;c[3]=m[3]+J;return c};k.setMax=function(m,J,c=m){c[2]=J[0];c[3]=J[1];c!==m&&(c[0]=m[0],c[1]=m[1]);return m};k.setMin=function(m,J,c=m){c[0]=J[0];c[1]=J[1];c!==m&&(c[2]=m[2],c[3]=m[3]);return c};k.size=function(m,J){J[0]=m[2]-m[0];J[1]=m[3]-m[1]};k.toExtent=function(m,J){return new p({xmin:m[0],ymin:m[1],xmax:m[2],ymax:m[3],spatialReference:J})};k.width=v;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(k,d,Z,Q,p){function x(r,t,y){z.minX=t[0];z.minY=t[1];z.maxX=t[2];z.maxY=t[3];r.search(z,y)}const z={minX:0,minY:0,maxX:0,maxY:0};let v=function(){function r(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Q.PooledRBush(9,Z("esri-csp-restrictions")?y=>({minX:y[0],minY:y[1],maxX:y[2],
maxY:y[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const y=Array(this._idByBounds.size);let G=0;this._idByBounds.forEach((I,m)=>{y[G++]=m});this._indexInvalid=!1;this._index.clear();this._index.load(y)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(y=>this._idByBounds.has(y))),this._boundsToLoad.length=0)}}var t=r.prototype;t.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();
this._index.clear()};t.delete=function(y){const G=this._boundsById.get(y);this._boundsById.delete(y);G&&(this._idByBounds.delete(G),this._indexInvalid||this._index.remove(G))};t.forEachInBounds=function(y,G){this._loadIndex();x(this._index,y,I=>G(this._idByBounds.get(I)))};t.get=function(y){return this._boundsById.get(y)};t.has=function(y){return this._boundsById.has(y)};t.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};t.set=function(y,G){if(!this._indexInvalid){const I=
this._boundsById.get(y);I&&(this._index.remove(I),this._idByBounds.delete(I))}this._boundsById.set(y,G);G&&(this._idByBounds.set(G,y),this._indexInvalid||(this._boundsToLoad.push(G),5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(r,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const y=p.empty();for(const G of this._boundsById.values())G&&(y[0]=Math.min(G[0],y[0]),y[1]=Math.min(G[1],y[1]),y[2]=Math.max(G[2],y[2]),y[3]=Math.max(G[3],y[3]));return y}},{key:"valid",
get:function(){return!this._indexInvalid}}]);return r}();k.BoundsStore=v;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,d,Z,Q,p,x){function z(T,ka){v(T,0,T.children.length,ka,T)}function v(T,ka,M,H,W){W||(W=new N([]));W.minX=Infinity;W.minY=Infinity;W.maxX=
-Infinity;W.maxY=-Infinity;for(let V=ka,K;V<M;V++)K=T.children[V],r(W,T.leaf?H(K):K);return W}function r(T,ka){T.minX=Math.min(T.minX,ka.minX);T.minY=Math.min(T.minY,ka.minY);T.maxX=Math.max(T.maxX,ka.maxX);T.maxY=Math.max(T.maxY,ka.maxY)}function t(T,ka){return T.minX-ka.minX}function y(T,ka){return T.minY-ka.minY}function G(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function I(T){return T.maxX-T.minX+(T.maxY-T.minY)}function m(T,ka){return T.minX<=ka.minX&&T.minY<=ka.minY&&ka.maxX<=T.maxX&&ka.maxY<=
T.maxY}function J(T,ka){return ka.minX<=T.maxX&&ka.minY<=T.maxY&&ka.maxX>=T.minX&&ka.maxY>=T.minY}function c(T,ka,M,H,W){for(ka=[ka,M];ka.length;){M=Q.assumeNonNull(ka.pop());const V=Q.assumeNonNull(ka.pop());if(M-V<=H)continue;const K=V+Math.ceil((M-V)/H/2)*H;x.quickselect(T,K,V,M,W);ka.push(V,K,K,M)}}let h=function(){function T(M=9,H){this.compareMinX=t;this.compareMinY=y;this._toBBox=W=>W;this._maxEntries=Math.max(4,M||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));H&&("function"===
typeof H?this._toBBox=H:this._initFormat(H));this.clear()}var ka=T.prototype;ka.destroy=function(){this.clear();D.prune();B.prune();n.prune();q.prune()};ka.all=function(M){this._all(this.data,M)};ka.search=function(M,H){let W=this.data;const V=this._toBBox;if(J(M,W))for(D.clear();W;){for(let K=0,E=W.children.length;K<E;K++){const l=W.children[K],L=W.leaf?V(l):l;J(M,L)&&(W.leaf?H(l):m(M,L)?this._all(l,H):D.push(l))}W=D.pop()}};ka.collides=function(M){let H=this.data;const W=this._toBBox;if(!J(M,H))return!1;
for(D.clear();H;){for(let V=0,K=H.children.length;V<K;V++){const E=H.children[V],l=H.leaf?W(E):E;if(J(M,l)){if(H.leaf||m(M,l))return!0;D.push(E)}}H=D.pop()}return!1};ka.load=function(M){if(!M.length)return this;if(M.length<this._minEntries){for(let H=0,W=M.length;H<W;H++)this.insert(M[H]);return this}M=this._build(M.slice(0,M.length),0,M.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){const H=this.data;this.data=
M;M=H}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this};ka.insert=function(M){M&&this._insert(M,this.data.height-1);return this};ka.clear=function(){this.data=new N([]);return this};ka.remove=function(M){if(!M)return this;let H=this.data,W=null,V=0,K=!1,E;const l=this._toBBox(M);n.clear();for(q.clear();H||0<n.length;){if(!H){var L;H=Q.assumeNonNull(n.pop());W=n.data[n.length-1];V=null!=(L=q.pop())?L:0;K=!0}if(H.leaf&&(E=Z.indexOf(H.children,M,H.children.length,H.indexHint),
-1!==E)){H.children.splice(E,1);n.push(H);this._condense(n);break}K||H.leaf||!m(H,l)?W?(V++,H=W.children[V],K=!1):H=null:(n.push(H),q.push(V),V=0,W=H,H=H.children[0])}return this};ka.toJSON=function(){return this.data};ka.fromJSON=function(M){this.data=M;return this};ka._all=function(M,H){for(B.clear();M;){var W;if(!0===M.leaf)for(const V of M.children)H(V);else B.pushArray(M.children);M=null!=(W=B.pop())?W:null}};ka._build=function(M,H,W,V){var K=W-H+1,E=this._maxEntries;if(K<=E)return M=new N(M.slice(H,
W+1)),z(M,this._toBBox),M;V||(V=Math.ceil(Math.log(K)/Math.log(E)),E=Math.ceil(K/E**(V-1)));const l=new ba([]);l.height=V;K=Math.ceil(K/E);E=K*Math.ceil(Math.sqrt(E));for(c(M,H,W,E,this.compareMinX);H<=W;H+=E){const L=Math.min(H+E-1,W);c(M,H,L,K,this.compareMinY);for(let X=H;X<=L;X+=K)l.children.push(this._build(M,X,Math.min(X+K-1,L),V-1))}z(l,this._toBBox);return l};ka._chooseSubtree=function(M,H,W,V){for(;;){V.push(H);if(!0===H.leaf||V.length-1===W)break;let K=Infinity,E=Infinity,l=void 0;for(let L=
0,X=H.children.length;L<X;L++){const P=H.children[L],ja=G(P),ma=(Math.max(P.maxX,M.maxX)-Math.min(P.minX,M.minX))*(Math.max(P.maxY,M.maxY)-Math.min(P.minY,M.minY))-ja;ma<E?(E=ma,K=ja<K?ja:K,l=P):ma===E&&ja<K&&(K=ja,l=P)}H=l||H.children[0]}return H};ka._insert=function(M,H,W){var V=this._toBBox;W=W?M:V(M);n.clear();V=this._chooseSubtree(W,this.data,H,n);V.children.push(M);for(r(V,W);0<=H;)if(n.data[H].children.length>this._maxEntries)this._split(n,H),H--;else break;this._adjustParentBBoxes(W,n,H)};
ka._split=function(M,H){const W=M.data[H];var V=W.children.length;const K=this._minEntries;this._chooseSplitAxis(W,K,V);(V=this._chooseSplitIndex(W,K,V))?(V=W.children.splice(V,W.children.length-V),V=W.leaf?new N(V):new ba(V),V.height=W.height,z(W,this._toBBox),z(V,this._toBBox),H?M.data[H-1].children.push(V):this._splitRoot(W,V)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ka._splitRoot=function(M,H){this.data=new ba([M,H]);this.data.height=M.height+1;z(this.data,
this._toBBox)};ka._chooseSplitIndex=function(M,H,W){let V,K,E=void 0;V=K=Infinity;for(let L=H;L<=W-H;L++){var l=v(M,0,L,this._toBBox);const X=v(M,L,W,this._toBBox),P=Math.max(0,Math.min(l.maxX,X.maxX)-Math.max(l.minX,X.minX))*Math.max(0,Math.min(l.maxY,X.maxY)-Math.max(l.minY,X.minY));l=G(l)+G(X);P<V?(V=P,E=L,K=l<K?l:K):P===V&&l<K&&(K=l,E=L)}return E};ka._chooseSplitAxis=function(M,H,W){const V=M.leaf?this.compareMinX:t,K=M.leaf?this.compareMinY:y,E=this._allDistMargin(M,H,W,V);H=this._allDistMargin(M,
H,W,K);E<H&&M.children.sort(V)};ka._allDistMargin=function(M,H,W,V){M.children.sort(V);V=this._toBBox;var K=v(M,0,H,V);const E=v(M,W-H,W,V);let l=I(K)+I(E);for(let L=H;L<W-H;L++){const X=M.children[L];r(K,M.leaf?V(X):X);l+=I(K)}for(W=W-H-1;W>=H;W--)K=M.children[W],r(E,M.leaf?V(K):K),l+=I(E);return l};ka._adjustParentBBoxes=function(M,H,W){for(;0<=W;W--)r(H.data[W],M)};ka._condense=function(M){for(let H=M.length-1;0<=H;H--){const W=M.data[H];if(0===W.children.length)if(0<H){const V=M.data[H-1],K=V.children;
K.splice(Z.indexOf(K,W,K.length,V.indexHint),1)}else this.clear();else z(W,this._toBBox)}};ka._initFormat=function(M){const H=["return a"," - b",";"];this.compareMinX=new Function("a","b",H.join(M[0]));this.compareMinY=new Function("a","b",H.join(M[1]));this._toBBox=new Function("a","return {minX: a"+M[0]+", minY: a"+M[1]+", maxX: a"+M[2]+", maxY: a"+M[3]+"};")};return T}();const D=new p,B=new p,n=new p,q=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};
let u=function(T){function ka(){var M=T.apply(this,arguments)||this;M.height=1;M.indexHint=new Z.PositionHint;return M}d._inheritsLoose(ka,T);return ka}(p),N=function(T){function ka(M){var H=T.call(this)||this;H.children=M;H.leaf=!0;return H}d._inheritsLoose(ka,T);return ka}(u),ba=function(T){function ka(M){var H=T.call(this)||this;H.children=M;H.leaf=!1;return H}d._inheritsLoose(ka,T);return ka}(u);k.BBox=p;k.PooledRBush=h;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/quickselect":function(){define(["exports"],function(k){var d={exports:{}};(function(Z){(function(Q){Q=Q();void 0!==Q&&(Z.exports=Q)})(function(){function Q(z,v,r,t,y){for(;t>r;){if(600<t-r){var G=t-r+1,I=v-r+1,m=Math.log(G),J=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*J*(G-J)/G)*(0>I-G/2?-1:1);Q(z,v,Math.max(r,Math.floor(v-I*J/G+m)),Math.min(t,Math.floor(v+(G-I)*J/G+m)),y)}G=z[v];I=r;J=t;p(z,r,v);for(0<y(z[t],G)&&p(z,r,t);I<J;){p(z,I,J);I++;for(J--;0>y(z[I],G);)I++;for(;0<y(z[J],G);)J--}0===
y(z[r],G)?p(z,r,J):(J++,p(z,J,t));J<=v&&(r=J+1);v<=J&&(t=J-1)}}function p(z,v,r){var t=z[v];z[v]=z[r];z[r]=t}function x(z,v){return z<v?-1:z>v?1:0}return function(z,v,r,t,y){Q(z,v,r||0,t||z.length-1,y||x)}})})(d);k.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,d,Z,Q,p){k.optimizedFeatureQueryEngineAdapter={getObjectId(x){return x.objectId},
getAttributes(x){return x.attributes},getAttribute(x,z){return x.attributes[z]},cloneWithGeometry(x,z){return new Q.OptimizedFeature(z,x.attributes,null,x.objectId)},getGeometry(x){return x.geometry},getCentroid(x,z){d.isNone(x.centroid)&&(x.centroid=Z.getCentroidOptimizedGeometry(new p,x.geometry,z.hasZ,z.hasM));return x.centroid}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],
function(k,d){function Z(p,x,z,v,r,t,y=1){t=r?t?4:3:t?3:2;let G=z,I=z+t,m=0,J=0,c=z=0,h=0;for(let D=0,B=v-1;D<B;D++,G+=t,I+=t){v=x[G];const n=x[G+1],q=x[G+2],u=x[I],N=x[I+1],ba=x[I+2];let T=v*N-u*n;c+=T;m+=(v+u)*T;J+=(n+N)*T;r&&(T=v*ba-u*q,z+=(q+ba)*T,h+=T);v<p[0]&&(p[0]=v);v>p[1]&&(p[1]=v);n<p[2]&&(p[2]=n);n>p[3]&&(p[3]=n);r&&(q<p[4]&&(p[4]=q),q>p[5]&&(p[5]=q))}0<c*y&&(c*=-1);0<h*y&&(h*=-1);if(!c)return null;p=[m,J,.5*c];r&&(p[3]=z,p[4]=.5*h);return p}function Q(p,x,z,v,r){r=v?r?4:3:r?3:2;let t=
x,y=x+r,G=0,I=0,m=0,J=0;for(let B=0,n=z-1;B<n;B++,t+=r,y+=r){var c=p[t];const q=p[t+1],u=p[t+2],N=p[y],ba=p[y+1],T=p[y+2];if(v){{var h=N-c;var D=ba-q;const ka=T-u;h=Math.sqrt(h*h+D*D+ka*ka)}}else h=N-c,D=ba-q,h=Math.sqrt(h*h+D*D);h&&(G+=h,v?(c=[c+.5*(N-c),q+.5*(ba-q),u+.5*(T-u)],I+=h*c[0],m+=h*c[1],J+=h*c[2]):(c=[c+.5*(N-c),q+.5*(ba-q)],I+=h*c[0],m+=h*c[1]))}return 0<G?v?[I/G,m/G,J/G]:[I/G,m/G]:0<z?v?[p[x],p[x+1],p[x+2]]:[p[x],p[x+1]]:null}k.getCentroidOptimizedGeometry=function(p,x,z,v,r){if(d.isNone(x)||
!x.lengths.length)return null;const t="upperLeft"===(null==r?void 0:r.originPosition)?-1:1;p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);r=p.coords;const y=[],G=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:m}=x,J=z?v?4:3:v?3:2;let c=0;for(var h of I){const D=
Z(G,m,c,h,z,v,t);D&&y.push(D);c+=h*J}y.sort((D,B)=>{let n=t*D[2]-t*B[2];0===n&&z&&(n=D[4]-B[4]);return n});y.length&&(h=6*y[0][2],r[0]=y[0][0]/h,r[1]=y[0][1]/h,z&&(h=6*y[0][4],r[2]=0!==h?y[0][3]/h:0),r[0]<G[0]||r[0]>G[1]||r[1]<G[2]||r[1]>G[3]||z&&(r[2]<G[4]||r[2]>G[5]))&&(r.length=0);if(!r.length)if(x=x.lengths[0]?Q(m,0,I[0],z,v):null)r[0]=x[0],r[1]=x[1],z&&2<x.length&&(r[2]=x[2]);else return null;return p};k.lineCentroid=Q;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(k,d,Z,Q,p,x,z){function v(c,h){if(!h)return null;if("x"in h){var D={x:0,y:0};[D.x,D.y]=c(h.x,h.y,G);null!=h.z&&(D.z=h.z);null!=h.m&&(D.m=h.m);return D}if("xmin"in h)return D={xmin:0,ymin:0,
xmax:0,ymax:0},[D.xmin,D.ymin]=c(h.xmin,h.ymin,G),[D.xmax,D.ymax]=c(h.xmax,h.ymax,G),h.hasZ&&(D.zmin=h.zmin,D.zmax=h.zmax,D.hasZ=!0),h.hasM&&(D.mmin=h.mmin,D.mmax=h.mmax,D.hasM=!0),D;if("rings"in h)return{rings:r(h.rings,c),hasM:h.hasM,hasZ:h.hasZ};if("paths"in h)return{paths:r(h.paths,c),hasM:h.hasM,hasZ:h.hasZ};if("points"in h)return{points:t(h.points,c),hasM:h.hasM,hasZ:h.hasZ}}function r(c,h){const D=[];for(const B of c)D.push(t(B,h));return D}function t(c,h){const D=[];for(const B of c)c=h(B[0],
B[1],[0,0]),D.push(c),2<B.length&&c.push(B[2]),3<B.length&&c.push(B[3]);return D}function y(){y=d._asyncToGenerator(function*(c,h){h&&(c=Array.isArray(c)?c.map(D=>Z.isSome(D.geometry)&&D.geometry.spatialReference):[c],yield Q.initializeProjection(c.map(D=>({source:D,dest:h}))))});return y.apply(this,arguments)}const G=[0,0],I=v.bind(null,z.lngLatToXY),m=v.bind(null,z.xyToLngLat),J=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var h=c.prototype;
h.push=function(){var D=d._asyncToGenerator(function*(B,n,q){if(!(B&&B.length&&n&&q)||x.equals(n,q))return B;const u={geometries:B,inSpatialReference:n,outSpatialReference:q,resolve:null};this._jobs.push(u);return new Promise(N=>{u.resolve=N;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(B,n,q){return D.apply(this,arguments)}}();h._process=function(){this._timer=null;const D=this._jobs.shift();if(D){var {geometries:B,inSpatialReference:n,outSpatialReference:q,resolve:u}=
D;z.canProject(n,q)?x.isWebMercator(q)?u(B.map(I)):u(B.map(m)):u(Q.projectMany(p.jsonAdapter,B,n,q,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());k.checkProjectionSupport=function(c,h){return y.apply(this,arguments)};k.project=function(c,h,D,B){if(!c)return c;D||(D=h,h=c.spatialReference);return x.isValid(h)&&x.isValid(D)&&!x.equals(h,D)?z.canProject(h,D)?(c=x.isWebMercator(D)?I(c):m(c),c.spatialReference=D,c):Q.projectMany(p.jsonAdapter,[c],h,D,null,B)[0]:
c};k.projectMany=function(c,h,D){return J.push(c,h,D)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m,J,c,h,D,B,n,q,u,N,ba,T,ka,M){function H(){return!!Sa&&c.isLoaded()}function W(Y){x.isNone(qb)&&(qb=Promise.all([c.load(),(new Promise((ha,da)=>k(["../chunks/geometryEngineBase"],ha,da))).then(ha=>ha.geometryEngineBase),new Promise((ha,da)=>k(["./geometryAdapters/hydrated"],ha,da))]));return qb.then(([,ha,{hydratedAdapter:da}])=>{z.throwIfAborted(Y);mb=da;Sa=ha.default;Sa._enableProjection(c.pe);Tb.notify()})}function V(Y,ha,da=null,pa=null){return Array.isArray(Y)?
0===Y.length?[]:K(mb,Y,Y[0].spatialReference,ha,da,pa):K(mb,[Y],Y.spatialReference,ha,da,pa)[0]}function K(Y,ha,da,pa,za=null,Aa=null){if(x.isNone(da)||x.isNone(pa))return ha;if(L(da,pa,za))return ha.map(Ea=>x.unwrap(P(Ea,da,pa)));if(x.isNone(za)){const Ea=ba.cacheKey(da,pa);void 0!==Cb[Ea]?za=Cb[Ea]:(za=E(da,pa,null),x.isNone(za)&&(za=new ba),Cb[Ea]=za)}if(x.isNone(Sa))throw new Fb;return x.isSome(Aa)?Sa._project(Y,ha,da,pa,za,Aa):Sa._project(Y,ha,da,pa,za)}function E(Y,ha,da=null){if(x.isNone(Sa))throw new Fb;
if(x.isNone(Y)||x.isNone(ha))return null;Y=Sa._getTransformation(mb,Y,ha,da,null==da?void 0:da.spatialReference);return null!==Y?ba.fromGE(Y):null}function l(Y,ha){try{const da=V(Y,ha);if(null==da)return null;"xmin"in Y&&"xmin"in da&&(da.zmin=Y.zmin,da.zmax=Y.zmax);const pa=M.getGeometryZScaler(da.type,Y.spatialReference,ha);x.isSome(pa)&&pa(da);return da}catch(da){if(!(da instanceof Fb))throw da;return null}}function L(Y,ha,da){return da?!1:T.equals(Y,ha)?!0:T.isValid(Y)&&T.isValid(ha)&&!!Za(Y,ha,
Ub)}function X(){X=Z._asyncToGenerator(function*(Y,ha,da,pa){if(H())return z.waitTick(pa);if(Array.isArray(Y))for(const {source:za,dest:Aa,geographicTransformation:Ea}of Y){if(!L(za,Aa,Ea))return W(pa)}else if(!L(Y,ha,da))return W(pa);return z.waitTick(pa)});return X.apply(this,arguments)}function P(Y,ha,da){return Y?"x"in Y?ja(Y,ha,new h,da,0):"xmin"in Y?oa(Y,ha,new m,da,0):"rings"in Y?na(Y,ha,new D,da,0):"paths"in Y?R(Y,ha,new B,da,0):"points"in Y?ma(Y,ha,new J,da,0):null:null}function ja(Y,ha,
da,pa,za){Pa[0]=Y.x;Pa[1]=Y.y;const Aa=Y.z;Pa[2]=void 0!==Aa?Aa:za;if(!Ja(Pa,ha,0,Pa,pa,0,1))return null;da.x=Pa[0];da.y=Pa[1];da.spatialReference=pa;void 0===Aa?(da.z=void 0,da.hasZ=!1):(da.z=Pa[2],da.hasZ=!0);void 0===Y.m?(da.m=void 0,da.hasM=!1):(da.m=Y.m,da.hasM=!0);return da}function ma(Y,ha,da,pa,za){const {points:Aa,hasZ:Ea,hasM:La}=Y;Y=[];const Wa=Aa.length,Va=[];for(var Ua of Aa)Va.push(Ua[0],Ua[1],Ea?Ua[2]:za);if(!Ja(Va,ha,0,Va,pa,0,Wa))return null;for(ha=0;ha<Wa;++ha){za=3*ha;Ua=Va[za];
const cb=Va[za+1];Ea&&La?Y.push([Ua,cb,Va[za+2],Aa[ha][3]]):Ea?Y.push([Ua,cb,Va[za+2]]):La?Y.push([Ua,cb,Aa[ha][2]]):Y.push([Ua,cb])}da.points=Y;da.spatialReference=pa;da.hasZ=Ea;da.hasM=La;return da}function R(Y,ha,da,pa,za){const {paths:Aa,hasZ:Ea,hasM:La}=Y;Y=[];if(!Ma(Aa,Ea,La,ha,Y,pa,za))return null;da.paths=Y;da.spatialReference=pa;da.hasZ=Ea;da.hasM=La;return da}function na(Y,ha,da,pa,za){const {rings:Aa,hasZ:Ea,hasM:La}=Y;Y=[];if(!Ma(Aa,Ea,La,ha,Y,pa,za))return null;da.rings=Y;da.spatialReference=
pa;da.hasZ=Ea;da.hasM=La;return da}function oa(Y,ha,da,pa,za){const {xmin:Aa,ymin:Ea,xmax:La,ymax:Wa,hasZ:Va,hasM:Ua}=Y;if(!qa(Aa,Ea,Va?Y.zmin:za,ha,Pa,pa))return null;da.xmin=Pa[0];da.ymin=Pa[1];Va&&(da.zmin=Pa[2]);if(!qa(La,Wa,Va?Y.zmax:za,ha,Pa,pa))return null;da.xmax=Pa[0];da.ymax=Pa[1];Va&&(da.zmax=Pa[2]);Ua&&(da.mmin=Y.mmin,da.mmax=Y.mmax);da.spatialReference=pa;return da}function qa(Y,ha,da,pa,za,Aa){Ta[0]=Y;Ta[1]=ha;Ta[2]=da;return Ja(Ta,pa,0,za,Aa,0,1)}function xa(Y,ha,da,pa){if(x.isNone(ha)||
x.isNone(pa)||2>Y.length)return!1;2===Y.length&&(Ta[0]=Y[0],Ta[1]=Y[1],Ta[2]=0,Y=Ta);return Ja(Y,ha,0,da,pa,0,1)}function Na(Y,ha,da){if(x.isNone(ha))return!1;ha=aa(ha,rb);ha=gb[ha][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(ha))return!1;ha(Y,0,Ta,0);da!==Ta&&(da[0]=Ta[0],da[1]=Ta[1],2<da.length&&(da[2]=Ta[2]));return!0}function Ja(Y,ha,da,pa,za,Aa,Ea=1){ha=Za(ha,za,Ub);if(x.isNone(ha))return!1;if(ha===e){if(Y===pa&&da===Aa)return!0;Ea=da+3*Ea;for(let La=da,Wa=Aa;La<Ea;La++,Wa++)pa[Wa]=Y[La];return!0}Ea=
da+3*Ea;for(let La=da,Wa=Aa;La<Ea;La+=3,Wa+=3)ha(Y,La,pa,Wa);return!0}function Ma(Y,ha,da,pa,za,Aa,Ea=0){const La=[];for(const Wa of Y)for(const Va of Wa)La.push(Va[0],Va[1],ha?Va[2]:Ea);if(!Ja(La,pa,0,La,Aa,0,La.length/3))return!1;pa=0;za.length=0;for(const Wa of Y){Y=[];for(const Va of Wa)ha&&da?Y.push([La[pa++],La[pa++],La[pa++],Va[3]]):ha?Y.push([La[pa++],La[pa++],La[pa++]]):(da?Y.push([La[pa++],La[pa++],Va[2]]):Y.push([La[pa++],La[pa++]]),pa++);za.push(Y)}return!0}function wa(Y,ha,da,pa){ha=
pa+ha;if(ha<pa/2||da>ha)return Number.MAX_VALUE;Y=Math.abs(lb*Y)+Math.asin(da/ha);return Y>=Math.PI/2?Number.MAX_VALUE:da/Math.cos(Y)}function a(Y,ha,da){const pa=Math.sin(Y);Y=Math.cos(Y);const za=Math.sin(ha);ha=Math.cos(ha);da[0]=-pa;da[4]=-za*Y;da[8]=ha*Y;da[12]=0;da[1]=Y;da[5]=-za*pa;da[9]=ha*pa;da[13]=0;da[2]=0;da[6]=ha;da[10]=za;da[14]=0;da[3]=0;da[7]=0;da[11]=0;da[15]=1;return da}function g(Y,ha,da){a(Y,ha,da);y.transpose(da,da);return da}function aa(Y,ha){if(ha.spatialReference===Y)return ha.spatialReferenceId;
ha.spatialReference=Y;"metersPerUnit"in ha&&(ha.metersPerUnit=v.getMetersPerUnitForSR(Y,1));return Y.wkt===n.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=la.SPHERICAL_ECEF:T.isWGS84(Y)?ha.spatialReferenceId=la.WGS84:T.isWebMercator(Y)?ha.spatialReferenceId=la.WEB_MERCATOR:T.isPlateCarree(Y)?ha.spatialReferenceId=la.PLATE_CARREE:Y.wkt===n.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=la.WGS84_ECEF:Y.wkid===ka.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=la.CGCS2000:Y.wkt===n.SphericalPCPFMars.wkt?
ha.spatialReferenceId=la.SPHERICAL_MARS_PCPF:Y.wkt===n.SphericalPCPFMoon.wkt?ha.spatialReferenceId=la.SPHERICAL_MOON_PCPF:T.isMars(Y)?ha.spatialReferenceId=la.GCSMARS2000:T.isMoon(Y)?ha.spatialReferenceId=la.GCSMOON2000:ha.spatialReferenceId=la.UNKNOWN}function e(Y,ha,da,pa){Y!==da&&(da[pa++]=Y[ha++],da[pa++]=Y[ha++],da[pa]=Y[ha])}function A(Y,ha,da,pa){da[pa++]=wb*(Y[ha++]/u.earth.radius);da[pa++]=wb*(Math.PI/2-2*Math.atan(Math.exp(-Y[ha++]/u.earth.radius)));da[pa]=Y[ha]}function S(Y,ha,da,pa){A(Y,
ha,da,pa);Ba(da,pa,da,pa)}function U(Y,ha,da,pa){A(Y,ha,da,pa);Ra(da,pa,da,pa)}function ia(Y,ha,da,pa,za){var Aa=.4999999*Math.PI;Aa=p.clamp(lb*Y[ha+1],-Aa,Aa);Aa=Math.sin(Aa);da[pa++]=lb*Y[ha]*za.radius;da[pa++]=za.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));da[pa]=Y[ha+2]}function fa(Y,ha,da,pa){ia(Y,ha,da,pa,u.earth)}function F(Y,ha,da,pa){da[pa]=Y[ha]*Vb;da[pa+1]=Y[ha+1]*Vb;da[pa+2]=Y[ha+2]}function O(Y,ha,da,pa){da[pa]=Y[ha]*Db;da[pa+1]=Y[ha+1]*Db;da[pa+2]=Y[ha+2]}function ea(Y,ha,da,pa){A(Y,ha,
da,pa);F(da,pa,da,pa)}function ra(Y,ha,da,pa,za){za+=Y[ha+2];const Aa=lb*Y[ha+1];Y=lb*Y[ha];ha=Math.cos(Aa);da[pa++]=Math.cos(Y)*ha*za;da[pa++]=Math.sin(Y)*ha*za;da[pa]=Math.sin(Aa)*za}function sa(Y,ha,da,pa){ra(Y,ha,da,pa,u.moon.radius)}function ya(Y,ha,da,pa){ra(Y,ha,da,pa,u.mars.radius)}function Ba(Y,ha,da,pa){ra(Y,ha,da,pa,u.earth.radius)}function Ca(Y,ha,da,pa,za){var Aa=Y[ha];const Ea=Y[ha+1];ha=Y[ha+2];Y=Math.sqrt(Aa*Aa+Ea*Ea+ha*ha);ha=p.asinClamped(ha/(0===Y?1:Y));Aa=Math.atan2(Ea,Aa);da[pa++]=
wb*Aa;da[pa++]=wb*ha;da[pa]=Y-za}function Ka(Y,ha,da,pa){Ca(Y,ha,da,pa,u.moon.radius)}function Ia(Y,ha,da,pa){Ca(Y,ha,da,pa,u.mars.radius)}function Fa(Y,ha,da,pa){Ca(Y,ha,da,pa,u.earth.radius)}function Ga(Y,ha,da,pa){Fa(Y,ha,da,pa);fa(da,pa,da,pa)}function Ha(Y,ha,da,pa){Fa(Y,ha,da,pa);Ra(da,pa,da,pa)}function Ra(Y,ha,da,pa){{var za=u.earth;const Ea=lb*Y[ha];var Aa=lb*Y[ha+1];Y=Y[ha+2];ha=Math.sin(Aa);Aa=Math.cos(Aa);const La=za.radius/Math.sqrt(1-za.eccentricitySquared*ha*ha);da[pa++]=(La+Y)*Aa*
Math.cos(Ea);da[pa++]=(La+Y)*Aa*Math.sin(Ea);da[pa++]=(La*(1-za.eccentricitySquared)+Y)*ha}}function ta(Y,ha,da,pa){var za=N.earthEllipsoidConstants,Aa=Y[ha],Ea=Y[ha+1];Y=Y[ha+2];let La;ha=Math.abs(Y);var Wa=Aa*Aa+Ea*Ea;var Va=Math.sqrt(Wa);var Ua=Wa+Y*Y;var cb=Math.sqrt(Ua);Aa=Math.atan2(Ea,Aa);var nb=Y*Y/Ua;Ua=Wa/Ua;Ea=za.a2/cb;Wa=za.a3-za.a4/cb;.3<Ua?(nb=ha/cb*(1+Ua*(za.a1+Ea+nb*Wa)/cb),cb=Math.asin(nb),Ea=nb*nb,Ua=Math.sqrt(1-Ea)):(Ua=Va/cb*(1-nb*(za.a5-Ea-Ua*Wa)/cb),cb=Math.acos(Ua),Ea=1-Ua*
Ua,nb=Math.sqrt(Ea));La=1-u.earth.eccentricitySquared*Ea;Ea=u.earth.radius/Math.sqrt(La);za=za.a6*Ea;Ea=Va-Ea*Ua;Wa=ha-za*nb;ha=Ua*Ea+nb*Wa;Va=Ua*Wa-nb*Ea;za=Va/(za/La+ha);cb+=za;0>Y&&(cb=-cb);da[pa++]=wb*Aa;da[pa++]=wb*cb;da[pa]=ha+Va*za/2}function $a(Y,ha,da,pa){ta(Y,ha,da,pa);Ba(da,pa,da,pa)}function ab(Y,ha,da,pa){ta(Y,ha,da,pa);fa(da,pa,da,pa)}function Za(Y,ha,da=bb()){return x.isNone(Y)||x.isNone(ha)?null:b(Y,ha,da).projector}function b(Y,ha,da){if(x.isNone(Y)||x.isNone(ha)||da.source.spatialReference===
Y&&da.dest.spatialReference===ha)return da;const pa=aa(Y,da.source),za=aa(ha,da.dest);pa===la.UNKNOWN&&za===la.UNKNOWN?T.equals(Y,ha)?da.projector=e:da.projector=null:da.projector=gb[pa][za];return da}function bb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:e}}let Sa=null,mb=null,qb=null,Cb={};const Tb=new t.SimpleObservable;let Fb=function(Y){function ha(){return Y.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Z._inheritsLoose(ha,Y);return ha}(Q);var la;(function(Y){Y[Y.UNKNOWN=0]="UNKNOWN";Y[Y.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Y[Y.WGS84=2]="WGS84";Y[Y.WEB_MERCATOR=3]="WEB_MERCATOR";Y[Y.WGS84_ECEF=4]="WGS84_ECEF";Y[Y.CGCS2000=5]="CGCS2000";Y[Y.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";Y[Y.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Y[Y.GCSMARS2000=8]="GCSMARS2000";Y[Y.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";
Y[Y.GCSMOON2000=10]="GCSMOON2000";Y[Y.LON_LAT=11]="LON_LAT";Y[Y.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const Vb=u.earth.radius*Math.PI/180,Db=180/(u.earth.radius*Math.PI),gb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:e,[la.SPHERICAL_ECEF]:Ba,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:F,[la.WGS84]:e,[la.WGS84_ECEF]:Ra},[la.CGCS2000]:{[la.CGCS2000]:e,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:e,[la.SPHERICAL_ECEF]:Ba,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:F,[la.WGS84]:null,[la.WGS84_ECEF]:Ra},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:e,[la.GCSMOON2000]:null,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:ya,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,
[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:e,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:sa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:A,[la.WGS84_COMPARABLE_LON_LAT]:A,
[la.SPHERICAL_ECEF]:S,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:e,[la.PLATE_CARREE]:ea,[la.WGS84]:A,[la.WGS84_ECEF]:U},[la.WGS84_ECEF]:{[la.CGCS2000]:ta,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ta,[la.WGS84_COMPARABLE_LON_LAT]:ta,[la.SPHERICAL_ECEF]:$a,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(Y,ha,da,pa){ta(Y,ha,da,pa);F(da,pa,da,pa)},[la.WGS84]:ta,
[la.WGS84_ECEF]:e},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Fa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:Fa,[la.SPHERICAL_ECEF]:e,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ga,[la.PLATE_CARREE]:function(Y,ha,da,pa){Fa(Y,ha,da,pa);F(da,pa,da,pa)},[la.WGS84]:Fa,[la.WGS84_ECEF]:Ha},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ia,[la.GCSMOON2000]:null,[la.LON_LAT]:Ia,[la.WGS84_COMPARABLE_LON_LAT]:null,
[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:e,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ka,[la.LON_LAT]:Ka,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:e,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:e,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:e,[la.GCSMARS2000]:e,[la.GCSMOON2000]:e,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:e,[la.SPHERICAL_ECEF]:Ba,[la.SPHERICAL_MARS_PCPF]:ya,[la.SPHERICAL_MOON_PCPF]:sa,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:F,[la.WGS84]:e,[la.WGS84_ECEF]:Ra},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:e,[la.WGS84_COMPARABLE_LON_LAT]:e,[la.SPHERICAL_ECEF]:Ba,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:F,[la.WGS84]:e,[la.WGS84_ECEF]:Ra},[la.PLATE_CARREE]:{[la.CGCS2000]:O,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:O,
[la.WGS84_COMPARABLE_LON_LAT]:O,[la.SPHERICAL_ECEF]:function(Y,ha,da,pa){O(Y,ha,da,pa);Ba(da,pa,da,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(Y,ha,da,pa){O(Y,ha,da,pa);fa(da,pa,da,pa)},[la.PLATE_CARREE]:e,[la.WGS84]:O,[la.WGS84_ECEF]:function(Y,ha,da,pa){O(Y,ha,da,pa);Ra(da,pa,da,pa)}}},rb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Gb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub=bb(),yc=bb(),lb=p.deg2rad(1),
wb=p.rad2deg(1),Ta=I.create(),fb=I.create(),sb=I.create(),Pa=I.create(),Hb=I.create();d.canProjectToWGS84ComparableLonLat=function(Y){if(x.isNone(Y))return!1;Y=aa(Y,rb);return!!gb[Y][la.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=L;d.computeENUToSphericalPCPFLocalRotation=a;d.computeSphericalPCPFToENULocalRotation=g;d.computeTranslationToOriginAndRotation=function(Y,ha,da,pa){if(x.isNone(Y)||x.isNone(pa))return!1;var za=aa(Y,rb),Aa=aa(pa,Gb);if(za===Aa&&Aa!==la.SPHERICAL_ECEF&&Aa!==la.SPHERICAL_MARS_PCPF&&
Aa!==la.SPHERICAL_MOON_PCPF&&(za!==la.UNKNOWN||T.equals(Y,pa)))return y.fromTranslation(da,ha),!0;if(Aa===la.SPHERICAL_ECEF||Aa===la.SPHERICAL_MARS_PCPF||Aa===la.SPHERICAL_MOON_PCPF){za=gb[za][la.LON_LAT];Aa=gb[la.LON_LAT][Aa];if(x.isNone(za)||x.isNone(Aa))return!1;za(ha,0,fb,0);Aa(fb,0,sb,0);a(lb*fb[0],lb*fb[1],da);da[12]=sb[0];da[13]=sb[1];da[14]=sb[2];return!0}if((Aa===la.WEB_MERCATOR||Aa===la.PLATE_CARREE)&&(za===la.WGS84||za===la.CGCS2000&&Aa===la.PLATE_CARREE||za===la.SPHERICAL_ECEF||za===la.WEB_MERCATOR)){Y=
gb[za][la.LON_LAT];Aa=gb[la.LON_LAT][Aa];if(x.isNone(Y)||x.isNone(Aa))return!1;Y(ha,0,fb,0);Aa(fb,0,sb,0);za===la.SPHERICAL_ECEF?g(lb*fb[0],lb*fb[1],da):y.identity(da);da[12]=sb[0];da[13]=sb[1];da[14]=sb[2];return!0}return!1};d.getProjectorName=function(Y,ha){switch(Za(Y,ha,Ub)){case e:return"copy3";case Ba:return"wgs84ToSphericalECEF";case fa:return"wgs84ToWebMercator";case F:return"wgs84ToPlateCarree";case Ra:return"wgs84ToWGS84ECEF";case A:return"webMercatorToWGS84";case S:return"webMercatorToSphericalECEF";
case U:return"webMercatorToWGS84ECEF";case ea:return"webMercatorToPlateCarree";case ta:return"wgs84ECEFToWGS84";case $a:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Fa:return"sphericalECEFToWGS84";case Ga:return"sphericalECEFToWebMercator";case Ia:return"sphericalMarsPCPFToMars2000";case Ka:return"sphericalMoonPCPFToMoon2000";case Ha:return"sphericalECEFToWGS84ECEF";case ya:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};
d.getTransformation=E;d.getTransformations=function(Y,ha,da=null){if(x.isNone(Sa))throw new Fb;Y=Sa._getTransformationBySuitability(mb,Y,ha,da,null==da?void 0:da.spatialReference);if(null!==Y){ha=[];for(const pa of Y)ha.push(ba.fromGE(pa));return ha}return[]};d.initializeProjection=function(Y,ha,da,pa){return X.apply(this,arguments)};d.isLoaded=H;d.load=W;d.localLinearScaleFactors=function(Y,ha,da,pa){if(x.isNone(ha)||x.isNone(pa))return!1;const za=aa(ha,rb);var Aa=aa(pa,Gb);if(za===Aa&&za!==la.UNKNOWN||
T.equals(ha,pa))return da[0]=1,da[1]=1,da[2]=1,!0;if(za===la.SPHERICAL_ECEF){ha=G.length(Y);Y=ha/Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]);ha/=u.earth.radius;if(Aa===la.WEB_MERCATOR)return da[0]=Y*ha,da[1]=Y*ha,da[2]=1,!0;if(Aa===la.WGS84||Aa===la.CGCS2000)return Aa=Db,da[0]=Aa*Y*ha,da[1]=Aa*ha,da[2]=1,!0}else if(za===la.PLATE_CARREE){if(Aa===la.WGS84||Aa===la.CGCS2000)return da[0]=Db,da[1]=Db,da[2]=1,!0;if(Aa===la.WEB_MERCATOR)return Aa=Y[1]/u.earth.radius,da[0]=1,da[1]=1/Math.cos(Aa),da[2]=1,!0}return!1};
d.lonLatToSphericalPCPF=function(Y,ha,da,pa){const za=Math.cos(da);Y[0]=Math.cos(ha)*za*pa;Y[1]=Math.sin(ha)*za*pa;Y[2]=Math.sin(da)*pa};d.lonLatToWebMercatorComparable=ia;d.project=V;d.projectBoundingRect=function(Y,ha,da,pa){if(null==Y)return!1;if(T.equals(ha,pa))return q.copy(da,Y),!0;Ta[0]=Y[0];Ta[1]=Y[1];Ta[2]=0;if(!Ja(Ta,ha,0,Ta,pa,0,1))return!1;da[0]=Ta[0];da[1]=Ta[1];Ta[0]=Y[2];Ta[1]=Y[3];Ta[2]=0;if(!Ja(Ta,ha,0,Ta,pa,0,1))return!1;da[2]=Ta[0];da[3]=Ta[1];return!0};d.projectBoundingSphere=
function(Y,ha,da,pa){if(x.isNone(ha)||x.isNone(pa))return!1;ha=b(ha,pa,yc);if(ha.projector===e)return da[0]=Y[0],da[1]=Y[1],da[2]=Y[2],da[3]=Y[3],!0;if(x.isNone(ha.projector))return!1;const {source:za,dest:Aa}=ha;if(Aa.spatialReferenceId===la.WEB_MERCATOR){ha=gb[za.spatialReferenceId][la.WGS84];if(x.isNone(ha))return!1;ha(Y,0,fb,0);fa(fb,0,da,0);da[3]=wa(fb[1],Y[2],Y[3],u.earth.radius);return!0}if(za.spatialReferenceId!==la.WGS84&&za.spatialReferenceId!==la.CGCS2000||Aa.spatialReferenceId!==la.PLATE_CARREE)ha.projector(Y,
0,da,0),da[3]=Y[3]*za.metersPerUnit/Aa.metersPerUnit;else{pa=gb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ea=Y[3];x.isSome(gb[za.spatialReferenceId][la.SPHERICAL_ECEF])&&x.isSome(pa)&&(Ea=wa(Y[1],Y[2],Y[3],u.earth.radius));ha.projector(Y,0,da,0);da[3]=Ea}return!0};d.projectBuffer=Ja;d.projectDirection=function(Y,ha,da,pa,za){G.copy(Pa,Y);G.add(Hb,Y,ha);xa(Pa,da,Pa,za);xa(Hb,da,Hb,za);G.subtract(pa,Hb,Pa);G.normalize(pa,pa)};d.projectExtent=function(Y,ha,da=ha.spatialReference,pa=0){return x.isSome(da)&&
x.isSome(oa(Y,Y.spatialReference,ha,da,pa))};d.projectMany=K;d.projectMultipoint=function(Y,ha,da=ha.spatialReference,pa=0){return x.isNone(da)?!1:x.isSome(ma(Y,Y.spatialReference,ha,da,pa))};d.projectOrLoad=function(Y,ha){return x.isNone(Y)?{pending:null,geometry:null}:T.equals(Y.spatialReference,ha)?{pending:null,geometry:Y}:T.isValid(Y.spatialReference)&&T.isValid(ha)?L(Y.spatialReference,ha)?{pending:null,geometry:l(Y,ha)}:H()?{pending:null,geometry:l(Y,ha)}:(r.trackAccess(Tb),{pending:W(),geometry:null}):
{pending:null,geometry:null}};d.projectPoint=function(Y,ha,da=ha.spatialReference,pa=0){return x.isNone(da)?!1:x.isSome(ja(Y,Y.spatialReference,ha,da,pa))};d.projectPointToVector=function(Y,ha,da,pa=0){Pa[0]=Y.x;Pa[1]=Y.y;const za=Y.z;Pa[2]=void 0!==za?za:pa;return Ja(Pa,Y.spatialReference,0,ha,da,0,1)};d.projectPointToWGS84ComparableLonLat=function(Y,ha){Pa[0]=Y.x;Pa[1]=Y.y;const da=Y.z;Pa[2]=void 0!==da?da:0;return Na(Pa,Y.spatialReference,ha)};d.projectPolygon=function(Y,ha,da=ha.spatialReference,
pa=0){return x.isSome(da)&&x.isSome(na(Y,Y.spatialReference,ha,da,pa))};d.projectPolygonToWGS84ComparableLonLat=function({hasZ:Y,spatialReference:ha,rings:da},pa,za=0){ha=aa(ha,rb);ha=gb[ha][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(ha))return!1;Y=Y?Aa=>Aa:Aa=>G.set(Pa,Aa[0],Aa[1],za);for(const Aa of da){da=[];for(const Ea of Aa){const La=[0,0,za];ha(Y(Ea),0,La,0);da.push(La)}pa.push(da)}return!0};d.projectPolyline=function(Y,ha,da=ha.spatialReference,pa=0){return x.isSome(da)&&x.isSome(R(Y,Y.spatialReference,
ha,da,pa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:Y,spatialReference:ha,paths:da},pa,za=0){ha=aa(ha,rb);ha=gb[ha][la.WGS84_COMPARABLE_LON_LAT];if(x.isNone(ha))return!1;Y=Y?Aa=>Aa:Aa=>G.set(Pa,Aa[0],Aa[1],za);for(const Aa of da){da=[];for(const Ea of Aa){const La=[0,0,za];ha(Y(Ea),0,La,0);da.push(La)}pa.push(da)}return!0};d.projectVectorToDehydratedPoint=function(Y,ha,da){return Ja(Y,ha,0,Pa,da.spatialReference,0,1)?(da.x=Pa[0],da.y=Pa[1],da.z=Pa[2],da):null};d.projectVectorToPoint=
function(Y,ha,da){if(x.isNone(ha)||x.isNone(da))return null;const pa=new h({spatialReference:da});return Ja(Y,ha,0,Pa,da,0,1)?(pa.x=Pa[0],pa.y=Pa[1],pa.z=Pa[2],pa):null};d.projectVectorToVector=xa;d.projectVectorToWGS84ComparableLonLat=function(Y,ha,da){return Na(Y,ha,da)};d.projectWithoutEngine=P;d.projectXYZToVector=qa;d.sphericalPCPFtoLonLatElevation=Ca;d.test={get loadPromise(){return qb}};d.tryProjectWithZConversion=l;d.unload=function(){qb=mb=Sa=null;Cb={}};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(k,d,Z,Q,p,x,z,v,r){function t(R){R=L[R];if(!R)throw Error("unknown type");return R}function y(R){return l[R].baseUnit}function G(R,na=null){na=na||t(R);return l[na].baseUnit===R}function I(R,na,
oa){if(na===oa)return R;const qa=t(na);if(qa!==t(oa))throw Error("incompatible units");R=G(na,qa)?R:R*l[qa].units[na].inBaseUnits;return G(oa,qa)?R:R/l[qa].units[oa].inBaseUnits}function m(R,na){R=I(R,na,"meters");return 3E3>Math.abs(R)?"meters":"kilometers"}function J(R,na){R=I(R,na,"meters");return 1E5>Math.abs(R)?"meters":"kilometers"}function c(R,na){R=I(R,na,"feet");return 1E3>Math.abs(R)?"feet":"miles"}function h(R,na){R=I(R,na,"feet");return 1E5>Math.abs(R)?"feet":"miles"}function D(R,na){R=
I(R,na,"square-meters");return 3E6>Math.abs(R)?"square-meters":"square-kilometers"}function B(R,na){R=I(R,na,"square-feet");return 1E6>Math.abs(R)?"square-feet":"square-miles"}function n(R){return E.fromJSON(R.toLowerCase())||null}function q(R){const na=u(R),oa=R instanceof x?p.getReferenceEllipsoid(R).metersPerDegree:1E5;return na>=oa?"meters":T(R)}function u(R,na=z.earth.metersPerDegree){return Q.unwrapOr(N(R,!0),na)}function N(R,na=!1){let oa,qa,xa=null;null!=R&&("object"===typeof R?(oa=R.wkid,
qa=R.wkt):"number"===typeof R?oa=R:"string"===typeof R&&(qa=R));if(oa){if(v.isWKIDFromMars(oa))return z.mars.metersPerDegree;if(v.isWKIDFromMoon(oa))return z.moon.metersPerDegree;xa=W.values[W[oa]];!xa&&na&&K.has(oa)&&(xa=M)}else qa&&(/^PROJCS/i.test(qa)?xa=ba(H.exec(qa),xa):/^GEOCCS/i.test(qa)&&(xa=ba(V.exec(qa),xa)));return xa}function ba(R,na){return R&&R[1]?parseFloat(R[1].split(",")[1]):na}function T(R){var na=null;if(null!=R)if("object"===typeof R){var oa=R.wkid;var qa=R.wkt}else"number"===
typeof R?oa=R:"string"===typeof R&&(qa=R);if(oa)na=W.units[W[oa]];else if(qa&&(R=/^PROJCS/i.test(qa)?H:/^GEOCCS/i.test(qa)?V:null)&&(qa=R.exec(qa))&&qa[1]&&(qa=qa[1],na=(na=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&na[1],!na||!W.units.includes(na)))for(qa=parseFloat(qa.split(",")[1]),na=null,R=W.values,oa=0;oa<R.length;++oa)if(1E-7>Math.abs(qa-R[oa])){na=W.units[oa];break}return Q.isSome(na)?n(na):null}function ka(R){R=T(R);if(Q.isNone(R))return null;switch(R){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const M=z.earth.radius*Math.PI/200,H=/UNIT\[([^\]]+)\]\]$/i,W=r,V=/UNIT\[([^\]]+)\]/i,K=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),E=Z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};r={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(R=>R*R)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const l={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:r},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},L=(()=>{const R={};for(const na in l)for(const oa in l[na].units)R[oa]=na;return R})(),X="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),P=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ja={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ma={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};d=Z.strict()(ja);r=Z.strict()(ma);Z=Z.strict()({...ja,...ma});k.areaUnitFromSpatialReference=function(R){R=T(R);return Q.isNone(R)?null:P.get(R)};k.areaUnitsJSONMap=d;k.baseUnitForUnit=function(R){return y(t(R))};k.baseUnitForUnitType=y;k.convertUnit=I;k.getDefaultUnitForView=function(R){var na;if(Q.isNone(R))return"metric";var oa=R.map;if(oa=oa&&"portalItem"in oa?null==(na=oa.portalItem)?void 0:na.portal:null){var qa,xa;switch(null!=(qa=null==oa?void 0:null==(xa=oa.user)?void 0:
xa.units)?qa:oa.units){case "metric":return"metric";case "english":return"imperial"}}return Q.unwrapOr(ka(R.spatialReference),"metric")};k.getDefaultUnitSystem=ka;k.getMetersPerUnit=N;k.getMetersPerUnitForSR=u;k.getMetersPerVerticalUnitForSR=function(R){if(R&&"object"===typeof R&&!v.isEarth(R))return 1;R=u(R);return 1E5<R?1:R};k.getUnitString=T;k.getVerticalUnitStringForSR=q;k.inchesPerMeter=39.37;k.isBaseUnit=G;k.isMeasurementSystem=function(R){return"imperial"===R||"metric"===R};k.lengthToDegrees=
function(R,na,oa){return I(R,na,"meters")/(oa*Math.PI/180)};k.lengthUnitFromSpatialReference=function(R){R=T(R);return Q.isNone(R)||!X.includes(R)?null:R};k.lengthUnitsJSONMap=r;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits=X;k.preferredAreaUnit=function(R,na,oa){switch(oa){case "metric":return D(R,na);case "imperial":return B(R,na);default:return oa}};
k.preferredImperialAreaUnit=B;k.preferredImperialLengthUnit=c;k.preferredImperialVerticalLengthUnit=h;k.preferredLengthUnit=function(R,na,oa){switch(oa){case "metric":return m(R,na);case "imperial":return c(R,na);default:return oa}};k.preferredMetricAreaUnit=D;k.preferredMetricLengthUnit=m;k.preferredMetricVerticalLengthUnit=J;k.preferredVerticalLengthUnit=function(R,na,oa){switch(oa){case "metric":return J(R,na);case "imperial":return h(R,na);default:return oa}};k.unitFromRESTJSON=n;k.unitToRESTJSON=
function(R){return E.toJSON(R)||null};k.unitType=t;k.unitsJSONMap=Z;k.verticalLengthUnitFromSpatialReference=function(R){R=q(R);return Q.isNone(R)||!X.includes(R)?null:R};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,d,Z,Q){function p(t){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const x=p(Z.earth),z=p(Z.mars),v=p(Z.moon),r=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Z.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=x;k.SphericalPCPFMars=
z;k.SphericalPCPFMoon=v;k.WGS84ECEFSpatialReference=r;k.createSphericalPCPF=p;k.getReferenceEllipsoid=function(t){return t&&(Q.isMars(t)||t===z)?Z.mars:t&&(Q.isMoon(t)||t===v)?Z.moon:Z.earth};k.getReferenceEllipsoidFromWKID=function(t){return Q.isWKIDFromMars(t)?Z.mars:Q.isWKIDFromMoon(t)?Z.moon:Z.earth};k.getSphericalPCPF=function(t){return t&&(Q.isMars(t)||t===z)?z:t&&(Q.isMoon(t)||t===v)?v:x};k.getSphericalPCPFForEllipsoid=function(t){return t&&t===Z.mars?z:t&&t===Z.moon?v:x};Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,d){let Z=function(){function Q(){this._observers=[]}var p=Q.prototype;p.observe=function(x){this._observers.includes(x)||this._observers.push(x);return new d.ObservationHandle(this._observers,x)};p.notify=function(){const x=this._observers.slice();for(let z=0;z<x.length;++z){const v=x[z];v.onInvalidated();v.onCommitted()}};
return Q}();k.SimpleObservable=Z;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,d,Z){function Q(a,g){a[0]=g[0];a[1]=g[1];a[2]=g[2];a[3]=g[3];a[4]=g[4];a[5]=g[5];a[6]=g[6];a[7]=g[7];a[8]=g[8];a[9]=g[9];a[10]=g[10];a[11]=g[11];a[12]=g[12];a[13]=g[13];a[14]=g[14];a[15]=g[15];return a}function p(a,g,aa,e,A,S,U,ia,fa,F,O,ea,ra,sa,ya,Ba,Ca){a[0]=g;a[1]=aa;a[2]=e;a[3]=A;a[4]=S;
a[5]=U;a[6]=ia;a[7]=fa;a[8]=F;a[9]=O;a[10]=ea;a[11]=ra;a[12]=sa;a[13]=ya;a[14]=Ba;a[15]=Ca;return a}function x(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,g){if(a===g){const aa=g[1],e=g[2],A=g[3],S=g[6],U=g[7],ia=g[11];a[1]=g[4];a[2]=g[8];a[3]=g[12];a[4]=aa;a[6]=g[9];a[7]=g[13];a[8]=e;a[9]=S;a[11]=g[14];a[12]=A;a[13]=U;a[14]=ia}else a[0]=g[0],a[1]=g[4],a[2]=g[8],a[3]=g[12],a[4]=g[1],a[5]=g[5],a[6]=g[9],
a[7]=g[13],a[8]=g[2],a[9]=g[6],a[10]=g[10],a[11]=g[14],a[12]=g[3],a[13]=g[7],a[14]=g[11],a[15]=g[15];return a}function v(a,g){const aa=g[0],e=g[1],A=g[2],S=g[3],U=g[4],ia=g[5],fa=g[6],F=g[7],O=g[8],ea=g[9],ra=g[10],sa=g[11],ya=g[12],Ba=g[13],Ca=g[14];g=g[15];const Ka=aa*ia-e*U,Ia=aa*fa-A*U,Fa=aa*F-S*U,Ga=e*fa-A*ia,Ha=e*F-S*ia,Ra=A*F-S*fa,ta=O*Ba-ea*ya,$a=O*Ca-ra*ya,ab=O*g-sa*ya,Za=ea*Ca-ra*Ba,b=ea*g-sa*Ba,bb=ra*g-sa*Ca;let Sa=Ka*bb-Ia*b+Fa*Za+Ga*ab-Ha*$a+Ra*ta;if(!Sa)return null;Sa=1/Sa;a[0]=(ia*
bb-fa*b+F*Za)*Sa;a[1]=(A*b-e*bb-S*Za)*Sa;a[2]=(Ba*Ra-Ca*Ha+g*Ga)*Sa;a[3]=(ra*Ha-ea*Ra-sa*Ga)*Sa;a[4]=(fa*ab-U*bb-F*$a)*Sa;a[5]=(aa*bb-A*ab+S*$a)*Sa;a[6]=(Ca*Fa-ya*Ra-g*Ia)*Sa;a[7]=(O*Ra-ra*Fa+sa*Ia)*Sa;a[8]=(U*b-ia*ab+F*ta)*Sa;a[9]=(e*ab-aa*b-S*ta)*Sa;a[10]=(ya*Ha-Ba*Fa+g*Ka)*Sa;a[11]=(ea*Fa-O*Ha-sa*Ka)*Sa;a[12]=(ia*$a-U*Za-fa*ta)*Sa;a[13]=(aa*Za-e*$a+A*ta)*Sa;a[14]=(Ba*Ia-ya*Ga-Ca*Ka)*Sa;a[15]=(O*Ga-ea*Ia+ra*Ka)*Sa;return a}function r(a,g){const aa=g[0],e=g[1],A=g[2],S=g[3],U=g[4],ia=g[5],fa=g[6],
F=g[7],O=g[8],ea=g[9],ra=g[10],sa=g[11],ya=g[12],Ba=g[13],Ca=g[14];g=g[15];a[0]=ia*(ra*g-sa*Ca)-ea*(fa*g-F*Ca)+Ba*(fa*sa-F*ra);a[1]=-(e*(ra*g-sa*Ca)-ea*(A*g-S*Ca)+Ba*(A*sa-S*ra));a[2]=e*(fa*g-F*Ca)-ia*(A*g-S*Ca)+Ba*(A*F-S*fa);a[3]=-(e*(fa*sa-F*ra)-ia*(A*sa-S*ra)+ea*(A*F-S*fa));a[4]=-(U*(ra*g-sa*Ca)-O*(fa*g-F*Ca)+ya*(fa*sa-F*ra));a[5]=aa*(ra*g-sa*Ca)-O*(A*g-S*Ca)+ya*(A*sa-S*ra);a[6]=-(aa*(fa*g-F*Ca)-U*(A*g-S*Ca)+ya*(A*F-S*fa));a[7]=aa*(fa*sa-F*ra)-U*(A*sa-S*ra)+O*(A*F-S*fa);a[8]=U*(ea*g-sa*Ba)-O*(ia*
g-F*Ba)+ya*(ia*sa-F*ea);a[9]=-(aa*(ea*g-sa*Ba)-O*(e*g-S*Ba)+ya*(e*sa-S*ea));a[10]=aa*(ia*g-F*Ba)-U*(e*g-S*Ba)+ya*(e*F-S*ia);a[11]=-(aa*(ia*sa-F*ea)-U*(e*sa-S*ea)+O*(e*F-S*ia));a[12]=-(U*(ea*Ca-ra*Ba)-O*(ia*Ca-fa*Ba)+ya*(ia*ra-fa*ea));a[13]=aa*(ea*Ca-ra*Ba)-O*(e*Ca-A*Ba)+ya*(e*ra-A*ea);a[14]=-(aa*(ia*Ca-fa*Ba)-U*(e*Ca-A*Ba)+ya*(e*fa-A*ia));a[15]=aa*(ia*ra-fa*ea)-U*(e*ra-A*ea)+O*(e*fa-A*ia);return a}function t(a){const g=a[0],aa=a[1],e=a[2],A=a[3],S=a[4],U=a[5],ia=a[6],fa=a[7],F=a[8],O=a[9],ea=a[10],
ra=a[11],sa=a[12],ya=a[13],Ba=a[14];a=a[15];return(g*U-aa*S)*(ea*a-ra*Ba)-(g*ia-e*S)*(O*a-ra*ya)+(g*fa-A*S)*(O*Ba-ea*ya)+(aa*ia-e*U)*(F*a-ra*sa)-(aa*fa-A*U)*(F*Ba-ea*sa)+(e*fa-A*ia)*(F*ya-O*sa)}function y(a,g,aa){const e=g[0],A=g[1],S=g[2],U=g[3],ia=g[4],fa=g[5],F=g[6],O=g[7],ea=g[8],ra=g[9],sa=g[10],ya=g[11],Ba=g[12],Ca=g[13],Ka=g[14];g=g[15];let Ia=aa[0],Fa=aa[1],Ga=aa[2],Ha=aa[3];a[0]=Ia*e+Fa*ia+Ga*ea+Ha*Ba;a[1]=Ia*A+Fa*fa+Ga*ra+Ha*Ca;a[2]=Ia*S+Fa*F+Ga*sa+Ha*Ka;a[3]=Ia*U+Fa*O+Ga*ya+Ha*g;Ia=aa[4];
Fa=aa[5];Ga=aa[6];Ha=aa[7];a[4]=Ia*e+Fa*ia+Ga*ea+Ha*Ba;a[5]=Ia*A+Fa*fa+Ga*ra+Ha*Ca;a[6]=Ia*S+Fa*F+Ga*sa+Ha*Ka;a[7]=Ia*U+Fa*O+Ga*ya+Ha*g;Ia=aa[8];Fa=aa[9];Ga=aa[10];Ha=aa[11];a[8]=Ia*e+Fa*ia+Ga*ea+Ha*Ba;a[9]=Ia*A+Fa*fa+Ga*ra+Ha*Ca;a[10]=Ia*S+Fa*F+Ga*sa+Ha*Ka;a[11]=Ia*U+Fa*O+Ga*ya+Ha*g;Ia=aa[12];Fa=aa[13];Ga=aa[14];Ha=aa[15];a[12]=Ia*e+Fa*ia+Ga*ea+Ha*Ba;a[13]=Ia*A+Fa*fa+Ga*ra+Ha*Ca;a[14]=Ia*S+Fa*F+Ga*sa+Ha*Ka;a[15]=Ia*U+Fa*O+Ga*ya+Ha*g;return a}function G(a,g,aa){const e=aa[0],A=aa[1];aa=aa[2];if(g===
a)a[12]=g[0]*e+g[4]*A+g[8]*aa+g[12],a[13]=g[1]*e+g[5]*A+g[9]*aa+g[13],a[14]=g[2]*e+g[6]*A+g[10]*aa+g[14],a[15]=g[3]*e+g[7]*A+g[11]*aa+g[15];else{const S=g[0],U=g[1],ia=g[2],fa=g[3],F=g[4],O=g[5],ea=g[6],ra=g[7],sa=g[8],ya=g[9],Ba=g[10],Ca=g[11];a[0]=S;a[1]=U;a[2]=ia;a[3]=fa;a[4]=F;a[5]=O;a[6]=ea;a[7]=ra;a[8]=sa;a[9]=ya;a[10]=Ba;a[11]=Ca;a[12]=S*e+F*A+sa*aa+g[12];a[13]=U*e+O*A+ya*aa+g[13];a[14]=ia*e+ea*A+Ba*aa+g[14];a[15]=fa*e+ra*A+Ca*aa+g[15]}return a}function I(a,g,aa){const e=aa[0],A=aa[1];aa=aa[2];
a[0]=g[0]*e;a[1]=g[1]*e;a[2]=g[2]*e;a[3]=g[3]*e;a[4]=g[4]*A;a[5]=g[5]*A;a[6]=g[6]*A;a[7]=g[7]*A;a[8]=g[8]*aa;a[9]=g[9]*aa;a[10]=g[10]*aa;a[11]=g[11]*aa;a[12]=g[12];a[13]=g[13];a[14]=g[14];a[15]=g[15];return a}function m(a,g,aa,e){let A=e[0],S=e[1];e=e[2];let U=Math.sqrt(A*A+S*S+e*e);var ia=void 0,fa=void 0;let F=void 0,O=void 0,ea=void 0,ra=void 0,sa=void 0,ya=void 0,Ba=void 0,Ca=void 0,Ka=void 0,Ia=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ra=void 0,ta=void 0,$a=void 0,ab=void 0,Za=void 0,b=void 0,bb=
void 0;fa=ia=void 0;if(U<Z.EPSILON)return null;U=1/U;A*=U;S*=U;e*=U;ia=Math.sin(aa);fa=Math.cos(aa);F=1-fa;O=g[0];ea=g[1];ra=g[2];sa=g[3];ya=g[4];Ba=g[5];Ca=g[6];Ka=g[7];Ia=g[8];Fa=g[9];Ga=g[10];Ha=g[11];Ra=A*A*F+fa;ta=S*A*F+e*ia;$a=e*A*F-S*ia;ab=A*S*F-e*ia;Za=S*S*F+fa;b=e*S*F+A*ia;bb=A*e*F+S*ia;ia=S*e*F-A*ia;fa=e*e*F+fa;a[0]=O*Ra+ya*ta+Ia*$a;a[1]=ea*Ra+Ba*ta+Fa*$a;a[2]=ra*Ra+Ca*ta+Ga*$a;a[3]=sa*Ra+Ka*ta+Ha*$a;a[4]=O*ab+ya*Za+Ia*b;a[5]=ea*ab+Ba*Za+Fa*b;a[6]=ra*ab+Ca*Za+Ga*b;a[7]=sa*ab+Ka*Za+Ha*b;
a[8]=O*bb+ya*ia+Ia*fa;a[9]=ea*bb+Ba*ia+Fa*fa;a[10]=ra*bb+Ca*ia+Ga*fa;a[11]=sa*bb+Ka*ia+Ha*fa;g!==a&&(a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);return a}function J(a,g,aa){const e=Math.sin(aa);aa=Math.cos(aa);const A=g[4],S=g[5],U=g[6],ia=g[7],fa=g[8],F=g[9],O=g[10],ea=g[11];g!==a&&(a[0]=g[0],a[1]=g[1],a[2]=g[2],a[3]=g[3],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[4]=A*aa+fa*e;a[5]=S*aa+F*e;a[6]=U*aa+O*e;a[7]=ia*aa+ea*e;a[8]=fa*aa-A*e;a[9]=F*aa-S*e;a[10]=O*aa-U*e;a[11]=ea*aa-ia*e;return a}
function c(a,g,aa){const e=Math.sin(aa);aa=Math.cos(aa);const A=g[0],S=g[1],U=g[2],ia=g[3],fa=g[8],F=g[9],O=g[10],ea=g[11];g!==a&&(a[4]=g[4],a[5]=g[5],a[6]=g[6],a[7]=g[7],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=A*aa-fa*e;a[1]=S*aa-F*e;a[2]=U*aa-O*e;a[3]=ia*aa-ea*e;a[8]=A*e+fa*aa;a[9]=S*e+F*aa;a[10]=U*e+O*aa;a[11]=ia*e+ea*aa;return a}function h(a,g,aa){const e=Math.sin(aa);aa=Math.cos(aa);const A=g[0],S=g[1],U=g[2],ia=g[3],fa=g[4],F=g[5],O=g[6],ea=g[7];g!==a&&(a[8]=g[8],a[9]=g[9],a[10]=
g[10],a[11]=g[11],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=A*aa+fa*e;a[1]=S*aa+F*e;a[2]=U*aa+O*e;a[3]=ia*aa+ea*e;a[4]=fa*aa-A*e;a[5]=F*aa-S*e;a[6]=O*aa-U*e;a[7]=ea*aa-ia*e;return a}function D(a,g){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}function B(a,g){a[0]=g[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=g[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function n(a,
g,aa){let e=aa[0],A=aa[1];aa=aa[2];let S=Math.sqrt(e*e+A*A+aa*aa),U=void 0,ia=void 0,fa=void 0;if(S<Z.EPSILON)return null;S=1/S;e*=S;A*=S;aa*=S;U=Math.sin(g);ia=Math.cos(g);fa=1-ia;a[0]=e*e*fa+ia;a[1]=A*e*fa+aa*U;a[2]=aa*e*fa-A*U;a[3]=0;a[4]=e*A*fa-aa*U;a[5]=A*A*fa+ia;a[6]=aa*A*fa+e*U;a[7]=0;a[8]=e*aa*fa+A*U;a[9]=A*aa*fa-e*U;a[10]=aa*aa*fa+ia;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function q(a,g){const aa=Math.sin(g);g=Math.cos(g);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=aa;a[7]=0;
a[8]=0;a[9]=-aa;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,g){const aa=Math.sin(g);g=Math.cos(g);a[0]=g;a[1]=0;a[2]=-aa;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=aa;a[9]=0;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function N(a,g){const aa=Math.sin(g);g=Math.cos(g);a[0]=g;a[1]=aa;a[2]=0;a[3]=0;a[4]=-aa;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ba(a,g,aa){var e=g[0],A=g[1],S=g[2],U=g[3],ia=e+e,fa=A+A;
const F=S+S;g=e*ia;const O=e*fa;e*=F;const ea=A*fa;A*=F;S*=F;ia*=U;fa*=U;U*=F;a[0]=1-(ea+S);a[1]=O+U;a[2]=e-fa;a[3]=0;a[4]=O-U;a[5]=1-(g+S);a[6]=A+ia;a[7]=0;a[8]=e+fa;a[9]=A-ia;a[10]=1-(g+ea);a[11]=0;a[12]=aa[0];a[13]=aa[1];a[14]=aa[2];a[15]=1;return a}function T(a,g){const aa=wa,e=-g[0],A=-g[1],S=-g[2],U=g[3],ia=g[4],fa=g[5],F=g[6],O=g[7],ea=e*e+A*A+S*S+U*U;0<ea?(aa[0]=2*(ia*U+O*e+fa*S-F*A)/ea,aa[1]=2*(fa*U+O*A+F*e-ia*S)/ea,aa[2]=2*(F*U+O*S+ia*A-fa*e)/ea):(aa[0]=2*(ia*U+O*e+fa*S-F*A),aa[1]=2*(fa*
U+O*A+F*e-ia*S),aa[2]=2*(F*U+O*S+ia*A-fa*e));ba(a,g,aa);return a}function ka(a,g){a[0]=g[12];a[1]=g[13];a[2]=g[14];return a}function M(a,g){const aa=g[0],e=g[1],A=g[2],S=g[4],U=g[5],ia=g[6],fa=g[8],F=g[9];g=g[10];a[0]=Math.sqrt(aa*aa+e*e+A*A);a[1]=Math.sqrt(S*S+U*U+ia*ia);a[2]=Math.sqrt(fa*fa+F*F+g*g);return a}function H(a,g){const aa=g[0]+g[5]+g[10];let e=0;0<aa?(e=2*Math.sqrt(aa+1),a[3]=.25*e,a[0]=(g[6]-g[9])/e,a[1]=(g[8]-g[2])/e,a[2]=(g[1]-g[4])/e):g[0]>g[5]&&g[0]>g[10]?(e=2*Math.sqrt(1+g[0]-g[5]-
g[10]),a[3]=(g[6]-g[9])/e,a[0]=.25*e,a[1]=(g[1]+g[4])/e,a[2]=(g[8]+g[2])/e):g[5]>g[10]?(e=2*Math.sqrt(1+g[5]-g[0]-g[10]),a[3]=(g[8]-g[2])/e,a[0]=(g[1]+g[4])/e,a[1]=.25*e,a[2]=(g[6]+g[9])/e):(e=2*Math.sqrt(1+g[10]-g[0]-g[5]),a[3]=(g[1]-g[4])/e,a[0]=(g[8]+g[2])/e,a[1]=(g[6]+g[9])/e,a[2]=.25*e);return a}function W(a,g,aa,e){var A=g[0],S=g[1],U=g[2],ia=g[3],fa=A+A,F=S+S,O=U+U;g=A*fa;const ea=A*F;A*=O;const ra=S*F;S*=O;U*=O;fa*=ia;F*=ia;ia*=O;O=e[0];const sa=e[1];e=e[2];a[0]=(1-(ra+U))*O;a[1]=(ea+ia)*
O;a[2]=(A-F)*O;a[3]=0;a[4]=(ea-ia)*sa;a[5]=(1-(g+U))*sa;a[6]=(S+fa)*sa;a[7]=0;a[8]=(A+F)*e;a[9]=(S-fa)*e;a[10]=(1-(g+ra))*e;a[11]=0;a[12]=aa[0];a[13]=aa[1];a[14]=aa[2];a[15]=1;return a}function V(a,g,aa,e,A){var S=g[0],U=g[1],ia=g[2],fa=g[3],F=S+S,O=U+U,ea=ia+ia;g=S*F;var ra=S*O,sa=S*ea;S=U*O;U*=ea;var ya=ia*ea;ia=fa*F;O*=fa;const Ba=fa*ea;var Ca=e[0],Ka=e[1];ea=e[2];e=A[0];fa=A[1];A=A[2];F=(1-(S+ya))*Ca;const Ia=(ra+Ba)*Ca;Ca*=sa-O;ra=(ra-Ba)*Ka;ya=(1-(g+ya))*Ka;Ka*=U+ia;sa=(sa+O)*ea;U=(U-ia)*ea;
g=(1-(g+S))*ea;a[0]=F;a[1]=Ia;a[2]=Ca;a[3]=0;a[4]=ra;a[5]=ya;a[6]=Ka;a[7]=0;a[8]=sa;a[9]=U;a[10]=g;a[11]=0;a[12]=aa[0]+e-(F*e+ra*fa+sa*A);a[13]=aa[1]+fa-(Ia*e+ya*fa+U*A);a[14]=aa[2]+A-(Ca*e+Ka*fa+g*A);a[15]=1;return a}function K(a,g){var aa=g[0],e=g[1],A=g[2];g=g[3];var S=aa+aa,U=e+e;const ia=A+A;aa*=S;const fa=e*S;e*=U;const F=A*S,O=A*U;A*=ia;S*=g;U*=g;g*=ia;a[0]=1-e-A;a[1]=fa+g;a[2]=F-U;a[3]=0;a[4]=fa-g;a[5]=1-aa-A;a[6]=O+S;a[7]=0;a[8]=F+U;a[9]=O-S;a[10]=1-aa-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=
1;return a}function E(a,g,aa,e,A,S,U){const ia=1/(aa-g),fa=1/(A-e),F=1/(S-U);a[0]=2*S*ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*S*fa;a[6]=0;a[7]=0;a[8]=(aa+g)*ia;a[9]=(A+e)*fa;a[10]=(U+S)*F;a[11]=-1;a[12]=0;a[13]=0;a[14]=U*S*2*F;a[15]=0;return a}function l(a,g,aa,e,A){g=1/Math.tan(g/2);let S=void 0;a[0]=g/aa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=A&&Infinity!==A?(S=1/(e-A),a[10]=(A+e)*S,a[14]=2*A*e*S):(a[10]=-1,a[14]=-2*e);return a}function L(a,
g,aa,e){const A=Math.tan(g.upDegrees*Math.PI/180),S=Math.tan(g.downDegrees*Math.PI/180),U=Math.tan(g.leftDegrees*Math.PI/180);g=Math.tan(g.rightDegrees*Math.PI/180);const ia=2/(U+g),fa=2/(A+S);a[0]=ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=fa;a[6]=0;a[7]=0;a[8]=-((U-g)*ia*.5);a[9]=(A-S)*fa*.5;a[10]=e/(aa-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*aa/(aa-e);a[15]=0;return a}function X(a,g,aa,e,A,S,U){const ia=1/(g-aa),fa=1/(e-A),F=1/(S-U);a[0]=-2*ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*fa;a[6]=0;a[7]=0;a[8]=0;a[9]=
0;a[10]=2*F;a[11]=0;a[12]=(g+aa)*ia;a[13]=(A+e)*fa;a[14]=(U+S)*F;a[15]=1;return a}function P(a,g,aa,e){let A=void 0,S=void 0;var U=void 0,ia=void 0;let fa=void 0,F=void 0;var O=void 0,ea=void 0;let ra=void 0,sa=void 0;const ya=g[0],Ba=g[1];g=g[2];U=e[0];ia=e[1];e=e[2];O=aa[0];ea=aa[1];aa=aa[2];if(Math.abs(ya-O)<Z.EPSILON&&Math.abs(Ba-ea)<Z.EPSILON&&Math.abs(g-aa)<Z.EPSILON)return x(a);O=ya-O;ea=Ba-ea;ra=g-aa;sa=1/Math.sqrt(O*O+ea*ea+ra*ra);O*=sa;ea*=sa;ra*=sa;A=ia*ra-e*ea;S=e*O-U*ra;U=U*ea-ia*O;(sa=
Math.sqrt(A*A+S*S+U*U))?(sa=1/sa,A*=sa,S*=sa,U*=sa):U=S=A=0;ia=ea*U-ra*S;fa=ra*A-O*U;F=O*S-ea*A;(sa=Math.sqrt(ia*ia+fa*fa+F*F))?(sa=1/sa,ia*=sa,fa*=sa,F*=sa):F=fa=ia=0;a[0]=A;a[1]=ia;a[2]=O;a[3]=0;a[4]=S;a[5]=fa;a[6]=ea;a[7]=0;a[8]=U;a[9]=F;a[10]=ra;a[11]=0;a[12]=-(A*ya+S*Ba+U*g);a[13]=-(ia*ya+fa*Ba+F*g);a[14]=-(O*ya+ea*Ba+ra*g);a[15]=1;return a}function ja(a,g,aa,e){const A=g[0],S=g[1];g=g[2];var U=e[0];const ia=e[1];var fa=e[2];e=A-aa[0];let F=S-aa[1];aa=g-aa[2];let O=e*e+F*F+aa*aa;0<O&&(O=1/Math.sqrt(O),
e*=O,F*=O,aa*=O);let ea=ia*aa-fa*F;fa=fa*e-U*aa;U=U*F-ia*e;O=ea*ea+fa*fa+U*U;0<O&&(O=1/Math.sqrt(O),ea*=O,fa*=O,U*=O);a[0]=ea;a[1]=fa;a[2]=U;a[3]=0;a[4]=F*U-aa*fa;a[5]=aa*ea-e*U;a[6]=e*fa-F*ea;a[7]=0;a[8]=e;a[9]=F;a[10]=aa;a[11]=0;a[12]=A;a[13]=S;a[14]=g;a[15]=1;return a}function ma(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function R(a){return Math.sqrt(a[0]**
2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function na(a,g,aa){a[0]=g[0]+aa[0];a[1]=g[1]+aa[1];a[2]=g[2]+aa[2];a[3]=g[3]+aa[3];a[4]=g[4]+aa[4];a[5]=g[5]+aa[5];a[6]=g[6]+aa[6];a[7]=g[7]+aa[7];a[8]=g[8]+aa[8];a[9]=g[9]+aa[9];a[10]=g[10]+aa[10];a[11]=g[11]+aa[11];a[12]=g[12]+aa[12];a[13]=g[13]+aa[13];a[14]=g[14]+aa[14];a[15]=g[15]+aa[15];return a}function oa(a,g,aa){a[0]=g[0]-aa[0];a[1]=g[1]-aa[1];a[2]=g[2]-aa[2];a[3]=
g[3]-aa[3];a[4]=g[4]-aa[4];a[5]=g[5]-aa[5];a[6]=g[6]-aa[6];a[7]=g[7]-aa[7];a[8]=g[8]-aa[8];a[9]=g[9]-aa[9];a[10]=g[10]-aa[10];a[11]=g[11]-aa[11];a[12]=g[12]-aa[12];a[13]=g[13]-aa[13];a[14]=g[14]-aa[14];a[15]=g[15]-aa[15];return a}function qa(a,g,aa){a[0]=g[0]*aa;a[1]=g[1]*aa;a[2]=g[2]*aa;a[3]=g[3]*aa;a[4]=g[4]*aa;a[5]=g[5]*aa;a[6]=g[6]*aa;a[7]=g[7]*aa;a[8]=g[8]*aa;a[9]=g[9]*aa;a[10]=g[10]*aa;a[11]=g[11]*aa;a[12]=g[12]*aa;a[13]=g[13]*aa;a[14]=g[14]*aa;a[15]=g[15]*aa;return a}function xa(a,g,aa,e){a[0]=
g[0]+aa[0]*e;a[1]=g[1]+aa[1]*e;a[2]=g[2]+aa[2]*e;a[3]=g[3]+aa[3]*e;a[4]=g[4]+aa[4]*e;a[5]=g[5]+aa[5]*e;a[6]=g[6]+aa[6]*e;a[7]=g[7]+aa[7]*e;a[8]=g[8]+aa[8]*e;a[9]=g[9]+aa[9]*e;a[10]=g[10]+aa[10]*e;a[11]=g[11]+aa[11]*e;a[12]=g[12]+aa[12]*e;a[13]=g[13]+aa[13]*e;a[14]=g[14]+aa[14]*e;a[15]=g[15]+aa[15]*e;return a}function Na(a,g){return a[0]===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]&&a[4]===g[4]&&a[5]===g[5]&&a[6]===g[6]&&a[7]===g[7]&&a[8]===g[8]&&a[9]===g[9]&&a[10]===g[10]&&a[11]===g[11]&&a[12]===
g[12]&&a[13]===g[13]&&a[14]===g[14]&&a[15]===g[15]}function Ja(a,g){if(a===g)return!0;const aa=a[0],e=a[1],A=a[2],S=a[3],U=a[4],ia=a[5],fa=a[6],F=a[7],O=a[8],ea=a[9],ra=a[10],sa=a[11],ya=a[12],Ba=a[13],Ca=a[14];a=a[15];const Ka=g[0],Ia=g[1],Fa=g[2],Ga=g[3],Ha=g[4],Ra=g[5],ta=g[6],$a=g[7],ab=g[8],Za=g[9],b=g[10],bb=g[11],Sa=g[12],mb=g[13],qb=g[14];g=g[15];return Math.abs(aa-Ka)<=Z.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ka))&&Math.abs(e-Ia)<=Z.EPSILON*Math.max(1,Math.abs(e),Math.abs(Ia))&&Math.abs(A-
Fa)<=Z.EPSILON*Math.max(1,Math.abs(A),Math.abs(Fa))&&Math.abs(S-Ga)<=Z.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ga))&&Math.abs(U-Ha)<=Z.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ha))&&Math.abs(ia-Ra)<=Z.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ra))&&Math.abs(fa-ta)<=Z.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ta))&&Math.abs(F-$a)<=Z.EPSILON*Math.max(1,Math.abs(F),Math.abs($a))&&Math.abs(O-ab)<=Z.EPSILON*Math.max(1,Math.abs(O),Math.abs(ab))&&Math.abs(ea-Za)<=Z.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Za))&&
Math.abs(ra-b)<=Z.EPSILON*Math.max(1,Math.abs(ra),Math.abs(b))&&Math.abs(sa-bb)<=Z.EPSILON*Math.max(1,Math.abs(sa),Math.abs(bb))&&Math.abs(ya-Sa)<=Z.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Sa))&&Math.abs(Ba-mb)<=Z.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(mb))&&Math.abs(Ca-qb)<=Z.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(qb))&&Math.abs(a-g)<=Z.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))}function Ma(a){const g=Z.EPSILON,aa=a[0],e=a[1],A=a[2],S=a[4],U=a[5],ia=a[6],fa=a[8],F=a[9];a=a[10];return Math.abs(1-
(aa*aa+S*S+fa*fa))<=g&&Math.abs(1-(e*e+U*U+F*F))<=g&&Math.abs(1-(A*A+ia*ia+a*a))<=g}const wa=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,copy:Q,set:p,identity:x,transpose:z,invert:v,adjoint:r,determinant:t,multiply:y,translate:G,scale:I,rotate:m,rotateX:J,rotateY:c,rotateZ:h,fromTranslation:D,fromScaling:B,fromRotation:n,fromXRotation:q,fromYRotation:u,fromZRotation:N,fromRotationTranslation:ba,fromQuat2:T,getTranslation:ka,getScaling:M,getRotation:H,fromRotationTranslationScale:W,
fromRotationTranslationScaleOrigin:V,fromQuat:K,frustum:E,perspective:l,perspectiveFromFieldOfView:L,ortho:X,lookAt:P,targetTo:ja,str:ma,frob:R,add:na,subtract:oa,multiplyScalar:qa,multiplyScalarAndAdd:xa,exactEquals:Na,equals:Ja,isOrthoNormal:Ma,mul:y,sub:oa},Symbol.toStringTag,{value:"Module"}));k.add=na;k.adjoint=r;k.copy=Q;k.determinant=t;k.equals=Ja;k.exactEquals=Na;k.frob=R;k.fromQuat=K;k.fromQuat2=T;k.fromRotation=n;k.fromRotationTranslation=ba;k.fromRotationTranslationScale=W;k.fromRotationTranslationScaleOrigin=
V;k.fromScaling=B;k.fromTranslation=D;k.fromXRotation=q;k.fromYRotation=u;k.fromZRotation=N;k.frustum=E;k.getRotation=H;k.getScaling=M;k.getTranslation=ka;k.identity=x;k.invert=v;k.isOrthoNormal=Ma;k.lookAt=P;k.mat4=d;k.mul=y;k.multiply=y;k.multiplyScalar=qa;k.multiplyScalarAndAdd=xa;k.ortho=X;k.perspective=l;k.perspectiveFromFieldOfView=L;k.rotate=m;k.rotateX=J;k.rotateY=c;k.rotateZ=h;k.scale=I;k.set=p;k.str=ma;k.sub=oa;k.subtract=oa;k.targetTo=ja;k.translate=G;k.transpose=z})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,d,Z,Q,p){function x(){return!!d._pe}function z(){return!!p("esri-wasm")}function v(){return m?m:m=(new Promise((c,h)=>k(["./pe-wasm"],c,h))).then(c=>c.peWasm).then(({default:c})=>c({locateFile:h=>Q.getAssetUrl(`esri/geometry/support/${h}`)})).then(c=>{r(c)})}function r(c){function h(n,q,u){n[q]=u(n[q])}d._pe=c;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=
function(n){function q(){return n.apply(this,arguments)||this}Z._inheritsLoose(q,n);q.prototype.destroy=function(){d._pe.destroy(this)};return q}(d._pe.PeGCSExtent);c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var D of c)h(D.prototype,"getName",n=>function(){return n.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const n of[d._pe.PeGeogtran,d._pe.PeProjcs])h(n.prototype,"getParameters",q=>function(){const u=
Array(d.PeDefs.PE_PARM_MAX);let N=q.call(this);for(let ba=0;ba<u.length;ba++){const T=d._pe.getValue(N,"*");u[ba]=T?d._pe.wrapPointer(T,d._pe.PeParameter):null;N+=Int32Array.BYTES_PER_ELEMENT}return u});h(d._pe.PeHorizon.prototype,"getCoord",n=>function(){const q=this.getSize();if(!q)return null;const u=[],N=n.call(this);I(u,q,N);return u});h(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const q=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let u=null;var N=n.call(this);if(!d._pe.compare(N,
d._pe.NULL)){u=[N];const ba=this.getSteps();if(1<ba){N=d._pe.getPointer(N);for(let T=1;T<ba;T++)u.push(d._pe.wrapPointer(N+q*T,d._pe.PeGTlistExtendedGTs))}}return u}});const B=d._pe._pe_getPeHorizonSize();D=n=>function(){let q=this._cache;q||(this._cache=q=new Map);if(q.has(n))return q.get(n);let u=null;var N=n.call(this);if(!d._pe.compare(N,d._pe.NULL)){u=[N];const ba=N.getNump();if(1<ba){N=d._pe.getPointer(N);for(let T=1;T<ba;T++)u.push(d._pe.wrapPointer(N+B*T,d._pe.PeHorizon))}}q.set(n,u);return u};
h(d._pe.PeProjcs.prototype,"horizonGcsGenerate",D);h(d._pe.PeProjcs.prototype,"horizonPcsGenerate",D);d._pe.PeObject.prototype.toString=function(n=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const q=d._pe.getPointer(this),u=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(q,n,u))}}function t(c){if(c){var h=d._pe.getClass(c);h&&(h=d._pe.getCache(h))&&(c=d._pe.getPointer(c))&&delete h[c]}}function y(c,h){const D=[];h=Array(h);for(let B=
0;B<c;B++)D.push(d._pe.ensureInt8(h));return D}function G(c){let h;Array.isArray(c[0])?(h=[],c.forEach(D=>{h.push(D[0],D[1])})):h=c;return h}function I(c,h,D,B=!1){if(B)for(B=0;B<2*h;B++)c[B]=d._pe.getValue(D+B*Float64Array.BYTES_PER_ELEMENT,"double");else{B=0===c.length;for(let n=0;n<h;n++)B&&(c[n]=Array(2)),c[n][0]=d._pe.getValue(D,"double"),c[n][1]=d._pe.getValue(D+Float64Array.BYTES_PER_ELEMENT,"double"),D+=2*Float64Array.BYTES_PER_ELEMENT}}let m;d._pe=null;d.PeCSTransformations=void 0;(function(c){function h(n,
q,u){d._pe.ensureCache.prepare();var N=G(u);const ba=u===N;N=d._pe.ensureFloat64(N);(n=d._pe._pe_geog_to_proj(d._pe.getPointer(n),q,N))&&I(u,q,N,ba);return n}function D(n,q,u){return B(n,q,u,0)}function B(n,q,u,N){d._pe.ensureCache.prepare();var ba=G(u);const T=u===ba;ba=d._pe.ensureFloat64(ba);(n=d._pe._pe_proj_to_geog_center(d._pe.getPointer(n),q,ba,N))&&I(u,q,ba,T);return n}c.geogToProj=h;c.projGeog=function(n,q,u,N){switch(N){case d.PeDefs.PE_TRANSFORM_P_TO_G:return D(n,q,u);case d.PeDefs.PE_TRANSFORM_G_TO_P:return h(n,
q,u)}return 0};c.projToGeog=D;c.projToGeogCenter=B})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=
d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(c){function h(q,u){let N=null,ba=D[q];ba||(ba={},D[q]=ba);ba.hasOwnProperty(String(u))?N=ba[u]:(q=d._pe.PeFactory.prototype.factoryByType(q,u),d._pe.compare(q,d._pe.NULL)||(N=q,ba[u]=N));return N=n(N)}const D={},B=
{},n=q=>{if(q){const u=q.getType();switch(u){case d.PeDefs.PE_TYPE_GEOGCS:q=d._pe.castObject(q,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:q=d._pe.castObject(q,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:q=d._pe.castObject(q,d._pe.PeGeogtran);break;default:u&d.PeDefs.PE_TYPE_UNIT&&(q=d._pe.castObject(q,d._pe.PeUnit))}}return q};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(q){return h(d.PeDefs.PE_TYPE_COORDSYS,q)};c.factoryByType=h;c.fromString=
function(q,u){let N=null,ba=B[q];ba||(ba={},B[q]=ba);ba.hasOwnProperty(u)?N=ba[u]:(q=d._pe.PeFactory.prototype.fromString(q,u),d._pe.compare(q,d._pe.NULL)||(N=q,ba[u]=N));return N=n(N)};c.geogcs=function(q){return h(d.PeDefs.PE_TYPE_GEOGCS,q)};c.geogtran=function(q){return h(d.PeDefs.PE_TYPE_GEOGTRAN,q)};c.getCode=function(q){return d._pe.PeFactory.prototype.getCode(q)};c.projcs=function(q){return h(d.PeDefs.PE_TYPE_PROJCS,q)};c.unit=function(q){return h(d.PeDefs.PE_TYPE_UNIT,q)}})(d.PeFactory||(d.PeFactory=
{}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let h;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;h=d._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(D,B,n,q,u,N){let ba=null;const T=new d._pe.PeInteger(N);try{const ka=d._pe.PeGTlistExtended.prototype.getGTlist(D,B,n,q,u,T);if(N=T.val)if(ba=[ka],1<N){const M=d._pe.getPointer(ka);for(D=1;D<N;D++)ba.push(d._pe.wrapPointer(M+h*D,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(T)}return ba}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(h){if(h&&h.length){for(const D of h)t(D),D.getEntries().forEach(B=>{t(B);B=B.getGeogtran();t(B);B.getParameters().forEach(t);[B.getGeogcs1(),B.getGeogcs2()].forEach(n=>{t(n);const q=n.getDatum();t(q);t(q.getSpheroid());t(n.getPrimem());t(n.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(h[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=
function(h,D,B,n,q){d._pe.ensureCache.prepare();var u=G(B);const N=B===u;u=d._pe.ensureFloat64(u);let ba=0;n&&(ba=d._pe.ensureFloat64(n));(h=d._pe._pe_geog_to_geog(d._pe.getPointer(h),D,u,ba,q))&&I(B,D,u,N);return h}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const h=(B,n,q,u,N,ba)=>{d._pe.ensureCache.prepare();switch(B){case "dd":var T=d._pe._pe_geog_to_dd;var ka=d.PeDefs.PE_DD_MAX;break;case "ddm":T=d._pe._pe_geog_to_ddm;ka=d.PeDefs.PE_DDM_MAX;break;
case "dms":T=d._pe._pe_geog_to_dms,ka=d.PeDefs.PE_DMS_MAX}B=0;n&&(B=d._pe.getPointer(n));n=G(u);n=d._pe.ensureFloat64(n);ka=y(q,ka);u=d._pe.ensureInt32(ka);if(N=T(B,q,n,N,u))for(T=0;T<q;T++)ba[T]=d._pe.UTF8ToString(ka[T]);return N},D=(B,n,q,u,N)=>{d._pe.ensureCache.prepare();switch(B){case "dd":var ba=d._pe._pe_dd_to_geog;break;case "ddm":ba=d._pe._pe_ddm_to_geog;break;case "dms":ba=d._pe._pe_dms_to_geog}B=0;n&&(B=d._pe.getPointer(n));n=u.map(T=>d._pe.ensureString(T));u=d._pe.ensureInt32(n);n=d._pe.ensureFloat64(Array(2*
q));(ba=ba(B,q,u,n))&&I(N,q,n);return ba};c.geogToDms=function(B,n,q,u,N){return h("dms",B,n,q,u,N)};c.dmsToGeog=function(B,n,q,u){return D("dms",B,n,q,u)};c.geogToDdm=function(B,n,q,u,N){return h("ddm",B,n,q,u,N)};c.ddmToGeog=function(B,n,q,u){return D("ddm",B,n,q,u)};c.geogToDd=function(B,n,q,u,N){return h("dd",B,n,q,u,N)};c.ddToGeog=function(B,n,q,u){return D("dd",B,n,q,u)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(h,D,B,n,q,u,N){d._pe.ensureCache.prepare();let ba=0;h&&(ba=d._pe.getPointer(h));h=G(B);B=d._pe.ensureFloat64(h);h=y(D,d.PeDefs.PE_MGRS_MAX);const T=d._pe.ensureInt32(h);if(n=d._pe._pe_geog_to_mgrs_extended(ba,
D,B,n,q,u,T))for(q=0;q<D;q++)N[q]=d._pe.UTF8ToString(h[q]);return n};c.mgrsToGeogExtended=function(h,D,B,n,q){d._pe.ensureCache.prepare();let u=0;h&&(u=d._pe.getPointer(h));h=B.map(N=>d._pe.ensureString(N));B=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*D));(n=d._pe._pe_mgrs_to_geog_extended(u,D,B,n,h))&&I(q,D,h);return n}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(h,D,B,n,q,u,N){d._pe.ensureCache.prepare();let ba=0;h&&(ba=d._pe.getPointer(h));
h=G(B);B=d._pe.ensureFloat64(h);h=y(D,d.PeDefs.PE_MGRS_MAX);const T=d._pe.ensureInt32(h);if(n=d._pe._pe_geog_to_usng(ba,D,B,n,q,u,T))for(q=0;q<D;q++)N[q]=d._pe.UTF8ToString(h[q]);return n};c.usngToGeog=function(h,D,B,n){d._pe.ensureCache.prepare();var q=0;h&&(q=d._pe.getPointer(h));h=B.map(u=>d._pe.ensureString(u));B=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*D));(q=d._pe._pe_usng_to_geog(q,D,B,h))&&I(n,D,h);return q}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=
function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geogToUtm=function(h,D,B,n,q){d._pe.ensureCache.prepare();var u=0;h&&(u=d._pe.getPointer(h));h=G(B);B=d._pe.ensureFloat64(h);h=y(D,d.PeDefs.PE_UTM_MAX);const N=d._pe.ensureInt32(h);if(n=d._pe._pe_geog_to_utm(u,D,B,n,N))for(u=0;u<D;u++)q[u]=d._pe.UTF8ToString(h[u]);return n};c.utmToGeog=
function(h,D,B,n,q){d._pe.ensureCache.prepare();let u=0;h&&(u=d._pe.getPointer(h));h=B.map(N=>d._pe.ensureString(N));B=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*D));(n=d._pe._pe_utm_to_geog(u,D,B,n,h))&&I(q,D,h);return n}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const h=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=
d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(D,B=c.PE_PCSINFO_OPTION_DOMAIN){let n,q;h.has(D)&&(q=h.get(D),q[B]&&(n=q[B]));n||(n=d._pe.PePCSInfo.prototype.generate(D,B),q||(q=[],h.set(D,q)),q[B]=n);return n}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.versionString=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const J=Object.freeze(Object.defineProperty({__proto__:null,
get _pe(){return d._pe},isLoaded:x,isSupported:z,load:v,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},
get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:r},Symbol.toStringTag,{value:"Module"}));d._init=r;d.isLoaded=x;d.isSupported=z;d.load=v;d.pe=J})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,d){const Z=Math.PI/180;var Q=d.earth.radius;const p=d.earth.eccentricitySquared;Q={a1:Q*p,a2:Q*p*Q*p,a3:Q*p*p/2,a4:Q*p*Q*p*2.5,a5:Q*p+Q*p*p/2,a6:1-p};d={4267:{a:6378206.4,f:1/294.9786982},
4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},
104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=Q;k.spheroids=d;k.toRadians=Z;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(k){return function(){function d(Q){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Q&&Q.steps)for(const p of Q.steps)p instanceof k?this.steps.push(p):this.steps.push(new k({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}d.cacheKey=function(Q,p){return[void 0!==Q.wkid&&null!==Q.wkid?Q.wkid.toString():"-1",void 0!==Q.wkt&&null!==Q.wkt?Q.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};
d.fromGE=function(Q){const p=new d;let x="";for(const z of Q.steps)Q=k.fromGE(z),p.steps.push(Q),x+=Q.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=x;return p};var Z=d.prototype;Z.getInverse=function(){const Q=new d;Q.steps=[];for(let p=this.steps.length-1;0<=p;p--)Q.steps.push(this.steps[p].getInverse());return Q};Z.getGTListEntry=function(){let Q="";for(const p of this.steps)Q+=p.uid.toString()+",";Q!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
Q);return this._gtlistentry};Z.assignCachedGe=function(Q,p,x){this._cached_projection[d.cacheKey(Q,p)]=x};Z.getCachedGeTransformation=function(Q,p){let x="";for(const z of this.steps)x+=z.uid.toString()+",";x!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=x);Q=this._cached_projection[d.cacheKey(Q,p)];return void 0===Q?null:Q};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let d=
0;return function(){function Z(Q=null){this.uid=d++;Q?(this._wkt=void 0!==Q.wkt?Q.wkt:null,this._wkid=void 0!==Q.wkid?Q.wkid:-1,this._isInverse=void 0!==Q.isInverse?!0===Q.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Z.fromGE=function(Q){const p=new Z;p._wkt=Q.wkt;p._wkid=Q.wkid;p._isInverse=Q.isInverse;return p};Z.prototype.getInverse=function(){const Q=new Z;Q._wkt=this.wkt;Q._wkid=this._wkid;Q._isInverse=!this.isInverse;return Q};k._createClass(Z,[{key:"wkt",get:function(){return this._wkt},
set:function(Q){this._wkt=Q;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(Q){this._wkid=Q;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Q){this._isInverse=Q;this.uid=d++}}]);return Z}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,d,Z,Q){k.getGeometryZScaler=function(p,x,z){if(d.isNone(x)||d.isNone(z)||z.vcsWkid||Q.equals(x,z))return null;
x=Z.getMetersPerVerticalUnitForSR(x);z=Z.getMetersPerVerticalUnitForSR(z);const v=x/z;if(1===v)return null;switch(p){case "point":case "esriGeometryPoint":return r=>{r&&null!=r.z&&(r.z*=v)};case "polyline":case "esriGeometryPolyline":return r=>{if(r)for(const t of r.paths)for(const y of t)2<y.length&&(y[2]*=v)};case "polygon":case "esriGeometryPolygon":return r=>{if(r)for(const t of r.rings)for(const y of t)2<y.length&&(y[2]*=v)};case "multipoint":case "esriGeometryMultipoint":return r=>{if(r)for(const t of r.points)2<
t.length&&(t[2]*=v)};case "extent":case "esriGeometryExtent":return r=>{r&&null!=r.zmin&&null!=r.zmax&&(r.zmin*=v,r.zmax*=v)};default:return null}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let d=function(z,v,r){this.x=z;this.y=v;this.spatialReference=r;this.m=this.z=void 0},Z=function(z,v,r,t){this.rings=z;this.spatialReference=v;this.hasM=this.hasZ=void 0;r&&(this.hasZ=
r);t&&(this.hasM=t)},Q=function(z,v,r,t){this.paths=z;this.spatialReference=v;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);t&&(this.hasM=t)},p=function(z,v,r,t){this.points=z;this.spatialReference=v;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);t&&(this.hasM=t)},x=function(z,v,r,t,y){this.xmin=z;this.ymin=v;this.xmax=r;this.ymax=t;this.spatialReference=y;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(z,v){return null==v?null:z.convertJSONToGeometry(v)},exportPoint:function(z,
v,r){r=new d(z.getPointX(v),z.getPointY(v),r);const t=z.hasZ(v),y=z.hasM(v);t&&(r.z=z.getPointZ(v));y&&(r.m=z.getPointM(v));return r},exportPolygon:function(z,v,r){return new Z(z.exportPaths(v),r,z.hasZ(v),z.hasM(v))},exportPolyline:function(z,v,r){return new Q(z.exportPaths(v),r,z.hasZ(v),z.hasM(v))},exportMultipoint:function(z,v,r){return new p(z.exportPoints(v),r,z.hasZ(v),z.hasM(v))},exportExtent:function(z,v,r){var t=z.hasZ(v);const y=z.hasM(v);r=new x(z.getXMin(v),z.getYMin(v),z.getXMax(v),
z.getYMax(v),r);t&&(t=z.getZExtent(v),r.zmin=t.vmin,r.zmax=t.vmax);y&&(z=z.getMExtent(v),r.mmin=z.vmin,r.mmax=z.vmax);return r}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m,J,c,h,D,B,n,q,u,N,ba,T){function ka(l){return l.every(L=>"exceedslimit"!==L.statisticType)}const M=new z.MemCacheStorage(2E6);let H=0,W=function(){function l(X){this.capabilities={query:D.queryCapabilities};this.geometryType=X.geometryType;this.hasM=X.hasM;this.hasZ=X.hasZ;this.objectIdField=X.objectIdField;this.spatialReference=X.spatialReference;this.definitionExpression=X.definitionExpression;this.featureStore=X.featureStore;this.aggregateAdapter=X.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=X.timeInfo;X.cacheSpatialQueries&&(this._geometryQueryCache=new z.MemCache(H++ +"$$",M));this.fieldsIndex=new N(X.fields);X.scheduler&&X.priority&&(this._frameTask=X.scheduler.registerTask(X.priority))}var L=l.prototype;L.destroy=function(){this._frameTask=x.removeMaybe(this._frameTask);this.clearCache();x.destroyMaybe(this._geometryQueryCache);this._changeHandle=x.removeMaybe(this._changeHandle);x.destroyMaybe(this.fieldsIndex)};
L.clearCache=function(){var X;null==(X=this._geometryQueryCache)?void 0:X.clear();this._timeExtent=this._allItems=null};L.executeQuery=function(){var X=d._asyncToGenerator(function*(P,ja){try{return(yield this._executeQuery(P,{},ja)).createQueryResponse()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new B.QueryEngineResult([],P,this)).createQueryResponse()}});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForCount=function(){var X=d._asyncToGenerator(function*(P=
{},ja){try{return(yield this._executeQuery(P,{returnGeometry:!1,returnCentroid:!1,outSR:null},ja)).createQueryResponseForCount()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}});return function(){return X.apply(this,arguments)}}();L.executeQueryForExtent=function(){var X=d._asyncToGenerator(function*(P,ja){const ma=P.outSR;try{const R=yield this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),na=R.size;if(!na)return{count:0,extent:null};r.set(K,r.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(R.items,xa=>r.expandWithAABB(K,xa),V);const oa={xmin:K[0],ymin:K[1],xmax:K[3],ymax:K[4],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(K[2])&&isFinite(K[5])&&(oa.zmin=K[2],oa.zmax=K[5]);const qa=h.project(oa,R.spatialReference,ma);qa.spatialReference=u.cleanFromGeometryEngine(ma||this.spatialReference);if(0===qa.xmax-qa.xmin){const xa=v.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=xa;qa.xmax+=xa}if(0===qa.ymax-qa.ymin){const xa=
v.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=xa;qa.ymax+=xa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const xa=v.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=xa;qa.zmax+=xa}return{count:na,extent:qa}}catch(R){if(R===u.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw R;}});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForIds=function(){var X=d._asyncToGenerator(function*(P,ja){return this.executeQueryForIdSet(P,ja).then(ma=>
Array.from(ma))});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForIdSet=function(){var X=d._asyncToGenerator(function*(P,ja){try{const ma=yield this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),R=ma.items,na=new Set;yield this._reschedule(()=>{for(const oa of R)na.add(ma.featureAdapter.getObjectId(oa))},ja);return na}catch(ma){if(ma===u.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForSnapping=
function(){var X=d._asyncToGenerator(function*(P,ja){const {point:ma,distance:R,types:na}=P;if(na===B.SnappingTypes.NONE)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(P.query),ja),qa=!m.equals(ma.spatialReference,this.spatialReference);qa&&(yield h.checkProjectionSupport(ma.spatialReference,this.spatialReference));var xa="number"===typeof R?R:R.x,Na="number"===typeof R?R:R.y;xa={xmin:ma.x-xa,xmax:ma.x+xa,ymin:ma.y-Na,ymax:ma.y+Na,spatialReference:ma.spatialReference};
xa=qa?h.project(xa,this.spatialReference):xa;if(!xa)return{candidates:[]};Na=(yield I.normalizeCentralMeridian(G.fromJSON(ma),null,{signal:ja}))[0];const Ja=(yield I.normalizeCentralMeridian(G.fromJSON(xa),null,{signal:ja}))[0];if(x.isNone(Na)||x.isNone(Ja))return{candidates:[]};const Ma=new B.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),oa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Ma),ja);yield this._reschedule(()=>this._executeTimeQuery(Ma),ja);yield this._reschedule(()=>
this._executeAttributesQuery(Ma),ja);ja=Na.toJSON();ja=qa?h.project(ja,this.spatialReference):ja;return Ma.createSnappingResponse({...P,point:ja,distance:qa?Math.max(xa.xmax-xa.xmin,xa.ymax-xa.ymin)/2:R},ma.spatialReference)});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForLatestObservations=function(){var X=d._asyncToGenerator(function*(P,ja){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Q("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:P,timeInfo:this.timeInfo});try{const ma=yield this._executeQuery(P,{},ja);yield this._reschedule(()=>this._filterLatest(ma),ja);return ma.createQueryResponse()}catch(ma){if(ma!==u.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new B.QueryEngineResult([],P,this)).createQueryResponse()}});return function(P,ja){return X.apply(this,arguments)}}();L.executeQueryForSummaryStatistics=function(){var X=d._asyncToGenerator(function*(P={},ja,ma){const {field:R,normalizationField:na,valueExpression:oa}=ja;
return(yield this._getQueryEngineResultForStats(P,{field:R,normalizationField:na,valueExpression:oa},ma)).createSummaryStatisticsResponse(ja)});return function(){return X.apply(this,arguments)}}();L.executeQueryForUniqueValues=function(){var X=d._asyncToGenerator(function*(P={},ja,ma){const {field:R,valueExpression:na}=ja;return(yield this._getQueryEngineResultForStats(P,{field:R,valueExpression:na},ma)).createUniqueValuesResponse(ja)});return function(){return X.apply(this,arguments)}}();L.executeQueryForClassBreaks=
function(){var X=d._asyncToGenerator(function*(P={},ja,ma){const {field:R,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(P,{field:R,normalizationField:na,valueExpression:oa},ma)).createClassBreaksResponse(ja)});return function(){return X.apply(this,arguments)}}();L.executeQueryForHistogram=function(){var X=d._asyncToGenerator(function*(P={},ja,ma){const {field:R,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(P,
{field:R,normalizationField:na,valueExpression:oa},ma)).createHistogramResponse(ja)});return function(){return X.apply(this,arguments)}}();L._schedule=function(){var X=d._asyncToGenerator(function*(P,ja){return x.isSome(this._frameTask)?this._frameTask.schedule(P,ja):P(T.noBudget)});return function(P,ja){return X.apply(this,arguments)}}();L._reschedule=function(){var X=d._asyncToGenerator(function*(P,ja){return x.isSome(this._frameTask)?this._frameTask.reschedule(P,ja):P(T.noBudget)});return function(P,
ja){return X.apply(this,arguments)}}();L._getAll=function(X){x.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new B.QueryEngineResult(this._allItems,X,this)};L._executeQuery=function(){var X=d._asyncToGenerator(function*(P,ja,ma){P=p.clone(P);P=yield this._schedule(()=>u.normalizeQuery(P,this.definitionExpression,this.spatialReference),ma);P=yield this._reschedule(()=>this._checkQuerySupport(P),ma);P={...P,...ja};const R=yield this._reschedule(()=>this._executeSceneFilterQuery(P,
ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(P,R,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),ma);return na});return function(P,ja,ma){return X.apply(this,arguments)}}();L._executeSceneFilterQuery=function(){var X=d._asyncToGenerator(function*(P,ja){var ma=this;if(x.isNone(P.sceneFilter))return null;
const {outSR:R,returnGeometry:na,returnCentroid:oa}=P;var qa=this.featureStore.featureSpatialReference,xa=P.sceneFilter.geometry;const Na=x.isNone(qa)||m.equals(qa,xa.spatialReference)?xa:h.project(xa,qa);if(!Na)return null;qa=na||oa;qa=m.isValid(R)&&!m.equals(this.spatialReference,R)&&qa?function(){var a=d._asyncToGenerator(function*(g){return ma._project(g,R)});return function(g){return a.apply(this,arguments)}}():a=>a;const Ja=this.featureAdapter;xa=this._searchFeatures(this._getQueryBBoxes(Na));
if("disjoint"===P.sceneFilter.spatialRelationship){if(!xa.length)return null;const a=new Set;for(var Ma of xa)a.add(Ja.getObjectId(Ma));const g=yield this._reschedule(()=>this.featureStore.toArray(),ja);Ma=yield this._reschedule(d._asyncToGenerator(function*(){const aa=yield n.getSpatialQueryOperator("esriSpatialRelDisjoint",Na,ma.geometryType,ma.hasZ,ma.hasM),e=yield ma._runSpatialFilter(g,A=>!a.has(Ja.getObjectId(A))||aa(Ja.getGeometry(A)),ja);return new B.QueryEngineResult(e,P,ma)}),ja);return qa(Ma)}if(!xa.length)return new B.QueryEngineResult([],
P,this);if(this._canExecuteSinglePass(Na,P))return qa(new B.QueryEngineResult(xa,P,this));const wa=yield n.getSpatialQueryOperator("esriSpatialRelContains",Na,this.geometryType,this.hasZ,this.hasM);Ma=yield this._runSpatialFilter(xa,a=>wa(Ja.getGeometry(a)),ja);return qa(new B.QueryEngineResult(Ma,P,this))});return function(P,ja){return X.apply(this,arguments)}}();L._executeGeometryQuery=function(){var X=d._asyncToGenerator(function*(P,ja,ma){var R=this;if(x.isSome(ja)&&0===ja.items.length)return ja;
P=x.isSome(ja)?ja.query:P;const {geometry:na,outSR:oa,spatialRel:qa,returnGeometry:xa,returnCentroid:Na}=P;var Ja=this.featureStore.featureSpatialReference;const Ma=!na||x.isNone(Ja)||m.equals(Ja,na.spatialReference)?na:h.project(na,Ja),wa=xa||Na,a=m.isValid(oa)&&!m.equals(this.spatialReference,oa),g=this._geometryQueryCache&&x.isNone(ja)?a&&wa?JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa}):
null;Ja=g?this._geometryQueryCache.get(g):null;if(x.isSome(Ja))return new B.QueryEngineResult(Ja,P,this);Ja=function(){var U=d._asyncToGenerator(function*(ia){a&&wa&&(yield R._project(ia,oa));g&&R._geometryQueryCache.put(g,ia.items,ia.items.length+1);return ia});return function(ia){return U.apply(this,arguments)}}();if(!Ma)return Ja(x.isSome(ja)?ja:this._getAll(P));const aa=this.featureAdapter;let e=this._searchFeatures(this._getQueryBBoxes(na));if("esriSpatialRelDisjoint"===qa){if(!e.length)return Ja(x.isSome(ja)?
ja:this._getAll(P));const U=new Set;for(var A of e)U.add(aa.getObjectId(A));const ia=x.isSome(ja)?ja.items:yield this._reschedule(()=>this.featureStore.toArray(),ma);A=yield this._reschedule(d._asyncToGenerator(function*(){const fa=yield n.getSpatialQueryOperator(qa,Ma,R.geometryType,R.hasZ,R.hasM),F=yield R._runSpatialFilter(ia,O=>!U.has(aa.getObjectId(O))||fa(aa.getGeometry(O)),ma);return new B.QueryEngineResult(F,P,R)}),ma);return Ja(A)}if(x.isSome(ja)){const U=new Z.PositionHint;e=e.filter(ia=>
0<=Z.indexOf(ja.items,ia,ja.items.length,U))}if(!e.length)return Ja=new B.QueryEngineResult([],P,this),g&&this._geometryQueryCache.put(g,Ja.items,1),Ja;if(this._canExecuteSinglePass(Ma,P))return Ja(new B.QueryEngineResult(e,P,this));const S=yield n.getSpatialQueryOperator(qa,Ma,this.geometryType,this.hasZ,this.hasM);A=yield this._runSpatialFilter(e,U=>S(aa.getGeometry(U)),ma);return Ja(new B.QueryEngineResult(A,P,this))});return function(P,ja,ma){return X.apply(this,arguments)}}();L._executeAggregateIdsQuery=
function(X){if(0!==X.items.length&&X.query.aggregateIds&&X.query.aggregateIds.length&&!x.isNone(this.aggregateAdapter)){var P=new Set;for(const ma of X.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ma).forEach(R=>P.add(R));var ja=this.featureAdapter.getObjectId;X.items=X.items.filter(ma=>P.has(ja(ma)))}};L._executeObjectIdsQuery=function(X){if(0!==X.items.length&&X.query.objectIds&&X.query.objectIds.length){var P=new Set(X.query.objectIds),ja=this.featureAdapter.getObjectId;X.items=
X.items.filter(ma=>P.has(ja(ma)))}};L._executeTimeQuery=function(X){if(0!==X.items.length){var P=q.getTimeOperator(this.timeInfo,X.query.timeExtent,this.featureAdapter);x.isNone(P)||(X.items=X.items.filter(P))}};L._executeAttributesQuery=function(X){if(0!==X.items.length){var P=c.getWhereClause(X.query.where,this.fieldsIndex);if(P){if(!P.isStandardized)throw new TypeError("Where clause is not standardized");X.items=X.items.filter(ja=>P.testFeature(ja,this.featureAdapter))}}};L._runSpatialFilter=function(){var X=
d._asyncToGenerator(function*(P,ja,ma){var R=this;if(!ja)return P;if(x.isNone(this._frameTask))return P.filter(xa=>ja(xa));let na=0;const oa=[],qa=function(){var xa=d._asyncToGenerator(function*(Na){for(;na<P.length;){const Ja=P[na++];ja(Ja)&&(oa.push(Ja),Na.madeProgress());Na.done&&(yield R._reschedule(Ma=>qa(Ma),ma))}});return function(Na){return xa.apply(this,arguments)}}();return this._reschedule(xa=>qa(xa),ma).then(()=>oa)});return function(P,ja,ma){return X.apply(this,arguments)}}();L._filterLatest=
function(X){const {trackIdField:P,startTimeField:ja,endTimeField:ma}=this.timeInfo,R=ma||ja,na=new Map,oa=this.featureAdapter.getAttribute;for(const qa of X.items){const xa=oa(qa,P),Na=oa(qa,R),Ja=na.get(xa);(!Ja||Na>oa(Ja,R))&&na.set(xa,qa)}X.items=Array.from(na.values())};L._canExecuteSinglePass=function(X,P){({spatialRel:P}=P);return n.canQueryWithRBush(X)&&("esriSpatialRelEnvelopeIntersects"===P||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===P||"esriSpatialRelContains"===
P||"esriSpatialRelWithin"===P))};L._project=function(){var X=d._asyncToGenerator(function*(P,ja){if(!ja||m.equals(this.spatialReference,ja))return P;const ma=this.featureAdapter;ja=yield h.projectMany(P.items.map(R=>u.getGeometry(this.geometryType,this.hasZ,this.hasM,ma.getGeometry(R))),this.spatialReference,ja);P.items=ja.map((R,na)=>ma.cloneWithGeometry(P.items[na],J.convertFromGeometry(R,this.hasZ,this.hasM)));return P});return function(P,ja){return X.apply(this,arguments)}}();L._getQueryBBoxes=
function(X){if(n.canQueryWithRBush(X)){if(G.isExtent(X))return[t.fromValues(X.xmin,X.ymin,X.xmax,X.ymax)];if(G.isPolygon(X))return X.rings.map(P=>t.fromValues(Math.min(P[0][0],P[2][0]),Math.min(P[0][1],P[2][1]),Math.max(P[0][0],P[2][0]),Math.max(P[0][1],P[2][1])))}return[y.getBoundsXY(t.create(),X)]};L._searchFeatures=function(X){for(const P of X)this.featureStore.forEachInBounds(P,ja=>E.add(ja));X=Array.from(E.values());E.clear();return X};L._checkStatisticsSupport=function(){var X=d._asyncToGenerator(function*(P,
ja){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||P.pixelSize||P.relationParam||P.text||P.outStatistics||P.groupByFieldsForStatistics||P.having||P.orderByFields)throw new Q("feature-store:unsupported-query","Unsupported query options",{query:P});this._checkAttributesQuerySupport(P);return Promise.all([this._checkStatisticsParamsSupport(ja),n.checkSpatialQuerySupport(P,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,P.outSR)]).then(()=>P)});
return function(P,ja){return X.apply(this,arguments)}}();L._checkStatisticsParamsSupport=function(){var X=d._asyncToGenerator(function*(P){var ja=[];P.valueExpression&&({arcadeUtils:ja}=yield ba.loadArcade(),ja=ja.extractFieldNames(P.valueExpression));P.field&&ja.push(P.field);P.normalizationField&&ja.push(P.normalizationField);if(!ja.length)throw new Q("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:P});c.validateFields(this.fieldsIndex,ja,"params contains missing fields")});
return function(P){return X.apply(this,arguments)}}();L._checkQuerySupport=function(){var X=d._asyncToGenerator(function*(P){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||P.pixelSize||P.relationParam||P.text)throw new Q("feature-store:unsupported-query","Unsupported query options",{query:P});this._checkAttributesQuerySupport(P);this._checkStatisticsQuerySupport(P);return Promise.all([n.checkSpatialQuerySupport(P,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,
P.outSR)]).then(()=>P)});return function(P){return X.apply(this,arguments)}}();L._checkAttributesQuerySupport=function(X){const {outFields:P,orderByFields:ja,returnDistinctValues:ma,outStatistics:R}=X,na=R?R.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const oa=ja.map(qa=>{const xa=qa.toLowerCase();return xa.includes(" asc")?xa.split(" asc")[0]:xa.includes(" desc")?xa.split(" desc")[0]:qa}).filter(qa=>!na.includes(qa));c.validateFields(this.fieldsIndex,
oa,"orderByFields contains missing fields")}if(P&&0<P.length)c.validateFields(this.fieldsIndex,P,"outFields contains missing fields");else if(ma)throw new Q("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:X});c.validateWhere(this.fieldsIndex,X.where)};L._checkStatisticsQuerySupport=function(X){const {outStatistics:P,groupByFieldsForStatistics:ja,having:ma}=X;var R=ja&&ja.length,na=P&&P.length;if(ma){if(!R||!na)throw new Q("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:X});c.validateHaving(this.fieldsIndex,ma,P)}if(na&&ka(P)){na=P.map(oa=>oa.onStatisticField).filter(Boolean);c.validateFields(this.fieldsIndex,na,"onStatisticFields contains missing fields");R&&c.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const oa of P){const {onStatisticField:qa,statisticType:xa}=oa;if(("percentile_disc"===xa||"percentile_cont"===xa)&&"statisticParameters"in
oa){if({statisticParameters:R}=oa,!R)throw new Q("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:oa,query:X});}else if("count"!==xa&&qa&&c.hasInvalidFieldType(qa,this.fieldsIndex))throw new Q("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:oa,query:X});}}};L._getQueryEngineResultForStats=function(){var X=d._asyncToGenerator(function*(P,ja,ma){P=p.clone(P);try{P=yield this._schedule(()=>u.normalizeQuery(P,
this.definitionExpression,this.spatialReference),ma);P=yield this._reschedule(()=>this._checkStatisticsSupport(P,ja),ma);const R=yield this._reschedule(()=>this._executeSceneFilterQuery(P,ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(P,R,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),
ma);return na}catch(R){if(R!==u.QUERY_ENGINE_EMPTY_RESULT)throw R;return new B.QueryEngineResult([],P,this)}});return function(P,ja,ma){return X.apply(this,arguments)}}();d._createClass(l,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const X=this.featureStore.fullBounds;return x.isNone(X)?null:{xmin:X[0],ymin:X[1],xmax:X[2],ymax:X[3],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=q.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return l}();const V=r.create(),K=r.create(),E=new Set;k.Feature=function(l,L=null,X,P,ja){this.attributes=l;this.geometry=X;this.centroid=P;this.filterFlags=ja;this.groupId=-1;this.displayId=L};k.QueryEngine=W;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(k,d,Z,Q){k.RemoveMode=void 0;(function(z){z[z.ALL=0]="ALL";z[z.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let p=function(){function z(r,t,y){this._namespace=r;this._storage=t;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";y&&(this._storage.registerRemoveFunc(this._namespace,y),this._removeFunc=!0)}var v=z.prototype;v.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};v.resetHitRate=function(){this._hit=this._miss=0};v.put=function(r,t,y,G=0){this._storage.put(this._namespace+r,t,y,G)};v.get=function(r){r=this._storage.get(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};v.pop=function(r){r=this._storage.pop(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};v.updateSize=function(r,t,y){this._storage.updateSize(this._namespace+r,t,y)};v.clear=function(){this._storage.clear(this._namespace)};
v.clearAll=function(){this._storage.clearAll()};v.getStats=function(){return this._storage.getStats()};v.resetStats=function(){this._storage.resetStats()};d._createClass(z,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return z}(),x=function(){function z(r=10485760){this._maxSize=r;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Q;this._users=new Q}var v=z.prototype;v.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};v.register=function(r){this._users.push(r)};v.deregister=function(r){this._users.removeUnordered(r)};v.registerRemoveFunc=function(r,t){this._removeFuncs.push([r,t])};v.deregisterRemoveFunc=function(r){this._removeFuncs.filterInPlace(t=>t[0]!==r)};v.put=function(r,t,y,G){const I=this._db.get(r);I&&(this._size-=
I.size,this._db.delete(r),I.entry!==t&&this._notifyRemove(r,I.entry,k.RemoveMode.ALL));y>this._maxSize?this._notifyRemove(r,t,k.RemoveMode.ALL):void 0===t?console.warn("Refusing to cache undefined entry "):!y||0>y?console.warn("Refusing to cache entry with invalid size "+y):(G=1+Math.max(G,-3)- -3,this._db.set(r,{entry:t,size:y,lifetime:G,lives:G}),this._size+=y,this._checkSizeLimit())};v.updateSize=function(r,t,y){const G=this._db.get(r);if(G&&G.entry===t){for(this._size-=G.size;y>this._maxSize;)if(y=
this._notifyRemove(r,t,k.RemoveMode.SOME),!(Z.isSome(y)&&0<y)){this._db.delete(r);return}G.size=y;this._size+=y;this._checkSizeLimit()}};v.pop=function(r){const t=this._db.get(r);if(t)return this._size-=t.size,this._db.delete(r),++this._hit,t.entry;++this._miss};v.get=function(r){const t=this._db.get(r);if(void 0===t)++this._miss;else return this._db.delete(r),t.lives=t.lifetime,this._db.set(r,t),++this._hit,t.entry};v.getStats=function(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},y=[];this._db.forEach((m,J)=>{const c=m.lifetime;y[c]=(y[c]||0)+m.size;this._users.forAll(h=>{h=h.namespace;J.startsWith(h)&&(t[h]=(t[h]||0)+m.size)})});const G={};this._users.forAll(m=>{const J=m.namespace;!isNaN(m.hitRate)&&0<m.hitRate?(t[J]=t[J]||0,G[J]=Math.round(100*m.hitRate)+"%"):G[J]="0%"});var I=Object.keys(t);I.sort((m,J)=>t[J]-t[m]);I.forEach(m=>r[m]=Math.round(t[m]/2**20)+"MB / "+G[m]);
for(I=y.length-1;0<=I;--I){const m=y[I];m&&(r["Priority "+(I+-3-1)]=Math.round(m/this.size*100)+"%")}return r};v.resetStats=function(){this._hit=this._miss=0;this._users.forAll(r=>r.resetHitRate())};v.clear=function(r){this._db.forEach((t,y)=>{y.startsWith(r)&&(this._size-=t.size,this._db.delete(y),this._notifyRemove(y,t.entry,k.RemoveMode.ALL))})};v.clearAll=function(){this._db.forEach((r,t)=>this._notifyRemove(t,r.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};v._getHitRate=function(){return this._hit/
(this._hit+this._miss)};v._notifyRemove=function(r,t,y){let G;this._removeFuncs.some(I=>r.startsWith(I[0])?(I=I[1](t,y),"number"===typeof I&&(G=I),!0):!1);return G};v._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [r,t]of this._db){this._db.delete(r);if(1>=t.lives){this._size-=t.size;const y=this._notifyRemove(r,t.entry,k.RemoveMode.SOME);Z.isSome(y)&&0<y&&(this._size+=y,t.lives=t.lifetime,t.size=y,this._db.set(r,t))}else--t.lives,this._db.set(r,t);if(this._size<=.9*this.maxSize)break}};
d._createClass(z,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(r){this._maxSize=Math.max(r,0);this._checkSizeLimit()}}]);return z}();k.MIN_PRIORITY=-3;k.MemCache=p;k.MemCacheStorage=x;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I){function m(u){const N=[];let ba=0,T=0;for(let ka=0;ka<u.length;ka++){const M=u[ka];let H=null;for(let W=0;W<M.length;W++)H=M[W],N.push(H),0===W?T=ba=H[0]:(ba=Math.min(ba,H[0]),T=Math.max(T,H[0]));H&&N.push([(ba+T)/2,0])}return N}function J(u,N){if(!(u instanceof v||u instanceof z))throw q.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Q("straightLineDensify: the input geometry is neither polyline nor polygon");var ba=r.getGeometryParts(u);
const T=[];for(const M of ba){ba=[];T.push(ba);ba.push([M[0][0],M[0][1]]);for(let H=0;H<M.length-1;H++){const W=M[H][0],V=M[H][1],K=M[H+1][0],E=M[H+1][1];var ka=Math.sqrt((K-W)*(K-W)+(E-V)*(E-V));const l=(E-V)/ka,L=(K-W)/ka,X=ka/N;if(1<X){for(let P=1;P<=X-1;P++){const ja=P*N;ba.push([L*ja+W,l*ja+V])}ka=(ka+Math.floor(X-1)*N)/2;ba.push([L*ka+W,l*ka+V])}ba.push([K,E])}}return"polygon"===u.type?new z({rings:T,spatialReference:u.spatialReference}):new v({paths:T,spatialReference:u.spatialReference})}
function c(u,N,ba){N&&(u=J(u,1E6),u=y.webMercatorToGeographic(u,!0));ba&&(u=r.updatePolyGeometry(u,ba));return u}function h(u,N,ba){if(Array.isArray(u)){var T=u[0];T>N?(ba=r.offsetMagnitude(T,N),u[0]=T+-2*ba*N):T<ba&&(N=r.offsetMagnitude(T,ba),u[0]=T+-2*N*ba)}else T=u.x,T>N?(ba=r.offsetMagnitude(T,N),u=u.clone().offset(-2*ba*N,0)):T<ba&&(N=r.offsetMagnitude(T,ba),u=u.clone().offset(-2*N*ba,0));return u}function D(u,N){let ba=-1;for(let T=0;T<N.cutIndexes.length;T++){const ka=N.cutIndexes[T],M=N.geometries[T],
H=r.getGeometryParts(M);for(let W=0;W<H.length;W++){const V=H[W];V.some(K=>{if(180>K[0])return!0;K=0;for(var E=0;E<V.length;E++){var l=V[E][0];K=l>K?l:K}K=Number(K.toFixed(9));K=-360*r.offsetMagnitude(K,180);for(E=0;E<V.length;E++)l=M.getPoint(W,E),M.setPoint(W,E,l.clone().offset(K,0));return!0})}if(ka===ba)if("polygon"===u[0].type)for(const W of r.getGeometryParts(M))u[ka]=u[ka].addRing(W);else{if("polyline"===u[0].type)for(const W of r.getGeometryParts(M))u[ka]=u[ka].addPath(W)}else ba=ka,u[ka]=
M}return u}function B(u,N,ba){return n.apply(this,arguments)}function n(){n=d._asyncToGenerator(function*(u,N,ba){var T;if(!Array.isArray(u))return B([u],N);N&&"string"!==typeof N&&q.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");N="string"===typeof N?N:null!=(T=null==N?void 0:N.url)?T:Z.geometryServiceUrl;let ka,M,H;let W=0;var V=[];T=[];for(var K of u)if(x.isNone(K))T.push(K);else{if(!E){var E=K.spatialReference;var l=t.getInfo(E);var L=(ka=E.isWebMercator)?
102100:4326;M=r.cutParams[L].maxX;H=r.cutParams[L].minX;var X=r.cutParams[L].plus180Line;L=r.cutParams[L].minus180Line}if(l)if("mesh"===K.type)T.push(K);else if("point"===K.type)T.push(h(K.clone(),M,H));else if("multipoint"===K.type){var P=K.clone();P.points=P.points.map(ja=>h(ja,M,H));T.push(P)}else if("extent"===K.type)P=K.clone()._normalize(!1,!1,l),T.push(P.rings?new z(P):P);else if(K.extent){P=K.extent;const ja=2*r.offsetMagnitude(P.xmin,H)*M;let ma=0===ja?K.clone():r.updatePolyGeometry(K.clone(),
ja);P.offset(ja,0);P.intersects(X)&&P.xmax!==M?(W=P.xmax>W?P.xmax:W,ma=c(ma,ka),V.push(ma),T.push("cut")):P.intersects(L)&&P.xmin!==H?(W=2*P.xmax*M>W?2*P.xmax*M:W,ma=c(ma,ka,360),V.push(ma),T.push("cut")):T.push(ma)}else T.push(K.clone());else T.push(K)}E=r.offsetMagnitude(W,M);l=-90;X=E;for(K=new v;0<E;)L=-180+360*E,K.addPath([[L,l],[L,-1*l]]),l*=-1,E--;if(0<V.length&&0<X){E=yield G.cut(N,V,K,ba);E=D(V,E);l=[];V=[];for(X=0;X<T.length;X++)K=T[X],"cut"!==K?V.push(K):(K=E.shift(),L=u[X],x.isSome(L)&&
"polygon"===L.type&&L.rings&&1<L.rings.length&&K.rings.length>=L.rings.length?(l.push(K),V.push("simplify")):V.push(ka?y.geographicToWebMercator(K):K));if(!l.length)return V;T=yield I.simplify(N,l,ba);u=[];for(ba=0;ba<V.length;ba++)N=V[ba],"simplify"!==N?u.push(N):u.push(ka?y.geographicToWebMercator(T.shift()):T.shift());return u}u=[];for(ba=0;ba<T.length;ba++)N=T[ba],"cut"!==N?u.push(N):(N=V.shift(),u.push(!0===ka?y.geographicToWebMercator(N):N));return u});return n.apply(this,arguments)}const q=
p.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(u){if(!u)return null;const N=u.extent;if(!N)return null;var ba=u.spatialReference&&t.getInfo(u.spatialReference);if(!ba)return N;const [T,ka]=ba.valid;({width:ba}=N);let {xmin:M,xmax:H}=N;[M,H]=[H,M];if("extent"===u.type||0===ba||ba<=ka||ba>2*ka||M<T||H>ka)return N;let W;switch(u.type){case "polygon":if(1<u.rings.length)W=m(u.rings);else return N;break;case "polyline":if(1<u.paths.length)W=m(u.paths);else return N;
break;case "multipoint":W=u.points}u=N.clone();for(let V=0;V<W.length;V++){let K=W[V][0];0>K?(K+=ka,H=Math.max(K,H)):(K-=ka,M=Math.min(K,M))}u.xmin=M;u.xmax=H;return u.width<ba?(u.xmin-=ka,u.xmax-=ka,u):N};k.normalizeCentralMeridian=B;k.normalizeMapX=function(u,N){if(N=t.getInfo(N)){const [ba,T]=N.valid;N=T-ba;if(u<ba)for(;u<ba;)u+=N;if(u>T)for(;u>T;)u-=N}return u};k.straightLineDensify=J;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports",
"../Polyline","../SpatialReference","./jsonUtils"],function(k,d,Z,Q){function p(x){return Q.isPolygon(x)?x.rings:x.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator})},4326:{maxX:180,
minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:Z.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:Z.WGS84})}};k.cutParams=d;k.getGeometryParts=p;k.offsetMagnitude=function(x,z){return Math.ceil((x-z)/(2*z))};k.updatePolyGeometry=function(x,z){const v=p(x);for(const r of v)for(const t of r)t[0]+=z;return x};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,d,Z,Q,p,x){function z(){z=d._asyncToGenerator(function*(v,r,t,y){v="string"===typeof v?p.urlToObject(v):v;const G=r[0].spatialReference;r={...y,query:{...v.query,f:"json",sr:JSON.stringify(G),target:JSON.stringify({geometryType:x.getJsonType(r[0]),geometries:r}),cutter:JSON.stringify(t)}};r=yield Q(v.path+"/cut",r);const {cutIndexes:I,geometries:m=[]}=r.data;return{cutIndexes:I,geometries:m.map(J=>{J=x.fromJSON(J);J.spatialReference=G;return J})}});return z.apply(this,arguments)}k.cut=
function(v,r,t,y){return z.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,d,Z,Q,p){function x(){x=d._asyncToGenerator(function*(r,t,y){const G="string"===typeof r?Q.urlToObject(r):r;r=t[0].spatialReference;const I=p.getJsonType(t[0]);t={...y,query:{...G.query,
f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),geometries:JSON.stringify(z(t))}};t=yield Z(G.path+"/simplify",t);return v(t.data,I,r)});return x.apply(this,arguments)}function z(r){return{geometryType:p.getJsonType(r[0]),geometries:r.map(t=>t.toJSON())}}function v(r,t,y){const G=p.getGeometryType(t);return r.map(I=>{I=G.fromJSON(I);I.spatialReference=y;return I})}k.simplify=function(r,t,y){return x.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,d,Z){function Q(r,t){return r?z.get(r,t):null}function p(r,t,y,G=!0){const I=[];for(const m of t)if("*"!==m&&!r.has(m))if(G){t=x(m);try{const J=Q(t,r);if(!J)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!J.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:J});p(r,J.fieldNames,
"expression contains missing fields")}catch(J){if((t=J&&J.details)&&(t.clause||t.where))throw J;t&&t.missingFields?I.push(...t.missingFields):I.push(m)}}else I.push(m);if(I.length)throw new d("feature-store:unsupported-query",y,{missingFields:I});}function x(r){return r.split(" as ")[0]}const z=new Z.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=
function(r){return r.split(" as ")[1]};k.getExpressionFromFieldName=x;k.getWhereClause=Q;k.hasInvalidFieldType=function(r,t){return(r=t.get(r))?!v.has(r.type):!1};k.validateFields=p;k.validateHaving=function(r,t,y){if(!t)return!0;const G=z.get(t,r);if(!G)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:t});if(!G.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:t});p(r,G.fieldNames,"having contains missing fields");
if(!G.getExpressions().every(I=>{const {aggregateType:m,field:J}=I,c=r.has(J)&&r.get(J).name;return y.some(h=>{const {onStatisticField:D,statisticType:B}=h;return(r.has(D)&&r.get(D).name)===c&&B.toLowerCase().trim()===m})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:t});return!0};k.validateWhere=function(r,t){if(!t)return!0;const y=z.get(t,r);if(!y)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:t});
if(!y.isStandardized)throw new d("feature-store:unsupported-query","where clause is not standard",{where:t});p(r,y.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,d,Z){let Q=function(){function p(x,z){this._cache=new d(x);this._invalidCache=new d(z)}p.prototype.get=function(x,z){const v=`${z.uid}:${x}`,
r=this._cache.get(v);if(r)return r;if(void 0!==this._invalidCache.get(v))return null;try{const t=Z.WhereClause.create(x,z);this._cache.put(v,t);return t}catch{return this._invalidCache.put(v,null),null}};return p}();k.WhereClauseCache=Q;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function d(Q,p){this._storage=new k.MemCacheStorage;this._storage.maxSize=Q;p&&this._storage.registerRemoveFunc("",
p)}var Z=d.prototype;Z.put=function(Q,p){this._storage.put(Q,p,1,1)};Z.pop=function(Q){return this._storage.pop(Q)};Z.get=function(Q){return this._storage.get(Q)};Z.clear=function(){this._storage.clearAll()};Z.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,d,Z,Q,p,x){function z(K,E){K+="";return K.length>=
E?K:Array(E-K.length+1).join("0")+K}function v(K,E,l="0",L="0",X="0",P="0",ja="",ma="0",R="0"){return"+"===ja||"-"===ja?(K=`${z(parseInt(K,10),4)}-${z(parseInt(E,10),2)}-${z(parseInt(l,10),2)}`,E="",10>parseFloat(P)&&(E="0"),L=`${z(parseInt(L,10),2)}:${z(parseInt(X,10),2)}:${E+parseFloat(P).toString()}`,ja=`${ja}${z(parseInt(ma,10),2)}:${z(parseInt(R,10),2)}`,new Date(K+"T"+L+ja)):new Date(parseInt(K,10),parseInt(E,10)-1,parseInt(l,10),parseInt(L,10),parseInt(X,10),parseFloat(P))}function r(K){let E=
u.exec(K);if(null!==E){const [,l,L,X,P,ja,ma]=E;return v(l,L,X,P,ja,ma)}E=N.exec(K);if(null!==E){const [,l,L,X,P,ja,ma,R,na,oa]=E;return v(l,L,X,P,ja,ma,R,na,oa)}E=ba.exec(K);if(null!==E){const [,l,L,X,P,ja,ma,R,na]=E;return v(l,L,X,P,ja,"0",ma,R,na)}E=T.exec(K);if(null!==E){const [,l,L,X,P,ja]=E;return v(l,L,X,P,ja)}E=q.exec(K);if(null!==E){const [,l,L,X]=E;return v(l,L,X)}throw Error("SQL Invalid Timestamp");}function t(K){K=q.exec(K);if(null===K)throw Error("SQL Invalid Date");const [,E,l,L]=K;
return new Date(parseInt(E,10),parseInt(l,10)-1,parseInt(L,10))}function y(K){return Array.isArray(K)?K:[K]}function G(K){return null!==K?!0!==K:null}function I(K,E){return null!=K&&null!=E?!0===K&&!0===E:!1===K||!1===E?!1:null}function m(K,E){return null!=K&&null!=E?!0===K||!0===E:!0===K||!0===E?!0:null}function J(K,E){if(null==K)return null;let l=!1;for(const L of E)if(null==L)l=null;else if(K===L){l=!0;break}return l}function c(K,E,l){if(null==K)return null;{let L="",X=W.Normal;for(let P=0;P<E.length;P++){const ja=
E.charAt(P);switch(X){case W.Normal:ja===l?X=W.Escaped:L="-[]/{}()*+?.\\^$|".includes(ja)?L+("\\"+ja):"%"===ja?L+".*":"_"===ja?L+".":L+ja;break;case W.Escaped:L="-[]/{}()*+?.\\^$|".includes(ja)?L+("\\"+ja):L+ja,X=W.Normal}}E=new RegExp("^"+L+"$","m")}return E.test(K)}function h(K){return K instanceof Date?K.valueOf():K}function D(K,E,l){if(null==E||null==l)return null;E=h(E);l=h(l);switch(K){case "\x3c\x3e":return E!==l;case "\x3d":return E===l;case "\x3e":return E>l;case "\x3c":return E<l;case "\x3e\x3d":return E>=
l;case "\x3c\x3d":return E<=l}}function B(K,E,l){if(E instanceof p.SqlInterval)if(l instanceof Date)switch(K){case "+":return new Date(E.valueInMilliseconds()+l.getTime());case "-":return E.valueInMilliseconds()-l.getTime();case "*":return E.valueInMilliseconds()*l.getTime();case "/":return E.valueInMilliseconds()/l.getTime()}else if(l instanceof p.SqlInterval)switch(K){case "+":return p.SqlInterval.createFromMilliseconds(E.valueInMilliseconds()+l.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(E.valueInMilliseconds()-
l.valueInMilliseconds());case "*":return E.valueInMilliseconds()*l.valueInMilliseconds();case "/":return E.valueInMilliseconds()/l.valueInMilliseconds()}else E=E.valueInMilliseconds();else if(l instanceof p.SqlInterval)if(E instanceof Date)switch(K){case "+":return new Date(l.valueInMilliseconds()+E.getTime());case "-":return new Date(E.getTime()-l.valueInMilliseconds());case "*":return E.getTime()*l.valueInMilliseconds();case "/":return E.getTime()/l.valueInMilliseconds()}else l=l.valueInMilliseconds();
else if(E instanceof Date&&"number"===typeof l)switch(l*=864E5,E=E.getTime(),K){case "+":return new Date(E+l);case "-":return new Date(E-l);case "*":return new Date(E*l);case "/":return new Date(E/l)}else if(l instanceof Date&&"number"===typeof E)switch(E*=864E5,l=l.getTime(),K){case "+":return new Date(E+l);case "-":return new Date(E-l);case "*":return new Date(E*l);case "/":return new Date(E/l)}switch(K){case "+":return E+l;case "-":return E-l;case "*":return E*l;case "/":return E/l}}function n(K,
E,l,L){K=L.getAttribute(K,E);return null!=K&&1===l[E]?new Date(K):K}const q=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,ba=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,T=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ka=new Set(["current_timestamp","current_date","current_time"]);let M=function(){function K(){}
K.makeBool=function(E){return!0===E};K.featureValue=function(E,l,L,X){return n(E,l,L,X)};K.equalsNull=function(E){return null===E};K.applyLike=function(E,l,L){return c(E,l,L)};K.ensureArray=function(E){return y(E)};K.applyIn=function(E,l){return J(E,l)};K.currentDate=function(){const E=new Date;E.setHours(0,0,0,0);return E};K.makeSqlInterval=function(E,l,L){return p.SqlInterval.createFromValueAndQualifer(E,l,L)};K.convertInterval=function(E){return E instanceof p.SqlInterval?E.valueInMilliseconds():
E};K.currentTimestamp=function(){return new Date};K.compare=function(E,l,L){return D(E,l,L)};K.calculate=function(E,l,L){return B(E,l,L)};K.makeComparable=function(E){return h(E)};K.evaluateFunction=function(E,l){return p.evaluateFunction(E,l)};K.lookup=function(E,l){E=l[E];return void 0===E?null:E};K.between=function(E,l){return null==E||null==l[0]||null==l[1]?null:E>=l[0]&&E<=l[1]};K.notbetween=function(E,l){return null==E||null==l[0]||null==l[1]?null:E<l[0]||E>l[1]};K.ternaryNot=function(E){return G(E)};
K.ternaryAnd=function(E,l){return I(E,l)};K.ternaryOr=function(E,l){return m(E,l)};return K}(),H=function(){function K(l,L){this.fieldsIndex=L;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=x.WhereGrammar.parse(l);const {isStandardized:X,isAggregate:P,referencedFieldNames:ja}=this._extractExpressionInfo(L);this.referencedFieldNames=ja;this.isStandardized=X;this.isAggregate=P}K.create=function(l,L){return new K(l,L)};var E=K.prototype;E.testSet=function(l,L=V){const X=
{};for(const P of this.fieldNames)X[P]=l.map(ja=>L.getAttribute(ja,P));return!!this._evaluateNode(this.parseTree,{attributes:X},V)};E.calculateValue=function(l,L=V){l=this._evaluateNode(this.parseTree,l,L);return l instanceof p.SqlInterval?l.valueInMilliseconds()/864E5:l};E.calculateValueCompiled=function(l,L=V){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,L,this.datefields);if(Z("esri-csp-restrictions"))return this.calculateValue(l,L);this._compileMe();
return this.parseTree._compiledVersion(l,this.parameters,L,this.datefields)};E.testFeature=function(l,L=V){return!!this._evaluateNode(this.parseTree,l,L)};E.testFeatureCompiled=function(l,L=V){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,L,this.datefields);if(Z("esri-csp-restrictions"))return this.testFeature(l,L);this._compileMe();return!!this.parseTree._compiledVersion(l,this.parameters,L,this.datefields)};E.getFunctions=function(){const l=new Set;
this._visitAll(this.parseTree,L=>{"function"===L.type&&l.add(L.name.toLowerCase())});return Array.from(l)};E.getExpressions=function(){const l=new Map;this._visitAll(this.parseTree,L=>{if("function"===L.type){const X=L.name.toLowerCase();L=L.args.value[0];if("column-reference"===L.type){L=L.column;const P=`${X}-${L}`;l.has(P)||l.set(P,{aggregateType:X,field:L})}}});return[...l.values()]};E.getVariables=function(){const l=new Set;this._visitAll(this.parseTree,L=>{"parameter"===L.type&&l.add(L.value.toLowerCase())});
return Array.from(l)};E._compileMe=function(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",l)).bind(M)};E._extractExpressionInfo=function(l){const L=[],X=new Set;let P=!0,ja=!0;this._visitAll(this.parseTree,ma=>{switch(ma.type){case "column-reference":{const R=l.get(ma.column);let na,oa;R?na=oa=R.name:(oa=ma.column,na=oa.toLowerCase());!R||"date"!==R.type&&
"esriFieldTypeDate"!==R.type||(this.datefields[R.name]=1);X.has(na)||(X.add(na),L.push(oa));ma.column=oa;break}case "function":{const {name:R,args:na}=ma;ma=na.value.length;P&&(P=p.isStandardized(R,ma));ja&&(ja=Q.isAggregate(R,ma))}}});return{referencedFieldNames:Array.from(L),isStandardized:P,isAggregate:ja}};E._visitAll=function(l,L){if(null!=l)switch(L(l),l.type){case "when-clause":this._visitAll(l.operand,L);this._visitAll(l.value,L);break;case "case-expression":for(const X of l.clauses)this._visitAll(X,
L);"simple"===l.format&&this._visitAll(l.operand,L);null!==l.else&&this._visitAll(l.else,L);break;case "expression-list":for(const X of l.value)this._visitAll(X,L);break;case "unary-expression":this._visitAll(l.expr,L);break;case "binary-expression":this._visitAll(l.left,L);this._visitAll(l.right,L);break;case "function":this._visitAll(l.args,L)}};E.evaluateNodeToJavaScript=function(l){switch(l.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+
","+JSON.stringify(l.op)+")";case "case-expression":var L="";if("simple"===l.format){var X="this.makeComparable("+this.evaluateNodeToJavaScript(l.operand)+")";L="( ";for(let P=0;P<l.clauses.length;P++)L+=" ("+X+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(l.clauses[P].operand)+")) ? ("+this.evaluateNodeToJavaScript(l.clauses[P].value)+") : "}else for(L="( ",X=0;X<l.clauses.length;X++)L+=" this.makeBool("+this.evaluateNodeToJavaScript(l.clauses[X].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(l.clauses[X].value)+") : ";L=null!==l.else?L+this.evaluateNodeToJavaScript(l.else):L+"null";return L+=" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":L="[";for(X of l.value)"["!==L&&(L+=","),L+=this.evaluateNodeToJavaScript(X);return L+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+
this.evaluateNodeToJavaScript(l.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")"}throw Error("Not Supported Operator "+l.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "date":return"(new Date("+t(l.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(l.value).getTime().toString()+"))";case "current-time":return"date"===
l.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+")"}throw Error("Unsupported sql syntax "+l.type);};E._evaluateNode=function(l,L,X){switch(l.type){case "interval":return L=this._evaluateNode(l.value,L,X),p.SqlInterval.createFromValueAndQualifer(L,l.qualifier,l.op);case "case-expression":if("simple"===
l.format){var P=h(this._evaluateNode(l.operand,L,X));for(var ja=0;ja<l.clauses.length;ja++)if(P===h(this._evaluateNode(l.clauses[ja].operand,L,X)))return this._evaluateNode(l.clauses[ja].value,L,X)}else for(P=0;P<l.clauses.length;P++)if(!0===this._evaluateNode(l.clauses[P].operand,L,X))return this._evaluateNode(l.clauses[P].value,L,X);return null!==l.else?this._evaluateNode(l.else,L,X):null;case "parameter":return this.parameters[l.value.toLowerCase()];case "expression-list":P=[];for(ja of l.value)P.push(this._evaluateNode(ja,
L,X));return P;case "unary-expression":return G(this._evaluateNode(l.expr,L,X));case "binary-expression":switch(l.operator){case "AND":return I(this._evaluateNode(l.left,L,X),this._evaluateNode(l.right,L,X));case "OR":return m(this._evaluateNode(l.left,L,X),this._evaluateNode(l.right,L,X));case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(l.left,L,X);case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(l.left,
L,X);case "IN":return P=y(this._evaluateNode(l.right,L,X)),J(this._evaluateNode(l.left,L,X),P);case "NOT IN":return P=y(this._evaluateNode(l.right,L,X)),G(J(this._evaluateNode(l.left,L,X),P));case "BETWEEN":return P=this._evaluateNode(l.left,L,X),l=this._evaluateNode(l.right,L,X),null==P||null==l[0]||null==l[1]?null:P>=h(l[0])&&P<=h(l[1]);case "NOTBETWEEN":return P=this._evaluateNode(l.left,L,X),l=this._evaluateNode(l.right,L,X),null==P||null==l[0]||null==l[1]?null:P<h(l[0])||P>h(l[1]);case "LIKE":return c(this._evaluateNode(l.left,
L,X),this._evaluateNode(l.right,L,X),l.escape);case "NOT LIKE":return G(c(this._evaluateNode(l.left,L,X),this._evaluateNode(l.right,L,X),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return D(l.operator,this._evaluateNode(l.left,L,X),this._evaluateNode(l.right,L,X));case "-":case "+":case "*":case "/":return B(l.operator,this._evaluateNode(l.left,L,X),this._evaluateNode(l.right,L,X))}case "null":case "boolean":case "string":case "number":return l.value;
case "date":return t(l.value);case "timestamp":return r(l.value);case "current-time":return L=new Date,"date"===l.mode&&L.setHours(0,0,0,0),L;case "column-reference":return n(L,l.column,this.datefields,X);case "function":return L=this._evaluateNode(l.args,L,X),this.isAggregate?Q.aggregateFunction(l.name,L):p.evaluateFunction(l.name,L)}throw Error("Unsupported sql syntax "+l.type);};d._createClass(K,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||ka.has(l.name.toLowerCase()))});return this._hasDateFunctions}}]);return K}();var W;(function(K){K[K.Normal=0]="Normal";K[K.Escaped=1]="Escaped"})(W||(W={}));const V={getAttribute(K,E){return(K&&"object"===typeof K.attributes?K.attributes:K)[E]}};k.WhereClause=H;k.defaultAttributeAdapter=
V;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function d(p){let x=0;for(let z=0;z<p.length;z++)x+=p[z];return x/p.length}function Z(p){const x=d(p),z=p.length;let v=0;for(const r of p)v+=(r-x)**2;return 1<z?v/(z-1):0}const Q={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,
p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:d(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let x=0;for(let z=0;z<p.length;z++)x+=p[z];p=x}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(Z(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Z(p[0])}};k.aggregateFunction=function(p,x){const z=Q[p.toLowerCase()];if(null==z)throw Error("Function Not Recognised");
if(x.length<z.minParams||x.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return z.evaluate(x)};k.isAggregate=function(p,x){p=Q[p.toLowerCase()];return null!=p&&x>=p.minParams&&x<=p.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,d){let Z=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}p._fixDefaults=function(x){if(null!==x.precision||null!==x.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=function(x){const z=new p;z.second=x/1E3;return z};p.createFromValueAndQualifer=function(x,z,v){let r=null;const t=new p;t.op="-"===v?"-":"+";if("interval-period"===z.type){p._fixDefaults(z);if("year"===z.period||"month"===z.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(x))t[z.period]=
parseFloat(x);else throw Error("Illegal Interval");}else{p._fixDefaults(z.start);p._fixDefaults(z.end);if("year"===z.start.period||"month"===z.start.period)throw Error("Year-Month Intervals not supported");if("year"===z.end.period||"month"===z.end.period)throw Error("Year-Month Intervals not supported");switch(z.start.period){case "day":switch(z.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(x))t[z.start.period]=parseFloat(x.split(" ")[0]),t[z.end.period]=parseFloat(x.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(x))t[z.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),t.hour=parseFloat(x[0]),t.minute=parseFloat(x[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(x))t[z.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),t.hour=parseFloat(x[0]),t.minute=parseFloat(x[1]),t.second=
parseFloat(x[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(z.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(x))t.hour=parseFloat(x.split(":")[0]),t.minute=parseFloat(x.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(x))x=x.split(":"),t.hour=parseFloat(x[0]),t.minute=parseFloat(x[1]),t.second=parseFloat(x[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(z.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(x))x=x.split(":"),t.minute=parseFloat(x[0]),t.second=parseFloat(x[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return t};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+
365/12*this.month*864E5+31536E6*this.year)};return p}();const Q={extract:{minParams:2,maxParams:2,evaluate:([p,x])=>{if(null==x)return null;if(x instanceof Date)switch(p.toUpperCase()){case "SECOND":return x.getSeconds();case "MINUTE":return x.getMinutes();case "HOUR":return x.getHours();case "DAY":return x.getDate();case "MONTH":return x.getMonth()+1;case "YEAR":return x.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [x,
z]=p;return null==x||null==z?null:x.toString().substring(z-1)}if(3===p.length){const [x,z,v]=p;return null==x||null==z||null==v?null:0>=v?"":x.toString().substring(z-1,z+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,x])=>null==p||null==x?null:x.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var x=3===p.length,z=x?p[1]:" ";x=x?p[2]:p[1];if(null==z||null==x)return null;z=`(${d.escapeRegExpString(z)})`;switch(p[0]){case "BOTH":return x.replace(new RegExp(`^${z}*|${z}*$`,"g"),"");case "LEADING":return x.replace(new RegExp(`^${z}*`,
"g"),"");case "TRAILING":return x.replace(new RegExp(`${z}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:
0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,maxParams:2,evaluate:p=>{const x=p[0];p=2===p.length?10**p[1]:1;return null==x?null:Math.round(x*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===
typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let x="";for(let z=0;z<p.length;z++){if(null==p[z])return null;x+=p[z].toString()}return x}},lower:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};k.SqlInterval=Z;k.evaluateFunction=function(p,x){const z=Q[p.toLowerCase()];if(null==z)throw Error("Function Not Recognised");
if(x.length<z.minParams||x.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return z.evaluate(x)};k.isStandardized=function(p,x){p=Q[p.toLowerCase()];return null!=p&&x>=p.minParams&&x<=p.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,d){var Z={exports:{}};(function(p){(function(x,z){p.exports&&(p.exports=
z())})(d.commonjsGlobal,function(){function x(v,r,t,y){v=Error.call(this,v);Object.setPrototypeOf&&Object.setPrototypeOf(v,x.prototype);v.expected=r;v.found=t;v.location=y;v.name="SyntaxError";return v}function z(v,r,t){t=t||" ";if(v.length>r)return v;r-=v.length;t+=t.repeat(r);return v+t.slice(0,r)}(function(v,r){function t(){this.constructor=v}t.prototype=r.prototype;v.prototype=new t})(x,Error);x.prototype.format=function(v){var r="Error: "+this.message;if(this.location){var t=null,y;for(y=0;y<
v.length;y++)if(v[y].source===this.location.source){t=v[y].text.split(/\r\n|\n|\r/g);break}v=this.location.start;y=this.location.source+":"+v.line+":"+v.column;if(t){var G=this.location.end,I=z("",v.line.toString().length);t=t[v.line-1];G=v.line===G.line?G.column:t.length+1;r+="\n --\x3e "+y+"\n"+I+" |\n"+v.line+" | "+t+"\n"+I+" | "+z("",v.column-1)+z("",G-v.column,"^")}else r+="\n at "+y}return r};x.buildMessage=function(v,r){function t(J){return J.charCodeAt(0).toString(16).toUpperCase()}function y(J){return J.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+t(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+t(c)})}function G(J){return J.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+t(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(c){return"\\x"+t(c)})}function I(J){return m[J.type](J)}var m={literal:function(J){return'"'+y(J.text)+'"'},class:function(J){var c=J.parts.map(function(h){return Array.isArray(h)?G(h[0])+"-"+G(h[1]):G(h)});return"["+(J.inverted?"^":"")+c+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(J){return J.description}};return"Expected "+function(J){J=J.map(I);var c,h;J.sort();if(0<J.length){for(h=c=1;c<J.length;c++)J[c-1]!==J[c]&&(J[h]=J[c],h++);J.length=
h}switch(J.length){case 1:return J[0];case 2:return J[0]+" or "+J[1];default:return J.slice(0,-1).join(", ")+", or "+J[J.length-1]}}(v)+" but "+(r?'"'+y(r)+'"':"end of input")+" found."};return{SyntaxError:x,parse:function(v,r){function t(w,C){return{type:"literal",text:w,ignoreCase:C}}function y(w,C,ca){return{type:"class",parts:w,inverted:C,ignoreCase:ca}}function G(w){var C=fc[w],ca;if(!C){for(ca=w-1;!fc[ca];)ca--;C=fc[ca];for(C={line:C.line,column:C.column};ca<w;)10===v.charCodeAt(ca)?(C.line++,
C.column=1):C.column++,ca++;fc[w]=C}return C}function I(w,C){var ca=G(w),ua=G(C);return{source:bb,start:{offset:w,line:ca.line,column:ca.column},end:{offset:C,line:ua.line,column:ua.column}}}function m(w){f<tb||(f>tb&&(tb=f,zc=[]),zc.push(w))}function J(){var w=f;ta();var C=h();C!==b?(ta(),w=C):(f=w,w=b);return w}function c(){var w=f;var C=h();if(C!==b){w=[];var ca=f;var ua=ta();var Da=Ga();if(Da!==b){var Oa=ta();var Qa=h();Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)w.push(ca),
ca=f,ua=ta(),Da=Ga(),Da!==b?(Oa=ta(),Qa=h(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);ca={type:"expression-list"};C=[C];for(ua=0;ua<w.length;ua++)C.push(w[ua][3]);ca.value=C;w=ca}else f=w,w=b;return w}function h(){var w=f;var C=D();if(C!==b){w=[];var ca=f;var ua=ta();var Da=S();if(Da!==b){var Oa=ta();var Qa=D();Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)w.push(ca),ca=f,ua=ta(),Da=S(),Da!==b?(Oa=ta(),Qa=D(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);w=Za(C,
w)}else f=w,w=b;return w}function D(){var w=f;var C=B();if(C!==b){w=[];var ca=f;var ua=ta();var Da=A();if(Da!==b){var Oa=ta();var Qa=B();Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)w.push(ca),ca=f,ua=ta(),Da=A(),Da!==b?(Oa=ta(),Qa=B(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);w=Za(C,w)}else f=w,w=b;return w}function B(){var w=f;var C=e();if(C===b){C=f;if(33===v.charCodeAt(f)){var ca=qb;f++}else ca=b,0===va&&m(rd);if(ca!==b){var ua=f;va++;if(61===v.charCodeAt(f)){var Da=
Cb;f++}else Da=b,0===va&&m(Pc);va--;Da===b?ua=void 0:(f=ua,ua=b);ua!==b?C=ca=[ca,ua]:(f=C,C=b)}else f=C,C=b}C!==b?(ca=ta(),ua=B(),ua!==b?w={type:"unary-expression",operator:"NOT",expr:ua}:(f=w,w=b)):(f=w,w=b);if(w===b){C=f;w=N();if(w!==b){ta();C=[];ca=f;ua=ta();Da=n();if(Da!==b){var Oa=ta();var Qa=N();Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=b;if(ca!==b)for(;ca!==b;)C.push(ca),ca=f,ua=ta(),Da=n(),Da!==b?(Oa=ta(),Qa=N(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);else C=b;C!==b&&
(C={type:"arithmetic",tail:C});C===b&&(C=f,ca=u(),ca!==b?(ta(),ua=Ha(),ua!==b?(ta(),ua=c(),ua!==b?(ta(),Da=Ra(),Da!==b?C={op:ca,right:ua}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b)):(f=C,C=b),C===b&&(C=f,ca=u(),ca!==b?(ta(),ua=Ha(),ua!==b?(ta(),ua=Ra(),ua!==b?C={op:ca,right:{type:"expression-list",value:[]}}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b),C===b&&(C=f,ca=u(),ca!==b?(ta(),ua=E(),ua!==b?C={op:ca,right:ua}:(f=C,C=b)):(f=C,C=b))),C===b&&(C=f,Da=e(),Da!==b?(ta(),ca=U(),ca!==b?(ta(),ua=N(),ua!==b?(ta(),Oa=A(),Oa!==
b?(ta(),Da=N(),Da!==b?C={op:"NOT"+ca,right:{type:"expression-list",value:[ua,Da]}}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b)):(f=C,C=b)):(f=C,C=b),C===b&&(C=f,Da=U(),Da!==b?(ta(),ca=N(),ca!==b?(ta(),ua=A(),ua!==b?(ta(),Oa=N(),Oa!==b?C={op:Da,right:{type:"expression-list",value:[ca,Oa]}}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b)):(f=C,C=b)),C===b&&(C=f,ca=g(),ca!==b?(ta(),ua=e(),ua!==b?(ta(),ua=N(),ua!==b?C={op:ca+"NOT",right:ua}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b),C===b&&(C=f,ca=g(),ca!==b?(ta(),ua=N(),ua!==b?C={op:ca,right:ua}:
(f=C,C=b)):(f=C,C=b)),C===b&&(C=f,ca=q(),ca!==b?(ta(),ua=ma(),ua!==b?(ta(),Da=f,v.substr(f,6).toLowerCase()===za?(Oa=v.substr(f,6),f+=6):(Oa=b,0===va&&m(sd)),Oa!==b?(Oa=f,va++,Qa=V(),va--,Qa===b?Oa=void 0:(f=Oa,Oa=b),Oa!==b?Da="ESCAPE":(f=Da,Da=b)):(f=Da,Da=b),Da!==b?(ta(),Da=R(),Da!==b?C={op:ca,right:ua,escape:Da.value}:(f=C,C=b)):(f=C,C=b)):(f=C,C=b)):(f=C,C=b),C===b&&(C=f,ca=q(),ca!==b?(ta(),ua=ma(),ua!==b?C={op:ca,right:ua,escape:""}:(f=C,C=b)):(f=C,C=b))))));C===b&&(C=null);""==C||void 0==C||
null==C?C=w:(ca=null,C=ca="arithmetic"==C.type?Za(w,C.tail):ab(C.op,w,C.right,C.escape))}else f=C,C=b;w=C}return w}function n(){if(v.substr(f,2)===Tb){var w=Tb;f+=2}else w=b,0===va&&m(td);w===b&&(62===v.charCodeAt(f)?(w=Fb,f++):(w=b,0===va&&m(ud)),w===b&&(v.substr(f,2)===la?(w=la,f+=2):(w=b,0===va&&m(vd)),w===b&&(v.substr(f,2)===Vb?(w=Vb,f+=2):(w=b,0===va&&m(wd)),w===b&&(60===v.charCodeAt(f)?(w=Db,f++):(w=b,0===va&&m(xd)),w===b&&(61===v.charCodeAt(f)?(w=Cb,f++):(w=b,0===va&&m(Pc)),w===b&&(v.substr(f,
2)===gb?(w=gb,f+=2):(w=b,0===va&&m(yd))))))));return w}function q(){var w=w=f;var C=e();if(C!==b){var ca=ta();var ua=aa();ua!==b?w=C=[C,ca,ua]:(f=w,w=b)}else f=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=aa());return w}function u(){var w=w=f;var C=e();if(C!==b){var ca=ta();var ua=a();ua!==b?w=C=[C,ca,ua]:(f=w,w=b)}else f=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=a());return w}function N(){var w=f;var C=T();if(C!==b){w=[];var ca=f;var ua=ta();var Da=ba();if(Da!==b){var Oa=ta();var Qa=T();Qa!==b?ca=ua=
[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)w.push(ca),ca=f,ua=ta(),Da=ba(),Da!==b?(Oa=ta(),Qa=T(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);w=Za(C,w)}else f=w,w=b;return w}function ba(){if(43===v.charCodeAt(f)){var w=rb;f++}else w=b,0===va&&m(Ac);w===b&&(45===v.charCodeAt(f)?(w=Gb,f++):(w=b,0===va&&m(Bc)));return w}function T(){var w=f;var C=M();if(C!==b){w=[];var ca=f;var ua=ta();var Da=ka();if(Da!==b){var Oa=ta();var Qa=M();Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)}else f=ca,ca=
b;for(;ca!==b;)w.push(ca),ca=f,ua=ta(),Da=ka(),Da!==b?(Oa=ta(),Qa=M(),Qa!==b?ca=ua=[ua,Da,Oa,Qa]:(f=ca,ca=b)):(f=ca,ca=b);w=Za(C,w)}else f=w,w=b;return w}function ka(){if(42===v.charCodeAt(f)){var w=Ub;f++}else w=b,0===va&&m(zd);w===b&&(47===v.charCodeAt(f)?(w=yc,f++):(w=b,0===va&&m(Ad)));return w}function M(){var w=R();if(w===b){var C=f;var ca=f;var ua=xa();if(ua!==b){var Da=Na();if(Da!==b){var Oa=Ja();Oa!==b?ca=parseFloat(ua+Da+Oa):(f=ca,ca=b)}else f=ca,ca=b}else f=ca,ca=b;ca===b&&(ca=f,ua=xa(),
ua!==b?(Da=Na(),Da!==b?ca=parseFloat(ua+Da):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ua=xa(),ua!==b?(Da=Ja(),Da!==b?ca=parseFloat(ua+Da):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ua=xa(),ua!==b&&(ua=parseFloat(ua)),ca=ua)));var Qa=ca;if(Qa!==b){var gc=f;va++;var Bd=W();va--;Bd===b?gc=void 0:(f=gc,gc=b);gc!==b?C={type:"number",value:Qa}:(f=C,C=b)}else f=C,C=b;w=C;if(w===b){var Wb=f;var Ib=f;if(v.substr(f,4).toLowerCase()===Hb){var hc=v.substr(f,4);f+=4}else hc=b,0===va&&m(Cd);if(hc!==b){var Xb=f;va++;var Dd=
V();va--;Dd===b?Xb=void 0:(f=Xb,Xb=b);Xb!==b?Ib=hc=[hc,Xb]:(f=Ib,Ib=b)}else f=Ib,Ib=b;var Eb=Ib;Eb!==b&&(Eb={type:"boolean",value:!0});Wb=Eb;if(Wb===b){Wb=f;var Jb=f;if(v.substr(f,5).toLowerCase()===Y){var ic=v.substr(f,5);f+=5}else ic=b,0===va&&m(Ed);if(ic!==b){var Yb=f;va++;var Fd=V();va--;Fd===b?Yb=void 0:(f=Yb,Yb=b);Yb!==b?Jb=ic=[ic,Yb]:(f=Jb,Jb=b)}else f=Jb,Jb=b;Eb=Jb;Eb!==b&&(Eb={type:"boolean",value:!1});Wb=Eb}w=Wb;if(w===b){var Kb=f;if(v.substr(f,4).toLowerCase()===Pa){var jc=v.substr(f,4);
f+=4}else jc=b,0===va&&m(Gd);if(jc!==b){var Zb=f;va++;var Hd=V();va--;Hd===b?Zb=void 0:(f=Zb,Zb=b);Zb!==b?Kb=jc=[jc,Zb]:(f=Kb,Kb=b)}else f=Kb,Kb=b;var Cc=Kb;Cc!==b&&(Cc={type:"null",value:null});w=Cc;if(w===b){var Lb=f;var Mb=f;if(v.substr(f,4).toLowerCase()===Id){var Qc=v.substr(f,4);f+=4}else Qc=b,0===va&&m(Jd);if(Qc!==b){var kc=f;va++;var Kd=V();va--;Kd===b?kc=void 0:(f=kc,kc=b);kc!==b?Mb="DATE":(f=Mb,Mb=b)}else f=Mb,Mb=b;if(Mb!==b){ta();var Rc=ma();Rc!==b?Lb={type:"date",value:Rc.value}:(f=Lb,
Lb=b)}else f=Lb,Lb=b;w=Lb;if(w===b){var Nb=f;var Ob=f;if(v.substr(f,9).toLowerCase()===Ld){var Sc=v.substr(f,9);f+=9}else Sc=b,0===va&&m(Md);if(Sc!==b){var lc=f;va++;var Nd=V();va--;Nd===b?lc=void 0:(f=lc,lc=b);lc!==b?Ob="TIMESTAMP":(f=Ob,Ob=b)}else f=Ob,Ob=b;if(Ob!==b){ta();var Tc=ma();Tc!==b?Nb={type:"timestamp",value:Tc.value}:(f=Nb,Nb=b)}else f=Nb,Nb=b;w=Nb;if(w===b){var db=f;var Dc=F();if(Dc!==b){ta();if(45===v.charCodeAt(f)){var xb=Gb;f++}else xb=b,0===va&&m(Bc);xb===b&&(43===v.charCodeAt(f)?
(xb=rb,f++):(xb=b,0===va&&m(Ac)));if(xb!==b){ta();var $b=ma();if($b!==b){ta();var Uc=L();Uc!==b?db={type:"interval",value:$b,qualifier:Uc,op:xb}:(f=db,db=b)}else f=db,db=b}else f=db,db=b}else f=db,db=b;db===b&&(db=f,Dc=F(),Dc!==b?(ta(),xb=ma(),xb!==b?(ta(),$b=L(),$b!==b?db={type:"interval",value:xb,qualifier:$b,op:""}:(f=db,db=b)):(f=db,db=b)):(f=db,db=b));w=db}}}}}}var Xa=w;if(Xa===b){var ib=f;var Pb=f;if(v.substr(f,7).toLowerCase()===nb){var Vc=v.substr(f,7);f+=7}else Vc=b,0===va&&m(Od);if(Vc!==
b){var mc=f;va++;var Pd=V();va--;Pd===b?mc=void 0:(f=mc,mc=b);mc!==b?Pb="EXTRACT":(f=Pb,Pb=b)}else f=Pb,Pb=b;if(Pb!==b){ta();var Qd=Ha();if(Qd!==b){ta();var ob=O();ob===b&&(ob=ea(),ob===b&&(ob=ra(),ob===b&&(ob=sa(),ob===b&&(ob=ya(),ob===b&&(ob=Ba())))));var Wc=ob;if(Wc!==b){ta();var Rd=ia();if(Rd!==b){ta();var Xc=h();if(Xc!==b){ta();var Sd=Ra();Sd!==b?ib={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Wc},Xc]}}:(f=ib,ib=b)}else f=ib,ib=b}else f=ib,ib=b}else f=
ib,ib=b}else f=ib,ib=b}else f=ib,ib=b;Xa=ib;if(Xa===b){var jb=f;var Qb=f;if(v.substr(f,9).toLowerCase()===cb){var Yc=v.substr(f,9);f+=9}else Yc=b,0===va&&m(Td);if(Yc!==b){var nc=f;va++;var Ud=V();va--;Ud===b?nc=void 0:(f=nc,nc=b);nc!==b?Qb="SUBSTRING":(f=Qb,Qb=b)}else f=Qb,Qb=b;if(Qb!==b){ta();var Vd=Ha();if(Vd!==b){ta();var Ec=h();if(Ec!==b){ta();var Wd=ia();if(Wd!==b){ta();var Fc=h();if(Fc!==b){ta();var yb=f;var Rb=f;if(v.substr(f,3).toLowerCase()===Ua){var Zc=v.substr(f,3);f+=3}else Zc=b,0===va&&
m(Xd);if(Zc!==b){var oc=f;va++;var Yd=V();va--;Yd===b?oc=void 0:(f=oc,oc=b);oc!==b?Rb="FOR":(f=Rb,Rb=b)}else f=Rb,Rb=b;var ac=Rb;if(ac!==b){var Zd=ta();var $c=h();if($c!==b){var $d=ta();yb=ac=[ac,Zd,$c,$d]}else f=yb,yb=b}else f=yb,yb=b;yb===b&&(yb=null);ac=Ra();ac!==b?jb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(f=jb,jb=b)}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b;Xa=jb;if(Xa===b){var Ya=f;var Gc=fa();if(Gc!==
b){ta();var Hc=Ha();if(Hc!==b){ta();var zb=l();zb===b&&(zb=null);ta();var bc=h();if(bc!==b){ta();var Ic=ia();if(Ic!==b){ta();var ad=h();if(ad!==b){ta();var ae=Ra();ae!==b?Ya={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc,ad]}}:(f=Ya,Ya=b)}else f=Ya,Ya=b}else f=Ya,Ya=b}else f=Ya,Ya=b}else f=Ya,Ya=b}else f=Ya,Ya=b;Ya===b&&(Ya=f,Gc=fa(),Gc!==b?(ta(),Hc=Ha(),Hc!==b?(ta(),zb=l(),zb===b&&(zb=null),ta(),bc=h(),bc!==b?(ta(),Ic=Ra(),Ic!==b?Ya={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc]}}:(f=Ya,Ya=b)):(f=Ya,Ya=b)):(f=Ya,Ya=b)):(f=Ya,Ya=b));Xa=Ya;if(Xa===b){var kb=f;var Sb=f;if(v.substr(f,8).toLowerCase()===be){var bd=v.substr(f,8);f+=8}else bd=b,0===va&&m(ce);if(bd!==b){var pc=f;va++;var de=V();va--;de===b?pc=void 0:(f=pc,pc=b);pc!==b?Sb="POSITION":(f=Sb,Sb=b)}else f=Sb,Sb=b;if(Sb!==b){ta();var ee=Ha();if(ee!==b){ta();var cd=h();if(cd!==b){ta();var fe=a();if(fe!==b){ta();var dd=h();if(dd!==
b){ta();var ge=Ra();ge!==b?kb={type:"function",name:"position",args:{type:"expression-list",value:[cd,dd]}}:(f=kb,kb=b)}else f=kb,kb=b}else f=kb,kb=b}else f=kb,kb=b}else f=kb,kb=b}else f=kb,kb=b;Xa=kb;if(Xa===b){var Bb=f;var qc;var pb=f;pb=qc=H();if(pb===b)if(pb=f,96===v.charCodeAt(f)?(qc=ed,f++):(qc=b,0===va&&m(fd)),qc!==b){var rc=[];if(gd.test(v.charAt(f))){var Ab=v.charAt(f);f++}else Ab=b,0===va&&m(hd);if(Ab!==b)for(;Ab!==b;)rc.push(Ab),gd.test(v.charAt(f))?(Ab=v.charAt(f),f++):(Ab=b,0===va&&m(hd));
else rc=b;rc!==b?(96===v.charCodeAt(f)?(Ab=ed,f++):(Ab=b,0===va&&m(fd)),Ab!==b?pb=rc.join(""):(f=pb,pb=b)):(f=pb,pb=b)}else f=pb,pb=b;var id=pb;if(id!==b){ta();var he=Ha();if(he!==b){ta();var sc=c();sc===b&&(sc=null);ta();var ie=Ra();ie!==b?Bb={type:"function",name:id,args:sc?sc:{type:"expression-list",value:[]}}:(f=Bb,Bb=b)}else f=Bb,Bb=b}else f=Bb,Bb=b;Xa=Bb;if(Xa===b){var ub;var eb=f;var Jc=Ca();if(Jc!==b){ta();var cc=h();if(cc!==b){ta();var dc=[];for(ub=oa();ub!==b;)dc.push(ub),ub=oa();ub=ta();
var tc=Ka();tc!==b?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:null}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;if(eb===b)if(eb=f,Jc=Ca(),Jc!==b)if(ta(),cc=h(),cc!==b){ta();dc=[];for(ub=oa();ub!==b;)dc.push(ub),ub=oa();ub=ta();tc=qa();if(tc!==b){ta();var je=Ka();je!==b?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:tc.value}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;else f=eb,eb=b;var Kc=eb;if(Kc===b){var vb;var hb=f;var Lc=Ca();if(Lc!==b){ta();var ec=
[];for(vb=na();vb!==b;)ec.push(vb),vb=na();vb=ta();var uc=Ka();uc!==b?hb={type:"case-expression",format:"searched",clauses:ec,else:null}:(f=hb,hb=b)}else f=hb,hb=b;if(hb===b)if(hb=f,Lc=Ca(),Lc!==b){ta();ec=[];for(vb=na();vb!==b;)ec.push(vb),vb=na();vb=ta();uc=qa();if(uc!==b){ta();var ke=Ka();ke!==b?hb={type:"case-expression",format:"searched",clauses:ec,else:uc.value}:(f=hb,hb=b)}else f=hb,hb=b}else f=hb,hb=b;Kc=hb}Xa=Kc;if(Xa===b){var vc;var wc=f;var jd=W();if(jd!==b){var kd=[];for(vc=K();vc!==b;)kd.push(vc),
vc=K();wc=jd+kd.join("")}else f=wc,wc=b;var xc=wc;if(xc!==b){var Mc=xc;xc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Xa=xc;if(Xa===b&&(Xa=E(),Xa===b)){Xa=f;var le=Ha();if(le!==b){ta();var Nc=h();if(Nc!==b){ta();var me=Ra();me!==b?(Nc.paren=!0,Xa=Nc):(f=Xa,Xa=b)}else f=Xa,Xa=b}else f=Xa,Xa=b}}}}}}}}return Xa}function H(){var w;var C=f;var ca=W();if(ca!==b){C=[];for(w=
V();w!==b;)C.push(w),w=V();C=ca+C.join("")}else f=C,C=b;return C}function W(){if(ne.test(v.charAt(f))){var w=v.charAt(f);f++}else w=b,0===va&&m(oe);return w}function V(){if(pe.test(v.charAt(f))){var w=v.charAt(f);f++}else w=b,0===va&&m(qe);return w}function K(){if(re.test(v.charAt(f))){var w=v.charAt(f);f++}else w=b,0===va&&m(se);return w}function E(){var w=f;if(64===v.charCodeAt(f)){var C=lb;f++}else C=b,0===va&&m(te);if(C!==b){var ca=H();ca!==b?w=C=[C,ca]:(f=w,w=b)}else f=w,w=b;w!==b&&(w={type:"parameter",
value:w[1]});return w}function l(){var w=f;if(v.substr(f,7).toLowerCase()===ue){var C=v.substr(f,7);f+=7}else C=b,0===va&&m(ve);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="LEADING":(f=w,w=b)}else f=w,w=b;w===b&&(w=f,v.substr(f,8).toLowerCase()===we?(C=v.substr(f,8),f+=8):(C=b,0===va&&m(xe)),C!==b?(C=f,va++,ca=V(),va--,ca===b?C=void 0:(f=C,C=b),C!==b?w="TRAILING":(f=w,w=b)):(f=w,w=b),w===b&&(w=f,v.substr(f,4).toLowerCase()===ye?(C=v.substr(f,4),f+=4):(C=b,0===va&&m(ze)),C!==
b?(C=f,va++,ca=V(),va--,ca===b?C=void 0:(f=C,C=b),C!==b?w="BOTH":(f=w,w=b)):(f=w,w=b)));return w}function L(){var w=f;var C=f;var ca=X();if(ca!==b){ta();var ua=Ha();if(ua!==b)if(ta(),ua=ja(),ua!==b){ta();var Da=Ra();Da!==b?C={type:"interval-period",period:ca.value,precision:ua,secondary:null}:(f=C,C=b)}else f=C,C=b;else f=C,C=b}else f=C,C=b;C===b&&(C=f,ca=X(),ca!==b&&(ca=ld(ca)),C=ca);if(C!==b)if(ta(),ca=f,v.substr(f,2).toLowerCase()===Ae?(ua=v.substr(f,2),f+=2):(ua=b,0===va&&m(Be)),ua!==b?(ua=f,
va++,Da=V(),va--,Da===b?ua=void 0:(f=ua,ua=b),ua!==b?ca="TO":(f=ca,ca=b)):(f=ca,ca=b),ca!==b){ta();ca=f;ua=X();ua!==b&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});ca=ua;if(ca===b){ca=f;ua=Ba();if(ua!==b)if(ta(),ua=Ha(),ua!==b)if(ta(),ua=ja(),ua!==b)if(ta(),Da=Ga(),Da!==b)if(ta(),Da=P(),Da!==b){ta();var Oa=Ra();Oa!==b?ca=md(ua,Da):(f=ca,ca=b)}else f=ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;ca===b&&(ca=f,ua=Ba(),ua!==b?(ta(),ua=Ha(),ua!==b?
(ta(),ua=ja(),ua!==b?(ta(),Da=Ra(),Da!==b?ca={type:"interval-period",period:"second",precision:ua,secondary:null}:(f=ca,ca=b)):(f=ca,ca=b)):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ua=Ba(),ua!==b&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),ca=ua))}ca!==b?w={type:"interval-qualifier",start:C,end:ca}:(f=w,w=b)}else f=w,w=b;else f=w,w=b;w===b&&(w=f,ca=X(),ca!==b?(ta(),C=Ha(),C!==b?(ta(),C=P(),C!==b?(ta(),ua=Ra(),ua!==b?w={type:"interval-period",period:ca.value,precision:C,
secondary:null}:(f=w,w=b)):(f=w,w=b)):(f=w,w=b)):(f=w,w=b),w===b&&(w=f,ca=X(),ca!==b&&(ca=ld(ca)),w=ca,w===b&&(w=f,ca=Ba(),ca!==b?(ta(),C=Ha(),C!==b?(ta(),C=ja(),C!==b?(ta(),ua=Ga(),ua!==b?(ta(),ca=P(),ca!==b?(ta(),ua=Ra(),ua!==b?w=md(C,ca):(f=w,w=b)):(f=w,w=b)):(f=w,w=b)):(f=w,w=b)):(f=w,w=b)):(f=w,w=b),w===b&&(w=f,ca=Ba(),ca!==b?(ta(),C=Ha(),C!==b?(ta(),C=P(),C!==b?(ta(),ua=Ra(),ua!==b?w={type:"interval-period",period:"second",precision:C,secondary:null}:(f=w,w=b)):(f=w,w=b)):(f=w,w=b)):(f=w,w=
b),w===b&&(w=f,ca=Ba(),ca!==b&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),w=ca)))));return w}function X(){var w=f;w=ra();w!==b&&(w={type:"string",value:"day"});w===b&&(w=f,w=sa(),w!==b&&(w={type:"string",value:"hour"}),w===b&&(w=f,w=ya(),w!==b&&(w={type:"string",value:"minute"}),w===b&&(w=f,w=ea(),w!==b&&(w={type:"string",value:"month"}),w===b&&(w=f,w=O(),w!==b&&(w={type:"string",value:"year"})))));return w}function P(){var w=Ma();w!==b&&(w=parseFloat(w));return w}
function ja(){var w=Ma();w!==b&&(w=parseFloat(w));return w}function ma(){var w=R();w===b&&(w=E());return w}function R(){var w=f;if(39===v.charCodeAt(f)){var C=wb;f++}else C=b,0===va&&m(nd);C===b&&(v.substr(f,2)===Ta?(C=Ta,f+=2):(C=b,0===va&&m(Ce)));if(C!==b){C=[];var ca=f;v.substr(f,2)===fb?(ca=fb,f+=2):(ca=b,0===va&&m(od));ca!==b&&(ca="'");ca===b&&(pd.test(v.charAt(f))?(ca=v.charAt(f),f++):(ca=b,0===va&&m(qd)));for(;ca!==b;)C.push(ca),ca=f,v.substr(f,2)===fb?(ca=fb,f+=2):(ca=b,0===va&&m(od)),ca!==
b&&(ca="'"),ca===b&&(pd.test(v.charAt(f))?(ca=v.charAt(f),f++):(ca=b,0===va&&m(qd)));39===v.charCodeAt(f)?(ca=wb,f++):(ca=b,0===va&&m(nd));ca!==b?w={type:"string",value:C.join("")}:(f=w,w=b)}else f=w,w=b;return w}function na(){var w=f;if(Ia()!==b){ta();var C=h();if(C!==b){ta();var ca=Fa();ca!==b?(ta(),ca=h(),ca!==b?w={type:"when-clause",operand:C,value:ca}:(f=w,w=b)):(f=w,w=b)}else f=w,w=b}else f=w,w=b;return w}function oa(){var w=f;if(Ia()!==b){ta();var C=h();if(C!==b){ta();var ca=Fa();ca!==b?(ta(),
ca=h(),ca!==b?w={type:"when-clause",operand:C,value:ca}:(f=w,w=b)):(f=w,w=b)}else f=w,w=b}else f=w,w=b;return w}function qa(){var w=f;var C=f;if(v.substr(f,4).toLowerCase()===De){var ca=v.substr(f,4);f+=4}else ca=b,0===va&&m(Ee);if(ca!==b){ca=f;va++;var ua=V();va--;ua===b?ca=void 0:(f=ca,ca=b);ca!==b?C="ELSE":(f=C,C=b)}else f=C,C=b;C!==b?(ta(),C=h(),C!==b?w={type:"else-clause",value:C}:(f=w,w=b)):(f=w,w=b);return w}function xa(){var w=Ma();if(w===b){w=f;if(45===v.charCodeAt(f)){var C=Gb;f++}else C=
b,0===va&&m(Bc);C===b&&(43===v.charCodeAt(f)?(C=rb,f++):(C=b,0===va&&m(Ac)));if(C!==b){var ca=Ma();ca!==b?w=C[0]+ca:(f=w,w=b)}else f=w,w=b}return w}function Na(){var w=f;if(46===v.charCodeAt(f)){var C=sb;f++}else C=b,0===va&&m(Fe);C!==b?(w=Ma(),w===b&&(w=null),w="."+(null!=w?w:"")):(f=w,w=b);return w}function Ja(){var w;var C=w=f;if(Ge.test(v.charAt(f))){var ca=v.charAt(f);f++}else ca=b,0===va&&m(He);ca!==b?(Ie.test(v.charAt(f))?(C=v.charAt(f),f++):(C=b,0===va&&m(Je)),C===b&&(C=null),C="e"+(null===
C?"":C)):(f=C,C=b);C!==b?(ca=Ma(),ca!==b?w=C+ca:(f=w,w=b)):(f=w,w=b);return w}function Ma(){var w=[];var C=wa();if(C!==b)for(;C!==b;)w.push(C),C=wa();else w=b;w!==b&&(w=w.join(""));return w}function wa(){if(Ke.test(v.charAt(f))){var w=v.charAt(f);f++}else w=b,0===va&&m(Le);return w}function a(){var w=f;if(v.substr(f,2).toLowerCase()===ha){var C=v.substr(f,2);f+=2}else C=b,0===va&&m(Me);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="IN":(f=w,w=b)}else f=w,w=b;return w}function g(){var w=
f;if(v.substr(f,2).toLowerCase()===da){var C=v.substr(f,2);f+=2}else C=b,0===va&&m(Ne);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="IS":(f=w,w=b)}else f=w,w=b;return w}function aa(){var w=f;if(v.substr(f,4).toLowerCase()===pa){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(Oe);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="LIKE":(f=w,w=b)}else f=w,w=b;return w}function e(){var w=f;if(v.substr(f,3).toLowerCase()===Aa){var C=v.substr(f,3);f+=3}else C=b,0===
va&&m(Pe);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="NOT":(f=w,w=b)}else f=w,w=b;return w}function A(){var w=f;if(v.substr(f,3).toLowerCase()===Ea){var C=v.substr(f,3);f+=3}else C=b,0===va&&m(Qe);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="AND":(f=w,w=b)}else f=w,w=b;return w}function S(){var w=f;if(v.substr(f,2).toLowerCase()===La){var C=v.substr(f,2);f+=2}else C=b,0===va&&m(Re);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==
b?w="OR":(f=w,w=b)}else f=w,w=b;return w}function U(){var w=f;if(v.substr(f,7).toLowerCase()===Wa){var C=v.substr(f,7);f+=7}else C=b,0===va&&m(Se);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="BETWEEN":(f=w,w=b)}else f=w,w=b;return w}function ia(){var w=f;if(v.substr(f,4).toLowerCase()===Va){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(Te);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="FROM":(f=w,w=b)}else f=w,w=b;return w}function fa(){var w=f;if(v.substr(f,
4).toLowerCase()===Ue){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(Ve);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="TRIM":(f=w,w=b)}else f=w,w=b;return w}function F(){var w=f;if(v.substr(f,8).toLowerCase()===We){var C=v.substr(f,8);f+=8}else C=b,0===va&&m(Xe);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="INTERVAL":(f=w,w=b)}else f=w,w=b;return w}function O(){var w=f;if(v.substr(f,4).toLowerCase()===Ye){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(Ze);
if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="YEAR":(f=w,w=b)}else f=w,w=b;return w}function ea(){var w=f;if(v.substr(f,5).toLowerCase()===$e){var C=v.substr(f,5);f+=5}else C=b,0===va&&m(af);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="MONTH":(f=w,w=b)}else f=w,w=b;return w}function ra(){var w=f;if(v.substr(f,3).toLowerCase()===bf){var C=v.substr(f,3);f+=3}else C=b,0===va&&m(cf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="DAY":
(f=w,w=b)}else f=w,w=b;return w}function sa(){var w=f;if(v.substr(f,4).toLowerCase()===df){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(ef);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="HOUR":(f=w,w=b)}else f=w,w=b;return w}function ya(){var w=f;if(v.substr(f,6).toLowerCase()===ff){var C=v.substr(f,6);f+=6}else C=b,0===va&&m(gf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="MINUTE":(f=w,w=b)}else f=w,w=b;return w}function Ba(){var w=f;if(v.substr(f,6).toLowerCase()===
hf){var C=v.substr(f,6);f+=6}else C=b,0===va&&m(jf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="SECOND":(f=w,w=b)}else f=w,w=b;return w}function Ca(){var w=f;if(v.substr(f,4).toLowerCase()===kf){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(lf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="CASE":(f=w,w=b)}else f=w,w=b;return w}function Ka(){var w=f;if(v.substr(f,3).toLowerCase()===mf){var C=v.substr(f,3);f+=3}else C=b,0===va&&m(nf);if(C!==b){C=f;va++;
var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="END":(f=w,w=b)}else f=w,w=b;return w}function Ia(){var w=f;if(v.substr(f,4).toLowerCase()===of){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(pf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="WHEN":(f=w,w=b)}else f=w,w=b;return w}function Fa(){var w=f;if(v.substr(f,4).toLowerCase()===qf){var C=v.substr(f,4);f+=4}else C=b,0===va&&m(rf);if(C!==b){C=f;va++;var ca=V();va--;ca===b?C=void 0:(f=C,C=b);C!==b?w="THEN":(f=w,w=b)}else f=
w,w=b;return w}function Ga(){if(44===v.charCodeAt(f)){var w=sf;f++}else w=b,0===va&&m(tf);return w}function Ha(){if(40===v.charCodeAt(f)){var w=uf;f++}else w=b,0===va&&m(vf);return w}function Ra(){if(41===v.charCodeAt(f)){var w=wf;f++}else w=b,0===va&&m(xf);return w}function ta(){var w;var C=[];for(w=$a();w!==b;)C.push(w),w=$a();return C}function $a(){if(yf.test(v.charAt(f))){var w=v.charAt(f);f++}else w=b,0===va&&m(zf);return w}function ab(w,C,ca,ua){w={type:"binary-expression",operator:w,left:C,
right:ca};void 0!==ua&&(w.escape=ua);return w}function Za(w,C){for(var ca=0;ca<C.length;ca++)w=ab(C[ca][1],w,C[ca][3]);return w}r=void 0!==r?r:{};var b={},bb=r.grammarSource,Sa={start:J},mb=J,qb="!",Cb="\x3d",Tb="\x3e\x3d",Fb="\x3e",la="\x3c\x3d",Vb="\x3c\x3e",Db="\x3c",gb="!\x3d",rb="+",Gb="-",Ub="*",yc="/",lb="@",wb="'",Ta="N'",fb="''",sb=".",Pa="null",Hb="true",Y="false",ha="in",da="is",pa="like",za="escape",Aa="not",Ea="and",La="or",Wa="between",Va="from",Ua="for",cb="substring",nb="extract",
Ue="trim",be="position",Ld="timestamp",Id="date",ue="leading",we="trailing",ye="both",Ae="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",De="else",sf=",",uf="(",wf=")",ed="`",ne=/^[A-Za-z_\x80-\uFFFF]/,pe=/^[A-Za-z0-9_]/,re=/^[A-Za-z0-9_.\x80-\uFFFF]/,pd=/^[^']/,Ke=/^[0-9]/,Ge=/^[eE]/,Ie=/^[+\-]/,yf=/^[ \t\n\r]/,gd=/^[^`]/,rd=t("!",!1),Pc=t("\x3d",!1),td=t("\x3e\x3d",!1),ud=t("\x3e",!1),vd=t("\x3c\x3d",!1),wd=t("\x3c\x3e",!1),
xd=t("\x3c",!1),yd=t("!\x3d",!1),Ac=t("+",!1),Bc=t("-",!1),zd=t("*",!1),Ad=t("/",!1),oe=y([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),qe=y([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),se=y([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),te=t("@",!1),nd=t("'",!1),Ce=t("N'",!1),od=t("''",!1),qd=y(["'"],!0,!1),Fe=t(".",!1),Le=y([["0","9"]],!1,!1),He=y(["e","E"],!1,!1),Je=y(["+","-"],!1,!1),Gd=t("NULL",!0),Cd=t("TRUE",!0),Ed=t("FALSE",!0),Me=t("IN",!0),Ne=t("IS",!0),Oe=t("LIKE",
!0),sd=t("ESCAPE",!0),Pe=t("NOT",!0),Qe=t("AND",!0),Re=t("OR",!0),Se=t("BETWEEN",!0),Te=t("FROM",!0),Xd=t("FOR",!0),Td=t("SUBSTRING",!0),Od=t("EXTRACT",!0),Ve=t("TRIM",!0),ce=t("POSITION",!0),Md=t("TIMESTAMP",!0),Jd=t("DATE",!0),ve=t("LEADING",!0),xe=t("TRAILING",!0),ze=t("BOTH",!0),Be=t("TO",!0),Xe=t("INTERVAL",!0),Ze=t("YEAR",!0),af=t("MONTH",!0),cf=t("DAY",!0),ef=t("HOUR",!0),gf=t("MINUTE",!0),jf=t("SECOND",!0),lf=t("CASE",!0),nf=t("END",!0),pf=t("WHEN",!0),rf=t("THEN",!0),Ee=t("ELSE",!0),tf=t(",",
!1),vf=t("(",!1),xf=t(")",!1),zf=y([" ","\t","\n","\r"],!1,!1),fd=t("`",!1),hd=y(["`"],!0,!1),ld=function(w){return{type:"interval-period",period:w.value,precision:null,secondary:null}},md=function(w,C){return{type:"interval-period",period:"second",precision:w,secondary:C}},f=0,fc=[{line:1,column:1}],tb=0,zc=[],va=0;if("startRule"in r){if(!(r.startRule in Sa))throw Error("Can't start parsing from rule \""+r.startRule+'".');mb=Sa[r.startRule]}var Oc=mb();if(Oc!==b&&f===v.length)return Oc;Oc!==b&&f<
v.length&&m({type:"end"});throw function(w,C,ca){return new x(x.buildMessage(w,C),w,C,ca)}(zc,tb<v.length?v.charAt(tb):null,tb<v.length?I(tb,tb+1):I(tb,tb));}}})})(Z);let Q=function(){function p(){}p.parse=function(x){return Z.exports.parse(x)};return p}();k.WhereGrammar=Q;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m){function J(D,B,n,q,u,N){u-=n;N-=q;D=Math.min(1,Math.max(0,((D-n)*u+(B-q)*N)/(u*u+N*N)));return{x:n+u*D,y:q+N*D}}function c(D,B){return D?B?4:3:B?3:2}let h=function(){function D(n,q,u){this.items=n;this.query=q;this.geometryType=u.geometryType;this.hasM=u.hasM;this.hasZ=u.hasZ;this.fieldsIndex=u.fieldsIndex;this.objectIdField=u.objectIdField;this.spatialReference=u.spatialReference;this.featureAdapter=u.featureAdapter}var B=D.prototype;B.createQueryResponseForCount=
function(){const n=new r(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:q,having:u,outStatistics:N}=this.query;if(null==q||!q.length)return 1;const ba=new Map,T=new Map,ka=new Set;for(const W of N){var {statisticType:M}=W;M="exceedslimit"!==M?W.onStatisticField:void 0;if(!T.has(M)){var H=[];for(const V of q){const K=this._getAttributeValues(n,V,ba);H.push(K)}T.set(M,this._calculateUniqueValues(H,
n.returnDistinctValues))}M=T.get(M);for(const V in M){const {data:K,items:E}=M[V];H=K.join(",");u&&!n.validateItems(E,u)||ka.add(H)}}return ka.size};B.createQueryResponse=function(){var n=Z._asyncToGenerator(function*(){let q;q=this.query.outStatistics?this.query.outStatistics.some(u=>"exceedslimit"===u.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&
(v.isValid(this.query.outSR)&&!v.equals(this.query.geometry.spatialReference,this.query.outSR)?q.queryGeometry=y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...t.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):q.queryGeometry=y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return q});return function(){return n.apply(this,arguments)}}();B.createSnappingResponse=function(n,q){const u=this.featureAdapter,N=c(this.hasZ,
this.hasM),{x:ba,y:T}=n.point,ka="number"===typeof n.distance?n.distance:n.distance.x,M="number"===typeof n.distance?n.distance:n.distance.y,H={candidates:[]},W="esriGeometryPolygon"===this.geometryType;q=this._getPointCreator(n.point,this.spatialReference,q);for(const ja of this.items){var V=u.getGeometry(ja);if(Q.isNone(V))continue;const {coords:ma,lengths:R}=V;if(n.types&d.SnappingTypes.EDGE){V=0;for(var K=0;K<R.length;K++){var E=R[K];for(var l=0;l<E;l++,V+=N){var L=ma[V],X=ma[V+1];if(l!==E-1){const na=
ma[V+N],oa=ma[V+N+1],{x:qa,y:xa}=J(ba,T,L,X,na,oa);var P=(ba-qa)/ka;const Na=(T-xa)/M;P=P*P+Na*Na;1>=P&&H.candidates.push({type:"edge",objectId:u.getObjectId(ja),distance:Math.sqrt(P),target:q(qa,xa),start:q(L,X),end:q(na,oa)})}}}}if(n.types&d.SnappingTypes.VERTEX)for(V=W?ma.length-N:ma.length,K=0;K<V;K+=N)E=ma[K],l=ma[K+1],L=(ba-E)/ka,X=(T-l)/M,L=L*L+X*X,1>=L&&H.candidates.push({type:"vertex",objectId:u.getObjectId(ja),distance:Math.sqrt(L),target:q(E,l)})}H.candidates.sort((ja,ma)=>ja.distance-
ma.distance);return H};B._getPointCreator=function(n,q,u){const N=Q.isSome(u)&&!v.equals(q,u)?ba=>t.project(ba,q,u):ba=>ba;return null!=n.z&&null!=n.m?(ba,T)=>N({x:ba,y:T,z:n.z,m:n.m}):null!=n.z?(ba,T)=>N({x:ba,y:T,z:n.z}):null!=n.m?(ba,T)=>N({x:ba,y:T,m:n.m}):(ba,T)=>N({x:ba,y:T})};B.createSummaryStatisticsResponse=function(){var n=Z._asyncToGenerator(function*(q){const {field:u,valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,minValue:M,maxValue:H,scale:W}=q;q=this.fieldsIndex.isDateField(u);
var V=yield this._getDataValues({field:u,valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,scale:W});const K=I.isNullCountSupported({normalizationType:T,normalizationField:ba,minValue:M,maxValue:H}),E=this.fieldsIndex.get(u),l={value:.5,fieldType:null==E?void 0:E.type};V=G.isStringField(E)?I.calculateStringStatistics({values:V,supportsNullCount:K,percentileParams:l}):I.calculateStatistics({values:V,minValue:M,maxValue:H,useSampleStdDev:!T,supportsNullCount:K,percentileParams:l});
return I.processSummaryStatisticsResult(V,q)});return function(q){return n.apply(this,arguments)}}();B.createUniqueValuesResponse=function(){var n=Z._asyncToGenerator(function*(q){const {field:u,valueExpression:N,domain:ba,returnAllCodedValues:T,scale:ka}=q;q=yield this._getDataValues({field:u,valueExpression:N,scale:ka});q=I.calculateUniqueValuesCount(q);return I.createUVResult(q,ba,T)});return function(q){return n.apply(this,arguments)}}();B.createClassBreaksResponse=function(){var n=Z._asyncToGenerator(function*(q){const {field:u,
valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,classificationMethod:M,standardDeviationInterval:H,minValue:W,maxValue:V,numClasses:K,scale:E}=q;q=yield this._getDataValues({field:u,valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,scale:E});q=I.calculateClassBreaks(q,{field:u,normalizationField:ba,normalizationType:T,normalizationTotal:ka,classificationMethod:M,standardDeviationInterval:H,minValue:W,maxValue:V,numClasses:K});return I.resolveCBResult(q,
M)});return function(q){return n.apply(this,arguments)}}();B.createHistogramResponse=function(){var n=Z._asyncToGenerator(function*(q){const {field:u,valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,classificationMethod:M,standardDeviationInterval:H,minValue:W,maxValue:V,numBins:K,scale:E}=q;q=yield this._getDataValues({field:u,valueExpression:N,normalizationField:ba,normalizationType:T,normalizationTotal:ka,scale:E});return I.calculateHistogram(q,{field:u,normalizationField:ba,
normalizationType:T,normalizationTotal:ka,classificationMethod:M,standardDeviationInterval:H,minValue:W,maxValue:V,numBins:K})});return function(q){return n.apply(this,arguments)}}();B._sortFeatures=function(n,q,u){if(1<n.length&&q&&q.length)for(const N of q.reverse()){q=N.split(" ");const ba=q[0],T=this.fieldsIndex.get(ba);q=q[1]&&"desc"===q[1].toLowerCase();const ka=I.getAttributeComparator(null==T?void 0:T.type,q);n.sort((M,H)=>{M=u(M,ba,T);H=u(H,ba,T);return ka(M,H)})}};B._createFeatureQueryResponse=
function(n){const q=this.items,{geometryType:u,hasM:N,hasZ:ba,objectIdField:T,spatialReference:ka}=this,{outFields:M,outSR:H,quantizationParameters:W,resultRecordCount:V,resultOffset:K,returnZ:E,returnM:l}=n,L=null!=V?q.length>(K||0)+V:!1,X=M&&(M.includes("*")?[...this.fieldsIndex.fields]:M.map(P=>this.fieldsIndex.get(P)));return{exceededTransferLimit:L,features:this._createFeatures(n,q),fields:X,geometryType:u,hasM:N&&l,hasZ:ba&&E,objectIdFieldName:T,spatialReference:y.cleanFromGeometryEngine(H?
H:ka),transform:W&&z.toQuantizationTransform(W)||null}};B._createFeatures=function(n,q){const u=new r(n,this.featureAdapter,this.fieldsIndex),{hasM:N,hasZ:ba}=this,{orderByFields:T,quantizationParameters:ka,returnGeometry:M,returnCentroid:H,maxAllowableOffset:W,resultOffset:V,resultRecordCount:K,returnZ:E=!1,returnM:l=!1}=n,L=ba&&E,X=N&&l;n=[];var P=0;q=[...q];this._sortFeatures(q,T,(R,na,oa)=>u.getFieldValue(R,na,oa));if(M||H){var ja=z.toQuantizationTransform(ka);if(M&&!H)for(var ma of q)n[P++]=
{attributes:u.getAttributes(ma),geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),W,ja,L,X)};else if(!M&&H)for(const R of q)n[P++]={attributes:u.getAttributes(R),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(R,this),ja)};else for(const R of q)n[P++]={attributes:u.getAttributes(R),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(R,this),ja),geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(R),
W,ja,L,X)}}else for(ja of q)(ma=u.getAttributes(ja))&&(n[P++]={attributes:ma});P=V||0;null!=K&&(n=n.slice(P,Math.min(n.length,P+K)));return n};B._createExceedsLimitQueryResponse=function(n){var q=!1;let u=Number.POSITIVE_INFINITY,N=Number.POSITIVE_INFINITY;q=Number.POSITIVE_INFINITY;for(const ba of n.outStatistics)if("exceedslimit"===ba.statisticType){u=null!=ba.maxPointCount?ba.maxPointCount:Number.POSITIVE_INFINITY;N=null!=ba.maxRecordCount?ba.maxRecordCount:Number.POSITIVE_INFINITY;q=null!=ba.maxVertexCount?
ba.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)q=this.items.length>u;else if(this.items.length>N)q=!0;else{n=this.hasZ?this.hasM?4:3:this.hasM?3:2;const ba=this.featureAdapter;q=this.items.reduce((T,ka)=>{ka=ba.getGeometry(ka);return T+(Q.isSome(ka)&&ka.coords.length||0)},0)/n>q}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(q)}}]}};
B._createStatisticsQueryResponse=function(){var n=Z._asyncToGenerator(function*(q){var u={attributes:{}};const N=[],ba=new Map,T=new Map,ka=new Map,M=new Map,H=new r(q,this.featureAdapter,this.fieldsIndex);var W=q.outStatistics;const {groupByFieldsForStatistics:V,having:K,orderByFields:E}=q;q=V&&V.length;const l=!!q,L=l&&V[0],X=l&&!this.fieldsIndex.get(L);for(const na of W){const {outStatisticFieldName:oa,statisticType:qa}=na;W=na;var P="exceedslimit"!==qa?na.onStatisticField:void 0;const xa="percentile_disc"===
qa||"percentile_cont"===qa,Na="EnvelopeAggregate"===qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa,Ja=l&&1===q&&(P===L||X)&&"count"===qa;if(l){if(!ka.has(P)){var ja=[];for(const Ma of V){var ma=this._getAttributeValues(H,Ma,ba);ja.push(ma)}ka.set(P,this._calculateUniqueValues(ja,H.returnDistinctValues))}ja=ka.get(P);for(const Ma in ja){const {count:wa,data:a,items:g,itemPositions:aa}=ja[Ma];ma=a.join(",");if(!K||H.validateItems(g,K)){const e=M.get(ma)||{attributes:{}};if(Na){e.aggregateGeometries||
(e.aggregateGeometries={});const {aggregateGeometries:A,outStatisticFieldName:S}=yield this._getAggregateGeometry(W,g);e.aggregateGeometries[S]=A}else{var R=null;if(Ja)R=wa;else{const A=this._getAttributeValues(H,P,ba);R=aa.map(S=>A[S]);R=xa&&"statisticParameters"in W?this._getPercentileValue(W,R):this._getStatisticValue(W,R,null,H.returnDistinctValues)}e.attributes[oa]=R}V.forEach((A,S)=>e.attributes[this.fieldsIndex.get(A)?A:`EXPR_${S+1}`]=a[S]);M.set(ma,e)}}}else if(Na){u.aggregateGeometries||
(u.aggregateGeometries={});const {aggregateGeometries:Ma,outStatisticFieldName:wa}=yield this._getAggregateGeometry(W,this.items);u.aggregateGeometries[wa]=Ma}else P=this._getAttributeValues(H,P,ba),u.attributes[oa]=xa&&"statisticParameters"in W?this._getPercentileValue(W,P):this._getStatisticValue(W,P,T,H.returnDistinctValues);N.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}u=l?Array.from(M.values()):[u];this._sortFeatures(u,E,(na,oa)=>na.attributes[oa]);return{fields:N,features:u}});return function(q){return n.apply(this,
arguments)}}();B._getAggregateGeometry=function(){var n=Z._asyncToGenerator(function*(q,u){var N=yield new Promise((E,l)=>k(["../../../geometry/geometryEngineJSON"],E,l));const {statisticType:ba,outStatisticFieldName:T}=q,{featureAdapter:ka,spatialReference:M,geometryType:H,hasZ:W,hasM:V}=this;u=u.map(E=>y.getGeometry(H,W,V,ka.getGeometry(E)));const K=N.convexHull(M,u,!0)[0];q={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===ba?(N=K?x.getPolygonExtent(K):x.getGeometryExtent(N.union(M,
u)),q.aggregateGeometries={...N,spatialReference:M},q.outStatisticFieldName=T||"extent"):"CentroidAggregate"===ba?(N=K?p.polygonCentroid(K):p.extentCentroid(x.getGeometryExtent(N.union(M,u))),q.aggregateGeometries={x:N[0],y:N[1],spatialReference:M},q.outStatisticFieldName=T||"centroid"):"ConvexHullAggregate"===ba&&(q.aggregateGeometries=K,q.outStatisticFieldName=T||"convexHull");return q});return function(q,u){return n.apply(this,arguments)}}();B._getStatisticValue=function(n,q,u,N){const {onStatisticField:ba,
statisticType:T}=n;n=null;n=null!=u&&u.has(ba)?u.get(ba):G.isStringField(this.fieldsIndex.get(ba))?I.calculateStringStatistics({values:q,returnDistinct:N}):I.calculateStatistics({values:q,minValue:null,maxValue:null,useSampleStdDev:!0});u&&u.set(ba,n);return n["var"===T?"variance":T]};B._getPercentileValue=function(n,q){const {onStatisticField:u,statisticParameters:N,statisticType:ba}=n,{value:T,orderBy:ka}=N;n=this.fieldsIndex.get(u);return I.calculatePercentile(q,{value:T,orderBy:ka,fieldType:null==
n?void 0:n.type,isDiscrete:"percentile_disc"===ba})};B._getAttributeValues=function(n,q,u){if(u.has(q))return u.get(q);const N=this.fieldsIndex.get(q),ba=this.items.map(T=>n.getFieldValue(T,q,N));u.set(q,ba);return ba};B._getAttributeNormalizedValues=function(n,q){return this.items.map(u=>n.getNormalizedValue(u,{field:q.field,fieldInfo:this.fieldsIndex.get(q.field),normalizationField:q.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(q.normalizationField),normalizationType:q.normalizationType,
normalizationTotal:q.normalizationTotal}))};B._getAttributeExpressionValues=function(){var n=Z._asyncToGenerator(function*(q,u,N){const {arcadeUtils:ba}=yield m.loadArcade();u=ba.createFunction(u);N=N&&ba.getViewInfo(N);return q.getExpressionValues(this.items,u,N,ba)});return function(q,u,N){return n.apply(this,arguments)}}();B._calculateUniqueValues=function(n,q){const u={},N=this.items,ba=N.length;for(let T=0;T<ba;T++){const ka=N[T],M=[];for(const W of n)M.push(W[T]);const H=M.join(",");q?null==
u[H]&&(u[H]={count:1,data:M,items:[ka],itemPositions:[T]}):null==u[H]?u[H]={count:1,data:M,items:[ka],itemPositions:[T]}:(u[H].count++,u[H].items.push(ka),u[H].itemPositions.push(T))}return u};B._getDataValues=function(){var n=Z._asyncToGenerator(function*(q){const u=new r(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:N,field:ba,normalizationField:T,normalizationType:ka,normalizationTotal:M,scale:H}=q;q=N?{viewingMode:"map",scale:H,spatialReference:this.query.outSR||this.spatialReference}:
null;return N?this._getAttributeExpressionValues(u,N,q):this._getAttributeNormalizedValues(u,{field:ba,normalizationField:T,normalizationType:ka,normalizationTotal:M})});return function(q){return n.apply(this,arguments)}}();Z._createClass(D,[{key:"size",get:function(){return this.items.length}}]);return D}();d.SnappingTypes=void 0;(function(D){D[D.NONE=0]="NONE";D[D.EDGE=1]="EDGE";D[D.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));d.QueryEngineResult=h;Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,d,Z){function Q({scale:M,translate:H},W){return Math.round((W-H[0])/M[0])}function p({scale:M,translate:H},W){return Math.round((H[1]-W)/M[1])}function x(M,H,W){const V=[];let K,E,l,L;for(let X=0;X<W.length;X++){const P=W[X];if(0<X){if(l=Q(M,P[0]),L=p(M,P[1]),l!==K||L!==E)V.push(H(P,l-K,L-E)),K=l,E=L}else K=Q(M,P[0]),E=p(M,P[1]),V.push(H(P,
K,E))}return 0<V.length?V:null}function z(M,H,W,V){return x(M,W?V?ka:T:V?T:ba,H)}function v(M,H,W,V){const K=[];W=W?V?ka:T:V?T:ba;for(V=0;V<H.length;V++){const E=x(M,W,H[V]);E&&3<=E.length&&K.push(E)}return K.length?K:null}function r(M,H,W,V){const K=[];W=W?V?ka:T:V?T:ba;for(V=0;V<H.length;V++){const E=x(M,W,H[V]);E&&2<=E.length&&K.push(E)}return K.length?K:null}function t({scale:M,translate:H},W){return W*M[0]+H[0]}function y({scale:M,translate:H},W){return H[1]-W*M[1]}function G(M,H,W){const V=
Array(W.length);if(!W.length)return V;const [K,E]=M.scale;let l=t(M,W[0][0]);M=y(M,W[0][1]);V[0]=H(W[0],l,M);for(let L=1;L<W.length;L++){const X=W[L];l+=X[0]*K;M-=X[1]*E;V[L]=H(X,l,M)}return V}function I(M,H,W){const V=Array(W.length);for(let K=0;K<W.length;K++)V[K]=G(M,H,W[K]);return V}function m(M,H,W,V){return G(M,W?V?ka:T:V?T:ba,H)}function J(M,H,W,V){return I(M,W?V?ka:T:V?T:ba,H)}function c(M,H,W,V){return I(M,W?V?ka:T:V?T:ba,H)}function h(M,H,W){let [V,K]=W[0],E=Math.min(V,H[0]),l=Math.min(K,
H[1]),L=Math.max(V,H[2]);H=Math.max(K,H[3]);for(let X=1;X<W.length;X++){const [P,ja]=W[X];V+=P;K+=ja;0>P&&(E=Math.min(E,V));0<P&&(L=Math.max(L,V));0>ja?l=Math.min(l,K):0<ja&&(H=Math.max(H,K))}M[0]=E;M[1]=l;M[2]=L;M[3]=H;return M}function D(M,H){if(!H.length)return null;M[0]=M[1]=Number.POSITIVE_INFINITY;M[2]=M[3]=Number.NEGATIVE_INFINITY;for(let W=0;W<H.length;W++)h(M,M,H[W]);return M}function B(M,H,W,V,K){H.xmin=Q(M,W.xmin);H.ymin=p(M,W.ymin);H.xmax=Q(M,W.xmax);H.ymax=p(M,W.ymax);H!==W&&(V&&(H.zmin=
W.zmin,H.zmax=W.zmax),K&&(H.mmin=W.mmin,H.mmax=W.mmax));return H}function n(M,H,W,V,K){H.points=z(M,W.points,V,K);return H}function q(M,H,W,V,K){H.x=Q(M,W.x);H.y=p(M,W.y);H!==W&&(V&&(H.z=W.z),K&&(H.m=W.m));return H}function u(M,H,W,V,K){M=v(M,W.rings,V,K);if(!M)return null;H.rings=M;return H}function N(M,H,W,V,K){M=r(M,W.paths,V,K);if(!M)return null;H.paths=M;return H}const ba=(M,H,W)=>[H,W],T=(M,H,W)=>[H,W,M[2]],ka=(M,H,W)=>[H,W,M[2],M[3]];k.equals=function(M,H){if(M===H||null==M&&null==H)return!0;
if(null==M||null==H)return!1;let W,V,K,E;M&&"upperLeft"===M.originPosition?(W=M.translate[0],V=M.translate[1],M=M.scale[0]):(W=d.isSome(M.extent)?M.extent.xmin:0,V=d.isSome(M.extent)?M.extent.ymax:0,M=M.tolerance);H&&"upperLeft"===H.originPosition?(K=H.translate[0],E=H.translate[1],H=H.scale[0]):(K=d.isSome(H.extent)?H.extent.xmin:0,E=d.isSome(H.extent)?H.extent.ymax:0,H=H.tolerance);return W===K&&V===E&&M===H};k.getQuantizedBoundsCoordsArray=h;k.getQuantizedBoundsCoordsArrayArray=D;k.getQuantizedBoundsPaths=
function(M){return D([0,0,0,0],M)};k.getQuantizedBoundsPoints=function(M){const H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return h(H,H,M)};k.getQuantizedBoundsRings=function(M){return D([0,0,0,0],M)};k.quantizeBounds=function(M,H,W){H[0]=Q(M,W[0]);H[3]=p(M,W[1]);H[2]=Q(M,W[2]);H[1]=p(M,W[3]);return H};k.quantizeExtent=B;k.quantizeGeometry=function(M,H){return M&&H?Z.isPoint(H)?q(M,{},H,!1,!1):Z.isPolyline(H)?N(M,{},H,!1,!1):Z.isPolygon(H)?
u(M,{},H,!1,!1):Z.isMultipoint(H)?n(M,{},H,!1,!1):Z.isExtent(H)?B(M,{},H,!1,!1):null:null};k.quantizeMultipoint=n;k.quantizePaths=r;k.quantizePoint=q;k.quantizePoints=z;k.quantizePolygon=u;k.quantizePolyline=N;k.quantizeRings=v;k.quantizeX=Q;k.quantizeY=p;k.toQuantizationTransform=function(M){return M?{originPosition:"upper-left"===M.originPosition?"upperLeft":"lower-left"===M.originPosition?"lowerLeft":M.originPosition,scale:M.tolerance?[M.tolerance,M.tolerance]:[1,1],translate:d.isSome(M.extent)?
[M.extent.xmin,M.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(M,H,W){return W?(H[0]=t(M,W[0]),H[1]=y(M,W[3]),H[2]=t(M,W[2]),H[3]=y(M,W[1]),H):[t(M,H[0]),y(M,H[3]),t(M,H[2]),y(M,H[1])]};k.unquantizeCoordsArray=G;k.unquantizeCoordsArrayArray=I;k.unquantizeExtent=function(M,H,W,V,K){H.xmin=t(M,W.xmin);H.ymin=y(M,W.ymin);H.xmax=t(M,W.xmax);H.ymax=y(M,W.ymax);H!==W&&(V&&(H.zmin=W.zmin,H.zmax=W.zmax),K&&(H.mmin=W.mmin,H.mmax=W.mmax));return H};k.unquantizeMultipoint=function(M,H,W,V,K){d.isSome(W)&&
(H.points=m(M,W.points,V,K));return H};k.unquantizePaths=J;k.unquantizePoint=function(M,H,W,V,K){if(d.isNone(W))return H;H.x=t(M,W.x);H.y=y(M,W.y);H!==W&&(V&&(H.z=W.z),K&&(H.m=W.m));return H};k.unquantizePoints=m;k.unquantizePolygon=function(M,H,W,V,K){d.isSome(W)&&(H.rings=c(M,W.rings,V,K));return H};k.unquantizePolyline=function(M,H,W,V,K){d.isSome(W)&&(H.paths=J(M,W.paths,V,K));return H};k.unquantizeRings=c;k.unquantizeX=t;k.unquantizeY=y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(k,d,Z){return function(){function Q(x,z,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=x.returnDistinctValues;this.fieldsIndex=v;this.featureAdapter=z;if((z=x.outFields)&&!z.includes("*")){this.outFields=z;x=0;for(const t of z){var r=d.getExpressionFromFieldName(t);r=(z=this.fieldsIndex.get(r))?null:d.getWhereClause(r,
v);z=z?z.name:d.getAliasFromFieldName(t)||`FIELD_EXP_${x++}`;this._fieldDataCache.set(t,{alias:z,clause:r})}}}var p=Q.prototype;p.countDistinctValues=function(x){if(!this.returnDistinctValues)return x.length;x.forEach(z=>this.getAttributes(z));return this._returnDistinctMap.size};p.getAttributes=function(x){x=this._processAttributesForOutFields(x);return this._processAttributesForDistinctValues(x)};p.getFieldValue=function(x,z,v){const r=v?v.name:z;let t=null;this._fieldDataCache.has(r)?t=this._fieldDataCache.get(r).clause:
v||(t=d.getWhereClause(z,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:t}));return v?this.featureAdapter.getAttribute(x,r):t.calculateValue(x,this.featureAdapter)};p.getNormalizedValue=function(x,z){const v=z.normalizationType,r=z.normalizationTotal;let t=this.getFieldValue(x,z.field,z.fieldInfo);v&&Number.isFinite(t)&&(x=this.getFieldValue(x,z.normalizationField,z.normalizationFieldInfo),t=Z.getNormalizedValue(t,v,x,r));return t};p.getExpressionValue=function(x,z,v,r){x={attributes:this.featureAdapter.getAttributes(x),
layer:{fields:this.fieldsIndex.fields}};v=r.createExecContext(x,v);return r.executeFunction(z,v)};p.getExpressionValues=function(x,z,v,r){const t={fields:this.fieldsIndex.fields};return x.map(y=>{y={attributes:this.featureAdapter.getAttributes(y),layer:t};y=r.createExecContext(y,v);return r.executeFunction(z,y)})};p.validateItem=function(x,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testFeature(x,
this.featureAdapter)};p.validateItems=function(x,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testSet(x,this.featureAdapter)};p._processAttributesForOutFields=function(x){const z=this.outFields;if(!z||!z.length)return this.featureAdapter.getAttributes(x);const v={};for(const r of z){const {alias:t,clause:y}=this._fieldDataCache.get(r);v[t]=y?y.calculateValue(x,this.featureAdapter):this.featureAdapter.getAttribute(x,
t)}return v};p._processAttributesForDistinctValues=function(x){if(k.isNone(x)||!this.returnDistinctValues)return x;var z=this.outFields,v=[];if(z)for(const t of z){var {alias:r}=this._fieldDataCache.get(t);v.push(x[r])}else for(r in x)v.push(x[r]);z=`${(z||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(z)||0;this._returnDistinctMap.set(z,++v);return 1<v?null:x};return Q}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(k,d,Z){function Q(n){const q=null!=n.minValue||null!=n.maxValue,u=!!n.sqlExpression&&n.supportsSQLExpression;return!(null!=n.normalizationField||null!=n.normalizationType)&&!q&&!u}function p(n){const {values:q,useSampleStdDev:u,supportsNullCount:N}=n;var ba=Number.POSITIVE_INFINITY;let T=Number.NEGATIVE_INFINITY,ka=null,M=null;var H=null;let W=null,V=0;const K=null==n.minValue?-Infinity:n.minValue,E=null==n.maxValue?Infinity:n.maxValue;for(const l of q)Number.isFinite(l)?l>=K&&l<=E&&(ka+=
l,ba=Math.min(ba,l),T=Math.max(T,l),V++):"string"===typeof l&&V++;if(V&&null!=ka){M=ka/V;H=0;for(const l of q)Number.isFinite(l)&&l>=K&&l<=E&&(H+=(l-M)**2);W=u?1<V?H/(V-1):0:0<V?H/V:0;H=Math.sqrt(W)}else T=ba=null;ba={avg:M,count:V,max:T,min:ba,stddev:H,sum:ka,variance:W};N&&(ba.nullcount=q.length-V);n.percentileParams&&(ba.median=x(q,n.percentileParams));return ba}function x(n,q){const {fieldType:u,value:N,orderBy:ba,isDiscrete:T}=q,ka=z(u,"desc"===ba);n=[...n].filter(V=>null!=V).sort((V,K)=>ka(V,
K));if(0===n.length)return null;if(0>=N)return n[0];if(1<=N)return n[n.length-1];var M=(n.length-1)*N,H=Math.floor(M);q=H+1;M%=1;H=n[H];const W=n[q];return q>=n.length||T||"string"===typeof H||"string"===typeof W?H:H*(1-M)+W*M}function z(n,q){const u=q?1:-1,N=r(q),ba=v(q);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...D].includes(n))return(T,ka)=>"number"===typeof T&&"number"===typeof ka?N(T,ka):"string"===typeof T&&"string"===typeof ka?ba(T,ka):
u;if("esriFieldTypeDate"===n)return(T,ka)=>{T=(new Date(T)).getTime();ka=(new Date(ka)).getTime();return isNaN(T)||isNaN(ka)?u:N(T,ka)};if(D.has(n))return(T,ka)=>N(T,ka);if("esriFieldTypeString"===n)return(T,ka)=>ba(T,ka);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const T=v(q);return(ka,M)=>T(t(ka),t(M))}return q?(T,ka)=>1:(T,ka)=>-1}function v(n){return n?(q,u)=>{var N,ba;q=null==(N=q)?void 0:N.toUpperCase();u=null==(ba=u)?void 0:ba.toUpperCase();return q>u?-1:q<u?1:0}:(q,u)=>{var N,
ba;q=null==(N=q)?void 0:N.toUpperCase();u=null==(ba=u)?void 0:ba.toUpperCase();return q<u?-1:q>u?1:0}}function r(n){return n?(q,u)=>u-q:(q,u)=>q-u}function t(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function y(n,q){const u=I({field:q.field,normalizationType:q.normalizationType,normalizationField:q.normalizationField,classificationMethod:q.classificationMethod,standardDeviationInterval:q.standardDeviationInterval,
breakCount:q.numClasses||5});n=G(n,q.minValue,q.maxValue);return Z.createGenerateRendererClassBreaks({definition:u,values:n,normalizationTotal:q.normalizationTotal})}function G(n,q,u){q=null==q?-Infinity:q;u=null==u?Infinity:u;return n.filter(N=>Number.isFinite(N)&&N>=q&&N<=u)}function I(n){const q=n.field,u=n.classificationMethod||"equal-interval",N=n.normalizationType,ba=n.normalizationField,T=new d;T.classificationField=q;T.breakCount=n.breakCount;T.classificationMethod=u;T.standardDeviationInterval=
"standard-deviation"===u?n.standardDeviationInterval||1:void 0;T.normalizationType=N;T.normalizationField="field"===N?ba:void 0;return T}function m(n,q){const {field:u,classificationMethod:N,standardDeviationInterval:ba,normalizationType:T,normalizationField:ka,normalizationTotal:M,minValue:H,maxValue:W}=q,V=q.numBins||10;let K=q=null,E=null;N&&"equal-interval"!==N||T?({classBreaks:n}=y(n,{field:u,normalizationType:T,normalizationField:ka,normalizationTotal:M,classificationMethod:N,standardDeviationInterval:ba,
minValue:H,maxValue:W,numClasses:V}),q=n[0].minValue,K=n[n.length-1].maxValue,E=n.map(l=>[l.minValue,l.maxValue])):(null!=H&&null!=W?(q=H,K=W):(n=p({values:n,minValue:H,maxValue:W,useSampleStdDev:!T,supportsNullCount:Q({normalizationType:T,normalizationField:ka,minValue:H,maxValue:W})}),q=n.min,K=n.max),E=c(q,K,V));return{min:q,max:K,intervals:E}}function J(n,q){let u=-1;for(let N=n.length-1;0<=N;N--)if(q>=n[N][0]){u=N;break}return u}function c(n,q,u){const N=(q-n)/u,ba=[];let T;for(let ka=1;ka<=
u;ka++)T=n+N,T=Number(T.toFixed(16)),ba.push([n,ka===u?q:T]),n=T;return ba}const h=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,D=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),B="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=y;k.calculateHistogram=function(n,q){const {min:u,max:N,intervals:ba}=m(n,q),T=ba.map((ka,M)=>({minValue:ba[M][0],maxValue:ba[M][1],count:0}));for(const ka of n)null!=ka&&ka>=u&&
ka<=N&&(n=J(ba,ka),-1<n&&T[n].count++);return{bins:T,minValue:u,maxValue:N,normalizationTotal:q.normalizationTotal}};k.calculatePercentile=x;k.calculateStatistics=p;k.calculateStringStatistics=function(n){const q=n.returnDistinct?[...new Set(n.values)]:n.values,u=q.filter(ba=>null!=ba).length,N={count:u};n.supportsNullCount&&(N.nullcount=q.length-u);n.percentileParams&&(N.median=x(q,n.percentileParams));return N};k.calculateUniqueValuesCount=function(n){const q={};for(let u of n){if(null==u||"string"===
typeof u&&""===u.trim())u=null;null==q[u]?q[u]={count:1,data:u}:q[u].count++}return{count:q}};k.createClassBreaksDefinition=I;k.createUVResult=function(n,q,u){const N=n.count;n=[];u&&q&&"coded-value"===q.type&&q.codedValues.forEach(ba=>{ba=ba.code;N.hasOwnProperty(ba)||(N[ba]={data:ba,count:0})});for(const ba in N)q=N[ba],n.push({value:q.data,count:q.count,label:q.label});return{uniqueValueInfos:n}};k.getAttributeComparator=z;k.getEqualIntervalBins=c;k.getNormalizedValue=function(n,q,u,N){let ba=
null;switch(q){case "log":0!==n&&(ba=Math.log(n)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(N)&&0!==N&&(ba=n/N*100);break;case "field":Number.isFinite(u)&&0!==u&&(ba=n/u);break;case "natural-log":0<n&&(ba=Math.log(n));break;case "square-root":0<n&&(ba=n**.5)}return ba};k.isNullCountSupported=Q;k.processSummaryStatisticsResult=function(n,q){let u;for(u in n)B.includes(u)&&(Number.isFinite(n[u])||(n[u]=null));if(!q)return n;["avg","stddev","variance"].forEach(N=>{null!=n[N]&&(n[N]=Math.ceil(n[N]))});
return n};k.resolveCBResult=function(n,q){let u=n.classBreaks;const N=u[0].minValue,ba=u[u.length-1].maxValue,T="standard-deviation"===q;u=u.map(ka=>{const M=ka.label;ka={minValue:ka.minValue,maxValue:ka.maxValue,label:M};if(T&&M){const H=M.match(h).map(W=>+W.trim());2===H.length?(ka.minStdDev=H[0],ka.maxStdDev=H[1],0>H[0]&&0<H[1]&&(ka.hasAvg=!0)):1===H.length&&(M.includes("\x3c")?(ka.minStdDev=null,ka.maxStdDev=H[0]):M.includes("\x3e")&&(ka.minStdDev=H[0],ka.maxStdDev=null))}return ka});return{minValue:N,
maxValue:ba,classBreakInfos:u,normalizationTotal:n.normalizationTotal}};k.statisticTypes=B;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,d,Z,Q,p,x,z,v,r){p=new Z.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Z=new Z.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});r=function(t){function y(){var G=t.apply(this,arguments)||this;G.breakCount=null;G.classificationField=
null;G.classificationMethod=null;G.normalizationField=null;G.normalizationType=null;G.type="class-breaks-definition";return G}k._inheritsLoose(y,t);k._createClass(y,[{key:"standardDeviationInterval",set:function(G){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",G)}},{key:"definedInterval",set:function(G){"defined-interval"===this.classificationMethod&&this._set("definedInterval",G)}}]);return y}(r);d.__decorate([Q.property({json:{write:!0}})],r.prototype,"breakCount",
void 0);d.__decorate([Q.property({json:{write:!0}})],r.prototype,"classificationField",void 0);d.__decorate([Q.property({type:String,json:{read:p.read,write:p.write}})],r.prototype,"classificationMethod",void 0);d.__decorate([Q.property({json:{write:!0}})],r.prototype,"normalizationField",void 0);d.__decorate([Q.property({json:{read:Z.read,write:Z.write}})],r.prototype,"normalizationType",void 0);d.__decorate([Q.property({value:null,json:{write:!0}})],r.prototype,"standardDeviationInterval",null);
d.__decorate([Q.property({value:null,json:{write:!0}})],r.prototype,"definedInterval",null);d.__decorate([Q.property()],r.prototype,"type",void 0);return r=d.__decorate([v.subclass("esri.rest.support.ClassBreaksDefinition")],r)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y){Z=new Z.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Q=function(G){function I(){var m=G.apply(this,arguments)||this;m.baseSymbol=null;m.colorRamp=null;m.type=null;return m}k._inheritsLoose(I,G);return I}(Q.JSONSupport);d.__decorate([p.property({type:y,json:{write:!0}})],Q.prototype,"baseSymbol",void 0);d.__decorate([p.property({types:t.types,json:{read:{reader:t.fromJSON},write:!0}})],Q.prototype,"colorRamp",void 0);d.__decorate([p.property({json:{read:Z.read,
write:Z.write}})],Q.prototype,"type",void 0);return Q=d.__decorate([r.subclass("esri.rest.support.ClassificationDefinition")],Q)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,d,Z,Q){Z={key:"type",base:Z,typeMap:{algorithmic:d,multipart:Q}};k.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?d.fromJSON(p):"multipart"===p.type?Q.fromJSON(p):null:null};k.types=Z;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,d,Z,Q,p,x,z,v,r){var t;r=t=function(y){function G(I){I=y.call(this,I)||this;I.algorithm=null;
I.fromColor=null;I.toColor=null;I.type="algorithmic";return I}k._inheritsLoose(G,y);G.prototype.clone=function(){return new t({fromColor:Q.clone(this.fromColor),toColor:Q.clone(this.toColor),algorithm:this.algorithm})};return G}(r);d.__decorate([z.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],r.prototype,"algorithm",void 0);d.__decorate([p.property({type:Z,json:{type:[x.Integer],write:!0}})],r.prototype,"fromColor",void 0);d.__decorate([p.property({type:Z,
json:{type:[x.Integer],write:!0}})],r.prototype,"toColor",void 0);d.__decorate([p.property({type:["algorithmic"]})],r.prototype,"type",void 0);return r=t=d.__decorate([v.subclass("esri.rest.support.AlgorithmicColorRamp")],r)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,d,Z){k.enumeration=function(Q,p={}){var x;Q=Q instanceof d.JSONMap?Q:new d.JSONMap(Q,p);Q={type:(null!=(x=null==p?void 0:p.ignoreUnknown)?x:1)?Q.apiValues:
String,json:{type:Q.jsonValues,read:null!=p&&p.readOnly?!1:{reader:Q.read},write:{writer:Q.write}}};void 0!==(null==p?void 0:p.readOnly)&&(Q.readOnly=!!p.readOnly);void 0!==(null==p?void 0:p.default)&&(Q.json.default=p.default);void 0!==(null==p?void 0:p.name)&&(Q.json.name=p.name);return Z.property(Q)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Z,Q,p,x,z,v){Z=function(r){function t(y){y=r.call(this,y)||this;y.type=null;return y}k._inheritsLoose(t,r);return t}(Z.JSONSupport);d.__decorate([Q.property({readOnly:!0,json:{read:!1,write:!0}})],Z.prototype,"type",void 0);return Z=d.__decorate([v.subclass("esri.rest.support.ColorRamp")],Z)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,d,Z,Q,p,x,z,v){var r;p=r=function(t){function y(G){G=t.call(this,G)||this;G.colorRamps=null;G.type="multipart";return G}k._inheritsLoose(y,t);y.prototype.clone=function(){return new r({colorRamps:Z.clone(this.colorRamps)})};return y}(v);d.__decorate([Q.property({type:[z],json:{write:!0}})],p.prototype,"colorRamps",void 0);d.__decorate([Q.property({type:["multipart"]})],p.prototype,"type",void 0);return p=r=d.__decorate([x.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y){Q=new Q.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let G=0;p=function(I){function m(c){c=I.call(this,c)||this;c.id=`sym${G++}`;c.type=null;c.color=new Z([0,0,0,1]);
return c}k._inheritsLoose(m,I);var J=m.prototype;J.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};J.collectRequiredFields=function(){var c=k._asyncToGenerator(function*(h,D){});return function(h,D){return c.apply(this,arguments)}}();J.hash=function(){return JSON.stringify(this.toJSON())};J.clone=function(){};return m}(p.JSONSupport);d.__decorate([x.property({type:Q.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Q.write}}})],p.prototype,"type",void 0);d.__decorate([x.property({type:Z,
json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);d.__decorate([t.reader("color")],p.prototype,"readColor",null);return p=d.__decorate([y.subclass("esri.symbols.Symbol")],p)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function d(y){const {classificationMethod:G,breakCount:I,normalizationType:m,definedInterval:J}=y.definition,c=[];var h=y.values;if(0===h.length)return[];h=h.sort((N,ba)=>N-ba);var D=h[0],B=h[h.length-1];if("equal-interval"===G)if(h.length>=
I){h=(B-D)/I;y=D;for(var n=1;n<I;n++){var q=Number((D+n*h).toFixed(6));c.push({minValue:y,maxValue:q,label:Z(y,q,m)});y=q}c.push({minValue:y,maxValue:B,label:Z(y,B,m)})}else h.forEach(N=>{c.push({minValue:N,maxValue:N,label:Z(N,N,m)})});else if("natural-breaks"===G){h=Q(h);y=p(h.uniqueValues,y.valueFrequency||h.valueFrequency,I);for(n=1;n<I;n++)h.uniqueValues.length>n&&(q=Number(h.uniqueValues[y[n]].toFixed(6)),c.push({minValue:D,maxValue:q,label:Z(D,q,m)}),D=q);c.push({minValue:D,maxValue:B,label:Z(D,
B,m)})}else if("quantile"===G)if(h.length>=I&&D!==B){y=Math.ceil(h.length/I);n=0;for(q=1;q<I;q++){var u=y+n-1;u>h.length&&(u=h.length-1);0>u&&(u=0);c.push({minValue:D,maxValue:h[u],label:Z(D,h[u],m)});D=h[u];n+=y;y=Math.ceil((h.length-n)/(I-q))}c.push({minValue:D,maxValue:B,label:Z(D,B,m)})}else for(B=-1,D=0;D<h.length;D++)y=h[D],y!==B&&(B=y,c.push({minValue:B,maxValue:y,label:Z(B,y,m)}),B=y);else if("standard-deviation"===G)if(y=v(h),n=r(h,y),0===n)c.push({minValue:h[0],maxValue:h[0],label:Z(h[0],
h[0],m)});else{h=z(D,B,I,y,n)*n;n=0;for(q=I;1<=q;q--)u=Number((y-(q-.5)*h).toFixed(6)),c.push({minValue:D,maxValue:u,label:Z(D,u,m)}),D=u,n++;q=Number((y+.5*h).toFixed(6));c.push({minValue:D,maxValue:q,label:Z(D,q,m)});D=q;n++;for(u=1;u<=I;u++)q=n===2*I?B:Number((y+(u+.5)*h).toFixed(6)),c.push({minValue:D,maxValue:q,label:Z(D,q,m)}),D=q,n++}else if("defined-interval"===G){if(!J)return c;B=h[0];h=h[h.length-1];D=Math.ceil((h-B)/J);y=B;for(n=1;n<D;n++)q=Number((B+n*J).toFixed(6)),c.push({minValue:y,
maxValue:q,label:Z(y,q,m)}),y=q;c.push({minValue:y,maxValue:h,label:Z(y,h,m)})}return c}function Z(y,G,I){let m=null;return m=y===G?I&&"percent-of-total"===I?y+"%":y.toString():I&&"percent-of-total"===I?y+"% - "+G+"%":y+" - "+G}function Q(y){const G=[],I=[];let m=Number.MIN_VALUE,J=1,c=-1;for(let h=0;h<y.length;h++){const D=y[h];D===m?(J++,I[c]=J):null!==D&&(G.push(D),m=D,J=1,I.push(J),c++)}return{uniqueValues:G,valueFrequency:I}}function p(y,G,I){var m=y.length;const J=[];I>m&&(I=m);for(var c=0;c<
I;c++)J.push(Math.round(c*m/I-1));J.push(m-1);c=x(J,y,G,I);{m=c.mean;c=c.sdcm;var h=I,D=0,B=0;let q=0,u=0,N=!0;for(let ba=0;2>ba&&N;ba++){0===ba&&(N=!1);for(var n=0;n<h-1;n++)for(;J[n+1]+1!==J[n+2];)if(J[n+1]+=1,D=t(n,J,y,G),q=D.sbMean,D=D.sbSdcm,B=t(n+1,J,y,G),u=B.sbMean,B=B.sbSdcm,D+B<c[n]+c[n+1])c[n]=D,c[n+1]=B,m[n]=q,m[n+1]=u,N=!0;else{--J[n+1];break}for(n=h-1;0<n;n--)for(;J[n]!==J[n-1]+1;)if(--J[n],D=t(n-1,J,y,G),q=D.sbMean,D=D.sbSdcm,B=t(n,J,y,G),u=B.sbMean,B=B.sbSdcm,D+B<c[n-1]+c[n])c[n-1]=
D,c[n]=B,m[n-1]=q,m[n]=u,N=!0;else{J[n]+=1;break}}m=N}m&&(c=x(J,y,G,I));return J}function x(y,G,I,m){let J=[];var c=[],h=[];let D=0;const B=[],n=[];for(var q=0;q<m;q++){var u=t(q,y,G,I);B.push(u.sbMean);n.push(u.sbSdcm);D+=n[q]}u=D;for(q=!0;q||D<u;){q=!1;J=[];for(c=0;c<m;c++)J.push(y[c]);for(h=0;h<m;h++)for(u=y[h]+1;u<=y[h+1];u++)if(c=G[u],0<h&&u!==y[h+1]&&Math.abs(c-B[h])>Math.abs(c-B[h-1]))y[h]=u;else if(h<m-1&&y[h]!==u-1&&Math.abs(c-B[h])>Math.abs(c-B[h+1])){y[h+1]=u-1;break}u=D;D=0;c=[];h=[];
for(let N=0;N<m;N++){c.push(B[N]);h.push(n[N]);const ba=t(N,y,G,I);B[N]=ba.sbMean;n[N]=ba.sbSdcm;D+=n[N]}}if(D>u){for(G=0;G<m;G++)y[G]=J[G],B[G]=c[G],n[G]=h[G];D=u}return{mean:B,sdcm:n}}function z(y,G,I,m,J){y=Math.max(m-y,G-m)/J/I;return 1<=y?1:.5<=y?.5:.25}function v(y){let G=0;for(let I=0;I<y.length;I++)G+=y[I];return G/=y.length}function r(y,G){let I=0;for(let m=0;m<y.length;m++){const J=y[m];I+=(J-G)*(J-G)}I/=y.length;return Math.sqrt(I)}function t(y,G,I,m){var J=0,c=0;for(var h=G[y]+1;h<=G[y+
1];h++){const D=m[h];J+=I[h]*D;c+=D}0>=c&&console.log("Exception in Natural Breaks calculation");J/=c;c=0;for(h=G[y]+1;h<=G[y+1];h++)c+=m[h]*(I[h]-J)**2;return{sbMean:J,sbSdcm:c}}k.createGenerateRendererClassBreaks=function(y){const {normalizationTotal:G}=y;return{classBreaks:d(y),normalizationTotal:G}};k.createGenerateRendererUniqueValues=function(y){y=Q(y);const G=[],I=y.uniqueValues.length;for(let m=0;m<I;m++){const J=y.uniqueValues[m];G.push({value:J,count:y.valueFrequency[m],label:J.toString()})}return{uniqueValues:G}};
Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m){function J(V,K,E,l=V.hasZ,L=V.hasM){if(p.isNone(K))return null;const X=V.hasZ&&l,P=V.hasM&&L;return E?(V=G.quantizeOptimizedGeometry(M,K,V.hasZ,V.hasM,"esriGeometryPoint",E,l,L),G.convertToPoint(V,X,P)):G.convertToPoint(K,X,P)}function c(){c=Z._asyncToGenerator(function*(V,K,E){const {outFields:l,orderByFields:L,groupByFieldsForStatistics:X,outStatistics:P}=V;if(l)for(var ja=0;ja<l.length;ja++)l[ja]=l[ja].trim();if(L)for(ja=0;ja<L.length;ja++)L[ja]=L[ja].trim();
if(X)for(ja=0;ja<X.length;ja++)X[ja]=X[ja].trim();if(P)for(ja=0;ja<P.length;ja++)P[ja].onStatisticField&&(P[ja].onStatisticField=P[ja].onStatisticField.trim());V.geometry&&!V.outSR&&(V.outSR=V.geometry.spatialReference);return h(V,K,E)});return c.apply(this,arguments)}function h(V,K,E){return D.apply(this,arguments)}function D(){D=Z._asyncToGenerator(function*(V,K,E){if(!V)return null;var {where:l}=V;V.where=l=l&&l.trim();if(!l||/^1 *= *1$/.test(l)||K&&K===l)V.where=null;if(!V.geometry)return V;K=
yield B(V);V.distance=0;V.units=null;"esriSpatialRelEnvelopeIntersects"===V.spatialRel&&({spatialReference:l}=V.geometry,K=z.getGeometryExtent(K),K.spatialReference=l);V.geometry=K;yield m.checkProjectionSupport(K.spatialReference,E);K=(yield r.normalizeCentralMeridian(v.fromJSON(K)))[0];if(p.isNone(K))throw ba;K=K.toJSON();K=yield m.project(K,K.spatialReference,E);if(!K)throw ba;K.spatialReference=E;V.geometry=K;return V});return D.apply(this,arguments)}function B(V){return n.apply(this,arguments)}
function n(){n=Z._asyncToGenerator(function*(V){const {geometry:K,distance:E,units:l}=V;if(null==E||"vertexAttributes"in K)return K;var L=K.spatialReference;V=l?N.fromJSON(l):x.getUnitString(L);L=L&&(t.isGeographic(L)||t.isWebMercator(L))?K:yield m.checkProjectionSupport(L,t.WGS84).then(()=>m.project(K,t.WGS84));return(yield q())(L.spatialReference,L,E,V)});return n.apply(this,arguments)}function q(){return u.apply(this,arguments)}function u(){u=Z._asyncToGenerator(function*(){return(yield new Promise((V,
K)=>k(["../../../geometry/geometryEngineJSON"],V,K))).geodesicBuffer});return u.apply(this,arguments)}const N=new Q.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),ba=Object.freeze({}),T=new I,ka=new I,M=new I,H={esriGeometryPoint:G.convertToPoint,esriGeometryPolyline:G.convertToPolyline,esriGeometryPolygon:G.convertToPolygon,esriGeometryMultipoint:G.convertToMultipoint},
W=(V,K)=>"_geVersion"!==V?K:void 0;d.QUERY_ENGINE_EMPTY_RESULT=ba;d.cleanFromGeometryEngine=function(V){return V&&"_geVersion"in V?JSON.parse(JSON.stringify(V,W)):V};d.getCentroid=function(V,K,E){if("esriGeometryPolygon"!==V.geometryType||!K||!K.centroid&&!K.geometry)return null;K.centroid||(K.centroid=y.getCentroidOptimizedGeometry(new I,K.geometry,V.hasZ,V.hasM));return J(V,K.centroid,E)};d.getGeometry=function(V,K,E,l,L,X,P=K,ja=E){const ma=K&&P,R=E&&ja;l=p.isSome(l)?"coords"in l?l:l.geometry:
null;if(p.isNone(l))return null;if(L)return K=G.generalizeOptimizedGeometry(ka,l,K,E,V,L,P,ja),X&&(K=G.quantizeOptimizedGeometry(M,K,ma,R,V,X)),H[V](K,ma,R);if(X)return X=G.quantizeOptimizedGeometry(M,l,K,E,V,X,P,ja),H[V](X,ma,R);G.removeZMValues(T,l,K,E,P,ja);return H[V](T,ma,R)};d.normalizeQuery=function(V,K,E){return c.apply(this,arguments)};d.normalizeQueryLike=h;d.transformCentroid=J;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(k,d,Z,Q,p,x,z,v){function r(F,O,ea){if(F)for(const ra of F)(F=(F=x.getDeepValue(ra,O))&&"function"!==typeof F&&ea.get(F))&&x.setDeepValue(ra,F.name,O)}function t(F,O){if(!F||!O)return[];g.clear();y(g,F,O);return Array.from(g).sort()}function y(F,O,ea){var ra;if(ea)if(null!=O&&null!=(ra=O.fields)&&ra.length)if(ea.includes("*"))for(const {name:sa}of O.fields)F.add(sa);else for(const sa of ea)G(F,O,sa);else if(ea.includes("*"))F.clear(),F.add("*");else for(const sa of ea)F.add(sa)}function G(F,
O,ea){"string"===typeof ea&&(O?(O=O.get(ea))&&F.add(O.name):F.add(ea))}function I(F,O,ea){return m.apply(this,arguments)}function m(){m=Z._asyncToGenerator(function*(F,O,ea){var ra;if(ea){var {arcadeUtils:sa}=yield v.loadArcade();ea=sa.extractFieldNames(ea,null==O?void 0:null==(ra=O.fields)?void 0:ra.map(ya=>ya.name));for(const ya of ea)G(F,O,ya)}});return m.apply(this,arguments)}function J(F,O,ea){return c.apply(this,arguments)}function c(){c=Z._asyncToGenerator(function*(F,O,ea){if(ea&&"1\x3d1"!==
ea){const ra=(yield new Promise((sa,ya)=>k(["../../core/sql/WhereClause"],sa,ya))).WhereClause.create(ea,O);if(!ra.isStandardized)throw new Q("fieldUtils:collectFilterFields","Where clause is not standardized",{where:ea});y(F,O,ra.fieldNames)}});return c.apply(this,arguments)}function h(F,O){for(const ea of F)if(ea&&ea.valueType&&ea.valueType===O)return ea.name;return null}function D(){D=Z._asyncToGenerator(function*(F){if(!F)return[];const O=new Set;yield B(O,F);return Array.from(O).sort()});return D.apply(this,
arguments)}function B(F,O){return n.apply(this,arguments)}function n(){n=Z._asyncToGenerator(function*(F,O){if(O){var ea=x.getDeepValue("elevationInfo.featureExpressionInfo",O);if(ea)return ea.collectRequiredFields(F,O.fieldsIndex)}});return n.apply(this,arguments)}function q(F,O,ea){return u.apply(this,arguments)}function u(){u=Z._asyncToGenerator(function*(F,O,ea){ea.outStatistic.onStatisticValueExpression?I(F,O,ea.outStatistic.onStatisticValueExpression):F.add(ea.outStatistic.onStatisticField)});
return u.apply(this,arguments)}function N(){N=Z._asyncToGenerator(function*(F,O,ea){var ra,sa;if(O&&ea&&"fields"in ea){var ya=[];null!=(ra=ea.popupTemplate)&&ra.expressionInfos&&ya.push(...ea.popupTemplate.expressionInfos.map(Ba=>I(F,O.fieldsIndex,Ba.expression)));if(Array.isArray(null==(sa=ea.popupTemplate)?void 0:sa.content)){ra=ea.popupTemplate.content;for(const Ba of ra)"expression"===Ba.type&&Ba.expressionInfo&&ya.push(I(F,O.fieldsIndex,Ba.expressionInfo.expression))}ea.fields&&ya.push(...ea.fields.map(Ba=>
q(F,O.fieldsIndex,Ba)));yield Promise.all(ya)}});return N.apply(this,arguments)}function ba(){ba=Z._asyncToGenerator(function*(F,O,ea){O&&(O.timeInfo&&p.isSome(ea)&&ea.timeExtent&&y(F,O.fieldsIndex,[O.timeInfo.startField,O.timeInfo.endField]),O.floorInfo&&y(F,O.fieldsIndex,[O.floorInfo.floorField]),p.isSome(ea)&&p.isSome(ea.where)&&(yield J(F,O.fieldsIndex,ea.where)))});return ba.apply(this,arguments)}function T(){T=Z._asyncToGenerator(function*(F,O,ea){O&&ea&&(yield Promise.all(ea.map(ra=>ka(F,O,
ra))))});return T.apply(this,arguments)}function ka(F,O,ea){return M.apply(this,arguments)}function M(){M=Z._asyncToGenerator(function*(F,O,ea){O&&ea&&(ea.valueExpression?yield I(F,O.fieldsIndex,ea.valueExpression):ea.field&&G(F,O.fieldsIndex,ea.field))});return M.apply(this,arguments)}function H(){H=Z._asyncToGenerator(function*(F){if(!F)return[];const O="timeInfo"in F&&F.timeInfo;return O?t(F.fieldsIndex,[F.trackIdField,O.startField,O.endField]):[]});return H.apply(this,arguments)}function W(){W=
Z._asyncToGenerator(function*(F){if(!F)return[];const O=new Set;yield V(O,F);return Array.from(O).sort()});return W.apply(this,arguments)}function V(F,O){return K.apply(this,arguments)}function K(){K=Z._asyncToGenerator(function*(F,O){const {labelingInfo:ea,fieldsIndex:ra}=O;ea&&ea.length&&(yield Promise.all(ea.map(sa=>E(F,ra,sa))))});return K.apply(this,arguments)}function E(F,O,ea){return l.apply(this,arguments)}function l(){l=Z._asyncToGenerator(function*(F,O,ea){if(ea){var ra=ea.getLabelExpression();
ea=ea.where;"arcade"===ra.type?yield I(F,O,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{G(F,O,sa.slice(1,-1))});yield J(F,O,ea)}});return l.apply(this,arguments)}function L(F){return"number"===typeof F&&!isNaN(F)&&isFinite(F)}function X(F){return null===F||L(F)}function P(F){return null===F||aa(F)}function ja(F){return null!=F&&"string"===typeof F}function ma(F){return null===F||ja(F)}function R(){return!0}function na(F,O){let ea;switch(F.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ea=
F.nullable?P:aa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ea=F.nullable?X:L;break;case "string":case "esriFieldTypeString":ea=F.nullable?ma:ja;break;default:ea=R}return 1===arguments.length?ea:ea(O)}function oa(F){return null!=F&&A.has(F.type)}function qa(F,O){return F.nullable&&null===O?null:oa(F)&&!xa(F.type,Number(O))?d.NumericRangeValidationError.OUT_OF_RANGE:na(F,O)?F.domain?z.validateDomainValue(F.domain,O):null:d.TypeValidationError.INVALID_TYPE}
function xa(F,O){return(F="string"===typeof F?Na(F):F)?F.isInteger?aa(O)&&O>=F.min&&O<=F.max:O>=F.min&&O<=F.max:!1}function Na(F){switch(F){case "esriFieldTypeSmallInteger":case "small-integer":return S;case "esriFieldTypeInteger":case "integer":return U;case "esriFieldTypeSingle":case "single":return ia;case "esriFieldTypeDouble":case "double":return fa}}function Ja(F,O,ea){if(!O||!O.attributes||!F){if(p.isSome(ea))for(var ra of F)ea.add(ra);return!0}O=O.attributes;ra=!1;for(const sa of F)if(!(sa in
O))if(ra=!0,p.isSome(ea))ea.add(sa);else break;return ra}function Ma(){Ma=Z._asyncToGenerator(function*(F,O){const ea=new Set;for(const ra of O)yield I(ea,F.fieldsIndex,ra);return Array.from(ea).sort()});return Ma.apply(this,arguments)}const wa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),a=["field","normalizationField"],g=new Set,aa=(()=>"isInteger"in Number?
Number.isInteger:F=>"number"===typeof F&&isFinite(F)&&Math.floor(F)===F)(),e=["integer","small-integer","single","double"],A=new Set([...e,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const S={min:-32768,max:32767,isInteger:!0},U={min:-2147483648,max:2147483647,isInteger:!0},ia={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=I;d.collectElevationFields=B;d.collectFeatureReductionFields=function(F,O,ea){return N.apply(this,arguments)};d.collectField=G;d.collectFields=y;d.collectFilterFields=function(F,O,ea){return ba.apply(this,arguments)};d.collectLabelingFields=V;d.collectOrderByInfos=function(F,O,ea){return T.apply(this,
arguments)};d.doubleRange=fa;d.featureHasFields=function(F,O){return!Ja(F,O,null)};d.fixFields=t;d.fixRendererFields=function(F,O){if(null!=F&&null!=O)for(const ea of Array.isArray(F)?F:[F])if(r(wa,ea,O),"visualVariables"in ea&&ea.visualVariables)for(const ra of ea.visualVariables)r(a,ra,O)};d.fixTimeInfoFields=function(F,O){if(null!=F&&null!=O&&O.fields.length)if("startField"in F){var ea=O.get(F.startField);O=O.get(F.endField);F.startField=ea&&ea.name||null;F.endField=O&&O.name||null}else ea=O.get(F.startTimeField),
O=O.get(F.endTimeField),F.startTimeField=ea&&ea.name||null,F.endTimeField=O&&O.name||null};d.getDisplayFieldName=function({displayField:F,fields:O}){if(F)return F;if(!O||!O.length)return null;if(!(F=h(O,"name-or-title")||h(O,"unique-identifier")||h(O,"type-or-category")))a:{for(const ea of O)if(ea&&ea.name&&(O=ea.name.toLowerCase(),O.includes("name")||O.includes("title"))){F=ea.name;break a}F=null}return F};d.getElevationFields=function(F){return D.apply(this,arguments)};d.getExpressionFields=function(F,
O){return Ma.apply(this,arguments)};d.getFeatureEditFields=function(F){if(!F)return[];const O="editFieldsInfo"in F&&F.editFieldsInfo;return O?t(F.fieldsIndex,[O&&O.creatorField,O&&O.creationDateField,O&&O.editorField,O&&O.editDateField]):[]};d.getFeatureGeometryFields=function(F){if(!F)return[];const O=F.geometryFieldsInfo;return O?t(F.fieldsIndex,[O.shapeAreaField,O.shapeLengthField]):[]};d.getFieldDefaultValue=function(F){const O=F.defaultValue;if(void 0!==O&&na(F,O))return O;if(F.nullable)return null};
d.getFieldRange=function(F){const O=z.getDomainRange(F.domain);if(O)return O;if(oa(F))return Na(F.type)};d.getLabelingFields=function(F){return W.apply(this,arguments)};d.getNumericTypeForValue=function(F){if(!L(F))return null;if(aa(F)){if(F>=S.min&&F<=S.max)return"esriFieldTypeSmallInteger";if(F>=U.min&&F<=U.max)return"esriFieldTypeInteger"}return F>=ia.min&&F<=ia.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(F){return H.apply(this,arguments)};d.integerRange=U;d.isDateField=
function(F){return null!=F&&("date"===F.type||"esriFieldTypeDate"===F.type)};d.isNumberInRange=xa;d.isNumericField=oa;d.isRasterPixelValueField=function(F){return["raster.itempixelvalue","raster.servicepixelvalue"].some(O=>F.toLowerCase().startsWith(O))};d.isStringField=function(F){return null!=F&&("string"===F.type||"esriFieldTypeString"===F.type)};d.isValidFieldValue=function(F,O){return null===qa(F,O)};d.isValueMatchingFieldType=na;d.numericTypes=e;d.packFields=function(F,O,ea=1){if(!O||!F)return[];
if(O.includes("*"))return["*"];O=t(F,O);return O.length/F.fields.length>=ea?["*"]:O};d.populateMissingFields=Ja;d.rendererFields=wa;d.sanitizeNullFieldValue=function(F){return null==F||"number"===typeof F&&isNaN(F)?null:F};d.singleRange=ia;d.smallIntegerRange=S;d.unpackFieldNames=function(F,O){return p.isNone(O)||p.isNone(F)?[]:O.includes("*")?F.fields.map(ea=>ea.name):O};d.validateFieldValue=qa;d.validationErrorToString=function(F,O,ea){switch(F){case z.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ea} is not in the coded domain - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;
case z.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ea} is out of the range of valid values - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${ea} is not a valid value for the field type - field: ${O.name}, type: ${O.type}, nullable: ${O.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Na(O.type);return`Value ${ea} is out of range for the number type - field: ${O.name}, type: ${O.type}, value range is ${ra} to ${sa}`}}};
d.visualVariableFields=a;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(k){function d(Z,Q){switch(Z.type){case "range":{const p="range"in Z?Z.range[1]:Z.maxValue;if(+Q<("range"in Z?Z.range[0]:Z.minValue)||+Q>p)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Z.codedValues||Z.codedValues.every(p=>null==p||p.code!==Q))return k.DomainValidationError.INVALID_CODED_VALUE}return null}
k.DomainValidationError=void 0;(function(Z){Z.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Z.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(Z){if(Z&&"range"===Z.type)return{min:"range"in Z?Z.range[0]:Z.minValue,max:"range"in Z?Z.range[1]:Z.maxValue}};k.isValidDomainValue=function(Z,Q){return null===d(Z,Q)};k.validateDomainValue=d;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(k,d,Z,Q,p,x){function z(){v||(v=Z._asyncToGenerator(function*(){const t=yield new Promise((y,G)=>k(["./arcadeUtils"],y,G));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})());return v}let v;Q=(t,y,G)=>r.create(t,y,G,null,["$feature","$view"]);
let r=function(){function t(G,I,m,J,c,h,D,B){this.script=G;this.evaluate=c;this.fields=Array.isArray(D)?D:D.fields;this._syntaxTree=J;this._arcade=I;this._arcadeDictionary=m;this._arcadeFeature=h;this._spatialReference=B;this._referencesGeometry=I.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}t.create=function(){var G=Z._asyncToGenerator(function*(I,m,J,c,h,D){const {arcade:B,Feature:n,Dictionary:q}=yield z(),u=x.fromJSON(m);
m=B.parseScript(I,D);h=h.reduce((M,H)=>({...M,[H]:null}),{});let N=null;p.isSome(c)&&(N=new q(c),N.immutable=!0,h.$config=null);c=B.scriptUsesGeometryEngine(m)&&B.enableGeometrySupport();D=B.scriptUsesFeatureSet(m)&&B.enableFeatureSetSupport();const ba=B.scriptIsAsync(m)&&B.enableAsyncSupport();h={vars:h,spatialReference:u,useAsync:!!ba};const T=new q;T.immutable=!1;T.setField("scale",0);const ka=B.compileScript(m,h);yield Promise.all([c,D,ba]);return new t(I,B,q,m,M=>{"$view"in M&&M.$view&&(T.setField("scale",
M.$view.scale),M.$view=T);N&&(M.$config=N);return ka({vars:M,spatialReference:u})},new n,J,u)});return function(I,m,J,c,h,D){return G.apply(this,arguments)}}();var y=t.prototype;y.repurposeFeature=function(G){G.geometry&&!G.geometry.spatialReference&&(G.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(G.geometry,G.attributes,{fields:this.fields});return this._arcadeFeature};y.createDictionary=function(){return new this._arcadeDictionary};y.referencesMember=
function(G){return this._arcade.referencesMember(this._syntaxTree,G)};y.referencesFunction=function(G){return this._arcade.referencesFunction(this._syntaxTree,G)};y.referencesGeometry=function(){return this._referencesGeometry};y.referencesScale=function(){return this._referencesScale};y.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return t}();d.ArcadeExpression=r;d.createDictionaryExpression=(t,y,G,I)=>r.create(t,y,G,I,["$feature","$view"]);
d.createLabelExpression=(t,y,G)=>r.create(t,y,G,null,["$feature"]);d.createRendererExpression=Q;d.createVVExpression=Q;d.loadArcade=z;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I){function m(){return new Promise((D,B)=>k(["../../../geometry/geometryEngineJSON"],D,B))}function J(){J=Z._asyncToGenerator(function*(D,B,n){const {spatialRel:q,geometry:u}=D;if(u){if(!0!==h.spatialRelationship[q])throw new Q("feature-store:unsupported-query","Unsupported query spatial relationship",{query:D});if(v.isValid(u.spatialReference)&&v.isValid(n)){if(!0!==h.queryGeometry[z.getJsonType(u)])throw new Q("feature-store:unsupported-query","Unsupported query geometry type",
{query:D});if(!0!==h.layerGeometry[B])throw new Q("feature-store:unsupported-query","Unsupported layer geometry type",{query:D});if(D.outSR)return G.checkProjectionSupport(D.geometry&&D.geometry.spatialReference,D.outSR)}}});return J.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},h={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(D){if(z.isExtent(D))return!0;if(z.isPolygon(D)){for(const B of D.rings)if(5!==B.length||B[0][0]!==B[1][0]||B[0][0]!==B[4][0]||B[2][0]!==B[3][0]||B[0][1]!==B[3][1]||B[0][1]!==B[4][1]||B[1][1]!==B[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(D,B,n){return J.apply(this,arguments)};d.getSpatialQueryOperator=function(D,
B,n,q,u){if(z.isPolygon(B)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===D||"esriSpatialRelContains"===D)){const N=t.convertFromPolygon(new y,B,!1,!1);return Promise.resolve(ba=>r.polygonContainsPoint(N,!1,!1,ba))}if(z.isPolygon(B)&&"esriGeometryMultipoint"===n){const N=t.convertFromPolygon(new y,B,!1,!1);if("esriSpatialRelContains"===D)return Promise.resolve(ba=>r.polygonContainsMultipoint(N,!1,!1,ba,q,u))}if(z.isExtent(B)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===D||"esriSpatialRelContains"===
D))return Promise.resolve(N=>p.extentContainsPoint(B,I.getGeometry(n,q,u,N)));if(z.isExtent(B)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===D)return Promise.resolve(N=>p.extentContainsMultipoint(B,I.getGeometry(n,q,u,N)));if(z.isExtent(B)&&"esriSpatialRelIntersects"===D){const N=x.getExtentIntersector(n);return Promise.resolve(ba=>N(B,I.getGeometry(n,q,u,ba)))}return m().then(N=>{const ba=N[c[D]].bind(null,B.spatialReference,B);return T=>ba(I.getGeometry(n,q,u,T))})};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,d){k.extentIntersectsExtent=d.extentIntersectsExtent;k.extentIntersectsMultipoint=d.extentIntersectsMultipoint;k.extentIntersectsPoint=d.extentIntersectsPoint;k.extentIntersectsPolygon=d.extentIntersectsPolygon;k.extentIntersectsPolyline=d.extentIntersectsPolyline;k.extentIntersectsRings=d.extentIntersectsRings;k.getFeatureExtentIntersector=
d.getFeatureExtentIntersector;k.isSelfIntersecting=d.isSelfIntersecting;k.segmentIntersects=d.segmentIntersects;k.getExtentIntersector=function(Z){return"mesh"===Z?d.extentIntersectsExtent:d.getFeatureExtentIntersector(Z)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function d(Z,Q,p,x,z){if(!Z)return!1;Q=Q?p?4:3:p?3:2;const {coords:v,lengths:r}=Z;p=!1;Z=0;for(const y of r){var t=
Z;for(let G=Z,I=Z+y*Q;G<I;G+=Q){t=G+Q;t===I&&(t=Z);const m=v[G],J=v[G+1],c=v[t];t=v[t+1];(J<z&&t>=z||t<z&&J>=z)&&m+(z-J)/(t-J)*(c-m)<x&&(p=!p)}Z+=y*Q}return p}k.polygonContainsCoords=d;k.polygonContainsMultipoint=function(Z,Q,p,x,z,v){z=z?v?4:3:v?3:2;const {coords:r,lengths:t}=x;if(!t)return!1;for(let y=0,G=0;y<t.length;y++,G+=z)if(!d(Z,Q,p,r[G],r[G+1]))return!1;return!0};k.polygonContainsPoint=function(Z,Q,p,x){return d(Z,Q,p,x.coords[0],x.coords[1])};Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function d(p,x,z,v,r){if(null!=v&&null!=r)return t=>{const y=p.getAttribute(t,x);t=p.getAttribute(t,z);return(null==y||y<=r)&&(null==t||t>=v)};if(null!=v)return t=>{t=p.getAttribute(t,z);return null==t||t>=v};if(null!=r)return t=>{t=p.getAttribute(t,x);return null==t||t<=r}}function Z(p,x,z,v){if(null!=z&&null!=v&&z===v)return r=>p.getAttribute(r,x)===z;if(null!=z&&null!=v)return r=>
{r=p.getAttribute(r,x);return r>=z&&r<=v};if(null!=z)return r=>p.getAttribute(r,x)>=z;if(null!=v)return r=>p.getAttribute(r,x)<=v}function Q(){return()=>!1}k.getTimeExtent=function(p,x){if(!p)return null;const z=x.featureAdapter,{startTimeField:v,endTimeField:r}=p;let t=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(v&&r)x.forEach(G=>{const I=z.getAttribute(G,v);G=z.getAttribute(G,r);null==I||isNaN(I)||(t=Math.min(t,I));null==G||isNaN(G)||(y=Math.max(y,G))});else{const G=v||r;x.forEach(I=>
{I=z.getAttribute(I,G);null==I||isNaN(I)||(t=Math.min(t,I),y=Math.max(y,I))})}return{start:t,end:y}};k.getTimeOperator=function(p,x,z){if(!x||!p)return null;const {startTimeField:v,endTimeField:r}=p;if(!v&&!r)return null;const {start:t,end:y}=x;return null===t&&null===y?null:void 0===t&&void 0===y?Q():v&&r?d(z,v,r,t,y):Z(z,v||r,t,y)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(k,d){function Z(p){return"oid"===p.type||"esriFieldTypeOID"===p.type}function Q(p){return"global-id"===p.type||"esriFieldTypeGlobalID"===p.type}return function(){function p(z){this.fields=z;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(z){var v=[];for(const r of z)if(z=r&&r.name){const t=z.toLowerCase().trim();this._fieldsMap.set(z,r);this._fieldsMap.set(t,r);v.push(t);
"date"===r.type||"esriFieldTypeDate"===r.type?(this.dateFields.push(r),this._dateFieldsSet.add(r)):d.isNumericField(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r));Z(r)||Q(r)||(r.editable=null==r.editable?!0:!!r.editable,r.nullable=null==r.nullable?!0:!!r.nullable)}v.sort();this.uid=v.join(",")}}var x=p.prototype;x.destroy=function(){this._fieldsMap.clear()};x.has=function(z){return null!=this.get(z)};x.get=function(z){return null!=z?this._fieldsMap.get(z)||this._fieldsMap.get(z.toLowerCase().trim()):
void 0};x.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};x.isNumericField=function(z){return this._numericFieldsSet.has(this.get(z))};x.normalizeFieldName=function(z){if(z=this.get(z))return z.name};k._createClass(p,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const z of this.fields)Z(z)||Q(z)||z.nullable||void 0!==d.getFieldDefaultValue(z)||this._requiredFields.push(z)}return this._requiredFields}}]);return p}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m,J,c,h,D,B){function n(E){return u.has(E)?u.get(E):"number"===typeof E?E:1}const q=x.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(E){E.RESOURCE_CONTROLLER="schedule";E.SLIDE="slide";E.STREAM_DATA_LOADER="stream loader";E.ELEVATION_QUERY="elevation query";E.TERRAIN_SURFACE="terrain";E.SURFACE_GEOMETRY_UPDATES="surface geometry updates";E.GRAPHICS_CORE="Graphics3D";E.I3S_CONTROLLER="I3S";E.POINT_CLOUD_LAYER="point cloud";E.FEATURE_TILE_FETCHER=
"feature fetcher";E.OVERLAY="overlay";E.STAGE="stage";E.GRAPHICS_DECONFLICTOR="graphics deconflictor";E.FILTER_VISIBILITY="Graphics3D filter visibility";E.SCALE_VISIBILITY="Graphics3D scale visibility";E.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";E.POINT_OF_INTEREST_FREQUENT="POI frequent";E.POINT_OF_INTEREST_INFREQUENT="POI infrequent";E.LABELER="labeler";E.FEATURE_QUERY_ENGINE="feature query";E.FEATURE_TILE_TREE="feature tile tree";E.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";E.ELEVATION_ALIGNMENT=
"elevation alignment";E.TEXT_TEXTURE_ATLAS="text texture atlas";E.TEXTURE_UNLOAD="texture unload";E.LINE_OF_SIGHT_TOOL="line of sight tool";E.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";E.ELEVATION_PROFILE="elevation profile";E.SNAPPING="snapping";E.SHADOW_ACCUMULATOR="shadow accumulator";E.CLOUDS_GENERATOR="cloud generator";E[E.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const u=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(E){E[E.ANIMATING=0]="ANIMATING";E[E.INTERACTING=1]="INTERACTING";E[E.IDLE=2]="IDLE"})(k.State||(k.State={}));const N=G.Milliseconds(6.5),ba=G.Milliseconds(1),T=G.Milliseconds(30),ka=G.Milliseconds(1E3/30),M=G.Milliseconds(100);var H;(function(E){let l=function(P){function ja(){var R=P.call(this)||this;R.updating=!0;R._microTaskQueued=!1;R.performanceInfo={total:new v("total"),tasks:new Map};R._frameTaskTimes=new Map;R._budget=new X;R._state=k.State.INTERACTING;R._tasks=
new r;R._runQueue=new r;R._load=0;R._idleStateCallbacks=new r;R._idleUpdatesStartFired=!1;R._maxReschedule=K;R._forceTask=!1;R._debug=!1;R._debugHandle=y.watch(()=>B.SCHEDULER_LOG_SLOW_TASKS,qa=>R._debug=qa,y.initial);for(const qa of Object.keys(k.TaskPriority))R.performanceInfo.tasks.set(k.TaskPriority[qa],new v(k.TaskPriority[qa]));let na;const oa=d._assertThisInitialized(R);R._test={get state(){return z.unwrapOr(na,oa._state)},set state(qa){na=qa},FRAME_SAFETY_BUDGET:N,INTERACTING_BUDGET:ka,IDLE_BUDGET:M,
get availableBudget(){return oa._budget.budget},usedBudget:0,getBudget:()=>oa._budget,setBudget:qa=>oa._budget=qa,updateTask:qa=>R._updateTask(qa),getState:qa=>R._getState(qa),getRuntime:qa=>R._getRuntime(qa),frameTaskTimes:R._frameTaskTimes,resetRuntimes:()=>R._resetRuntimes(),getRunning:()=>R._getRunning()};return R}d._inheritsLoose(ja,P);var ma=ja.prototype;ma.destroy=function(){this._tasks.toArray().forEach(R=>R.remove());this._tasks.clear();z.removeMaybe(this._debugHandle);this.updating=this._microTaskQueued=
!1};ma.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=K,this._schedule(),this.frame()))}))};ma.registerTask=function(R,na){const oa=n(R);na=new L(this,R,na,oa);this._tasks.push(na);this.performanceInfo.tasks.has(R)||this.performanceInfo.tasks.set(R,new v(R));return na};ma.registerIdleStateCallbacks=function(R,na){const oa={idleBegin:R,idleEnd:na};this._idleStateCallbacks.push(oa);
this.state===k.State.IDLE&&this._idleUpdatesStartFired&&oa.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(oa),set idleBegin(xa){qa._idleUpdatesStartFired&&(oa.idleEnd(),qa._state===k.State.IDLE&&xa());oa.idleBegin=xa},set idleEnd(xa){oa.idleEnd=xa}}};ma.updateBudget=function(R){this._test.usedBudget=0;let na=N,oa=R.frameDuration,qa=ba;switch(this.state){case k.State.IDLE:na=G.Milliseconds(0);oa=G.Milliseconds(Math.max(M,R.frameDuration));qa=T;break;case k.State.INTERACTING:oa=
G.Milliseconds(Math.max(ka,R.frameDuration))}oa=G.Milliseconds(oa-R.elapsedFrameTime-na);if(this.state!==k.State.IDLE&&oa<ba&&!this._forceTask)return this._forceTask=!0,!1;oa=G.Milliseconds(Math.max(oa,qa));this._budget.reset(oa,this.state);this._maxReschedule=K;this._updateLoad();return this._schedule()};ma.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(R=>
R.idleBegin()));this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ma.stopFrame=function(){this._budget.reset(G.Milliseconds(0),this._state);this._budget.madeProgress()};ma._removeIdleStateCallbacks=function(R){this._idleUpdatesStartFired&&R.idleEnd();this._idleStateCallbacks.removeUnordered(R)};ma.removeTask=function(R){this._tasks.removeUnordered(R);this._runQueue.removeUnordered(R)};ma._updateTask=
function(R){this._tasks.forAll(na=>{na.name===R&&na.setPriority(R)})};ma._getState=function(R){if(this._runQueue.some(oa=>oa.name===R))return k.TaskState.SCHEDULED;let na=k.TaskState.IDLE;this._tasks.forAll(oa=>{oa.name===R&&oa.needsUpdate&&(1>=oa.schedulePriority?na=k.TaskState.READY:na!==k.TaskState.READY&&(na=k.TaskState.WAITING))});return na};ma._getRuntime=function(R){let na=0;this._tasks.forAll(oa=>{oa.name===R&&(na+=oa.runtime)});return na};ma._resetRuntimes=function(){this._tasks.forAll(R=>
R.runtime=0)};ma._getRunning=function(){const R=new Map;this._tasks.forAll(oa=>{oa.needsUpdate&&R.set(oa.name,(R.get(oa.name)||0)+1)});if(0===R.size)return null;let na="";R.forEach((oa,qa)=>{na=1<oa?na+` ${oa}x ${qa}`:na+` ${qa}`});return na};ma._runIdle=function(){this._run()};ma._runInteracting=function(){this._run()};ma._runAnimating=function(){this._run()};ma._updateLoad=function(){const R=this._tasks.reduce((na,oa)=>oa.needsUpdate?++na:na,0);this._load=.9*this._load+R*(1-.9)};ma._schedule=function(){if(0>=
this._maxReschedule)return!1;this._runQueue.filterInPlace(R=>{if(R.needsUpdate)return!0;R.schedulePriority=R.basePriority;return!1});for(this._tasks.forAll(R=>{0===R.basePriority&&R.needsUpdate&&!this._runQueue.includes(R)&&this._runQueue.unshift(R)});0===this._runQueue.length;){let R=!1,na=0;this._tasks.forAll(oa=>{if(oa.needsUpdate&&0!==oa.schedulePriority&&0!==oa.basePriority)switch(R=!0,na=Math.max(na,oa.basePriority),oa.schedulePriority){case 1:oa.schedulePriority=0;this._runQueue.push(oa);break;
default:--oa.schedulePriority}});if(!R)return this.updating=!1;this._maxReschedule===K&&(this._maxReschedule=na);--this._maxReschedule}return this.updating=!0};ma._run=function(){const R=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var na=this._budget.now();const oa=this._runQueue.pop();this._budget.resetProgress();try{oa.task.runTask(this._budget)}catch(qa){q.error(`Exception in task "${oa.name}"`,qa)}oa.schedulePriority=oa.basePriority;na=this._budget.now()-na;
oa.runtime+=na;this._frameTaskTimes.set(oa.priority,this._frameTaskTimes.get(oa.priority)+na);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",oa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-R);return}}while(this._schedule());this.updating=this._tasks.some(oa=>oa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-R)};
ma._startFrameTaskTimes=function(){for(const R of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[R],0)};ma._recordFrameTaskTimes=function(R){this._frameTaskTimes.forEach((na,oa)=>this.performanceInfo.tasks.get(oa).record(na));this.performanceInfo.total.record(R)};d._createClass(ja,[{key:"load",get:function(){return this._load}},{key:"state",get:function(){return z.isNone(this._test.state)?this._state:this._test.state},set:function(R){this._state!==R&&(this._state=R,this.state!==
k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(na=>na.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ja}(Q);Z.__decorate([I.property()],l.prototype,"updating",void 0);l=Z.__decorate([h.subclass("esri.views.support.Scheduler")],l);E.Scheduler=l;let L=function(P){function ja(R,na,oa,qa){var xa=P.call(this,{})||this;xa._scheduler=R;xa.name=na;xa._basePriority=qa;xa.runtime=0;xa._queue=new D.PromiseQueue;xa._handles=new p;
xa.schedulePriority=xa._basePriority;xa.task=z.isSome(oa)?oa:xa._queue;xa._handles.add(y.when(()=>xa.task.running,()=>R.activate()));return xa}d._inheritsLoose(ja,P);var ma=ja.prototype;ma.normalizeCtorArgs=function(){return{}};ma.remove=function(){this.processQueue(W);this._scheduler.removeTask(this);this.schedule=V.schedule;this.reschedule=V.reschedule;this._handles.destroy()};ma.setPriority=function(R){this.name=R;R=n(R);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=
R;this._basePriority=R};ma.schedule=function(R,na,oa){return this._queue.push(R,na,oa)};ma.reschedule=function(R,na,oa){return this._queue.unshift(R,na,oa)};ma.processQueue=function(R){this._queue.runTask(R)};d._createClass(ja,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(R){this.setPriority(R)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);
return ja}(Q);Z.__decorate([I.property({constructOnly:!0})],L.prototype,"task",void 0);Z.__decorate([I.property({readOnly:!0})],L.prototype,"updating",null);L=Z.__decorate([h.subclass("esri.views.support.SchedulerTask")],L);let X=function(){function P(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ja=P.prototype;ja.run=function(ma){if(this.done)return!1;!0===ma()&&(this._didWork=!0);return!0};ja.madeProgress=
function(){this._didWork=!0};ja.reset=function(ma,R){this._begin=this.now();this._budget=ma;this._state=R;this._didWork=!1};ja.now=function(){return performance.now()};ja.resetProgress=function(){this._didWork=!1};d._createClass(P,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ma){this._enabled=
ma}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return P}();E.Budget=X})(H||(H={}));k.TaskState=void 0;(function(E){E.SCHEDULED="s";E.READY="r";E.WAITING="w";E.IDLE="i"})(k.TaskState||(k.TaskState={}));const W=(()=>{const E=new H.Budget;E.enabled=!1;return E})(),V=new (function(){function E(){}var l=E.prototype;l.remove=function(){};
l.processQueue=function(){};l.schedule=function(L,X,P){try{if(t.isAborted(X)){const ja=t.createAbortError();return P?Promise.resolve(P(ja)):Promise.reject(ja)}return t.when(L(W))}catch(ja){return Promise.reject(ja)}};l.reschedule=function(L,X,P){return this.schedule(L,X,P)};return E}()),K=Number.MAX_SAFE_INTEGER;k.ImmediateTask=V;k.getTaskPriority=n;k.newScheduler=function(){return new H.Scheduler};k.noBudget=W;k.taskPriorities=u;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,d,Z,Q,p,x,z){Z=function(v){function r(y){y=v.call(this,y)||this;y._groups=new Map;return y}k._inheritsLoose(r,v);var t=r.prototype;t.destroy=function(){this.removeAll()};t.add=function(y,G){if(!this._isHandle(y)&&!Array.isArray(y)&&!Q.isCollection(y))return this;const I=this._getOrCreateGroup(G);
Array.isArray(y)||Q.isCollection(y)?y.forEach(m=>this._isHandle(m)&&I.push(m)):I.push(y);this.notifyChange("size");return this};t.forEach=function(y,G){if("function"===typeof y)this._groups.forEach(I=>I.forEach(y));else{const I=this._getGroup(y);I&&G&&I.forEach(G)}};t.has=function(y){return this._groups.has(this._ensureGroupKey(y))};t.remove=function(y){if(Array.isArray(y)||Q.isCollection(y))return y.forEach(this.remove,this),this;if(!this.has(y))return this;const G=this._getGroup(y);for(let I=0;I<
G.length;I++)G[I].remove();this._deleteGroup(y);this.notifyChange("size");return this};t.removeAll=function(){this._groups.forEach(y=>{for(let G=0;G<y.length;G++)y[G].remove()});this._groups.clear();this.notifyChange("size");return this};t._isHandle=function(y){return y&&!!y.remove};t._getOrCreateGroup=function(y){if(this.has(y))return this._getGroup(y);const G=[];this._groups.set(this._ensureGroupKey(y),G);return G};t._getGroup=function(y){return p.assumeNonNull(this._groups.get(this._ensureGroupKey(y)))};
t._deleteGroup=function(y){return this._groups.delete(this._ensureGroupKey(y))};t._ensureGroupKey=function(y){return y||"_default_"};k._createClass(r,[{key:"size",get:function(){let y=0;this._groups.forEach(G=>{y+=G.length});return y}}]);return r}(Z);d.__decorate([x.property({readOnly:!0})],Z.prototype,"size",null);return Z=d.__decorate([z.subclass("esri.core.Handles")],Z)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m,J){function c(W){return W?W instanceof H?W.toArray():W.length?Array.prototype.slice.apply(W):[]:[]}function h(W){if(W&&W.length)return W[0]}function D(W,V,K,E){V&&V.forEach((l,L,X)=>{W.push(l);D(W,K.call(E,l,L,X),K,E)})}var B;let n=function(){function W(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var V=W.prototype;V.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};V.reset=function(K){this.defaultPrevented=
!1;this.item=K};return W}();const q=new z(n,void 0,W=>{W.item=null;W.target=null;W.defaultPrevented=!1;W.cancellable=!1}),u=()=>{},N=new Set,ba=new Set,T=new Set,ka=new Map;let M=0,H=B=function(W,V){function K(l){l=W.call(this,l)||this;l._chgListeners=[];l._notifications=null;l._timer=null;l._observable=new J.SimpleObservable;l.length=0;l._items=[];Object.defineProperty(k._assertThisInitialized(l),"uid",{value:M++});return l}k._inheritsLoose(K,W);K.isCollection=function(l){return null!=l&&l instanceof
B};var E=K.prototype;E.normalizeCtorArgs=function(l){return l?Array.isArray(l)||l instanceof B?{items:l}:l:{}};E.destroy=function(){this.removeAll()};E[V]=function*(){yield*this.items};E.hasEventListener=function(l){return"change"===l?0<this._chgListeners.length:this._emitter.hasEventListener(l)};E.on=function(l,L){if("change"===l){const X=this._chgListeners,P={removed:!1,callback:L};X.push(P);this._notifications&&this._notifications.push({listeners:X.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=u;P.removed=!0;X.splice(X.indexOf(P),1)}}}return this._emitter.on(l,L)};E.once=function(l,L){const X=this.on(l,L);return{remove(){X.remove()}}};E.add=function(l,L){m.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.ADD))return this;L=this.getNextIndex(null!=L?L:null);this._splice(L,0,[l]);this._emitAfterChanges(v.ObservableChangesType.ADD);return this};E.addMany=function(l,L=this._items.length){m.trackAccess(this._observable);if(!l||!l.length||
this._emitBeforeChanges(v.ObservableChangesType.ADD))return this;L=this.getNextIndex(L);this._splice(L,0,c(l));this._emitAfterChanges(v.ObservableChangesType.ADD);return this};E.at=function(l){m.trackAccess(this._observable);l=Math.trunc(l)||0;0>l&&(l+=this.length);if(!(0>l||l>=this.length))return this._items[l]};E.removeAll=function(){m.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE))return[];const l=this._splice(0,this.length)||[];this._emitAfterChanges(v.ObservableChangesType.REMOVE);
return l};E.clone=function(){m.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(p.clone)})};E.concat=function(...l){m.trackAccess(this._observable);l=l.map(c);return this._createNewInstance({items:this._items.concat(...l)})};E.drain=function(l,L){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var X=x.assumeNonNull(this._splice(0,this.length)),P=X.length;for(let ja=0;ja<P;ja++)l.call(L,X[ja],ja,X);this._emitAfterChanges(v.ObservableChangesType.REMOVE)}};
E.every=function(l,L){m.trackAccess(this._observable);return this._items.every(l,L)};E.filter=function(l,L){m.trackAccess(this._observable);let X;X=2===arguments.length?this._items.filter(l,L):this._items.filter(l);return this._createNewInstance({items:X})};E.find=function(l,L){m.trackAccess(this._observable);return this._items.find(l,L)};E.findIndex=function(l,L){m.trackAccess(this._observable);return this._items.findIndex(l,L)};E.flatten=function(l,L){m.trackAccess(this._observable);const X=[];
D(X,this,l,L);return new B(X)};E.forEach=function(l,L){m.trackAccess(this._observable);return this._items.forEach(l,L)};E.getItemAt=function(l){m.trackAccess(this._observable);return this._items[l]};E.getNextIndex=function(l){m.trackAccess(this._observable);const L=this.length;l=null==l?L:l;0>l?l=0:l>L&&(l=L);return l};E.includes=function(l,L=0){m.trackAccess(this._observable);return this._items.includes(l,L)};E.indexOf=function(l,L=0){m.trackAccess(this._observable);return this._items.indexOf(l,
L)};E.join=function(l=","){m.trackAccess(this._observable);return this._items.join(l)};E.lastIndexOf=function(l,L=this.length-1){m.trackAccess(this._observable);return this._items.lastIndexOf(l,L)};E.map=function(l,L){m.trackAccess(this._observable);l=this._items.map(l,L);return new B({items:l})};E.reorder=function(l,L=this.length-1){m.trackAccess(this._observable);const X=this.indexOf(l);if(-1!==X){0>L?L=0:L>=this.length&&(L=this.length-1);if(X!==L){if(this._emitBeforeChanges(v.ObservableChangesType.MOVE))return l;
this._splice(X,1);this._splice(L,0,[l]);this._emitAfterChanges(v.ObservableChangesType.MOVE)}return l}};E.pop=function(){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var l=h(this._splice(this.length-1,1));this._emitAfterChanges(v.ObservableChangesType.REMOVE);return l}};E.push=function(...l){m.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,l);this._emitAfterChanges(v.ObservableChangesType.ADD);
return this.length};E.reduce=function(l,L){m.trackAccess(this._observable);const X=this._items;return 2===arguments.length?X.reduce(l,L):X.reduce(l)};E.reduceRight=function(l,L){m.trackAccess(this._observable);const X=this._items;return 2===arguments.length?X.reduceRight(l,L):X.reduceRight(l)};E.remove=function(l){m.trackAccess(this._observable);return this.removeAt(this.indexOf(l))};E.removeAt=function(l){m.trackAccess(this._observable);if(!(0>l||l>=this.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE)))return l=
h(this._splice(l,1)),this._emitAfterChanges(v.ObservableChangesType.REMOVE),l};E.removeMany=function(l){m.trackAccess(this._observable);if(!l||!l.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE))return[];l=l instanceof B?l.toArray():l;const L=this._items,X=[],P=l.length;for(let na=0;na<P;na++){var ja=L.indexOf(l[na]);if(-1<ja){{var ma=na+1;var R=ja+1;const oa=Math.min(l.length-ma,L.length-R);let qa=0;for(;qa<oa&&l[ma+qa]===L[R+qa];)qa++;ma=qa}ma=1+ma;(ja=this._splice(ja,ma))&&0<ja.length&&
X.push.apply(X,ja);na+=ma-1}}this._emitAfterChanges(v.ObservableChangesType.REMOVE);return X};E.reverse=function(){m.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.MOVE))return this;const l=this._splice(0,this.length);l&&(l.reverse(),this._splice(0,0,l));this._emitAfterChanges(v.ObservableChangesType.MOVE);return this};E.shift=function(){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var l=h(this._splice(0,
1));this._emitAfterChanges(v.ObservableChangesType.REMOVE);return l}};E.slice=function(l=0,L=this.length){m.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(l,L)})};E.some=function(l,L){m.trackAccess(this._observable);return this._items.some(l,L)};E.sort=function(l){m.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(v.ObservableChangesType.MOVE))return this;const L=x.assumeNonNull(this._splice(0,this.length));arguments.length?L.sort(l):L.sort();
this._splice(0,0,L);this._emitAfterChanges(v.ObservableChangesType.MOVE);return this};E.splice=function(l,L,...X){m.trackAccess(this._observable);const P=(L?v.ObservableChangesType.REMOVE:0)|(X.length?v.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(P))return[];l=this._splice(l,L,X)||[];this._emitAfterChanges(P);return l};E.toArray=function(){m.trackAccess(this._observable);return this._items.slice()};E.toJSON=function(){m.trackAccess(this._observable);return this.toArray()};E.toLocaleString=
function(){m.trackAccess(this._observable);return this._items.toLocaleString()};E.toString=function(){m.trackAccess(this._observable);return this._items.toString()};E.unshift=function(...l){m.trackAccess(this._observable);if(!l.length||this._emitBeforeChanges(v.ObservableChangesType.ADD))return this.length;this._splice(0,0,l);this._emitAfterChanges(v.ObservableChangesType.ADD);return this.length};E._createNewInstance=function(l){return new this.constructor(l)};E._splice=function(l,L,X){const P=this._items;
var ja=this.itemType;let ma=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=r.schedule(()=>this._dispatchChange()));if(L){ma=P.splice(l,L);if(this.hasEventListener("before-remove")){var R=q.acquire();R.target=this;R.cancellable=!0;for(let qa=0,xa=ma.length;qa<xa;qa++)L=ma[qa],R.reset(L),this.emit("before-remove",R),R.defaultPrevented&&(ma.splice(qa,
1),P.splice(l,0,L),l+=1,--qa,--xa);q.release(R)}this.length=this._items.length;if(this.hasEventListener("after-remove")){L=q.acquire();L.target=this;L.cancellable=!1;R=ma.length;for(let qa=0;qa<R;qa++)L.reset(ma[qa]),this.emit("after-remove",L);q.release(L)}}if(X&&X.length){if(ja){L=[];for(var na of X)X=ja.ensureType(na),null==X&&null!=na||L.push(X);X=L}ja=this.hasEventListener("before-add");na=this.hasEventListener("after-add");L=l===this.length;if(ja||na){var oa=q.acquire();oa.target=this;oa.cancellable=
!0;R=q.acquire();R.target=this;R.cancellable=!1;for(const qa of X)ja?(oa.reset(qa),this.emit("before-add",oa),oa.defaultPrevented||(L?P.push(qa):P.splice(l++,0,qa),this._set("length",P.length),na&&(R.reset(qa),this.emit("after-add",R)))):(L?P.push(qa):P.splice(l++,0,qa),this._set("length",P.length),R.reset(qa),this.emit("after-add",R));q.release(R);q.release(oa)}else{if(L)for(oa of X)P.push(oa);else P.splice(l,0,...X);this._set("length",P.length)}}(X&&X.length||ma&&ma.length)&&this._notifyChangeEvent(X,
ma);return ma};E._emitBeforeChanges=function(l){let L=!1;if(this.hasEventListener("before-changes")){const X=q.acquire();X.target=this;X.cancellable=!0;X.type=l;this.emit("before-changes",X);L=X.defaultPrevented;q.release(X)}return L};E._emitAfterChanges=function(l){if(this.hasEventListener("after-changes")){const L=q.acquire();L.target=this;L.cancellable=!1;L.type=l;this.emit("after-changes",L);q.release(L)}this._observable.notify()};E._notifyChangeEvent=function(l,L){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:l,removed:L})};E._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var l=this._notifications;this._notifications=null;for(const L of l){l=L.changes;N.clear();ba.clear();T.clear();for(const {added:na,removed:oa}of l){if(na)if(0===T.size&&0===ba.size)for(const qa of na)N.add(qa);else for(const qa of na)ba.has(qa)?(T.add(qa),ba.delete(qa)):T.has(qa)||N.add(qa);
if(oa)if(0===T.size&&0===N.size)for(const qa of oa)ba.add(qa);else for(const qa of oa)N.has(qa)?N.delete(qa):(T.delete(qa),ba.add(qa))}const X=Z.acquire();N.forEach(na=>{X.push(na)});const P=Z.acquire();ba.forEach(na=>{P.push(na)});const ja=this._items,ma=L.items,R=Z.acquire();T.forEach(na=>{ma.indexOf(na)!==ja.indexOf(na)&&R.push(na)});if(L.listeners&&(X.length||P.length||R.length)){l={target:this,added:X,removed:P,moved:R};const na=L.listeners.length;for(let oa=0;oa<na;oa++){const qa=L.listeners[oa];
qa.removed||qa.callback.call(this,l)}}Z.release(X);Z.release(P);Z.release(R)}N.clear();ba.clear();T.clear()}};k._createClass(K,[{key:"items",get:function(){m.trackAccess(this._observable);return this._items},set:function(l){this._emitBeforeChanges(v.ObservableChangesType.ADD)||(this._splice(0,this.length,c(l)),this._emitAfterChanges(v.ObservableChangesType.ADD))}}]);return K}(Q.EventedAccessor,Symbol.iterator);H.ofType=W=>{if(!W)return B;if(ka.has(W))return ka.get(W);let V=null;if("function"===typeof W)V=
W.prototype.declaredClass;else if(W.base)V=W.base.prototype.declaredClass;else for(var K in W.typeMap){const E=W.typeMap[K].prototype.declaredClass;V=V?V+` | ${E}`:E}K=function(E){function l(){return E.apply(this,arguments)||this}k._inheritsLoose(l,E);return l}(B);d.__decorate([G.shared({Type:W,ensureType:"function"===typeof W?y.ensureType(W):y.ensureOneOfType(W)})],K.prototype,"itemType",void 0);K=d.__decorate([I.subclass(`esri.core.Collection<${V}>`)],K);ka.set(W,K);return K};d.__decorate([t.property()],
H.prototype,"length",void 0);d.__decorate([t.property()],H.prototype,"items",null);return H=B=d.__decorate([I.subclass("esri.core.Collection")],H)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var d=k.ObservableChangesType||(k.ObservableChangesType={});d[d.ADD=1]="ADD";d[d.REMOVE=2]="REMOVE";d[d.MOVE=4]="MOVE";Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(d){return(Z,Q)=>{Z[Q]=d}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,d,Z,Q,p,x,z){function v(I,m,J={}){return r(I,m,J,y)}function r(I,m,J={},c){let h=null;const D=J.once?(B,n)=>{c(B)&&(Q.removeMaybe(h),m(B,n))}:(B,n)=>{c(B)&&m(B,n)};h=x.watchTracked(I,
D,J.sync,J.equals);J.initial&&(I=I(),D(I,I));return h}function t(I,m,J){if(p.isAborted(J))return Promise.reject(p.createAbortError());const c=I();if(null!=m&&m(c))return Promise.resolve(c);let h=null;return new Promise((D,B)=>{h=Z.handlesGroup([p.onAbort(J,()=>{h=Q.removeMaybe(h);B(p.createAbortError())}),r(I,n=>{h=Q.removeMaybe(h);D(n)},{sync:!1,once:!0},null!=m?m:y)])})}function y(I){return!0}function G(I){return!!I}k.autorun=z.autorun;k.initial={initial:!0};k.on=function(I,m,J,c={}){function h(){B&&
n&&(n.remove(),null==c.onListenerRemove?void 0:c.onListenerRemove(B),n=B=null)}function D(N){c.once&&c.once&&Q.removeMaybe(q);J(N)}let B=null,n=null,q=null;const u=v(I,(N,ba)=>{h();d.isEventTarget(N)&&(B=N,n=d.on(N,m,D),null==c.onListenerAdd?void 0:c.onListenerAdd(N))},{sync:c.sync,initial:!0});return q=Z.makeHandle(()=>{u.remove();h()})};k.once=function(I,m){return t(I,null,m)};k.pausable=function(I,m,J={}){let c=!1;const h=v(I,(D,B)=>{c||m(D,B)},J);return{remove(){h.remove()},pause(){c=!0},resume(){c=
!1}}};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=v;k.when=function(I,m,J={}){return r(I,m,J,G)};k.whenOnce=function(I,m){return t(I,G,m)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t){k.PromiseQueue=function(G){function I(){var J=G.apply(this,arguments)||this;J._tasks=[];J.running=!1;return J}d._inheritsLoose(I,G);var m=I.prototype;m.destroy=function(){this.cancelAll()};m.runTask=function(J){for(;!J.done&&this._process(J);)J.madeProgress()};m.push=function(J,c,h){this.running=!0;return new Promise((D,B)=>this._tasks.push(new y(D,B,J,c,h)))};m.unshift=function(J,c,h){this.running=!0;return new Promise((D,B)=>this._tasks.unshift(new y(D,B,J,c,h)))};
m._process=function(J){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const h=p.isAborted(c.signal);if(h&&!c.abortCallback)c.reject(p.createAbortError());else{const D=h?c.abortCallback(p.createAbortError()):c.callback(J);p.isPromiseLike(D)?D.then(c.resolve,c.reject):c.resolve(D)}}catch(h){c.reject(h)}this.running=0<this._tasks.length;return!0};m.cancelAll=function(){const J=p.createAbortError();for(const c of this._tasks)if(c.abortCallback){const h=c.abortCallback(J);c.resolve(h)}else c.reject(J);
this._tasks.length=0;this.running=!1};d._createClass(I,[{key:"length",get:function(){return this._tasks.length}}]);return I}(Q);Z.__decorate([x.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=Z.__decorate([t.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let y=function(G,I,m,J,c){this.resolve=G;this.reject=I;this.callback=m;this.signal=J;this.abortCallback=c};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Z,Q,p,x,z,v){Z=function(r){function t(){var y=r.apply(this,arguments)||this;y.SCHEDULER_LOG_SLOW_TASKS=!1;y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return y}k._inheritsLoose(t,r);return t}(Z);d.__decorate([Q.property()],Z.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([Q.property()],Z.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Z=d.__decorate([v.subclass("esri.views.support.DebugFlags")],Z);return new Z})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(k,d,Z,Q,p){function*x(B){switch(B.type){case "Feature":yield B;break;case "FeatureCollection":for(const n of B.features)n&&(yield n)}}function*z(B){if(!B)return null;switch(B.type){case "Point":yield B.coordinates;break;case "LineString":case "MultiPoint":yield*B.coordinates;break;case "MultiLineString":case "Polygon":for(const n of B.coordinates)yield*n;break;case "MultiPolygon":for(const n of B.coordinates)for(const q of n)yield*q}}
function*v(B,n={}){const {geometryType:q,objectIdField:u}=n;for(const ba of B){var N;const {geometry:T,properties:ka,id:M}=ba;if(T&&D[T.type]!==q)continue;B=ka||{};let H=null!=(N=B[u])?N:null;u&&null!=M&&!B[u]&&(B[u]=H=M);yield new Z.OptimizedFeature(T?G(new Q,T,n):null,B,null,H)}}function r(B){for(const n of B)if(2<n.length)return!0;return!1}function t(B){let n=0;for(let q=0;q<B.length;q++){const u=B[q],N=B[(q+1)%B.length];n+=u[0]*N[1]-N[0]*u[1]}return 0>=n}function y(B){const n=B[0],q=B[B.length-
1];n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]||B.push(n);return B}function G(B,n,q){switch(n.type){case "LineString":return J(B,n.coordinates,q),B;case "MultiLineString":for(const N of n.coordinates)J(B,N,q);return B;case "MultiPoint":return J(B,n.coordinates,q),B;case "MultiPolygon":for(var u of n.coordinates)for(I(B,u[0],q),n=1;n<u.length;n++)m(B,u[n],q);return B;case "Point":return h(B,n.coordinates,q),B;case "Polygon":u=n.coordinates;I(B,u[0],q);for(n=1;n<u.length;n++)m(B,u[n],q);return B}}function I(B,
n,q){n=y(n);t(n)?J(B,n,q):c(B,n,q)}function m(B,n,q){n=y(n);t(n)?c(B,n,q):J(B,n,q)}function J(B,n,q){for(const u of n)h(B,u,q);B.lengths.push(n.length)}function c(B,n,q){for(let u=n.length-1;0<=u;u--)h(B,n[u],q);B.lengths.push(n.length)}function h(B,n,q){const [u,N,ba]=n;B.coords.push(u,N);q.hasZ&&B.coords.push(ba||0)}const D={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
k.createOptimizedFeatures=function(B,n){return Array.from(v(x(B),n))};k.getGeometryType=function(B){return D[B]};k.inferLayerProperties=function(B,n={}){const q=[];var u=new Set;const N=new Set;var ba=!1;let T=null,ka=!1,M=void 0;({geometryType:n=null}=n);var H=!1;for(const W of x(B)){const {geometry:V,properties:K,id:E}=W;if(V&&(n||(n=D[V.type]),D[V.type]!==n))continue;ba||(ba=z(V),ba=r(ba));!ka&&(ka=null!=E)&&(M=typeof E,T=Object.keys(K).filter(l=>K[l]===E));ka&&null!=E&&(1<T.length?T=T.filter(l=>
K[l]===E):1===T.length&&(T=K[T[0]]===E?T:[]));if(!H&&K){B=!0;for(const l in K)if(!u.has(l))if(H=K[l],null==H)B=!1,N.add(l);else{a:switch(typeof H){case "string":H="esriFieldTypeString";break a;case "number":H="esriFieldTypeDouble";break a;default:H="unknown"}"unknown"===H?N.add(l):(N.delete(l),u.add(l),q.push({name:l,alias:l,type:H}))}H=B}}if(u=T&&1===T.length&&T[0]||null)for(const W of q)if(W.name===u&&p.isNumericField(W)){W.type="esriFieldTypeOID";break}return{fields:q,geometryType:n,hasZ:ba,objectIdFieldName:u,
objectIdFieldType:M,unknownFields:Array.from(N)}};k.validateGeoJSON=function(B){if(!B)throw new d("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==B.type&&"FeatureCollection"!==B.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:B});({crs:B}=B);if(B){var n="string"===typeof B?B:"name"===B.type?B.properties.name:"EPSG"===B.type?B.properties.code:null,q=/.*(CRS84H?|4326)$/i;if(!n||!q.test(n))throw new d("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:B});}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(k,d,Z,Q,p,x){function z(c){return new G(c)}function v(){return r.apply(this,arguments)}function r(){r=Z._asyncToGenerator(function*(){Q.isNone(J)&&
(J=yield new Promise((c,h)=>k(["../../../../geometry/geometryEngineJSON"],c,h)));return J});return r.apply(this,arguments)}function t(){t=Z._asyncToGenerator(function*(c,h){!p.isValid(c)||"esriGeometryPolygon"!==h&&"esriGeometryPolyline"!==h||(yield v())});return t.apply(this,arguments)}let y=function(){this.description=this.code=null},G=function(c){this.error=new y;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=c},I=function(c){this.globalId=null;this.success=
!0;this.objectId=this.uniqueId=c};const m=new Set;let J;d.createFeatureEditErrorResult=z;d.createFeatureEditSuccessResult=function(c){return new I(c)};d.loadGeometryEngine=v;d.loadGeometryEngineForSimplify=function(c,h){return t.apply(this,arguments)};d.mixAttributes=function(c,h,D,B=!1,n){m.clear();for(const ba in D){const T=c.get(ba);if(T){var q=D[ba];{var u=T;var N=q;let ka=N;"string"===typeof N&&x.isNumericField(u)?ka=parseFloat(N):null!=N&&x.isStringField(u)&&"string"!==typeof N&&(ka=String(N));
u=x.sanitizeNullFieldValue(ka)}u!==q&&n&&n.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:T,originalValue:q,sanitizedValue:u}});m.add(T.name);if(T&&(B||T.editable)){if(q=x.validateFieldValue(T,u))return z(x.validationErrorToString(q,T,u));h[T.name]=u}}}for(const ba of c.requiredFields)if(!m.has(ba.name))return z(`missing required field "${ba.name}"`);return null};d.simplify=function(c,h){if(!c||!p.isValid(h))return c;if("rings"in c||
"paths"in c){if(Q.isNone(J))throw new TypeError("geometry engine not loaded");return J.simplify(h,c)}return c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m,J,c,h,D){function B(){B=d._asyncToGenerator(function*(wa,a){a=yield Q(wa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...null==a?void 0:a.customParameters},signal:null==a?void 0:a.signal});a=n(a.data);r.isHTTPSProtocol(wa)&&(r.hasSameOrigin(wa,a.operations.DescribeFeatureType.url,!0)&&(a.operations.DescribeFeatureType.url=r.toHTTPS(a.operations.DescribeFeatureType.url)),r.hasSameOrigin(wa,a.operations.GetFeature.url,!0)&&
(a.operations.GetFeature.url=r.toHTTPS(a.operations.GetFeature.url)));return a});return B.apply(this,arguments)}function n(wa){wa=oa(wa);xa(wa);Na(wa);wa=wa.firstElementChild;const a=x.cache(u(wa));return{operations:q(wa),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}function q(wa){let a=!1;const g={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};J.visitXML(wa,{OperationsMetadata:{Operation:aa=>{switch(aa.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:e=>
{g.GetCapabilities.url=e.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:e=>{g.DescribeFeatureType.url=e.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:e=>{g.GetFeature.url=e.getAttribute("xlink:href")}}},Parameter:e=>{if("outputFormat"===e.getAttribute("name"))return{AllowedValues:{Value:A=>{A=A.textContent;Ja.has(A.toLowerCase())&&(g.GetFeature.outputFormat=A)}}}}}}},Constraint:aa=>{switch(aa.getAttribute("name")){case "KVPEncoding":return{DefaultValue:e=>
{a="true"===e.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:e=>{g.GetFeature.supportsPagination="true"===e.textContent.toLowerCase()}}}}}});if(!a)throw new p("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(z.isNone(g.GetFeature.outputFormat))throw new p("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return g}function u(wa){return J.iterateXML(wa,{FeatureTypeList:{FeatureType:a=>
{const g={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},aa=new Set([4326]),e=A=>{var S,U;A=parseInt(null==(S=A.textContent.match(/(?<wkid>\d+$)/i))?void 0:null==(U=S.groups)?void 0:U.wkid,10);Number.isNaN(A)||aa.add(A)};J.visitXML(a,{Name:A=>{const {name:S,prefix:U}=qa(A.textContent);g.typeName=`${U}:${S}`;g.name=S;g.namespacePrefix=U;g.namespaceUri=A.lookupNamespaceURI(U)},Abstract:A=>{g.description=A.textContent},
Title:A=>{g.title=A.textContent},WGS84BoundingBox:A=>{g.extent=N(A)},DefaultSRS:e,DefaultCRS:e,OtherSRS:e,OtherCRS:e});g.title||(g.title=g.name);g.supportedSpatialReferences.push(...aa);return g}}})}function N(wa){let a,g,aa,e;for(const A of wa.children)switch(A.localName){case "LowerCorner":[a,g]=A.textContent.split(" ").map(S=>Number.parseFloat(S));break;case "UpperCorner":[aa,e]=A.textContent.split(" ").map(S=>Number.parseFloat(S))}return{xmin:a,ymin:g,xmax:aa,ymax:e,spatialReference:y.WGS84}}
function ba(wa,a,g){return x.find(wa,aa=>g?aa.name===a&&aa.namespaceUri===g:aa.typeName===a||aa.name===a)}function T(){T=d._asyncToGenerator(function*(wa,a,g,aa={}){var e;const {featureType:A,extent:S}=yield ka(wa,a,g,aa),{fields:U,geometryType:ia,swapXY:fa,objectIdField:F,geometryField:O}=yield H(wa,A.typeName,aa);return{url:wa.operations.GetCapabilities.url,name:A.name,namespaceUri:A.namespaceUri,fields:U,geometryField:O,geometryType:ia,objectIdField:F,spatialReference:null!=(e=aa.spatialReference)?
e:h.WGS84,extent:S,swapXY:fa,wfsCapabilities:wa,customParameters:aa.customParameters}});return T.apply(this,arguments)}function ka(wa,a,g){return M.apply(this,arguments)}function M(){M=d._asyncToGenerator(function*(wa,a,g,aa={}){const {spatialReference:e=h.WGS84}=aa;wa=wa.readFeatureTypes();g=a?ba(wa,a,g):wa.next().value;if(z.isNone(g)){if(a)throw new p("wfs-layer:feature-type-not-found",`The type '${a}' could not be found in the service`);throw new p("wfs-layer:empty-service","The service is empty");
}a=new D({...g.extent,spatialReference:e});if(!y.equals(e,y.WGS84))try{yield t.initializeProjection(y.WGS84,e,void 0,aa),a=t.project(a,y.WGS84)}catch{throw new p("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:a,spatialReference:e,featureType:g}});return M.apply(this,arguments)}function H(wa,a){return W.apply(this,arguments)}function W(){W=d._asyncToGenerator(function*(wa,a,g={}){const [aa,e]=yield v.eachAlways([l(wa.operations.DescribeFeatureType.url,a,g),K(wa,
a,g)]);if(aa.error||e.error)throw new p("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${a}'`,{error:aa.error||e.error});const {fields:A,errors:S}=aa.value;wa=aa.value.geometryType||e.value.geometryType;g=e.value.swapXY;if(z.isNone(wa))throw new p("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${a}`,{typeName:a,geometryType:wa,fields:A,errors:S});return{...V(A),geometryType:wa,swapXY:g}});return W.apply(this,
arguments)}function V(wa){var a;const g=wa.find(e=>"geometry"===e.type);let aa=wa.find(e=>"oid"===e.type);wa=wa.filter(e=>"geometry"!==e.type);aa||(aa=new c({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),wa.unshift(aa));return{geometryField:null!=(a=null==g?void 0:g.name)?a:null,objectIdField:aa.name,fields:wa}}function K(wa,a){return E.apply(this,arguments)}function E(){E=d._asyncToGenerator(function*(wa,a,g={}){var aa;let e,A=!1;const [S,U]=yield Promise.all([ja(wa.operations.GetFeature.url,
a,wa.operations.GetFeature.outputFormat,{...g,count:1}),Q(wa.operations.GetFeature.url,{responseType:"text",query:R(a,void 0,{...g,count:1}),signal:null==g?void 0:g.signal})]);if(wa="FeatureCollection"===S.type&&(null==(aa=S.features[0])?void 0:aa.geometry)){e=G.featureGeometryTypeKebabDictionary.fromJSON(I.getGeometryType(wa.type));switch(wa.type){case "Point":var ia=wa.coordinates;break;case "LineString":case "MultiPoint":ia=wa.coordinates[0];break;case "MultiLineString":case "Polygon":ia=wa.coordinates[0][0];
break;case "MultiPolygon":ia=wa.coordinates[0][0][0]}if(wa=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(U.data))aa=ia[0].toFixed(3),ia=ia[1].toFixed(3),a=parseFloat(wa[1]).toFixed(3),wa=parseFloat(wa[2]).toFixed(3),aa===wa&&ia===a&&(A=!0)}return{geometryType:e,swapXY:A}});return E.apply(this,arguments)}function l(wa,a,g){return L.apply(this,arguments)}function L(){L=d._asyncToGenerator(function*(wa,a,g){wa=yield Q(wa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",
VERSION:"2.0.0",TYPENAME:a,...null==g?void 0:g.customParameters},signal:null==g?void 0:g.signal});return X(a,wa.data)});return L.apply(this,arguments)}function X(wa,a){const {name:g}=qa(wa);a=oa(a);Na(a);const aa=x.find(J.iterateXML(a.firstElementChild,{element:e=>({name:e.getAttribute("name"),typeName:qa(e.getAttribute("type")).name})}),({name:e})=>e===g);if(z.isSome(aa)){const e=x.find(J.iterateXML(a.firstElementChild,{complexType:A=>A}),A=>A.getAttribute("name")===aa.typeName);if(z.isSome(e))return P(e)}throw new p("wfs-layer:feature-type-not-found",
`Type '${wa}' not found in document`,{document:(new XMLSerializer).serializeToString(a)});}function P(wa){var a,g;const aa=[],e=[];let A;var S=J.iterateXML(wa,{complexContent:{extension:{sequence:{element:U=>U}}}});for(const U of S){S=U.getAttribute("name");if(!S)continue;let ia,fa;U.hasAttribute("type")?ia=qa(U.getAttribute("type")).name:J.visitXML(U,{simpleType:{restriction:ea=>{ia=qa(ea.getAttribute("base")).name;return{maxLength:ra=>{fa=+ra.getAttribute("value")}}}}});if(!ia)continue;const F=
"true"===U.getAttribute("nillable");let O=!1;switch(ia.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":e.push(new c({name:S,alias:S,type:"integer",nullable:F}));break;case "float":case "double":case "decimal":e.push(new c({name:S,alias:S,type:"double",nullable:F}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":e.push(new c({name:S,
alias:S,type:"string",nullable:F,length:null!=(a=fa)?a:255}));break;case "datetime":case "date":e.push(new c({name:S,alias:S,type:"date",nullable:F,length:null!=(g=fa)?g:36}));break;case "pointpropertytype":A="point";O=!0;break;case "multipointpropertytype":A="multipoint";O=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":A="polyline";O=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":A="polygon";
O=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":O=!0;aa.push(new p("wfs-layer:unknown-geometry-type",`geometry type '${ia}' is not supported`,{type:(new XMLSerializer).serializeToString(wa)}));break;default:aa.push(new p("wfs-layer:unknown-field-type",`Unknown field type '${ia}'`,{type:(new XMLSerializer).serializeToString(wa)}))}O&&e.push(new c({name:S,alias:S,type:"geometry",nullable:F}))}for(const U of e)if("integer"===U.type&&!U.nullable&&Ma.has(U.name.toLowerCase())){U.type=
"oid";break}return{geometryType:A,fields:e,errors:aa}}function ja(wa,a,g,aa){return ma.apply(this,arguments)}function ma(){ma=d._asyncToGenerator(function*(wa,a,g,aa){({data:wa}=yield Q(wa,{responseType:"text",query:R(a,g,aa),signal:null==aa?void 0:aa.signal}));wa=wa.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var e;if(null!=aa&&null!=(e=aa.dateFields)&&e.length){const A=new Set(aa.dateFields);return JSON.parse(wa,(S,U)=>A.has(S)?m.parseDate(U):U)}return JSON.parse(wa)}catch(A){throw new p("wfs-layer:malformed-json",
"Error while parsing the\u00a0response",{response:wa,error:A});}});return ma.apply(this,arguments)}function R(wa,a,g){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:wa,OUTPUTFORMAT:a,SRSNAME:"EPSG:4326",STARTINDEX:null==g?void 0:g.startIndex,COUNT:null==g?void 0:g.count,...null==g?void 0:g.customParameters}}function na(){na=d._asyncToGenerator(function*(wa,a,g){wa=yield Q(wa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:a,RESULTTYPE:"hits",
...null==g?void 0:g.customParameters},signal:null==g?void 0:g.signal});wa=oa(wa.data);Na(wa);wa=Number.parseFloat(wa.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(wa)?0:wa});return na.apply(this,arguments)}function oa(wa){return(new DOMParser).parseFromString(wa.trim(),"text/xml")}function qa(wa){const [a,g]=wa.split(":");return{prefix:g?a:"",name:null!=g?g:a}}function xa(wa){if((wa=wa.firstElementChild.getAttribute("version"))&&"2.0.0"!==wa)throw new p("wfs-layer:unsupported-wfs-version",
`Unsupported WFS version ${wa}. Supported version: ${"2.0.0"}`);}function Na(wa){let a,g;J.visitXML(wa.firstElementChild,{Exception:aa=>{a=aa.getAttribute("exceptionCode");return{ExceptionText:e=>{g=e.textContent}}}});if(a)throw new p(`wfs-layer:${a}`,g);}const Ja=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),Ma=new Set(["objectid","fid"]);k.WFS_OID_FIELD_NAME="__esri_wfs_id__";k.describeFeatureType=l;k.findFeatureType=ba;k.getCapabilities=function(wa,a){return B.apply(this,
arguments)};k.getFeature=ja;k.getFeatureCount=function(wa,a,g){return na.apply(this,arguments)};k.getFeatureTypeInfo=ka;k.getWFSLayerInfo=function(wa,a,g){return T.apply(this,arguments)};k.parseDescribeFeatureTypeResponse=X;k.parseGetCapabilitiesResponse=n;k.prepareWFSLayerFields=V;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(k){function d(Q){Q=(new Date(Q)).getTime();return Number.isNaN(Q)?
null:Q}const Z=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;k.parseDate=function(Q){var p;var x,z,v,r=Z.exec(Q);if(r){r=r.groups;var t=+r.year,y=+r.month-1,G=+r.day,I=+(null!=(x=r.hours)?x:0);x=+(null!=(z=r.minutes)?z:0);z=+(null!=(v=r.seconds)?v:0);if(23<I||59<x||59<z)var m=null;else m=(v=null!=(m=r.ms)?m:"0")?+v.padEnd(3,"0").substring(0,
3):0,m=r.isUTC?Date.UTC(t,y,G,I,x,z,m):r.offsetSign?6E4*("+"===r.offsetSign?-1:1)*(60*+r.offsetHours+ +r.offsetMinutes)+Date.UTC(t,y,G,I,x,z,m):(new Date(t,y,G,I,x,z,m)).getTime(),m=Number.isNaN(m)?null:m}else m=null;return null!=(p=m)?p:d(Q)};k.parseJSDate=d;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(k){function d(Q,p){for(const x of Q.children)x.localName in p&&(Q=p[x.localName],"function"===
typeof Q?(Q=Q(x))&&d(x,Q):d(x,Q))}function*Z(Q,p){for(const x of Q.children)x.localName in p&&(Q=p[x.localName],"function"===typeof Q?yield Q(x):yield*Z(x,Q))}k.iterateXML=Z;k.visitXML=d;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t,y,G,I){var m;const J=new Z.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});Z=m=function(c){function h(B){B=c.call(this,B)||this;
B.alias=null;B.defaultValue=void 0;B.description=null;B.domain=null;B.editable=!0;B.length=-1;B.name=null;B.nullable=!0;B.type=null;B.valueType=null;return B}k._inheritsLoose(h,c);var D=h.prototype;D.readDescription=function(B,{description:n}){let q;try{q=JSON.parse(n)}catch(u){}return q?q.value:null};D.readValueType=function(B,{description:n}){let q;try{q=JSON.parse(n)}catch(u){}return q?J.fromJSON(q.fieldValueType):null};D.clone=function(){return new m({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return h}(Q.JSONSupport);d.__decorate([p.property({type:String,json:{write:!0}})],Z.prototype,"alias",void 0);d.__decorate([p.property({type:[String,Number],json:{write:{allowNull:!0}}})],Z.prototype,"defaultValue",void 0);d.__decorate([p.property()],Z.prototype,"description",void 0);d.__decorate([t.reader("description")],
Z.prototype,"readDescription",null);d.__decorate([p.property({types:G.types,json:{read:{reader:G.fromJSON},write:!0}})],Z.prototype,"domain",void 0);d.__decorate([p.property({type:Boolean,json:{write:!0}})],Z.prototype,"editable",void 0);d.__decorate([p.property({type:v.Integer,json:{write:!0}})],Z.prototype,"length",void 0);d.__decorate([p.property({type:String,json:{write:!0}})],Z.prototype,"name",void 0);d.__decorate([p.property({type:Boolean,json:{write:!0}})],Z.prototype,"nullable",void 0);d.__decorate([r.enumeration(I.kebabDict)],
Z.prototype,"type",void 0);d.__decorate([p.property()],Z.prototype,"valueType",void 0);d.__decorate([t.reader("valueType",["description"])],Z.prototype,"readValueType",null);return Z=m=d.__decorate([y.subclass("esri.layers.support.Field")],Z)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(k,d,Z,Q,p,x){d={key:"type",base:Q,typeMap:{range:x,"coded-value":Z,inherited:p}};k.CodedValueDomain=Z;
k.DomainBase=Q;k.InheritedDomain=p;k.RangeDomain=x;k.fromJSON=function(z){if(!z||!z.type)return null;switch(z.type){case "range":return x.fromJSON(z);case "codedValue":return Z.fromJSON(z);case "inherited":return p.fromJSON(z)}return null};k.types=d;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(k,d,Z,Q,p,x,z,v,r){var t;p=t=function(y){function G(m){m=y.call(this,m)||this;m.codedValues=null;m.type="coded-value";return m}k._inheritsLoose(G,y);var I=G.prototype;I.getName=function(m){let J=null;if(this.codedValues){const c=String(m);this.codedValues.some(h=>{String(h.code)===c&&(J=h.name);return!!J})}return J};I.clone=function(){return new t({codedValues:Z.clone(this.codedValues),name:this.name})};return G}(r);d.__decorate([Q.property({type:[v.CodedValue],json:{write:!0}})],p.prototype,
"codedValues",void 0);d.__decorate([x.enumeration({codedValue:"coded-value"})],p.prototype,"type",void 0);return p=t=d.__decorate([z.subclass("esri.layers.support.CodedValueDomain")],p)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Z,Q,p,x,z,v,r){var t;k.CodedValue=t=function(y){function G(I){I=y.call(this,I)||this;I.name=null;I.code=null;return I}d._inheritsLoose(G,y);G.prototype.clone=function(){return new t({name:this.name,code:this.code})};return G}(Q.JSONSupport);Z.__decorate([p.property({type:String,json:{write:!0}})],k.CodedValue.prototype,"name",void 0);Z.__decorate([p.property({type:[String,Number],json:{write:!0}})],k.CodedValue.prototype,"code",void 0);k.CodedValue=t=Z.__decorate([r.subclass("esri.layers.support.CodedValue")],
k.CodedValue);Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(k,d,
Z,Q,p,x,z,v,r,t){Z=new Z.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});Q=function(y){function G(I){I=y.call(this,I)||this;I.name=null;I.type=null;return I}k._inheritsLoose(G,y);return G}(Q.JSONSupport);d.__decorate([p.property({type:String,json:{write:!0}})],Q.prototype,"name",void 0);d.__decorate([r.enumeration(Z)],Q.prototype,"type",void 0);return Q=d.__decorate([t.subclass("esri.layers.support.Domain")],Q)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,d,Z,Q,p,x,z,v,r,t){var y;Z=y=function(G){function I(m){m=G.call(this,m)||this;m.type="inherited";return m}k._inheritsLoose(I,G);I.prototype.clone=function(){return new y};return I}(t);d.__decorate([v.enumeration({inherited:"inherited"})],Z.prototype,"type",void 0);return Z=y=d.__decorate([r.subclass("esri.layers.support.InheritedDomain")],Z)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,d,Z,Q,p,x,z,v,r){var t;Q=t=function(y){function G(I){I=y.call(this,I)||this;I.maxValue=null;I.minValue=null;I.type="range";return I}k._inheritsLoose(G,y);G.prototype.clone=function(){return new t({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return G}(r);d.__decorate([Z.property({type:Number,json:{type:[Number],read:{source:"range",reader(y,G){return G.range&&G.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(y,G,I){G[I]=[this.minValue||0,y]}}}})],Q.prototype,"maxValue",void 0);d.__decorate([Z.property({type:Number,json:{type:[Number],read:{source:"range",reader(y,G){return G.range&&G.range[0]}},write:{target:"range",writer(y,G,I){G[I]=[y,this.maxValue||0]}}}})],Q.prototype,"minValue",void 0);d.__decorate([z.enumeration({range:"range"})],Q.prototype,"type",void 0);return Q=t=d.__decorate([v.subclass("esri.layers.support.RangeDomain")],Q)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(k,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=d;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(k,d,Z,Q,p,x,z,v,r,t,y,G,I,m){return function(){function J(){var h=this;this._customParameters=this._queryEngine=null;
this._snapshotFeatures=function(){var D=k._asyncToGenerator(function*(B){const {objectIdField:n}=h._queryEngine;var q=yield I.getFeature(h._getFeatureUrl,h._featureType.typeName,h._getFeatureOutputFormat,{customParameters:h._customParameters,dateFields:h._queryEngine.fieldsIndex.dateFields.map(N=>N.name),signal:B});yield y.validateGeoJSON(q);p.throwIfAborted(B);B=y.createOptimizedFeatures(q,{geometryType:h._queryEngine.geometryType,hasZ:!1,objectIdField:n});if(!x.equals(h._queryEngine.spatialReference,
x.WGS84))for(var u of B)Q.isSome(u.geometry)&&(u.geometry=z.convertFromGeometry(r.project(z.convertToGeometry(u.geometry,h._queryEngine.geometryType,!1,!1),x.WGS84,h._queryEngine.spatialReference)));u=1;for(const N of B)q={},G.mixAttributes(h._fieldsIndex,q,N.attributes,!0),N.attributes=q,null==N.attributes[n]&&(N.objectId=N.attributes[n]=u++);return B});return function(B){return D.apply(this,arguments)}}()}var c=J.prototype;c.destroy=function(){var h;null==(h=this._queryEngine)?void 0:h.destroy();
this._queryEngine=null};c.load=function(){var h=k._asyncToGenerator(function*(D,B){const {getFeatureUrl:n,getFeatureOutputFormat:q,spatialReference:u,fields:N,geometryType:ba,featureType:T,objectIdField:ka,customParameters:M}=D;this._featureType=T;this._customParameters=M;this._getFeatureUrl=n;this._getFeatureOutputFormat=q;this._fieldsIndex=new m(N);yield this._checkProjection(u);p.throwIfAborted(B);this._queryEngine=new t.QueryEngine({fields:N,geometryType:ba,hasM:!1,hasZ:!1,objectIdField:ka,spatialReference:u,
timeInfo:null,featureStore:new v({geometryType:ba,hasM:!1,hasZ:!1})});D=yield this._snapshotFeatures(Q.unwrap(B.signal));this._queryEngine.featureStore.addMany(D);return{extent:this._queryEngine.fullExtent}});return function(D,B){return h.apply(this,arguments)}}();c.applyEdits=function(){var h=k._asyncToGenerator(function*(){throw new d("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return h.apply(this,arguments)}}();c.queryFeatures=function(){var h=
k._asyncToGenerator(function*(D={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(D,B.signal)});return function(){return h.apply(this,arguments)}}();c.queryFeatureCount=function(){var h=k._asyncToGenerator(function*(D={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(D,B.signal)});return function(){return h.apply(this,arguments)}}();c.queryObjectIds=function(){var h=k._asyncToGenerator(function*(D={},B={}){yield this._waitSnapshotComplete();
return this._queryEngine.executeQueryForIds(D,B.signal)});return function(){return h.apply(this,arguments)}}();c.queryExtent=function(){var h=k._asyncToGenerator(function*(D={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(D,B.signal)});return function(){return h.apply(this,arguments)}}();c.querySnapping=function(){var h=k._asyncToGenerator(function*(D,B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(D,B.signal)});
return function(D){return h.apply(this,arguments)}}();c.refresh=function(){var h=k._asyncToGenerator(function*(D){var B;this._customParameters=D;null==(B=this._snapshotTask)?void 0:B.abort();this._snapshotTask=p.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(n=>{this._queryEngine.featureStore.clear();n&&this._queryEngine.featureStore.addMany(n)},n=>{this._queryEngine.featureStore.clear();p.isAbortError(n)||Z.getLogger("esri.layers.WFSLayer").error(new d("wfs-layer:getfeature-error",
"An error occurred during the GetFeature request",{error:n}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent}});return function(D){return h.apply(this,arguments)}}();c._waitSnapshotComplete=function(){var h=k._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return h.apply(this,arguments)}}();c._checkProjection=function(){var h=k._asyncToGenerator(function*(D){try{yield r.checkProjectionSupport(x.WGS84,
D)}catch{throw new d("unsupported-projection","Projection not supported",{spatialReference:D});}});return function(D){return h.apply(this,arguments)}}();return J}()});