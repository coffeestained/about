// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e,z,a,h,J,R,r,x,y,T,ba,X,ka,N){function L(){return!!Ra&&a.isLoaded()}function Q(U){B.isNone(qb)&&(qb=Promise.all([a.load(),(new Promise((ea,aa)=>k(["../chunks/geometryEngineBase"],ea,aa))).then(ea=>ea.geometryEngineBase),new Promise((ea,aa)=>k(["./geometryAdapters/hydrated"],ea,aa))]));return qb.then(([,ea,{hydratedAdapter:aa}])=>{E.throwIfAborted(U);mb=aa;Ra=ea.default;Ra._enableProjection(a.pe);Tb.notify()})}function K(U,ea,aa=null,pa=null){return Array.isArray(U)?
0===U.length?[]:C(mb,U,U[0].spatialReference,ea,aa,pa):C(mb,[U],U.spatialReference,ea,aa,pa)[0]}function C(U,ea,aa,pa,ya=null,za=null){if(B.isNone(aa)||B.isNone(pa))return ea;if(H(aa,pa,ya))return ea.map(Ea=>B.unwrap(M(Ea,aa,pa)));if(B.isNone(ya)){const Ea=ba.cacheKey(aa,pa);void 0!==Cb[Ea]?ya=Cb[Ea]:(ya=D(aa,pa,null),B.isNone(ya)&&(ya=new ba),Cb[Ea]=ya)}if(B.isNone(Ra))throw new Fb;return B.isSome(za)?Ra._project(U,ea,aa,pa,ya,za):Ra._project(U,ea,aa,pa,ya)}function D(U,ea,aa=null){if(B.isNone(Ra))throw new Fb;
if(B.isNone(U)||B.isNone(ea))return null;U=Ra._getTransformation(mb,U,ea,aa,null==aa?void 0:aa.spatialReference);return null!==U?ba.fromGE(U):null}function g(U,ea){try{const aa=K(U,ea);if(null==aa)return null;"xmin"in U&&"xmin"in aa&&(aa.zmin=U.zmin,aa.zmax=U.zmax);const pa=N.getGeometryZScaler(aa.type,U.spatialReference,ea);B.isSome(pa)&&pa(aa);return aa}catch(aa){if(!(aa instanceof Fb))throw aa;return null}}function H(U,ea,aa){return aa?!1:X.equals(U,ea)?!0:X.isValid(U)&&X.isValid(ea)&&!!Ya(U,ea,
Ub)}function S(){S=ca._asyncToGenerator(function*(U,ea,aa,pa){if(L())return E.waitTick(pa);if(Array.isArray(U))for(const {source:ya,dest:za,geographicTransformation:Ea}of U){if(!H(ya,za,Ea))return Q(pa)}else if(!H(U,ea,aa))return Q(pa);return E.waitTick(pa)});return S.apply(this,arguments)}function M(U,ea,aa){return U?"x"in U?ha(U,ea,new h,aa,0):"xmin"in U?oa(U,ea,new e,aa,0):"rings"in U?ma(U,ea,new J,aa,0):"paths"in U?P(U,ea,new R,aa,0):"points"in U?na(U,ea,new z,aa,0):null:null}function ha(U,ea,
aa,pa,ya){Oa[0]=U.x;Oa[1]=U.y;const za=U.z;Oa[2]=void 0!==za?za:ya;if(!Da(Oa,ea,0,Oa,pa,0,1))return null;aa.x=Oa[0];aa.y=Oa[1];aa.spatialReference=pa;void 0===za?(aa.z=void 0,aa.hasZ=!1):(aa.z=Oa[2],aa.hasZ=!0);void 0===U.m?(aa.m=void 0,aa.hasM=!1):(aa.m=U.m,aa.hasM=!0);return aa}function na(U,ea,aa,pa,ya){const {points:za,hasZ:Ea,hasM:La}=U;U=[];const Va=za.length,Ua=[];for(var Ta of za)Ua.push(Ta[0],Ta[1],Ea?Ta[2]:ya);if(!Da(Ua,ea,0,Ua,pa,0,Va))return null;for(ea=0;ea<Va;++ea){ya=3*ea;Ta=Ua[ya];
const cb=Ua[ya+1];Ea&&La?U.push([Ta,cb,Ua[ya+2],za[ea][3]]):Ea?U.push([Ta,cb,Ua[ya+2]]):La?U.push([Ta,cb,za[ea][2]]):U.push([Ta,cb])}aa.points=U;aa.spatialReference=pa;aa.hasZ=Ea;aa.hasM=La;return aa}function P(U,ea,aa,pa,ya){const {paths:za,hasZ:Ea,hasM:La}=U;U=[];if(!Ma(za,Ea,La,ea,U,pa,ya))return null;aa.paths=U;aa.spatialReference=pa;aa.hasZ=Ea;aa.hasM=La;return aa}function ma(U,ea,aa,pa,ya){const {rings:za,hasZ:Ea,hasM:La}=U;U=[];if(!Ma(za,Ea,La,ea,U,pa,ya))return null;aa.rings=U;aa.spatialReference=
pa;aa.hasZ=Ea;aa.hasM=La;return aa}function oa(U,ea,aa,pa,ya){const {xmin:za,ymin:Ea,xmax:La,ymax:Va,hasZ:Ua,hasM:Ta}=U;if(!qa(za,Ea,Ua?U.zmin:ya,ea,Oa,pa))return null;aa.xmin=Oa[0];aa.ymin=Oa[1];Ua&&(aa.zmin=Oa[2]);if(!qa(La,Va,Ua?U.zmax:ya,ea,Oa,pa))return null;aa.xmax=Oa[0];aa.ymax=Oa[1];Ua&&(aa.zmax=Oa[2]);Ta&&(aa.mmin=U.mmin,aa.mmax=U.mmax);aa.spatialReference=pa;return aa}function qa(U,ea,aa,pa,ya,za){Sa[0]=U;Sa[1]=ea;Sa[2]=aa;return Da(Sa,pa,0,ya,za,0,1)}function wa(U,ea,aa,pa){if(B.isNone(ea)||
B.isNone(pa)||2>U.length)return!1;2===U.length&&(Sa[0]=U[0],Sa[1]=U[1],Sa[2]=0,U=Sa);return Da(U,ea,0,aa,pa,0,1)}function Ja(U,ea,aa){if(B.isNone(ea))return!1;ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ea))return!1;ea(U,0,Sa,0);aa!==Sa&&(aa[0]=Sa[0],aa[1]=Sa[1],2<aa.length&&(aa[2]=Sa[2]));return!0}function Da(U,ea,aa,pa,ya,za,Ea=1){ea=Ya(ea,ya,Ub);if(B.isNone(ea))return!1;if(ea===l){if(U===pa&&aa===za)return!0;Ea=aa+3*Ea;for(let La=aa,Va=za;La<Ea;La++,Va++)pa[Va]=U[La];return!0}Ea=
aa+3*Ea;for(let La=aa,Va=za;La<Ea;La+=3,Va+=3)ea(U,La,pa,Va);return!0}function Ma(U,ea,aa,pa,ya,za,Ea=0){const La=[];for(const Va of U)for(const Ua of Va)La.push(Ua[0],Ua[1],ea?Ua[2]:Ea);if(!Da(La,pa,0,La,za,0,La.length/3))return!1;pa=0;ya.length=0;for(const Va of U){U=[];for(const Ua of Va)ea&&aa?U.push([La[pa++],La[pa++],La[pa++],Ua[3]]):ea?U.push([La[pa++],La[pa++],La[pa++]]):(aa?U.push([La[pa++],La[pa++],Ua[2]]):U.push([La[pa++],La[pa++]]),pa++);ya.push(U)}return!0}function Za(U,ea,aa,pa){ea=
pa+ea;if(ea<pa/2||aa>ea)return Number.MAX_VALUE;U=Math.abs(lb*U)+Math.asin(aa/ea);return U>=Math.PI/2?Number.MAX_VALUE:aa/Math.cos(U)}function c(U,ea,aa){const pa=Math.sin(U);U=Math.cos(U);const ya=Math.sin(ea);ea=Math.cos(ea);aa[0]=-pa;aa[4]=-ya*U;aa[8]=ea*U;aa[12]=0;aa[1]=U;aa[5]=-ya*pa;aa[9]=ea*pa;aa[13]=0;aa[2]=0;aa[6]=ea;aa[10]=ya;aa[14]=0;aa[3]=0;aa[7]=0;aa[11]=0;aa[15]=1;return aa}function m(U,ea,aa){c(U,ea,aa);w.transpose(aa,aa);return aa}function fa(U,ea){if(ea.spatialReference===U)return ea.spatialReferenceId;
ea.spatialReference=U;"metersPerUnit"in ea&&(ea.metersPerUnit=n.getMetersPerUnitForSR(U,1));return U.wkt===r.SphericalECEFSpatialReference.wkt?ea.spatialReferenceId=la.SPHERICAL_ECEF:X.isWGS84(U)?ea.spatialReferenceId=la.WGS84:X.isWebMercator(U)?ea.spatialReferenceId=la.WEB_MERCATOR:X.isPlateCarree(U)?ea.spatialReferenceId=la.PLATE_CARREE:U.wkt===r.WGS84ECEFSpatialReference.wkt?ea.spatialReferenceId=la.WGS84_ECEF:U.wkid===ka.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=la.CGCS2000:U.wkt===r.SphericalPCPFMars.wkt?
ea.spatialReferenceId=la.SPHERICAL_MARS_PCPF:U.wkt===r.SphericalPCPFMoon.wkt?ea.spatialReferenceId=la.SPHERICAL_MOON_PCPF:X.isMars(U)?ea.spatialReferenceId=la.GCSMARS2000:X.isMoon(U)?ea.spatialReferenceId=la.GCSMOON2000:ea.spatialReferenceId=la.UNKNOWN}function l(U,ea,aa,pa){U!==aa&&(aa[pa++]=U[ea++],aa[pa++]=U[ea++],aa[pa]=U[ea])}function G(U,ea,aa,pa){aa[pa++]=wb*(U[ea++]/y.earth.radius);aa[pa++]=wb*(Math.PI/2-2*Math.atan(Math.exp(-U[ea++]/y.earth.radius)));aa[pa]=U[ea]}function W(U,ea,aa,pa){G(U,
ea,aa,pa);Aa(aa,pa,aa,pa)}function Y(U,ea,aa,pa){G(U,ea,aa,pa);Qa(aa,pa,aa,pa)}function ja(U,ea,aa,pa,ya){var za=.4999999*Math.PI;za=t.clamp(lb*U[ea+1],-za,za);za=Math.sin(za);aa[pa++]=lb*U[ea]*ya.radius;aa[pa++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));aa[pa]=U[ea+2]}function ia(U,ea,aa,pa){ja(U,ea,aa,pa,y.earth)}function I(U,ea,aa,pa){aa[pa]=U[ea]*Vb;aa[pa+1]=U[ea+1]*Vb;aa[pa+2]=U[ea+2]}function O(U,ea,aa,pa){aa[pa]=U[ea]*Db;aa[pa+1]=U[ea+1]*Db;aa[pa+2]=U[ea+2]}function da(U,ea,aa,pa){G(U,ea,
aa,pa);I(aa,pa,aa,pa)}function ra(U,ea,aa,pa,ya){ya+=U[ea+2];const za=lb*U[ea+1];U=lb*U[ea];ea=Math.cos(za);aa[pa++]=Math.cos(U)*ea*ya;aa[pa++]=Math.sin(U)*ea*ya;aa[pa]=Math.sin(za)*ya}function sa(U,ea,aa,pa){ra(U,ea,aa,pa,y.moon.radius)}function xa(U,ea,aa,pa){ra(U,ea,aa,pa,y.mars.radius)}function Aa(U,ea,aa,pa){ra(U,ea,aa,pa,y.earth.radius)}function Ba(U,ea,aa,pa,ya){var za=U[ea];const Ea=U[ea+1];ea=U[ea+2];U=Math.sqrt(za*za+Ea*Ea+ea*ea);ea=t.asinClamped(ea/(0===U?1:U));za=Math.atan2(Ea,za);aa[pa++]=
wb*za;aa[pa++]=wb*ea;aa[pa]=U-ya}function Ka(U,ea,aa,pa){Ba(U,ea,aa,pa,y.moon.radius)}function Ia(U,ea,aa,pa){Ba(U,ea,aa,pa,y.mars.radius)}function Fa(U,ea,aa,pa){Ba(U,ea,aa,pa,y.earth.radius)}function Ga(U,ea,aa,pa){Fa(U,ea,aa,pa);ia(aa,pa,aa,pa)}function Ha(U,ea,aa,pa){Fa(U,ea,aa,pa);Qa(aa,pa,aa,pa)}function Qa(U,ea,aa,pa){{var ya=y.earth;const Ea=lb*U[ea];var za=lb*U[ea+1];U=U[ea+2];ea=Math.sin(za);za=Math.cos(za);const La=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ea*ea);aa[pa++]=(La+U)*za*
Math.cos(Ea);aa[pa++]=(La+U)*za*Math.sin(Ea);aa[pa++]=(La*(1-ya.eccentricitySquared)+U)*ea}}function ta(U,ea,aa,pa){var ya=T.earthEllipsoidConstants,za=U[ea],Ea=U[ea+1];U=U[ea+2];let La;ea=Math.abs(U);var Va=za*za+Ea*Ea;var Ua=Math.sqrt(Va);var Ta=Va+U*U;var cb=Math.sqrt(Ta);za=Math.atan2(Ea,za);var nb=U*U/Ta;Ta=Va/Ta;Ea=ya.a2/cb;Va=ya.a3-ya.a4/cb;.3<Ta?(nb=ea/cb*(1+Ta*(ya.a1+Ea+nb*Va)/cb),cb=Math.asin(nb),Ea=nb*nb,Ta=Math.sqrt(1-Ea)):(Ta=Ua/cb*(1-nb*(ya.a5-Ea-Ta*Va)/cb),cb=Math.acos(Ta),Ea=1-Ta*
Ta,nb=Math.sqrt(Ea));La=1-y.earth.eccentricitySquared*Ea;Ea=y.earth.radius/Math.sqrt(La);ya=ya.a6*Ea;Ea=Ua-Ea*Ta;Va=ea-ya*nb;ea=Ta*Ea+nb*Va;Ua=Ta*Va-nb*Ea;ya=Ua/(ya/La+ea);cb+=ya;0>U&&(cb=-cb);aa[pa++]=wb*za;aa[pa++]=wb*cb;aa[pa]=ea+Ua*ya/2}function $a(U,ea,aa,pa){ta(U,ea,aa,pa);Aa(aa,pa,aa,pa)}function ab(U,ea,aa,pa){ta(U,ea,aa,pa);ia(aa,pa,aa,pa)}function Ya(U,ea,aa=bb()){return B.isNone(U)||B.isNone(ea)?null:b(U,ea,aa).projector}function b(U,ea,aa){if(B.isNone(U)||B.isNone(ea)||aa.source.spatialReference===
U&&aa.dest.spatialReference===ea)return aa;const pa=fa(U,aa.source),ya=fa(ea,aa.dest);pa===la.UNKNOWN&&ya===la.UNKNOWN?X.equals(U,ea)?aa.projector=l:aa.projector=null:aa.projector=gb[pa][ya];return aa}function bb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:l}}let Ra=null,mb=null,qb=null,Cb={};const Tb=new p.SimpleObservable;let Fb=function(U){function ea(){return U.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ca._inheritsLoose(ea,U);return ea}(V);var la;(function(U){U[U.UNKNOWN=0]="UNKNOWN";U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";
U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const Vb=y.earth.radius*Math.PI/180,Db=180/(y.earth.radius*Math.PI),gb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:l,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:I,[la.WGS84]:l,[la.WGS84_ECEF]:Qa},[la.CGCS2000]:{[la.CGCS2000]:l,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:l,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:I,[la.WGS84]:null,[la.WGS84_ECEF]:Qa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:l,[la.GCSMOON2000]:null,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,
[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:l,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:sa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:G,[la.WGS84_COMPARABLE_LON_LAT]:G,
[la.SPHERICAL_ECEF]:W,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:l,[la.PLATE_CARREE]:da,[la.WGS84]:G,[la.WGS84_ECEF]:Y},[la.WGS84_ECEF]:{[la.CGCS2000]:ta,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ta,[la.WGS84_COMPARABLE_LON_LAT]:ta,[la.SPHERICAL_ECEF]:$a,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(U,ea,aa,pa){ta(U,ea,aa,pa);I(aa,pa,aa,pa)},[la.WGS84]:ta,
[la.WGS84_ECEF]:l},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Fa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:Fa,[la.SPHERICAL_ECEF]:l,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ga,[la.PLATE_CARREE]:function(U,ea,aa,pa){Fa(U,ea,aa,pa);I(aa,pa,aa,pa)},[la.WGS84]:Fa,[la.WGS84_ECEF]:Ha},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ia,[la.GCSMOON2000]:null,[la.LON_LAT]:Ia,[la.WGS84_COMPARABLE_LON_LAT]:null,
[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:l,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ka,[la.LON_LAT]:Ka,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:l,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:l,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:l,[la.GCSMARS2000]:l,[la.GCSMOON2000]:l,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:l,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:sa,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:I,[la.WGS84]:l,[la.WGS84_ECEF]:Qa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:l,[la.WGS84_COMPARABLE_LON_LAT]:l,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:I,[la.WGS84]:l,[la.WGS84_ECEF]:Qa},[la.PLATE_CARREE]:{[la.CGCS2000]:O,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:O,
[la.WGS84_COMPARABLE_LON_LAT]:O,[la.SPHERICAL_ECEF]:function(U,ea,aa,pa){O(U,ea,aa,pa);Aa(aa,pa,aa,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(U,ea,aa,pa){O(U,ea,aa,pa);ia(aa,pa,aa,pa)},[la.PLATE_CARREE]:l,[la.WGS84]:O,[la.WGS84_ECEF]:function(U,ea,aa,pa){O(U,ea,aa,pa);Qa(aa,pa,aa,pa)}}},rb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Gb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub=bb(),yc=bb(),lb=t.deg2rad(1),
wb=t.rad2deg(1),Sa=A.create(),fb=A.create(),sb=A.create(),Oa=A.create(),Hb=A.create();d.canProjectToWGS84ComparableLonLat=function(U){if(B.isNone(U))return!1;U=fa(U,rb);return!!gb[U][la.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=H;d.computeENUToSphericalPCPFLocalRotation=c;d.computeSphericalPCPFToENULocalRotation=m;d.computeTranslationToOriginAndRotation=function(U,ea,aa,pa){if(B.isNone(U)||B.isNone(pa))return!1;var ya=fa(U,rb),za=fa(pa,Gb);if(ya===za&&za!==la.SPHERICAL_ECEF&&za!==la.SPHERICAL_MARS_PCPF&&
za!==la.SPHERICAL_MOON_PCPF&&(ya!==la.UNKNOWN||X.equals(U,pa)))return w.fromTranslation(aa,ea),!0;if(za===la.SPHERICAL_ECEF||za===la.SPHERICAL_MARS_PCPF||za===la.SPHERICAL_MOON_PCPF){ya=gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(B.isNone(ya)||B.isNone(za))return!1;ya(ea,0,fb,0);za(fb,0,sb,0);c(lb*fb[0],lb*fb[1],aa);aa[12]=sb[0];aa[13]=sb[1];aa[14]=sb[2];return!0}if((za===la.WEB_MERCATOR||za===la.PLATE_CARREE)&&(ya===la.WGS84||ya===la.CGCS2000&&za===la.PLATE_CARREE||ya===la.SPHERICAL_ECEF||ya===la.WEB_MERCATOR)){U=
gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(B.isNone(U)||B.isNone(za))return!1;U(ea,0,fb,0);za(fb,0,sb,0);ya===la.SPHERICAL_ECEF?m(lb*fb[0],lb*fb[1],aa):w.identity(aa);aa[12]=sb[0];aa[13]=sb[1];aa[14]=sb[2];return!0}return!1};d.getProjectorName=function(U,ea){switch(Ya(U,ea,Ub)){case l:return"copy3";case Aa:return"wgs84ToSphericalECEF";case ia:return"wgs84ToWebMercator";case I:return"wgs84ToPlateCarree";case Qa:return"wgs84ToWGS84ECEF";case G:return"webMercatorToWGS84";case W:return"webMercatorToSphericalECEF";
case Y:return"webMercatorToWGS84ECEF";case da:return"webMercatorToPlateCarree";case ta:return"wgs84ECEFToWGS84";case $a:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Fa:return"sphericalECEFToWGS84";case Ga:return"sphericalECEFToWebMercator";case Ia:return"sphericalMarsPCPFToMars2000";case Ka:return"sphericalMoonPCPFToMoon2000";case Ha:return"sphericalECEFToWGS84ECEF";case xa:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};
d.getTransformation=D;d.getTransformations=function(U,ea,aa=null){if(B.isNone(Ra))throw new Fb;U=Ra._getTransformationBySuitability(mb,U,ea,aa,null==aa?void 0:aa.spatialReference);if(null!==U){ea=[];for(const pa of U)ea.push(ba.fromGE(pa));return ea}return[]};d.initializeProjection=function(U,ea,aa,pa){return S.apply(this,arguments)};d.isLoaded=L;d.load=Q;d.localLinearScaleFactors=function(U,ea,aa,pa){if(B.isNone(ea)||B.isNone(pa))return!1;const ya=fa(ea,rb);var za=fa(pa,Gb);if(ya===za&&ya!==la.UNKNOWN||
X.equals(ea,pa))return aa[0]=1,aa[1]=1,aa[2]=1,!0;if(ya===la.SPHERICAL_ECEF){ea=u.length(U);U=ea/Math.sqrt(U[0]*U[0]+U[1]*U[1]);ea/=y.earth.radius;if(za===la.WEB_MERCATOR)return aa[0]=U*ea,aa[1]=U*ea,aa[2]=1,!0;if(za===la.WGS84||za===la.CGCS2000)return za=Db,aa[0]=za*U*ea,aa[1]=za*ea,aa[2]=1,!0}else if(ya===la.PLATE_CARREE){if(za===la.WGS84||za===la.CGCS2000)return aa[0]=Db,aa[1]=Db,aa[2]=1,!0;if(za===la.WEB_MERCATOR)return za=U[1]/y.earth.radius,aa[0]=1,aa[1]=1/Math.cos(za),aa[2]=1,!0}return!1};
d.lonLatToSphericalPCPF=function(U,ea,aa,pa){const ya=Math.cos(aa);U[0]=Math.cos(ea)*ya*pa;U[1]=Math.sin(ea)*ya*pa;U[2]=Math.sin(aa)*pa};d.lonLatToWebMercatorComparable=ja;d.project=K;d.projectBoundingRect=function(U,ea,aa,pa){if(null==U)return!1;if(X.equals(ea,pa))return x.copy(aa,U),!0;Sa[0]=U[0];Sa[1]=U[1];Sa[2]=0;if(!Da(Sa,ea,0,Sa,pa,0,1))return!1;aa[0]=Sa[0];aa[1]=Sa[1];Sa[0]=U[2];Sa[1]=U[3];Sa[2]=0;if(!Da(Sa,ea,0,Sa,pa,0,1))return!1;aa[2]=Sa[0];aa[3]=Sa[1];return!0};d.projectBoundingSphere=
function(U,ea,aa,pa){if(B.isNone(ea)||B.isNone(pa))return!1;ea=b(ea,pa,yc);if(ea.projector===l)return aa[0]=U[0],aa[1]=U[1],aa[2]=U[2],aa[3]=U[3],!0;if(B.isNone(ea.projector))return!1;const {source:ya,dest:za}=ea;if(za.spatialReferenceId===la.WEB_MERCATOR){ea=gb[ya.spatialReferenceId][la.WGS84];if(B.isNone(ea))return!1;ea(U,0,fb,0);ia(fb,0,aa,0);aa[3]=Za(fb[1],U[2],U[3],y.earth.radius);return!0}if(ya.spatialReferenceId!==la.WGS84&&ya.spatialReferenceId!==la.CGCS2000||za.spatialReferenceId!==la.PLATE_CARREE)ea.projector(U,
0,aa,0),aa[3]=U[3]*ya.metersPerUnit/za.metersPerUnit;else{pa=gb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ea=U[3];B.isSome(gb[ya.spatialReferenceId][la.SPHERICAL_ECEF])&&B.isSome(pa)&&(Ea=Za(U[1],U[2],U[3],y.earth.radius));ea.projector(U,0,aa,0);aa[3]=Ea}return!0};d.projectBuffer=Da;d.projectDirection=function(U,ea,aa,pa,ya){u.copy(Oa,U);u.add(Hb,U,ea);wa(Oa,aa,Oa,ya);wa(Hb,aa,Hb,ya);u.subtract(pa,Hb,Oa);u.normalize(pa,pa)};d.projectExtent=function(U,ea,aa=ea.spatialReference,pa=0){return B.isSome(aa)&&
B.isSome(oa(U,U.spatialReference,ea,aa,pa))};d.projectMany=C;d.projectMultipoint=function(U,ea,aa=ea.spatialReference,pa=0){return B.isNone(aa)?!1:B.isSome(na(U,U.spatialReference,ea,aa,pa))};d.projectOrLoad=function(U,ea){return B.isNone(U)?{pending:null,geometry:null}:X.equals(U.spatialReference,ea)?{pending:null,geometry:U}:X.isValid(U.spatialReference)&&X.isValid(ea)?H(U.spatialReference,ea)?{pending:null,geometry:g(U,ea)}:L()?{pending:null,geometry:g(U,ea)}:(q.trackAccess(Tb),{pending:Q(),geometry:null}):
{pending:null,geometry:null}};d.projectPoint=function(U,ea,aa=ea.spatialReference,pa=0){return B.isNone(aa)?!1:B.isSome(ha(U,U.spatialReference,ea,aa,pa))};d.projectPointToVector=function(U,ea,aa,pa=0){Oa[0]=U.x;Oa[1]=U.y;const ya=U.z;Oa[2]=void 0!==ya?ya:pa;return Da(Oa,U.spatialReference,0,ea,aa,0,1)};d.projectPointToWGS84ComparableLonLat=function(U,ea){Oa[0]=U.x;Oa[1]=U.y;const aa=U.z;Oa[2]=void 0!==aa?aa:0;return Ja(Oa,U.spatialReference,ea)};d.projectPolygon=function(U,ea,aa=ea.spatialReference,
pa=0){return B.isSome(aa)&&B.isSome(ma(U,U.spatialReference,ea,aa,pa))};d.projectPolygonToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,rings:aa},pa,ya=0){ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ea))return!1;U=U?za=>za:za=>u.set(Oa,za[0],za[1],ya);for(const za of aa){aa=[];for(const Ea of za){const La=[0,0,ya];ea(U(Ea),0,La,0);aa.push(La)}pa.push(aa)}return!0};d.projectPolyline=function(U,ea,aa=ea.spatialReference,pa=0){return B.isSome(aa)&&B.isSome(P(U,U.spatialReference,
ea,aa,pa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,paths:aa},pa,ya=0){ea=fa(ea,rb);ea=gb[ea][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ea))return!1;U=U?za=>za:za=>u.set(Oa,za[0],za[1],ya);for(const za of aa){aa=[];for(const Ea of za){const La=[0,0,ya];ea(U(Ea),0,La,0);aa.push(La)}pa.push(aa)}return!0};d.projectVectorToDehydratedPoint=function(U,ea,aa){return Da(U,ea,0,Oa,aa.spatialReference,0,1)?(aa.x=Oa[0],aa.y=Oa[1],aa.z=Oa[2],aa):null};d.projectVectorToPoint=
function(U,ea,aa){if(B.isNone(ea)||B.isNone(aa))return null;const pa=new h({spatialReference:aa});return Da(U,ea,0,Oa,aa,0,1)?(pa.x=Oa[0],pa.y=Oa[1],pa.z=Oa[2],pa):null};d.projectVectorToVector=wa;d.projectVectorToWGS84ComparableLonLat=function(U,ea,aa){return Ja(U,ea,aa)};d.projectWithoutEngine=M;d.projectXYZToVector=qa;d.sphericalPCPFtoLonLatElevation=Ba;d.test={get loadPromise(){return qb}};d.tryProjectWithZConversion=g;d.unload=function(){qb=mb=Ra=null;Cb={}};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(k,d,ca,V,t,B,E,n,q){function p(P){P=H[P];if(!P)throw Error("unknown type");return P}function w(P){return g[P].baseUnit}function u(P,ma=null){ma=ma||p(P);return g[ma].baseUnit===P}function A(P,
ma,oa){if(ma===oa)return P;const qa=p(ma);if(qa!==p(oa))throw Error("incompatible units");P=u(ma,qa)?P:P*g[qa].units[ma].inBaseUnits;return u(oa,qa)?P:P/g[qa].units[oa].inBaseUnits}function e(P,ma){P=A(P,ma,"meters");return 3E3>Math.abs(P)?"meters":"kilometers"}function z(P,ma){P=A(P,ma,"meters");return 1E5>Math.abs(P)?"meters":"kilometers"}function a(P,ma){P=A(P,ma,"feet");return 1E3>Math.abs(P)?"feet":"miles"}function h(P,ma){P=A(P,ma,"feet");return 1E5>Math.abs(P)?"feet":"miles"}function J(P,ma){P=
A(P,ma,"square-meters");return 3E6>Math.abs(P)?"square-meters":"square-kilometers"}function R(P,ma){P=A(P,ma,"square-feet");return 1E6>Math.abs(P)?"square-feet":"square-miles"}function r(P){return D.fromJSON(P.toLowerCase())||null}function x(P){const ma=y(P),oa=P instanceof B?t.getReferenceEllipsoid(P).metersPerDegree:1E5;return ma>=oa?"meters":X(P)}function y(P,ma=E.earth.metersPerDegree){return V.unwrapOr(T(P,!0),ma)}function T(P,ma=!1){let oa,qa,wa=null;null!=P&&("object"===typeof P?(oa=P.wkid,
qa=P.wkt):"number"===typeof P?oa=P:"string"===typeof P&&(qa=P));if(oa){if(n.isWKIDFromMars(oa))return E.mars.metersPerDegree;if(n.isWKIDFromMoon(oa))return E.moon.metersPerDegree;wa=Q.values[Q[oa]];!wa&&ma&&C.has(oa)&&(wa=N)}else qa&&(/^PROJCS/i.test(qa)?wa=ba(L.exec(qa),wa):/^GEOCCS/i.test(qa)&&(wa=ba(K.exec(qa),wa)));return wa}function ba(P,ma){return P&&P[1]?parseFloat(P[1].split(",")[1]):ma}function X(P){var ma=null;if(null!=P)if("object"===typeof P){var oa=P.wkid;var qa=P.wkt}else"number"===
typeof P?oa=P:"string"===typeof P&&(qa=P);if(oa)ma=Q.units[Q[oa]];else if(qa&&(P=/^PROJCS/i.test(qa)?L:/^GEOCCS/i.test(qa)?K:null)&&(qa=P.exec(qa))&&qa[1]&&(qa=qa[1],ma=(ma=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&ma[1],!ma||!Q.units.includes(ma)))for(qa=parseFloat(qa.split(",")[1]),ma=null,P=Q.values,oa=0;oa<P.length;++oa)if(1E-7>Math.abs(qa-P[oa])){ma=Q.units[oa];break}return V.isSome(ma)?r(ma):null}function ka(P){P=X(P);if(V.isNone(P))return null;switch(P){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const N=E.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,Q=q,K=/UNIT\[([^\]]+)\]/i,C=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),D=ca.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};q={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(P=>P*P)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const g={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:q},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},H=(()=>{const P={};for(const ma in g)for(const oa in g[ma].units)P[oa]=ma;return P})(),S="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),M=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ha={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},na={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};d=ca.strict()(ha);q=ca.strict()(na);ca=ca.strict()({...ha,...na});k.areaUnitFromSpatialReference=function(P){P=X(P);return V.isNone(P)?null:M.get(P)};k.areaUnitsJSONMap=d;k.baseUnitForUnit=function(P){return w(p(P))};k.baseUnitForUnitType=w;k.convertUnit=A;k.getDefaultUnitForView=function(P){var ma;if(V.isNone(P))return"metric";var oa=P.map;if(oa=oa&&"portalItem"in oa?null==(ma=oa.portalItem)?void 0:ma.portal:null){var qa,wa;switch(null!=(qa=null==oa?void 0:null==(wa=oa.user)?void 0:
wa.units)?qa:oa.units){case "metric":return"metric";case "english":return"imperial"}}return V.unwrapOr(ka(P.spatialReference),"metric")};k.getDefaultUnitSystem=ka;k.getMetersPerUnit=T;k.getMetersPerUnitForSR=y;k.getMetersPerVerticalUnitForSR=function(P){if(P&&"object"===typeof P&&!n.isEarth(P))return 1;P=y(P);return 1E5<P?1:P};k.getUnitString=X;k.getVerticalUnitStringForSR=x;k.inchesPerMeter=39.37;k.isBaseUnit=u;k.isMeasurementSystem=function(P){return"imperial"===P||"metric"===P};k.lengthToDegrees=
function(P,ma,oa){return A(P,ma,"meters")/(oa*Math.PI/180)};k.lengthUnitFromSpatialReference=function(P){P=X(P);return V.isNone(P)||!S.includes(P)?null:P};k.lengthUnitsJSONMap=q;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits=S;k.preferredAreaUnit=function(P,ma,oa){switch(oa){case "metric":return J(P,ma);case "imperial":return R(P,ma);default:return oa}};
k.preferredImperialAreaUnit=R;k.preferredImperialLengthUnit=a;k.preferredImperialVerticalLengthUnit=h;k.preferredLengthUnit=function(P,ma,oa){switch(oa){case "metric":return e(P,ma);case "imperial":return a(P,ma);default:return oa}};k.preferredMetricAreaUnit=J;k.preferredMetricLengthUnit=e;k.preferredMetricVerticalLengthUnit=z;k.preferredVerticalLengthUnit=function(P,ma,oa){switch(oa){case "metric":return z(P,ma);case "imperial":return h(P,ma);default:return oa}};k.unitFromRESTJSON=r;k.unitToRESTJSON=
function(P){return D.toJSON(P)||null};k.unitType=p;k.unitsJSONMap=ca;k.verticalLengthUnitFromSpatialReference=function(P){P=x(P);return V.isNone(P)||!S.includes(P)?null:P};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,d,ca,V){function t(p){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${p.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const B=t(ca.earth),E=t(ca.mars),n=t(ca.moon),q=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ca.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=B;k.SphericalPCPFMars=
E;k.SphericalPCPFMoon=n;k.WGS84ECEFSpatialReference=q;k.createSphericalPCPF=t;k.getReferenceEllipsoid=function(p){return p&&(V.isMars(p)||p===E)?ca.mars:p&&(V.isMoon(p)||p===n)?ca.moon:ca.earth};k.getReferenceEllipsoidFromWKID=function(p){return V.isWKIDFromMars(p)?ca.mars:V.isWKIDFromMoon(p)?ca.moon:ca.earth};k.getSphericalPCPF=function(p){return p&&(V.isMars(p)||p===E)?E:p&&(V.isMoon(p)||p===n)?n:B};k.getSphericalPCPFForEllipsoid=function(p){return p&&p===ca.mars?E:p&&p===ca.moon?n:B};Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,d){let ca=function(){function V(){this._observers=[]}var t=V.prototype;t.observe=function(B){this._observers.includes(B)||this._observers.push(B);return new d.ObservationHandle(this._observers,B)};t.notify=function(){const B=this._observers.slice();for(let E=0;E<B.length;++E){const n=B[E];n.onInvalidated();n.onCommitted()}};
return V}();k.SimpleObservable=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,d,ca){function V(c,m){c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];c[6]=m[6];c[7]=m[7];c[8]=m[8];c[9]=m[9];c[10]=m[10];c[11]=m[11];c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function t(c,m,fa,l,G,W,Y,ja,ia,I,O,da,ra,sa,xa,Aa,Ba){c[0]=m;c[1]=fa;c[2]=l;c[3]=G;c[4]=
W;c[5]=Y;c[6]=ja;c[7]=ia;c[8]=I;c[9]=O;c[10]=da;c[11]=ra;c[12]=sa;c[13]=xa;c[14]=Aa;c[15]=Ba;return c}function B(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function E(c,m){if(c===m){const fa=m[1],l=m[2],G=m[3],W=m[6],Y=m[7],ja=m[11];c[1]=m[4];c[2]=m[8];c[3]=m[12];c[4]=fa;c[6]=m[9];c[7]=m[13];c[8]=l;c[9]=W;c[11]=m[14];c[12]=G;c[13]=Y;c[14]=ja}else c[0]=m[0],c[1]=m[4],c[2]=m[8],c[3]=m[12],c[4]=m[1],c[5]=m[5],c[6]=
m[9],c[7]=m[13],c[8]=m[2],c[9]=m[6],c[10]=m[10],c[11]=m[14],c[12]=m[3],c[13]=m[7],c[14]=m[11],c[15]=m[15];return c}function n(c,m){const fa=m[0],l=m[1],G=m[2],W=m[3],Y=m[4],ja=m[5],ia=m[6],I=m[7],O=m[8],da=m[9],ra=m[10],sa=m[11],xa=m[12],Aa=m[13],Ba=m[14];m=m[15];const Ka=fa*ja-l*Y,Ia=fa*ia-G*Y,Fa=fa*I-W*Y,Ga=l*ia-G*ja,Ha=l*I-W*ja,Qa=G*I-W*ia,ta=O*Aa-da*xa,$a=O*Ba-ra*xa,ab=O*m-sa*xa,Ya=da*Ba-ra*Aa,b=da*m-sa*Aa,bb=ra*m-sa*Ba;let Ra=Ka*bb-Ia*b+Fa*Ya+Ga*ab-Ha*$a+Qa*ta;if(!Ra)return null;Ra=1/Ra;c[0]=
(ja*bb-ia*b+I*Ya)*Ra;c[1]=(G*b-l*bb-W*Ya)*Ra;c[2]=(Aa*Qa-Ba*Ha+m*Ga)*Ra;c[3]=(ra*Ha-da*Qa-sa*Ga)*Ra;c[4]=(ia*ab-Y*bb-I*$a)*Ra;c[5]=(fa*bb-G*ab+W*$a)*Ra;c[6]=(Ba*Fa-xa*Qa-m*Ia)*Ra;c[7]=(O*Qa-ra*Fa+sa*Ia)*Ra;c[8]=(Y*b-ja*ab+I*ta)*Ra;c[9]=(l*ab-fa*b-W*ta)*Ra;c[10]=(xa*Ha-Aa*Fa+m*Ka)*Ra;c[11]=(da*Fa-O*Ha-sa*Ka)*Ra;c[12]=(ja*$a-Y*Ya-ia*ta)*Ra;c[13]=(fa*Ya-l*$a+G*ta)*Ra;c[14]=(Aa*Ia-xa*Ga-Ba*Ka)*Ra;c[15]=(O*Ga-da*Ia+ra*Ka)*Ra;return c}function q(c,m){const fa=m[0],l=m[1],G=m[2],W=m[3],Y=m[4],ja=m[5],ia=
m[6],I=m[7],O=m[8],da=m[9],ra=m[10],sa=m[11],xa=m[12],Aa=m[13],Ba=m[14];m=m[15];c[0]=ja*(ra*m-sa*Ba)-da*(ia*m-I*Ba)+Aa*(ia*sa-I*ra);c[1]=-(l*(ra*m-sa*Ba)-da*(G*m-W*Ba)+Aa*(G*sa-W*ra));c[2]=l*(ia*m-I*Ba)-ja*(G*m-W*Ba)+Aa*(G*I-W*ia);c[3]=-(l*(ia*sa-I*ra)-ja*(G*sa-W*ra)+da*(G*I-W*ia));c[4]=-(Y*(ra*m-sa*Ba)-O*(ia*m-I*Ba)+xa*(ia*sa-I*ra));c[5]=fa*(ra*m-sa*Ba)-O*(G*m-W*Ba)+xa*(G*sa-W*ra);c[6]=-(fa*(ia*m-I*Ba)-Y*(G*m-W*Ba)+xa*(G*I-W*ia));c[7]=fa*(ia*sa-I*ra)-Y*(G*sa-W*ra)+O*(G*I-W*ia);c[8]=Y*(da*m-sa*Aa)-
O*(ja*m-I*Aa)+xa*(ja*sa-I*da);c[9]=-(fa*(da*m-sa*Aa)-O*(l*m-W*Aa)+xa*(l*sa-W*da));c[10]=fa*(ja*m-I*Aa)-Y*(l*m-W*Aa)+xa*(l*I-W*ja);c[11]=-(fa*(ja*sa-I*da)-Y*(l*sa-W*da)+O*(l*I-W*ja));c[12]=-(Y*(da*Ba-ra*Aa)-O*(ja*Ba-ia*Aa)+xa*(ja*ra-ia*da));c[13]=fa*(da*Ba-ra*Aa)-O*(l*Ba-G*Aa)+xa*(l*ra-G*da);c[14]=-(fa*(ja*Ba-ia*Aa)-Y*(l*Ba-G*Aa)+xa*(l*ia-G*ja));c[15]=fa*(ja*ra-ia*da)-Y*(l*ra-G*da)+O*(l*ia-G*ja);return c}function p(c){const m=c[0],fa=c[1],l=c[2],G=c[3],W=c[4],Y=c[5],ja=c[6],ia=c[7],I=c[8],O=c[9],da=
c[10],ra=c[11],sa=c[12],xa=c[13],Aa=c[14];c=c[15];return(m*Y-fa*W)*(da*c-ra*Aa)-(m*ja-l*W)*(O*c-ra*xa)+(m*ia-G*W)*(O*Aa-da*xa)+(fa*ja-l*Y)*(I*c-ra*sa)-(fa*ia-G*Y)*(I*Aa-da*sa)+(l*ia-G*ja)*(I*xa-O*sa)}function w(c,m,fa){const l=m[0],G=m[1],W=m[2],Y=m[3],ja=m[4],ia=m[5],I=m[6],O=m[7],da=m[8],ra=m[9],sa=m[10],xa=m[11],Aa=m[12],Ba=m[13],Ka=m[14];m=m[15];let Ia=fa[0],Fa=fa[1],Ga=fa[2],Ha=fa[3];c[0]=Ia*l+Fa*ja+Ga*da+Ha*Aa;c[1]=Ia*G+Fa*ia+Ga*ra+Ha*Ba;c[2]=Ia*W+Fa*I+Ga*sa+Ha*Ka;c[3]=Ia*Y+Fa*O+Ga*xa+Ha*m;
Ia=fa[4];Fa=fa[5];Ga=fa[6];Ha=fa[7];c[4]=Ia*l+Fa*ja+Ga*da+Ha*Aa;c[5]=Ia*G+Fa*ia+Ga*ra+Ha*Ba;c[6]=Ia*W+Fa*I+Ga*sa+Ha*Ka;c[7]=Ia*Y+Fa*O+Ga*xa+Ha*m;Ia=fa[8];Fa=fa[9];Ga=fa[10];Ha=fa[11];c[8]=Ia*l+Fa*ja+Ga*da+Ha*Aa;c[9]=Ia*G+Fa*ia+Ga*ra+Ha*Ba;c[10]=Ia*W+Fa*I+Ga*sa+Ha*Ka;c[11]=Ia*Y+Fa*O+Ga*xa+Ha*m;Ia=fa[12];Fa=fa[13];Ga=fa[14];Ha=fa[15];c[12]=Ia*l+Fa*ja+Ga*da+Ha*Aa;c[13]=Ia*G+Fa*ia+Ga*ra+Ha*Ba;c[14]=Ia*W+Fa*I+Ga*sa+Ha*Ka;c[15]=Ia*Y+Fa*O+Ga*xa+Ha*m;return c}function u(c,m,fa){const l=fa[0],G=fa[1];fa=fa[2];
if(m===c)c[12]=m[0]*l+m[4]*G+m[8]*fa+m[12],c[13]=m[1]*l+m[5]*G+m[9]*fa+m[13],c[14]=m[2]*l+m[6]*G+m[10]*fa+m[14],c[15]=m[3]*l+m[7]*G+m[11]*fa+m[15];else{const W=m[0],Y=m[1],ja=m[2],ia=m[3],I=m[4],O=m[5],da=m[6],ra=m[7],sa=m[8],xa=m[9],Aa=m[10],Ba=m[11];c[0]=W;c[1]=Y;c[2]=ja;c[3]=ia;c[4]=I;c[5]=O;c[6]=da;c[7]=ra;c[8]=sa;c[9]=xa;c[10]=Aa;c[11]=Ba;c[12]=W*l+I*G+sa*fa+m[12];c[13]=Y*l+O*G+xa*fa+m[13];c[14]=ja*l+da*G+Aa*fa+m[14];c[15]=ia*l+ra*G+Ba*fa+m[15]}return c}function A(c,m,fa){const l=fa[0],G=fa[1];
fa=fa[2];c[0]=m[0]*l;c[1]=m[1]*l;c[2]=m[2]*l;c[3]=m[3]*l;c[4]=m[4]*G;c[5]=m[5]*G;c[6]=m[6]*G;c[7]=m[7]*G;c[8]=m[8]*fa;c[9]=m[9]*fa;c[10]=m[10]*fa;c[11]=m[11]*fa;c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function e(c,m,fa,l){let G=l[0],W=l[1];l=l[2];let Y=Math.sqrt(G*G+W*W+l*l);var ja=void 0,ia=void 0;let I=void 0,O=void 0,da=void 0,ra=void 0,sa=void 0,xa=void 0,Aa=void 0,Ba=void 0,Ka=void 0,Ia=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Qa=void 0,ta=void 0,$a=void 0,ab=void 0,Ya=void 0,b=
void 0,bb=void 0;ia=ja=void 0;if(Y<ca.EPSILON)return null;Y=1/Y;G*=Y;W*=Y;l*=Y;ja=Math.sin(fa);ia=Math.cos(fa);I=1-ia;O=m[0];da=m[1];ra=m[2];sa=m[3];xa=m[4];Aa=m[5];Ba=m[6];Ka=m[7];Ia=m[8];Fa=m[9];Ga=m[10];Ha=m[11];Qa=G*G*I+ia;ta=W*G*I+l*ja;$a=l*G*I-W*ja;ab=G*W*I-l*ja;Ya=W*W*I+ia;b=l*W*I+G*ja;bb=G*l*I+W*ja;ja=W*l*I-G*ja;ia=l*l*I+ia;c[0]=O*Qa+xa*ta+Ia*$a;c[1]=da*Qa+Aa*ta+Fa*$a;c[2]=ra*Qa+Ba*ta+Ga*$a;c[3]=sa*Qa+Ka*ta+Ha*$a;c[4]=O*ab+xa*Ya+Ia*b;c[5]=da*ab+Aa*Ya+Fa*b;c[6]=ra*ab+Ba*Ya+Ga*b;c[7]=sa*ab+
Ka*Ya+Ha*b;c[8]=O*bb+xa*ja+Ia*ia;c[9]=da*bb+Aa*ja+Fa*ia;c[10]=ra*bb+Ba*ja+Ga*ia;c[11]=sa*bb+Ka*ja+Ha*ia;m!==c&&(c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);return c}function z(c,m,fa){const l=Math.sin(fa);fa=Math.cos(fa);const G=m[4],W=m[5],Y=m[6],ja=m[7],ia=m[8],I=m[9],O=m[10],da=m[11];m!==c&&(c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[4]=G*fa+ia*l;c[5]=W*fa+I*l;c[6]=Y*fa+O*l;c[7]=ja*fa+da*l;c[8]=ia*fa-G*l;c[9]=I*fa-W*l;c[10]=O*fa-Y*l;c[11]=da*
fa-ja*l;return c}function a(c,m,fa){const l=Math.sin(fa);fa=Math.cos(fa);const G=m[0],W=m[1],Y=m[2],ja=m[3],ia=m[8],I=m[9],O=m[10],da=m[11];m!==c&&(c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=G*fa-ia*l;c[1]=W*fa-I*l;c[2]=Y*fa-O*l;c[3]=ja*fa-da*l;c[8]=G*l+ia*fa;c[9]=W*l+I*fa;c[10]=Y*l+O*fa;c[11]=ja*l+da*fa;return c}function h(c,m,fa){const l=Math.sin(fa);fa=Math.cos(fa);const G=m[0],W=m[1],Y=m[2],ja=m[3],ia=m[4],I=m[5],O=m[6],da=m[7];m!==c&&(c[8]=m[8],
c[9]=m[9],c[10]=m[10],c[11]=m[11],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=G*fa+ia*l;c[1]=W*fa+I*l;c[2]=Y*fa+O*l;c[3]=ja*fa+da*l;c[4]=ia*fa-G*l;c[5]=I*fa-W*l;c[6]=O*fa-Y*l;c[7]=da*fa-ja*l;return c}function J(c,m){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=m[0];c[13]=m[1];c[14]=m[2];c[15]=1;return c}function R(c,m){c[0]=m[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=m[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function r(c,m,fa){let l=fa[0],G=fa[1];fa=fa[2];let W=Math.sqrt(l*l+G*G+fa*fa),Y=void 0,ja=void 0,ia=void 0;if(W<ca.EPSILON)return null;W=1/W;l*=W;G*=W;fa*=W;Y=Math.sin(m);ja=Math.cos(m);ia=1-ja;c[0]=l*l*ia+ja;c[1]=G*l*ia+fa*Y;c[2]=fa*l*ia-G*Y;c[3]=0;c[4]=l*G*ia-fa*Y;c[5]=G*G*ia+ja;c[6]=fa*G*ia+l*Y;c[7]=0;c[8]=l*fa*ia+G*Y;c[9]=G*fa*ia-l*Y;c[10]=fa*fa*ia+ja;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function x(c,m){const fa=Math.sin(m);m=Math.cos(m);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=m;c[6]=fa;c[7]=0;c[8]=0;c[9]=-fa;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,m){const fa=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=0;c[2]=-fa;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=fa;c[9]=0;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function T(c,m){const fa=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=fa;c[2]=0;c[3]=0;c[4]=-fa;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function ba(c,m,fa){var l=m[0],G=m[1],W=m[2],
Y=m[3],ja=l+l,ia=G+G;const I=W+W;m=l*ja;const O=l*ia;l*=I;const da=G*ia;G*=I;W*=I;ja*=Y;ia*=Y;Y*=I;c[0]=1-(da+W);c[1]=O+Y;c[2]=l-ia;c[3]=0;c[4]=O-Y;c[5]=1-(m+W);c[6]=G+ja;c[7]=0;c[8]=l+ia;c[9]=G-ja;c[10]=1-(m+da);c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function X(c,m){const fa=Za,l=-m[0],G=-m[1],W=-m[2],Y=m[3],ja=m[4],ia=m[5],I=m[6],O=m[7],da=l*l+G*G+W*W+Y*Y;0<da?(fa[0]=2*(ja*Y+O*l+ia*W-I*G)/da,fa[1]=2*(ia*Y+O*G+I*l-ja*W)/da,fa[2]=2*(I*Y+O*W+ja*G-ia*l)/da):(fa[0]=2*(ja*Y+O*l+
ia*W-I*G),fa[1]=2*(ia*Y+O*G+I*l-ja*W),fa[2]=2*(I*Y+O*W+ja*G-ia*l));ba(c,m,fa);return c}function ka(c,m){c[0]=m[12];c[1]=m[13];c[2]=m[14];return c}function N(c,m){const fa=m[0],l=m[1],G=m[2],W=m[4],Y=m[5],ja=m[6],ia=m[8],I=m[9];m=m[10];c[0]=Math.sqrt(fa*fa+l*l+G*G);c[1]=Math.sqrt(W*W+Y*Y+ja*ja);c[2]=Math.sqrt(ia*ia+I*I+m*m);return c}function L(c,m){const fa=m[0]+m[5]+m[10];let l=0;0<fa?(l=2*Math.sqrt(fa+1),c[3]=.25*l,c[0]=(m[6]-m[9])/l,c[1]=(m[8]-m[2])/l,c[2]=(m[1]-m[4])/l):m[0]>m[5]&&m[0]>m[10]?(l=
2*Math.sqrt(1+m[0]-m[5]-m[10]),c[3]=(m[6]-m[9])/l,c[0]=.25*l,c[1]=(m[1]+m[4])/l,c[2]=(m[8]+m[2])/l):m[5]>m[10]?(l=2*Math.sqrt(1+m[5]-m[0]-m[10]),c[3]=(m[8]-m[2])/l,c[0]=(m[1]+m[4])/l,c[1]=.25*l,c[2]=(m[6]+m[9])/l):(l=2*Math.sqrt(1+m[10]-m[0]-m[5]),c[3]=(m[1]-m[4])/l,c[0]=(m[8]+m[2])/l,c[1]=(m[6]+m[9])/l,c[2]=.25*l);return c}function Q(c,m,fa,l){var G=m[0],W=m[1],Y=m[2],ja=m[3],ia=G+G,I=W+W,O=Y+Y;m=G*ia;const da=G*I;G*=O;const ra=W*I;W*=O;Y*=O;ia*=ja;I*=ja;ja*=O;O=l[0];const sa=l[1];l=l[2];c[0]=(1-
(ra+Y))*O;c[1]=(da+ja)*O;c[2]=(G-I)*O;c[3]=0;c[4]=(da-ja)*sa;c[5]=(1-(m+Y))*sa;c[6]=(W+ia)*sa;c[7]=0;c[8]=(G+I)*l;c[9]=(W-ia)*l;c[10]=(1-(m+ra))*l;c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function K(c,m,fa,l,G){var W=m[0],Y=m[1],ja=m[2],ia=m[3],I=W+W,O=Y+Y,da=ja+ja;m=W*I;var ra=W*O,sa=W*da;W=Y*O;Y*=da;var xa=ja*da;ja=ia*I;O*=ia;const Aa=ia*da;var Ba=l[0],Ka=l[1];da=l[2];l=G[0];ia=G[1];G=G[2];I=(1-(W+xa))*Ba;const Ia=(ra+Aa)*Ba;Ba*=sa-O;ra=(ra-Aa)*Ka;xa=(1-(m+xa))*Ka;Ka*=Y+ja;sa=
(sa+O)*da;Y=(Y-ja)*da;m=(1-(m+W))*da;c[0]=I;c[1]=Ia;c[2]=Ba;c[3]=0;c[4]=ra;c[5]=xa;c[6]=Ka;c[7]=0;c[8]=sa;c[9]=Y;c[10]=m;c[11]=0;c[12]=fa[0]+l-(I*l+ra*ia+sa*G);c[13]=fa[1]+ia-(Ia*l+xa*ia+Y*G);c[14]=fa[2]+G-(Ba*l+Ka*ia+m*G);c[15]=1;return c}function C(c,m){var fa=m[0],l=m[1],G=m[2];m=m[3];var W=fa+fa,Y=l+l;const ja=G+G;fa*=W;const ia=l*W;l*=Y;const I=G*W,O=G*Y;G*=ja;W*=m;Y*=m;m*=ja;c[0]=1-l-G;c[1]=ia+m;c[2]=I-Y;c[3]=0;c[4]=ia-m;c[5]=1-fa-G;c[6]=O+W;c[7]=0;c[8]=I+Y;c[9]=O-W;c[10]=1-fa-l;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,m,fa,l,G,W,Y){const ja=1/(fa-m),ia=1/(G-l),I=1/(W-Y);c[0]=2*W*ja;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*W*ia;c[6]=0;c[7]=0;c[8]=(fa+m)*ja;c[9]=(G+l)*ia;c[10]=(Y+W)*I;c[11]=-1;c[12]=0;c[13]=0;c[14]=Y*W*2*I;c[15]=0;return c}function g(c,m,fa,l,G){m=1/Math.tan(m/2);let W=void 0;c[0]=m/fa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=G&&Infinity!==G?(W=1/(l-G),c[10]=(G+l)*W,c[14]=2*G*l*W):(c[10]=-1,c[14]=
-2*l);return c}function H(c,m,fa,l){const G=Math.tan(m.upDegrees*Math.PI/180),W=Math.tan(m.downDegrees*Math.PI/180),Y=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);const ja=2/(Y+m),ia=2/(G+W);c[0]=ja;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=ia;c[6]=0;c[7]=0;c[8]=-((Y-m)*ja*.5);c[9]=(G-W)*ia*.5;c[10]=l/(fa-l);c[11]=-1;c[12]=0;c[13]=0;c[14]=l*fa/(fa-l);c[15]=0;return c}function S(c,m,fa,l,G,W,Y){const ja=1/(m-fa),ia=1/(l-G),I=1/(W-Y);c[0]=-2*ja;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*ia;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*I;c[11]=0;c[12]=(m+fa)*ja;c[13]=(G+l)*ia;c[14]=(Y+W)*I;c[15]=1;return c}function M(c,m,fa,l){let G=void 0,W=void 0;var Y=void 0,ja=void 0;let ia=void 0,I=void 0;var O=void 0,da=void 0;let ra=void 0,sa=void 0;const xa=m[0],Aa=m[1];m=m[2];Y=l[0];ja=l[1];l=l[2];O=fa[0];da=fa[1];fa=fa[2];if(Math.abs(xa-O)<ca.EPSILON&&Math.abs(Aa-da)<ca.EPSILON&&Math.abs(m-fa)<ca.EPSILON)return B(c);O=xa-O;da=Aa-da;ra=m-fa;sa=1/Math.sqrt(O*O+da*da+ra*ra);O*=sa;da*=sa;ra*=sa;G=
ja*ra-l*da;W=l*O-Y*ra;Y=Y*da-ja*O;(sa=Math.sqrt(G*G+W*W+Y*Y))?(sa=1/sa,G*=sa,W*=sa,Y*=sa):Y=W=G=0;ja=da*Y-ra*W;ia=ra*G-O*Y;I=O*W-da*G;(sa=Math.sqrt(ja*ja+ia*ia+I*I))?(sa=1/sa,ja*=sa,ia*=sa,I*=sa):I=ia=ja=0;c[0]=G;c[1]=ja;c[2]=O;c[3]=0;c[4]=W;c[5]=ia;c[6]=da;c[7]=0;c[8]=Y;c[9]=I;c[10]=ra;c[11]=0;c[12]=-(G*xa+W*Aa+Y*m);c[13]=-(ja*xa+ia*Aa+I*m);c[14]=-(O*xa+da*Aa+ra*m);c[15]=1;return c}function ha(c,m,fa,l){const G=m[0],W=m[1];m=m[2];var Y=l[0];const ja=l[1];var ia=l[2];l=G-fa[0];let I=W-fa[1];fa=m-
fa[2];let O=l*l+I*I+fa*fa;0<O&&(O=1/Math.sqrt(O),l*=O,I*=O,fa*=O);let da=ja*fa-ia*I;ia=ia*l-Y*fa;Y=Y*I-ja*l;O=da*da+ia*ia+Y*Y;0<O&&(O=1/Math.sqrt(O),da*=O,ia*=O,Y*=O);c[0]=da;c[1]=ia;c[2]=Y;c[3]=0;c[4]=I*Y-fa*ia;c[5]=fa*da-l*Y;c[6]=l*ia-I*da;c[7]=0;c[8]=l;c[9]=I;c[10]=fa;c[11]=0;c[12]=G;c[13]=W;c[14]=m;c[15]=1;return c}function na(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+
c[15]+")"}function P(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function ma(c,m,fa){c[0]=m[0]+fa[0];c[1]=m[1]+fa[1];c[2]=m[2]+fa[2];c[3]=m[3]+fa[3];c[4]=m[4]+fa[4];c[5]=m[5]+fa[5];c[6]=m[6]+fa[6];c[7]=m[7]+fa[7];c[8]=m[8]+fa[8];c[9]=m[9]+fa[9];c[10]=m[10]+fa[10];c[11]=m[11]+fa[11];c[12]=m[12]+fa[12];c[13]=m[13]+fa[13];c[14]=m[14]+fa[14];c[15]=m[15]+fa[15];return c}function oa(c,m,fa){c[0]=
m[0]-fa[0];c[1]=m[1]-fa[1];c[2]=m[2]-fa[2];c[3]=m[3]-fa[3];c[4]=m[4]-fa[4];c[5]=m[5]-fa[5];c[6]=m[6]-fa[6];c[7]=m[7]-fa[7];c[8]=m[8]-fa[8];c[9]=m[9]-fa[9];c[10]=m[10]-fa[10];c[11]=m[11]-fa[11];c[12]=m[12]-fa[12];c[13]=m[13]-fa[13];c[14]=m[14]-fa[14];c[15]=m[15]-fa[15];return c}function qa(c,m,fa){c[0]=m[0]*fa;c[1]=m[1]*fa;c[2]=m[2]*fa;c[3]=m[3]*fa;c[4]=m[4]*fa;c[5]=m[5]*fa;c[6]=m[6]*fa;c[7]=m[7]*fa;c[8]=m[8]*fa;c[9]=m[9]*fa;c[10]=m[10]*fa;c[11]=m[11]*fa;c[12]=m[12]*fa;c[13]=m[13]*fa;c[14]=m[14]*fa;
c[15]=m[15]*fa;return c}function wa(c,m,fa,l){c[0]=m[0]+fa[0]*l;c[1]=m[1]+fa[1]*l;c[2]=m[2]+fa[2]*l;c[3]=m[3]+fa[3]*l;c[4]=m[4]+fa[4]*l;c[5]=m[5]+fa[5]*l;c[6]=m[6]+fa[6]*l;c[7]=m[7]+fa[7]*l;c[8]=m[8]+fa[8]*l;c[9]=m[9]+fa[9]*l;c[10]=m[10]+fa[10]*l;c[11]=m[11]+fa[11]*l;c[12]=m[12]+fa[12]*l;c[13]=m[13]+fa[13]*l;c[14]=m[14]+fa[14]*l;c[15]=m[15]+fa[15]*l;return c}function Ja(c,m){return c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&c[3]===m[3]&&c[4]===m[4]&&c[5]===m[5]&&c[6]===m[6]&&c[7]===m[7]&&c[8]===m[8]&&
c[9]===m[9]&&c[10]===m[10]&&c[11]===m[11]&&c[12]===m[12]&&c[13]===m[13]&&c[14]===m[14]&&c[15]===m[15]}function Da(c,m){if(c===m)return!0;const fa=c[0],l=c[1],G=c[2],W=c[3],Y=c[4],ja=c[5],ia=c[6],I=c[7],O=c[8],da=c[9],ra=c[10],sa=c[11],xa=c[12],Aa=c[13],Ba=c[14];c=c[15];const Ka=m[0],Ia=m[1],Fa=m[2],Ga=m[3],Ha=m[4],Qa=m[5],ta=m[6],$a=m[7],ab=m[8],Ya=m[9],b=m[10],bb=m[11],Ra=m[12],mb=m[13],qb=m[14];m=m[15];return Math.abs(fa-Ka)<=ca.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ka))&&Math.abs(l-Ia)<=ca.EPSILON*
Math.max(1,Math.abs(l),Math.abs(Ia))&&Math.abs(G-Fa)<=ca.EPSILON*Math.max(1,Math.abs(G),Math.abs(Fa))&&Math.abs(W-Ga)<=ca.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ga))&&Math.abs(Y-Ha)<=ca.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ha))&&Math.abs(ja-Qa)<=ca.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Qa))&&Math.abs(ia-ta)<=ca.EPSILON*Math.max(1,Math.abs(ia),Math.abs(ta))&&Math.abs(I-$a)<=ca.EPSILON*Math.max(1,Math.abs(I),Math.abs($a))&&Math.abs(O-ab)<=ca.EPSILON*Math.max(1,Math.abs(O),Math.abs(ab))&&Math.abs(da-
Ya)<=ca.EPSILON*Math.max(1,Math.abs(da),Math.abs(Ya))&&Math.abs(ra-b)<=ca.EPSILON*Math.max(1,Math.abs(ra),Math.abs(b))&&Math.abs(sa-bb)<=ca.EPSILON*Math.max(1,Math.abs(sa),Math.abs(bb))&&Math.abs(xa-Ra)<=ca.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ra))&&Math.abs(Aa-mb)<=ca.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(mb))&&Math.abs(Ba-qb)<=ca.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(qb))&&Math.abs(c-m)<=ca.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))}function Ma(c){const m=ca.EPSILON,fa=c[0],l=c[1],G=
c[2],W=c[4],Y=c[5],ja=c[6],ia=c[8],I=c[9];c=c[10];return Math.abs(1-(fa*fa+W*W+ia*ia))<=m&&Math.abs(1-(l*l+Y*Y+I*I))<=m&&Math.abs(1-(G*G+ja*ja+c*c))<=m}const Za=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,copy:V,set:t,identity:B,transpose:E,invert:n,adjoint:q,determinant:p,multiply:w,translate:u,scale:A,rotate:e,rotateX:z,rotateY:a,rotateZ:h,fromTranslation:J,fromScaling:R,fromRotation:r,fromXRotation:x,fromYRotation:y,fromZRotation:T,fromRotationTranslation:ba,fromQuat2:X,getTranslation:ka,
getScaling:N,getRotation:L,fromRotationTranslationScale:Q,fromRotationTranslationScaleOrigin:K,fromQuat:C,frustum:D,perspective:g,perspectiveFromFieldOfView:H,ortho:S,lookAt:M,targetTo:ha,str:na,frob:P,add:ma,subtract:oa,multiplyScalar:qa,multiplyScalarAndAdd:wa,exactEquals:Ja,equals:Da,isOrthoNormal:Ma,mul:w,sub:oa},Symbol.toStringTag,{value:"Module"}));k.add=ma;k.adjoint=q;k.copy=V;k.determinant=p;k.equals=Da;k.exactEquals=Ja;k.frob=P;k.fromQuat=C;k.fromQuat2=X;k.fromRotation=r;k.fromRotationTranslation=
ba;k.fromRotationTranslationScale=Q;k.fromRotationTranslationScaleOrigin=K;k.fromScaling=R;k.fromTranslation=J;k.fromXRotation=x;k.fromYRotation=y;k.fromZRotation=T;k.frustum=D;k.getRotation=L;k.getScaling=N;k.getTranslation=ka;k.identity=B;k.invert=n;k.isOrthoNormal=Ma;k.lookAt=M;k.mat4=d;k.mul=w;k.multiply=w;k.multiplyScalar=qa;k.multiplyScalarAndAdd=wa;k.ortho=S;k.perspective=g;k.perspectiveFromFieldOfView=H;k.rotate=e;k.rotateX=z;k.rotateY=a;k.rotateZ=h;k.scale=A;k.set=t;k.str=na;k.sub=oa;k.subtract=
oa;k.targetTo=ha;k.translate=u;k.transpose=E})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,d,ca,V,t){function B(){return!!d._pe}function E(){return!!t("esri-wasm")}function n(){return e?e:e=(new Promise((a,h)=>k(["./pe-wasm"],a,h))).then(a=>a.peWasm).then(({default:a})=>a({locateFile:h=>V.getAssetUrl(`esri/geometry/support/${h}`)})).then(a=>{q(a)})}function q(a){function h(r,x,y){r[x]=y(r[x])}d._pe=a;d.PeDefs.init();
d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(r){function x(){return r.apply(this,arguments)||this}ca._inheritsLoose(x,r);x.prototype.destroy=function(){d._pe.destroy(this)};return x}(d._pe.PeGCSExtent);a=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var J of a)h(J.prototype,"getName",r=>function(){return r.call(this,Array(d.PeDefs.PE_NAME_MAX))});
for(const r of[d._pe.PeGeogtran,d._pe.PeProjcs])h(r.prototype,"getParameters",x=>function(){const y=Array(d.PeDefs.PE_PARM_MAX);let T=x.call(this);for(let ba=0;ba<y.length;ba++){const X=d._pe.getValue(T,"*");y[ba]=X?d._pe.wrapPointer(X,d._pe.PeParameter):null;T+=Int32Array.BYTES_PER_ELEMENT}return y});h(d._pe.PeHorizon.prototype,"getCoord",r=>function(){const x=this.getSize();if(!x)return null;const y=[],T=r.call(this);A(y,x,T);return y});h(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const x=
d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;var T=r.call(this);if(!d._pe.compare(T,d._pe.NULL)){y=[T];const ba=this.getSteps();if(1<ba){T=d._pe.getPointer(T);for(let X=1;X<ba;X++)y.push(d._pe.wrapPointer(T+x*X,d._pe.PeGTlistExtendedGTs))}}return y}});const R=d._pe._pe_getPeHorizonSize();J=r=>function(){let x=this._cache;x||(this._cache=x=new Map);if(x.has(r))return x.get(r);let y=null;var T=r.call(this);if(!d._pe.compare(T,d._pe.NULL)){y=[T];const ba=T.getNump();if(1<ba){T=
d._pe.getPointer(T);for(let X=1;X<ba;X++)y.push(d._pe.wrapPointer(T+R*X,d._pe.PeHorizon))}}x.set(r,y);return y};h(d._pe.PeProjcs.prototype,"horizonGcsGenerate",J);h(d._pe.PeProjcs.prototype,"horizonPcsGenerate",J);d._pe.PeObject.prototype.toString=function(r=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const x=d._pe.getPointer(this),y=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(x,r,y))}}function p(a){if(a){var h=d._pe.getClass(a);
h&&(h=d._pe.getCache(h))&&(a=d._pe.getPointer(a))&&delete h[a]}}function w(a,h){const J=[];h=Array(h);for(let R=0;R<a;R++)J.push(d._pe.ensureInt8(h));return J}function u(a){let h;Array.isArray(a[0])?(h=[],a.forEach(J=>{h.push(J[0],J[1])})):h=a;return h}function A(a,h,J,R=!1){if(R)for(R=0;R<2*h;R++)a[R]=d._pe.getValue(J+R*Float64Array.BYTES_PER_ELEMENT,"double");else{R=0===a.length;for(let r=0;r<h;r++)R&&(a[r]=Array(2)),a[r][0]=d._pe.getValue(J,"double"),a[r][1]=d._pe.getValue(J+Float64Array.BYTES_PER_ELEMENT,
"double"),J+=2*Float64Array.BYTES_PER_ELEMENT}}let e;d._pe=null;d.PeCSTransformations=void 0;(function(a){function h(r,x,y){d._pe.ensureCache.prepare();var T=u(y);const ba=y===T;T=d._pe.ensureFloat64(T);(r=d._pe._pe_geog_to_proj(d._pe.getPointer(r),x,T))&&A(y,x,T,ba);return r}function J(r,x,y){return R(r,x,y,0)}function R(r,x,y,T){d._pe.ensureCache.prepare();var ba=u(y);const X=y===ba;ba=d._pe.ensureFloat64(ba);(r=d._pe._pe_proj_to_geog_center(d._pe.getPointer(r),x,ba,T))&&A(y,x,ba,X);return r}a.geogToProj=
h;a.projGeog=function(r,x,y,T){switch(T){case d.PeDefs.PE_TRANSFORM_P_TO_G:return J(r,x,y);case d.PeDefs.PE_TRANSFORM_G_TO_P:return h(r,x,y)}return 0};a.projToGeog=J;a.projToGeogCenter=R})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(a){a.init=function(){a.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;
a.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;
a.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;a.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
a.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(a){function h(x,y){let T=null,ba=J[x];ba||(ba={},J[x]=ba);ba.hasOwnProperty(String(y))?
T=ba[y]:(x=d._pe.PeFactory.prototype.factoryByType(x,y),d._pe.compare(x,d._pe.NULL)||(T=x,ba[y]=T));return T=r(T)}const J={},R={},r=x=>{if(x){const y=x.getType();switch(y){case d.PeDefs.PE_TYPE_GEOGCS:x=d._pe.castObject(x,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:x=d._pe.castObject(x,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:x=d._pe.castObject(x,d._pe.PeGeogtran);break;default:y&d.PeDefs.PE_TYPE_UNIT&&(x=d._pe.castObject(x,d._pe.PeUnit))}}return x};a.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};
a.coordsys=function(x){return h(d.PeDefs.PE_TYPE_COORDSYS,x)};a.factoryByType=h;a.fromString=function(x,y){let T=null,ba=R[x];ba||(ba={},R[x]=ba);ba.hasOwnProperty(y)?T=ba[y]:(x=d._pe.PeFactory.prototype.fromString(x,y),d._pe.compare(x,d._pe.NULL)||(T=x,ba[y]=T));return T=r(T)};a.geogcs=function(x){return h(d.PeDefs.PE_TYPE_GEOGCS,x)};a.geogtran=function(x){return h(d.PeDefs.PE_TYPE_GEOGTRAN,x)};a.getCode=function(x){return d._pe.PeFactory.prototype.getCode(x)};a.projcs=function(x){return h(d.PeDefs.PE_TYPE_PROJCS,
x)};a.unit=function(x){return h(d.PeDefs.PE_TYPE_UNIT,x)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(a){let h;a.init=function(){a.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;h=d._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(J,R,r,x,y,T){let ba=null;const X=new d._pe.PeInteger(T);try{const ka=d._pe.PeGTlistExtended.prototype.getGTlist(J,R,r,x,y,X);if(T=X.val)if(ba=[ka],1<T){const N=d._pe.getPointer(ka);for(J=
1;J<T;J++)ba.push(d._pe.wrapPointer(N+h*J,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(X)}return ba}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(a){a.destroy=function(h){if(h&&h.length){for(const J of h)p(J),J.getEntries().forEach(R=>{p(R);R=R.getGeogtran();p(R);R.getParameters().forEach(p);[R.getGeogcs1(),R.getGeogcs2()].forEach(r=>{p(r);const x=r.getDatum();p(x);p(x.getSpheroid());p(r.getPrimem());p(r.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(h[0])}}})(d.PeGTlistExtendedEntry||
(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(a){a.geogToGeog=function(h,J,R,r,x){d._pe.ensureCache.prepare();var y=u(R);const T=R===y;y=d._pe.ensureFloat64(y);let ba=0;r&&(ba=d._pe.ensureFloat64(r));(h=d._pe._pe_geog_to_geog(d._pe.getPointer(h),J,y,ba,x))&&A(R,J,y,T);return h}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(a){const h=(R,r,x,y,T,ba)=>{d._pe.ensureCache.prepare();switch(R){case "dd":var X=d._pe._pe_geog_to_dd;var ka=d.PeDefs.PE_DD_MAX;
break;case "ddm":X=d._pe._pe_geog_to_ddm;ka=d.PeDefs.PE_DDM_MAX;break;case "dms":X=d._pe._pe_geog_to_dms,ka=d.PeDefs.PE_DMS_MAX}R=0;r&&(R=d._pe.getPointer(r));r=u(y);r=d._pe.ensureFloat64(r);ka=w(x,ka);y=d._pe.ensureInt32(ka);if(T=X(R,x,r,T,y))for(X=0;X<x;X++)ba[X]=d._pe.UTF8ToString(ka[X]);return T},J=(R,r,x,y,T)=>{d._pe.ensureCache.prepare();switch(R){case "dd":var ba=d._pe._pe_dd_to_geog;break;case "ddm":ba=d._pe._pe_ddm_to_geog;break;case "dms":ba=d._pe._pe_dms_to_geog}R=0;r&&(R=d._pe.getPointer(r));
r=y.map(X=>d._pe.ensureString(X));y=d._pe.ensureInt32(r);r=d._pe.ensureFloat64(Array(2*x));(ba=ba(R,x,y,r))&&A(T,x,r);return ba};a.geogToDms=function(R,r,x,y,T){return h("dms",R,r,x,y,T)};a.dmsToGeog=function(R,r,x,y){return J("dms",R,r,x,y)};a.geogToDdm=function(R,r,x,y,T){return h("ddm",R,r,x,y,T)};a.ddmToGeog=function(R,r,x,y){return J("ddm",R,r,x,y)};a.geogToDd=function(R,r,x,y,T){return h("dd",R,r,x,y,T)};a.ddToGeog=function(R,r,x,y){return J("dd",R,r,x,y)}})(d.PeNotationDms||(d.PeNotationDms=
{}));d.PeNotationMgrs=void 0;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geogToMgrsExtended=function(h,J,R,r,x,y,T){d._pe.ensureCache.prepare();let ba=
0;h&&(ba=d._pe.getPointer(h));h=u(R);R=d._pe.ensureFloat64(h);h=w(J,d.PeDefs.PE_MGRS_MAX);const X=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_mgrs_extended(ba,J,R,r,x,y,X))for(x=0;x<J;x++)T[x]=d._pe.UTF8ToString(h[x]);return r};a.mgrsToGeogExtended=function(h,J,R,r,x){d._pe.ensureCache.prepare();let y=0;h&&(y=d._pe.getPointer(h));h=R.map(T=>d._pe.ensureString(T));R=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*J));(r=d._pe._pe_mgrs_to_geog_extended(y,J,R,r,h))&&A(x,J,h);return r}})(d.PeNotationMgrs||
(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(a){a.geogToUsng=function(h,J,R,r,x,y,T){d._pe.ensureCache.prepare();let ba=0;h&&(ba=d._pe.getPointer(h));h=u(R);R=d._pe.ensureFloat64(h);h=w(J,d.PeDefs.PE_MGRS_MAX);const X=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_usng(ba,J,R,r,x,y,X))for(x=0;x<J;x++)T[x]=d._pe.UTF8ToString(h[x]);return r};a.usngToGeog=function(h,J,R,r){d._pe.ensureCache.prepare();var x=0;h&&(x=d._pe.getPointer(h));h=R.map(y=>d._pe.ensureString(y));R=d._pe.ensureInt32(h);
h=d._pe.ensureFloat64(Array(2*J));(x=d._pe._pe_usng_to_geog(x,J,R,h))&&A(r,J,h);return x}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geogToUtm=function(h,J,R,r,x){d._pe.ensureCache.prepare();var y=0;h&&(y=d._pe.getPointer(h));h=u(R);R=d._pe.ensureFloat64(h);
h=w(J,d.PeDefs.PE_UTM_MAX);const T=d._pe.ensureInt32(h);if(r=d._pe._pe_geog_to_utm(y,J,R,r,T))for(y=0;y<J;y++)x[y]=d._pe.UTF8ToString(h[y]);return r};a.utmToGeog=function(h,J,R,r,x){d._pe.ensureCache.prepare();let y=0;h&&(y=d._pe.getPointer(h));h=R.map(T=>d._pe.ensureString(T));R=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*J));(r=d._pe._pe_utm_to_geog(y,J,R,r,h))&&A(x,J,h);return r}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(a){const h=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(J,R=a.PE_PCSINFO_OPTION_DOMAIN){let r,x;h.has(J)&&(x=h.get(J),x[R]&&(r=x[R]));r||(r=d._pe.PePCSInfo.prototype.generate(J,R),x||(x=[],h.set(J,x)),x[R]=r);return r}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(a){a.versionString=
function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const z=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return d._pe},isLoaded:B,isSupported:E,load:n,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},
get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:q},Symbol.toStringTag,{value:"Module"}));d._init=q;d.isLoaded=B;d.isSupported=E;d.load=n;d.pe=z})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,
d,ca,V,t){function B(e=A){return[e[0],e[1],e[2],e[3]]}function E(e,z){e!==z&&(e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3]);return e}function n(e){return V.isNone(e)||e[0]>=e[2]?0:e[2]-e[0]}function q(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e,z,a){return z>=e[0]&&a>=e[1]&&z<=e[2]&&a<=e[3]}function w(e){return null!=e&&4===e.length}const u=[Infinity,Infinity,-Infinity,-Infinity],A=[0,0,0,0];k.NEGATIVE_INFINITY=u;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=A;k.allFinite=
function(e){for(let z=0;4>z;z++)if(!isFinite(e[z]))return!1;return!0};k.area=function(e){return n(e)*q(e)};k.center=function(e,z=[0,0]){z[0]=(e[0]+e[2])/2;z[1]=(e[1]+e[3])/2;return z};k.clone=function(e){return[e[0],e[1],e[2],e[3]]};k.contains=function(e,z){return z[0]>=e[0]&&z[2]<=e[2]&&z[1]>=e[1]&&z[3]<=e[3]};k.containsPoint=function(e,z){return p(e,z[0],z[1])};k.containsPointObject=function(e,z){return p(e,z.x,z.y)};k.containsPointWithMargin=function(e,z,a){return z[0]>=e[0]-a&&z[1]>=e[1]-a&&z[0]<=
e[2]+a&&z[1]<=e[3]+a};k.containsXY=p;k.containsXYWithMargin=function(e,z,a,h){return z>=e[0]-h&&a>=e[1]-h&&z<=e[2]+h&&a<=e[3]+h};k.copy=E;k.create=B;k.distance=function(e,z){const a=(e[1]+e[3])/2,h=Math.max(Math.abs(z[0]-(e[0]+e[2])/2)-n(e)/2,0);e=Math.max(Math.abs(z[1]-a)-q(e)/2,0);return Math.sqrt(h*h+e*e)};k.empty=function(e){return e?E(e,u):B(u)};k.equals=function(e,z){return w(e)&&w(z)?e[0]===z[0]&&e[1]===z[1]&&e[2]===z[2]&&e[3]===z[3]:e===z};k.expand=function(e,z,a){if(V.isNone(z))E(a,e);else if("length"in
z)if(w(z))a[0]=Math.min(e[0],z[0]),a[1]=Math.min(e[1],z[1]),a[2]=Math.max(e[2],z[2]),a[3]=Math.max(e[3],z[3]);else{if(2===z.length||3===z.length)a[0]=Math.min(e[0],z[0]),a[1]=Math.min(e[1],z[1]),a[2]=Math.max(e[2],z[0]),a[3]=Math.max(e[3],z[1])}else switch(z.type){case "extent":a[0]=Math.min(e[0],z.xmin);a[1]=Math.min(e[1],z.ymin);a[2]=Math.max(e[2],z.xmax);a[3]=Math.max(e[3],z.ymax);break;case "point":a[0]=Math.min(e[0],z.x),a[1]=Math.min(e[1],z.y),a[2]=Math.max(e[2],z.x),a[3]=Math.max(e[3],z.y)}};
k.expandPointInPlace=function(e,z){z[0]<e[0]&&(e[0]=z[0]);z[0]>e[2]&&(e[2]=z[0]);z[1]<e[1]&&(e[1]=z[1]);z[1]>e[3]&&(e[3]=z[1])};k.expandWithNestedArray=function(e,z,a=e){const h=z.length;let J=e[0],R=e[1],r=e[2];e=e[3];for(let x=0;x<h;x++){const y=z[x];J=Math.min(J,y[0]);R=Math.min(R,y[1]);r=Math.max(r,y[0]);e=Math.max(e,y[1])}a[0]=J;a[1]=R;a[2]=r;a[3]=e;return a};k.fromExtent=function(e,z=B()){z[0]=e.xmin;z[1]=e.ymin;z[2]=e.xmax;z[3]=e.ymax;return z};k.fromValues=function(e,z,a,h,J=B()){J[0]=e;J[1]=
z;J[2]=a;J[3]=h;return J};k.height=q;k.intersection=function(e,z,a){if(V.isNone(z))return E(a,e);const h=z[0],J=z[1],R=z[2];z=z[3];a[0]=ca.clamp(e[0],h,R);a[1]=ca.clamp(e[1],J,z);a[2]=ca.clamp(e[2],h,R);a[3]=ca.clamp(e[3],J,z);return a};k.intersects=function(e,z){return Math.max(z[0],e[0])<=Math.min(z[2],e[2])&&Math.max(z[1],e[1])<=Math.min(z[3],e[3])};k.intersectsSegment=function(e,z,a){const h=e[0],J=e[1],R=e[2];e=e[3];const {x:r,y:x}=z,{x:y,y:T}=a;var ba=(ka,N)=>0>(T-x)*ka+(r-y)*N+(y*x-r*T);z=
ba(h,e);a=ba(R,e);const X=ba(R,J);ba=ba(h,J);return z===a&&a===X&&X===ba&&ba===z||r<h&&y<h||r>R&&y>R||x>e&&T>e||x<J&&T<J?!1:!0};k.intersectsSphere=function(e,z){const a=z[3];var h=Math.abs(z[0]-.5*(e[0]+e[2]));const J=.5*(e[2]-e[0]);if(h>a+J)return!1;var R=.5*(e[3]-e[1]);e=Math.abs(z[1]-.5*(e[1]+e[3]));if(e>a+R)return!1;if(h<J||e<R)return!0;h-=J;R=e-R;return h*h+R*R<=a*a};k.is=w;k.isPoint=function(e){return(0===n(e)||!isFinite(e[0]))&&(0===q(e)||!isFinite(e[1]))};k.offset=function(e,z,a,h=e){h[0]=
e[0]+z;h[1]=e[1]+a;h[2]=e[2]+z;h[3]=e[3]+a;return h};k.pad=function(e,z,a=e){a[0]=e[0]-z;a[1]=e[1]-z;a[2]=e[2]+z;a[3]=e[3]+z;return a};k.setMax=function(e,z,a=e){a[2]=z[0];a[3]=z[1];a!==e&&(a[0]=e[0],a[1]=e[1]);return e};k.setMin=function(e,z,a=e){a[0]=z[0];a[1]=z[1];a!==e&&(a[2]=e[2],a[3]=e[3]);return a};k.size=function(e,z){z[0]=e[2]-e[0];z[1]=e[3]-e[1]};k.toExtent=function(e,z){return new t({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:z})};k.width=n;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,d){const ca=Math.PI/180;var V=d.earth.radius;const t=d.earth.eccentricitySquared;V={a1:V*t,a2:V*t*V*t,a3:V*t*t/2,a4:V*t*V*t*2.5,a5:V*t+V*t*t/2,a6:1-t};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,
f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,
f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},
104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,
f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=V;k.spheroids=d;k.toRadians=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(k){return function(){function d(V){this.steps=[];this._cached_projection={};this._chain=
"";this._gtlistentry=null;if(V&&V.steps)for(const t of V.steps)t instanceof k?this.steps.push(t):this.steps.push(new k({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}d.cacheKey=function(V,t){return[void 0!==V.wkid&&null!==V.wkid?V.wkid.toString():"-1",void 0!==V.wkt&&null!==V.wkt?V.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};d.fromGE=function(V){const t=new d;let B="";for(const E of V.steps)V=k.fromGE(E),t.steps.push(V),
B+=V.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=B;return t};var ca=d.prototype;ca.getInverse=function(){const V=new d;V.steps=[];for(let t=this.steps.length-1;0<=t;t--)V.steps.push(this.steps[t].getInverse());return V};ca.getGTListEntry=function(){let V="";for(const t of this.steps)V+=t.uid.toString()+",";V!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=V);return this._gtlistentry};ca.assignCachedGe=function(V,t,B){this._cached_projection[d.cacheKey(V,
t)]=B};ca.getCachedGeTransformation=function(V,t){let B="";for(const E of this.steps)B+=E.uid.toString()+",";B!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=B);V=this._cached_projection[d.cacheKey(V,t)];return void 0===V?null:V};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let d=0;return function(){function ca(V=null){this.uid=d++;V?(this._wkt=void 0!==V.wkt?V.wkt:null,this._wkid=
void 0!==V.wkid?V.wkid:-1,this._isInverse=void 0!==V.isInverse?!0===V.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ca.fromGE=function(V){const t=new ca;t._wkt=V.wkt;t._wkid=V.wkid;t._isInverse=V.isInverse;return t};ca.prototype.getInverse=function(){const V=new ca;V._wkt=this.wkt;V._wkid=this._wkid;V._isInverse=!this.isInverse;return V};k._createClass(ca,[{key:"wkt",get:function(){return this._wkt},set:function(V){this._wkt=V;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},
set:function(V){this._wkid=V;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(V){this._isInverse=V;this.uid=d++}}]);return ca}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,d,ca,V){k.getGeometryZScaler=function(t,B,E){if(d.isNone(B)||d.isNone(E)||E.vcsWkid||V.equals(B,E))return null;B=ca.getMetersPerVerticalUnitForSR(B);E=ca.getMetersPerVerticalUnitForSR(E);const n=
B/E;if(1===n)return null;switch(t){case "point":case "esriGeometryPoint":return q=>{q&&null!=q.z&&(q.z*=n)};case "polyline":case "esriGeometryPolyline":return q=>{if(q)for(const p of q.paths)for(const w of p)2<w.length&&(w[2]*=n)};case "polygon":case "esriGeometryPolygon":return q=>{if(q)for(const p of q.rings)for(const w of p)2<w.length&&(w[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return q=>{if(q)for(const p of q.points)2<p.length&&(p[2]*=n)};case "extent":case "esriGeometryExtent":return q=>
{q&&null!=q.zmin&&null!=q.zmax&&(q.zmin*=n,q.zmax*=n)};default:return null}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let d=function(E,n,q){this.x=E;this.y=n;this.spatialReference=q;this.m=this.z=void 0},ca=function(E,n,q,p){this.rings=E;this.spatialReference=n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);p&&(this.hasM=p)},V=function(E,n,q,p){this.paths=E;this.spatialReference=
n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);p&&(this.hasM=p)},t=function(E,n,q,p){this.points=E;this.spatialReference=n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);p&&(this.hasM=p)},B=function(E,n,q,p,w){this.xmin=E;this.ymin=n;this.xmax=q;this.ymax=p;this.spatialReference=w;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(E,n){return null==n?null:E.convertJSONToGeometry(n)},exportPoint:function(E,n,q){q=new d(E.getPointX(n),E.getPointY(n),q);const p=E.hasZ(n),
w=E.hasM(n);p&&(q.z=E.getPointZ(n));w&&(q.m=E.getPointM(n));return q},exportPolygon:function(E,n,q){return new ca(E.exportPaths(n),q,E.hasZ(n),E.hasM(n))},exportPolyline:function(E,n,q){return new V(E.exportPaths(n),q,E.hasZ(n),E.hasM(n))},exportMultipoint:function(E,n,q){return new t(E.exportPoints(n),q,E.hasZ(n),E.hasM(n))},exportExtent:function(E,n,q){var p=E.hasZ(n);const w=E.hasM(n);q=new B(E.getXMin(n),E.getYMin(n),E.getXMax(n),E.getYMax(n),q);p&&(p=E.getZExtent(n),q.zmin=p.vmin,q.zmax=p.vmax);
w&&(E=E.getMExtent(n),q.mmin=E.vmin,q.mmax=E.vmax);return q}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,d,ca){let V=function(){function B(E=null,n={},q,p){this.geometry=E;this.attributes=n;this.centroid=q;this.objectId=p;this.geohashY=this.geohashX=this.displayId=0}B.prototype.weakClone=function(){const E=new B(this.geometry,
this.attributes,this.centroid,this.objectId);E.displayId=this.displayId;E.geohashX=this.geohashX;E.geohashY=this.geohashY;return E};return B}(),t=function(B){function E(){return B.apply(this,arguments)||this}d._inheritsLoose(E,B);return E}(V);k.OptimizedFeature=V;k.OptimizedFeatureWithGeometry=t;k.hasGeometry=function(B){return!(ca.isNone(B.geometry)||!B.geometry.coords||!B.geometry.coords.length)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(k){return function(){function d(V=[],t=[],B=!1){this.lengths=null!=V?V:[];this.coords=null!=t?t:[];this.hasIndeterminateRingOrder=B}d.fromRect=function(V){const [t,B,E,n]=V;V=E-t;const q=n-B;return new d([5],[t,B,V,0,0,q,-V,0,0,-q])};var ca=d.prototype;ca.forEachVertex=function(V){let t=0;this.lengths.length||V(this.coords[0],this.coords[1]);for(let B=0;B<this.lengths.length;B++){const E=this.lengths[B];for(let n=0;n<E;n++)V(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=E}};ca.clone=function(V){return V?
(V.set(this.coords),new d(this.lengths.slice(),V,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((V,t)=>V+t)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(k,d,ca,V,t,B,E,n,q,p){return function(){function w(A){this.geometryInfo=A;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ca;this.featureAdapter=p.optimizedFeatureQueryEngineAdapter}var u=w.prototype;u.add=function(A){this._add(A);this._emitChanged()};u.addMany=function(A){for(const e of A)this._add(e);this._emitChanged()};u.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};u.removeById=function(A){A=
this._featuresById.get(A);if(!A)return null;this._remove(A);this._emitChanged();return A};u.removeManyById=function(A){this._boundsStore.invalidateIndex();for(const e of A)(A=this._featuresById.get(e))&&this._remove(A);this._emitChanged()};u.forEachBounds=function(A,e,z){for(const a of A)(A=this._boundsStore.get(a.objectId))&&e(B.fromRect(z,A))};u.getFeature=function(A){return this._featuresById.get(A)};u.has=function(A){return this._featuresById.has(A)};u.toArray=function(){return Array.from(this._featuresById.values())};
u.forEach=function(A){this._featuresById.forEach(e=>A(e))};u.forEachInBounds=function(A,e){this._boundsStore.forEachInBounds(A,z=>{e(this._featuresById.get(z))})};u.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};u.sweep=function(){let A=!1;this._featuresById.forEach((e,z)=>{this._markedIds.has(z)||(A=!0,this._remove(e))});this._markedIds.clear();A&&this._emitChanged()};u._emitChanged=function(){this.events.emit("changed",void 0)};u._add=function(A){if(A){var e=
A.objectId;if(null==e)V.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature","feature id is missing",{feature:A}));else{var z=this._featuresById.get(e);this._markedIds.add(e);if(z){A.displayId=z.displayId;var a=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(t.isSome(this.onFeatureAdd))this.onFeatureAdd(A);!t.isNone(A.geometry)&&A.geometry.coords&&A.geometry.coords.length?(a=n.getBoundsOptimizedGeometry(t.isSome(a)?a:E.create(),A.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),t.isSome(a)&&this._boundsStore.set(e,a)):this._boundsStore.set(e,null);this._featuresById.set(e,A)}}};u._remove=function(A){if(t.isSome(this.onFeatureRemove))this.onFeatureRemove(A);this._markedIds.delete(A.objectId);this._boundsStore.delete(A.objectId);this._featuresById.delete(A.objectId);return A};k._createClass(w,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let A=0;this._featuresById.forEach(e=>{t.isSome(e.geometry)&&e.geometry.coords&&(A+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:A/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return w}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,d,ca,V,t){let B=function(){function E(){this._emitter=new E.EventEmitter(this)}var n=E.prototype;n.emit=function(q,p){return this._emitter.emit(q,p)};n.on=function(q,p){return this._emitter.on(q,p)};n.once=function(q,p){return this._emitter.once(q,p)};n.hasEventListener=function(q){return this._emitter.hasEventListener(q)};return E}();(function(E){let n=function(){function p(u=null){this.target=u;this._listenersMap=null}
var w=p.prototype;w.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};w.emit=function(u,A){u=this._listenersMap&&this._listenersMap.get(u);if(!u)return!1;const e=this.target||this;[...u].forEach(z=>{z.call(e,A)});return 0<u.length};w.on=function(u,A){if(Array.isArray(u)){var e=u.map(z=>this.on(z,A));return V.handlesGroup(e)}if(u.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);e=this._listenersMap.get(u)||[];e.push(A);this._listenersMap.set(u,e);return{remove:()=>{const z=this._listenersMap&&this._listenersMap.get(u)||[],a=z.indexOf(A);0<=a&&z.splice(a,1)}}};w.once=function(u,A){const e=this.on(u,z=>{e.remove();A.call(null,z)});return e};w.hasEventListener=function(u){u=this._listenersMap&&this._listenersMap.get(u);return null!=u&&0<u.length};return p}();E.EventEmitter=n;E.EventedMixin=p=>{p=function(w){function u(){var e=w.apply(this,arguments)||
this;e._emitter=new n;return e}k._inheritsLoose(u,w);var A=u.prototype;A.destroy=function(){this._emitter.clear()};A.emit=function(e,z){return this._emitter.emit(e,z)};A.on=function(e,z){return this._emitter.on(e,z)};A.once=function(e,z){return this._emitter.once(e,z)};A.hasEventListener=function(e){return this._emitter.hasEventListener(e)};return u}(p);return p=d.__decorate([t.subclass("esri.core.Evented")],p)};let q=function(p){function w(){var A=p.apply(this,arguments)||this;A._emitter=new B.EventEmitter(k._assertThisInitialized(A));
return A}k._inheritsLoose(w,p);var u=w.prototype;u.destroy=function(){this._emitter.clear()};u.emit=function(A,e){return this._emitter.emit(A,e)};u.on=function(A,e){return this._emitter.on(A,e)};u.once=function(A,e){return this._emitter.once(A,e)};u.hasEventListener=function(A){return this._emitter.hasEventListener(A)};return w}(ca);q=d.__decorate([t.subclass("esri.core.Evented")],q);E.EventedAccessor=q})(B||(B={}));return B})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe",
"../Extent","./aaBoundingRect"],function(k,d,ca,V){function t(a=e){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function B(a,h,J,R,r,x,y=t()){y[0]=a;y[1]=h;y[2]=J;y[3]=R;y[4]=r;y[5]=x;return y}function E(a){return a[0]>=a[3]?0:a[3]-a[0]}function n(a){return a[1]>=a[4]?0:a[4]-a[1]}function q(a){return a[2]>=a[5]?0:a[5]-a[2]}function p(a,h){return Math.max(h[0],a[0])<=Math.min(h[3],a[3])&&Math.max(h[1],a[1])<=Math.min(h[4],a[4])&&Math.max(h[2],a[2])<=Math.min(h[5],a[5])}function w(a,h){a[0]=h[0];a[1]=h[1];
a[2]=h[2];a[3]=h[3];a[4]=h[4];a[5]=h[5];return a}function u(a){return 6===a.length}const A=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],e=[0,0,0,0,0,0],z=t();k.NEGATIVE_INFINITY=A;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=e;k.allFinite=function(a){for(let h=0;6>h;h++)if(!isFinite(a[h]))return!1;return!0};k.center=function(a,h=[0,0,0]){h[0]=a[0]+E(a)/2;h[1]=a[1]+n(a)/2;h[2]=a[2]+q(a)/2;return h};k.contains=function(a,h){return h[0]>=a[0]&&h[1]>=
a[1]&&h[2]>=a[2]&&h[3]<=a[3]&&h[4]<=a[4]&&h[5]<=a[5]};k.containsPoint=function(a,h){return h[0]>=a[0]&&h[1]>=a[1]&&h[2]>=a[2]&&h[0]<=a[3]&&h[1]<=a[4]&&h[2]<=a[5]};k.containsPointWithMargin=function(a,h,J){return h[0]>=a[0]-J&&h[1]>=a[1]-J&&h[2]>=a[2]-J&&h[0]<=a[3]+J&&h[1]<=a[4]+J&&h[2]<=a[5]+J};k.create=t;k.depth=n;k.diameter=function(a){const h=E(a),J=q(a);a=n(a);return Math.sqrt(h*h+J*J+a*a)};k.empty=function(a){return a?w(a,A):t(A)};k.equals=function(a,h,J){if(d.isNone(a)||d.isNone(h))return a===
h;if(!u(a)||!u(h))return!1;if(J)for(let R=0;R<a.length;R++){if(!J(a[R],h[R]))return!1}else for(J=0;J<a.length;J++)if(a[J]!==h[J])return!1;return!0};k.expandWithAABB=function(a,h){a[0]=Math.min(a[0],h[0]);a[1]=Math.min(a[1],h[1]);a[2]=Math.min(a[2],h[2]);a[3]=Math.max(a[3],h[3]);a[4]=Math.max(a[4],h[4]);a[5]=Math.max(a[5],h[5])};k.expandWithBuffer=function(a,h,J=0,R=h.length/3){let r=a[0],x=a[1],y=a[2],T=a[3],ba=a[4],X=a[5];for(let ka=0;ka<R;ka++)r=Math.min(r,h[J+3*ka]),x=Math.min(x,h[J+3*ka+1]),y=
Math.min(y,h[J+3*ka+2]),T=Math.max(T,h[J+3*ka]),ba=Math.max(ba,h[J+3*ka+1]),X=Math.max(X,h[J+3*ka+2]);a[0]=r;a[1]=x;a[2]=y;a[3]=T;a[4]=ba;a[5]=X};k.expandWithNestedArray=function(a,h,J){const R=h.length;let r=a[0],x=a[1],y=a[2],T=a[3],ba=a[4],X=a[5];if(J)for(J=0;J<R;J++){var ka=h[J];r=Math.min(r,ka[0]);x=Math.min(x,ka[1]);y=Math.min(y,ka[2]);T=Math.max(T,ka[0]);ba=Math.max(ba,ka[1]);X=Math.max(X,ka[2])}else for(J=0;J<R;J++)ka=h[J],r=Math.min(r,ka[0]),x=Math.min(x,ka[1]),T=Math.max(T,ka[0]),ba=Math.max(ba,
ka[1]);a[0]=r;a[1]=x;a[2]=y;a[3]=T;a[4]=ba;a[5]=X};k.expandWithOffset=function(a,h,J,R){a[0]=Math.min(a[0],a[0]+h);a[3]=Math.max(a[3],a[3]+h);a[1]=Math.min(a[1],a[1]+J);a[4]=Math.max(a[4],a[4]+J);a[2]=Math.min(a[2],a[2]+R);a[5]=Math.max(a[5],a[5]+R)};k.expandWithRect=function(a,h){a[0]=Math.min(a[0],h[0]);a[1]=Math.min(a[1],h[1]);a[3]=Math.max(a[3],h[2]);a[4]=Math.max(a[4],h[3])};k.expandWithVec3=function(a,h){a[0]=Math.min(a[0],h[0]);a[1]=Math.min(a[1],h[1]);a[2]=Math.min(a[2],h[2]);a[3]=Math.max(a[3],
h[0]);a[4]=Math.max(a[4],h[1]);a[5]=Math.max(a[5],h[2])};k.fromExtent=function(a,h=t()){h[0]=a.xmin;h[1]=a.ymin;h[2]=a.zmin;h[3]=a.xmax;h[4]=a.ymax;h[5]=a.zmax;return h};k.fromMinMax=function(a,h,J=t()){J[0]=a[0];J[1]=a[1];J[2]=a[2];J[3]=h[0];J[4]=h[1];J[5]=h[2];return J};k.fromRect=function(a,h){a[0]=h[0];a[1]=h[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=h[2];a[4]=h[3];a[5]=Number.POSITIVE_INFINITY;return a};k.fromValues=B;k.getMax=function(a,h){h[0]=a[3];h[1]=a[4];h[2]=a[5];return h};k.getMin=function(a,
h){h[0]=a[0];h[1]=a[1];h[2]=a[2];return h};k.height=q;k.intersects=p;k.intersectsClippingArea=function(a,h){return d.isNone(h)?!0:p(a,h)};k.is=u;k.isPoint=function(a){return 0===E(a)&&0===n(a)&&0===q(a)};k.maximumDimension=function(a){return Math.max(E(a),q(a),n(a))};k.offset=function(a,h,J,R,r=a){r[0]=a[0]+h;r[1]=a[1]+J;r[2]=a[2]+R;r[3]=a[3]+h;r[4]=a[4]+J;r[5]=a[5]+R;return r};k.scale=function(a,h,J=a){const R=a[0]+E(a)/2,r=a[1]+n(a)/2,x=a[2]+q(a)/2;J[0]=R+(a[0]-R)*h;J[1]=r+(a[1]-r)*h;J[2]=x+(a[2]-
x)*h;J[3]=R+(a[3]-R)*h;J[4]=r+(a[4]-r)*h;J[5]=x+(a[5]-x)*h;return J};k.set=w;k.setMax=function(a,h,J=a){J[3]=h[0];J[4]=h[1];J[5]=h[2];J!==a&&(J[0]=a[0],J[1]=a[1],J[2]=a[2]);return a};k.setMin=function(a,h,J=a){J[0]=h[0];J[1]=h[1];J[2]=h[2];J!==a&&(J[3]=a[3],J[4]=a[4],J[5]=a[5]);return J};k.size=function(a,h=[0,0,0]){h[0]=E(a);h[1]=n(a);h[2]=q(a);return h};k.toExtent=function(a,h){return isFinite(a[2])||isFinite(a[5])?new ca({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:h}):
new ca({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:h})};k.toRect=function(a,h){h||(h=V.create());h[0]=a[0];h[1]=a[1];h[2]=a[3];h[3]=a[4];return h};k.width=E;k.wrap=function(a,h,J,R,r,x){return B(a,h,J,R,r,x,z)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(k,d,ca,V,t,B,E,n){function q(l,G){return l?G?4:3:G?3:2}function p(l,G,W,Y){if(l){if(W)return G&&Y?c:Ma;if(G&&Y)return Za}else if(G&&Y)return Ma;return Da}function w({scale:l,translate:G},W){return Math.round((W-G[0])/l[0])}function u({scale:l,translate:G},W){return Math.round((G[1]-W)/l[1])}function A({scale:l,translate:G},W){return W*l[0]+G[0]}function e({scale:l,translate:G},W){return G[1]-W*l[1]}function z(l){l=l.coords;return{x:l[0],y:l[1]}}function a(l,G){l.coords[0]=G.x;l.coords[1]=
G.y;return l}function h(l){l=l.coords;return{x:l[0],y:l[1],z:l[2]}}function J(l,G){l.coords[0]=G.x;l.coords[1]=G.y;l.coords[2]=G.z;return l}function R(l){l=l.coords;return{x:l[0],y:l[1],m:l[2]}}function r(l,G){l.coords[0]=G.x;l.coords[1]=G.y;l.coords[2]=G.m;return l}function x(l){l=l.coords;return{x:l[0],y:l[1],z:l[2],m:l[3]}}function y(l,G){l.coords[0]=G.x;l.coords[1]=G.y;l.coords[2]=G.z;l.coords[3]=G.m;return l}function T(l,G){return l&&G?y:l?J:G?r:a}function ba(l,G,W,Y,ja){W=T(W,Y);for(const ia of G){const {geometry:I,
attributes:O}=ia;let da;I&&(da=W(new n,I));l.push(new B.OptimizedFeature(da,O,null,O[ja]))}return l}function X(l,G,W,Y){for(const ja of G){const {geometry:ia,attributes:I}=ja;let O;ia&&(O=ka(ia,W,Y));l.push({attributes:I,geometry:O})}return l}function ka(l,G,W){if(V.isNone(l))return null;const Y=q(G,W),ja=[];for(let ia=0;ia<l.coords.length;ia+=Y){const I=[];for(let O=0;O<Y;O++)I.push(l.coords[ia+O]);ja.push(I)}return G?W?{points:ja,hasZ:G,hasM:W}:{points:ja,hasZ:G}:W?{points:ja,hasM:W}:{points:ja}}
function N(l,G,W,Y,ja){W=q(W,Y);for(const ia of G){G=ia.geometry;Y=ia.attributes;let I;G&&(I=L(new n,G,W));l.push(new B.OptimizedFeature(I,Y,null,Y[ja]))}return l}function L(l,G,W=q(G.hasZ,G.hasM)){l.lengths[0]=G.points.length;const Y=l.coords;let ja=0;for(const ia of G.points)for(G=0;G<W;G++)Y[ja++]=ia[G];return l}function Q(l,G,W){if(!l)return null;const Y=q(G,W),{coords:ja,lengths:ia}=l;l=[];let I=0;for(const O of ia){const da=[];for(let ra=0;ra<O;ra++){const sa=[];for(let xa=0;xa<Y;xa++)sa.push(ja[I++]);
da.push(sa)}l.push(da)}return G?W?{paths:l,hasZ:G,hasM:W}:{paths:l,hasZ:G}:W?{paths:l,hasM:W}:{paths:l}}function K(l,G,W,Y,ja){W=q(W,Y);for(const ia of G){G=ia.geometry;Y=ia.attributes;let I;G&&(I=C(new n,G,W));l.push(new B.OptimizedFeature(I,Y,null,Y[ja]))}return l}function C(l,G,W=q(G.hasZ,G.hasM)){const {lengths:Y,coords:ja}=l;let ia=0;for(const I of G.paths){for(const O of I)for(G=0;G<W;G++)ja[ia++]=O[G];Y.push(I.length)}return l}function D(l,G,W){if(!l)return null;const Y=q(G,W),{coords:ja,lengths:ia}=
l;l=[];let I=0;for(const O of ia){const da=[];for(let ra=0;ra<O;ra++){const sa=[];for(let xa=0;xa<Y;xa++)sa.push(ja[I++]);da.push(sa)}l.push(da)}return G?W?{rings:l,hasZ:G,hasM:W}:{rings:l,hasZ:G}:W?{rings:l,hasM:W}:{rings:l}}function g(l,G,W,Y,ja){for(const ia of G){G=ia.geometry;const I=ia.centroid,O=ia.attributes;let da;G&&(da=H(new n,G,W,Y));V.isSome(I)?l.push(new B.OptimizedFeature(da,O,a(new n,I),O[ja])):l.push(new B.OptimizedFeature(da,O,null,O[ja]))}return l}function H(l,G,W=G.hasZ,Y=G.hasM){S(l,
G.rings,W,Y);return l}function S(l,G,W,Y){W=q(W,Y);const {lengths:ja,coords:ia}=l;Y=0;ja.length=ia.length=0;for(const I of G){for(const O of I)for(G=0;G<W;G++)ia[Y++]=O[G];ja.push(I.length)}return l}function M(l,G,W,Y,ja,ia){l.length=0;if(!W){for(const I of G)l.push(new B.OptimizedFeature(null,I.attributes,null,I.attributes[ia]));return l}switch(W){case "esriGeometryPoint":return ba(l,G,Y,ja,ia);case "esriGeometryMultipoint":return N(l,G,Y,ja,ia);case "esriGeometryPolyline":return K(l,G,Y,ja,ia);
case "esriGeometryPolygon":return g(l,G,Y,ja,ia);default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${W}'`)),l.length=0}return l}function ha(l,G,W,Y){l=l&&("coords"in l?l:l.geometry);if(V.isNone(l))return null;switch(G){case "esriGeometryPoint":return G=z,W&&Y?G=x:W?G=h:Y&&(G=R),G(l);case "esriGeometryMultipoint":return ka(l,W,Y);case "esriGeometryPolyline":return Q(l,W,Y);case "esriGeometryPolygon":return D(l,W,Y);default:wa.error("convertToGeometry:unknown-geometry",
new d(`Unable to parse unknown geometry type '${G}'`))}}function na(l,G,W,Y,ja){l.length=0;if(V.isNone(W)){for(const O of G)l.push({attributes:O.attributes});return l}switch(W){case "esriGeometryPoint":var ia=z;Y&&ja?ia=x:Y?ia=h:ja&&(ia=R);for(var I of G){const {geometry:O,attributes:da}=I;Y=V.isSome(O)?ia(O):null;l.push({attributes:da,geometry:Y})}break;case "esriGeometryMultipoint":return X(l,G,Y,ja);case "esriGeometryPolyline":for(const O of G){const {geometry:da,attributes:ra}=O;let sa;V.isSome(da)&&
(sa=Q(da,Y,ja));l.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(ia of G){const {geometry:O,attributes:da,centroid:ra}=ia;let sa;V.isSome(O)&&(sa=D(O,Y,ja));V.isSome(ra)?(I=z(ra),l.push({attributes:da,centroid:I,geometry:sa})):l.push({attributes:da,geometry:sa})}break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${W}'`))}return l}function P(l,G,W,Y,ja,ia,I=W,O=Y){l.lengths.length&&(l.lengths.length=0);l.coords.length&&
(l.coords.length=0);if(V.isNone(G)||!G.coords.length)return null;ja=Ja[ja];const {coords:da,lengths:ra}=G;G=q(W,Y);const sa=q(W&&I,Y&&O);W=p(W,Y,I,O);if(!ra.length)return W(l.coords,da,0,0,w(ia,da[0]),u(ia,da[1])),l.lengths.length&&(l.lengths.length=0),l.coords.length=G,l;let xa,Aa=0,Ba,Ka=0;for(const Ia of ra){if(Ia<ja)continue;let Fa=0;Ba=Ka;O=Y=w(ia,da[Aa]);xa=I=u(ia,da[Aa+1]);W(l.coords,da,Ba,Aa,O,xa);Fa++;Aa+=G;Ba+=sa;for(let Ga=1;Ga<Ia;Ga++,Aa+=G)if(O=w(ia,da[Aa]),xa=u(ia,da[Aa+1]),O!==Y||xa!==
I)W(l.coords,da,Ba,Aa,O-Y,xa-I),Ba+=sa,Fa++,Y=O,I=xa;Fa>=ja&&(l.lengths.push(Fa),Ka=Ba)}l.coords.length=Ka;return l.coords.length?l:null}function ma(l,G,W,Y,ja,ia,I){let O=Y,da=0;for(let sa=ia+W;sa<I;sa+=W){{var ra=G[sa];const xa=G[sa+1],Aa=G[I],Ba=G[I+1];let Ka=G[ia],Ia=G[ia+1],Fa=Aa-Ka,Ga=Ba-Ia;if(0!==Fa||0!==Ga){const Ha=((ra-Ka)*Fa+(xa-Ia)*Ga)/(Fa*Fa+Ga*Ga);1<Ha?(Ka=Aa,Ia=Ba):0<Ha&&(Ka+=Fa*Ha,Ia+=Ga*Ha)}Fa=ra-Ka;Ga=xa-Ia;ra=Fa*Fa+Ga*Ga}ra>O&&(da=sa,O=ra)}O>Y&&(da-ia>W&&ma(l,G,W,Y,ja,ia,da),ja(l,
G,l.length,da,G[da],G[da+1]),I-da>W&&ma(l,G,W,Y,ja,da,I))}function oa(l,G,W,Y,ja){const {coords:ia,lengths:I}=G,O=W?Y?c:Ma:Y?Ma:Da;W=q(W,Y);if(!ia.length)return l!==G&&(l.lengths.length=0,l.coords.length=0),l;if(!I.length)return O(l.coords,ia,0,0,A(ja,ia[0]),e(ja,ia[1])),l!==G&&(l.lengths.length=0,l.coords.length=W),l;const [da,ra]=ja.scale;Y=0;for(let sa=0;sa<I.length;sa++){const xa=I[sa];l.lengths[sa]=xa;let Aa=A(ja,ia[Y]),Ba=e(ja,ia[Y+1]);O(l.coords,ia,Y,Y,Aa,Ba);Y+=W;for(let Ka=1;Ka<xa;Ka++,Y+=
W)Aa+=ia[Y]*da,Ba-=ia[Y+1]*ra,O(l.coords,ia,Y,Y,Aa,Ba)}l!==G&&(l.lengths.length=I.length,l.coords.length=ia.length);return l}function qa(l,G,W,Y){let ja=0,ia=l[Y*G],I=l[Y*(G+1)];for(let O=1;O<W;O++){const da=ia+l[Y*(G+O)],ra=I+l[Y*(G+O)+1],sa=(da-ia)*(ra+I);ia=da;I=ra;ja+=sa}return.5*ja}const wa=ca.getLogger("esri.layers.graphics.featureConversionUtils"),Ja={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Da=(l,G,W,Y,ja,ia)=>{l[W]=ja;l[W+1]=ia},Ma=(l,G,W,
Y,ja,ia)=>{l[W]=ja;l[W+1]=ia;l[W+2]=G[Y+2]},Za=(l,G,W,Y,ja,ia)=>{l[W]=ja;l[W+1]=ia;l[W+2]=G[Y+3]},c=(l,G,W,Y,ja,ia)=>{l[W]=ja;l[W+1]=ia;l[W+2]=G[Y+2];l[W+3]=G[Y+3]},m=[],fa=[];k.convertFromFeature=function(l,G,W,Y,ja){m[0]=l;[l]=M(fa,m,G,W,Y,ja);m.length=fa.length=0;return l};k.convertFromFeatureSet=function(l,G){const W=new E,{hasM:Y,hasZ:ja,features:ia,objectIdFieldName:I,spatialReference:O,geometryType:da,exceededTransferLimit:ra,transform:sa,fields:xa}=l;xa&&(W.fields=xa);W.geometryType=da;W.objectIdFieldName=
I||G;W.spatialReference=O;if(!W.objectIdFieldName)return wa.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),W;ia&&M(W.features,ia,da,ja,Y,W.objectIdFieldName);ra&&(W.exceededTransferLimit=ra);Y&&(W.hasM=Y);ja&&(W.hasZ=ja);sa&&(W.transform=sa);return W};k.convertFromFeatures=M;k.convertFromGeometry=function(l,G,W){if(V.isNone(l))return null;const Y=new n;"hasZ"in l&&null==G&&(G=l.hasZ);"hasM"in l&&null==W&&(W=l.hasM);if(t.isPoint(l))return T(null!=G?G:null!=
l.z,null!=W?W:null!=l.m)(Y,l);if(t.isPolygon(l))return H(Y,l,G,W);if(t.isPolyline(l))return C(Y,l,q(G,W));if(t.isMultipoint(l))return L(Y,l,q(G,W));wa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${l}'`))};k.convertFromGraphics=function(l,G,W,Y,ja,ia){const I=l.length;switch(W){case "esriGeometryPoint":ba(l,G,Y,ja,ia);break;case "esriGeometryMultipoint":N(l,G,Y,ja,ia);break;case "esriGeometryPolyline":K(l,G,Y,ja,ia);break;case "esriGeometryPolygon":g(l,
G,Y,ja,ia);break;default:wa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${W}'`))}for(Y=0;Y<G.length;Y++)l[Y+I].geometryType=W,l[Y+I].insertAfter=G[Y].insertAfter,l[Y+I].groupId=G[Y].groupId;return l};k.convertFromMultipoint=L;k.convertFromMultipointFeatures=N;k.convertFromNestedArray=S;k.convertFromPoint=function(l,G,W=T(null!=G.z,null!=G.m)){return W(l,G)};k.convertFromPointFeatures=ba;k.convertFromPolygon=H;k.convertFromPolyline=C;k.convertFromPolylineFeatures=
K;k.convertToFeature=function(l,G,W,Y){fa[0]=l;na(m,fa,G,W,Y);l=m[0];m.length=fa.length=0;return l};k.convertToFeatureSet=function(l){const {objectIdFieldName:G,spatialReference:W,transform:Y,fields:ja,hasM:ia,hasZ:I,features:O,geometryType:da,exceededTransferLimit:ra,uniqueIdField:sa,queryGeometry:xa,queryGeometryType:Aa}=l;l=na([],O,da,I,ia);const Ba=ha(xa,Aa,!1,!1);l={features:l,fields:ja,geometryType:da,objectIdFieldName:G,spatialReference:W,uniqueIdField:sa,queryGeometry:Ba};Y&&(l.transform=
Y);ra&&(l.exceededTransferLimit=ra);ia&&(l.hasM=ia);I&&(l.hasZ=I);return l};k.convertToFeatures=na;k.convertToGeometry=ha;k.convertToMultipoint=ka;k.convertToMultipointFeatures=X;k.convertToPoint=function(l,G,W){return l?G?W?x(l):h(l):W?R(l):z(l):null};k.convertToPolygon=D;k.convertToPolyline=Q;k.deltaDecodeGeometry=function(l,G){if(V.isNone(l))return null;const W=l.clone(),Y=l.coords;l=l.lengths;let ja=0;for(let O=0;O<l.length;O++){const da=l[O];var ia=Y[G*ja],I=Y[G*ja+1];for(let ra=1;ra<da;ra++)ia+=
Y[G*(ja+ra)],I+=Y[G*(ja+ra)+1],W.coords[G*(ja+ra)]=ia,W.coords[G*(ja+ra)+1]=I;ja+=da}return W};k.deltaEncodeGeometry=function(l,G){const W=l.clone(),Y=l.coords;l=l.lengths;let ja=0;for(let I=0;I<l.length;I++){const O=l[I];let da=Y[G*ja];var ia=Y[G*ja+1];for(let ra=1;ra<O;ra++){const sa=Y[G*(ja+ra)],xa=Y[G*(ja+ra)+1];ia=xa-ia;W.coords[G*(ja+ra)]=sa-da;W.coords[G*(ja+ra)+1]=ia;da=sa;ia=xa}ja+=O}return W};k.generalizeOptimizedGeometry=function(l,G,W,Y,ja,ia,I=W,O=Y){l.lengths.length&&(l.lengths.length=
0);l.coords.length&&(l.coords.length=0);if(!G||!G.coords.length)return null;ja=Ja[ja];const {coords:da,lengths:ra}=G;G=q(W,Y);const sa=q(W&&I,Y&&O);W=p(W,Y,I,O);if(!ra.length)return W(l.coords,da,0,0,da[0],da[1]),l.lengths.length&&(l.lengths.length=0),l.coords.length=G,l;Y=0;ia*=ia;for(const xa of ra){if(xa<ja){Y+=xa*G;continue}I=l.coords.length/sa;O=Y;const Aa=Y+(xa-1)*G;W(l.coords,da,l.coords.length,O,da[O],da[O+1]);ma(l.coords,da,G,ia,W,O,Aa);W(l.coords,da,l.coords.length,Aa,da[Aa],da[Aa+1]);O=
l.coords.length/sa-I;O>=ja?l.lengths.push(O):l.coords.length=I*sa;Y+=xa*G}return l.coords.length?l:null};k.getBoundsOptimizedGeometry=function(l,G,W,Y){if(V.isNone(G)||!G.coords||!G.coords.length)return null;W=q(W,Y);let ja=Y=Number.POSITIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let O=0;O<G.length;O+=W){const da=G[O],ra=G[O+1];Y=Math.min(Y,da);ia=Math.max(ia,da);ja=Math.min(ja,ra);I=Math.max(I,ra)}}l[0]=Y;l[1]=ja;l[2]=ia;l[3]=I;return l};k.getQuantizedArea=
function(l,G){const {coords:W,lengths:Y}=l;let ja=l=0;for(let ia=0;ia<Y.length;ia++)ja+=qa(W,l,Y[ia],G),l+=ia;return Math.abs(ja)};k.getQuantizedBoundsOptimizedGeometry=function(l,G,W,Y){W=q(W,Y);const {lengths:ja,coords:ia}=G;Y=G=Number.POSITIVE_INFINITY;let I=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,da=0;for(const ra of ja){let sa=ia[da],xa=ia[da+1];G=Math.min(sa,G);Y=Math.min(xa,Y);I=Math.max(sa,I);O=Math.max(xa,O);da+=W;for(let Aa=1;Aa<ra;Aa++,da+=W){const Ba=ia[da],Ka=ia[da+1];sa+=
Ba;xa+=Ka;0>Ba&&(G=Math.min(G,sa));0<Ba&&(I=Math.max(I,sa));0>Ka?Y=Math.min(Y,xa):0<Ka&&(O=Math.max(O,xa))}}l[0]=G;l[1]=Y;l[2]=I;l[3]=O;return l};k.getSignedQuantizedRingArea=qa;k.quantizeOptimizedFeatureSet=function(l,G){const {geometryType:W,features:Y,hasM:ja,hasZ:ia}=G;if(!l)return G;for(let I=0;I<Y.length;I++){const O=Y[I],da=O.weakClone();da.geometry=new n;P(da.geometry,O.geometry,ja,ia,W,l);O.centroid&&(da.centroid=new n,P(da.centroid,O.centroid,ja,ia,"esriGeometryPoint",l));Y[I]=da}G.transform=
l;return G};k.quantizeOptimizedGeometry=P;k.quantizeX=w;k.quantizeY=u;k.removeCollinearVectices=function(l,G,W,Y,ja){if(!G||!G.coords||!G.coords.length)return null;W=Ja[W];const {coords:ia,lengths:I}=G;G=p(Y,ja,Y,ja);Y=q(Y,ja);let O=ja=0,da=0,ra=0;for(const Aa of I){O=ra;G(l.coords,ia,O,ja,ia[ja],ia[ja+1]);ja+=Y;var sa=ia[ja];let Ba=ia[ja+1],Ka=sa,Ia=Ba;var xa=Ba/sa;O+=Y;G(l.coords,ia,O,ja,Ka,Ia);ja+=Y;for(let Fa=2;Fa<Aa;Fa++){sa=ia[ja];Ba=ia[ja+1];const Ga=Ba/sa,Ha=xa===Ga||!isFinite(xa)&&!isFinite(Ga);
xa=Ha&&isFinite(Ga)?0<=xa&&0<=Ga||0>=xa&&0>=Ga:0<=Ia&&0<=Ba||0>=Ia&&0>=Ba;Ha&&xa?(Ka+=sa,Ia+=Ba):(Ka=sa,Ia=Ba,O+=Y);G(l.coords,ia,O,ja,Ka,Ia);ja+=Y;xa=Ga}O+=Y;sa=(O-ra)/Y;sa>=W&&(l.lengths[da]=sa,ra=O,da++)}l.coords.length>ra&&(l.coords.length=ra);l.lengths.length>da&&(l.lengths.length=da);return l.coords.length&&l.lengths.length?l:null};k.removeZMValues=function(l,G,W,Y,ja,ia){const I=q(W,Y);W=p(W,Y,ja,ia);Y=G.coords;l.coords.length=0;l.lengths.length=0;l.lengths.push(...G.lengths);for(G=0;G<Y.length;G+=
I)W(l.coords,Y,l.coords.length,G,Y[G],Y[G+1]);return l};k.unquantizeOptimizedFeatureSet=function(l){const {transform:G,features:W,hasM:Y,hasZ:ja}=l;if(!G)return l;for(const ia of W)V.isSome(ia.geometry)&&oa(ia.geometry,ia.geometry,Y,ja,G),V.isSome(ia.centroid)&&oa(ia.centroid,ia.centroid,Y,ja,G);l.transform=null;return l};k.unquantizeOptimizedGeometry=oa;k.unquantizeX=A;k.unquantizeY=e;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const d=new k;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;
d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return k}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has",
"../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(k,d,ca,V,t){function B(q,p,w){E.minX=p[0];E.minY=p[1];E.maxX=p[2];E.maxY=p[3];q.search(E,w)}const E={minX:0,minY:0,maxX:0,maxY:0};let n=function(){function q(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new V.PooledRBush(9,ca("esri-csp-restrictions")?w=>({minX:w[0],minY:w[1],maxX:w[2],maxY:w[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const w=
Array(this._idByBounds.size);let u=0;this._idByBounds.forEach((A,e)=>{w[u++]=e});this._indexInvalid=!1;this._index.clear();this._index.load(w)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(w=>this._idByBounds.has(w))),this._boundsToLoad.length=0)}}var p=q.prototype;p.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};p.delete=function(w){const u=this._boundsById.get(w);this._boundsById.delete(w);
u&&(this._idByBounds.delete(u),this._indexInvalid||this._index.remove(u))};p.forEachInBounds=function(w,u){this._loadIndex();B(this._index,w,A=>u(this._idByBounds.get(A)))};p.get=function(w){return this._boundsById.get(w)};p.has=function(w){return this._boundsById.has(w)};p.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};p.set=function(w,u){if(!this._indexInvalid){const A=this._boundsById.get(w);A&&(this._index.remove(A),this._idByBounds.delete(A))}this._boundsById.set(w,
u);u&&(this._idByBounds.set(u,w),this._indexInvalid||(this._boundsToLoad.push(u),5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(q,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const w=t.empty();for(const u of this._boundsById.values())u&&(w[0]=Math.min(u[0],w[0]),w[1]=Math.min(u[1],w[1]),w[2]=Math.max(u[2],w[2]),w[3]=Math.max(u[3],w[3]));return w}},{key:"valid",get:function(){return!this._indexInvalid}}]);return q}();k.BoundsStore=n;Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,d,ca,V,t,B){function E(X,ka){n(X,0,X.children.length,ka,X)}function n(X,ka,N,L,Q){Q||(Q=new T([]));Q.minX=Infinity;Q.minY=Infinity;Q.maxX=-Infinity;Q.maxY=-Infinity;for(let K=ka,C;K<N;K++)C=X.children[K],q(Q,X.leaf?L(C):C);return Q}function q(X,
ka){X.minX=Math.min(X.minX,ka.minX);X.minY=Math.min(X.minY,ka.minY);X.maxX=Math.max(X.maxX,ka.maxX);X.maxY=Math.max(X.maxY,ka.maxY)}function p(X,ka){return X.minX-ka.minX}function w(X,ka){return X.minY-ka.minY}function u(X){return(X.maxX-X.minX)*(X.maxY-X.minY)}function A(X){return X.maxX-X.minX+(X.maxY-X.minY)}function e(X,ka){return X.minX<=ka.minX&&X.minY<=ka.minY&&ka.maxX<=X.maxX&&ka.maxY<=X.maxY}function z(X,ka){return ka.minX<=X.maxX&&ka.minY<=X.maxY&&ka.maxX>=X.minX&&ka.maxY>=X.minY}function a(X,
ka,N,L,Q){for(ka=[ka,N];ka.length;){N=V.assumeNonNull(ka.pop());const K=V.assumeNonNull(ka.pop());if(N-K<=L)continue;const C=K+Math.ceil((N-K)/L/2)*L;B.quickselect(X,C,K,N,Q);ka.push(K,C,C,N)}}let h=function(){function X(N=9,L){this.compareMinX=p;this.compareMinY=w;this._toBBox=Q=>Q;this._maxEntries=Math.max(4,N||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));L&&("function"===typeof L?this._toBBox=L:this._initFormat(L));this.clear()}var ka=X.prototype;ka.destroy=function(){this.clear();
J.prune();R.prune();r.prune();x.prune()};ka.all=function(N){this._all(this.data,N)};ka.search=function(N,L){let Q=this.data;const K=this._toBBox;if(z(N,Q))for(J.clear();Q;){for(let C=0,D=Q.children.length;C<D;C++){const g=Q.children[C],H=Q.leaf?K(g):g;z(N,H)&&(Q.leaf?L(g):e(N,H)?this._all(g,L):J.push(g))}Q=J.pop()}};ka.collides=function(N){let L=this.data;const Q=this._toBBox;if(!z(N,L))return!1;for(J.clear();L;){for(let K=0,C=L.children.length;K<C;K++){const D=L.children[K],g=L.leaf?Q(D):D;if(z(N,
g)){if(L.leaf||e(N,g))return!0;J.push(D)}}L=J.pop()}return!1};ka.load=function(N){if(!N.length)return this;if(N.length<this._minEntries){for(let L=0,Q=N.length;L<Q;L++)this.insert(N[L]);return this}N=this._build(N.slice(0,N.length),0,N.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){const L=this.data;this.data=N;N=L}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this};ka.insert=function(N){N&&
this._insert(N,this.data.height-1);return this};ka.clear=function(){this.data=new T([]);return this};ka.remove=function(N){if(!N)return this;let L=this.data,Q=null,K=0,C=!1,D;const g=this._toBBox(N);r.clear();for(x.clear();L||0<r.length;){if(!L){var H;L=V.assumeNonNull(r.pop());Q=r.data[r.length-1];K=null!=(H=x.pop())?H:0;C=!0}if(L.leaf&&(D=ca.indexOf(L.children,N,L.children.length,L.indexHint),-1!==D)){L.children.splice(D,1);r.push(L);this._condense(r);break}C||L.leaf||!e(L,g)?Q?(K++,L=Q.children[K],
C=!1):L=null:(r.push(L),x.push(K),K=0,Q=L,L=L.children[0])}return this};ka.toJSON=function(){return this.data};ka.fromJSON=function(N){this.data=N;return this};ka._all=function(N,L){for(R.clear();N;){var Q;if(!0===N.leaf)for(const K of N.children)L(K);else R.pushArray(N.children);N=null!=(Q=R.pop())?Q:null}};ka._build=function(N,L,Q,K){var C=Q-L+1,D=this._maxEntries;if(C<=D)return N=new T(N.slice(L,Q+1)),E(N,this._toBBox),N;K||(K=Math.ceil(Math.log(C)/Math.log(D)),D=Math.ceil(C/D**(K-1)));const g=
new ba([]);g.height=K;C=Math.ceil(C/D);D=C*Math.ceil(Math.sqrt(D));for(a(N,L,Q,D,this.compareMinX);L<=Q;L+=D){const H=Math.min(L+D-1,Q);a(N,L,H,C,this.compareMinY);for(let S=L;S<=H;S+=C)g.children.push(this._build(N,S,Math.min(S+C-1,H),K-1))}E(g,this._toBBox);return g};ka._chooseSubtree=function(N,L,Q,K){for(;;){K.push(L);if(!0===L.leaf||K.length-1===Q)break;let C=Infinity,D=Infinity,g=void 0;for(let H=0,S=L.children.length;H<S;H++){const M=L.children[H],ha=u(M),na=(Math.max(M.maxX,N.maxX)-Math.min(M.minX,
N.minX))*(Math.max(M.maxY,N.maxY)-Math.min(M.minY,N.minY))-ha;na<D?(D=na,C=ha<C?ha:C,g=M):na===D&&ha<C&&(C=ha,g=M)}L=g||L.children[0]}return L};ka._insert=function(N,L,Q){var K=this._toBBox;Q=Q?N:K(N);r.clear();K=this._chooseSubtree(Q,this.data,L,r);K.children.push(N);for(q(K,Q);0<=L;)if(r.data[L].children.length>this._maxEntries)this._split(r,L),L--;else break;this._adjustParentBBoxes(Q,r,L)};ka._split=function(N,L){const Q=N.data[L];var K=Q.children.length;const C=this._minEntries;this._chooseSplitAxis(Q,
C,K);(K=this._chooseSplitIndex(Q,C,K))?(K=Q.children.splice(K,Q.children.length-K),K=Q.leaf?new T(K):new ba(K),K.height=Q.height,E(Q,this._toBBox),E(K,this._toBBox),L?N.data[L-1].children.push(K):this._splitRoot(Q,K)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ka._splitRoot=function(N,L){this.data=new ba([N,L]);this.data.height=N.height+1;E(this.data,this._toBBox)};ka._chooseSplitIndex=function(N,L,Q){let K,C,D=void 0;K=C=Infinity;for(let H=L;H<=Q-L;H++){var g=
n(N,0,H,this._toBBox);const S=n(N,H,Q,this._toBBox),M=Math.max(0,Math.min(g.maxX,S.maxX)-Math.max(g.minX,S.minX))*Math.max(0,Math.min(g.maxY,S.maxY)-Math.max(g.minY,S.minY));g=u(g)+u(S);M<K?(K=M,D=H,C=g<C?g:C):M===K&&g<C&&(C=g,D=H)}return D};ka._chooseSplitAxis=function(N,L,Q){const K=N.leaf?this.compareMinX:p,C=N.leaf?this.compareMinY:w,D=this._allDistMargin(N,L,Q,K);L=this._allDistMargin(N,L,Q,C);D<L&&N.children.sort(K)};ka._allDistMargin=function(N,L,Q,K){N.children.sort(K);K=this._toBBox;var C=
n(N,0,L,K);const D=n(N,Q-L,Q,K);let g=A(C)+A(D);for(let H=L;H<Q-L;H++){const S=N.children[H];q(C,N.leaf?K(S):S);g+=A(C)}for(Q=Q-L-1;Q>=L;Q--)C=N.children[Q],q(D,N.leaf?K(C):C),g+=A(D);return g};ka._adjustParentBBoxes=function(N,L,Q){for(;0<=Q;Q--)q(L.data[Q],N)};ka._condense=function(N){for(let L=N.length-1;0<=L;L--){const Q=N.data[L];if(0===Q.children.length)if(0<L){const K=N.data[L-1],C=K.children;C.splice(ca.indexOf(C,Q,C.length,K.indexHint),1)}else this.clear();else E(Q,this._toBBox)}};ka._initFormat=
function(N){const L=["return a"," - b",";"];this.compareMinX=new Function("a","b",L.join(N[0]));this.compareMinY=new Function("a","b",L.join(N[1]));this._toBBox=new Function("a","return {minX: a"+N[0]+", minY: a"+N[1]+", maxX: a"+N[2]+", maxY: a"+N[3]+"};")};return X}();const J=new t,R=new t,r=new t,x=new t({deallocator:void 0});t=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let y=function(X){function ka(){var N=X.apply(this,arguments)||this;N.height=1;N.indexHint=new ca.PositionHint;
return N}d._inheritsLoose(ka,X);return ka}(t),T=function(X){function ka(N){var L=X.call(this)||this;L.children=N;L.leaf=!0;return L}d._inheritsLoose(ka,X);return ka}(y),ba=function(X){function ka(N){var L=X.call(this)||this;L.children=N;L.leaf=!1;return L}d._inheritsLoose(ka,X);return ka}(y);k.BBox=t;k.PooledRBush=h;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var d={exports:{}};(function(ca){(function(V){V=
V();void 0!==V&&(ca.exports=V)})(function(){function V(E,n,q,p,w){for(;p>q;){if(600<p-q){var u=p-q+1,A=n-q+1,e=Math.log(u),z=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*z*(u-z)/u)*(0>A-u/2?-1:1);V(E,n,Math.max(q,Math.floor(n-A*z/u+e)),Math.min(p,Math.floor(n+(u-A)*z/u+e)),w)}u=E[n];A=q;z=p;t(E,q,n);for(0<w(E[p],u)&&t(E,q,p);A<z;){t(E,A,z);A++;for(z--;0>w(E[A],u);)A++;for(;0<w(E[z],u);)z--}0===w(E[q],u)?t(E,q,z):(z++,t(E,z,p));z<=n&&(q=z+1);n<=z&&(p=z-1)}}function t(E,n,q){var p=E[n];E[n]=E[q];E[q]=p}function B(E,
n){return E<n?-1:E>n?1:0}return function(E,n,q,p,w){V(E,n,q||0,p||E.length-1,w||B)}})})(d);k.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,d,ca,V,t){k.optimizedFeatureQueryEngineAdapter={getObjectId(B){return B.objectId},getAttributes(B){return B.attributes},getAttribute(B,E){return B.attributes[E]},cloneWithGeometry(B,E){return new V.OptimizedFeature(E,
B.attributes,null,B.objectId)},getGeometry(B){return B.geometry},getCentroid(B,E){d.isNone(B.centroid)&&(B.centroid=ca.getCentroidOptimizedGeometry(new t,B.geometry,E.hasZ,E.hasM));return B.centroid}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,d){function ca(t,B,E,n,q,p,w=1){p=q?p?4:3:p?3:2;let u=E,A=E+p,e=0,z=0,a=E=0,h=0;for(let J=0,R=n-1;J<R;J++,u+=p,A+=p){n=
B[u];const r=B[u+1],x=B[u+2],y=B[A],T=B[A+1],ba=B[A+2];let X=n*T-y*r;a+=X;e+=(n+y)*X;z+=(r+T)*X;q&&(X=n*ba-y*x,E+=(x+ba)*X,h+=X);n<t[0]&&(t[0]=n);n>t[1]&&(t[1]=n);r<t[2]&&(t[2]=r);r>t[3]&&(t[3]=r);q&&(x<t[4]&&(t[4]=x),x>t[5]&&(t[5]=x))}0<a*w&&(a*=-1);0<h*w&&(h*=-1);if(!a)return null;t=[e,z,.5*a];q&&(t[3]=E,t[4]=.5*h);return t}function V(t,B,E,n,q){q=n?q?4:3:q?3:2;let p=B,w=B+q,u=0,A=0,e=0,z=0;for(let R=0,r=E-1;R<r;R++,p+=q,w+=q){var a=t[p];const x=t[p+1],y=t[p+2],T=t[w],ba=t[w+1],X=t[w+2];if(n){{var h=
T-a;var J=ba-x;const ka=X-y;h=Math.sqrt(h*h+J*J+ka*ka)}}else h=T-a,J=ba-x,h=Math.sqrt(h*h+J*J);h&&(u+=h,n?(a=[a+.5*(T-a),x+.5*(ba-x),y+.5*(X-y)],A+=h*a[0],e+=h*a[1],z+=h*a[2]):(a=[a+.5*(T-a),x+.5*(ba-x)],A+=h*a[0],e+=h*a[1]))}return 0<u?n?[A/u,e/u,z/u]:[A/u,e/u]:0<E?n?[t[B],t[B+1],t[B+2]]:[t[B],t[B+1]]:null}k.getCentroidOptimizedGeometry=function(t,B,E,n,q){if(d.isNone(B)||!B.lengths.length)return null;const p="upperLeft"===(null==q?void 0:q.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=
0);t.coords.length&&(t.coords.length=0);q=t.coords;const w=[],u=E?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:A,coords:e}=B,z=E?n?4:3:n?3:2;let a=0;for(var h of A){const J=ca(u,e,a,h,E,n,p);J&&w.push(J);a+=h*z}w.sort((J,R)=>{let r=p*J[2]-p*R[2];0===r&&E&&(r=J[4]-R[4]);return r});w.length&&
(h=6*w[0][2],q[0]=w[0][0]/h,q[1]=w[0][1]/h,E&&(h=6*w[0][4],q[2]=0!==h?w[0][3]/h:0),q[0]<u[0]||q[0]>u[1]||q[1]<u[2]||q[1]>u[3]||E&&(q[2]<u[4]||q[2]>u[5]))&&(q.length=0);if(!q.length)if(B=B.lengths[0]?V(e,0,A[0],E,n):null)q[0]=B[0],q[1]=B[1],E&&2<B.length&&(q[2]=B[2]);else return null;return t};k.lineCentroid=V;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,d,ca,V,t,B,E){function n(a,h){if(!h)return null;if("x"in h){var J={x:0,y:0};[J.x,J.y]=a(h.x,h.y,u);null!=h.z&&(J.z=h.z);null!=h.m&&(J.m=h.m);return J}if("xmin"in h)return J={xmin:0,ymin:0,xmax:0,ymax:0},[J.xmin,J.ymin]=a(h.xmin,h.ymin,u),[J.xmax,J.ymax]=a(h.xmax,h.ymax,u),h.hasZ&&(J.zmin=h.zmin,J.zmax=h.zmax,J.hasZ=!0),h.hasM&&(J.mmin=h.mmin,J.mmax=h.mmax,J.hasM=!0),J;if("rings"in h)return{rings:q(h.rings,a),hasM:h.hasM,hasZ:h.hasZ};if("paths"in h)return{paths:q(h.paths,a),hasM:h.hasM,
hasZ:h.hasZ};if("points"in h)return{points:p(h.points,a),hasM:h.hasM,hasZ:h.hasZ}}function q(a,h){const J=[];for(const R of a)J.push(p(R,h));return J}function p(a,h){const J=[];for(const R of a)a=h(R[0],R[1],[0,0]),J.push(a),2<R.length&&a.push(R[2]),3<R.length&&a.push(R[3]);return J}function w(){w=d._asyncToGenerator(function*(a,h){h&&(a=Array.isArray(a)?a.map(J=>ca.isSome(J.geometry)&&J.geometry.spatialReference):[a],yield V.initializeProjection(a.map(J=>({source:J,dest:h}))))});return w.apply(this,
arguments)}const u=[0,0],A=n.bind(null,E.lngLatToXY),e=n.bind(null,E.xyToLngLat),z=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var h=a.prototype;h.push=function(){var J=d._asyncToGenerator(function*(R,r,x){if(!(R&&R.length&&r&&x)||B.equals(r,x))return R;const y={geometries:R,inSpatialReference:r,outSpatialReference:x,resolve:null};this._jobs.push(y);return new Promise(T=>{y.resolve=T;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(R,r,x){return J.apply(this,arguments)}}();h._process=function(){this._timer=null;const J=this._jobs.shift();if(J){var {geometries:R,inSpatialReference:r,outSpatialReference:x,resolve:y}=J;E.canProject(r,x)?B.isWebMercator(x)?y(R.map(A)):y(R.map(e)):y(V.projectMany(t.jsonAdapter,R,r,x,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());k.checkProjectionSupport=function(a,h){return w.apply(this,arguments)};k.project=function(a,h,J,R){if(!a)return a;
J||(J=h,h=a.spatialReference);return B.isValid(h)&&B.isValid(J)&&!B.equals(h,J)?E.canProject(h,J)?(a=B.isWebMercator(J)?A(a):e(a),a.spatialReference=J,a):V.projectMany(t.jsonAdapter,[a],h,J,null,R)[0]:a};k.projectMany=function(a,h,J){return z.push(a,h,J)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e,z,a,h,J,R,r,x,y,T,ba,X){function ka(g){return g.every(H=>"exceedslimit"!==H.statisticType)}const N=new E.MemCacheStorage(2E6);let L=0,Q=function(){function g(S){this.capabilities={query:J.queryCapabilities};this.geometryType=S.geometryType;this.hasM=S.hasM;this.hasZ=S.hasZ;this.objectIdField=S.objectIdField;this.spatialReference=S.spatialReference;this.definitionExpression=S.definitionExpression;this.featureStore=S.featureStore;this.aggregateAdapter=S.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=S.timeInfo;S.cacheSpatialQueries&&(this._geometryQueryCache=new E.MemCache(L++ +"$$",N));this.fieldsIndex=new T(S.fields);S.scheduler&&S.priority&&(this._frameTask=S.scheduler.registerTask(S.priority))}var H=g.prototype;H.destroy=function(){this._frameTask=B.removeMaybe(this._frameTask);this.clearCache();B.destroyMaybe(this._geometryQueryCache);this._changeHandle=B.removeMaybe(this._changeHandle);B.destroyMaybe(this.fieldsIndex)};
H.clearCache=function(){var S;null==(S=this._geometryQueryCache)?void 0:S.clear();this._timeExtent=this._allItems=null};H.executeQuery=function(){var S=d._asyncToGenerator(function*(M,ha){try{return(yield this._executeQuery(M,{},ha)).createQueryResponse()}catch(na){if(na!==y.QUERY_ENGINE_EMPTY_RESULT)throw na;return(new R.QueryEngineResult([],M,this)).createQueryResponse()}});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForCount=function(){var S=d._asyncToGenerator(function*(M=
{},ha){try{return(yield this._executeQuery(M,{returnGeometry:!1,returnCentroid:!1,outSR:null},ha)).createQueryResponseForCount()}catch(na){if(na!==y.QUERY_ENGINE_EMPTY_RESULT)throw na;return 0}});return function(){return S.apply(this,arguments)}}();H.executeQueryForExtent=function(){var S=d._asyncToGenerator(function*(M,ha){const na=M.outSR;try{const P=yield this._executeQuery(M,{returnGeometry:!0,returnCentroid:!1,outSR:null},ha),ma=P.size;if(!ma)return{count:0,extent:null};q.set(C,q.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(P.items,wa=>q.expandWithAABB(C,wa),K);const oa={xmin:C[0],ymin:C[1],xmax:C[3],ymax:C[4],spatialReference:y.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(C[2])&&isFinite(C[5])&&(oa.zmin=C[2],oa.zmax=C[5]);const qa=h.project(oa,P.spatialReference,na);qa.spatialReference=y.cleanFromGeometryEngine(na||this.spatialReference);if(0===qa.xmax-qa.xmin){const wa=n.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=wa;qa.xmax+=wa}if(0===qa.ymax-qa.ymin){const wa=
n.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=wa;qa.ymax+=wa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const wa=n.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=wa;qa.zmax+=wa}return{count:ma,extent:qa}}catch(P){if(P===y.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw P;}});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForIds=function(){var S=d._asyncToGenerator(function*(M,ha){return this.executeQueryForIdSet(M,ha).then(na=>
Array.from(na))});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForIdSet=function(){var S=d._asyncToGenerator(function*(M,ha){try{const na=yield this._executeQuery(M,{returnGeometry:!0,returnCentroid:!1,outSR:null},ha),P=na.items,ma=new Set;yield this._reschedule(()=>{for(const oa of P)ma.add(na.featureAdapter.getObjectId(oa))},ha);return ma}catch(na){if(na===y.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForSnapping=
function(){var S=d._asyncToGenerator(function*(M,ha){const {point:na,distance:P,types:ma}=M;if(ma===R.SnappingTypes.NONE)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(M.query),ha),qa=!e.equals(na.spatialReference,this.spatialReference);qa&&(yield h.checkProjectionSupport(na.spatialReference,this.spatialReference));var wa="number"===typeof P?P:P.x,Ja="number"===typeof P?P:P.y;wa={xmin:na.x-wa,xmax:na.x+wa,ymin:na.y-Ja,ymax:na.y+Ja,spatialReference:na.spatialReference};
wa=qa?h.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ja=(yield A.normalizeCentralMeridian(u.fromJSON(na),null,{signal:ha}))[0];const Da=(yield A.normalizeCentralMeridian(u.fromJSON(wa),null,{signal:ha}))[0];if(B.isNone(Ja)||B.isNone(Da))return{candidates:[]};const Ma=new R.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Da.toJSON())),oa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Ma),ha);yield this._reschedule(()=>this._executeTimeQuery(Ma),ha);yield this._reschedule(()=>
this._executeAttributesQuery(Ma),ha);ha=Ja.toJSON();ha=qa?h.project(ha,this.spatialReference):ha;return Ma.createSnappingResponse({...M,point:ha,distance:qa?Math.max(wa.xmax-wa.xmin,wa.ymax-wa.ymin)/2:P},na.spatialReference)});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForLatestObservations=function(){var S=d._asyncToGenerator(function*(M,ha){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new V("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:M,timeInfo:this.timeInfo});try{const na=yield this._executeQuery(M,{},ha);yield this._reschedule(()=>this._filterLatest(na),ha);return na.createQueryResponse()}catch(na){if(na!==y.QUERY_ENGINE_EMPTY_RESULT)throw na;return(new R.QueryEngineResult([],M,this)).createQueryResponse()}});return function(M,ha){return S.apply(this,arguments)}}();H.executeQueryForSummaryStatistics=function(){var S=d._asyncToGenerator(function*(M={},ha,na){const {field:P,normalizationField:ma,valueExpression:oa}=ha;
return(yield this._getQueryEngineResultForStats(M,{field:P,normalizationField:ma,valueExpression:oa},na)).createSummaryStatisticsResponse(ha)});return function(){return S.apply(this,arguments)}}();H.executeQueryForUniqueValues=function(){var S=d._asyncToGenerator(function*(M={},ha,na){const {field:P,valueExpression:ma}=ha;return(yield this._getQueryEngineResultForStats(M,{field:P,valueExpression:ma},na)).createUniqueValuesResponse(ha)});return function(){return S.apply(this,arguments)}}();H.executeQueryForClassBreaks=
function(){var S=d._asyncToGenerator(function*(M={},ha,na){const {field:P,normalizationField:ma,valueExpression:oa}=ha;return(yield this._getQueryEngineResultForStats(M,{field:P,normalizationField:ma,valueExpression:oa},na)).createClassBreaksResponse(ha)});return function(){return S.apply(this,arguments)}}();H.executeQueryForHistogram=function(){var S=d._asyncToGenerator(function*(M={},ha,na){const {field:P,normalizationField:ma,valueExpression:oa}=ha;return(yield this._getQueryEngineResultForStats(M,
{field:P,normalizationField:ma,valueExpression:oa},na)).createHistogramResponse(ha)});return function(){return S.apply(this,arguments)}}();H._schedule=function(){var S=d._asyncToGenerator(function*(M,ha){return B.isSome(this._frameTask)?this._frameTask.schedule(M,ha):M(X.noBudget)});return function(M,ha){return S.apply(this,arguments)}}();H._reschedule=function(){var S=d._asyncToGenerator(function*(M,ha){return B.isSome(this._frameTask)?this._frameTask.reschedule(M,ha):M(X.noBudget)});return function(M,
ha){return S.apply(this,arguments)}}();H._getAll=function(S){B.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new R.QueryEngineResult(this._allItems,S,this)};H._executeQuery=function(){var S=d._asyncToGenerator(function*(M,ha,na){M=t.clone(M);M=yield this._schedule(()=>y.normalizeQuery(M,this.definitionExpression,this.spatialReference),na);M=yield this._reschedule(()=>this._checkQuerySupport(M),na);M={...M,...ha};const P=yield this._reschedule(()=>this._executeSceneFilterQuery(M,
na),na),ma=yield this._reschedule(()=>this._executeGeometryQuery(M,P,na),na);yield this._reschedule(()=>this._executeAggregateIdsQuery(ma),na);yield this._reschedule(()=>this._executeObjectIdsQuery(ma),na);yield this._reschedule(()=>this._executeTimeQuery(ma),na);yield this._reschedule(()=>this._executeAttributesQuery(ma),na);return ma});return function(M,ha,na){return S.apply(this,arguments)}}();H._executeSceneFilterQuery=function(){var S=d._asyncToGenerator(function*(M,ha){var na=this;if(B.isNone(M.sceneFilter))return null;
const {outSR:P,returnGeometry:ma,returnCentroid:oa}=M;var qa=this.featureStore.featureSpatialReference,wa=M.sceneFilter.geometry;const Ja=B.isNone(qa)||e.equals(qa,wa.spatialReference)?wa:h.project(wa,qa);if(!Ja)return null;qa=ma||oa;qa=e.isValid(P)&&!e.equals(this.spatialReference,P)&&qa?function(){var c=d._asyncToGenerator(function*(m){return na._project(m,P)});return function(m){return c.apply(this,arguments)}}():c=>c;const Da=this.featureAdapter;wa=this._searchFeatures(this._getQueryBBoxes(Ja));
if("disjoint"===M.sceneFilter.spatialRelationship){if(!wa.length)return null;const c=new Set;for(var Ma of wa)c.add(Da.getObjectId(Ma));const m=yield this._reschedule(()=>this.featureStore.toArray(),ha);Ma=yield this._reschedule(d._asyncToGenerator(function*(){const fa=yield r.getSpatialQueryOperator("esriSpatialRelDisjoint",Ja,na.geometryType,na.hasZ,na.hasM),l=yield na._runSpatialFilter(m,G=>!c.has(Da.getObjectId(G))||fa(Da.getGeometry(G)),ha);return new R.QueryEngineResult(l,M,na)}),ha);return qa(Ma)}if(!wa.length)return new R.QueryEngineResult([],
M,this);if(this._canExecuteSinglePass(Ja,M))return qa(new R.QueryEngineResult(wa,M,this));const Za=yield r.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Ma=yield this._runSpatialFilter(wa,c=>Za(Da.getGeometry(c)),ha);return qa(new R.QueryEngineResult(Ma,M,this))});return function(M,ha){return S.apply(this,arguments)}}();H._executeGeometryQuery=function(){var S=d._asyncToGenerator(function*(M,ha,na){var P=this;if(B.isSome(ha)&&0===ha.items.length)return ha;
M=B.isSome(ha)?ha.query:M;const {geometry:ma,outSR:oa,spatialRel:qa,returnGeometry:wa,returnCentroid:Ja}=M;var Da=this.featureStore.featureSpatialReference;const Ma=!ma||B.isNone(Da)||e.equals(Da,ma.spatialReference)?ma:h.project(ma,Da),Za=wa||Ja,c=e.isValid(oa)&&!e.equals(this.spatialReference,oa),m=this._geometryQueryCache&&B.isNone(ha)?c&&Za?JSON.stringify({originalFilterGeometry:ma,spatialRelationship:qa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:ma,spatialRelationship:qa}):
null;Da=m?this._geometryQueryCache.get(m):null;if(B.isSome(Da))return new R.QueryEngineResult(Da,M,this);Da=function(){var Y=d._asyncToGenerator(function*(ja){c&&Za&&(yield P._project(ja,oa));m&&P._geometryQueryCache.put(m,ja.items,ja.items.length+1);return ja});return function(ja){return Y.apply(this,arguments)}}();if(!Ma)return Da(B.isSome(ha)?ha:this._getAll(M));const fa=this.featureAdapter;let l=this._searchFeatures(this._getQueryBBoxes(ma));if("esriSpatialRelDisjoint"===qa){if(!l.length)return Da(B.isSome(ha)?
ha:this._getAll(M));const Y=new Set;for(var G of l)Y.add(fa.getObjectId(G));const ja=B.isSome(ha)?ha.items:yield this._reschedule(()=>this.featureStore.toArray(),na);G=yield this._reschedule(d._asyncToGenerator(function*(){const ia=yield r.getSpatialQueryOperator(qa,Ma,P.geometryType,P.hasZ,P.hasM),I=yield P._runSpatialFilter(ja,O=>!Y.has(fa.getObjectId(O))||ia(fa.getGeometry(O)),na);return new R.QueryEngineResult(I,M,P)}),na);return Da(G)}if(B.isSome(ha)){const Y=new ca.PositionHint;l=l.filter(ja=>
0<=ca.indexOf(ha.items,ja,ha.items.length,Y))}if(!l.length)return Da=new R.QueryEngineResult([],M,this),m&&this._geometryQueryCache.put(m,Da.items,1),Da;if(this._canExecuteSinglePass(Ma,M))return Da(new R.QueryEngineResult(l,M,this));const W=yield r.getSpatialQueryOperator(qa,Ma,this.geometryType,this.hasZ,this.hasM);G=yield this._runSpatialFilter(l,Y=>W(fa.getGeometry(Y)),na);return Da(new R.QueryEngineResult(G,M,this))});return function(M,ha,na){return S.apply(this,arguments)}}();H._executeAggregateIdsQuery=
function(S){if(0!==S.items.length&&S.query.aggregateIds&&S.query.aggregateIds.length&&!B.isNone(this.aggregateAdapter)){var M=new Set;for(const na of S.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(na).forEach(P=>M.add(P));var ha=this.featureAdapter.getObjectId;S.items=S.items.filter(na=>M.has(ha(na)))}};H._executeObjectIdsQuery=function(S){if(0!==S.items.length&&S.query.objectIds&&S.query.objectIds.length){var M=new Set(S.query.objectIds),ha=this.featureAdapter.getObjectId;S.items=
S.items.filter(na=>M.has(ha(na)))}};H._executeTimeQuery=function(S){if(0!==S.items.length){var M=x.getTimeOperator(this.timeInfo,S.query.timeExtent,this.featureAdapter);B.isNone(M)||(S.items=S.items.filter(M))}};H._executeAttributesQuery=function(S){if(0!==S.items.length){var M=a.getWhereClause(S.query.where,this.fieldsIndex);if(M){if(!M.isStandardized)throw new TypeError("Where clause is not standardized");S.items=S.items.filter(ha=>M.testFeature(ha,this.featureAdapter))}}};H._runSpatialFilter=function(){var S=
d._asyncToGenerator(function*(M,ha,na){var P=this;if(!ha)return M;if(B.isNone(this._frameTask))return M.filter(wa=>ha(wa));let ma=0;const oa=[],qa=function(){var wa=d._asyncToGenerator(function*(Ja){for(;ma<M.length;){const Da=M[ma++];ha(Da)&&(oa.push(Da),Ja.madeProgress());Ja.done&&(yield P._reschedule(Ma=>qa(Ma),na))}});return function(Ja){return wa.apply(this,arguments)}}();return this._reschedule(wa=>qa(wa),na).then(()=>oa)});return function(M,ha,na){return S.apply(this,arguments)}}();H._filterLatest=
function(S){const {trackIdField:M,startTimeField:ha,endTimeField:na}=this.timeInfo,P=na||ha,ma=new Map,oa=this.featureAdapter.getAttribute;for(const qa of S.items){const wa=oa(qa,M),Ja=oa(qa,P),Da=ma.get(wa);(!Da||Ja>oa(Da,P))&&ma.set(wa,qa)}S.items=Array.from(ma.values())};H._canExecuteSinglePass=function(S,M){({spatialRel:M}=M);return r.canQueryWithRBush(S)&&("esriSpatialRelEnvelopeIntersects"===M||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===
M||"esriSpatialRelWithin"===M))};H._project=function(){var S=d._asyncToGenerator(function*(M,ha){if(!ha||e.equals(this.spatialReference,ha))return M;const na=this.featureAdapter;ha=yield h.projectMany(M.items.map(P=>y.getGeometry(this.geometryType,this.hasZ,this.hasM,na.getGeometry(P))),this.spatialReference,ha);M.items=ha.map((P,ma)=>na.cloneWithGeometry(M.items[ma],z.convertFromGeometry(P,this.hasZ,this.hasM)));return M});return function(M,ha){return S.apply(this,arguments)}}();H._getQueryBBoxes=
function(S){if(r.canQueryWithRBush(S)){if(u.isExtent(S))return[p.fromValues(S.xmin,S.ymin,S.xmax,S.ymax)];if(u.isPolygon(S))return S.rings.map(M=>p.fromValues(Math.min(M[0][0],M[2][0]),Math.min(M[0][1],M[2][1]),Math.max(M[0][0],M[2][0]),Math.max(M[0][1],M[2][1])))}return[w.getBoundsXY(p.create(),S)]};H._searchFeatures=function(S){for(const M of S)this.featureStore.forEachInBounds(M,ha=>D.add(ha));S=Array.from(D.values());D.clear();return S};H._checkStatisticsSupport=function(){var S=d._asyncToGenerator(function*(M,
ha){if(0>M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text||M.outStatistics||M.groupByFieldsForStatistics||M.having||M.orderByFields)throw new V("feature-store:unsupported-query","Unsupported query options",{query:M});this._checkAttributesQuerySupport(M);return Promise.all([this._checkStatisticsParamsSupport(ha),r.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,M.outSR)]).then(()=>M)});
return function(M,ha){return S.apply(this,arguments)}}();H._checkStatisticsParamsSupport=function(){var S=d._asyncToGenerator(function*(M){var ha=[];M.valueExpression&&({arcadeUtils:ha}=yield ba.loadArcade(),ha=ha.extractFieldNames(M.valueExpression));M.field&&ha.push(M.field);M.normalizationField&&ha.push(M.normalizationField);if(!ha.length)throw new V("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:M});a.validateFields(this.fieldsIndex,ha,"params contains missing fields")});
return function(M){return S.apply(this,arguments)}}();H._checkQuerySupport=function(){var S=d._asyncToGenerator(function*(M){if(0>M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text)throw new V("feature-store:unsupported-query","Unsupported query options",{query:M});this._checkAttributesQuerySupport(M);this._checkStatisticsQuerySupport(M);return Promise.all([r.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,
M.outSR)]).then(()=>M)});return function(M){return S.apply(this,arguments)}}();H._checkAttributesQuerySupport=function(S){const {outFields:M,orderByFields:ha,returnDistinctValues:na,outStatistics:P}=S,ma=P?P.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ha&&0<ha.length){const oa=ha.map(qa=>{const wa=qa.toLowerCase();return wa.includes(" asc")?wa.split(" asc")[0]:wa.includes(" desc")?wa.split(" desc")[0]:qa}).filter(qa=>!ma.includes(qa));a.validateFields(this.fieldsIndex,
oa,"orderByFields contains missing fields")}if(M&&0<M.length)a.validateFields(this.fieldsIndex,M,"outFields contains missing fields");else if(na)throw new V("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:S});a.validateWhere(this.fieldsIndex,S.where)};H._checkStatisticsQuerySupport=function(S){const {outStatistics:M,groupByFieldsForStatistics:ha,having:na}=S;var P=ha&&ha.length,ma=M&&M.length;if(na){if(!P||!ma)throw new V("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:S});a.validateHaving(this.fieldsIndex,na,M)}if(ma&&ka(M)){ma=M.map(oa=>oa.onStatisticField).filter(Boolean);a.validateFields(this.fieldsIndex,ma,"onStatisticFields contains missing fields");P&&a.validateFields(this.fieldsIndex,ha,"groupByFieldsForStatistics contains missing fields");for(const oa of M){const {onStatisticField:qa,statisticType:wa}=oa;if(("percentile_disc"===wa||"percentile_cont"===wa)&&"statisticParameters"in
oa){if({statisticParameters:P}=oa,!P)throw new V("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:oa,query:S});}else if("count"!==wa&&qa&&a.hasInvalidFieldType(qa,this.fieldsIndex))throw new V("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:oa,query:S});}}};H._getQueryEngineResultForStats=function(){var S=d._asyncToGenerator(function*(M,ha,na){M=t.clone(M);try{M=yield this._schedule(()=>y.normalizeQuery(M,
this.definitionExpression,this.spatialReference),na);M=yield this._reschedule(()=>this._checkStatisticsSupport(M,ha),na);const P=yield this._reschedule(()=>this._executeSceneFilterQuery(M,na),na),ma=yield this._reschedule(()=>this._executeGeometryQuery(M,P,na),na);yield this._reschedule(()=>this._executeAggregateIdsQuery(ma),na);yield this._reschedule(()=>this._executeObjectIdsQuery(ma),na);yield this._reschedule(()=>this._executeTimeQuery(ma),na);yield this._reschedule(()=>this._executeAttributesQuery(ma),
na);return ma}catch(P){if(P!==y.QUERY_ENGINE_EMPTY_RESULT)throw P;return new R.QueryEngineResult([],M,this)}});return function(M,ha,na){return S.apply(this,arguments)}}();d._createClass(g,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const S=this.featureStore.fullBounds;return B.isNone(S)?null:{xmin:S[0],ymin:S[1],xmax:S[2],ymax:S[3],spatialReference:y.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=x.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return g}();const K=q.create(),C=q.create(),D=new Set;k.Feature=function(g,H=null,S,M,ha){this.attributes=g;this.geometry=S;this.centroid=M;this.filterFlags=ha;this.groupId=-1;this.displayId=H};k.QueryEngine=Q;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(k,d,ca,V){k.RemoveMode=void 0;(function(E){E[E.ALL=0]="ALL";E[E.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let t=function(){function E(q,p,w){this._namespace=q;this._storage=p;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";w&&(this._storage.registerRemoveFunc(this._namespace,w),this._removeFunc=!0)}var n=E.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(q,p,w,u=0){this._storage.put(this._namespace+q,p,w,u)};n.get=function(q){q=this._storage.get(this._namespace+q);void 0===q?++this._miss:++this._hit;return q};n.pop=function(q){q=this._storage.pop(this._namespace+q);void 0===q?++this._miss:++this._hit;return q};n.updateSize=function(q,p,w){this._storage.updateSize(this._namespace+q,p,w)};n.clear=function(){this._storage.clear(this._namespace)};
n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};d._createClass(E,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return E}(),B=function(){function E(q=10485760){this._maxSize=q;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new V;this._users=new V}var n=E.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(q){this._users.push(q)};n.deregister=function(q){this._users.removeUnordered(q)};n.registerRemoveFunc=function(q,p){this._removeFuncs.push([q,p])};n.deregisterRemoveFunc=function(q){this._removeFuncs.filterInPlace(p=>p[0]!==q)};n.put=function(q,p,w,u){const A=this._db.get(q);A&&(this._size-=
A.size,this._db.delete(q),A.entry!==p&&this._notifyRemove(q,A.entry,k.RemoveMode.ALL));w>this._maxSize?this._notifyRemove(q,p,k.RemoveMode.ALL):void 0===p?console.warn("Refusing to cache undefined entry "):!w||0>w?console.warn("Refusing to cache entry with invalid size "+w):(u=1+Math.max(u,-3)- -3,this._db.set(q,{entry:p,size:w,lifetime:u,lives:u}),this._size+=w,this._checkSizeLimit())};n.updateSize=function(q,p,w){const u=this._db.get(q);if(u&&u.entry===p){for(this._size-=u.size;w>this._maxSize;)if(w=
this._notifyRemove(q,p,k.RemoveMode.SOME),!(ca.isSome(w)&&0<w)){this._db.delete(q);return}u.size=w;this._size+=w;this._checkSizeLimit()}};n.pop=function(q){const p=this._db.get(q);if(p)return this._size-=p.size,this._db.delete(q),++this._hit,p.entry;++this._miss};n.get=function(q){const p=this._db.get(q);if(void 0===p)++this._miss;else return this._db.delete(q),p.lives=p.lifetime,this._db.set(q,p),++this._hit,p.entry};n.getStats=function(){const q={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},p={},w=[];this._db.forEach((e,z)=>{const a=e.lifetime;w[a]=(w[a]||0)+e.size;this._users.forAll(h=>{h=h.namespace;z.startsWith(h)&&(p[h]=(p[h]||0)+e.size)})});const u={};this._users.forAll(e=>{const z=e.namespace;!isNaN(e.hitRate)&&0<e.hitRate?(p[z]=p[z]||0,u[z]=Math.round(100*e.hitRate)+"%"):u[z]="0%"});var A=Object.keys(p);A.sort((e,z)=>p[z]-p[e]);A.forEach(e=>q[e]=Math.round(p[e]/2**20)+"MB / "+u[e]);
for(A=w.length-1;0<=A;--A){const e=w[A];e&&(q["Priority "+(A+-3-1)]=Math.round(e/this.size*100)+"%")}return q};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(q=>q.resetHitRate())};n.clear=function(q){this._db.forEach((p,w)=>{w.startsWith(q)&&(this._size-=p.size,this._db.delete(w),this._notifyRemove(w,p.entry,k.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((q,p)=>this._notifyRemove(p,q.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/
(this._hit+this._miss)};n._notifyRemove=function(q,p,w){let u;this._removeFuncs.some(A=>q.startsWith(A[0])?(A=A[1](p,w),"number"===typeof A&&(u=A),!0):!1);return u};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [q,p]of this._db){this._db.delete(q);if(1>=p.lives){this._size-=p.size;const w=this._notifyRemove(q,p.entry,k.RemoveMode.SOME);ca.isSome(w)&&0<w&&(this._size+=w,p.lives=p.lifetime,p.size=w,this._db.set(q,p))}else--p.lives,this._db.set(q,p);if(this._size<=.9*this.maxSize)break}};
d._createClass(E,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(q){this._maxSize=Math.max(q,0);this._checkSizeLimit()}}]);return E}();k.MIN_PRIORITY=-3;k.MemCache=t;k.MemCacheStorage=B;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A){function e(y){const T=[];let ba=0,X=0;for(let ka=0;ka<y.length;ka++){const N=y[ka];let L=null;for(let Q=0;Q<N.length;Q++)L=N[Q],T.push(L),0===Q?X=ba=L[0]:(ba=Math.min(ba,L[0]),X=Math.max(X,L[0]));L&&T.push([(ba+X)/2,0])}return T}function z(y,T){if(!(y instanceof n||y instanceof E))throw x.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new V("straightLineDensify: the input geometry is neither polyline nor polygon");var ba=q.getGeometryParts(y);
const X=[];for(const N of ba){ba=[];X.push(ba);ba.push([N[0][0],N[0][1]]);for(let L=0;L<N.length-1;L++){const Q=N[L][0],K=N[L][1],C=N[L+1][0],D=N[L+1][1];var ka=Math.sqrt((C-Q)*(C-Q)+(D-K)*(D-K));const g=(D-K)/ka,H=(C-Q)/ka,S=ka/T;if(1<S){for(let M=1;M<=S-1;M++){const ha=M*T;ba.push([H*ha+Q,g*ha+K])}ka=(ka+Math.floor(S-1)*T)/2;ba.push([H*ka+Q,g*ka+K])}ba.push([C,D])}}return"polygon"===y.type?new E({rings:X,spatialReference:y.spatialReference}):new n({paths:X,spatialReference:y.spatialReference})}
function a(y,T,ba){T&&(y=z(y,1E6),y=w.webMercatorToGeographic(y,!0));ba&&(y=q.updatePolyGeometry(y,ba));return y}function h(y,T,ba){if(Array.isArray(y)){var X=y[0];X>T?(ba=q.offsetMagnitude(X,T),y[0]=X+-2*ba*T):X<ba&&(T=q.offsetMagnitude(X,ba),y[0]=X+-2*T*ba)}else X=y.x,X>T?(ba=q.offsetMagnitude(X,T),y=y.clone().offset(-2*ba*T,0)):X<ba&&(T=q.offsetMagnitude(X,ba),y=y.clone().offset(-2*T*ba,0));return y}function J(y,T){let ba=-1;for(let X=0;X<T.cutIndexes.length;X++){const ka=T.cutIndexes[X],N=T.geometries[X],
L=q.getGeometryParts(N);for(let Q=0;Q<L.length;Q++){const K=L[Q];K.some(C=>{if(180>C[0])return!0;C=0;for(var D=0;D<K.length;D++){var g=K[D][0];C=g>C?g:C}C=Number(C.toFixed(9));C=-360*q.offsetMagnitude(C,180);for(D=0;D<K.length;D++)g=N.getPoint(Q,D),N.setPoint(Q,D,g.clone().offset(C,0));return!0})}if(ka===ba)if("polygon"===y[0].type)for(const Q of q.getGeometryParts(N))y[ka]=y[ka].addRing(Q);else{if("polyline"===y[0].type)for(const Q of q.getGeometryParts(N))y[ka]=y[ka].addPath(Q)}else ba=ka,y[ka]=
N}return y}function R(y,T,ba){return r.apply(this,arguments)}function r(){r=d._asyncToGenerator(function*(y,T,ba){var X;if(!Array.isArray(y))return R([y],T);T&&"string"!==typeof T&&x.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");T="string"===typeof T?T:null!=(X=null==T?void 0:T.url)?X:ca.geometryServiceUrl;let ka,N,L;let Q=0;var K=[];X=[];for(var C of y)if(B.isNone(C))X.push(C);else{if(!D){var D=C.spatialReference;var g=p.getInfo(D);var H=(ka=D.isWebMercator)?
102100:4326;N=q.cutParams[H].maxX;L=q.cutParams[H].minX;var S=q.cutParams[H].plus180Line;H=q.cutParams[H].minus180Line}if(g)if("mesh"===C.type)X.push(C);else if("point"===C.type)X.push(h(C.clone(),N,L));else if("multipoint"===C.type){var M=C.clone();M.points=M.points.map(ha=>h(ha,N,L));X.push(M)}else if("extent"===C.type)M=C.clone()._normalize(!1,!1,g),X.push(M.rings?new E(M):M);else if(C.extent){M=C.extent;const ha=2*q.offsetMagnitude(M.xmin,L)*N;let na=0===ha?C.clone():q.updatePolyGeometry(C.clone(),
ha);M.offset(ha,0);M.intersects(S)&&M.xmax!==N?(Q=M.xmax>Q?M.xmax:Q,na=a(na,ka),K.push(na),X.push("cut")):M.intersects(H)&&M.xmin!==L?(Q=2*M.xmax*N>Q?2*M.xmax*N:Q,na=a(na,ka,360),K.push(na),X.push("cut")):X.push(na)}else X.push(C.clone());else X.push(C)}D=q.offsetMagnitude(Q,N);g=-90;S=D;for(C=new n;0<D;)H=-180+360*D,C.addPath([[H,g],[H,-1*g]]),g*=-1,D--;if(0<K.length&&0<S){D=yield u.cut(T,K,C,ba);D=J(K,D);g=[];K=[];for(S=0;S<X.length;S++)C=X[S],"cut"!==C?K.push(C):(C=D.shift(),H=y[S],B.isSome(H)&&
"polygon"===H.type&&H.rings&&1<H.rings.length&&C.rings.length>=H.rings.length?(g.push(C),K.push("simplify")):K.push(ka?w.geographicToWebMercator(C):C));if(!g.length)return K;X=yield A.simplify(T,g,ba);y=[];for(ba=0;ba<K.length;ba++)T=K[ba],"simplify"!==T?y.push(T):y.push(ka?w.geographicToWebMercator(X.shift()):X.shift());return y}y=[];for(ba=0;ba<X.length;ba++)T=X[ba],"cut"!==T?y.push(T):(T=K.shift(),y.push(!0===ka?w.geographicToWebMercator(T):T));return y});return r.apply(this,arguments)}const x=
t.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(y){if(!y)return null;const T=y.extent;if(!T)return null;var ba=y.spatialReference&&p.getInfo(y.spatialReference);if(!ba)return T;const [X,ka]=ba.valid;({width:ba}=T);let {xmin:N,xmax:L}=T;[N,L]=[L,N];if("extent"===y.type||0===ba||ba<=ka||ba>2*ka||N<X||L>ka)return T;let Q;switch(y.type){case "polygon":if(1<y.rings.length)Q=e(y.rings);else return T;break;case "polyline":if(1<y.paths.length)Q=e(y.paths);else return T;
break;case "multipoint":Q=y.points}y=T.clone();for(let K=0;K<Q.length;K++){let C=Q[K][0];0>C?(C+=ka,L=Math.max(C,L)):(C-=ka,N=Math.min(C,N))}y.xmin=N;y.xmax=L;return y.width<ba?(y.xmin-=ka,y.xmax-=ka,y):T};k.normalizeCentralMeridian=R;k.normalizeMapX=function(y,T){if(T=p.getInfo(T)){const [ba,X]=T.valid;T=X-ba;if(y<ba)for(;y<ba;)y+=T;if(y>X)for(;y>X;)y-=T}return y};k.straightLineDensify=z;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports",
"../Polyline","../SpatialReference","./jsonUtils"],function(k,d,ca,V){function t(B){return V.isPolygon(B)?B.rings:B.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator})},4326:{maxX:180,
minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:ca.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ca.WGS84})}};k.cutParams=d;k.getGeometryParts=t;k.offsetMagnitude=function(B,E){return Math.ceil((B-E)/(2*E))};k.updatePolyGeometry=function(B,E){const n=t(B);for(const q of n)for(const p of q)p[0]+=E;return B};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,d,ca,V,t,B){function E(){E=d._asyncToGenerator(function*(n,q,p,w){n="string"===typeof n?t.urlToObject(n):n;const u=q[0].spatialReference;q={...w,query:{...n.query,f:"json",sr:JSON.stringify(u),target:JSON.stringify({geometryType:B.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(p)}};q=yield V(n.path+"/cut",q);const {cutIndexes:A,geometries:e=[]}=q.data;return{cutIndexes:A,geometries:e.map(z=>{z=B.fromJSON(z);z.spatialReference=u;return z})}});return E.apply(this,arguments)}k.cut=
function(n,q,p,w){return E.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,d,ca,V,t){function B(){B=d._asyncToGenerator(function*(q,p,w){const u="string"===typeof q?V.urlToObject(q):q;q=p[0].spatialReference;const A=t.getJsonType(p[0]);p={...w,query:{...u.query,
f:"json",sr:q.wkid?q.wkid:JSON.stringify(q),geometries:JSON.stringify(E(p))}};p=yield ca(u.path+"/simplify",p);return n(p.data,A,q)});return B.apply(this,arguments)}function E(q){return{geometryType:t.getJsonType(q[0]),geometries:q.map(p=>p.toJSON())}}function n(q,p,w){const u=t.getGeometryType(p);return q.map(A=>{A=u.fromJSON(A);A.spatialReference=w;return A})}k.simplify=function(q,p,w){return B.apply(this,arguments)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,d,ca){function V(q,p){return q?E.get(q,p):null}function t(q,p,w,u=!0){const A=[];for(const e of p)if("*"!==e&&!q.has(e))if(u){p=B(e);try{const z=V(p,q);if(!z)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:p});if(!z.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:z});t(q,z.fieldNames,
"expression contains missing fields")}catch(z){if((p=z&&z.details)&&(p.clause||p.where))throw z;p&&p.missingFields?A.push(...p.missingFields):A.push(e)}}else A.push(e);if(A.length)throw new d("feature-store:unsupported-query",w,{missingFields:A});}function B(q){return q.split(" as ")[0]}const E=new ca.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=
function(q){return q.split(" as ")[1]};k.getExpressionFromFieldName=B;k.getWhereClause=V;k.hasInvalidFieldType=function(q,p){return(q=p.get(q))?!n.has(q.type):!1};k.validateFields=t;k.validateHaving=function(q,p,w){if(!p)return!0;const u=E.get(p,q);if(!u)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:p});if(!u.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:p});t(q,u.fieldNames,"having contains missing fields");
if(!u.getExpressions().every(A=>{const {aggregateType:e,field:z}=A,a=q.has(z)&&q.get(z).name;return w.some(h=>{const {onStatisticField:J,statisticType:R}=h;return(q.has(J)&&q.get(J).name)===a&&R.toLowerCase().trim()===e})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:p});return!0};k.validateWhere=function(q,p){if(!p)return!0;const w=E.get(p,q);if(!w)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:p});
if(!w.isStandardized)throw new d("feature-store:unsupported-query","where clause is not standard",{where:p});t(q,w.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,d,ca){let V=function(){function t(B,E){this._cache=new d(B);this._invalidCache=new d(E)}t.prototype.get=function(B,E){const n=`${E.uid}:${B}`,
q=this._cache.get(n);if(q)return q;if(void 0!==this._invalidCache.get(n))return null;try{const p=ca.WhereClause.create(B,E);this._cache.put(n,p);return p}catch{return this._invalidCache.put(n,null),null}};return t}();k.WhereClauseCache=V;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function d(V,t){this._storage=new k.MemCacheStorage;this._storage.maxSize=V;t&&this._storage.registerRemoveFunc("",
t)}var ca=d.prototype;ca.put=function(V,t){this._storage.put(V,t,1,1)};ca.pop=function(V){return this._storage.pop(V)};ca.get=function(V){return this._storage.get(V)};ca.clear=function(){this._storage.clearAll()};ca.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,d,ca,V,t,B){function E(C,D){C+="";return C.length>=
D?C:Array(D-C.length+1).join("0")+C}function n(C,D,g="0",H="0",S="0",M="0",ha="",na="0",P="0"){return"+"===ha||"-"===ha?(C=`${E(parseInt(C,10),4)}-${E(parseInt(D,10),2)}-${E(parseInt(g,10),2)}`,D="",10>parseFloat(M)&&(D="0"),H=`${E(parseInt(H,10),2)}:${E(parseInt(S,10),2)}:${D+parseFloat(M).toString()}`,ha=`${ha}${E(parseInt(na,10),2)}:${E(parseInt(P,10),2)}`,new Date(C+"T"+H+ha)):new Date(parseInt(C,10),parseInt(D,10)-1,parseInt(g,10),parseInt(H,10),parseInt(S,10),parseFloat(M))}function q(C){let D=
y.exec(C);if(null!==D){const [,g,H,S,M,ha,na]=D;return n(g,H,S,M,ha,na)}D=T.exec(C);if(null!==D){const [,g,H,S,M,ha,na,P,ma,oa]=D;return n(g,H,S,M,ha,na,P,ma,oa)}D=ba.exec(C);if(null!==D){const [,g,H,S,M,ha,na,P,ma]=D;return n(g,H,S,M,ha,"0",na,P,ma)}D=X.exec(C);if(null!==D){const [,g,H,S,M,ha]=D;return n(g,H,S,M,ha)}D=x.exec(C);if(null!==D){const [,g,H,S]=D;return n(g,H,S)}throw Error("SQL Invalid Timestamp");}function p(C){C=x.exec(C);if(null===C)throw Error("SQL Invalid Date");const [,D,g,H]=C;
return new Date(parseInt(D,10),parseInt(g,10)-1,parseInt(H,10))}function w(C){return Array.isArray(C)?C:[C]}function u(C){return null!==C?!0!==C:null}function A(C,D){return null!=C&&null!=D?!0===C&&!0===D:!1===C||!1===D?!1:null}function e(C,D){return null!=C&&null!=D?!0===C||!0===D:!0===C||!0===D?!0:null}function z(C,D){if(null==C)return null;let g=!1;for(const H of D)if(null==H)g=null;else if(C===H){g=!0;break}return g}function a(C,D,g){if(null==C)return null;{let H="",S=Q.Normal;for(let M=0;M<D.length;M++){const ha=
D.charAt(M);switch(S){case Q.Normal:ha===g?S=Q.Escaped:H="-[]/{}()*+?.\\^$|".includes(ha)?H+("\\"+ha):"%"===ha?H+".*":"_"===ha?H+".":H+ha;break;case Q.Escaped:H="-[]/{}()*+?.\\^$|".includes(ha)?H+("\\"+ha):H+ha,S=Q.Normal}}D=new RegExp("^"+H+"$","m")}return D.test(C)}function h(C){return C instanceof Date?C.valueOf():C}function J(C,D,g){if(null==D||null==g)return null;D=h(D);g=h(g);switch(C){case "\x3c\x3e":return D!==g;case "\x3d":return D===g;case "\x3e":return D>g;case "\x3c":return D<g;case "\x3e\x3d":return D>=
g;case "\x3c\x3d":return D<=g}}function R(C,D,g){if(D instanceof t.SqlInterval)if(g instanceof Date)switch(C){case "+":return new Date(D.valueInMilliseconds()+g.getTime());case "-":return D.valueInMilliseconds()-g.getTime();case "*":return D.valueInMilliseconds()*g.getTime();case "/":return D.valueInMilliseconds()/g.getTime()}else if(g instanceof t.SqlInterval)switch(C){case "+":return t.SqlInterval.createFromMilliseconds(D.valueInMilliseconds()+g.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(D.valueInMilliseconds()-
g.valueInMilliseconds());case "*":return D.valueInMilliseconds()*g.valueInMilliseconds();case "/":return D.valueInMilliseconds()/g.valueInMilliseconds()}else D=D.valueInMilliseconds();else if(g instanceof t.SqlInterval)if(D instanceof Date)switch(C){case "+":return new Date(g.valueInMilliseconds()+D.getTime());case "-":return new Date(D.getTime()-g.valueInMilliseconds());case "*":return D.getTime()*g.valueInMilliseconds();case "/":return D.getTime()/g.valueInMilliseconds()}else g=g.valueInMilliseconds();
else if(D instanceof Date&&"number"===typeof g)switch(g*=864E5,D=D.getTime(),C){case "+":return new Date(D+g);case "-":return new Date(D-g);case "*":return new Date(D*g);case "/":return new Date(D/g)}else if(g instanceof Date&&"number"===typeof D)switch(D*=864E5,g=g.getTime(),C){case "+":return new Date(D+g);case "-":return new Date(D-g);case "*":return new Date(D*g);case "/":return new Date(D/g)}switch(C){case "+":return D+g;case "-":return D-g;case "*":return D*g;case "/":return D/g}}function r(C,
D,g,H){C=H.getAttribute(C,D);return null!=C&&1===g[D]?new Date(C):C}const x=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,T=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,ba=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,X=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ka=new Set(["current_timestamp","current_date","current_time"]);let N=function(){function C(){}
C.makeBool=function(D){return!0===D};C.featureValue=function(D,g,H,S){return r(D,g,H,S)};C.equalsNull=function(D){return null===D};C.applyLike=function(D,g,H){return a(D,g,H)};C.ensureArray=function(D){return w(D)};C.applyIn=function(D,g){return z(D,g)};C.currentDate=function(){const D=new Date;D.setHours(0,0,0,0);return D};C.makeSqlInterval=function(D,g,H){return t.SqlInterval.createFromValueAndQualifer(D,g,H)};C.convertInterval=function(D){return D instanceof t.SqlInterval?D.valueInMilliseconds():
D};C.currentTimestamp=function(){return new Date};C.compare=function(D,g,H){return J(D,g,H)};C.calculate=function(D,g,H){return R(D,g,H)};C.makeComparable=function(D){return h(D)};C.evaluateFunction=function(D,g){return t.evaluateFunction(D,g)};C.lookup=function(D,g){D=g[D];return void 0===D?null:D};C.between=function(D,g){return null==D||null==g[0]||null==g[1]?null:D>=g[0]&&D<=g[1]};C.notbetween=function(D,g){return null==D||null==g[0]||null==g[1]?null:D<g[0]||D>g[1]};C.ternaryNot=function(D){return u(D)};
C.ternaryAnd=function(D,g){return A(D,g)};C.ternaryOr=function(D,g){return e(D,g)};return C}(),L=function(){function C(g,H){this.fieldsIndex=H;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=B.WhereGrammar.parse(g);const {isStandardized:S,isAggregate:M,referencedFieldNames:ha}=this._extractExpressionInfo(H);this.referencedFieldNames=ha;this.isStandardized=S;this.isAggregate=M}C.create=function(g,H){return new C(g,H)};var D=C.prototype;D.testSet=function(g,H=K){const S=
{};for(const M of this.fieldNames)S[M]=g.map(ha=>H.getAttribute(ha,M));return!!this._evaluateNode(this.parseTree,{attributes:S},K)};D.calculateValue=function(g,H=K){g=this._evaluateNode(this.parseTree,g,H);return g instanceof t.SqlInterval?g.valueInMilliseconds()/864E5:g};D.calculateValueCompiled=function(g,H=K){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(g,this.parameters,H,this.datefields);if(ca("esri-csp-restrictions"))return this.calculateValue(g,H);this._compileMe();
return this.parseTree._compiledVersion(g,this.parameters,H,this.datefields)};D.testFeature=function(g,H=K){return!!this._evaluateNode(this.parseTree,g,H)};D.testFeatureCompiled=function(g,H=K){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(g,this.parameters,H,this.datefields);if(ca("esri-csp-restrictions"))return this.testFeature(g,H);this._compileMe();return!!this.parseTree._compiledVersion(g,this.parameters,H,this.datefields)};D.getFunctions=function(){const g=
new Set;this._visitAll(this.parseTree,H=>{"function"===H.type&&g.add(H.name.toLowerCase())});return Array.from(g)};D.getExpressions=function(){const g=new Map;this._visitAll(this.parseTree,H=>{if("function"===H.type){const S=H.name.toLowerCase();H=H.args.value[0];if("column-reference"===H.type){H=H.column;const M=`${S}-${H}`;g.has(M)||g.set(M,{aggregateType:S,field:H})}}});return[...g.values()]};D.getVariables=function(){const g=new Set;this._visitAll(this.parseTree,H=>{"parameter"===H.type&&g.add(H.value.toLowerCase())});
return Array.from(g)};D._compileMe=function(){const g="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",g)).bind(N)};D._extractExpressionInfo=function(g){const H=[],S=new Set;let M=!0,ha=!0;this._visitAll(this.parseTree,na=>{switch(na.type){case "column-reference":{const P=g.get(na.column);let ma,oa;P?ma=oa=P.name:(oa=na.column,ma=oa.toLowerCase());!P||"date"!==P.type&&
"esriFieldTypeDate"!==P.type||(this.datefields[P.name]=1);S.has(ma)||(S.add(ma),H.push(oa));na.column=oa;break}case "function":{const {name:P,args:ma}=na;na=ma.value.length;M&&(M=t.isStandardized(P,na));ha&&(ha=V.isAggregate(P,na))}}});return{referencedFieldNames:Array.from(H),isStandardized:M,isAggregate:ha}};D._visitAll=function(g,H){if(null!=g)switch(H(g),g.type){case "when-clause":this._visitAll(g.operand,H);this._visitAll(g.value,H);break;case "case-expression":for(const S of g.clauses)this._visitAll(S,
H);"simple"===g.format&&this._visitAll(g.operand,H);null!==g.else&&this._visitAll(g.else,H);break;case "expression-list":for(const S of g.value)this._visitAll(S,H);break;case "unary-expression":this._visitAll(g.expr,H);break;case "binary-expression":this._visitAll(g.left,H);this._visitAll(g.right,H);break;case "function":this._visitAll(g.args,H)}};D.evaluateNodeToJavaScript=function(g){switch(g.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(g.value)+", "+JSON.stringify(g.qualifier)+
","+JSON.stringify(g.op)+")";case "case-expression":var H="";if("simple"===g.format){var S="this.makeComparable("+this.evaluateNodeToJavaScript(g.operand)+")";H="( ";for(let M=0;M<g.clauses.length;M++)H+=" ("+S+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(g.clauses[M].operand)+")) ? ("+this.evaluateNodeToJavaScript(g.clauses[M].value)+") : "}else for(H="( ",S=0;S<g.clauses.length;S++)H+=" this.makeBool("+this.evaluateNodeToJavaScript(g.clauses[S].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(g.clauses[S].value)+") : ";H=null!==g.else?H+this.evaluateNodeToJavaScript(g.else):H+"null";return H+=" )";case "parameter":return"this.lookup("+JSON.stringify(g.value.toLowerCase())+",lookups)";case "expression-list":H="[";for(S of g.value)"["!==H&&(H+=","),H+=this.evaluateNodeToJavaScript(S);return H+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(g.expr)+")";case "binary-expression":switch(g.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")";case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+
this.evaluateNodeToJavaScript(g.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")"}throw Error("Not Supported Operator "+g.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(g.value);case "date":return"(new Date("+p(g.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(g.value).getTime().toString()+"))";case "current-time":return"date"===
g.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(g.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(g.name)+","+this.evaluateNodeToJavaScript(g.args)+")"}throw Error("Unsupported sql syntax "+g.type);};D._evaluateNode=function(g,H,S){switch(g.type){case "interval":return H=this._evaluateNode(g.value,H,S),t.SqlInterval.createFromValueAndQualifer(H,g.qualifier,g.op);case "case-expression":if("simple"===
g.format){var M=h(this._evaluateNode(g.operand,H,S));for(var ha=0;ha<g.clauses.length;ha++)if(M===h(this._evaluateNode(g.clauses[ha].operand,H,S)))return this._evaluateNode(g.clauses[ha].value,H,S)}else for(M=0;M<g.clauses.length;M++)if(!0===this._evaluateNode(g.clauses[M].operand,H,S))return this._evaluateNode(g.clauses[M].value,H,S);return null!==g.else?this._evaluateNode(g.else,H,S):null;case "parameter":return this.parameters[g.value.toLowerCase()];case "expression-list":M=[];for(ha of g.value)M.push(this._evaluateNode(ha,
H,S));return M;case "unary-expression":return u(this._evaluateNode(g.expr,H,S));case "binary-expression":switch(g.operator){case "AND":return A(this._evaluateNode(g.left,H,S),this._evaluateNode(g.right,H,S));case "OR":return e(this._evaluateNode(g.left,H,S),this._evaluateNode(g.right,H,S));case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(g.left,H,S);case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(g.left,
H,S);case "IN":return M=w(this._evaluateNode(g.right,H,S)),z(this._evaluateNode(g.left,H,S),M);case "NOT IN":return M=w(this._evaluateNode(g.right,H,S)),u(z(this._evaluateNode(g.left,H,S),M));case "BETWEEN":return M=this._evaluateNode(g.left,H,S),g=this._evaluateNode(g.right,H,S),null==M||null==g[0]||null==g[1]?null:M>=h(g[0])&&M<=h(g[1]);case "NOTBETWEEN":return M=this._evaluateNode(g.left,H,S),g=this._evaluateNode(g.right,H,S),null==M||null==g[0]||null==g[1]?null:M<h(g[0])||M>h(g[1]);case "LIKE":return a(this._evaluateNode(g.left,
H,S),this._evaluateNode(g.right,H,S),g.escape);case "NOT LIKE":return u(a(this._evaluateNode(g.left,H,S),this._evaluateNode(g.right,H,S),g.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return J(g.operator,this._evaluateNode(g.left,H,S),this._evaluateNode(g.right,H,S));case "-":case "+":case "*":case "/":return R(g.operator,this._evaluateNode(g.left,H,S),this._evaluateNode(g.right,H,S))}case "null":case "boolean":case "string":case "number":return g.value;
case "date":return p(g.value);case "timestamp":return q(g.value);case "current-time":return H=new Date,"date"===g.mode&&H.setHours(0,0,0,0),H;case "column-reference":return r(H,g.column,this.datefields,S);case "function":return H=this._evaluateNode(g.args,H,S),this.isAggregate?V.aggregateFunction(g.name,H):t.evaluateFunction(g.name,H)}throw Error("Unsupported sql syntax "+g.type);};d._createClass(C,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,g=>{"current-time"===g.type?this._hasDateFunctions=!0:"function"===g.type&&(this._hasDateFunctions=this._hasDateFunctions||ka.has(g.name.toLowerCase()))});return this._hasDateFunctions}}]);return C}();var Q;(function(C){C[C.Normal=0]="Normal";C[C.Escaped=1]="Escaped"})(Q||(Q={}));const K={getAttribute(C,D){return(C&&"object"===typeof C.attributes?C.attributes:C)[D]}};k.WhereClause=L;k.defaultAttributeAdapter=
K;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function d(t){let B=0;for(let E=0;E<t.length;E++)B+=t[E];return B/t.length}function ca(t){const B=d(t),E=t.length;let n=0;for(const q of t)n+=(q-B)**2;return 1<E?n/(E-1):0}const V={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.max.apply(Math,
t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:d(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{{t=t[0];let B=0;for(let E=0;E<t.length;E++)B+=t[E];t=B}}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(ca(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:ca(t[0])}};k.aggregateFunction=function(t,B){const E=V[t.toLowerCase()];if(null==E)throw Error("Function Not Recognised");
if(B.length<E.minParams||B.length>E.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return E.evaluate(B)};k.isAggregate=function(t,B){t=V[t.toLowerCase()];return null!=t&&B>=t.minParams&&B<=t.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,d){let ca=function(){function t(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}t._fixDefaults=function(B){if(null!==B.precision||null!==B.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=function(B){const E=new t;E.second=B/1E3;return E};t.createFromValueAndQualifer=function(B,E,n){let q=null;const p=new t;p.op="-"===n?"-":"+";if("interval-period"===E.type){t._fixDefaults(E);if("year"===E.period||"month"===E.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(B))p[E.period]=
parseFloat(B);else throw Error("Illegal Interval");}else{t._fixDefaults(E.start);t._fixDefaults(E.end);if("year"===E.start.period||"month"===E.start.period)throw Error("Year-Month Intervals not supported");if("year"===E.end.period||"month"===E.end.period)throw Error("Year-Month Intervals not supported");switch(E.start.period){case "day":switch(E.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(B))p[E.start.period]=parseFloat(B.split(" ")[0]),p[E.end.period]=parseFloat(B.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(B))p[E.start.period]=parseFloat(B.split(" ")[0]),B=B.split(" ")[1].split(":"),p.hour=parseFloat(B[0]),p.minute=parseFloat(B[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(B))p[E.start.period]=parseFloat(B.split(" ")[0]),B=B.split(" ")[1].split(":"),p.hour=parseFloat(B[0]),p.minute=parseFloat(B[1]),p.second=
parseFloat(B[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(E.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(B))p.hour=parseFloat(B.split(":")[0]),p.minute=parseFloat(B.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(B))B=B.split(":"),p.hour=parseFloat(B[0]),p.minute=parseFloat(B[1]),p.second=parseFloat(B[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(E.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(B))B=B.split(":"),p.minute=parseFloat(B[0]),p.second=parseFloat(B[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return p};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+
365/12*this.month*864E5+31536E6*this.year)};return t}();const V={extract:{minParams:2,maxParams:2,evaluate:([t,B])=>{if(null==B)return null;if(B instanceof Date)switch(t.toUpperCase()){case "SECOND":return B.getSeconds();case "MINUTE":return B.getMinutes();case "HOUR":return B.getHours();case "DAY":return B.getDate();case "MONTH":return B.getMonth()+1;case "YEAR":return B.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(2===t.length){const [B,
E]=t;return null==B||null==E?null:B.toString().substring(E-1)}if(3===t.length){const [B,E,n]=t;return null==B||null==E||null==n?null:0>=n?"":B.toString().substring(E-1,E+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,B])=>null==t||null==B?null:B.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var B=3===t.length,E=B?t[1]:" ";B=B?t[2]:t[1];if(null==E||null==B)return null;E=`(${d.escapeRegExpString(E)})`;switch(t[0]){case "BOTH":return B.replace(new RegExp(`^${E}*|${E}*$`,"g"),"");case "LEADING":return B.replace(new RegExp(`^${E}*`,
"g"),"");case "TRAILING":return B.replace(new RegExp(`${E}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:
0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const B=t[0];t=2===t.length?10**t[1]:1;return null==B?null:Math.round(B*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>"string"===
typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let B="";for(let E=0;E<t.length;E++){if(null==t[E])return null;B+=t[E].toString()}return B}},lower:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};k.SqlInterval=ca;k.evaluateFunction=function(t,B){const E=V[t.toLowerCase()];if(null==E)throw Error("Function Not Recognised");
if(B.length<E.minParams||B.length>E.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return E.evaluate(B)};k.isStandardized=function(t,B){t=V[t.toLowerCase()];return null!=t&&B>=t.minParams&&B<=t.maxParams};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,d){var ca={exports:{}};(function(t){(function(B,E){t.exports&&(t.exports=
E())})(d.commonjsGlobal,function(){function B(n,q,p,w){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,B.prototype);n.expected=q;n.found=p;n.location=w;n.name="SyntaxError";return n}function E(n,q,p){p=p||" ";if(n.length>q)return n;q-=n.length;p+=p.repeat(q);return n+p.slice(0,q)}(function(n,q){function p(){this.constructor=n}p.prototype=q.prototype;n.prototype=new p})(B,Error);B.prototype.format=function(n){var q="Error: "+this.message;if(this.location){var p=null,w;for(w=0;w<
n.length;w++)if(n[w].source===this.location.source){p=n[w].text.split(/\r\n|\n|\r/g);break}n=this.location.start;w=this.location.source+":"+n.line+":"+n.column;if(p){var u=this.location.end,A=E("",n.line.toString().length);p=p[n.line-1];u=n.line===u.line?u.column:p.length+1;q+="\n --\x3e "+w+"\n"+A+" |\n"+n.line+" | "+p+"\n"+A+" | "+E("",n.column-1)+E("",u-n.column,"^")}else q+="\n at "+w}return q};B.buildMessage=function(n,q){function p(z){return z.charCodeAt(0).toString(16).toUpperCase()}function w(z){return z.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+p(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+p(a)})}function u(z){return z.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+p(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(a){return"\\x"+p(a)})}function A(z){return e[z.type](z)}var e={literal:function(z){return'"'+w(z.text)+'"'},class:function(z){var a=z.parts.map(function(h){return Array.isArray(h)?u(h[0])+"-"+u(h[1]):u(h)});return"["+(z.inverted?"^":"")+a+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(z){return z.description}};return"Expected "+function(z){z=z.map(A);var a,h;z.sort();if(0<z.length){for(h=a=1;a<z.length;a++)z[a-1]!==z[a]&&(z[h]=z[a],h++);z.length=
h}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}(n)+" but "+(q?'"'+w(q)+'"':"end of input")+" found."};return{SyntaxError:B,parse:function(n,q){function p(v,F){return{type:"literal",text:v,ignoreCase:F}}function w(v,F,Z){return{type:"class",parts:v,inverted:F,ignoreCase:Z}}function u(v){var F=fc[v],Z;if(!F){for(Z=v-1;!fc[Z];)Z--;F=fc[Z];for(F={line:F.line,column:F.column};Z<v;)10===n.charCodeAt(Z)?(F.line++,F.column=
1):F.column++,Z++;fc[v]=F}return F}function A(v,F){var Z=u(v),ua=u(F);return{source:bb,start:{offset:v,line:Z.line,column:Z.column},end:{offset:F,line:ua.line,column:ua.column}}}function e(v){f<tb||(f>tb&&(tb=f,zc=[]),zc.push(v))}function z(){var v=f;ta();var F=h();F!==b?(ta(),v=F):(f=v,v=b);return v}function a(){var v=f;var F=h();if(F!==b){v=[];var Z=f;var ua=ta();var Ca=Ga();if(Ca!==b){var Na=ta();var Pa=h();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)v.push(Z),Z=f,ua=ta(),Ca=Ga(),
Ca!==b?(Na=ta(),Pa=h(),Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);Z={type:"expression-list"};F=[F];for(ua=0;ua<v.length;ua++)F.push(v[ua][3]);Z.value=F;v=Z}else f=v,v=b;return v}function h(){var v=f;var F=J();if(F!==b){v=[];var Z=f;var ua=ta();var Ca=W();if(Ca!==b){var Na=ta();var Pa=J();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)v.push(Z),Z=f,ua=ta(),Ca=W(),Ca!==b?(Na=ta(),Pa=J(),Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);v=Ya(F,v)}else f=v,v=b;return v}function J(){var v=
f;var F=R();if(F!==b){v=[];var Z=f;var ua=ta();var Ca=G();if(Ca!==b){var Na=ta();var Pa=R();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)v.push(Z),Z=f,ua=ta(),Ca=G(),Ca!==b?(Na=ta(),Pa=R(),Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);v=Ya(F,v)}else f=v,v=b;return v}function R(){var v=f;var F=l();if(F===b){F=f;if(33===n.charCodeAt(f)){var Z=qb;f++}else Z=b,0===va&&e(rd);if(Z!==b){var ua=f;va++;if(61===n.charCodeAt(f)){var Ca=Cb;f++}else Ca=b,0===va&&e(Pc);va--;Ca===b?ua=void 0:(f=
ua,ua=b);ua!==b?F=Z=[Z,ua]:(f=F,F=b)}else f=F,F=b}F!==b?(Z=ta(),ua=R(),ua!==b?v={type:"unary-expression",operator:"NOT",expr:ua}:(f=v,v=b)):(f=v,v=b);if(v===b){F=f;v=T();if(v!==b){ta();F=[];Z=f;ua=ta();Ca=r();if(Ca!==b){var Na=ta();var Pa=T();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;if(Z!==b)for(;Z!==b;)F.push(Z),Z=f,ua=ta(),Ca=r(),Ca!==b?(Na=ta(),Pa=T(),Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);else F=b;F!==b&&(F={type:"arithmetic",tail:F});F===b&&(F=f,Z=y(),Z!==b?(ta(),ua=Ha(),ua!==
b?(ta(),ua=a(),ua!==b?(ta(),Ca=Qa(),Ca!==b?F={op:Z,right:ua}:(f=F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b),F===b&&(F=f,Z=y(),Z!==b?(ta(),ua=Ha(),ua!==b?(ta(),ua=Qa(),ua!==b?F={op:Z,right:{type:"expression-list",value:[]}}:(f=F,F=b)):(f=F,F=b)):(f=F,F=b),F===b&&(F=f,Z=y(),Z!==b?(ta(),ua=D(),ua!==b?F={op:Z,right:ua}:(f=F,F=b)):(f=F,F=b))),F===b&&(F=f,Ca=l(),Ca!==b?(ta(),Z=Y(),Z!==b?(ta(),ua=T(),ua!==b?(ta(),Na=G(),Na!==b?(ta(),Ca=T(),Ca!==b?F={op:"NOT"+Z,right:{type:"expression-list",value:[ua,Ca]}}:(f=
F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b),F===b&&(F=f,Ca=Y(),Ca!==b?(ta(),Z=T(),Z!==b?(ta(),ua=G(),ua!==b?(ta(),Na=T(),Na!==b?F={op:Ca,right:{type:"expression-list",value:[Z,Na]}}:(f=F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b)),F===b&&(F=f,Z=m(),Z!==b?(ta(),ua=l(),ua!==b?(ta(),ua=T(),ua!==b?F={op:Z+"NOT",right:ua}:(f=F,F=b)):(f=F,F=b)):(f=F,F=b),F===b&&(F=f,Z=m(),Z!==b?(ta(),ua=T(),ua!==b?F={op:Z,right:ua}:(f=F,F=b)):(f=F,F=b)),F===b&&(F=f,Z=x(),Z!==b?(ta(),ua=na(),ua!==b?(ta(),Ca=f,n.substr(f,
6).toLowerCase()===ya?(Na=n.substr(f,6),f+=6):(Na=b,0===va&&e(sd)),Na!==b?(Na=f,va++,Pa=K(),va--,Pa===b?Na=void 0:(f=Na,Na=b),Na!==b?Ca="ESCAPE":(f=Ca,Ca=b)):(f=Ca,Ca=b),Ca!==b?(ta(),Ca=P(),Ca!==b?F={op:Z,right:ua,escape:Ca.value}:(f=F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b),F===b&&(F=f,Z=x(),Z!==b?(ta(),ua=na(),ua!==b?F={op:Z,right:ua,escape:""}:(f=F,F=b)):(f=F,F=b))))));F===b&&(F=null);""==F||void 0==F||null==F?F=v:(Z=null,F=Z="arithmetic"==F.type?Ya(v,F.tail):ab(F.op,v,F.right,F.escape))}else f=
F,F=b;v=F}return v}function r(){if(n.substr(f,2)===Tb){var v=Tb;f+=2}else v=b,0===va&&e(td);v===b&&(62===n.charCodeAt(f)?(v=Fb,f++):(v=b,0===va&&e(ud)),v===b&&(n.substr(f,2)===la?(v=la,f+=2):(v=b,0===va&&e(vd)),v===b&&(n.substr(f,2)===Vb?(v=Vb,f+=2):(v=b,0===va&&e(wd)),v===b&&(60===n.charCodeAt(f)?(v=Db,f++):(v=b,0===va&&e(xd)),v===b&&(61===n.charCodeAt(f)?(v=Cb,f++):(v=b,0===va&&e(Pc)),v===b&&(n.substr(f,2)===gb?(v=gb,f+=2):(v=b,0===va&&e(yd))))))));return v}function x(){var v=v=f;var F=l();if(F!==
b){var Z=ta();var ua=fa();ua!==b?v=F=[F,Z,ua]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=fa());return v}function y(){var v=v=f;var F=l();if(F!==b){var Z=ta();var ua=c();ua!==b?v=F=[F,Z,ua]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=c());return v}function T(){var v=f;var F=X();if(F!==b){v=[];var Z=f;var ua=ta();var Ca=ba();if(Ca!==b){var Na=ta();var Pa=X();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)v.push(Z),Z=f,ua=ta(),Ca=ba(),Ca!==b?(Na=ta(),Pa=X(),
Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);v=Ya(F,v)}else f=v,v=b;return v}function ba(){if(43===n.charCodeAt(f)){var v=rb;f++}else v=b,0===va&&e(Ac);v===b&&(45===n.charCodeAt(f)?(v=Gb,f++):(v=b,0===va&&e(Bc)));return v}function X(){var v=f;var F=N();if(F!==b){v=[];var Z=f;var ua=ta();var Ca=ka();if(Ca!==b){var Na=ta();var Pa=N();Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)v.push(Z),Z=f,ua=ta(),Ca=ka(),Ca!==b?(Na=ta(),Pa=N(),Pa!==b?Z=ua=[ua,Ca,Na,Pa]:(f=Z,Z=b)):(f=Z,Z=b);v=Ya(F,
v)}else f=v,v=b;return v}function ka(){if(42===n.charCodeAt(f)){var v=Ub;f++}else v=b,0===va&&e(zd);v===b&&(47===n.charCodeAt(f)?(v=yc,f++):(v=b,0===va&&e(Ad)));return v}function N(){var v=P();if(v===b){var F=f;var Z=f;var ua=wa();if(ua!==b){var Ca=Ja();if(Ca!==b){var Na=Da();Na!==b?Z=parseFloat(ua+Ca+Na):(f=Z,Z=b)}else f=Z,Z=b}else f=Z,Z=b;Z===b&&(Z=f,ua=wa(),ua!==b?(Ca=Ja(),Ca!==b?Z=parseFloat(ua+Ca):(f=Z,Z=b)):(f=Z,Z=b),Z===b&&(Z=f,ua=wa(),ua!==b?(Ca=Da(),Ca!==b?Z=parseFloat(ua+Ca):(f=Z,Z=b)):
(f=Z,Z=b),Z===b&&(Z=f,ua=wa(),ua!==b&&(ua=parseFloat(ua)),Z=ua)));var Pa=Z;if(Pa!==b){var gc=f;va++;var Bd=Q();va--;Bd===b?gc=void 0:(f=gc,gc=b);gc!==b?F={type:"number",value:Pa}:(f=F,F=b)}else f=F,F=b;v=F;if(v===b){var Wb=f;var Ib=f;if(n.substr(f,4).toLowerCase()===Hb){var hc=n.substr(f,4);f+=4}else hc=b,0===va&&e(Cd);if(hc!==b){var Xb=f;va++;var Dd=K();va--;Dd===b?Xb=void 0:(f=Xb,Xb=b);Xb!==b?Ib=hc=[hc,Xb]:(f=Ib,Ib=b)}else f=Ib,Ib=b;var Eb=Ib;Eb!==b&&(Eb={type:"boolean",value:!0});Wb=Eb;if(Wb===
b){Wb=f;var Jb=f;if(n.substr(f,5).toLowerCase()===U){var ic=n.substr(f,5);f+=5}else ic=b,0===va&&e(Ed);if(ic!==b){var Yb=f;va++;var Fd=K();va--;Fd===b?Yb=void 0:(f=Yb,Yb=b);Yb!==b?Jb=ic=[ic,Yb]:(f=Jb,Jb=b)}else f=Jb,Jb=b;Eb=Jb;Eb!==b&&(Eb={type:"boolean",value:!1});Wb=Eb}v=Wb;if(v===b){var Kb=f;if(n.substr(f,4).toLowerCase()===Oa){var jc=n.substr(f,4);f+=4}else jc=b,0===va&&e(Gd);if(jc!==b){var Zb=f;va++;var Hd=K();va--;Hd===b?Zb=void 0:(f=Zb,Zb=b);Zb!==b?Kb=jc=[jc,Zb]:(f=Kb,Kb=b)}else f=Kb,Kb=b;
var Cc=Kb;Cc!==b&&(Cc={type:"null",value:null});v=Cc;if(v===b){var Lb=f;var Mb=f;if(n.substr(f,4).toLowerCase()===Id){var Qc=n.substr(f,4);f+=4}else Qc=b,0===va&&e(Jd);if(Qc!==b){var kc=f;va++;var Kd=K();va--;Kd===b?kc=void 0:(f=kc,kc=b);kc!==b?Mb="DATE":(f=Mb,Mb=b)}else f=Mb,Mb=b;if(Mb!==b){ta();var Rc=na();Rc!==b?Lb={type:"date",value:Rc.value}:(f=Lb,Lb=b)}else f=Lb,Lb=b;v=Lb;if(v===b){var Nb=f;var Ob=f;if(n.substr(f,9).toLowerCase()===Ld){var Sc=n.substr(f,9);f+=9}else Sc=b,0===va&&e(Md);if(Sc!==
b){var lc=f;va++;var Nd=K();va--;Nd===b?lc=void 0:(f=lc,lc=b);lc!==b?Ob="TIMESTAMP":(f=Ob,Ob=b)}else f=Ob,Ob=b;if(Ob!==b){ta();var Tc=na();Tc!==b?Nb={type:"timestamp",value:Tc.value}:(f=Nb,Nb=b)}else f=Nb,Nb=b;v=Nb;if(v===b){var db=f;var Dc=I();if(Dc!==b){ta();if(45===n.charCodeAt(f)){var xb=Gb;f++}else xb=b,0===va&&e(Bc);xb===b&&(43===n.charCodeAt(f)?(xb=rb,f++):(xb=b,0===va&&e(Ac)));if(xb!==b){ta();var $b=na();if($b!==b){ta();var Uc=H();Uc!==b?db={type:"interval",value:$b,qualifier:Uc,op:xb}:(f=
db,db=b)}else f=db,db=b}else f=db,db=b}else f=db,db=b;db===b&&(db=f,Dc=I(),Dc!==b?(ta(),xb=na(),xb!==b?(ta(),$b=H(),$b!==b?db={type:"interval",value:xb,qualifier:$b,op:""}:(f=db,db=b)):(f=db,db=b)):(f=db,db=b));v=db}}}}}}var Wa=v;if(Wa===b){var ib=f;var Pb=f;if(n.substr(f,7).toLowerCase()===nb){var Vc=n.substr(f,7);f+=7}else Vc=b,0===va&&e(Od);if(Vc!==b){var mc=f;va++;var Pd=K();va--;Pd===b?mc=void 0:(f=mc,mc=b);mc!==b?Pb="EXTRACT":(f=Pb,Pb=b)}else f=Pb,Pb=b;if(Pb!==b){ta();var Qd=Ha();if(Qd!==b){ta();
var ob=O();ob===b&&(ob=da(),ob===b&&(ob=ra(),ob===b&&(ob=sa(),ob===b&&(ob=xa(),ob===b&&(ob=Aa())))));var Wc=ob;if(Wc!==b){ta();var Rd=ja();if(Rd!==b){ta();var Xc=h();if(Xc!==b){ta();var Sd=Qa();Sd!==b?ib={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Wc},Xc]}}:(f=ib,ib=b)}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b;Wa=ib;if(Wa===b){var jb=f;var Qb=f;if(n.substr(f,9).toLowerCase()===cb){var Yc=n.substr(f,9);f+=9}else Yc=b,0===
va&&e(Td);if(Yc!==b){var nc=f;va++;var Ud=K();va--;Ud===b?nc=void 0:(f=nc,nc=b);nc!==b?Qb="SUBSTRING":(f=Qb,Qb=b)}else f=Qb,Qb=b;if(Qb!==b){ta();var Vd=Ha();if(Vd!==b){ta();var Ec=h();if(Ec!==b){ta();var Wd=ja();if(Wd!==b){ta();var Fc=h();if(Fc!==b){ta();var yb=f;var Rb=f;if(n.substr(f,3).toLowerCase()===Ta){var Zc=n.substr(f,3);f+=3}else Zc=b,0===va&&e(Xd);if(Zc!==b){var oc=f;va++;var Yd=K();va--;Yd===b?oc=void 0:(f=oc,oc=b);oc!==b?Rb="FOR":(f=Rb,Rb=b)}else f=Rb,Rb=b;var ac=Rb;if(ac!==b){var Zd=
ta();var $c=h();if($c!==b){var $d=ta();yb=ac=[ac,Zd,$c,$d]}else f=yb,yb=b}else f=yb,yb=b;yb===b&&(yb=null);ac=Qa();ac!==b?jb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(f=jb,jb=b)}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b;Wa=jb;if(Wa===b){var Xa=f;var Gc=ia();if(Gc!==b){ta();var Hc=Ha();if(Hc!==b){ta();var zb=g();zb===b&&(zb=null);ta();var bc=h();if(bc!==b){ta();var Ic=ja();if(Ic!==b){ta();var ad=h();if(ad!==b){ta();
var ae=Qa();ae!==b?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc,ad]}}:(f=Xa,Xa=b)}else f=Xa,Xa=b}else f=Xa,Xa=b}else f=Xa,Xa=b}else f=Xa,Xa=b}else f=Xa,Xa=b;Xa===b&&(Xa=f,Gc=ia(),Gc!==b?(ta(),Hc=Ha(),Hc!==b?(ta(),zb=g(),zb===b&&(zb=null),ta(),bc=h(),bc!==b?(ta(),Ic=Qa(),Ic!==b?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},bc]}}:(f=Xa,Xa=b)):(f=Xa,Xa=b)):(f=Xa,Xa=b)):(f=
Xa,Xa=b));Wa=Xa;if(Wa===b){var kb=f;var Sb=f;if(n.substr(f,8).toLowerCase()===be){var bd=n.substr(f,8);f+=8}else bd=b,0===va&&e(ce);if(bd!==b){var pc=f;va++;var de=K();va--;de===b?pc=void 0:(f=pc,pc=b);pc!==b?Sb="POSITION":(f=Sb,Sb=b)}else f=Sb,Sb=b;if(Sb!==b){ta();var ee=Ha();if(ee!==b){ta();var cd=h();if(cd!==b){ta();var fe=c();if(fe!==b){ta();var dd=h();if(dd!==b){ta();var ge=Qa();ge!==b?kb={type:"function",name:"position",args:{type:"expression-list",value:[cd,dd]}}:(f=kb,kb=b)}else f=kb,kb=b}else f=
kb,kb=b}else f=kb,kb=b}else f=kb,kb=b}else f=kb,kb=b;Wa=kb;if(Wa===b){var Bb=f;var qc;var pb=f;pb=qc=L();if(pb===b)if(pb=f,96===n.charCodeAt(f)?(qc=ed,f++):(qc=b,0===va&&e(fd)),qc!==b){var rc=[];if(gd.test(n.charAt(f))){var Ab=n.charAt(f);f++}else Ab=b,0===va&&e(hd);if(Ab!==b)for(;Ab!==b;)rc.push(Ab),gd.test(n.charAt(f))?(Ab=n.charAt(f),f++):(Ab=b,0===va&&e(hd));else rc=b;rc!==b?(96===n.charCodeAt(f)?(Ab=ed,f++):(Ab=b,0===va&&e(fd)),Ab!==b?pb=rc.join(""):(f=pb,pb=b)):(f=pb,pb=b)}else f=pb,pb=b;var id=
pb;if(id!==b){ta();var he=Ha();if(he!==b){ta();var sc=a();sc===b&&(sc=null);ta();var ie=Qa();ie!==b?Bb={type:"function",name:id,args:sc?sc:{type:"expression-list",value:[]}}:(f=Bb,Bb=b)}else f=Bb,Bb=b}else f=Bb,Bb=b;Wa=Bb;if(Wa===b){var ub;var eb=f;var Jc=Ba();if(Jc!==b){ta();var cc=h();if(cc!==b){ta();var dc=[];for(ub=oa();ub!==b;)dc.push(ub),ub=oa();ub=ta();var tc=Ka();tc!==b?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:null}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;if(eb===
b)if(eb=f,Jc=Ba(),Jc!==b)if(ta(),cc=h(),cc!==b){ta();dc=[];for(ub=oa();ub!==b;)dc.push(ub),ub=oa();ub=ta();tc=qa();if(tc!==b){ta();var je=Ka();je!==b?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:tc.value}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;else f=eb,eb=b;var Kc=eb;if(Kc===b){var vb;var hb=f;var Lc=Ba();if(Lc!==b){ta();var ec=[];for(vb=ma();vb!==b;)ec.push(vb),vb=ma();vb=ta();var uc=Ka();uc!==b?hb={type:"case-expression",format:"searched",clauses:ec,else:null}:(f=hb,
hb=b)}else f=hb,hb=b;if(hb===b)if(hb=f,Lc=Ba(),Lc!==b){ta();ec=[];for(vb=ma();vb!==b;)ec.push(vb),vb=ma();vb=ta();uc=qa();if(uc!==b){ta();var ke=Ka();ke!==b?hb={type:"case-expression",format:"searched",clauses:ec,else:uc.value}:(f=hb,hb=b)}else f=hb,hb=b}else f=hb,hb=b;Kc=hb}Wa=Kc;if(Wa===b){var vc;var wc=f;var jd=Q();if(jd!==b){var kd=[];for(vc=C();vc!==b;)kd.push(vc),vc=C();wc=jd+kd.join("")}else f=wc,wc=b;var xc=wc;if(xc!==b){var Mc=xc;xc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:
/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Wa=xc;if(Wa===b&&(Wa=D(),Wa===b)){Wa=f;var le=Ha();if(le!==b){ta();var Nc=h();if(Nc!==b){ta();var me=Qa();me!==b?(Nc.paren=!0,Wa=Nc):(f=Wa,Wa=b)}else f=Wa,Wa=b}else f=Wa,Wa=b}}}}}}}}return Wa}function L(){var v;var F=f;var Z=Q();if(Z!==b){F=[];for(v=K();v!==b;)F.push(v),v=K();F=Z+F.join("")}else f=F,F=b;return F}function Q(){if(ne.test(n.charAt(f))){var v=n.charAt(f);f++}else v=b,0===
va&&e(oe);return v}function K(){if(pe.test(n.charAt(f))){var v=n.charAt(f);f++}else v=b,0===va&&e(qe);return v}function C(){if(re.test(n.charAt(f))){var v=n.charAt(f);f++}else v=b,0===va&&e(se);return v}function D(){var v=f;if(64===n.charCodeAt(f)){var F=lb;f++}else F=b,0===va&&e(te);if(F!==b){var Z=L();Z!==b?v=F=[F,Z]:(f=v,v=b)}else f=v,v=b;v!==b&&(v={type:"parameter",value:v[1]});return v}function g(){var v=f;if(n.substr(f,7).toLowerCase()===ue){var F=n.substr(f,7);f+=7}else F=b,0===va&&e(ve);if(F!==
b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="LEADING":(f=v,v=b)}else f=v,v=b;v===b&&(v=f,n.substr(f,8).toLowerCase()===we?(F=n.substr(f,8),f+=8):(F=b,0===va&&e(xe)),F!==b?(F=f,va++,Z=K(),va--,Z===b?F=void 0:(f=F,F=b),F!==b?v="TRAILING":(f=v,v=b)):(f=v,v=b),v===b&&(v=f,n.substr(f,4).toLowerCase()===ye?(F=n.substr(f,4),f+=4):(F=b,0===va&&e(ze)),F!==b?(F=f,va++,Z=K(),va--,Z===b?F=void 0:(f=F,F=b),F!==b?v="BOTH":(f=v,v=b)):(f=v,v=b)));return v}function H(){var v=f;var F=f;var Z=S();if(Z!==
b){ta();var ua=Ha();if(ua!==b)if(ta(),ua=ha(),ua!==b){ta();var Ca=Qa();Ca!==b?F={type:"interval-period",period:Z.value,precision:ua,secondary:null}:(f=F,F=b)}else f=F,F=b;else f=F,F=b}else f=F,F=b;F===b&&(F=f,Z=S(),Z!==b&&(Z=ld(Z)),F=Z);if(F!==b)if(ta(),Z=f,n.substr(f,2).toLowerCase()===Ae?(ua=n.substr(f,2),f+=2):(ua=b,0===va&&e(Be)),ua!==b?(ua=f,va++,Ca=K(),va--,Ca===b?ua=void 0:(f=ua,ua=b),ua!==b?Z="TO":(f=Z,Z=b)):(f=Z,Z=b),Z!==b){ta();Z=f;ua=S();ua!==b&&(ua={type:"interval-period",period:ua.value,
precision:null,secondary:null});Z=ua;if(Z===b){Z=f;ua=Aa();if(ua!==b)if(ta(),ua=Ha(),ua!==b)if(ta(),ua=ha(),ua!==b)if(ta(),Ca=Ga(),Ca!==b)if(ta(),Ca=M(),Ca!==b){ta();var Na=Qa();Na!==b?Z=md(ua,Ca):(f=Z,Z=b)}else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;Z===b&&(Z=f,ua=Aa(),ua!==b?(ta(),ua=Ha(),ua!==b?(ta(),ua=ha(),ua!==b?(ta(),Ca=Qa(),Ca!==b?Z={type:"interval-period",period:"second",precision:ua,secondary:null}:(f=Z,Z=b)):(f=Z,Z=b)):(f=Z,Z=b)):(f=Z,Z=b),Z===b&&(Z=f,ua=Aa(),ua!==
b&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),Z=ua))}Z!==b?v={type:"interval-qualifier",start:F,end:Z}:(f=v,v=b)}else f=v,v=b;else f=v,v=b;v===b&&(v=f,Z=S(),Z!==b?(ta(),F=Ha(),F!==b?(ta(),F=M(),F!==b?(ta(),ua=Qa(),ua!==b?v={type:"interval-period",period:Z.value,precision:F,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Z=S(),Z!==b&&(Z=ld(Z)),v=Z,v===b&&(v=f,Z=Aa(),Z!==b?(ta(),F=Ha(),F!==b?(ta(),F=ha(),F!==b?(ta(),ua=Ga(),ua!==b?(ta(),Z=M(),
Z!==b?(ta(),ua=Qa(),ua!==b?v=md(F,Z):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Z=Aa(),Z!==b?(ta(),F=Ha(),F!==b?(ta(),F=M(),F!==b?(ta(),ua=Qa(),ua!==b?v={type:"interval-period",period:"second",precision:F,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Z=Aa(),Z!==b&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),v=Z)))));return v}function S(){var v=f;v=ra();v!==b&&(v={type:"string",value:"day"});v===b&&(v=f,v=sa(),
v!==b&&(v={type:"string",value:"hour"}),v===b&&(v=f,v=xa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=f,v=da(),v!==b&&(v={type:"string",value:"month"}),v===b&&(v=f,v=O(),v!==b&&(v={type:"string",value:"year"})))));return v}function M(){var v=Ma();v!==b&&(v=parseFloat(v));return v}function ha(){var v=Ma();v!==b&&(v=parseFloat(v));return v}function na(){var v=P();v===b&&(v=D());return v}function P(){var v=f;if(39===n.charCodeAt(f)){var F=wb;f++}else F=b,0===va&&e(nd);F===b&&(n.substr(f,2)===
Sa?(F=Sa,f+=2):(F=b,0===va&&e(Ce)));if(F!==b){F=[];var Z=f;n.substr(f,2)===fb?(Z=fb,f+=2):(Z=b,0===va&&e(od));Z!==b&&(Z="'");Z===b&&(pd.test(n.charAt(f))?(Z=n.charAt(f),f++):(Z=b,0===va&&e(qd)));for(;Z!==b;)F.push(Z),Z=f,n.substr(f,2)===fb?(Z=fb,f+=2):(Z=b,0===va&&e(od)),Z!==b&&(Z="'"),Z===b&&(pd.test(n.charAt(f))?(Z=n.charAt(f),f++):(Z=b,0===va&&e(qd)));39===n.charCodeAt(f)?(Z=wb,f++):(Z=b,0===va&&e(nd));Z!==b?v={type:"string",value:F.join("")}:(f=v,v=b)}else f=v,v=b;return v}function ma(){var v=
f;if(Ia()!==b){ta();var F=h();if(F!==b){ta();var Z=Fa();Z!==b?(ta(),Z=h(),Z!==b?v={type:"when-clause",operand:F,value:Z}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function oa(){var v=f;if(Ia()!==b){ta();var F=h();if(F!==b){ta();var Z=Fa();Z!==b?(ta(),Z=h(),Z!==b?v={type:"when-clause",operand:F,value:Z}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function qa(){var v=f;var F=f;if(n.substr(f,4).toLowerCase()===De){var Z=n.substr(f,4);f+=4}else Z=b,0===va&&e(Ee);if(Z!==b){Z=
f;va++;var ua=K();va--;ua===b?Z=void 0:(f=Z,Z=b);Z!==b?F="ELSE":(f=F,F=b)}else f=F,F=b;F!==b?(ta(),F=h(),F!==b?v={type:"else-clause",value:F}:(f=v,v=b)):(f=v,v=b);return v}function wa(){var v=Ma();if(v===b){v=f;if(45===n.charCodeAt(f)){var F=Gb;f++}else F=b,0===va&&e(Bc);F===b&&(43===n.charCodeAt(f)?(F=rb,f++):(F=b,0===va&&e(Ac)));if(F!==b){var Z=Ma();Z!==b?v=F[0]+Z:(f=v,v=b)}else f=v,v=b}return v}function Ja(){var v=f;if(46===n.charCodeAt(f)){var F=sb;f++}else F=b,0===va&&e(Fe);F!==b?(v=Ma(),v===
b&&(v=null),v="."+(null!=v?v:"")):(f=v,v=b);return v}function Da(){var v;var F=v=f;if(Ge.test(n.charAt(f))){var Z=n.charAt(f);f++}else Z=b,0===va&&e(He);Z!==b?(Ie.test(n.charAt(f))?(F=n.charAt(f),f++):(F=b,0===va&&e(Je)),F===b&&(F=null),F="e"+(null===F?"":F)):(f=F,F=b);F!==b?(Z=Ma(),Z!==b?v=F+Z:(f=v,v=b)):(f=v,v=b);return v}function Ma(){var v=[];var F=Za();if(F!==b)for(;F!==b;)v.push(F),F=Za();else v=b;v!==b&&(v=v.join(""));return v}function Za(){if(Ke.test(n.charAt(f))){var v=n.charAt(f);f++}else v=
b,0===va&&e(Le);return v}function c(){var v=f;if(n.substr(f,2).toLowerCase()===ea){var F=n.substr(f,2);f+=2}else F=b,0===va&&e(Me);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="IN":(f=v,v=b)}else f=v,v=b;return v}function m(){var v=f;if(n.substr(f,2).toLowerCase()===aa){var F=n.substr(f,2);f+=2}else F=b,0===va&&e(Ne);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="IS":(f=v,v=b)}else f=v,v=b;return v}function fa(){var v=f;if(n.substr(f,4).toLowerCase()===pa){var F=
n.substr(f,4);f+=4}else F=b,0===va&&e(Oe);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="LIKE":(f=v,v=b)}else f=v,v=b;return v}function l(){var v=f;if(n.substr(f,3).toLowerCase()===za){var F=n.substr(f,3);f+=3}else F=b,0===va&&e(Pe);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="NOT":(f=v,v=b)}else f=v,v=b;return v}function G(){var v=f;if(n.substr(f,3).toLowerCase()===Ea){var F=n.substr(f,3);f+=3}else F=b,0===va&&e(Qe);if(F!==b){F=f;va++;var Z=K();va--;Z===
b?F=void 0:(f=F,F=b);F!==b?v="AND":(f=v,v=b)}else f=v,v=b;return v}function W(){var v=f;if(n.substr(f,2).toLowerCase()===La){var F=n.substr(f,2);f+=2}else F=b,0===va&&e(Re);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="OR":(f=v,v=b)}else f=v,v=b;return v}function Y(){var v=f;if(n.substr(f,7).toLowerCase()===Va){var F=n.substr(f,7);f+=7}else F=b,0===va&&e(Se);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="BETWEEN":(f=v,v=b)}else f=v,v=b;return v}function ja(){var v=
f;if(n.substr(f,4).toLowerCase()===Ua){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(Te);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="FROM":(f=v,v=b)}else f=v,v=b;return v}function ia(){var v=f;if(n.substr(f,4).toLowerCase()===Ue){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(Ve);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="TRIM":(f=v,v=b)}else f=v,v=b;return v}function I(){var v=f;if(n.substr(f,8).toLowerCase()===We){var F=n.substr(f,8);f+=8}else F=b,0===
va&&e(Xe);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="INTERVAL":(f=v,v=b)}else f=v,v=b;return v}function O(){var v=f;if(n.substr(f,4).toLowerCase()===Ye){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(Ze);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="YEAR":(f=v,v=b)}else f=v,v=b;return v}function da(){var v=f;if(n.substr(f,5).toLowerCase()===$e){var F=n.substr(f,5);f+=5}else F=b,0===va&&e(af);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==
b?v="MONTH":(f=v,v=b)}else f=v,v=b;return v}function ra(){var v=f;if(n.substr(f,3).toLowerCase()===bf){var F=n.substr(f,3);f+=3}else F=b,0===va&&e(cf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="DAY":(f=v,v=b)}else f=v,v=b;return v}function sa(){var v=f;if(n.substr(f,4).toLowerCase()===df){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(ef);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="HOUR":(f=v,v=b)}else f=v,v=b;return v}function xa(){var v=f;if(n.substr(f,
6).toLowerCase()===ff){var F=n.substr(f,6);f+=6}else F=b,0===va&&e(gf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="MINUTE":(f=v,v=b)}else f=v,v=b;return v}function Aa(){var v=f;if(n.substr(f,6).toLowerCase()===hf){var F=n.substr(f,6);f+=6}else F=b,0===va&&e(jf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="SECOND":(f=v,v=b)}else f=v,v=b;return v}function Ba(){var v=f;if(n.substr(f,4).toLowerCase()===kf){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(lf);
if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="CASE":(f=v,v=b)}else f=v,v=b;return v}function Ka(){var v=f;if(n.substr(f,3).toLowerCase()===mf){var F=n.substr(f,3);f+=3}else F=b,0===va&&e(nf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="END":(f=v,v=b)}else f=v,v=b;return v}function Ia(){var v=f;if(n.substr(f,4).toLowerCase()===of){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(pf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="WHEN":(f=
v,v=b)}else f=v,v=b;return v}function Fa(){var v=f;if(n.substr(f,4).toLowerCase()===qf){var F=n.substr(f,4);f+=4}else F=b,0===va&&e(rf);if(F!==b){F=f;va++;var Z=K();va--;Z===b?F=void 0:(f=F,F=b);F!==b?v="THEN":(f=v,v=b)}else f=v,v=b;return v}function Ga(){if(44===n.charCodeAt(f)){var v=sf;f++}else v=b,0===va&&e(tf);return v}function Ha(){if(40===n.charCodeAt(f)){var v=uf;f++}else v=b,0===va&&e(vf);return v}function Qa(){if(41===n.charCodeAt(f)){var v=wf;f++}else v=b,0===va&&e(xf);return v}function ta(){var v;
var F=[];for(v=$a();v!==b;)F.push(v),v=$a();return F}function $a(){if(yf.test(n.charAt(f))){var v=n.charAt(f);f++}else v=b,0===va&&e(zf);return v}function ab(v,F,Z,ua){v={type:"binary-expression",operator:v,left:F,right:Z};void 0!==ua&&(v.escape=ua);return v}function Ya(v,F){for(var Z=0;Z<F.length;Z++)v=ab(F[Z][1],v,F[Z][3]);return v}q=void 0!==q?q:{};var b={},bb=q.grammarSource,Ra={start:z},mb=z,qb="!",Cb="\x3d",Tb="\x3e\x3d",Fb="\x3e",la="\x3c\x3d",Vb="\x3c\x3e",Db="\x3c",gb="!\x3d",rb="+",Gb="-",
Ub="*",yc="/",lb="@",wb="'",Sa="N'",fb="''",sb=".",Oa="null",Hb="true",U="false",ea="in",aa="is",pa="like",ya="escape",za="not",Ea="and",La="or",Va="between",Ua="from",Ta="for",cb="substring",nb="extract",Ue="trim",be="position",Ld="timestamp",Id="date",ue="leading",we="trailing",ye="both",Ae="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",De="else",sf=",",uf="(",wf=")",ed="`",ne=/^[A-Za-z_\x80-\uFFFF]/,pe=/^[A-Za-z0-9_]/,re=
/^[A-Za-z0-9_.\x80-\uFFFF]/,pd=/^[^']/,Ke=/^[0-9]/,Ge=/^[eE]/,Ie=/^[+\-]/,yf=/^[ \t\n\r]/,gd=/^[^`]/,rd=p("!",!1),Pc=p("\x3d",!1),td=p("\x3e\x3d",!1),ud=p("\x3e",!1),vd=p("\x3c\x3d",!1),wd=p("\x3c\x3e",!1),xd=p("\x3c",!1),yd=p("!\x3d",!1),Ac=p("+",!1),Bc=p("-",!1),zd=p("*",!1),Ad=p("/",!1),oe=w([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),qe=w([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),se=w([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),te=p("@",!1),nd=p("'",!1),Ce=p("N'",
!1),od=p("''",!1),qd=w(["'"],!0,!1),Fe=p(".",!1),Le=w([["0","9"]],!1,!1),He=w(["e","E"],!1,!1),Je=w(["+","-"],!1,!1),Gd=p("NULL",!0),Cd=p("TRUE",!0),Ed=p("FALSE",!0),Me=p("IN",!0),Ne=p("IS",!0),Oe=p("LIKE",!0),sd=p("ESCAPE",!0),Pe=p("NOT",!0),Qe=p("AND",!0),Re=p("OR",!0),Se=p("BETWEEN",!0),Te=p("FROM",!0),Xd=p("FOR",!0),Td=p("SUBSTRING",!0),Od=p("EXTRACT",!0),Ve=p("TRIM",!0),ce=p("POSITION",!0),Md=p("TIMESTAMP",!0),Jd=p("DATE",!0),ve=p("LEADING",!0),xe=p("TRAILING",!0),ze=p("BOTH",!0),Be=p("TO",!0),
Xe=p("INTERVAL",!0),Ze=p("YEAR",!0),af=p("MONTH",!0),cf=p("DAY",!0),ef=p("HOUR",!0),gf=p("MINUTE",!0),jf=p("SECOND",!0),lf=p("CASE",!0),nf=p("END",!0),pf=p("WHEN",!0),rf=p("THEN",!0),Ee=p("ELSE",!0),tf=p(",",!1),vf=p("(",!1),xf=p(")",!1),zf=w([" ","\t","\n","\r"],!1,!1),fd=p("`",!1),hd=w(["`"],!0,!1),ld=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},md=function(v,F){return{type:"interval-period",period:"second",precision:v,secondary:F}},f=0,fc=[{line:1,column:1}],
tb=0,zc=[],va=0;if("startRule"in q){if(!(q.startRule in Ra))throw Error("Can't start parsing from rule \""+q.startRule+'".');mb=Ra[q.startRule]}var Oc=mb();if(Oc!==b&&f===n.length)return Oc;Oc!==b&&f<n.length&&e({type:"end"});throw function(v,F,Z){return new B(B.buildMessage(v,F),v,F,Z)}(zc,tb<n.length?n.charAt(tb):null,tb<n.length?A(tb,tb+1):A(tb,tb));}}})})(ca);let V=function(){function t(){}t.parse=function(B){return ca.exports.parse(B)};return t}();k.WhereGrammar=V;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};k.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,
maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e){function z(J,R,r,x,y,T){y-=r;T-=x;J=Math.min(1,Math.max(0,((J-r)*y+(R-x)*T)/(y*y+T*T)));return{x:r+y*J,y:x+T*J}}function a(J,R){return J?R?4:3:R?3:2}let h=function(){function J(r,x,y){this.items=r;this.query=x;this.geometryType=y.geometryType;this.hasM=y.hasM;this.hasZ=y.hasZ;this.fieldsIndex=y.fieldsIndex;this.objectIdField=y.objectIdField;this.spatialReference=y.spatialReference;this.featureAdapter=y.featureAdapter}var R=J.prototype;R.createQueryResponseForCount=
function(){const r=new q(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return r.countDistinctValues(this.items);const {groupByFieldsForStatistics:x,having:y,outStatistics:T}=this.query;if(null==x||!x.length)return 1;const ba=new Map,X=new Map,ka=new Set;for(const Q of T){var {statisticType:N}=Q;N="exceedslimit"!==N?Q.onStatisticField:void 0;if(!X.has(N)){var L=[];for(const K of x){const C=this._getAttributeValues(r,K,ba);L.push(C)}X.set(N,this._calculateUniqueValues(L,
r.returnDistinctValues))}N=X.get(N);for(const K in N){const {data:C,items:D}=N[K];L=C.join(",");y&&!r.validateItems(D,y)||ka.add(L)}}return ka.size};R.createQueryResponse=function(){var r=ca._asyncToGenerator(function*(){let x;x=this.query.outStatistics?this.query.outStatistics.some(y=>"exceedslimit"===y.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&
(n.isValid(this.query.outSR)&&!n.equals(this.query.geometry.spatialReference,this.query.outSR)?x.queryGeometry=w.cleanFromGeometryEngine({spatialReference:this.query.outSR,...p.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):x.queryGeometry=w.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return x});return function(){return r.apply(this,arguments)}}();R.createSnappingResponse=function(r,x){const y=this.featureAdapter,T=a(this.hasZ,
this.hasM),{x:ba,y:X}=r.point,ka="number"===typeof r.distance?r.distance:r.distance.x,N="number"===typeof r.distance?r.distance:r.distance.y,L={candidates:[]},Q="esriGeometryPolygon"===this.geometryType;x=this._getPointCreator(r.point,this.spatialReference,x);for(const ha of this.items){var K=y.getGeometry(ha);if(V.isNone(K))continue;const {coords:na,lengths:P}=K;if(r.types&d.SnappingTypes.EDGE){K=0;for(var C=0;C<P.length;C++){var D=P[C];for(var g=0;g<D;g++,K+=T){var H=na[K],S=na[K+1];if(g!==D-1){const ma=
na[K+T],oa=na[K+T+1],{x:qa,y:wa}=z(ba,X,H,S,ma,oa);var M=(ba-qa)/ka;const Ja=(X-wa)/N;M=M*M+Ja*Ja;1>=M&&L.candidates.push({type:"edge",objectId:y.getObjectId(ha),distance:Math.sqrt(M),target:x(qa,wa),start:x(H,S),end:x(ma,oa)})}}}}if(r.types&d.SnappingTypes.VERTEX)for(K=Q?na.length-T:na.length,C=0;C<K;C+=T)D=na[C],g=na[C+1],H=(ba-D)/ka,S=(X-g)/N,H=H*H+S*S,1>=H&&L.candidates.push({type:"vertex",objectId:y.getObjectId(ha),distance:Math.sqrt(H),target:x(D,g)})}L.candidates.sort((ha,na)=>ha.distance-
na.distance);return L};R._getPointCreator=function(r,x,y){const T=V.isSome(y)&&!n.equals(x,y)?ba=>p.project(ba,x,y):ba=>ba;return null!=r.z&&null!=r.m?(ba,X)=>T({x:ba,y:X,z:r.z,m:r.m}):null!=r.z?(ba,X)=>T({x:ba,y:X,z:r.z}):null!=r.m?(ba,X)=>T({x:ba,y:X,m:r.m}):(ba,X)=>T({x:ba,y:X})};R.createSummaryStatisticsResponse=function(){var r=ca._asyncToGenerator(function*(x){const {field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,minValue:N,maxValue:L,scale:Q}=x;x=
this.fieldsIndex.isDateField(y);var K=yield this._getDataValues({field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,scale:Q});const C=A.isNullCountSupported({normalizationType:X,normalizationField:ba,minValue:N,maxValue:L}),D=this.fieldsIndex.get(y),g={value:.5,fieldType:null==D?void 0:D.type};K=u.isStringField(D)?A.calculateStringStatistics({values:K,supportsNullCount:C,percentileParams:g}):A.calculateStatistics({values:K,minValue:N,maxValue:L,useSampleStdDev:!X,
supportsNullCount:C,percentileParams:g});return A.processSummaryStatisticsResult(K,x)});return function(x){return r.apply(this,arguments)}}();R.createUniqueValuesResponse=function(){var r=ca._asyncToGenerator(function*(x){const {field:y,valueExpression:T,domain:ba,returnAllCodedValues:X,scale:ka}=x;x=yield this._getDataValues({field:y,valueExpression:T,scale:ka});x=A.calculateUniqueValuesCount(x);return A.createUVResult(x,ba,X)});return function(x){return r.apply(this,arguments)}}();R.createClassBreaksResponse=
function(){var r=ca._asyncToGenerator(function*(x){const {field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,classificationMethod:N,standardDeviationInterval:L,minValue:Q,maxValue:K,numClasses:C,scale:D}=x;x=yield this._getDataValues({field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,scale:D});x=A.calculateClassBreaks(x,{field:y,normalizationField:ba,normalizationType:X,normalizationTotal:ka,classificationMethod:N,standardDeviationInterval:L,
minValue:Q,maxValue:K,numClasses:C});return A.resolveCBResult(x,N)});return function(x){return r.apply(this,arguments)}}();R.createHistogramResponse=function(){var r=ca._asyncToGenerator(function*(x){const {field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,classificationMethod:N,standardDeviationInterval:L,minValue:Q,maxValue:K,numBins:C,scale:D}=x;x=yield this._getDataValues({field:y,valueExpression:T,normalizationField:ba,normalizationType:X,normalizationTotal:ka,
scale:D});return A.calculateHistogram(x,{field:y,normalizationField:ba,normalizationType:X,normalizationTotal:ka,classificationMethod:N,standardDeviationInterval:L,minValue:Q,maxValue:K,numBins:C})});return function(x){return r.apply(this,arguments)}}();R._sortFeatures=function(r,x,y){if(1<r.length&&x&&x.length)for(const T of x.reverse()){x=T.split(" ");const ba=x[0],X=this.fieldsIndex.get(ba);x=x[1]&&"desc"===x[1].toLowerCase();const ka=A.getAttributeComparator(null==X?void 0:X.type,x);r.sort((N,
L)=>{N=y(N,ba,X);L=y(L,ba,X);return ka(N,L)})}};R._createFeatureQueryResponse=function(r){const x=this.items,{geometryType:y,hasM:T,hasZ:ba,objectIdField:X,spatialReference:ka}=this,{outFields:N,outSR:L,quantizationParameters:Q,resultRecordCount:K,resultOffset:C,returnZ:D,returnM:g}=r,H=null!=K?x.length>(C||0)+K:!1,S=N&&(N.includes("*")?[...this.fieldsIndex.fields]:N.map(M=>this.fieldsIndex.get(M)));return{exceededTransferLimit:H,features:this._createFeatures(r,x),fields:S,geometryType:y,hasM:T&&
g,hasZ:ba&&D,objectIdFieldName:X,spatialReference:w.cleanFromGeometryEngine(L?L:ka),transform:Q&&E.toQuantizationTransform(Q)||null}};R._createFeatures=function(r,x){const y=new q(r,this.featureAdapter,this.fieldsIndex),{hasM:T,hasZ:ba}=this,{orderByFields:X,quantizationParameters:ka,returnGeometry:N,returnCentroid:L,maxAllowableOffset:Q,resultOffset:K,resultRecordCount:C,returnZ:D=!1,returnM:g=!1}=r,H=ba&&D,S=T&&g;r=[];var M=0;x=[...x];this._sortFeatures(x,X,(P,ma,oa)=>y.getFieldValue(P,ma,oa));
if(N||L){var ha=E.toQuantizationTransform(ka);if(N&&!L)for(var na of x)r[M++]={attributes:y.getAttributes(na),geometry:w.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(na),Q,ha,H,S)};else if(!N&&L)for(const P of x)r[M++]={attributes:y.getAttributes(P),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(P,this),ha)};else for(const P of x)r[M++]={attributes:y.getAttributes(P),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(P,this),ha),
geometry:w.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(P),Q,ha,H,S)}}else for(ha of x)(na=y.getAttributes(ha))&&(r[M++]={attributes:na});M=K||0;null!=C&&(r=r.slice(M,Math.min(r.length,M+C)));return r};R._createExceedsLimitQueryResponse=function(r){var x=!1;let y=Number.POSITIVE_INFINITY,T=Number.POSITIVE_INFINITY;x=Number.POSITIVE_INFINITY;for(const ba of r.outStatistics)if("exceedslimit"===ba.statisticType){y=null!=ba.maxPointCount?ba.maxPointCount:Number.POSITIVE_INFINITY;
T=null!=ba.maxRecordCount?ba.maxRecordCount:Number.POSITIVE_INFINITY;x=null!=ba.maxVertexCount?ba.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)x=this.items.length>y;else if(this.items.length>T)x=!0;else{r=this.hasZ?this.hasM?4:3:this.hasM?3:2;const ba=this.featureAdapter;x=this.items.reduce((X,ka)=>{ka=ba.getGeometry(ka);return X+(V.isSome(ka)&&ka.coords.length||0)},0)/r>x}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(x)}}]}};R._createStatisticsQueryResponse=function(){var r=ca._asyncToGenerator(function*(x){var y={attributes:{}};const T=[],ba=new Map,X=new Map,ka=new Map,N=new Map,L=new q(x,this.featureAdapter,this.fieldsIndex);var Q=x.outStatistics;const {groupByFieldsForStatistics:K,having:C,orderByFields:D}=x;x=K&&K.length;const g=!!x,H=g&&K[0],S=g&&!this.fieldsIndex.get(H);for(const ma of Q){const {outStatisticFieldName:oa,
statisticType:qa}=ma;Q=ma;var M="exceedslimit"!==qa?ma.onStatisticField:void 0;const wa="percentile_disc"===qa||"percentile_cont"===qa,Ja="EnvelopeAggregate"===qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa,Da=g&&1===x&&(M===H||S)&&"count"===qa;if(g){if(!ka.has(M)){var ha=[];for(const Ma of K){var na=this._getAttributeValues(L,Ma,ba);ha.push(na)}ka.set(M,this._calculateUniqueValues(ha,L.returnDistinctValues))}ha=ka.get(M);for(const Ma in ha){const {count:Za,data:c,items:m,itemPositions:fa}=
ha[Ma];na=c.join(",");if(!C||L.validateItems(m,C)){const l=N.get(na)||{attributes:{}};if(Ja){l.aggregateGeometries||(l.aggregateGeometries={});const {aggregateGeometries:G,outStatisticFieldName:W}=yield this._getAggregateGeometry(Q,m);l.aggregateGeometries[W]=G}else{var P=null;if(Da)P=Za;else{const G=this._getAttributeValues(L,M,ba);P=fa.map(W=>G[W]);P=wa&&"statisticParameters"in Q?this._getPercentileValue(Q,P):this._getStatisticValue(Q,P,null,L.returnDistinctValues)}l.attributes[oa]=P}K.forEach((G,
W)=>l.attributes[this.fieldsIndex.get(G)?G:`EXPR_${W+1}`]=c[W]);N.set(na,l)}}}else if(Ja){y.aggregateGeometries||(y.aggregateGeometries={});const {aggregateGeometries:Ma,outStatisticFieldName:Za}=yield this._getAggregateGeometry(Q,this.items);y.aggregateGeometries[Za]=Ma}else M=this._getAttributeValues(L,M,ba),y.attributes[oa]=wa&&"statisticParameters"in Q?this._getPercentileValue(Q,M):this._getStatisticValue(Q,M,X,L.returnDistinctValues);T.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}y=g?
Array.from(N.values()):[y];this._sortFeatures(y,D,(ma,oa)=>ma.attributes[oa]);return{fields:T,features:y}});return function(x){return r.apply(this,arguments)}}();R._getAggregateGeometry=function(){var r=ca._asyncToGenerator(function*(x,y){var T=yield new Promise((D,g)=>k(["../../../geometry/geometryEngineJSON"],D,g));const {statisticType:ba,outStatisticFieldName:X}=x,{featureAdapter:ka,spatialReference:N,geometryType:L,hasZ:Q,hasM:K}=this;y=y.map(D=>w.getGeometry(L,Q,K,ka.getGeometry(D)));const C=
T.convexHull(N,y,!0)[0];x={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===ba?(T=C?B.getPolygonExtent(C):B.getGeometryExtent(T.union(N,y)),x.aggregateGeometries={...T,spatialReference:N},x.outStatisticFieldName=X||"extent"):"CentroidAggregate"===ba?(T=C?t.polygonCentroid(C):t.extentCentroid(B.getGeometryExtent(T.union(N,y))),x.aggregateGeometries={x:T[0],y:T[1],spatialReference:N},x.outStatisticFieldName=X||"centroid"):"ConvexHullAggregate"===ba&&(x.aggregateGeometries=
C,x.outStatisticFieldName=X||"convexHull");return x});return function(x,y){return r.apply(this,arguments)}}();R._getStatisticValue=function(r,x,y,T){const {onStatisticField:ba,statisticType:X}=r;r=null;r=null!=y&&y.has(ba)?y.get(ba):u.isStringField(this.fieldsIndex.get(ba))?A.calculateStringStatistics({values:x,returnDistinct:T}):A.calculateStatistics({values:x,minValue:null,maxValue:null,useSampleStdDev:!0});y&&y.set(ba,r);return r["var"===X?"variance":X]};R._getPercentileValue=function(r,x){const {onStatisticField:y,
statisticParameters:T,statisticType:ba}=r,{value:X,orderBy:ka}=T;r=this.fieldsIndex.get(y);return A.calculatePercentile(x,{value:X,orderBy:ka,fieldType:null==r?void 0:r.type,isDiscrete:"percentile_disc"===ba})};R._getAttributeValues=function(r,x,y){if(y.has(x))return y.get(x);const T=this.fieldsIndex.get(x),ba=this.items.map(X=>r.getFieldValue(X,x,T));y.set(x,ba);return ba};R._getAttributeNormalizedValues=function(r,x){return this.items.map(y=>r.getNormalizedValue(y,{field:x.field,fieldInfo:this.fieldsIndex.get(x.field),
normalizationField:x.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(x.normalizationField),normalizationType:x.normalizationType,normalizationTotal:x.normalizationTotal}))};R._getAttributeExpressionValues=function(){var r=ca._asyncToGenerator(function*(x,y,T){const {arcadeUtils:ba}=yield e.loadArcade();y=ba.createFunction(y);T=T&&ba.getViewInfo(T);return x.getExpressionValues(this.items,y,T,ba)});return function(x,y,T){return r.apply(this,arguments)}}();R._calculateUniqueValues=function(r,
x){const y={},T=this.items,ba=T.length;for(let X=0;X<ba;X++){const ka=T[X],N=[];for(const Q of r)N.push(Q[X]);const L=N.join(",");x?null==y[L]&&(y[L]={count:1,data:N,items:[ka],itemPositions:[X]}):null==y[L]?y[L]={count:1,data:N,items:[ka],itemPositions:[X]}:(y[L].count++,y[L].items.push(ka),y[L].itemPositions.push(X))}return y};R._getDataValues=function(){var r=ca._asyncToGenerator(function*(x){const y=new q(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:T,field:ba,normalizationField:X,
normalizationType:ka,normalizationTotal:N,scale:L}=x;x=T?{viewingMode:"map",scale:L,spatialReference:this.query.outSR||this.spatialReference}:null;return T?this._getAttributeExpressionValues(y,T,x):this._getAttributeNormalizedValues(y,{field:ba,normalizationField:X,normalizationType:ka,normalizationTotal:N})});return function(x){return r.apply(this,arguments)}}();ca._createClass(J,[{key:"size",get:function(){return this.items.length}}]);return J}();d.SnappingTypes=void 0;(function(J){J[J.NONE=0]=
"NONE";J[J.EDGE=1]="EDGE";J[J.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));d.QueryEngineResult=h;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,d,ca){function V({scale:N,translate:L},Q){return Math.round((Q-L[0])/N[0])}function t({scale:N,translate:L},Q){return Math.round((L[1]-Q)/N[1])}function B(N,L,Q){const K=[];let C,D,
g,H;for(let S=0;S<Q.length;S++){const M=Q[S];if(0<S){if(g=V(N,M[0]),H=t(N,M[1]),g!==C||H!==D)K.push(L(M,g-C,H-D)),C=g,D=H}else C=V(N,M[0]),D=t(N,M[1]),K.push(L(M,C,D))}return 0<K.length?K:null}function E(N,L,Q,K){return B(N,Q?K?ka:X:K?X:ba,L)}function n(N,L,Q,K){const C=[];Q=Q?K?ka:X:K?X:ba;for(K=0;K<L.length;K++){const D=B(N,Q,L[K]);D&&3<=D.length&&C.push(D)}return C.length?C:null}function q(N,L,Q,K){const C=[];Q=Q?K?ka:X:K?X:ba;for(K=0;K<L.length;K++){const D=B(N,Q,L[K]);D&&2<=D.length&&C.push(D)}return C.length?
C:null}function p({scale:N,translate:L},Q){return Q*N[0]+L[0]}function w({scale:N,translate:L},Q){return L[1]-Q*N[1]}function u(N,L,Q){const K=Array(Q.length);if(!Q.length)return K;const [C,D]=N.scale;let g=p(N,Q[0][0]);N=w(N,Q[0][1]);K[0]=L(Q[0],g,N);for(let H=1;H<Q.length;H++){const S=Q[H];g+=S[0]*C;N-=S[1]*D;K[H]=L(S,g,N)}return K}function A(N,L,Q){const K=Array(Q.length);for(let C=0;C<Q.length;C++)K[C]=u(N,L,Q[C]);return K}function e(N,L,Q,K){return u(N,Q?K?ka:X:K?X:ba,L)}function z(N,L,Q,K){return A(N,
Q?K?ka:X:K?X:ba,L)}function a(N,L,Q,K){return A(N,Q?K?ka:X:K?X:ba,L)}function h(N,L,Q){let [K,C]=Q[0],D=Math.min(K,L[0]),g=Math.min(C,L[1]),H=Math.max(K,L[2]);L=Math.max(C,L[3]);for(let S=1;S<Q.length;S++){const [M,ha]=Q[S];K+=M;C+=ha;0>M&&(D=Math.min(D,K));0<M&&(H=Math.max(H,K));0>ha?g=Math.min(g,C):0<ha&&(L=Math.max(L,C))}N[0]=D;N[1]=g;N[2]=H;N[3]=L;return N}function J(N,L){if(!L.length)return null;N[0]=N[1]=Number.POSITIVE_INFINITY;N[2]=N[3]=Number.NEGATIVE_INFINITY;for(let Q=0;Q<L.length;Q++)h(N,
N,L[Q]);return N}function R(N,L,Q,K,C){L.xmin=V(N,Q.xmin);L.ymin=t(N,Q.ymin);L.xmax=V(N,Q.xmax);L.ymax=t(N,Q.ymax);L!==Q&&(K&&(L.zmin=Q.zmin,L.zmax=Q.zmax),C&&(L.mmin=Q.mmin,L.mmax=Q.mmax));return L}function r(N,L,Q,K,C){L.points=E(N,Q.points,K,C);return L}function x(N,L,Q,K,C){L.x=V(N,Q.x);L.y=t(N,Q.y);L!==Q&&(K&&(L.z=Q.z),C&&(L.m=Q.m));return L}function y(N,L,Q,K,C){N=n(N,Q.rings,K,C);if(!N)return null;L.rings=N;return L}function T(N,L,Q,K,C){N=q(N,Q.paths,K,C);if(!N)return null;L.paths=N;return L}
const ba=(N,L,Q)=>[L,Q],X=(N,L,Q)=>[L,Q,N[2]],ka=(N,L,Q)=>[L,Q,N[2],N[3]];k.equals=function(N,L){if(N===L||null==N&&null==L)return!0;if(null==N||null==L)return!1;let Q,K,C,D;N&&"upperLeft"===N.originPosition?(Q=N.translate[0],K=N.translate[1],N=N.scale[0]):(Q=d.isSome(N.extent)?N.extent.xmin:0,K=d.isSome(N.extent)?N.extent.ymax:0,N=N.tolerance);L&&"upperLeft"===L.originPosition?(C=L.translate[0],D=L.translate[1],L=L.scale[0]):(C=d.isSome(L.extent)?L.extent.xmin:0,D=d.isSome(L.extent)?L.extent.ymax:
0,L=L.tolerance);return Q===C&&K===D&&N===L};k.getQuantizedBoundsCoordsArray=h;k.getQuantizedBoundsCoordsArrayArray=J;k.getQuantizedBoundsPaths=function(N){return J([0,0,0,0],N)};k.getQuantizedBoundsPoints=function(N){const L=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return h(L,L,N)};k.getQuantizedBoundsRings=function(N){return J([0,0,0,0],N)};k.quantizeBounds=function(N,L,Q){L[0]=V(N,Q[0]);L[3]=t(N,Q[1]);L[2]=V(N,Q[2]);L[1]=t(N,Q[3]);return L};
k.quantizeExtent=R;k.quantizeGeometry=function(N,L){return N&&L?ca.isPoint(L)?x(N,{},L,!1,!1):ca.isPolyline(L)?T(N,{},L,!1,!1):ca.isPolygon(L)?y(N,{},L,!1,!1):ca.isMultipoint(L)?r(N,{},L,!1,!1):ca.isExtent(L)?R(N,{},L,!1,!1):null:null};k.quantizeMultipoint=r;k.quantizePaths=q;k.quantizePoint=x;k.quantizePoints=E;k.quantizePolygon=y;k.quantizePolyline=T;k.quantizeRings=n;k.quantizeX=V;k.quantizeY=t;k.toQuantizationTransform=function(N){return N?{originPosition:"upper-left"===N.originPosition?"upperLeft":
"lower-left"===N.originPosition?"lowerLeft":N.originPosition,scale:N.tolerance?[N.tolerance,N.tolerance]:[1,1],translate:d.isSome(N.extent)?[N.extent.xmin,N.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(N,L,Q){return Q?(L[0]=p(N,Q[0]),L[1]=w(N,Q[3]),L[2]=p(N,Q[2]),L[3]=w(N,Q[1]),L):[p(N,L[0]),w(N,L[3]),p(N,L[2]),w(N,L[1])]};k.unquantizeCoordsArray=u;k.unquantizeCoordsArrayArray=A;k.unquantizeExtent=function(N,L,Q,K,C){L.xmin=p(N,Q.xmin);L.ymin=w(N,Q.ymin);L.xmax=p(N,Q.xmax);L.ymax=w(N,Q.ymax);
L!==Q&&(K&&(L.zmin=Q.zmin,L.zmax=Q.zmax),C&&(L.mmin=Q.mmin,L.mmax=Q.mmax));return L};k.unquantizeMultipoint=function(N,L,Q,K,C){d.isSome(Q)&&(L.points=e(N,Q.points,K,C));return L};k.unquantizePaths=z;k.unquantizePoint=function(N,L,Q,K,C){if(d.isNone(Q))return L;L.x=p(N,Q.x);L.y=w(N,Q.y);L!==Q&&(K&&(L.z=Q.z),C&&(L.m=Q.m));return L};k.unquantizePoints=e;k.unquantizePolygon=function(N,L,Q,K,C){d.isSome(Q)&&(L.rings=a(N,Q.rings,K,C));return L};k.unquantizePolyline=function(N,L,Q,K,C){d.isSome(Q)&&(L.paths=
z(N,Q.paths,K,C));return L};k.unquantizeRings=a;k.unquantizeX=p;k.unquantizeY=w;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(k,d,ca){return function(){function V(B,E,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=B.returnDistinctValues;this.fieldsIndex=n;this.featureAdapter=
E;if((E=B.outFields)&&!E.includes("*")){this.outFields=E;B=0;for(const p of E){var q=d.getExpressionFromFieldName(p);q=(E=this.fieldsIndex.get(q))?null:d.getWhereClause(q,n);E=E?E.name:d.getAliasFromFieldName(p)||`FIELD_EXP_${B++}`;this._fieldDataCache.set(p,{alias:E,clause:q})}}}var t=V.prototype;t.countDistinctValues=function(B){if(!this.returnDistinctValues)return B.length;B.forEach(E=>this.getAttributes(E));return this._returnDistinctMap.size};t.getAttributes=function(B){B=this._processAttributesForOutFields(B);
return this._processAttributesForDistinctValues(B)};t.getFieldValue=function(B,E,n){const q=n?n.name:E;let p=null;this._fieldDataCache.has(q)?p=this._fieldDataCache.get(q).clause:n||(p=d.getWhereClause(E,this.fieldsIndex),this._fieldDataCache.set(q,{alias:q,clause:p}));return n?this.featureAdapter.getAttribute(B,q):p.calculateValue(B,this.featureAdapter)};t.getNormalizedValue=function(B,E){const n=E.normalizationType,q=E.normalizationTotal;let p=this.getFieldValue(B,E.field,E.fieldInfo);n&&Number.isFinite(p)&&
(B=this.getFieldValue(B,E.normalizationField,E.normalizationFieldInfo),p=ca.getNormalizedValue(p,n,B,q));return p};t.getExpressionValue=function(B,E,n,q){B={attributes:this.featureAdapter.getAttributes(B),layer:{fields:this.fieldsIndex.fields}};n=q.createExecContext(B,n);return q.executeFunction(E,n)};t.getExpressionValues=function(B,E,n,q){const p={fields:this.fieldsIndex.fields};return B.map(w=>{w={attributes:this.featureAdapter.getAttributes(w),layer:p};w=q.createExecContext(w,n);return q.executeFunction(E,
w)})};t.validateItem=function(B,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:d.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E).clause.testFeature(B,this.featureAdapter)};t.validateItems=function(B,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:d.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E).clause.testSet(B,this.featureAdapter)};t._processAttributesForOutFields=function(B){const E=this.outFields;
if(!E||!E.length)return this.featureAdapter.getAttributes(B);const n={};for(const q of E){const {alias:p,clause:w}=this._fieldDataCache.get(q);n[p]=w?w.calculateValue(B,this.featureAdapter):this.featureAdapter.getAttribute(B,p)}return n};t._processAttributesForDistinctValues=function(B){if(k.isNone(B)||!this.returnDistinctValues)return B;var E=this.outFields,n=[];if(E)for(const p of E){var {alias:q}=this._fieldDataCache.get(p);n.push(B[q])}else for(q in B)n.push(B[q]);E=`${(E||["*"]).join(",")}=${n.join(",")}`;
n=this._returnDistinctMap.get(E)||0;this._returnDistinctMap.set(E,++n);return 1<n?null:B};return V}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,d,ca){function V(r){const x=null!=r.minValue||null!=r.maxValue,y=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!x&&!y}function t(r){const {values:x,useSampleStdDev:y,supportsNullCount:T}=r;var ba=
Number.POSITIVE_INFINITY;let X=Number.NEGATIVE_INFINITY,ka=null,N=null;var L=null;let Q=null,K=0;const C=null==r.minValue?-Infinity:r.minValue,D=null==r.maxValue?Infinity:r.maxValue;for(const g of x)Number.isFinite(g)?g>=C&&g<=D&&(ka+=g,ba=Math.min(ba,g),X=Math.max(X,g),K++):"string"===typeof g&&K++;if(K&&null!=ka){N=ka/K;L=0;for(const g of x)Number.isFinite(g)&&g>=C&&g<=D&&(L+=(g-N)**2);Q=y?1<K?L/(K-1):0:0<K?L/K:0;L=Math.sqrt(Q)}else X=ba=null;ba={avg:N,count:K,max:X,min:ba,stddev:L,sum:ka,variance:Q};
T&&(ba.nullcount=x.length-K);r.percentileParams&&(ba.median=B(x,r.percentileParams));return ba}function B(r,x){const {fieldType:y,value:T,orderBy:ba,isDiscrete:X}=x,ka=E(y,"desc"===ba);r=[...r].filter(K=>null!=K).sort((K,C)=>ka(K,C));if(0===r.length)return null;if(0>=T)return r[0];if(1<=T)return r[r.length-1];var N=(r.length-1)*T,L=Math.floor(N);x=L+1;N%=1;L=r[L];const Q=r[x];return x>=r.length||X||"string"===typeof L||"string"===typeof Q?L:L*(1-N)+Q*N}function E(r,x){const y=x?1:-1,T=q(x),ba=n(x);
if(!r||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...J].includes(r))return(X,ka)=>"number"===typeof X&&"number"===typeof ka?T(X,ka):"string"===typeof X&&"string"===typeof ka?ba(X,ka):y;if("esriFieldTypeDate"===r)return(X,ka)=>{X=(new Date(X)).getTime();ka=(new Date(ka)).getTime();return isNaN(X)||isNaN(ka)?y:T(X,ka)};if(J.has(r))return(X,ka)=>T(X,ka);if("esriFieldTypeString"===r)return(X,ka)=>ba(X,ka);if("esriFieldTypeGUID"===r||"esriFieldTypeGlobalID"===
r){const X=n(x);return(ka,N)=>X(p(ka),p(N))}return x?(X,ka)=>1:(X,ka)=>-1}function n(r){return r?(x,y)=>{var T,ba;x=null==(T=x)?void 0:T.toUpperCase();y=null==(ba=y)?void 0:ba.toUpperCase();return x>y?-1:x<y?1:0}:(x,y)=>{var T,ba;x=null==(T=x)?void 0:T.toUpperCase();y=null==(ba=y)?void 0:ba.toUpperCase();return x<y?-1:x>y?1:0}}function q(r){return r?(x,y)=>y-x:(x,y)=>x-y}function p(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,
2)+r.substr(2,2)+r.substr(0,2)}function w(r,x){const y=A({field:x.field,normalizationType:x.normalizationType,normalizationField:x.normalizationField,classificationMethod:x.classificationMethod,standardDeviationInterval:x.standardDeviationInterval,breakCount:x.numClasses||5});r=u(r,x.minValue,x.maxValue);return ca.createGenerateRendererClassBreaks({definition:y,values:r,normalizationTotal:x.normalizationTotal})}function u(r,x,y){x=null==x?-Infinity:x;y=null==y?Infinity:y;return r.filter(T=>Number.isFinite(T)&&
T>=x&&T<=y)}function A(r){const x=r.field,y=r.classificationMethod||"equal-interval",T=r.normalizationType,ba=r.normalizationField,X=new d;X.classificationField=x;X.breakCount=r.breakCount;X.classificationMethod=y;X.standardDeviationInterval="standard-deviation"===y?r.standardDeviationInterval||1:void 0;X.normalizationType=T;X.normalizationField="field"===T?ba:void 0;return X}function e(r,x){const {field:y,classificationMethod:T,standardDeviationInterval:ba,normalizationType:X,normalizationField:ka,
normalizationTotal:N,minValue:L,maxValue:Q}=x,K=x.numBins||10;let C=x=null,D=null;T&&"equal-interval"!==T||X?({classBreaks:r}=w(r,{field:y,normalizationType:X,normalizationField:ka,normalizationTotal:N,classificationMethod:T,standardDeviationInterval:ba,minValue:L,maxValue:Q,numClasses:K}),x=r[0].minValue,C=r[r.length-1].maxValue,D=r.map(g=>[g.minValue,g.maxValue])):(null!=L&&null!=Q?(x=L,C=Q):(r=t({values:r,minValue:L,maxValue:Q,useSampleStdDev:!X,supportsNullCount:V({normalizationType:X,normalizationField:ka,
minValue:L,maxValue:Q})}),x=r.min,C=r.max),D=a(x,C,K));return{min:x,max:C,intervals:D}}function z(r,x){let y=-1;for(let T=r.length-1;0<=T;T--)if(x>=r[T][0]){y=T;break}return y}function a(r,x,y){const T=(x-r)/y,ba=[];let X;for(let ka=1;ka<=y;ka++)X=r+T,X=Number(X.toFixed(16)),ba.push([r,ka===y?x:X]),r=X;return ba}const h=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),R="min max avg stddev count sum variance nullcount median".split(" ");
k.calculateClassBreaks=w;k.calculateHistogram=function(r,x){const {min:y,max:T,intervals:ba}=e(r,x),X=ba.map((ka,N)=>({minValue:ba[N][0],maxValue:ba[N][1],count:0}));for(const ka of r)null!=ka&&ka>=y&&ka<=T&&(r=z(ba,ka),-1<r&&X[r].count++);return{bins:X,minValue:y,maxValue:T,normalizationTotal:x.normalizationTotal}};k.calculatePercentile=B;k.calculateStatistics=t;k.calculateStringStatistics=function(r){const x=r.returnDistinct?[...new Set(r.values)]:r.values,y=x.filter(ba=>null!=ba).length,T={count:y};
r.supportsNullCount&&(T.nullcount=x.length-y);r.percentileParams&&(T.median=B(x,r.percentileParams));return T};k.calculateUniqueValuesCount=function(r){const x={};for(let y of r){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==x[y]?x[y]={count:1,data:y}:x[y].count++}return{count:x}};k.createClassBreaksDefinition=A;k.createUVResult=function(r,x,y){const T=r.count;r=[];y&&x&&"coded-value"===x.type&&x.codedValues.forEach(ba=>{ba=ba.code;T.hasOwnProperty(ba)||(T[ba]={data:ba,count:0})});for(const ba in T)x=
T[ba],r.push({value:x.data,count:x.count,label:x.label});return{uniqueValueInfos:r}};k.getAttributeComparator=E;k.getEqualIntervalBins=a;k.getNormalizedValue=function(r,x,y,T){let ba=null;switch(x){case "log":0!==r&&(ba=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(T)&&0!==T&&(ba=r/T*100);break;case "field":Number.isFinite(y)&&0!==y&&(ba=r/y);break;case "natural-log":0<r&&(ba=Math.log(r));break;case "square-root":0<r&&(ba=r**.5)}return ba};k.isNullCountSupported=V;k.processSummaryStatisticsResult=
function(r,x){let y;for(y in r)R.includes(y)&&(Number.isFinite(r[y])||(r[y]=null));if(!x)return r;["avg","stddev","variance"].forEach(T=>{null!=r[T]&&(r[T]=Math.ceil(r[T]))});return r};k.resolveCBResult=function(r,x){let y=r.classBreaks;const T=y[0].minValue,ba=y[y.length-1].maxValue,X="standard-deviation"===x;y=y.map(ka=>{const N=ka.label;ka={minValue:ka.minValue,maxValue:ka.maxValue,label:N};if(X&&N){const L=N.match(h).map(Q=>+Q.trim());2===L.length?(ka.minStdDev=L[0],ka.maxStdDev=L[1],0>L[0]&&
0<L[1]&&(ka.hasAvg=!0)):1===L.length&&(N.includes("\x3c")?(ka.minStdDev=null,ka.maxStdDev=L[0]):N.includes("\x3e")&&(ka.minStdDev=L[0],ka.maxStdDev=null))}return ka});return{minValue:T,maxValue:ba,classBreakInfos:y,normalizationTotal:r.normalizationTotal}};k.statisticTypes=R;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,d,ca,V,t,B,E,n,q){t=new ca.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ca=new ca.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});q=function(p){function w(){var u=p.apply(this,arguments)||this;u.breakCount=null;u.classificationField=
null;u.classificationMethod=null;u.normalizationField=null;u.normalizationType=null;u.type="class-breaks-definition";return u}k._inheritsLoose(w,p);k._createClass(w,[{key:"standardDeviationInterval",set:function(u){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",u)}},{key:"definedInterval",set:function(u){"defined-interval"===this.classificationMethod&&this._set("definedInterval",u)}}]);return w}(q);d.__decorate([V.property({json:{write:!0}})],q.prototype,"breakCount",
void 0);d.__decorate([V.property({json:{write:!0}})],q.prototype,"classificationField",void 0);d.__decorate([V.property({type:String,json:{read:t.read,write:t.write}})],q.prototype,"classificationMethod",void 0);d.__decorate([V.property({json:{write:!0}})],q.prototype,"normalizationField",void 0);d.__decorate([V.property({json:{read:ca.read,write:ca.write}})],q.prototype,"normalizationType",void 0);d.__decorate([V.property({value:null,json:{write:!0}})],q.prototype,"standardDeviationInterval",null);
d.__decorate([V.property({value:null,json:{write:!0}})],q.prototype,"definedInterval",null);d.__decorate([V.property()],q.prototype,"type",void 0);return q=d.__decorate([n.subclass("esri.rest.support.ClassBreaksDefinition")],q)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w){ca=new ca.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});V=function(u){function A(){var e=u.apply(this,arguments)||this;e.baseSymbol=null;e.colorRamp=null;e.type=null;return e}k._inheritsLoose(A,u);return A}(V.JSONSupport);d.__decorate([t.property({type:w,json:{write:!0}})],V.prototype,"baseSymbol",void 0);d.__decorate([t.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],V.prototype,"colorRamp",void 0);
d.__decorate([t.property({json:{read:ca.read,write:ca.write}})],V.prototype,"type",void 0);return V=d.__decorate([q.subclass("esri.rest.support.ClassificationDefinition")],V)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,d,ca,V){ca={key:"type",base:ca,typeMap:{algorithmic:d,multipart:V}};k.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?d.fromJSON(t):"multipart"===t.type?V.fromJSON(t):null:null};
k.types=ca;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,d,ca,V,t,B,E,n,q){var p;q=p=function(w){function u(A){A=
w.call(this,A)||this;A.algorithm=null;A.fromColor=null;A.toColor=null;A.type="algorithmic";return A}k._inheritsLoose(u,w);u.prototype.clone=function(){return new p({fromColor:V.clone(this.fromColor),toColor:V.clone(this.toColor),algorithm:this.algorithm})};return u}(q);d.__decorate([E.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],q.prototype,"algorithm",void 0);d.__decorate([t.property({type:ca,json:{type:[B.Integer],write:!0}})],q.prototype,"fromColor",
void 0);d.__decorate([t.property({type:ca,json:{type:[B.Integer],write:!0}})],q.prototype,"toColor",void 0);d.__decorate([t.property({type:["algorithmic"]})],q.prototype,"type",void 0);return q=p=d.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],q)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,d,ca){k.enumeration=function(V,t={}){var B;V=V instanceof d.JSONMap?V:new d.JSONMap(V,t);V={type:(null!=(B=null==
t?void 0:t.ignoreUnknown)?B:1)?V.apiValues:String,json:{type:V.jsonValues,read:null!=t&&t.readOnly?!1:{reader:V.read},write:{writer:V.write}}};void 0!==(null==t?void 0:t.readOnly)&&(V.readOnly=!!t.readOnly);void 0!==(null==t?void 0:t.default)&&(V.json.default=t.default);void 0!==(null==t?void 0:t.name)&&(V.json.name=t.name);return ca.property(V)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,V,t,B,E,n){ca=function(q){function p(w){w=q.call(this,w)||this;w.type=null;return w}k._inheritsLoose(p,q);return p}(ca.JSONSupport);d.__decorate([V.property({readOnly:!0,json:{read:!1,write:!0}})],ca.prototype,"type",void 0);return ca=d.__decorate([n.subclass("esri.rest.support.ColorRamp")],ca)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,d,ca,V,t,B,E,n){var q;t=q=function(p){function w(u){u=p.call(this,u)||this;u.colorRamps=null;u.type="multipart";return u}k._inheritsLoose(w,p);w.prototype.clone=function(){return new q({colorRamps:ca.clone(this.colorRamps)})};return w}(n);d.__decorate([V.property({type:[E],json:{write:!0}})],t.prototype,"colorRamps",void 0);d.__decorate([V.property({type:["multipart"]})],t.prototype,"type",void 0);return t=q=d.__decorate([B.subclass("esri.rest.support.MultipartColorRamp")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w){V=new V.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let u=0;t=function(A){function e(a){a=A.call(this,a)||this;a.id=`sym${u++}`;a.type=null;a.color=new ca([0,0,0,1]);
return a}k._inheritsLoose(e,A);var z=e.prototype;z.readColor=function(a){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};z.collectRequiredFields=function(){var a=k._asyncToGenerator(function*(h,J){});return function(h,J){return a.apply(this,arguments)}}();z.hash=function(){return JSON.stringify(this.toJSON())};z.clone=function(){};return e}(t.JSONSupport);d.__decorate([B.property({type:V.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:V.write}}})],t.prototype,"type",void 0);d.__decorate([B.property({type:ca,
json:{write:{allowNull:!0}}})],t.prototype,"color",void 0);d.__decorate([p.reader("color")],t.prototype,"readColor",null);return t=d.__decorate([w.subclass("esri.symbols.Symbol")],t)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function d(w){const {classificationMethod:u,breakCount:A,normalizationType:e,definedInterval:z}=w.definition,a=[];var h=w.values;if(0===h.length)return[];h=h.sort((T,ba)=>T-ba);var J=h[0],R=h[h.length-1];if("equal-interval"===u)if(h.length>=
A){h=(R-J)/A;w=J;for(var r=1;r<A;r++){var x=Number((J+r*h).toFixed(6));a.push({minValue:w,maxValue:x,label:ca(w,x,e)});w=x}a.push({minValue:w,maxValue:R,label:ca(w,R,e)})}else h.forEach(T=>{a.push({minValue:T,maxValue:T,label:ca(T,T,e)})});else if("natural-breaks"===u){h=V(h);w=t(h.uniqueValues,w.valueFrequency||h.valueFrequency,A);for(r=1;r<A;r++)h.uniqueValues.length>r&&(x=Number(h.uniqueValues[w[r]].toFixed(6)),a.push({minValue:J,maxValue:x,label:ca(J,x,e)}),J=x);a.push({minValue:J,maxValue:R,
label:ca(J,R,e)})}else if("quantile"===u)if(h.length>=A&&J!==R){w=Math.ceil(h.length/A);r=0;for(x=1;x<A;x++){var y=w+r-1;y>h.length&&(y=h.length-1);0>y&&(y=0);a.push({minValue:J,maxValue:h[y],label:ca(J,h[y],e)});J=h[y];r+=w;w=Math.ceil((h.length-r)/(A-x))}a.push({minValue:J,maxValue:R,label:ca(J,R,e)})}else for(R=-1,J=0;J<h.length;J++)w=h[J],w!==R&&(R=w,a.push({minValue:R,maxValue:w,label:ca(R,w,e)}),R=w);else if("standard-deviation"===u)if(w=n(h),r=q(h,w),0===r)a.push({minValue:h[0],maxValue:h[0],
label:ca(h[0],h[0],e)});else{h=E(J,R,A,w,r)*r;r=0;for(x=A;1<=x;x--)y=Number((w-(x-.5)*h).toFixed(6)),a.push({minValue:J,maxValue:y,label:ca(J,y,e)}),J=y,r++;x=Number((w+.5*h).toFixed(6));a.push({minValue:J,maxValue:x,label:ca(J,x,e)});J=x;r++;for(y=1;y<=A;y++)x=r===2*A?R:Number((w+(y+.5)*h).toFixed(6)),a.push({minValue:J,maxValue:x,label:ca(J,x,e)}),J=x,r++}else if("defined-interval"===u){if(!z)return a;R=h[0];h=h[h.length-1];J=Math.ceil((h-R)/z);w=R;for(r=1;r<J;r++)x=Number((R+r*z).toFixed(6)),a.push({minValue:w,
maxValue:x,label:ca(w,x,e)}),w=x;a.push({minValue:w,maxValue:h,label:ca(w,h,e)})}return a}function ca(w,u,A){let e=null;return e=w===u?A&&"percent-of-total"===A?w+"%":w.toString():A&&"percent-of-total"===A?w+"% - "+u+"%":w+" - "+u}function V(w){const u=[],A=[];let e=Number.MIN_VALUE,z=1,a=-1;for(let h=0;h<w.length;h++){const J=w[h];J===e?(z++,A[a]=z):null!==J&&(u.push(J),e=J,z=1,A.push(z),a++)}return{uniqueValues:u,valueFrequency:A}}function t(w,u,A){var e=w.length;const z=[];A>e&&(A=e);for(var a=
0;a<A;a++)z.push(Math.round(a*e/A-1));z.push(e-1);a=B(z,w,u,A);{e=a.mean;a=a.sdcm;var h=A,J=0,R=0;let x=0,y=0,T=!0;for(let ba=0;2>ba&&T;ba++){0===ba&&(T=!1);for(var r=0;r<h-1;r++)for(;z[r+1]+1!==z[r+2];)if(z[r+1]+=1,J=p(r,z,w,u),x=J.sbMean,J=J.sbSdcm,R=p(r+1,z,w,u),y=R.sbMean,R=R.sbSdcm,J+R<a[r]+a[r+1])a[r]=J,a[r+1]=R,e[r]=x,e[r+1]=y,T=!0;else{--z[r+1];break}for(r=h-1;0<r;r--)for(;z[r]!==z[r-1]+1;)if(--z[r],J=p(r-1,z,w,u),x=J.sbMean,J=J.sbSdcm,R=p(r,z,w,u),y=R.sbMean,R=R.sbSdcm,J+R<a[r-1]+a[r])a[r-
1]=J,a[r]=R,e[r-1]=x,e[r]=y,T=!0;else{z[r]+=1;break}}e=T}e&&(a=B(z,w,u,A));return z}function B(w,u,A,e){let z=[];var a=[],h=[];let J=0;const R=[],r=[];for(var x=0;x<e;x++){var y=p(x,w,u,A);R.push(y.sbMean);r.push(y.sbSdcm);J+=r[x]}y=J;for(x=!0;x||J<y;){x=!1;z=[];for(a=0;a<e;a++)z.push(w[a]);for(h=0;h<e;h++)for(y=w[h]+1;y<=w[h+1];y++)if(a=u[y],0<h&&y!==w[h+1]&&Math.abs(a-R[h])>Math.abs(a-R[h-1]))w[h]=y;else if(h<e-1&&w[h]!==y-1&&Math.abs(a-R[h])>Math.abs(a-R[h+1])){w[h+1]=y-1;break}y=J;J=0;a=[];h=
[];for(let T=0;T<e;T++){a.push(R[T]);h.push(r[T]);const ba=p(T,w,u,A);R[T]=ba.sbMean;r[T]=ba.sbSdcm;J+=r[T]}}if(J>y){for(u=0;u<e;u++)w[u]=z[u],R[u]=a[u],r[u]=h[u];J=y}return{mean:R,sdcm:r}}function E(w,u,A,e,z){w=Math.max(e-w,u-e)/z/A;return 1<=w?1:.5<=w?.5:.25}function n(w){let u=0;for(let A=0;A<w.length;A++)u+=w[A];return u/=w.length}function q(w,u){let A=0;for(let e=0;e<w.length;e++){const z=w[e];A+=(z-u)*(z-u)}A/=w.length;return Math.sqrt(A)}function p(w,u,A,e){var z=0,a=0;for(var h=u[w]+1;h<=
u[w+1];h++){const J=e[h];z+=A[h]*J;a+=J}0>=a&&console.log("Exception in Natural Breaks calculation");z/=a;a=0;for(h=u[w]+1;h<=u[w+1];h++)a+=e[h]*(A[h]-z)**2;return{sbMean:z,sbSdcm:a}}k.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:u}=w;return{classBreaks:d(w),normalizationTotal:u}};k.createGenerateRendererUniqueValues=function(w){w=V(w);const u=[],A=w.uniqueValues.length;for(let e=0;e<A;e++){const z=w.uniqueValues[e];u.push({value:z,count:w.valueFrequency[e],label:z.toString()})}return{uniqueValues:u}};
Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e){function z(K,C,D,g=K.hasZ,H=K.hasM){if(t.isNone(C))return null;const S=K.hasZ&&g,M=K.hasM&&H;return D?(K=u.quantizeOptimizedGeometry(N,C,K.hasZ,K.hasM,"esriGeometryPoint",D,g,H),u.convertToPoint(K,S,M)):u.convertToPoint(C,S,M)}function a(){a=ca._asyncToGenerator(function*(K,C,D){const {outFields:g,orderByFields:H,groupByFieldsForStatistics:S,outStatistics:M}=K;if(g)for(var ha=0;ha<g.length;ha++)g[ha]=g[ha].trim();if(H)for(ha=0;ha<H.length;ha++)H[ha]=H[ha].trim();
if(S)for(ha=0;ha<S.length;ha++)S[ha]=S[ha].trim();if(M)for(ha=0;ha<M.length;ha++)M[ha].onStatisticField&&(M[ha].onStatisticField=M[ha].onStatisticField.trim());K.geometry&&!K.outSR&&(K.outSR=K.geometry.spatialReference);return h(K,C,D)});return a.apply(this,arguments)}function h(K,C,D){return J.apply(this,arguments)}function J(){J=ca._asyncToGenerator(function*(K,C,D){if(!K)return null;var {where:g}=K;K.where=g=g&&g.trim();if(!g||/^1 *= *1$/.test(g)||C&&C===g)K.where=null;if(!K.geometry)return K;
C=yield R(K);K.distance=0;K.units=null;"esriSpatialRelEnvelopeIntersects"===K.spatialRel&&({spatialReference:g}=K.geometry,C=E.getGeometryExtent(C),C.spatialReference=g);K.geometry=C;yield e.checkProjectionSupport(C.spatialReference,D);C=(yield q.normalizeCentralMeridian(n.fromJSON(C)))[0];if(t.isNone(C))throw ba;C=C.toJSON();C=yield e.project(C,C.spatialReference,D);if(!C)throw ba;C.spatialReference=D;K.geometry=C;return K});return J.apply(this,arguments)}function R(K){return r.apply(this,arguments)}
function r(){r=ca._asyncToGenerator(function*(K){const {geometry:C,distance:D,units:g}=K;if(null==D||"vertexAttributes"in C)return C;var H=C.spatialReference;K=g?T.fromJSON(g):B.getUnitString(H);H=H&&(p.isGeographic(H)||p.isWebMercator(H))?C:yield e.checkProjectionSupport(H,p.WGS84).then(()=>e.project(C,p.WGS84));return(yield x())(H.spatialReference,H,D,K)});return r.apply(this,arguments)}function x(){return y.apply(this,arguments)}function y(){y=ca._asyncToGenerator(function*(){return(yield new Promise((K,
C)=>k(["../../../geometry/geometryEngineJSON"],K,C))).geodesicBuffer});return y.apply(this,arguments)}const T=new V.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),ba=Object.freeze({}),X=new A,ka=new A,N=new A,L={esriGeometryPoint:u.convertToPoint,esriGeometryPolyline:u.convertToPolyline,esriGeometryPolygon:u.convertToPolygon,esriGeometryMultipoint:u.convertToMultipoint},
Q=(K,C)=>"_geVersion"!==K?C:void 0;d.QUERY_ENGINE_EMPTY_RESULT=ba;d.cleanFromGeometryEngine=function(K){return K&&"_geVersion"in K?JSON.parse(JSON.stringify(K,Q)):K};d.getCentroid=function(K,C,D){if("esriGeometryPolygon"!==K.geometryType||!C||!C.centroid&&!C.geometry)return null;C.centroid||(C.centroid=w.getCentroidOptimizedGeometry(new A,C.geometry,K.hasZ,K.hasM));return z(K,C.centroid,D)};d.getGeometry=function(K,C,D,g,H,S,M=C,ha=D){const na=C&&M,P=D&&ha;g=t.isSome(g)?"coords"in g?g:g.geometry:
null;if(t.isNone(g))return null;if(H)return C=u.generalizeOptimizedGeometry(ka,g,C,D,K,H,M,ha),S&&(C=u.quantizeOptimizedGeometry(N,C,na,P,K,S)),L[K](C,na,P);if(S)return S=u.quantizeOptimizedGeometry(N,g,C,D,K,S,M,ha),L[K](S,na,P);u.removeZMValues(X,g,C,D,M,ha);return L[K](X,na,P)};d.normalizeQuery=function(K,C,D){return a.apply(this,arguments)};d.normalizeQueryLike=h;d.transformCentroid=z;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(k,d,ca,V,t,B,E,n){function q(I,O,da){if(I)for(const ra of I)(I=(I=B.getDeepValue(ra,O))&&"function"!==typeof I&&da.get(I))&&B.setDeepValue(ra,I.name,O)}function p(I,O){if(!I||!O)return[];m.clear();w(m,I,O);return Array.from(m).sort()}function w(I,O,da){var ra;if(da)if(null!=O&&null!=(ra=O.fields)&&ra.length)if(da.includes("*"))for(const {name:sa}of O.fields)I.add(sa);else for(const sa of da)u(I,O,sa);else if(da.includes("*"))I.clear(),I.add("*");else for(const sa of da)I.add(sa)}function u(I,
O,da){"string"===typeof da&&(O?(O=O.get(da))&&I.add(O.name):I.add(da))}function A(I,O,da){return e.apply(this,arguments)}function e(){e=ca._asyncToGenerator(function*(I,O,da){var ra;if(da){var {arcadeUtils:sa}=yield n.loadArcade();da=sa.extractFieldNames(da,null==O?void 0:null==(ra=O.fields)?void 0:ra.map(xa=>xa.name));for(const xa of da)u(I,O,xa)}});return e.apply(this,arguments)}function z(I,O,da){return a.apply(this,arguments)}function a(){a=ca._asyncToGenerator(function*(I,O,da){if(da&&"1\x3d1"!==
da){const ra=(yield new Promise((sa,xa)=>k(["../../core/sql/WhereClause"],sa,xa))).WhereClause.create(da,O);if(!ra.isStandardized)throw new V("fieldUtils:collectFilterFields","Where clause is not standardized",{where:da});w(I,O,ra.fieldNames)}});return a.apply(this,arguments)}function h(I,O){for(const da of I)if(da&&da.valueType&&da.valueType===O)return da.name;return null}function J(){J=ca._asyncToGenerator(function*(I){if(!I)return[];const O=new Set;yield R(O,I);return Array.from(O).sort()});return J.apply(this,
arguments)}function R(I,O){return r.apply(this,arguments)}function r(){r=ca._asyncToGenerator(function*(I,O){if(O){var da=B.getDeepValue("elevationInfo.featureExpressionInfo",O);if(da)return da.collectRequiredFields(I,O.fieldsIndex)}});return r.apply(this,arguments)}function x(I,O,da){return y.apply(this,arguments)}function y(){y=ca._asyncToGenerator(function*(I,O,da){da.outStatistic.onStatisticValueExpression?A(I,O,da.outStatistic.onStatisticValueExpression):I.add(da.outStatistic.onStatisticField)});
return y.apply(this,arguments)}function T(){T=ca._asyncToGenerator(function*(I,O,da){var ra,sa;if(O&&da&&"fields"in da){var xa=[];null!=(ra=da.popupTemplate)&&ra.expressionInfos&&xa.push(...da.popupTemplate.expressionInfos.map(Aa=>A(I,O.fieldsIndex,Aa.expression)));if(Array.isArray(null==(sa=da.popupTemplate)?void 0:sa.content)){ra=da.popupTemplate.content;for(const Aa of ra)"expression"===Aa.type&&Aa.expressionInfo&&xa.push(A(I,O.fieldsIndex,Aa.expressionInfo.expression))}da.fields&&xa.push(...da.fields.map(Aa=>
x(I,O.fieldsIndex,Aa)));yield Promise.all(xa)}});return T.apply(this,arguments)}function ba(){ba=ca._asyncToGenerator(function*(I,O,da){O&&(O.timeInfo&&t.isSome(da)&&da.timeExtent&&w(I,O.fieldsIndex,[O.timeInfo.startField,O.timeInfo.endField]),O.floorInfo&&w(I,O.fieldsIndex,[O.floorInfo.floorField]),t.isSome(da)&&t.isSome(da.where)&&(yield z(I,O.fieldsIndex,da.where)))});return ba.apply(this,arguments)}function X(){X=ca._asyncToGenerator(function*(I,O,da){O&&da&&(yield Promise.all(da.map(ra=>ka(I,
O,ra))))});return X.apply(this,arguments)}function ka(I,O,da){return N.apply(this,arguments)}function N(){N=ca._asyncToGenerator(function*(I,O,da){O&&da&&(da.valueExpression?yield A(I,O.fieldsIndex,da.valueExpression):da.field&&u(I,O.fieldsIndex,da.field))});return N.apply(this,arguments)}function L(){L=ca._asyncToGenerator(function*(I){if(!I)return[];const O="timeInfo"in I&&I.timeInfo;return O?p(I.fieldsIndex,[I.trackIdField,O.startField,O.endField]):[]});return L.apply(this,arguments)}function Q(){Q=
ca._asyncToGenerator(function*(I){if(!I)return[];const O=new Set;yield K(O,I);return Array.from(O).sort()});return Q.apply(this,arguments)}function K(I,O){return C.apply(this,arguments)}function C(){C=ca._asyncToGenerator(function*(I,O){const {labelingInfo:da,fieldsIndex:ra}=O;da&&da.length&&(yield Promise.all(da.map(sa=>D(I,ra,sa))))});return C.apply(this,arguments)}function D(I,O,da){return g.apply(this,arguments)}function g(){g=ca._asyncToGenerator(function*(I,O,da){if(da){var ra=da.getLabelExpression();
da=da.where;"arcade"===ra.type?yield A(I,O,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{u(I,O,sa.slice(1,-1))});yield z(I,O,da)}});return g.apply(this,arguments)}function H(I){return"number"===typeof I&&!isNaN(I)&&isFinite(I)}function S(I){return null===I||H(I)}function M(I){return null===I||fa(I)}function ha(I){return null!=I&&"string"===typeof I}function na(I){return null===I||ha(I)}function P(){return!0}function ma(I,O){let da;switch(I.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=
I.nullable?M:fa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=I.nullable?S:H;break;case "string":case "esriFieldTypeString":da=I.nullable?na:ha;break;default:da=P}return 1===arguments.length?da:da(O)}function oa(I){return null!=I&&G.has(I.type)}function qa(I,O){return I.nullable&&null===O?null:oa(I)&&!wa(I.type,Number(O))?d.NumericRangeValidationError.OUT_OF_RANGE:ma(I,O)?I.domain?E.validateDomainValue(I.domain,O):null:d.TypeValidationError.INVALID_TYPE}
function wa(I,O){return(I="string"===typeof I?Ja(I):I)?I.isInteger?fa(O)&&O>=I.min&&O<=I.max:O>=I.min&&O<=I.max:!1}function Ja(I){switch(I){case "esriFieldTypeSmallInteger":case "small-integer":return W;case "esriFieldTypeInteger":case "integer":return Y;case "esriFieldTypeSingle":case "single":return ja;case "esriFieldTypeDouble":case "double":return ia}}function Da(I,O,da){if(!O||!O.attributes||!I){if(t.isSome(da))for(var ra of I)da.add(ra);return!0}O=O.attributes;ra=!1;for(const sa of I)if(!(sa in
O))if(ra=!0,t.isSome(da))da.add(sa);else break;return ra}function Ma(){Ma=ca._asyncToGenerator(function*(I,O){const da=new Set;for(const ra of O)yield A(da,I.fieldsIndex,ra);return Array.from(da).sort()});return Ma.apply(this,arguments)}const Za="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],m=new Set,fa=(()=>"isInteger"in Number?
Number.isInteger:I=>"number"===typeof I&&isFinite(I)&&Math.floor(I)===I)(),l=["integer","small-integer","single","double"],G=new Set([...l,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const W={min:-32768,max:32767,isInteger:!0},Y={min:-2147483648,max:2147483647,isInteger:!0},ja={min:-3.4E38,max:1.2E38,isInteger:!1},ia={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=A;d.collectElevationFields=R;d.collectFeatureReductionFields=function(I,O,da){return T.apply(this,arguments)};d.collectField=u;d.collectFields=w;d.collectFilterFields=function(I,O,da){return ba.apply(this,arguments)};d.collectLabelingFields=K;d.collectOrderByInfos=function(I,O,da){return X.apply(this,
arguments)};d.doubleRange=ia;d.featureHasFields=function(I,O){return!Da(I,O,null)};d.fixFields=p;d.fixRendererFields=function(I,O){if(null!=I&&null!=O)for(const da of Array.isArray(I)?I:[I])if(q(Za,da,O),"visualVariables"in da&&da.visualVariables)for(const ra of da.visualVariables)q(c,ra,O)};d.fixTimeInfoFields=function(I,O){if(null!=I&&null!=O&&O.fields.length)if("startField"in I){var da=O.get(I.startField);O=O.get(I.endField);I.startField=da&&da.name||null;I.endField=O&&O.name||null}else da=O.get(I.startTimeField),
O=O.get(I.endTimeField),I.startTimeField=da&&da.name||null,I.endTimeField=O&&O.name||null};d.getDisplayFieldName=function({displayField:I,fields:O}){if(I)return I;if(!O||!O.length)return null;if(!(I=h(O,"name-or-title")||h(O,"unique-identifier")||h(O,"type-or-category")))a:{for(const da of O)if(da&&da.name&&(O=da.name.toLowerCase(),O.includes("name")||O.includes("title"))){I=da.name;break a}I=null}return I};d.getElevationFields=function(I){return J.apply(this,arguments)};d.getExpressionFields=function(I,
O){return Ma.apply(this,arguments)};d.getFeatureEditFields=function(I){if(!I)return[];const O="editFieldsInfo"in I&&I.editFieldsInfo;return O?p(I.fieldsIndex,[O&&O.creatorField,O&&O.creationDateField,O&&O.editorField,O&&O.editDateField]):[]};d.getFeatureGeometryFields=function(I){if(!I)return[];const O=I.geometryFieldsInfo;return O?p(I.fieldsIndex,[O.shapeAreaField,O.shapeLengthField]):[]};d.getFieldDefaultValue=function(I){const O=I.defaultValue;if(void 0!==O&&ma(I,O))return O;if(I.nullable)return null};
d.getFieldRange=function(I){const O=E.getDomainRange(I.domain);if(O)return O;if(oa(I))return Ja(I.type)};d.getLabelingFields=function(I){return Q.apply(this,arguments)};d.getNumericTypeForValue=function(I){if(!H(I))return null;if(fa(I)){if(I>=W.min&&I<=W.max)return"esriFieldTypeSmallInteger";if(I>=Y.min&&I<=Y.max)return"esriFieldTypeInteger"}return I>=ja.min&&I<=ja.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(I){return L.apply(this,arguments)};d.integerRange=Y;d.isDateField=
function(I){return null!=I&&("date"===I.type||"esriFieldTypeDate"===I.type)};d.isNumberInRange=wa;d.isNumericField=oa;d.isRasterPixelValueField=function(I){return["raster.itempixelvalue","raster.servicepixelvalue"].some(O=>I.toLowerCase().startsWith(O))};d.isStringField=function(I){return null!=I&&("string"===I.type||"esriFieldTypeString"===I.type)};d.isValidFieldValue=function(I,O){return null===qa(I,O)};d.isValueMatchingFieldType=ma;d.numericTypes=l;d.packFields=function(I,O,da=1){if(!O||!I)return[];
if(O.includes("*"))return["*"];O=p(I,O);return O.length/I.fields.length>=da?["*"]:O};d.populateMissingFields=Da;d.rendererFields=Za;d.sanitizeNullFieldValue=function(I){return null==I||"number"===typeof I&&isNaN(I)?null:I};d.singleRange=ja;d.smallIntegerRange=W;d.unpackFieldNames=function(I,O){return t.isNone(O)||t.isNone(I)?[]:O.includes("*")?I.fields.map(da=>da.name):O};d.validateFieldValue=qa;d.validationErrorToString=function(I,O,da){switch(I){case E.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;
case E.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${O.name}, type: ${O.type}, nullable: ${O.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Ja(O.type);return`Value ${da} is out of range for the number type - field: ${O.name}, type: ${O.type}, value range is ${ra} to ${sa}`}}};
d.visualVariableFields=c;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(k){function d(ca,V){switch(ca.type){case "range":{const t="range"in ca?ca.range[1]:ca.maxValue;if(+V<("range"in ca?ca.range[0]:ca.minValue)||+V>t)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ca.codedValues||ca.codedValues.every(t=>null==t||t.code!==V))return k.DomainValidationError.INVALID_CODED_VALUE}return null}
k.DomainValidationError=void 0;(function(ca){ca.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ca.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(ca){if(ca&&"range"===ca.type)return{min:"range"in ca?ca.range[0]:ca.minValue,max:"range"in ca?ca.range[1]:ca.maxValue}};k.isValidDomainValue=function(ca,V){return null===d(ca,V)};k.validateDomainValue=d;Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(k,d,ca,V,t,B){function E(){n||(n=ca._asyncToGenerator(function*(){const p=yield new Promise((w,u)=>k(["./arcadeUtils"],w,u));return{arcade:p.arcade,arcadeUtils:p,Dictionary:p.Dictionary,Feature:p.arcadeFeature}})());return n}let n;V=(p,w,u)=>q.create(p,w,u,null,["$feature","$view"]);
let q=function(){function p(u,A,e,z,a,h,J,R){this.script=u;this.evaluate=a;this.fields=Array.isArray(J)?J:J.fields;this._syntaxTree=z;this._arcade=A;this._arcadeDictionary=e;this._arcadeFeature=h;this._spatialReference=R;this._referencesGeometry=A.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}p.create=function(){var u=ca._asyncToGenerator(function*(A,e,z,a,h,J){const {arcade:R,Feature:r,Dictionary:x}=yield E(),y=B.fromJSON(e);
e=R.parseScript(A,J);h=h.reduce((N,L)=>({...N,[L]:null}),{});let T=null;t.isSome(a)&&(T=new x(a),T.immutable=!0,h.$config=null);a=R.scriptUsesGeometryEngine(e)&&R.enableGeometrySupport();J=R.scriptUsesFeatureSet(e)&&R.enableFeatureSetSupport();const ba=R.scriptIsAsync(e)&&R.enableAsyncSupport();h={vars:h,spatialReference:y,useAsync:!!ba};const X=new x;X.immutable=!1;X.setField("scale",0);const ka=R.compileScript(e,h);yield Promise.all([a,J,ba]);return new p(A,R,x,e,N=>{"$view"in N&&N.$view&&(X.setField("scale",
N.$view.scale),N.$view=X);T&&(N.$config=T);return ka({vars:N,spatialReference:y})},new r,z,y)});return function(A,e,z,a,h,J){return u.apply(this,arguments)}}();var w=p.prototype;w.repurposeFeature=function(u){u.geometry&&!u.geometry.spatialReference&&(u.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(u.geometry,u.attributes,{fields:this.fields});return this._arcadeFeature};w.createDictionary=function(){return new this._arcadeDictionary};w.referencesMember=
function(u){return this._arcade.referencesMember(this._syntaxTree,u)};w.referencesFunction=function(u){return this._arcade.referencesFunction(this._syntaxTree,u)};w.referencesGeometry=function(){return this._referencesGeometry};w.referencesScale=function(){return this._referencesScale};w.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return p}();d.ArcadeExpression=q;d.createDictionaryExpression=(p,w,u,A)=>q.create(p,w,u,A,["$feature","$view"]);
d.createLabelExpression=(p,w,u)=>q.create(p,w,u,null,["$feature"]);d.createRendererExpression=V;d.createVVExpression=V;d.loadArcade=E;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A){function e(){return new Promise((J,R)=>k(["../../../geometry/geometryEngineJSON"],J,R))}function z(){z=ca._asyncToGenerator(function*(J,R,r){const {spatialRel:x,geometry:y}=J;if(y){if(!0!==h.spatialRelationship[x])throw new V("feature-store:unsupported-query","Unsupported query spatial relationship",{query:J});if(n.isValid(y.spatialReference)&&n.isValid(r)){if(!0!==h.queryGeometry[E.getJsonType(y)])throw new V("feature-store:unsupported-query","Unsupported query geometry type",
{query:J});if(!0!==h.layerGeometry[R])throw new V("feature-store:unsupported-query","Unsupported layer geometry type",{query:J});if(J.outSR)return u.checkProjectionSupport(J.geometry&&J.geometry.spatialReference,J.outSR)}}});return z.apply(this,arguments)}const a={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},h={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(J){if(E.isExtent(J))return!0;if(E.isPolygon(J)){for(const R of J.rings)if(5!==R.length||R[0][0]!==R[1][0]||R[0][0]!==R[4][0]||R[2][0]!==R[3][0]||R[0][1]!==R[3][1]||R[0][1]!==R[4][1]||R[1][1]!==R[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(J,R,r){return z.apply(this,arguments)};d.getSpatialQueryOperator=function(J,
R,r,x,y){if(E.isPolygon(R)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J)){const T=p.convertFromPolygon(new w,R,!1,!1);return Promise.resolve(ba=>q.polygonContainsPoint(T,!1,!1,ba))}if(E.isPolygon(R)&&"esriGeometryMultipoint"===r){const T=p.convertFromPolygon(new w,R,!1,!1);if("esriSpatialRelContains"===J)return Promise.resolve(ba=>q.polygonContainsMultipoint(T,!1,!1,ba,x,y))}if(E.isExtent(R)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===
J))return Promise.resolve(T=>t.extentContainsPoint(R,A.getGeometry(r,x,y,T)));if(E.isExtent(R)&&"esriGeometryMultipoint"===r&&"esriSpatialRelContains"===J)return Promise.resolve(T=>t.extentContainsMultipoint(R,A.getGeometry(r,x,y,T)));if(E.isExtent(R)&&"esriSpatialRelIntersects"===J){const T=B.getExtentIntersector(r);return Promise.resolve(ba=>T(R,A.getGeometry(r,x,y,ba)))}return e().then(T=>{const ba=T[a[J]].bind(null,R.spatialReference,R);return X=>ba(A.getGeometry(r,x,y,X))})};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,d){k.extentIntersectsExtent=d.extentIntersectsExtent;k.extentIntersectsMultipoint=d.extentIntersectsMultipoint;k.extentIntersectsPoint=d.extentIntersectsPoint;k.extentIntersectsPolygon=d.extentIntersectsPolygon;k.extentIntersectsPolyline=d.extentIntersectsPolyline;k.extentIntersectsRings=d.extentIntersectsRings;k.getFeatureExtentIntersector=
d.getFeatureExtentIntersector;k.isSelfIntersecting=d.isSelfIntersecting;k.segmentIntersects=d.segmentIntersects;k.getExtentIntersector=function(ca){return"mesh"===ca?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ca)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function d(ca,V,t,B,E){if(!ca)return!1;V=V?t?4:3:t?3:2;const {coords:n,lengths:q}=ca;t=!1;ca=0;for(const w of q){var p=
ca;for(let u=ca,A=ca+w*V;u<A;u+=V){p=u+V;p===A&&(p=ca);const e=n[u],z=n[u+1],a=n[p];p=n[p+1];(z<E&&p>=E||p<E&&z>=E)&&e+(E-z)/(p-z)*(a-e)<B&&(t=!t)}ca+=w*V}return t}k.polygonContainsCoords=d;k.polygonContainsMultipoint=function(ca,V,t,B,E,n){E=E?n?4:3:n?3:2;const {coords:q,lengths:p}=B;if(!p)return!1;for(let w=0,u=0;w<p.length;w++,u+=E)if(!d(ca,V,t,q[u],q[u+1]))return!1;return!0};k.polygonContainsPoint=function(ca,V,t,B){return d(ca,V,t,B.coords[0],B.coords[1])};Object.defineProperties(k,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function d(t,B,E,n,q){if(null!=n&&null!=q)return p=>{const w=t.getAttribute(p,B);p=t.getAttribute(p,E);return(null==w||w<=q)&&(null==p||p>=n)};if(null!=n)return p=>{p=t.getAttribute(p,E);return null==p||p>=n};if(null!=q)return p=>{p=t.getAttribute(p,B);return null==p||p<=q}}function ca(t,B,E,n){if(null!=E&&null!=n&&E===n)return q=>t.getAttribute(q,B)===E;if(null!=E&&null!=n)return q=>
{q=t.getAttribute(q,B);return q>=E&&q<=n};if(null!=E)return q=>t.getAttribute(q,B)>=E;if(null!=n)return q=>t.getAttribute(q,B)<=n}function V(){return()=>!1}k.getTimeExtent=function(t,B){if(!t)return null;const E=B.featureAdapter,{startTimeField:n,endTimeField:q}=t;let p=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(n&&q)B.forEach(u=>{const A=E.getAttribute(u,n);u=E.getAttribute(u,q);null==A||isNaN(A)||(p=Math.min(p,A));null==u||isNaN(u)||(w=Math.max(w,u))});else{const u=n||q;B.forEach(A=>
{A=E.getAttribute(A,u);null==A||isNaN(A)||(p=Math.min(p,A),w=Math.max(w,A))})}return{start:p,end:w}};k.getTimeOperator=function(t,B,E){if(!B||!t)return null;const {startTimeField:n,endTimeField:q}=t;if(!n&&!q)return null;const {start:p,end:w}=B;return null===p&&null===w?null:void 0===p&&void 0===w?V():n&&q?d(E,n,q,p,w):ca(E,n||q,p,w)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(k,d){function ca(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function V(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}return function(){function t(E){this.fields=E;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(E){var n=[];for(const q of E)if(E=q&&q.name){const p=E.toLowerCase().trim();this._fieldsMap.set(E,q);this._fieldsMap.set(p,q);n.push(p);
"date"===q.type||"esriFieldTypeDate"===q.type?(this.dateFields.push(q),this._dateFieldsSet.add(q)):d.isNumericField(q)&&(this._numericFieldsSet.add(q),this.numericFields.push(q));ca(q)||V(q)||(q.editable=null==q.editable?!0:!!q.editable,q.nullable=null==q.nullable?!0:!!q.nullable)}n.sort();this.uid=n.join(",")}}var B=t.prototype;B.destroy=function(){this._fieldsMap.clear()};B.has=function(E){return null!=this.get(E)};B.get=function(E){return null!=E?this._fieldsMap.get(E)||this._fieldsMap.get(E.toLowerCase().trim()):
void 0};B.isDateField=function(E){return this._dateFieldsSet.has(this.get(E))};B.isNumericField=function(E){return this._numericFieldsSet.has(this.get(E))};B.normalizeFieldName=function(E){if(E=this.get(E))return E.name};k._createClass(t,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const E of this.fields)ca(E)||V(E)||E.nullable||void 0!==d.getFieldDefaultValue(E)||this._requiredFields.push(E)}return this._requiredFields}}]);return t}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e,z,a,h,J,R){function r(D){return y.has(D)?y.get(D):"number"===typeof D?D:1}const x=B.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(D){D.RESOURCE_CONTROLLER="schedule";D.SLIDE="slide";D.STREAM_DATA_LOADER="stream loader";D.ELEVATION_QUERY="elevation query";D.TERRAIN_SURFACE="terrain";D.SURFACE_GEOMETRY_UPDATES="surface geometry updates";D.GRAPHICS_CORE="Graphics3D";D.I3S_CONTROLLER="I3S";D.POINT_CLOUD_LAYER="point cloud";D.FEATURE_TILE_FETCHER=
"feature fetcher";D.OVERLAY="overlay";D.STAGE="stage";D.GRAPHICS_DECONFLICTOR="graphics deconflictor";D.FILTER_VISIBILITY="Graphics3D filter visibility";D.SCALE_VISIBILITY="Graphics3D scale visibility";D.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";D.POINT_OF_INTEREST_FREQUENT="POI frequent";D.POINT_OF_INTEREST_INFREQUENT="POI infrequent";D.LABELER="labeler";D.FEATURE_QUERY_ENGINE="feature query";D.FEATURE_TILE_TREE="feature tile tree";D.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";D.ELEVATION_ALIGNMENT=
"elevation alignment";D.TEXT_TEXTURE_ATLAS="text texture atlas";D.TEXTURE_UNLOAD="texture unload";D.LINE_OF_SIGHT_TOOL="line of sight tool";D.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";D.ELEVATION_PROFILE="elevation profile";D.SNAPPING="snapping";D.SHADOW_ACCUMULATOR="shadow accumulator";D.CLOUDS_GENERATOR="cloud generator";D[D.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const y=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(D){D[D.ANIMATING=0]="ANIMATING";D[D.INTERACTING=1]="INTERACTING";D[D.IDLE=2]="IDLE"})(k.State||(k.State={}));const T=u.Milliseconds(6.5),ba=u.Milliseconds(1),X=u.Milliseconds(30),ka=u.Milliseconds(1E3/30),N=u.Milliseconds(100);var L;(function(D){let g=function(M){function ha(){var P=M.call(this)||this;P.updating=!0;P._microTaskQueued=!1;P.performanceInfo={total:new n("total"),tasks:new Map};P._frameTaskTimes=new Map;P._budget=new S;P._state=k.State.INTERACTING;P._tasks=
new q;P._runQueue=new q;P._load=0;P._idleStateCallbacks=new q;P._idleUpdatesStartFired=!1;P._maxReschedule=C;P._forceTask=!1;P._debug=!1;P._debugHandle=w.watch(()=>R.SCHEDULER_LOG_SLOW_TASKS,qa=>P._debug=qa,w.initial);for(const qa of Object.keys(k.TaskPriority))P.performanceInfo.tasks.set(k.TaskPriority[qa],new n(k.TaskPriority[qa]));let ma;const oa=d._assertThisInitialized(P);P._test={get state(){return E.unwrapOr(ma,oa._state)},set state(qa){ma=qa},FRAME_SAFETY_BUDGET:T,INTERACTING_BUDGET:ka,IDLE_BUDGET:N,
get availableBudget(){return oa._budget.budget},usedBudget:0,getBudget:()=>oa._budget,setBudget:qa=>oa._budget=qa,updateTask:qa=>P._updateTask(qa),getState:qa=>P._getState(qa),getRuntime:qa=>P._getRuntime(qa),frameTaskTimes:P._frameTaskTimes,resetRuntimes:()=>P._resetRuntimes(),getRunning:()=>P._getRunning()};return P}d._inheritsLoose(ha,M);var na=ha.prototype;na.destroy=function(){this._tasks.toArray().forEach(P=>P.remove());this._tasks.clear();E.removeMaybe(this._debugHandle);this.updating=this._microTaskQueued=
!1};na.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=C,this._schedule(),this.frame()))}))};na.registerTask=function(P,ma){const oa=r(P);ma=new H(this,P,ma,oa);this._tasks.push(ma);this.performanceInfo.tasks.has(P)||this.performanceInfo.tasks.set(P,new n(P));return ma};na.registerIdleStateCallbacks=function(P,ma){const oa={idleBegin:P,idleEnd:ma};this._idleStateCallbacks.push(oa);
this.state===k.State.IDLE&&this._idleUpdatesStartFired&&oa.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(oa),set idleBegin(wa){qa._idleUpdatesStartFired&&(oa.idleEnd(),qa._state===k.State.IDLE&&wa());oa.idleBegin=wa},set idleEnd(wa){oa.idleEnd=wa}}};na.updateBudget=function(P){this._test.usedBudget=0;let ma=T,oa=P.frameDuration,qa=ba;switch(this.state){case k.State.IDLE:ma=u.Milliseconds(0);oa=u.Milliseconds(Math.max(N,P.frameDuration));qa=X;break;case k.State.INTERACTING:oa=
u.Milliseconds(Math.max(ka,P.frameDuration))}oa=u.Milliseconds(oa-P.elapsedFrameTime-ma);if(this.state!==k.State.IDLE&&oa<ba&&!this._forceTask)return this._forceTask=!0,!1;oa=u.Milliseconds(Math.max(oa,qa));this._budget.reset(oa,this.state);this._maxReschedule=C;this._updateLoad();return this._schedule()};na.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(P=>
P.idleBegin()));this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};na.stopFrame=function(){this._budget.reset(u.Milliseconds(0),this._state);this._budget.madeProgress()};na._removeIdleStateCallbacks=function(P){this._idleUpdatesStartFired&&P.idleEnd();this._idleStateCallbacks.removeUnordered(P)};na.removeTask=function(P){this._tasks.removeUnordered(P);this._runQueue.removeUnordered(P)};na._updateTask=
function(P){this._tasks.forAll(ma=>{ma.name===P&&ma.setPriority(P)})};na._getState=function(P){if(this._runQueue.some(oa=>oa.name===P))return k.TaskState.SCHEDULED;let ma=k.TaskState.IDLE;this._tasks.forAll(oa=>{oa.name===P&&oa.needsUpdate&&(1>=oa.schedulePriority?ma=k.TaskState.READY:ma!==k.TaskState.READY&&(ma=k.TaskState.WAITING))});return ma};na._getRuntime=function(P){let ma=0;this._tasks.forAll(oa=>{oa.name===P&&(ma+=oa.runtime)});return ma};na._resetRuntimes=function(){this._tasks.forAll(P=>
P.runtime=0)};na._getRunning=function(){const P=new Map;this._tasks.forAll(oa=>{oa.needsUpdate&&P.set(oa.name,(P.get(oa.name)||0)+1)});if(0===P.size)return null;let ma="";P.forEach((oa,qa)=>{ma=1<oa?ma+` ${oa}x ${qa}`:ma+` ${qa}`});return ma};na._runIdle=function(){this._run()};na._runInteracting=function(){this._run()};na._runAnimating=function(){this._run()};na._updateLoad=function(){const P=this._tasks.reduce((ma,oa)=>oa.needsUpdate?++ma:ma,0);this._load=.9*this._load+P*(1-.9)};na._schedule=function(){if(0>=
this._maxReschedule)return!1;this._runQueue.filterInPlace(P=>{if(P.needsUpdate)return!0;P.schedulePriority=P.basePriority;return!1});for(this._tasks.forAll(P=>{0===P.basePriority&&P.needsUpdate&&!this._runQueue.includes(P)&&this._runQueue.unshift(P)});0===this._runQueue.length;){let P=!1,ma=0;this._tasks.forAll(oa=>{if(oa.needsUpdate&&0!==oa.schedulePriority&&0!==oa.basePriority)switch(P=!0,ma=Math.max(ma,oa.basePriority),oa.schedulePriority){case 1:oa.schedulePriority=0;this._runQueue.push(oa);break;
default:--oa.schedulePriority}});if(!P)return this.updating=!1;this._maxReschedule===C&&(this._maxReschedule=ma);--this._maxReschedule}return this.updating=!0};na._run=function(){const P=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var ma=this._budget.now();const oa=this._runQueue.pop();this._budget.resetProgress();try{oa.task.runTask(this._budget)}catch(qa){x.error(`Exception in task "${oa.name}"`,qa)}oa.schedulePriority=oa.basePriority;ma=this._budget.now()-ma;
oa.runtime+=ma;this._frameTaskTimes.set(oa.priority,this._frameTaskTimes.get(oa.priority)+ma);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",oa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-P);return}}while(this._schedule());this.updating=this._tasks.some(oa=>oa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-P)};
na._startFrameTaskTimes=function(){for(const P of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[P],0)};na._recordFrameTaskTimes=function(P){this._frameTaskTimes.forEach((ma,oa)=>this.performanceInfo.tasks.get(oa).record(ma));this.performanceInfo.total.record(P)};d._createClass(ha,[{key:"load",get:function(){return this._load}},{key:"state",get:function(){return E.isNone(this._test.state)?this._state:this._test.state},set:function(P){this._state!==P&&(this._state=P,this.state!==
k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(ma=>ma.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ha}(V);ca.__decorate([A.property()],g.prototype,"updating",void 0);g=ca.__decorate([h.subclass("esri.views.support.Scheduler")],g);D.Scheduler=g;let H=function(M){function ha(P,ma,oa,qa){var wa=M.call(this,{})||this;wa._scheduler=P;wa.name=ma;wa._basePriority=qa;wa.runtime=0;wa._queue=new J.PromiseQueue;wa._handles=
new t;wa.schedulePriority=wa._basePriority;wa.task=E.isSome(oa)?oa:wa._queue;wa._handles.add(w.when(()=>wa.task.running,()=>P.activate()));return wa}d._inheritsLoose(ha,M);var na=ha.prototype;na.normalizeCtorArgs=function(){return{}};na.remove=function(){this.processQueue(Q);this._scheduler.removeTask(this);this.schedule=K.schedule;this.reschedule=K.reschedule;this._handles.destroy()};na.setPriority=function(P){this.name=P;P=r(P);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=
P;this._basePriority=P};na.schedule=function(P,ma,oa){return this._queue.push(P,ma,oa)};na.reschedule=function(P,ma,oa){return this._queue.unshift(P,ma,oa)};na.processQueue=function(P){this._queue.runTask(P)};d._createClass(ha,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(P){this.setPriority(P)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);
return ha}(V);ca.__decorate([A.property({constructOnly:!0})],H.prototype,"task",void 0);ca.__decorate([A.property({readOnly:!0})],H.prototype,"updating",null);H=ca.__decorate([h.subclass("esri.views.support.SchedulerTask")],H);let S=function(){function M(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ha=M.prototype;ha.run=function(na){if(this.done)return!1;!0===na()&&(this._didWork=!0);return!0};ha.madeProgress=
function(){this._didWork=!0};ha.reset=function(na,P){this._begin=this.now();this._budget=na;this._state=P;this._didWork=!1};ha.now=function(){return performance.now()};ha.resetProgress=function(){this._didWork=!1};d._createClass(M,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(na){this._enabled=
na}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return M}();D.Budget=S})(L||(L={}));k.TaskState=void 0;(function(D){D.SCHEDULED="s";D.READY="r";D.WAITING="w";D.IDLE="i"})(k.TaskState||(k.TaskState={}));const Q=(()=>{const D=new L.Budget;D.enabled=!1;return D})(),K=new (function(){function D(){}var g=D.prototype;g.remove=function(){};
g.processQueue=function(){};g.schedule=function(H,S,M){try{if(p.isAborted(S)){const ha=p.createAbortError();return M?Promise.resolve(M(ha)):Promise.reject(ha)}return p.when(H(Q))}catch(ha){return Promise.reject(ha)}};g.reschedule=function(H,S,M){return this.schedule(H,S,M)};return D}()),C=Number.MAX_SAFE_INTEGER;k.ImmediateTask=K;k.getTaskPriority=r;k.newScheduler=function(){return new L.Scheduler};k.noBudget=Q;k.taskPriorities=y;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,d,ca,V,t,B,E){ca=function(n){function q(w){w=n.call(this,w)||this;w._groups=new Map;return w}k._inheritsLoose(q,n);var p=q.prototype;p.destroy=function(){this.removeAll()};p.add=function(w,u){if(!this._isHandle(w)&&!Array.isArray(w)&&!V.isCollection(w))return this;const A=this._getOrCreateGroup(u);
Array.isArray(w)||V.isCollection(w)?w.forEach(e=>this._isHandle(e)&&A.push(e)):A.push(w);this.notifyChange("size");return this};p.forEach=function(w,u){if("function"===typeof w)this._groups.forEach(A=>A.forEach(w));else{const A=this._getGroup(w);A&&u&&A.forEach(u)}};p.has=function(w){return this._groups.has(this._ensureGroupKey(w))};p.remove=function(w){if(Array.isArray(w)||V.isCollection(w))return w.forEach(this.remove,this),this;if(!this.has(w))return this;const u=this._getGroup(w);for(let A=0;A<
u.length;A++)u[A].remove();this._deleteGroup(w);this.notifyChange("size");return this};p.removeAll=function(){this._groups.forEach(w=>{for(let u=0;u<w.length;u++)w[u].remove()});this._groups.clear();this.notifyChange("size");return this};p._isHandle=function(w){return w&&!!w.remove};p._getOrCreateGroup=function(w){if(this.has(w))return this._getGroup(w);const u=[];this._groups.set(this._ensureGroupKey(w),u);return u};p._getGroup=function(w){return t.assumeNonNull(this._groups.get(this._ensureGroupKey(w)))};
p._deleteGroup=function(w){return this._groups.delete(this._ensureGroupKey(w))};p._ensureGroupKey=function(w){return w||"_default_"};k._createClass(q,[{key:"size",get:function(){let w=0;this._groups.forEach(u=>{w+=u.length});return w}}]);return q}(ca);d.__decorate([B.property({readOnly:!0})],ca.prototype,"size",null);return ca=d.__decorate([E.subclass("esri.core.Handles")],ca)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,d,ca,V,t,B,E,n,q,p,w,u,A,e,z){function a(Q){return Q?Q instanceof L?Q.toArray():Q.length?Array.prototype.slice.apply(Q):[]:[]}function h(Q){if(Q&&Q.length)return Q[0]}function J(Q,K,C,D){K&&K.forEach((g,H,S)=>{Q.push(g);J(Q,C.call(D,g,H,S),C,D)})}var R;let r=function(){function Q(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var K=Q.prototype;K.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};K.reset=function(C){this.defaultPrevented=
!1;this.item=C};return Q}();const x=new E(r,void 0,Q=>{Q.item=null;Q.target=null;Q.defaultPrevented=!1;Q.cancellable=!1}),y=()=>{},T=new Set,ba=new Set,X=new Set,ka=new Map;let N=0,L=R=function(Q,K){function C(g){g=Q.call(this,g)||this;g._chgListeners=[];g._notifications=null;g._timer=null;g._observable=new z.SimpleObservable;g.length=0;g._items=[];Object.defineProperty(k._assertThisInitialized(g),"uid",{value:N++});return g}k._inheritsLoose(C,Q);C.isCollection=function(g){return null!=g&&g instanceof
R};var D=C.prototype;D.normalizeCtorArgs=function(g){return g?Array.isArray(g)||g instanceof R?{items:g}:g:{}};D.destroy=function(){this.removeAll()};D[K]=function*(){yield*this.items};D.hasEventListener=function(g){return"change"===g?0<this._chgListeners.length:this._emitter.hasEventListener(g)};D.on=function(g,H){if("change"===g){const S=this._chgListeners,M={removed:!1,callback:H};S.push(M);this._notifications&&this._notifications.push({listeners:S.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=y;M.removed=!0;S.splice(S.indexOf(M),1)}}}return this._emitter.on(g,H)};D.once=function(g,H){const S=this.on(g,H);return{remove(){S.remove()}}};D.add=function(g,H){e.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;H=this.getNextIndex(null!=H?H:null);this._splice(H,0,[g]);this._emitAfterChanges(n.ObservableChangesType.ADD);return this};D.addMany=function(g,H=this._items.length){e.trackAccess(this._observable);if(!g||!g.length||
this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;H=this.getNextIndex(H);this._splice(H,0,a(g));this._emitAfterChanges(n.ObservableChangesType.ADD);return this};D.at=function(g){e.trackAccess(this._observable);g=Math.trunc(g)||0;0>g&&(g+=this.length);if(!(0>g||g>=this.length))return this._items[g]};D.removeAll=function(){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];const g=this._splice(0,this.length)||[];this._emitAfterChanges(n.ObservableChangesType.REMOVE);
return g};D.clone=function(){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(t.clone)})};D.concat=function(...g){e.trackAccess(this._observable);g=g.map(a);return this._createNewInstance({items:this._items.concat(...g)})};D.drain=function(g,H){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var S=B.assumeNonNull(this._splice(0,this.length)),M=S.length;for(let ha=0;ha<M;ha++)g.call(H,S[ha],ha,S);this._emitAfterChanges(n.ObservableChangesType.REMOVE)}};
D.every=function(g,H){e.trackAccess(this._observable);return this._items.every(g,H)};D.filter=function(g,H){e.trackAccess(this._observable);let S;S=2===arguments.length?this._items.filter(g,H):this._items.filter(g);return this._createNewInstance({items:S})};D.find=function(g,H){e.trackAccess(this._observable);return this._items.find(g,H)};D.findIndex=function(g,H){e.trackAccess(this._observable);return this._items.findIndex(g,H)};D.flatten=function(g,H){e.trackAccess(this._observable);const S=[];
J(S,this,g,H);return new R(S)};D.forEach=function(g,H){e.trackAccess(this._observable);return this._items.forEach(g,H)};D.getItemAt=function(g){e.trackAccess(this._observable);return this._items[g]};D.getNextIndex=function(g){e.trackAccess(this._observable);const H=this.length;g=null==g?H:g;0>g?g=0:g>H&&(g=H);return g};D.includes=function(g,H=0){e.trackAccess(this._observable);return this._items.includes(g,H)};D.indexOf=function(g,H=0){e.trackAccess(this._observable);return this._items.indexOf(g,
H)};D.join=function(g=","){e.trackAccess(this._observable);return this._items.join(g)};D.lastIndexOf=function(g,H=this.length-1){e.trackAccess(this._observable);return this._items.lastIndexOf(g,H)};D.map=function(g,H){e.trackAccess(this._observable);g=this._items.map(g,H);return new R({items:g})};D.reorder=function(g,H=this.length-1){e.trackAccess(this._observable);const S=this.indexOf(g);if(-1!==S){0>H?H=0:H>=this.length&&(H=this.length-1);if(S!==H){if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return g;
this._splice(S,1);this._splice(H,0,[g]);this._emitAfterChanges(n.ObservableChangesType.MOVE)}return g}};D.pop=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var g=h(this._splice(this.length-1,1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return g}};D.push=function(...g){e.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,g);this._emitAfterChanges(n.ObservableChangesType.ADD);
return this.length};D.reduce=function(g,H){e.trackAccess(this._observable);const S=this._items;return 2===arguments.length?S.reduce(g,H):S.reduce(g)};D.reduceRight=function(g,H){e.trackAccess(this._observable);const S=this._items;return 2===arguments.length?S.reduceRight(g,H):S.reduceRight(g)};D.remove=function(g){e.trackAccess(this._observable);return this.removeAt(this.indexOf(g))};D.removeAt=function(g){e.trackAccess(this._observable);if(!(0>g||g>=this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE)))return g=
h(this._splice(g,1)),this._emitAfterChanges(n.ObservableChangesType.REMOVE),g};D.removeMany=function(g){e.trackAccess(this._observable);if(!g||!g.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];g=g instanceof R?g.toArray():g;const H=this._items,S=[],M=g.length;for(let ma=0;ma<M;ma++){var ha=H.indexOf(g[ma]);if(-1<ha){{var na=ma+1;var P=ha+1;const oa=Math.min(g.length-na,H.length-P);let qa=0;for(;qa<oa&&g[na+qa]===H[P+qa];)qa++;na=qa}na=1+na;(ha=this._splice(ha,na))&&0<ha.length&&
S.push.apply(S,ha);ma+=na-1}}this._emitAfterChanges(n.ObservableChangesType.REMOVE);return S};D.reverse=function(){e.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const g=this._splice(0,this.length);g&&(g.reverse(),this._splice(0,0,g));this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};D.shift=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var g=h(this._splice(0,
1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return g}};D.slice=function(g=0,H=this.length){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(g,H)})};D.some=function(g,H){e.trackAccess(this._observable);return this._items.some(g,H)};D.sort=function(g){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const H=B.assumeNonNull(this._splice(0,this.length));arguments.length?H.sort(g):H.sort();
this._splice(0,0,H);this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};D.splice=function(g,H,...S){e.trackAccess(this._observable);const M=(H?n.ObservableChangesType.REMOVE:0)|(S.length?n.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(M))return[];g=this._splice(g,H,S)||[];this._emitAfterChanges(M);return g};D.toArray=function(){e.trackAccess(this._observable);return this._items.slice()};D.toJSON=function(){e.trackAccess(this._observable);return this.toArray()};D.toLocaleString=
function(){e.trackAccess(this._observable);return this._items.toLocaleString()};D.toString=function(){e.trackAccess(this._observable);return this._items.toString()};D.unshift=function(...g){e.trackAccess(this._observable);if(!g.length||this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(0,0,g);this._emitAfterChanges(n.ObservableChangesType.ADD);return this.length};D._createNewInstance=function(g){return new this.constructor(g)};D._splice=function(g,H,S){const M=this._items;
var ha=this.itemType;let na=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(()=>this._dispatchChange()));if(H){na=M.splice(g,H);if(this.hasEventListener("before-remove")){var P=x.acquire();P.target=this;P.cancellable=!0;for(let qa=0,wa=na.length;qa<wa;qa++)H=na[qa],P.reset(H),this.emit("before-remove",P),P.defaultPrevented&&(na.splice(qa,
1),M.splice(g,0,H),g+=1,--qa,--wa);x.release(P)}this.length=this._items.length;if(this.hasEventListener("after-remove")){H=x.acquire();H.target=this;H.cancellable=!1;P=na.length;for(let qa=0;qa<P;qa++)H.reset(na[qa]),this.emit("after-remove",H);x.release(H)}}if(S&&S.length){if(ha){H=[];for(var ma of S)S=ha.ensureType(ma),null==S&&null!=ma||H.push(S);S=H}ha=this.hasEventListener("before-add");ma=this.hasEventListener("after-add");H=g===this.length;if(ha||ma){var oa=x.acquire();oa.target=this;oa.cancellable=
!0;P=x.acquire();P.target=this;P.cancellable=!1;for(const qa of S)ha?(oa.reset(qa),this.emit("before-add",oa),oa.defaultPrevented||(H?M.push(qa):M.splice(g++,0,qa),this._set("length",M.length),ma&&(P.reset(qa),this.emit("after-add",P)))):(H?M.push(qa):M.splice(g++,0,qa),this._set("length",M.length),P.reset(qa),this.emit("after-add",P));x.release(P);x.release(oa)}else{if(H)for(oa of S)M.push(oa);else M.splice(g,0,...S);this._set("length",M.length)}}(S&&S.length||na&&na.length)&&this._notifyChangeEvent(S,
na);return na};D._emitBeforeChanges=function(g){let H=!1;if(this.hasEventListener("before-changes")){const S=x.acquire();S.target=this;S.cancellable=!0;S.type=g;this.emit("before-changes",S);H=S.defaultPrevented;x.release(S)}return H};D._emitAfterChanges=function(g){if(this.hasEventListener("after-changes")){const H=x.acquire();H.target=this;H.cancellable=!1;H.type=g;this.emit("after-changes",H);x.release(H)}this._observable.notify()};D._notifyChangeEvent=function(g,H){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:g,removed:H})};D._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var g=this._notifications;this._notifications=null;for(const H of g){g=H.changes;T.clear();ba.clear();X.clear();for(const {added:ma,removed:oa}of g){if(ma)if(0===X.size&&0===ba.size)for(const qa of ma)T.add(qa);else for(const qa of ma)ba.has(qa)?(X.add(qa),ba.delete(qa)):X.has(qa)||T.add(qa);
if(oa)if(0===X.size&&0===T.size)for(const qa of oa)ba.add(qa);else for(const qa of oa)T.has(qa)?T.delete(qa):(X.delete(qa),ba.add(qa))}const S=ca.acquire();T.forEach(ma=>{S.push(ma)});const M=ca.acquire();ba.forEach(ma=>{M.push(ma)});const ha=this._items,na=H.items,P=ca.acquire();X.forEach(ma=>{na.indexOf(ma)!==ha.indexOf(ma)&&P.push(ma)});if(H.listeners&&(S.length||M.length||P.length)){g={target:this,added:S,removed:M,moved:P};const ma=H.listeners.length;for(let oa=0;oa<ma;oa++){const qa=H.listeners[oa];
qa.removed||qa.callback.call(this,g)}}ca.release(S);ca.release(M);ca.release(P)}T.clear();ba.clear();X.clear()}};k._createClass(C,[{key:"items",get:function(){e.trackAccess(this._observable);return this._items},set:function(g){this._emitBeforeChanges(n.ObservableChangesType.ADD)||(this._splice(0,this.length,a(g)),this._emitAfterChanges(n.ObservableChangesType.ADD))}}]);return C}(V.EventedAccessor,Symbol.iterator);L.ofType=Q=>{if(!Q)return R;if(ka.has(Q))return ka.get(Q);let K=null;if("function"===
typeof Q)K=Q.prototype.declaredClass;else if(Q.base)K=Q.base.prototype.declaredClass;else for(var C in Q.typeMap){const D=Q.typeMap[C].prototype.declaredClass;K=K?K+` | ${D}`:D}C=function(D){function g(){return D.apply(this,arguments)||this}k._inheritsLoose(g,D);return g}(R);d.__decorate([u.shared({Type:Q,ensureType:"function"===typeof Q?w.ensureType(Q):w.ensureOneOfType(Q)})],C.prototype,"itemType",void 0);C=d.__decorate([A.subclass(`esri.core.Collection<${K}>`)],C);ka.set(Q,C);return C};d.__decorate([p.property()],
L.prototype,"length",void 0);d.__decorate([p.property()],L.prototype,"items",null);return L=R=d.__decorate([A.subclass("esri.core.Collection")],L)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var d=k.ObservableChangesType||(k.ObservableChangesType={});d[d.ADD=1]="ADD";d[d.REMOVE=2]="REMOVE";d[d.MOVE=4]="MOVE";Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(d){return(ca,V)=>{ca[V]=d}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,d,ca,V,t,B,E){function n(A,e,z={}){return q(A,e,z,w)}function q(A,e,z={},a){let h=null;const J=z.once?(R,r)=>{a(R)&&(V.removeMaybe(h),e(R,r))}:(R,r)=>{a(R)&&e(R,r)};h=B.watchTracked(A,
J,z.sync,z.equals);z.initial&&(A=A(),J(A,A));return h}function p(A,e,z){if(t.isAborted(z))return Promise.reject(t.createAbortError());const a=A();if(null!=e&&e(a))return Promise.resolve(a);let h=null;return new Promise((J,R)=>{h=ca.handlesGroup([t.onAbort(z,()=>{h=V.removeMaybe(h);R(t.createAbortError())}),q(A,r=>{h=V.removeMaybe(h);J(r)},{sync:!1,once:!0},null!=e?e:w)])})}function w(A){return!0}function u(A){return!!A}k.autorun=E.autorun;k.initial={initial:!0};k.on=function(A,e,z,a={}){function h(){R&&
r&&(r.remove(),null==a.onListenerRemove?void 0:a.onListenerRemove(R),r=R=null)}function J(T){a.once&&a.once&&V.removeMaybe(x);z(T)}let R=null,r=null,x=null;const y=n(A,(T,ba)=>{h();d.isEventTarget(T)&&(R=T,r=d.on(T,e,J),null==a.onListenerAdd?void 0:a.onListenerAdd(T))},{sync:a.sync,initial:!0});return x=ca.makeHandle(()=>{y.remove();h()})};k.once=function(A,e){return p(A,null,e)};k.pausable=function(A,e,z={}){let a=!1;const h=n(A,(J,R)=>{a||e(J,R)},z);return{remove(){h.remove()},pause(){a=!0},resume(){a=
!1}}};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=n;k.when=function(A,e,z={}){return q(A,e,z,u)};k.whenOnce=function(A,e){return p(A,u,e)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,V,t,B,E,n,q,p){k.PromiseQueue=function(u){function A(){var z=u.apply(this,arguments)||this;z._tasks=[];z.running=!1;return z}d._inheritsLoose(A,u);var e=A.prototype;e.destroy=function(){this.cancelAll()};e.runTask=function(z){for(;!z.done&&this._process(z);)z.madeProgress()};e.push=function(z,a,h){this.running=!0;return new Promise((J,R)=>this._tasks.push(new w(J,R,z,a,h)))};e.unshift=function(z,a,h){this.running=!0;return new Promise((J,R)=>this._tasks.unshift(new w(J,R,z,a,h)))};
e._process=function(z){if(0===this._tasks.length)return!1;const a=this._tasks.shift();try{const h=t.isAborted(a.signal);if(h&&!a.abortCallback)a.reject(t.createAbortError());else{const J=h?a.abortCallback(t.createAbortError()):a.callback(z);t.isPromiseLike(J)?J.then(a.resolve,a.reject):a.resolve(J)}}catch(h){a.reject(h)}this.running=0<this._tasks.length;return!0};e.cancelAll=function(){const z=t.createAbortError();for(const a of this._tasks)if(a.abortCallback){const h=a.abortCallback(z);a.resolve(h)}else a.reject(z);
this._tasks.length=0;this.running=!1};d._createClass(A,[{key:"length",get:function(){return this._tasks.length}}]);return A}(V);ca.__decorate([B.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=ca.__decorate([p.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let w=function(u,A,e,z,a){this.resolve=u;this.reject=A;this.callback=e;this.signal=z;this.abortCallback=a};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,ca,V,t,B,E,n){ca=function(q){function p(){var w=q.apply(this,arguments)||this;w.SCHEDULER_LOG_SLOW_TASKS=!1;w.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return w}k._inheritsLoose(p,q);return p}(ca);d.__decorate([V.property()],ca.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([V.property()],ca.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ca=d.__decorate([n.subclass("esri.views.support.DebugFlags")],ca);return new ca})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports"],
function(k){function*d(n,q,p){let w=0;for(;w<=n.length;){var u=n.indexOf(q,w);u=n.substring(w,-1<u?u:void 0);w+=u.length+q.length;if(!p||u.trim())yield u}}function ca(n,q){return d(n,q,!1)}function V(n){let q=0,p;for(p=n.indexOf('"',0);0<=p;)q++,p=n.indexOf('"',p+1);return q}const t=/^\s*"([\S\s]*)"\s*$/,B=/""/g,E=[","," ",";","|","\t"];k.inferDelimiter=function(n){n=n.trim();let q=0,p="";for(const w of E){const u=n.split(w).length;u>q&&(q=u,p=w)}return""===p?null:p};k.parseRows=function*(n,q,p,w=
()=>Object.create(null)){var u="";let A="",e=0,z=w(),a=0;a:for(const h of n){n=ca(h,p);for(const J of n)if(u+=A+J,A="",e+=V(J),0===e%2){if(0<e)if(u=t.exec(u))z[q[a]]=u[1].replace(B,'"'),a++;else{z=w();a=0;u="";e=0;continue a}else z[q[a]]=u,a++;u="";e=0}else A=p;0===e?(yield z,z=w(),a=0):A="\n"}};k.readRowParts=ca;k.readRows=function(n){const q=n.includes("\r\n")?"\r\n":"\n";return d(n,q,!0)};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,d,ca,V,t){const B=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let E=1;k.createCapabilities=function(n,q){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:q,supportsDelete:q,
supportsEditing:q,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:q,supportsExceedsLimitStatistics:!0},query:V.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:q,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,
supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=function(n,q){if(d("esri-csp-restrictions"))return()=>({[q]:null,...n});try{let p=`this.${q} = null;`;for(const u in n){const A=B.test(u)?`.${u}`:`["${u}"]`;p+=`this${A} = ${JSON.stringify(n[u])};`}const w=(new Function(`\n      return class AttributesClass$${E++} {\n        constructor() {\n          ${p};\n        }\n      }\n    `))();
return()=>new w}catch(p){return()=>({[q]:null,...n})}};k.createDefaultTemplate=function(n={}){return[{name:"New Feature",description:"",prototype:{attributes:ca.clone(n)}}]};k.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?t.defaultPointSymbolJSON:"esriGeometryPolyline"===n?t.defaultPolylineSymbolJSON:t.defaultPolygonSymbolJSON}}};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(k){const d=[252,146,31,255],ca={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},V={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};k.defaultColor=d;k.defaultOutlineColor=[153,153,153,255];k.defaultPointSymbolJSON=ca;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=
V;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/inferenceUtils":function(){define(["exports","../../../../core/number","../csv/csv"],function(k,d,ca){function V(w){if(!w.length)return"string";const u=/[^+-.,0-9]/;return w.map(A=>{var e=!1;if(""!==A){if(u.test(A))e=!0;else{e=B(A);if(!isNaN(e))return/[.,]/.test(A)||!Number.isInteger(e)||214783647<e||-214783648>e?"double":"integer";if(A.includes("E"))if(e=
Number(A),isNaN(e))if(A.includes(","))if(A=A.replace(",","."),e=Number(A),isNaN(e))e=!0;else return"double";else e=!0;else return"double";else e=!0}return e&&!/^[-]?\d*[.,]?\d*$/.test(A)&&t(new Date(A),A)?"date":"string"}}).reduce((A,e)=>{if(void 0===A||A===e)return e;if("string"===A||"string"===e)return"string";if("double"===A||"double"===e)return"double"})}function t(w,u){if(!w||"[object Date]"!==Object.prototype.toString.call(w)||isNaN(w.getTime()))return!1;w=!0;if(!n&&/\d+\W*$/.test(u)&&(u=u.match(/[a-zA-Z]{2,}/))){w=
!1;let A=0;for(;!w&&A<=u.length;)w=!E.test(u[A]),A++;w=!w}return w}const B=function(){const w=d._parseInfo(),u=new RegExp("^"+w.regexp+"$"),A=new RegExp("["+w.group+"\\s\\xa0]","g"),e=w.factor;return z=>{z=u.exec(z);w.factor=e;if(!z)return NaN;let a=z[1];if(!z[1]){if(!z[2])return NaN;a=z[2];w.factor*=-1}a=a.replace(A,"").replace(w.decimal,".");return+a*w.factor}}(),E=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
n=Number.isNaN((new Date("technology 10")).getTime()),q="lat latitude latitude83 latdecdeg lat_dd y ycenter point-y".split(" "),p="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point-x".split(" ");k.inferFieldType=V;k.inferFields=function(w,u,A,e){const z=[];u=ca.parseRows(w,A,u);w=[];for(var a of u){if(10===w.length)break;w.push(a)}for(const h of A)if(h===e.longitudeFieldName||h===e.latitudeFieldName)z.push({name:h,type:"esriFieldTypeDouble",alias:h});else{A=w.map(J=>J[h]);A=V(A);
a={name:h,type:null,alias:h};switch(A){case "integer":a.type="esriFieldTypeInteger";break;case "double":a.type="esriFieldTypeDouble";break;case "date":a.type="esriFieldTypeDate";a.length=36;break;default:a.type="esriFieldTypeString",a.length=255}z.push(a)}return z};k.inferLocationInfo=function(w){const u=w.map(A=>A.toLowerCase());return{longitudeFieldName:w[u.indexOf(p.find(A=>u.includes(A)))],latitudeFieldName:w[u.indexOf(q.find(A=>u.includes(A)))]}};k.isValidDate=t;k.parseNumber=B;Object.defineProperties(k,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(k,d,ca){function V(u){u||(u=ca.getLocale());let A=u in q;if(!A){const h=u.split("-");1<h.length&&h[0]in q&&(u=h[0],A=!0);A||(u="en")}const [e,z,a="#,##0.###"]=q[u];return{decimal:e,group:z,pattern:a}}function t(u,A,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);A=A.split(".");var z="string"===typeof e.places&&e.places.indexOf(","),
a=e.places;z?a=e.places.substring(z+1):0<=a||(a=(A[1]||[]).length);0>e.round||(u=Number(u.toFixed(Number(a))));u=String(Math.abs(u)).split(".");const h=u[1]||"";A[1]||e.places?(z&&(e.places=e.places.substring(0,z)),z=void 0!==e.places?e.places:A[1]&&A[1].lastIndexOf("0")+1,z>h.length&&(u[1]=h.padEnd(Number(z),"0")),a<h.length&&(u[1]=h.substr(0,Number(a)))):u[1]&&u.pop();a=A[0].replace(",","");z=a.indexOf("0");-1!==z&&(z=a.length-z,z>u[0].length&&(u[0]=u[0].padStart(z,"0")),a.includes("#")||(u[0]=
u[0].substr(u[0].length-z)));a=A[0].lastIndexOf(",");let J,R;-1!==a&&(J=A[0].length-a-1,A=A[0].substr(0,a),a=A.lastIndexOf(","),-1!==a&&(R=A.length-a-1));A=[];for(a=u[0];a;)z=a.length-J,A.push(0<z?a.substr(z):a),a=0<z?a.slice(0,z):"",R&&(J=R,R=void 0);u[0]=A.reverse().join(e.group||",");return u.join(e.decimal||".")}function B(u){u=u||{};var A=V(u.locale);const e=u.pattern||A.pattern,z=A.group,a=A.decimal;let h=1;if(e.includes("%"))h/=100;else if(e.includes("\u2030"))h/=1E3;else if(e.includes("\u00a4"))throw Error("currency notation not supported");
A=e.split(";");1===A.length&&A.push("-"+A[0]);return{regexp:w(A,J=>{J="(?:"+d.escapeRegExpString(J,".")+")";return J.replace(p,R=>{const r={signed:!1,separator:u.strict?z:[z,""],fractional:u.fractional,decimal:a,exponent:!1};R=R.split(".");let x=u.places;1===R.length&&1!==h&&(R[1]="###");1===R.length||0===x?r.fractional=!1:(void 0===x&&(x=u.pattern?R[1].lastIndexOf("0")+1:Infinity),x&&null==u.fractional&&(r.fractional=!0),!u.places&&x<R[1].length&&(x+=","+R[1].length),r.places=x);R=R[0].split(",");
1<R.length&&(r.groupSize=R.pop().length,1<R.length&&(r.groupSize2=R.pop().length));return"("+E(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:z,decimal:a,factor:h}}function E(u){u=u||{};"places"in u||(u.places=Infinity);"string"!==typeof u.decimal&&(u.decimal=".");"fractional"in u&&!/^0/.test(String(u.places))||(u.fractional=[!0,!1]);"exponent"in u||(u.exponent=[!0,!1]);"eSigned"in u||(u.eSigned=[!0,!1]);var A=n(u);const e=w(u.fractional,a=>{let h="";a&&0!==u.places&&(h="\\"+u.decimal,h=Infinity===
u.places?"(?:"+h+"\\d+)?":h+("\\d{"+u.places+"}"));return h},!0),z=w(u.exponent,a=>a?"([eE]"+n({signed:u.eSigned})+")":"");A+=e;e&&(A="(?:(?:"+A+")|(?:"+e+"))");return A+z}function n(u){u=u||{};"signed"in u||(u.signed=[!0,!1]);"separator"in u?"groupSize"in u||(u.groupSize=3):u.separator="";const A=w(u.signed,z=>z?"[-+]":"",!0),e=w(u.separator,z=>{if(!z)return"(?:\\d+)";z=d.escapeRegExpString(z);" "===z?z="\\s":"\u00a0"===z&&(z="\\s\\xa0");const a=u.groupSize,h=u.groupSize2;return h?(z="(?:0|[1-9]\\d{0,"+
(h-1)+"}(?:["+z+"]\\d{"+h+"})*["+z+"]\\d{"+a+"})",0<a-h?"(?:"+z+"|(?:0|[1-9]\\d{0,"+(a-1)+"}))":z):"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+z+"]\\d{"+a+"})*)"},!0);return A+e}const q={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},p=/[#0,]*[#0](?:\.0*#*)?/,w=(u,A,e)=>{if(!(u instanceof Array))return A(u);const z=[];for(let a=0;a<u.length;a++)z.push(A(u[a]));
u=z.join("|");return"("+(e?"?:":"")+u+")"};k._parseInfo=B;k.format=function(u,A){A={...A};var e=V(A.locale);A.customs=e;var z=A.pattern||e.pattern;if(isNaN(u)||Infinity===Math.abs(u))return null;{A=A||{};e=A.customs.group;const h=A.customs.decimal;z=z.split(";");var a=z[0];z=z[0>u?1:0]||"-"+a;if(z.includes("%"))u*=100;else if(z.includes("\u2030"))u*=1E3;else{if(z.includes("\u00a4"))throw Error("currency notation not supported");if(z.includes("E"))throw Error("exponential notation not supported");
}const J=p;a=a.match(J);if(!a)throw Error("unable to find a number expression in pattern: "+z);!1===A.fractional&&(A.places=0);u=z.replace(J,t(u,a[0],{decimal:h,group:e,places:A.places,round:A.round}))}return u};k.getCustoms=V;k.parse=function(u,A){A=B(A);u=(new RegExp("^"+A.regexp+"$")).exec(u);if(!u)return NaN;let e=u[1];if(!u[1]){if(!u[2])return NaN;e=u[2];A.factor*=-1}e=e.replace(new RegExp("["+A.group+"\\s\\xa0]","g"),"").replace(A.decimal,".");return Number(e)*A.factor};k.regexp=function(u){return B(u).regexp};
Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/intl/locale":function(){define(["exports"],function(k){function d(){var z,a;return null!=(z=null!=w?w:null==(a=globalThis.navigator)?void 0:a.language)?z:"en"}function ca(){void 0===p&&(p=d());return p}function V(z=ca()){z=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(z);return null==z?void 0:z[1].toLowerCase()}function t(){var z;const a=null!=(z=q)?z:d();p!==a&&(p=a,[...e].forEach(h=>{h.call(null,a)}),[...A].forEach(h=>
{h.call(null,a)}))}var B,E,n;let q=void 0,p=void 0;const w=null!=(B=null==(E=globalThis.esriConfig)?void 0:E.locale)?B:null==(n=globalThis.dojoConfig)?void 0:n.locale,u={he:!0,ar:!0},A=[],e=[];null==globalThis.addEventListener?void 0:globalThis.addEventListener("languagechange",t);k.beforeLocaleChange=function(z){e.push(z);return{remove(){A.splice(e.indexOf(z),1)}}};k.getDefaultLocale=d;k.getLanguage=V;k.getLocale=ca;k.onLocaleChange=function(z){A.push(z);return{remove(){A.splice(A.indexOf(z),1)}}};
k.prefersRTL=function(z=ca()){z=V(z);return void 0!==z&&(u[z]||!1)};k.setLocale=function(z){q=z?z:void 0;t()};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ./inferenceUtils ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(k,
d,ca,V,t,B,E,n,q,p,w,u,A,e,z,a,h,J,R,r,x,y){function T(L,Q){var K=Q.parsingOptions||{};const C={delimiter:K.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:K.latitudeField,longitudeFieldName:K.longitudeField}};var D=h.readRows(L),g=D.next().value;if(!g)throw new V("csv-layer:empty-csv","CSV is empty",{csv:L});g=g.trim();if(!K.delimiter){L=h.inferDelimiter(g);if(!L)throw new V("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");C.delimiter=L}g=g.split(C.delimiter).filter(ha=>
!!ha);const H=C.layerDefinition={name:E.getFilename(Q.url,X)||"csv",drawingInfo:ba,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:K.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:K.spatialReference||{wkid:102100}}};if(!K.latitudeField||!K.longitudeField){Q=R.inferLocationInfo(g);if(!K.longitudeField&&!Q.longitudeFieldName||!K.latitudeField&&!Q.latitudeFieldName)throw new V("csv-layer:location-fields-not-found",
"Unable to identify latitude and longitude fields from the CSV file");C.locationInfo={longitudeFieldName:K.longitudeField||Q.longitudeFieldName,latitudeFieldName:K.latitudeField||Q.latitudeFieldName}}D=R.inferFields(D,C.delimiter,g,C.locationInfo);if(K.fields&&K.fields.length){Q=new Map;for(var S of K.fields)Q.set(S.name.toLowerCase(),S);for(var M of D)if(K=Q.get(M.name.toLowerCase()))S=M.name,Object.assign(M,K),M.name=S}H.fields=D;H.fields.some(ha=>"esriFieldTypeOID"===ha.type?(H.objectIdField=ha.name,
!0):!1)||(M={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},H.objectIdField=M.name,H.fields.unshift(M));H.timeInfo&&(K=new r(H.fields),M=H.timeInfo,M.startTimeField&&((S=K.get(M.startTimeField))?(M.startTimeField=S.name,S.type="esriFieldTypeDate"):M.startTimeField=null),M.endTimeField&&((S=K.get(M.endTimeField))?(M.endTimeField=S.name,S.type="esriFieldTypeDate"):M.endTimeField=null),M.trackIdField&&(K=K.get(M.trackIdField),M.trackIdField=K?K.name:null),M.startTimeField||
M.endTimeField||(H.timeInfo=null));return C}const ba=J.createDrawingInfo("esriGeometryPoint"),X=["csv"],ka=[0,0];let N=function(L,Q){this.x=L;this.y=Q};return function(){function L(){var K=this;this._queryEngine=null;this._snapshotFeatures=function(){var C=k._asyncToGenerator(function*(D){D=yield K._fetch(D);return K._createFeatures(D)});return function(D){return C.apply(this,arguments)}}()}var Q=L.prototype;Q.destroy=function(){var K;null==(K=this._queryEngine)?void 0:K.destroy();this._queryEngine=
null};Q.load=function(){var K=k._asyncToGenerator(function*(C,D={}){var g;this.loadOptions=C;[D]=yield Promise.all([this._fetch(D.signal),this._checkProjection(null==C?void 0:null==(g=C.parsingOptions)?void 0:g.spatialReference)]);C=T(D,C);this.locationInfo=C.locationInfo;this.delimiter=C.delimiter;this._queryEngine=this._createQueryEngine(C);g=yield this._createFeatures(D);this._queryEngine.featureStore.addMany(g);C.layerDefinition.extent=this._queryEngine.fullExtent;if(C.layerDefinition.timeInfo){const {start:H,
end:S}=this._queryEngine.timeExtent;C.layerDefinition.timeInfo.timeExtent=[H,S]}return C});return function(C){return K.apply(this,arguments)}}();Q.applyEdits=function(){var K=k._asyncToGenerator(function*(){throw new V("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return K.apply(this,arguments)}}();Q.queryFeatures=function(){var K=k._asyncToGenerator(function*(C={},D={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(C,
D.signal)});return function(){return K.apply(this,arguments)}}();Q.queryFeatureCount=function(){var K=k._asyncToGenerator(function*(C={},D={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(C,D.signal)});return function(){return K.apply(this,arguments)}}();Q.queryObjectIds=function(){var K=k._asyncToGenerator(function*(C={},D={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(C,D.signal)});return function(){return K.apply(this,arguments)}}();
Q.queryExtent=function(){var K=k._asyncToGenerator(function*(C={},D={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(C,D.signal)});return function(){return K.apply(this,arguments)}}();Q.querySnapping=function(){var K=k._asyncToGenerator(function*(C,D={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(C,D.signal)});return function(C){return K.apply(this,arguments)}}();Q.refresh=function(){var K=k._asyncToGenerator(function*(C){var D;
this.loadOptions.customParameters=C;null==(D=this._snapshotTask)?void 0:D.abort();this._snapshotTask=B.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(g=>{this._queryEngine.featureStore.clear();g&&this._queryEngine.featureStore.addMany(g)},g=>{this._queryEngine.featureStore.clear();B.isAbortError(g)||t.getLogger("esri.layers.CSVLayer").error(new V("csv-layer:refresh","An error occurred during refresh",{error:g}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,
timeExtent:this._queryEngine.timeExtent}});return function(C){return K.apply(this,arguments)}}();Q._waitSnapshotComplete=function(){var K=k._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return K.apply(this,arguments)}}();Q._fetch=function(){var K=k._asyncToGenerator(function*(C){const {url:D,customParameters:g}=this.loadOptions;if(!D)throw new V("csv-layer:invalid-source",
"url not defined");const H=E.urlToObject(D);return(yield ca(H.path,{query:{...H.query,...g},responseType:"text",signal:C})).data});return function(C){return K.apply(this,arguments)}}();Q._createQueryEngine=function(K){const {objectIdField:C,fields:D,extent:g,timeInfo:H}=K.layerDefinition;K=new e({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new a.QueryEngine({fields:D,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:H,objectIdField:C,spatialReference:g.spatialReference||{wkid:4326},
cacheSpatialQueries:!0,featureStore:K})};Q._createFeatures=function(){var K=k._asyncToGenerator(function*(C){const {latitudeFieldName:D,longitudeFieldName:g}=this.locationInfo,{objectIdField:H,fieldsIndex:S,spatialReference:M}=this._queryEngine;let ha=[];const na=[];var P=S.fields.filter(Da=>Da.name!==H).map(Da=>Da.name),ma=0;C=h.readRows(C);C.next();const oa={};for(var qa of S.fields)if("esriFieldTypeOID"!==qa.type&&"esriFieldTypeGlobalID"!==qa.type){const Da=x.getFieldDefaultValue(qa);void 0!==
Da&&(oa[qa.name]=Da)}P=h.parseRows(C,P,this.delimiter,J.createDefaultAttributesFunction(oa,H));for(var wa of P)if(P=this._parseCoordinateValue(wa[D]),qa=this._parseCoordinateValue(wa[g]),null!=qa&&null!=P&&!isNaN(P)&&!isNaN(qa)){wa[D]=P;wa[g]=qa;for(var Ja in wa)Ja!==D&&Ja!==g&&(S.isDateField(Ja)?(C=new Date(wa[Ja]),wa[Ja]=R.isValidDate(C,wa[Ja])?C.getTime():null):S.isNumericField(Ja)&&(C=R.parseNumber(wa[Ja]),isNaN(C)?wa[Ja]=null:wa[Ja]=C));wa[H]=ma;ma++;ha.push(new N(qa,P));na.push(wa)}if(!p.equals({wkid:4326},
M))if(p.isWebMercator(M))for(const Da of ha)[Da.x,Da.y]=w.lngLatToXY(Da.x,Da.y,ka);else ha=n.projectMany(q.jsonAdapter,ha,y.WGS84,M,null,null);ma=[];for(wa=0;wa<ha.length;wa++){const {x:Da,y:Ma}=ha[wa];Ja=na[wa];Ja[H]=wa+1;ma.push(new u.OptimizedFeature(new A([],[Da,Ma]),Ja,null,Ja[H]))}return ma});return function(C){return K.apply(this,arguments)}}();Q._parseCoordinateValue=function(K){if(null==K||""===K)return null;let C=R.parseNumber(K);if(isNaN(C)||181<Math.abs(C))C=parseFloat(K);return C};Q._checkProjection=
function(){var K=k._asyncToGenerator(function*(C){try{yield z.checkProjectionSupport(p.WGS84,C)}catch{throw new V("csv-layer:projection-not-supported","Projection not supported");}});return function(C){return K.apply(this,arguments)}}();return L}()});