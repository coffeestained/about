// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/screenUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(m,r,A,u,v,K,O,M,I,C,a,k,p,w){function D(){D=r._asyncToGenerator(function*(c,f){if(!f)return[];const n=c.field,B=c.valueExpression,E=c.normalizationType,H=c.normalizationField,g=c.normalizationTotal,d=[],l=c.viewInfoParams;let x=null,F=null;if(B){if(!b){const {arcadeUtils:J}=yield p.loadArcade();b=J}x=b.createFunction(B);F=l&&b.getViewInfo({viewingMode:l.viewingMode,scale:l.scale,spatialReference:new O(l.spatialReference)})}c=c.fieldInfos;const L=f[0]&&"declaredClass"in f[0]&&"esri.Graphic"===
f[0].declaredClass||!c?null:{fields:c};f.forEach(J=>{var P=J.attributes;if(B){var Q=b.createExecContext(L?{...J,layer:L}:J,F);Q=b.executeFunction(x,Q)}else P&&(Q=P[n]);E&&isFinite(Q)&&(P=P&&parseFloat(P[H]),Q=k.getNormalizedValue(Q,E,P,g));d.push(Q)});return d});return D.apply(this,arguments)}function t(c,f){return new u(c,f)}function q(c,f){c=v.isSome(c)?c:"";v.isSome(f)&&f&&(c=c?"("+c+") AND ("+f+")":f);return c}function z(c){const f=c.layer;return c.fields.filter(n=>!f.getField(n))}function G(c){const f=
c.layer;return c.fields.filter(n=>{n=f.getFieldUsageInfo(n);return!n||!n.supportsStatistics})}let b=null;m.calculateHeatmapStats=function(c,f=18,n,B,E,H){const g=new Float64Array(E*H);f=Math.round(K.pt2px(f));let d=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;var x=0;let F=0,L=0,J=0;n=a.createValueFunction(B,n);for(const {geometry:Q,attributes:S}of c){const {x:T,y:Y}=Q;c=Math.max(0,T-f);x=Math.max(0,Y-f);B=Math.min(H,Y+f);const fa=Math.min(E,T+f),Z=+n(S);for(let V=x;V<B;V++)for(let W=c;W<fa;W++){x=
V*E+W;const aa=a.evaluateDensityKernel(W-T,V-Y,f);var P=g[x];x=g[x]+=aa*Z;P=x-P;F+=P;L+=P*P;x<d&&(d=x);x>l&&(l=x);J++}}return J?{mean:F/J,stdDev:Math.sqrt((L-F*F/J)/J),min:d,max:l,mid:(l-d)/2,count:J}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};m.createError=t;m.getDataValues=function(c,f){return D.apply(this,arguments)};m.getRangeExpr=function(c,f,n){f=null!=f?c+" \x3e\x3d "+f:"";c=null!=n?c+" \x3c\x3d "+n:"";n="";return(n=f&&c?q(f,c):f||c)?"("+n+")":""};m.getSQLFilterForNormalization=function(c){const f=
c.field,n=c.normalizationType;c=c.normalizationField;let B;if("field"===n)B="(NOT "+c+" \x3d 0)";else if("log"===n||"natural-log"===n||"square-root"===n)B=`(${f} > 0)`;return B};m.getSumOfAttributesExpr=function(c,f,n){const B=[],E=[],H=[],g=[],d=[];c.forEach((F,L)=>{const J=F.field?"field":"expression",P=F.field||F.valueExpression;F.field?(d.push(P),E.push(`var ${J}${L} = Number($feature["${P}"]);`)):(B.push(`function getValueForExpr${L}() {\n  ${P} \n}`),E.push(`var ${J}${L} = Number(getValueForExpr${L}());`));
n||H.push(`${J}${L} = IIf(${J}${L} < 0, 0, ${J}${L});`);g.push(`${J}${L}`)});c="return sum;";const l=B.length?null:d.reduce((F,L)=>`${F} + ${L}`);let x=null;f||n?f?n||(c="return IIf(sum \x3e\x3d 0, sum, null);",l&&(x=`(( ${l} ) >= 0)`)):(c="return IIf(sum !\x3d 0, sum, null);",l&&(x=`(( ${l} ) <> 0)`)):(c="return IIf(sum \x3e 0, sum, null);",l&&(x=`(( ${l} ) > 0)`));return{valueExpression:[B.length?B.join("\n"):"",E.join("\n"),H.join("\n"),`var sum = ${g.join(" + ")};`,c].filter(Boolean).join("\n\n"),
sqlExpression:l,sqlWhere:x}};m.mergeWhereClauses=q;m.quantizeFeatures=function(c,f,n,B){const E=I.isWrappable(n)?I.getInfo(n):null,H=E?Math.round((E.valid[1]-E.valid[0])/f.scale[0]):null;return c.map(g=>{const d=new w(v.unwrap(g.geometry));M.quantizePoint(f,d,d,d.hasZ,d.hasM);if(E){var l=B[0];0>d.x?d.x+=H:d.x>l&&(d.x-=H)}g.geometry=d;return g})};m.verifyBasicFieldValidity=function(c,f,n){const B=z({layer:c,fields:f});if(B.length)return t(n,"Unknown fields: "+B.join(", ")+". You can only use fields defined in the layer schema");
c=G({layer:c,fields:f});if(c.length)return t(n,"Unsupported fields: "+c.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};m.verifyFieldType=function(c,f,n,B){let E=null;f?f.name!==c.objectIdField&&B.includes(f.type)||(E=t(n,"'field' should be one of these types: "+B.join(","))):E=t(n,"'field' is not defined in the layer schema");return E};m.verifyNumericField=function(c,f,n){let B;f?f.name!==c.objectIdField&&C.isNumericField(f)||
(B=t(n,"'field' should be one of these numeric types: "+C.numericTypes.join(","))):B=t(n,"'field' is not defined in the layer schema");return B};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/screenUtils":function(){define(["exports"],function(m){function r(u){return u?72*u/96:0}const A=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;m.castRenderScreenPointArray=function(u){return u};m.castRenderScreenPointArray3=function(u){return u};m.castScreenPointArray=
function(u){return u};m.createRenderScreenPoint=function(u=0,v=0){return{x:u,y:v}};m.createRenderScreenPointArray=function(u=0,v=0){return[u,v]};m.createRenderScreenPointArray3=function(u=0,v=0,K=0){return[u,v,K]};m.createScreenPoint=function(u=0,v=0){return{x:u,y:v}};m.createScreenPointArray=function(u=0,v=0){return[u,v]};m.pt2px=function(u){return u?u/72*96:0};m.px2pt=r;m.screenPointArrayToObject=function(u,v){return v?(v.x=u[0],v.y=u[1],v):{x:u[0],y:u[1]}};m.screenPointObjectToArray=function(u,
v){return v?(v[0]=u.x,v[1]=u.y,2<v.length&&(v[2]=0),v):[u.x,u.y]};m.toPt=function(u){if("string"===typeof u){var v=u.match(A);if(v){var K=Number(v[1]);v=v[3]&&v[3].toLowerCase();u="-"===u.charAt(0);K="px"===v?r(K):K;return u?-K:K}console.warn("screenUtils.toPt: input not recognized!");return null}return u};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],
function(m,r,A){function u({scale:g,translate:d},l){return Math.round((l-d[0])/g[0])}function v({scale:g,translate:d},l){return Math.round((d[1]-l)/g[1])}function K(g,d,l){const x=[];let F,L,J,P;for(let Q=0;Q<l.length;Q++){const S=l[Q];if(0<Q){if(J=u(g,S[0]),P=v(g,S[1]),J!==F||P!==L)x.push(d(S,J-F,P-L)),F=J,L=P}else F=u(g,S[0]),L=v(g,S[1]),x.push(d(S,F,L))}return 0<x.length?x:null}function O(g,d,l,x){return K(g,l?x?H:E:x?E:B,d)}function M(g,d,l,x){const F=[];l=l?x?H:E:x?E:B;for(x=0;x<d.length;x++){const L=
K(g,l,d[x]);L&&3<=L.length&&F.push(L)}return F.length?F:null}function I(g,d,l,x){const F=[];l=l?x?H:E:x?E:B;for(x=0;x<d.length;x++){const L=K(g,l,d[x]);L&&2<=L.length&&F.push(L)}return F.length?F:null}function C({scale:g,translate:d},l){return l*g[0]+d[0]}function a({scale:g,translate:d},l){return d[1]-l*g[1]}function k(g,d,l){const x=Array(l.length);if(!l.length)return x;const [F,L]=g.scale;let J=C(g,l[0][0]);g=a(g,l[0][1]);x[0]=d(l[0],J,g);for(let P=1;P<l.length;P++){const Q=l[P];J+=Q[0]*F;g-=Q[1]*
L;x[P]=d(Q,J,g)}return x}function p(g,d,l){const x=Array(l.length);for(let F=0;F<l.length;F++)x[F]=k(g,d,l[F]);return x}function w(g,d,l,x){return k(g,l?x?H:E:x?E:B,d)}function D(g,d,l,x){return p(g,l?x?H:E:x?E:B,d)}function t(g,d,l,x){return p(g,l?x?H:E:x?E:B,d)}function q(g,d,l){let [x,F]=l[0],L=Math.min(x,d[0]),J=Math.min(F,d[1]),P=Math.max(x,d[2]);d=Math.max(F,d[3]);for(let Q=1;Q<l.length;Q++){const [S,T]=l[Q];x+=S;F+=T;0>S&&(L=Math.min(L,x));0<S&&(P=Math.max(P,x));0>T?J=Math.min(J,F):0<T&&(d=
Math.max(d,F))}g[0]=L;g[1]=J;g[2]=P;g[3]=d;return g}function z(g,d){if(!d.length)return null;g[0]=g[1]=Number.POSITIVE_INFINITY;g[2]=g[3]=Number.NEGATIVE_INFINITY;for(let l=0;l<d.length;l++)q(g,g,d[l]);return g}function G(g,d,l,x,F){d.xmin=u(g,l.xmin);d.ymin=v(g,l.ymin);d.xmax=u(g,l.xmax);d.ymax=v(g,l.ymax);d!==l&&(x&&(d.zmin=l.zmin,d.zmax=l.zmax),F&&(d.mmin=l.mmin,d.mmax=l.mmax));return d}function b(g,d,l,x,F){d.points=O(g,l.points,x,F);return d}function c(g,d,l,x,F){d.x=u(g,l.x);d.y=v(g,l.y);d!==
l&&(x&&(d.z=l.z),F&&(d.m=l.m));return d}function f(g,d,l,x,F){g=M(g,l.rings,x,F);if(!g)return null;d.rings=g;return d}function n(g,d,l,x,F){g=I(g,l.paths,x,F);if(!g)return null;d.paths=g;return d}const B=(g,d,l)=>[d,l],E=(g,d,l)=>[d,l,g[2]],H=(g,d,l)=>[d,l,g[2],g[3]];m.equals=function(g,d){if(g===d||null==g&&null==d)return!0;if(null==g||null==d)return!1;let l,x,F,L;g&&"upperLeft"===g.originPosition?(l=g.translate[0],x=g.translate[1],g=g.scale[0]):(l=r.isSome(g.extent)?g.extent.xmin:0,x=r.isSome(g.extent)?
g.extent.ymax:0,g=g.tolerance);d&&"upperLeft"===d.originPosition?(F=d.translate[0],L=d.translate[1],d=d.scale[0]):(F=r.isSome(d.extent)?d.extent.xmin:0,L=r.isSome(d.extent)?d.extent.ymax:0,d=d.tolerance);return l===F&&x===L&&g===d};m.getQuantizedBoundsCoordsArray=q;m.getQuantizedBoundsCoordsArrayArray=z;m.getQuantizedBoundsPaths=function(g){return z([0,0,0,0],g)};m.getQuantizedBoundsPoints=function(g){const d=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return q(d,d,g)};m.getQuantizedBoundsRings=function(g){return z([0,0,0,0],g)};m.quantizeBounds=function(g,d,l){d[0]=u(g,l[0]);d[3]=v(g,l[1]);d[2]=u(g,l[2]);d[1]=v(g,l[3]);return d};m.quantizeExtent=G;m.quantizeGeometry=function(g,d){return g&&d?A.isPoint(d)?c(g,{},d,!1,!1):A.isPolyline(d)?n(g,{},d,!1,!1):A.isPolygon(d)?f(g,{},d,!1,!1):A.isMultipoint(d)?b(g,{},d,!1,!1):A.isExtent(d)?G(g,{},d,!1,!1):null:null};m.quantizeMultipoint=b;m.quantizePaths=I;m.quantizePoint=c;m.quantizePoints=O;m.quantizePolygon=
f;m.quantizePolyline=n;m.quantizeRings=M;m.quantizeX=u;m.quantizeY=v;m.toQuantizationTransform=function(g){return g?{originPosition:"upper-left"===g.originPosition?"upperLeft":"lower-left"===g.originPosition?"lowerLeft":g.originPosition,scale:g.tolerance?[g.tolerance,g.tolerance]:[1,1],translate:r.isSome(g.extent)?[g.extent.xmin,g.extent.ymax]:[0,0]}:null};m.unquantizeBounds=function(g,d,l){return l?(d[0]=C(g,l[0]),d[1]=a(g,l[3]),d[2]=C(g,l[2]),d[3]=a(g,l[1]),d):[C(g,d[0]),a(g,d[3]),C(g,d[2]),a(g,
d[1])]};m.unquantizeCoordsArray=k;m.unquantizeCoordsArrayArray=p;m.unquantizeExtent=function(g,d,l,x,F){d.xmin=C(g,l.xmin);d.ymin=a(g,l.ymin);d.xmax=C(g,l.xmax);d.ymax=a(g,l.ymax);d!==l&&(x&&(d.zmin=l.zmin,d.zmax=l.zmax),F&&(d.mmin=l.mmin,d.mmax=l.mmax));return d};m.unquantizeMultipoint=function(g,d,l,x,F){r.isSome(l)&&(d.points=w(g,l.points,x,F));return d};m.unquantizePaths=D;m.unquantizePoint=function(g,d,l,x,F){if(r.isNone(l))return d;d.x=C(g,l.x);d.y=a(g,l.y);d!==l&&(x&&(d.z=l.z),F&&(d.m=l.m));
return d};m.unquantizePoints=w;m.unquantizePolygon=function(g,d,l,x,F){r.isSome(l)&&(d.rings=t(g,l.rings,x,F));return d};m.unquantizePolyline=function(g,d,l,x,F){r.isSome(l)&&(d.paths=D(g,l.paths,x,F));return d};m.unquantizeRings=t;m.unquantizeX=C;m.unquantizeY=a;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(m,r,A,u,v,K,O,M){function I(e,h,y){if(e)for(const N of e)(e=(e=K.getDeepValue(N,h))&&"function"!==typeof e&&y.get(e))&&K.setDeepValue(N,e.name,h)}function C(e,h){if(!e||!h)return[];ha.clear();a(ha,e,h);return Array.from(ha).sort()}function a(e,h,y){var N;if(y)if(null!=h&&null!=(N=h.fields)&&N.length)if(y.includes("*"))for(const {name:R}of h.fields)e.add(R);else for(const R of y)k(e,h,R);else if(y.includes("*"))e.clear(),e.add("*");else for(const R of y)e.add(R)}function k(e,h,y){"string"===
typeof y&&(h?(h=h.get(y))&&e.add(h.name):e.add(y))}function p(e,h,y){return w.apply(this,arguments)}function w(){w=A._asyncToGenerator(function*(e,h,y){var N;if(y){var {arcadeUtils:R}=yield M.loadArcade();y=R.extractFieldNames(y,null==h?void 0:null==(N=h.fields)?void 0:N.map(U=>U.name));for(const U of y)k(e,h,U)}});return w.apply(this,arguments)}function D(e,h,y){return t.apply(this,arguments)}function t(){t=A._asyncToGenerator(function*(e,h,y){if(y&&"1\x3d1"!==y){const N=(yield new Promise((R,U)=>
m(["../../core/sql/WhereClause"],R,U))).WhereClause.create(y,h);if(!N.isStandardized)throw new u("fieldUtils:collectFilterFields","Where clause is not standardized",{where:y});a(e,h,N.fieldNames)}});return t.apply(this,arguments)}function q(e,h){for(const y of e)if(y&&y.valueType&&y.valueType===h)return y.name;return null}function z(){z=A._asyncToGenerator(function*(e){if(!e)return[];const h=new Set;yield G(h,e);return Array.from(h).sort()});return z.apply(this,arguments)}function G(e,h){return b.apply(this,
arguments)}function b(){b=A._asyncToGenerator(function*(e,h){if(h){var y=K.getDeepValue("elevationInfo.featureExpressionInfo",h);if(y)return y.collectRequiredFields(e,h.fieldsIndex)}});return b.apply(this,arguments)}function c(e,h,y){return f.apply(this,arguments)}function f(){f=A._asyncToGenerator(function*(e,h,y){y.outStatistic.onStatisticValueExpression?p(e,h,y.outStatistic.onStatisticValueExpression):e.add(y.outStatistic.onStatisticField)});return f.apply(this,arguments)}function n(){n=A._asyncToGenerator(function*(e,
h,y){var N,R;if(h&&y&&"fields"in y){var U=[];null!=(N=y.popupTemplate)&&N.expressionInfos&&U.push(...y.popupTemplate.expressionInfos.map(X=>p(e,h.fieldsIndex,X.expression)));if(Array.isArray(null==(R=y.popupTemplate)?void 0:R.content)){N=y.popupTemplate.content;for(const X of N)"expression"===X.type&&X.expressionInfo&&U.push(p(e,h.fieldsIndex,X.expressionInfo.expression))}y.fields&&U.push(...y.fields.map(X=>c(e,h.fieldsIndex,X)));yield Promise.all(U)}});return n.apply(this,arguments)}function B(){B=
A._asyncToGenerator(function*(e,h,y){h&&(h.timeInfo&&v.isSome(y)&&y.timeExtent&&a(e,h.fieldsIndex,[h.timeInfo.startField,h.timeInfo.endField]),h.floorInfo&&a(e,h.fieldsIndex,[h.floorInfo.floorField]),v.isSome(y)&&v.isSome(y.where)&&(yield D(e,h.fieldsIndex,y.where)))});return B.apply(this,arguments)}function E(){E=A._asyncToGenerator(function*(e,h,y){h&&y&&(yield Promise.all(y.map(N=>H(e,h,N))))});return E.apply(this,arguments)}function H(e,h,y){return g.apply(this,arguments)}function g(){g=A._asyncToGenerator(function*(e,
h,y){h&&y&&(y.valueExpression?yield p(e,h.fieldsIndex,y.valueExpression):y.field&&k(e,h.fieldsIndex,y.field))});return g.apply(this,arguments)}function d(){d=A._asyncToGenerator(function*(e){if(!e)return[];const h="timeInfo"in e&&e.timeInfo;return h?C(e.fieldsIndex,[e.trackIdField,h.startField,h.endField]):[]});return d.apply(this,arguments)}function l(){l=A._asyncToGenerator(function*(e){if(!e)return[];const h=new Set;yield x(h,e);return Array.from(h).sort()});return l.apply(this,arguments)}function x(e,
h){return F.apply(this,arguments)}function F(){F=A._asyncToGenerator(function*(e,h){const {labelingInfo:y,fieldsIndex:N}=h;y&&y.length&&(yield Promise.all(y.map(R=>L(e,N,R))))});return F.apply(this,arguments)}function L(e,h,y){return J.apply(this,arguments)}function J(){J=A._asyncToGenerator(function*(e,h,y){if(y){var N=y.getLabelExpression();y=y.where;"arcade"===N.type?yield p(e,h,N.expression):(N=N.expression.match(/{[^}]*}/g))&&N.forEach(R=>{k(e,h,R.slice(1,-1))});yield D(e,h,y)}});return J.apply(this,
arguments)}function P(e){return"number"===typeof e&&!isNaN(e)&&isFinite(e)}function Q(e){return null===e||P(e)}function S(e){return null===e||ba(e)}function T(e){return null!=e&&"string"===typeof e}function Y(e){return null===e||T(e)}function fa(){return!0}function Z(e,h){let y;switch(e.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":y=e.nullable?S:ba;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":y=
e.nullable?Q:P;break;case "string":case "esriFieldTypeString":y=e.nullable?Y:T;break;default:y=fa}return 1===arguments.length?y:y(h)}function V(e){return null!=e&&pa.has(e.type)}function W(e,h){return e.nullable&&null===h?null:V(e)&&!aa(e.type,Number(h))?r.NumericRangeValidationError.OUT_OF_RANGE:Z(e,h)?e.domain?O.validateDomainValue(e.domain,h):null:r.TypeValidationError.INVALID_TYPE}function aa(e,h){return(e="string"===typeof e?ia(e):e)?e.isInteger?ba(h)&&h>=e.min&&h<=e.max:h>=e.min&&h<=e.max:!1}
function ia(e){switch(e){case "esriFieldTypeSmallInteger":case "small-integer":return ca;case "esriFieldTypeInteger":case "integer":return da;case "esriFieldTypeSingle":case "single":return ea;case "esriFieldTypeDouble":case "double":return ka}}function la(e,h,y){if(!h||!h.attributes||!e){if(v.isSome(y))for(var N of e)y.add(N);return!0}h=h.attributes;N=!1;for(const R of e)if(!(R in h))if(N=!0,v.isSome(y))y.add(R);else break;return N}function ja(){ja=A._asyncToGenerator(function*(e,h){const y=new Set;
for(const N of h)yield p(y,e.fieldsIndex,N);return Array.from(y).sort()});return ja.apply(this,arguments)}const ma="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),na=["field","normalizationField"],ha=new Set,ba=(()=>"isInteger"in Number?Number.isInteger:e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e)(),oa=["integer","small-integer","single","double"],pa=
new Set([...oa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);r.NumericRangeValidationError=void 0;(r.NumericRangeValidationError||(r.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";r.TypeValidationError=void 0;(r.TypeValidationError||(r.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ca={min:-32768,max:32767,isInteger:!0},da={min:-2147483648,max:2147483647,isInteger:!0},
ea={min:-3.4E38,max:1.2E38,isInteger:!1},ka={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};r.collectArcadeFieldNames=p;r.collectElevationFields=G;r.collectFeatureReductionFields=function(e,h,y){return n.apply(this,arguments)};r.collectField=k;r.collectFields=a;r.collectFilterFields=function(e,h,y){return B.apply(this,arguments)};r.collectLabelingFields=x;r.collectOrderByInfos=function(e,h,y){return E.apply(this,arguments)};r.doubleRange=ka;r.featureHasFields=function(e,h){return!la(e,h,
null)};r.fixFields=C;r.fixRendererFields=function(e,h){if(null!=e&&null!=h)for(const y of Array.isArray(e)?e:[e])if(I(ma,y,h),"visualVariables"in y&&y.visualVariables)for(const N of y.visualVariables)I(na,N,h)};r.fixTimeInfoFields=function(e,h){if(null!=e&&null!=h&&h.fields.length)if("startField"in e){var y=h.get(e.startField);h=h.get(e.endField);e.startField=y&&y.name||null;e.endField=h&&h.name||null}else y=h.get(e.startTimeField),h=h.get(e.endTimeField),e.startTimeField=y&&y.name||null,e.endTimeField=
h&&h.name||null};r.getDisplayFieldName=function({displayField:e,fields:h}){if(e)return e;if(!h||!h.length)return null;if(!(e=q(h,"name-or-title")||q(h,"unique-identifier")||q(h,"type-or-category")))a:{for(const y of h)if(y&&y.name&&(h=y.name.toLowerCase(),h.includes("name")||h.includes("title"))){e=y.name;break a}e=null}return e};r.getElevationFields=function(e){return z.apply(this,arguments)};r.getExpressionFields=function(e,h){return ja.apply(this,arguments)};r.getFeatureEditFields=function(e){if(!e)return[];
const h="editFieldsInfo"in e&&e.editFieldsInfo;return h?C(e.fieldsIndex,[h&&h.creatorField,h&&h.creationDateField,h&&h.editorField,h&&h.editDateField]):[]};r.getFeatureGeometryFields=function(e){if(!e)return[];const h=e.geometryFieldsInfo;return h?C(e.fieldsIndex,[h.shapeAreaField,h.shapeLengthField]):[]};r.getFieldDefaultValue=function(e){const h=e.defaultValue;if(void 0!==h&&Z(e,h))return h;if(e.nullable)return null};r.getFieldRange=function(e){const h=O.getDomainRange(e.domain);if(h)return h;if(V(e))return ia(e.type)};
r.getLabelingFields=function(e){return l.apply(this,arguments)};r.getNumericTypeForValue=function(e){if(!P(e))return null;if(ba(e)){if(e>=ca.min&&e<=ca.max)return"esriFieldTypeSmallInteger";if(e>=da.min&&e<=da.max)return"esriFieldTypeInteger"}return e>=ea.min&&e<=ea.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};r.getTimeFields=function(e){return d.apply(this,arguments)};r.integerRange=da;r.isDateField=function(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)};r.isNumberInRange=
aa;r.isNumericField=V;r.isRasterPixelValueField=function(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(h=>e.toLowerCase().startsWith(h))};r.isStringField=function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)};r.isValidFieldValue=function(e,h){return null===W(e,h)};r.isValueMatchingFieldType=Z;r.numericTypes=oa;r.packFields=function(e,h,y=1){if(!h||!e)return[];if(h.includes("*"))return["*"];h=C(e,h);return h.length/e.fields.length>=y?["*"]:h};r.populateMissingFields=
la;r.rendererFields=ma;r.sanitizeNullFieldValue=function(e){return null==e||"number"===typeof e&&isNaN(e)?null:e};r.singleRange=ea;r.smallIntegerRange=ca;r.unpackFieldNames=function(e,h){return v.isNone(h)||v.isNone(e)?[]:h.includes("*")?e.fields.map(y=>y.name):h};r.validateFieldValue=W;r.validationErrorToString=function(e,h,y){switch(e){case O.DomainValidationError.INVALID_CODED_VALUE:return`Value ${y} is not in the coded domain - field: ${h.name}, domain: ${JSON.stringify(h.domain)}`;case O.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${y} is out of the range of valid values - field: ${h.name}, domain: ${JSON.stringify(h.domain)}`;
case r.TypeValidationError.INVALID_TYPE:return`Value ${y} is not a valid value for the field type - field: ${h.name}, type: ${h.type}, nullable: ${h.nullable}`;case r.NumericRangeValidationError.OUT_OF_RANGE:{const {min:N,max:R}=ia(h.type);return`Value ${y} is out of range for the number type - field: ${h.name}, type: ${h.type}, value range is ${N} to ${R}`}}};r.visualVariableFields=na;Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(m){function r(A,u){switch(A.type){case "range":{const v="range"in A?A.range[1]:A.maxValue;if(+u<("range"in A?A.range[0]:A.minValue)||+u>v)return m.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==A.codedValues||A.codedValues.every(v=>null==v||v.code!==u))return m.DomainValidationError.INVALID_CODED_VALUE}return null}m.DomainValidationError=void 0;(function(A){A.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";A.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(m.DomainValidationError||(m.DomainValidationError={}));m.getDomainRange=function(A){if(A&&"range"===A.type)return{min:"range"in A?A.range[0]:A.minValue,max:"range"in A?A.range[1]:A.maxValue}};m.isValidDomainValue=function(A,u){return null===r(A,u)};m.validateDomainValue=r;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(m,r,A,u,v,K){function O(){M||(M=A._asyncToGenerator(function*(){const C=yield new Promise((a,k)=>m(["./arcadeUtils"],a,k));return{arcade:C.arcade,arcadeUtils:C,Dictionary:C.Dictionary,Feature:C.arcadeFeature}})());return M}let M;u=(C,a,k)=>I.create(C,a,k,null,["$feature","$view"]);let I=function(){function C(k,p,w,D,t,q,z,G){this.script=k;this.evaluate=t;this.fields=Array.isArray(z)?z:z.fields;this._syntaxTree=D;this._arcade=p;this._arcadeDictionary=w;this._arcadeFeature=q;this._spatialReference=
G;this._referencesGeometry=p.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}C.create=function(){var k=A._asyncToGenerator(function*(p,w,D,t,q,z){const {arcade:G,Feature:b,Dictionary:c}=yield O(),f=K.fromJSON(w);w=G.parseScript(p,z);q=q.reduce((g,d)=>({...g,[d]:null}),{});let n=null;v.isSome(t)&&(n=new c(t),n.immutable=!0,q.$config=null);t=G.scriptUsesGeometryEngine(w)&&G.enableGeometrySupport();z=G.scriptUsesFeatureSet(w)&&G.enableFeatureSetSupport();
const B=G.scriptIsAsync(w)&&G.enableAsyncSupport();q={vars:q,spatialReference:f,useAsync:!!B};const E=new c;E.immutable=!1;E.setField("scale",0);const H=G.compileScript(w,q);yield Promise.all([t,z,B]);return new C(p,G,c,w,g=>{"$view"in g&&g.$view&&(E.setField("scale",g.$view.scale),g.$view=E);n&&(g.$config=n);return H({vars:g,spatialReference:f})},new b,D,f)});return function(p,w,D,t,q,z){return k.apply(this,arguments)}}();var a=C.prototype;a.repurposeFeature=function(k){k.geometry&&!k.geometry.spatialReference&&
(k.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(k.geometry,k.attributes,{fields:this.fields});return this._arcadeFeature};a.createDictionary=function(){return new this._arcadeDictionary};a.referencesMember=function(k){return this._arcade.referencesMember(this._syntaxTree,k)};a.referencesFunction=function(k){return this._arcade.referencesFunction(this._syntaxTree,k)};a.referencesGeometry=function(){return this._referencesGeometry};a.referencesScale=
function(){return this._referencesScale};a.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return C}();r.ArcadeExpression=I;r.createDictionaryExpression=(C,a,k,p)=>I.create(C,a,k,p,["$feature","$view"]);r.createLabelExpression=(C,a,k)=>I.create(C,a,k,null,["$feature"]);r.createRendererExpression=u;r.createVVExpression=u;r.loadArcade=O;Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/heatmapUtils":function(){define(["exports",
"../../core/mathUtils","../../core/screenUtils","../../chunks/vec4","../../chunks/vec4f64"],function(m,r,A,u,v){function K(a,k,p,w){let {color:D,ratio:t}=k,{color:q,ratio:z}=p;z===t&&(1===z?t-=1E-6:z+=1E-6);k=r.clamp((w-t)/(z-t),0,1);u.lerp(a,D.toArray(),q.toArray(),k)}function O(a,k,p,w,D){a=new Uint32Array(a*a);k="buffer"in k?k:new Float64Array(k);p="buffer"in p?new Uint32Array(p.buffer):new Uint32Array((new Uint8Array(p)).buffer);D=p.length/(D-w);for(let t=0;t<k.length;t++)a[t]=p[r.clamp(Math.floor((k[t]-
w)*D),0,p.length-1)];return a.buffer}function M(a,k,p){a=Math.sqrt(a**2+k**2)/p;return 1<a?0:3/(Math.PI*p**2)*(1-a**2)**2}function I(a,k){return"function"===typeof a?a:a?"string"===typeof k?p=>-1*+p[a]:p=>+p[a]+k:()=>1}function C(a,k){return null!=a?"string"===typeof k?p=>-1*+p.readAttribute(a):p=>+p.readAttribute(a)+k:p=>1}m.MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR=2.4;m.calculateHeatmapIntensityInfo=function(a,k,p,w){const {radius:D,fieldOffset:t,field:q}=k;k=A.pt2px(D);const z=new Float64Array(p*
w);let G=Number.NEGATIVE_INFINITY;const b=I(q,t);for(const {geometry:n,attributes:B}of a){a=Math.max(0,n.x-k);var c=Math.max(0,n.y-k);const E=Math.min(w,n.y+k),H=Math.min(p,n.x+k),g=+b(B);for(;c<E;c++)for(let d=a;d<H;d++){var f=c*p+d;const l=M(n.x-d,n.y-c,k);f=z[f]+=l*g;f>G&&(G=f)}}return{matrix:z.buffer,max:G}};m.calculateHeatmapIntensityInfoReaders=function(a,k,p,w){const {radius:D,fieldOffset:t,field:q}=k;k=Math.round(A.pt2px(D));const z=new Float64Array(p*w);let G=Number.NEGATIVE_INFINITY;const b=
C(q,t),c=new Set;for(const E of a)for(a=E.getCursor();a.next();){var f=a.getObjectId();if(c.has(f))continue;c.add(f);f=a.readLegacyPointGeometry();if(-128>f.x||f.x>=p+128||-128>f.y||f.y>w+128)continue;const H=+b(a),g=Math.max(0,Math.round(f.x)-k);var n=Math.max(0,Math.round(f.y)-k);const d=Math.min(w,Math.round(f.y)+k),l=Math.min(p,Math.round(f.x)+k);for(;n<d;n++)for(let x=g;x<l;x++){var B=n*p+x;const F=M(f.x-x,f.y-n,k);B=z[B]+=F*H;B>G&&(G=B)}}return{matrix:z.buffer,max:G}};m.createHeatmapImageData=
O;m.createValueFunction=I;m.createValueFunctionCursor=C;m.drawHeatmap=function(a,k,p,w,D,t){a.canvas.width=a.canvas.height=k;a.clearRect(0,0,k,k);const q=a.getImageData(0,0,k,k);p&&w&&q.data.set(new Uint8ClampedArray(O(k,p,w,D,t)));a.putImageData(q,0,0)};m.evaluateDensityKernel=M;m.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(a){return A.px2pt(2.4*a)};m.generateGradient=function(a){const k=new Uint8ClampedArray(2048);a=a.filter(({ratio:q})=>0<=q&&1>=q).sort((q,z)=>q.ratio-z.ratio).map(({color:q,
ratio:z})=>({color:q,ratio:Math.max(z,.001)}));if(1>a.length)return k;let p=a[0],w=a[0],D=1;const t=v.create();for(let q=0;512>q;q++){const z=(q+.5)/512;for(;z>w.ratio&&D<a.length;)p=w,w=a[D++];K(t,p,w,z);k.set(t,4*q)}return k};m.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(a){return A.pt2px(a)/2.4};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec4f64":function(){define(["exports"],function(m){function r(){return[0,0,0,0]}function A(b){return[b[0],
b[1],b[2],b[3]]}function u(b,c,f,n){return[b,c,f,n]}function v(b){const c=r(),f=Math.min(4,b.length);for(let n=0;n<f;++n)c[n]=b[n];return c}function K(b,c){return new Float64Array(b,c,4)}function O(){return r()}function M(){return[1,1,1,1]}function I(){return[1,0,0,0]}function C(){return[0,1,0,0]}function a(){return[0,0,1,0]}function k(){return[0,0,0,1]}const p=r(),w=M(),D=I(),t=C(),q=a(),z=k(),G=Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:A,fromValues:u,fromArray:v,createView:K,
zeros:O,ones:M,unitX:I,unitY:C,unitZ:a,unitW:k,ZEROS:p,ONES:w,UNIT_X:D,UNIT_Y:t,UNIT_Z:q,UNIT_W:z},Symbol.toStringTag,{value:"Module"}));m.ONES=w;m.UNIT_W=z;m.UNIT_X=D;m.UNIT_Y=t;m.UNIT_Z=q;m.ZEROS=p;m.clone=A;m.create=r;m.createView=K;m.fromArray=v;m.fromValues=u;m.ones=M;m.unitW=k;m.unitX=I;m.unitY=C;m.unitZ=a;m.vec4f64=G;m.zeros=O})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(m,r,A){function u(b){const c=
null!=b.minValue||null!=b.maxValue,f=!!b.sqlExpression&&b.supportsSQLExpression;return!(null!=b.normalizationField||null!=b.normalizationType)&&!c&&!f}function v(b){const {values:c,useSampleStdDev:f,supportsNullCount:n}=b;var B=Number.POSITIVE_INFINITY;let E=Number.NEGATIVE_INFINITY,H=null,g=null;var d=null;let l=null,x=0;const F=null==b.minValue?-Infinity:b.minValue,L=null==b.maxValue?Infinity:b.maxValue;for(const J of c)Number.isFinite(J)?J>=F&&J<=L&&(H+=J,B=Math.min(B,J),E=Math.max(E,J),x++):"string"===
typeof J&&x++;if(x&&null!=H){g=H/x;d=0;for(const J of c)Number.isFinite(J)&&J>=F&&J<=L&&(d+=(J-g)**2);l=f?1<x?d/(x-1):0:0<x?d/x:0;d=Math.sqrt(l)}else E=B=null;B={avg:g,count:x,max:E,min:B,stddev:d,sum:H,variance:l};n&&(B.nullcount=c.length-x);b.percentileParams&&(B.median=K(c,b.percentileParams));return B}function K(b,c){const {fieldType:f,value:n,orderBy:B,isDiscrete:E}=c,H=O(f,"desc"===B);b=[...b].filter(x=>null!=x).sort((x,F)=>H(x,F));if(0===b.length)return null;if(0>=n)return b[0];if(1<=n)return b[b.length-
1];var g=(b.length-1)*n,d=Math.floor(g);c=d+1;g%=1;d=b[d];const l=b[c];return c>=b.length||E||"string"===typeof d||"string"===typeof l?d:d*(1-g)+l*g}function O(b,c){const f=c?1:-1,n=I(c),B=M(c);if(!b||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...z].includes(b))return(E,H)=>"number"===typeof E&&"number"===typeof H?n(E,H):"string"===typeof E&&"string"===typeof H?B(E,H):f;if("esriFieldTypeDate"===b)return(E,H)=>{E=(new Date(E)).getTime();H=(new Date(H)).getTime();
return isNaN(E)||isNaN(H)?f:n(E,H)};if(z.has(b))return(E,H)=>n(E,H);if("esriFieldTypeString"===b)return(E,H)=>B(E,H);if("esriFieldTypeGUID"===b||"esriFieldTypeGlobalID"===b){const E=M(c);return(H,g)=>E(C(H),C(g))}return c?(E,H)=>1:(E,H)=>-1}function M(b){return b?(c,f)=>{var n,B;c=null==(n=c)?void 0:n.toUpperCase();f=null==(B=f)?void 0:B.toUpperCase();return c>f?-1:c<f?1:0}:(c,f)=>{var n,B;c=null==(n=c)?void 0:n.toUpperCase();f=null==(B=f)?void 0:B.toUpperCase();return c<f?-1:c>f?1:0}}function I(b){return b?
(c,f)=>f-c:(c,f)=>c-f}function C(b){return b.substr(24,12)+b.substr(19,4)+b.substr(16,2)+b.substr(14,2)+b.substr(11,2)+b.substr(9,2)+b.substr(6,2)+b.substr(4,2)+b.substr(2,2)+b.substr(0,2)}function a(b,c){const f=p({field:c.field,normalizationType:c.normalizationType,normalizationField:c.normalizationField,classificationMethod:c.classificationMethod,standardDeviationInterval:c.standardDeviationInterval,breakCount:c.numClasses||5});b=k(b,c.minValue,c.maxValue);return A.createGenerateRendererClassBreaks({definition:f,
values:b,normalizationTotal:c.normalizationTotal})}function k(b,c,f){c=null==c?-Infinity:c;f=null==f?Infinity:f;return b.filter(n=>Number.isFinite(n)&&n>=c&&n<=f)}function p(b){const c=b.field,f=b.classificationMethod||"equal-interval",n=b.normalizationType,B=b.normalizationField,E=new r;E.classificationField=c;E.breakCount=b.breakCount;E.classificationMethod=f;E.standardDeviationInterval="standard-deviation"===f?b.standardDeviationInterval||1:void 0;E.normalizationType=n;E.normalizationField="field"===
n?B:void 0;return E}function w(b,c){const {field:f,classificationMethod:n,standardDeviationInterval:B,normalizationType:E,normalizationField:H,normalizationTotal:g,minValue:d,maxValue:l}=c,x=c.numBins||10;let F=c=null,L=null;n&&"equal-interval"!==n||E?({classBreaks:b}=a(b,{field:f,normalizationType:E,normalizationField:H,normalizationTotal:g,classificationMethod:n,standardDeviationInterval:B,minValue:d,maxValue:l,numClasses:x}),c=b[0].minValue,F=b[b.length-1].maxValue,L=b.map(J=>[J.minValue,J.maxValue])):
(null!=d&&null!=l?(c=d,F=l):(b=v({values:b,minValue:d,maxValue:l,useSampleStdDev:!E,supportsNullCount:u({normalizationType:E,normalizationField:H,minValue:d,maxValue:l})}),c=b.min,F=b.max),L=t(c,F,x));return{min:c,max:F,intervals:L}}function D(b,c){let f=-1;for(let n=b.length-1;0<=n;n--)if(c>=b[n][0]){f=n;break}return f}function t(b,c,f){const n=(c-b)/f,B=[];let E;for(let H=1;H<=f;H++)E=b+n,E=Number(E.toFixed(16)),B.push([b,H===f?c:E]),b=E;return B}const q=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
z=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),G="min max avg stddev count sum variance nullcount median".split(" ");m.calculateClassBreaks=a;m.calculateHistogram=function(b,c){const {min:f,max:n,intervals:B}=w(b,c),E=B.map((H,g)=>({minValue:B[g][0],maxValue:B[g][1],count:0}));for(const H of b)null!=H&&H>=f&&H<=n&&(b=D(B,H),-1<b&&E[b].count++);return{bins:E,minValue:f,maxValue:n,normalizationTotal:c.normalizationTotal}};m.calculatePercentile=
K;m.calculateStatistics=v;m.calculateStringStatistics=function(b){const c=b.returnDistinct?[...new Set(b.values)]:b.values,f=c.filter(B=>null!=B).length,n={count:f};b.supportsNullCount&&(n.nullcount=c.length-f);b.percentileParams&&(n.median=K(c,b.percentileParams));return n};m.calculateUniqueValuesCount=function(b){const c={};for(let f of b){if(null==f||"string"===typeof f&&""===f.trim())f=null;null==c[f]?c[f]={count:1,data:f}:c[f].count++}return{count:c}};m.createClassBreaksDefinition=p;m.createUVResult=
function(b,c,f){const n=b.count;b=[];f&&c&&"coded-value"===c.type&&c.codedValues.forEach(B=>{B=B.code;n.hasOwnProperty(B)||(n[B]={data:B,count:0})});for(const B in n)c=n[B],b.push({value:c.data,count:c.count,label:c.label});return{uniqueValueInfos:b}};m.getAttributeComparator=O;m.getEqualIntervalBins=t;m.getNormalizedValue=function(b,c,f,n){let B=null;switch(c){case "log":0!==b&&(B=Math.log(b)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(n)&&0!==n&&(B=b/n*100);break;case "field":Number.isFinite(f)&&
0!==f&&(B=b/f);break;case "natural-log":0<b&&(B=Math.log(b));break;case "square-root":0<b&&(B=b**.5)}return B};m.isNullCountSupported=u;m.processSummaryStatisticsResult=function(b,c){let f;for(f in b)G.includes(f)&&(Number.isFinite(b[f])||(b[f]=null));if(!c)return b;["avg","stddev","variance"].forEach(n=>{null!=b[n]&&(b[n]=Math.ceil(b[n]))});return b};m.resolveCBResult=function(b,c){let f=b.classBreaks;const n=f[0].minValue,B=f[f.length-1].maxValue,E="standard-deviation"===c;f=f.map(H=>{const g=H.label;
H={minValue:H.minValue,maxValue:H.maxValue,label:g};if(E&&g){const d=g.match(q).map(l=>+l.trim());2===d.length?(H.minStdDev=d[0],H.maxStdDev=d[1],0>d[0]&&0<d[1]&&(H.hasAvg=!0)):1===d.length&&(g.includes("\x3c")?(H.minStdDev=null,H.maxStdDev=d[0]):g.includes("\x3e")&&(H.minStdDev=d[0],H.maxStdDev=null))}return H});return{minValue:n,maxValue:B,classBreakInfos:f,normalizationTotal:b.normalizationTotal}};m.statisticTypes=G;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(m,r,A,u,v,K,O,M,I){v=new A.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",
esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});A=new A.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});I=function(C){function a(){var k=C.apply(this,arguments)||this;k.breakCount=null;k.classificationField=null;k.classificationMethod=null;k.normalizationField=null;k.normalizationType=null;k.type="class-breaks-definition";return k}m._inheritsLoose(a,
C);m._createClass(a,[{key:"standardDeviationInterval",set:function(k){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",k)}},{key:"definedInterval",set:function(k){"defined-interval"===this.classificationMethod&&this._set("definedInterval",k)}}]);return a}(I);r.__decorate([u.property({json:{write:!0}})],I.prototype,"breakCount",void 0);r.__decorate([u.property({json:{write:!0}})],I.prototype,"classificationField",void 0);r.__decorate([u.property({type:String,
json:{read:v.read,write:v.write}})],I.prototype,"classificationMethod",void 0);r.__decorate([u.property({json:{write:!0}})],I.prototype,"normalizationField",void 0);r.__decorate([u.property({json:{read:A.read,write:A.write}})],I.prototype,"normalizationType",void 0);r.__decorate([u.property({value:null,json:{write:!0}})],I.prototype,"standardDeviationInterval",null);r.__decorate([u.property({value:null,json:{write:!0}})],I.prototype,"definedInterval",null);r.__decorate([u.property()],I.prototype,
"type",void 0);return I=r.__decorate([M.subclass("esri.rest.support.ClassBreaksDefinition")],I)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),function(m,r,A,u,v,
K,O,M,I,C,a){A=new A.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});u=function(k){function p(){var w=k.apply(this,arguments)||this;w.baseSymbol=null;w.colorRamp=null;w.type=null;return w}m._inheritsLoose(p,k);return p}(u.JSONSupport);r.__decorate([v.property({type:a,json:{write:!0}})],u.prototype,"baseSymbol",void 0);r.__decorate([v.property({types:C.types,json:{read:{reader:C.fromJSON},write:!0}})],u.prototype,"colorRamp",void 0);r.__decorate([v.property({json:{read:A.read,
write:A.write}})],u.prototype,"type",void 0);return u=r.__decorate([I.subclass("esri.rest.support.ClassificationDefinition")],u)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(m,r,A,u){A={key:"type",base:A,typeMap:{algorithmic:r,multipart:u}};m.fromJSON=function(v){return v&&v.type?"algorithmic"===v.type?r.fromJSON(v):"multipart"===v.type?u.fromJSON(v):null:null};m.types=A;Object.defineProperties(m,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(m,r,A,u,v,K,O,M,I){var C;I=C=function(a){function k(p){p=a.call(this,p)||this;p.algorithm=null;
p.fromColor=null;p.toColor=null;p.type="algorithmic";return p}m._inheritsLoose(k,a);k.prototype.clone=function(){return new C({fromColor:u.clone(this.fromColor),toColor:u.clone(this.toColor),algorithm:this.algorithm})};return k}(I);r.__decorate([O.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],I.prototype,"algorithm",void 0);r.__decorate([v.property({type:A,json:{type:[K.Integer],write:!0}})],I.prototype,"fromColor",void 0);r.__decorate([v.property({type:A,
json:{type:[K.Integer],write:!0}})],I.prototype,"toColor",void 0);r.__decorate([v.property({type:["algorithmic"]})],I.prototype,"type",void 0);return I=C=r.__decorate([M.subclass("esri.rest.support.AlgorithmicColorRamp")],I)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(m,r,A){m.enumeration=function(u,v={}){var K;u=u instanceof r.JSONMap?u:new r.JSONMap(u,v);u={type:(null!=(K=null==v?void 0:v.ignoreUnknown)?K:1)?u.apiValues:
String,json:{type:u.jsonValues,read:null!=v&&v.readOnly?!1:{reader:u.read},write:{writer:u.write}}};void 0!==(null==v?void 0:v.readOnly)&&(u.readOnly=!!v.readOnly);void 0!==(null==v?void 0:v.default)&&(u.json.default=v.default);void 0!==(null==v?void 0:v.name)&&(u.json.name=v.name);return A.property(u)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,r,A,u,v,K,O,M){A=function(I){function C(a){a=I.call(this,a)||this;a.type=null;return a}m._inheritsLoose(C,I);return C}(A.JSONSupport);r.__decorate([u.property({readOnly:!0,json:{read:!1,write:!0}})],A.prototype,"type",void 0);return A=r.__decorate([M.subclass("esri.rest.support.ColorRamp")],A)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(m,r,A,u,v,K,O,M){var I;v=I=function(C){function a(k){k=C.call(this,k)||this;k.colorRamps=null;k.type="multipart";return k}m._inheritsLoose(a,C);a.prototype.clone=function(){return new I({colorRamps:A.clone(this.colorRamps)})};return a}(M);r.__decorate([u.property({type:[O],json:{write:!0}})],v.prototype,"colorRamps",void 0);r.__decorate([u.property({type:["multipart"]})],v.prototype,"type",void 0);return v=I=r.__decorate([K.subclass("esri.rest.support.MultipartColorRamp")],v)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(m,r,A,u,v,K,O,M,I,C,a){u=new u.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let k=0;v=function(p){function w(t){t=p.call(this,t)||this;t.id=`sym${k++}`;t.type=null;t.color=new A([0,0,0,1]);
return t}m._inheritsLoose(w,p);var D=w.prototype;D.readColor=function(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t};D.collectRequiredFields=function(){var t=m._asyncToGenerator(function*(q,z){});return function(q,z){return t.apply(this,arguments)}}();D.hash=function(){return JSON.stringify(this.toJSON())};D.clone=function(){};return w}(v.JSONSupport);r.__decorate([K.property({type:u.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:u.write}}})],v.prototype,"type",void 0);r.__decorate([K.property({type:A,
json:{write:{allowNull:!0}}})],v.prototype,"color",void 0);r.__decorate([C.reader("color")],v.prototype,"readColor",null);return v=r.__decorate([a.subclass("esri.symbols.Symbol")],v)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(m){function r(a){const {classificationMethod:k,breakCount:p,normalizationType:w,definedInterval:D}=a.definition,t=[];var q=a.values;if(0===q.length)return[];q=q.sort((n,B)=>n-B);var z=q[0],G=q[q.length-1];if("equal-interval"===k)if(q.length>=
p){q=(G-z)/p;a=z;for(var b=1;b<p;b++){var c=Number((z+b*q).toFixed(6));t.push({minValue:a,maxValue:c,label:A(a,c,w)});a=c}t.push({minValue:a,maxValue:G,label:A(a,G,w)})}else q.forEach(n=>{t.push({minValue:n,maxValue:n,label:A(n,n,w)})});else if("natural-breaks"===k){q=u(q);a=v(q.uniqueValues,a.valueFrequency||q.valueFrequency,p);for(b=1;b<p;b++)q.uniqueValues.length>b&&(c=Number(q.uniqueValues[a[b]].toFixed(6)),t.push({minValue:z,maxValue:c,label:A(z,c,w)}),z=c);t.push({minValue:z,maxValue:G,label:A(z,
G,w)})}else if("quantile"===k)if(q.length>=p&&z!==G){a=Math.ceil(q.length/p);b=0;for(c=1;c<p;c++){var f=a+b-1;f>q.length&&(f=q.length-1);0>f&&(f=0);t.push({minValue:z,maxValue:q[f],label:A(z,q[f],w)});z=q[f];b+=a;a=Math.ceil((q.length-b)/(p-c))}t.push({minValue:z,maxValue:G,label:A(z,G,w)})}else for(G=-1,z=0;z<q.length;z++)a=q[z],a!==G&&(G=a,t.push({minValue:G,maxValue:a,label:A(G,a,w)}),G=a);else if("standard-deviation"===k)if(a=M(q),b=I(q,a),0===b)t.push({minValue:q[0],maxValue:q[0],label:A(q[0],
q[0],w)});else{q=O(z,G,p,a,b)*b;b=0;for(c=p;1<=c;c--)f=Number((a-(c-.5)*q).toFixed(6)),t.push({minValue:z,maxValue:f,label:A(z,f,w)}),z=f,b++;c=Number((a+.5*q).toFixed(6));t.push({minValue:z,maxValue:c,label:A(z,c,w)});z=c;b++;for(f=1;f<=p;f++)c=b===2*p?G:Number((a+(f+.5)*q).toFixed(6)),t.push({minValue:z,maxValue:c,label:A(z,c,w)}),z=c,b++}else if("defined-interval"===k){if(!D)return t;G=q[0];q=q[q.length-1];z=Math.ceil((q-G)/D);a=G;for(b=1;b<z;b++)c=Number((G+b*D).toFixed(6)),t.push({minValue:a,
maxValue:c,label:A(a,c,w)}),a=c;t.push({minValue:a,maxValue:q,label:A(a,q,w)})}return t}function A(a,k,p){let w=null;return w=a===k?p&&"percent-of-total"===p?a+"%":a.toString():p&&"percent-of-total"===p?a+"% - "+k+"%":a+" - "+k}function u(a){const k=[],p=[];let w=Number.MIN_VALUE,D=1,t=-1;for(let q=0;q<a.length;q++){const z=a[q];z===w?(D++,p[t]=D):null!==z&&(k.push(z),w=z,D=1,p.push(D),t++)}return{uniqueValues:k,valueFrequency:p}}function v(a,k,p){var w=a.length;const D=[];p>w&&(p=w);for(var t=0;t<
p;t++)D.push(Math.round(t*w/p-1));D.push(w-1);t=K(D,a,k,p);{w=t.mean;t=t.sdcm;var q=p,z=0,G=0;let c=0,f=0,n=!0;for(let B=0;2>B&&n;B++){0===B&&(n=!1);for(var b=0;b<q-1;b++)for(;D[b+1]+1!==D[b+2];)if(D[b+1]+=1,z=C(b,D,a,k),c=z.sbMean,z=z.sbSdcm,G=C(b+1,D,a,k),f=G.sbMean,G=G.sbSdcm,z+G<t[b]+t[b+1])t[b]=z,t[b+1]=G,w[b]=c,w[b+1]=f,n=!0;else{--D[b+1];break}for(b=q-1;0<b;b--)for(;D[b]!==D[b-1]+1;)if(--D[b],z=C(b-1,D,a,k),c=z.sbMean,z=z.sbSdcm,G=C(b,D,a,k),f=G.sbMean,G=G.sbSdcm,z+G<t[b-1]+t[b])t[b-1]=z,t[b]=
G,w[b-1]=c,w[b]=f,n=!0;else{D[b]+=1;break}}w=n}w&&(t=K(D,a,k,p));return D}function K(a,k,p,w){let D=[];var t=[],q=[];let z=0;const G=[],b=[];for(var c=0;c<w;c++){var f=C(c,a,k,p);G.push(f.sbMean);b.push(f.sbSdcm);z+=b[c]}f=z;for(c=!0;c||z<f;){c=!1;D=[];for(t=0;t<w;t++)D.push(a[t]);for(q=0;q<w;q++)for(f=a[q]+1;f<=a[q+1];f++)if(t=k[f],0<q&&f!==a[q+1]&&Math.abs(t-G[q])>Math.abs(t-G[q-1]))a[q]=f;else if(q<w-1&&a[q]!==f-1&&Math.abs(t-G[q])>Math.abs(t-G[q+1])){a[q+1]=f-1;break}f=z;z=0;t=[];q=[];for(let n=
0;n<w;n++){t.push(G[n]);q.push(b[n]);const B=C(n,a,k,p);G[n]=B.sbMean;b[n]=B.sbSdcm;z+=b[n]}}if(z>f){for(k=0;k<w;k++)a[k]=D[k],G[k]=t[k],b[k]=q[k];z=f}return{mean:G,sdcm:b}}function O(a,k,p,w,D){a=Math.max(w-a,k-w)/D/p;return 1<=a?1:.5<=a?.5:.25}function M(a){let k=0;for(let p=0;p<a.length;p++)k+=a[p];return k/=a.length}function I(a,k){let p=0;for(let w=0;w<a.length;w++){const D=a[w];p+=(D-k)*(D-k)}p/=a.length;return Math.sqrt(p)}function C(a,k,p,w){var D=0,t=0;for(var q=k[a]+1;q<=k[a+1];q++){const z=
w[q];D+=p[q]*z;t+=z}0>=t&&console.log("Exception in Natural Breaks calculation");D/=t;t=0;for(q=k[a]+1;q<=k[a+1];q++)t+=w[q]*(p[q]-D)**2;return{sbMean:D,sbSdcm:t}}m.createGenerateRendererClassBreaks=function(a){const {normalizationTotal:k}=a;return{classBreaks:r(a),normalizationTotal:k}};m.createGenerateRendererUniqueValues=function(a){a=u(a);const k=[],p=a.uniqueValues.length;for(let w=0;w<p;w++){const D=a.uniqueValues[w];k.push({value:D,count:a.valueFrequency[w],label:D.toString()})}return{uniqueValues:k}};
Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define(["exports","../../../chunks/_rollupPluginBabelHelpers","./utils","../../../statistics/utils"],function(m,r,A,u){function v(){v=r._asyncToGenerator(function*(C){const {attribute:a,features:k}=C,{normalizationType:p,normalizationField:w,minValue:D,maxValue:t,fieldType:q}=a;C=yield A.getDataValues({field:a.field,valueExpression:a.valueExpression,normalizationType:p,normalizationField:w,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},k);const z=
u.isNullCountSupported({normalizationType:p,normalizationField:w,minValue:D,maxValue:t}),G={value:.5,fieldType:q};C="esriFieldTypeString"===q?u.calculateStringStatistics({values:C,supportsNullCount:z,percentileParams:G}):u.calculateStatistics({values:C,minValue:D,maxValue:t,useSampleStdDev:!p,supportsNullCount:z,percentileParams:G});return u.processSummaryStatisticsResult(C,"esriFieldTypeDate"===q)});return v.apply(this,arguments)}function K(){K=r._asyncToGenerator(function*(C){const {attribute:a,
features:k}=C;C=yield A.getDataValues({field:a.field,valueExpression:a.valueExpression,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},k);C=u.calculateUniqueValuesCount(C);return u.createUVResult(C,a.domain,a.returnAllCodedValues)});return K.apply(this,arguments)}function O(){O=r._asyncToGenerator(function*(C){const {attribute:a,features:k}=C,{field:p,normalizationType:w,normalizationField:D,normalizationTotal:t,classificationMethod:q}=a;C=yield A.getDataValues({field:p,valueExpression:a.valueExpression,
normalizationType:w,normalizationField:D,normalizationTotal:t,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},k);C=u.calculateClassBreaks(C,{field:p,normalizationType:w,normalizationField:D,normalizationTotal:t,classificationMethod:q,standardDeviationInterval:a.standardDeviationInterval,numClasses:a.numClasses,minValue:a.minValue,maxValue:a.maxValue});return u.resolveCBResult(C,q)});return O.apply(this,arguments)}function M(){M=r._asyncToGenerator(function*(C){const {attribute:a,features:k}=
C,{field:p,normalizationType:w,normalizationField:D,normalizationTotal:t,classificationMethod:q}=a;C=yield A.getDataValues({field:p,valueExpression:a.valueExpression,normalizationType:w,normalizationField:D,normalizationTotal:t,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},k);return u.calculateHistogram(C,{field:p,normalizationType:w,normalizationField:D,normalizationTotal:t,classificationMethod:q,standardDeviationInterval:a.standardDeviationInterval,numBins:a.numBins,minValue:a.minValue,
maxValue:a.maxValue})});return M.apply(this,arguments)}function I(){I=r._asyncToGenerator(function*(C){const {attribute:a,features:k}=C,{field:p,radius:w,fieldOffset:D,transform:t,spatialReference:q,size:z}=a;C=A.quantizeFeatures(k,t,q,z);const {count:G,min:b,max:c,mean:f,stdDev:n}=A.calculateHeatmapStats(C,w,D,p,z[0],z[1]);return{count:G,min:b,max:c,avg:f,stddev:n}});return I.apply(this,arguments)}m.classBreaks=function(C){return O.apply(this,arguments)};m.heatmapStatistics=function(C){return I.apply(this,
arguments)};m.histogram=function(C){return M.apply(this,arguments)};m.summaryStatistics=function(C){return v.apply(this,arguments)};m.uniqueValues=function(C){return K.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});