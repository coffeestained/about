// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/decorators/messageBundle ../widgets/support/jsxFactory".split(" "),function(ma,D,na,oa,F,R,W,Ea,pa,x,qa,ra,A){function X(q,c){var b=Object.keys(q);if(Object.getOwnPropertySymbols){var a=
Object.getOwnPropertySymbols(q);c&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(q,f).enumerable}));b.push.apply(b,a)}return b}function Y(q){for(var c=1;c<arguments.length;c++){var b=null!=arguments[c]?arguments[c]:{};c%2?X(Object(b),!0).forEach(function(a){var f=b[a];a in q?Object.defineProperty(q,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):q[a]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(b)):X(Object(b)).forEach(function(a){Object.defineProperty(q,
a,Object.getOwnPropertyDescriptor(b,a))})}return q}R='input select textarea a[href] button [tabindex]:not(slot) audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var L=R.join(","),C=(W="undefined"===typeof Element)?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,S=!W&&Element.prototype.getRootNode?function(q){return q.getRootNode()}:function(q){return q.ownerDocument},
Z=function(q,c,b){var a=Array.prototype.slice.apply(q.querySelectorAll(L));c&&C.call(q,L)&&a.unshift(q);return a=a.filter(b)},aa=function f(c,b,a){for(var e=[],h=Array.from(c);h.length;){var k=h.shift();if("SLOT"===k.tagName){var l=k.assignedElements();l=f(l.length?l:k.children,!0,a);a.flatten?e.push.apply(e,l):e.push({scope:k,candidates:l})}else{C.call(k,L)&&a.filter(k)&&(b||!c.includes(k))&&e.push(k);l=k.shadowRoot||"function"===typeof a.getShadowRoot&&a.getShadowRoot(k);var u=!a.shadowRootFilter||
a.shadowRootFilter(k);l&&u?(l=f(!0===l?k.children:l.children,!0,a),a.flatten?e.push.apply(e,l):e.push({scope:k,candidates:l})):h.unshift.apply(h,k.children)}}return e},ba=function(c,b){return 0>c.tabIndex&&(b||/^(AUDIO|VIDEO|DETAILS)$/.test(c.tagName)||c.isContentEditable)&&isNaN(parseInt(c.getAttribute("tabindex"),10))?0:c.tabIndex},sa=function(c,b){return c.tabIndex===b.tabIndex?c.documentOrder-b.documentOrder:c.tabIndex-b.tabIndex},ta=function(c){return"DETAILS"===c.tagName&&Array.prototype.slice.apply(c.children).some(function(b){return"SUMMARY"===
b.tagName})},ua=function(c,b){for(var a=0;a<c.length;a++)if(c[a].checked&&c[a].form===b)return c[a]},va=function(c){if(!c.name)return!0;var b=c.form||S(c),a=function(e){return b.querySelectorAll('input[type\x3d"radio"][name\x3d"'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var f=a(window.CSS.escape(c.name));else try{f=a(c.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
e.message),!1}a=ua(f,c.form);return!a||a===c},ca=function(c){c=c.getBoundingClientRect();var b=c.height;return 0===c.width&&0===b},wa=function(c,b){var a=b.displayCheck;b=b.getShadowRoot;if("hidden"===getComputedStyle(c).visibility)return!0;var f=C.call(c,"details\x3esummary:first-of-type")?c.parentElement:c;if(C.call(f,"details:not([open]) *"))return!0;f=S(c).host;f=(null===f||void 0===f?void 0:f.ownerDocument.contains(f))||c.ownerDocument.contains(c);if(!a||"full"===a){if("function"===typeof b){for(a=
c;c;){var e=c.parentElement,h=S(c);if(e&&!e.shadowRoot&&!0===b(e))return ca(c);c=c.assignedSlot?c.assignedSlot:e||h===c.ownerDocument?e:h.host}c=a}if(f)return!c.getClientRects().length}else if("non-zero-area"===a)return ca(c);return!1},M=function(c,b){var a;(a=b.disabled)||(a="INPUT"===b.tagName&&"hidden"===b.type);if(!(c=a||wa(b,c)||ta(b)))a:{if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(b.tagName))for(c=b.parentElement;c;){if("FIELDSET"===c.tagName&&c.disabled){for(a=0;a<c.children.length;a++){var f=
c.children.item(a);if("LEGEND"===f.tagName){c=C.call(c,"fieldset[disabled] *")?!0:!f.contains(b);break a}}c=!0;break a}c=c.parentElement}c=!1}return c?!1:!0},T=function(c,b){return"INPUT"===b.tagName&&"radio"===b.type&&!va(b)||0>ba(b)||!M(c,b)?!1:!0},xa=function(c){c=parseInt(c.getAttribute("tabindex"),10);return isNaN(c)||0<=c?!0:!1},ya=function a(b){var f=[],e=[];b.forEach(function(h,k){var l=!!h.scope,u=l?h.scope:h,v=ba(u,l),t=l?a(h.candidates):u;0===v?l?f.push.apply(f,t):f.push(u):e.push({documentOrder:k,
tabIndex:v,item:h,isScope:l,content:t})});return e.sort(sa).reduce(function(h,k){k.isScope?h.push.apply(h,k.content):h.push(k.content);return h},[]).concat(f)},za=function(b,a){a=a||{};b=a.getShadowRoot?aa([b],a.includeContainer,{filter:T.bind(null,a),flatten:!1,getShadowRoot:a.getShadowRoot,shadowRootFilter:xa}):Z(b,a.includeContainer,T.bind(null,a));return ya(b)},Aa=function(b,a){a=a||{};return a.getShadowRoot?aa([b],a.includeContainer,{filter:M.bind(null,a),flatten:!0,getShadowRoot:a.getShadowRoot}):
Z(b,a.includeContainer,M.bind(null,a))},N=function(b,a){a=a||{};if(!b)throw Error("No node provided");return!1===C.call(b,L)?!1:T(a,b)},Ba=R.concat("iframe").join(","),U=function(b,a){a=a||{};if(!b)throw Error("No node provided");return!1===C.call(b,Ba)?!1:M(a,b)},da=function(){var b=[];return{activateTrap:function(a){if(0<b.length){var f=b[b.length-1];f!==a&&f.pause()}f=b.indexOf(a);-1!==f&&b.splice(f,1);b.push(a)},deactivateTrap:function(a){a=b.indexOf(a);-1!==a&&b.splice(a,1);0<b.length&&b[b.length-
1].unpause()}}}(),ea=function(b,a){var f=-1;b.every(function(e,h){return a(e)?(f=h,!1):!0});return f},G=function(b){for(var a=arguments.length,f=Array(1<a?a-1:0),e=1;e<a;e++)f[e-1]=arguments[e];return"function"===typeof b?b.apply(void 0,f):b},O=function(b){return b.target.shadowRoot&&"function"===typeof b.composedPath?b.composedPath()[0]:b.target},Da=function(b,a){var f=(null===a||void 0===a?void 0:a.document)||document,e=Y({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},a),
h=[],k=[],l=[],u=null,v=null,t=!1,y=!1,E=void 0,z=function(m,d,g){return m&&void 0!==m[d]?m[d]:e[g||d]},H=function(m){return k.findIndex(function(d){var g=d.tabbableNodes;return d.container.contains(m)||g.find(function(n){return n===m})})},I=function(m){var d=e[m];if("function"===typeof d){for(var g=arguments.length,n=Array(1<g?g-1:0),p=1;p<g;p++)n[p-1]=arguments[p];d=d.apply(void 0,n)}!0===d&&(d=void 0);if(!d){if(void 0===d||!1===d)return d;throw Error("`".concat(m,"` was specified but was not a node, or did not return a node"));
}g=d;if("string"===typeof d&&(g=f.querySelector(d),!g))throw Error("`".concat(m,"` as selector refers to no known node"));return g},P=function(){var m=I("initialFocus");if(!1===m)return!1;void 0===m&&(m=0<=H(f.activeElement)?f.activeElement:(m=l[0])&&m.firstTabbableNode||I("fallbackFocus"));if(!m)throw Error("Your focus-trap needs to have at least one focusable element");return m},J=function(){k=h.map(function(m){var d=za(m,e.tabbableOptions),g=Aa(m,e.tabbableOptions);return{container:m,tabbableNodes:d,
focusableNodes:g,firstTabbableNode:0<d.length?d[0]:null,lastTabbableNode:0<d.length?d[d.length-1]:null,nextTabbableNode:function(n){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,w=g.findIndex(function(r){return r===n});if(!(0>w))return p?g.slice(w+1).find(function(r){return N(r,e.tabbableOptions)}):g.slice(0,w).reverse().find(function(r){return N(r,e.tabbableOptions)})}}});l=k.filter(function(m){return 0<m.tabbableNodes.length});if(0>=l.length&&!I("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");
},K=function g(d){!1!==d&&d!==f.activeElement&&(d&&d.focus?(d.focus({preventScroll:!!e.preventScroll}),v=d,d.tagName&&"input"===d.tagName.toLowerCase()&&"function"===typeof d.select&&d.select()):g(P()))},fa=function(d){var g=I("setReturnFocus",d);return g?g:!1===g?!1:d},Q=function(d){var g=O(d);0<=H(g)||(G(e.clickOutsideDeactivates,d)?B.deactivate({returnFocus:e.returnFocusOnDeactivate&&!U(g,e.tabbableOptions)}):G(e.allowOutsideClick,d)||d.preventDefault())},ha=function(d){var g=O(d),n=0<=H(g);n||
g instanceof Document?n&&(v=g):(d.stopImmediatePropagation(),K(v||P()))},Ca=function(d){var g=O(d);J();var n=null;if(0<l.length){var p=H(g),w=0<=p?k[p]:void 0;if(0>p)n=d.shiftKey?l[l.length-1].lastTabbableNode:l[0].firstTabbableNode;else if(d.shiftKey){var r=ea(l,function(V){return g===V.firstTabbableNode});0>r&&(w.container===g||U(g,e.tabbableOptions)&&!N(g,e.tabbableOptions)&&!w.nextTabbableNode(g,!1))&&(r=p);0<=r&&(n=l[0===r?l.length-1:r-1].lastTabbableNode)}else r=ea(l,function(V){return g===
V.lastTabbableNode}),0>r&&(w.container===g||U(g,e.tabbableOptions)&&!N(g,e.tabbableOptions)&&!w.nextTabbableNode(g))&&(r=p),0<=r&&(n=l[r===l.length-1?0:r+1].firstTabbableNode)}else n=I("fallbackFocus");n&&(d.preventDefault(),K(n))},ia=function(d){"Escape"!==d.key&&"Esc"!==d.key&&27!==d.keyCode||!1===G(e.escapeDeactivates,d)?"Tab"!==d.key&&9!==d.keyCode||Ca(d):(d.preventDefault(),B.deactivate())},ja=function(d){var g=O(d);0<=H(g)||G(e.clickOutsideDeactivates,d)||G(e.allowOutsideClick,d)||(d.preventDefault(),
d.stopImmediatePropagation())},ka=function(){if(t)return da.activateTrap(B),E=e.delayInitialFocus?setTimeout(function(){K(P())},0):K(P()),f.addEventListener("focusin",ha,!0),f.addEventListener("mousedown",Q,{capture:!0,passive:!1}),f.addEventListener("touchstart",Q,{capture:!0,passive:!1}),f.addEventListener("click",ja,{capture:!0,passive:!1}),f.addEventListener("keydown",ia,{capture:!0,passive:!1}),B},la=function(){if(t)return f.removeEventListener("focusin",ha,!0),f.removeEventListener("mousedown",
Q,!0),f.removeEventListener("touchstart",Q,!0),f.removeEventListener("click",ja,!0),f.removeEventListener("keydown",ia,!0),B};var B={get active(){return t},get paused(){return y},activate:function(d){if(t)return this;var g=z(d,"onActivate"),n=z(d,"onPostActivate"),p=z(d,"checkCanFocusTrap");p||J();t=!0;y=!1;u=f.activeElement;g&&g();d=function(){p&&J();ka();n&&n()};if(p)return p(h.concat()).then(d,d),this;d();return this},deactivate:function(d){if(!t)return this;var g=Y({onDeactivate:e.onDeactivate,
onPostDeactivate:e.onPostDeactivate,checkCanReturnFocus:e.checkCanReturnFocus},d);clearTimeout(E);E=void 0;la();y=t=!1;da.deactivateTrap(B);var n=z(g,"onDeactivate"),p=z(g,"onPostDeactivate");d=z(g,"checkCanReturnFocus");var w=z(g,"returnFocus","returnFocusOnDeactivate");n&&n();g=function(){setTimeout(function(){w&&K(fa(u));p&&p()},0)};if(w&&d)return d(fa(u)).then(g,g),this;g();return this},pause:function(){if(y||!t)return this;y=!0;la();return this},unpause:function(){if(!y||!t)return this;y=!1;
J();ka();return this},updateContainerElements:function(d){h=[].concat(d).filter(Boolean).map(function(g){return"string"===typeof g?f.querySelector(g):g});t&&J();return this}};B.updateContainerElements(b);return B};x=function(b){function a(e,h){var k=b.call(this,e,h)||this;k.container=document.createElement("div");k.content=null;k.open=!1;k._close=()=>{k.open=!1};document.body.appendChild(k.container);k.own(oa.watch(()=>k.open,()=>k._toggleFocusTrap()));return k}ma._inheritsLoose(a,b);var f=a.prototype;
f.destroy=function(){this._destroyFocusTrap()};f.render=function(){var e=this.id;const {open:h,content:k,title:l,messages:u}=this;var v=h&&!!k;const t={["esri-identity-modal--open"]:v,["esri-identity-modal--closed"]:!v},y=A.tsx("button",{class:"esri-identity-modal__close-button","aria-label":u.close,title:u.close,bind:this,onclick:this._close,type:"button"},A.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),E=`${e}_title`;e=`${e}_content`;const z=l?A.tsx("h1",{id:E,class:"esri-identity-modal__title"},
l):null;v=v?A.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":E,"aria-describedby":e,afterCreate:this._createFocusTrap},y,z,this._renderContent(e)):null;return A.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",t)},v)};f._destroyFocusTrap=function(){var e;null==(e=this._focusTrap)?void 0:e.deactivate({onDeactivate:null});this._focusTrap=null};f._toggleFocusTrap=function(){const {_focusTrap:e,open:h}=this;e&&(h?e.activate():e.deactivate())};f._createFocusTrap=
function(e){this._destroyFocusTrap();const h=requestAnimationFrame(()=>{this._focusTrap=Da(e,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(na.makeHandle(()=>cancelAnimationFrame(h)))};f._renderContent=function(e){const h=this.content;return"string"===typeof h?A.tsx("div",{class:"esri-identity-modal__content",id:e,innerHTML:h}):qa.isWidget(h)?A.tsx("div",{class:"esri-identity-modal__content",id:e},h.render()):h instanceof HTMLElement?A.tsx("div",{class:"esri-identity-modal__content",
id:e,bind:h,afterCreate:this._attachToNode}):null};f._attachToNode=function(e){e.appendChild(this)};return a}(x);D.__decorate([F.property({readOnly:!0})],x.prototype,"container",void 0);D.__decorate([F.property()],x.prototype,"content",void 0);D.__decorate([F.property()],x.prototype,"open",void 0);D.__decorate([F.property(),ra.messageBundle("esri/t9n/common")],x.prototype,"messages",void 0);D.__decorate([F.property({aliasOf:"messages.auth.signIn"})],x.prototype,"title",void 0);return x=D.__decorate([pa.subclass("esri.identity.IdentityModal")],
x)});