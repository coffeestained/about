// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Slider/SliderViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),function(z,p,m,E,H,t,B,U,V,O,u,P,Q,R,
S,T,v,L){const x={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},M={labels:!1,rangeLabels:!1};m=function(N){function I(a,b){a=N.call(this,a,b)||this;a._activeLabelInputIndex=null;a._anchorElements=[];a._dragged=!1;a._dragStartInfo=null;a._focusedAnchorIndex=null;a._isMinInputActive=!1;a._isMaxInputActive=!1;a._lastMovedHandleIndex=
null;a._positionPrecision=5;a._segmentDragStartInfo=null;a._trackHeight=null;a._trackWidth=null;a._zIndices=null;a._zIndexOffset=3;a.disabled=!1;a.draggableSegmentsEnabled=!0;a.effectiveMax=null;a.effectiveMin=null;a.effectiveSegmentElements=new E;a.extraNodes=[];a.inputCreatedFunction=null;a.inputFormatFunction=null;a.inputParseFunction=null;a.label=void 0;a.labelElements=new E;a.labelInputsEnabled=!1;a.labelFormatFunction=null;a.labels=null;a.max=null;a.maxLabelElement=null;a.messages=null;a.min=
null;a.minLabelElement=null;a.precision=4;a.rangeLabelInputsEnabled=!1;a.segmentElements=new E;a.snapOnClickEnabled=!0;a.steps=null;a.syncedSegmentsEnabled=!1;a.thumbsConstrained=!0;a.thumbCreatedFunction=null;a.thumbElements=new E;a.tickElements=new E;a.trackElement=null;a.values=null;a.viewModel=new R;a.visibleElements={...M};a._onAnchorPointerDown=a._onAnchorPointerDown.bind(z._assertThisInitialized(a));a._onAnchorPointerMove=a._onAnchorPointerMove.bind(z._assertThisInitialized(a));a._onAnchorPointerUp=
a._onAnchorPointerUp.bind(z._assertThisInitialized(a));a._onLabelPointerDown=a._onLabelPointerDown.bind(z._assertThisInitialized(a));a._onLabelPointerUp=a._onLabelPointerUp.bind(z._assertThisInitialized(a));a._onSegmentPointerDown=a._onSegmentPointerDown.bind(z._assertThisInitialized(a));a._onSegmentPointerMove=a._onSegmentPointerMove.bind(z._assertThisInitialized(a));a._onSegmentPointerUp=a._onSegmentPointerUp.bind(z._assertThisInitialized(a));a._onTrackPointerDown=a._onTrackPointerDown.bind(z._assertThisInitialized(a));
a._onTrackPointerMove=a._onTrackPointerMove.bind(z._assertThisInitialized(a));a._onTrackPointerUp=a._onTrackPointerUp.bind(z._assertThisInitialized(a));return a}z._inheritsLoose(I,N);var d=I.prototype;d.destroy=function(){document.removeEventListener("pointerup",this._onLabelPointerUp);document.removeEventListener("pointermove",this._onLabelPointerMove);document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);this.labelElements.removeAll();
this.labelElements.destroy();this.segmentElements.removeAll();this.segmentElements.destroy();this.effectiveSegmentElements.removeAll();this.effectiveSegmentElements.destroy();this.thumbElements.removeAll();this.thumbElements.destroy();this.tickElements.removeAll();this.tickElements.destroy()};d.castVisibleElements=function(a){return{...M,...a}};d.render=function(){const {label:a}=this,b=this.classes("esri-slider","esri-widget",this._isHorizontalLayout()?"esri-slider--horizontal":"esri-slider--vertical",
this._isReversedLayout()?"esri-slider--reversed":null,this._isDisabled()?"esri-disabled":null);this._storeTrackDimensions();return v.tsx("div",{"aria-label":a,class:b,"touch-action":"none",bind:this,afterCreate:this._afterContainerCreate},this.renderContent())};d.toNextStep=function(a){this._toStep(a,1)};d.toPreviousStep=function(a){this._toStep(a,-1)};d.renderContent=function(){const {max:a,min:b}=this;if(!(t.isNone(b)||t.isNone(a)||b>=a))return[this.renderMin(),this.renderSliderContainer(),this.renderMax()]};
d.renderSliderContainer=function(){return v.tsx("div",{key:"slider-container",bind:this,class:"esri-slider__content"},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())};d.renderTrackElement=function(){return v.tsx("div",{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:"esri-slider__track","data-node-ref":"trackElement","touch-action":"none"},this.renderEffectiveSegmentElements(),this.renderSegmentElements(),this.renderAnchorElements())};
d.renderEffectiveSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=t.isSome(this.effectiveMax),b=t.isSome(this.effectiveMin);if(a||b){var {max:c,min:g,viewModel:e}=this,f=e.getBounds(),h=[];b&&h.push(this.renderEffectiveSegmentElement(g,f.min,!0));a&&h.push(this.renderEffectiveSegmentElement(f.max,c,!1));return h}}};d.renderSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=this.values.length,b=[];for(let c=0;c<=a;c++)b.push(this.renderSegmentElement(c));
return b}};d.renderSegmentElement=function(a){const {_trackHeight:b,_trackWidth:c,draggableSegmentsEnabled:g,id:e,state:f,values:h}=this;var k=this._isHorizontalLayout(),l=k?c:b,n=this.viewModel.getBounds(),q=this._positionFromValue(n.max),w=this._positionFromValue(n.min);n=a===h.length?null:a;const C=0===a?null:a-1;var r=t.isSome(n);const y=t.isSome(C);let A;const D=[...h].sort((J,K)=>J-K);this._isReversedLayout()?(A=y?this._positionFromValue(D[C]):w,w=r?this._positionFromValue(D[n]):q):(A=r?this._positionFromValue(D[n]):
q,w=y?this._positionFromValue(D[C]):w);q=this._applyPrecisionToPosition(100*w/l);l=(A-w)/l;k=k?`transform: translate(${q}%, 0px) scale(${l}, 1);`:`transform: translate(0px, ${q}%) scale(1, ${l});`;r=this.classes("esri-slider__segment","esri-slider__segment-"+a,g&&r&&y&&"disabled"!==f?"esri-slider__segment--interactive":null);return v.tsx("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:r,"data-max-thumb-index":n,"data-min-thumb-index":C,"data-segment-index":a,
key:`${e}-segment-${a}`,style:k,"touch-action":"none"})};d.renderEffectiveSegmentElement=function(a,b,c){const {_trackHeight:g,_trackWidth:e,layout:f}=this;a=this._positionFromValue(a);b=this._positionFromValue(b);const h=this._isHorizontalLayout(),k=h?e:g,l=this._applyPrecisionToPosition(100*a/k);let n=null;"horizontal"===f?(a=a===k?0:l,n=`clip-path: inset(0% ${b===k?0:this._applyPrecisionToPosition((c?k-b:b)/k*100)}% 0% ${a}%);`):(a=(b-a)/k,n=h?`transform: translate(${l}%, 0px) scale(${a}, 1);`:
`transform: translate(0px, ${l}%) scale(1, ${a});`);c=this.classes("esri-slider__segment","esri-slider__effective-segment",c?"esri-slider__effective-min-segment":"esri-slider__effective-max-segment");return v.tsx("div",{afterCreate:this._afterEffectiveSegmentCreate,afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:c,style:n,"touch-action":"none"})};d.renderAnchorElements=function(){const {trackElement:a,values:b}=this;if(b&&b.length)return this._zIndices=b.map((c,g)=>{c=this._positionFromValue(c);
c=this._positionToPercent(c);c=this._isHorizontalLayout()?50<c:50>c;return this._zIndexOffset+(b.length+(c?-1:1)*g)}),a&&b&&b.length?b.map((c,g)=>this.renderAnchorElement(c,g)):null};d.renderAnchorElement=function(a,b){var c=this._positionFromValue(a);c=this._valueFromPosition(c);if(!t.isNone(c)&&!isNaN(c)){var {_dragStartInfo:g,_lastMovedHandleIndex:e,id:f,layout:h,values:k,visibleElements:{labels:l}}=this,n=g&&g.index===b,q=e===b;c=this.classes("esri-slider__anchor","esri-slider__anchor-"+b,n?"esri-slider__anchor--moving":
null,q?"esri-slider__anchor--moved":null);var w=this.labels.values[b];n=this._getStyleForAnchor(a,b,n||q);var {min:C,max:r}=this.viewModel.getBoundsForValueAtIndex(b),{disabled:y,messages:A}=this;w=2===k.length?0===b?L.substitute(A.rangeMinimum,{value:a}):L.substitute(A.rangeMaximum,{value:a}):w;return v.tsx("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":1===k.length?null:0===b?`${f}-handle-${b+1}`:b===k.length-
1?`${f}-handle-${b-1}`:`${f}-handle-${b-1} ${f}-handle-${b+1}`,"aria-label":A.sliderValue,"aria-labelledby":l?`${f}-label-${b}`:null,"aria-orientation":h,"aria-valuemax":r.toString(),"aria-valuemin":C.toString(),"aria-valuenow":a.toString(),"aria-valuetext":w,bind:this,class:c,"data-thumb-index":b,"data-value":a,id:`${f}-handle-${b}`,key:`${f}-handle-${b}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:n,tabIndex:y?-1:0},v.tsx("span",{afterCreate:this._afterThumbCreate,
afterRemoved:this._afterThumbRemoved,bind:this,class:"esri-slider__thumb","data-thumb-index":b,"touch-action":"none"}),this.renderThumbLabel(b))}};d.renderThumbLabel=function(a){const {id:b,labels:c,labelInputsEnabled:g,state:e}=this,f=this.visibleElements.labels,h=c.values[a],k=this.classes("esri-slider__label",f?null:"esri-hidden",g&&"disabled"!==e?"esri-slider__label--interactive":null);return v.tsx("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!f).toString(),
bind:this,class:k,"data-thumb-index":a,key:`${b}-label-${a}`,id:`${b}-label-${a}`,role:g?"button":null,"touch-action":"none"},this._activeLabelInputIndex===a?this.renderValueInput(a):h)};d.renderValueInput=function(a){const {disabled:b,values:c}=this;return v.tsx("input",{key:`value-input-${a}`,afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:"esri-slider__label-input","data-input-type":"thumb","data-input-index":a,required:!0,tabIndex:b?-1:0,type:"text",value:this._formatInputValue(c[a],
"value",a),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})};d.renderMax=function(){const {_isMaxInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:g}=this,e=this.visibleElements.rangeLabels,f=this.classes("esri-slider__max",{["esri-hidden"]:!e,["esri-slider__max--interactive"]:c&&"disabled"!==g,["esri-slider__range--active"]:a});return v.tsx("div",{"aria-hidden":(!e).toString(),afterCreate:this._afterMaxLabelCreate,bind:this,class:f,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,
role:c?"button":null,tabIndex:!this.disabled&&c?0:-1},a?this.renderMaxInput():b.max)};d.renderMin=function(){const {_isMinInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:g}=this,e=this.visibleElements.rangeLabels,f=this.classes("esri-slider__min",{["esri-hidden"]:!e,["esri-slider__min--interactive"]:c&&"disabled"!==g,["esri-slider__range--active"]:a});return v.tsx("div",{"aria-hidden":(!e).toString(),afterCreate:this._afterMinLabelCreate,bind:this,class:f,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,
role:c?"button":null,tabIndex:!this.disabled&&c?0:-1},a?this.renderMinInput():b.min)};d.renderMaxInput=function(){return v.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:"esri-slider__range-input","data-input-type":"max",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})};d.renderMinInput=function(){return v.tsx("input",{afterCreate:this._afterInputCreate,
"aria-label":this.messages.minimumValue,bind:this,class:"esri-slider__range-input","data-input-type":"min",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})};d.renderExtraContentElements=function(){return v.tsx("div",{bind:this,class:"esri-slider__extra-content"},this.extraNodes)};d.renderTicksContainer=function(){if(this.tickConfigs&&this.trackElement&&(0!==this._trackHeight||0!==this._trackWidth))return this.tickConfigs.map((a,
b)=>v.tsx("div",{key:"ticks-container",class:this.classes("esri-slider__ticks")},this.renderTicks(a,b)))};d.renderTicks=function(a,b){const {mode:c,values:g}=a;this.tickElements.getItemAt(b)||this.tickElements.add(new E,b);if("position"===c){var e=Array.isArray(g)?g:[g];return this._calculateTickPositions(e).map((f,h)=>this.renderTickGroup(a,h,b,f))}if("percent"===c&&Array.isArray(g)){const {max:f,min:h}=this,k=f-h;e=g.map(l=>this._applyPrecisionToPosition(l/100*k+h));return this._calculateTickPositions(e).map((l,
n)=>this.renderTickGroup(a,n,b,l))}e=Array.isArray(g)&&g.length?g[0]:isNaN(g)?null:g;e=this._getTickCounts(e,a);return this._calculateEquidistantTickPositions(e).map((f,h)=>this.renderTickGroup(a,h,b,f))};d.renderTickGroup=function(a,b,c,g){const e="position"===a.mode?Array.isArray(a.values)?a.values[b]:a.values:this._valueFromPosition(g);if(!t.isNone(e)&&!isNaN(e))return v.tsx("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":a,"data-position":g,
"data-tick-config-index":c,"data-tick-group-index":b,"data-value":e,onclick:this._onTickGroupClick,key:`tick-group-${b}`},this.renderTickLine(a,b,c,e),a.labelsVisible?this.renderTickLabel(a,b,c,e):null)};d.renderTickLine=function(a,b,c,g){return v.tsx("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":g.toString(),bind:this,class:"esri-slider__tick","data-config":a,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":g,key:`tick-label-${b}`,style:this._getPositionStyleForElement(g)})};
d.renderTickLabel=function(a,b,c,g){const e=a.labelFormatFunction?a.labelFormatFunction(g,"tick",b):this.viewModel.getLabelForValue(g,"tick",b);return v.tsx("div",{afterCreate:this._afterTickLabelCreate,"aria-label":e,"aria-valuenow":g.toString(),"aria-valuetext":e,bind:this,class:"esri-slider__tick-label","data-config":a,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":g,key:`tick-label-${b}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(g)}`},e)};d._afterContainerCreate=
function(a){this.own(S.onResize(a,()=>this.scheduleRender()))};d._afterTrackCreate=function(a){this._set("trackElement",a);a.addEventListener("pointerdown",this._onTrackPointerDown);this.scheduleRender()};d._afterTrackRemoved=function(a){a.removeEventListener("pointerdown",this._onTrackPointerDown);document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp)};d._afterSegmentCreate=function(a){this.segmentElements.add(a);a.addEventListener("pointerdown",
this._onSegmentPointerDown)};d._afterSegmentRemoved=function(a){this.segmentElements.remove(a);a.removeEventListener("pointerdown",this._onSegmentPointerDown)};d._afterEffectiveSegmentCreate=function(a){this.effectiveSegmentElements.add(a)};d._afterEffectiveSegmentRemoved=function(a){this.effectiveSegmentElements.remove(a)};d._afterAnchorCreate=function(a){this._anchorElements.push(a);a.addEventListener("pointerdown",this._onAnchorPointerDown);if(this.thumbCreatedFunction){const b=a["data-thumb-index"];
a=a["data-value"];const c=this.thumbElements.getItemAt(b)||null,g=this.labelElements.getItemAt(b)||null;this.thumbCreatedFunction(b,a,c,g)}};d._afterAnchorUpdate=function(a){t.isSome(this._focusedAnchorIndex)&&a["data-thumb-index"]===this._focusedAnchorIndex&&(a.focus(),this._focusedAnchorIndex=null)};d._afterAnchorRemoved=function(a){const b=this._anchorElements.indexOf(a,0);-1<b&&this._anchorElements.splice(b,1);a.removeEventListener("pointerdown",this._onAnchorPointerDown)};d._afterThumbCreate=
function(a){this.thumbElements.add(a)};d._afterThumbRemoved=function(a){this.thumbElements.remove(a)};d._afterLabelCreate=function(a){this.labelElements.add(a);a.addEventListener("pointerdown",this._onLabelPointerDown);a.addEventListener("pointerup",this._onLabelPointerUp)};d._afterLabelRemoved=function(a){this.labelElements.remove(a);a.removeEventListener("pointerdown",this._onLabelPointerDown);a.removeEventListener("pointerup",this._onLabelPointerUp)};d._afterInputCreate=function(a){a.focus();a.select();
if(this.inputCreatedFunction){const b=a.getAttribute("data-input-type");this.inputCreatedFunction(a,b,"thumb"===b?a["data-input-index"]:null)}};d._afterTickLineCreate=function(a){const b=a["data-tick-group-index"],c=this.tickElements.getItemAt(a["data-tick-config-index"]);c.getItemAt(b)?c.getItemAt(b).tickElement=a:c.add({groupElement:null,tickElement:a,labelElement:null},b)};d._afterTickLabelCreate=function(a){const b=a["data-tick-group-index"],c=this.tickElements.getItemAt(a["data-tick-config-index"]);
c.getItemAt(b)?c.getItemAt(b).labelElement=a:c.add({groupElement:null,labelElement:a,tickElement:null},b)};d._afterTickGroupRemoved=function(a){const b=this.tickElements.items[a["data-tick-config-index"]],c=null==b?void 0:b.find(g=>g.groupElement===a);c&&b.remove(c)};d._afterTickGroupCreate=function(a){const b=a["data-config"];if(b&&b.tickCreatedFunction){var c,g,e=a["data-tick-config-index"];const f=a["data-tick-group-index"],h=a["data-value"];if(e=null==(c=this.tickElements)?void 0:null==(g=c.getItemAt(e))?
void 0:g.getItemAt(f))e.groupElement=a,b.tickCreatedFunction(h,e.tickElement||null,e.labelElement||null)}};d._afterMaxLabelCreate=function(a){this._set("maxLabelElement",a)};d._afterMinLabelCreate=function(a){this._set("minLabelElement",a)};d._onAnchorKeyDown=function(a){if(!this._isDisabled()&&"editing"!==this.state){var {target:b}=a,c=H.eventKey(a),{_anchorElements:g,values:e}=this;b=b["data-thumb-index"];var f=g[b],h=e[b],k=[x.moveAnchorUp,x.moveAnchorDown,x.moveAnchorLeft,x.moveAnchorRight];if(c===
x.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=b,this.notifyChange("state");else if(k.includes(c))a.preventDefault(),{steps:a}=this,c=c===x.moveAnchorUp||c===x.moveAnchorRight?1:-1,t.isSome(a)?this._toStep(b,this._isReversedLayout()?-1*c:c):({precision:a}=this,f=this._getPositionOfElement(f),k=this._valueFromPosition(f),c=this._isHorizontalLayout()?c:-1*c,f=0===a?this._positionFromValue(k+c):1===a?this._positionFromValue(k+.1*c):f+c,this._toPosition(b,f)),f=this.values[b],h!==f&&
this._emitThumbChangeEvent({index:b,oldValue:h,value:f});else if(c===x.moveAnchorToMax||c===x.moveAnchorToMin){a.preventDefault();const {min:l,max:n}=this._getAnchorBoundsInPixels(b);f=this._isPositionInverted()?c===x.moveAnchorToMax?l:n:c===x.moveAnchorToMin?l:n;this._toPosition(b,f);f=this.values[b];h!==f&&this._emitThumbChangeEvent({index:b,oldValue:h,value:f})}}};d._onAnchorPointerDown=function(a){if(!this._isDisabled()){var {target:b,clientX:c,clientY:g}=a,e=b["data-thumb-index"];void 0!==e&&
(a.preventDefault(),this._anchorElements[e]&&this._anchorElements[e].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:c,clientY:g,index:e,position:this._getPositionOfElement(this._anchorElements[e])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}};d._onAnchorPointerMove=function(a){if("editing"!==this.state&&this._dragStartInfo){a.preventDefault();var {values:b,_anchorElements:c,
_dragged:g,_dragStartInfo:e,_dragStartInfo:{index:f,position:h}}=this,{clientX:k,clientY:l}=a;a=g?"drag":"start";var n=this._getPositionOfElement(c[f]),q=this._applyPrecisionToPosition(this._isHorizontalLayout()?h+k-e.clientX:h+l-e.clientY);n!==q&&(n=b[f],this._dragged=!0,this._toPosition(f,q),q=this.values[f],g?n!==q&&this._emitThumbDragEvent({index:f,state:a,value:q}):this._emitThumbDragEvent({index:f,state:a,value:n}))}};d._onAnchorPointerUp=function(a){document.removeEventListener("pointerup",
this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);if(this._dragStartInfo){a.preventDefault();({index:a}=this._dragStartInfo);var b=this._dragged,c=this.values[a];this._dragged=!1;this._dragStartInfo=null;this._lastMovedHandleIndex=a;this.notifyChange("state");b?this._emitThumbDragEvent({index:a,state:"stop",value:c}):(this.scheduleRender(),"editing"!==this.state&&this._emitThumbClickEvent({index:a,value:c}))}};d._onTrackPointerDown=function(a){const {_dragStartInfo:b,
snapOnClickEnabled:c,state:g,values:e}=this;if(!this._isDisabled()&&"editing"!==g&&!b&&(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),c&&e.length)){var {steps:f}=this,{clientX:h,clientY:k}=a,l=this._getCursorPositionFromEvent(a);a=this._valueFromPosition(l);var n=this._getIndexOfNearestValue(a),q=e[n];a=e.some((C,r)=>C===q&&r!==n)&&a>q?this.values.lastIndexOf(q):n;if(!t.isNone(a)){var w=e[a];f=t.isSome(f)?this._calculateNearestStepPosition(l):
l;this._toPosition(a,f);this._dragged=!0;this._dragStartInfo={clientX:h,clientY:k,index:a,position:f};this._focusedAnchorIndex=a;this.notifyChange("state");this._emitThumbDragEvent({index:a,state:"start",value:w});f=this.values[a];w!==f&&this._emitThumbDragEvent({index:a,state:"drag",value:f});document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)}}};d._onTrackPointerMove=function(a){a.preventDefault();this._dragged=!0};d._onTrackPointerUp=
function(a){a.preventDefault();document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp);this.snapOnClickEnabled||(this._dragged=!1);this._dragged||(a=this._getCursorPositionFromEvent(a),a=this._valueFromPosition(a),this._emitTrackClickEvent({value:a}))};d._onSegmentPointerDown=function(a){a.preventDefault();var b=a.target;const c=b["data-segment-index"],g=b["data-min-thumb-index"];b=b["data-max-thumb-index"];if(!(this._isDisabled()||
t.isNone(g)||t.isNone(b))){a.stopPropagation();this._storeTrackDimensions();document.addEventListener("pointerup",this._onSegmentPointerUp);var e=this._getAnchorDetails(g),f=this._getAnchorDetails(b);if(this.syncedSegmentsEnabled)this.segmentElements.forEach(l=>l.classList.add("esri-slider__segment--active")),this._anchorElements.forEach(l=>l.classList.add("esri-slider__anchor--active"));else{var h,k;this.segmentElements.getItemAt(c).classList.add("esri-slider__segment--active");null==(h=this._anchorElements[e.index])?
void 0:h.classList.add("esri-slider__anchor--active");null==(k=this._anchorElements[f.index])?void 0:k.classList.add("esri-slider__anchor--active")}this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(a),index:c,details:this._normalizeSegmentDetails({min:e,max:f})};this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this.notifyChange("state"),this._emitSegmentDragEvent({index:c,state:"start",thumbIndices:[g,b]}))}};d._onSegmentPointerMove=
function(a){if(this._segmentDragStartInfo){a.preventDefault();var {_trackHeight:b,_trackWidth:c,_segmentDragStartInfo:{index:g,cursorPosition:e,details:{min:f,max:h}}}=this,{index:k,position:l,value:n}=f,{index:q,position:w,value:C}=h;this._dragged=!0;a=this._getCursorPositionFromEvent(a);if(a!==e){var r=this._positionToPercent(e);r=this._positionToPercent(a)-r;a=this._positionToPercent(l)+r;r=this._positionToPercent(w)+r;var {min:y}=this._getAnchorBoundsAsPercents(k),{max:A}=this._getAnchorBoundsAsPercents(q),
D=!1,J=!1;a<y?D=!0:r>A&&(J=!0);if(D){const {min:F,max:G}=this.viewModel.getBoundsForValueAtIndex(k);a=this._isPositionInverted()?G:F;r=C+(a-n);y=r-this.values[q];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(y):this._updateAnchorValues([k,q],[a,r])}else if(J){const {min:F,max:G}=this.viewModel.getBoundsForValueAtIndex(q);a=this._isPositionInverted()?F:G;r=n+(a-C);y=r-this.values[k];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(y):this._updateAnchorValues([k,q],
[r,a])}else{y=this._isHorizontalLayout()?c:b;r=r/100*y;A=this.values;var K=[A[k],A[q]];a=this._getValueForAnchorAtPosition(k,a/100*y);r=this._getValueForAnchorAtPosition(q,r);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(a-K[0]):this._updateAnchorValues([k,q],[a,r]);[this.values[k],this.values[q]].every((F,G)=>F===K[G])||this._emitSegmentDragEvent({index:g,state:"drag",thumbIndices:[k,q]})}}}};d._onSegmentPointerUp=function(a){a.preventDefault();document.removeEventListener("pointerup",
this._onSegmentPointerUp);document.removeEventListener("pointermove",this._onSegmentPointerMove);if(this._segmentDragStartInfo){var {_dragged:b,max:c,min:g,values:e}=this,{index:f,details:{min:{index:h},max:{index:k}}}=this._segmentDragStartInfo;this.segmentElements.forEach(l=>l.classList.remove("esri-slider__segment--active"));this._anchorElements.forEach(l=>l.classList.remove("esri-slider__anchor--active"));if(this.draggableSegmentsEnabled){const l=e[h];this._lastMovedHandleIndex=l===e[k]?l>(c-
g)/2?h:k:null;this._dragged=!1;this._segmentDragStartInfo=null;this.notifyChange("state");this._emitSegmentDragEvent({index:f,state:"stop",thumbIndices:[h,k]})}b||(a=this._getCursorPositionFromEvent(a),a=this._valueFromPosition(a),this._emitSegmentClickEvent({index:f,value:a,thumbIndices:[h,k]}))}};d._onTickGroupClick=function(a){a=a.target;a["data-config"]&&this._emitTickClickEvent({configIndex:a["data-tick-config-index"],groupIndex:a["data-tick-group-index"],value:a["data-value"]})};d._storeTrackDimensions=
function(){if(this.trackElement){const a=this._getDimensions(this.trackElement);this._trackHeight=a.height;this._trackWidth=a.width}};d._onLabelPointerDown=function(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))};d._onLabelPointerMove=function(){this._isDisabled()||(this._dragged=!0)};d._onLabelPointerUp=function(a){this._isDisabled()||(a=a.target["data-thumb-index"],this.labelInputsEnabled&&
!this._dragged&&t.isSome(a)&&(this._activeLabelInputIndex=a),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove))};d._onLabelInputBlur=function(a){const {_activeLabelInputIndex:b,values:c,viewModel:g}=this;a=a.target.value;this._activeLabelInputIndex=null;this.notifyChange("state");if(a){var e=this._parseInputValue(a,"value",b);a=c[b];var {min:f,max:h}=this.viewModel.getBoundsForValueAtIndex(b);
e<f||e>h||(g.setValue(b,e),e=this.values[b],a!==e&&this._emitThumbChangeEvent({index:b,oldValue:a,value:e}))}};d._onInputKeyDown=function(a){if(!this._isDisabled()){var {target:b}=a,c=H.eventKey(a),{hideInput1:g,hideInput2:e,hideInput3:f}=x,{_activeLabelInputIndex:h,_anchorElements:k}=this;if(c===g||c===e||c===f)a.stopPropagation(),b.blur(),t.isSome(h)?k[h].focus():b.parentElement.focus()}};d._onMaxLabelClick=function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"max-click",value:this.max}),
this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state")))};d._onMaxLabelKeyDown=function(a){this._isDisabled()||H.eventKey(a)!==x.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))};d._onMaxInputBlur=function(a){var b=a.target.value;this._isMaxInputActive=!1;this.notifyChange("state");b&&(a=this.max,b=this._parseInputValue(b,"max"),b<=this.min||(this.viewModel.set("max",b),this.max!==a&&this._emitMaxChangeEvent({oldValue:a,value:this.max})))};d._onMinLabelClick=
function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state")))};d._onMinLabelKeyDown=function(a){this._isDisabled()||H.eventKey(a)!==x.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))};d._onMinInputBlur=function(a){var b=a.target.value;this._isMinInputActive=!1;this.notifyChange("state");b&&(a=this.min,b=this._parseInputValue(b,"min"),b>=this.max||(this.viewModel.set("min",
b),this.min!==a&&this._emitMinChangeEvent({oldValue:a,value:this.min})))};d._isDisabled=function(){return this.disabled||"disabled"===this.state};d._positionFromValue=function(a){const {max:b,min:c}=this,g=b-c;if(0===g)return 0;const {_trackHeight:e,_trackWidth:f}=this,h=this._isHorizontalLayout();a=h?parseFloat((f*(a-c)/g).toFixed(2)):parseFloat((e*(b-a)/g).toFixed(2));this._isReversedLayout()&&(a=h?f-a:e-a);return a};d._valueFromPosition=function(a){const {_trackHeight:b,_trackWidth:c,max:g,min:e,
precision:f}=this,h=g-e;a=this._isHorizontalLayout()?a*h/c+e:h*(1E3-a/b*1E3)/1E3+e;this._isReversedLayout()&&(a=g+e-a);return parseFloat(a.toFixed(f))};d._positionToPercent=function(a){const {_trackHeight:b,_trackWidth:c}=this,g=this._isHorizontalLayout()?c:b;return this._applyPrecisionToPosition(100*a/g)};d._applyPrecisionToPosition=function(a){return parseFloat(a.toFixed(this._positionPrecision))};d._isPositionInverted=function(){const {layout:a}=this;return"horizontal-reversed"===a||"vertical"===
a};d._isHorizontalLayout=function(){return this.layout.includes("horizontal")};d._isReversedLayout=function(){return this.layout.includes("reversed")};d._normalizeSegmentDetails=function(a){if(this._isPositionInverted()){const {min:b,max:c}=a;return{min:c,max:b}}return a};d._parseInputValue=function(a,b,c){return this.inputParseFunction?this.inputParseFunction(a,b,c):this.viewModel.defaultInputParseFunction(a)};d._formatInputValue=function(a,b,c){return this.inputFormatFunction?this.inputFormatFunction(a,
b,c):this.viewModel.defaultInputFormatFunction(a)};d._getAnchorDetails=function(a){a=[...this.values].sort((g,e)=>g-e)[a];const b=this.values.indexOf(a),c=this._getPositionOfElement(this._anchorElements[b]);return{index:b,position:c,value:a}};d._updateAnchorStyle=function(a,b){if(a=this._anchorElements[a])this._isHorizontalLayout()?a.style.left=`${b}`:a.style.top=`${b}`};d._getStyleForAnchor=function(a,b,c){a=this._getPositionStyleForElement(a);if(1===this.values.length)return`${a}`;b=this._zIndices[b];
return`${a}; z-index: ${c?this._zIndexOffset+b:b}`};d._getPositionStyleForElement=function(a){a=this._positionFromValue(a);a=this._positionToPercent(a);return`${this._isHorizontalLayout()?"left":"top"}: ${a+"%"}`};d._getPositionOfElement=function(a){const b=this._getDimensions(a.offsetParent);a=this._getDimensions(a);return this._isHorizontalLayout()?this._applyPrecisionToPosition(a.left-b.left):this._applyPrecisionToPosition(a.top-b.top)};d._updateAnchorValues=function(a,b){a.forEach((c,g)=>this._toValue(c,
b[g]))};d._updateAnchorValuesByDifference=function(a){const {min:b,max:c,values:g}=this;g.forEach((e,f)=>this._toValue(f,Math.max(Math.min(e+a,c),b)))};d._toValue=function(a,b){if(t.isSome(this.steps)){const c=this._getStepValues();b=this._getIndexOfNearestStepValue(b);b=c[b]}this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};d._toPosition=function(a,b){b=t.isSome(this.steps)?this._getStepValueForAnchorAtPosition(a,b):this._getValueForAnchorAtPosition(a,b);
this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};d._getValueForAnchorAtPosition=function(a,b){const {min:c,max:g}=this._getAnchorBoundsInPixels(a),{min:e,max:f}=this.viewModel.getBoundsForValueAtIndex(a);a=null;let h;this._isPositionInverted()?(a=e,h=f):(a=f,h=e);a=b>g?a:b<c?h:this._valueFromPosition(b);a>f?a=f:a<e&&(a=e);return a};d._getStepValueForAnchorAtPosition=function(a,b){const c=this._getStepValues();b=this._calculateNearestStepPosition(b);a=this._getValueForAnchorAtPosition(a,
b);a=this._getIndexOfNearestStepValue(a);return c[a]};d._getAnchorBoundsAsPercents=function(a){const {min:b,max:c}=this._getAnchorBoundsInPixels(a);return{min:this._positionToPercent(b),max:this._positionToPercent(c)}};d._getAnchorBoundsInPixels=function(a){const {_anchorElements:b,_trackHeight:c,_trackWidth:g,effectiveMax:e,effectiveMin:f,thumbsConstrained:h}=this,k=b[a-1];a=b[a+1];var l=this._isHorizontalLayout()?g:c;let n;this._isPositionInverted()?(l=t.isSome(f)?this._positionFromValue(f):l,n=
t.isSome(e)?this._positionFromValue(e):0):(l=t.isSome(e)?this._positionFromValue(e):l,n=t.isSome(f)?this._positionFromValue(f):0);return h?this._isPositionInverted()?{max:k?this._getPositionOfElement(k):l,min:a?this._getPositionOfElement(a):n}:{max:a?this._getPositionOfElement(a):l,min:k?this._getPositionOfElement(k):n}:{max:l,min:n}};d._getIndexOfNearestValue=function(a){return this.values.indexOf(this.values.reduce((b,c)=>Math.abs(c-a)<Math.abs(b-a)?c:b))};d._getCursorPositionFromEvent=function(a){const b=
this._getDimensions(this.trackElement);return this._isHorizontalLayout()?a.clientX-b.left:a.clientY-b.top};d._getStepValues=function(){const {steps:a}=this;if(Array.isArray(a))return a;const {max:b,min:c}=this,g=Math.ceil((b-c)/a),e=[];for(let f=0;f<=g;f++){const h=c+a*f;e.push(h>b?b:h)}return e};d._toStep=function(a,b){const {values:c,viewModel:g}=this,e=c[a];var f=this._getStepValues(),h=f.indexOf(e);let k=null;-1<h?(b=f[h+b],isNaN(b)&&(b=f[h]),f=this._positionFromValue(b),k=this._getStepValueForAnchorAtPosition(a,
f)):(h=this._getIndexOfNearestStepValue(e),k=f[h+b]);g.setValue(a,k)};d._getIndexOfNearestStepValue=function(a){var {steps:b}=this;if(t.isNone(b))return null;b=this._getStepValues();const c=b.reduce((g,e)=>Math.abs(e-a)<Math.abs(g-a)?e:g);return b.indexOf(c)};d._calculateNearestStepPosition=function(a){a=this._valueFromPosition(a);a=this._getIndexOfNearestStepValue(a);const b=this._getStepValues();return this._positionFromValue(b[a])};d._getTickCounts=function(a,b){({mode:b}=b);return"count"===b||
"position"===b?a||0:"percent"===b?100/a||0:0};d._calculateTickPositions=function(a){return a.map(b=>this._positionFromValue(b))};d._calculateEquidistantTickPositions=function(a){const {_trackWidth:b,_trackHeight:c}=this,g=this._isHorizontalLayout()?b:c,e=g/(a-1),f=[];if(1===a)return[g/2];for(let h=0;h<a;h++){const k=h*e;k<=g&&f.push(k)}return f};d._getDimensions=function(a){try{return a.getBoundingClientRect()}catch(b){if("object"===typeof b&&null!==b)return new DOMRect(0,0,0,0);throw b;}};d._emitTrackClickEvent=
function(a){this.emit("track-click",{...a,type:"track-click"})};d._emitTickClickEvent=function(a){this.emit("tick-click",{...a,type:"tick-click"})};d._emitMaxChangeEvent=function(a){this.emit("max-change",{...a,type:"max-change"})};d._emitMinChangeEvent=function(a){this.emit("min-change",{...a,type:"min-change"})};d._emitThumbChangeEvent=function(a){this.emit("thumb-change",{...a,type:"thumb-change"})};d._emitThumbClickEvent=function(a){this.emit("thumb-click",{...a,type:"thumb-click"})};d._emitThumbDragEvent=
function(a){this.emit("thumb-drag",{...a,type:"thumb-drag"})};d._emitSegmentClickEvent=function(a){this.emit("segment-click",{...a,type:"segment-click"})};d._emitSegmentDragEvent=function(a){this.emit("segment-drag",{...a,type:"segment-drag"})};d._emitRangeLabelClickEvent=function(a){this.emit(a.type,{...a})};z._createClass(I,[{key:"layout",set:function(a){["vertical","vertical-reversed","horizontal","horizontal-reversed"].includes(a)||(a="horizontal");this._set("layout",a)}},{key:"state",get:function(){const {_activeLabelInputIndex:a,
_isMaxInputActive:b,_isMinInputActive:c,_dragStartInfo:g,_segmentDragStartInfo:e,disabled:f,viewModel:h}=this,k=t.isSome(g)||t.isSome(e);return f?"disabled":null!==a||b||c?"editing":k?"dragging":h.state}},{key:"tickConfigs",set:function(a){this._set("tickConfigs",a);this.scheduleRender()}}]);return I}(Q);p.__decorate([u.property()],m.prototype,"disabled",void 0);p.__decorate([u.property()],m.prototype,"draggableSegmentsEnabled",void 0);p.__decorate([B.aliasOf("viewModel.effectiveMax")],m.prototype,
"effectiveMax",void 0);p.__decorate([B.aliasOf("viewModel.effectiveMin")],m.prototype,"effectiveMin",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"effectiveSegmentElements",void 0);p.__decorate([u.property()],m.prototype,"extraNodes",void 0);p.__decorate([u.property()],m.prototype,"inputCreatedFunction",void 0);p.__decorate([B.aliasOf("viewModel.inputFormatFunction")],m.prototype,"inputFormatFunction",void 0);p.__decorate([B.aliasOf("viewModel.inputParseFunction")],m.prototype,"inputParseFunction",
void 0);p.__decorate([u.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],m.prototype,"label",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"labelElements",void 0);p.__decorate([u.property()],m.prototype,"labelInputsEnabled",void 0);p.__decorate([B.aliasOf("viewModel.labelFormatFunction")],m.prototype,"labelFormatFunction",void 0);p.__decorate([B.aliasOf("viewModel.labels")],m.prototype,"labels",void 0);p.__decorate([u.property({value:"horizontal"})],m.prototype,"layout",
null);p.__decorate([B.aliasOf("viewModel.max")],m.prototype,"max",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"maxLabelElement",void 0);p.__decorate([u.property(),T.messageBundle("esri/widgets/Slider/t9n/Slider")],m.prototype,"messages",void 0);p.__decorate([B.aliasOf("viewModel.min")],m.prototype,"min",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"minLabelElement",void 0);p.__decorate([B.aliasOf("viewModel.precision")],m.prototype,"precision",void 0);p.__decorate([u.property()],
m.prototype,"rangeLabelInputsEnabled",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"segmentElements",void 0);p.__decorate([u.property()],m.prototype,"snapOnClickEnabled",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([u.property()],m.prototype,"steps",void 0);p.__decorate([u.property()],m.prototype,"syncedSegmentsEnabled",void 0);p.__decorate([B.aliasOf("viewModel.thumbsConstrained")],m.prototype,"thumbsConstrained",void 0);p.__decorate([u.property()],
m.prototype,"thumbCreatedFunction",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"thumbElements",void 0);p.__decorate([u.property()],m.prototype,"tickConfigs",null);p.__decorate([u.property({readOnly:!0})],m.prototype,"tickElements",void 0);p.__decorate([u.property({readOnly:!0})],m.prototype,"trackElement",void 0);p.__decorate([B.aliasOf("viewModel.values")],m.prototype,"values",void 0);p.__decorate([u.property()],m.prototype,"viewModel",void 0);p.__decorate([u.property()],m.prototype,
"visibleElements",void 0);p.__decorate([O.cast("visibleElements")],m.prototype,"castVisibleElements",null);return m=p.__decorate([P.subclass("esri.widgets.Slider")],m)});