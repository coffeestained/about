// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,u,c,G,f,F,A,L){c=function(K){function C(x){x=K.call(this,x)||this;x.enabled=!1;return x}d._inheritsLoose(C,K);return C}(c);
u.__decorate([G.property({type:Boolean,nonNullable:!0})],c.prototype,"enabled",void 0);return c=u.__decorate([L.subclass("esri.views.interactive.sketch.SketchLabelOptions")],c)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,c,G,f,F,A,L){let K=function(x){function k(g){g=x.call(this,g)||this;g.mode="absolute-height";return g}d._inheritsLoose(k,x);return k}(c);u.__decorate([G.property({type:String,nonNullable:!0})],K.prototype,"mode",void 0);K=u.__decorate([L.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],K);let C=function(x){function k(){var g=x.apply(this,arguments)||this;g.distance=!0;g.elevation=!0;g.size=!0;g.scale=!0;g.rotation=!0;g.orientation=!0;g.totalLength=!0;g.area=!0;g.radius=
!0;return g}d._inheritsLoose(k,x);return k}(c);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"distance",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"elevation",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"size",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"scale",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"rotation",void 0);u.__decorate([G.property({type:Boolean,
nonNullable:!0})],C.prototype,"orientation",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"totalLength",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"area",void 0);u.__decorate([G.property({type:Boolean,nonNullable:!0})],C.prototype,"radius",void 0);C=u.__decorate([L.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],C);c=function(x){function k(g){g=x.call(this,g)||this;g.enabled=!1;g.elevation=new K;g.visibleElements=
new C;g.visualVariables=null;return g}d._inheritsLoose(k,x);return k}(c);u.__decorate([G.property({type:Boolean,nonNullable:!0})],c.prototype,"enabled",void 0);u.__decorate([G.property({type:K,nonNullable:!0})],c.prototype,"elevation",void 0);u.__decorate([G.property({type:C,nonNullable:!0})],c.prototype,"visibleElements",void 0);u.__decorate([G.property()],c.prototype,"visualVariables",void 0);return c=u.__decorate([L.subclass("esri.widgets.Sketch.SketchTooltipOptions")],c)})},"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){c=function(k){function g(q){q=k.call(this,q)||this;q.enabled=!1;q.enabledToggled=!1;q.selfEnabled=!0;q.featureEnabled=!0;q.featureSources=new G;q.distance=x.defaults.distance;q.touchSensitivityMultiplier=x.defaults.touchSensitivityMultiplier;return q}d._inheritsLoose(g,k);d._createClass(g,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},
{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]);return g}(c);u.__decorate([f.property()],c.prototype,"enabled",void 0);u.__decorate([f.property()],c.prototype,"enabledToggled",void 0);u.__decorate([f.property()],c.prototype,"selfEnabled",void 0);u.__decorate([f.property()],c.prototype,"featureEnabled",void 0);u.__decorate([f.property({type:G.ofType(C)})],c.prototype,"featureSources",void 0);u.__decorate([f.property()],c.prototype,"distance",void 0);
u.__decorate([f.property()],c.prototype,"touchSensitivityMultiplier",void 0);u.__decorate([f.property({readOnly:!0})],c.prototype,"effectiveEnabled",null);u.__decorate([f.property({readOnly:!0})],c.prototype,"effectiveSelfEnabled",null);u.__decorate([f.property({readOnly:!0})],c.prototype,"effectiveFeatureEnabled",null);return c=u.__decorate([K.subclass("esri.views.interactive.snapping.SnappingOptions")],c)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,c,G,f,F,A,L){c=function(K){function C(x){x=K.call(this,x)||this;x.layer=null;x.enabled=!0;x.updating=!1;x.availability=1;return x}d._inheritsLoose(C,K);return C}(c);u.__decorate([G.property({constructOnly:!0})],c.prototype,"layer",void 0);u.__decorate([G.property()],c.prototype,"enabled",void 0);u.__decorate([G.property()],c.prototype,"updating",void 0);u.__decorate([G.property()],c.prototype,"availability",void 0);return c=u.__decorate([L.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
c)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,u,c,G,f,F,A){let L=function(K){function C(){var x=K.apply(this,arguments)||this;x.enabled=!0;return x}u._inheritsLoose(C,K);return C}(f.JSONSupport);c.__decorate([F.property({type:Boolean})],L.prototype,
"enabled",void 0);L=c.__decorate([A.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],L);f=function(K){function C(x){x=K.call(this,x)||this;x.lineSnapper=new L;x.parallelLineSnapper=new L;x.rightAngleSnapper=new L;x.rightAngleTriangleSnapper=new L;x.shortLineThreshold=15;x.distance=5;x.pointThreshold=1E-6;x.intersectionParallelLineThreshold=1E-6;x.parallelLineThreshold=1E-6;x.touchSensitivityMultiplier=1.5;x.pointOnLineThreshold=1E-6;x.orange=new G([255,127,0]);x.lineHintWidthReference=
3;x.lineHintWidthTarget=3;x.lineHintFadedExtensions=.3;x.parallelLineHintWidth=2;x.parallelLineHintLength=24;x.parallelLineHintOffset=1.5;x.rightAngleHintSize=24;x.rightAngleHintOutlineSize=1.5;return x}u._inheritsLoose(C,K);return C}(f.JSONSupport);c.__decorate([F.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"lineSnapper",void 0);c.__decorate([F.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"parallelLineSnapper",void 0);c.__decorate([F.property({type:L,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleSnapper",void 0);c.__decorate([F.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleTriangleSnapper",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"shortLineThreshold",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"distance",void 0);c.__decorate([F.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"pointThreshold",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"intersectionParallelLineThreshold",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"parallelLineThreshold",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"touchSensitivityMultiplier",
void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"pointOnLineThreshold",void 0);c.__decorate([F.property({type:G,nonNullable:!0})],f.prototype,"orange",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthReference",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthTarget",void 0);c.__decorate([F.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],f.prototype,"lineHintFadedExtensions",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"parallelLineHintWidth",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],f.prototype,"parallelLineHintLength",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],f.prototype,"parallelLineHintOffset",
void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],f.prototype,"rightAngleHintSize",void 0);c.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],f.prototype,"rightAngleHintOutlineSize",void 0);f=c.__decorate([A.subclass("esri.views.interactive.snapping.Settings.Defaults")],f);c=new f;d.defaults=c;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/sketch/SketchLabelOptions ../../views/interactive/sketch/SketchTooltipOptions ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/hitTestSelectUtils ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D,O,T,Q,N,P,w,E,J,X,W,p,H,I,U,Z){function ea(za){return"polygon"===za||"rectangle"===za||"circle"===za?!0:!1}function ka(za,Aa){oa("undo",za.history.undo,za.history.redo,Aa)}function ya(za,Aa){oa("redo",za.history.redo,za.history.undo,Aa)}function oa(za,Aa,xa,ba){const da=Aa.pop().updates,ia=[];ba.forEach((ja,sa)=>{sa=da[sa];null!=sa&&("geometry"in sa&&x.isSome(sa.geometry)&&(ia.push({geometry:ja.geometry}),ja.geometry=sa.geometry),"symbol"in
sa&&x.isSome(sa.symbol)&&(ia.push({symbol:ja.symbol}),ja.symbol=sa.symbol),"undo"in sa&&(ia.push(sa),sa[za](ja)))});xa.push({updates:ia})}function va(za){return{updates:za.map(Aa=>({geometry:Aa.geometry}))}}function ua(za){return"requireError"in za&&"aborted"===za.requireError}const Ga=za=>Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"})),ha=C.getLogger("esri.widgets.Sketch.SketchViewModel"),la={defaultZ:0},wa={reshapeOptions:{edgeOperation:"split",
shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};F=function(za){function Aa(ba){ba=za.call(this,ba)||this;ba._numUpdating=0;ba._handles=new K;ba._internalGraphicsLayer=new y({listMode:"hide",internal:!0,title:"SVM Internal"});ba._operationHandle=null;ba._viewHandles=new K;ba.activeFillSymbol=null;ba.activeLineSymbol=null;ba.activeVertexSymbol=
null;ba.allowDeleteKey=!0;ba.labelOptions=new w;ba.layer=null;ba.pointSymbol=new I({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});ba.polygonSymbol=new U({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});ba.polylineSymbol=new Z({color:[130,130,130,1],width:2});ba._snappingManager=null;ba.tooltipOptions=new E;ba.updateGraphics=new f;ba.updateOnGraphicClick=!0;ba.updatePointSymbol=new I({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});ba.updatePolygonSymbol=
new U({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});ba.updatePolylineSymbol=new Z({color:[12,207,255],width:2});ba.vertexSymbol=new I({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});ba._moduleLoaderAbortController=null;ba._viewReadyAbortController=null;ba._originalAutoOpenEnabled=null;ba.defaultCreateOptions=la;ba.defaultUpdateOptions=wa;ba.snappingOptions=new X;return ba}u._inheritsLoose(Aa,za);var xa=Aa.prototype;xa.initialize=function(){this._handles.add([g.on(()=>
{var ba,da;return null==(ba=this.view)?void 0:null==(da=ba.map)?void 0:da.layers},"change",ba=>{ba.removed.includes(this.layer)&&this.cancel()}),g.on(()=>{var ba;return null==(ba=this.layer)?void 0:ba.graphics},"change",ba=>{if(x.isSome(this._operationHandle))for(const da of ba.removed)this.updateGraphics.includes(da)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(da):this._operationHandle.cancel())}),g.watch(()=>{var ba,da;return null!=(ba=null==(da=this.layer)?void 0:da.elevationInfo)?
ba:null},ba=>{ba!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=ba)},g.syncAndInitial),g.watch(()=>this.view,ba=>{x.destroyMaybe(this._snappingManager);ba&&(this._snappingManager=new J.SnappingManager({view:ba,options:this.snappingOptions}),"2d"===ba.type?new Promise((da,ia)=>d(["../../views/2d/interactive/editingTools"],da,ia)):"3d"===ba.type&&(new Promise((da,ia)=>d(["../../views/3d/interactive/editingTools"],da,ia)),new Promise((da,ia)=>d(["../../views/3d/layers/GraphicsLayerView3D"],
ja=>da(Ga(ja)),ia))))},g.syncAndInitial),g.watch(()=>{var ba;return null==(ba=this.view)?void 0:ba.spatialReference},(ba,da)=>{ba&&da&&!ba.equals(da)&&this.cancel()})])};xa.destroy=function(){this.cancel();this._handles=x.destroyMaybe(this._handles);this._viewHandles=x.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=x.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};xa.cancel=function(){this._moduleLoaderAbortController=x.abortMaybe(this._moduleLoaderAbortController);
this._viewReadyAbortController=x.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};xa.complete=function(){this._operationHandle&&this._operationHandle.complete()};xa.delete=function(){const {state:ba,updateGraphics:da}=this;if("active"===ba&&da.length){const {activeTool:ia,layer:ja}=this,sa=da.toArray();ja.removeMany(sa);this.cancel();this._emitDeleteEvent({graphics:sa,tool:ia})}};xa.create=function(){var ba=u._asyncToGenerator(function*(da,ia){this.cancel();
yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),k.createAbortError();x.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(da){Q.addUniqueLayer(this.view,this._internalGraphicsLayer);var ja=yield this._setupCreateOperation(da,ia);x.isNone(ja)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):
(ja.on("complete",()=>{if(ja===this._operationHandle){const sa=this.createGraphic,ma=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);ja.cancelled||null==sa||this.layer.add(sa);this.emit("create",{graphic:sa,state:ma?"cancel":"complete",tool:da,toolEventInfo:null,type:"create"})}}),this._operationHandle=ja,this.view.ready&&r.isDOMContainer(this.view)&&
this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(da,ia){return ba.apply(this,arguments)}}();xa.update=function(){var ba=u._asyncToGenerator(function*(da,ia){this.cancel();yield this._waitViewReady();const {layer:ja,view:sa,state:ma}=this;if("disabled"===ma)throw sa||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ja||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),
k.createAbortError();x.isSome(this.view.activeTool)&&(this.view.activeTool=null);const qa=Array.isArray(da)?da:[da];null!=da&&qa&&qa.length?qa.some(Ca=>Ca.layer!==ja?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):x.isNone(Ca.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):!1)||(da=yield this._setupUpdateOperation(qa,
ia),this.destroyed||x.isNone(da)||ua(da)||(Q.addUniqueLayer(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(da,ia),this.emit("update",{graphics:qa,state:"start",aborted:!1,tool:da.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(da,ia){return ba.apply(this,arguments)}}();xa._updateSpatialReference=function(){var ba=u._asyncToGenerator(function*(da){this._beginAsyncOperation();da=Array.isArray(da)?
da:[da];for(const ia of da)x.isSome(ia.geometry)&&"mesh"!==ia.geometry.type&&!l.equals(ia.geometry.spatialReference,this.view.spatialReference)&&(z.canProjectWithoutEngine(ia.geometry.spatialReference,this.view.spatialReference)||z.isLoaded()||(yield z.load()),ia.geometry=z.project(ia.geometry,this.view.spatialReference));this._endAsyncOperation()});return function(da){return ba.apply(this,arguments)}}();xa.undo=function(){this.canUndo()&&this._operationHandle.undo()};xa.redo=function(){this.canRedo()&&
this._operationHandle.redo()};xa.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};xa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};xa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};xa._getFirstHit=function(){var ba=u._asyncToGenerator(function*(da){var ia=this.view;if("2d"===ia.type){const sa=[];this.view.map.allLayers.forEach(ma=>{"vector-tile"!==
ma.type&&"imagery"!==ma.type||sa.push(ma)});ia=yield this.view.hitTest(da,{exclude:sa});return W.findFirstGraphicHit(ia.results)}const ja=[this.view.map.ground];ia.map.allLayers.forEach(sa=>{"integrated-mesh"===sa.type&&ja.push(sa)});da=yield ia.hitTest(da,{exclude:ja});if(0<da.results.length){const sa=da.results[0];if(x.isSome(sa)&&"graphic"===sa.type&&sa.graphic&&(!da.ground.mapPoint||1>ia.map.ground.opacity||da.ground.distance-x.unwrapOr(sa.distance,0)>-Math.min(3*da.ground.distance,"global"===
ia.viewingMode?e.getReferenceEllipsoid(ia.renderCoordsHelper.spatialReference).radius/ia.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return sa}return null});return function(da){return ba.apply(this,arguments)}}();xa._generateViewHandles=function(ba){var da=this;return[ba.on("immediate-click",function(){var ia=u._asyncToGenerator(function*(ja){var sa="active"===da.state&&"create"===da._operationHandle.type;if("disabled"!==da.state&&!sa&&da.updateOnGraphicClick){da._beginAsyncOperation();
var ma=yield ja.async(()=>da._getFirstHit(p.createScreenPointFromEvent(ja)));sa=null;x.isSome(ma)?(ma=ma.graphic,da.updateGraphics.includes(ma)||ma.layer===da.layer?(ja.stopPropagation(),sa=ma):"2d"!==ba.type||da._isComponentGraphic(ma)||"active"!==da.state||da.cancel()):"active"===da.state&&da.cancel();x.isSome(sa)&&!da.updateGraphics.includes(sa)&&(yield da.update([sa],{...da.defaultUpdateOptions,reshapeOptions:{...da.defaultUpdateOptions.reshapeOptions}}));da._endAsyncOperation()}});return function(ja){return ia.apply(this,
arguments)}}(),N.ViewEventPriorities.WIDGET)]};xa._setupCreateOperation=function(){var ba=u._asyncToGenerator(function*(da,ia){da=yield this._setupDrawGraphicTool(da,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...ia});if(x.isNone(da))return null;this.view.tools.add(da);this.view.activeTool=da;return this._setupCreateOperationHandle(da)});return function(da,ia){return ba.apply(this,arguments)}}();xa._setupDrawGraphicTool=function(){var ba=u._asyncToGenerator(function*(da,ia,
ja){if("multipoint"===da&&"3d"===ia.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const sa="rectangle"!==da,ma="rectangle"!==da;this.snappingOptions.enabledToggled=!1;da={view:ia,mode:"rectangle"===da||"circle"===da?"hybrid":"click",...ja,snapToScene:!1,geometryType:da,graphicSymbol:this._getGraphicSymbolFromTool(da),snappingManager:this._snappingManager,forceUniformSize:ma,centered:sa};return"2d"===this.view.type?this._makeDrawGraphicTool2D(da):
this._makeDrawGraphicTool3D(da)});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._makeDrawGraphicTool2D=function(){var ba=u._asyncToGenerator(function*(da){const ia=yield this._requireModule(new Promise((ja,sa)=>d(["../../views/2d/interactive/editingTools"],ja,sa)));return ua(ia)||this.destroyed?null:new ia.module.DrawGraphicTool2D({...da,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ea(da.geometryType)?
this.activeFillSymbol:null})});return function(da){return ba.apply(this,arguments)}}();xa._makeDrawGraphicTool3D=function(){var ba=u._asyncToGenerator(function*(da){const ia=yield this._requireModule(new Promise((sa,ma)=>d(["../../views/3d/interactive/editingTools"],sa,ma)));if(ua(ia)||this.destroyed)return null;const {elevationInfo:ja}=this.layer;return new ia.module.DrawGraphicTool3D({...da,elevationInfo:ja,snapToScene:x.isSome(ja)?"absolute-height"===ja.mode:!0,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})});
return function(da){return ba.apply(this,arguments)}}();xa._setupCreateOperationHandle=function(ba){let da=null;const ia=ba.forceUniformSize,ja=ba.centered,sa=[this.view.on("key-down",qa=>{if(qa.key===P.SKETCH_KEYS.pan)qa.stopPropagation(),qa.repeat||(ba.enabled=!1);else if(qa.key===P.SKETCH_KEYS.complete)qa.stopPropagation(),ba.completeCreateOperation();else if(qa.key!==P.SKETCH_KEYS.vertexAdd||qa.repeat)qa.key===P.SKETCH_KEYS.undo?(qa.stopPropagation(),ma.undo()):qa.key===P.SKETCH_KEYS.redo?(qa.stopPropagation(),
ma.redo()):qa.key!==P.SKETCH_KEYS.snappingToggle||"rectangle"===ba.geometryType||"circle"===ba.geometryType||qa.repeat?qa.key!==P.SKETCH_KEYS.constraint||"rectangle"!==ba.geometryType&&"circle"!==ba.geometryType||qa.repeat?qa.key!==P.SKETCH_KEYS.center||qa.repeat||(ba.centered=!ja,qa.stopPropagation()):(ba.forceUniformSize=!ia,qa.stopPropagation()):(this.snappingOptions.enabledToggled=!0,qa.stopPropagation());else{const Ca=ba.drawOperation.geometryType;if("polyline"===Ca||"polygon"===Ca||"multipoint"===
Ca)qa.stopPropagation(),ba.drawOperation.commitStagedVertex()}},N.ViewEventPriorities.WIDGET),this.view.on("key-up",qa=>{qa.key===P.SKETCH_KEYS.pan?ba.enabled=!0:qa.key===P.SKETCH_KEYS.snappingToggle&&"rectangle"!==ba.geometryType&&"circle"!==ba.geometryType?(this.snappingOptions.enabledToggled=!1,qa.stopPropagation()):qa.key!==P.SKETCH_KEYS.constraint||"rectangle"!==ba.geometryType&&"circle"!==ba.geometryType?qa.key===P.SKETCH_KEYS.center&&(ba.centered=ja,qa.stopPropagation()):(ba.forceUniformSize=
ia,qa.stopPropagation())},N.ViewEventPriorities.WIDGET),ba.on("vertex-add",qa=>{da=x.isNone(da)?"start":"active";switch(qa.operation){case "apply":this.emit("create",{graphic:x.unwrap(ba.graphic),state:da,tool:this.activeTool,toolEventInfo:qa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(ba.graphic)],tool:ba.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(ba.graphic)],tool:ba.geometryType})}}),ba.on("cursor-update",qa=>{0<ba.drawOperation.numCommittedVertices&&
this.emit("create",{graphic:x.unwrap(ba.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:qa.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),ba.on("vertex-remove",qa=>{switch(qa.operation){case "apply":this.emit("create",{graphic:x.unwrap(ba.graphic),state:"active",tool:this.activeTool,toolEventInfo:qa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(ba.graphic)],tool:ba.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(ba.graphic)],
tool:ba.geometryType})}}),ba.on("complete",qa=>{this._set("createGraphic",x.unwrap(qa.graphic));da="complete";qa.aborted?ma&&ma.cancel():ma&&ma.complete()}),g.watch(()=>this._getGraphicSymbolFromTool(ba.geometryType),qa=>{ba.graphicSymbol=qa})],ma=new H.OperationHandle({activeComponent:ba,tool:ba.geometryType,type:"create",onEnd:()=>{var qa;sa.forEach(Ca=>Ca.remove());sa.length=0;null==(qa=this.view.tools)?void 0:qa.remove(ba)},undo:()=>{ba.canUndo&&ba.undo()},redo:()=>{ba.canRedo&&ba.redo()},canUndo:()=>
ba.canUndo,canRedo:()=>ba.canRedo});return ma};xa._getGraphicSymbolFromTool=function(ba){switch(ba){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};xa._setupUpdateOperation=function(){var ba=u._asyncToGenerator(function*(da,ia){const {layer:ja,view:sa}=this;ia={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...ia,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,
...null==ia?void 0:ia.reshapeOptions}};var ma=ia.tool;for(var qa of da)ja.remove(qa),ja.add(qa);if("3d"===sa.type){if(0===da.length)return null;switch(ma){case "move":return this._setupMove3DOperation(da,ia,sa,ma);case "reshape":if(1<da.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ma=O.isSupportedGraphic(da[0]);if(ma===m.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(da[0],ia,sa);this._logError("sketch:reshape",
`Reshape operation not supported for provided graphic(s) (${m.isSupportedGraphicResultMessage(ma)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(da,ia,sa)}}switch(ma){case "move":return this._setupMove2DOperation(da,ia,sa);case "reshape":if(1<da.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;qa=O.isSupportedGraphic(da[0]);if(qa===m.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(da,
ma,ia,sa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${m.isSupportedGraphicResultMessage(qa)}).`);return null;case "transform":return 1===da.length&&(qa=x.get(da[0].geometry,"type"),"point"===qa||"multipoint"===qa)&&(ma="reshape"),this._setupTransformOrReshape2DOperation(da,ma,ia,sa)}});return function(da,ia){return ba.apply(this,arguments)}}();xa._setupMove3DOperation=function(){var ba=u._asyncToGenerator(function*(da,ia,ja,sa,ma=!1){var qa=this;for(var Ca of da){const Ba=
D.isSupportedGraphic(Ca);if(Ba!==m.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${m.isSupportedGraphicResultMessage(Ba)}).`),null}Ca=yield this._requireModule(new Promise((Ba,Ka)=>d(["../../views/3d/interactive/editingTools"],Ba,Ka)));if(ua(Ca))return Ca;const La=new Ca.module.GraphicMoveTool({view:ja,enableZ:ia.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(La);La.graphics.addMany(da);
ma||this.updateGraphics.addMany(da);const Fa=[],Da=new H.UpdateOperationHandle({activeComponent:La,tool:sa,type:"update",onEnd:()=>{var Ba;Fa.forEach(Ka=>Ka.remove());Fa.length=0;null==(Ba=this.view.tools)?void 0:Ba.remove(La);La.destroyed||La.destroy()},undo:()=>{ka(Da,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:sa})},redo:()=>{ya(Da,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:sa})},addToSelection:Ba=>
{this.updateGraphics.push(Ba);La.graphics.push(Ba);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Ba],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Ba=>{const Ka=this.updateGraphics.indexOf(Ba);Da.history.undo.forEach(Na=>Na.updates.splice(Ka,1));Da.history.redo.forEach(Na=>Na.updates.splice(Ka,1));this.updateGraphics.remove(Ba);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ba],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Da.complete():La.graphics.remove(Ba)},toggleTool:function(){var Ba=u._asyncToGenerator(function*(){if(1===qa.updateGraphics.length&&!1!==ia.toggleToolOnClick&&"transform"===sa){var Ka=qa.updateGraphics.getItemAt(0);O.isSupportedGraphic(Ka)===m.SupportedGraphicResult.SUPPORTED&&(Ka=yield qa._setupReshape3DOperation(Ka,ia,ja,!0),ua(Ka)||(Da.onEnd(),Da.destroy(),
qa._setUpdateOperationHandle(Ka,ia)))}});return function(){return Ba.apply(this,arguments)}}()});Fa.push(...this._getHandlesForComponent(Da,ia),this.view.on("immediate-click",Ba=>this._getCommonUpdateOperationClickHandlers(Da,Ba,ia),N.ViewEventPriorities.WIDGET),ja.on("key-down",Ba=>{this._getCommonUpdateOperationKeyDownHandlers(Da,Ba);Ba.key===P.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Ba.stopPropagation())},N.ViewEventPriorities.WIDGET),ja.on("key-up",Ba=>{Ba.key===P.SKETCH_KEYS.snappingToggle&&
(this.snappingOptions.enabledToggled=!1,Ba.stopPropagation())},N.ViewEventPriorities.WIDGET));return Da});return function(da,ia,ja,sa){return ba.apply(this,arguments)}}();xa._setupGraphicTransform3DOperation=function(ba,da,ia,ja=!1){if(1===ba.length&&T.isSupportedGraphic(ba[0])===m.SupportedGraphicResult.SUPPORTED){const sa=ba[0],ma=sa.geometry;if(x.isSome(ma)&&("point"===ma.type||"mesh"===ma.type))return this._setupPointTransform3DOperation(sa,da,ia);if(x.isSome(ma)&&("polygon"===ma.type||"polyline"===
ma.type))return this._setupPolyTransform3DOperation(sa,da,ia,ja)}return this._setupMove3DOperation(ba,da,ia,"transform",ja)};xa._setupPointTransform3DOperation=function(){var ba=u._asyncToGenerator(function*(da,ia,ja){var sa=this;const {enableRotation:ma,enableScaling:qa,enableZ:Ca}=ia,La=yield this._requireModule(new Promise((Ka,Na)=>d(["../../views/3d/interactive/editingTools"],Ka,Na)));if(ua(La))return La;const Fa=new La.module.GraphicTransformTool({graphic:da,view:ja,enableRotation:ma,enableScaling:qa,
enableZ:Ca,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(Fa);this.updateGraphics.add(da);const Da=[],Ba=new H.UpdateOperationHandle({activeComponent:Fa,tool:"transform",type:"update",onEnd:()=>{var Ka;Da.forEach(Na=>Na.remove());Da.length=0;null==(Ka=this.view.tools)?void 0:Ka.remove(Fa);Fa.destroyed||Fa.destroy()},undo:()=>{ka(Ba,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>
{ya(Ba,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ka=u._asyncToGenerator(function*(Na){sa.updateGraphics.add(Na);sa.emit("update",{graphics:sa.updateGraphics.toArray(),state:"active",aborted:!1,tool:sa.activeTool,toolEventInfo:{added:[Na],removed:[],type:"selection-change"},type:"update"});Na=yield sa._setupMove3DOperation(sa.updateGraphics.toArray(),ia,ja,"transform",!0);ua(Na)||(Ba.onEnd(),Ba.destroy(),
sa._setUpdateOperationHandle(Na,ia))});return function(Na){return Ka.apply(this,arguments)}}(),removeFromSelection:Ka=>{this.updateGraphics.remove(Ka);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ka],type:"selection-change"},type:"update"});Ba.complete()},toggleTool:()=>{}});Da.push(...this._getHandlesForComponent(Ba,ia),this.view.on("immediate-click",Ka=>this._getCommonUpdateOperationClickHandlers(Ba,Ka,
ia),N.ViewEventPriorities.WIDGET),ja.on("key-down",Ka=>{this._getCommonUpdateOperationKeyDownHandlers(Ba,Ka);Ka.key===P.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Ka.stopPropagation())},N.ViewEventPriorities.WIDGET),ja.on("key-up",Ka=>{Ka.key===P.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Ka.stopPropagation())},N.ViewEventPriorities.WIDGET));return Ba});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._setupPolyTransform3DOperation=
function(){var ba=u._asyncToGenerator(function*(da,ia,ja,sa=!1){var ma=this;const {enableRotation:qa,enableScaling:Ca,enableZ:La,preserveAspectRatio:Fa}=ia,Da=yield this._requireModule(new Promise((Ta,Pa)=>d(["../../views/3d/interactive/editingTools"],Ta,Pa)));if(ua(Da))return Da;const Ba=new Da.module.ExtentTransformTool({graphic:da,view:ja,enableRotation:qa,enableScaling:Ca,enableZ:La,preserveAspectRatio:Fa,tooltipOptions:this.tooltipOptions});this.view.tools.add(Ba);sa||this.updateGraphics.add(da);
const Ka=[],Na=new H.UpdateOperationHandle({activeComponent:Ba,tool:"transform",type:"update",onEnd:()=>{var Ta;Ka.forEach(Pa=>Pa.remove());Ka.length=0;null==(Ta=this.view.tools)?void 0:Ta.remove(Ba);Ba.destroyed||Ba.destroy()},canUndo:()=>Ba.canUndo,undo:()=>{Ba.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>Ba.canRedo,redo:()=>{Ba.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ta=
u._asyncToGenerator(function*(Pa){ma.updateGraphics.add(Pa);ma.emit("update",{graphics:ma.updateGraphics.toArray(),state:"active",aborted:!1,tool:ma.activeTool,toolEventInfo:{added:[Pa],removed:[],type:"selection-change"},type:"update"});Pa=yield ma._setupMove3DOperation(ma.updateGraphics.toArray(),ia,ja,"transform",!0);ua(Pa)||(Na.onEnd(),Na.destroy(),ma._setUpdateOperationHandle(Pa,ia))});return function(Pa){return Ta.apply(this,arguments)}}(),removeFromSelection:Ta=>{this.updateGraphics.remove(Ta);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ta],type:"selection-change"},type:"update"});Na.complete()},toggleTool:function(){var Ta=u._asyncToGenerator(function*(){if(1===ma.updateGraphics.length&&!1!==ia.toggleToolOnClick){var Pa=ma.updateGraphics.getItemAt(0);O.isSupportedGraphic(Pa)===m.SupportedGraphicResult.SUPPORTED&&(Pa=yield ma._setupReshape3DOperation(Pa,ia,ja,!0),ua(Pa)||(Na.onEnd(),Na.destroy(),
ma._setUpdateOperationHandle(Pa,ia)))}});return function(){return Ta.apply(this,arguments)}}()});Ka.push(...this._getHandlesForComponent(Na,ia),this.view.on("immediate-click",Ta=>this._getCommonUpdateOperationClickHandlers(Na,Ta,ia),N.ViewEventPriorities.WIDGET),this.view.on("key-down",Ta=>this._getCommonUpdateOperationKeyDownHandlers(Na,Ta),N.ViewEventPriorities.WIDGET),this.view.on("key-down",Ta=>{Ta.key!==P.SKETCH_KEYS.constraint||Ta.repeat||(Ba.preserveAspectRatio=!Ba.preserveAspectRatio,Ta.stopPropagation())},
N.ViewEventPriorities.WIDGET),this.view.on("key-up",Ta=>{Ta.key===P.SKETCH_KEYS.constraint&&(Ba.preserveAspectRatio=!Ba.preserveAspectRatio,Ta.stopPropagation())},N.ViewEventPriorities.WIDGET));return Na});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._setupMove2DOperation=function(){var ba=u._asyncToGenerator(function*(da,ia,ja){var sa=this;this.updateGraphics.addMany(da);yield this._updateSpatialReference(da);const ma=yield this._getGraphicMover(da,ia,ja);if(ua(ma))return ma;
const qa=new H.UpdateOperationHandle({activeComponent:ma,tool:"move",type:"update",onEnd:()=>{var Da;this._displayDefaultCursor();Fa.forEach(Ba=>Ba.remove());La.forEach(Ba=>Ba.remove());Fa=[];La=[];ma.destroy();null==(Da=this._internalGraphicsLayer)?void 0:Da.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const Da=this.updateGraphics.toArray();ka(qa,Da);qa.refreshComponent();this._emitUndoEvent({graphics:Da,tool:"move"})},redo:()=>{const Da=this.updateGraphics.toArray();ya(qa,Da);qa.refreshComponent();
this._emitRedoEvent({graphics:Da,tool:"move"})},addToSelection:function(){var Da=u._asyncToGenerator(function*(Ba){yield sa._updateSpatialReference(Ba);sa.updateGraphics.push(Ba);ma.graphics=sa.updateGraphics.toArray();sa.emit("update",{graphics:sa.updateGraphics.toArray(),state:"active",aborted:!1,tool:sa.activeTool,toolEventInfo:{added:[Ba],removed:[],type:"selection-change"},type:"update"})});return function(Ba){return Da.apply(this,arguments)}}(),removeFromSelection:Da=>{const Ba=this.updateGraphics.indexOf(Da);
qa.history.undo.forEach(Na=>Na.updates.splice(Ba,1));qa.history.redo.forEach(Na=>Na.updates.splice(Ba,1));this.updateGraphics.remove(Da);const Ka=this.updateGraphics.toArray();this.emit("update",{graphics:Ka,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"});0===this.updateGraphics.length?qa.complete():ma.graphics=Ka}});let Ca=!1,La=[ja.on("immediate-click",Da=>this._getCommonUpdateOperationClickHandlers(qa,Da,ia),N.ViewEventPriorities.WIDGET),
ja.on("key-down",Da=>{this._getCommonUpdateOperationKeyDownHandlers(qa,Da);Da.key!==P.SKETCH_KEYS.constraint||Da.repeat||(Ca=!0,ma.enableMoveAllGraphics=!ma.enableMoveAllGraphics)},N.ViewEventPriorities.WIDGET),ja.on("key-up",Da=>{Da.key===P.SKETCH_KEYS.constraint&&Ca&&(Ca=!1,ma.enableMoveAllGraphics=!ma.enableMoveAllGraphics)},N.ViewEventPriorities.WIDGET)],Fa=this._getHandlesForComponent(qa,ia);return qa});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._setupReshape3DOperation=
function(){var ba=u._asyncToGenerator(function*(da,ia,ja,sa=!1){var ma=this;const qa=yield this._requireModule(new Promise((Da,Ba)=>d(["../../views/3d/interactive/editingTools"],Da,Ba)));if(ua(qa))return qa;this.snappingOptions.enabledToggled=!1;const Ca=new qa.module.GraphicReshapeTool({view:ja,graphic:da,enableZVertex:ia.enableZ&&"move"===ia.reshapeOptions.vertexOperation,enableZShape:ia.enableZ&&"move"===ia.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===ia.reshapeOptions.shapeOperation||
"move-xy"===ia.reshapeOptions.shapeOperation,enableMidpoints:"split"===ia.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===ia.reshapeOptions.edgeOperation,snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});ja.tools.add(Ca);sa||this.updateGraphics.add(da);const La=[],Fa=new H.UpdateOperationHandle({activeComponent:Ca,tool:"reshape",type:"update",onEnd:()=>{var Da;La.forEach(Ba=>Ba.remove());La.length=0;null==(Da=this.view.tools)?void 0:
Da.remove(Ca);Ca.destroyed||Ca.destroy()},canUndo:()=>Ca.canUndo,undo:()=>{Ca.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>Ca.canRedo,redo:()=>{Ca.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var Da=u._asyncToGenerator(function*(Ba){ma.updateGraphics.add(Ba);ma.emit("update",{graphics:ma.updateGraphics.toArray(),state:"active",aborted:!1,tool:ma.activeTool,toolEventInfo:{added:[Ba],
removed:[],type:"selection-change"},type:"update"});Ba=yield ma._setupMove3DOperation(ma.updateGraphics.toArray(),ia,ja,"transform",!0);ua(Ba)||(Fa.onEnd(),Fa.destroy(),ma._setUpdateOperationHandle(Ba,ia))});return function(Ba){return Da.apply(this,arguments)}}(),removeFromSelection:Da=>{this.updateGraphics.remove(Da);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"});
Fa.complete()},toggleTool:function(){var Da=u._asyncToGenerator(function*(){if(!1!==ia.toggleToolOnClick){var Ba=yield ma._setupGraphicTransform3DOperation(ma.updateGraphics.toArray(),ia,ja,!0);ua(Ba)||(Fa.onEnd(),Fa.destroy(),ma._setUpdateOperationHandle(Ba,ia))}});return function(){return Da.apply(this,arguments)}}()});La.push(...this._getHandlesForComponent(Fa,ia),ja.on("immediate-click",Da=>this._getCommonUpdateOperationClickHandlers(Fa,Da,ia),N.ViewEventPriorities.WIDGET),ja.on("key-down",Da=>
{this._getCommonUpdateOperationKeyDownHandlers(Fa,Da);Da.key===P.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Da.stopPropagation())},N.ViewEventPriorities.WIDGET),ja.on("key-up",Da=>{Da.key===P.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Da.stopPropagation())},N.ViewEventPriorities.WIDGET));return Fa});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._setupTransformOrReshape2DOperation=function(){var ba=u._asyncToGenerator(function*(da,
ia,ja,sa){var ma=this;this.updateGraphics.addMany(da);yield this._updateSpatialReference(da);da="transform"===ia?yield this._getBox(da,ja,sa):yield this._getReshape(da,ja,sa);if(ua(da))return da;const qa=new H.UpdateOperationHandle({activeComponent:da,type:"update",onEnd:()=>{La.forEach(Fa=>Fa.remove());Ca.forEach(Fa=>Fa.remove());La=[];Ca=[];qa.activeComponent&&!qa.activeComponent.destroyed&&qa.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>
{ka(qa,this.updateGraphics.toArray());qa.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:qa.tool})},redo:()=>{ya(qa,this.updateGraphics.toArray());qa.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:qa.tool})},addToSelection:function(){var Fa=u._asyncToGenerator(function*(Da){var Ba=qa.activeComponent;if("reshape"===Ba.type){Ba=[...ma.updateGraphics,Da];ma.updateGraphics.removeAll();Ba=yield ma._setupMove2DOperation(Ba,ja,sa);
if(ua(Ba))return;qa.onEnd();qa.destroy();ma._setUpdateOperationHandle(Ba,ja)}else ma.updateGraphics.add(Da),Ba.graphics=ma.updateGraphics.toArray(),Ba.refresh(),qa.resetHistory();ma.emit("update",{graphics:ma.updateGraphics.toArray(),state:"active",aborted:!1,tool:ma.activeTool,toolEventInfo:{added:[Da],removed:[],type:"selection-change"},type:"update"})});return function(Da){return Fa.apply(this,arguments)}}(),removeFromSelection:function(){var Fa=u._asyncToGenerator(function*(Da){const Ba=ma.updateGraphics.indexOf(Da);
qa.history.undo.forEach(Na=>Na.updates.splice(Ba,1));qa.history.redo.forEach(Na=>Na.updates.splice(Ba,1));ma.updateGraphics.remove(Da);const Ka=ma.updateGraphics.toArray();if(0===Ka.length)qa.complete();else{const Na=Ka[0].geometry;1!==Ka.length||!x.isSome(Na)||"point"!==Na.type&&"multipoint"!==Na.type?qa.activeComponent.graphics=Ka:qa.toggleTool()}ma.emit("update",{graphics:Ka,state:"active",aborted:!1,tool:ma.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"})});
return function(Da){return Fa.apply(this,arguments)}}(),toggleTool:function(){var Fa=u._asyncToGenerator(function*(){if(!(1<ma.updateGraphics.length)){var Da=ma.updateGraphics.getItemAt(0),Ba=Da.geometry;x.isSome(Ba)&&("reshape"===qa.tool&&("point"===Ba.type||"multipoint"===Ba.type)||"transform"===qa.tool&&"extent"===Ba.type)||(Ba=null,"transform"===qa.tool?Ba=yield ma._getReshape([Da],ja,sa):"reshape"===qa.tool&&(Ba=yield ma._getBox([Da],ja,sa)),ua(Ba)||(qa.activeComponent.destroy(),qa.activeComponent=
Ba,qa.activeComponent&&(La.forEach(Ka=>Ka.remove()),La=ma._getHandlesForComponent(qa,ja))))}});return function(){return Fa.apply(this,arguments)}}()});let Ca=[sa.on("immediate-click",Fa=>this._getCommonUpdateOperationClickHandlers(qa,Fa,ja),N.ViewEventPriorities.WIDGET),sa.on("key-down",Fa=>{this._getCommonUpdateOperationKeyDownHandlers(qa,Fa);Fa.key!==P.SKETCH_KEYS.snappingToggle||Fa.repeat||(this.snappingOptions.enabledToggled=!0,Fa.stopPropagation());Fa.key===P.SKETCH_KEYS.constraint&&!Fa.repeat&&
qa&&(Fa=qa.activeComponent)&&"box"===Fa.type&&(Fa.preserveAspectRatio=!Fa.preserveAspectRatio)},N.ViewEventPriorities.WIDGET),sa.on("key-up",Fa=>{var Da;Fa.key===P.SKETCH_KEYS.snappingToggle&&"reshape"===(null==qa?void 0:null==(Da=qa.activeComponent)?void 0:Da.type)&&(this.snappingOptions.enabledToggled=!1,Fa.stopPropagation());Fa.key===P.SKETCH_KEYS.constraint&&qa&&(Fa=qa.activeComponent)&&"box"===Fa.type&&(Fa.preserveAspectRatio=!Fa.preserveAspectRatio)},N.ViewEventPriorities.WIDGET)],La=this._getHandlesForComponent(qa,
ja);return qa});return function(da,ia,ja,sa){return ba.apply(this,arguments)}}();xa._getGraphicMover=function(){var ba=u._asyncToGenerator(function*(da,ia,ja){({enableMoveAllGraphics:ia}=ia);const sa=yield this._requireModule(new Promise((ma,qa)=>d(["../../views/draw/support/GraphicMover"],Ca=>ma(Ga(Ca)),qa)));return ua(sa)?sa:new sa.module.default({enableMoveAllGraphics:ia,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:da,view:ja,callbacks:{onGraphicMoveStart:({dx:ma,dy:qa,graphic:Ca})=>{this._displayGrabbingCursor();
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ma,dy:qa,mover:Ca,type:"move-start"},type:"update"})},onGraphicMove:({dx:ma,dy:qa,graphic:Ca})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ma,dy:qa,mover:Ca,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ma,dy:qa,graphic:Ca})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ma,dy:qa,mover:Ca,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._getBox=function(){var ba=u._asyncToGenerator(function*(da,ia,ja){const {enableRotation:sa,enableScaling:ma,preserveAspectRatio:qa}=ia;ia=yield this._requireModule(new Promise((Ca,La)=>d(["../../views/draw/support/Box"],
Fa=>Ca(Ga(Fa)),La)));return ua(ia)?ia:new ia.module.default({graphics:da,enableRotation:sa,enableScaling:ma,preserveAspectRatio:qa,layer:this._internalGraphicsLayer,view:ja,callbacks:{onMoveStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onMove:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onMoveStop:Ca=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScaleStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScale:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScaleStop:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotateStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotate:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotateStop:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...Ca},type:"update"})}})});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._getReshape=function(){var ba=u._asyncToGenerator(function*(da,ia,ja){var sa,ma;const qa="split"===(null==(sa=ia.reshapeOptions)?void 0:sa.edgeOperation);ia="move"===(null==(ma=ia.reshapeOptions)?void 0:ma.shapeOperation);ma=yield this._requireModule(new Promise((Ca,La)=>d(["../../views/draw/support/Reshape"],Fa=>Ca(Ga(Fa)),La)));return ua(ma)?ma:new ma.module.default({enableMidpoints:qa,
enableMovement:ia,graphic:da[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:ja,callbacks:{onReshapeStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onReshape:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onReshapeStop:({mover:Ca,type:La})=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Ca,type:La},type:"update"}),onMoveStart:({dx:Ca,dy:La,mover:Fa,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:La,mover:Fa,type:Da},type:"update"}),onMove:({dx:Ca,dy:La,mover:Fa,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:La,mover:Fa,type:Da},
type:"update"}),onMoveStop:({dx:Ca,dy:La,mover:Fa,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:La,mover:Fa,type:Da},type:"update"}),onVertexAdd:({added:Ca,type:La,vertices:Fa})=>{Ca=Ca.map(Da=>h.geometryToCoordinates(Da.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Ca,vertices:Fa,type:La},type:"update"})},onVertexRemove:({removed:Ca,
type:La,vertices:Fa})=>{Ca=Ca.map(Da=>h.geometryToCoordinates(Da.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Ca,vertices:Fa,type:La},type:"update"})}}})});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._getHandlesForComponent=function(ba,da){const ia=ba.activeComponent;switch(ia.type){case "graphic-mover":return[ia.on("graphic-click",({graphic:ja,viewEvent:sa})=>{var ma;null!=(ma=sa.native)&&
ma.shiftKey&&(sa.stopPropagation(),ba.removeFromSelection(ja))}),ia.on("graphic-move-start",ja=>ba.addToHistory(va(ja.allGraphics)))];case "box":return[ia.on("graphic-click",ja=>this._onTransformOrReshape2DGraphicClick(ba,da,ja)),ia.on("move-start",ja=>ba.addToHistory(va(ja.graphics))),ia.on("rotate-start",ja=>ba.addToHistory(va(ja.graphics))),ia.on("scale-start",ja=>ba.addToHistory(va(ja.graphics)))];case "reshape":return[ia.on("graphic-click",ja=>this._onTransformOrReshape2DGraphicClick(ba,da,ja)),
ia.on("move-start",ja=>ba.addToHistory(va([ja.mover]))),ia.on("reshape-start",ja=>ba.addToHistory(va([ja.graphic]))),ia.on("vertex-add",ja=>ba.addToHistory(va([ja.oldGraphic]))),ia.on("vertex-remove",ja=>ba.addToHistory(va([ja.oldGraphic])))];case "move-3d":return[ia.on("graphic-move-start",ja=>{ba.addToHistory(va(ja.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ja.allGraphics.length?ja.allGraphics[0]:
null,type:"move-start"},type:"update"})}),ia.on("graphic-move",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja.dx,dy:ja.dy,mover:0<ja.allGraphics.length?ja.allGraphics[0]:null,type:"move"},type:"update"})}),ia.on("graphic-move-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ja.allGraphics.length?ja.allGraphics[0]:
null,type:"move-stop"},type:"update"})}),ia.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],ba,da):ba.toggleTool()})];case "transform-3d":return[ia.on("record-undo",({record:ja})=>{ba.addToHistory({updates:[ja]})}),ia.on("graphic-translate-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move-start"},type:"update"})}),ia.on("graphic-translate-stop",
ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move-stop"},type:"update"})}),ia.on("graphic-rotate-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,type:"rotate-start"},type:"update"})}),ia.on("graphic-rotate-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,type:"rotate-stop"},type:"update"})}),ia.on("graphic-scale-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale-start"},type:"update"})}),ia.on("graphic-scale-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale-stop"},type:"update"})}),ia.on("graphic-translate",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move"},type:"update"})}),ia.on("graphic-rotate",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,
type:"rotate"},type:"update"})}),ia.on("graphic-scale",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale"},type:"update"})}),ia.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],ba,da):ba.toggleTool()})];case "reshape-3d":return[ia.on("reshape",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:ja,type:"update"})}),ia.on("move",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,type:"update"})}),ia.on("vertex-add",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,type:"update"})}),ia.on("vertex-remove",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,
type:"update"})}),ia.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],ba,da):ba.toggleTool()})]}};xa._onTransformOrReshape2DGraphicClick=function(ba,da,ia){var ja;const {graphic:sa,viewEvent:ma}=ia;if(null!=(ja=ma.native)&&ja.shiftKey&&sa.layer===this.layer)return ma.stopPropagation(),ba.removeFromSelection(sa);if(da.toggleToolOnClick)return ma.stopPropagation(),ba.toggleTool()};xa._setUpdateOperationHandle=function(ba,da){this._operationHandle=ba;const ia=this.view.map;this._disablePopup(da);
ba.on("complete",()=>{if(ba===this._operationHandle){const ja=this.updateGraphics.toArray(),sa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();ia&&ia.remove(this._internalGraphicsLayer);this._restorePopup(da);this.emit("update",{graphics:ja,state:"complete",aborted:ba.cancelled,tool:sa,toolEventInfo:null,type:"update"})}})};xa._getCommonUpdateOperationClickHandlers=
function(){var ba=u._asyncToGenerator(function*(da,ia,ja){const sa=p.createScreenPointFromEvent(ia),ma=yield ia.async(()=>this._getFirstHit(sa));x.isNone(ma)?da.complete():ia.native.shiftKey&&this._toggleSelection([ma.graphic],da,ja)?ia.stopPropagation():this.updateGraphics.includes(ma.graphic)?ia.stopPropagation():da.complete()});return function(da,ia,ja){return ba.apply(this,arguments)}}();xa._toggleSelection=function(ba,da,ia){const ja=!!ia.multipleSelectionEnabled;return ba.some(sa=>null==sa?
!1:ja&&sa.layer===this.layer?(this.updateGraphics.includes(sa)?da.removeFromSelection(sa):da.addToSelection(sa),!0):!1)};xa._getCommonUpdateOperationKeyDownHandlers=function(ba,da){if(ba){var ia=da.key;ia===P.SKETCH_KEYS.undo&&ba.canUndo()?(da.stopPropagation(),ba.undo()):ia===P.SKETCH_KEYS.redo&&ba.canRedo()?(da.stopPropagation(),ba.redo()):ia===P.SKETCH_KEYS.cancel?(da.stopPropagation(),ba.cancel()):this.allowDeleteKey&&P.SKETCH_KEYS.delete.includes(ia)&&this._onDeleteKey(da)}};xa._onDeleteKey=
function(ba){if(this._operationHandle&&"update"===this._operationHandle.type){var da=this.activeComponent,ia=this.updateGraphics.toArray();x.isNone(da)||"reshape-3d"===da.type||"reshape"===da.type&&(1!==ia.length||"point"!==x.get(ia[0].geometry,"type"))||(ba.stopPropagation(),this.delete())}};xa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=x.destroyMaybe(this._internalGraphicsLayer))};
xa._isComponentGraphic=function(ba){const {activeComponent:da}=this;return!ba||x.isNone(da)?!1:ba.attributes&&ba.attributes.esriSketchTool||"draw-2d"===da.type&&da.graphic===ba||("box"===da.type||"reshape"===da.type)&&da.isUIGraphic(ba)};xa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};xa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};xa._displayDefaultCursor=
function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};xa._logError=function(ba,da,ia){ha.error(new A(ba,da,ia))};xa._requireModule=function(){var ba=u._asyncToGenerator(function*(da){const ia=new AbortController;this._moduleLoaderAbortController=ia;da=yield da;return this._moduleLoaderAbortController!==ia||ia.signal.aborted?{requireError:"aborted"}:{module:da}});return function(da){return ba.apply(this,arguments)}}();xa._emitUndoEvent=function(ba){this.emit("undo",
{...ba,type:"undo"})};xa._emitRedoEvent=function(ba){this.emit("redo",{...ba,type:"redo"})};xa._emitDeleteEvent=function(ba){this.emit("delete",{...ba,type:"delete"})};xa.wait=function(){return g.whenOnce(()=>!this.updating)};xa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};xa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};xa._disablePopupEnabled=function(ba){var da;return"3d"!==(null==(da=this.view)?void 0:da.type)||this.updateOnGraphicClick||
x.isSome(ba)&&ba.toggleToolOnClick};xa._disablePopup=function(ba){this._disablePopupEnabled(ba)&&(ba=this.view.popup)&&x.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=ba.autoOpenEnabled,ba.autoOpenEnabled=!1)};xa._restorePopup=function(ba){this._disablePopupEnabled(ba)&&(ba=this.view.popup)&&x.isSome(this._originalAutoOpenEnabled)&&(ba.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};xa._waitViewReady=function(){var ba=u._asyncToGenerator(function*(){const da=
this.view;da&&(x.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield k.whenOrAbort(g.whenOnce(()=>null==da?void 0:da.ready),this._viewReadyAbortController.signal))});return function(){return ba.apply(this,arguments)}}();u._createClass(Aa,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?
this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return!x.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):x.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(ba){this._set("defaultCreateOptions",{...la,...ba})}},{key:"defaultUpdateOptions",set:function(ba){this._set("defaultUpdateOptions",
{...wa,...ba,reshapeOptions:{...wa.reshapeOptions,...null==ba?void 0:ba.reshapeOptions}})}},{key:"snappingOptions",set:function(ba){x.isSome(this._snappingManager)&&(this._snappingManager.options=ba);this._set("snappingOptions",ba)}},{key:"state",get:function(){var ba;const da=!(null==(ba=this.view)||!ba.ready||!this.layer);ba=this._operationHandle;return da&&ba?"active":da?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(ba){const da=this._get("view");if(da){const {container:ia,
map:ja}=da;ia&&(da.cursor=null);ja&&ja.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");ba&&this._handles.add(g.when(()=>ba.ready,ia=>{this._viewHandles.removeAll();ia&&this._viewHandles.add(this._generateViewHandles(ba))},g.syncAndInitial),"view-ready");this._set("view",ba)}},{key:"test",get:function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:wa}}}]);return Aa}(L.EventedAccessor);c.__decorate([q.property()],
F.prototype,"updating",null);c.__decorate([q.property()],F.prototype,"_operationHandle",void 0);c.__decorate([q.property({readOnly:!0})],F.prototype,"activeTool",null);c.__decorate([q.property()],F.prototype,"activeFillSymbol",void 0);c.__decorate([q.property()],F.prototype,"activeLineSymbol",void 0);c.__decorate([q.property()],F.prototype,"activeVertexSymbol",void 0);c.__decorate([q.property()],F.prototype,"allowDeleteKey",void 0);c.__decorate([q.property({readOnly:!0})],F.prototype,"createGraphic",
null);c.__decorate([q.property()],F.prototype,"defaultCreateOptions",null);c.__decorate([q.property()],F.prototype,"defaultUpdateOptions",null);c.__decorate([q.property({type:w,nonNullable:!0})],F.prototype,"labelOptions",void 0);c.__decorate([q.property()],F.prototype,"layer",void 0);c.__decorate([q.property({types:G.symbolTypes})],F.prototype,"pointSymbol",void 0);c.__decorate([q.property({types:G.symbolTypes})],F.prototype,"polygonSymbol",void 0);c.__decorate([q.property({types:G.symbolTypes})],
F.prototype,"polylineSymbol",void 0);c.__decorate([q.property({type:X,nonNullable:!0})],F.prototype,"snappingOptions",null);c.__decorate([q.property()],F.prototype,"_snappingManager",void 0);c.__decorate([q.property({readOnly:!0})],F.prototype,"state",null);c.__decorate([q.property({type:E,nonNullable:!0})],F.prototype,"tooltipOptions",void 0);c.__decorate([q.property({readOnly:!0})],F.prototype,"updateGraphics",void 0);c.__decorate([q.property()],F.prototype,"updateOnGraphicClick",void 0);c.__decorate([q.property({types:G.symbolTypes})],
F.prototype,"updatePointSymbol",void 0);c.__decorate([q.property({types:G.symbolTypes})],F.prototype,"updatePolygonSymbol",void 0);c.__decorate([q.property({types:G.symbolTypes})],F.prototype,"updatePolylineSymbol",void 0);c.__decorate([q.property({types:G.symbolTypes})],F.prototype,"vertexSymbol",void 0);c.__decorate([q.property({value:null})],F.prototype,"view",null);return F=c.__decorate([n.subclass("esri.widgets.Sketch.SketchViewModel")],F)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){G=function(q){function v(n){n=q.call(this,n)||this;n.elevationInfo=null;n.graphics=new k.GraphicsCollection;n.screenSizePerspectiveEnabled=!0;n.type="graphics";n.internal=!1;return n}d._inheritsLoose(v,q);var t=v.prototype;t.destroy=function(){this.removeAll();this.graphics.destroy()};t.add=function(n){this.graphics.add(n);return this};t.addMany=function(n){this.graphics.addMany(n);return this};t.removeAll=function(){this.graphics.removeAll();return this};t.remove=
function(n){this.graphics.remove(n)};t.removeMany=function(n){this.graphics.removeMany(n)};t.on=function(n,z){return q.prototype.on.call(this,n,z)};t.graphicChanged=function(n){this.emit("graphic-update",n)};return v}(C.BlendLayer(x.ScaleRangeLayer(K)));u.__decorate([c.property({type:g.default})],G.prototype,"elevationInfo",void 0);u.__decorate([c.property(L.owningCollectionProperty(k.GraphicsCollection,"graphics"))],G.prototype,"graphics",void 0);u.__decorate([c.property({type:["show","hide"]})],
G.prototype,"listMode",void 0);u.__decorate([c.property()],G.prototype,"screenSizePerspectiveEnabled",void 0);u.__decorate([c.property({readOnly:!0})],G.prototype,"type",void 0);u.__decorate([c.property({constructOnly:!0})],G.prototype,"internal",void 0);return G=u.__decorate([A.subclass("esri.layers.GraphicsLayer")],G)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){function q(t){t&&(G.empty(t),t.parentNode&&t.parentNode.removeChild(t))}const v=[0,0];d.DOMContainer=t=>{t=function(n){function z(...h){var l=n.call(this,...h)||this;l._freqInfo={freq:16,time:750};l._overlayRenderTaskHandle=null;l.height=0;l.position=null;l.resizing=!1;l.root=null;l.surface=null;l.suspended=!0;l.ui=null;l.userContent=null;l.width=0;l.widthBreakpoint=null;l.handles.add([f.watch(()=>l.cursor,y=>{const {surface:r}=u._assertThisInitialized(l);r&&r.setAttribute("data-cursor",
y)}),f.watch(()=>l.interacting,y=>{const {surface:r}=u._assertThisInitialized(l);r&&r.setAttribute("data-interacting",y.toString())})]);return l}u._inheritsLoose(z,n);var e=z.prototype;e.initialize=function(){this.handles.add(f.watch(()=>this.ui,(h,l)=>this._handleUIChange(h,l)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};e.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),
this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};e.blur=function(){this.surface&&this.surface.blur()};e.focus=function(){this.surface&&this.surface.focus()};e.pageToContainer=function(h,l,y){const r=this.position;h-=r[0];l-=r[1];y?(y[0]=h,y[1]=l):y=[h,l];return y};e.containerToPage=function(h,l,y){const r=this.position;h+=r[0];l+=r[1];y?(y[0]=h,y[1]=l):y=[h,l];return y};e._handleUIChange=function(h,l){l&&(this.handles.remove("ui"),l.destroy());h&&this._wireUI(h);this._set("ui",
h)};e._wireUI=function(h){this.handles.remove("ui");h&&(h.view=this,this.handles.add([f.watch(()=>this.root,l=>{if(l){{const y=document.createElement("div");l.appendChild(y);l=y}}else l=null;h.container=l},f.initial),f.watch(()=>this.popup,(l,y)=>{y&&h.remove(y,"popup");l&&(l.view=h.view,h.add(l,{key:"popup",position:"manual"}))},f.initial)],"ui"))};e._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};e._startMeasuring=function(){const h=this._freqInfo;
h.freq=16;h.time=750;this.handles.add([(()=>{const l=()=>{h.freq=16;h.time=750};window.addEventListener("resize",l);return{remove(){window.removeEventListener("resize",l)}}})(),F.addFrameTask({prepare:l=>{const y=this._measure(),r=this._freqInfo;r.time+=l.deltaTime;y&&(r.freq=16,this._get("resizing")||this._set("resizing",!0));r.time<r.freq||(r.time=0,this._position()||y?r.freq=16:r.freq=Math.min(750,2*r.freq),!y&&512<=r.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();
this._position()};e._measure=function(){var h=this.container;const l=h?h.clientWidth:0;h=h?h.clientHeight:0;if(0===l||0===h)return this.suspended||this._set("suspended",!0),!1;const y=this.width,r=this.height;if(l===y&&h===r)return this.suspended&&this._set("suspended",!1),!1;this._set("width",l);this._set("height",h);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:y,oldHeight:r,width:l,height:h});return!0};e._position=function(){var h=this.container;const l=this.position;{const y=
(h.ownerDocument||window.document).defaultView;h=h.getBoundingClientRect();v[0]=h.left+y.pageXOffset;v[1]=h.top+y.pageYOffset}return l&&v[0]===l[0]&&v[1]===l[1]?!1:(this._set("position",[v[0],v[1]]),!0)};e.forceDOMReadyCycle=function(){};u._createClass(z,[{key:"container",set:function(h){var l=this._get("container");if(l!==h)if(this.handles.remove("dom-size"),this._stopMeasuring(),l&&(l.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=
null),this.overlay.destroy(),this._set("overlay",null),q(this.root),this._set("root",null),G.reparent(this.userContent,l),q(this.userContent),this._set("userContent",null)),h){h.classList.add("esri-view");l=document.createElement("div");l.className="esri-view-user-storage";G.reparent(h,l);h.appendChild(l);this._set("userContent",l);l=document.createElement("div");l.className="esri-view-root";h.insertBefore(l,h.firstChild);this._set("root",l);const y=document.createElement("div");y.className="esri-view-surface";
y.setAttribute("role","application");y.tabIndex=0;l.appendChild(y);this._set("surface",y);const r=new k;l.appendChild(r.surface);this._set("overlay",r);f.watch(()=>r.needsRender,m=>{m&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=F.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(f.watch(()=>this.size,m=>{const [D,O]=m;D>=document.body.clientWidth||
O>=document.body.clientHeight?y.classList.add("esri-view-surface--inset-outline"):y.classList.remove("esri-view-surface--inset-outline")},f.initial),"dom-size");this._set("container",h);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const h=document.activeElement===this.surface;return document.hasFocus()&&h}},{key:"popup",get:function(){return this._get("popup")||
new g({view:this})},set:function(h){const l=this._get("popup");l&&l!==h&&l.destroy();this._set("popup",h)}},{key:"size",get:function(){return[this.width,this.height]}}]);return z}(t);c.__decorate([A.property({value:null,cast:n=>G.byId(n)})],t.prototype,"container",null);c.__decorate([A.property({readOnly:!0})],t.prototype,"focused",null);c.__decorate([A.property({readOnly:!0})],t.prototype,"height",void 0);c.__decorate([A.property({type:g})],t.prototype,"popup",null);c.__decorate([A.property({type:k})],
t.prototype,"overlay",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"position",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"resizing",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"root",void 0);c.__decorate([A.property({value:null,readOnly:!0})],t.prototype,"size",null);c.__decorate([A.property({readOnly:!0})],t.prototype,"surface",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"suspended",void 0);c.__decorate([A.property()],t.prototype,
"ui",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"userContent",void 0);c.__decorate([A.property({readOnly:!0})],t.prototype,"width",void 0);c.__decorate([A.property()],t.prototype,"widthBreakpoint",void 0);return t=c.__decorate([x.subclass("esri.views.DOMContainer")],t)};d.isDOMContainer=function(t){return t&&"focus"in t};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k){c=function(g){function q(){var t=g.apply(this,arguments)||this;t.items=new G;t._watchUpdatingTracking=new C.WatchUpdatingTracking;t._callbacks=new Map;t._projector=k.createProjector();t._hiddenProjector=k.createProjector();return t}d._inheritsLoose(q,g);var v=q.prototype;v.initialize=function(){const t=document.createElement("div");t.className="esri-overlay-surface";this._set("surface",t);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");t.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const z of n.added){const e=()=>z.render();this._callbacks.set(z,e);this._projector.append(this.surface,e)}for(const z of n.removed)n=this._projector.detach(this._callbacks.get(z)),this.surface.removeChild(n.domNode),this._callbacks.delete(z)})};v.addItem=function(t){this.items.add(t)};v.removeItem=function(t){this.items.remove(t)};v.destroy=function(){this.items.removeAll();
this._callbacks.forEach(t=>this._projector.detach(t));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};v.render=function(){this._projector.renderNow()};v.computeBoundingRect=function(t){const n=this._hiddenSurface,z=this._hiddenProjector;let e=null;const h=()=>e=t.render();z.append(n,h);z.renderNow();const l={left:0,top:0,right:0,bottom:0};if(e&&e.domNode){const y=e.domNode.getBoundingClientRect();l.left=y.left;l.top=y.top;l.right=y.right;l.bottom=y.bottom}for(z.detach(h);n.firstChild;)n.removeChild(n.firstChild);
return l};v.overlaps=function(t,n){t=this.computeBoundingRect(t);n=this.computeBoundingRect(n);return Math.max(t.left,n.left)<=Math.min(t.right,n.right)&&Math.max(t.top,n.top)<=Math.min(t.bottom,n.bottom)};v.renderCanvas=function(t){if(this.items.some(z=>z.visible)){var n=t.getContext("2d");n.save();n.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(z=>{n.save();z.renderCanvas(n);n.restore()});n.restore()}};d._createClass(q,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(t=>t.visible)}}]);return q}(c);u.__decorate([f.property({readOnly:!0})],c.prototype,"surface",void 0);u.__decorate([f.property({readOnly:!0})],c.prototype,"items",void 0);u.__decorate([f.property({readOnly:!0})],c.prototype,"needsRender",null);u.__decorate([f.property({readOnly:!0})],c.prototype,"_watchUpdatingTracking",void 0);u.__decorate([f.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c.prototype,"updating",void 0);
return c=u.__decorate([K.subclass("esri.views.overlay.ViewOverlay")],c)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D,O,T,Q){function N(J,X){return void 0===X?`${"esri-popup"}__${J}`:`${"esri-popup"}__${J}-${X}`}const P={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},w=A.getLogger("esri.widgets.Popup"),E={closeButton:!0,featureNavigation:!0};c=function(J){function X(p,H){var I=J.call(this,p,H)||this;I._blurClose=!1;I._blurContainer=!1;I._containerNode=null;I._mainContainerNode=null;I._featureMenuNode=null;I._actionsMenuNode=null;I._focusClose=!1;
I._focusContainer=!1;I._focusDockButton=!1;I._focusFeatureMenuButton=!1;I._focusActionsMenuButton=!1;I._focusFirstFeature=!1;I._focusFirstAction=!1;I._handles=new F;I._pointerOffsetInPx=16;I._spinner=null;I._feature=null;I._featureMenuIntersectionObserverCallback=([U])=>{null!=U&&U.isIntersecting&&I.viewModel.featurePage++};I._featureMenuIntersectionObserver=new IntersectionObserver(I._featureMenuIntersectionObserverCallback,{root:window.document});I._displaySpinnerThrottled=C.throttle(()=>I._displaySpinner(),
0);I.actions=null;I.alignment="auto";I.autoCloseEnabled=null;I.autoOpenEnabled=null;I.defaultPopupTemplateEnabled=null;I.content=null;I.collapsed=!1;I.collapseEnabled=!0;I.dockEnabled=!1;I.featureCount=null;I.featureMenuOpen=!1;I.features=null;I.goToOverride=null;I.headingLevel=2;I.highlightEnabled=null;I.location=null;I.label=void 0;I.maxInlineActions=3;I.messages=null;I.messagesCommon=null;I.promises=null;I.selectedFeature=null;I.selectedFeatureIndex=null;I.spinnerEnabled=!0;I.title=null;I.updateLocationEnabled=
null;I.view=null;I.viewModel=new l;I.visible=null;I.visibleElements={...E};I._addSelectedFeatureIndexHandle();I.own([K.watch(()=>{var U;return null==(U=I.viewModel)?void 0:U.screenLocation},()=>I._positionContainer()),K.watch(()=>{var U;return[null==(U=I.viewModel)?void 0:U.active,I.dockEnabled]},()=>I._toggleScreenLocationEnabled()),K.watch(()=>{var U;return null==(U=I.viewModel)?void 0:U.screenLocation},(U,Z)=>{!!U!==!!Z&&I.reposition()}),K.watch(()=>{var U,Z,ea,ka,ya,oa;return[null==(U=I.viewModel)?
void 0:null==(Z=U.view)?void 0:Z.padding,null==(ea=I.viewModel)?void 0:null==(ka=ea.view)?void 0:ka.size,null==(ya=I.viewModel)?void 0:ya.active,null==(oa=I.viewModel)?void 0:oa.location,I.alignment]},()=>I.reposition()),K.watch(()=>I.spinnerEnabled,U=>I._spinnerEnabledChange(U)),K.watch(()=>{var U,Z;return null==(U=I.viewModel)?void 0:null==(Z=U.view)?void 0:Z.size},(U,Z)=>I._updateDockEnabledForViewSize(U,Z)),K.watch(()=>{var U;return null==(U=I.viewModel)?void 0:U.view},(U,Z)=>I._viewChange(U,
Z)),K.watch(()=>{var U,Z;return null==(U=I.viewModel)?void 0:null==(Z=U.view)?void 0:Z.ready},(U,Z)=>I._viewReadyChange(U,Z)),K.watch(()=>{var U,Z;return[null==(U=I.viewModel)?void 0:U.waitingForResult,null==(Z=I.viewModel)?void 0:Z.location]},()=>{I._hideSpinner();I._displaySpinnerThrottled()}),K.watch(()=>{var U,Z,ea,ka;return[null==(U=I.selectedFeatureWidget)?void 0:null==(Z=U.viewModel)?void 0:Z.title,null==(ea=I.selectedFeatureWidget)?void 0:null==(ka=ea.viewModel)?void 0:ka.state]},()=>I._setTitleFromFeatureWidget()),
K.watch(()=>{var U,Z,ea,ka;return[null==(U=I.selectedFeatureWidget)?void 0:null==(Z=U.viewModel)?void 0:Z.content,null==(ea=I.selectedFeatureWidget)?void 0:null==(ka=ea.viewModel)?void 0:ka.state]},()=>I._setContentFromFeatureWidget()),K.when(()=>!I.collapsed,()=>{var U,Z;"xsmall"===(null==(U=I.viewModel)?void 0:null==(Z=U.view)?void 0:Z.widthBreakpoint)&&I.viewModel.active&&I.collapseEnabled&&I.viewModel.centerAtLocation()}),K.on(()=>{var U;return null==(U=I.viewModel)?void 0:U.allActions},"change",
()=>I._watchActions()),K.watch(()=>{var U;return null==(U=I.viewModel)?void 0:U.allActions},()=>I._watchActions(),K.initial),K.watch(()=>{var U;return null==(U=I.viewModel)?void 0:U.featureViewModels},()=>I._featureMenuViewportScrollTop())]);return I}d._inheritsLoose(X,J);var W=X.prototype;W.destroy=function(){var p,H;this._destroySelectedFeatureWidget();this._destroySpinner();null==(p=this._handles)?void 0:p.destroy();this._unobserveFeatureMenuObserver();null==(H=this._featureMenuIntersectionObserver)?
void 0:H.disconnect();this._handles=null};W.castVisibleElements=function(p){return{...E,...p}};W.blur=function(){const {active:p}=this.viewModel;p||w.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};W.clear=function(){this.viewModel.clear()};W.close=function(){this.visible=!1};W.fetchFeatures=function(p,H){return this.viewModel.fetchFeatures(p,H)};W.focus=function(){const {active:p}=this.viewModel;
p||w.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};W.next=function(){return this.viewModel.next()};W.open=function(p){var H,I;this._handles.remove("selected-index");const U={collapsed:p?!!p.collapsed:!1,actionsMenuOpen:p?!!p.actionsMenuOpen:!1,featureMenuOpen:p?!!p.featureMenuOpen:!1};"xsmall"===(null==(H=this.viewModel)?void 0:null==(I=H.view)?void 0:I.widthBreakpoint)&&(U.collapsed=!0);
this.set(U);this.viewModel.open(p);this._shouldFocus(p);this._addSelectedFeatureIndexHandle()};W.previous=function(){return this.viewModel.previous()};W.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};W.triggerAction=function(p){this.viewModel.triggerAction(p)};W.render=function(){var p,H,I,U;const {actionsMenuOpen:Z,dockEnabled:ea,featureMenuVisible:ka,dividedActions:ya,currentAlignment:oa,currentDockPosition:va}=this,{active:ua}=this.viewModel;var {menuActions:Ga}=
ya;Ga=ua&&1<Ga.length&&Z;const ha=null==(p=this.selectedFeature)?void 0:null==(H=p.layer)?void 0:H.title;p=null==(I=this.selectedFeature)?void 0:null==(U=I.layer)?void 0:U.id;return O.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===oa,["esri-popup--aligned-bottom-center"]:"bottom-center"===oa,["esri-popup--aligned-top-left"]:"top-left"===oa,["esri-popup--aligned-bottom-left"]:"bottom-left"===oa,["esri-popup--aligned-top-right"]:"top-right"===oa,["esri-popup--aligned-bottom-right"]:"bottom-right"===
oa,["esri-popup--is-docked"]:ua&&ea,["esri-popup--shadow"]:ua&&!ea,["esri-popup--is-docked-top-left"]:"top-left"===va,["esri-popup--is-docked-top-center"]:"top-center"===va,["esri-popup--is-docked-top-right"]:"top-right"===va,["esri-popup--is-docked-bottom-left"]:"bottom-left"===va,["esri-popup--is-docked-bottom-center"]:"bottom-center"===va,["esri-popup--is-docked-bottom-right"]:"bottom-right"===va,["esri-popup--feature-menu-open"]:ka,["esri-popup--actions-menu-open"]:Ga}),role:"presentation","data-layer-title":ha,
"data-layer-id":p,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},ua?[this.renderMainContainer(),this.renderPointer()]:null)};W.renderLoadingIcon=function(){return O.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};W.renderNavigationLoading=function(){const {messagesCommon:p}=this;return this.viewModel.pendingPromisesCount?O.tsx("div",{key:N("loading-container"),role:"presentation",class:"esri-popup__loading-container",
"aria-label":p.loading,title:p.loading},this.renderLoadingIcon()):null};W.renderPreviousIcon=function(){const p=T.isRTL(this.container);return O.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:p,["esri-popup__pagination-previous-icon--rtl"]:p,["esri-icon-left-triangle-arrow"]:!p,["esri-popup__pagination-previous-icon"]:!p})})};W.renderPreviousButton=function(){const {messages:p}=this;return O.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":p.previous,title:p.previous},this.renderPreviousIcon())};W.renderNextIcon=function(){const p=T.isRTL(this.container);return O.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:p,["esri-popup__pagination-next-icon--rtl"]:p,["esri-icon-right-triangle-arrow"]:!p,["esri-popup__pagination-next-icon"]:!p})})};W.renderNextButton=
function(){const {messages:p}=this;return O.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":p.next,title:p.next},this.renderNextIcon())};W.renderFeatureMenuButton=function(){const {featureMenuOpen:p,featureMenuId:H,messagesCommon:I}=this,{featureCount:U,selectedFeatureIndex:Z}=this.viewModel;return O.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,
onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":H,"aria-expanded":p.toString(),"aria-label":I.menu,title:I.menu},this._getPageText(U,Z))};W.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:
null};W.renderDockIcon=function(){const {dockEnabled:p}=this,H=this._wouldDockTo();return O.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:p,["esri-popup__icon--dock-icon"]:!p,["esri-icon-dock-right"]:!p&&("top-right"===H||"bottom-right"===H),["esri-icon-dock-left"]:!p&&("top-left"===H||"bottom-left"===H),["esri-icon-maximize"]:!p&&"top-center"===H,["esri-icon-dock-bottom"]:!p&&"bottom-center"===H},"esri-popup__icon")})};W.renderDockButton=function(){var p,H,I;const {dockEnabled:U,
messages:Z}=this,ea=null==(p=this.viewModel)?void 0:null==(H=p.view)?void 0:H.widthBreakpoint;p=U?Z.undock:Z.dock;return"xsmall"!==ea&&null!=(I=this.dockOptions)&&I.buttonEnabled?O.tsx("div",{role:"button","aria-label":p,title:p,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};W.renderTitle=
function(){const {title:p}=this.viewModel,{titleId:H,collapsible:I,contentCollapsed:U,messagesCommon:Z}=this;var ea={["esri-popup__header-container--button"]:I};const ka=O.tsx(y.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:p});ea=I?O.tsx("button",{key:`${p}--collapsible`,id:H,title:U?Z.expand:Z.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ea),"aria-expanded":U?"false":"true",onclick:this._toggleCollapsed,
type:"button"},ka):O.tsx("div",{key:p,id:H,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ea)},ka);return p?ea:null};W.renderCloseIcon=function(){return O.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};W.renderCloseButton=function(){const {visibleElements:p,messagesCommon:H}=this;return p.closeButton?O.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,
class:"esri-popup__button","aria-label":H.close,title:H.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};W.renderHeader=function(){return O.tsx("header",{class:"esri-popup__header"},this.renderTitle(),O.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};W.renderContentContainer=function(){const {contentId:p,hasContent:H,contentCollapsed:I}=this,{content:U}=this.viewModel;return H&&
!I?O.tsx("article",{key:U,enterAnimation:this._createFeatureUpdatedAnimation(),id:p,class:"esri-popup__content"},this.renderContent()):null};W.renderActionsMenuButton=function(){const {actionsMenuId:p,actionsMenuButtonId:H,actionsMenuOpen:I,dividedActions:U,messagesCommon:Z}=this,ea=I?Z.close:Z.open,{menuActions:ka}=U;return ka.length?O.tsx("div",{key:N("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:H,"aria-haspopup":"true","aria-controls":I?
p:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":ea,title:ea},O.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};W.renderMenuActions=function(){const {actionsMenuId:p,actionsMenuButtonId:H,actionsMenuOpen:I,dividedActions:U}=this,{menuActions:Z}=U;return Z.length&&I?O.tsx("ul",{id:p,role:"menu","aria-labelledby":H,key:N("actions"),
class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},Z.toArray().map(ea=>this.renderAction({action:ea,type:"menu-item"}))):null};W.renderInlineActions=function(){const {inlineActions:p}=this.dividedActions;return!!p.length&&p.toArray().map(H=>this.renderAction({action:H,type:"inline"}))};W.renderInlineActionsContainer=function(){const {inlineActions:p,menuActions:H}=this.dividedActions,I=!!p.length,
U=!!H.length;return I||U?O.tsx("div",{key:"inline-actions-container","data-inline-actions":I.toString(),"data-menu-actions":U.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};W.renderNavigation=function(){return this.featureNavigationVisible?O.tsx("section",{key:N("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};W.renderFooter=function(){const {featureNavigationVisible:p,
dividedActions:H}=this,{inlineActions:I,menuActions:U}=H,Z=!!I.length,ea={["esri-popup__footer--has-pagination"]:p,["esri-popup__footer--has-actions"]:Z,["esri-popup__footer--has-actions-menu"]:!!U.length};return p||Z?O.tsx("div",{key:N("feature-buttons"),class:this.classes("esri-popup__footer",ea)},this.renderInlineActionsContainer(),this.renderNavigation()):null};W.renderFeatureMenuContainer=function(){var {messages:p}=this;const {featureViewModels:H,isLoadingFeature:I}=this.viewModel;p=Q.substitute(p.selectedFeatures,
{total:H.length});return O.tsx("section",{key:N("menu"),class:"esri-popup__feature-menu"},O.tsx("strong",{class:"esri-popup__feature-menu-header"},p),O.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:T.storeNode},this.renderFeatureMenu(),O.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),I?O.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):
null))};W.renderPointer=function(){return this.dockEnabled?null:O.tsx("div",{key:N("pointer"),class:"esri-popup__pointer",role:"presentation"},O.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};W.renderMainContainer=function(){const {dockEnabled:p,currentAlignment:H,currentDockPosition:I,titleId:U,contentId:Z,collapsible:ea,hasContent:ka,contentCollapsed:ya,visibleElements:oa}=this,{title:va}=this.viewModel,ua="bottom-left"===H||"bottom-center"===H||"bottom-right"===
H||"top-left"===I||"top-center"===I||"top-right"===I,Ga="top-left"===H||"top-center"===H||"top-right"===H||"bottom-left"===I||"bottom-center"===I||"bottom-right"===I;return O.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:p,["esri-popup--is-collapsible"]:ea,["esri-popup--is-collapsed"]:ya}),tabIndex:oa.closeButton?null:-1,role:"dialog","aria-labelledby":va?U:"","aria-describedby":ka&&!ya?Z:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},ua?this.renderFooter():null,ua?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Ga?this.renderFooter():null,Ga?this.renderFeatureMenuContainer():null)};W.renderContent=function(){var p;const H=null==(p=this.viewModel)?void 0:p.content;return H?"string"===typeof H?O.tsx("div",{key:H,innerHTML:H}):this.renderNodeContent(H):null};W.renderActionText=function(p){return O.tsx("span",{key:"text",class:"esri-popup__action-text"},
p)};W.renderActionIcon=function(p){const H=this._getActionClass(p),I=this._getActionImage(p),U={["esri-icon-loading-indicator"]:p.active,["esri-rotating"]:p.active,["esri-popup__icon"]:!!H,["esri-popup__action-image"]:!p.active&&!!I};H&&(U[H]=!p.active);return O.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",U),styles:this._getIconStyles(I)})};W.renderAction=function(p){const {action:H,type:I}=p;p=this._getActionTitle(H);const U={["esri-popup__action"]:"toggle"!==
H.type,["esri-popup__action-toggle"]:"toggle"===H.type,["esri-popup__action-toggle--on"]:"toggle"===H.type&&H.value,["esri-popup__button--disabled"]:H.disabled},Z=[this.renderActionIcon(H),this.renderActionText(p)];p="menu-item"===I?O.tsx("li",{key:H.uid,role:"menuitem",tabIndex:0,title:p,"aria-label":p,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":H.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Z):O.tsx("div",{key:H.uid,
role:"button",tabIndex:0,title:p,"aria-label":p,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":H.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Z);return H.visible?p:null};W.renderFeatureMenuItem=function(p,H){const {messages:I,messagesCommon:U}=this,{selectedFeatureIndex:Z,selectedFeatureViewModel:ea}=this.viewModel;var ka=p===ea;const ya={["esri-popup__feature-menu-item--selected"]:ka};ka=ka?O.tsx("span",{key:N(`feature-menu-selected-feature-${Z}`),
title:I.selectedFeature,"aria-label":I.selectedFeature,class:"esri-icon-check-mark"}):null;p=O.tsx("span",{innerHTML:p.title||U.untitled});return O.tsx("li",{role:"menuitem",tabIndex:-1,key:N(`feature-menu-feature-${Z}`),class:this.classes(ya,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":H,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,
onmouseleave:this._removeActiveFeature},O.tsx("span",{class:"esri-popup__feature-menu-title"},p,ka))};W.renderFeatureMenu=function(){const {featureMenuId:p}=this,{featureViewModels:H}=this.viewModel;return 1<H.length?O.tsx("ol",{class:"esri-popup__feature-menu-list",id:p,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},H.filter(I=>!!I.graphic).map((I,U)=>this.renderFeatureMenuItem(I,U))):null};W._getActionTitle=
function(p){const {messages:H,selectedFeature:I,messagesCommon:U}=this,{id:Z}=p,ea=null==I?void 0:I.attributes;return(p="zoom-to-feature"===Z?Q.substitute(p.title,{messages:H}):"remove-selected-feature"===Z?Q.substitute(p.title,{messages:U}):"zoom-to-clustered-features"===Z?Q.substitute(p.title,{messages:H}):"browse-clustered-features"===Z?Q.substitute(p.title,{messages:H}):p.title)&&ea?Q.substitute(p,ea):p};W._getActionClass=function(p){var {selectedFeature:H}=this;H=null==H?void 0:H.attributes;
const {className:I,image:U}=p;return(p=U||I?I:"esri-icon-default-action")&&H?Q.substitute(p,H):p};W._getActionImage=function(p){var {selectedFeature:H}=this;H=null==H?void 0:H.attributes;({image:p}=p);return p&&H?Q.substitute(p,H):p};W._createFeatureUpdatedAnimation=function(){return T.cssTransition("enter","esri-popup--feature-updated")};W._getInlineActionCount=function(){const {maxInlineActions:p,featureNavigationVisible:H}=this;if("number"!==typeof p)return null;const I=Math.round(p);return Math.max(H?
I-1:I,0)};W._watchActions=function(){const {allActions:p}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");p&&p.forEach(H=>{this._handles.add(K.watch(()=>[H.uid,H.active,H.className,H.disabled,H.id,H.title,H.image,H.visible],()=>this.scheduleRender()),"actions")})};W._divideActions=function(){var {allActions:p}=this.viewModel;p=p.filter(Z=>Z.visible);const H=this._getInlineActionCount(),I=null===H,U=0===H;return{inlineActions:I?p.slice(0):U?new G:p.slice(0,H),menuActions:I?
new G:U?p.slice(0):p.slice(H)}};W._featureMenuOpenChanged=function(p){p?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};W._actionsMenuOpenChanged=function(p){p?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};W._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:p,messagesCommon:H}=this;if(p){var I,U;this.viewModel.title="error"===(null==(I=p.viewModel)?void 0:I.state)?H.errorMessage:(null==(U=p.viewModel)?void 0:U.title)||""}};W._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:p}=
this;p&&(this.viewModel.content=p)};W._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};W._featureMenuIntersectionObserverCreated=function(p){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(p);this._featureMenuIntersectionObserverNode=p};W._handleFeatureMenuKeyup=function(p){"Escape"===f.eventKey(p)&&(p.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};W._handleActionMenuKeyup=function(p){"Escape"===f.eventKey(p)&&(p.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};W._setActiveFeature=function(p){const {viewModel:H}=this;H.activeFeature=H.features[p.currentTarget["data-feature-index"]]||null};W._removeActiveFeature=function(){this.viewModel.activeFeature=null};W._handleFeatureMenuItemKeyup=function(p){const H=f.eventKey(p);var {_featureMenuNode:I}=
this;const U=p.currentTarget["data-feature-index"];if(I){I=I.querySelectorAll("li");var Z=I.length;"ArrowUp"===H?(p.stopPropagation(),I[(U-1+Z)%Z].focus()):"ArrowDown"===H?(p.stopPropagation(),I[(U+1+Z)%Z].focus()):"Home"===H?(p.stopPropagation(),I[0].focus()):"End"===H&&(p.stopPropagation(),I[I.length-1].focus())}};W._handleActionMenuItemKeyup=function(p){const H=f.eventKey(p);var {_actionsMenuNode:I}=this;const U=p.currentTarget.dataset.actionUid;var {menuActions:Z}=this.dividedActions;Z=Z.findIndex(ka=>
ka.uid===U);if(I){I=I.querySelectorAll("li");var ea=I.length;"ArrowUp"===H?(p.stopPropagation(),I[(Z-1+ea)%ea].focus()):"ArrowDown"===H?(p.stopPropagation(),I[(Z+1+ea)%ea].focus()):"Home"===H?(p.stopPropagation(),I[0].focus()):"End"===H&&(p.stopPropagation(),I[I.length-1].focus())}};W._handleMainKeyup=function(p){const H=f.eventKey(p);"ArrowLeft"===H&&(p.stopPropagation(),this.previous());"ArrowRight"===H&&(p.stopPropagation(),this.next())};W._spinnerEnabledChange=function(p){this._destroySpinner();
p&&(p=this.get("viewModel.view"),this._createSpinner(p))};W._hideSpinner=function(){const {_spinner:p}=this;p&&(p.location=null,p.hide())};W._displaySpinner=function(){const {_spinner:p}=this;if(p){var {location:H,waitingForResult:I}=this.viewModel;I?p.show({location:H}):p.hide()}};W._getIconStyles=function(p){return{"background-image":p?`url(${p})`:""}};W._shouldFocus=function(){var p=d._asyncToGenerator(function*(H){H.shouldFocus&&(yield K.whenOnce(()=>{var I;return!0===(null==(I=this.viewModel)?
void 0:I.active)}),this.focus())});return function(H){return p.apply(this,arguments)}}();W._addSelectedFeatureIndexHandle=function(){const p=K.watch(()=>{var H;return null==(H=this.viewModel)?void 0:H.selectedFeatureIndex},(H,I)=>this._selectedFeatureIndexUpdated(H,I));this._handles.add(p,"selected-index")};W._selectedFeatureIndexUpdated=function(p,H){const {featureCount:I}=this;I&&p!==H&&-1!==p&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};W._destroySelectedFeatureWidget=function(){const {_feature:p}=
this;p&&(p.viewModel=null,p&&!p.destroyed&&p.destroy());this._feature=null};W._isScreenLocationWithinView=function(p,H){return-1<p.x&&-1<p.y&&p.x<=H.width&&p.y<=H.height};W._isOutsideView=function(p){const {popupHeight:H,popupWidth:I,screenLocation:U,side:Z,view:ea}=p;if(isNaN(I)||isNaN(H)||!ea||!U)return!1;p=ea.padding;return"right"===Z&&U.x+I/2>ea.width-p.right||"left"===Z&&U.x-I/2<p.left||"top"===Z&&U.y-H<p.top||"bottom"===Z&&U.y+H>ea.height-p.bottom?!0:!1};W._calculateAutoAlignment=function(p){if("auto"!==
p)return p;const {_pointerOffsetInPx:H,_containerNode:I,_mainContainerNode:U,viewModel:Z}=this,{screenLocation:ea,view:ka}=Z;if(L.isNone(ea)||!ka||!I)return"top-center";if(!this._isScreenLocationWithinView(ea,ka))return this._get("currentAlignment")||"top-center";var ya=(p=U?window.getComputedStyle(U,null):null)?parseInt(p.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,oa=p?parseInt(p.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:va,width:ua}=I.getBoundingClientRect();
p=ua+H;const Ga=Math.max(va,ya,oa)+H;ya=this._isOutsideView({popupHeight:Ga,popupWidth:p,screenLocation:ea,side:"right",view:ka});oa=this._isOutsideView({popupHeight:Ga,popupWidth:p,screenLocation:ea,side:"left",view:ka});const ha=this._isOutsideView({popupHeight:Ga,popupWidth:p,screenLocation:ea,side:"top",view:ka});p=this._isOutsideView({popupHeight:Ga,popupWidth:p,screenLocation:ea,side:"bottom",view:ka});return oa?ha?"bottom-right":"top-right":ya?ha?"bottom-left":"top-left":ha?p?"top-center":
"bottom-center":"top-center"};W._callCurrentAlignment=function(p){return"function"===typeof p?p.call(this):p};W._getCurrentAlignment=function(){const {alignment:p,dockEnabled:H}=this;return H||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(p)))};W._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};W._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};
W._calculatePositionResult=function(p){const H=["left","right"];T.isRTL(this.container)&&H.reverse();return p.replace(/leading/gi,H[0]).replace(/trailing/gi,H[1])};W._callDockPosition=function(p){return"function"===typeof p?p.call(this):p};W._getDockPosition=function(){var p;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(p=this.dockOptions)?void 0:p.position)))};W._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?
this._getDockPosition():null};W._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};W._calculateAutoDockPosition=function(p){var H;if("auto"!==p)return p;p=null==(H=this.viewModel)?void 0:H.view;H=T.isRTL(this.container)?"top-left":"top-right";if(!p)return H;var I=p.padding||{left:0,right:0,top:0,bottom:0};I=p.width-I.left-I.right;({breakpoints:p}=p);return p&&I<=p.xsmall?"bottom-center":H};W._positionContainer=function(p=this._containerNode){p&&(this._containerNode=p);if(p){var {screenLocation:H}=
this.viewModel,{width:I}=p.getBoundingClientRect();if(H=this._calculatePositionStyle(H,I))p.style.top=H.top,p.style.left=H.left,p.style.bottom=H.bottom,p.style.right=H.right}};W._calculateFullWidth=function(p){const {currentAlignment:H,_pointerOffsetInPx:I}=this;return"top-left"===H||"bottom-left"===H||"top-right"===H||"bottom-right"===H?p+I:p};W._calculateAlignmentPosition=function(p,H,I,U){const {currentAlignment:Z,_pointerOffsetInPx:ea}=this;U/=2;const ka=I.height-H;I=I.width-p;const {padding:ya}=
this.view;if("bottom-center"===Z)return{top:H+ea-ya.top,left:p-U-ya.left};if("top-left"===Z)return{bottom:ka+ea-ya.bottom,right:I+ea-ya.right};if("bottom-left"===Z)return{top:H+ea-ya.top,right:I+ea-ya.right};if("top-right"===Z)return{bottom:ka+ea-ya.bottom,left:p+ea-ya.left};if("bottom-right"===Z)return{top:H+ea-ya.top,left:p+ea-ya.left};if("top-center"===Z)return{bottom:ka+ea-ya.bottom,left:p-U-ya.left}};W._calculatePositionStyle=function(p,H){const {dockEnabled:I,view:U}=this;if(U){if(I)return{left:"",
top:"",right:"",bottom:""};if(!L.isNone(p)&&H&&(H=this._calculateFullWidth(H),p=this._calculateAlignmentPosition(p.x,p.y,U,H)))return{top:void 0!==p.top?`${p.top}px`:"auto",left:void 0!==p.left?`${p.left}px`:"auto",bottom:void 0!==p.bottom?`${p.bottom}px`:"auto",right:void 0!==p.right?`${p.right}px`:"auto"}}};W._viewChange=function(p,H){p&&H&&(this.close(),this.clear())};W._viewReadyChange=function(p,H){p?(p=this.get("viewModel.view"),this._wireUpView(p)):H&&(this.close(),this.clear())};W._wireUpView=
function(p){this._destroySpinner();if(p){var {spinnerEnabled:H}=this;H&&this._createSpinner(p);this._setDockEnabledForViewSize(this.dockOptions)}};W._dockingThresholdCrossed=function(p,H,I){const [U,Z]=p,[ea,ka]=H,{width:ya,height:oa}=I;return U<=ya&&ea>ya||U>ya&&ea<=ya||Z<=oa&&ka>oa||Z>oa&&ka<=oa};W._updateDockEnabledForViewSize=function(p,H){if(p&&H){var I=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},U=I.left+I.right,Z=I.top+I.bottom;I=[];var ea=[];I[0]=p[0]-U;I[1]=p[1]-Z;
ea[0]=H[0]-U;ea[1]=H[1]-Z;({dockOptions:p}=this);this._dockingThresholdCrossed(I,ea,p.breakpoint)&&this._setDockEnabledForViewSize(p);this._setCurrentDockPosition()}};W._focusDockButtonNode=function(p){this._focusDockButton&&(this._focusDockButton=!1,p.focus())};W._closeButtonNodeUpdated=function(p){this._focusClose?(this._focusClose=!1,p.focus()):this._blurClose&&(this._blurClose=!1,p.blur())};W._mainContainerNodeUpdated=function(p){this._mainContainerNode=p;this._focusContainer?(this._focusContainer=
!1,p.focus()):this._blurContainer&&(this._blurContainer=!1,p.blur())};W._featureMenuNodeUpdated=function(p){(this._featureMenuNode=p)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,p=p.querySelectorAll("li"),p.length&&p[0].focus())};W._actionsMenuNodeUpdated=function(p){(this._actionsMenuNode=p)&&this._focusFirstAction&&(this._focusFirstAction=!1,p=p.querySelectorAll("li"),p.length&&p[0].focus())};W._focusFeatureMenuButtonNode=function(p){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=
!1,p.focus())};W._focusActionsMenuButtonNode=function(p){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,p.focus())};W._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};W._toggleScreenLocationEnabled=function(){const {dockEnabled:p,viewModel:H}=this;H&&(H.screenLocationEnabled=H.active&&!p)};W._shouldDockAtCurrentViewSize=function(p){var H,I;p=p.breakpoint;const U=null==(H=this.viewModel)?void 0:null==(I=H.view)?void 0:
I.ui;if(!U)return!1;const {width:Z,height:ea}=U;if(isNaN(Z)||isNaN(ea))return!1;H=p.hasOwnProperty("width")&&Z<=p.width;I=p.hasOwnProperty("height")&&ea<=p.height;return H||I};W._setDockEnabledForViewSize=function(p){p.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(p))};W._getPageText=function(p,H){return this.featureNavigationVisible?Q.substitute(this.messages.pageText,{index:H+1,total:p}):null};W._destroySpinner=function(){const {_spinner:p,view:H}=this;p&&(H&&H.ui&&H.ui.remove(this._spinner,
"popup-spinner"),p.destroy(),this._spinner=null)};W._createSpinner=function(p){p&&(this._spinner=new z({view:p}),p.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};W._toggleCollapsed=function(){this.collapsed=!this.collapsed};W._close=function(){this.close();this.view&&this.view.focus()};W._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};W._toggleFeatureMenu=function(){const p=!this.featureMenuOpen;this._featureMenuOpenChanged(p);
this.actionsMenuOpen=!1;this.featureMenuOpen=p};W._toggleActionsMenu=function(){const p=!this.actionsMenuOpen;this._actionsMenuOpenChanged(p);this.featureMenuOpen=!1;this.actionsMenuOpen=p};W._triggerAction=function(p){const H=p.currentTarget.dataset.actionUid;var {allActions:I}=this.viewModel;p=I.findIndex(U=>U.uid===H);(I=I.getItemAt(p))&&"toggle"===I.type&&(I.value=!I.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(p)};W._selectFeature=function(p){p=p.currentTarget["data-feature-index"];
isNaN(p)||(this.viewModel.selectedFeatureIndex=p);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};W._next=function(){this.next()};W._previous=function(){this.previous()};d._createClass(X,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},
{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var p,H,I,U,Z,ea,ka;return!!(this.selectedFeatureWidget?(null==(p=this.selectedFeatureWidget)?0:null==(H=p.viewModel)?0:H.waitingForContent)||"error"===(null==(I=this.selectedFeatureWidget)?void 0:null==(U=I.viewModel)?void 0:U.state)||(null==(Z=this.selectedFeatureWidget)?0:null==(ea=Z.viewModel)?0:ea.content):null==(ka=this.viewModel)?0:ka.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&
1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?
this._get("actionsMenuOpen"):!1},set:function(p){this._set("actionsMenuOpen",!!p)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||P},set:function(p){var H={...P};const I=this.get("viewModel.view.breakpoints");var U={};I&&(U.width=I.xsmall,U.height=I.xsmall);p={...H,...p};H={...H.breakpoint,...U};({breakpoint:U}=p);!0===U?
p.breakpoint=H:"object"===typeof U&&(p.breakpoint={...H,...U});this._set("dockOptions",p);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:p,visibleElements:H,headingLevel:I}=this,{selectedFeatureViewModel:U}=this.viewModel,Z={...H,title:!1};if(!U)return null;p?(p.viewModel=U,p.visibleElements=Z):this._feature=new n({headingLevel:I+1,viewModel:U,visibleElements:Z});return this._feature}}]);return X}(h.FeatureContentMixin(e));u.__decorate([v.property({readOnly:!0})],
c.prototype,"actionsMenuId",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"actionsMenuButtonId",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"featureMenuId",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"titleId",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"contentId",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"hasContent",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"featureNavigationVisible",null);u.__decorate([v.property({readOnly:!0})],
c.prototype,"collapsible",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"featureMenuVisible",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"contentCollapsed",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"dividedActions",null);u.__decorate([x.aliasOf("viewModel.actions")],c.prototype,"actions",void 0);u.__decorate([v.property()],c.prototype,"actionsMenuOpen",null);u.__decorate([v.property()],c.prototype,"alignment",void 0);u.__decorate([x.aliasOf("viewModel.autoCloseEnabled")],
c.prototype,"autoCloseEnabled",void 0);u.__decorate([x.aliasOf("viewModel.autoOpenEnabled")],c.prototype,"autoOpenEnabled",void 0);u.__decorate([x.aliasOf("viewModel.defaultPopupTemplateEnabled")],c.prototype,"defaultPopupTemplateEnabled",void 0);u.__decorate([x.aliasOf("viewModel.content")],c.prototype,"content",void 0);u.__decorate([v.property()],c.prototype,"collapsed",void 0);u.__decorate([v.property()],c.prototype,"collapseEnabled",void 0);u.__decorate([v.property({readOnly:!0})],c.prototype,
"currentAlignment",null);u.__decorate([v.property({readOnly:!0})],c.prototype,"currentDockPosition",null);u.__decorate([v.property()],c.prototype,"dockOptions",null);u.__decorate([v.property()],c.prototype,"dockEnabled",void 0);u.__decorate([x.aliasOf("viewModel.featureCount")],c.prototype,"featureCount",void 0);u.__decorate([v.property()],c.prototype,"featureMenuOpen",void 0);u.__decorate([x.aliasOf("viewModel.features")],c.prototype,"features",void 0);u.__decorate([x.aliasOf("viewModel.goToOverride")],
c.prototype,"goToOverride",void 0);u.__decorate([v.property()],c.prototype,"headingLevel",void 0);u.__decorate([x.aliasOf("viewModel.highlightEnabled")],c.prototype,"highlightEnabled",void 0);u.__decorate([x.aliasOf("viewModel.location")],c.prototype,"location",void 0);u.__decorate([v.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],c.prototype,"label",void 0);u.__decorate([v.property()],c.prototype,"maxInlineActions",void 0);u.__decorate([v.property(),m.messageBundle("esri/widgets/Popup/t9n/Popup")],
c.prototype,"messages",void 0);u.__decorate([v.property(),m.messageBundle("esri/t9n/common")],c.prototype,"messagesCommon",void 0);u.__decorate([x.aliasOf("viewModel.promises")],c.prototype,"promises",void 0);u.__decorate([x.aliasOf("viewModel.selectedFeature")],c.prototype,"selectedFeature",void 0);u.__decorate([x.aliasOf("viewModel.selectedFeatureIndex")],c.prototype,"selectedFeatureIndex",void 0);u.__decorate([v.property({readOnly:!0})],c.prototype,"selectedFeatureWidget",null);u.__decorate([v.property()],
c.prototype,"spinnerEnabled",void 0);u.__decorate([x.aliasOf("viewModel.title")],c.prototype,"title",void 0);u.__decorate([x.aliasOf("viewModel.updateLocationEnabled")],c.prototype,"updateLocationEnabled",void 0);u.__decorate([x.aliasOf("viewModel.view")],c.prototype,"view",void 0);u.__decorate([v.property({type:l}),D.vmEvent(["triggerAction","trigger-action"])],c.prototype,"viewModel",void 0);u.__decorate([x.aliasOf("viewModel.visible")],c.prototype,"visible",void 0);u.__decorate([v.property()],
c.prototype,"visibleElements",void 0);u.__decorate([q.cast("visibleElements")],c.prototype,"castVisibleElements",null);u.__decorate([r.accessibleHandler()],c.prototype,"_close",null);u.__decorate([r.accessibleHandler()],c.prototype,"_toggleDockEnabled",null);u.__decorate([r.accessibleHandler()],c.prototype,"_toggleFeatureMenu",null);u.__decorate([r.accessibleHandler()],c.prototype,"_toggleActionsMenu",null);u.__decorate([r.accessibleHandler()],c.prototype,"_triggerAction",null);u.__decorate([r.accessibleHandler()],
c.prototype,"_selectFeature",null);u.__decorate([r.accessibleHandler()],c.prototype,"_next",null);u.__decorate([r.accessibleHandler()],c.prototype,"_previous",null);return c=u.__decorate([t.subclass("esri.widgets.Popup")],c)})},"esri/core/throttle":function(){define(["exports"],function(d){d.throttle=function(u,c,G,f){let F=null,A=1E3;"number"===typeof c?(A=c,f=G):(F=null!=c?c:null,A=G);let L=0,K;const C=()=>{L=0;u.apply(f,K)};c=(...x)=>{F&&F.apply(f,x);K=x;A?L||(L=setTimeout(C,A)):C()};c.remove=
()=>{L&&(clearTimeout(L),L=0)};c.forceUpdate=()=>{L&&(clearTimeout(L),C())};c.hasPendingUpdates=()=>!!L;return c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m){const D={title:!0,content:!0,lastEditedInfo:!0};G=function(O){function T(N,P){N=O.call(this,N,P)||this;N._contentWidgets=[];N.graphic=null;N.defaultPopupTemplateEnabled=!1;N.headingLevel=2;N.label=void 0;N.messages=null;N.messagesCommon=null;N.messagesURIUtils=null;N.spatialReference=null;N.title=null;N.visibleElements={...D};N.map=null;N.view=null;N.viewModel=new z;return N}u._inheritsLoose(T,O);var Q=T.prototype;Q.initialize=function(){this.own(f.watch(()=>
{var N;return null==(N=this.viewModel)?void 0:N.contentViewModels},()=>this._setupContentWidgets(),f.initial))};Q.loadDependencies=function(){return new Promise((N,P)=>d(["../chunks/calcite-notice"],N,P))};Q.destroy=function(){this._destroyContentWidgets()};Q.castVisibleElements=function(N){return{...D,...N}};Q.render=function(){var {state:N}=this.viewModel;N=r.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===N?this.renderError():"loading"===N?this.renderLoading():
this.renderContentContainer());return r.tsx("div",{class:this.classes("esri-feature","esri-widget")},N)};Q.setActiveMedia=function(N,P){this.viewModel.setActiveMedia(N,P)};Q.nextMedia=function(N){this.viewModel.nextMedia(N)};Q.previousMedia=function(N){this.viewModel.previousMedia(N)};Q.renderError=function(){const {messagesCommon:N,messages:P,visibleElements:w}=this;return r.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},w.title?r.tsx("div",{key:"error-title",
slot:"title"},N.errorMessage):null,r.tsx("div",{key:"error-message",slot:"message"},P.loadingError))};Q.renderLoading=function(){return r.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},r.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};Q.renderContentContainer=function(){const {visibleElements:N}=this;return N.content?r.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):
null};Q.renderTitle=function(){const {visibleElements:N,title:P}=this;return N.title?r.tsx(h.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:P}):null};Q.renderContent=function(){var N=this.viewModel.content;return N?Array.isArray(N)?N.length?r.tsx("div",{key:"content-content-elements"},N.map(this.renderContentElement,this)):null:"string"===typeof N?(N=this._contentWidgets[0],!N||N.destroyed?null:r.tsx("div",{key:"content-content"},N.render())):this.renderNodeContent(N):null};
Q.renderContentElement=function(N,P){const {visibleElements:w}=this;if("boolean"!==typeof w.content&&!w.content[N.type])return null;switch(N.type){case "attachments":return this.renderAttachments(P);case "custom":return this.renderCustom(N,P);case "fields":return this.renderFields(P);case "media":return this.renderMedia(P);case "text":return this.renderText(N,P);case "expression":return this.renderExpression(P);default:return null}};Q.renderAttachments=function(N){const P=this._contentWidgets[N];
if(!P||P.destroyed)return null;const {state:w,attachmentInfos:E}=P.viewModel;return"loading"===w||0<E.length?r.tsx("div",{key:this._buildKey("attachments-element",N),class:this.classes("esri-feature__content-element")},P.render()):null};Q.renderExpression=function(N){const P=this._contentWidgets[N];return!P||P.destroyed?null:r.tsx("div",{key:this._buildKey("expression-element",N),class:"esri-feature__content-element"},P.render())};Q.renderCustom=function(N,P){({creator:N}=N);const w=this._contentWidgets[P];
return!w||w.destroyed?null:N?r.tsx("div",{key:this._buildKey("custom-element",P),class:"esri-feature__content-element"},w.render()):null};Q.renderFields=function(N){const P=this._contentWidgets[N];return!P||P.destroyed?null:r.tsx("div",{key:this._buildKey("fields-element",N),class:"esri-feature__content-element"},P.render())};Q.renderMedia=function(N){const P=this._contentWidgets[N];return!P||P.destroyed?null:r.tsx("div",{key:this._buildKey("media-element",N),class:"esri-feature__content-element"},
P.render())};Q.renderLastEditInfo=function(){const {visibleElements:N,messages:P}=this;var {lastEditInfo:w}=this.viewModel;if(!w||!N.lastEditedInfo)return null;const {date:E,user:J}=w;w=m.substitute("edit"===w.type?J?P.lastEditedByUser:P.lastEdited:J?P.lastCreatedByUser:P.lastCreated,{date:E,user:J});return r.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},w)};Q.renderText=function(N,P){const w=this._contentWidgets[P];return!w||
w.destroyed?null:N.text?r.tsx("div",{key:this._buildKey("text-element",P),class:this.classes("esri-feature__content-element","esri-feature__text")},w.render()):null};Q._buildKey=function(N,...P){const w=this.get("viewModel.graphic.uid")||"0";P=P.join("-");return`${N}__${w}-${P}`};Q._destroyContentWidget=function(N){N&&(N.viewModel=null,!N.destroyed&&N.destroy())};Q._destroyContentWidgets=function(){this._contentWidgets.forEach(N=>this._destroyContentWidget(N));this._contentWidgets=[]};Q._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:N,visibleElements:P}=this;var w=this.get("viewModel.content");const {contentViewModels:E}=this.viewModel;Array.isArray(w)?w.forEach((J,X)=>{"attachments"===J.type&&(this._contentWidgets[X]=new g({displayType:J.displayType,headingLevel:P.title?N+1:N,viewModel:E[X]}));"fields"===J.type&&(this._contentWidgets[X]=new t({viewModel:E[X]}));"media"===J.type&&(this._contentWidgets[X]=new n({viewModel:E[X]}));"text"===J.type&&(this._contentWidgets[X]=
new q({viewModel:E[X]}));"custom"===J.type&&(this._contentWidgets[X]=new q({viewModel:E[X]}));"expression"===J.type&&(this._contentWidgets[X]=new v({viewModel:E[X]}))},this):(w=E[0])&&!w.destroyed&&(this._contentWidgets[0]=new q({viewModel:w}));this.scheduleRender()};return T}(e.FeatureContentMixin(k));c.__decorate([F.aliasOf("viewModel.graphic")],G.prototype,"graphic",void 0);c.__decorate([F.aliasOf("viewModel.defaultPopupTemplateEnabled")],G.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([C.property()],
G.prototype,"headingLevel",void 0);c.__decorate([C.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],G.prototype,"label",void 0);c.__decorate([C.property(),y.messageBundle("esri/widgets/Feature/t9n/Feature")],G.prototype,"messages",void 0);c.__decorate([C.property(),y.messageBundle("esri/t9n/common")],G.prototype,"messagesCommon",void 0);c.__decorate([C.property(),y.messageBundle("esri/widgets/support/t9n/uriUtils")],G.prototype,"messagesURIUtils",void 0);c.__decorate([F.aliasOf("viewModel.spatialReference")],
G.prototype,"spatialReference",void 0);c.__decorate([F.aliasOf("viewModel.title")],G.prototype,"title",void 0);c.__decorate([C.property()],G.prototype,"visibleElements",void 0);c.__decorate([K.cast("visibleElements")],G.prototype,"castVisibleElements",null);c.__decorate([F.aliasOf("viewModel.map")],G.prototype,"map",void 0);c.__decorate([F.aliasOf("viewModel.view")],G.prototype,"view",void 0);c.__decorate([C.property({type:z})],G.prototype,"viewModel",void 0);return G=c.__decorate([x.subclass("esri.widgets.Feature")],
G)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v){f=function(t){function n(e,h){e=t.call(this,e,h)||this;e._featureElementInfo=null;e.attachmentsWidget=new C;e.description=null;e.displayType=null;e.graphic=null;e.headingLevel=2;e.title=null;e.viewModel=new k;return e}d._inheritsLoose(n,t);var z=n.prototype;z.initialize=function(){this._featureElementInfo=new g;this.own([c.watch(()=>{var e,h;return[null==(e=this.viewModel)?void 0:e.description,null==(h=this.viewModel)?void 0:h.title,this.headingLevel]},()=>
this._setupFeatureElementInfo(),c.initial),c.watch(()=>{var e;return null==(e=this.viewModel)?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,c.initial)])};z.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};z.render=function(){var e;const {attachmentsWidget:h}=this;return v.tsx("div",{class:"esri-feature-attachments"},null==(e=this._featureElementInfo)?void 0:e.render(),null==h?void 0:h.render())};z._setupFeatureElementInfo=function(){const {description:e,
title:h,headingLevel:l}=this;this._featureElementInfo.set({description:e,title:h,headingLevel:l})};return n}(x);u.__decorate([L.property({readOnly:!0})],f.prototype,"attachmentsWidget",void 0);u.__decorate([G.aliasOf("viewModel.description")],f.prototype,"description",void 0);u.__decorate([G.aliasOf("attachmentsWidget.displayType")],f.prototype,"displayType",void 0);u.__decorate([G.aliasOf("viewModel.graphic")],f.prototype,"graphic",void 0);u.__decorate([L.property()],f.prototype,"headingLevel",void 0);
u.__decorate([G.aliasOf("viewModel.title")],f.prototype,"title",void 0);u.__decorate([L.property({type:k})],f.prototype,"viewModel",void 0);return f=u.__decorate([K.subclass("esri.widgets.Feature.FeatureAttachments")],f)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n){const z={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},e=window.CSS;A=function(h){function l(r,m){r=h.call(this,r,m)||this;r.abilities=null;r.displayType="auto";r.graphic=null;r.label=void 0;r.messages=null;r.messagesUnits=null;r.selectedFile=null;r.submitting=!1;r.viewModel=new g;r.visibleElements={...z};r._supportsImageOrientation=e&&e.supports&&e.supports("image-orientation",
"from-image");r._addAttachmentForm=null;r._updateAttachmentForm=null;return r}d._inheritsLoose(l,h);var y=l.prototype;y.initialize=function(){this.own([G.on(()=>{var r;return null==(r=this.viewModel)?void 0:r.attachmentInfos},"change",()=>this.scheduleRender()),G.watch(()=>{var r;return null==(r=this.viewModel)?void 0:r.mode},()=>this._modeChanged(),G.initial)])};y.castVisibleElements=function(r){return{...z,...r}};y.addAttachment=function(){const {_addAttachmentForm:r,viewModel:m}=this;this._set("submitting",
!0);this._set("error",null);return m.addAttachment(r).then(D=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new c("attachments:add-attachment",this.messages.addErrorMessage,D));throw D;})};y.deleteAttachment=function(r){const {viewModel:m}=this;this._set("submitting",!0);this._set("error",null);return m.deleteAttachment(r).then(D=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return D}).catch(D=>
{this._set("submitting",!1);this._set("error",new c("attachments:delete-attachment",this.messages.deleteErrorMessage,D));throw D;})};y.updateAttachment=function(){const {viewModel:r}=this,{_updateAttachmentForm:m}=this;this._set("submitting",!0);this._set("error",null);return r.updateAttachment(m).then(D=>{this._set("submitting",!1);this._set("error",null);r.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new c("attachments:update-attachment",this.messages.updateErrorMessage,
D));throw D;})};y.render=function(){const {submitting:r,viewModel:m}=this,{state:D}=m;return n.tsx("div",{class:this.classes("esri-attachments","esri-widget")},r?this.renderProgressBar():null,"loading"===D?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};y.renderErrorMessage=function(){const {error:r,visibleElements:m}=this;return r&&m.errorMessage?n.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},r.message):null};y.renderAttachments=function(){const {mode:r,
activeAttachmentInfo:m}=this.viewModel;return"add"===r?this.renderAddForm():"edit"===r?this.renderDetailsForm(m):this.renderAttachmentContainer()};y.renderLoading=function(){return n.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},n.tsx("div",{class:"esri-attachments__loader"}))};y.renderProgressBar=function(){return this.visibleElements.progressBar?n.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};y.renderAddForm=function(){const {submitting:r,selectedFile:m}=
this;var D=r||!m,O=this.visibleElements.cancelAddButton?n.tsx("button",{type:"button",bind:this,disabled:r,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",r&&"esri-button--disabled")},this.messages.cancel):null;D=this.visibleElements.addSubmitButton?n.tsx("button",{type:"submit",disabled:D,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:D})},this.messages.add):
null;const T=m?n.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},m.name):null;O=n.tsx("form",{bind:this,afterCreate:v.storeNode,afterRemoved:v.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n.tsx("fieldset",{class:"esri-attachments__file-fieldset"},T,n.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},m?this.messages.changeFile:this.messages.selectFile,n.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),D,O);return n.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},O)};y.renderDetailsForm=function(r){const {visibleElements:m,viewModel:D,selectedFile:O,submitting:T}=this,{contentType:Q,size:N,url:P}=r;var {abilities:w}=D,E=T||!O,J=w.editing&&w.operations.delete&&m.deleteButton?n.tsx("button",{key:"delete-button",type:"button",disabled:T,bind:this,onclick:H=>this._submitDeleteAttachment(H,r),class:this.classes("esri-button",
"esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:T})},this.messages.delete):null;E=w.editing&&w.operations.update&&m.updateButton?n.tsx("button",{disabled:E,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:E})},this.messages.update):null;const X=this.visibleElements.cancelUpdateButton?n.tsx("button",{disabled:T,key:"cancel-button",type:"button",bind:this,
onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:T})},this.messages.cancel):null;var W=O?n.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},O.name):null;w=w.editing&&w.operations.update?n.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},W,n.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,
n.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null;W=n.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},n.tsx("label",null,f.formatFileSize(this.messagesUnits,N)));const p=n.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},n.tsx("label",null,Q));J=n.tsx("form",{bind:this,afterCreate:v.storeNode,afterRemoved:v.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:this._submitUpdateAttachment},n.tsx("div",{class:"esri-attachments__metadata"},W,p),w,n.tsx("div",{class:"esri-attachments__actions"},J,X,E));return n.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},n.tsx("a",{class:"esri-attachments__item-link",href:P,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:r,size:400}),n.tsx("div",{class:"esri-attachments__item-link-overlay"},n.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},n.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),J)};y.renderImageMask=function({attachmentInfo:r,size:m}){var {supportsResizeAttachments:D}=this.viewModel;const {contentType:O,name:T,url:Q}=r,N=D&&q.isSupportedImage(O);r=(r=this._getCSSTransform(r,N))?{transform:r,"image-orientation":"none"}:{};const P=Q.includes("?")?
"\x26":"?";m=N?`${Q}${P}w=${m}`:q.getIconPath(O);D={["esri-attachments__image--resizable"]:D};return n.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!N},"esri-attachments__item-mask")},n.tsx("img",{styles:r,alt:T,src:m,class:this.classes(D,"esri-attachments__image")}))};y.renderAttachmentInfo=function({attachmentInfo:r,displayType:m}){var {viewModel:D}=this;({abilities:D}=D);const {name:O,url:T}=r;m=this.renderImageMask({attachmentInfo:r,size:"list"===m?48:400});var Q=D.editing?
n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",v.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;Q=n.tsx("label",{class:"esri-attachments__label"},n.tsx("span",{class:"esri-attachments__filename"},O||this.messages.noTitle),Q);m=[m,Q];D=D.editing?n.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":r.id,
onclick:()=>this._startEditAttachment(r),type:"button"},m):n.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:T,target:"_blank"},m);return n.tsx("li",{class:"esri-attachments__item",key:r},D)};y.renderAttachmentContainer=function(){const {effectiveDisplayType:r,viewModel:m,visibleElements:D}=this,{attachmentInfos:O,abilities:T}=m;var Q=O&&O.length;const N={["esri-attachments__container--list"]:"preview"!==r,["esri-attachments__container--preview"]:"preview"===r},P=T.editing&&
T.operations.add&&D.addButton?n.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;Q=Q?n.tsx("ul",{class:"esri-attachments__items"},O.toArray().map(w=>this.renderAttachmentInfo({attachmentInfo:w,displayType:r}))):n.tsx("div",{class:"esri-widget__content--empty"},
this.messages.noAttachments);return n.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",N)},Q,P)};y._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};y._handleFileInputChange=function(r){r=(r=r.target)&&r.files&&r.files.item(0);this._set("selectedFile",r)};y._submitDeleteAttachment=function(r,m){r.preventDefault();this.deleteAttachment(m)};y._submitAddAttachment=function(r){r.preventDefault();this.addAttachment()};y._submitUpdateAttachment=
function(r){r.preventDefault();this.updateAttachment()};y._startEditAttachment=function(r){const {viewModel:m}=this;m.activeAttachmentInfo=r;m.mode="edit"};y._startAddAttachment=function(){this.viewModel.mode="add"};y._cancelForm=function(r){r.preventDefault();this.viewModel.mode="view"};y._getCSSTransform=function(r,m){({orientationInfo:r}=r);return!this._supportsImageOrientation&&m&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""};d._createClass(l,[{key:"effectiveDisplayType",
get:function(){const {displayType:r}=this;return r&&"auto"!==r?r:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return l}(k);u.__decorate([F.aliasOf("viewModel.abilities")],A.prototype,"abilities",void 0);u.__decorate([C.property()],A.prototype,"displayType",void 0);u.__decorate([C.property({readOnly:!0})],A.prototype,"effectiveDisplayType",null);u.__decorate([F.aliasOf("viewModel.graphic")],A.prototype,"graphic",void 0);u.__decorate([C.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],A.prototype,"label",void 0);u.__decorate([C.property(),t.messageBundle("esri/widgets/Attachments/t9n/Attachments")],A.prototype,"messages",void 0);u.__decorate([C.property(),t.messageBundle("esri/core/t9n/Units")],A.prototype,"messagesUnits",void 0);u.__decorate([C.property({readOnly:!0})],A.prototype,"selectedFile",void 0);u.__decorate([C.property({readOnly:!0})],A.prototype,"submitting",void 0);u.__decorate([C.property({readOnly:!0})],A.prototype,"error",void 0);u.__decorate([C.property({type:g})],
A.prototype,"viewModel",void 0);u.__decorate([C.property()],A.prototype,"visibleElements",void 0);u.__decorate([K.cast("visibleElements")],A.prototype,"castVisibleElements",null);return A=u.__decorate([x.subclass("esri.widgets.Attachments")],A)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(d,u,c,G,f,F,A,L){function K(q,v,t){return q.units[v][t]}function C(q,v,t,n=2,z="abbr"){return`${L.formatNumber(v,
{minimumFractionDigits:n,maximumFractionDigits:n})} ${K(q,t,z)}`}function x(q,v,t,n=2,z="abbr"){return`${L.formatNumber(v,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:"exceptZero"})} ${K(q,t,z)}`}function k(q,v,t){if(v===t)return q;switch(t){case "arithmetic":return-q+90;case "geographic":return-q-90}}const g=["B","kB","MB","GB","TB"];d.formatAngleDegrees=function(q,v,t,n,z){q=c.cyclicalDegrees.normalize(k(A.convertUnit(q,v,"degrees"),t,n),0,!0);z=f.unwrapOr(z,2);return L.formatNumber(q,
{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:z,minimumFractionDigits:z})};d.formatDMS=function(q,v,t=2){q=A.convertUnit(q,v,"degrees");v=q-Math.floor(q);q-=v;v*=60;let n=v-Math.floor(v);v-=n;n*=60;return`${q.toFixed()}\u00b0 ${v.toFixed()}' ${n.toFixed(t)}"`};d.formatDecimal=C;d.formatFileSize=function(q,v){let t=0===v?0:Math.floor(Math.log(v)/Math.log(u.ByteSizeUnit.KILOBYTES));t=G.clamp(t,0,g.length-1);v=L.formatNumber(v/u.ByteSizeUnit.KILOBYTES**t,{maximumFractionDigits:2});
return F.replace(q.units.bytes[g[t]],{fileSize:v})};d.formatImperialArea=function(q,v,t,n=2,z="abbr"){const e=A.preferredImperialAreaUnit(v,t);return C(q,A.convertUnit(v,t,e),e,n,z)};d.formatImperialLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredImperialLengthUnit(v,t);return C(q,A.convertUnit(v,t,e),e,n,z)};d.formatImperialRelativeLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredImperialLengthUnit(v,t);return x(q,A.convertUnit(v,t,e),e,n,z)};d.formatImperialRelativeVerticalLength=function(q,
v,t,n=2,z="abbr"){const e=A.preferredImperialVerticalLengthUnit(v,t);return x(q,A.convertUnit(v,t,e),e,n,z)};d.formatImperialVerticalLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredImperialVerticalLengthUnit(v,t);return C(q,A.convertUnit(v,t,e),e,n,z)};d.formatMetricArea=function(q,v,t,n=2,z="abbr"){const e=A.preferredMetricAreaUnit(v,t);return C(q,A.convertUnit(v,t,e),e,n,z)};d.formatMetricLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredMetricLengthUnit(v,t);return C(q,A.convertUnit(v,
t,e),e,n,z)};d.formatMetricRelativeLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredMetricLengthUnit(v,t);return x(q,A.convertUnit(v,t,e),e,n,z)};d.formatMetricRelativeVerticalLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredMetricVerticalLengthUnit(v,t);return x(q,A.convertUnit(v,t,e),e,n,z)};d.formatMetricVerticalLength=function(q,v,t,n=2,z="abbr"){const e=A.preferredMetricVerticalLengthUnit(v,t);return C(q,A.convertUnit(v,t,e),e,n,z)};d.formatRelativeAngleDegrees=function(q,v,t,n,z){t!==
n&&(q=-q);q=A.convertUnit(q,v,"degrees")%360;z=f.unwrapOr(z,2);return L.formatNumber(q,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:z,minimumFractionDigits:z,signDisplay:"exceptZero"})};d.formatRelativeDecimal=x;d.unitName=K;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(d){function u(c){return 32+c.length}d.ByteSizeUnit=void 0;(function(c){c[c.KILOBYTES=1024]=
"KILOBYTES";c[c.MEGABYTES=1048576]="MEGABYTES";c[c.GIGABYTES=1073741824]="GIGABYTES"})(d.ByteSizeUnit||(d.ByteSizeUnit={}));d.estimateAttributesObjectSize=function(c){if(!c)return 0;let G=32;for(const f in c)if(c.hasOwnProperty(f)){const F=c[f];switch(typeof F){case "string":G+=u(F);break;case "number":G+=16;break;case "boolean":G+=4}}return G};d.estimateFixedArraySize=function(c,G){return 32+c.length*G};d.estimateNumberByteSize=function(){return 16};d.estimateStringByteSize=u;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t){const n={editing:!1,operations:{add:!0,update:!0,delete:!0}},z=f.ofType(q);G=function(e){function h(y){var r=e.call(this,y)||this;r._getAttachmentsPromise=null;r._attachmentLayer=null;r.abilities={...n};r.activeAttachmentInfo=null;r.attachmentInfos=new z;r.graphic=null;r.mode="view";r.own(L.watch(()=>r.graphic,()=>r._graphicChanged(),L.initial));return r}d._inheritsLoose(h,e);var l=h.prototype;l.destroy=function(){this.graphic=this._attachmentLayer=null};
l.castAbilities=function(y){return{...n,...y}};l.getAttachments=function(){var y=d._asyncToGenerator(function*(){const {_attachmentLayer:r,attachmentInfos:m}=this;if(!r||"function"!==typeof r.queryAttachments)throw new F("invalid-layer","getAttachments(): A valid layer is required.");const D=this._getFeatureId();var O=new v({objectIds:[D],returnMetadata:!0});const T=[];this._getAttachmentsPromise=O=r.queryAttachments(O).then(Q=>Q[D]||T).catch(()=>T);this.notifyChange("state");O=yield O;m.removeAll();
O.length&&m.addMany(O);this._getAttachmentsPromise=null;this.notifyChange("state");return O});return function(){return y.apply(this,arguments)}}();l.addAttachment=function(){var y=d._asyncToGenerator(function*(r){const {_attachmentLayer:m,attachmentInfos:D,graphic:O,abilities:T}=this;if(!r)throw new F("invalid-attachment","addAttachment(): An attachment is required.",{attachment:r});if(!T.operations.add)throw new F("invalid-abilities","addAttachment(): add abilities are required.");if(!m||"function"!==
typeof m.addAttachment)throw new F("invalid-layer","addAttachment(): A valid layer is required.");r=yield m.addAttachment(O,r).then(Q=>this._queryAttachment(Q.objectId));D.add(r);return r});return function(r){return y.apply(this,arguments)}}();l.deleteAttachment=function(){var y=d._asyncToGenerator(function*(r){const {_attachmentLayer:m,attachmentInfos:D,graphic:O,abilities:T}=this;if(!r)throw new F("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:r});
if(!T.operations.delete)throw new F("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!m||"function"!==typeof m.deleteAttachments)throw new F("invalid-layer","deleteAttachment(): A valid layer is required.");const Q=yield m.deleteAttachments(O,[r.id]).then(()=>r);D.remove(Q);return Q});return function(r){return y.apply(this,arguments)}}();l.updateAttachment=function(){var y=d._asyncToGenerator(function*(r,m=this.activeAttachmentInfo){const {_attachmentLayer:D,attachmentInfos:O,
graphic:T,abilities:Q}=this;if(!r)throw new F("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:r});if(!m)throw new F("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:m});if(!Q.operations.update)throw new F("invalid-abilities","updateAttachment(): Update abilities are required.");const N=O.findIndex(P=>P===m);if(!D||"function"!==typeof D.updateAttachment)throw new F("invalid-layer","updateAttachment(): A valid layer is required.");
r=yield D.updateAttachment(T,m.id,r).then(P=>this._queryAttachment(P.objectId));O.splice(N,1,r);return r});return function(r){return y.apply(this,arguments)}}();l._queryAttachment=function(){var y=d._asyncToGenerator(function*(r){if(!r)throw new F("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:m}=this,D=this._getFeatureId();r=new v({objectIds:[D],attachmentsWhere:`AttachmentId=${r}`,returnMetadata:!0});return m.queryAttachments(r).then(O=>O[D][0])});return function(r){return y.apply(this,
arguments)}}();l._getFeatureId=function(){const {_attachmentLayer:y,graphic:r}=this;if(!y||!r)return null;const {objectIdField:m}=y,{attributes:D}=r;return D&&D[m]};l._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};l._setAttachmentLayer=function(){var {graphic:y}=this;this._attachmentLayer=(y=t.getSourceLayer(y))?"scene"===y.type&&A.isSome(y.associatedLayer)?y.associatedLayer:y:null};d._createClass(h,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return h}(G);u.__decorate([K.property()],G.prototype,"abilities",void 0);u.__decorate([k.cast("abilities")],G.prototype,"castAbilities",null);u.__decorate([K.property()],G.prototype,"activeAttachmentInfo",void 0);u.__decorate([K.property({readOnly:!0,type:z})],G.prototype,"attachmentInfos",void 0);u.__decorate([K.property({type:c})],
G.prototype,"graphic",void 0);u.__decorate([K.property()],G.prototype,"mode",void 0);u.__decorate([K.property({readOnly:!0})],G.prototype,"state",null);u.__decorate([K.property({readOnly:!0})],G.prototype,"supportsResizeAttachments",null);return G=u.__decorate([g.subclass("esri.widgets.Attachments.AttachmentsViewModel")],G)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){function k(){k=u._asyncToGenerator(function*(ha,la){return"function"===typeof ha?ha.call(null,la):ha});return k.apply(this,arguments)}function g(ha){return ha?Z.test(ha):!1}function q(ha,la){if(!g(la)||!ha)return null;const wa=la.replace(Z,"").toLowerCase();let za;ha.some(Aa=>Aa.name.toLowerCase()===wa?(za=Aa,!0):!1);return za}function v(ha,la){return(la=t(la,ha))?la.name:ha}function t(ha,la){return ha&&"function"===typeof ha.getField?ha.getField(la):null}function n({formattedAttributes:ha,
template:la,fieldInfoMap:wa}){return`${F.replace(F.replace(la,za=>{{const Aa=wa.get(za.toLowerCase());za=`{${Aa&&Aa.fieldName||za}}`}return za}),ha).replace(H,"")}`.trim()}function z(ha,la,wa=!1){const za=la[ha];"string"===typeof za&&(wa=(wa?encodeURIComponent(za):za).replace(U,"%27"),la[ha]=wa)}function e(ha,la=!1){const wa={...ha};Object.keys(wa).forEach(za=>z(za,wa,la));return wa}function h(ha,la){return ha.replace(I,(wa,za,Aa)=>(wa=t(la,Aa))?`{${wa.name}}`:za)}function l(ha,la,wa){return(ha=h(ha,
wa))?ha.replace(ya,(za,Aa,xa)=>{Aa=`${Aa||xa}`.trim();return F.replace(za,e(la,Aa&&"{"!==Aa[0]))}):ha}function y(ha,la){var wa=la.fieldName,za=r(la.fieldInfos,wa),Aa=null==za?void 0:za.clone();za=la.preventPlacesFormatting;la=la.layer;var xa=t(la,wa);if(Aa&&"date"===(null==xa?void 0:xa.type)){xa=Aa.format||new C;xa.dateFormat=xa.dateFormat||"short-date-short-time";var ba;if(!(ba=!(null!=la&&la.layer)&&"feature"===(null==la?void 0:la.type)&&la.datesInUnknownTimezone)){if(ba=!(null==la||!la.layer))ba=
la.layer,ba="map-image"===(null==ba?void 0:ba.type);ba=ba&&la.layer.datesInUnknownTimezone}xa.dateTimeFormatOptions=ba?{timeZone:"UTC"}:null;Aa.format=xa}Aa=Aa&&Aa.format;if("string"===typeof ha&&K.isRasterPixelValueField(wa)&&Aa)return Aa.formatRasterPixelValue(ha);"string"!==typeof ha||!Aa||null!=Aa.dateFormat||null==Aa.places&&null==Aa.digitSeparator||(wa=Number(ha),isNaN(wa)||(ha=wa));return"string"===typeof ha||null==ha||null==Aa?O(ha):za?L.formatNumber(ha,{...L.convertNumberFormatToIntlOptions(Aa),
minimumFractionDigits:0,maximumFractionDigits:20}):Aa.format(ha)}function r(ha,la){if(ha&&ha.length&&la){var wa=la.toLowerCase(),za=void 0;ha.some(Aa=>Aa.fieldName&&Aa.fieldName.toLowerCase()===wa?(za=Aa,!0):!1);return za}}function m({fieldName:ha,graphic:la,layer:wa}){if(J(ha)||!wa||"function"!==typeof wa.getFeatureType)return null;const {typeIdField:za}=wa;return za&&ha===za?(ha=wa.getFeatureType(la))?ha.name:null:null}function D({fieldName:ha,value:la,graphic:wa,layer:za}){return J(ha)||!za||"function"!==
typeof za.getFieldDomain?null:(ha=za.getFieldDomain(ha,{feature:wa}))&&"coded-value"===ha.type?ha.getName(la):null}function O(ha){return"string"===typeof ha?ha.replace(ea,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ha}function T(ha){const {value:la,fieldName:wa,fieldInfos:za,fieldInfoMap:Aa,layer:xa,graphic:ba}=ha;return null==la?"":(ha=D({fieldName:wa,value:la,graphic:ba,layer:xa}))||(ha=m({fieldName:wa,graphic:ba,layer:xa}))?ha:Aa.get(wa.toLowerCase())?y(la,{fieldInfos:za||Array.from(Aa.values()),
fieldName:wa,layer:xa}):(ha=xa&&xa.fieldsIndex)&&ha.isDateField(wa)?A.formatDate(la,va):O(la)}function Q(ha,la){return N.apply(this,arguments)}function N(){N=u._asyncToGenerator(function*(ha,la){var wa,za;const {layer:Aa,graphic:xa,outFields:ba,objectIds:da,returnGeometry:ia,spatialReference:ja}=ha;ha=da[0];if("number"!==typeof ha&&"string"!==typeof ha)return p.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:Aa,graphic:xa,objectId:ha,requiredFields:ba}),
null;if(null==(wa=Aa.capabilities)||null==(za=wa.operations)||!za.supportsQuery)return p.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:Aa,graphic:xa,requiredFields:ba,returnGeometry:ia}),null;wa=Aa.createQuery();wa.objectIds=da;wa.outFields=null!=ba&&ba.length?ba:[Aa.objectIdField];wa.returnGeometry=!!ia;wa.returnZ=!!ia;wa.returnM=!!ia;wa.outSpatialReference=ja;return(yield Aa.queryFeatures(wa,la)).features[0]});return N.apply(this,arguments)}function P(ha){return w.apply(this,
arguments)}function w(){w=u._asyncToGenerator(function*(ha){var la;if(null==(la=ha.expressionInfos)||!la.length)return!1;la=yield x.loadArcade();({arcadeUtils:{hasGeometryFunctions:la}}=la);return la(ha)});return w.apply(this,arguments)}function E(){E=u._asyncToGenerator(function*({graphic:ha,popupTemplate:la,layer:wa,spatialReference:za},Aa){if(wa&&la&&("function"===typeof wa.load&&(yield wa.load(Aa)),ha.attributes)){var xa=ha.attributes[wa.objectIdField];if(null!=xa){xa=[xa];var ba=yield la.getRequiredFields(wa.fieldsIndex),
da=K.featureHasFields(ba,ha);ba=da?[]:ba;la=la.returnGeometry||(yield P(la));if(!da||la)if(wa=yield Q({layer:wa,graphic:ha,outFields:ba,objectIds:xa,returnGeometry:la,spatialReference:za},Aa))wa.geometry&&(ha.geometry=wa.geometry),wa.attributes&&(ha.attributes={...ha.attributes,...wa.attributes})}}});return E.apply(this,arguments)}function J(ha=""){return ha?ha.includes("relationships/"):!1}function X({attributes:ha,graphic:la,relatedInfo:wa,fieldInfos:za,fieldInfoMap:Aa,layer:xa}){ha&&la&&wa&&Object.keys(la.attributes).forEach(ba=>
{var da=(da={layerId:wa.relation.id.toString(),fieldName:ba},`${"relationships/"}${da.layerId}/${da.fieldName}`);ha[da]=T({fieldName:da,fieldInfos:za,fieldInfoMap:Aa,layer:xa,value:la.attributes[ba],graphic:la})})}function W({attributes:ha,relatedInfo:la,fieldInfoMap:wa,fieldInfos:za,layer:Aa}){ha&&la&&(la.relatedFeatures&&la.relatedFeatures&&la.relatedFeatures.forEach(xa=>X({attributes:ha,graphic:xa,relatedInfo:la,fieldInfoMap:wa,fieldInfos:za,layer:Aa})),la.relatedStatsFeatures&&la.relatedStatsFeatures&&
la.relatedStatsFeatures.forEach(xa=>X({attributes:ha,graphic:xa,relatedInfo:la,fieldInfoMap:wa,fieldInfos:za,layer:Aa})))}const p=G.getLogger("esri.widgets.Feature.support.featureUtils"),H=/href=(""|'')/gi,I=/(\{([^\{\r\n]+)\})/g,U=/'/g,Z=/^\s*expression\//i,ea=/(\n)/gi,ka=/[\u00A0-\u9999<>&]/gim,ya=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,oa=/^(?:mailto:|tel:)/,va=A.convertDateFormatToIntlOptions("short-date-short-time"),ua=ha=>{if(!ha)return!1;ha=ha.toUpperCase();return ha.includes("CURRENT_TIMESTAMP")||
ha.includes("CURRENT_DATE")||ha.includes("CURRENT_TIME")},Ga=({layer:ha,method:la,query:wa,definitionExpression:za})=>{var Aa,xa;null!=(Aa=ha.capabilities)&&null!=(xa=Aa.query)&&xa.supportsCacheHint&&"attachments"!==la&&(ha=f.isSome(wa.where)&&wa.where,la=f.isSome(wa.geometry)&&wa.geometry,ua(za)||ua(ha)||"extent"===(null==la?void 0:la.type)||"tile"===wa.resultType||(wa.cacheHint=!0))};d.applyTextFormattingHTML=O;d.createfieldInfoMap=function(ha,la){const wa=new Map;ha&&ha.forEach(za=>{const Aa=v(za.fieldName,
la);za.fieldName=Aa;wa.set(Aa.toLowerCase(),za)});return wa};d.fixTokens=h;d.formatAttributes=function({fieldInfos:ha,attributes:la,layer:wa,graphic:za,fieldInfoMap:Aa,relatedInfos:xa}){const ba={};null==xa?void 0:xa.forEach(da=>W({attributes:ba,relatedInfo:da,fieldInfoMap:Aa,fieldInfos:ha,layer:wa}));Object.keys(la).forEach(da=>{ba[da]=T({fieldName:da,fieldInfos:ha,fieldInfoMap:Aa,layer:wa,value:la[da],graphic:za})});return ba};d.formatEditInfo=function(ha,la){const {creatorField:wa,creationDateField:za,
editorField:Aa,editDateField:xa}=ha;if(la){ha=la[xa];if("number"===typeof ha)return la=la[Aa],{type:"edit",date:A.formatDate(ha,va),user:la};ha=la[za];return"number"===typeof ha?(la=la[wa],{type:"create",date:A.formatDate(ha,va),user:la}):null}};d.formatValueToFieldInfo=y;d.getAllFieldInfos=function(ha){const la=[];if(!ha)return la;const {fieldInfos:wa,content:za}=ha;wa&&la.push(...wa);if(!za||!Array.isArray(za))return la;za.forEach(Aa=>{"fields"===Aa.type&&(Aa=Aa&&Aa.fieldInfos)&&la.push(...Aa)});
return la};d.getFieldInfo=r;d.getFieldInfoLabel=function(ha,la){return(la=q(la,null==ha?void 0:ha.fieldName))?la.title||null:ha?ha.label||ha.fieldName:null};d.getFixedFieldName=v;d.getFixedFieldNames=function(ha,la){return ha&&ha.map(wa=>v(wa,la))};d.getSourceLayer=function(ha){if(!f.isNone(ha))return ha.get("sourceLayer")||ha.get("layer")};d.graphicCallback=function(ha,la){return k.apply(this,arguments)};d.htmlEntities=function(ha){return ha.replace(ka,la=>`&#${la.charCodeAt(0)};`)};d.isExpressionField=
g;d.isRelatedField=J;d.preLayerQueryCallback=({query:ha,layer:la,method:wa})=>{Ga({layer:la,method:wa,query:ha,definitionExpression:`${la.definitionExpression} ${la.serviceDefinitionExpression}`})};d.preRequestCallback=({queryPayload:ha,layer:la,method:wa})=>{Ga({layer:la,method:wa,query:ha,definitionExpression:`${la.definitionExpression} ${la.serviceDefinitionExpression}`})};d.queryUpdatedFeature=function(ha,la){return E.apply(this,arguments)};d.shouldOpenInNewTab=function(ha=""){if(ha)return!oa.test(ha.trim().toLowerCase())};
d.substituteAttributes=n;d.substituteFieldsInLinksAndAttributes=function({attributes:ha,globalAttributes:la,layer:wa,text:za,expressionAttributes:Aa,fieldInfoMap:xa}){return za?n({formattedAttributes:la,template:l(za,{...la,...Aa,...ha},wa),fieldInfoMap:xa}):""};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(d,u){d.getIconPath=function(c){const G=
u.getAssetUrl("esri/themes/base/images/files/");return c?"text/plain"===c?`${G}text-32.svg`:"application/pdf"===c?`${G}pdf-32.svg`:"text/csv"===c?`${G}csv-32.svg`:"application/gpx+xml"===c?`${G}gpx-32.svg`:"application/x-dwf"===c?`${G}cad-32.svg`:"application/postscript"===c||"application/json"===c||"text/xml"===c||"model/vrml"===c?`${G}code-32.svg`:"application/x-zip-compressed"===c||"application/x-7z-compressed"===c||"application/x-gzip"===c||"application/x-tar"===c||"application/x-gtar"===c||"application/x-bzip2"===
c||"application/gzip"===c||"application/x-compress"===c||"application/x-apple-diskimage"===c||"application/x-rar-compressed"===c||"application/zip"===c?`${G}zip-32.svg`:c.includes("image/")?`${G}image-32.svg`:c.includes("audio/")?`${G}sound-32.svg`:c.includes("video/")?`${G}video-32.svg`:c.includes("msexcel")||c.includes("ms-excel")||c.includes("spreadsheetml")?`${G}excel-32.svg`:c.includes("msword")||c.includes("ms-word")||c.includes("wordprocessingml")?`${G}word-32.svg`:c.includes("powerpoint")||
c.includes("presentationml")?`${G}report-32.svg`:`${G}generic-32.svg`:`${G}generic-32.svg`};d.isSupportedImage=function(c){c=c.toLowerCase();return"image/bmp"===c||"image/emf"===c||"image/exif"===c||"image/gif"===c||"image/x-icon"===c||"image/jpeg"===c||"image/png"===c||"image/tiff"===c||"image/x-wmf"===c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(d,u,c,G,f,F,A,L){G=function(K){function C(x){x=K.call(this,x)||this;x.description=null;x.title=null;return x}d._inheritsLoose(C,K);return C}(L);u.__decorate([c.property()],G.prototype,"description",void 0);u.__decorate([c.property()],G.prototype,"title",void 0);return G=u.__decorate([A.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],G)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){G=function(k){function g(v,t){v=k.call(this,v,t)||this;v.description=null;v.headingLevel=2;v.title=null;return v}d._inheritsLoose(g,k);var q=g.prototype;q.render=function(){return x.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};q.renderTitle=function(){const {title:v}=this;return v?x.tsx(K.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},v):null};q.renderDescription=function(){const {description:v}=
this;return v?x.tsx("div",{key:"description",class:"esri-feature-element-info__description"},v):null};return g}(L);u.__decorate([c.property()],G.prototype,"description",void 0);u.__decorate([c.property()],G.prototype,"headingLevel",void 0);u.__decorate([c.property()],G.prototype,"title",void 0);return G=u.__decorate([A.subclass("esri.widgets.Feature.support.FeatureElementInfo")],G)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(d,u,c,G){const f={heading:"esri-widget__heading"};d.CSS=f;d.Heading=function(F,A){const L=u.clamp(Math.ceil(F.level),1,6),K=`h${L}`;delete F.level;return G.tsx(K,{...F,class:c.classes(f.heading,F.class),role:"heading","aria-level":String(L)},A)};d.incrementHeadingLevel=function(F,A=1){return u.clamp(Math.ceil(F+A),1,6)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){G=function(q){function v(n,z){n=q.call(this,n,z)||this;n.creator=null;n.graphic=null;n.viewModel=null;n._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach(h=>{x.shouldOpenInNewTab(h.href)&&!h.hasAttribute("target")&&h.setAttribute("target","_blank")})};return n}d._inheritsLoose(v,q);var t=v.prototype;t.renderLoading=function(){return g.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},g.tsx("div",{class:"esri-feature-content__loader"}))};
t.renderCreated=function(){var n;const z=null==(n=this.viewModel)?void 0:n.created;return z?z instanceof HTMLElement?g.tsx("div",{key:z,bind:z,afterCreate:this._attachToNode}):k.isWidget(z)?g.tsx("div",{key:z},!z.destroyed&&z.render()):g.tsx("div",{key:z,innerHTML:z,afterCreate:this._addTargetToAnchors}):null};t.render=function(){var n;const z=null==(n=this.viewModel)?void 0:n.state;return g.tsx("div",{class:"esri-feature-content"},"loading"===z?this.renderLoading():this.renderCreated())};t._attachToNode=
function(n){n.appendChild(this)};return v}(K);u.__decorate([c.aliasOf("viewModel.creator")],G.prototype,"creator",void 0);u.__decorate([c.aliasOf("viewModel.graphic")],G.prototype,"graphic",void 0);u.__decorate([A.property({type:C})],G.prototype,"viewModel",void 0);return G=u.__decorate([L.subclass("esri.widgets.Feature.FeatureContent")],G)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k){G=function(g){function q(t){var n=g.call(this,t)||this;n._loadingPromise=null;n.created=null;n.creator=null;n.destroyer=null;n.graphic=null;n.handles.add(F.watch(()=>n.creator,z=>{n._destroyContent();n._createContent(z)},F.initial));return n}d._inheritsLoose(q,g);var v=q.prototype;v.destroy=function(){this._destroyContent()};v._destroyContent=function(){const {created:t,graphic:n,destroyer:z}=this;t&&(k.graphicCallback(z,{graphic:n}).catch(()=>null),this._set("created",
null))};v._createContent=function(){var t=d._asyncToGenerator(function*(n){var {graphic:z}=this;this._loadingPromise=n=k.graphicCallback(n,{graphic:z}).catch(()=>null);this.notifyChange("state");z=yield n;n===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",z))});return function(n){return t.apply(this,arguments)}}();d._createClass(q,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return q}(f.HandleOwnerMixin(G));u.__decorate([A.property({readOnly:!0})],
G.prototype,"created",void 0);u.__decorate([A.property()],G.prototype,"creator",void 0);u.__decorate([A.property()],G.prototype,"destroyer",void 0);u.__decorate([A.property({type:c})],G.prototype,"graphic",void 0);u.__decorate([A.property({readOnly:!0})],G.prototype,"state",null);return G=u.__decorate([x.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],G)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v){f=function(t){function n(e,h){e=t.call(this,e,h)||this;e.viewModel=new g;return e}d._inheritsLoose(n,t);var z=n.prototype;z.initialize=function(){this.own(c.watch(()=>{var e;return null==(e=this.viewModel)?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),c.initial))};z.destroy=function(){this._destroyContentWidget()};z.renderLoading=function(){return v.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},v.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};z.render=function(){var e;const {state:h}=this.viewModel;return v.tsx("div",{class:"esri-feature-expression"},"loading"===h?this.renderLoading():"disabled"===h?null:null==(e=this._contentWidget)?void 0:e.render())};z._destroyContentWidget=function(){const {_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy());this._contentWidget=null};z._setupExpressionWidget=function(){const {contentElementViewModel:e,
contentElement:h}=this.viewModel,l=null==h?void 0:h.type;this._destroyContentWidget();this._contentWidget=e?"fields"===l?new x({viewModel:e}):"media"===l?new k({viewModel:e}):"text"===l?new C({viewModel:e}):null:null;this.scheduleRender()};return n}(K);u.__decorate([G.property({type:g})],f.prototype,"viewModel",void 0);return f=u.__decorate([L.subclass("esri.widgets.Feature.FeatureExpression")],f)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t){f=function(n){function z(h,l){h=n.call(this,h,l)||this;h._featureElementInfo=null;h.attributes=null;h.description=null;h.expressionInfos=null;h.fieldInfos=null;h.title=null;h.viewModel=new x;h.messages=null;h.messagesURIUtils=null;return h}d._inheritsLoose(z,n);var e=z.prototype;e.initialize=function(){this._featureElementInfo=new k;this.own(c.watch(()=>{var h,l;return[null==(h=this.viewModel)?void 0:h.description,null==(l=this.viewModel)?void 0:l.title]},
()=>this._setupFeatureElementInfo(),c.initial))};e.destroy=function(){this._featureElementInfo.destroy()};e.renderFieldInfo=function(h,l){var {attributes:y}=this.viewModel;const r=h.fieldName,m=h.label||r;y=y?null==y[r]?"":y[r]:"";h=!(!h.format||!h.format.dateFormat);y="number"!==typeof y||h?g.autoLink(this.messagesURIUtils,y):this._forceLTR(y);h={["esri-feature-fields__field-data--date"]:h};return t.tsx("tr",{key:`fields-element-info-row-${r}-${l}`},t.tsx("th",{key:`fields-element-info-row-header-${r}-${l}`,
class:"esri-feature-fields__field-header",innerHTML:m}),t.tsx("td",{key:`fields-element-info-row-data-${r}-${l}`,class:this.classes("esri-feature-fields__field-data",h),innerHTML:y}))};e.renderFields=function(){const {formattedFieldInfos:h}=this.viewModel;return null!=h&&h.length?t.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},t.tsx("tbody",null,h.map((l,y)=>this.renderFieldInfo(l,y)))):null};e.render=function(){var h;return t.tsx("div",{class:"esri-feature-fields"},
null==(h=this._featureElementInfo)?void 0:h.render(),this.renderFields())};e._setupFeatureElementInfo=function(){const {description:h,title:l}=this;this._featureElementInfo.set({description:h,title:l})};e._forceLTR=function(h){return`&lrm;${h}`};return z}(C);u.__decorate([G.aliasOf("viewModel.attributes")],f.prototype,"attributes",void 0);u.__decorate([G.aliasOf("viewModel.description")],f.prototype,"description",void 0);u.__decorate([G.aliasOf("viewModel.expressionInfos")],f.prototype,"expressionInfos",
void 0);u.__decorate([G.aliasOf("viewModel.fieldInfos")],f.prototype,"fieldInfos",void 0);u.__decorate([G.aliasOf("viewModel.title")],f.prototype,"title",void 0);u.__decorate([L.property({type:x})],f.prototype,"viewModel",void 0);u.__decorate([L.property(),v.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);u.__decorate([L.property(),v.messageBundle("esri/widgets/support/t9n/uriUtils")],f.prototype,"messagesURIUtils",void 0);return f=u.__decorate([K.subclass("esri.widgets.Feature.FeatureFields")],
f)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),function(d,u,c,G,f,F,A,L,K,C,x){c=function(k){function g(q){q=
k.call(this,q)||this;q.attributes=null;q.expressionInfos=null;q.description=null;q.fieldInfos=null;q.title=null;return q}d._inheritsLoose(g,k);d._createClass(g,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:q,fieldInfos:v}=this,t=[];null==v?void 0:v.forEach(n=>{if(!n.hasOwnProperty("visible")||n.visible)n=n.clone(),n.label=x.getFieldInfoLabel(n,q),t.push(n)});return t}}]);return g}(c);u.__decorate([G.property()],c.prototype,"attributes",void 0);u.__decorate([G.property({type:[K]})],
c.prototype,"expressionInfos",void 0);u.__decorate([G.property()],c.prototype,"description",void 0);u.__decorate([G.property({type:[C]})],c.prototype,"fieldInfos",void 0);u.__decorate([G.property({readOnly:!0})],c.prototype,"formattedFieldInfos",null);u.__decorate([G.property()],c.prototype,"title",void 0);return c=u.__decorate([L.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],c)})},"esri/widgets/support/uriUtils":function(){define(["exports","../../core/string"],function(d,
u){function c(f){let F=null;G.some(A=>{A.pattern.test(f)&&(F=A);return!!F});return F}const G=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},
{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},
{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];d.autoLink=function(f,F){if("string"!==typeof F||!F)return F;const A=c(F);if(!A)return F;const L=F.match(A.pattern);f=u.replace(u.replace(A.label,
{messages:f,hierPart:L&&L[2]}),{appName:A.appName});return F.replace(A.pattern,`<a${A.target?` target="${A.target}"`:""} href="$1"${"_blank"===A.target?' rel\x3d"noreferrer"':""}>${f}</a>`)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h){F=function(l){function y(m,D){var O=l.call(this,m,D)||this;O._refreshTimer=null;O._refreshIntervalInfo=null;O._featureElementInfo=null;O.attributes=null;O.activeMediaInfoIndex=null;O.description=null;O.fieldInfoMap=null;O.layer=null;O.mediaInfos=null;O.popupTemplate=null;O.relatedInfos=null;O.title=null;O.viewModel=new g;O.messages=null;O._getChartDependencies=function(){var T=d._asyncToGenerator(function*(Q){const N=yield t.loadChartsModule(),{destroyed:P,
viewModel:w}=d._assertThisInitialized(O);if(!P&&w&&Q){var {activeMediaInfo:E}=w,J=yield O._getRendererColors(N);O._renderChart({chartDiv:Q,mediaInfo:E,chartsModule:N,colorMap:J})}});return function(Q){return T.apply(this,arguments)}}();return O}d._inheritsLoose(y,l);var r=y.prototype;r.initialize=function(){this._featureElementInfo=new q;this.own([G.watch(()=>{var m,D;return[null==(m=this.viewModel)?void 0:m.activeMediaInfo,null==(D=this.viewModel)?void 0:D.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),
G.initial),G.watch(()=>{var m,D;return[null==(m=this.viewModel)?void 0:m.description,null==(D=this.viewModel)?void 0:D.title]},()=>this._setupFeatureElementInfo(),G.initial)])};r.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};r.render=function(){var m;return e.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(m=this._featureElementInfo)?void 0:m.render(),this.renderMedia())};r.renderMedia=function(){const {formattedMediaInfoCount:m}=
this.viewModel;return m?e.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};r.renderImageMediaInfo=function(m){var {_refreshIntervalInfo:D}=this;const {activeMediaInfoIndex:O,formattedMediaInfoCount:T}=this.viewModel,{value:Q,refreshInterval:N,altText:P,title:w,type:E}=m,{sourceURL:J,linkURL:X}=Q;m=v.shouldOpenInNewTab(X)?"_blank":"_self";const W="_blank"===m?"noreferrer":
"";D=N?D:null;D=e.tsx("img",{alt:P||w,key:`media-${E}-${O}-${T}-${D?D.timestamp:0}`,src:D?D.sourceURL:J});return(m=X?e.tsx("a",{title:w,href:X,rel:W,target:m},D):null)?m:D};r.renderChartMediaInfo=function(m){const {activeMediaInfoIndex:D,formattedMediaInfoCount:O}=this.viewModel;return e.tsx("div",{key:`media-${m.type}-${D}-${O}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};r.renderMediaInfoType=function(){const {activeMediaInfo:m}=this.viewModel;return m?
"image"===m.type?this.renderImageMediaInfo(m):m.type.includes("chart")?this.renderChartMediaInfo(m):null:null};r.renderMediaInfo=function(){var {activeMediaInfo:m}=this.viewModel;if(!m)return null;const D=m.title?e.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:m.title}):null;m=m.caption?e.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:m.caption}):null;return e.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
e.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),D,m)};r.renderMediaPageButton=function(m){if(2>this.viewModel.formattedMediaInfoCount)return null;const D=(m="previous"===m)?this.messages.previous:this.messages.next,O=m?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),T=m?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),Q=m?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return e.tsx("button",{type:"button",key:m?"media-previous":"media-next",title:D,"aria-label":D,tabIndex:0,class:O,bind:this,onclick:m?this._previous:this._next},e.tsx("span",
{"aria-hidden":"true",class:T}),e.tsx("span",{"aria-hidden":"true",class:Q}))};r._setupFeatureElementInfo=function(){const {description:m,title:D}=this;this._featureElementInfo.set({description:m,title:D})};r._next=function(){this.viewModel.next()};r._previous=function(){this.viewModel.previous()};r._getRendererColors=function(){var m=d._asyncToGenerator(function*(D){var O;const {am4core:T}=D;D=null==(O=this.viewModel)?void 0:O.layer;const Q=new Map;if(!D)return Q;const N=yield x.getColorsFromRenderer(D.renderer);
N.delete(null);if(!Array.from(N.values()).every(P=>1===(null==P?void 0:P.length)))return Q;Q.set("default-line-value",T.color({r:50,g:50,b:50,a:1}));Array.from(N.keys()).forEach(P=>{P&&Q.set(P,T.color(N.get(P)[0].toCss(!0)))});return Q});return function(D){return m.apply(this,arguments)}}();r._handleMediaKeyup=function(m){const D=c.eventKey(m);"ArrowLeft"===D&&(m.stopPropagation(),this.viewModel.previous());"ArrowRight"===D&&(m.stopPropagation(),this.viewModel.next())};r._renderChart=function(m){const {abilities:D}=
this.viewModel,{chartsModule:O,chartDiv:T,mediaInfo:Q,colorMap:N}=m,{value:P,type:w}=Q,{am4core:E}=O,J=t.getColorSet(E);h.isDarkTheme()&&E.useTheme(O.am4themes_dark);const X=window.matchMedia("(prefers-reduced-motion: reduce)");D.chartAnimation&&!X.matches?E.useTheme(O.am4themes_animated):E.unuseTheme(O.am4themes_animated);E.useTheme(function(W){W instanceof E.ColorSet&&J&&(W.list=J)});m="pie-chart"===w?this._createPieChart(m):this._createXYChart(m);T.setAttribute("aria-label",Q.altText||Q.title);
m.data=P.series.map(W=>({["tooltip"]:W.tooltip,["value"]:W.value,["color"]:N.get(W.fieldName)})).filter(W=>"pie-chart"===w?0<W.value:!0)};r._customizeChartTooltip=function(m,D){m.label.wrap=!0;m.label.maxWidth=200;m.autoTextColor=!1;m.getFillFromObject=!1;m.label.fill=D.color("#ffffff");m.background.fill=D.color({r:0,g:0,b:0,a:.7})};r._createPieChart=function(m){const {chartDiv:D,chartsModule:O}=m,{am4core:T,am4charts:Q}=O;m=T.create(D,Q.PieChart);m.rtl=n.isRTL(this.container);const N=m.series.push(new Q.PieSeries);
N.labels.template.disabled=!0;N.ticks.template.disabled=!0;N.dataFields.value="value";N.dataFields.category="tooltip";this._customizeChartTooltip(N.tooltip,T);N.slices.template.tooltipText=m.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";N.slices.template.propertyFields.fill="color";N.slices.template.propertyFields.stroke="color";return m};r._getMinSeriesValue=function(m){let D=0;m.forEach(O=>D=Math.min(O.value,D));return D};r._createColumnChart=
function(m,D){const {chartsModule:O,mediaInfo:T}=D;({value:D}=T);const {am4core:Q,am4charts:N}=O,P=m.xAxes.push(new N.CategoryAxis);P.dataFields.category="tooltip";P.renderer.labels.template.disabled=!0;this._customizeChartTooltip(P.tooltip,Q);P.tooltip.events.on("sizechanged",()=>{P.tooltip.dy=-P.tooltip.contentHeight});var w=m.yAxes.push(new N.ValueAxis);const E=w.renderer.labels.template;w.renderer.minLabelPosition=.05;w.renderer.maxLabelPosition=.95;w.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(w.tooltip,
Q);E.wrap=!0;w=m.series.push(new N.ColumnSeries);w.dataFields.valueY="value";w.dataFields.categoryX="tooltip";w.columns.template.propertyFields.fill="color";w.columns.template.propertyFields.stroke="color";m.cursor=new N.XYCursor;15<D.series.length&&(m.scrollbarX=new Q.Scrollbar)};r._createBarChart=function(m,D){const {chartsModule:O,mediaInfo:T}=D;({value:D}=T);const {am4core:Q,am4charts:N}=O,P=m.yAxes.push(new N.CategoryAxis);P.dataFields.category="tooltip";P.renderer.inversed=!0;P.renderer.labels.template.disabled=
!0;this._customizeChartTooltip(P.tooltip,Q);P.tooltip.events.on("sizechanged",()=>{P.tooltip.dx=P.tooltip.contentWidth});var w=m.xAxes.push(new N.ValueAxis);const E=w.renderer.labels.template;w.renderer.minLabelPosition=.05;w.renderer.maxLabelPosition=.95;w.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(w.tooltip,Q);E.wrap=!0;w=m.series.push(new N.ColumnSeries);w.dataFields.valueX="value";w.dataFields.categoryY="tooltip";w.columns.template.propertyFields.fill="color";w.columns.template.propertyFields.stroke=
"color";m.cursor=new N.XYCursor;15<D.series.length&&(m.scrollbarY=new Q.Scrollbar)};r._createLineChart=function(m,D){const {chartsModule:O,mediaInfo:T,colorMap:Q}=D;({value:D}=T);const {am4core:N,am4charts:P}=O,w=m.xAxes.push(new P.CategoryAxis);w.dataFields.category="tooltip";w.renderer.labels.template.disabled=!0;this._customizeChartTooltip(w.tooltip,N);w.tooltip.events.on("sizechanged",()=>{w.tooltip.dy=-w.tooltip.contentHeight});var E=m.yAxes.push(new P.ValueAxis),J=E.renderer.labels.template;
E.renderer.minLabelPosition=.05;E.renderer.maxLabelPosition=.95;E.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(E.tooltip,N);J.wrap=!0;E=m.series.push(new P.LineSeries);E.dataFields.categoryX="tooltip";E.dataFields.valueY="value";E.strokeWidth=1;if(J=Q.get("default-line-value"))E.stroke=J;E=E.bullets.push(new P.CircleBullet);E.propertyFields.fill="color";E.propertyFields.stroke="color";m.cursor=new P.XYCursor;15<D.series.length&&(m.scrollbarX=new N.Scrollbar)};r._createXYChart=
function(m){const {chartDiv:D,chartsModule:O,mediaInfo:T}=m,{type:Q}=T,{am4core:N,am4charts:P}=O,w=N.create(D,P.XYChart);w.rtl=n.isRTL(this.container);"column-chart"===Q&&this._createColumnChart(w,m);"bar-chart"===Q&&this._createBarChart(w,m);"line-chart"===Q&&this._createLineChart(w,m);return w};r._clearMediaRefreshTimer=function(){const {_refreshTimer:m}=this;m&&(clearTimeout(m),this._refreshTimer=null)};r._updateMediaInfoTimestamp=function(m){const D=Date.now();this._refreshIntervalInfo={timestamp:D,
sourceURL:this._getImageSource(m,D)};this.scheduleRender()};r._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:m}=this.viewModel;m&&"image"===m.type&&m.refreshInterval&&this._setRefreshTimeout(m)};r._setRefreshTimeout=function(m){const {refreshInterval:D,value:O}=m;D&&(m=6E4*D,this._updateMediaInfoTimestamp(O.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(O.sourceURL)},m))};r._getImageSource=function(m,D){const O=m.includes("?")?
"\x26":"?",[T,Q=""]=m.split("#");return`${T}${O}timestamp=${D}${Q?"#":""}${Q}`};return y}(k);u.__decorate([f.aliasOf("viewModel.attributes")],F.prototype,"attributes",void 0);u.__decorate([f.aliasOf("viewModel.activeMediaInfoIndex")],F.prototype,"activeMediaInfoIndex",void 0);u.__decorate([f.aliasOf("viewModel.description")],F.prototype,"description",void 0);u.__decorate([f.aliasOf("viewModel.fieldInfoMap")],F.prototype,"fieldInfoMap",void 0);u.__decorate([f.aliasOf("viewModel.layer")],F.prototype,
"layer",void 0);u.__decorate([f.aliasOf("viewModel.mediaInfos")],F.prototype,"mediaInfos",void 0);u.__decorate([f.aliasOf("viewModel.popupTemplate")],F.prototype,"popupTemplate",void 0);u.__decorate([f.aliasOf("viewModel.relatedInfos")],F.prototype,"relatedInfos",void 0);u.__decorate([f.aliasOf("viewModel.title")],F.prototype,"title",void 0);u.__decorate([K.property({type:g})],F.prototype,"viewModel",void 0);u.__decorate([K.property(),z.messageBundle("esri/widgets/Feature/t9n/Feature")],F.prototype,
"messages",void 0);return F=u.__decorate([C.subclass("esri.widgets.Feature.FeatureMedia")],F)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(d,u,c,G,f,F,A,L,K,C,x){function k(l,y,r){f.getOrCreateMapValue(l,
y,()=>[]).push(...r)}function g(){g=u._asyncToGenerator(function*(l){const y=new Map;if("visualVariables"in l&&l.visualVariables){var r=l.visualVariables.filter(O=>"color"===O.type);for(const O of r){r=O.field||O.valueExpression;const T=(yield C.getRampStops(O)).map(Q=>Q.color);k(y,r,T)}}if("heatmap"===l.type){var m=x.getHeatmapRampStops(l).map(O=>O.color);k(y,l.field,m)}else if("pie-chart"===l.type){for(const O of l.attributes)k(y,O.field,[O.color]);k(y,null,[null==l?void 0:null==(m=l.othersCategory)?
void 0:m.color,K.getColorFromSymbol(l.backgroundFillSymbol,null)])}else if("dot-density"===l.type){for(const O of l.attributes)k(y,O.field,[O.color]);k(y,null,[l.backgroundColor])}else if("unique-value"===l.type){var D;if("predominance"===(null==(D=l.authoringInfo)?void 0:D.type))for(const O of l.uniqueValueInfos)k(y,O.value.toString(),[K.getColorFromSymbol(O.symbol,null)]);else{m=l.uniqueValueInfos.map(P=>K.getColorFromSymbol(P.symbol,null));const {field:O,field2:T,field3:Q,valueExpression:N}=l;
(O||N)&&k(y,O||N,m);T&&k(y,T,m);Q&&k(y,Q,m)}}else"class-breaks"===l.type?(m=l.classBreakInfos.map(O=>K.getColorFromSymbol(O.symbol,null)),k(y,l.field||l.valueExpression,m)):"simple"===l.type&&k(y,null,[K.getColorFromSymbol(l.symbol,null)]);"defaultSymbol"in l&&l.defaultSymbol&&k(y,null,[K.getColorFromSymbol(l.defaultSymbol,null)]);y.forEach((O,T)=>{O=c.unique(O.filter(Boolean),(Q,N)=>JSON.stringify(Q)===JSON.stringify(N));y.set(T,O)});return y});return g.apply(this,arguments)}function q(l,y,r){let m=
"";0===y?m=z.lt+" ":y===r&&(m=z.gt+" ");return m+l}function v(l){let y=l.minValue,r=l.maxValue;const m=l.isFirstBreak?"":z.gt+" ";l="percent-of-total"===l.normalizationType?z.pct:"";y=null==y?"":A.format(y);r=null==r?"":A.format(r);return m+y+l+" "+z.ld+" "+r+l}function t(l,y){return"normalizationField"in l&&l.normalizationField?{type:"normalized-field",field:l.field,normalizationField:l.normalizationField}:"field"in l&&l.field?{type:"field",field:l.field}:"valueExpression"in l&&l.valueExpression?
{type:"expression",expression:l.valueExpression,title:l.valueExpressionTitle,returnType:y}:null}const n=G.getLogger("esri.renderers.support.utils"),z={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},e={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},h={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};G=F.convertDateFormatToIntlOptions("short-date");d.calculateDateFormatInterval=function(l){l=l.map(O=>new Date(O));const y=l.length;let r=Infinity,m=null;for(let O=0;O<y-1;O++){const T=l[O];let Q=Infinity,N=null;for(let P=O+1;P<y;P++){var D=l[P];D=T.getFullYear()!==D.getFullYear()&&"year"||T.getMonth()!==D.getMonth()&&"month"||T.getDate()!==D.getDate()&&"day"||T.getHours()!==D.getHours()&&"hour"||T.getMinutes()!==D.getMinutes()&&"minute"||T.getSeconds()!==D.getSeconds()&&"second"||"millisecond";
const w=e[D];w<Q&&(Q=w,N=D)}Q<r&&(r=Q,m=N)}return m};d.createClassBreakLabel=v;d.createColorStops=function(l){const {values:y,colors:r,labelIndexes:m,isDate:D,dateFormatOptions:O}=l;return y.map((T,Q)=>{let N=null;if(!m||m.includes(Q)){let P;(P=D?F.formatDate(T,O):A.format(T))&&(N=q(P,Q,y.length-1))}return new L({value:T,color:r[Q],label:N})})};d.createUniqueValueLabel=function(l){const {value:y,domain:r,fieldInfo:m,dateFormatInterval:D}=l;l=String(y);const O=r&&"codedValues"in r&&r.codedValues?r.getName(y):
null;O?l=O:"number"===typeof y&&(l=m&&"date"===m.type?F.formatDate(y,D&&F.convertDateFormatToIntlOptions(h[D])):A.format(y));return l};d.getAttribute=t;d.getAttributes=function(l,y){const r=[];if("class-breaks"===l.type||"heatmap"===l.type)r.push(t(l,"number"));else if("unique-value"===l.type){var m=l.authoringInfo;if(m&&"relationship"===m.type){if(m.field1&&m.field2){var D=m.field2.field;const O=m.field2.normalizationField;r.push(t({field:m.field1.field,normalizationField:m.field1.normalizationField}));
r.push(t({field:D,normalizationField:O}))}}else D=l.uniqueValueInfos[0],m=null,D&&D.value&&(D=typeof l.uniqueValueInfos[0].value,"string"===D||"number"===D)&&(m=D),r.push(t(l,m)),[l.field2,l.field3].forEach(O=>O&&r.push({type:"field",field:O}))}else"attributes"in l&&l.attributes.forEach(O=>r.push(t(O,"number")));(l=y?y(l):"visualVariables"in l?l.visualVariables:null)&&l.forEach(O=>r.push(t(O,"number")));return c.unique(r.filter(Boolean),(O,T)=>"field"===O.type&&"field"===T.type?O.field===T.field:
"normalized-field"===O.type&&"normalized-field"===T.type?O.field===T.field&&O.normalizationField===T.normalizationField:"expression"===O.type&&"expression"===T.type?O.expression===T.expression:!1)};d.getColorsFromRenderer=function(l){return g.apply(this,arguments)};d.setLabelsForClassBreaks=function(l){const y=l.classBreakInfos,r=l.normalizationType;let m=[];if(y&&y.length)if("standard-deviation"===l.classificationMethod)n.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(l.round){m.push(y[0].minValue);for(const D of y)m.push(D.maxValue);m=A.round(m);y.forEach((D,O)=>{D.label=v({minValue:0===O?m[0]:m[O],maxValue:m[O+1],isFirstBreak:0===O,normalizationType:r})})}else y.forEach((D,O)=>{D.label=v({minValue:D.minValue,maxValue:D.maxValue,isFirstBreak:0===O,normalizationType:r})})};d.timelineDateFormatOptions=G;d.updateClassBreak=function(l){if("standard-deviation"===l.classificationMethod)n.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var y=l.classBreaks,r=l.change,m=r.index;r=r.value;var D=y.length,O=-1,T=-1;0===m?O=m:m===D?T=m-1:(T=m-1,O=m);l=l.normalizationType;m=null;-1<O&&O<D&&(m=y[O],m.minValue=r,m.label=v({minValue:m.minValue,maxValue:m.maxValue,isFirstBreak:0===O,normalizationType:l}));-1<T&&T<D&&(m=y[T],m.maxValue=r,m.label=v({minValue:m.minValue,maxValue:m.maxValue,isFirstBreak:0===T,normalizationType:l}))}};d.updateColorStops=function(l){const {stops:y,changes:r,isDate:m,dateFormatOptions:D}=l,O=y.map(Q=>Q.value);
l=[];for(const Q of r)l.push(Q.index),O[Q.index]=Q.value;const T=A.round(O,{indexes:l});y.forEach((Q,N)=>{Q.value=O[N];if(null!=Q.label){let P,w=null;(P=m?F.formatDate(T[N],D):A.format(T[N]))&&(w=q(P,N,y.length-1));Q.label=w}})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(d,u,c){function G(x,k){return x-k}function f(x,k){let g;g=Number(x.toFixed(k));
g<x?x=g+1/10**k:(x=g,g-=1/10**k);g=Number(g.toFixed(k));x=Number(x.toFixed(k));return[g,x]}function F(x,k,g,q,v){x=L(x,k,g,q);k=null==x.next||x.next<=v;return(null==x.previous||x.previous<=v)&&k||x.previous+x.next<=2*v}function A(x){x=String(x);var k=x.match(K);if(k&&k[1])return{integer:k[1].split("").length,fractional:k[3]?k[3].split("").length:0};if(x.toLowerCase().includes("e")&&(k=x.split("e"),x=k[0],k=k[1],x&&k)){x=Number(x);k=Number(k);const g=0<k;g||(k=Math.abs(k));x=A(x);g?(x.integer+=k,x.fractional=
k>x.fractional?0:x.fractional-k):(x.fractional+=k,x.integer=k>x.integer?1:x.integer-k);return x}return{integer:0,fractional:0}}function L(x,k,g,q){const v={previous:null,next:null};if(null!=g){const t=x-g;v.previous=Math.floor(Math.abs(100*(k-g-t)/t))}null!=q&&(x=q-x,v.next=Math.floor(Math.abs(100*(q-k-x)/x)));return v}const K=/^-?(\d+)(\.(\d+))?$/i,C={maximumFractionDigits:20};d.format=function(x){return c.formatNumber(x,C)};d.numDigits=A;d.percentChange=L;d.round=function(x,k={}){x=x.slice(0);const {tolerance:g=
2,strictBounds:q=!1,indexes:v=x.map((n,z)=>z)}=k;v.sort(G);for(k=0;k<v.length;k++){const n=v[k],z=x[n],e=0===n?null:x[n-1],h=n===x.length-1?null:x[n+1],l=A(z).fractional;if(l){let y=0,r=!1;for(var t=void 0;y<=l&&!r;)t=f(z,y),t=q&&0===k?t[1]:t[0],r=F(z,t,e,h,g),y++;r&&(x[n]=t)}}return x};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){function q(w){w=w.symbolLayers;if(!w)return null;let E=null;w.forEach(J=>{if("object"!==J.type||null==J.resource.href)E="water"===J.type?L.unwrap(J.color):L.isSome(J.material)?L.unwrap(J.material.color):null});return E?new G(E):null}function v(w,E){if(null==E)return w;w=w.toRgba();w[3]*=E;return new G(w)}function t(w,E,J){if(w=w.symbolLayers){var X=W=>{W=L.isSome(W)?W:null;E=E||W||null!=J&&P;return v(E,J)};w.forEach(W=>{if("object"!==W.type||null==W.resource.href||
E)if("water"===W.type)W.color=X(W.color);else{var p=L.isSome(W.material)?W.material.color:null;p=X(p);L.isNone(W.material)?W.material=new g.Symbol3DMaterial({color:p}):W.material.color=p;null!=J&&"outline"in W&&L.isSome(W.outline)&&L.isSome(W.outline.color)&&(W.outline.color=v(W.outline.color,J))}})}}function n(w,E){return z.apply(this,arguments)}function z(){z=c._asyncToGenerator(function*(w,E){(w=w.symbolLayers)&&(yield F.forEach(w,function(){var J=c._asyncToGenerator(function*(X){return e(X,E)});
return function(X){return J.apply(this,arguments)}}()))});return z.apply(this,arguments)}function e(w,E){return h.apply(this,arguments)}function h(){h=c._asyncToGenerator(function*(w,E){switch(w.type){case "extrude":w.size="number"===typeof E[2]?E[2]:0;break;case "icon":case "line":case "text":E=l(E);L.isSome(E)&&(w.size=E);break;case "path":{const J=m(E,C.ONES,[w.width,void 0,w.height]);w.width=T(E[0],w.width,1,J);w.height=T(E[2],w.height,1,J)}break;case "object":yield y(w,E)}});return h.apply(this,
arguments)}function l(w){for(const E of w)if("number"===typeof E)return E;return null}function y(w,E){return r.apply(this,arguments)}function r(){r=c._asyncToGenerator(function*(w,E){const {resourceSize:J,symbolSize:X}=yield D(w),W=m(E,J,X);w.width=T(E[0],X[0],J[0],W);w.depth=T(E[1],X[1],J[1],W);w.height=T(E[2],X[2],J[2],W)});return r.apply(this,arguments)}function m(w,E,J){for(let X=0;3>X;X++){const W=w[X];switch(W){case "symbol-value":return null!=J[X]?J[X]/E[X]:1;case "proportional":break;default:if(W&&
E[X])return W/E[X]}}return 1}function D(w){return O.apply(this,arguments)}function O(){O=c._asyncToGenerator(function*(w){const E=yield(yield new Promise((I,U)=>d(["./symbolLayerUtils"],I,U))).computeObjectLayerResourceSize(w,10),{width:J,height:X,depth:W}=w;w=[J,W,X];let p=1;for(var H=0;3>H;H++)if(null!=w[H]){p=w[H]/E[H];break}for(H=0;3>H;H++)null==w[H]&&(w[H]=E[H]*p);return{resourceSize:E,symbolSize:w}});return O.apply(this,arguments)}function T(w,E,J,X){switch(w){case "proportional":return J*X;
case "symbol-value":return null!=E?E:J;default:return w}}function Q(){Q=c._asyncToGenerator(function*(w,E){if(w&&E){if(f.isSymbol3D(w))return n(w,E);if(f.isSymbol2D(w)&&(E=l(E),!L.isNone(E)))switch(w.type){case "simple-marker":w.size=E;break;case "picture-marker":{const J=w.width/w.height;1<J?(w.width=E,w.height=E*J):(w.width=E*J,w.height=E);break}case "simple-line":w.width=E;break;case "text":w.font.size=E}}});return Q.apply(this,arguments)}const N=/\/resource\/(.*?)\.svg$/,P=new G("white");u.applyColorToSymbol=
function(w,E,J){if(w&&(E||null!=J))if(E&&(E=new G(E)),f.isSymbol3D(w))t(w,E,J);else if(f.isSymbol2D(w)){if(E=E||w.color)w.color=v(E,J);null!=J&&"outline"in w&&w.outline&&w.outline.color&&(w.outline.color=v(w.outline.color,J))}};u.applyOpacityToColor=v;u.applyRotationToSymbol=function(w,E,J){w&&null!=E&&(f.isSymbol3D(w)?(w=w.symbolLayers)&&w.forEach(X=>{if(X&&"object"===X.type)switch(J){case "tilt":X.tilt=E;break;case "roll":X.roll=E;break;default:X.heading=E}}):!f.isSymbol2D(w)||"simple-marker"!==
w.type&&"picture-marker"!==w.type&&"text"!==w.type||(w.angle=E))};u.applySizesToSymbol=function(w,E){return Q.apply(this,arguments)};u.getCSSFilterFromEffectList=function(w){if(!w)return null;w=w.effects.filter(E=>"bloom"!==E.type).map(E=>E.toJSON());return x.effectFunctionsFromJSON(w)};u.getColorFromSymbol=function(w,E){if(!w)return null;let J=null;f.isSymbol3D(w)?J=q(w):f.isSymbol2D(w)&&(J=w.color?new G(w.color):null);return J?v(J,E):null};u.getIconHref=function(w,E){E=E.resource.href;return!A("esri-canvas-svg-support")&&
w.styleOrigin&&N.test(E)?E.replace(N,"/resource/png/$1.png"):E};u.getSymbolOutlineSize=function(w){if(!w)return 0;if(f.isSymbol3D(w)){{const E=w.symbolLayers&&w.symbolLayers.length;E?(w=w.symbolLayers.getItemAt(E-1),w="outline"in w?L.get(w,"outline","size"):void 0):w=void 0}return L.isSome(w)?w:0}return(w=k.getStroke(w))&&K.px2pt(w.width)||0};u.isVolumetricSymbol=function(w){if(L.isNone(w)||!("symbolLayers"in w)||L.isNone(w.symbolLayers))return!1;switch(w.type){case "point-3d":return w.symbolLayers.some(E=>
"object"===E.type);case "line-3d":return w.symbolLayers.some(E=>"path"===E.type);case "polygon-3d":return w.symbolLayers.some(E=>"object"===E.type||"extrude"===E.type);default:return!1}};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(d,u,c,G,f,F,A){function L(g){if(!g)return null;
let q;switch(g.type){case "simple-fill":case "picture-fill":case "simple-marker":q=L(g.outline);break;case "simple-line":{const v=F.pt2px(g.width);"none"!==g.style&&0!==v&&(q={color:g.color,style:k(g.style),width:v,cap:g.cap,join:"miter"===g.join?F.pt2px(g.miterLimit):g.join});break}default:q=null}return q}const K={left:"start",center:"middle",right:"end",justify:"start"},C={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},x=new f(1E3),k=(()=>{const g={};return q=>
{if(g[q])return g[q];const v=q.replace(/-/g,"");return g[q]=v}})();c=new c([128,128,128]);d.defaultThematicColor=c;d.dekebabifyLineStyle=k;d.getFill=function(g){const q=g.style;let v=null;if(g)switch(g.type){case "simple-marker":"cross"!==q&&"x"!==q&&(v=g.color);break;case "simple-fill":"solid"===q?v=g.color:"none"!==q&&(v={type:"pattern",x:0,y:0,src:u.getAssetUrl(`esri/symbols/patterns/${q}.png`),width:5,height:5});break;case "picture-fill":v={type:"pattern",src:g.url,width:F.pt2px(g.width)*g.xscale,
height:F.pt2px(g.height)*g.yscale,x:F.pt2px(g.xoffset),y:F.pt2px(g.yoffset)};break;case "text":v=g.color;break;case "cim":v=A.getCIMSymbolColor(g)}return v};d.getPatternUrlWithColor=function(g,q){const v=g+"-"+q;return void 0!==x.get(v)?Promise.resolve(x.get(v)):G(g,{responseType:"image"}).then(t=>{t=t.data;const n=t.naturalWidth,z=t.naturalHeight,e=document.createElement("canvas");e.width=n;e.height=z;const h=e.getContext("2d");h.fillStyle=q;h.fillRect(0,0,n,z);h.globalCompositeOperation="destination-in";
h.drawImage(t,0,0);t=e.toDataURL();x.put(v,t);return t})};d.getSVGAlign=function(g){return g=(g=g.horizontalAlignment)&&K[g.toLowerCase()]||"middle"};d.getSVGBaseline=function(g){return(g=g.verticalAlignment)&&C[g.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=function(g){return"bottom"===g.verticalAlignment?"super":null};d.getStroke=L;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(d){return function(){function u(G,
f){this._storage=new d.MemCacheStorage;this._storage.maxSize=G;f&&this._storage.registerRemoveFunc("",f)}var c=u.prototype;c.put=function(G,f){this._storage.put(G,f,1,1)};c.pop=function(G){return this._storage.pop(G)};c.get=function(G){return this._storage.get(G)};c.clear=function(){this._storage.clearAll()};c.destroy=function(){this._storage.destroy()};return u}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(d,u,c){function G(k){k=c.toCIMSymbolJSON(k);
if("CIMTextSymbol"===k.type)return k.height;let g=0;if(k.symbolLayers)for(const q of k.symbolLayers)c.isCIMMarker(q)&&q.size>g?g=q.size:c.isCIMStroke(q)&&q.width>g?g=q.width:c.isCIMFill(q);return g}function f(k,g,q,v){if("CIMTextSymbol"===k.type)k.height*=g;else{if(q&&k.effects)for(const t of k.effects)L(t,g);if(k.symbolLayers)for(const t of k.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":F(t,g,v);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=v&&v.preserveOutlineWidth||
!t.width||(t.width*=g);break;case "CIMPictureFill":t.height&&(t.height*=g);t.offsetX&&(t.offsetX*=g);t.offsetY&&(t.offsetY*=g);break;case "CIMHatchFill":f(t.lineSymbol,g,!0,{...v,preserveOutlineWidth:!1}),t.offsetX&&(t.offsetX*=g),t.offsetY&&(t.offsetY*=g),t.separation&&(t.separation*=g)}}}function F(k,g,q){k.markerPlacement&&A(k.markerPlacement,g);k.offsetX&&(k.offsetX*=g);k.offsetY&&(k.offsetY*=g);k.anchorPoint&&"Absolute"===k.anchorPointUnits&&(k.anchorPoint={x:k.anchorPoint.x*g,y:k.anchorPoint.y*
g});k.size*=g;if("CIMVectorMarker"===k.type&&k.markerGraphics)for(const v of k.markerGraphics)k.scaleSymbolsProportionally||f(v.symbol,g,!0,q)}function A(k,g){c.isCIMMarkerStrokePlacement(k)&&k.offset&&(k.offset*=g);switch(k.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":k.customEndingOffset&&(k.customEndingOffset*=g);k.offsetAlongLine&&(k.offsetAlongLine*=g);if(k.placementTemplate&&k.placementTemplate.length){var q=k.placementTemplate.map(v=>v*g);k.placementTemplate=
q}break;case "CIMMarkerPlacementAlongLineVariableSize":k.maxRandomOffset&&(k.maxRandomOffset*=g);k.placementTemplate&&k.placementTemplate.length&&(q=k.placementTemplate.map(v=>v*g),k.placementTemplate=q);break;case "CIMMarkerPlacementOnLine":k.startPointOffset&&(k.startPointOffset*=g);break;case "CIMMarkerPlacementAtExtremities":k.offsetAlongLine&&(k.offsetAlongLine*=g);break;case "CIMMarkerPlacementAtRatioPositions":k.beginPosition&&(k.beginPosition*=g);k.endPosition&&(k.endPosition*=g);break;case "CIMMarkerPlacementPolygonCenter":k.offsetX&&
(k.offsetX*=g);k.offsetY&&(k.offsetY*=g);break;case "CIMMarkerPlacementInsidePolygon":k.offsetX&&(k.offsetX*=g),k.offsetY&&(k.offsetY*=g),k.stepX&&(k.stepX*=g),k.stepY&&(k.stepY*=g)}}function L(k,g){switch(k.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":k.width&&(k.width*=g);break;case "CIMGeometricEffectBuffer":k.size&&(k.size*=g);break;case "CIMGeometricEffectCut":k.beginCut&&(k.beginCut*=g);k.endCut&&(k.endCut*=g);k.middleCut&&(k.middleCut*=g);break;case "CIMGeometricEffectDashes":k.customEndingOffset&&
(k.customEndingOffset*=g);k.offsetAlongLine&&(k.offsetAlongLine*=g);if(k.dashTemplate&&k.dashTemplate.length){const q=k.dashTemplate.map(v=>v*g);k.dashTemplate=q}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":k.length&&(k.length*=g);break;case "CIMGeometricEffectMove":k.offsetX&&(k.offsetX*=g);k.offsetY&&(k.offsetY*=g);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":k.offset&&(k.offset*=g);break;case "CIMGeometricEffectRegularPolygon":k.radius&&
(k.radius*=g);break;case "CIMGeometricEffectTaperedPolygon":k.fromWidth&&(k.fromWidth*=g);k.length&&(k.length*=g);k.toWidth&&(k.toWidth*=g);break;case "CIMGeometricEffectWave":k.amplitude&&(k.amplitude*=g),k.period&&(k.period*=g)}}function K(k,g){let q;q="CIMTextSymbol"===k.type?k.symbol:k;k="CIMPolygonSymbol"===k.type;if(q.symbolLayers)for(const v of q.symbolLayers)if(!(v.colorLocked||k&&(c.isCIMStroke(v)||c.isCIMMarker(v)&&v.markerPlacement&&c.isCIMMarkerStrokePlacement(v.markerPlacement))))switch(v.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":v.tintColor&&
C(g,v.tintColor);break;case "CIMVectorMarker":v.markerGraphics.forEach(t=>{K(t.symbol,g)});break;case "CIMSolidStroke":case "CIMSolidFill":C(g,v.color);break;case "CIMHatchFill":K(v.lineSymbol,g)}}function C(k,g){for(const q of k)if(q.join(".")===g.join("."))return;k.push(g)}function x(k,g,q){var v="CIMTextSymbol"===k.type?k.symbol:k;k="CIMPolygonSymbol"===v.type?!0:!1;if(v.symbolLayers)for(const t of v.symbolLayers)if(!t.colorLocked){if(k)if(q){if({layersToColor:v}=q,(c.isCIMStroke(t)||c.isCIMMarker(t)&&
t.markerPlacement&&c.isCIMMarkerStrokePlacement(t.markerPlacement))&&"fill"===v||c.isCIMFill(t)&&"outline"===v)continue}else if(c.isCIMStroke(t)||c.isCIMMarker(t)&&t.markerPlacement&&c.isCIMMarkerStrokePlacement(t.markerPlacement))continue;v=g.toArray();switch(t.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":t.tintColor=v;break;case "CIMVectorMarker":t.markerGraphics.forEach(n=>{x(n.symbol,g,q)});break;case "CIMSolidStroke":case "CIMSolidFill":t.color=v;break;case "CIMHatchFill":x(t.lineSymbol,
g,q)}}}d.applyCIMSymbolColor=function(k,g,q){g instanceof u||(g=new u(g));(k=c.toCIMSymbolJSON(k))&&x(k,g,q)};d.applyCIMSymbolRotation=function(k,g,q=!1){k=c.toCIMSymbolJSON(k);q&&0!==g&&(g=360-g);if("CIMTextSymbol"===k.type)k.angle=g;else if("CIMPointSymbol"===k.type&&k.symbolLayers){q=g-(k.angle||0);for(const v of k.symbolLayers)if(c.isCIMMarker(v)){let t=v.rotation||0;t=v.rotateClockwise?t-q:t+q;v.rotation=t}k.angle=g}};d.getCIMSymbolColor=function(k){k=c.toCIMSymbolJSON(k);const g=[];K(k,g);return g.length?
new u(c.fromCIMColor(g[0])):null};d.getCIMSymbolRotation=function(k,g=!1){k=c.toCIMSymbolJSON(k);return"CIMTextSymbol"===k.type||"CIMPointSymbol"===k.type?g&&0!==k.angle?360-k.angle:k.angle||0:0};d.getCIMSymbolSize=G;d.scaleCIMMarker=F;d.scaleCIMSymbolTo=function(k,g,q){const v=c.toCIMSymbolJSON(k);k=G(k);if(0===k)if("CIMTextSymbol"===v.type)v.height=g;else{if(v.symbolLayers)for(const t of v.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":t.size=g;break;case "CIMPictureStroke":case "CIMSolidStroke":t.width=
g}}else f(v,g/k,!1,q)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(d,u){function c(G,f){"string"!==typeof G&&(G=String(G));switch(f){case "LowerCase":return G.toLowerCase();case "Allcaps":return G.toUpperCase();default:return G}}u._adjustTextCase=c;u.colorToArray=function(G){return[G.r,G.g,G.b,G.a]};u.createLabelOverrideFunction=function(G,f,F){const A=x=>{let k=x.length;for(;k--;)if(!" /-,\n".includes(x.charAt(k)))return!1;
return!0},L=[];var K=0;let C=-1;do C=f.indexOf("[",K),C>=K&&(C>K&&(K=f.substr(K,C-K),L.push([K,null,A(K)])),K=C+1,C=f.indexOf("]",K),C>=K&&(C>K&&(K=f.substr(K,C-K),(K=G[K])&&L.push([null,K,!1])),K=C+1));while(-1!==C);K<f.length-1&&(G=f.substr(K),L.push([G,null,A(G)]));return x=>{let k="",g=null;for(const q of L){const [v,t,n]=q;if(v)n?g=v:(g&&(k+=g,g=null),k+=v);else{const z=x.attributes[t];z&&(g&&(k+=g,g=null),k+=z)}}return c(k,F)}};u.evaluateValueOrFunction=function(G,f,F,A){return"function"===
typeof G?G(f,F,A):G};u.fromCIMColor=function(G){return G?{r:G[0],g:G[1],b:G[2],a:G[3]/255}:{r:0,g:0,b:0,a:0}};u.getValue=G=>isNaN(G)||!G?0:G;u.importGeometryEngine=function(){return new Promise((G,f)=>d(["../../geometry/geometryEngineJSON"],G,f))};u.isCIMFill=function(G){return"CIMGradientFill"===G.type||"CIMHatchFill"===G.type||"CIMPictureFill"===G.type||"CIMSolidFill"===G.type||"CIMWaterFill"===G.type};u.isCIMMarker=function(G){return"CIMVectorMarker"===G.type||"CIMPictureMarker"===G.type||"CIMBarChartMarker"===
G.type||"CIMCharacterMarker"===G.type||"CIMPieChartMarker"===G.type||"CIMStackedBarChartMarker"===G.type};u.isCIMMarkerStrokePlacement=function(G){return"CIMMarkerPlacementAlongLineRandomSize"===G.type||"CIMMarkerPlacementAlongLineSameSize"===G.type||"CIMMarkerPlacementAlongLineVariableSize"===G.type||"CIMMarkerPlacementAtExtremities"===G.type||"CIMMarkerPlacementAtMeasuredUnits"===G.type||"CIMMarkerPlacementAtRatioPositions"===G.type||"CIMMarkerPlacementOnLine"===G.type||"CIMMarkerPlacementOnVertices"===
G.type};u.isCIMStroke=function(G){return"CIMGradientStroke"===G.type||"CIMPictureStroke"===G.type||"CIMSolidStroke"===G.type};u.isGeometryEngineRequired=G=>{if(!G)return!1;for(const f of G)switch(f.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};u.resampleHermite=function(G,f,F,A,L,K,C=!0){const x=f/L;F/=K;const k=Math.ceil(x/2),g=Math.ceil(F/2);for(let t=0;t<K;t++)for(let n=0;n<L;n++){const z=4*(n+(C?K-t-1:t)*L);var q=0;let e=0,h=0,l=0,y=0,r=0,m=0;const D=
(t+.5)*F;for(let O=Math.floor(t*F);O<(t+1)*F;O++){var v=Math.abs(D-(O+.5))/g;const T=(n+.5)*x;v*=v;for(let Q=Math.floor(n*x);Q<(n+1)*x;Q++){let N=Math.abs(T-(Q+.5))/k;q=Math.sqrt(v+N*N);-1<=q&&1>=q&&(q=2*q*q*q-3*q*q+1,0<q&&(N=4*(Q+O*f),m+=q*G[N+3],h+=q,255>G[N+3]&&(q=q*G[N+3]/250),l+=q*G[N],y+=q*G[N+1],r+=q*G[N+2],e+=q))}}A[z]=l/e;A[z+1]=y/e;A[z+2]=r/e;A[z+3]=m/h}};u.toCIMSymbolJSON=function(G){var f;return null==(f=G.data)?void 0:f.symbol};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(d,u,c,G,f){function F(g,q){const v=[],t=g.length-1;5===g.length?v.push(0,2,4):v.push(0,t);return g.map((n,z)=>v.includes(z)?f.createStopLabel(n,z,t,q):null)}function A(){A=c._asyncToGenerator(function*(g,q,v){let t=!1,n=[],z=[];if(g.stops){var e=g.stops;n=e.map(l=>l.value);(t=e.some(l=>!!l.label))&&(z=e.map(l=>l.label))}e=n[n.length-1];
if(null==n[0]&&null==e)return null;const h=t?null:F(n,v);return(yield Promise.all(n.map(function(){var l=c._asyncToGenerator(function*(y,r){const m="opacity"===g.type?yield L(y,g,q):(yield new Promise((D,O)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],D,O))).getColor(g,y);return{value:y,color:m,label:t?z[r]:h[r]}});return function(y,r){return l.apply(this,arguments)}}()))).reverse()});return A.apply(this,arguments)}function L(g,q){return K.apply(this,arguments)}function K(){K=
c._asyncToGenerator(function*(g,q,v=k){v=new G(v);g=(yield new Promise((t,n)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],t,n))).getOpacity(q,g);null!=g&&(v.a=g);return v});return K.apply(this,arguments)}function C(g,q){const {startIndex:v,endIndex:t,weight:n}=x(g,q);if(v===t)return q[v].color;g=G.blendColors(q[v].color,q[t].color,n);return new G(g)}function x(g,q){let v=0,t=q.length-1;q.some((n,z)=>{if(g<n.value)return t=z,!0;v=z;return!1});return{startIndex:v,endIndex:t,
weight:(g-q[v].value)/(q[t].value-q[v].value)}}const k=new G([64,64,64]);u.getColorFromPointCloudStops=C;u.getRampStops=function(g,q,v){return A.apply(this,arguments)};u.getRampStopsForPointCloud=function(g){let q=!1,v=[],t=[];v=g.map(e=>e.value);(q=g.some(e=>!!e.label))&&(t=g.map(e=>e.label));const n=v[v.length-1];if(null==v[0]&&null==n)return null;const z=q?null:F(v,!1);return v.map((e,h)=>{const l=C(e,g);return{value:e,color:l,label:q?t[h]:z[h]}}).reverse()};u.getStrectchRampStops=function(g,q){let v=
[];if(g&&"multipart"===g.type)g.colorRamps.reverse().forEach((t,n)=>{0===n?v.push({value:q.max,color:new G(t.toColor),label:"high"}):v.push({value:null,color:new G(t.toColor),label:""});n===g.colorRamps.length-1?v.push({value:q.min,color:new G(t.fromColor),label:"low"}):v.push({value:null,color:new G(t.fromColor),label:""})});else{let t,n;g&&"algorithmic"===g.type?(t=g.fromColor,n=g.toColor):(t=[0,0,0,1],n=[255,255,255,1]);v=[{value:q.max,color:new G(n),label:"high"},{value:q.min,color:new G(t),label:"low"}]}return v};
Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(d,u,c,G,f,F,A){function L(k){return K.apply(this,arguments)}function K(){K=c._asyncToGenerator(function*(k){if(!("visualVariables"in k&&k.visualVariables))return null;
k=k.visualVariables.find(v=>"color"===v.type);if(!k)return null;var g=null,q=null;if(k.stops){if(1===k.stops.length)return k.stops[0].color;g=k.stops[0].value;q=k.stops[k.stops.length-1].value}g+=(q-g)/2;({getColor:q}=yield new Promise((v,t)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],v,t)));return q(k,g)});return K.apply(this,arguments)}function C(){C=c._asyncToGenerator(function*(k,g){const q=k.trailCap,v=k.trailWidth||1;k=g||(yield L(k))||k.color;return new A({cap:q,color:k,
width:v})});return C.apply(this,arguments)}const x=f.convertDateFormatToIntlOptions("short-date");u.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];u.SPECIAL_CHARS_GREATER_THAN="\x3e";u.SPECIAL_CHARS_LESS_THAN="\x3c";u.createStopLabel=function(k,g,q,v){let t="";0===g?t="\x3c ":g===q&&(t="\x3e ");g=null;g=v?f.formatDate(k,x):F.format(k);return t+g};u.getMedianColor=L;u.getSymbolForFlowRenderer=function(k,g){return C.apply(this,arguments)};Object.defineProperties(u,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(d,u){d.getHeatmapRampStops=function(c){if(!c.colorStops)return[];const G=[...c.colorStops].filter(F=>{var A;return 0<(null==(A=F.color)?void 0:A.a)});let f=G.length-1;if(G&&G[0]){const F=G[f];F&&1!==F.ratio&&(G.push(new u({ratio:1,color:F.color})),f++)}return G.map((F,A)=>{let L="";if(0===A){var K;L=(null==
(K=c.legendOptions)?void 0:K.minLabel)||"low"}else if(A===f){var C;L=(null==(C=c.legendOptions)?void 0:C.maxLabel)||"high"}return{color:F.color,label:L,ratio:F.ratio}}).reverse()};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k){const g={chartAnimation:!0};c=function(q){function v(n){n=q.call(this,n)||this;n.abilities={...g};n.activeMediaInfoIndex=0;n.attributes=null;n.description=null;n.fieldInfoMap=null;n.formattedAttributes=null;n.expressionAttributes=null;n.layer=null;n.mediaInfos=null;n.popupTemplate=null;n.relatedInfos=null;n.title=null;return n}d._inheritsLoose(v,q);var t=v.prototype;t.castAbilities=function(n){return{...g,...n}};t.setActiveMedia=function(n){this._setContentElementMedia(n)};
t.next=function(){this._pageContentElementMedia(1)};t.previous=function(){this._pageContentElementMedia(-1)};t._setContentElementMedia=function(n){const {formattedMediaInfoCount:z}=this;this.activeMediaInfoIndex=(n+z)%z};t._pageContentElementMedia=function(n){const {activeMediaInfoIndex:z}=this;this._setContentElementMedia(z+n)};t._formatMediaInfos=function(){const {attributes:n,mediaInfos:z,formattedAttributes:e,expressionAttributes:h,fieldInfoMap:l,layer:y}=this;return null==z?void 0:z.map(r=>{r=
null==r?void 0:r.clone();if(!r)return null;r.title=x.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:l,globalAttributes:e,expressionAttributes:h,layer:y,text:r.title});r.caption=x.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:l,globalAttributes:e,expressionAttributes:h,layer:y,text:r.caption});r.altText=x.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:l,globalAttributes:e,expressionAttributes:h,layer:y,text:r.altText});if("image"===r.type){var {value:m}=
r;this._setImageValue({value:m,formattedAttributes:e,layer:y});return r.value.sourceURL?r:void 0}return"pie-chart"===r.type||"line-chart"===r.type||"column-chart"===r.type||"bar-chart"===r.type?({value:m}=r,this._setChartValue({value:m,chartType:r.type,attributes:n,formattedAttributes:e,layer:y}),r):null}).filter(Boolean)};t._setImageValue=function(n){const {fieldInfoMap:z}=this,{value:e,formattedAttributes:h,layer:l}=n,{linkURL:y,sourceURL:r}=e;r&&(n=x.fixTokens(r,l),e.sourceURL=x.substituteAttributes({formattedAttributes:h,
template:n,fieldInfoMap:z}));y&&(n=x.fixTokens(y,l),e.linkURL=x.substituteAttributes({formattedAttributes:h,template:n,fieldInfoMap:z}))};t._setChartValue=function(n){const {value:z,attributes:e,formattedAttributes:h,chartType:l,layer:y}=n,{popupTemplate:r,relatedInfos:m}=this,{fields:D,normalizeField:O}=z;z.fields=x.getFixedFieldNames(D,y);O&&(z.normalizeField=x.getFixedFieldName(O,y));if(D.some(Q=>!!(null!=h[Q]||x.isRelatedField(Q)&&m.size))){var T=null==r?void 0:r.fieldInfos;D.forEach(Q=>{x.isRelatedField(Q)?
z.series=[...z.series,...this._getRelatedChartInfos({fieldInfos:T,fieldName:Q,formattedAttributes:h,chartType:l,value:z})]:(Q=this._getChartOption({value:z,attributes:e,chartType:l,formattedAttributes:h,fieldName:Q,fieldInfos:T}),z.series.push(Q))})}};t._getRelatedChartInfos=function(n){var z;const {fieldInfos:e,fieldName:h,formattedAttributes:l,chartType:y,value:r}=n,m=[];n=k.getRelatedFieldInfo(h);const {layerId:D,fieldName:O}=n;n=null==(z=this.relatedInfos)?void 0:z.get(D.toString());if(!n)return m;
const {relatedFeatures:T,relation:Q}=n;if(!Q||!T)return m;({cardinality:z}=Q);T.forEach(N=>{const {attributes:P}=N;P&&Object.keys(P).forEach(w=>{w===O&&m.push(this._getChartOption({value:r,attributes:P,formattedAttributes:l,fieldName:h,chartType:y,relatedFieldName:w,fieldInfos:e}))})});return"one-to-many"===z||"many-to-many"===z?m:[m[0]]};t._getTooltip=function({label:n,value:z,chartType:e}){return"pie-chart"===e?`${n}`:`${n}: ${z}`};t._getChartOption=function(n){const {value:z,attributes:e,formattedAttributes:h,
fieldName:l,relatedFieldName:y,fieldInfos:r,chartType:m}=n,{layer:D,fieldInfoMap:O}=this,{normalizeField:T,tooltipField:Q}=z;n=T?x.isRelatedField(T)?e[k.getRelatedFieldInfo(T).fieldName]:e[T]:null;var N=y&&void 0!==e[y]?e[y]:void 0!==e[l]?e[l]:h[l];n=new C({fieldName:l,value:void 0===N?null:N&&n?N/n:N});if(x.isRelatedField(l)){var P,w,E,J,X;N=O.get(l.toLowerCase());const p=O.get(Q.toLowerCase());var W=null!=(P=null==N?void 0:N.fieldName)?P:l;P=null!=(w=null==p?void 0:p.fieldName)?w:Q;w=null!=(E=null!=
(J=null!=(X=h[P])?X:null==N?void 0:N.label)?J:null==N?void 0:N.fieldName)?E:y;n.tooltip=this._getTooltip({label:w,value:h[W],chartType:m});return n}J=x.getFieldInfo(r,l);E=x.getFixedFieldName(l,D);J=Q&&void 0!==h[Q]?h[Q]:x.getFieldInfoLabel(J||new K({fieldName:E}),null==(W=this.popupTemplate)?void 0:W.expressionInfos);n.tooltip=this._getTooltip({label:J,value:h[E],chartType:m});return n};d._createClass(v,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||
null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return v}(c);u.__decorate([G.property()],c.prototype,"abilities",void 0);u.__decorate([A.cast("abilities")],c.prototype,"castAbilities",null);u.__decorate([G.property()],c.prototype,"activeMediaInfoIndex",void 0);u.__decorate([G.property({readOnly:!0})],c.prototype,"activeMediaInfo",null);u.__decorate([G.property()],c.prototype,
"attributes",void 0);u.__decorate([G.property()],c.prototype,"description",void 0);u.__decorate([G.property()],c.prototype,"fieldInfoMap",void 0);u.__decorate([G.property()],c.prototype,"formattedAttributes",void 0);u.__decorate([G.property()],c.prototype,"expressionAttributes",void 0);u.__decorate([G.property({readOnly:!0})],c.prototype,"formattedMediaInfos",null);u.__decorate([G.property()],c.prototype,"layer",void 0);u.__decorate([G.property({readOnly:!0})],c.prototype,"formattedMediaInfoCount",
null);u.__decorate([G.property()],c.prototype,"mediaInfos",void 0);u.__decorate([G.property()],c.prototype,"popupTemplate",void 0);u.__decorate([G.property()],c.prototype,"relatedInfos",void 0);u.__decorate([G.property()],c.prototype,"title",void 0);return c=u.__decorate([L.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],c)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../kernel ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D,O,T,Q,N,P,w,E,J){function X(oa,va){if(!va.relationships)return null;let ua=null;({relationships:va}=va);va.some(Ga=>Ga.id===parseInt(oa,10)?(ua=Ga,!0):!1);return ua}function W({originRelationship:oa,relationships:va,layerId:ua}){let Ga;va&&va.some(ha=>{`${ha.relatedTableId}`===ua&&ha.id===oa.id&&(Ga=ha);return!!Ga});return Ga}function p(oa,va){va=va.toLowerCase();for(const ua in oa)if(ua.toLowerCase()===va)return oa[ua];return null}function H(oa,
va,ua,Ga){const ha=new P;ha.outFields=["*"];ha.relationshipId="number"===typeof va.id?va.id:parseInt(va.id,10);ha.objectIds=[oa.attributes[ua.objectIdField]];return ua.queryRelatedFeatures(ha,Ga)}function I(oa,va,ua){let Ga=0;const ha=[];for(;Ga<va.length;)ha.push(`${oa} IN (${va.slice(Ga,ua+Ga)})`),Ga+=ua;return ha.join(" OR ")}function U(oa,va,ua,Ga){return Z.apply(this,arguments)}function Z(){Z=u._asyncToGenerator(function*(oa,va,ua,Ga){var ha=ua.layerId.toString();const {layerInfo:la,relation:wa,
relatedFields:za,outStatistics:Aa,url:xa,sourceSpatialReference:ba}=va;ha=W({originRelationship:wa,relationships:la.relationships,layerId:ha});if(ha.relationshipTableId&&ha.keyFieldInRelationshipTable){ua=(yield H(oa,ha,ua,Ga))[oa.attributes[ua.objectIdField]];if(!ua)return null;const da=ua.features.map(ia=>ia.attributes[la.objectIdField]);if(0<(null==Aa?void 0:Aa.length)&&la.supportsStatistics)return va=new D,va.where=I(la.objectIdField,da,1E3),va.outFields=za,va.outStatistics=Aa,va.sourceSpatialReference=
ba,va={features:Promise.resolve(ua),statsFeatures:C.executeQueryJSON(xa,va)},F.eachAlways(va)}return(ha=null==ha?void 0:ha.keyField)?(ua=A.isNumericField(ea(la.fields,ha)),oa=p(oa.attributes,wa.keyField),ha=ua?`${ha}=${oa}`:`${ha}='${oa}'`,oa=C.executeQueryJSON(xa,new D({where:ha,outFields:va.relatedFields,sourceSpatialReference:ba}),Ga),va=va.outStatistics&&0<va.outStatistics.length&&la.supportsStatistics?C.executeQueryJSON(xa,new D({where:ha,outFields:va.relatedFields,outStatistics:va.outStatistics,
sourceSpatialReference:ba}),Ga):null,Ga={features:oa},va&&(Ga.statsFeatures=va),F.eachAlways(Ga)):null});return Z.apply(this,arguments)}function ea(oa,va){if(null!=oa){va=va.toLowerCase();for(const ua of oa)if(ua&&ua.name.toLowerCase()===va)return ua}return null}const ka=f.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),ya=new Map;d.createRelatedInfo=function(oa,va){if(oa=X(oa,va))return{url:`${va.url}/${oa.relatedTableId}`,sourceSpatialReference:va.spatialReference,relation:oa,relatedFields:[],
outStatistics:[]}};d.getDestinationRelation=W;d.getRelatedFieldInfo=function(oa){if(!J.isRelatedField(oa))return null;const [va,ua]=oa.split("/").slice(1);return{layerId:va,fieldName:ua}};d.queryLayerInfos=function({relatedInfos:oa,layer:va},ua){const Ga={};oa.forEach((ha,la)=>{({relation:ha}=ha);if(!ha)throw la=new G("relation-required","A relation is required on a layer to retrieve related records."),ka.error(la),la;({relatedTableId:ha}=ha);if("number"!==typeof ha)throw la=new G("A related table ID is required on a layer to retrieve related records."),
ka.error(la),la;ha=`${va.url}/${ha}`;const wa=ya.get(ha),za=wa?wa:c(ha,{query:{f:"json"},signal:ua&&ua.signal});wa||ya.set(ha,za);Ga[la]=za});return F.eachAlways(Ga)};d.queryRelatedFeatures=function({graphic:oa,relatedInfos:va,layer:ua},Ga){const ha={};va.forEach((la,wa)=>{la.layerInfo&&(ha[wa]=U(oa,la,ua,Ga))});return F.eachAlways(ha)};d.setRelatedFeatures=function(oa,va){if(va&&oa){var {features:ua,statsFeatures:Ga}=oa;oa=ua&&ua.value;va.relatedFeatures=oa?oa.features:[];oa=Ga&&Ga.value;va.relatedStatsFeatures=
oa?oa.features:[]}};d.updateRelatedInfo=function({relatedInfo:oa,fieldName:va,fieldInfo:ua}){oa.relatedFields.push(va);ua.statisticType&&(va=new E({statisticType:ua.statisticType,onStatisticField:va,outStatisticFieldName:va}),oa.outStatistics.push(va))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(d,u,c,G,f,F){function A(g){if(!g)return"en-us";if(C.has(g.toLowerCase()))return g.toLowerCase();{g=g.split("-")[0].toLowerCase();let v=null;for(q of C.keys())if(q.startsWith(g)){v=q;break}var q=v}return q||"en-us"}function L(){L=c._asyncToGenerator(function*(g=F.getLocale()){g=A(g);if(x&&g===k)return x;x=(new Promise((q,v)=>d(["../../chunks/index"],q,v))).then(q=>q.index);k=g;try{const [q,v]=yield Promise.all([x,C.get(k)()]);k===g&&(q.am4core.options.defaultLocale=v.default);q.am4core.options.suppressWarnings=
!0;q.am4core.options.autoDispose=!0}catch{return k=x=null}return x});return L.apply(this,arguments)}G="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var K=[{name:"default",colors:[].concat(G.slice(30,39),G.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const C=new Map([["ar",()=>(new Promise((g,q)=>d(["../../chunks/ar"],g,q))).then(g=>g.ar)],["bg-bg",()=>(new Promise((g,
q)=>d(["../../chunks/bg_BG"],g,q))).then(g=>g.bg_BG)],["bs-ba",()=>(new Promise((g,q)=>d(["../../chunks/bs_BA"],g,q))).then(g=>g.bs_BA)],["ca-es",()=>(new Promise((g,q)=>d(["../../chunks/ca_ES"],g,q))).then(g=>g.ca_ES)],["cs-cz",()=>(new Promise((g,q)=>d(["../../chunks/cs_CZ"],g,q))).then(g=>g.cs_CZ)],["da-dk",()=>(new Promise((g,q)=>d(["../../chunks/da_DK"],g,q))).then(g=>g.da_DK)],["de-de",()=>(new Promise((g,q)=>d(["../../chunks/de_DE"],g,q))).then(g=>g.de_DE)],["de-ch",()=>(new Promise((g,q)=>
d(["../../chunks/de_CH"],g,q))).then(g=>g.de_CH)],["el-gr",()=>(new Promise((g,q)=>d(["../../chunks/el_GR"],g,q))).then(g=>g.el_GR)],["en-us",()=>(new Promise((g,q)=>d(["../../chunks/en_US"],g,q))).then(g=>g.en_US)],["en-ca",()=>(new Promise((g,q)=>d(["../../chunks/en_CA"],g,q))).then(g=>g.en_CA)],["es-es",()=>(new Promise((g,q)=>d(["../../chunks/es_ES"],g,q))).then(g=>g.es_ES)],["et-ee",()=>(new Promise((g,q)=>d(["../../chunks/et_EE"],g,q))).then(g=>g.et_EE)],["fi-fi",()=>(new Promise((g,q)=>d(["../../chunks/fi_FI"],
g,q))).then(g=>g.fi_FI)],["fr-fr",()=>(new Promise((g,q)=>d(["../../chunks/fr_FR"],g,q))).then(g=>g.fr_FR)],["he-il",()=>(new Promise((g,q)=>d(["../../chunks/he_IL"],g,q))).then(g=>g.he_IL)],["hr-hr",()=>(new Promise((g,q)=>d(["../../chunks/hr_HR"],g,q))).then(g=>g.hr_HR)],["hu-hu",()=>(new Promise((g,q)=>d(["../../chunks/hu_HU"],g,q))).then(g=>g.hu_HU)],["id-id",()=>(new Promise((g,q)=>d(["../../chunks/id_ID"],g,q))).then(g=>g.id_ID)],["it-it",()=>(new Promise((g,q)=>d(["../../chunks/it_IT"],g,q))).then(g=>
g.it_IT)],["ja-jp",()=>(new Promise((g,q)=>d(["../../chunks/ja_JP"],g,q))).then(g=>g.ja_JP)],["ko-kr",()=>(new Promise((g,q)=>d(["../../chunks/ko_KR"],g,q))).then(g=>g.ko_KR)],["lt-lt",()=>(new Promise((g,q)=>d(["../../chunks/lt_LT"],g,q))).then(g=>g.lt_LT)],["lv-lv",()=>(new Promise((g,q)=>d(["../../chunks/lv_LV"],g,q))).then(g=>g.lv_LV)],["nb-no",()=>(new Promise((g,q)=>d(["../../chunks/nb_NO"],g,q))).then(g=>g.nb_NO)],["nl-nl",()=>(new Promise((g,q)=>d(["../../chunks/nl_NL"],g,q))).then(g=>g.nl_NL)],
["pl-pl",()=>(new Promise((g,q)=>d(["../../chunks/pl_PL"],g,q))).then(g=>g.pl_PL)],["pt-br",()=>(new Promise((g,q)=>d(["../../chunks/pt_BR"],g,q))).then(g=>g.pt_BR)],["pt-pt",()=>(new Promise((g,q)=>d(["../../chunks/pt_PT"],g,q))).then(g=>g.pt_PT)],["ro-ro",()=>(new Promise((g,q)=>d(["../../chunks/ro_RO"],g,q))).then(g=>g.ro_RO)],["ru-ru",()=>(new Promise((g,q)=>d(["../../chunks/ru_RU"],g,q))).then(g=>g.ru_RU)],["sk-sk",()=>(new Promise((g,q)=>d(["../../chunks/sk_SK"],g,q))).then(g=>g.sk_SK)],["sl-sl",
()=>(new Promise((g,q)=>d(["../../chunks/sl_SL"],g,q))).then(g=>g.sl_SL)],["sr-rs",()=>(new Promise((g,q)=>d(["../../chunks/sr_RS"],g,q))).then(g=>g.sr_RS)],["sv-se",()=>(new Promise((g,q)=>d(["../../chunks/sv_SE"],g,q))).then(g=>g.sv_SE)],["th-th",()=>(new Promise((g,q)=>d(["../../chunks/th_TH"],g,q))).then(g=>g.th_TH)],["tr-tr",()=>(new Promise((g,q)=>d(["../../chunks/tr_TR"],g,q))).then(g=>g.tr_TR)],["uk-ua",()=>(new Promise((g,q)=>d(["../../chunks/uk_UA"],g,q))).then(g=>g.uk_UA)],["vi-vn",()=>
(new Promise((g,q)=>d(["../../chunks/vi_VN"],g,q))).then(g=>g.vi_VN)],["zh-cn",()=>(new Promise((g,q)=>d(["../../chunks/zh_Hans"],g,q))).then(g=>g.zh_Hans)],["zh-hk",()=>(new Promise((g,q)=>d(["../../chunks/zh_Hant"],g,q))).then(g=>g.zh_Hant)],["zh-tw",()=>(new Promise((g,q)=>d(["../../chunks/zh_Hant"],g,q))).then(g=>g.zh_Hant)]]);let x,k;u.getChartLocale=A;u.getColorSet=function(g,q="default"){const v=K.find(t=>t.name===q);return v?v.colors.map(t=>g.color(t)):null};u.loadChartsModule=function(){return L.apply(this,
arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D){f=function(O){function T(Q){var N=O.call(this,Q)||this;N._abortController=null;N.expressionInfo=null;N.graphic=null;N.contentElement=null;N.contentElementViewModel=null;N.interceptor=null;N.view=null;N._cancelQuery=()=>{const {_abortController:P}=d._assertThisInitialized(N);P&&P.abort();N._abortController=null};N._createVM=()=>{var P,w;const E=null==(P=N.contentElement)?void 0:P.type;null==(w=N.contentElementViewModel)?void 0:w.destroy();
P="fields"===E?new r:"media"===E?new m:"text"===E?new y:null;N._set("contentElementViewModel",P)};N._compile=d._asyncToGenerator(function*(){N._cancelQuery();const P=new AbortController;N._abortController=P;yield N._compileExpression();N._abortController===P&&(N._abortController=null)});N._compileThrottled=L.throttle(N._compile,1,d._assertThisInitialized(N));N._compileExpression=d._asyncToGenerator(function*(){const {expressionInfo:P,graphic:w,interceptor:E,spatialReference:J,map:X,view:W,_abortController:p}=
d._assertThisInitialized(N);if(P&&w&&J&&X){var H=yield D.loadArcadeUtils();if(p===N._abortController)if((H=yield D.createCompiledExpression({arcadeUtils:H,expressionInfo:P,graphic:w,interceptor:E,map:X,spatialReference:J,view:W}))&&"esri.arcade.Dictionary"===H.declaredClass){H=yield G.castAsJsonAsync(H,p.signal);var I=null==H?void 0:H.type;H="media"===I?e.fromJSON(H):"text"===I?h.fromJSON(H):"fields"===I?z.fromJSON(H):null;N._set("contentElement",H)}else N._set("contentElement",null)}else N._set("contentElement",
null)});N.handles.add([A.watch(()=>[N.expressionInfo,N.graphic,N.map,N.spatialReference,N.view],()=>N._compileThrottled(),A.initial),A.watch(()=>[N.contentElement],()=>N._createVM(),A.initial)]);return N}d._inheritsLoose(T,O);T.prototype.destroy=function(){var Q;this._cancelQuery();null==(Q=this.contentElementViewModel)?void 0:Q.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};d._createClass(T,[{key:"spatialReference",get:function(){var Q;return(null==(Q=this.view)?
void 0:Q.spatialReference)||null},set:function(Q){void 0===Q?this._clearOverride("spatialReference"):this._override("spatialReference",Q)}},{key:"state",get:function(){const {_abortController:Q,contentElement:N,contentElementViewModel:P}=this;return Q?"loading":N||P?"ready":"disabled"}},{key:"map",get:function(){var Q;return(null==(Q=this.view)?void 0:Q.map)||null},set:function(Q){void 0===Q?this._clearOverride("map"):this._override("map",Q)}}]);return T}(F.HandleOwnerMixin(f));u.__decorate([K.property()],
f.prototype,"_abortController",void 0);u.__decorate([K.property({type:l})],f.prototype,"expressionInfo",void 0);u.__decorate([K.property({type:c})],f.prototype,"graphic",void 0);u.__decorate([K.property({readOnly:!0})],f.prototype,"contentElement",void 0);u.__decorate([K.property({readOnly:!0})],f.prototype,"contentElementViewModel",void 0);u.__decorate([K.property()],f.prototype,"interceptor",void 0);u.__decorate([K.property()],f.prototype,"spatialReference",null);u.__decorate([K.property({readOnly:!0})],
f.prototype,"state",null);u.__decorate([K.property()],f.prototype,"map",null);u.__decorate([K.property()],f.prototype,"view",void 0);return f=u.__decorate([g.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],f)})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z){function e(V,ca,na){return""===ca||null===ca||void 0===ca||ca===na||ca===na?V:V=V.split(ca).join(na)}function h(V){return V instanceof Ab||V instanceof c||V instanceof Gb}function l(V){return r(V)||D(V)||E(V)||m(V)||null===V||V===eb||"number"===typeof V?!0:!1}function y(V,ca){return void 0===V?ca:V}function r(V){return"string"===typeof V||V instanceof String}function m(V){return"boolean"===typeof V}function D(V){return"number"===typeof V}function O(V){return"number"===
typeof V&&isFinite(V)&&Math.floor(V)===V}function T(V){return V instanceof Array}function Q(V){return"esri.arcade.Feature"===(null==V?void 0:V.arcadeDeclaredClass)?!0:!1}function N(V){return!0===(V&&V.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===V.declaredRootClass)}function P(V){return!0===(V&&V.declaredRootClass&&"esri.arcade.featureSetCollection"===V.declaredRootClass)}function w(V){return V instanceof G}function E(V){return V instanceof Date}function J(V,ca,na){if(V.length<
ca||V.length>na)throw Error("Function called with wrong number of Parameters");}function X(V){return 0>V?-Math.round(-V):Math.round(V)}function W(){let V=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ca){const na=(V+16*Math.random())%16|0;V=Math.floor(V/16);return("x"===ca?na:na&3|8).toString(16)})}function p(V,ca){if(!1===isNaN(V)){if(void 0===ca||null===ca||""===ca)return V.toString();ca=e(ca,"\u2030","");ca=e(ca,"\u00a4","");return v.format(V,{pattern:ca})}return V.toString()}
function H(V,ca){V=g.DateTime.fromJSDate(V);return void 0===ca||null===ca||""===ca?V.toISO({suppressMilliseconds:!0}):V.toFormat(I(ca),{locale:n.getLocale(),numberingSystem:"latn"})}function I(V){V=V.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let ca="";const na=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Ha of V.match(na))switch(Ha){case "D":ca+=
"d";break;case "DD":ca+="dd";break;case "DDD":ca+="o";break;case "d":ca+="c";break;case "ddd":ca+="ccc";break;case "dddd":ca+="cccc";break;case "M":ca+="L";break;case "MM":ca+="LL";break;case "MMM":ca+="LLL";break;case "MMMM":ca+="LLLL";break;case "YY":ca+="yy";break;case "Y":case "YYYY":ca+="yyyy";break;case "Q":ca+="q";break;case "Z":ca+="ZZ";break;case "ZZ":ca+="ZZZ";break;case "S":ca+="'S'";break;case "SS":ca+="'SS'";break;case "SSS":ca+="u";break;case "A":case "a":ca+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ca+=
Ha;break;default:ca=2<=Ha.length&&"["===Ha.slice(0,1)&&"]"===Ha.slice(-1)?ca+`'${Ha.slice(1,-1)}'`:ca+`'${Ha}'`}return ca}function U(V,ca,na){switch(na){case "\x3e":return V>ca;case "\x3c":return V<ca;case "\x3e\x3d":return V>=ca;case "\x3c\x3d":return V<=ca}return!1}function Z(V,ca,na){if(null===V){if(null===ca||ca===eb)return U(null,null,na);if(D(ca))return U(0,ca,na);if(r(ca)||m(ca))return U(0,ua(ca),na);if(E(ca))return U(0,ca.getTime(),na)}if(V===eb){if(null===ca||ca===eb)return U(null,null,na);
if(D(ca))return U(0,ca,na);if(r(ca)||m(ca))return U(0,ua(ca),na);if(E(ca))return U(0,ca.getTime(),na)}else if(D(V)){if(D(ca))return U(V,ca,na);if(m(ca))return U(V,ua(ca),na);if(null===ca||ca===eb)return U(V,0,na);if(r(ca))return U(V,ua(ca),na);if(E(ca))return U(V,ca.getTime(),na)}else if(r(V)){if(r(ca))return U(ka(V),ka(ca),na);if(E(ca))return U(ua(V),ca.getTime(),na);if(D(ca))return U(ua(V),ca,na);if(null===ca||ca===eb)return U(ua(V),0,na);if(m(ca))return U(ua(V),ua(ca),na)}else if(E(V)){if(E(ca))return U(V,
ca,na);if(null===ca||ca===eb)return U(V.getTime(),0,na);if(D(ca))return U(V.getTime(),ca,na);if(m(ca)||r(ca))return U(V.getTime(),ua(ca),na)}else if(m(V)){if(m(ca))return U(V,ca,na);if(D(ca))return U(ua(V),ua(ca),na);if(E(ca))return U(ua(V),ca.getTime(),na);if(null===ca||ca===eb)return U(ua(V),0,na);if(r(ca))return U(ua(V),ua(ca),na)}return!ea(V,ca)||"\x3c\x3d"!==na&&"\x3e\x3d"!==na?!1:!0}function ea(V,ca){if(V===ca||null===V&&ca===eb||null===ca&&V===eb)return!0;if(E(V)&&E(ca))return V.getTime()===
ca.getTime();if(V instanceof f||V instanceof F)return V.equalityTest(ca);if(V instanceof C&&ca instanceof C){const na=V.cache._arcadeCacheId,Ha=ca.cache._arcadeCacheId;if(void 0!==na&&null!==na)return na===Ha}return void 0!==V&&void 0!==ca&&null!==V&&null!==ca&&"object"===typeof V&&"object"===typeof ca&&(V._arcadeCacheId===ca._arcadeCacheId&&void 0!==V._arcadeCacheId&&null!==V._arcadeCacheId||V._underlyingGraphic===ca._underlyingGraphic&&void 0!==V._underlyingGraphic&&null!==V._underlyingGraphic)?
!0:!1}function ka(V,ca){if(r(V))return V;if(null===V)return"";if(D(V))return p(V,ca);if(m(V))return V.toString();if(E(V))return H(V,ca);if(V instanceof L)return JSON.stringify(V.toJSON());if(T(V)){ca=[];for(var na=0;na<V.length;na++)ca[na]=va(V[na]);return"["+ca.join(",")+"]"}if(V instanceof G){ca=[];for(na=0;na<V.length();na++)ca[na]=va(V.get(na));return"["+ca.join(",")+"]"}return null!==V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():h(V)?"object, Function":""}function ya(V){const ca=
[];if(!1===T(V))return null;if(V instanceof G){for(var na=0;na<V.length();na++)ca[na]=ua(V.get(na));return ca}for(na=0;na<V.length;na++)ca[na]=ua(V[na]);return ca}function oa(V,ca){if(r(V))return V;if(null===V)return"";if(D(V))return p(V,ca);if(m(V))return V.toString();if(E(V))return H(V,ca);if(V instanceof L)return V instanceof A?'{"xmin":'+V.xmin.toString()+',"ymin":'+V.ymin.toString()+","+(V.hasZ?'"zmin":'+V.zmin.toString()+",":"")+(V.hasM?'"mmin":'+V.mmin.toString()+",":"")+'"xmax":'+V.xmax.toString()+
',"ymax":'+V.ymax.toString()+","+(V.hasZ?'"zmax":'+V.zmax.toString()+",":"")+(V.hasM?'"mmax":'+V.mmax.toString()+",":"")+'"spatialReference":'+ja(V.spatialReference)+"}":ja(V.toJSON(),(Ha,Ia)=>Ha.key===Ia.key?0:"spatialReference"===Ha.key?1:"spatialReference"===Ia.key||Ha.key<Ia.key?-1:Ha.key>Ia.key?1:0);if(T(V)){ca=[];for(var na=0;na<V.length;na++)ca[na]=va(V[na]);return"["+ca.join(",")+"]"}if(V instanceof G){ca=[];for(na=0;na<V.length();na++)ca[na]=va(V.get(na));return"["+ca.join(",")+"]"}return null!==
V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():h(V)?"object, Function":""}function va(V){return null===V?"null":m(V)||D(V)||r(V)?JSON.stringify(V):V instanceof L||V instanceof G||V instanceof Array?oa(V):V instanceof Date?JSON.stringify(H(V,"")):null!==V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():"null"}function ua(V,ca){return D(V)?V:null===V||""===V?0:E(V)?NaN:m(V)?V?1:0:T(V)||""===V||void 0===V?NaN:void 0!==ca&&r(V)?(ca=e(ca,"\u2030",""),ca=e(ca,"\u00a4",""),v.parse(V,
{pattern:ca})):V===eb?0:Number(V)}function Ga(V){return E(V)?V:r(V)&&(V=la(V))?V.toJSDate():null}function ha(V){return E(V)?g.DateTime.fromJSDate(V):r(V)?la(V):null}function la(V){const ca=/ (\d\d)/;let na=g.DateTime.fromISO(V);return na.isValid||ca.test(V)&&(V=V.replace(ca,"T$1"),na=g.DateTime.fromISO(V),na.isValid)?na:null}function wa(V){return m(V)?V:r(V)?(V=V.toLowerCase(),"true"===V?!0:!1):D(V)?0===V||isNaN(V)?!1:!0:!1}function za(V,ca){if(q.isNone(V))return null;if(null===V.spatialReference||
void 0===V.spatialReference)V.spatialReference=ca;return V}function Aa(V){if(null===V)return null;if(V instanceof C)return"NaN"===V.x||null===V.x||isNaN(V.x)?null:V;if(V instanceof x){if(0===V.rings.length)return null;for(const ca of V.rings)if(0<ca.length)return V;return null}if(V instanceof k){if(0===V.paths.length)return null;for(const ca of V.paths)if(0<ca.length)return V;return null}return V instanceof K?0===V.points.length?null:V:V instanceof A?"NaN"===V.xmin||null===V.xmin||isNaN(V.xmin)?null:
V:null}function xa(V,ca){if(!V||!V.domain)return ca;let na=null;if("string"===V.field.type||"esriFieldTypeString"===V.field.type)ca=ka(ca);else{if(null===ca||void 0===ca)return null;if(""===ca)return ca;ca=ua(ca)}for(let Ha=0;Ha<V.domain.codedValues.length;Ha++){const Ia=V.domain.codedValues[Ha];Ia.code===ca&&(na=Ia)}return null===na?ca:na.name}function ba(V,ca){if(!V||!V.domain)return ca;let na=null;ca=ka(ca);for(let Ha=0;Ha<V.domain.codedValues.length;Ha++){const Ia=V.domain.codedValues[Ha];Ia.name===
ca&&(na=Ia)}return null===na?ca:na.code}function da(V,ca,na=null,Ha=null){if(!ca||!ca.fields)return null;let Ia=null;for(let ab=0;ab<ca.fields.length;ab++){const db=ca.fields[ab];db.name.toLowerCase()===V.toString().toLowerCase()&&(Ia=db)}if(null===Ia)throw Error("Field not found");let Qa,Va;null===Ha&&na&&ca.typeIdField&&(Ha=na.hasField(ca.typeIdField)?na.field(ca.typeIdField):null);null!==Ha&&void 0!==Ha&&ca.types.some(function(ab){return ab.id===Ha?((Qa=ab.domains&&ab.domains[Ia.name])&&"inherited"===
Qa.type&&(Qa=ia(Ia.name,ca),Va=!0),!0):!1});Va||Qa||(Qa=ia(V,ca));return{field:Ia,domain:Qa}}function ia(V,ca){let na;ca.fields.some(function(Ha){Ha.name.toLowerCase()===V.toLowerCase()&&(na=Ha.domain);return!!na});return na}function ja(V,ca){ca||(ca={});"function"===typeof ca&&(ca={cmp:ca});const na="boolean"===typeof ca.cycles?ca.cycles:!1,Ha=ca.cmp&&function(Qa){return function(Va){return function(ab,db){return Qa({key:ab,value:Va[ab]},{key:db,value:Va[db]})}}}(ca.cmp),Ia=[];return function ab(Va){Va&&
Va.toJSON&&"function"===typeof Va.toJSON&&(Va=Va.toJSON());if(void 0!==Va){if("number"===typeof Va)return isFinite(Va)?""+Va:"null";if("object"!==typeof Va)return JSON.stringify(Va);var db;if(Array.isArray(Va)){var ib="[";for(db=0;db<Va.length;db++)db&&(ib+=","),ib+=ab(Va[db])||"null";return ib+"]"}if(null===Va)return"null";if(Ia.includes(Va)){if(na)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ub=Ia.push(Va)-1,Yb=Object.keys(Va).sort(Ha&&Ha(Va));
ib="";for(db=0;db<Yb.length;db++){const Zb=Yb[db],$b=ab(Va[Zb]);$b&&(ib&&(ib+=","),ib+=JSON.stringify(Zb)+":"+$b)}Ia.splice(ub,1);return"{"+ib+"}"}}(V)}function sa(V){if(null===V)return null;const ca=[];for(const na of V)na&&na.arcadeDeclaredClass&&"esri.arcade.Feature"===na.arcadeDeclaredClass?ca.push(na.geometry()):ca.push(na);return ca}function ma(V,ca){if(ca instanceof C)V.push(ca.hasZ?ca.hasM?[ca.x,ca.y,ca.z,ca.m]:[ca.x,ca.y,ca.z]:[ca.x,ca.y]);else throw Error("Invalid Argument");}function qa(V,
ca){if(T(V)||w(V)){let na=!1,Ha=!1,Ia=[];if(T(V)){for(const Qa of V)ma(Ia,Qa);0<Ia.length&&(ca=V[0].spatialReference,na=V[0].hasZ,Ha=V[0].hasM)}else if(V instanceof F)Ia=V._elements,0<Ia.length&&(na=V._hasZ,Ha=V._hasM,ca=V.get(0).spatialReference);else if(w(V)){for(const Qa of V.toArray())ma(Ia,Qa);0<Ia.length&&(ca=V.get(0).spatialReference,na=!0===V.get(0).hasZ,Ha=!0===V.get(0).hasM)}else throw Error("Invalid Argument");if(0===Ia.length)return null;!1===t.isClockwise(Ia,Ha,na)&&(Ia=Ia.slice(0).reverse());
return new x({rings:[Ia],spatialReference:ca,hasZ:na,hasM:Ha})}return V}function Ca(V,ca){if(T(V)||w(V)){let na=!1,Ha=!1,Ia=[];if(T(V)){for(const Qa of V)ma(Ia,Qa);0<Ia.length&&(ca=V[0].spatialReference,na=!0===V[0].hasZ,Ha=!0===V[0].hasM)}else if(V instanceof F)Ia=V._elements,0<Ia.length&&(na=V._hasZ,Ha=V._hasM,ca=V.get(0).spatialReference);else if(w(V)){for(const Qa of V.toArray())ma(Ia,Qa);0<Ia.length&&(ca=V.get(0).spatialReference,na=!0===V.get(0).hasZ,Ha=!0===V.get(0).hasM)}return 0===Ia.length?
null:new k({paths:[Ia],spatialReference:ca,hasZ:na,hasM:Ha})}return V}function La(V,ca){if(T(V)||w(V)){let na=!1,Ha=!1,Ia=[];if(T(V)){for(const Qa of V)ma(Ia,Qa);0<Ia.length&&(ca=V[0].spatialReference,na=!0===V[0].hasZ,Ha=!0===V[0].hasM)}else if(V instanceof F)Ia=V._elements,0<Ia.length&&(na=V._hasZ,Ha=V._hasM,ca=V.get(0).spatialReference);else if(w(V)){for(const Qa of V.toArray())ma(Ia,Qa);0<Ia.length&&(ca=V.get(0).spatialReference,na=!0===V.get(0).hasZ,Ha=!0===V.get(0).hasM)}return 0===Ia.length?
null:new K({points:Ia,spatialReference:ca,hasZ:na,hasM:Ha})}return V}function Fa(V,ca=!1){const na=[];if(null===V)return na;if(!0===T(V)){for(var Ha=0;Ha<V.length;Ha++){var Ia=ka(V[Ha]);""===Ia&&!0!==ca||na.push(Ia)}return na}if(V instanceof G){for(Ha=0;Ha<V.length();Ha++)Ia=ka(V.get(Ha)),""===Ia&&!0!==ca||na.push(Ia);return na}return l(V)?(V=ka(V),""===V&&!0!==ca||na.push(V),na):[]}function Da(V){Pb++;return 0===Pb%100?(Pb=0,new Promise(ca=>{setTimeout(()=>{ca(V)},0)})):V}function Ba(V,ca,na){switch(na){case "\x26":return V&
ca;case "|":return V|ca;case "^":return V^ca;case "\x3c\x3c":return V<<ca;case "\x3e\x3e":return V>>ca;case "\x3e\x3e\x3e":return V>>>ca}}function Ka(V,ca=null){if(null!=V){if(m(V)||D(V)||r(V))return V;if(V instanceof L)return!0===(null==ca?void 0:ca.keepGeometryType)?V:V.toJSON();if(V instanceof G)return V.toArray().map(na=>Ka(na,ca));if(V instanceof Array)return V.map(na=>Ka(na,ca));if(V instanceof Date)return V;if(null!==V&&"object"===typeof V&&void 0!==V.castAsJson)return V.castAsJson(ca)}return null}
function Na(V,ca,na,Ha,Ia){return Ta.apply(this,arguments)}function Ta(){Ta=u._asyncToGenerator(function*(V,ca,na,Ha,Ia){V=yield Pa(V,ca,na);Ia[Ha]=V});return Ta.apply(this,arguments)}function Pa(V){return bb.apply(this,arguments)}function bb(){bb=u._asyncToGenerator(function*(V,ca=null,na=null){V instanceof G&&(V=V.toArray());if(null!=V){if(l(V)||V instanceof L||V instanceof Date)return Ka(V,na);if(V instanceof Array){const Ha=[],Ia=[];for(const Qa of V)null===Qa||l(Qa)||Qa instanceof L||Qa instanceof
Date?Ia.push(Ka(Qa,na)):(Ia.push(null),Ha.push(Na(Qa,ca,na,Ia.length-1,Ia)));0<Ha.length&&(yield Promise.all(Ha));return Ia}if(null!==V&&"object"===typeof V&&void 0!==V.castAsJsonAsync)return V.castAsJsonAsync(ca,na)}return null});return bb.apply(this,arguments)}function ta(V,ca,na){const Ha=V.fullSchema();return null!==Ha&&Ha.fields?da(ca,Ha,V,na):null}function hb(V){V=V.fullSchema();return null!==V&&V.fields?V.typeIdField?{subtypeField:V.typeIdField,subtypes:V.types?V.types.map(ca=>({name:ca.name,
code:ca.id})):[]}:null:null}function Qb(V,ca,na,Ha){const Ia=V.fullSchema();if(null===Ia||!Ia.fields)return null;Ha=da(ca,Ia,V,Ha);if(void 0===na)try{na=V.field(ca)}catch(Qa){return null}return xa(Ha,na)}function vb(V,ca,na,Ha){const Ia=V.fullSchema();if(null===Ia||!Ia.fields)return null;if(void 0===na){try{na=V.field(ca)}catch(Qa){return null}return na}V=da(ca,Ia,V,Ha);return ba(V,na)}function B(V){V=V.fullSchema();if(null===V||!V.fields)return null;const ca=[];for(const na of V.fields)ca.push(z.esriFieldToJson(na));
return{objectIdField:V.objectIdField,globalIdField:V.globalIdField,geometryType:void 0===z.layerGeometryEsriRestConstants[V.geometryType]?"":z.layerGeometryEsriRestConstants[V.geometryType],fields:ca}}let Hb=function(V){this.value=V},wb=function(V){this.value=V},Ab=function(V){this.fn=V},Gb=function(V,ca){this.paramCount=ca;this.fn=V};const Rb=Ab,Bb=Gb,eb={type:"VOID"},xb={type:"BREAK"},Sb={type:"CONTINUE"};let Pb=0;const Ib=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Hb,ImplicitResultE:wb,
NativeFunctionE:Ab,SizzleFunctionE:Gb,NativeFunction:Rb,ImplicitResult:wb,ReturnResult:Hb,SizzleFunction:Bb,voidOperation:eb,breakResult:xb,continueResult:Sb,multiReplace:e,isFunctionParameter:h,isSimpleType:l,defaultUndefined:y,isString:r,isBoolean:m,isNumber:D,isInteger:O,isArray:T,isFeature:Q,isFeatureSet:N,isFeatureSetCollection:P,isImmutableArray:w,isDate:E,pcCheck:J,absRound:X,generateUUID:W,formatNumber:p,formatDate:H,standardiseDateFormat:I,greaterThanLessThan:Z,equalityTest:ea,toString:ka,
toNumberArray:ya,toStringExplicit:oa,toNumber:ua,toDate:Ga,toDateTime:ha,toBoolean:wa,fixSpatialReference:za,fixNullGeometry:Aa,getDomainValue:xa,getDomainCode:ba,getDomain:da,stableStringify:ja,autoCastFeatureToGeometry:sa,autoCastArrayOfPointsToPolygon:qa,autoCastArrayOfPointsToPolyline:Ca,autoCastArrayOfPointsToMultiPoint:La,toStringArray:Fa,tick:Da,binaryOperator:Ba,castAsJson:Ka,castAsJsonAsync:Pa,featureFullDomain:ta,featureSubtypes:hb,featureDomainValueLookup:Qb,featureDomainCodeLookup:vb,
featureSchema:B},Symbol.toStringTag,{value:"Module"}));d.ImplicitResult=wb;d.ImplicitResultE=wb;d.NativeFunction=Rb;d.NativeFunctionE=Ab;d.ReturnResult=Hb;d.ReturnResultE=Hb;d.SizzleFunction=Bb;d.SizzleFunctionE=Gb;d.absRound=X;d.autoCastArrayOfPointsToMultiPoint=La;d.autoCastArrayOfPointsToPolygon=qa;d.autoCastArrayOfPointsToPolyline=Ca;d.autoCastFeatureToGeometry=sa;d.binaryOperator=Ba;d.breakResult=xb;d.castAsJson=Ka;d.castAsJsonAsync=Pa;d.continueResult=Sb;d.defaultUndefined=y;d.equalityTest=
ea;d.featureDomainCodeLookup=vb;d.featureDomainValueLookup=Qb;d.featureFullDomain=ta;d.featureSchema=B;d.featureSubtypes=hb;d.fixNullGeometry=Aa;d.fixSpatialReference=za;d.formatDate=H;d.formatNumber=p;d.generateUUID=W;d.getDomain=da;d.getDomainCode=ba;d.getDomainValue=xa;d.greaterThanLessThan=Z;d.isArray=T;d.isBoolean=m;d.isDate=E;d.isFeature=Q;d.isFeatureSet=N;d.isFeatureSetCollection=P;d.isFunctionParameter=h;d.isImmutableArray=w;d.isInteger=O;d.isNumber=D;d.isSimpleType=l;d.isString=r;d.lc=Ib;
d.multiReplace=e;d.pcCheck=J;d.stableStringify=ja;d.standardiseDateFormat=I;d.tick=Da;d.toBoolean=wa;d.toDate=Ga;d.toDateTime=ha;d.toNumber=ua;d.toNumberArray=ya;d.toString=ka;d.toStringArray=Fa;d.toStringExplicit=oa;d.voidOperation=eb})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(d,u){this.context=this.definition=null;this.definition=d;this.context=u}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function d(c=[]){this._elements=c}var u=
d.prototype;u.length=function(){return this._elements.length};u.get=function(c){return this._elements[c]};u.toArray=function(){const c=[];for(let G=0;G<this.length();G++)c.push(this.get(G));return c};return d}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(d,u,c){return function(G){function f(A,L,K,C,x){A=G.call(this,A)||this;A._lazyPath=[];A._hasZ=!1;A._hasM=!1;A._hasZ=K;A._hasM=C;A._spRef=L;A._cacheId=
x;return A}d._inheritsLoose(f,G);var F=f.prototype;F.get=function(A){if(void 0===this._lazyPath[A]){const L=this._elements[A];if(void 0===L)return;this._lazyPath[A]=new c(L,this._spRef,this._hasZ,this._hasM,this._cacheId,A)}return this._lazyPath[A]};F.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof f?!1:A.getUniqueHash()===this.getUniqueHash()};F.getUniqueHash=function(){return this._cacheId.toString()};return f}(u)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./ImmutableArray","../geometry/Point"],function(d,u,c){return function(G){function f(A,L,K,C,x,k){A=G.call(this,A)||this;A._lazyPt=[];A._hasZ=!1;A._hasM=!1;A._spRef=L;A._hasZ=K;A._hasM=C;A._cacheId=x;A._partId=k;return A}d._inheritsLoose(f,G);var F=f.prototype;F.get=function(A){if(void 0===this._lazyPt[A]){const L=this._elements[A];if(void 0===L)return;const K=this._hasZ,C=this._hasM;let x=null;x=K&&!C?new c(L[0],L[1],L[2],void 0,this._spRef):C&&!K?new c(L[0],L[1],void 0,L[2],this._spRef):K&&C?new c(L[0],
L[1],L[2],L[3],this._spRef):new c(L[0],L[1],this._spRef);x.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+A.toString();this._lazyPt[A]=x}return this._lazyPt[A]};F.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof f?!1:A.getUniqueHash()===this.getUniqueHash()};F.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return f}(u)})},"esri/chunks/datetime":function(){define(["exports"],function(d){function u(a){return"undefined"===
typeof a}function c(a){return"number"===typeof a}function G(a){return"number"===typeof a&&0===a%1}function f(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function F(a,b,S){if(0!==a.length)return a.reduce((Y,aa)=>{aa=[b(aa),aa];return Y?S(Y[0],aa[0])===Y[0]?Y:aa:aa},null)[1]}function A(a,b){return b.reduce((S,Y)=>{S[Y]=a[Y];return S},{})}function L(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function K(a,b,S){return G(a)&&a>=b&&a<=S}function C(a,b=2){return 0>
a?"-"+(""+-a).padStart(b,"0"):(""+a).padStart(b,"0")}function x(a){if(!u(a)&&null!==a&&""!==a)return parseInt(a,10)}function k(a){if(!u(a)&&null!==a&&""!==a)return parseFloat(a)}function g(a){if(!u(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function q(a,b,S=!1){b=10**b;return(S?Math.trunc:Math.round)(a*b)/b}function v(a){return 0===a%4&&(0!==a%100||0===a%400)}function t(a,b){var S=b-1;S=S-12*Math.floor(S/12)+1;return 2===S?v(a+(b-S)/12)?29:28:[31,null,31,30,31,30,31,31,30,
31,30,31][S-1]}function n(a){let b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(b=new Date(b),b.setUTCFullYear(b.getUTCFullYear()-1900));return+b}function z(a){var b=a-1;b=(b+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===b?53:52}function e(a){return 99<a?a:60<a?1900+a:2E3+a}function h(a,b,S,Y=null){a=new Date(a);const aa={hourCycle:"h23",year:"numeric",month:"2-digit",
day:"2-digit",hour:"2-digit",minute:"2-digit"};Y&&(aa.timeZone=Y);return(b=(new Intl.DateTimeFormat(S,{timeZoneName:b,...aa})).formatToParts(a).find(fa=>"timezonename"===fa.type.toLowerCase()))?b.value:null}function l(a,b){a=parseInt(a,10);Number.isNaN(a)&&(a=0);b=parseInt(b,10)||0;b=0>a||Object.is(a,-0)?-b:b;return 60*a+b}function y(a){const b=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(b))throw new mb(`Invalid unit value ${a}`);return b}function r(a,b){const S={};for(const Y in a)if(L(a,
Y)){const aa=a[Y];void 0!==aa&&null!==aa&&(S[b(Y)]=y(aa))}return S}function m(a,b){const S=Math.trunc(Math.abs(a/60)),Y=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(b){case "short":return`${a}${C(S,2)}:${C(Y,2)}`;case "narrow":return`${a}${S}${0<Y?`:${Y}`:""}`;case "techie":return`${a}${C(S,2)}${C(Y,2)}`;default:throw new RangeError(`Value format ${b} is out of range for property format`);}}function D(a){return A(a,["hour","minute","second","millisecond"])}function O(a){switch(a){case "narrow":return[...Od];
case "short":return[...Mc];case "long":return[...Pd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function T(a){switch(a){case "narrow":return[...Qd];case "short":return[...Nc];case "long":return[...Oc];case "numeric":return"1234567".split("");default:return null}}function Q(a){switch(a){case "narrow":return[...Rd];case "short":return[...Sd];case "long":return[...Td];default:return null}}function N(a,
b,S="always",Y=!1){const aa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var fa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===S&&fa)switch(S="days"===a,b){case 1:return S?"tomorrow":`next ${aa[a][0]}`;case -1:return S?"yesterday":`last ${aa[a][0]}`;case 0:return S?"today":`this ${aa[a][0]}`}S=Object.is(b,-0)||0>b;b=Math.abs(b);fa=1===b;const ra=
aa[a];a=Y?fa?ra[1]:ra[2]||ra[1]:fa?aa[a][0]:a;return S?`${b} ${a} ago`:`in ${b} ${a}`}function P(a,b){let S="";for(const Y of a)S=Y.literal?S+Y.val:S+b(Y.val);return S}function w(a,b){if(u(a)||null===a)return b;if(a instanceof Ub)return a;if("string"===typeof a){const S=a.toLowerCase();return"local"===S||"system"===S?b:"utc"===S||"gmt"===S?jb.utcInstance:jb.parseSpecifier(S)||Cb.create(a)}return c(a)?jb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Ud(a)}function E(a,
b={}){const S=JSON.stringify([a,b]);let Y=Pc[S];Y||(Y=new Intl.ListFormat(a,b),Pc[S]=Y);return Y}function J(a,b={}){const S=JSON.stringify([a,b]);let Y=tc[S];Y||(Y=new Intl.DateTimeFormat(a,b),tc[S]=Y);return Y}function X(a,b={}){const S=JSON.stringify([a,b]);let Y=ac[S];Y||(Y=new Intl.NumberFormat(a,b),ac[S]=Y);return Y}function W(a,b={}){const {base:S,...Y}=b,aa=JSON.stringify([a,Y]);let fa=uc[aa];fa||(fa=new Intl.RelativeTimeFormat(a,b),uc[aa]=fa);return fa}function p(a){const b=[];for(let S=1;12>=
S;S++){const Y=R.utc(2016,S,1);b.push(a(Y))}return b}function H(a){const b=[];for(let S=1;7>=S;S++){const Y=R.utc(2016,11,13+S);b.push(a(Y))}return b}function I(a,b,S,Y,aa){a=a.listingMode(S);return"error"===a?null:"en"===a?Y(b):aa(b)}function U(...a){a=a.reduce((b,S)=>b+S.source,"");return RegExp(`^${a}$`)}function Z(...a){return b=>a.reduce(([S,Y,aa],fa)=>{const [ra,Ea,Ja]=fa(b,aa);return[{...S,...ra},Ea||Y,Ja]},[{},null,1]).slice(0,2)}function ea(a,...b){if(null==a)return[null,null];for(const [S,
Y]of b)if(b=S.exec(a))return Y(b);return[null,null]}function ka(...a){return(b,S)=>{const Y={};let aa;for(aa=0;aa<a.length;aa++)Y[a[aa]]=x(b[S+aa]);return[Y,null,S+aa]}}function ya(a,b,S){a=a[b];return u(a)?S:x(a)}function oa(a,b){return[{hours:ya(a,b,0),minutes:ya(a,b+1,0),seconds:ya(a,b+2,0),milliseconds:g(a[b+3])},null,b+4]}function va(a,b){const S=!a[b]&&!a[b+1];a=l(a[b+1],a[b+2]);return[{},S?null:jb.instance(a),b+3]}function ua(a,b){return[{},a[b]?Cb.create(a[b]):null,b+1]}function Ga(a){const [b,
S,Y,aa,fa,ra,Ea,Ja,Ra]=a,Ma="-"===b[0];a=Ja&&"-"===Ja[0];const Oa=(Ua,$a=!1)=>void 0!==Ua&&($a||Ua&&Ma)?-Ua:Ua;return[{years:Oa(k(S)),months:Oa(k(Y)),weeks:Oa(k(aa)),days:Oa(k(fa)),hours:Oa(k(ra)),minutes:Oa(k(Ea)),seconds:Oa(k(Ja),"-0"===Ja),milliseconds:Oa(g(Ra),a)}]}function ha(a,b,S,Y,aa,fa,ra){b={year:2===b.length?e(x(b)):x(b),month:Mc.indexOf(S)+1,day:x(Y),hour:x(aa),minute:x(fa)};ra&&(b.second=x(ra));a&&(b.weekday=3<a.length?Oc.indexOf(a)+1:Nc.indexOf(a)+1);return b}function la(a){const [,
b,S,Y,aa,fa,ra,Ea,Ja,Ra,Ma,Oa]=a;a=ha(b,aa,Y,S,fa,ra,Ea);let Ua;Ua=Ja?Vd[Ja]:Ra?0:l(Ma,Oa);return[a,new jb(Ua)]}function wa(a){const [,b,S,Y,aa,fa,ra,Ea]=a;return[ha(b,aa,Y,S,fa,ra,Ea),jb.utcInstance]}function za(a){const [,b,S,Y,aa,fa,ra,Ea]=a;return[ha(b,Ea,S,Y,aa,fa,ra),jb.utcInstance]}function Aa(a,b,S=!1){a={values:S?b.values:{...a.values,...b.values||{}},loc:a.loc.clone(b.loc),conversionAccuracy:b.conversionAccuracy||a.conversionAccuracy};return new Sa(a)}function xa(a,b,S,Y,aa){a=a[aa][S];
var fa=b[S]/a;fa=Math.sign(fa)!==Math.sign(Y[aa])&&0!==Y[aa]&&1>=Math.abs(fa)?0>fa?Math.floor(fa):Math.ceil(fa):Math.trunc(fa);Y[aa]+=fa;b[S]-=fa*a}function ba(a,b){Wd.reduce((S,Y)=>{if(u(b[Y]))return S;S&&xa(a,b,S,b,Y);return Y},null)}function da(a,b){a=b.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Sa.fromMillis(a).as("days"))}function ia(a,b,S){var Y=[["years",(Ea,Ja)=>Ja.year-Ea.year],["quarters",(Ea,Ja)=>Ja.quarter-
Ea.quarter],["months",(Ea,Ja)=>Ja.month-Ea.month+12*(Ja.year-Ea.year)],["weeks",(Ea,Ja)=>{Ea=da(Ea,Ja);return(Ea-Ea%7)/7}],["days",da]];const aa={};let fa,ra;for(const [Ea,Ja]of Y)0<=S.indexOf(Ea)&&(fa=Ea,Y=Ja(a,b),ra=a.plus({[Ea]:Y}),ra>b?(a=a.plus({[Ea]:Y-1}),--Y):a=ra,aa[Ea]=Y);return[a,aa,ra,fa]}function ja(a,b,S,Y){let [aa,fa,ra,Ea]=ia(a,b,S);a=b-aa;S=S.filter(Ja=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ja));0===S.length&&(ra<b&&(ra=aa.plus({[Ea]:1})),ra!==aa&&(fa[Ea]=(fa[Ea]||
0)+a/(ra-aa)));b=Sa.fromObject(fa,Y);return 0<S.length?Sa.fromMillis(a,Y).shiftTo(...S).plus(b):b}function sa({numberingSystem:a},b=""){return new RegExp(`${vc[a||"latn"]}${b}`)}function ma(a,b=S=>S){return{regex:a,deser:([S])=>{{let Y=parseInt(S,10);if(isNaN(Y)){Y="";for(let aa=0;aa<S.length;aa++){const fa=S.charCodeAt(aa);if(-1!==S[aa].search(vc.hanidec))Y+=Xd.indexOf(S[aa]);else for(const ra in Qc){const [Ea,Ja]=Qc[ra];fa>=Ea&&fa<=Ja&&(Y+=fa-Ea)}}S=parseInt(Y,10)}else S=Y}return b(S)}}}function qa(a){return a.replace(/\./g,
"\\.?").replace(wc,Rc)}function Ca(a,b){return null===a?null:{regex:RegExp(a.map(qa).join("|")),deser:([S])=>a.findIndex(Y=>S.replace(/\./g,"").replace(wc," ").toLowerCase()===Y.replace(/\./g,"").replace(wc," ").toLowerCase())+b}}function La(a,b){return{regex:a,deser:([,S,Y])=>l(S,Y),groups:b}}function Fa(a){return{regex:a,deser:([b])=>b}}function Da(a,b){const S=sa(b),Y=sa(b,"{2}"),aa=sa(b,"{3}"),fa=sa(b,"{4}"),ra=sa(b,"{6}"),Ea=sa(b,"{1,2}"),Ja=sa(b,"{1,3}"),Ra=sa(b,"{1,6}"),Ma=sa(b,"{1,9}"),Oa=
sa(b,"{2,4}"),Ua=sa(b,"{4,6}"),$a=sb=>({regex:RegExp(sb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Jb])=>Jb,literal:!0}),qb=(sb=>{if(a.literal)return $a(sb);switch(sb.val){case "G":return Ca(b.eras("short",!1),0);case "GG":return Ca(b.eras("long",!1),0);case "y":return ma(Ra);case "yy":return ma(Oa,e);case "yyyy":return ma(fa);case "yyyyy":return ma(Ua);case "yyyyyy":return ma(ra);case "M":return ma(Ea);case "MM":return ma(Y);case "MMM":return Ca(b.months("short",!0,!1),1);case "MMMM":return Ca(b.months("long",
!0,!1),1);case "L":return ma(Ea);case "LL":return ma(Y);case "LLL":return Ca(b.months("short",!1,!1),1);case "LLLL":return Ca(b.months("long",!1,!1),1);case "d":return ma(Ea);case "dd":return ma(Y);case "o":return ma(Ja);case "ooo":return ma(aa);case "HH":return ma(Y);case "H":return ma(Ea);case "hh":return ma(Y);case "h":return ma(Ea);case "mm":return ma(Y);case "m":return ma(Ea);case "q":return ma(Ea);case "qq":return ma(Y);case "s":return ma(Ea);case "ss":return ma(Y);case "S":return ma(Ja);case "SSS":return ma(aa);
case "u":return Fa(Ma);case "uu":return Fa(Ea);case "uuu":return ma(S);case "a":return Ca(b.meridiems(),0);case "kkkk":return ma(fa);case "kk":return ma(Oa,e);case "W":return ma(Ea);case "WW":return ma(Y);case "E":case "c":return ma(S);case "EEE":return Ca(b.weekdays("short",!1,!1),1);case "EEEE":return Ca(b.weekdays("long",!1,!1),1);case "ccc":return Ca(b.weekdays("short",!0,!1),1);case "cccc":return Ca(b.weekdays("long",!0,!1),1);case "Z":case "ZZ":return La(new RegExp(`([+-]${Ea.source})(?::(${Y.source}))?`),
2);case "ZZZ":return La(new RegExp(`([+-]${Ea.source})(${Y.source})?`),2);case "z":return Fa(/[a-z_+-/]{1,256}?/i);default:return $a(sb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};qb.token=a;return qb}function Ba(a){return[`^${a.map(b=>b.regex).reduce((b,S)=>`${b}(${S.source})`,"")}$`,a]}function Ka(a,b,S){if(a=a.match(b)){b={};let Y=1;for(const aa in S)if(L(S,aa)){const fa=S[aa],ra=fa.groups?fa.groups+1:1;!fa.literal&&fa.token&&(b[fa.token.val[0]]=fa.deser(a.slice(Y,
Y+ra)));Y+=ra}return[a,b]}return[a,{}]}function Na(a){const b=aa=>{switch(aa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let S=null,Y;u(a.z)||(S=Cb.create(a.z));u(a.Z)||(S||(S=new jb(a.Z)),Y=a.Z);u(a.q)||
(a.M=3*(a.q-1)+1);u(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);u(a.u)||(a.S=g(a.u));return[Object.keys(a).reduce((aa,fa)=>{const ra=b(fa);ra&&(aa[ra]=a[fa]);return aa},{}),S,Y]}function Ta(){bc||(bc=R.fromMillis(1555555555555));return bc}function Pa(a,b){if(a.literal)return a;const S=kb.macroTokenToFormatOpts(a.val);if(!S)return a;b=kb.create(b,S).formatDateTimeParts(Ta()).map(Y=>{{const {type:fa,value:ra}=Y;if("literal"===fa)Y={literal:!0,val:ra};else{Y=S[fa];
var aa=Sc[fa];"object"===typeof aa&&(aa=aa[Y]);Y=aa?{literal:!1,val:aa}:void 0}}return Y});return b.includes(void 0)?a:b}function bb(a,b){return Array.prototype.concat(...a.map(S=>Pa(S,b)))}function ta(a,b,S){S=bb(kb.parseFormat(S),a);var Y=S.map(fa=>Da(fa,a));const aa=Y.find(fa=>fa.invalidReason);if(aa)return{input:b,tokens:S,invalidReason:aa.invalidReason};{const [fa,ra]=Ba(Y);Y=RegExp(fa,"i");const [Ea,Ja]=Ka(b,Y,ra),[Ra,Ma,Oa]=Ja?Na(Ja):[null,null,void 0];if(L(Ja,"a")&&L(Ja,"H"))throw new Vb("Can't include meridiem when specifying 24-hour format");
return{input:b,tokens:S,regex:Y,rawMatches:Ea,matches:Ja,result:Ra,zone:Ma,specificOffset:Oa}}}function hb(a,b){return new rb("unit out of range",`you specified ${b} (of type ${typeof b}) as a ${a}, which is invalid`)}function Qb(a,b,S){b=new Date(Date.UTC(a,b-1,S));100>a&&0<=a&&b.setUTCFullYear(b.getUTCFullYear()-1900);a=b.getUTCDay();return 0===a?7:a}function vb(a,b){a=v(a)?cc:dc;const S=a.findIndex(Y=>Y<b);return{month:S+1,day:b-a[S]}}function B(a){const {year:b,month:S,day:Y}=a;var aa=Y+(v(b)?
cc:dc)[S-1];const fa=Qb(b,S,Y);aa=Math.floor((aa-fa+10)/7);let ra;1>aa?(ra=b-1,aa=z(ra)):aa>z(b)?(ra=b+1,aa=1):ra=b;return{weekYear:ra,weekNumber:aa,weekday:fa,...D(a)}}function Hb(a){const {weekYear:b,weekNumber:S,weekday:Y}=a;var aa=Qb(b,1,4),fa=v(b)?366:365;aa=7*S+Y-aa-3;1>aa?(fa=b-1,aa+=v(fa)?366:365):aa>fa?(fa=b+1,aa-=v(b)?366:365):fa=b;const {month:ra,day:Ea}=vb(fa,aa);return{year:fa,month:ra,day:Ea,...D(a)}}function wb(a){const {year:b,month:S,day:Y}=a;var aa=Y+(v(b)?cc:dc)[S-1];return{year:b,
ordinal:aa,...D(a)}}function Ab(a){const {year:b,ordinal:S}=a,{month:Y,day:aa}=vb(b,S);return{year:b,month:Y,day:aa,...D(a)}}function Gb(a){const b=G(a.year),S=K(a.month,1,12),Y=K(a.day,1,t(a.year,a.month));return b?S?Y?!1:hb("day",a.day):hb("month",a.month):hb("year",a.year)}function Rb(a){const {hour:b,minute:S,second:Y,millisecond:aa}=a;a=K(b,0,23)||24===b&&0===S&&0===Y&&0===aa;const fa=K(S,0,59),ra=K(Y,0,59),Ea=K(aa,0,999);return a?fa?ra?Ea?!1:hb("millisecond",aa):hb("second",Y):hb("minute",S):
hb("hour",b)}function Bb(a){return new rb("unsupported zone",`the zone "${a.name}" is not supported`)}function eb(a){null===a.weekData&&(a.weekData=B(a.c));return a.weekData}function xb(a,b){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new R({...a,...b,old:a})}function Sb(a,b,S){let Y=a-6E4*b;const aa=S.offset(Y);if(b===aa)return[Y,b];Y-=6E4*(aa-b);b=S.offset(Y);return aa===b?[Y,aa]:[a-6E4*Math.min(aa,b),Math.max(aa,b)]}function Pb(a,b){a=new Date(a+6E4*b);return{year:a.getUTCFullYear(),
month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Ib(a,b,S){return Sb(n(a),b,S)}function V(a,b){const S=a.o;var Y=a.c.year+Math.trunc(b.years);const aa=a.c.month+Math.trunc(b.months)+3*Math.trunc(b.quarters);Y={...a.c,year:Y,month:aa,day:Math.min(a.c.day,t(Y,aa))+Math.trunc(b.days)+7*Math.trunc(b.weeks)};b=Sa.fromObject({years:b.years-Math.trunc(b.years),quarters:b.quarters-Math.trunc(b.quarters),
months:b.months-Math.trunc(b.months),weeks:b.weeks-Math.trunc(b.weeks),days:b.days-Math.trunc(b.days),hours:b.hours,minutes:b.minutes,seconds:b.seconds,milliseconds:b.milliseconds}).as("milliseconds");Y=n(Y);let [fa,ra]=Sb(Y,S,a.zone);0!==b&&(fa+=b,ra=a.zone.offset(fa));return{ts:fa,o:ra}}function ca(a,b,S,Y,aa,fa){const {setZone:ra,zone:Ea}=S;return a&&0!==Object.keys(a).length?(a=R.fromObject(a,{...S,zone:b||Ea,specificOffset:fa}),ra?a:a.setZone(Ea)):R.invalid(new rb("unparsable",`the input "${aa}" can't be parsed as ${Y}`))}
function na(a,b,S=!0){return a.isValid?kb.create(Ya.create("en-US"),{allowZ:S,forceSimple:!0}).formatDateTimeFromString(a,b):null}function Ha(a,b){const S=9999<a.c.year||0>a.c.year;let Y="";S&&0<=a.c.year&&(Y+="+");Y+=C(a.c.year,S?6:4);b?(Y=Y+"-"+C(a.c.month),Y=Y+"-"+C(a.c.day)):(Y+=C(a.c.month),Y+=C(a.c.day));return Y}function Ia(a,b,S,Y,aa,fa){let ra=C(a.c.hour);b?(ra=ra+":"+C(a.c.minute),0===a.c.second&&S||(ra+=":")):ra+=C(a.c.minute);0===a.c.second&&S||(ra+=C(a.c.second),0===a.c.millisecond&&
Y||(ra=ra+"."+C(a.c.millisecond,3)));aa&&(a.isOffsetFixed&&0===a.offset&&!fa?ra+="Z":0>a.o?(ra=ra+"-"+C(Math.trunc(-a.o/60)),ra=ra+":"+C(Math.trunc(-a.o%60))):(ra=ra+"+"+C(Math.trunc(a.o/60)),ra=ra+":"+C(Math.trunc(a.o%60))));fa&&(ra+="["+a.zone.ianaName+"]");return ra}function Qa(a){const b={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",
milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!b)throw new Tc(a);return b}function Va(a,b){const S=w(b.zone,cb.defaultZone);b=Ya.fromObject(b);const Y=cb.now();var aa;if(u(a.year))a=Y;else{for(const fa of ec)u(a[fa])&&(a[fa]=M[fa]);if(aa=Gb(a)||Rb(a))return R.invalid(aa);aa=S.offset(Y);[a,aa]=Ib(a,aa,S)}return new R({ts:a,zone:S,
loc:b,o:aa})}function ab(a,b,S){const Y=u(S.round)?!0:S.round,aa=(ra,Ea)=>{ra=q(ra,Y||S.calendary?0:2,!0);return b.loc.clone(S).relFormatter(S).format(ra,Ea)},fa=ra=>S.calendary?b.hasSame(a,ra)?0:b.startOf(ra).diff(a.startOf(ra),ra).get(ra):b.diff(a,ra).get(ra);if(S.unit)return aa(fa(S.unit),S.unit);for(const ra of S.units){const Ea=fa(ra);if(1<=Math.abs(Ea))return aa(Ea,ra)}return aa(a>b?-0:0,S.units[S.units.length-1])}function db(a){let b={};0<a.length&&"object"===typeof a[a.length-1]?(b=a[a.length-
1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[b,a]}function ib(a){if(R.isDateTime(a))return a;if(a&&a.valueOf&&c(a.valueOf()))return R.fromJSDate(a);if(a&&"object"===typeof a)return R.fromObject(a);throw new mb(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class ub extends Error{}class Yb extends ub{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Zb extends ub{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class $b extends ub{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}
class Vb extends ub{}class Tc extends ub{constructor(a){super(`Invalid unit ${a}`)}}class mb extends ub{}class Db extends ub{constructor(){super("Zone is an abstract class")}}const xc={year:"numeric",month:"numeric",day:"numeric"},Uc={year:"numeric",month:"short",day:"numeric"},Yd={year:"numeric",month:"short",day:"numeric",weekday:"short"},Vc={year:"numeric",month:"long",day:"numeric"},Wc={year:"numeric",month:"long",day:"numeric",weekday:"long"},Xc={hour:"numeric",minute:"numeric"},Yc={hour:"numeric",
minute:"numeric",second:"numeric"},Zc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},$c={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},ad={hour:"numeric",minute:"numeric",hourCycle:"h23"},bd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},cd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},dd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},ed={year:"numeric",
month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},fd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},hd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Zd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},id={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",
timeZoneName:"short"},jd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},kd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},ld={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},md=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Pd="January February March April May June July August September October November December".split(" "),
Mc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Od="JFMAMJJASOND".split(""),Oc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Nc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Qd="MTWTFSS".split(""),yc=["AM","PM"],Td=["Before Christ","Anno Domini"],Sd=["BC","AD"],Rd=["B","A"],nd={D:xc,DD:Uc,DDD:Vc,DDDD:Wc,t:Xc,tt:Yc,ttt:Zc,tttt:$c,T:ad,TT:bd,TTT:cd,TTTT:dd,f:ed,ff:gd,fff:id,ffff:kd,F:fd,FF:hd,FFF:jd,FFFF:ld};class kb{static create(a,b={}){return new kb(a,b)}static parseFormat(a){let b=
null,S="",Y=!1;const aa=[];for(let fa=0;fa<a.length;fa++){const ra=a.charAt(fa);"'"===ra?(0<S.length&&aa.push({literal:Y,val:S}),b=null,S="",Y=!Y):Y?S+=ra:ra===b?S+=ra:(0<S.length&&aa.push({literal:!1,val:S}),b=S=ra)}0<S.length&&aa.push({literal:Y,val:S});return aa}static macroTokenToFormatOpts(a){return nd[a]}constructor(a,b){this.opts=b;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,b){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,
{...this.opts,...b}).format()}formatDateTime(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).format()}formatDateTimeParts(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).formatToParts()}resolvedOptions(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).resolvedOptions()}num(a,b=0){if(this.opts.forceSimple)return C(a,b);const S={...this.opts};0<b&&(S.padTo=b);return this.loc.numberFormatter(S).format(a)}formatDateTimeFromString(a,b){const S="en"===this.loc.listingMode(),
Y=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,aa=(Ma,Oa)=>this.loc.extract(a,Ma,Oa),fa=Ma=>a.isOffsetFixed&&0===a.offset&&Ma.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Ma.format):"",ra=(Ma,Oa)=>S?O(Ma)[a.month-1]:aa(Oa?{month:Ma}:{month:Ma,day:"numeric"},"month"),Ea=(Ma,Oa)=>S?T(Ma)[a.weekday-1]:aa(Oa?{weekday:Ma}:{weekday:Ma,month:"long",day:"numeric"},"weekday"),Ja=Ma=>{const Oa=kb.macroTokenToFormatOpts(Ma);return Oa?this.formatWithSystemDefault(a,Oa):Ma},Ra=Ma=>S?Q(Ma)[0>a.year?
0:1]:aa({era:Ma},"era");return P(kb.parseFormat(b),Ma=>{switch(Ma){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===
a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return fa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return fa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return fa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return S?yc[12>a.hour?
0:1]:aa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Y?aa({day:"numeric"},"day"):this.num(a.day);case "dd":return Y?aa({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ea("short",!0);case "cccc":return Ea("long",!0);case "ccccc":return Ea("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ea("short",!1);case "EEEE":return Ea("long",!1);case "EEEEE":return Ea("narrow",!1);case "L":return Y?aa({month:"numeric",day:"numeric"},
"month"):this.num(a.month);case "LL":return Y?aa({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return ra("short",!0);case "LLLL":return ra("long",!0);case "LLLLL":return ra("narrow",!0);case "M":return Y?aa({month:"numeric"},"month"):this.num(a.month);case "MM":return Y?aa({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return ra("short",!1);case "MMMM":return ra("long",!1);case "MMMMM":return ra("narrow",!1);case "y":return Y?aa({year:"numeric"},"year"):this.num(a.year);
case "yy":return Y?aa({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return Y?aa({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return Y?aa({year:"numeric"},"year"):this.num(a.year,6);case "G":return Ra("short");case "GG":return Ra("long");case "GGGGG":return Ra("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);
case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ja(Ma)}})}formatDurationFromString(a,b){const S=aa=>{switch(aa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};b=kb.parseFormat(b);
const Y=b.reduce((aa,{literal:fa,val:ra})=>fa?aa:aa.concat(ra),[]);a=a.shiftTo(...Y.map(S).filter(aa=>aa));return P(b,(aa=>fa=>{const ra=S(fa);return ra?this.num(aa.get(ra),fa.length):fa})(a))}}class rb{constructor(a,b){this.reason=a;this.explanation=b}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Ub{get type(){throw new Db;}get name(){throw new Db;}get ianaName(){return this.name}get isUniversal(){throw new Db;}offsetName(a,b){throw new Db;}formatOffset(a,
b){throw new Db;}offset(a){throw new Db;}equals(a){throw new Db;}get isValid(){throw new Db;}}let zc=null;class Ac extends Ub{static get instance(){null===zc&&(zc=new Ac);return zc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:b,locale:S}){return h(a,b,S)}formatOffset(a,b){return m(this.offset(a),b)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}
let fc={};const od={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let gc={};class Cb extends Ub{static create(a){gc[a]||(gc[a]=new Cb(a));return gc[a]}static resetCache(){gc={};fc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(b){return!1}}constructor(a){super();this.zoneName=a;this.valid=Cb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,
{format:b,locale:S}){return h(a,b,S,this.name)}formatOffset(a,b){return m(this.offset(a),b)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var b=this.name;fc[b]||(fc[b]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));b=fc[b];if(b.formatToParts){b=b.formatToParts(a);var S=[];for(let Ma=0;Ma<b.length;Ma++){const {type:Oa,value:Ua}=b[Ma],$a=od[Oa];"era"===Oa?S[$a]=Ua:u($a)||(S[$a]=parseInt(Ua,
10))}b=S}else{{b=b.format(a).replace(/\u200E/g,"");b=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(b);const [,Ma,Oa,Ua,$a,qb,sb,Jb]=b;b=[Ua,Ma,Oa,$a,qb,sb,Jb]}}let [Y,aa,fa,ra,Ea,Ja,Ra]=b;"BC"===ra&&(Y=-Math.abs(Y)+1);b=n({year:Y,month:aa,day:fa,hour:24===Ea?0:Ea,minute:Ja,second:Ra,millisecond:0});a=+a;S=a%1E3;return(b-(a-(0<=S?S:1E3+S)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let Bc=null;class jb extends Ub{static get utcInstance(){null===
Bc&&(Bc=new jb(0));return Bc}static instance(a){return 0===a?jb.utcInstance:new jb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new jb(l(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${m(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${m(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,b){return m(this.fixed,b)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Ud extends Ub{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let pd=()=>Date.now(),hc="system",ic=null,qd=null,rd=null,sd;class cb{static get now(){return pd}static set now(a){pd=a}static set defaultZone(a){hc=a}static get defaultZone(){return w(hc,Ac.instance)}static get defaultLocale(){return ic}static set defaultLocale(a){ic=
a}static get defaultNumberingSystem(){return qd}static set defaultNumberingSystem(a){qd=a}static get defaultOutputCalendar(){return rd}static set defaultOutputCalendar(a){rd=a}static get throwOnInvalid(){return sd}static set throwOnInvalid(a){sd=a}static resetCaches(){Ya.resetCache();Cb.resetCache()}}let Pc={},tc={},ac={},uc={},Wb=null;class td{constructor(a,b,S){this.padTo=S.padTo||0;this.floor=S.floor||!1;const {padTo:Y,floor:aa,...fa}=S;if(!b||0<Object.keys(fa).length)b={useGrouping:!1,...S},0<
S.padTo&&(b.minimumIntegerDigits=S.padTo),this.inf=X(a,b)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):q(a,3);return C(a,this.padTo)}}class $d{constructor(a,b,S){this.opts=S;if(a.zone.isUniversal){var Y=a.offset/60*-1;Y=0<=Y?`Etc/GMT+${Y}`:`Etc/GMT${Y}`;0!==a.offset&&Cb.create(Y).valid?this.dt=a:(Y="UTC",this.dt=S.timeZoneName?a:0===a.offset?a:R.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,Y=a.zone.name);a={...this.opts};
Y&&(a.timeZone=Y);this.dtf=J(b,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ae{constructor(a,b,S){this.opts={style:"long",...S};!b&&f()&&(this.rtf=W(a,S))}format(a,b){return this.rtf?this.rtf.format(a,b):N(b,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,b){return this.rtf?this.rtf.formatToParts(a,b):[]}}class Ya{static fromOpts(a){return Ya.create(a.locale,
a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,b,S,Y=!1){a=a||cb.defaultLocale;var aa;(aa=a)||(Y?Y="en-US":(Wb||(Wb=(new Intl.DateTimeFormat).resolvedOptions().locale),Y=Wb),aa=Y);return new Ya(aa,b||cb.defaultNumberingSystem,S||cb.defaultOutputCalendar,a)}static resetCache(){Wb=null;tc={};ac={};uc={}}static fromObject({locale:a,numberingSystem:b,outputCalendar:S}={}){return Ya.create(a,b,S)}constructor(a,b,S,Y){var aa=a.indexOf("-u-");if(-1===aa)a=[a];else{let Ja;aa=a.substring(0,
aa);try{Ja=J(a).resolvedOptions()}catch(Oa){Ja=J(aa).resolvedOptions()}const {numberingSystem:Ra,calendar:Ma}=Ja;a=[aa,Ra,Ma]}const [fa,ra,Ea]=a;this.locale=fa;this.numberingSystem=b||ra||null;this.outputCalendar=S||Ea||null;b=this.locale;S=this.numberingSystem;if((a=this.outputCalendar)||S)b+="-u",a&&(b+=`-ca-${a}`),S&&(b+=`-nu-${S}`);this.intl=b;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Y;
this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),b=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&b?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Ya.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,b=!1,S=!0){return I(this,a,S,O,()=>{const Y=b?{month:a,day:"numeric"}:{month:a},aa=b?"format":"standalone";this.monthsCache[aa][a]||(this.monthsCache[aa][a]=
p(fa=>this.extract(fa,Y,"month")));return this.monthsCache[aa][a]})}weekdays(a,b=!1,S=!0){return I(this,a,S,T,()=>{const Y=b?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},aa=b?"format":"standalone";this.weekdaysCache[aa][a]||(this.weekdaysCache[aa][a]=H(fa=>this.extract(fa,Y,"weekday")));return this.weekdaysCache[aa][a]})}meridiems(a=!0){return I(this,void 0,a,()=>yc,()=>{if(!this.meridiemCache){const b={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[R.utc(2016,11,13,9),R.utc(2016,
11,13,19)].map(S=>this.extract(S,b,"dayperiod"))}return this.meridiemCache})}eras(a,b=!0){return I(this,a,b,Q,()=>{const S={era:a};this.eraCache[a]||(this.eraCache[a]=[R.utc(-40,1,1),R.utc(2017,1,1)].map(Y=>this.extract(Y,S,"era")));return this.eraCache[a]})}extract(a,b,S){return(a=this.dtFormatter(a,b).formatToParts().find(Y=>Y.type.toLowerCase()===S))?a.value:null}numberFormatter(a={}){return new td(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,b={}){return new $d(a,this.intl,b)}relFormatter(a=
{}){return new ae(this.intl,this.isEnglish(),a)}listFormatter(a={}){return E(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const ud=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Cc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,vd=RegExp(`${Cc.source}${`(?:${ud.source}?(?:\\[(${md.source})\\])?)?`}`),
Dc=RegExp(`(?:T${vd.source})?`),be=ka("weekYear","weekNumber","weekDay"),ce=ka("year","ordinal"),wd=RegExp(`${Cc.source} ?(?:${ud.source}|(${md.source}))?`),de=RegExp(`(?: ${wd.source})?`),ee=RegExp(`^T?${Cc.source}$`),fe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Vd={GMT:0,EDT:-240,EST:-300,CDT:-300,
CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},ge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,he=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ie=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
je=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,ke=U(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Dc),le=U(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Dc),me=U(/(\d{4})-?(\d{3})/,Dc),ne=U(vd),xd=Z(function(a,b){return[{year:ya(a,b),month:ya(a,b+1,1),day:ya(a,b+2,1)},null,b+3]},oa,va,ua),oe=Z(be,oa,va,ua),pe=Z(ce,oa,va,ua),qe=Z(oa,va,ua),re=Z(oa),se=U(/(\d{4})-(\d\d)-(\d\d)/,de),te=U(wd),ue=Z(oa,va,ua),yd={weeks:{days:7,hours:168,minutes:10080,
seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},ve={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},
...yd},we={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...yd},Kb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Wd=Kb.slice(0).reverse();class Sa{constructor(a){const b=
"longterm"===a.conversionAccuracy||!1;this.values=a.values;this.loc=a.loc||Ya.create();this.conversionAccuracy=b?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=b?we:ve;this.isLuxonDuration=!0}static fromMillis(a,b){return Sa.fromObject({milliseconds:a},b)}static fromObject(a,b={}){if(null==a||"object"!==typeof a)throw new mb(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Sa({values:r(a,Sa.normalizeUnit),loc:Ya.fromObject(b),conversionAccuracy:b.conversionAccuracy})}static fromDurationLike(a){if(c(a))return Sa.fromMillis(a);
if(Sa.isDuration(a))return a;if("object"===typeof a)return Sa.fromObject(a);throw new mb(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,b){const [S]=ea(a,[fe,Ga]);return S?Sa.fromObject(S,b):Sa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,b){const [S]=ea(a,[ee,re]);return S?Sa.fromObject(S,b):Sa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,b=null){if(!a)throw new mb("need to specify a reason the Duration is invalid");
a=a instanceof rb?a:new rb(a,b);if(cb.throwOnInvalid)throw new $b(a);return new Sa({invalid:a})}static normalizeUnit(a){const b={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!b)throw new Tc(a);return b}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,b={}){b={...b,floor:!1!==b.round&&!1!==b.floor};return this.isValid?kb.create(this.loc,b).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const b=Kb.map(S=>{const Y=this.values[S];return u(Y)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:S.slice(0,-1)}).format(Y)}).filter(S=>S);return this.loc.listFormatter({type:"conjunction",
style:a.listStyle||"narrow",...a}).format(b)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)a+=q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var b=this.toMillis();if(0>b||864E5<=b)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};b=this.shiftTo("hours","minutes","seconds","milliseconds");let S="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===b.seconds&&0===b.milliseconds||(S+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===b.milliseconds||
(S+=".SSS"));b=b.toFormat(S);a.includePrefix&&(b="T"+b);return b}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a);const b={};for(const S of Kb)if(L(a.values,S)||L(this.values,S))b[S]=a.get(S)+this.get(S);return Aa(this,{values:b},!0)}minus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;
const b={};for(const S of Object.keys(this.values))b[S]=y(a(this.values[S],S));return Aa(this,{values:b},!0)}get(a){return this[Sa.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...r(a,Sa.normalizeUnit)};return Aa(this,{values:a})}reconfigure({locale:a,numberingSystem:b,conversionAccuracy:S}={}){a={loc:this.loc.clone({locale:a,numberingSystem:b})};S&&(a.conversionAccuracy=S);return Aa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;
const a=this.toObject();ba(this.matrix,a);return Aa(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(fa=>Sa.normalizeUnit(fa));const b={},S={},Y=this.toObject();let aa;for(const fa of Kb)if(0<=a.indexOf(fa)){aa=fa;let ra=0;for(const Ja in S)ra+=this.matrix[Ja][fa]*S[Ja],S[Ja]=0;c(Y[fa])&&(ra+=Y[fa]);const Ea=Math.trunc(ra);b[fa]=Ea;S[fa]=(1E3*ra-1E3*Ea)/1E3;for(const Ja in Y)Kb.indexOf(Ja)>Kb.indexOf(fa)&&xa(this.matrix,Y,Ja,b,fa)}else c(Y[fa])&&(S[fa]=Y[fa]);for(const fa in S)0!==
S[fa]&&(b[aa]+=fa===aa?S[fa]:S[fa]/this.matrix[aa][fa]);return Aa(this,{values:b},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const b of Object.keys(this.values))a[b]=0===this.values[b]?0:-this.values[b];return Aa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;
for(const Y of Kb){var b=this.values[Y];var S=a.values[Y];b=void 0===b||0===b?void 0===S||0===S:b===S;if(!b)return!1}return!0}}class Za{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,b=null){if(!a)throw new mb("need to specify a reason the Interval is invalid");a=a instanceof rb?a:new rb(a,b);if(cb.throwOnInvalid)throw new Zb(a);return new Za({invalid:a})}static fromDateTimes(a,b){a=ib(a);b=ib(b);var S=a&&a.isValid?b&&b.isValid?b<a?
Za.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${b.toISO()}`):null:Za.invalid("missing or invalid end"):Za.invalid("missing or invalid start");return null==S?new Za({start:a,end:b}):S}static after(a,b){b=Sa.fromDurationLike(b);a=ib(a);return Za.fromDateTimes(a,a.plus(b))}static before(a,b){b=Sa.fromDurationLike(b);a=ib(a);return Za.fromDateTimes(a.minus(b),a)}static fromISO(a,b){const [S,Y]=(a||"").split("/",2);if(S&&Y){let ra;
try{var aa=R.fromISO(S,b);ra=aa.isValid}catch(Ja){ra=!1}let Ea;try{var fa=R.fromISO(Y,b);Ea=fa.isValid}catch(Ja){Ea=!1}if(ra&&Ea)return Za.fromDateTimes(aa,fa);if(ra){if(fa=Sa.fromISO(Y,b),fa.isValid)return Za.after(aa,fa)}else if(Ea&&(aa=Sa.fromISO(S,b),aa.isValid))return Za.before(fa,aa)}return Za.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:
null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const b=this.start.startOf(a),S=this.end.startOf(a);return Math.floor(S.diff(b,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:b}={}){return this.isValid?Za.fromDateTimes(a||this.s,b||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(ib).filter(fa=>this.contains(fa)).sort();const b=[];let {s:S}=this,Y=0;for(;S<this.e;){var aa=a[Y]||this.e;aa=+aa>+this.e?this.e:aa;b.push(Za.fromDateTimes(S,aa));S=aa;Y+=1}return b}splitBy(a){a=Sa.fromDurationLike(a);
if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:b}=this,S=1;const Y=[];for(;b<this.e;){var aa=this.start.plus(a.mapUnits(fa=>fa*S));aa=+aa>+this.e?this.e:aa;Y.push(Za.fromDateTimes(b,aa));b=aa;S+=1}return Y}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=
a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const b=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return b>=a?null:Za.fromDateTimes(b,a)}union(a){return this.isValid?Za.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [b,S]=a.sort((Y,aa)=>Y.s-aa.s).reduce(([Y,aa],fa)=>aa?aa.overlaps(fa)||aa.abutsStart(fa)?[Y,aa.union(fa)]:[Y.concat([aa]),fa]:[Y,fa],[[],null]);S&&b.push(S);
return b}static xor(a){let b=null,S=0;const Y=[];a=a.map(aa=>[{time:aa.s,type:"s"},{time:aa.e,type:"e"}]);a=Array.prototype.concat(...a).sort((aa,fa)=>aa.time-fa.time);for(const aa of a)S+="s"===aa.type?1:-1,1===S?b=aa.time:(b&&+b!==+aa.time&&Y.push(Za.fromDateTimes(b,aa.time)),b=null);return Za.merge(Y)}difference(...a){return Za.xor([this].concat(a)).map(b=>this.intersection(b)).filter(b=>b&&!b.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?
`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:b=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${b}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,b){return this.isValid?this.e.diff(this.s,a,b):Sa.invalid(this.invalidReason)}mapEndpoints(a){return Za.fromDateTimes(a(this.s),
a(this.e))}}class Xb{static hasDST(a=cb.defaultZone){const b=R.now().setZone(a).set({month:12});return!a.isUniversal&&b.offset!==b.set({month:6}).offset}static isValidIANAZone(a){return Cb.isValidZone(a)}static normalizeZone(a){return w(a,cb.defaultZone)}static months(a="long",{locale:b=null,numberingSystem:S=null,locObj:Y=null,outputCalendar:aa="gregory"}={}){return(Y||Ya.create(b,S,aa)).months(a)}static monthsFormat(a="long",{locale:b=null,numberingSystem:S=null,locObj:Y=null,outputCalendar:aa=
"gregory"}={}){return(Y||Ya.create(b,S,aa)).months(a,!0)}static weekdays(a="long",{locale:b=null,numberingSystem:S=null,locObj:Y=null}={}){return(Y||Ya.create(b,S,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:b=null,numberingSystem:S=null,locObj:Y=null}={}){return(Y||Ya.create(b,S,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Ya.create(a).meridiems()}static eras(a="short",{locale:b=null}={}){return Ya.create(b,null,"gregory").eras(a)}static features(){return{relative:f()}}}
const vc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Qc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xd=vc.hanidec.replace(/[\[|\]]/g,"").split(""),Rc=`[ ${String.fromCharCode(160)}]`,wc=new RegExp(Rc,"g"),Sc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let bc=null;const dc=[0,31,59,90,120,151,181,212,243,273,304,334],cc=[0,31,60,91,121,152,182,213,244,274,305,335],M={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},jc={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},tb={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ec="year month day hour minute second millisecond".split(" "),pa="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ec="year ordinal hour minute second millisecond".split(" ");class R{constructor(a){const b=a.zone||cb.defaultZone;let S=a.invalid||(Number.isNaN(a.ts)?new rb("invalid input"):null)||(b.isValid?null:Bb(b));this.ts=u(a.ts)?cb.now():a.ts;let Y=null;var aa=null;S||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(b)?
[Y,aa]=[a.old.c,a.old.o]:(aa=b.offset(this.ts),Y=Pb(this.ts,aa),Y=(S=Number.isNaN(Y.year)?new rb("invalid input"):null)?null:Y,aa=S?null:aa));this._zone=b;this.loc=a.loc||Ya.create();this.invalid=S;this.weekData=null;this.c=Y;this.o=aa;this.isLuxonDateTime=!0}static now(){return new R({})}static local(){const [a,b]=db(arguments),[S,Y,aa,fa,ra,Ea,Ja]=b;return Va({year:S,month:Y,day:aa,hour:fa,minute:ra,second:Ea,millisecond:Ja},a)}static utc(){const [a,b]=db(arguments),[S,Y,aa,fa,ra,Ea,Ja]=b;a.zone=
jb.utcInstance;return Va({year:S,month:Y,day:aa,hour:fa,minute:ra,second:Ea,millisecond:Ja},a)}static fromJSDate(a,b={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return R.invalid("invalid input");const S=w(b.zone,cb.defaultZone);return S.isValid?new R({ts:a,zone:S,loc:Ya.fromObject(b)}):R.invalid(Bb(S))}static fromMillis(a,b={}){if(c(a))return-864E13>a||864E13<a?R.invalid("Timestamp out of range"):new R({ts:a,zone:w(b.zone,cb.defaultZone),loc:Ya.fromObject(b)});
throw new mb(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,b={}){if(c(a))return new R({ts:1E3*a,zone:w(b.zone,cb.defaultZone),loc:Ya.fromObject(b)});throw new mb("fromSeconds requires a numerical input");}static fromObject(a,b={}){a=a||{};var S=w(b.zone,cb.defaultZone);if(!S.isValid)return R.invalid(Bb(S));var Y=cb.now();const aa=u(b.specificOffset)?S.offset(Y):b.specificOffset,fa=r(a,Qa);var ra=!u(fa.ordinal),Ea=!u(fa.year),Ja=!u(fa.month)||
!u(fa.day);Ea=Ea||Ja;var Ra=fa.weekYear||fa.weekNumber;b=Ya.fromObject(b);if((Ea||ra)&&Ra)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ja&&ra)throw new Vb("Can't mix ordinal dates with month/day");Ja=Ra||fa.weekday&&!Ea;let Ma=Pb(Y,aa);Ja?(Y=pa,Ra=jc,Ma=B(Ma)):ra?(Y=Ec,Ra=tb,Ma=wb(Ma)):(Y=ec,Ra=M);let Oa=!1;for(var Ua of Y)u(fa[Ua])?fa[Ua]=Oa?Ra[Ua]:Ma[Ua]:Oa=!0;Ja?(Ua=G(fa.weekYear),Y=K(fa.weekNumber,1,z(fa.weekYear)),Ra=K(fa.weekday,1,7),Ua=Ua?Y?Ra?!1:hb("weekday",
fa.weekday):hb("week",fa.week):hb("weekYear",fa.weekYear)):ra?(Ua=G(fa.year),Y=K(fa.ordinal,1,v(fa.year)?366:365),Ua=Ua?Y?!1:hb("ordinal",fa.ordinal):hb("year",fa.year)):Ua=Gb(fa);if(Ua=Ua||Rb(fa))return R.invalid(Ua);ra=Ja?Hb(fa):ra?Ab(fa):fa;const [$a,qb]=Ib(ra,aa,S);S=new R({ts:$a,zone:S,o:qb,loc:b});return fa.weekday&&Ea&&a.weekday!==S.weekday?R.invalid("mismatched weekday",`you can't specify both a weekday of ${fa.weekday} and a date of ${S.toISO()}`):S}static fromISO(a,b={}){const [S,Y]=ea(a,
[ke,xd],[le,oe],[me,pe],[ne,qe]);return ca(S,Y,b,"ISO 8601",a)}static fromRFC2822(a,b={}){const [S,Y]=ea(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[ge,la]);return ca(S,Y,b,"RFC 2822",a)}static fromHTTP(a,b={}){const [S,Y]=ea(a,[he,wa],[ie,wa],[je,za]);return ca(S,Y,b,"HTTP",b)}static fromFormat(a,b,S={}){if(u(a)||u(b))throw new mb("fromFormat requires an input string and a format");const {locale:Y=null,numberingSystem:aa=null}=S;var fa=Ya.fromOpts({locale:Y,numberingSystem:aa,
defaultToEN:!0});{const {result:Ma,zone:Oa,specificOffset:Ua,invalidReason:$a}=ta(fa,a,b);fa=[Ma,Oa,Ua,$a]}const [ra,Ea,Ja,Ra]=fa;return Ra?R.invalid(Ra):ca(ra,Ea,S,`format ${b}`,a,Ja)}static fromString(a,b,S={}){return R.fromFormat(a,b,S)}static fromSQL(a,b={}){const [S,Y]=ea(a,[se,xd],[te,ue]);return ca(S,Y,b,"SQL",a)}static invalid(a,b=null){if(!a)throw new mb("need to specify a reason the DateTime is invalid");a=a instanceof rb?a:new rb(a,b);if(cb.throwOnInvalid)throw new Yb(a);return new R({invalid:a})}static isDateTime(a){return a&&
a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?eb(this).weekYear:NaN}get weekNumber(){return this.isValid?eb(this).weekNumber:NaN}get weekday(){return this.isValid?
eb(this).weekday:NaN}get ordinal(){return this.isValid?wb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return v(this.year)}get daysInMonth(){return t(this.year,this.month)}get daysInYear(){return this.isValid?
v(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?z(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:b,numberingSystem:S,calendar:Y}=kb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:b,numberingSystem:S,outputCalendar:Y}}toUTC(a=0,b={}){return this.setZone(jb.instance(a),b)}toLocal(){return this.setZone(cb.defaultZone)}setZone(a,{keepLocalTime:b=!1,keepCalendarTime:S=!1}={}){a=w(a,cb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let Y=
this.ts;if(b||S)b=a.offset(this.ts),S=this.toObject(),[Y]=Ib(S,b,a);return xb(this,{ts:Y,zone:a})}return R.invalid(Bb(a))}reconfigure({locale:a,numberingSystem:b,outputCalendar:S}={}){a=this.loc.clone({locale:a,numberingSystem:b,outputCalendar:S});return xb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=r(a,Qa);var b=!u(a.weekYear)||!u(a.weekNumber)||!u(a.weekday);const S=!u(a.ordinal),Y=!u(a.year),aa=!u(a.month)||!u(a.day),fa=a.weekYear||a.weekNumber;
if((Y||aa||S)&&fa)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(aa&&S)throw new Vb("Can't mix ordinal dates with month/day");b?b=Hb({...B(this.c),...a}):u(a.ordinal)?(b={...this.toObject(),...a},u(a.day)&&(b.day=Math.min(t(b.year,b.month),b.day))):b=Ab({...wb(this.c),...a});const [ra,Ea]=Ib(b,this.o,this.zone);return xb(this,{ts:ra,o:Ea})}plus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a);return xb(this,V(this,a))}minus(a){if(!this.isValid)return this;
a=Sa.fromDurationLike(a).negate();return xb(this,V(this,a))}startOf(a){if(!this.isValid)return this;const b={};a=Sa.normalizeUnit(a);switch(a){case "years":b.month=1;case "quarters":case "months":b.day=1;case "weeks":case "days":b.hour=0;case "hours":b.minute=0;case "minutes":b.second=0;case "seconds":b.millisecond=0}"weeks"===a&&(b.weekday=1);"quarters"===a&&(b.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(b)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
b={}){return this.isValid?kb.create(this.loc.redefaultToEN(b)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=xc,b={}){return this.isValid?kb.create(this.loc.clone(b),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?kb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:b=!1,suppressMilliseconds:S=!1,includeOffset:Y=!0,extendedZone:aa=!1}={}){if(!this.isValid)return null;a="extended"===a;let fa=
Ha(this,a);return fa=fa+"T"+Ia(this,a,b,S,Y,aa)}toISODate({format:a="extended"}={}){return this.isValid?Ha(this,"extended"===a):null}toISOWeekDate(){return na(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:b=!1,includeOffset:S=!0,includePrefix:Y=!1,extendedZone:aa=!1,format:fa="extended"}={}){return this.isValid?(Y?"T":"")+Ia(this,"extended"===fa,b,a,S,aa):null}toRFC2822(){return na(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return na(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Ha(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:b=!1,includeOffsetSpace:S=!0}={}){let Y="HH:mm:ss.SSS";if(b||a)S&&(Y+=" "),b?Y+="z":a&&(Y+="ZZ");return na(this,Y,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):
NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const b={...this.c};a.includeConfig&&(b.outputCalendar=this.outputCalendar,b.numberingSystem=this.loc.numberingSystem,b.locale=this.loc.locale);return b}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,b="milliseconds",S={}){if(!this.isValid||!a.isValid)return Sa.invalid("created by diffing an invalid DateTime");S={locale:this.locale,numberingSystem:this.numberingSystem,...S};const Y=
(Array.isArray(b)?b:[b]).map(Sa.normalizeUnit);b=a.valueOf()>this.valueOf();a=ja(b?this:a,b?a:this,Y,S);return b?a.negate():a}diffNow(a="milliseconds",b={}){return this.diff(R.now(),a,b)}until(a){return this.isValid?Za.fromDateTimes(this,a):this}hasSame(a,b){if(!this.isValid)return!1;const S=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(b)<=S&&S<=a.endOf(b)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const b=a.base||R.fromObject({},{zone:this.zone}),S=a.padding?this<b?-a.padding:a.padding:0;let Y="years months days hours minutes seconds".split(" "),aa=a.unit;Array.isArray(a.unit)&&(Y=a.unit,aa=void 0);return ab(b,this.plus(S),{...a,numeric:"always",units:Y,unit:aa})}toRelativeCalendar(a={}){return this.isValid?ab(a.base||R.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(R.isDateTime))throw new mb("min requires all arguments be DateTimes");
return F(a,b=>b.valueOf(),Math.min)}static max(...a){if(!a.every(R.isDateTime))throw new mb("max requires all arguments be DateTimes");return F(a,b=>b.valueOf(),Math.max)}static fromFormatExplain(a,b,S={}){const {locale:Y=null,numberingSystem:aa=null}=S;S=Ya.fromOpts({locale:Y,numberingSystem:aa,defaultToEN:!0});return ta(S,a,b)}static fromStringExplain(a,b,S={}){return R.fromFormatExplain(a,b,S)}static get DATE_SHORT(){return xc}static get DATE_MED(){return Uc}static get DATE_MED_WITH_WEEKDAY(){return Yd}static get DATE_FULL(){return Vc}static get DATE_HUGE(){return Wc}static get TIME_SIMPLE(){return Xc}static get TIME_WITH_SECONDS(){return Yc}static get TIME_WITH_SHORT_OFFSET(){return Zc}static get TIME_WITH_LONG_OFFSET(){return $c}static get TIME_24_SIMPLE(){return ad}static get TIME_24_WITH_SECONDS(){return bd}static get TIME_24_WITH_SHORT_OFFSET(){return cd}static get TIME_24_WITH_LONG_OFFSET(){return dd}static get DATETIME_SHORT(){return ed}static get DATETIME_SHORT_WITH_SECONDS(){return fd}static get DATETIME_MED(){return gd}static get DATETIME_MED_WITH_SECONDS(){return hd}static get DATETIME_MED_WITH_WEEKDAY(){return Zd}static get DATETIME_FULL(){return id}static get DATETIME_FULL_WITH_SECONDS(){return jd}static get DATETIME_HUGE(){return kd}static get DATETIME_HUGE_WITH_SECONDS(){return ld}}
d.DateTime=R;d.Info=Xb;d.Interval=Za})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(d,u,c){function G(k){k||(k=c.getLocale());let g=k in K;if(!g){const n=k.split("-");1<n.length&&n[0]in K&&(k=n[0],g=!0);g||(k="en")}const [q,v,t="#,##0.###"]=K[k];return{decimal:q,group:v,pattern:t}}function f(k,g,q){q=q||{};!0===q.places&&(q.places=0);Infinity===q.places&&(q.places=6);g=g.split(".");var v="string"===typeof q.places&&q.places.indexOf(","),t=q.places;v?t=q.places.substring(v+
1):0<=t||(t=(g[1]||[]).length);0>q.round||(k=Number(k.toFixed(Number(t))));k=String(Math.abs(k)).split(".");const n=k[1]||"";g[1]||q.places?(v&&(q.places=q.places.substring(0,v)),v=void 0!==q.places?q.places:g[1]&&g[1].lastIndexOf("0")+1,v>n.length&&(k[1]=n.padEnd(Number(v),"0")),t<n.length&&(k[1]=n.substr(0,Number(t)))):k[1]&&k.pop();t=g[0].replace(",","");v=t.indexOf("0");-1!==v&&(v=t.length-v,v>k[0].length&&(k[0]=k[0].padStart(v,"0")),t.includes("#")||(k[0]=k[0].substr(k[0].length-v)));t=g[0].lastIndexOf(",");
let z,e;-1!==t&&(z=g[0].length-t-1,g=g[0].substr(0,t),t=g.lastIndexOf(","),-1!==t&&(e=g.length-t-1));g=[];for(t=k[0];t;)v=t.length-z,g.push(0<v?t.substr(v):t),t=0<v?t.slice(0,v):"",e&&(z=e,e=void 0);k[0]=g.reverse().join(q.group||",");return k.join(q.decimal||".")}function F(k){k=k||{};var g=G(k.locale);const q=k.pattern||g.pattern,v=g.group,t=g.decimal;let n=1;if(q.includes("%"))n/=100;else if(q.includes("\u2030"))n/=1E3;else if(q.includes("\u00a4"))throw Error("currency notation not supported");
g=q.split(";");1===g.length&&g.push("-"+g[0]);return{regexp:x(g,z=>{z="(?:"+u.escapeRegExpString(z,".")+")";return z.replace(C,e=>{const h={signed:!1,separator:k.strict?v:[v,""],fractional:k.fractional,decimal:t,exponent:!1};e=e.split(".");let l=k.places;1===e.length&&1!==n&&(e[1]="###");1===e.length||0===l?h.fractional=!1:(void 0===l&&(l=k.pattern?e[1].lastIndexOf("0")+1:Infinity),l&&null==k.fractional&&(h.fractional=!0),!k.places&&l<e[1].length&&(l+=","+e[1].length),h.places=l);e=e[0].split(",");
1<e.length&&(h.groupSize=e.pop().length,1<e.length&&(h.groupSize2=e.pop().length));return"("+A(h)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:v,decimal:t,factor:n}}function A(k){k=k||{};"places"in k||(k.places=Infinity);"string"!==typeof k.decimal&&(k.decimal=".");"fractional"in k&&!/^0/.test(String(k.places))||(k.fractional=[!0,!1]);"exponent"in k||(k.exponent=[!0,!1]);"eSigned"in k||(k.eSigned=[!0,!1]);var g=L(k);const q=x(k.fractional,t=>{let n="";t&&0!==k.places&&(n="\\"+k.decimal,n=Infinity===
k.places?"(?:"+n+"\\d+)?":n+("\\d{"+k.places+"}"));return n},!0),v=x(k.exponent,t=>t?"([eE]"+L({signed:k.eSigned})+")":"");g+=q;q&&(g="(?:(?:"+g+")|(?:"+q+"))");return g+v}function L(k){k=k||{};"signed"in k||(k.signed=[!0,!1]);"separator"in k?"groupSize"in k||(k.groupSize=3):k.separator="";const g=x(k.signed,v=>v?"[-+]":"",!0),q=x(k.separator,v=>{if(!v)return"(?:\\d+)";v=u.escapeRegExpString(v);" "===v?v="\\s":"\u00a0"===v&&(v="\\s\\xa0");const t=k.groupSize,n=k.groupSize2;return n?(v="(?:0|[1-9]\\d{0,"+
(n-1)+"}(?:["+v+"]\\d{"+n+"})*["+v+"]\\d{"+t+"})",0<t-n?"(?:"+v+"|(?:0|[1-9]\\d{0,"+(t-1)+"}))":v):"(?:0|[1-9]\\d{0,"+(t-1)+"}(?:["+v+"]\\d{"+t+"})*)"},!0);return g+q}const K={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},C=/[#0,]*[#0](?:\.0*#*)?/,x=(k,g,q)=>{if(!(k instanceof Array))return g(k);const v=[];for(let t=0;t<k.length;t++)v.push(g(k[t]));
k=v.join("|");return"("+(q?"?:":"")+k+")"};d._parseInfo=F;d.format=function(k,g){g={...g};var q=G(g.locale);g.customs=q;var v=g.pattern||q.pattern;if(isNaN(k)||Infinity===Math.abs(k))return null;{g=g||{};q=g.customs.group;const n=g.customs.decimal;v=v.split(";");var t=v[0];v=v[0>k?1:0]||"-"+t;if(v.includes("%"))k*=100;else if(v.includes("\u2030"))k*=1E3;else{if(v.includes("\u00a4"))throw Error("currency notation not supported");if(v.includes("E"))throw Error("exponential notation not supported");
}const z=C;t=t.match(z);if(!t)throw Error("unable to find a number expression in pattern: "+v);!1===g.fractional&&(g.places=0);k=v.replace(z,f(k,t[0],{decimal:n,group:q,places:g.places,round:g.round}))}return k};d.getCustoms=G;d.parse=function(k,g){g=F(g);k=(new RegExp("^"+g.regexp+"$")).exec(k);if(!k)return NaN;let q=k[1];if(!k[1]){if(!k[2])return NaN;q=k[2];g.factor*=-1}q=q.replace(new RegExp("["+g.group+"\\s\\xa0]","g"),"").replace(g.decimal,".");return Number(q)*g.factor};d.regexp=function(k){return F(k).regexp};
Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../geometry/Extent","../../../layers/support/Field"],function(d,u,c){function G(f){return f instanceof Date}d.FeatureServiceDatabaseType=void 0;(function(f){f[f.Standardised=0]="Standardised";f[f.StandardisedNoInterval=1]="StandardisedNoInterval";f[f.SqlServer=2]="SqlServer";f[f.Oracle=3]="Oracle";f[f.Postgres=4]="Postgres";f[f.PGDB=
5]="PGDB";f[f.FILEGDB=6]="FILEGDB";f[f.NotEvaluated=7]="NotEvaluated"})(d.FeatureServiceDatabaseType||(d.FeatureServiceDatabaseType={}));d.IdState=void 0;(function(f){f[f.InFeatureSet=0]="InFeatureSet";f[f.NotInFeatureSet=1]="NotInFeatureSet";f[f.Unknown=2]="Unknown"})(d.IdState||(d.IdState={}));d.callback=function(f,F){return function(){try{f.apply(null,arguments)}catch(A){F.reject(A)}}};d.cloneAttributes=function(f){const F={};for(const A in f)F[A]=f[A];return F};d.cloneField=function(f){return c.fromJSON(f.toJSON())};
d.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};d.convertSquareUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
d.defaultMaxRecords=1E3;d.equalityTest=function(f,F){return f===F?!0:G(f)&&G(F)?f.getTime()===F.getTime():!1};d.errback=function(f){return function(F){f.reject(F)}};d.esriFieldToJson=function(f){return f.toJSON?f.toJSON():f};d.extractServiceUrl=function(f){if(void 0===f)return"";f=f.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");f=f.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return f=f.split("?")[0]};d.isArray=function(f){return f instanceof Array};d.isBoolean=function(f){return"boolean"===
typeof f};d.isDate=G;d.isNumber=function(f){return"number"===typeof f};d.isString=function(f){return"string"===typeof f||f instanceof String};d.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};d.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};d.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",
polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};d.sameGeomType=function(f,F){return f===F||"point"===f&&"esriGeometryPoint"===F||"polyline"===f&&"esriGeometryPolyline"===F||"polygon"===f&&"esriGeometryPolygon"===
F||"extent"===f&&"esriGeometryEnvelope"===F||"multipoint"===f&&"esriGeometryMultipoint"===F||"point"===F&&"esriGeometryPoint"===f||"polyline"===F&&"esriGeometryPolyline"===f||"polygon"===F&&"esriGeometryPolygon"===f||"extent"===F&&"esriGeometryEnvelope"===f||"multipoint"===F&&"esriGeometryMultipoint"===f?!0:!1};d.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.extent;case "point":return new u({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,
spatialReference:f.spatialReference});case "extent":return f}return null};d.stableStringify=function(f,F){F||(F={});"function"===typeof F&&(F={cmp:F});const A="boolean"===typeof F.cycles?F.cycles:!1,L=F.cmp&&function(C){return function(x){return function(k,g){return C({key:k,value:x[k]},{key:g,value:x[g]})}}}(F.cmp),K=[];return function k(x){x&&x.toJSON&&"function"===typeof x.toJSON&&(x=x.toJSON());if(void 0!==x){if("number"===typeof x)return isFinite(x)?""+x:"null";if("object"!==typeof x)return JSON.stringify(x);
var g;if(Array.isArray(x)){var q="[";for(g=0;g<x.length;g++)g&&(q+=","),q+=k(x[g])||"null";return q+"]"}if(null===x)return"null";if(K.includes(x)){if(A)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var v=K.push(x)-1,t=Object.keys(x).sort(L&&L(x));q="";for(g=0;g<t.length;g++){const n=t[g],z=k(x[n]);z&&(q&&(q+=","),q+=JSON.stringify(n)+":"+z)}K.splice(v,1);return"{"+q+"}"}}(f)};d.toEsriGeometryType=function(f){switch(f){case "point":return"esriGeometryPoint";
case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(d,
u,c,G,f,F,A){function L(e){return`<ul class="esri-widget__list">${e.map(h=>`<li>${"string"===typeof h?A.applyTextFormattingHTML(A.htmlEntities(h)):h}</li>`).join("")}</ul>`}function K(e){return`<table class="esri-widget__table">${e.keys().map(h=>{var l=e.field(h);l="string"===typeof l?A.applyTextFormattingHTML(A.htmlEntities(l)):l;return`<tr><th>${h}</th><td>${l}</td></tr>`}).join("")}</table>`}function C({aggregatedFeatures:e,arcadeUtils:h,featureSetVars:l,context:y,viewInfo:r,map:m,graphic:D,interceptor:O}){l.forEach(T=>
{T=T.toLowerCase();var Q={map:m,spatialReference:r.sr,interceptor:O};"$map"===T&&(y.vars[T]=h.convertMapToFeatureSetCollection(Q));"$layer"===T&&(y.vars[T]=h.convertFeatureLayerToFeatureSet({layer:D.sourceLayer,spatialReference:r.sr,interceptor:O}));"$datastore"===T&&(y.vars[T]=h.convertServiceUrlToWorkspace({url:D.sourceLayer.url,spatialReference:r.sr,interceptor:O}));if("$aggregatedfeatures"===T){Q=D.layer;const {fields:N,objectIdField:P,geometryType:w,spatialReference:E,displayField:J}=Q;Q=new F({fields:N,
objectIdField:P,geometryType:w,spatialReference:E,displayField:J,..."feature"===Q.type?{templates:Q.templates,typeIdField:Q.typeIdField,types:Q.types}:null,source:e});y.vars[T]=h.convertFeatureLayerToFeatureSet({layer:Q,spatialReference:r.sr,interceptor:O})}})}function x(){return new Promise((e,h)=>d(["../../../support/arcadeUtils"],e,h))}function k(e){return g.apply(this,arguments)}function g(){g=c._asyncToGenerator(function*({graphic:e,view:h}){const {isAggregate:l,layer:y}=e;if(!l||!y||"2d"!==
(null==h?void 0:h.type))return[];h=yield h.whenLayerView(y);if(!h.createQuery||!h.queryFeatures)return[];const r=h.createQuery();r.aggregateIds=[e.getObjectId()];({features:e}=yield h.queryFeatures(r));return e});return g.apply(this,arguments)}function q(e){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*({expressionInfo:e,arcadeUtils:h,interceptor:l,spatialReference:y,map:r,graphic:m,view:D}){if(!e||!e.expression)return null;const O=h.createSyntaxTree(e.expression),T=n.filter(N=>
h.hasVariable(O,N));[D]=yield Promise.all([k({graphic:m,view:D}),h.loadScriptDependencies(O,!0,T)]);const Q=h.getViewInfo({spatialReference:y});y=h.createExecContext(m,Q);y.interceptor=l;y.useAsync=!0;C({aggregatedFeatures:D,arcadeUtils:h,featureSetVars:T,context:y,viewInfo:Q,map:r,graphic:m,interceptor:l});l=h.createFunction(O,y);return h.executeAsyncFunction(l,y).catch(N=>z.error("arcade-execution-error",{error:N,graphic:m,expressionInfo:e}))});return v.apply(this,arguments)}function t(){t=c._asyncToGenerator(function*({expressionInfos:e,
spatialReference:h,graphic:l,interceptor:y,map:r,view:m}){if(!e||!e.length)return{};const D=yield x(),O={};for(const T of e)O[`expression/${T.name}`]=q({expressionInfo:T,arcadeUtils:D,interceptor:y,spatialReference:h,map:r,graphic:l,view:m});e=yield f.eachAlways(O);h={};for(const T in e)l=e[T].value,l="string"===typeof l?A.applyTextFormattingHTML(A.htmlEntities(l)):Array.isArray(l)?L(l):"esri.arcade.Dictionary"===(null==l?void 0:l.declaredClass)?K(l):l,h[T]=l;return h});return t.apply(this,arguments)}
const n=["$datastore","$map","$layer","$aggregatedfeatures"],z=G.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");u.createCompiledExpression=q;u.createCompiledExpressions=function(e){return t.apply(this,arguments)};u.loadArcadeUtils=x;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D){var O;const T=A.getLogger("esri.widgets.FeatureViewModel"),Q={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};f=O=function(N){function P(E){var J=N.call(this,E)||this;J._handles=new F;J._error=null;J._featureAbortController=null;J.graphicChangedThrottled=x.throttle(J._graphicChanged,1,d._assertThisInitialized(J));J._expressionAttributes=null;J._graphicExpressionAttributes=
null;J.abilities={...Q};J.content=null;J.contentViewModels=[];J.defaultPopupTemplateEnabled=!1;J.formattedAttributes=null;J.lastEditInfo=null;J.relatedInfos=new Map;J.title="";J.view=null;J._isAllowedContentType=X=>{const {abilities:W}=d._assertThisInitialized(J);return"attachments"===X.type&&W.attachmentsContent||"custom"===X.type&&W.customContent||"fields"===X.type&&W.fieldsContent||"media"===X.type&&W.mediaContent||"text"===X.type&&W.textContent||"expression"===X.type&&W.expressionContent};J._handles.add(C.watch(()=>
[J.graphic,J._effectivePopupTemplate,J.abilities],()=>J.graphicChangedThrottled(),C.initial));return J}d._inheritsLoose(P,N);var w=P.prototype;w.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};w.castAbilities=function(E){return{...Q,...E}};w.setActiveMedia=function(E,J){E=this.contentViewModels[E];E instanceof y&&E.setActiveMedia(J)};w.nextMedia=function(E){E=
this.contentViewModels[E];E instanceof y&&E.next()};w.previousMedia=function(E){E=this.contentViewModels[E];E instanceof y&&E.previous()};w._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};w._graphicChanged=function(){var E=d._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:J}=this;if(J){var X=new AbortController;this._featureAbortController=X;try{yield this._queryFeature({signal:X.signal})}catch(W){K.isAbortError(W)||
(this._error=W,T.error("error","The popupTemplate could not be displayed for this feature.",{error:W,graphic:J,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===X&&(this._featureAbortController=null)}});return function(){return E.apply(this,arguments)}}();w._cancelFeatureQuery=function(){const {_featureAbortController:E}=this;E&&E.abort();this._featureAbortController=null};w._compileContentElement=function(E,J){if("attachments"===E.type)return this._compileAttachments(E,
J);if("custom"===E.type)return this._compileCustom(E,J);if("fields"===E.type)return this._compileFields(E,J);if("media"===E.type)return this._compileMedia(E,J);if("text"===E.type)return this._compileText(E,J);if("expression"===E.type)return this._compileExpression(E,J)};w._compileContent=function(E){this._destroyContentViewModels();if(this.graphic)return Array.isArray(E)?E.filter(this._isAllowedContentType).map((J,X)=>this._compileContentElement(J,X)):"string"===typeof E?this._compileText(new n({text:E}),
0).text:E};w._destroyContentViewModels=function(){var E;null==(E=this._handles)?void 0:E.remove("content-view-models");this.contentViewModels.forEach(J=>J&&!J.destroyed&&J.destroy());this._set("contentViewModels",[])};w._setExpressionContentVM=function(E,J){const {formattedAttributes:X}=this,{contentElement:W,contentElementViewModel:p}=E;E=null==W?void 0:W.type;p&&E&&("fields"===E&&(this._createFieldsFormattedAttributes({contentElement:W,contentElementIndex:J,formattedAttributes:X}),p.set(this._createFieldsVMParams(W,
J))),"media"===E&&(this._createMediaFormattedAttributes({contentElement:W,contentElementIndex:J,formattedAttributes:X}),p.set(this._createMediaVMParams(W,J))),"text"===E&&p.set(this._createTextVMParams(W)))};w._compileExpression=function(E,J){const {expressionInfo:X}=E,{graphic:W,map:p,spatialReference:H,view:I}=this,U=new h({expressionInfo:X,graphic:W,interceptor:O.interceptor,map:p,spatialReference:H,view:I});this.contentViewModels[J]=U;this._handles.add(C.watch(()=>U.contentElementViewModel,()=>
this._setExpressionContentVM(U,J),C.initial),"content-view-models");return E};w._compileAttachments=function(E,J){const {graphic:X}=this,{description:W,title:p}=E;this.contentViewModels[J]=new z({graphic:X,...this._compileTitleAndDesc({title:p,description:W})});return E};w._compileCustom=function(E,J){const {graphic:X}=this,{creator:W,destroyer:p}=E;this.contentViewModels[J]=new e({graphic:X,creator:W,destroyer:p});return E};w._compileTitleAndDesc=function({title:E,description:J}){const {_fieldInfoMap:X,
_sourceLayer:W,graphic:p,formattedAttributes:H,_expressionAttributes:I}=this,{attributes:U}=p,Z=H.global;return{title:m.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:X,globalAttributes:Z,expressionAttributes:I,layer:W,text:E}),description:m.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:X,globalAttributes:Z,expressionAttributes:I,layer:W,text:J})}};w._createFieldsVMParams=function(E,J){const {_effectivePopupTemplate:X,formattedAttributes:W}=this,p={...W.global,...W.content[J]};
J=(null==E?void 0:E.fieldInfos)||(null==X?void 0:X.fieldInfos);J=null==J?void 0:J.filter(({fieldName:Z})=>m.isExpressionField(Z)||m.isRelatedField(Z)||p.hasOwnProperty(Z));const H=null==X?void 0:X.expressionInfos,{description:I,title:U}=E;return{attributes:p,expressionInfos:H,fieldInfos:J,...this._compileTitleAndDesc({title:U,description:I})}};w._compileFields=function(E,J){const X=E.clone();E=new l(this._createFieldsVMParams(E,J));this.contentViewModels[J]=E;X.fieldInfos=E.formattedFieldInfos.slice(0);
return X};w._createMediaVMParams=function(E,J){const {abilities:X,graphic:W,_fieldInfoMap:p,formattedAttributes:H,_effectivePopupTemplate:I,relatedInfos:U,_sourceLayer:Z,_expressionAttributes:ea}=this,{attributes:ka}=W,{description:ya,mediaInfos:oa,title:va}=E;return{abilities:{chartAnimation:X.chartAnimation},activeMediaInfoIndex:E.activeMediaInfoIndex||0,attributes:ka,layer:Z,fieldInfoMap:p,formattedAttributes:{...H.global,...H.content[J]},expressionAttributes:ea,mediaInfos:oa,popupTemplate:I,relatedInfos:U,
...this._compileTitleAndDesc({title:va,description:ya})}};w._compileMedia=function(E,J){const X=E.clone();E=new y(this._createMediaVMParams(E,J));X.mediaInfos=E.formattedMediaInfos.slice(0);this.contentViewModels[J]=E;return X};w._createTextVMParams=function(E){const {graphic:J,_fieldInfoMap:X,_sourceLayer:W,_expressionAttributes:p}=this;if(E&&E.text){const {attributes:H}=J;E.text=m.substituteFieldsInLinksAndAttributes({attributes:H,fieldInfoMap:X,globalAttributes:this.formattedAttributes.global,
expressionAttributes:p,layer:W,text:E.text})}return{graphic:J,creator:E.text}};w._compileText=function(E,J){E=E.clone();this.contentViewModels[J]=new e(this._createTextVMParams(E));return E};w._compileLastEditInfo=function(){const {_effectivePopupTemplate:E,_sourceLayer:J,graphic:X}=this;if(E){var {lastEditInfoEnabled:W}=E,p=null==J?void 0:J.editFieldsInfo;if(W&&p)return m.formatEditInfo(p,X.attributes)}};w._compileTitle=function(E){const {_fieldInfoMap:J,_sourceLayer:X,graphic:W,_expressionAttributes:p}=
this,{attributes:H}=W;return m.substituteFieldsInLinksAndAttributes({attributes:H,fieldInfoMap:J,globalAttributes:this.formattedAttributes.global,expressionAttributes:p,layer:X,text:E})};w._getTitle=function(){var E=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:J,graphic:X}=this;return m.graphicCallback(null==J?void 0:J.title,{graphic:X})});return function(){return E.apply(this,arguments)}}();w._getContent=function(){var E=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:J,
graphic:X}=this;return m.graphicCallback(null==J?void 0:J.content,{graphic:X})});return function(){return E.apply(this,arguments)}}();w._queryFeature=function(){var E=d._asyncToGenerator(function*(J){const {_featureAbortController:X,_sourceLayer:W,graphic:p,_effectivePopupTemplate:H,spatialReference:I,map:U,view:Z}=this,{content:{value:ea},title:{value:ka}}=yield K.eachAlways({content:this._getContent(),title:this._getTitle()});X===this._featureAbortController&&p&&(yield m.queryUpdatedFeature({graphic:p,
popupTemplate:H,layer:W,spatialReference:I},J),{expressionAttributes:{value:J}}=yield K.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(J),expressionAttributes:r.createCompiledExpressions({expressionInfos:null==H?void 0:H.expressionInfos,spatialReference:I,graphic:p,map:U,interceptor:O.interceptor,view:Z})}),X===this._featureAbortController&&p&&(this._expressionAttributes=J,this._graphicExpressionAttributes={...p.attributes,...J},this._set("formattedAttributes",this._createFormattedAttributes(ea)),
this._set("title",this._compileTitle(ka)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ea)||null)))});return function(J){return E.apply(this,arguments)}}();w._createMediaFormattedAttributes=function({contentElement:E,contentElementIndex:J,formattedAttributes:X}){const {_effectivePopupTemplate:W,graphic:p,relatedInfos:H,_sourceLayer:I,_fieldInfoMap:U,_graphicExpressionAttributes:Z}=this;X.content[J]=m.formatAttributes({fieldInfos:null==W?void 0:
W.fieldInfos,graphic:p,attributes:{...Z,...E.attributes},layer:I,fieldInfoMap:U,relatedInfos:H})};w._createFieldsFormattedAttributes=function({contentElement:E,contentElementIndex:J,formattedAttributes:X}){if(E.fieldInfos){const {graphic:W,relatedInfos:p,_sourceLayer:H,_fieldInfoMap:I,_graphicExpressionAttributes:U}=this;X.content[J]=m.formatAttributes({fieldInfos:E.fieldInfos,graphic:W,attributes:{...U,...E.attributes},layer:H,fieldInfoMap:I,relatedInfos:p})}};w._createFormattedAttributes=function(E){const {_effectivePopupTemplate:J,
graphic:X,relatedInfos:W,_sourceLayer:p,_fieldInfoMap:H,_graphicExpressionAttributes:I}=this,U={global:m.formatAttributes({fieldInfos:null==J?void 0:J.fieldInfos,graphic:X,attributes:I,layer:p,fieldInfoMap:H,relatedInfos:W}),content:[]};Array.isArray(E)&&E.forEach((Z,ea)=>{"fields"===Z.type&&this._createFieldsFormattedAttributes({contentElement:Z,contentElementIndex:ea,formattedAttributes:U});"media"===Z.type&&this._createMediaFormattedAttributes({contentElement:Z,contentElementIndex:ea,formattedAttributes:U})});
return U};w._checkForRelatedFeatures=function(E){const {graphic:J,_effectivePopupTemplate:X}=this;return this._queryRelatedInfos(J,m.getAllFieldInfos(X),E)};w._queryRelatedInfos=function(){var E=d._asyncToGenerator(function*(J,X,W){const {relatedInfos:p,_sourceLayer:H}=this;p.clear();const I=L.isSome(H.associatedLayer)?yield H.associatedLayer.load(W):H;if(I){var U=X.filter(ka=>ka&&m.isRelatedField(ka.fieldName));if(U&&U.length){X.forEach(ka=>this._configureRelatedInfo(ka,I));var Z=yield D.queryLayerInfos({relatedInfos:p,
layer:I},W);Object.keys(Z).forEach(ka=>{var ya;const oa=p.get(ka.toString());ka=null==(ya=Z[ka])?void 0:ya.value;oa&&ka&&(oa.layerInfo=ka.data)});var ea=yield D.queryRelatedFeatures({graphic:J,relatedInfos:p,layer:I},W);Object.keys(ea).forEach(ka=>{var ya;D.setRelatedFeatures(null==(ya=ea[ka])?void 0:ya.value,p.get(ka.toString()))})}}});return function(J,X,W){return E.apply(this,arguments)}}();w._configureRelatedInfo=function(E,J){const {relatedInfos:X}=this,W=D.getRelatedFieldInfo(E.fieldName);if(W){var {layerId:p,
fieldName:H}=W;p&&(J=X.get(p.toString())||D.createRelatedInfo(p,J))&&(D.updateRelatedInfo({relatedInfo:J,fieldName:H,fieldInfo:E}),this.relatedInfos.set(p,J))}};d._createClass(P,[{key:"_effectivePopupTemplate",get:function(){return L.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return m.createfieldInfoMap(m.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return m.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(E){this._set("graphic",E?E.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(E){void 0===E?this._clearOverride("spatialReference"):this._override("spatialReference",E)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(E){void 0===E?this._clearOverride("map"):
this._override("map",E)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return P}(f);f.interceptor=new G.FeatureSetQueryInterceptor(m.preLayerQueryCallback,m.preRequestCallback);u.__decorate([k.property()],f.prototype,"_error",void 0);u.__decorate([k.property()],f.prototype,"_featureAbortController",void 0);u.__decorate([k.property({readOnly:!0})],f.prototype,"_effectivePopupTemplate",null);u.__decorate([k.property({readOnly:!0})],f.prototype,"_fieldInfoMap",null);
u.__decorate([k.property({readOnly:!0})],f.prototype,"_sourceLayer",null);u.__decorate([k.property()],f.prototype,"abilities",void 0);u.__decorate([v.cast("abilities")],f.prototype,"castAbilities",null);u.__decorate([k.property({readOnly:!0})],f.prototype,"content",void 0);u.__decorate([k.property({readOnly:!0})],f.prototype,"contentViewModels",void 0);u.__decorate([k.property({type:Boolean})],f.prototype,"defaultPopupTemplateEnabled",void 0);u.__decorate([k.property({readOnly:!0})],f.prototype,"state",
null);u.__decorate([k.property({readOnly:!0})],f.prototype,"formattedAttributes",void 0);u.__decorate([k.property({type:c,value:null})],f.prototype,"graphic",null);u.__decorate([k.property({readOnly:!0})],f.prototype,"lastEditInfo",void 0);u.__decorate([k.property({readOnly:!0})],f.prototype,"relatedInfos",void 0);u.__decorate([k.property()],f.prototype,"spatialReference",null);u.__decorate([k.property({readOnly:!0})],f.prototype,"title",void 0);u.__decorate([k.property()],f.prototype,"map",null);
u.__decorate([k.property({readOnly:!0})],f.prototype,"waitingForContent",null);u.__decorate([k.property()],f.prototype,"view",void 0);return f=O=u.__decorate([t.subclass("esri.widgets.FeatureViewModel")],f)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(d){d.FeatureSetQueryInterceptor=function(u,c){this.preLayerQueryCallback=u;this.preRequestCallback=c;this.preLayerQueryCallback||(this.preLayerQueryCallback=G=>{});this.preRequestCallback||(this.preLayerQueryCallback=
G=>{})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(d,
u,c,G,f,F,A,L,K,C,x){d.FeatureContentMixin=k=>{k=function(g){function q(){var v=g.apply(this,arguments)||this;v.renderNodeContent=t=>C.isWidget(t)&&!t.destroyed?x.tsx("div",{key:t},t.render()):t instanceof HTMLElement?x.tsx("div",{key:t,bind:t,afterCreate:v._attachToNode}):C.hasDomNode(t)?x.tsx("div",{key:t,bind:t.domNode,afterCreate:v._attachToNode}):null;return v}u._inheritsLoose(q,g);q.prototype._attachToNode=function(v){v.appendChild(this)};return q}(k);return k=c.__decorate([K.subclass("esri.widgets.Feature.ContentMixin")],
k)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v){A=function(t){function n(e,h){e=t.call(this,e,h)||this;e._animationDelay=500;e._animationPromise=null;e.location=null;e.view=null;e.viewModel=new g;e.visible=!1;return e}d._inheritsLoose(n,t);var z=n.prototype;z.initialize=function(){this.own([f.watch(()=>this.visible,e=>this._visibleChange(e))])};z.destroy=function(){this._animationPromise=null};z.show=function(e){const {location:h,promise:l}=e;h&&(this.viewModel.location=h);this.visible=!0;e=()=>this.hide();
l&&l.catch(()=>{}).then(e)};z.hide=function(){this.visible=!1};z.render=function(){var {visible:e}=this,{screenLocation:h}=this.viewModel;h=!!h;e={["esri-spinner--start"]:e&&h,["esri-spinner--finish"]:!e&&h};h=this._getPositionStyles();return v.tsx("div",{class:this.classes("esri-spinner",e),styles:h})};z._visibleChange=function(e){if(e)this.viewModel.screenLocationEnabled=!0;else{var h=G.after(this._animationDelay);this._animationPromise=h;h.catch(()=>{}).then(()=>{this._animationPromise===h&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};z._getPositionStyles=function(){const {screenLocation:e,view:h}=this.viewModel;if(c.isNone(h)||c.isNone(e))return{};const {padding:l}=h;return{left:`${e.x-l.left}px`,top:`${e.y-l.top}px`}};return n}(k);u.__decorate([F.aliasOf("viewModel.location")],A.prototype,"location",void 0);u.__decorate([F.aliasOf("viewModel.view")],A.prototype,"view",void 0);u.__decorate([C.property({type:g})],A.prototype,"viewModel",void 0);u.__decorate([F.aliasOf("viewModel.visible")],A.prototype,
"visible",void 0);return A=u.__decorate([x.subclass("esri.widgets.Spinner")],A)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(d,u,c,G,f,F,A,L){G=function(K){function C(x){x=K.call(this,x)||this;x.visible=
!1;return x}d._inheritsLoose(C,K);return C}(L);u.__decorate([c.property()],G.prototype,"visible",void 0);return G=u.__decorate([A.subclass("esri.widgets.CompassViewModel")],G)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){const k=Symbol("anchorHandles");c=function(q){function v(t){var n=q.call(this,t)||this;n[g]=new G;n.location=null;n.screenLocationEnabled=!1;n.view=null;n[k].add([F.when(()=>f.applySome(n.screenLocationEnabled?n.view:null,z=>[z.size,"3d"===z.type?z.camera:z.viewpoint]),()=>n.notifyChange("screenLocation")),F.watch(()=>n.screenLocation,(z,e)=>{f.isSome(z)&&f.isSome(e)&&n.emit("view-change")})]);return n}d._inheritsLoose(v,q);v.prototype.destroy=function(){this.view=
null;this[k]=f.destroyMaybe(this[k])};d._createClass(v,[{key:"screenLocation",get:function(){const {location:t,view:n,screenLocationEnabled:z}=this;return z&&f.isSome(t)&&f.isSome(n)&&n.ready?n.toScreen(t):null}}]);return v}(c.EventedAccessor);var g=k;u.__decorate([A.property()],c.prototype,"location",void 0);u.__decorate([A.property()],c.prototype,"screenLocation",null);u.__decorate([A.property()],c.prototype,"screenLocationEnabled",void 0);u.__decorate([A.property()],c.prototype,"view",void 0);
return c=u.__decorate([x.subclass("esri.widgets.support.AnchorElementViewModel")],c)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D,O,T,Q,N,P,w){const E=F.ofType({key:"type",defaultKeyValue:"button",base:e,typeMap:{button:h,toggle:l}}),J=K.getLogger("esri.widgets.Popup.PopupViewModel");c=function(X){function W(H){H=X.call(this,H)||this;H._handles=new L;H._pendingPromises=new Set;H._fetchFeaturesController=null;H._selectedClusterFeature=null;H.featurePage=null;H.actions=new E;H.activeFeature=null;H.defaultPopupTemplateEnabled=!1;H.autoCloseEnabled=!1;H.autoOpenEnabled=
!0;H.browseClusterEnabled=!1;H.content=null;H.featuresPerPage=20;H.featureViewModelAbilities=null;H.featureViewModels=[];H.highlightEnabled=!0;H.includeDefaultActions=!0;H.selectedClusterBoundaryFeature=new G({symbol:new w({outline:{width:1.5,color:"cyan"},style:"none"})});H.title=null;H.updateLocationEnabled=!1;H.view=null;H.visible=!1;H.zoomFactor=4;H.zoomToLocation=null;return H}d._inheritsLoose(W,X);var p=W.prototype;p.initialize=function(){this._handles.add([x.watch(()=>[this.autoOpenEnabled,
this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),x.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),x.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),x.watch(()=>{var H,I;return null==(H=this.view)?void 0:null==(I=H.animation)?void 0:I.state},H=>this._animationStateChange(H)),x.watch(()=>this.location,H=>this._locationChange(H)),
x.watch(()=>this.selectedFeature,H=>this._selectedFeatureChange(H)),x.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),x.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),x.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",H=>T.triggerAction({event:H,view:this.view})),x.when(()=>
!this.waitingForResult,()=>this._waitingForResultChange(),x.sync),x.watch(()=>{var H,I;return[this.features,null==(H=this.view)?void 0:H.map,null==(I=this.view)?void 0:I.spatialReference]},()=>this._updateFeatureVMs()),x.watch(()=>{var H;return null==(H=this.view)?void 0:H.scale},()=>this._viewScaleChange()),x.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),x.watch(()=>this.browseClusterEnabled,H=>H?this.enableClusterBrowsing():this.disableClusterBrowsing())])};p.destroy=function(){this._cancelFetchingFeatures();
this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};p.centerAtLocation=function(){var {view:H}=this;const I=T.getSelectedTarget(this);return I?this.callGoTo({target:{target:I,scale:H.scale}}):(H=new A("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:I,view:H}),J.error(H),Promise.reject(H))};p.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,
activeFeature:null})};p.fetchFeatures=function(H,I){const {view:U}=this;return U&&H?U.fetchPopupFeatures(H,{event:I&&I.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:I&&I.signal}):(H=new A("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:H,view:U}),J.error(H),Promise.reject(H))};p.open=function(H){H={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...H,visible:!0};var {fetchFeatures:I}=H;delete H.fetchFeatures;
I&&this._setFetchFeaturesPromises(H.location);I=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const U of I)delete H[U];this.set(H)};p.triggerAction=function(H){(H=this.allActions.getItemAt(H))&&!H.disabled&&this.emit("trigger-action",{action:H})};p.next=function(){this.selectedFeatureIndex+=1;return this};p.previous=function(){--this.selectedFeatureIndex;return this};p.disableClusterBrowsing=function(){T.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};p.enableClusterBrowsing=
function(){var H=d._asyncToGenerator(function*(){const {view:I,selectedFeature:U}=this;"2d"!==(null==I?void 0:I.type)?J.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",U):T.isClusterFeature(U)?(yield T.displayClusterExtent(this),yield T.browseAggregateFeatures(this)):J.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",U)});return function(){return H.apply(this,arguments)}}();p._animationStateChange=function(H){this.zoomToLocation||
(O.zoomToFeature.disabled="waiting-for-target"===H)};p._clearBrowsedClusterGraphics=function(){var H;const I=null==(H=this.view)?void 0:H.graphics;I&&(I.remove(this.selectedClusterBoundaryFeature),I.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};p._viewScaleChange=function(){T.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};
p._locationChange=function(H){const {selectedFeature:I,updateLocationEnabled:U}=this;U&&H&&(!I||I.geometry)&&this.centerAtLocation()};p._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};p._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};p._setGraphicOnFeatureViewModels=function(){const {features:H,featureCount:I,featurePage:U,featuresPerPage:Z,featureViewModels:ea}=this;if(null!==
U){var ka=((U-1)*Z+I)%I;ea.slice(ka,ka+Z).forEach((ya,oa)=>{ya&&!ya.graphic&&(ya.graphic=H[ka+oa])})}};p._selectedFeatureChange=function(){var H=d._asyncToGenerator(function*(I){if(I){var {location:U,updateLocationEnabled:Z,view:ea}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(ea.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),T.isClusterFeature(I)||(I.symbol=yield y.getDisplayedSymbol(I),this._selectedClusterFeature=I,ea.graphics.add(this._selectedClusterFeature))):
!Z&&U||!I.geometry?Z&&!I.geometry&&this.centerAtLocation().then(()=>{this.location=ea.center.clone()}):this.location=C.unwrap(this._getPointFromGeometry(I.geometry))}});return function(I){return H.apply(this,arguments)}}();p._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};p._setFetchFeaturesPromises=function(H){return this._fetchFeaturesWithController(this._getScreenPoint(H||this.location)).then(I=>{const {clientOnlyGraphics:U,promisesPerLayerView:Z}=I;I=Promise.resolve(U);
const ea=Z.map(ka=>ka.promise);this.promises=[I,...ea]})};p._destroyFeatureVMs=function(){this.featureViewModels.forEach(H=>H&&!H.destroyed&&H.destroy());this._set("featureViewModels",[])};p._updateFeatureVMs=function(){const {selectedFeature:H,features:I,featureViewModels:U}=this;T.isClusterFeature(H)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(I&&I.length){var Z=U.slice(0),ea=[];I.forEach((ka,ya)=>{if(ka){var oa=null;Z.some((Ga,ha)=>{Ga&&Ga.graphic===ka&&(oa=Ga,Z.splice(ha,1));
return!!oa});if(oa)ea[ya]=oa;else{var va,ua;const Ga=new D({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(va=this.view)?void 0:va.spatialReference,graphic:ka===H?ka:null,map:null==(ua=this.view)?void 0:ua.map,view:this.view});ea[ya]=Ga}}});Z.forEach(ka=>ka&&!ka.destroyed&&ka.destroy());this._set("featureViewModels",ea)}};p._getScreenPoint=function(H){const {view:I}=this;return I&&H&&"function"===typeof I.toScreen?I.toScreen(H):
null};p._autoOpenEnabledChange=function(){const {_handles:H,autoOpenEnabled:I}=this;H.remove("auto-fetch-features");if(I&&this.view){const U=this.view.on("click",Z=>{"mouse"===Z.pointerType&&0!==Z.button||this._fetchFeaturesAndOpen(Z)},r.ViewEventPriorities.WIDGET);H.add(U,"auto-fetch-features")}};p._cancelFetchingFeatures=function(){const H=this._fetchFeaturesController;H&&H.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};p._fetchFeaturesWithController=function(H,
I){this._cancelFetchingFeatures();const U=new AbortController,{signal:Z}=U;this._fetchFeaturesController=U;this.notifyChange("waitingForResult");H=this.fetchFeatures(H,{signal:Z,event:I});H.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return H};p._fetchFeaturesAndOpen=function(H){const {screenPoint:I,mapPoint:U}=H,{view:Z}=this;this._fetchFeaturesWithController(I,H).then(ea=>{const {clientOnlyGraphics:ka,promisesPerLayerView:ya,location:oa}=ea,
va=[Promise.resolve(ka),...ya.map(ua=>ua.promise)];Z.popup.open({location:oa||U,promises:va});return ea})};p._updatePendingPromises=function(H){H&&this._pendingPromises.has(H)&&(this._pendingPromises.delete(H),this.notifyChange("pendingPromisesCount"))};p._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};p._getPointFromGeometry=function(H){return C.isNone(H)?null:"point"===H.type?H:"extent"===H.type?H.center:"polygon"===H.type?H.centroid:"multipoint"===H.type||"polyline"===H.type?H.extent.center:
null};p._getLayerView=function(){var H=d._asyncToGenerator(function*(I,U){yield I.when();return I.whenLayerView(U)});return function(I,U){return H.apply(this,arguments)}}();p._getHighlightLayer=function(H){const {layer:I,sourceLayer:U}=H;return"map-notes"===(null==U?void 0:U.type)||"subtype-group"===(null==U?void 0:U.type)?U:I};p._getHighlightTarget=function(H,I){I="imagery"===I.type?void 0:"objectIdField"in I&&I.objectIdField;const U=H.attributes;return U&&I&&U[I]||H};p._highlightActiveFeature=function(){var H=
d._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");const {highlightEnabled:I,view:U,activeFeature:Z,visible:ea}=this;if(Z&&U&&I&&ea){var ka=this._getHighlightLayer(Z);if(ka&&ka instanceof z){var ya=this._getLayerView(U,ka);this._highlightActiveFeaturePromise=ya;var oa=yield ya;oa&&m.highlightsSupported(oa)&&this._highlightActiveFeaturePromise===ya&&this.activeFeature&&this.highlightEnabled&&(ka=oa.highlight(this._getHighlightTarget(Z,ka)),this._handles.add(ka,"highlight-active-feature"))}}});
return function(){return H.apply(this,arguments)}}();p._highlightSelectedFeature=function(){var H=d._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:I,highlightEnabled:U,view:Z,visible:ea}=this;if(I&&Z&&U&&ea){var ka=this._getHighlightLayer(I);if(ka&&ka instanceof z){var ya=this._getLayerView(Z,ka);this._highlightSelectedFeaturePromise=ya;var oa=yield ya;oa&&m.highlightsSupported(oa)&&this._highlightSelectedFeaturePromise===ya&&this.selectedFeature&&
this.highlightEnabled&&this.visible&&(ka=oa.highlight(this._getHighlightTarget(I,ka)),this._handles.add(ka,"highlight-selected-feature"))}}});return function(){return H.apply(this,arguments)}}();p._updateFeatures=function(H){const {features:I}=this;H&&H.length&&(I.length?(H=H.filter(U=>!I.includes(U)),this.features=I.concat(H)):this.features=H)};d._createClass(W,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(H=>H.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||
this.waitingForResult)}},{key:"allActions",get:function(){const H=this._get("allActions")||new E;H.removeAll();const {actions:I,defaultActions:U,defaultPopupTemplateEnabled:Z,includeDefaultActions:ea,selectedFeature:ka}=this;var ya=ea?U.concat(I):I;const oa=ka&&("function"===typeof ka.getEffectivePopupTemplate&&ka.getEffectivePopupTemplate(Z)||ka.popupTemplate),va=oa&&oa.actions;(ya=oa&&oa.overwriteActions?va:va?va.concat(ya):ya)&&ya.filter(Boolean).forEach(ua=>H.add(ua));return H}},{key:"defaultActions",
get:function(){const H=this._get("defaultActions")||new E;H.removeAll();H.addMany(T.isClusterFeature(this.selectedFeature)?[O.zoomToClusteredFeatures.clone(),O.browseClusteredFeatures.clone()]:[O.zoomToFeature.clone()]);return H}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(H){H=H||[];this._set("features",H);const {pendingPromisesCount:I,promiseCount:U,selectedFeatureIndex:Z}=this,ea=U&&H.length;ea&&
I&&-1===Z?this.selectedFeatureIndex=0:ea&&-1!==Z||(this.selectedFeatureIndex=H.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(H){const I=this.get("view.spatialReference.isWebMercator");H&&H.get("spatialReference.isWGS84")&&I&&(H=n.geographicToWebMercator(H));this._set("location",H)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||
0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(H){this._pendingPromises.clear();this.features=[];Array.isArray(H)&&H.length?(this._set("promises",H),H=H.slice(0),H.forEach(I=>{this._pendingPromises.add(I);I.then(U=>{this._pendingPromises.has(I)&&this._updateFeatures(U);this._updatePendingPromises(I)},()=>this._updatePendingPromises(I))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},
{key:"selectedFeature",get:function(){const {features:H,selectedFeatureIndex:I}=this;return-1===I?null:H[I]||null}},{key:"selectedFeatureIndex",get:function(){const H=this._get("selectedFeatureIndex");return"number"===typeof H?H:-1},set:function(H){const {featureCount:I}=this;H=isNaN(H)||-1>H||!I?-1:(H+I)%I;this.activeFeature=null;this._set("selectedFeatureIndex",H)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?
"ready":"disabled"}}]);return W}(N.GoToMixin(Q));u.__decorate([k.property()],c.prototype,"featurePage",void 0);u.__decorate([k.property()],c.prototype,"isLoadingFeature",null);u.__decorate([k.property({type:E})],c.prototype,"actions",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"active",null);u.__decorate([k.property()],c.prototype,"activeFeature",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"allActions",null);u.__decorate([k.property({type:Boolean})],c.prototype,"defaultPopupTemplateEnabled",
void 0);u.__decorate([k.property()],c.prototype,"autoCloseEnabled",void 0);u.__decorate([k.property()],c.prototype,"autoOpenEnabled",void 0);u.__decorate([k.property()],c.prototype,"browseClusterEnabled",void 0);u.__decorate([k.property()],c.prototype,"content",void 0);u.__decorate([k.property({type:E,readOnly:!0})],c.prototype,"defaultActions",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"featureCount",null);u.__decorate([k.property()],c.prototype,"features",null);u.__decorate([k.property()],
c.prototype,"featuresPerPage",void 0);u.__decorate([k.property()],c.prototype,"featureViewModelAbilities",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"featureViewModels",void 0);u.__decorate([k.property()],c.prototype,"highlightEnabled",void 0);u.__decorate([k.property()],c.prototype,"includeDefaultActions",void 0);u.__decorate([k.property({type:P})],c.prototype,"location",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"pendingPromisesCount",null);u.__decorate([k.property({readOnly:!0})],
c.prototype,"selectedClusterBoundaryFeature",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"waitingForResult",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"promiseCount",null);u.__decorate([k.property()],c.prototype,"promises",null);u.__decorate([k.property({value:null,readOnly:!0})],c.prototype,"selectedFeature",null);u.__decorate([k.property({value:-1})],c.prototype,"selectedFeatureIndex",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"selectedFeatureViewModel",
null);u.__decorate([k.property({readOnly:!0})],c.prototype,"state",null);u.__decorate([k.property()],c.prototype,"title",void 0);u.__decorate([k.property()],c.prototype,"updateLocationEnabled",void 0);u.__decorate([k.property()],c.prototype,"view",void 0);u.__decorate([k.property()],c.prototype,"visible",void 0);u.__decorate([k.property()],c.prototype,"zoomFactor",void 0);u.__decorate([k.property()],c.prototype,"zoomToLocation",void 0);u.__decorate([k.property()],c.prototype,"centerAtLocation",null);
return c=u.__decorate([t.subclass("esri.widgets.Popup.PopupViewModel")],c)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(d,u,c,G,f,F,A,L,K,C){function x(e,h){if(h&&(e.style.filter=C.getCSSFilterFromEffectList(h),h=h.effects))for(const l of h)if("drop-shadow"===(null==l?void 0:l.type)){0>l.offsetX?e.style.marginLeft=
`${Math.abs(l.offsetX)}px`:e.style.marginRight=`${l.offsetX}px`;break}}function k(e,h){return g.apply(this,arguments)}function g(){g=c._asyncToGenerator(function*(e,h){switch(e.type){case "web-style":var {previewWebStyleSymbol:l}=yield new Promise((y,r)=>d(["./previewWebStyleSymbol"],y,r));return l(e,k,h);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:l}=yield new Promise((y,r)=>d(["./previewSymbol3D"],y,r)),l(e,h);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:l}=
yield new Promise((y,r)=>d(["./previewSymbol2D"],y,r)),l(e,h);case "cim":return{previewCIMSymbol:l}=yield new Promise((y,r)=>d(["./previewCIMSymbol"],y,r)),l(e,h)}});return g.apply(this,arguments)}function q(e){return e&&"opacity"in e?e.opacity*q(e.parent):1}function v(){v=c._asyncToGenerator(function*(e,h){var l,y;if(e){var r=e.sourceLayer;r=null!=(l=f.isSome(h)&&null!=(y=h.useSourceLayer)&&y?r:e.layer)?l:r;l=q(r);if(f.isSome(e.symbol)&&(!f.isSome(h)||!0!==h.ignoreGraphicSymbol))return e="web-style"===
e.symbol.type?yield e.symbol.fetchSymbol({...h,cache:f.isSome(h)?h.webStyleCache:null}):e.symbol.clone(),C.applyColorToSymbol(e,null,l),e;var m=f.isSome(h)&&h.renderer||r&&"renderer"in r&&r.renderer;if(y=m&&"getSymbolAsync"in m?yield m.getSymbolAsync(e,h):null){y="web-style"===y.type?yield y.fetchSymbol({...h,cache:f.isSome(h)?h.webStyleCache:null}):y.clone();if(!("visualVariables"in m&&m.visualVariables&&m.visualVariables.length))return C.applyColorToSymbol(y,null,l),y;"arcadeRequiredForVisualVariables"in
m&&m.arcadeRequiredForVisualVariables&&(f.isNone(h)||f.isNone(h.arcade))&&(h={...f.unwrap(h)},h.arcade=yield F.loadArcade());r=yield new Promise((P,w)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],P,w));var D=[],O=[],T=[],Q=[];for(var N of m.visualVariables)switch(N.type){case "color":D.push(N);break;case "opacity":O.push(N);break;case "rotation":Q.push(N);break;case "size":N.target||T.push(N)}N=(N=!!D.length&&D[D.length-1])?r.getColor(N,e,h):null;O=(O=!!O.length&&O[O.length-
1])?r.getOpacity(O,e,h):null;null!=l&&(O=null!=O?O*l:l);C.applyColorToSymbol(y,N,O);T.length&&(l=r.getAllSizes(T,e,h),yield C.applySizesToSymbol(y,l));for(const P of Q)C.applyRotationToSymbol(y,r.getRotationAngle(P,e,h),P.axis);return y}}});return v.apply(this,arguments)}function t(){t=c._asyncToGenerator(function*(e,h){var l;if(e){var y=q(e.layer||e.sourceLayer);if(f.isSome(e.symbol)&&(!f.isSome(h)||!0!==h.ignoreGraphicSymbol))return e="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(h):e.symbol.clone(),
C.getColorFromSymbol(e,y);var r=f.isSome(h)&&h.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer"),m=yield r.getSymbolAsync(e,h);if(m){m="web-style"===m.type?yield m.fetchSymbol(h):m.clone();m=C.getColorFromSymbol(m,y);if(!("visualVariables"in r)||"visualVariables"in r&&!r.visualVariables||"visualVariables"in r&&(null==(l=r.visualVariables)||!l.length))return m;r.arcadeRequiredForVisualVariables&&(f.isNone(h)||f.isNone(h.arcade))&&(h={...f.unwrap(h)},h.arcade=yield F.loadArcade());l=
yield new Promise((T,Q)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],T,Q));var D=[],O=[];for(const T of r.visualVariables)switch(T.type){case "color":D.push(T);break;case "opacity":O.push(T)}r=(r=0<D.length?D[D.length-1]:null)?l.getColor(r,e,h):m;e=(m=0<O.length?O[O.length-1]:null)?l.getOpacity(m,e,h):null;null!=y&&(e=null!=e?e*y:y);return r?C.applyOpacityToColor(r,e):null}}});return t.apply(this,arguments)}let n=null;const z=[255,255,255];u.getDisplayedColor=function(e,h){return t.apply(this,
arguments)};u.getDisplayedSymbol=function(e,h){return v.apply(this,arguments)};u.renderColorRampPreviewHTML=function(e,h={}){var l="horizontal"===h.align;const {width:y=l?75:24,height:r=l?24:75,gradient:m=!0}=h;var D=window.devicePixelRatio,O=y*D,T=r*D;D=document.createElement("canvas");D.width=O;D.height=T;D.style.width=`${y}px`;D.style.height=`${r}px`;const Q=D.getContext("2d");var N=l?O:0,P=l?0:T;if(m){const w=Q.createLinearGradient(0,0,N,P);l=e.length;const E=1===l?0:1/(l-1);e.forEach((J,X)=>
w.addColorStop(X*E,J.toString()));Q.fillStyle=w;Q.fillRect(0,0,O,T)}else{O=l?O/e.length:O;T=l?T:T/e.length;P=N=0;for(const w of e)Q.fillStyle=w.toString(),Q.fillRect(N,P,O,T),N=l?N+O:0,P=l?0:P+T}e=document.createElement("div");e.style.width=`${y}px`;e.style.height=`${r}px`;x(e,null==h?void 0:h.effectList);e.appendChild(D);return e};u.renderDotDensityPreviewHTML=function(e,h,l){const {backgroundColor:y,outline:r,dotSize:m}=e;l=l&&l.swatchSize||L.SymbolSizeDefaults.size;const D=Math.round(l*l/m**2*
.8),O=window.devicePixelRatio;e=document.createElement("canvas");const T=l*O;e.width=T;e.height=T;e.style.width=`${e.width/O}px`;e.style.height=`${e.height/O}px`;const Q=e.getContext("2d");y&&(Q.fillStyle=y.toCss(!0),Q.fillRect(0,0,T,T),Q.fill());Q.fillStyle=h.toCss(!0);if(n&&n.length/2===D)for(h=0;h<2*D;h+=2)Q.fillRect(n[h],n[h+1],m*O,m*O),Q.fill();else for(n=[],h=0;h<2*D;h+=2){const N=Math.floor(Math.random()*(T-0+1)),P=Math.floor(Math.random()*(T-0+1));n.push(N,P);Q.fillRect(N,P,m*O,m*O);Q.fill()}r&&
(r.color&&(Q.strokeStyle=r.color.toCss(!0)),Q.lineWidth=r.width,Q.strokeRect(0,0,T,T));l=new Image(l,l);l.src=e.toDataURL();return l};u.renderPieChartPreviewHTML=function(e,h={}){const l=h.radius||40;var y=2*Math.PI*l,r=e.length;const m=y/r,D=[],O=A.getStroke(h.outline);O&&(O.width*=2);(O||h.backgroundColor)&&D.push({shape:{type:"circle",cx:l,cy:l,r:l},fill:h.backgroundColor,stroke:O,offset:[0,0]});const T=h.values,Q=T&&T.length===r&&100===T.reduce((P,w)=>P+w,0),N=[0];for(let P=0;P<r;P++){const w=
Q?T[P]*y/100:null;Q&&N.push(w+N[P]);D.push({shape:{type:"circle",cx:l,cy:l,r:l/2},fill:[0,0,0,0],stroke:{width:l,dashArray:`${w||m} ${y}`,dashoffset:`-${Q?N[P]/2:m/2*P}`,color:e[P]},offset:[0,0]})}r=null;e=2*l+((null==O?void 0:O.width)||0);if(y=h.holePercentage)O&&D.push({shape:{type:"circle",cx:l,cy:l,r:l*y},fill:null,stroke:O,offset:[0,0]}),r=e/2,r=[[{shape:{type:"circle",cx:r,cy:r,r},fill:z,stroke:O?{...O,color:z}:null,offset:[0,0]},{shape:{type:"circle",cx:r,cy:r,r:l*y},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return K.renderSymbol([D],[e,e],{effectView:h.effectList,ignoreStrokeWidth:!0,masking:r,rotation:-90})};u.renderPreviewHTML=k;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(d,u){function c(G,f){return Math.round(Math.min(Math.max(G+191.25*f,0),255))}d.SymbolSizeDefaults=void 0;(function(G){G[G.size=22]="size";G[G.lineWidth=50]="lineWidth";G[G.maxSize=
120]="maxSize";G[G.maxOutlineSize=80]="maxOutlineSize";G[G.tallSymbolWidth=20]="tallSymbolWidth"})(d.SymbolSizeDefaults||(d.SymbolSizeDefaults={}));d.adjustColorBrightness=function(G,f){if("type"in G&&("linear"===G.type||"pattern"===G.type))return G;G=new u(G);return new u([c(G.r,f),c(G.g,f),c(G.b,f),G.a])};d.adjustColorComponentBrightness=c;d.getConeShapes=function(G,f){let F=f?d.SymbolSizeDefaults.tallSymbolWidth:G;f=f?4:6;F=F<=d.SymbolSizeDefaults.size?F-.5*f:F-f;f=.15*F;const A=F;G-=f;return[{type:"ellipse",
cx:.5*F,cy:G,rx:.5*F,ry:f},{type:"path",path:[{command:"M",values:[.5*A,0]},{command:"L",values:[A,G]},{command:"L",values:[0,G]},{command:"Z",values:[]}]}]};d.getCubeShapes=function(G,f){let F=f?d.SymbolSizeDefaults.tallSymbolWidth:G;var A=f?4:6;A=F=F<=d.SymbolSizeDefaults.size?F-.5*A:F-A;f=f?.35*F:.5*F;return[{type:"path",path:[{command:"M",values:[.5*A,0]},{command:"L",values:[A,.5*f]},{command:"L",values:[.5*A,f]},{command:"L",values:[0,.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[0,.5*f]},{command:"L",values:[.5*A,f]},{command:"L",values:[.5*A,G]},{command:"L",values:[0,G-.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*A,f]},{command:"L",values:[.5*A,G]},{command:"L",values:[A,G-.5*f]},{command:"L",values:[A,.5*f]},{command:"Z",values:[]}]}]};d.getCylinderShapes=function(G,f){var F=f?d.SymbolSizeDefaults.tallSymbolWidth:G;f=f?4:6;F=F<=d.SymbolSizeDefaults.size?F-.5*f:F-f;f=.5*F;const A=.15*F;G-=A;return[{type:"ellipse",cx:.5*F,cy:G,rx:f,
ry:A},{type:"path",path:[{command:"M",values:[0,A]},{command:"L",values:[0,G]},{command:"L",values:[F,G]},{command:"L",values:[F,A]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*F,cy:A,rx:f,ry:A}]};d.getDiamondShapes=function(G){var f=G;f=f<d.SymbolSizeDefaults.size?f-2:f-4;const F=Math.floor(G/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[f,.5*G-F]},{command:"L",values:[.45*f-F,.5*G+F]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*
f,0]},{command:"L",values:[.45*f-F,.5*G+F]},{command:"L",values:[0,.5*G-F]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*G-F]},{command:"L",values:[.45*f-F,.5*G+F]},{command:"L",values:[.45*f,G]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,G]},{command:"L",values:[f,.5*G-F]},{command:"L",values:[.45*f-F,.5*G+F]},{command:"Z",values:[]}]}]};d.getExtrudeSymbolShapes=function(G){const f=d.SymbolSizeDefaults.size;G*=.5;return[{type:"path",path:[{command:"M",
values:[0,.35*f]},{command:"L",values:[.3*f,.7*f]},{command:"L",values:[.3*f,.7*f+G]},{command:"L",values:[0,.7*f+G-.35*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*f,.7*f]},{command:"L",values:[.3*f,.7*f+G]},{command:"L",values:[f,G]},{command:"L",values:[f,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*f,0]},{command:"L",values:[f,0]},{command:"L",values:[.3*f,.7*f]},{command:"L",values:[0,.35*f]},{command:"Z",values:[]}]}]};d.getInvertedConeShapes=
function(G){let f=G;f=f<d.SymbolSizeDefaults.size?f-3:f-6;const F=.15*f,A=f;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[A,0]},{command:"L",values:[.5*A,G-F]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*f,cy:0,rx:.5*f,ry:F}]};d.getPathSymbolShapes=function(G,f,F){var A=d.SymbolSizeDefaults.size;let L=A,K=A;1>G?L*=.75:1<G&&(K*=1.25);G=A;f&&F&&(L=K=G=A=0);return[{type:"path",path:[{command:"M",values:[G,0]},{command:"L",values:[F?G:.875*G,0]},{command:"L",values:[F?
L-.5*G:0,K-.5*A]},{command:"L",values:[L-.5*G,K-.5*A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[G,0]},{command:"L",values:[G,f?0:.125*A]},{command:"L",values:[L-.5*G,f?K-.5*A:A]},{command:"L",values:[L-.5*G,K-.5*A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[L-.5*G,K-.5*A]},{command:"L",values:[F?L-.5*G:0,K-.5*A]},{command:"L",values:[F?L-.5*G:0,f?K-.5*A:A]},{command:"L",values:[L-.5*G,f?K-.5*A:A]},{command:"Z",values:[]}]}]};d.getTetrahedronShapes=
function(G){var f=G;f=f<d.SymbolSizeDefaults.size?f-1:f-2;return[{type:"path",path:[{command:"M",values:[.45*G,0]},{command:"L",values:[G,f]},{command:"L",values:[.45*G,.6*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*G,0]},{command:"L",values:[.45*G,.6*f]},{command:"L",values:[0,f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,f]},{command:"L",values:[.45*G,.6*f]},{command:"L",values:[G,f]},{command:"Z",values:[]}]}]};d.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
d.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(d,u,c,G,f,F,A,L,K,C){function x(g,q,v){return g?c(g,{responseType:"image"}).then(t=>{t=t.data;const n=t.width,z=t.height,e=n/z;let h=q;v&&(h=Math.min(h,Math.max(n,z)));return{image:t,width:1>=e?Math.ceil(h*e):h,height:1>=e?h:Math.ceil(h/e)}}):Promise.reject(new f("renderUtils: imageDataSize","href not provided."))}const k=L.createProjector();d.renderSymbol=function(g,q,v){const t=Math.ceil(q[0]);q=Math.ceil(q[1]);if(!g.some(z=>!!z.length))return null;const n=v&&v.node||document.createElement("div");
null!=v.opacity&&(n.style.opacity=v.opacity.toString());null!=v.effectView&&(n.style.filter=C.getCSSFilterFromEffectList(v.effectView));k.append(n,K.renderSVG.bind(null,g,t,q,v));return n};d.tintImageWithColor=function(g,q,v,t,n){return x(g,q,n).then(z=>{const e=z.width?z.width:q,h=z.height?z.height:q;var l;if(l=z.image)l=v&&"ignore"!==t?"multiply"===t&&255===v.r&&255===v.g&&255===v.b&&1===v.a?!1:!0:!1;if(l){var y=z.image.width,r=z.image.height;F("edge")&&/\.svg$/i.test(g)&&(--y,--r);l=Math.ceil(e);
var m=Math.ceil(h);var D=document.createElement("canvas");D.width=l;D.height=m;D.style.width=l+"px";D.style.height=m+"px";D=D.getContext("2d");D.clearRect(0,0,l,m);l=D;l.drawImage(z.image,0,0,y,r,0,0,e,h);m=l.getImageData(0,0,e,h);D=[v.r/255,v.g/255,v.b/255,v.a];const T=G.toHSV(v);for(let Q=0;Q<m.data.length;Q+=4){z=m.data;y=Q;r=D;var O=T;switch(t){case "multiply":z[y+0]*=r[0];z[y+1]*=r[1];z[y+2]*=r[2];z[y+3]*=r[3];break;default:{const N=G.toHSV({r:z[y+0],g:z[y+1],b:z[y+2]});N.h=O.h;N.s=O.s;N.v=N.v/
100*O.v;O=G.toRGB(N);z[y+0]=O.r;z[y+1]=O.g;z[y+2]=O.b;z[y+3]*=r[3]}}}l.putImageData(m,0,0);g=l.canvas.toDataURL("image/png")}else(l=u.id&&u.id.findCredential(g))&&l.token&&(z=g.includes("?")?"\x26":"?",g=`${g}${z}token=${l.token}`);return{url:g,width:e,height:h}}).catch(()=>({url:g,width:q,height:q}))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(d){function u(C,x){const k=[];let g,q;if(C[0].length!==
x.length)throw"dimensions do not match";const v=C.length,t=C[0].length;let n=0;for(g=0;g<v;g++){for(q=n=0;q<t;q++)n+=C[g][q]*x[q];k.push(n)}return k}function c(C){C=[C.r/255,C.g/255,C.b/255].map(x=>.04045>=x?x/12.92:((x+.055)/1.055)**2.4);C=u(L,C);return{x:100*C[0],y:100*C[1],z:100*C[2]}}function G(C){C=u(K,[C.x/100,C.y/100,C.z/100]).map(x=>Math.min(1,Math.max(.0031308>=x?12.92*x:1.055*x**(1/2.4)-.055,0)));return{r:Math.round(255*C[0]),g:Math.round(255*C[1]),b:Math.round(255*C[2])}}function f(C){C=
[C.x/95.047,C.y/100,C.z/108.883].map(x=>x>(6/29)**3?x**(1/3):1/3*(29/6)**2*x+4/29);return{l:116*C[1]-16,a:500*(C[0]-C[1]),b:200*(C[1]-C[2])}}function F(C){const x=C.l;C=[(x+16)/116+C.a/500,(x+16)/116,(x+16)/116-C.b/200].map(k=>k>6/29?k**3:3*(6/29)**2*(k-4/29));return{x:95.047*C[0],y:100*C[1],z:108.883*C[2]}}function A(C){if("r"in C&&"g"in C&&"b"in C)return C;if("l"in C&&"c"in C&&"h"in C){var x=C.c;var k=C.h;x={l:C.l,a:x*Math.cos(k),b:x*Math.sin(k)};return G(F(x))}if("l"in C&&"a"in C&&"b"in C)return G(F(C));
if("x"in C&&"y"in C&&"z"in C)return G(C);if("h"in C&&"s"in C&&"v"in C){{k=(C.h+360)%360/60;x=C.v/100*255;C=C.s/100*x;const g=C*(1-Math.abs(k%2-1));switch(Math.floor(k)){case 0:k={r:C,g,b:0};break;case 1:k={r:g,g:C,b:0};break;case 2:k={r:0,g:C,b:g};break;case 3:k={r:0,g,b:C};break;case 4:k={r:g,g:0,b:C};break;case 5:case 6:k={r:C,g:0,b:g};break;default:k={r:0,g:0,b:0}}k.r=Math.round(k.r+x-C);k.g=Math.round(k.g+x-C);k.b=Math.round(k.b+x-C);x=k}return x}return C}const L=[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],K=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];d.darken=function(C,x){C=f(c(C));C.l*=1-x;return G(F(C))};d.toHSV=function(C){if("h"in C&&"s"in C&&"v"in C)return C;var x=A(C);{C=x.r;const k=x.g,g=x.b;x=Math.max(C,k,g);const q=x-Math.min(C,k,g);C=0===q?0:x===C?(k-g)/q%6:x===k?(g-C)/q+2:(C-k)/q+4;0>C&&(C+=6);C={h:60*C,s:100*(0===q?0:q/x),v:100/255*x}}return C};d.toLAB=function(C){return"l"in C&&"a"in C&&"b"in C?C:f(c(A(C)))};d.toLCH=function(C){if(!("l"in
C&&"c"in C&&"h"in C)){{var x=f(c(A(C)));C=x.l;var k=x.a;const g=x.b;x=Math.sqrt(k*k+g*g);k=Math.atan2(g,k);k=0<k?k:k+2*Math.PI;C={l:C,c:x,h:k}}}return C};d.toRGB=A;d.toXYZ=function(C){return"x"in C&&"y"in C&&"z"in C?C:c(A(C))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A){function L(p,H){p*=X/180;return Math.abs(H*Math.sin(p))+Math.abs(H*Math.cos(p))}function K(p){return p.map(H=>`${H.command} ${H.values.join(" ")}`).join(" ").trim()}function C(p,H,I,U){if(p){if("circle"===p.type)return A.tsx("circle",{fill:H,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-dashoffset":I.dashOffset,"stroke-miterlimit":"4",cx:p.cx,cy:p.cy,r:p.r});if("ellipse"===
p.type)return A.tsx("ellipse",{fill:H,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",cx:p.cx,cy:p.cy,rx:p.rx,ry:p.ry});if("rect"===p.type)return A.tsx("rect",{fill:H,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",x:p.x,y:p.y,width:p.width,height:p.height});if("image"===
p.type)return A.tsx("image",{href:p.src,x:p.x,y:p.y,width:p.width,height:p.height,preserveAspectRatio:"none"});if("path"===p.type)return p="string"!==typeof p.path?K(p.path):p.path,A.tsx("path",{fill:H,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",d:p});if("text"===p.type)return A.tsx("text",{"alignment-baseline":U.alignBaseline,fill:H,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,
"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4","text-anchor":U.align,"text-decoration":U.decoration,kerning:U.kerning,rotate:U.rotate,"text-rendering":Q,"font-style":U.font.style,"font-variant":U.font.variant,"font-weight":U.font.weight,"font-size":U.font.size,"font-family":U.font.family,x:p.x,y:p.y},p.text)}return null}function x(p){const H={fill:"none",pattern:null,linearGradient:null};if(p)if("type"in p&&"pattern"===p.type){var I=`patternId-${++O}`;
H.fill=`url(#${I})`;H.pattern={id:I,x:p.x,y:p.y,width:p.width,height:p.height,image:{x:0,y:0,width:p.width,height:p.height,href:p.src}}}else"type"in p&&"linear"===p.type?(I=`linearGradientId-${++T}`,H.fill=`url(#${I})`,H.linearGradient={id:I,x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,stops:p.colors.map(U=>({offset:U.offset,color:U.color&&(new u(U.color)).toString()}))}):p&&(p=new u(p),H.fill=p.toString());return H}function k(p){const H={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(p&&(null!=p.width&&(H.width=p.width),p.cap&&(H.cap=p.cap),p.join&&(H.join=p.join.toString()),p.color&&(H.color=(new u(p.color)).toString()),p.dashArray&&(H.dashArray=p.dashArray),p.dashArray&&(H.dashOffset=p.dashoffset),p.style)){let U=null;p.style in J&&(U=J[p.style]);if(Array.isArray(U)){U=U.slice(0);for(var I=0;I<U.length;++I)U[I]*=p.width;if("butt"!==p.cap){for(I=0;I<U.length;I+=2)U[I]-=p.width,1>U[I]&&(U[I]=1);for(I=1;I<U.length;I+=2)U[I]+=p.width}U=U.join(",")}H.dashArray=U}return H}function g(p,
H){const I={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};p&&(I.align=p.align,I.alignBaseline=p.alignBaseline,I.decoration=p.decoration,I.kerning=p.kerning?"auto":"0",I.rotate=p.rotated?"90":"0",I.font.style=H.style||"normal",I.font.variant=H.variant||"normal",I.font.weight=H.weight||"normal",I.font.size=H.size&&H.size.toString()||"10pt",I.font.family=H.family||"serif");return I}function q(p){const {pattern:H,linearGradient:I}=
p;return H?A.tsx("pattern",{id:H.id,patternUnits:"userSpaceOnUse",x:H.x,y:H.y,width:H.width,height:H.height},A.tsx("image",{x:H.image.x,y:H.image.y,width:H.image.width,height:H.image.height,href:H.image.href})):I?(p=I.stops.map((U,Z)=>A.tsx("stop",{key:`${Z}-stop`,offset:U.offset,"stop-color":U.color})),A.tsx("linearGradient",{id:I.id,gradientUnits:"userSpaceOnUse",x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2},p)):null}function v(p,H){if(!p)return null;const I=[];for(const U of p){const {shape:Z,fill:ea,stroke:ka,
font:ya}=U;p=x(ea);const oa=k(ka),va="text"===Z.type?g(Z,ya):null;I.push(C(Z,p.fill,oa,va))}return A.tsx("mask",{id:H,maskUnits:"userSpaceOnUse"},A.tsx("g",null,I))}function t(p,H,I){return f.translate(p,f.identity(p),[H,I])}function n(p,H,I,U,Z){f.scale(p,f.identity(p),[H,I]);p[4]=p[4]*H-U*H+U;p[5]=p[5]*I-Z*I+Z;return p}function z(p,H,I,U){var Z=H%360*Math.PI/180;f.rotate(p,f.identity(p),Z);H=Math.cos(Z);Z=Math.sin(Z);const ea=p[4],ka=p[5];p[4]=ea*H-ka*Z+U*Z-I*H+I;p[5]=ka*H+ea*Z-I*Z-U*H+U;return p}
function e(p,H){w&&"left"in w?(w.left>p&&(w.left=p),w.right<p&&(w.right=p),w.top>H&&(w.top=H),w.bottom<H&&(w.bottom=H)):w={left:p,bottom:H,right:p,top:H}}function h(p){const H=p.args,I=H.length;switch(p.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(p=0;p<I;p+=2)e(H[p],H[p+1]);E.x=H[I-2];E.y=H[I-1];break;case "H":for(p=0;p<I;++p)e(H[p],E.y);E.x=H[I-1];break;case "V":for(p=0;p<I;++p)e(E.x,H[p]);E.y=H[I-1];break;case "m":p=0;"x"in E||(e(E.x=H[0],E.y=H[1]),p=2);for(;p<I;p+=2)e(E.x+=
H[p],E.y+=H[p+1]);break;case "l":case "t":for(p=0;p<I;p+=2)e(E.x+=H[p],E.y+=H[p+1]);break;case "h":for(p=0;p<I;++p)e(E.x+=H[p],E.y);break;case "v":for(p=0;p<I;++p)e(E.x,E.y+=H[p]);break;case "c":for(p=0;p<I;p+=6)e(E.x+H[p],E.y+H[p+1]),e(E.x+H[p+2],E.y+H[p+3]),e(E.x+=H[p+4],E.y+=H[p+5]);break;case "s":case "q":for(p=0;p<I;p+=4)e(E.x+H[p],E.y+H[p+1]),e(E.x+=H[p+2],E.y+=H[p+3]);break;case "A":for(p=0;p<I;p+=7)e(H[p+5],H[p+6]);E.x=H[I-2];E.y=H[I-1];break;case "a":for(p=0;p<I;p+=7)e(E.x+=H[p+5],E.y+=H[p+
6])}}function l(p,H,I){const U=N[p.toLowerCase()];"number"===typeof U&&(U?H.length>=U&&(p={action:p,args:H.slice(0,H.length-H.length%U)},I.push(p),h(p)):(p={action:p,args:[]},I.push(p),h(p)))}function y(p){const H={x:0,y:0,width:0,height:0};if("circle"===p.type)H.x=p.cx-p.r,H.y=p.cy-p.r,H.width=2*p.r,H.height=2*p.r;else if("ellipse"===p.type)H.x=p.cx-p.rx,H.y=p.cy-p.ry,H.width=2*p.rx,H.height=2*p.ry;else if("image"===p.type||"rect"===p.type)H.x=p.x,H.y=p.y,H.width=p.width,H.height=p.height;else if("path"===
p.type){{const Z=("string"!==typeof p.path?K(p.path):p.path).match(P),ea=[];w={};E={};if(Z){p="";var I=[],U=Z.length;for(let ka=0;ka<U;++ka){const ya=Z[ka],oa=parseFloat(ya);isNaN(oa)?(p&&l(p,I,ea),I=[],p=ya):I.push(oa)}l(p,I,ea);p={x:0,y:0,width:0,height:0};w&&"left"in w&&(p.x=w.left,p.y=w.top,p.width=w.right-w.left,p.height=w.bottom-w.top)}else p=null}H.x=p.x;H.y=p.y;H.width=p.width;H.height=p.height}return H}function r(p){const H={x:0,y:0,width:0,height:0};let I=null,U=Number.NEGATIVE_INFINITY,
Z=Number.NEGATIVE_INFINITY;for(const ea of p)I?(I.x=Math.min(I.x,ea.x),I.y=Math.min(I.y,ea.y),U=Math.max(U,ea.x+ea.width),Z=Math.max(Z,ea.y+ea.height)):(I=H,I.x=ea.x,I.y=ea.y,U=ea.x+ea.width,Z=ea.y+ea.height);I&&(I.width=U-I.x,I.height=Z-I.y);return I}function m(p,H,I,U,Z,ea,ka,ya,oa){var va=(ka&&ea?L(ea,H):H)/2,ua=(ka&&ea?L(ea,I):I)/2;oa&&(va=oa[0],ua=oa[1],va=(ka&&ea?L(ea,va):va)/2,ua=(ka&&ea?L(ea,ua):ua)/2);const Ga=p.width+U,ha=p.height+U;ka=G.create();oa=G.create();var la=!1;if(Z&&0!==Ga&&0!==
ha){Z=H!==I?H/I:Ga/ha;la=H>I?H:I;let wa=1,za=1;isNaN(la)||(1<Z?(wa=la/Ga,za=la/Z/ha):(za=la/ha,wa=la*Z/Ga));f.multiply(oa,oa,n(ka,wa,za,va,ua));la=!0}Z=p.x+(Ga-U)/2;p=p.y+(ha-U)/2;f.multiply(oa,oa,t(ka,va-Z,ua-p));!la&&(Ga>H||ha>I)&&(U=Ga/H>ha/I,H=(U?H:I)/(U?Ga:ha),f.multiply(oa,oa,n(ka,H,H,Z,p)));ea&&f.multiply(oa,oa,z(ka,ea,Z,p));ya&&f.multiply(oa,oa,t(ka,ya[0],ya[1]));return`matrix(${oa[0]},${oa[1]},${oa[2]},${oa[3]},${oa[4]},${oa[5]})`}function D(p,H,I){p=null==p?void 0:p.effects.find(ya=>"bloom"===
ya.type);if(!p)return null;const {strength:U,radius:Z}=p;p=0<U?Z:0;const ea=(U+p)*H,ka=4*U+1;return A.tsx("filter",{id:`bloom${I}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},A.tsx("feMorphology",{operator:"dilate",radius:(U+.5*p)*5**(H/100)*(.4+H/100),in:"SourceGraphic",result:"dilate"}),A.tsx("feGaussianBlur",{in:"dilate",stdDeviation:ea/25,result:"blur"}),A.tsx("feGaussianBlur",{in:"blur",stdDeviation:ea/50,result:"intensityBlur"}),A.tsx("feComponentTransfer",{in:"SourceGraphic",
result:"intensityBrightness"},A.tsx("feFuncR",{type:"linear",slope:ka}),A.tsx("feFuncG",{type:"linear",slope:ka}),A.tsx("feFuncB",{type:"linear",slope:ka})),A.tsx("feMerge",null,A.tsx("feMergeNode",{in:"intensityBlur"}),A.tsx("feMergeNode",{in:"intensityBrightness"}),A.tsx("feGaussianBlur",{stdDeviation:U/10})))}let O=0,T=0;F=c("android");const Q=c("chrome")||F&&4<=F?"auto":"optimizeLegibility",N={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},P=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let w=
{},E={};const J={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},X=Math.PI;let W=1;d.computeBBox=r;d.generateFillAttributes=x;d.generateStrokeAttributes=k;d.generateTextAttributes=g;d.getBoundingBox=y;d.getTransformMatrix=m;d.renderDef=q;d.renderSVG=function(p,H,I,U={}){const Z=[],ea=[],ka=++W,ya=D(U.effectView,H,ka);var oa=null;if(ya){var va;oa=
null==(va=U.effectView)?void 0:va.effects.find(la=>"bloom"===la.type);oa=(oa.strength?oa.strength+oa.radius/2:0)/3;oa=[Math.max(H+H*oa,10),Math.max(I+I*oa,10)]}for(va=0;va<p.length;va++){var ua=p[va];const la=[];var Ga=[],ha=0;let wa=0,za=0;for(const Aa of ua){const {shape:xa,fill:ba,stroke:da,font:ia,offset:ja}=Aa;U.ignoreStrokeWidth||(ha+=da&&da.width||0);ua=x(ba);const sa=k(da),ma="text"===xa.type?g(xa,ia):null;Z.push(q(ua));la.push(C(xa,ua.fill,sa,ma));Ga.push(y(xa));ja&&(wa+=ja[0],za+=ja[1])}Ga=
m(r(Ga),H,I,ha,U.scale,U.rotation,U.useRotationSize,[wa,za],oa);ha=null;U.masking&&(ha=`mask-${va}`,Z.push(v(U.masking[va],ha)),ha=`url(#${ha})`);ea.push(ha?A.tsx("g",{mask:ha},A.tsx("g",{transform:Ga},la)):A.tsx("g",{transform:Ga},la))}U.useRotationSize&&U.rotation&&(H=L(U.rotation,H),I=L(U.rotation,I));ya&&(H=oa[0],I=oa[1]);return A.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:H,height:I,style:"display: block;"},ya,A.tsx("defs",null,Z),ya?A.tsx("g",{filter:`url(#bloom${ka})`},ea):ea)};d.renderShape=
C;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(d){function u(){const K=new Float32Array(6);K[0]=1;K[3]=1;return K}function c(K){const C=new Float32Array(6);C[0]=K[0];C[1]=K[1];C[2]=K[2];C[3]=K[3];C[4]=K[4];C[5]=K[5];return C}function G(K,C,x,k,g,q){const v=new Float32Array(6);v[0]=K;v[1]=C;v[2]=x;v[3]=k;v[4]=g;v[5]=q;return v}function f(K,C){return new Float32Array(K,C,6)}function F(K,C,x,
k){const g=C[k];C=C[k+1];K[k]=x[0]*g+x[2]*C+x[4];K[k+1]=x[1]*g+x[3]*C+x[5]}function A(K,C,x,k=0,g=0,q=2){for(g=g||C.length/q;k<g;k++)F(K,C,x,k*q)}const L=Object.freeze(Object.defineProperty({__proto__:null,create:u,clone:c,fromValues:G,createView:f,transform:F,transformMany:A},Symbol.toStringTag,{value:"Module"}));d.clone=c;d.create=u;d.createView=f;d.fromValues=G;d.mat2df32=L;d.transform=F;d.transformMany=A})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(d,u){function c(m,
D){m[0]=D[0];m[1]=D[1];m[2]=D[2];m[3]=D[3];m[4]=D[4];m[5]=D[5];return m}function G(m){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=0;m[5]=0;return m}function f(m,D,O,T,Q,N,P){m[0]=D;m[1]=O;m[2]=T;m[3]=Q;m[4]=N;m[5]=P;return m}function F(m,D){const O=D[0],T=D[1],Q=D[2],N=D[3],P=D[4];D=D[5];let w=O*N-T*Q;if(!w)return null;w=1/w;m[0]=N*w;m[1]=-T*w;m[2]=-Q*w;m[3]=O*w;m[4]=(Q*D-N*P)*w;m[5]=(T*P-O*D)*w;return m}function A(m){return m[0]*m[3]-m[1]*m[2]}function L(m,D,O){const T=D[0],Q=D[1],N=D[2],P=D[3],w=D[4];D=D[5];
const E=O[0],J=O[1],X=O[2],W=O[3],p=O[4];O=O[5];m[0]=T*E+N*J;m[1]=Q*E+P*J;m[2]=T*X+N*W;m[3]=Q*X+P*W;m[4]=T*p+N*O+w;m[5]=Q*p+P*O+D;return m}function K(m,D,O){const T=D[0],Q=D[1],N=D[2],P=D[3],w=D[4];D=D[5];const E=Math.sin(O);O=Math.cos(O);m[0]=T*O+N*E;m[1]=Q*O+P*E;m[2]=T*-E+N*O;m[3]=Q*-E+P*O;m[4]=w;m[5]=D;return m}function C(m,D,O){const T=D[1],Q=D[2],N=D[3],P=D[4],w=D[5],E=O[0];O=O[1];m[0]=D[0]*E;m[1]=T*E;m[2]=Q*O;m[3]=N*O;m[4]=P;m[5]=w;return m}function x(m,D,O){const T=D[0],Q=D[1],N=D[2],P=D[3],
w=D[4];D=D[5];const E=O[0];O=O[1];m[0]=T;m[1]=Q;m[2]=N;m[3]=P;m[4]=T*E+N*O+w;m[5]=Q*E+P*O+D;return m}function k(m,D){const O=Math.sin(D);D=Math.cos(D);m[0]=D;m[1]=O;m[2]=-O;m[3]=D;m[4]=0;m[5]=0;return m}function g(m,D){m[0]=D[0];m[1]=0;m[2]=0;m[3]=D[1];m[4]=0;m[5]=0;return m}function q(m,D){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=D[0];m[5]=D[1];return m}function v(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"}function t(m){return Math.sqrt(m[0]**2+m[1]**2+m[2]**2+m[3]**2+m[4]**
2+m[5]**2+1)}function n(m,D,O){m[0]=D[0]+O[0];m[1]=D[1]+O[1];m[2]=D[2]+O[2];m[3]=D[3]+O[3];m[4]=D[4]+O[4];m[5]=D[5]+O[5];return m}function z(m,D,O){m[0]=D[0]-O[0];m[1]=D[1]-O[1];m[2]=D[2]-O[2];m[3]=D[3]-O[3];m[4]=D[4]-O[4];m[5]=D[5]-O[5];return m}function e(m,D,O){m[0]=D[0]*O;m[1]=D[1]*O;m[2]=D[2]*O;m[3]=D[3]*O;m[4]=D[4]*O;m[5]=D[5]*O;return m}function h(m,D,O,T){m[0]=D[0]+O[0]*T;m[1]=D[1]+O[1]*T;m[2]=D[2]+O[2]*T;m[3]=D[3]+O[3]*T;m[4]=D[4]+O[4]*T;m[5]=D[5]+O[5]*T;return m}function l(m,D){return m[0]===
D[0]&&m[1]===D[1]&&m[2]===D[2]&&m[3]===D[3]&&m[4]===D[4]&&m[5]===D[5]}function y(m,D){const O=m[0],T=m[1],Q=m[2],N=m[3],P=m[4];m=m[5];const w=D[0],E=D[1],J=D[2],X=D[3],W=D[4];D=D[5];return Math.abs(O-w)<=u.EPSILON*Math.max(1,Math.abs(O),Math.abs(w))&&Math.abs(T-E)<=u.EPSILON*Math.max(1,Math.abs(T),Math.abs(E))&&Math.abs(Q-J)<=u.EPSILON*Math.max(1,Math.abs(Q),Math.abs(J))&&Math.abs(N-X)<=u.EPSILON*Math.max(1,Math.abs(N),Math.abs(X))&&Math.abs(P-W)<=u.EPSILON*Math.max(1,Math.abs(P),Math.abs(W))&&Math.abs(m-
D)<=u.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))}const r=Object.freeze(Object.defineProperty({__proto__:null,copy:c,identity:G,set:f,invert:F,determinant:A,multiply:L,rotate:K,scale:C,translate:x,fromRotation:k,fromScaling:g,fromTranslation:q,str:v,frob:t,add:n,subtract:z,multiplyScalar:e,multiplyScalarAndAdd:h,exactEquals:l,equals:y,mul:L,sub:z},Symbol.toStringTag,{value:"Module"}));d.add=n;d.copy=c;d.determinant=A;d.equals=y;d.exactEquals=l;d.frob=t;d.fromRotation=k;d.fromScaling=g;d.fromTranslation=
q;d.identity=G;d.invert=F;d.mat2d=r;d.mul=L;d.multiply=L;d.multiplyScalar=e;d.multiplyScalarAndAdd=h;d.rotate=K;d.scale=C;d.set=f;d.str=v;d.sub=z;d.subtract=z;d.translate=x})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(d,u){d.extractSafeScaleBounds=function(c){var G,f;const F=c.effectiveScaleRange;c=null!=(G=null==F?void 0:F.minScale)?G:0;G=null!=(f=null==F?void 0:F.maxScale)?f:0;return{minScale:c,maxScale:G}};d.highlightsSupported=function(c){return c&&
"function"===typeof c.highlight};d.isScaleRangeActive=function(c,G){return 0<c||0<G};d.occludeesSupported=function(c){return c&&"function"===typeof c.maskOccludee};d.scaleBoundsPredicate=function(c,G,f){return u.isNone(c)||c>f&&(0===G||c<G)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(d,u){const c=new u({id:"zoom-to-feature",title:"{messages.zoom}",
className:"esri-icon-zoom-in-magnifying-glass"}),G=new u({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),f=new u({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});u=new u({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});d.all=[c,G,u,f];d.browseClusteredFeatures=u;d.removeSelectedFeature=G;d.zoomToClusteredFeatures=f;d.zoomToFeature=c;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(d,u,c,G,f,F){function A(n){const {selectedFeature:z,location:e,view:h}=n;return h?"3d"===h.type?z||e:n.get("selectedFeature.geometry")||e:null}function L(n){var z,e;return(null==n?void 0:n.isAggregate)&&"cluster"===(null==n?void 0:null==(z=n.sourceLayer)?
void 0:null==(e=z.featureReduction)?void 0:e.type)}function K(n,z){if("3d"!==(null==z?void 0:z.type)||!n||"esri.Graphic"!==n.declaredClass)return!0;if((z=z.getViewForGraphic(n))&&"whenGraphicBounds"in z){let e=!1;z.whenGraphicBounds(n,{useViewElevation:!0}).then(h=>{e=!h||!h.boundingBox||h.boundingBox[0]===h.boundingBox[3]&&h.boundingBox[1]===h.boundingBox[4]&&h.boundingBox[2]===h.boundingBox[5]}).catch(()=>{const h=new c("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",
{graphic:n});t.error(h)});return e}return!0}function C(n){return x.apply(this,arguments)}function x(){x=u._asyncToGenerator(function*(n){const {location:z,selectedFeature:e,view:h,zoomFactor:l}=n,y=A(n);if(!y)throw n=new c("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:y,view:h}),t.error(n),n;const r=h.scale/l,m=n.get("selectedFeature.geometry")||z,D=m&&"point"===m.type&&K(e,h);F.zoomToFeature.active=!0;F.zoomToFeature.disabled=!0;try{yield n.view.goTo({target:y,
scale:D?r:void 0})}finally{F.zoomToFeature.active=!1,F.zoomToFeature.disabled=!1,n.zoomToLocation=null,D&&(n.location=m)}});return x.apply(this,arguments)}function k(n){return g.apply(this,arguments)}function g(){g=u._asyncToGenerator(function*(n){const {selectedFeature:z,view:e}=n;if("2d"!==(null==e?void 0:e.type))throw n=new c("zoomToCluster:invalid-view","View must be 2d MapView.",{view:e}),t.error(n),n;if(!L(z))throw n=new c("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:z}),t.error(n),n;n=yield e.whenLayerView(z.sourceLayer);const h=n.createQuery();h.aggregateIds=[z.getObjectId()];F.zoomToClusteredFeatures.active=!0;F.zoomToClusteredFeatures.disabled=!0;({extent:n}=yield n.queryExtent(h));yield e.goTo({target:n});F.zoomToClusteredFeatures.active=!1;F.zoomToClusteredFeatures.disabled=!1});return g.apply(this,arguments)}function q(){q=u._asyncToGenerator(function*(n){const {selectedFeature:z,view:e}=n;var h=yield e.whenLayerView(z.sourceLayer);const l=
h.createQuery();l.aggregateIds=[z.getObjectId()];({extent:h}=yield h.queryExtent(l));n.selectedClusterBoundaryFeature.geometry=h;e.graphics.add(n.selectedClusterBoundaryFeature)});return q.apply(this,arguments)}function v(){v=u._asyncToGenerator(function*(n){const {selectedFeature:z,view:e}=n;n=yield e.whenLayerView(z.sourceLayer);const h=n.createQuery();h.aggregateIds=[z.getObjectId()];F.browseClusteredFeatures.active=!0;F.browseClusteredFeatures.disabled=!0;({features:n}=yield n.queryFeatures(h));
F.browseClusteredFeatures.active=!1;F.browseClusteredFeatures.disabled=!1;e.popup.open({features:[z].concat(n),featureMenuOpen:!0})});return v.apply(this,arguments)}const t=G.getLogger("esri.widgets.Popup.PopupViewModel");d.browseAggregateFeatures=function(n){return v.apply(this,arguments)};d.displayClusterExtent=function(n){return q.apply(this,arguments)};d.getSelectedTarget=A;d.isClusterFeature=L;d.isZoomScreenSize=K;d.removeClusteredFeaturesForBrowsing=function(n){const z=n.features.filter(e=>
L(e));z.length&&(n.features=z)};d.triggerAction=n=>{const {event:z,view:e}=n;({action:n}=z);var h=e&&e.popup;if(!n)return Promise.reject(new c("trigger-action:missing-arguments","Event has no action"));if(!h)return Promise.reject(new c("trigger-action:missing-arguments","view.popup is missing"));const {disabled:l,id:y}=n;if(!y)return Promise.reject(new c("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new c("trigger-action:invalid-action","Action is disabled"));
if(y===F.zoomToFeature.id)return C(h.viewModel).catch(f.throwIfNotAbortError);if(y===F.zoomToClusteredFeatures.id)return k(h.viewModel);if(y===F.browseClusteredFeatures.id)return h.featureMenuOpen=!h.featureMenuOpen,h.viewModel.browseClusterEnabled=!h.viewModel.browseClusterEnabled,Promise.resolve();h.viewModel.browseClusterEnabled=!1;if(y===F.removeSelectedFeature.id){h.close();({selectedFeature:n}=h);if(!n)return Promise.reject(new c(`trigger-action:${F.removeSelectedFeature.id}`,"selectedFeature is required",
{selectedFeature:n}));({sourceLayer:h}=n);h?h.remove(n):e.graphics.remove(n)}return Promise.resolve()};d.zoomToClusterExtent=k;d.zoomToLocation=C;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,c,G,f,F,A,L){d.GoToMixin=K=>{K=function(C){function x(...k){k=C.call(this,...k)||this;k.goToOverride=null;k.view=null;return k}u._inheritsLoose(x,C);x.prototype.callGoTo=function(k){const {view:g}=this;return this.goToOverride?this.goToOverride(g,k):g.goTo(k.target,k.options)};return x}(K);c.__decorate([G.property()],K.prototype,"goToOverride",void 0);c.__decorate([G.property()],K.prototype,"view",void 0);return K=c.__decorate([L.subclass("esri.widgets.support.GoTo")],K)};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(d,u){d.SupportedGraphicResult=void 0;(function(c){c[c.SUPPORTED=0]="SUPPORTED";c[c.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";c[c.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";c[c.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";c[c.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";c[c.SYMBOL_TYPE_UNSUPPORTED=
5]="SYMBOL_TYPE_UNSUPPORTED"})(d.SupportedGraphicResult||(d.SupportedGraphicResult={}));d.isSupportedGraphicResultMessage=function(c){switch(c){case d.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case d.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case d.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case d.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";
case d.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,u,c,G,f){d.isSupportedGraphic=function(F){var A;if("graphics"!==
(null==(A=F.layer)?void 0:A.type))return f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(c.isNone(F.geometry))return f.SupportedGraphicResult.GEOMETRY_MISSING;switch(F.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==G.getGraphicEffectiveElevationMode(F)&&G.hasGraphicFeatureExpressionInfo(F)?
f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:f.SupportedGraphicResult.SUPPORTED};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(d,u,c){function G(C,x){return u.isNone(x)||!x.mode?C?"absolute-height":"on-the-ground":x.mode}function f(C,x){return G(u.isSome(C)?C.hasZ:!1,x)}function F(C){const x=A(C);return f(C.geometry,
x)}function A(C){return C.layer&&"elevationInfo"in C.layer?C.layer.elevationInfo:null}function L(C,x,k,g,q,v,t=null){if(!u.isNone(v)){var n=u.isSome(t)?t.mode:"absolute-height";if("on-the-ground"===n)return 0;({absoluteZ:v}=K(x,k,g,q,C,v));a:{t=u.isSome(t)&&u.isSome(t.offset)?t.offset:0;switch(n){case "absolute-height":C=v-t;break a;case "relative-to-ground":C=v-(u.unwrapOr(C.elevationProvider.getElevation(x,k,g,q,"ground"),0)+t);break a;case "relative-to-scene":C=v-(u.unwrapOr(C.elevationProvider.getElevation(x,
k,g,q,"scene"),0)+t);break a}C=void 0}return C}}function K(C,x,k,g,q,v){const t=u.isSome(v.offset)?v.offset:0;switch(v.mode){case "absolute-height":return{absoluteZ:k+t,elevation:0};case "on-the-ground":return k=u.unwrapOr(q.elevationProvider.getElevation(C,x,0,g,"ground"),0),{absoluteZ:k,elevation:k};case "relative-to-ground":return C=u.unwrapOr(q.elevationProvider.getElevation(C,x,k,g,"ground"),0),{absoluteZ:k+C+t,elevation:C};case "relative-to-scene":return C=u.unwrapOr(q.elevationProvider.getElevation(C,
x,k,g,"scene"),0),{absoluteZ:k+C+t,elevation:C}}}d.absoluteHeightElevationInfo={mode:"absolute-height",offset:0};d.getConvertedElevation=function(C,x,k,g=null){return L(C,x.x,x.y,x.hasZ?x.z:0,x.spatialReference,k,g)};d.getConvertedElevationFromVector=function(C,x,k,g,q=null){return L(C,x[0],x[1],2<x.length?x[2]:0,k,g,q)};d.getEffectiveElevationMode=G;d.getGeometryEffectiveElevationMode=f;d.getGraphicEffectiveElevationInfo=function(C){var x=A(C);C=f(C.geometry,x);x=u.isSome(x)&&"on-the-ground"!==C?
u.unwrapOr(x.offset,0)*c.getMetersPerUnit(u.unwrapOr(x.unit,"meters")):0;return{mode:C,offset:x}};d.getGraphicEffectiveElevationMode=F;d.getZForElevationMode=function(C,x,k){if(!u.isNone(k)&&k.mode){var g=C.hasZ?C.z:0,q=u.isSome(k.offset)?k.offset:0;switch(k.mode){case "absolute-height":return g-q;case "on-the-ground":return 0;case "relative-to-ground":return C=u.unwrapOr(x.elevationProvider.getElevation(C.x,C.y,C.z,C.spatialReference,"ground"),0)+q,g-C;case "relative-to-scene":return C=u.unwrapOr(x.elevationProvider.getElevation(C.x,
C.y,C.z,C.spatialReference,"scene"),0)+q,g-C}}};d.hasGraphicFeatureExpressionInfo=function(C){if("on-the-ground"===F(C))return!1;C=A(C);C=u.isSome(C)&&C.featureExpressionInfo?C.featureExpressionInfo.expression:null;return!(!C||"0"===C)};d.zValueInAbsoluteHeightMode=K;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle",
"../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,u,c,G,f){function F(A){var L;return"graphics"!==(null==(L=A.layer)?void 0:L.type)?{result:f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:u.isNone(A.geometry)?{result:f.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==G.getGraphicEffectiveElevationMode(A)&&G.hasGraphicFeatureExpressionInfo(A)?{result:f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,geometry:null}:"point"!==
A.geometry.type&&"polyline"!==A.geometry.type&&("polygon"!==A.geometry.type||A.geometry instanceof c)?{result:f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:f.SupportedGraphicResult.SUPPORTED,geometry:A.geometry}}d.geometryOfSupportedGraphic=function(A){return F(A).geometry};d.isSupportedGraphic=function(A){return F(A).result};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q){var v;f=v=function(t){function n(...e){e=t.call(this,...e)||this;e.center=null;e.geodesic=!1;e.numberOfPoints=60;e.radius=1E3;e.radiusUnit="meters";return e}d._inheritsLoose(n,t);var z=n.prototype;z.normalizeCtorArgs=function(e,h){if(!e||!e.center){if(e&&e.rings)return t.prototype.normalizeCtorArgs.call(this,e,h);e={center:e}}return{...t.prototype.normalizeCtorArgs.call(this),...e,...h}};z.initialize=function(){var e=this.center;const h=this.numberOfPoints;this.hasZ=
e&&e.hasZ;if(0===this.rings.length&&e){var l=c.convertUnit(this.radius,this.radiusUnit,"meters"),y=e.spatialReference,r="geographic";if(y.isWebMercator)r="webMercator";else if(null!=q[y.wkid]||y.wkt&&0===y.wkt.indexOf("PROJCS"))r="projected";if(this.geodesic){let m;switch(r){case "webMercator":m=g.webMercatorToGeographic(e);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":m=
e}e=this._createGeodesicCircle(m,l,h);"webMercator"===r&&(e=g.geographicToWebMercator(e))}else{let m;"webMercator"===r||"projected"===r?m=l/this._convert2Meters(1,e.spatialReference):"geographic"===r&&(m=c.lengthToDegrees(l,"meters",x.getReferenceEllipsoid(e.spatialReference).radius));e=this._createPlanarCircle(e,m,h)}this.spatialReference=e.spatialReference;this.addRing(e.rings[0])}};z.clone=function(){const {center:e,numberOfPoints:h,radius:l,radiusUnit:y,geodesic:r}=this;return new v({center:e.clone(),
numberOfPoints:h,radius:l,radiusUnit:y,geodesic:r})};z._createGeodesicCircle=function(e,h,l){let y=0;const r=[];for(;360>y;){const m=[0,0];k.directGeodeticSolver(m,[e.x,e.y],y,h);this.hasZ&&m.push(e.z);r.push(m);y+=360/l}r.push(r[0]);return new C(r)};z._createPlanarCircle=function(e,h,l){const y=[],r=2*Math.PI/l;for(let D=0;D<l;++D){var m=r*D;m=[e.x+Math.cos(-m)*h,e.y+Math.sin(-m)*h];this.hasZ&&m.push(e.z);y.push(m)}y.push(y[0]);return new C({spatialReference:e.spatialReference,rings:[y]})};z._convert2Meters=
function(e,h){if(null!=q[h.wkid])h=q.values[q[h.wkid]];else{h=h.wkt;const l=h.lastIndexOf(",")+1,y=h.lastIndexOf("]]");h=parseFloat(h.substring(l,y))}return e*h};return n}(C);u.__decorate([G.property({type:K})],f.prototype,"center",void 0);u.__decorate([G.property()],f.prototype,"geodesic",void 0);u.__decorate([G.property()],f.prototype,"numberOfPoints",void 0);u.__decorate([G.property()],f.prototype,"radius",void 0);u.__decorate([G.property()],f.prototype,"radiusUnit",void 0);return f=v=u.__decorate([L.subclass("esri.geometry.Circle")],
f)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(d,u,c,G,f,F,A,L,K,C){function x(e){if(!e)return null;if(F.isGeographic(e)&&e.wkid){var h=f.spheroids[e.wkid];if(h)return h}return e.wkt&&((e=f.WKT_SPHEROID_REGEX.exec(e.wkt))&&2===e.length?(h=e[1].split(","),!h||3>h.length?e=null:(e=parseFloat(h[1]),h=parseFloat(h[2]),
e=isNaN(e)||isNaN(h)?null:{a:e,f:0===h?0:1/h})):e=null,e)?e:null}function k(e){e=x(e||C.WGS84);if("b"in e&&"eSq"in e&&"radius"in e)return e;const h=e.a*(1-e.f);return Object.assign(e,{b:h,eSq:1-(h/e.a)**2,radius:(2*e.a+h)/3,densificationRatio:1E4/((2*e.a+h)/3)})}function g(e){return 0>e?e+360:e}function q(e,h,l){const {a:y,eSq:r}=k(l);l=Math.sqrt(r);const m=Math.sin(h[1]*f.toRadians);h=y*h[0]*f.toRadians;l=0<r?y*(1-r)*(m/(1-r*m*m)-1/(2*l)*Math.log((1-l*m)/(1+l*m)))*.5:y*m;e[0]=h;e[1]=l;return e}function v(e){return null!==
x(e)}function t(e,h){if("polyline"!==e.type&&"polygon"!==e.type)throw new c("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:l}=e;if(!v(l))throw new c("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var y="polyline"===e.type?e.paths:e.rings;const r=[],m=[0,0],D={distance:null};for(const Q of y){y=[];r.push(y);y.push([Q[0][0],Q[0][1]]);var O=Q[0][0],T=Q[0][1];let N,P;for(let w=0;w<
Q.length-1;w++){N=Q[w+1][0];P=Q[w+1][1];if(O===N&&T===P)continue;const E=[O,T];z(D,[O,T],[N,P],l);const {azimuth:J,distance:X}=D;O=X/h;if(1<O){for(T=1;T<=O-1;T++)n(m,E,J,T*h,l),y.push(m.slice(0));n(m,E,J,(X+Math.floor(O-1)*h)/2,l);y.push(m.slice(0))}n(m,E,J,X,l);y.push(m.slice(0));O=m[0];T=m[1]}}return"polyline"===e.type?new A({paths:r,spatialReference:l}):new L({rings:r,spatialReference:l})}function n(e,h,l,y,r){const m=h[0]*f.toRadians;h=h[1]*f.toRadians;l*=f.toRadians;const {a:D,b:O,f:T}=k(r);
r=Math.sin(l);l=Math.cos(l);var Q=(1-T)*Math.tan(h);h=1/Math.sqrt(1+Q*Q);const N=Q*h,P=Math.atan2(Q,l);Q=h*r;const w=Q*Q;var E=1-w,J=E*(D*D-O*O)/(O*O);const X=1+J/16384*(4096+J*(-768+J*(320-175*J))),W=J/1024*(256+J*(-128+J*(74-47*J)));J=y/(O*X);let p=2*Math.PI,H,I,U,Z;for(;1E-12<Math.abs(J-p);)U=Math.cos(2*P+J),H=Math.sin(J),I=Math.cos(J),Z=W*H*(U+W/4*(I*(-1+2*U*U)-W/6*U*(-3+4*H*H)*(-3+4*U*U))),p=J,J=y/(O*X)+Z;y=N*H-h*I*l;E=T/16*E*(4+T*(4-3*E));y=Math.atan2(N*I+h*H*l,(1-T)*Math.sqrt(w+y*y))/f.toRadians;
e[0]=(m+(Math.atan2(H*r,h*I-N*H*l)-(1-E)*T*Q*(J+E*H*(U+E*I*(-1+2*U*U)))))/f.toRadians;e[1]=y;return e}function z(e,h,l,y){var r=h[0]*f.toRadians;h=h[1]*f.toRadians;var m=l[0]*f.toRadians;l=l[1]*f.toRadians;const {a:D,b:O,f:T,radius:Q}=k(y),N=m-r;var P=Math.atan((1-T)*Math.tan(h)),w=Math.atan((1-T)*Math.tan(l));y=Math.sin(P);P=Math.cos(P);const E=Math.sin(w);w=Math.cos(w);let J=1E3,X=N,W,p,H;let I,U,Z;do{var ea=Math.sin(X);var ka=Math.cos(X);H=Math.sqrt(w*ea*w*ea+(P*E-y*w*ka)*(P*E-y*w*ka));if(0===
H)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;ka=y*E+P*w*ka;I=Math.atan2(H,ka);U=P*w*ea/H;p=1-U*U;ea=ka-2*y*E/p;isNaN(ea)&&(ea=0);Z=T/16*p*(4+T*(4-3*p));W=X;X=N+(1-Z)*T*U*(I+Z*H*(ea+Z*ka*(-1+2*ea*ea)))}while(1E-12<Math.abs(X-W)&&0<--J);if(0===J)return y=Math.acos(Math.sin(h)*Math.sin(l)+Math.cos(h)*Math.cos(l)*Math.cos(m-r))*Q,r=m-r,e.azimuth=Math.atan2(Math.sin(r)*Math.cos(l),Math.cos(h)*Math.sin(l)-Math.sin(h)*Math.cos(l)*Math.cos(r))/f.toRadians,e.distance=y,e.reverseAzimuth=
void 0,e;r=p*(D*D-O*O)/(O*O);h=r/1024*(256+r*(-128+r*(74-47*r)));m=Math.atan2(P*Math.sin(X),P*E*Math.cos(X)-y*w);e.azimuth=Math.atan2(w*Math.sin(X),P*E-y*w*Math.cos(X))/f.toRadians;e.distance=O*(1+r/16384*(4096+r*(-768+r*(320-175*r))))*(I-h*H*(ea+h/4*(ka*(-1+2*ea*ea)-h/6*ea*(-3+4*H*H)*(-3+4*ea*ea))));e.reverseAzimuth=m/f.toRadians;return e}d.directGeodeticSolver=n;d.geodesicAreas=function(e,h="square-meters"){if(e.some(m=>!v(m.spatialReference)))throw new c("geodesic-areas:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const l=[];for(var y=0;y<e.length;y++){var r=e[y];const {radius:m,densificationRatio:D}=k(r.spatialReference);l.push(t(r,m*D))}e=[];y=[0,0];r=[0,0];for(let m=0;m<l.length;m++){const {rings:D,spatialReference:O}=l[m];let T=0;for(let Q=0;Q<D.length;Q++){const N=D[Q];q(y,N[0],O);q(r,N[N.length-1],O);let P=r[0]*y[1]-y[0]*r[1];for(let w=0;w<N.length-1;w++)q(y,N[w+1],O),q(r,N[w],O),P+=r[0]*y[1]-y[0]*r[1];T+=P}T=G.convertUnit(T,"square-meters",h);
e.push(T/-2)}return e};d.geodesicDensify=t;d.geodesicDistance=function(e,h,l="meters"){if(!e||!h)throw new c("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!e.spatialReference||!h.spatialReference)throw new c("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!F.equals(e.spatialReference,h.spatialReference))throw new c("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");
const {spatialReference:y}=e;if(!v(y))throw new c("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(e.x===h.x&&e.y===h.y)return{distance:0,azimuth:0,reverseAzimuth:0};const r={distance:null};z(r,[e.x,e.y],[h.x,h.y],y);r.distance=G.convertUnit(r.distance,"meters",l);r.azimuth=g(r.azimuth);r.reverseAzimuth=g(r.reverseAzimuth);return r};d.geodesicLengths=function(e,h="meters"){if(!e)throw new c("geodesic-lengths:invalid-geometries","the input geometries type is not supported");
if(e.some(r=>!v(r.spatialReference)))throw new c("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const l=[];for(let r=0;r<e.length;r++){var y=e[r];const {spatialReference:m}=y;y="polyline"===y.type?y.paths:y.rings;let D=0;for(let O=0;O<y.length;O++){const T=y[O];let Q=0;for(let N=1;N<T.length;N++){const P=T[N-1][0],w=T[N][0],E=T[N-1][1],J=T[N][1];if(E!==J||P!==w){const X={distance:null};z(X,[P,E],[w,J],m);Q+=X.distance}}D+=Q}D=G.convertUnit(D,
"meters",h);l.push(D)}return l};d.inverseGeodeticSolver=z;d.isSupported=v;d.pointFromDistance=function(e,h,l){if(!e||null==h||null==l)throw new c("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>l||360<l)throw new c("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!e.spatialReference)throw new c("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");
const {spatialReference:y}=e;if(!v(y))throw new c("geodesic-distance:not-supported","input geometry spatial reference is not supported");const r=[0,0];n(r,[e.x,e.y],l,h,y);return new K({x:r[0],y:r[1],spatialReference:y})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils",
"../isSupportedGraphicUtils"],function(d,u,c,G,f){d.isSupportedGraphic=function(F){var A;if("graphics"!==(null==(A=F.layer)?void 0:A.type))return f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(c.isNone(F.geometry))return f.SupportedGraphicResult.GEOMETRY_MISSING;switch(F.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return f.SupportedGraphicResult.SUPPORTED;default:return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return(A=
c.isSome(F.symbol)&&"point-3d"===F.symbol.type&&F.symbol.symbolLayers)&&0<A.length&&A.some(L=>"object"===L.type)?"on-the-ground"!==G.getGraphicEffectiveElevationMode(F)&&G.hasGraphicFeatureExpressionInfo(F)?f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:f.SupportedGraphicResult.SUPPORTED:f.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/draw/support/layerUtils":function(){define(["exports",
"../../../core/maybe"],function(d,u){d.addUniqueLayer=function(c,G,f){if(G&&c&&c.map){({map:c}=c);var F=c.layers.find(A=>A===G);F||c.add(G,f);void 0!==f&&null!==f&&c.layers.reorder(F,f)}};d.findLayerView=function(c,G){return c.allLayerViews.find(f=>{f=f.layer;return f===G||"sublayers"in f&&u.isSome(f.sublayers)&&f.sublayers.includes(G)})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(d){d.SKETCH_KEYS=
{redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ./snappingFactory ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate ../support/viewUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e){d.SnappingManager=function(h){function l(r){r=h.call(this,r)||this;r.options=new t;r.snappingEnginesFactory=v.defaultSnappingEnginesFactory;r._engines=[];r._currentMainCandidate=null;r._currentOtherActiveCandidates=[];return r}u._inheritsLoose(l,h);var y=l.prototype;y.initialize=function(){this.handles.add([L.watch(()=>{const {effectiveFeatureEnabled:r,effectiveSelfEnabled:m,touchSensitivityMultiplier:D,distance:O}=this.options;return{effectiveFeatureEnabled:r,
effectiveSelfEnabled:m,touchSensitivityMultiplier:D,distance:O}},()=>{this.doneSnapping();this.emit("changed")},L.sync),L.watch(()=>this.options,r=>{for(const m of this._engines)m.options=r},L.sync),L.watch(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:r,snappingEnginesFactory:m})=>this._recreateEngines(r,m),L.syncAndInitial)])};y.destroy=function(){this._destroyEngines()};y._recreateEngines=function(r,
m){this._destroyEngines();if(r){var {view:D,options:O}=this;this._engines=m(D,O)}};y._destroyEngines=function(){for(const r of this._engines)r.destroy();this._engines=[]};y.snap=function(){var r=u._asyncToGenerator(function*(m,D,O){const T=D.coordinateHelper.pointToVector(m),Q=yield this._fetchCandidates(T,D,O);return{get valid(){return!A.isAborted(O)},apply:()=>{const {snappedPoint:N,hints:P}=this._processCandidates(T,Q,D);this._removeVisualization();F.isSome(D.visualizer)&&this.handles.add(D.visualizer.draw(P,
{coordinateHelper:D.coordinateHelper,elevationInfo:D.elevationInfo,view:this.view}),"visualization-handle");return N}}});return function(m,D,O){return r.apply(this,arguments)}}();y.update=function(r,m){this._removeVisualization();let D=r;const O=[];if(F.isSome(this._currentMainCandidate)){const T=m.coordinateHelper;r=T.pointToVector(r);const Q=this._currentMainCandidate.constraint.closestTo(r);if(n.squareDistance(e.anyMapPointToScreenPoint(r,T,m.elevationInfo,this.view),e.anyMapPointToScreenPoint(Q,
T,m.elevationInfo,this.view))<this._squaredPointProximityThreshold(m.pointer)){D=T.vectorToDehydratedPoint(Q);this._currentMainCandidate.targetPoint=Q;O.push(...this._currentMainCandidate.hints);for(const N of this._currentOtherActiveCandidates)N.targetPoint=Q,O.push(...N.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}F.isSome(m.visualizer)&&this.handles.add(m.visualizer.draw(O,{coordinateHelper:m.coordinateHelper,elevationInfo:m.elevationInfo,view:this.view}),"visualization-handle");
return D};y.doneSnapping=function(){this._removeVisualization();this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};y._removeVisualization=function(){this.handles.remove("visualization-handle")};y._fetchCandidates=function(){var r=u._asyncToGenerator(function*(m,D,O){return(yield Promise.all(this._engines.map(T=>T.fetchCandidates(m,D,O)))).flat()});return function(m,D,O){return r.apply(this,arguments)}}();y._processCandidates=function(r,m,D){if(1>m.length)return this.doneSnapping(),
{snappedPoint:D.coordinateHelper.vectorToDehydratedPoint(r),hints:[]};n.sortCandidatesInPlace(r,m);const O=this._currentMainCandidate;if(F.isSome(O)){const T=this._findOldConstraintInNewCandidates(O,m);if(0<=T)if(m[T]instanceof z.IntersectionSnappingCandidate){if(q.squaredDistance(r,O.targetPoint)<this._squaredPointProximityThreshold(D.pointer))return this._updateSnappingCandidate(O,m,D)}else return this._intersectWithOtherCandidates(T,m,r,D)}return this._intersectWithOtherCandidates(0,m,r,D)};y._findOldConstraintInNewCandidates=
function(r,m){return r instanceof z.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(m,r.first)&&0<=this._findOldCandidateIndex(m,r.second)?0:-1:this._findOldCandidateIndex(m,r)};y._intersectWithOtherCandidates=function(r,m,D,O){const T=m[r],Q=[],N=O.coordinateHelper;for(let P=0;P<m.length;++P){if(P===r)continue;const w=m[P];for(const E of T.constraint.intersect(w.constraint)){const J=N.fromXYZ(E.intersection,T.targetPoint[2]);Q.push([new z.IntersectionSnappingCandidate(N,J,T,w,w.elevationInfo),
n.squareDistance(e.anyMapPointToScreenPoint(D,O.coordinateHelper,O.elevationInfo,this.view),e.anyMapPointToScreenPoint(J,O.coordinateHelper,O.elevationInfo,this.view))])}}return 0<Q.length&&(Q.sort((P,w)=>P[1]-w[1]),Q[0][1]<this._squaredPointProximityThreshold(O.pointer))?this._updateSnappingCandidate(Q[0][0],m,O):this._updateSnappingCandidate(T,m,O)};y._updateSnappingCandidate=function(r,m,D){this.doneSnapping();this._currentMainCandidate=r;const O=this._currentMainCandidate.targetPoint,T=[];T.push(...r.hints);
for(const Q of m){if(r instanceof z.IntersectionSnappingCandidate){if(Q.constraint.objectEqual(r.first.constraint)||Q.constraint.objectEqual(r.second.constraint))continue}else if(Q.constraint.objectEqual(r.constraint))continue;Q.constraint.check(O)&&(Q.targetPoint=O,this._currentOtherActiveCandidates.push(Q),T.push(...Q.hints))}return{snappedPoint:D.coordinateHelper.vectorToDehydratedPoint(O),hints:T}};y._squaredPointProximityThreshold=function(r){return"touch"===r?this.squaredTouchProximityThreshold:
this.squaredMouseProximityTreshold};y._findOldCandidateIndex=function(r,m){let D=-1;for(let O=0;O<r.length;++O)if(m.constraint.objectEqual(r[O].constraint)){D=O;break}return D};u._createClass(l,[{key:"updating",get:function(){return this._engines.some(r=>r.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:r,touchSensitivityMultiplier:m}=this.options,D=r*m;return D*
D}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this._engines}}}]);return l}(G.EventedMixin(f.HandleOwner));c.__decorate([K.property({constructOnly:!0})],d.SnappingManager.prototype,"view",void 0);c.__decorate([K.property()],d.SnappingManager.prototype,"options",void 0);c.__decorate([K.property({readOnly:!0})],d.SnappingManager.prototype,"updating",null);c.__decorate([K.property()],d.SnappingManager.prototype,"snappingEnginesFactory",void 0);
c.__decorate([K.property()],d.SnappingManager.prototype,"_engines",void 0);c.__decorate([K.property()],d.SnappingManager.prototype,"squaredMouseProximityTreshold",null);c.__decorate([K.property()],d.SnappingManager.prototype,"squaredTouchProximityThreshold",null);d.SnappingManager=c.__decorate([g.subclass("esri.views.interactive.snapping.SnappingManager")],d.SnappingManager);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2":function(){define(["exports",
"./common"],function(d,u){function c(I,U){I[0]=U[0];I[1]=U[1];return I}function G(I,U,Z){I[0]=U;I[1]=Z;return I}function f(I,U,Z){I[0]=U[0]+Z[0];I[1]=U[1]+Z[1];return I}function F(I,U,Z){I[0]=U[0]-Z[0];I[1]=U[1]-Z[1];return I}function A(I,U,Z){I[0]=U[0]*Z[0];I[1]=U[1]*Z[1];return I}function L(I,U,Z){I[0]=U[0]/Z[0];I[1]=U[1]/Z[1];return I}function K(I,U){I[0]=Math.ceil(U[0]);I[1]=Math.ceil(U[1]);return I}function C(I,U){I[0]=Math.floor(U[0]);I[1]=Math.floor(U[1]);return I}function x(I,U,Z){I[0]=Math.min(U[0],
Z[0]);I[1]=Math.min(U[1],Z[1]);return I}function k(I,U,Z){I[0]=Math.max(U[0],Z[0]);I[1]=Math.max(U[1],Z[1]);return I}function g(I,U){I[0]=Math.round(U[0]);I[1]=Math.round(U[1]);return I}function q(I,U,Z){I[0]=U[0]*Z;I[1]=U[1]*Z;return I}function v(I,U,Z,ea){I[0]=U[0]+Z[0]*ea;I[1]=U[1]+Z[1]*ea;return I}function t(I,U){const Z=U[0]-I[0];I=U[1]-I[1];return Math.sqrt(Z*Z+I*I)}function n(I,U){const Z=U[0]-I[0];I=U[1]-I[1];return Z*Z+I*I}function z(I){const U=I[0];I=I[1];return Math.sqrt(U*U+I*I)}function e(I){const U=
I[0];I=I[1];return U*U+I*I}function h(I,U){I[0]=-U[0];I[1]=-U[1];return I}function l(I,U){I[0]=1/U[0];I[1]=1/U[1];return I}function y(I,U){var Z=U[0];const ea=U[1];Z=Z*Z+ea*ea;0<Z&&(Z=1/Math.sqrt(Z),I[0]=U[0]*Z,I[1]=U[1]*Z);return I}function r(I,U){return I[0]*U[0]+I[1]*U[1]}function m(I,U,Z){U=U[0]*Z[1]-U[1]*Z[0];I[0]=I[1]=0;I[2]=U;return I}function D(I,U,Z,ea){const ka=U[0];U=U[1];I[0]=ka+ea*(Z[0]-ka);I[1]=U+ea*(Z[1]-U);return I}function O(I,U){U=U||1;const Z=2*u.RANDOM()*Math.PI;I[0]=Math.cos(Z)*
U;I[1]=Math.sin(Z)*U;return I}function T(I,U,Z){const ea=U[0];U=U[1];I[0]=Z[0]*ea+Z[2]*U;I[1]=Z[1]*ea+Z[3]*U;return I}function Q(I,U,Z){const ea=U[0];U=U[1];I[0]=Z[0]*ea+Z[2]*U+Z[4];I[1]=Z[1]*ea+Z[3]*U+Z[5];return I}function N(I,U,Z){const ea=U[0];U=U[1];I[0]=Z[0]*ea+Z[3]*U+Z[6];I[1]=Z[1]*ea+Z[4]*U+Z[7];return I}function P(I,U,Z){const ea=U[0];U=U[1];I[0]=Z[0]*ea+Z[4]*U+Z[12];I[1]=Z[1]*ea+Z[5]*U+Z[13];return I}function w(I,U,Z,ea){const ka=U[0]-Z[0];U=U[1]-Z[1];const ya=Math.sin(ea);ea=Math.cos(ea);
I[0]=ka*ea-U*ya+Z[0];I[1]=ka*ya+U*ea+Z[1];return I}function E(I,U){var Z=I[0];I=I[1];const ea=U[0];U=U[1];let ka=Z*Z+I*I;0<ka&&(ka=1/Math.sqrt(ka));let ya=ea*ea+U*U;0<ya&&(ya=1/Math.sqrt(ya));Z=(Z*ea+I*U)*ka*ya;return 1<Z?0:-1>Z?Math.PI:Math.acos(Z)}function J(I){return"vec2("+I[0]+", "+I[1]+")"}function X(I,U){return I[0]===U[0]&&I[1]===U[1]}function W(I,U){const Z=I[0];I=I[1];const ea=U[0];U=U[1];return Math.abs(Z-ea)<=u.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ea))&&Math.abs(I-U)<=u.EPSILON*Math.max(1,
Math.abs(I),Math.abs(U))}function p(I,U,Z,ea,ka){let ya=U[0]-Z[0];Z=U[1]-Z[1];ka=(ea[0]*ya+ea[1]*Z)*(ka-1);ya=ea[0]*ka;Z=ea[1]*ka;I[0]=U[0]+ya;I[1]=U[1]+Z;return I}const H=Object.freeze(Object.defineProperty({__proto__:null,copy:c,set:G,add:f,subtract:F,multiply:A,divide:L,ceil:K,floor:C,min:x,max:k,round:g,scale:q,scaleAndAdd:v,distance:t,squaredDistance:n,length:z,squaredLength:e,negate:h,inverse:l,normalize:y,dot:r,cross:m,lerp:D,random:O,transformMat2:T,transformMat2d:Q,transformMat3:N,transformMat4:P,
rotate:w,angle:E,str:J,exactEquals:X,equals:W,projectAndScale:p,len:z,sub:F,mul:A,div:L,dist:t,sqrDist:n,sqrLen:e},Symbol.toStringTag,{value:"Module"}));d.add=f;d.angle=E;d.ceil=K;d.copy=c;d.cross=m;d.dist=t;d.distance=t;d.div=L;d.divide=L;d.dot=r;d.equals=W;d.exactEquals=X;d.floor=C;d.inverse=l;d.len=z;d.length=z;d.lerp=D;d.max=k;d.min=x;d.mul=A;d.multiply=A;d.negate=h;d.normalize=y;d.projectAndScale=p;d.random=O;d.rotate=w;d.round=g;d.scale=q;d.scaleAndAdd=v;d.set=G;d.sqrDist=n;d.sqrLen=e;d.squaredDistance=
n;d.squaredLength=e;d.str=J;d.sub=F;d.subtract=F;d.transformMat2=T;d.transformMat2d=Q;d.transformMat3=N;d.transformMat4=P;d.vec2=H})},"esri/views/interactive/snapping/snappingFactory":function(){define(["exports","./FeatureSnappingEngine","./SelfSnappingEngine"],function(d,u,c){d.defaultSnappingEnginesFactory=function(G,f){return[new c.SelfSnappingEngine({view:G,options:f}),new u.FeatureSnappingEngine({view:G,options:f,spatialReference:G.spatialReference})]};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../../layers/graphics/data/QueryEngineResult ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r){u.FeatureSnappingEngine=function(O){function T(N){N=O.call(this,N)||this;N.options=null;N.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return N}c._inheritsLoose(T,O);var Q=T.prototype;Q.initialize=function(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),C.sync);L.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",
N=>this._updateLayerView(N.layer,N.layerView)),this.view.on("layerview-destroy",N=>this._updateLayerView(N.layer,null))])};Q._updateLayerView=function(N,P){for(const [,w]of this.snappingSources)w.snappingSource.layerSource.layer===N&&(w.layerView=P)};Q.destroy=function(){this._set("options",null);for(const [,N]of this.snappingSources)N.destroy()};Q.fetchCandidates=function(){var N=c._asyncToGenerator(function*(P,w,E){if(L.isNone(this.options)||!this.options.effectiveFeatureEnabled)return[];var J=
[];const X=this._computeScreeenSizeDistanceParameters(P,w),W={distance:X,point:P,coordinateHelper:w.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:p,layerView:H}]of this.snappingSources)!p.layerSource.enabled||L.isSome(H)&&H.suspended||J.push(p.fetchCandidates(W,E).then(I=>I.filter(U=>!this._candidateIsExcluded(p,U,w.excludeFeature))));J=(yield K.eachAlwaysValues(J)).flat();this._addRightAngleCandidates(J,P,X,w);K.throwIfAborted(E);e.sortCandidatesInPlace(P,J);return J});
return function(P,w,E){return N.apply(this,arguments)}}();Q._addRightAngleCandidates=function(N,P,w,E){var J,X,W,p,H,I,U,Z;const ea=L.isSome(E.vertexHandle)?null==(J=E.vertexHandle.rightEdge)?void 0:null==(X=J.rightVertex)?void 0:X.pos:L.isSome(E.editGeometryOperations)&&"polygon"===E.editGeometryOperations.data.type?null==(W=L.unwrap(null==(p=E.editGeometryOperations.data.components[0])?void 0:p.getFirstVertex()))?void 0:W.pos:null;J=L.isSome(E.vertexHandle)?null==(H=E.vertexHandle.leftEdge)?void 0:
null==(I=H.leftVertex)?void 0:I.pos:L.isSome(E.editGeometryOperations)?null==(U=L.unwrap(null==(Z=E.editGeometryOperations.data.components[0])?void 0:Z.getLastVertex()))?void 0:U.pos:null;H=N.length;for(I=0;I<H;I++)this._addRightAngleCandidate(N[I],J,P,w,E,N),this._addRightAngleCandidate(N[I],ea,P,w,E,N)};Q._addRightAngleCandidate=function(N,P,w,E,J,X){if(!L.isNone(P)&&N instanceof h.EdgeSnappingCandidate){var W=N.constraint.closestTo(P),p=(W[0]-w[0])/E.x;w=(W[1]-w[1])/E.y;1>=p*p+w*w&&(J=J.coordinateHelper,
X.push(new y.RightAngleSnappingCandidate({coordinateHelper:J,targetPoint:W,otherVertex:P,otherVertexType:y.OtherVertexType.NEXT,previousVertex:N.constraint.start,constraint:new z.RayConstraint(J,P,W),objectId:N.objectId,elevationInfo:N.elevationInfo})))}};Q._computeScreeenSizeDistanceParameters=function(N,P){const w=L.isSome(this.options)?this.options.distance*("touch"===P.pointer?this.options.touchSensitivityMultiplier:1):0;return L.isNone(this.view)?{x:w,y:w,pixelSize:w}:"2d"===this.view.type?(N=
w*this.view.resolution,{x:N,y:N,pixelSize:N}):this._computeScreenSizeDistanceParameters3D(N,w,this.view,P)};Q._computeScreenSizeDistanceParameters3D=function(N,P,w,E){const {coordinateHelper:J,elevationInfo:X}=E,W=w.state.camera.computeScreenPixelSizeAt(r.anyMapPointToRender(N,J,X,w,D)),p=W*w.renderCoordsHelper.unitInMeters/w.mapCoordsHelper.unitInMeters;P*=p;const H=this._computeScreenMagnitudeOfMapOffset(N,p,0,w,E);N=this._computeScreenMagnitudeOfMapOffset(N,0,p,w,E);return{x:P/H,y:P/N,pixelSize:W}};
Q._computeScreenMagnitudeOfMapOffset=function(N,P,w,E,{coordinateHelper:J,elevationInfo:X}){const W=J.clone(N);W[0]+=P;W[1]+=w;N=r.anyMapPointToScreenPoint(N,J,X,E);J=r.anyMapPointToScreenPoint(W,J,X,E);E=J.x-N.x;J=J.y-N.y;return Math.sqrt(E*E+J*J)};Q._candidateIsExcluded=function(N,P,w){if(L.isNone(w))return!1;P=this._getCandidateObjectId(P);if(L.isNone(P))return!1;N=N.layerSource.layer;return"graphics"===N.type?w.uid===P:w.sourceLayer===N&&w.attributes&&"objectIdField"in N?w.attributes[N.objectIdField]===
P:!1};Q._getCandidateObjectId=function(N){return N instanceof l.FeatureSnappingCandidate?N.objectId:null};Q._createSourceInfo=function(N){const P=this._createFeatureSnappingSourceType(N);if(L.isNone(P))return null;if("loading"in P)return this.updatingHandles.addPromise(P.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const w=L.isSome(this.view)?this.view.allLayerViews.find(E=>E.layer===N.layer):null;return new m(P.source,w)};Q._createFeatureSnappingSourceType=function(N){switch(N.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(N);
case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(N)}return null};Q._createFeatureSnappingSourceFeatureLayer=function(N){switch(N.layer.source.type){case "feature-layer":var P=this._getSourceModule("featureService");return L.isSome(P.module)?{source:new P.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:N})}:{loading:P.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==N.layer.geometryType)return P=this._getSourceModule("featureCollection"),
L.isSome(P.module)?{source:new P.module.FeatureCollectionSnappingSource({layerSource:N})}:{loading:P.loader}}return null};Q._createFeatureSnappingSourceGraphicsLayer=function(N){const P=this._getSourceModule("graphics");return L.isSome(P.module)?{source:new P.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:N})}:{loading:P.loader}};Q._getSourceModule=function(N){const P=this.sourceModules[N];return L.isNone(P.loader)?(N=this._loadSourceModule(N).then(w=>
{P.module=w}),P.loader=N,{module:P.module,loader:N}):{module:P.module,loader:P.loader}};Q._loadSourceModule=function(N){switch(N){case "featureService":return this.updatingHandles.addPromise(new Promise((P,w)=>d(["./featureSources/FeatureServiceSnappingSource"],P,w)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((P,w)=>d(["./featureSources/FeatureCollectionSnappingSource"],P,w)));case "graphics":return this.updatingHandles.addPromise(new Promise((P,w)=>d(["./featureSources/GraphicsSnappingSource"],
P,w)))}return null};c._createClass(T,[{key:"updating",get:function(){return A.someMap(this.snappingSources,({snappingSource:N})=>N.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){const N=this._get("snappingSources")||new Map,P=new Map;if(L.isSome(this.options)&&L.isSome(this.options.featureSources))for(const E of this.options.featureSources.items){const J=E.layer.uid;var w=N.get(J);w?(N.delete(J),P.set(J,w)):E.layer.loaded?(w=this._createSourceInfo(E),L.isSome(w)&&
P.set(J,w)):this.updatingHandles.addPromise(E.layer.load())}for(const [,E]of N)E.destroy();return P}},{key:"types",get:function(){return n.SnappingTypes.EDGE|n.SnappingTypes.VERTEX}}]);return T}(f.HandleOwner);G.__decorate([x.property({constructOnly:!0})],u.FeatureSnappingEngine.prototype,"spatialReference",void 0);G.__decorate([x.property({constructOnly:!0})],u.FeatureSnappingEngine.prototype,"view",void 0);G.__decorate([x.property()],u.FeatureSnappingEngine.prototype,"options",void 0);G.__decorate([x.property({readOnly:!0})],
u.FeatureSnappingEngine.prototype,"updating",null);G.__decorate([x.property({readOnly:!0})],u.FeatureSnappingEngine.prototype,"snappingSources",null);u.FeatureSnappingEngine=G.__decorate([v.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],u.FeatureSnappingEngine);let m=function(){function O(T,Q){this.snappingSource=T;this.layerView=Q;this.handles=new F;Q=this.snappingSource.layerSource.layer;"refresh"in Q&&this.handles.add(Q.on("refresh",()=>T.refresh()));this.handles.add([C.watch(()=>
T.updating,N=>T.layerSource.updating=N,C.syncAndInitial),C.watch(()=>T.availability,N=>T.layerSource.availability=N,C.syncAndInitial)])}O.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return O}();const D=t.create();Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q){function v(z,e,h,l,y,r){y-=h;r-=l;z=Math.min(1,Math.max(0,((z-h)*y+(e-l)*r)/(y*y+r*r)));return{x:h+y*z,y:l+r*z}}function t(z,e){return z?e?4:3:e?3:2}let n=function(){function z(h,l,y){this.items=h;this.query=l;this.geometryType=y.geometryType;this.hasM=y.hasM;this.hasZ=y.hasZ;this.fieldsIndex=y.fieldsIndex;this.objectIdField=y.objectIdField;this.spatialReference=y.spatialReference;this.featureAdapter=y.featureAdapter}var e=z.prototype;e.createQueryResponseForCount=
function(){const h=new K(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return h.countDistinctValues(this.items);const {groupByFieldsForStatistics:l,having:y,outStatistics:r}=this.query;if(null==l||!l.length)return 1;const m=new Map,D=new Map,O=new Set;for(const N of r){var {statisticType:T}=N;T="exceedslimit"!==T?N.onStatisticField:void 0;if(!D.has(T)){var Q=[];for(const P of l){const w=this._getAttributeValues(h,P,m);Q.push(w)}D.set(T,this._calculateUniqueValues(Q,
h.returnDistinctValues))}T=D.get(T);for(const P in T){const {data:w,items:E}=T[P];Q=w.join(",");y&&!h.validateItems(E,y)||O.add(Q)}}return O.size};e.createQueryResponse=function(){var h=c._asyncToGenerator(function*(){let l;l=this.query.outStatistics?this.query.outStatistics.some(y=>"exceedslimit"===y.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(L.isValid(this.query.outSR)&&
!L.equals(this.query.geometry.spatialReference,this.query.outSR)?l.queryGeometry=x.cleanFromGeometryEngine({spatialReference:this.query.outSR,...C.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):l.queryGeometry=x.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return l});return function(){return h.apply(this,arguments)}}();e.createSnappingResponse=function(h,l){const y=this.featureAdapter,r=t(this.hasZ,this.hasM),{x:m,y:D}=
h.point,O="number"===typeof h.distance?h.distance:h.distance.x,T="number"===typeof h.distance?h.distance:h.distance.y,Q={candidates:[]},N="esriGeometryPolygon"===this.geometryType;l=this._getPointCreator(h.point,this.spatialReference,l);for(const H of this.items){var P=y.getGeometry(H);if(G.isNone(P))continue;const {coords:I,lengths:U}=P;if(h.types&u.SnappingTypes.EDGE){P=0;for(var w=0;w<U.length;w++){var E=U[w];for(var J=0;J<E;J++,P+=r){var X=I[P],W=I[P+1];if(J!==E-1){const Z=I[P+r],ea=I[P+r+1],
{x:ka,y:ya}=v(m,D,X,W,Z,ea);var p=(m-ka)/O;const oa=(D-ya)/T;p=p*p+oa*oa;1>=p&&Q.candidates.push({type:"edge",objectId:y.getObjectId(H),distance:Math.sqrt(p),target:l(ka,ya),start:l(X,W),end:l(Z,ea)})}}}}if(h.types&u.SnappingTypes.VERTEX)for(P=N?I.length-r:I.length,w=0;w<P;w+=r)E=I[w],J=I[w+1],X=(m-E)/O,W=(D-J)/T,X=X*X+W*W,1>=X&&Q.candidates.push({type:"vertex",objectId:y.getObjectId(H),distance:Math.sqrt(X),target:l(E,J)})}Q.candidates.sort((H,I)=>H.distance-I.distance);return Q};e._getPointCreator=
function(h,l,y){const r=G.isSome(y)&&!L.equals(l,y)?m=>C.project(m,l,y):m=>m;return null!=h.z&&null!=h.m?(m,D)=>r({x:m,y:D,z:h.z,m:h.m}):null!=h.z?(m,D)=>r({x:m,y:D,z:h.z}):null!=h.m?(m,D)=>r({x:m,y:D,m:h.m}):(m,D)=>r({x:m,y:D})};e.createSummaryStatisticsResponse=function(){var h=c._asyncToGenerator(function*(l){const {field:y,valueExpression:r,normalizationField:m,normalizationType:D,normalizationTotal:O,minValue:T,maxValue:Q,scale:N}=l;l=this.fieldsIndex.isDateField(y);var P=yield this._getDataValues({field:y,
valueExpression:r,normalizationField:m,normalizationType:D,normalizationTotal:O,scale:N});const w=g.isNullCountSupported({normalizationType:D,normalizationField:m,minValue:T,maxValue:Q}),E=this.fieldsIndex.get(y),J={value:.5,fieldType:null==E?void 0:E.type};P=k.isStringField(E)?g.calculateStringStatistics({values:P,supportsNullCount:w,percentileParams:J}):g.calculateStatistics({values:P,minValue:T,maxValue:Q,useSampleStdDev:!D,supportsNullCount:w,percentileParams:J});return g.processSummaryStatisticsResult(P,
l)});return function(l){return h.apply(this,arguments)}}();e.createUniqueValuesResponse=function(){var h=c._asyncToGenerator(function*(l){const {field:y,valueExpression:r,domain:m,returnAllCodedValues:D,scale:O}=l;l=yield this._getDataValues({field:y,valueExpression:r,scale:O});l=g.calculateUniqueValuesCount(l);return g.createUVResult(l,m,D)});return function(l){return h.apply(this,arguments)}}();e.createClassBreaksResponse=function(){var h=c._asyncToGenerator(function*(l){const {field:y,valueExpression:r,
normalizationField:m,normalizationType:D,normalizationTotal:O,classificationMethod:T,standardDeviationInterval:Q,minValue:N,maxValue:P,numClasses:w,scale:E}=l;l=yield this._getDataValues({field:y,valueExpression:r,normalizationField:m,normalizationType:D,normalizationTotal:O,scale:E});l=g.calculateClassBreaks(l,{field:y,normalizationField:m,normalizationType:D,normalizationTotal:O,classificationMethod:T,standardDeviationInterval:Q,minValue:N,maxValue:P,numClasses:w});return g.resolveCBResult(l,T)});
return function(l){return h.apply(this,arguments)}}();e.createHistogramResponse=function(){var h=c._asyncToGenerator(function*(l){const {field:y,valueExpression:r,normalizationField:m,normalizationType:D,normalizationTotal:O,classificationMethod:T,standardDeviationInterval:Q,minValue:N,maxValue:P,numBins:w,scale:E}=l;l=yield this._getDataValues({field:y,valueExpression:r,normalizationField:m,normalizationType:D,normalizationTotal:O,scale:E});return g.calculateHistogram(l,{field:y,normalizationField:m,
normalizationType:D,normalizationTotal:O,classificationMethod:T,standardDeviationInterval:Q,minValue:N,maxValue:P,numBins:w})});return function(l){return h.apply(this,arguments)}}();e._sortFeatures=function(h,l,y){if(1<h.length&&l&&l.length)for(const r of l.reverse()){l=r.split(" ");const m=l[0],D=this.fieldsIndex.get(m);l=l[1]&&"desc"===l[1].toLowerCase();const O=g.getAttributeComparator(null==D?void 0:D.type,l);h.sort((T,Q)=>{T=y(T,m,D);Q=y(Q,m,D);return O(T,Q)})}};e._createFeatureQueryResponse=
function(h){const l=this.items,{geometryType:y,hasM:r,hasZ:m,objectIdField:D,spatialReference:O}=this,{outFields:T,outSR:Q,quantizationParameters:N,resultRecordCount:P,resultOffset:w,returnZ:E,returnM:J}=h,X=null!=P?l.length>(w||0)+P:!1,W=T&&(T.includes("*")?[...this.fieldsIndex.fields]:T.map(p=>this.fieldsIndex.get(p)));return{exceededTransferLimit:X,features:this._createFeatures(h,l),fields:W,geometryType:y,hasM:r&&J,hasZ:m&&E,objectIdFieldName:D,spatialReference:x.cleanFromGeometryEngine(Q?Q:O),
transform:N&&A.toQuantizationTransform(N)||null}};e._createFeatures=function(h,l){const y=new K(h,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:m}=this,{orderByFields:D,quantizationParameters:O,returnGeometry:T,returnCentroid:Q,maxAllowableOffset:N,resultOffset:P,resultRecordCount:w,returnZ:E=!1,returnM:J=!1}=h,X=m&&E,W=r&&J;h=[];var p=0;l=[...l];this._sortFeatures(l,D,(U,Z,ea)=>y.getFieldValue(U,Z,ea));if(T||Q){var H=A.toQuantizationTransform(O);if(T&&!Q)for(var I of l)h[p++]={attributes:y.getAttributes(I),
geometry:x.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(I),N,H,X,W)};else if(!T&&Q)for(const U of l)h[p++]={attributes:y.getAttributes(U),centroid:x.transformCentroid(this,this.featureAdapter.getCentroid(U,this),H)};else for(const U of l)h[p++]={attributes:y.getAttributes(U),centroid:x.transformCentroid(this,this.featureAdapter.getCentroid(U,this),H),geometry:x.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(U),N,H,X,W)}}else for(H of l)(I=
y.getAttributes(H))&&(h[p++]={attributes:I});p=P||0;null!=w&&(h=h.slice(p,Math.min(h.length,p+w)));return h};e._createExceedsLimitQueryResponse=function(h){var l=!1;let y=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY;l=Number.POSITIVE_INFINITY;for(const m of h.outStatistics)if("exceedslimit"===m.statisticType){y=null!=m.maxPointCount?m.maxPointCount:Number.POSITIVE_INFINITY;r=null!=m.maxRecordCount?m.maxRecordCount:Number.POSITIVE_INFINITY;l=null!=m.maxVertexCount?m.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)l=this.items.length>y;else if(this.items.length>r)l=!0;else{h=this.hasZ?this.hasM?4:3:this.hasM?3:2;const m=this.featureAdapter;l=this.items.reduce((D,O)=>{O=m.getGeometry(O);return D+(G.isSome(O)&&O.coords.length||0)},0)/h>l}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(l)}}]}};e._createStatisticsQueryResponse=
function(){var h=c._asyncToGenerator(function*(l){var y={attributes:{}};const r=[],m=new Map,D=new Map,O=new Map,T=new Map,Q=new K(l,this.featureAdapter,this.fieldsIndex);var N=l.outStatistics;const {groupByFieldsForStatistics:P,having:w,orderByFields:E}=l;l=P&&P.length;const J=!!l,X=J&&P[0],W=J&&!this.fieldsIndex.get(X);for(const Z of N){const {outStatisticFieldName:ea,statisticType:ka}=Z;N=Z;var p="exceedslimit"!==ka?Z.onStatisticField:void 0;const ya="percentile_disc"===ka||"percentile_cont"===
ka,oa="EnvelopeAggregate"===ka||"CentroidAggregate"===ka||"ConvexHullAggregate"===ka,va=J&&1===l&&(p===X||W)&&"count"===ka;if(J){if(!O.has(p)){var H=[];for(const ua of P){var I=this._getAttributeValues(Q,ua,m);H.push(I)}O.set(p,this._calculateUniqueValues(H,Q.returnDistinctValues))}H=O.get(p);for(const ua in H){const {count:Ga,data:ha,items:la,itemPositions:wa}=H[ua];I=ha.join(",");if(!w||Q.validateItems(la,w)){const za=T.get(I)||{attributes:{}};if(oa){za.aggregateGeometries||(za.aggregateGeometries=
{});const {aggregateGeometries:Aa,outStatisticFieldName:xa}=yield this._getAggregateGeometry(N,la);za.aggregateGeometries[xa]=Aa}else{var U=null;if(va)U=Ga;else{const Aa=this._getAttributeValues(Q,p,m);U=wa.map(xa=>Aa[xa]);U=ya&&"statisticParameters"in N?this._getPercentileValue(N,U):this._getStatisticValue(N,U,null,Q.returnDistinctValues)}za.attributes[ea]=U}P.forEach((Aa,xa)=>za.attributes[this.fieldsIndex.get(Aa)?Aa:`EXPR_${xa+1}`]=ha[xa]);T.set(I,za)}}}else if(oa){y.aggregateGeometries||(y.aggregateGeometries=
{});const {aggregateGeometries:ua,outStatisticFieldName:Ga}=yield this._getAggregateGeometry(N,this.items);y.aggregateGeometries[Ga]=ua}else p=this._getAttributeValues(Q,p,m),y.attributes[ea]=ya&&"statisticParameters"in N?this._getPercentileValue(N,p):this._getStatisticValue(N,p,D,Q.returnDistinctValues);r.push({name:ea,alias:ea,type:"esriFieldTypeDouble"})}y=J?Array.from(T.values()):[y];this._sortFeatures(y,E,(Z,ea)=>Z.attributes[ea]);return{fields:r,features:y}});return function(l){return h.apply(this,
arguments)}}();e._getAggregateGeometry=function(){var h=c._asyncToGenerator(function*(l,y){var r=yield new Promise((E,J)=>d(["../../../geometry/geometryEngineJSON"],E,J));const {statisticType:m,outStatisticFieldName:D}=l,{featureAdapter:O,spatialReference:T,geometryType:Q,hasZ:N,hasM:P}=this;y=y.map(E=>x.getGeometry(Q,N,P,O.getGeometry(E)));const w=r.convexHull(T,y,!0)[0];l={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===m?(r=w?F.getPolygonExtent(w):F.getGeometryExtent(r.union(T,
y)),l.aggregateGeometries={...r,spatialReference:T},l.outStatisticFieldName=D||"extent"):"CentroidAggregate"===m?(r=w?f.polygonCentroid(w):f.extentCentroid(F.getGeometryExtent(r.union(T,y))),l.aggregateGeometries={x:r[0],y:r[1],spatialReference:T},l.outStatisticFieldName=D||"centroid"):"ConvexHullAggregate"===m&&(l.aggregateGeometries=w,l.outStatisticFieldName=D||"convexHull");return l});return function(l,y){return h.apply(this,arguments)}}();e._getStatisticValue=function(h,l,y,r){const {onStatisticField:m,
statisticType:D}=h;h=null;h=null!=y&&y.has(m)?y.get(m):k.isStringField(this.fieldsIndex.get(m))?g.calculateStringStatistics({values:l,returnDistinct:r}):g.calculateStatistics({values:l,minValue:null,maxValue:null,useSampleStdDev:!0});y&&y.set(m,h);return h["var"===D?"variance":D]};e._getPercentileValue=function(h,l){const {onStatisticField:y,statisticParameters:r,statisticType:m}=h,{value:D,orderBy:O}=r;h=this.fieldsIndex.get(y);return g.calculatePercentile(l,{value:D,orderBy:O,fieldType:null==h?
void 0:h.type,isDiscrete:"percentile_disc"===m})};e._getAttributeValues=function(h,l,y){if(y.has(l))return y.get(l);const r=this.fieldsIndex.get(l),m=this.items.map(D=>h.getFieldValue(D,l,r));y.set(l,m);return m};e._getAttributeNormalizedValues=function(h,l){return this.items.map(y=>h.getNormalizedValue(y,{field:l.field,fieldInfo:this.fieldsIndex.get(l.field),normalizationField:l.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(l.normalizationField),normalizationType:l.normalizationType,
normalizationTotal:l.normalizationTotal}))};e._getAttributeExpressionValues=function(){var h=c._asyncToGenerator(function*(l,y,r){const {arcadeUtils:m}=yield q.loadArcade();y=m.createFunction(y);r=r&&m.getViewInfo(r);return l.getExpressionValues(this.items,y,r,m)});return function(l,y,r){return h.apply(this,arguments)}}();e._calculateUniqueValues=function(h,l){const y={},r=this.items,m=r.length;for(let D=0;D<m;D++){const O=r[D],T=[];for(const N of h)T.push(N[D]);const Q=T.join(",");l?null==y[Q]&&
(y[Q]={count:1,data:T,items:[O],itemPositions:[D]}):null==y[Q]?y[Q]={count:1,data:T,items:[O],itemPositions:[D]}:(y[Q].count++,y[Q].items.push(O),y[Q].itemPositions.push(D))}return y};e._getDataValues=function(){var h=c._asyncToGenerator(function*(l){const y=new K(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:m,normalizationField:D,normalizationType:O,normalizationTotal:T,scale:Q}=l;l=r?{viewingMode:"map",scale:Q,spatialReference:this.query.outSR||this.spatialReference}:
null;return r?this._getAttributeExpressionValues(y,r,l):this._getAttributeNormalizedValues(y,{field:m,normalizationField:D,normalizationType:O,normalizationTotal:T})});return function(l){return h.apply(this,arguments)}}();c._createClass(z,[{key:"size",get:function(){return this.items.length}}]);return z}();u.SnappingTypes=void 0;(function(z){z[z.NONE=0]="NONE";z[z.EDGE=1]="EDGE";z[z.VERTEX=2]="VERTEX"})(u.SnappingTypes||(u.SnappingTypes={}));u.QueryEngineResult=n;Object.defineProperties(u,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(d,u,c){function G({scale:T,translate:Q},N){return Math.round((N-Q[0])/T[0])}function f({scale:T,translate:Q},N){return Math.round((Q[1]-N)/T[1])}function F(T,Q,N){const P=[];let w,E,J,X;for(let W=0;W<N.length;W++){const p=N[W];if(0<W){if(J=G(T,p[0]),X=f(T,p[1]),J!==w||X!==E)P.push(Q(p,J-w,X-E)),w=J,E=X}else w=G(T,p[0]),E=f(T,p[1]),P.push(Q(p,
w,E))}return 0<P.length?P:null}function A(T,Q,N,P){return F(T,N?P?O:D:P?D:m,Q)}function L(T,Q,N,P){const w=[];N=N?P?O:D:P?D:m;for(P=0;P<Q.length;P++){const E=F(T,N,Q[P]);E&&3<=E.length&&w.push(E)}return w.length?w:null}function K(T,Q,N,P){const w=[];N=N?P?O:D:P?D:m;for(P=0;P<Q.length;P++){const E=F(T,N,Q[P]);E&&2<=E.length&&w.push(E)}return w.length?w:null}function C({scale:T,translate:Q},N){return N*T[0]+Q[0]}function x({scale:T,translate:Q},N){return Q[1]-N*T[1]}function k(T,Q,N){const P=Array(N.length);
if(!N.length)return P;const [w,E]=T.scale;let J=C(T,N[0][0]);T=x(T,N[0][1]);P[0]=Q(N[0],J,T);for(let X=1;X<N.length;X++){const W=N[X];J+=W[0]*w;T-=W[1]*E;P[X]=Q(W,J,T)}return P}function g(T,Q,N){const P=Array(N.length);for(let w=0;w<N.length;w++)P[w]=k(T,Q,N[w]);return P}function q(T,Q,N,P){return k(T,N?P?O:D:P?D:m,Q)}function v(T,Q,N,P){return g(T,N?P?O:D:P?D:m,Q)}function t(T,Q,N,P){return g(T,N?P?O:D:P?D:m,Q)}function n(T,Q,N){let [P,w]=N[0],E=Math.min(P,Q[0]),J=Math.min(w,Q[1]),X=Math.max(P,Q[2]);
Q=Math.max(w,Q[3]);for(let W=1;W<N.length;W++){const [p,H]=N[W];P+=p;w+=H;0>p&&(E=Math.min(E,P));0<p&&(X=Math.max(X,P));0>H?J=Math.min(J,w):0<H&&(Q=Math.max(Q,w))}T[0]=E;T[1]=J;T[2]=X;T[3]=Q;return T}function z(T,Q){if(!Q.length)return null;T[0]=T[1]=Number.POSITIVE_INFINITY;T[2]=T[3]=Number.NEGATIVE_INFINITY;for(let N=0;N<Q.length;N++)n(T,T,Q[N]);return T}function e(T,Q,N,P,w){Q.xmin=G(T,N.xmin);Q.ymin=f(T,N.ymin);Q.xmax=G(T,N.xmax);Q.ymax=f(T,N.ymax);Q!==N&&(P&&(Q.zmin=N.zmin,Q.zmax=N.zmax),w&&
(Q.mmin=N.mmin,Q.mmax=N.mmax));return Q}function h(T,Q,N,P,w){Q.points=A(T,N.points,P,w);return Q}function l(T,Q,N,P,w){Q.x=G(T,N.x);Q.y=f(T,N.y);Q!==N&&(P&&(Q.z=N.z),w&&(Q.m=N.m));return Q}function y(T,Q,N,P,w){T=L(T,N.rings,P,w);if(!T)return null;Q.rings=T;return Q}function r(T,Q,N,P,w){T=K(T,N.paths,P,w);if(!T)return null;Q.paths=T;return Q}const m=(T,Q,N)=>[Q,N],D=(T,Q,N)=>[Q,N,T[2]],O=(T,Q,N)=>[Q,N,T[2],T[3]];d.equals=function(T,Q){if(T===Q||null==T&&null==Q)return!0;if(null==T||null==Q)return!1;
let N,P,w,E;T&&"upperLeft"===T.originPosition?(N=T.translate[0],P=T.translate[1],T=T.scale[0]):(N=u.isSome(T.extent)?T.extent.xmin:0,P=u.isSome(T.extent)?T.extent.ymax:0,T=T.tolerance);Q&&"upperLeft"===Q.originPosition?(w=Q.translate[0],E=Q.translate[1],Q=Q.scale[0]):(w=u.isSome(Q.extent)?Q.extent.xmin:0,E=u.isSome(Q.extent)?Q.extent.ymax:0,Q=Q.tolerance);return N===w&&P===E&&T===Q};d.getQuantizedBoundsCoordsArray=n;d.getQuantizedBoundsCoordsArrayArray=z;d.getQuantizedBoundsPaths=function(T){return z([0,
0,0,0],T)};d.getQuantizedBoundsPoints=function(T){const Q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return n(Q,Q,T)};d.getQuantizedBoundsRings=function(T){return z([0,0,0,0],T)};d.quantizeBounds=function(T,Q,N){Q[0]=G(T,N[0]);Q[3]=f(T,N[1]);Q[2]=G(T,N[2]);Q[1]=f(T,N[3]);return Q};d.quantizeExtent=e;d.quantizeGeometry=function(T,Q){return T&&Q?c.isPoint(Q)?l(T,{},Q,!1,!1):c.isPolyline(Q)?r(T,{},Q,!1,!1):c.isPolygon(Q)?y(T,{},Q,!1,!1):c.isMultipoint(Q)?
h(T,{},Q,!1,!1):c.isExtent(Q)?e(T,{},Q,!1,!1):null:null};d.quantizeMultipoint=h;d.quantizePaths=K;d.quantizePoint=l;d.quantizePoints=A;d.quantizePolygon=y;d.quantizePolyline=r;d.quantizeRings=L;d.quantizeX=G;d.quantizeY=f;d.toQuantizationTransform=function(T){return T?{originPosition:"upper-left"===T.originPosition?"upperLeft":"lower-left"===T.originPosition?"lowerLeft":T.originPosition,scale:T.tolerance?[T.tolerance,T.tolerance]:[1,1],translate:u.isSome(T.extent)?[T.extent.xmin,T.extent.ymax]:[0,
0]}:null};d.unquantizeBounds=function(T,Q,N){return N?(Q[0]=C(T,N[0]),Q[1]=x(T,N[3]),Q[2]=C(T,N[2]),Q[3]=x(T,N[1]),Q):[C(T,Q[0]),x(T,Q[3]),C(T,Q[2]),x(T,Q[1])]};d.unquantizeCoordsArray=k;d.unquantizeCoordsArrayArray=g;d.unquantizeExtent=function(T,Q,N,P,w){Q.xmin=C(T,N.xmin);Q.ymin=x(T,N.ymin);Q.xmax=C(T,N.xmax);Q.ymax=x(T,N.ymax);Q!==N&&(P&&(Q.zmin=N.zmin,Q.zmax=N.zmax),w&&(Q.mmin=N.mmin,Q.mmax=N.mmax));return Q};d.unquantizeMultipoint=function(T,Q,N,P,w){u.isSome(N)&&(Q.points=q(T,N.points,P,w));
return Q};d.unquantizePaths=v;d.unquantizePoint=function(T,Q,N,P,w){if(u.isNone(N))return Q;Q.x=C(T,N.x);Q.y=x(T,N.y);Q!==N&&(P&&(Q.z=N.z),w&&(Q.m=N.m));return Q};d.unquantizePoints=q;d.unquantizePolygon=function(T,Q,N,P,w){u.isSome(N)&&(Q.rings=t(T,N.rings,P,w));return Q};d.unquantizePolyline=function(T,Q,N,P,w){u.isSome(N)&&(Q.paths=v(T,N.paths,P,w));return Q};d.unquantizeRings=t;d.unquantizeX=C;d.unquantizeY=x;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(d,u,c){return function(){function G(F,A,L){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=F.returnDistinctValues;this.fieldsIndex=L;this.featureAdapter=A;if((A=F.outFields)&&!A.includes("*")){this.outFields=A;F=0;for(const C of A){var K=u.getExpressionFromFieldName(C);K=(A=this.fieldsIndex.get(K))?null:u.getWhereClause(K,
L);A=A?A.name:u.getAliasFromFieldName(C)||`FIELD_EXP_${F++}`;this._fieldDataCache.set(C,{alias:A,clause:K})}}}var f=G.prototype;f.countDistinctValues=function(F){if(!this.returnDistinctValues)return F.length;F.forEach(A=>this.getAttributes(A));return this._returnDistinctMap.size};f.getAttributes=function(F){F=this._processAttributesForOutFields(F);return this._processAttributesForDistinctValues(F)};f.getFieldValue=function(F,A,L){const K=L?L.name:A;let C=null;this._fieldDataCache.has(K)?C=this._fieldDataCache.get(K).clause:
L||(C=u.getWhereClause(A,this.fieldsIndex),this._fieldDataCache.set(K,{alias:K,clause:C}));return L?this.featureAdapter.getAttribute(F,K):C.calculateValue(F,this.featureAdapter)};f.getNormalizedValue=function(F,A){const L=A.normalizationType,K=A.normalizationTotal;let C=this.getFieldValue(F,A.field,A.fieldInfo);L&&Number.isFinite(C)&&(F=this.getFieldValue(F,A.normalizationField,A.normalizationFieldInfo),C=c.getNormalizedValue(C,L,F,K));return C};f.getExpressionValue=function(F,A,L,K){F={attributes:this.featureAdapter.getAttributes(F),
layer:{fields:this.fieldsIndex.fields}};L=K.createExecContext(F,L);return K.executeFunction(A,L)};f.getExpressionValues=function(F,A,L,K){const C={fields:this.fieldsIndex.fields};return F.map(x=>{x={attributes:this.featureAdapter.getAttributes(x),layer:C};x=K.createExecContext(x,L);return K.executeFunction(A,x)})};f.validateItem=function(F,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:u.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testFeature(F,
this.featureAdapter)};f.validateItems=function(F,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:u.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testSet(F,this.featureAdapter)};f._processAttributesForOutFields=function(F){const A=this.outFields;if(!A||!A.length)return this.featureAdapter.getAttributes(F);const L={};for(const K of A){const {alias:C,clause:x}=this._fieldDataCache.get(K);L[C]=x?x.calculateValue(F,this.featureAdapter):this.featureAdapter.getAttribute(F,
C)}return L};f._processAttributesForDistinctValues=function(F){if(d.isNone(F)||!this.returnDistinctValues)return F;var A=this.outFields,L=[];if(A)for(const C of A){var {alias:K}=this._fieldDataCache.get(C);L.push(F[K])}else for(K in F)L.push(F[K]);A=`${(A||["*"]).join(",")}=${L.join(",")}`;L=this._returnDistinctMap.get(A)||0;this._returnDistinctMap.set(A,++L);return 1<L?null:F};return G}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],
function(d,u,c){function G(K,C){return K?A.get(K,C):null}function f(K,C,x,k=!0){const g=[];for(const q of C)if("*"!==q&&!K.has(q))if(k){C=F(q);try{const v=G(C,K);if(!v)throw new u("feature-store:unsupported-query","invalid SQL expression",{where:C});if(!v.isStandardized)throw new u("feature-store:unsupported-query","expression is not standard",{clause:v});f(K,v.fieldNames,"expression contains missing fields")}catch(v){if((C=v&&v.details)&&(C.clause||C.where))throw v;C&&C.missingFields?g.push(...C.missingFields):
g.push(q)}}else g.push(q);if(g.length)throw new u("feature-store:unsupported-query",x,{missingFields:g});}function F(K){return K.split(" as ")[0]}const A=new c.WhereClauseCache(50,500),L=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));d.getAliasFromFieldName=function(K){return K.split(" as ")[1]};d.getExpressionFromFieldName=F;d.getWhereClause=G;d.hasInvalidFieldType=function(K,C){return(K=
C.get(K))?!L.has(K.type):!1};d.validateFields=f;d.validateHaving=function(K,C,x){if(!C)return!0;const k=A.get(C,K);if(!k)throw new u("feature-store:unsupported-query","invalid SQL expression",{having:C});if(!k.isAggregate)throw new u("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:C});f(K,k.fieldNames,"having contains missing fields");if(!k.getExpressions().every(g=>{const {aggregateType:q,field:v}=g,t=K.has(v)&&K.get(v).name;return x.some(n=>{const {onStatisticField:z,
statisticType:e}=n;return(K.has(z)&&K.get(z).name)===t&&e.toLowerCase().trim()===q})}))throw new u("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:C});return!0};d.validateWhere=function(K,C){if(!C)return!0;const x=A.get(C,K);if(!x)throw new u("feature-store:unsupported-query","invalid SQL expression",{where:C});if(!x.isStandardized)throw new u("feature-store:unsupported-query","where clause is not standard",{where:C});f(K,x.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(d,u,c){let G=function(){function f(F,A){this._cache=new u(F);this._invalidCache=new u(A)}f.prototype.get=function(F,A){const L=`${A.uid}:${F}`,K=this._cache.get(L);if(K)return K;if(void 0!==this._invalidCache.get(L))return null;try{const C=c.WhereClause.create(F,A);this._cache.put(L,C);return C}catch{return this._invalidCache.put(L,
null),null}};return f}();d.WhereClauseCache=G;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(d,u,c,G,f,F){function A(w,E){w+="";return w.length>=E?w:Array(E-w.length+1).join("0")+w}function L(w,E,J="0",X="0",W="0",p="0",H="",I="0",U="0"){return"+"===H||"-"===H?(w=`${A(parseInt(w,
10),4)}-${A(parseInt(E,10),2)}-${A(parseInt(J,10),2)}`,E="",10>parseFloat(p)&&(E="0"),X=`${A(parseInt(X,10),2)}:${A(parseInt(W,10),2)}:${E+parseFloat(p).toString()}`,H=`${H}${A(parseInt(I,10),2)}:${A(parseInt(U,10),2)}`,new Date(w+"T"+X+H)):new Date(parseInt(w,10),parseInt(E,10)-1,parseInt(J,10),parseInt(X,10),parseInt(W,10),parseFloat(p))}function K(w){let E=y.exec(w);if(null!==E){const [,J,X,W,p,H,I]=E;return L(J,X,W,p,H,I)}E=r.exec(w);if(null!==E){const [,J,X,W,p,H,I,U,Z,ea]=E;return L(J,X,W,p,
H,I,U,Z,ea)}E=m.exec(w);if(null!==E){const [,J,X,W,p,H,I,U,Z]=E;return L(J,X,W,p,H,"0",I,U,Z)}E=D.exec(w);if(null!==E){const [,J,X,W,p,H]=E;return L(J,X,W,p,H)}E=l.exec(w);if(null!==E){const [,J,X,W]=E;return L(J,X,W)}throw Error("SQL Invalid Timestamp");}function C(w){w=l.exec(w);if(null===w)throw Error("SQL Invalid Date");const [,E,J,X]=w;return new Date(parseInt(E,10),parseInt(J,10)-1,parseInt(X,10))}function x(w){return Array.isArray(w)?w:[w]}function k(w){return null!==w?!0!==w:null}function g(w,
E){return null!=w&&null!=E?!0===w&&!0===E:!1===w||!1===E?!1:null}function q(w,E){return null!=w&&null!=E?!0===w||!0===E:!0===w||!0===E?!0:null}function v(w,E){if(null==w)return null;let J=!1;for(const X of E)if(null==X)J=null;else if(w===X){J=!0;break}return J}function t(w,E,J){if(null==w)return null;{let X="",W=N.Normal;for(let p=0;p<E.length;p++){const H=E.charAt(p);switch(W){case N.Normal:H===J?W=N.Escaped:X="-[]/{}()*+?.\\^$|".includes(H)?X+("\\"+H):"%"===H?X+".*":"_"===H?X+".":X+H;break;case N.Escaped:X=
"-[]/{}()*+?.\\^$|".includes(H)?X+("\\"+H):X+H,W=N.Normal}}E=new RegExp("^"+X+"$","m")}return E.test(w)}function n(w){return w instanceof Date?w.valueOf():w}function z(w,E,J){if(null==E||null==J)return null;E=n(E);J=n(J);switch(w){case "\x3c\x3e":return E!==J;case "\x3d":return E===J;case "\x3e":return E>J;case "\x3c":return E<J;case "\x3e\x3d":return E>=J;case "\x3c\x3d":return E<=J}}function e(w,E,J){if(E instanceof f.SqlInterval)if(J instanceof Date)switch(w){case "+":return new Date(E.valueInMilliseconds()+
J.getTime());case "-":return E.valueInMilliseconds()-J.getTime();case "*":return E.valueInMilliseconds()*J.getTime();case "/":return E.valueInMilliseconds()/J.getTime()}else if(J instanceof f.SqlInterval)switch(w){case "+":return f.SqlInterval.createFromMilliseconds(E.valueInMilliseconds()+J.valueInMilliseconds());case "-":return f.SqlInterval.createFromMilliseconds(E.valueInMilliseconds()-J.valueInMilliseconds());case "*":return E.valueInMilliseconds()*J.valueInMilliseconds();case "/":return E.valueInMilliseconds()/
J.valueInMilliseconds()}else E=E.valueInMilliseconds();else if(J instanceof f.SqlInterval)if(E instanceof Date)switch(w){case "+":return new Date(J.valueInMilliseconds()+E.getTime());case "-":return new Date(E.getTime()-J.valueInMilliseconds());case "*":return E.getTime()*J.valueInMilliseconds();case "/":return E.getTime()/J.valueInMilliseconds()}else J=J.valueInMilliseconds();else if(E instanceof Date&&"number"===typeof J)switch(J*=864E5,E=E.getTime(),w){case "+":return new Date(E+J);case "-":return new Date(E-
J);case "*":return new Date(E*J);case "/":return new Date(E/J)}else if(J instanceof Date&&"number"===typeof E)switch(E*=864E5,J=J.getTime(),w){case "+":return new Date(E+J);case "-":return new Date(E-J);case "*":return new Date(E*J);case "/":return new Date(E/J)}switch(w){case "+":return E+J;case "-":return E-J;case "*":return E*J;case "/":return E/J}}function h(w,E,J,X){w=X.getAttribute(w,E);return null!=w&&1===J[E]?new Date(w):w}const l=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,O=new Set(["current_timestamp","current_date","current_time"]);let T=function(){function w(){}w.makeBool=function(E){return!0===E};w.featureValue=function(E,J,X,W){return h(E,J,X,W)};w.equalsNull=function(E){return null===E};w.applyLike=function(E,J,X){return t(E,J,
X)};w.ensureArray=function(E){return x(E)};w.applyIn=function(E,J){return v(E,J)};w.currentDate=function(){const E=new Date;E.setHours(0,0,0,0);return E};w.makeSqlInterval=function(E,J,X){return f.SqlInterval.createFromValueAndQualifer(E,J,X)};w.convertInterval=function(E){return E instanceof f.SqlInterval?E.valueInMilliseconds():E};w.currentTimestamp=function(){return new Date};w.compare=function(E,J,X){return z(E,J,X)};w.calculate=function(E,J,X){return e(E,J,X)};w.makeComparable=function(E){return n(E)};
w.evaluateFunction=function(E,J){return f.evaluateFunction(E,J)};w.lookup=function(E,J){E=J[E];return void 0===E?null:E};w.between=function(E,J){return null==E||null==J[0]||null==J[1]?null:E>=J[0]&&E<=J[1]};w.notbetween=function(E,J){return null==E||null==J[0]||null==J[1]?null:E<J[0]||E>J[1]};w.ternaryNot=function(E){return k(E)};w.ternaryAnd=function(E,J){return g(E,J)};w.ternaryOr=function(E,J){return q(E,J)};return w}(),Q=function(){function w(J,X){this.fieldsIndex=X;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=F.WhereGrammar.parse(J);const {isStandardized:W,isAggregate:p,referencedFieldNames:H}=this._extractExpressionInfo(X);this.referencedFieldNames=H;this.isStandardized=W;this.isAggregate=p}w.create=function(J,X){return new w(J,X)};var E=w.prototype;E.testSet=function(J,X=P){const W={};for(const p of this.fieldNames)W[p]=J.map(H=>X.getAttribute(H,p));return!!this._evaluateNode(this.parseTree,{attributes:W},P)};E.calculateValue=function(J,X=P){J=this._evaluateNode(this.parseTree,
J,X);return J instanceof f.SqlInterval?J.valueInMilliseconds()/864E5:J};E.calculateValueCompiled=function(J,X=P){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(J,this.parameters,X,this.datefields);if(c("esri-csp-restrictions"))return this.calculateValue(J,X);this._compileMe();return this.parseTree._compiledVersion(J,this.parameters,X,this.datefields)};E.testFeature=function(J,X=P){return!!this._evaluateNode(this.parseTree,J,X)};E.testFeatureCompiled=function(J,X=P){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(J,this.parameters,X,this.datefields);if(c("esri-csp-restrictions"))return this.testFeature(J,X);this._compileMe();return!!this.parseTree._compiledVersion(J,this.parameters,X,this.datefields)};E.getFunctions=function(){const J=new Set;this._visitAll(this.parseTree,X=>{"function"===X.type&&J.add(X.name.toLowerCase())});return Array.from(J)};E.getExpressions=function(){const J=new Map;this._visitAll(this.parseTree,X=>{if("function"===
X.type){const W=X.name.toLowerCase();X=X.args.value[0];if("column-reference"===X.type){X=X.column;const p=`${W}-${X}`;J.has(p)||J.set(p,{aggregateType:W,field:X})}}});return[...J.values()]};E.getVariables=function(){const J=new Set;this._visitAll(this.parseTree,X=>{"parameter"===X.type&&J.add(X.value.toLowerCase())});return Array.from(J)};E._compileMe=function(){const J="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature",
"lookups","attributeAdapter","datefields",J)).bind(T)};E._extractExpressionInfo=function(J){const X=[],W=new Set;let p=!0,H=!0;this._visitAll(this.parseTree,I=>{switch(I.type){case "column-reference":{const U=J.get(I.column);let Z,ea;U?Z=ea=U.name:(ea=I.column,Z=ea.toLowerCase());!U||"date"!==U.type&&"esriFieldTypeDate"!==U.type||(this.datefields[U.name]=1);W.has(Z)||(W.add(Z),X.push(ea));I.column=ea;break}case "function":{const {name:U,args:Z}=I;I=Z.value.length;p&&(p=f.isStandardized(U,I));H&&(H=
G.isAggregate(U,I))}}});return{referencedFieldNames:Array.from(X),isStandardized:p,isAggregate:H}};E._visitAll=function(J,X){if(null!=J)switch(X(J),J.type){case "when-clause":this._visitAll(J.operand,X);this._visitAll(J.value,X);break;case "case-expression":for(const W of J.clauses)this._visitAll(W,X);"simple"===J.format&&this._visitAll(J.operand,X);null!==J.else&&this._visitAll(J.else,X);break;case "expression-list":for(const W of J.value)this._visitAll(W,X);break;case "unary-expression":this._visitAll(J.expr,
X);break;case "binary-expression":this._visitAll(J.left,X);this._visitAll(J.right,X);break;case "function":this._visitAll(J.args,X)}};E.evaluateNodeToJavaScript=function(J){switch(J.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(J.value)+", "+JSON.stringify(J.qualifier)+","+JSON.stringify(J.op)+")";case "case-expression":var X="";if("simple"===J.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(J.operand)+")";X="( ";for(let p=0;p<J.clauses.length;p++)X+=
" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(J.clauses[p].operand)+")) ? ("+this.evaluateNodeToJavaScript(J.clauses[p].value)+") : "}else for(X="( ",W=0;W<J.clauses.length;W++)X+=" this.makeBool("+this.evaluateNodeToJavaScript(J.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(J.clauses[W].value)+") : ";X=null!==J.else?X+this.evaluateNodeToJavaScript(J.else):X+"null";return X+=" )";case "parameter":return"this.lookup("+JSON.stringify(J.value.toLowerCase())+
",lookups)";case "expression-list":X="[";for(W of J.value)"["!==X&&(X+=","),X+=this.evaluateNodeToJavaScript(W);return X+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(J.expr)+")";case "binary-expression":switch(J.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+" )";
case "IS":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(J.left)+")";case "ISNOT":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(J.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(J.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(J.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(J.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(J.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+","+JSON.stringify(J.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+","+JSON.stringify(J.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(J.operator)+","+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(J.operator)+","+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+
")"}throw Error("Not Supported Operator "+J.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(J.value);case "date":return"(new Date("+C(J.value).getTime().toString()+"))";case "timestamp":return"(new Date("+K(J.value).getTime().toString()+"))";case "current-time":return"date"===J.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(J.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(J.name)+","+this.evaluateNodeToJavaScript(J.args)+")"}throw Error("Unsupported sql syntax "+J.type);};E._evaluateNode=function(J,X,W){switch(J.type){case "interval":return X=this._evaluateNode(J.value,X,W),f.SqlInterval.createFromValueAndQualifer(X,J.qualifier,J.op);case "case-expression":if("simple"===J.format){var p=n(this._evaluateNode(J.operand,X,W));for(var H=0;H<J.clauses.length;H++)if(p===n(this._evaluateNode(J.clauses[H].operand,X,W)))return this._evaluateNode(J.clauses[H].value,
X,W)}else for(p=0;p<J.clauses.length;p++)if(!0===this._evaluateNode(J.clauses[p].operand,X,W))return this._evaluateNode(J.clauses[p].value,X,W);return null!==J.else?this._evaluateNode(J.else,X,W):null;case "parameter":return this.parameters[J.value.toLowerCase()];case "expression-list":p=[];for(H of J.value)p.push(this._evaluateNode(H,X,W));return p;case "unary-expression":return k(this._evaluateNode(J.expr,X,W));case "binary-expression":switch(J.operator){case "AND":return g(this._evaluateNode(J.left,
X,W),this._evaluateNode(J.right,X,W));case "OR":return q(this._evaluateNode(J.left,X,W),this._evaluateNode(J.right,X,W));case "IS":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(J.left,X,W);case "ISNOT":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(J.left,X,W);case "IN":return p=x(this._evaluateNode(J.right,X,W)),v(this._evaluateNode(J.left,X,W),p);case "NOT IN":return p=x(this._evaluateNode(J.right,
X,W)),k(v(this._evaluateNode(J.left,X,W),p));case "BETWEEN":return p=this._evaluateNode(J.left,X,W),J=this._evaluateNode(J.right,X,W),null==p||null==J[0]||null==J[1]?null:p>=n(J[0])&&p<=n(J[1]);case "NOTBETWEEN":return p=this._evaluateNode(J.left,X,W),J=this._evaluateNode(J.right,X,W),null==p||null==J[0]||null==J[1]?null:p<n(J[0])||p>n(J[1]);case "LIKE":return t(this._evaluateNode(J.left,X,W),this._evaluateNode(J.right,X,W),J.escape);case "NOT LIKE":return k(t(this._evaluateNode(J.left,X,W),this._evaluateNode(J.right,
X,W),J.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return z(J.operator,this._evaluateNode(J.left,X,W),this._evaluateNode(J.right,X,W));case "-":case "+":case "*":case "/":return e(J.operator,this._evaluateNode(J.left,X,W),this._evaluateNode(J.right,X,W))}case "null":case "boolean":case "string":case "number":return J.value;case "date":return C(J.value);case "timestamp":return K(J.value);case "current-time":return X=new Date,"date"===J.mode&&X.setHours(0,
0,0,0),X;case "column-reference":return h(X,J.column,this.datefields,W);case "function":return X=this._evaluateNode(J.args,X,W),this.isAggregate?G.aggregateFunction(J.name,X):f.evaluateFunction(J.name,X)}throw Error("Unsupported sql syntax "+J.type);};u._createClass(w,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,J=>{"current-time"===
J.type?this._hasDateFunctions=!0:"function"===J.type&&(this._hasDateFunctions=this._hasDateFunctions||O.has(J.name.toLowerCase()))});return this._hasDateFunctions}}]);return w}();var N;(function(w){w[w.Normal=0]="Normal";w[w.Escaped=1]="Escaped"})(N||(N={}));const P={getAttribute(w,E){return(w&&"object"===typeof w.attributes?w.attributes:w)[E]}};d.WhereClause=Q;d.defaultAttributeAdapter=P;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(d){function u(f){let F=0;for(let A=0;A<f.length;A++)F+=f[A];return F/f.length}function c(f){const F=u(f),A=f.length;let L=0;for(const K of f)L+=(K-F)**2;return 1<A?L/(A-1):0}const G={min:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.min.apply(Math,f[0])},max:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.max.apply(Math,f[0])},avg:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:u(f[0])},sum:{minParams:1,maxParams:1,evaluate:f=>{if(null==f[0])f=null;else{{f=f[0];
let F=0;for(let A=0;A<f.length;A++)F+=f[A];f=F}}return f}},stddev:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sqrt(c(f[0]))},count:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].length},var:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:c(f[0])}};d.aggregateFunction=function(f,F){const A=G[f.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(F.length<A.minParams||F.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);
return A.evaluate(F)};d.isAggregate=function(f,F){f=G[f.toLowerCase()];return null!=f&&F>=f.minParams&&F<=f.maxParams};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(d,u){let c=function(){function f(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}f._fixDefaults=function(F){if(null!==F.precision||null!==F.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};f.createFromMilliseconds=function(F){const A=new f;A.second=F/1E3;return A};f.createFromValueAndQualifer=function(F,A,L){let K=null;const C=new f;C.op="-"===L?"-":"+";if("interval-period"===A.type){f._fixDefaults(A);if("year"===A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(F))C[A.period]=parseFloat(F);else throw Error("Illegal Interval");}else{f._fixDefaults(A.start);f._fixDefaults(A.end);if("year"===A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");
if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":K=/^[0-9]{1,} [0-9]{1,}$/;if(K.test(F))C[A.start.period]=parseFloat(F.split(" ")[0]),C[A.end.period]=parseFloat(F.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(K.test(F))C[A.start.period]=parseFloat(F.split(" ")[0]),F=F.split(" ")[1].split(":"),C.hour=parseFloat(F[0]),
C.minute=parseFloat(F[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(F))C[A.start.period]=parseFloat(F.split(" ")[0]),F=F.split(" ")[1].split(":"),C.hour=parseFloat(F[0]),C.minute=parseFloat(F[1]),C.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(A.end.period){case "minute":K=/^[0-9]{1,}:[0-9]{1,}$/;if(K.test(F))C.hour=
parseFloat(F.split(":")[0]),C.minute=parseFloat(F.split(":")[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(F))F=F.split(":"),C.hour=parseFloat(F[0]),C.minute=parseFloat(F[1]),C.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(A.end.period){case "second":K=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(F))F=F.split(":"),
C.minute=parseFloat(F[0]),C.second=parseFloat(F[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return C};f.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f}();const G={extract:{minParams:2,maxParams:2,evaluate:([f,F])=>{if(null==F)return null;if(F instanceof Date)switch(f.toUpperCase()){case "SECOND":return F.getSeconds();
case "MINUTE":return F.getMinutes();case "HOUR":return F.getHours();case "DAY":return F.getDate();case "MONTH":return F.getMonth()+1;case "YEAR":return F.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:f=>{if(2===f.length){const [F,A]=f;return null==F||null==A?null:F.toString().substring(A-1)}if(3===f.length){const [F,A,L]=f;return null==F||null==A||null==L?null:0>=L?"":F.toString().substring(A-1,A+L-1)}}},position:{minParams:2,maxParams:2,
evaluate:([f,F])=>null==f||null==F?null:F.indexOf(f)+1},trim:{minParams:2,maxParams:3,evaluate:f=>{var F=3===f.length,A=F?f[1]:" ";F=F?f[2]:f[1];if(null==A||null==F)return null;A=`(${u.escapeRegExpString(A)})`;switch(f[0]){case "BOTH":return F.replace(new RegExp(`^${A}*|${A}*$`,"g"),"");case "LEADING":return F.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return F.replace(new RegExp(`${A}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:f=>
null==f[0]?null:Math.abs(f[0])},ceiling:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.ceil(f[0])},floor:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.floor(f[0])},log:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])},log10:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sin(f[0])},cos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.cos(f[0])},tan:{minParams:1,
maxParams:1,evaluate:f=>null==f[0]?null:Math.tan(f[0])},asin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.asin(f[0])},acos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.acos(f[0])},atan:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.atan(f[0])},sign:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:0<f[0]?1:0>f[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==f[1]?null:f[0]**f[1]},mod:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==
f[1]?null:f[0]%f[1]},round:{minParams:1,maxParams:2,evaluate:f=>{const F=f[0];f=2===f.length?10**f[1]:1;return null==F?null:Math.round(F*f)/f}},truncate:{minParams:1,maxParams:2,evaluate:f=>null==f[0]?null:1===f.length?parseInt(f[0].toFixed(0),10):parseFloat(f[0].toFixed(f[1]))},char_length:{minParams:1,maxParams:1,evaluate:f=>"string"===typeof f[0]||f[0]instanceof String?f[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:f=>{let F="";for(let A=0;A<f.length;A++){if(null==f[A])return null;
F+=f[A].toString()}return F}},lower:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toUpperCase()}};d.SqlInterval=c;d.evaluateFunction=function(f,F){const A=G[f.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(F.length<A.minParams||F.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);return A.evaluate(F)};d.isStandardized=function(f,
F){f=G[f.toLowerCase()];return null!=f&&F>=f.minParams&&F<=f.maxParams};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(d,u){var c={exports:{}};(function(f){(function(F,A){f.exports&&(f.exports=A())})(u.commonjsGlobal,function(){function F(L,K,C,x){L=Error.call(this,L);Object.setPrototypeOf&&Object.setPrototypeOf(L,F.prototype);L.expected=K;L.found=C;L.location=
x;L.name="SyntaxError";return L}function A(L,K,C){C=C||" ";if(L.length>K)return L;K-=L.length;C+=C.repeat(K);return L+C.slice(0,K)}(function(L,K){function C(){this.constructor=L}C.prototype=K.prototype;L.prototype=new C})(F,Error);F.prototype.format=function(L){var K="Error: "+this.message;if(this.location){var C=null,x;for(x=0;x<L.length;x++)if(L[x].source===this.location.source){C=L[x].text.split(/\r\n|\n|\r/g);break}L=this.location.start;x=this.location.source+":"+L.line+":"+L.column;if(C){var k=
this.location.end,g=A("",L.line.toString().length);C=C[L.line-1];k=L.line===k.line?k.column:C.length+1;K+="\n --\x3e "+x+"\n"+g+" |\n"+L.line+" | "+C+"\n"+g+" | "+A("",L.column-1)+A("",k-L.column,"^")}else K+="\n at "+x}return K};F.buildMessage=function(L,K){function C(v){return v.charCodeAt(0).toString(16).toUpperCase()}function x(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+
C(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+C(t)})}function k(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+C(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+C(t)})}function g(v){return q[v.type](v)}var q={literal:function(v){return'"'+x(v.text)+'"'},class:function(v){var t=v.parts.map(function(n){return Array.isArray(n)?
k(n[0])+"-"+k(n[1]):k(n)});return"["+(v.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(v){return v.description}};return"Expected "+function(v){v=v.map(g);var t,n;v.sort();if(0<v.length){for(n=t=1;t<v.length;t++)v[t-1]!==v[t]&&(v[n]=v[t],n++);v.length=n}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}(L)+" but "+(K?'"'+x(K)+'"':"end of input")+" found."};
return{SyntaxError:F,parse:function(L,K){function C(R,a){return{type:"literal",text:R,ignoreCase:a}}function x(R,a,b){return{type:"class",parts:R,inverted:a,ignoreCase:b}}function k(R){var a=jc[R],b;if(!a){for(b=R-1;!jc[b];)b--;a=jc[b];for(a={line:a.line,column:a.column};b<R;)10===L.charCodeAt(b)?(a.line++,a.column=1):a.column++,b++;jc[R]=a}return a}function g(R,a){var b=k(R),S=k(a);return{source:Hb,start:{offset:R,line:b.line,column:b.column},end:{offset:a,line:S.line,column:S.column}}}function q(R){M<
tb||(M>tb&&(tb=M,ec=[]),ec.push(R))}function v(){var R=M;ta();var a=n();a!==B?(ta(),R=a):(M=R,R=B);return R}function t(){var R=M;var a=n();if(a!==B){R=[];var b=M;var S=ta();var Y=Ta();if(Y!==B){var aa=ta();var fa=n();fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;for(;b!==B;)R.push(b),b=M,S=ta(),Y=Ta(),Y!==B?(aa=ta(),fa=n(),fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)):(M=b,b=B);b={type:"expression-list"};a=[a];for(S=0;S<R.length;S++)a.push(R[S][3]);b.value=a;R=b}else M=R,R=B;return R}function n(){var R=M;var a=
z();if(a!==B){R=[];var b=M;var S=ta();var Y=xa();if(Y!==B){var aa=ta();var fa=z();fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;for(;b!==B;)R.push(b),b=M,S=ta(),Y=xa(),Y!==B?(aa=ta(),fa=z(),fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)):(M=b,b=B);R=vb(a,R)}else M=R,R=B;return R}function z(){var R=M;var a=e();if(a!==B){R=[];var b=M;var S=ta();var Y=Aa();if(Y!==B){var aa=ta();var fa=e();fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;for(;b!==B;)R.push(b),b=M,S=ta(),Y=Aa(),Y!==B?(aa=ta(),fa=e(),fa!==B?b=S=[S,Y,aa,
fa]:(M=b,b=B)):(M=b,b=B);R=vb(a,R)}else M=R,R=B;return R}function e(){var R=M;var a=za();if(a===B){a=M;if(33===L.charCodeAt(M)){var b=Gb;M++}else b=B,0===pa&&q(fc);if(b!==B){var S=M;pa++;if(61===L.charCodeAt(M)){var Y=Rb;M++}else Y=B,0===pa&&q(od);pa--;Y===B?S=void 0:(M=S,S=B);S!==B?a=b=[b,S]:(M=a,a=B)}else M=a,a=B}a!==B?(b=ta(),S=e(),S!==B?R={type:"unary-expression",operator:"NOT",expr:S}:(M=R,R=B)):(M=R,R=B);if(R===B){a=M;R=r();if(R!==B){ta();a=[];b=M;S=ta();Y=h();if(Y!==B){var aa=ta();var fa=r();
fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;if(b!==B)for(;b!==B;)a.push(b),b=M,S=ta(),Y=h(),Y!==B?(aa=ta(),fa=r(),fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)):(M=b,b=B);else a=B;a!==B&&(a={type:"arithmetic",tail:a});a===B&&(a=M,b=y(),b!==B?(ta(),S=Pa(),S!==B?(ta(),S=t(),S!==B?(ta(),Y=bb(),Y!==B?a={op:b,right:S}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B)):(M=a,a=B),a===B&&(a=M,b=y(),b!==B?(ta(),S=Pa(),S!==B?(ta(),S=bb(),S!==B?a={op:b,right:{type:"expression-list",value:[]}}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B),a===B&&(a=M,
b=y(),b!==B?(ta(),S=E(),S!==B?a={op:b,right:S}:(M=a,a=B)):(M=a,a=B))),a===B&&(a=M,Y=za(),Y!==B?(ta(),b=ba(),b!==B?(ta(),S=r(),S!==B?(ta(),aa=Aa(),aa!==B?(ta(),Y=r(),Y!==B?a={op:"NOT"+b,right:{type:"expression-list",value:[S,Y]}}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B)):(M=a,a=B)):(M=a,a=B),a===B&&(a=M,Y=ba(),Y!==B?(ta(),b=r(),b!==B?(ta(),S=Aa(),S!==B?(ta(),aa=r(),aa!==B?a={op:Y,right:{type:"expression-list",value:[b,aa]}}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B)):(M=a,a=B)),a===B&&(a=M,b=la(),b!==B?(ta(),S=za(),S!==
B?(ta(),S=r(),S!==B?a={op:b+"NOT",right:S}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B),a===B&&(a=M,b=la(),b!==B?(ta(),S=r(),S!==B?a={op:b,right:S}:(M=a,a=B)):(M=a,a=B)),a===B&&(a=M,b=l(),b!==B?(ta(),S=I(),S!==B?(ta(),Y=M,L.substr(M,6).toLowerCase()===Tc?(aa=L.substr(M,6),M+=6):(aa=B,0===pa&&q(de)),aa!==B?(aa=M,pa++,fa=P(),pa--,fa===B?aa=void 0:(M=aa,aa=B),aa!==B?Y="ESCAPE":(M=Y,Y=B)):(M=Y,Y=B),Y!==B?(ta(),Y=U(),Y!==B?a={op:b,right:S,escape:Y.value}:(M=a,a=B)):(M=a,a=B)):(M=a,a=B)):(M=a,a=B),a===B&&(a=M,b=l(),
b!==B?(ta(),S=I(),S!==B?a={op:b,right:S,escape:""}:(M=a,a=B)):(M=a,a=B))))));a===B&&(a=null);""==a||void 0==a||null==a?a=R:(b=null,a=b="arithmetic"==a.type?vb(R,a.tail):Qb(a.op,R,a.right,a.escape))}else M=a,a=B;R=a}return R}function h(){if(L.substr(M,2)===Bb){var R=Bb;M+=2}else R=B,0===pa&&q(gc);R===B&&(62===L.charCodeAt(M)?(R=eb,M++):(R=B,0===pa&&q(Cb)),R===B&&(L.substr(M,2)===xb?(R=xb,M+=2):(R=B,0===pa&&q(Bc)),R===B&&(L.substr(M,2)===Sb?(R=Sb,M+=2):(R=B,0===pa&&q(jb)),R===B&&(60===L.charCodeAt(M)?
(R=Pb,M++):(R=B,0===pa&&q(Ud)),R===B&&(61===L.charCodeAt(M)?(R=Rb,M++):(R=B,0===pa&&q(od)),R===B&&(L.substr(M,2)===Ib?(R=Ib,M+=2):(R=B,0===pa&&q(pd))))))));return R}function l(){var R=R=M;var a=za();if(a!==B){var b=ta();var S=wa();S!==B?R=a=[a,b,S]:(M=R,R=B)}else M=R,R=B;R!==B&&(R=R[0]+" "+R[2]);R===B&&(R=wa());return R}function y(){var R=R=M;var a=za();if(a!==B){var b=ta();var S=ha();S!==B?R=a=[a,b,S]:(M=R,R=B)}else M=R,R=B;R!==B&&(R=R[0]+" "+R[2]);R===B&&(R=ha());return R}function r(){var R=M;var a=
D();if(a!==B){R=[];var b=M;var S=ta();var Y=m();if(Y!==B){var aa=ta();var fa=D();fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;for(;b!==B;)R.push(b),b=M,S=ta(),Y=m(),Y!==B?(aa=ta(),fa=D(),fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)):(M=b,b=B);R=vb(a,R)}else M=R,R=B;return R}function m(){if(43===L.charCodeAt(M)){var R=V;M++}else R=B,0===pa&&q(hc);R===B&&(45===L.charCodeAt(M)?(R=ca,M++):(R=B,0===pa&&q(ic)));return R}function D(){var R=M;var a=T();if(a!==B){R=[];var b=M;var S=ta();var Y=O();if(Y!==B){var aa=ta();
var fa=T();fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)}else M=b,b=B;for(;b!==B;)R.push(b),b=M,S=ta(),Y=O(),Y!==B?(aa=ta(),fa=T(),fa!==B?b=S=[S,Y,aa,fa]:(M=b,b=B)):(M=b,b=B);R=vb(a,R)}else M=R,R=B;return R}function O(){if(42===L.charCodeAt(M)){var R=na;M++}else R=B,0===pa&&q(qd);R===B&&(47===L.charCodeAt(M)?(R=Ha,M++):(R=B,0===pa&&q(rd)));return R}function T(){var R=U();if(R===B){var a=M;var b=M;var S=ya();if(S!==B){var Y=oa();if(Y!==B){var aa=va();aa!==B?b=parseFloat(S+Y+aa):(M=b,b=B)}else M=b,b=B}else M=b,
b=B;b===B&&(b=M,S=ya(),S!==B?(Y=oa(),Y!==B?b=parseFloat(S+Y):(M=b,b=B)):(M=b,b=B),b===B&&(b=M,S=ya(),S!==B?(Y=va(),Y!==B?b=parseFloat(S+Y):(M=b,b=B)):(M=b,b=B),b===B&&(b=M,S=ya(),S!==B&&(S=parseFloat(S)),b=S)));var fa=b;if(fa!==B){var ra=M;pa++;var Ea=N();pa--;Ea===B?ra=void 0:(M=ra,ra=B);ra!==B?a={type:"number",value:fa}:(M=a,a=B)}else M=a,a=B;R=a;if(R===B){var Ja=M;var Ra=M;if(L.substr(M,4).toLowerCase()===ub){var Ma=L.substr(M,4);M+=4}else Ma=B,0===pa&&q(vd);if(Ma!==B){var Oa=M;pa++;var Ua=P();
pa--;Ua===B?Oa=void 0:(M=Oa,Oa=B);Oa!==B?Ra=Ma=[Ma,Oa]:(M=Ra,Ra=B)}else M=Ra,Ra=B;var $a=Ra;$a!==B&&($a={type:"boolean",value:!0});Ja=$a;if(Ja===B){Ja=M;var qb=M;if(L.substr(M,5).toLowerCase()===Yb){var sb=L.substr(M,5);M+=5}else sb=B,0===pa&&q(Dc);if(sb!==B){var Jb=M;pa++;var af=P();pa--;af===B?Jb=void 0:(M=Jb,Jb=B);Jb!==B?qb=sb=[sb,Jb]:(M=qb,qb=B)}else M=qb,qb=B;$a=qb;$a!==B&&($a={type:"boolean",value:!1});Ja=$a}R=Ja;if(R===B){var kc=M;if(L.substr(M,4).toLowerCase()===ib){var zd=L.substr(M,4);M+=
4}else zd=B,0===pa&&q(Cc);if(zd!==B){var Fc=M;pa++;var bf=P();pa--;bf===B?Fc=void 0:(M=Fc,Fc=B);Fc!==B?kc=zd=[zd,Fc]:(M=kc,kc=B)}else M=kc,kc=B;var xe=kc;xe!==B&&(xe={type:"null",value:null});R=xe;if(R===B){var lc=M;var mc=M;if(L.substr(M,4).toLowerCase()===ad){var Je=L.substr(M,4);M+=4}else Je=B,0===pa&&q(xd);if(Je!==B){var Ad=M;pa++;var cf=P();pa--;cf===B?Ad=void 0:(M=Ad,Ad=B);Ad!==B?mc="DATE":(M=mc,mc=B)}else M=mc,mc=B;if(mc!==B){ta();var Ke=I();Ke!==B?lc={type:"date",value:Ke.value}:(M=lc,lc=
B)}else M=lc,lc=B;R=lc;if(R===B){var nc=M;var oc=M;if(L.substr(M,9).toLowerCase()===$c){var Le=L.substr(M,9);M+=9}else Le=B,0===pa&&q(ne);if(Le!==B){var Bd=M;pa++;var df=P();pa--;df===B?Bd=void 0:(M=Bd,Bd=B);Bd!==B?oc="TIMESTAMP":(M=oc,oc=B)}else M=oc,oc=B;if(oc!==B){ta();var Me=I();Me!==B?nc={type:"timestamp",value:Me.value}:(M=nc,nc=B)}else M=nc,nc=B;R=nc;if(R===B){var fb=M;var ye=ja();if(ye!==B){ta();if(45===L.charCodeAt(M)){var Lb=ca;M++}else Lb=B,0===pa&&q(ic);Lb===B&&(43===L.charCodeAt(M)?(Lb=
V,M++):(Lb=B,0===pa&&q(hc)));if(Lb!==B){ta();var Gc=I();if(Gc!==B){ta();var Ne=X();Ne!==B?fb={type:"interval",value:Gc,qualifier:Ne,op:Lb}:(M=fb,fb=B)}else M=fb,fb=B}else M=fb,fb=B}else M=fb,fb=B;fb===B&&(fb=M,ye=ja(),ye!==B?(ta(),Lb=I(),Lb!==B?(ta(),Gc=X(),Gc!==B?fb={type:"interval",value:Lb,qualifier:Gc,op:""}:(M=fb,fb=B)):(M=fb,fb=B)):(M=fb,fb=B));R=fb}}}}}}var Wa=R;if(Wa===B){var nb=M;var pc=M;if(L.substr(M,7).toLowerCase()===Xc){var Oe=L.substr(M,7);M+=7}else Oe=B,0===pa&&q(ke);if(Oe!==B){var Cd=
M;pa++;var ef=P();pa--;ef===B?Cd=void 0:(M=Cd,Cd=B);Cd!==B?pc="EXTRACT":(M=pc,pc=B)}else M=pc,pc=B;if(pc!==B){ta();var ff=Pa();if(ff!==B){ta();var yb=sa();yb===B&&(yb=ma(),yb===B&&(yb=qa(),yb===B&&(yb=Ca(),yb===B&&(yb=La(),yb===B&&(yb=Fa())))));var Pe=yb;if(Pe!==B){ta();var gf=da();if(gf!==B){ta();var Qe=n();if(Qe!==B){ta();var hf=bb();hf!==B?nb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Pe},Qe]}}:(M=nb,nb=B)}else M=nb,nb=B}else M=nb,nb=B}else M=nb,nb=
B}else M=nb,nb=B}else M=nb,nb=B;Wa=nb;if(Wa===B){var ob=M;var qc=M;if(L.substr(M,9).toLowerCase()===Wc){var Re=L.substr(M,9);M+=9}else Re=B,0===pa&&q(je);if(Re!==B){var Dd=M;pa++;var jf=P();pa--;jf===B?Dd=void 0:(M=Dd,Dd=B);Dd!==B?qc="SUBSTRING":(M=qc,qc=B)}else M=qc,qc=B;if(qc!==B){ta();var kf=Pa();if(kf!==B){ta();var ze=n();if(ze!==B){ta();var lf=da();if(lf!==B){ta();var Ae=n();if(Ae!==B){ta();var Mb=M;var rc=M;if(L.substr(M,3).toLowerCase()===Vc){var Se=L.substr(M,3);M+=3}else Se=B,0===pa&&q(ie);
if(Se!==B){var Ed=M;pa++;var mf=P();pa--;mf===B?Ed=void 0:(M=Ed,Ed=B);Ed!==B?rc="FOR":(M=rc,rc=B)}else M=rc,rc=B;var Hc=rc;if(Hc!==B){var nf=ta();var Te=n();if(Te!==B){var of=ta();Mb=Hc=[Hc,nf,Te,of]}else M=Mb,Mb=B}else M=Mb,Mb=B;Mb===B&&(Mb=null);Hc=bb();Hc!==B?ob={type:"function",name:"substring",args:{type:"expression-list",value:Mb?[ze,Ae,Mb[2]]:[ze,Ae]}}:(M=ob,ob=B)}else M=ob,ob=B}else M=ob,ob=B}else M=ob,ob=B}else M=ob,ob=B}else M=ob,ob=B;Wa=ob;if(Wa===B){var Xa=M;var Be=ia();if(Be!==B){ta();
var Ce=Pa();if(Ce!==B){ta();var Nb=J();Nb===B&&(Nb=null);ta();var Ic=n();if(Ic!==B){ta();var De=da();if(De!==B){ta();var Ue=n();if(Ue!==B){ta();var pf=bb();pf!==B?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Nb?"BOTH":Nb},Ic,Ue]}}:(M=Xa,Xa=B)}else M=Xa,Xa=B}else M=Xa,Xa=B}else M=Xa,Xa=B}else M=Xa,Xa=B}else M=Xa,Xa=B;Xa===B&&(Xa=M,Be=ia(),Be!==B?(ta(),Ce=Pa(),Ce!==B?(ta(),Nb=J(),Nb===B&&(Nb=null),ta(),Ic=n(),Ic!==B?(ta(),De=bb(),De!==B?Xa={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Nb?"BOTH":Nb},Ic]}}:(M=Xa,Xa=B)):(M=Xa,Xa=B)):(M=Xa,Xa=B)):(M=Xa,Xa=B));Wa=Xa;if(Wa===B){var pb=M;var sc=M;if(L.substr(M,8).toLowerCase()===Zc){var Ve=L.substr(M,8);M+=8}else Ve=B,0===pa&&q(me);if(Ve!==B){var Fd=M;pa++;var qf=P();pa--;qf===B?Fd=void 0:(M=Fd,Fd=B);Fd!==B?sc="POSITION":(M=sc,sc=B)}else M=sc,sc=B;if(sc!==B){ta();var rf=Pa();if(rf!==B){ta();var We=n();if(We!==B){ta();var sf=ha();if(sf!==B){ta();var Xe=n();if(Xe!==
B){ta();var tf=bb();tf!==B?pb={type:"function",name:"position",args:{type:"expression-list",value:[We,Xe]}}:(M=pb,pb=B)}else M=pb,pb=B}else M=pb,pb=B}else M=pb,pb=B}else M=pb,pb=B}else M=pb,pb=B;Wa=pb;if(Wa===B){var Tb=M;var Gd;var zb=M;zb=Gd=Q();if(zb===B)if(zb=M,96===L.charCodeAt(M)?(Gd=yc,M++):(Gd=B,0===pa&&q(Sc)),Gd!==B){var Hd=[];if(Ac.test(L.charAt(M))){var Ob=L.charAt(M);M++}else Ob=B,0===pa&&q(bc);if(Ob!==B)for(;Ob!==B;)Hd.push(Ob),Ac.test(L.charAt(M))?(Ob=L.charAt(M),M++):(Ob=B,0===pa&&q(bc));
else Hd=B;Hd!==B?(96===L.charCodeAt(M)?(Ob=yc,M++):(Ob=B,0===pa&&q(Sc)),Ob!==B?zb=Hd.join(""):(M=zb,zb=B)):(M=zb,zb=B)}else M=zb,zb=B;var Ye=zb;if(Ye!==B){ta();var uf=Pa();if(uf!==B){ta();var Id=t();Id===B&&(Id=null);ta();var vf=bb();vf!==B?Tb={type:"function",name:Ye,args:Id?Id:{type:"expression-list",value:[]}}:(M=Tb,Tb=B)}else M=Tb,Tb=B}else M=Tb,Tb=B;Wa=Tb;if(Wa===B){var Eb;var gb=M;var Ee=Da();if(Ee!==B){ta();var Jc=n();if(Jc!==B){ta();var Kc=[];for(Eb=ea();Eb!==B;)Kc.push(Eb),Eb=ea();Eb=ta();
var Jd=Ba();Jd!==B?gb={type:"case-expression",format:"simple",operand:Jc,clauses:Kc,else:null}:(M=gb,gb=B)}else M=gb,gb=B}else M=gb,gb=B;if(gb===B)if(gb=M,Ee=Da(),Ee!==B)if(ta(),Jc=n(),Jc!==B){ta();Kc=[];for(Eb=ea();Eb!==B;)Kc.push(Eb),Eb=ea();Eb=ta();Jd=ka();if(Jd!==B){ta();var wf=Ba();wf!==B?gb={type:"case-expression",format:"simple",operand:Jc,clauses:Kc,else:Jd.value}:(M=gb,gb=B)}else M=gb,gb=B}else M=gb,gb=B;else M=gb,gb=B;var Fe=gb;if(Fe===B){var Fb;var lb=M;var Ge=Da();if(Ge!==B){ta();var Lc=
[];for(Fb=Z();Fb!==B;)Lc.push(Fb),Fb=Z();Fb=ta();var Kd=Ba();Kd!==B?lb={type:"case-expression",format:"searched",clauses:Lc,else:null}:(M=lb,lb=B)}else M=lb,lb=B;if(lb===B)if(lb=M,Ge=Da(),Ge!==B){ta();Lc=[];for(Fb=Z();Fb!==B;)Lc.push(Fb),Fb=Z();Fb=ta();Kd=ka();if(Kd!==B){ta();var xf=Ba();xf!==B?lb={type:"case-expression",format:"searched",clauses:Lc,else:Kd.value}:(M=lb,lb=B)}else M=lb,lb=B}else M=lb,lb=B;Fe=lb}Wa=Fe;if(Wa===B){var Ld;var Md=M;var Ze=N();if(Ze!==B){var $e=[];for(Ld=w();Ld!==B;)$e.push(Ld),
Ld=w();Md=Ze+$e.join("")}else M=Md,Md=B;var Nd=Md;if(Nd!==B){var He=Nd;Nd=/^CURRENT_DATE$/i.test(He)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(He)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:He}}Wa=Nd;if(Wa===B&&(Wa=E(),Wa===B)){Wa=M;var yf=Pa();if(yf!==B){ta();var Ie=n();if(Ie!==B){ta();var zf=bb();zf!==B?(Ie.paren=!0,Wa=Ie):(M=Wa,Wa=B)}else M=Wa,Wa=B}else M=Wa,Wa=B}}}}}}}}return Wa}function Q(){var R;var a=M;var b=N();if(b!==B){a=[];for(R=
P();R!==B;)a.push(R),R=P();a=b+a.join("")}else M=a,a=B;return a}function N(){if(Td.test(L.charAt(M))){var R=L.charAt(M);M++}else R=B,0===pa&&q(sd);return R}function P(){if(Sd.test(L.charAt(M))){var R=L.charAt(M);M++}else R=B,0===pa&&q(cb);return R}function w(){if(Rd.test(L.charAt(M))){var R=L.charAt(M);M++}else R=B,0===pa&&q(Pc);return R}function E(){var R=M;if(64===L.charCodeAt(M)){var a=Ia;M++}else a=B,0===pa&&q(tc);if(a!==B){var b=Q();b!==B?R=a=[a,b]:(M=R,R=B)}else M=R,R=B;R!==B&&(R={type:"parameter",
value:R[1]});return R}function J(){var R=M;if(L.substr(M,7).toLowerCase()===bd){var a=L.substr(M,7);M+=7}else a=B,0===pa&&q(oe);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="LEADING":(M=R,R=B)}else M=R,R=B;R===B&&(R=M,L.substr(M,8).toLowerCase()===cd?(a=L.substr(M,8),M+=8):(a=B,0===pa&&q(pe)),a!==B?(a=M,pa++,b=P(),pa--,b===B?a=void 0:(M=a,a=B),a!==B?R="TRAILING":(M=R,R=B)):(M=R,R=B),R===B&&(R=M,L.substr(M,4).toLowerCase()===dd?(a=L.substr(M,4),M+=4):(a=B,0===pa&&q(qe)),a!==B?
(a=M,pa++,b=P(),pa--,b===B?a=void 0:(M=a,a=B),a!==B?R="BOTH":(M=R,R=B)):(M=R,R=B)));return R}function X(){var R=M;var a=M;var b=W();if(b!==B){ta();var S=Pa();if(S!==B)if(ta(),S=H(),S!==B){ta();var Y=bb();Y!==B?a={type:"interval-period",period:b.value,precision:S,secondary:null}:(M=a,a=B)}else M=a,a=B;else M=a,a=B}else M=a,a=B;a===B&&(a=M,b=W(),b!==B&&(b=dc(b)),a=b);if(a!==B)if(ta(),b=M,L.substr(M,2).toLowerCase()===ed?(S=L.substr(M,2),M+=2):(S=B,0===pa&&q(re)),S!==B?(S=M,pa++,Y=P(),pa--,Y===B?S=void 0:
(M=S,S=B),S!==B?b="TO":(M=b,b=B)):(M=b,b=B),b!==B){ta();b=M;S=W();S!==B&&(S={type:"interval-period",period:S.value,precision:null,secondary:null});b=S;if(b===B){b=M;S=Fa();if(S!==B)if(ta(),S=Pa(),S!==B)if(ta(),S=H(),S!==B)if(ta(),Y=Ta(),Y!==B)if(ta(),Y=p(),Y!==B){ta();var aa=bb();aa!==B?b=cc(S,Y):(M=b,b=B)}else M=b,b=B;else M=b,b=B;else M=b,b=B;else M=b,b=B;else M=b,b=B;b===B&&(b=M,S=Fa(),S!==B?(ta(),S=Pa(),S!==B?(ta(),S=H(),S!==B?(ta(),Y=bb(),Y!==B?b={type:"interval-period",period:"second",precision:S,
secondary:null}:(M=b,b=B)):(M=b,b=B)):(M=b,b=B)):(M=b,b=B),b===B&&(b=M,S=Fa(),S!==B&&(S={type:"interval-period",period:"second",precision:null,secondary:null}),b=S))}b!==B?R={type:"interval-qualifier",start:a,end:b}:(M=R,R=B)}else M=R,R=B;else M=R,R=B;R===B&&(R=M,b=W(),b!==B?(ta(),a=Pa(),a!==B?(ta(),a=p(),a!==B?(ta(),S=bb(),S!==B?R={type:"interval-period",period:b.value,precision:a,secondary:null}:(M=R,R=B)):(M=R,R=B)):(M=R,R=B)):(M=R,R=B),R===B&&(R=M,b=W(),b!==B&&(b=dc(b)),R=b,R===B&&(R=M,b=Fa(),
b!==B?(ta(),a=Pa(),a!==B?(ta(),a=H(),a!==B?(ta(),S=Ta(),S!==B?(ta(),b=p(),b!==B?(ta(),S=bb(),S!==B?R=cc(a,b):(M=R,R=B)):(M=R,R=B)):(M=R,R=B)):(M=R,R=B)):(M=R,R=B)):(M=R,R=B),R===B&&(R=M,b=Fa(),b!==B?(ta(),a=Pa(),a!==B?(ta(),a=p(),a!==B?(ta(),S=bb(),S!==B?R={type:"interval-period",period:"second",precision:a,secondary:null}:(M=R,R=B)):(M=R,R=B)):(M=R,R=B)):(M=R,R=B),R===B&&(R=M,b=Fa(),b!==B&&(b={type:"interval-period",period:"second",precision:null,secondary:null}),R=b)))));return R}function W(){var R=
M;R=qa();R!==B&&(R={type:"string",value:"day"});R===B&&(R=M,R=Ca(),R!==B&&(R={type:"string",value:"hour"}),R===B&&(R=M,R=La(),R!==B&&(R={type:"string",value:"minute"}),R===B&&(R=M,R=ma(),R!==B&&(R={type:"string",value:"month"}),R===B&&(R=M,R=sa(),R!==B&&(R={type:"string",value:"year"})))));return R}function p(){var R=ua();R!==B&&(R=parseFloat(R));return R}function H(){var R=ua();R!==B&&(R=parseFloat(R));return R}function I(){var R=U();R===B&&(R=E());return R}function U(){var R=M;if(39===L.charCodeAt(M)){var a=
Qa;M++}else a=B,0===pa&&q(ac);a===B&&(L.substr(M,2)===Va?(a=Va,M+=2):(a=B,0===pa&&q(uc)));if(a!==B){a=[];var b=M;L.substr(M,2)===ab?(b=ab,M+=2):(b=B,0===pa&&q(Wb));b!==B&&(b="'");b===B&&(nd.test(L.charAt(M))?(b=L.charAt(M),M++):(b=B,0===pa&&q(td)));for(;b!==B;)a.push(b),b=M,L.substr(M,2)===ab?(b=ab,M+=2):(b=B,0===pa&&q(Wb)),b!==B&&(b="'"),b===B&&(nd.test(L.charAt(M))?(b=L.charAt(M),M++):(b=B,0===pa&&q(td)));39===L.charCodeAt(M)?(b=Qa,M++):(b=B,0===pa&&q(ac));b!==B?R={type:"string",value:a.join("")}:
(M=R,R=B)}else M=R,R=B;return R}function Z(){var R=M;if(Ka()!==B){ta();var a=n();if(a!==B){ta();var b=Na();b!==B?(ta(),b=n(),b!==B?R={type:"when-clause",operand:a,value:b}:(M=R,R=B)):(M=R,R=B)}else M=R,R=B}else M=R,R=B;return R}function ea(){var R=M;if(Ka()!==B){ta();var a=n();if(a!==B){ta();var b=Na();b!==B?(ta(),b=n(),b!==B?R={type:"when-clause",operand:a,value:b}:(M=R,R=B)):(M=R,R=B)}else M=R,R=B}else M=R,R=B;return R}function ka(){var R=M;var a=M;if(L.substr(M,4).toLowerCase()===Od){var b=L.substr(M,
4);M+=4}else b=B,0===pa&&q(vc);if(b!==B){b=M;pa++;var S=P();pa--;S===B?b=void 0:(M=b,b=B);b!==B?a="ELSE":(M=a,a=B)}else M=a,a=B;a!==B?(ta(),a=n(),a!==B?R={type:"else-clause",value:a}:(M=R,R=B)):(M=R,R=B);return R}function ya(){var R=ua();if(R===B){R=M;if(45===L.charCodeAt(M)){var a=ca;M++}else a=B,0===pa&&q(ic);a===B&&(43===L.charCodeAt(M)?(a=V,M++):(a=B,0===pa&&q(hc)));if(a!==B){var b=ua();b!==B?R=a[0]+b:(M=R,R=B)}else M=R,R=B}return R}function oa(){var R=M;if(46===L.charCodeAt(M)){var a=db;M++}else a=
B,0===pa&&q($d);a!==B?(R=ua(),R===B&&(R=null),R="."+(null!=R?R:"")):(M=R,R=B);return R}function va(){var R;var a=R=M;if(rb.test(L.charAt(M))){var b=L.charAt(M);M++}else b=B,0===pa&&q(Ya);b!==B?(Ub.test(L.charAt(M))?(a=L.charAt(M),M++):(a=B,0===pa&&q(ud)),a===B&&(a=null),a="e"+(null===a?"":a)):(M=a,a=B);a!==B?(b=ua(),b!==B?R=a+b:(M=R,R=B)):(M=R,R=B);return R}function ua(){var R=[];var a=Ga();if(a!==B)for(;a!==B;)R.push(a),a=Ga();else R=B;R!==B&&(R=R.join(""));return R}function Ga(){if(kb.test(L.charAt(M))){var R=
L.charAt(M);M++}else R=B,0===pa&&q(ae);return R}function ha(){var R=M;if(L.substr(M,2).toLowerCase()===Zb){var a=L.substr(M,2);M+=2}else a=B,0===pa&&q(be);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="IN":(M=R,R=B)}else M=R,R=B;return R}function la(){var R=M;if(L.substr(M,2).toLowerCase()===$b){var a=L.substr(M,2);M+=2}else a=B,0===pa&&q(ce);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="IS":(M=R,R=B)}else M=R,R=B;return R}function wa(){var R=M;if(L.substr(M,
4).toLowerCase()===Vb){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(wd);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="LIKE":(M=R,R=B)}else M=R,R=B;return R}function za(){var R=M;if(L.substr(M,3).toLowerCase()===mb){var a=L.substr(M,3);M+=3}else a=B,0===pa&&q(ee);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="NOT":(M=R,R=B)}else M=R,R=B;return R}function Aa(){var R=M;if(L.substr(M,3).toLowerCase()===Db){var a=L.substr(M,3);M+=3}else a=B,0===pa&&q(fe);if(a!==
B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="AND":(M=R,R=B)}else M=R,R=B;return R}function xa(){var R=M;if(L.substr(M,2).toLowerCase()===xc){var a=L.substr(M,2);M+=2}else a=B,0===pa&&q(Vd);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="OR":(M=R,R=B)}else M=R,R=B;return R}function ba(){var R=M;if(L.substr(M,7).toLowerCase()===Uc){var a=L.substr(M,7);M+=7}else a=B,0===pa&&q(ge);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="BETWEEN":(M=R,R=B)}else M=
R,R=B;return R}function da(){var R=M;if(L.substr(M,4).toLowerCase()===Yd){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(he);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="FROM":(M=R,R=B)}else M=R,R=B;return R}function ia(){var R=M;if(L.substr(M,4).toLowerCase()===Yc){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(le);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="TRIM":(M=R,R=B)}else M=R,R=B;return R}function ja(){var R=M;if(L.substr(M,8).toLowerCase()===fd){var a=
L.substr(M,8);M+=8}else a=B,0===pa&&q(se);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="INTERVAL":(M=R,R=B)}else M=R,R=B;return R}function sa(){var R=M;if(L.substr(M,4).toLowerCase()===gd){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(te);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="YEAR":(M=R,R=B)}else M=R,R=B;return R}function ma(){var R=M;if(L.substr(M,5).toLowerCase()===hd){var a=L.substr(M,5);M+=5}else a=B,0===pa&&q(ue);if(a!==B){a=M;pa++;var b=P();
pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="MONTH":(M=R,R=B)}else M=R,R=B;return R}function qa(){var R=M;if(L.substr(M,3).toLowerCase()===Zd){var a=L.substr(M,3);M+=3}else a=B,0===pa&&q(yd);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="DAY":(M=R,R=B)}else M=R,R=B;return R}function Ca(){var R=M;if(L.substr(M,4).toLowerCase()===id){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(ve);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="HOUR":(M=R,R=B)}else M=R,R=B;return R}
function La(){var R=M;if(L.substr(M,6).toLowerCase()===jd){var a=L.substr(M,6);M+=6}else a=B,0===pa&&q(we);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="MINUTE":(M=R,R=B)}else M=R,R=B;return R}function Fa(){var R=M;if(L.substr(M,6).toLowerCase()===kd){var a=L.substr(M,6);M+=6}else a=B,0===pa&&q(Kb);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="SECOND":(M=R,R=B)}else M=R,R=B;return R}function Da(){var R=M;if(L.substr(M,4).toLowerCase()===ld){var a=L.substr(M,
4);M+=4}else a=B,0===pa&&q(Wd);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="CASE":(M=R,R=B)}else M=R,R=B;return R}function Ba(){var R=M;if(L.substr(M,3).toLowerCase()===md){var a=L.substr(M,3);M+=3}else a=B,0===pa&&q(Sa);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="END":(M=R,R=B)}else M=R,R=B;return R}function Ka(){var R=M;if(L.substr(M,4).toLowerCase()===Pd){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(Za);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:
(M=a,a=B);a!==B?R="WHEN":(M=R,R=B)}else M=R,R=B;return R}function Na(){var R=M;if(L.substr(M,4).toLowerCase()===Mc){var a=L.substr(M,4);M+=4}else a=B,0===pa&&q(Xb);if(a!==B){a=M;pa++;var b=P();pa--;b===B?a=void 0:(M=a,a=B);a!==B?R="THEN":(M=R,R=B)}else M=R,R=B;return R}function Ta(){if(44===L.charCodeAt(M)){var R=Oc;M++}else R=B,0===pa&&q(Qc);return R}function Pa(){if(40===L.charCodeAt(M)){var R=Nc;M++}else R=B,0===pa&&q(Xd);return R}function bb(){if(41===L.charCodeAt(M)){var R=Qd;M++}else R=B,0===
pa&&q(Rc);return R}function ta(){var R;var a=[];for(R=hb();R!==B;)a.push(R),R=hb();return a}function hb(){if(zc.test(L.charAt(M))){var R=L.charAt(M);M++}else R=B,0===pa&&q(wc);return R}function Qb(R,a,b,S){R={type:"binary-expression",operator:R,left:a,right:b};void 0!==S&&(R.escape=S);return R}function vb(R,a){for(var b=0;b<a.length;b++)R=Qb(a[b][1],R,a[b][3]);return R}K=void 0!==K?K:{};var B={},Hb=K.grammarSource,wb={start:v},Ab=v,Gb="!",Rb="\x3d",Bb="\x3e\x3d",eb="\x3e",xb="\x3c\x3d",Sb="\x3c\x3e",
Pb="\x3c",Ib="!\x3d",V="+",ca="-",na="*",Ha="/",Ia="@",Qa="'",Va="N'",ab="''",db=".",ib="null",ub="true",Yb="false",Zb="in",$b="is",Vb="like",Tc="escape",mb="not",Db="and",xc="or",Uc="between",Yd="from",Vc="for",Wc="substring",Xc="extract",Yc="trim",Zc="position",$c="timestamp",ad="date",bd="leading",cd="trailing",dd="both",ed="to",fd="interval",gd="year",hd="month",Zd="day",id="hour",jd="minute",kd="second",ld="case",md="end",Pd="when",Mc="then",Od="else",Oc=",",Nc="(",Qd=")",yc="`",Td=/^[A-Za-z_\x80-\uFFFF]/,
Sd=/^[A-Za-z0-9_]/,Rd=/^[A-Za-z0-9_.\x80-\uFFFF]/,nd=/^[^']/,kb=/^[0-9]/,rb=/^[eE]/,Ub=/^[+\-]/,zc=/^[ \t\n\r]/,Ac=/^[^`]/,fc=C("!",!1),od=C("\x3d",!1),gc=C("\x3e\x3d",!1),Cb=C("\x3e",!1),Bc=C("\x3c\x3d",!1),jb=C("\x3c\x3e",!1),Ud=C("\x3c",!1),pd=C("!\x3d",!1),hc=C("+",!1),ic=C("-",!1),qd=C("*",!1),rd=C("/",!1),sd=x([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),cb=x([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Pc=x([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),tc=C("@",!1),
ac=C("'",!1),uc=C("N'",!1),Wb=C("''",!1),td=x(["'"],!0,!1),$d=C(".",!1),ae=x([["0","9"]],!1,!1),Ya=x(["e","E"],!1,!1),ud=x(["+","-"],!1,!1),Cc=C("NULL",!0),vd=C("TRUE",!0),Dc=C("FALSE",!0),be=C("IN",!0),ce=C("IS",!0),wd=C("LIKE",!0),de=C("ESCAPE",!0),ee=C("NOT",!0),fe=C("AND",!0),Vd=C("OR",!0),ge=C("BETWEEN",!0),he=C("FROM",!0),ie=C("FOR",!0),je=C("SUBSTRING",!0),ke=C("EXTRACT",!0),le=C("TRIM",!0),me=C("POSITION",!0),ne=C("TIMESTAMP",!0),xd=C("DATE",!0),oe=C("LEADING",!0),pe=C("TRAILING",!0),qe=C("BOTH",
!0),re=C("TO",!0),se=C("INTERVAL",!0),te=C("YEAR",!0),ue=C("MONTH",!0),yd=C("DAY",!0),ve=C("HOUR",!0),we=C("MINUTE",!0),Kb=C("SECOND",!0),Wd=C("CASE",!0),Sa=C("END",!0),Za=C("WHEN",!0),Xb=C("THEN",!0),vc=C("ELSE",!0),Qc=C(",",!1),Xd=C("(",!1),Rc=C(")",!1),wc=x([" ","\t","\n","\r"],!1,!1),Sc=C("`",!1),bc=x(["`"],!0,!1),dc=function(R){return{type:"interval-period",period:R.value,precision:null,secondary:null}},cc=function(R,a){return{type:"interval-period",period:"second",precision:R,secondary:a}},
M=0,jc=[{line:1,column:1}],tb=0,ec=[],pa=0;if("startRule"in K){if(!(K.startRule in wb))throw Error("Can't start parsing from rule \""+K.startRule+'".');Ab=wb[K.startRule]}var Ec=Ab();if(Ec!==B&&M===L.length)return Ec;Ec!==B&&M<L.length&&q({type:"end"});throw function(R,a,b){return new F(F.buildMessage(R,a),R,a,b)}(ec,tb<L.length?L.charAt(tb):null,tb<L.length?g(tb,tb+1):g(tb,tb));}}})})(c);let G=function(){function f(){}f.parse=function(F){return c.exports.parse(F)};return f}();d.WhereGrammar=G;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(d,u,c){function G(h){const l=null!=h.minValue||null!=h.maxValue,y=!!h.sqlExpression&&h.supportsSQLExpression;return!(null!=h.normalizationField||null!=h.normalizationType)&&!l&&!y}function f(h){const {values:l,useSampleStdDev:y,supportsNullCount:r}=h;var m=Number.POSITIVE_INFINITY;let D=Number.NEGATIVE_INFINITY,
O=null,T=null;var Q=null;let N=null,P=0;const w=null==h.minValue?-Infinity:h.minValue,E=null==h.maxValue?Infinity:h.maxValue;for(const J of l)Number.isFinite(J)?J>=w&&J<=E&&(O+=J,m=Math.min(m,J),D=Math.max(D,J),P++):"string"===typeof J&&P++;if(P&&null!=O){T=O/P;Q=0;for(const J of l)Number.isFinite(J)&&J>=w&&J<=E&&(Q+=(J-T)**2);N=y?1<P?Q/(P-1):0:0<P?Q/P:0;Q=Math.sqrt(N)}else D=m=null;m={avg:T,count:P,max:D,min:m,stddev:Q,sum:O,variance:N};r&&(m.nullcount=l.length-P);h.percentileParams&&(m.median=F(l,
h.percentileParams));return m}function F(h,l){const {fieldType:y,value:r,orderBy:m,isDiscrete:D}=l,O=A(y,"desc"===m);h=[...h].filter(P=>null!=P).sort((P,w)=>O(P,w));if(0===h.length)return null;if(0>=r)return h[0];if(1<=r)return h[h.length-1];var T=(h.length-1)*r,Q=Math.floor(T);l=Q+1;T%=1;Q=h[Q];const N=h[l];return l>=h.length||D||"string"===typeof Q||"string"===typeof N?Q:Q*(1-T)+N*T}function A(h,l){const y=l?1:-1,r=K(l),m=L(l);if(!h||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID",
"esriFieldTypeGlobalID",...z].includes(h))return(D,O)=>"number"===typeof D&&"number"===typeof O?r(D,O):"string"===typeof D&&"string"===typeof O?m(D,O):y;if("esriFieldTypeDate"===h)return(D,O)=>{D=(new Date(D)).getTime();O=(new Date(O)).getTime();return isNaN(D)||isNaN(O)?y:r(D,O)};if(z.has(h))return(D,O)=>r(D,O);if("esriFieldTypeString"===h)return(D,O)=>m(D,O);if("esriFieldTypeGUID"===h||"esriFieldTypeGlobalID"===h){const D=L(l);return(O,T)=>D(C(O),C(T))}return l?(D,O)=>1:(D,O)=>-1}function L(h){return h?
(l,y)=>{var r,m;l=null==(r=l)?void 0:r.toUpperCase();y=null==(m=y)?void 0:m.toUpperCase();return l>y?-1:l<y?1:0}:(l,y)=>{var r,m;l=null==(r=l)?void 0:r.toUpperCase();y=null==(m=y)?void 0:m.toUpperCase();return l<y?-1:l>y?1:0}}function K(h){return h?(l,y)=>y-l:(l,y)=>l-y}function C(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function x(h,l){const y=g({field:l.field,normalizationType:l.normalizationType,
normalizationField:l.normalizationField,classificationMethod:l.classificationMethod,standardDeviationInterval:l.standardDeviationInterval,breakCount:l.numClasses||5});h=k(h,l.minValue,l.maxValue);return c.createGenerateRendererClassBreaks({definition:y,values:h,normalizationTotal:l.normalizationTotal})}function k(h,l,y){l=null==l?-Infinity:l;y=null==y?Infinity:y;return h.filter(r=>Number.isFinite(r)&&r>=l&&r<=y)}function g(h){const l=h.field,y=h.classificationMethod||"equal-interval",r=h.normalizationType,
m=h.normalizationField,D=new u;D.classificationField=l;D.breakCount=h.breakCount;D.classificationMethod=y;D.standardDeviationInterval="standard-deviation"===y?h.standardDeviationInterval||1:void 0;D.normalizationType=r;D.normalizationField="field"===r?m:void 0;return D}function q(h,l){const {field:y,classificationMethod:r,standardDeviationInterval:m,normalizationType:D,normalizationField:O,normalizationTotal:T,minValue:Q,maxValue:N}=l,P=l.numBins||10;let w=l=null,E=null;r&&"equal-interval"!==r||D?
({classBreaks:h}=x(h,{field:y,normalizationType:D,normalizationField:O,normalizationTotal:T,classificationMethod:r,standardDeviationInterval:m,minValue:Q,maxValue:N,numClasses:P}),l=h[0].minValue,w=h[h.length-1].maxValue,E=h.map(J=>[J.minValue,J.maxValue])):(null!=Q&&null!=N?(l=Q,w=N):(h=f({values:h,minValue:Q,maxValue:N,useSampleStdDev:!D,supportsNullCount:G({normalizationType:D,normalizationField:O,minValue:Q,maxValue:N})}),l=h.min,w=h.max),E=t(l,w,P));return{min:l,max:w,intervals:E}}function v(h,
l){let y=-1;for(let r=h.length-1;0<=r;r--)if(l>=h[r][0]){y=r;break}return y}function t(h,l,y){const r=(l-h)/y,m=[];let D;for(let O=1;O<=y;O++)D=h+r,D=Number(D.toFixed(16)),m.push([h,O===y?l:D]),h=D;return m}const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,z=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),e="min max avg stddev count sum variance nullcount median".split(" ");d.calculateClassBreaks=x;d.calculateHistogram=function(h,l){const {min:y,
max:r,intervals:m}=q(h,l),D=m.map((O,T)=>({minValue:m[T][0],maxValue:m[T][1],count:0}));for(const O of h)null!=O&&O>=y&&O<=r&&(h=v(m,O),-1<h&&D[h].count++);return{bins:D,minValue:y,maxValue:r,normalizationTotal:l.normalizationTotal}};d.calculatePercentile=F;d.calculateStatistics=f;d.calculateStringStatistics=function(h){const l=h.returnDistinct?[...new Set(h.values)]:h.values,y=l.filter(m=>null!=m).length,r={count:y};h.supportsNullCount&&(r.nullcount=l.length-y);h.percentileParams&&(r.median=F(l,
h.percentileParams));return r};d.calculateUniqueValuesCount=function(h){const l={};for(let y of h){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==l[y]?l[y]={count:1,data:y}:l[y].count++}return{count:l}};d.createClassBreaksDefinition=g;d.createUVResult=function(h,l,y){const r=h.count;h=[];y&&l&&"coded-value"===l.type&&l.codedValues.forEach(m=>{m=m.code;r.hasOwnProperty(m)||(r[m]={data:m,count:0})});for(const m in r)l=r[m],h.push({value:l.data,count:l.count,label:l.label});return{uniqueValueInfos:h}};
d.getAttributeComparator=A;d.getEqualIntervalBins=t;d.getNormalizedValue=function(h,l,y,r){let m=null;switch(l){case "log":0!==h&&(m=Math.log(h)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(r)&&0!==r&&(m=h/r*100);break;case "field":Number.isFinite(y)&&0!==y&&(m=h/y);break;case "natural-log":0<h&&(m=Math.log(h));break;case "square-root":0<h&&(m=h**.5)}return m};d.isNullCountSupported=G;d.processSummaryStatisticsResult=function(h,l){let y;for(y in h)e.includes(y)&&(Number.isFinite(h[y])||
(h[y]=null));if(!l)return h;["avg","stddev","variance"].forEach(r=>{null!=h[r]&&(h[r]=Math.ceil(h[r]))});return h};d.resolveCBResult=function(h,l){let y=h.classBreaks;const r=y[0].minValue,m=y[y.length-1].maxValue,D="standard-deviation"===l;y=y.map(O=>{const T=O.label;O={minValue:O.minValue,maxValue:O.maxValue,label:T};if(D&&T){const Q=T.match(n).map(N=>+N.trim());2===Q.length?(O.minStdDev=Q[0],O.maxStdDev=Q[1],0>Q[0]&&0<Q[1]&&(O.hasAvg=!0)):1===Q.length&&(T.includes("\x3c")?(O.minStdDev=null,O.maxStdDev=
Q[0]):T.includes("\x3e")&&(O.minStdDev=Q[0],O.maxStdDev=null))}return O});return{minValue:r,maxValue:m,classBreakInfos:y,normalizationTotal:h.normalizationTotal}};d.statisticTypes=e;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(d,u,c,G,f,F,A,L,K){f=new c.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});c=new c.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});K=function(C){function x(){var k=C.apply(this,arguments)||this;k.breakCount=null;k.classificationField=
null;k.classificationMethod=null;k.normalizationField=null;k.normalizationType=null;k.type="class-breaks-definition";return k}d._inheritsLoose(x,C);d._createClass(x,[{key:"standardDeviationInterval",set:function(k){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",k)}},{key:"definedInterval",set:function(k){"defined-interval"===this.classificationMethod&&this._set("definedInterval",k)}}]);return x}(K);u.__decorate([G.property({json:{write:!0}})],K.prototype,"breakCount",
void 0);u.__decorate([G.property({json:{write:!0}})],K.prototype,"classificationField",void 0);u.__decorate([G.property({type:String,json:{read:f.read,write:f.write}})],K.prototype,"classificationMethod",void 0);u.__decorate([G.property({json:{write:!0}})],K.prototype,"normalizationField",void 0);u.__decorate([G.property({json:{read:c.read,write:c.write}})],K.prototype,"normalizationType",void 0);u.__decorate([G.property({value:null,json:{write:!0}})],K.prototype,"standardDeviationInterval",null);
u.__decorate([G.property({value:null,json:{write:!0}})],K.prototype,"definedInterval",null);u.__decorate([G.property()],K.prototype,"type",void 0);return K=u.__decorate([L.subclass("esri.rest.support.ClassBreaksDefinition")],K)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){c=new c.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});G=function(k){function g(){var q=k.apply(this,arguments)||this;q.baseSymbol=null;q.colorRamp=null;q.type=null;return q}d._inheritsLoose(g,k);return g}(G.JSONSupport);u.__decorate([f.property({type:x,json:{write:!0}})],G.prototype,"baseSymbol",void 0);u.__decorate([f.property({types:C.types,json:{read:{reader:C.fromJSON},write:!0}})],G.prototype,"colorRamp",void 0);u.__decorate([f.property({json:{read:c.read,
write:c.write}})],G.prototype,"type",void 0);return G=u.__decorate([K.subclass("esri.rest.support.ClassificationDefinition")],G)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(d){function u(x){const {classificationMethod:k,breakCount:g,normalizationType:q,definedInterval:v}=x.definition,t=[];var n=x.values;if(0===n.length)return[];n=n.sort((r,m)=>r-m);var z=n[0],e=n[n.length-1];if("equal-interval"===k)if(n.length>=g){n=(e-z)/g;x=z;for(var h=1;h<g;h++){var l=Number((z+
h*n).toFixed(6));t.push({minValue:x,maxValue:l,label:c(x,l,q)});x=l}t.push({minValue:x,maxValue:e,label:c(x,e,q)})}else n.forEach(r=>{t.push({minValue:r,maxValue:r,label:c(r,r,q)})});else if("natural-breaks"===k){n=G(n);x=f(n.uniqueValues,x.valueFrequency||n.valueFrequency,g);for(h=1;h<g;h++)n.uniqueValues.length>h&&(l=Number(n.uniqueValues[x[h]].toFixed(6)),t.push({minValue:z,maxValue:l,label:c(z,l,q)}),z=l);t.push({minValue:z,maxValue:e,label:c(z,e,q)})}else if("quantile"===k)if(n.length>=g&&z!==
e){x=Math.ceil(n.length/g);h=0;for(l=1;l<g;l++){var y=x+h-1;y>n.length&&(y=n.length-1);0>y&&(y=0);t.push({minValue:z,maxValue:n[y],label:c(z,n[y],q)});z=n[y];h+=x;x=Math.ceil((n.length-h)/(g-l))}t.push({minValue:z,maxValue:e,label:c(z,e,q)})}else for(e=-1,z=0;z<n.length;z++)x=n[z],x!==e&&(e=x,t.push({minValue:e,maxValue:x,label:c(e,x,q)}),e=x);else if("standard-deviation"===k)if(x=L(n),h=K(n,x),0===h)t.push({minValue:n[0],maxValue:n[0],label:c(n[0],n[0],q)});else{n=A(z,e,g,x,h)*h;h=0;for(l=g;1<=l;l--)y=
Number((x-(l-.5)*n).toFixed(6)),t.push({minValue:z,maxValue:y,label:c(z,y,q)}),z=y,h++;l=Number((x+.5*n).toFixed(6));t.push({minValue:z,maxValue:l,label:c(z,l,q)});z=l;h++;for(y=1;y<=g;y++)l=h===2*g?e:Number((x+(y+.5)*n).toFixed(6)),t.push({minValue:z,maxValue:l,label:c(z,l,q)}),z=l,h++}else if("defined-interval"===k){if(!v)return t;e=n[0];n=n[n.length-1];z=Math.ceil((n-e)/v);x=e;for(h=1;h<z;h++)l=Number((e+h*v).toFixed(6)),t.push({minValue:x,maxValue:l,label:c(x,l,q)}),x=l;t.push({minValue:x,maxValue:n,
label:c(x,n,q)})}return t}function c(x,k,g){let q=null;return q=x===k?g&&"percent-of-total"===g?x+"%":x.toString():g&&"percent-of-total"===g?x+"% - "+k+"%":x+" - "+k}function G(x){const k=[],g=[];let q=Number.MIN_VALUE,v=1,t=-1;for(let n=0;n<x.length;n++){const z=x[n];z===q?(v++,g[t]=v):null!==z&&(k.push(z),q=z,v=1,g.push(v),t++)}return{uniqueValues:k,valueFrequency:g}}function f(x,k,g){var q=x.length;const v=[];g>q&&(g=q);for(var t=0;t<g;t++)v.push(Math.round(t*q/g-1));v.push(q-1);t=F(v,x,k,g);{q=
t.mean;t=t.sdcm;var n=g,z=0,e=0;let l=0,y=0,r=!0;for(let m=0;2>m&&r;m++){0===m&&(r=!1);for(var h=0;h<n-1;h++)for(;v[h+1]+1!==v[h+2];)if(v[h+1]+=1,z=C(h,v,x,k),l=z.sbMean,z=z.sbSdcm,e=C(h+1,v,x,k),y=e.sbMean,e=e.sbSdcm,z+e<t[h]+t[h+1])t[h]=z,t[h+1]=e,q[h]=l,q[h+1]=y,r=!0;else{--v[h+1];break}for(h=n-1;0<h;h--)for(;v[h]!==v[h-1]+1;)if(--v[h],z=C(h-1,v,x,k),l=z.sbMean,z=z.sbSdcm,e=C(h,v,x,k),y=e.sbMean,e=e.sbSdcm,z+e<t[h-1]+t[h])t[h-1]=z,t[h]=e,q[h-1]=l,q[h]=y,r=!0;else{v[h]+=1;break}}q=r}q&&(t=F(v,x,
k,g));return v}function F(x,k,g,q){let v=[];var t=[],n=[];let z=0;const e=[],h=[];for(var l=0;l<q;l++){var y=C(l,x,k,g);e.push(y.sbMean);h.push(y.sbSdcm);z+=h[l]}y=z;for(l=!0;l||z<y;){l=!1;v=[];for(t=0;t<q;t++)v.push(x[t]);for(n=0;n<q;n++)for(y=x[n]+1;y<=x[n+1];y++)if(t=k[y],0<n&&y!==x[n+1]&&Math.abs(t-e[n])>Math.abs(t-e[n-1]))x[n]=y;else if(n<q-1&&x[n]!==y-1&&Math.abs(t-e[n])>Math.abs(t-e[n+1])){x[n+1]=y-1;break}y=z;z=0;t=[];n=[];for(let r=0;r<q;r++){t.push(e[r]);n.push(h[r]);const m=C(r,x,k,g);
e[r]=m.sbMean;h[r]=m.sbSdcm;z+=h[r]}}if(z>y){for(k=0;k<q;k++)x[k]=v[k],e[k]=t[k],h[k]=n[k];z=y}return{mean:e,sdcm:h}}function A(x,k,g,q,v){x=Math.max(q-x,k-q)/v/g;return 1<=x?1:.5<=x?.5:.25}function L(x){let k=0;for(let g=0;g<x.length;g++)k+=x[g];return k/=x.length}function K(x,k){let g=0;for(let q=0;q<x.length;q++){const v=x[q];g+=(v-k)*(v-k)}g/=x.length;return Math.sqrt(g)}function C(x,k,g,q){var v=0,t=0;for(var n=k[x]+1;n<=k[x+1];n++){const z=q[n];v+=g[n]*z;t+=z}0>=t&&console.log("Exception in Natural Breaks calculation");
v/=t;t=0;for(n=k[x]+1;n<=k[x+1];n++)t+=q[n]*(g[n]-v)**2;return{sbMean:v,sbSdcm:t}}d.createGenerateRendererClassBreaks=function(x){const {normalizationTotal:k}=x;return{classBreaks:u(x),normalizationTotal:k}};d.createGenerateRendererUniqueValues=function(x){x=G(x);const k=[],g=x.uniqueValues.length;for(let q=0;q<g;q++){const v=x.uniqueValues[q];k.push({value:v,count:x.valueFrequency[q],label:v.toString()})}return{uniqueValues:k}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(d,u,c,G,f,F,A){function L(t,n){if(!n)return null;if("x"in n){var z={x:0,y:0};[z.x,z.y]=t(n.x,n.y,k);null!=n.z&&(z.z=n.z);null!=n.m&&(z.m=n.m);return z}if("xmin"in n)return z={xmin:0,ymin:0,
xmax:0,ymax:0},[z.xmin,z.ymin]=t(n.xmin,n.ymin,k),[z.xmax,z.ymax]=t(n.xmax,n.ymax,k),n.hasZ&&(z.zmin=n.zmin,z.zmax=n.zmax,z.hasZ=!0),n.hasM&&(z.mmin=n.mmin,z.mmax=n.mmax,z.hasM=!0),z;if("rings"in n)return{rings:K(n.rings,t),hasM:n.hasM,hasZ:n.hasZ};if("paths"in n)return{paths:K(n.paths,t),hasM:n.hasM,hasZ:n.hasZ};if("points"in n)return{points:C(n.points,t),hasM:n.hasM,hasZ:n.hasZ}}function K(t,n){const z=[];for(const e of t)z.push(C(e,n));return z}function C(t,n){const z=[];for(const e of t)t=n(e[0],
e[1],[0,0]),z.push(t),2<e.length&&t.push(e[2]),3<e.length&&t.push(e[3]);return z}function x(){x=u._asyncToGenerator(function*(t,n){n&&(t=Array.isArray(t)?t.map(z=>c.isSome(z.geometry)&&z.geometry.spatialReference):[t],yield G.initializeProjection(t.map(z=>({source:z,dest:n}))))});return x.apply(this,arguments)}const k=[0,0],g=L.bind(null,A.lngLatToXY),q=L.bind(null,A.xyToLngLat),v=new (function(){function t(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var n=t.prototype;
n.push=function(){var z=u._asyncToGenerator(function*(e,h,l){if(!(e&&e.length&&h&&l)||F.equals(h,l))return e;const y={geometries:e,inSpatialReference:h,outSpatialReference:l,resolve:null};this._jobs.push(y);return new Promise(r=>{y.resolve=r;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(e,h,l){return z.apply(this,arguments)}}();n._process=function(){this._timer=null;const z=this._jobs.shift();if(z){var {geometries:e,inSpatialReference:h,outSpatialReference:l,resolve:y}=
z;A.canProject(h,l)?F.isWebMercator(l)?y(e.map(g)):y(e.map(q)):y(G.projectMany(f.jsonAdapter,e,h,l,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return t}());d.checkProjectionSupport=function(t,n){return x.apply(this,arguments)};d.project=function(t,n,z,e){if(!t)return t;z||(z=n,n=t.spatialReference);return F.isValid(n)&&F.isValid(z)&&!F.equals(n,z)?A.canProject(n,z)?(t=F.isWebMercator(z)?g(t):q(t),t.spatialReference=z,t):G.projectMany(f.jsonAdapter,[t],n,z,null,e)[0]:
t};d.projectMany=function(t,n,z){return v.push(t,n,z)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(d){let u=function(A,L,K){this.x=A;this.y=L;this.spatialReference=K;this.m=this.z=void 0},c=function(A,L,K,C){this.rings=A;this.spatialReference=L;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);C&&(this.hasM=C)},G=function(A,L,K,C){this.paths=A;this.spatialReference=L;this.hasM=this.hasZ=
void 0;K&&(this.hasZ=K);C&&(this.hasM=C)},f=function(A,L,K,C){this.points=A;this.spatialReference=L;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);C&&(this.hasM=C)},F=function(A,L,K,C,x){this.xmin=A;this.ymin=L;this.xmax=K;this.ymax=C;this.spatialReference=x;this.mmax=this.mmin=this.zmax=this.zmin=void 0};d.jsonAdapter={convertToGEGeometry:function(A,L){return null==L?null:A.convertJSONToGeometry(L)},exportPoint:function(A,L,K){K=new u(A.getPointX(L),A.getPointY(L),K);const C=A.hasZ(L),x=A.hasM(L);C&&
(K.z=A.getPointZ(L));x&&(K.m=A.getPointM(L));return K},exportPolygon:function(A,L,K){return new c(A.exportPaths(L),K,A.hasZ(L),A.hasM(L))},exportPolyline:function(A,L,K){return new G(A.exportPaths(L),K,A.hasZ(L),A.hasM(L))},exportMultipoint:function(A,L,K){return new f(A.exportPoints(L),K,A.hasZ(L),A.hasM(L))},exportExtent:function(A,L,K){var C=A.hasZ(L);const x=A.hasM(L);K=new F(A.getXMin(L),A.getYMin(L),A.getXMax(L),A.getYMax(L),K);C&&(C=A.getZExtent(L),K.zmin=C.vmin,K.zmax=C.vmax);x&&(A=A.getMExtent(L),
K.mmin=A.vmin,K.mmax=A.vmax);return K}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q){function v(P,w,E,J=P.hasZ,X=P.hasM){if(f.isNone(w))return null;const W=P.hasZ&&J,p=P.hasM&&X;return E?(P=k.quantizeOptimizedGeometry(T,w,P.hasZ,P.hasM,"esriGeometryPoint",E,J,X),k.convertToPoint(P,W,p)):k.convertToPoint(w,W,p)}function t(){t=c._asyncToGenerator(function*(P,w,E){const {outFields:J,orderByFields:X,groupByFieldsForStatistics:W,outStatistics:p}=P;if(J)for(var H=0;H<J.length;H++)J[H]=J[H].trim();if(X)for(H=0;H<X.length;H++)X[H]=X[H].trim();if(W)for(H=
0;H<W.length;H++)W[H]=W[H].trim();if(p)for(H=0;H<p.length;H++)p[H].onStatisticField&&(p[H].onStatisticField=p[H].onStatisticField.trim());P.geometry&&!P.outSR&&(P.outSR=P.geometry.spatialReference);return n(P,w,E)});return t.apply(this,arguments)}function n(P,w,E){return z.apply(this,arguments)}function z(){z=c._asyncToGenerator(function*(P,w,E){if(!P)return null;var {where:J}=P;P.where=J=J&&J.trim();if(!J||/^1 *= *1$/.test(J)||w&&w===J)P.where=null;if(!P.geometry)return P;w=yield e(P);P.distance=
0;P.units=null;"esriSpatialRelEnvelopeIntersects"===P.spatialRel&&({spatialReference:J}=P.geometry,w=A.getGeometryExtent(w),w.spatialReference=J);P.geometry=w;yield q.checkProjectionSupport(w.spatialReference,E);w=(yield K.normalizeCentralMeridian(L.fromJSON(w)))[0];if(f.isNone(w))throw m;w=w.toJSON();w=yield q.project(w,w.spatialReference,E);if(!w)throw m;w.spatialReference=E;P.geometry=w;return P});return z.apply(this,arguments)}function e(P){return h.apply(this,arguments)}function h(){h=c._asyncToGenerator(function*(P){const {geometry:w,
distance:E,units:J}=P;if(null==E||"vertexAttributes"in w)return w;var X=w.spatialReference;P=J?r.fromJSON(J):F.getUnitString(X);X=X&&(C.isGeographic(X)||C.isWebMercator(X))?w:yield q.checkProjectionSupport(X,C.WGS84).then(()=>q.project(w,C.WGS84));return(yield l())(X.spatialReference,X,E,P)});return h.apply(this,arguments)}function l(){return y.apply(this,arguments)}function y(){y=c._asyncToGenerator(function*(){return(yield new Promise((P,w)=>d(["../../../geometry/geometryEngineJSON"],P,w))).geodesicBuffer});
return y.apply(this,arguments)}const r=new G.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),m=Object.freeze({}),D=new g,O=new g,T=new g,Q={esriGeometryPoint:k.convertToPoint,esriGeometryPolyline:k.convertToPolyline,esriGeometryPolygon:k.convertToPolygon,esriGeometryMultipoint:k.convertToMultipoint},N=(P,w)=>"_geVersion"!==P?w:void 0;u.QUERY_ENGINE_EMPTY_RESULT=
m;u.cleanFromGeometryEngine=function(P){return P&&"_geVersion"in P?JSON.parse(JSON.stringify(P,N)):P};u.getCentroid=function(P,w,E){if("esriGeometryPolygon"!==P.geometryType||!w||!w.centroid&&!w.geometry)return null;w.centroid||(w.centroid=x.getCentroidOptimizedGeometry(new g,w.geometry,P.hasZ,P.hasM));return v(P,w.centroid,E)};u.getGeometry=function(P,w,E,J,X,W,p=w,H=E){const I=w&&p,U=E&&H;J=f.isSome(J)?"coords"in J?J:J.geometry:null;if(f.isNone(J))return null;if(X)return w=k.generalizeOptimizedGeometry(O,
J,w,E,P,X,p,H),W&&(w=k.quantizeOptimizedGeometry(T,w,I,U,P,W)),Q[P](w,I,U);if(W)return W=k.quantizeOptimizedGeometry(T,J,w,E,P,W,p,H),Q[P](W,I,U);k.removeZMValues(D,J,w,E,p,H);return Q[P](D,I,U)};u.normalizeQuery=function(P,w,E){return t.apply(this,arguments)};u.normalizeQueryLike=n;u.transformCentroid=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(d,u){function c(f,
F,A,L,K,C,x=1){C=K?C?4:3:C?3:2;let k=A,g=A+C,q=0,v=0,t=A=0,n=0;for(let z=0,e=L-1;z<e;z++,k+=C,g+=C){L=F[k];const h=F[k+1],l=F[k+2],y=F[g],r=F[g+1],m=F[g+2];let D=L*r-y*h;t+=D;q+=(L+y)*D;v+=(h+r)*D;K&&(D=L*m-y*l,A+=(l+m)*D,n+=D);L<f[0]&&(f[0]=L);L>f[1]&&(f[1]=L);h<f[2]&&(f[2]=h);h>f[3]&&(f[3]=h);K&&(l<f[4]&&(f[4]=l),l>f[5]&&(f[5]=l))}0<t*x&&(t*=-1);0<n*x&&(n*=-1);if(!t)return null;f=[q,v,.5*t];K&&(f[3]=A,f[4]=.5*n);return f}function G(f,F,A,L,K){K=L?K?4:3:K?3:2;let C=F,x=F+K,k=0,g=0,q=0,v=0;for(let e=
0,h=A-1;e<h;e++,C+=K,x+=K){var t=f[C];const l=f[C+1],y=f[C+2],r=f[x],m=f[x+1],D=f[x+2];if(L){{var n=r-t;var z=m-l;const O=D-y;n=Math.sqrt(n*n+z*z+O*O)}}else n=r-t,z=m-l,n=Math.sqrt(n*n+z*z);n&&(k+=n,L?(t=[t+.5*(r-t),l+.5*(m-l),y+.5*(D-y)],g+=n*t[0],q+=n*t[1],v+=n*t[2]):(t=[t+.5*(r-t),l+.5*(m-l)],g+=n*t[0],q+=n*t[1]))}return 0<k?L?[g/k,q/k,v/k]:[g/k,q/k]:0<A?L?[f[F],f[F+1],f[F+2]]:[f[F],f[F+1]]:null}d.getCentroidOptimizedGeometry=function(f,F,A,L,K){if(u.isNone(F)||!F.lengths.length)return null;const C=
"upperLeft"===(null==K?void 0:K.originPosition)?-1:1;f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);K=f.coords;const x=[],k=A?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:g,coords:q}=F,v=A?L?4:3:L?3:2;let t=0;for(var n of g){const z=c(k,q,t,n,A,L,C);z&&x.push(z);
t+=n*v}x.sort((z,e)=>{let h=C*z[2]-C*e[2];0===h&&A&&(h=z[4]-e[4]);return h});x.length&&(n=6*x[0][2],K[0]=x[0][0]/n,K[1]=x[0][1]/n,A&&(n=6*x[0][4],K[2]=0!==n?x[0][3]/n:0),K[0]<k[0]||K[0]>k[1]||K[1]<k[2]||K[1]>k[3]||A&&(K[2]<k[4]||K[2]>k[5]))&&(K.length=0);if(!K.length)if(F=F.lengths[0]?G(q,0,g[0],A,L):null)K[0]=F[0],K[1]=F[1],A&&2<F.length&&(K[2]=F[2]);else return null;return f};d.lineCentroid=G;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),
function(d,u,c,G,f,F,A){let L=function(v){this.coordinateHelper=v},K=function(v){function t(z,e){z=v.call(this,z)||this;z.point=e;return z}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?F.objectEqual(this.point,z.point):!1};n.check=function(z){return c.squaredDistance(z,this.point)<f.defaults.pointThreshold};n.closestTo=function(){return this.coordinateHelper.clone(this.point)};n.intersect=function(z){const e=[];z instanceof C?e.push(...A.intersectLineAndPoint({start:z.start,
end:z.end,type:z instanceof k?A.LineType.LINE:A.LineType.RAY},this.point)):z instanceof q&&e.push(...A.intersectCircleAndPoint(z.center,z.radius,this.point));return e.map(h=>new g(this.coordinateHelper,h,this,z))};return t}(L),C=function(v){function t(z,e,h){z=v.call(this,z)||this;z.start=e;z.end=h;return z}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?F.objectEqual(this.start,z.start)&&F.objectEqual(this.end,z.end):!1};n.intersect=function(z){const e=[];
z instanceof K?e.push(...A.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof k?A.LineType.LINE:A.LineType.RAY},z.point)):z instanceof t?e.push(...A.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof k?A.LineType.LINE:A.LineType.RAY},{start:z.start,end:z.end,type:z instanceof k?A.LineType.LINE:A.LineType.RAY})):z instanceof q&&e.push(...A.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof k?A.LineType.LINE:A.LineType.RAY},z.center,
z.radius));return e.map(h=>new g(this.coordinateHelper,h,this,z))};return t}(L),x=function(v){function t(z,e,h){z=v.call(this,z,e,h)||this;z.dir=G.create();z.p=G.create();return z}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?v.prototype.objectEqual.call(this,z):!1};n.check=function(z){c.subtract(this.dir,this.end,this.start);c.subtract(this.p,z,this.start);return 0<=c.dot(this.dir,this.p)?A.pointToLineDistance(z,this.start,this.end)<f.defaults.pointOnLineThreshold:
!1};n.closestTo=function(z){const e=this.coordinateHelper.clone(z);A.projectPointToRay(e,z,this.start,this.end);return e};return t}(C),k=function(v){function t(z,e,h){return v.call(this,z,e,h)||this}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?v.prototype.objectEqual.call(this,z):!1};n.check=function(z){return A.pointToLineDistance(z,this.start,this.end)<f.defaults.pointOnLineThreshold};n.closestTo=function(z){const e=this.coordinateHelper.clone(z);A.projectPointToLine(e,
z,this.start,this.end);return e};return t}(C),g=function(v){function t(z,e,h,l){z=v.call(this,z)||this;z.intersection=e;z.first=h;z.second=l;return z}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?this.first.objectEqual(z.first)&&this.second.objectEqual(z.second):!1};n.check=function(){return!1};n.closestTo=function(z){z=this.coordinateHelper.clone(z);c.copy(z,this.intersection);return z};n.intersect=function(){return[]};return t}(L),q=function(v){function t(z,
e,h){z=v.call(this,z)||this;z.center=e;z.radius=h;return z}u._inheritsLoose(t,v);var n=t.prototype;n.objectEqual=function(z){return z instanceof t?this.center[0]===z.center[0]&&this.center[1]===z.center[1]&&this.radius===z.radius:!1};n.check=function(){return!1};n.closestTo=function(z){const e=this.coordinateHelper.clone(z);A.projectPointToCircle(e,z,this.center,this.radius);return e};n.intersect=function(z){const e=[];z instanceof C?e.push(...A.intersectLineLikeAndCircle({start:z.start,end:z.end,
type:z instanceof k?A.LineType.LINE:A.LineType.RAY},this.center,this.radius)):z instanceof K&&e.push(...A.intersectCircleAndPoint(this.center,this.radius,z.point));return e.map(h=>new g(this.coordinateHelper,h,this,z))};return t}(L);d.IntersectionConstraint=g;d.LineConstraint=k;d.LineLikeConstraint=C;d.PlanarCircleConstraint=q;d.PointConstraint=K;d.RayConstraint=x;d.SnappingConstraint=L;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2f64":function(){define(["exports"],
function(d){function u(){return[0,0]}function c(t){return[t[0],t[1]]}function G(t,n){return[t,n]}function f(t){const n=[0,0],z=Math.min(2,t.length);for(let e=0;e<z;++e)n[e]=t[e];return n}function F(t,n){return new Float64Array(t,n,2)}function A(){return[0,0]}function L(){return[1,1]}function K(){return[1,0]}function C(){return[0,1]}const x=[0,0],k=[1,1],g=[1,0],q=[0,1],v=Object.freeze(Object.defineProperty({__proto__:null,create:u,clone:c,fromValues:G,fromArray:f,createView:F,zeros:A,ones:L,unitX:K,
unitY:C,ZEROS:x,ONES:k,UNIT_X:g,UNIT_Y:q},Symbol.toStringTag,{value:"Module"}));d.ONES=k;d.UNIT_X=g;d.UNIT_Y=q;d.ZEROS=x;d.clone=c;d.create=u;d.createView=F;d.fromArray=f;d.fromValues=G;d.ones=L;d.unitX=K;d.unitY=C;d.vec2f64=v;d.zeros=A})},"esri/views/interactive/snapping/snappingUtils":function(){define(["exports","../../../chunks/vec2"],function(d,u){d.LineSegmentHintType=void 0;(function(c){c[c.TARGET=0]="TARGET";c[c.REFERENCE=1]="REFERENCE";c[c.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(d.LineSegmentHintType||
(d.LineSegmentHintType={}));d.objectEqual=function(c,G){const f=c.length===G.length&&c[0]===G[0]&&c[1]===G[1];switch(c.length){case 2:return f;case 3:return f&&c[2]===G[2];case 4:return f&&c[3]===G[3]}return!1};d.sortCandidatesInPlace=function(c,G){G.sort((f,F)=>{f=u.squaredDistance(f.targetPoint,c);F=u.squaredDistance(F.targetPoint,c);return f-F})};d.squareDistance=function(c,G){const f=c.x-G.x;c=c.y-G.y;return f*f+c*c};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(d,u,c,G){function f(g,q){return g[0]*q[1]-g[1]*q[0]}function F(g,q,v){q=c.dot(v,q)/c.squaredLength(v);return c.scale(g,v,q)}function A(g,q,v,t,n=v){c.subtract(K,t,v);c.subtract(x,q,n);F(k,x,K);return c.add(g,n,k)}function L(g,q,v,t){c.subtract(K,q,v);q=t/c.length(K);return c.scaleAndAdd(g,v,K,q)}d.LineType=void 0;(function(g){g[g.RAY=0]="RAY";g[g.LINE=1]="LINE"})(d.LineType||
(d.LineType={}));const K=G.create(),C=G.create(),x=G.create(),k=G.create();d.cross=f;d.intersectCircleAndPoint=function(g,q,v){L(x,v,g,q);return u.floatEqualAbsolute(x[0],v[0])&&u.floatEqualAbsolute(x[1],v[1])?[G.clone(v)]:[]};d.intersectLineAndPoint=function(g,q){A(x,q,g.start,g.end);return u.floatEqualAbsolute(x[0],q[0])&&u.floatEqualAbsolute(x[1],q[1])?[G.clone(q)]:[]};d.intersectLineAndRay=function(g,q){const v=g.start;var t=q.start,n=q.end;const z=c.subtract(K,g.end,v);var e=c.subtract(C,n,t);
n=f(z,e);if(1E-6>=Math.abs(n))return[];t=c.subtract(x,v,t);e=f(e,t)/n;n=f(z,t)/n;if(0<=e){if(0<=n||q.type===d.LineType.LINE)return[c.scaleAndAdd(k,v,z,e)]}else if(g.type===d.LineType.LINE&&(0<=n||q.type===d.LineType.LINE))return[c.scaleAndAdd(k,v,z,e)];return[]};d.intersectLineLikeAndCircle=function(g,q,v){const t=[],n=c.subtract(K,g.end,g.start);var z=c.subtract(C,g.start,q);q=c.squaredLength(n);const e=2*c.dot(n,z);v=c.squaredLength(z)-v*v;v=e*e-4*q*v;0===v?(q=-e/(2*q),(g.type===d.LineType.LINE||
0<=q)&&t.push(c.scaleAndAdd(k,g.start,n,q))):0<v&&(v=Math.sqrt(v),z=(-e+v)/(2*q),(g.type===d.LineType.LINE||0<=z)&&t.push(c.scaleAndAdd(k,g.start,n,z)),q=(-e-v)/(2*q),(g.type===d.LineType.LINE||0<=q)&&t.push(c.scaleAndAdd(x,g.start,n,q)));return t};d.pointToLineDistance=function(g,q,v){return Math.abs((q[0]-g[0])*(v[1]-g[1])-(q[1]-g[1])*(v[0]-g[0]))/c.distance(q,v)};d.projectPoint=F;d.projectPointToCircle=L;d.projectPointToLine=A;d.projectPointToRay=function(g,q,v,t){c.subtract(K,t,v);c.subtract(x,
q,v);q=c.dot(K,x)/c.squaredLength(K);return 0<q?c.scaleAndAdd(g,v,K,q):c.copy(g,v)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),function(d,u,c,G,f,F){f=function(A){function L(K){return A.call(this,{...K,constraint:new c.LineConstraint(K.coordinateHelper,
K.edgeStart,K.edgeEnd)})||this}u._inheritsLoose(L,A);u._createClass(L,[{key:"hints",get:function(){return[new F.LineSnappingHint(G.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo)]}}]);return L}(f.FeatureSnappingCandidate);d.EdgeSnappingCandidate=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"./SnappingCandidate"],function(d,u,c){c=function(G){function f({coordinateHelper:F,targetPoint:A,objectId:L,constraint:K,elevationInfo:C}){F=G.call(this,F,A,K,C)||this;F.objectId=L;return F}u._inheritsLoose(f,G);return f}(c.SnappingCandidate);d.FeatureSnappingCandidate=c;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(d){d.SnappingCandidate=function(u,
c,G,f){this.coordinateHelper=u;this.targetPoint=c;this.constraint=G;this.elevationInfo=f};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,u,c,G,f,F){G.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");c=function(A){function L(K,
C,x,k,g=!0,q=!0){k=A.call(this,k)||this;k.type=K;k.lineStart=C;k.lineEnd=x;k.fadeLeft=g;k.fadeRight=q;return k}u._inheritsLoose(L,A);L.prototype.equals=function(K){return K instanceof L?this.type===K.type&&f.objectEqual(this.lineStart,K.lineStart)&&f.objectEqual(this.lineEnd,K.lineEnd)&&this.fadeLeft===K.fadeLeft&&this.fadeRight===K.fadeRight:!1};return L}(F.SnappingHint);d.LineSnappingHint=c;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],
function(d){d.SnappingHint=function(u){this.elevationInfo=u};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),function(d,u,c,G,f,F){G=function(A){function L({coordinateHelper:K,targetPoint:C,constraint:x,previousVertex:k,
otherVertex:g,otherVertexType:q,objectId:v,elevationInfo:t}){K=A.call(this,K,C,x,t)||this;K.previousVertex=k;K.otherVertex=g;K.otherVertexType=q;K.objectId=v;return K}u._inheritsLoose(L,A);u._createClass(L,[{key:"hints",get:function(){const K=this.previousVertex,C=this.otherVertexType===d.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,x=this.otherVertexType===d.OtherVertexType.CENTER?this.targetPoint:this.otherVertex,k=this.elevationInfo;return[new f.LineSnappingHint(c.LineSegmentHintType.TARGET,
C,x,k),new f.LineSnappingHint(c.LineSegmentHintType.REFERENCE,K,C,k),new F.RightAngleSnappingHint(this.previousVertex,C,x,k)]}}]);return L}(G.SnappingCandidate);d.OtherVertexType=void 0;(function(A){A[A.NEXT=0]="NEXT";A[A.CENTER=1]="CENTER"})(d.OtherVertexType||(d.OtherVertexType={}));d.RightAngleSnappingCandidate=G;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(d,u,c,G,f,F){G.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");c=function(A){function L(K,C,x,k){k=A.call(this,k)||this;k.previousVertex=K;k.centerVertex=C;k.nextVertex=x;return k}u._inheritsLoose(L,A);L.prototype.equals=function(K){return K instanceof L?f.objectEqual(this.previousVertex,K.previousVertex)&&f.objectEqual(this.centerVertex,K.centerVertex)&&f.objectEqual(this.nextVertex,K.nextVertex):!1};return L}(F.SnappingHint);d.RightAngleSnappingHint=c;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(d,u,c,G,f,F,A){function L(t,n,z){({camera:z}=z.state);z.projectToScreen(t,q);z.projectToScreen(n,v);return c.squaredDistance(q,v)}function K(t,n,z,e,h=f.create()){t=n.toXYZ(t);t[2]=A.getConvertedElevationFromVector(e,
t,n.spatialReference,z)||0;e.renderCoordsHelper.toRenderCoords(t,n.spatialReference,h);return h}const C=new F,x=f.create(),k=u.createRenderScreenPointArray3(),g=u.createRenderScreenPointArray3(),q=u.createScreenPointArray(),v=u.createScreenPointArray();d.anyMapPointToRender=K;d.anyMapPointToScreenPoint=function(t,n,z,e){if("2d"===e.type)return e.toScreen(n.vectorToPoint(t,C));K(t,n,z,e,x);e.state.camera.projectToScreen(x,q);return u.createScreenPoint(q[0],q[1])};d.anyMapPointsToRenderWithEqualRelativeZ=
function(t,n,z,e,h,l,y){t=z.toXYZ(t);n=z.toXYZ(n);if("absolute-height"!==e.mode){const r=A.getConvertedElevationFromVector(h,t,z.spatialReference,e);e=A.getConvertedElevationFromVector(h,n,z.spatialReference,e);e=(null==r?e:null==e?r:Math.min(r,e))||0;t[2]=e;n[2]=e}h.renderCoordsHelper.toRenderCoords(t,z.spatialReference,l);h.renderCoordsHelper.toRenderCoords(n,z.spatialReference,y)};d.renderScreenSpaceTangent=function(t,n,z,e){z.projectToRenderScreen(t,k);z.projectToRenderScreen(n,g);c.subtract(e,
g,k);c.normalize(e,e)};d.screenDistance=function(t,n,z){return Math.sqrt(L(t,n,z))};d.screenDistanceSquared=L;d.vectorToRender=function(t,n,z,e,h=f.create()){t=G.copy(x,t);t[2]=A.getConvertedElevationFromVector(e,t,n,z)||0;e.renderCoordsHelper.toRenderCoords(t,n,h);return h};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v){d.SelfSnappingEngine=function(t){function n(e){e=t.call(this,e)||this;e.updating=!1;e._snappers=new f;return e}u._inheritsLoose(n,t);var z=n.prototype;z.initialize=function(){this._snappers.push(new k.ParallelLineSnapper(this.view,this.options),new x.LineSnapper(this.view,this.options),new g.RightAngleSnapper(this.view,this.options),new q.RightAngleTriangleSnapper(this.view,this.options))};z.fetchCandidates=function(){var e=u._asyncToGenerator(function*(h,l){if(!this.options.effectiveSelfEnabled)return[];
const y=[];for(const r of this._snappers.items)y.push(...r.snap(h,l));v.sortCandidatesInPlace(h,y);return y});return function(h,l){return e.apply(this,arguments)}}();u._createClass(n,[{key:"options",set:function(e){this._set("options",e);for(const h of this._snappers)h.options=e}}]);return n}(G);c.__decorate([F.property({readOnly:!0})],d.SelfSnappingEngine.prototype,"updating",void 0);c.__decorate([F.property({constructOnly:!0})],d.SelfSnappingEngine.prototype,"view",void 0);c.__decorate([F.property()],
d.SelfSnappingEngine.prototype,"options",null);d.SelfSnappingEngine=c.__decorate([C.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],d.SelfSnappingEngine);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,u,c,G,f,F,A,L,K){f=function(C){function x(){return C.apply(this,arguments)||this}u._inheritsLoose(x,C);var k=x.prototype;k.snapNewVertex=function(g,q){var v=q.editGeometryOperations.data.components[0],t=v.edges.length;const n=[];if(1>t)return n;const z=L.anyMapPointToScreenPoint(g,q.coordinateHelper,q.elevationInfo,this.view);t=v=v.edges[t-1];do this.edgeExceedsShortLineThreshold(t,q)&&this._processCandidateProposal(t.leftVertex.pos,t.rightVertex.pos,g,z,q,n),t=t.leftVertex.leftEdge;while(t&&
t!==v);return n};k.snapExistingVertex=function(g,q){const v=[],t=c.unwrap(q.vertexHandle);var n=t.component;if(2>n.edges.length)return v;const z=L.anyMapPointToScreenPoint(g,q.coordinateHelper,q.elevationInfo,this.view);var e=t.leftEdge;const h=t.rightEdge;e&&h&&this.edgeExceedsShortLineThreshold(e,q)&&this.edgeExceedsShortLineThreshold(h,q)&&this._processCandidateProposal(e.leftVertex.pos,h.rightVertex.pos,g,z,q,v);e=n=n.edges[0];do e!==t.leftEdge&&e!==t.rightEdge&&this.edgeExceedsShortLineThreshold(e,
q)&&this._processCandidateProposal(e.leftVertex.pos,e.rightVertex.pos,g,z,q,v),e=e.rightVertex.rightEdge;while(e&&e!==n);return v};k._processCandidateProposal=function(g,q,v,t,n,z){const e=K.projectPointToLine(G.create(),v,g,q),{coordinateHelper:h,elevationInfo:l,pointer:y}=n;v=h.fromXYZ(e,h.getZ(v,0));F.squareDistance(t,L.anyMapPointToScreenPoint(v,h,l,this.view))<this.squaredProximityTreshold(y)&&z.push(new A.LineSnappingCandidate({coordinateHelper:h,lineStart:g,lineEnd:q,targetPoint:v,elevationInfo:l}))};
return x}(f.SnappingAlgorithm);d.LineSnapper=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ./Settings ./snappingUtils ../support/viewUtils".split(" "),function(d,u,c,G,f,F){let A=function(){function L(C,x){this.view=C;this.options=x;this.squaredShortLineThreshold=G.defaults.shortLineThreshold*G.defaults.shortLineThreshold}
var K=L.prototype;K.snap=function(C,x){return c.isSome(x.vertexHandle)?"vertex"!==x.vertexHandle.type?[]:this.snapExistingVertex(C,x):this.snapNewVertex(C,x)};K.edgeExceedsShortLineThreshold=function(C,x){return this.exceedsShortLineThreshold(C.leftVertex.pos,C.rightVertex.pos,x)};K.exceedsShortLineThreshold=function(C,x,{elevationInfo:k,editGeometryOperations:g}){g=g.data.coordinateHelper;return 0===this.squaredShortLineThreshold||f.squareDistance(F.anyMapPointToScreenPoint(x,g,k,this.view),F.anyMapPointToScreenPoint(C,
g,k,this.view))>this.squaredShortLineThreshold};K.squaredProximityTreshold=function(C){return"touch"===C?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};u._createClass(L,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:C,touchSensitivityMultiplier:x}=this.options,k=C*x;return k*k}}]);return L}();d.SnappingAlgorithm=A;Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),function(d,u,c,G,f,F,A,L){A=function(x){function k({coordinateHelper:g,lineStart:q,lineEnd:v,targetPoint:t,elevationInfo:n}){g=x.call(this,g,t,new f.LineConstraint(g,q,v),
n)||this;g.referenceLineHint=new L.LineSnappingHint(F.LineSegmentHintType.REFERENCE_EXTENSION,q,v,n);return g}u._inheritsLoose(k,x);k.prototype._lineEndClosestToTarget=function(){const g=this.constraint.start,q=this.constraint.end;return 0<Math.sign(c.dot(c.subtract(C,q,g),c.subtract(K,this.targetPoint,g)))?q:g};u._createClass(k,[{key:"hints",get:function(){return[this.referenceLineHint,new L.LineSnappingHint(F.LineSegmentHintType.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo)]}}]);
return k}(A.SnappingCandidate);const K=G.create(),C=G.create();d.LineSnappingCandidate=A;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){A=function(k){function g(){var v=k.apply(this,arguments)||this;v._tmpProjection=f.create();return v}u._inheritsLoose(g,k);var q=g.prototype;q.snapNewVertex=function(v,t){var n=t.editGeometryOperations.data.components[0],z=n.edges.length,e=n.vertices.length;const h=[];if(2>z)return h;const l=C.anyMapPointToScreenPoint(v,t.coordinateHelper,t.elevationInfo,this.view);e=n.vertices[e-1];const y=n.vertices[0];z=n=n.edges[z-1];do this.edgeExceedsShortLineThreshold(z,t)&&(this._checkEdgeForParalleLines(z,
e.pos,v,l,t,h),this._checkEdgeForParalleLines(z,y.pos,v,l,t,h)),z=z.leftVertex.leftEdge;while(z&&z!==n);return h};q.snapExistingVertex=function(v,t){const n=[],z=c.unwrap(t.vertexHandle);var e=z.component;if(3>e.edges.length)return n;const h=C.anyMapPointToScreenPoint(v,t.coordinateHelper,t.elevationInfo,this.view),l=z.leftEdge,y=z.rightEdge,r=e.vertices[0],m=e.vertices[e.vertices.length-1];let D=e=e.edges[0];do D!==l&&D!==y&&this.edgeExceedsShortLineThreshold(D,t)&&(l&&this._checkEdgeForParalleLines(D,
l.leftVertex.pos,v,h,t,n),y&&this._checkEdgeForParalleLines(D,y.rightVertex.pos,v,h,t,n),z===r?this._checkEdgeForParalleLines(D,m.pos,v,h,t,n):z===m&&this._checkEdgeForParalleLines(D,r.pos,v,h,t,n)),D=D.rightVertex.rightEdge;while(D&&D!==e);return n};q._checkEdgeForParalleLines=function(v,t,n,z,e,h){const l=v.leftVertex.pos,y=v.rightVertex.pos;x.projectPointToLine(this._tmpProjection,t,l,y);if(!(G.squaredDistance(this._tmpProjection,t)<F.defaults.parallelLineThreshold)){x.projectPointToLine(this._tmpProjection,
n,l,y,t);var {coordinateHelper:r,elevationInfo:m,pointer:D}=e;n=r.fromXYZ(this._tmpProjection,r.getZ(n,0));L.squareDistance(z,C.anyMapPointToScreenPoint(n,r,m,this.view))<this.squaredProximityTreshold(D)&&!this._parallelToPreviousCandidate(v,h)&&h.push(new K.ParallelLineSnappingCandidate({coordinateHelper:r,referenceLine:v,lineStart:t,targetPoint:n,elevationInfo:m}))}};q._parallelToPreviousCandidate=function(v,t){const n=v.leftVertex.pos,z=v.rightVertex.pos;for(const e of t)if(x.projectPointToLine(this._tmpProjection,
z,e.constraint.start,e.constraint.end,n),G.squaredDistance(this._tmpProjection,z)<F.defaults.parallelLineThreshold)return e.addReferenceLine(v),!0;return!1};return g}(A.SnappingAlgorithm);d.ParallelLineSnapper=A;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(d,u,c,G,f,F,A,L){F=function(K){function C({coordinateHelper:x,referenceLine:k,lineStart:g,targetPoint:q,elevationInfo:v}){const t=x.clone(g);c.subtract(t,c.add(t,t,k.rightVertex.pos),k.leftVertex.pos);x=K.call(this,x,q,new G.LineConstraint(x,g,t),v)||this;x._referenceLines=[{edge:k,fadeLeft:!0,fadeRight:!0}];return x}u._inheritsLoose(C,K);C.prototype.addReferenceLine=function(x){const k={edge:x,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(g=>{x.rightVertex.rightEdge===g.edge&&(g.fadeLeft=
!1,k.fadeRight=!1);x.leftVertex.leftEdge===g.edge&&(g.fadeRight=!1,k.fadeLeft=!1)});this._referenceLines.push(k)};u._createClass(C,[{key:"hints",get:function(){const x=this.elevationInfo;return[new A.LineSnappingHint(f.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint,x),new L.ParallelSnappingHint(this.constraint.start,this.targetPoint,x),...this._referenceLines.map(k=>new A.LineSnappingHint(f.LineSegmentHintType.REFERENCE,k.edge.leftVertex.pos,k.edge.rightVertex.pos,x,k.fadeLeft,
k.fadeRight))]}}]);return C}(F.SnappingCandidate);d.ParallelLineSnappingCandidate=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,u,c,G,f,F){G.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");c=function(A){function L(K,
C,x){x=A.call(this,x)||this;x.lineStart=K;x.lineEnd=C;return x}u._inheritsLoose(L,A);L.prototype.equals=function(K){return K instanceof L?f.objectEqual(this.lineStart,K.lineStart)&&f.objectEqual(this.lineEnd,K.lineEnd):!1};return L}(F.SnappingHint);d.ParallelSnappingHint=c;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C){F=function(x){function k(){var q=x.apply(this,arguments)||this;q._tmp=f.create();return q}u._inheritsLoose(k,x);var g=k.prototype;g.snapNewVertex=function(q,v){var t=v.editGeometryOperations.data.components[0],n=t.vertices.length;const z=[];if(2>n)return z;const e=C.anyMapPointToScreenPoint(q,v.coordinateHelper,v.elevationInfo,this.view);n=t.vertices[n-1];this._checkForSnappingCandidate(z,n.leftEdge,n.pos,q,n.leftEdge.leftVertex.pos,n.pos,v,q,e);t=t.vertices[0];this._checkForSnappingCandidate(z,
t.rightEdge,t.pos,q,t.rightEdge.rightVertex.pos,t.pos,v,q,e);return z};g.snapExistingVertex=function(q,v){const t=[];var n=c.unwrap(v.vertexHandle),z=n.component;const e=z.vertices.length;if(3>e)return t;const h=C.anyMapPointToScreenPoint(q,v.coordinateHelper,v.elevationInfo,this.view);var l=n.leftEdge;n=n.rightEdge;const y=z.vertices[0];z=z.vertices[e-1];if(!l)return this._checkForSnappingCandidate(t,y.rightEdge.rightVertex.rightEdge,y.rightEdge.rightVertex.pos,q,y.rightEdge.rightVertex.rightEdge.rightVertex.pos,
y.rightEdge.rightVertex.pos,v,q,h),t;if(!n)return this._checkForSnappingCandidate(t,z.leftEdge.leftVertex.leftEdge,z.leftEdge.leftVertex.pos,q,z.leftEdge.leftVertex.leftEdge.leftVertex.pos,z.leftEdge.leftVertex.pos,v,q,h),t;l&&l.leftVertex.leftEdge&&(z=l.leftVertex.leftEdge,this._checkForSnappingCandidate(t,z,l.leftVertex.pos,q,z.leftVertex.pos,l.leftVertex.pos,v,q,h));n&&n.rightVertex.rightEdge&&(l=n.rightVertex.rightEdge,this._checkForSnappingCandidate(t,l,n.rightVertex.pos,q,l.rightVertex.pos,
n.rightVertex.pos,v,q,h));return t};g._checkForSnappingCandidate=function(q,v,t,n,z,e,h,l,y){if(this.edgeExceedsShortLineThreshold(v,h)){G.subtract(this._tmp,v.rightVertex.pos,v.leftVertex.pos);v=f.fromValues(this._tmp[1],-this._tmp[0]);t=G.dot(v,G.subtract(this._tmp,n,t))/G.squaredLength(v);var {coordinateHelper:r,elevationInfo:m,pointer:D}=h;h=r.fromXYZ(G.scaleAndAdd(f.create(),e,v,t),r.getZ(l,0));L.squareDistance(y,C.anyMapPointToScreenPoint(h,r,m,this.view))<this.squaredProximityTreshold(D)&&
q.push(new K.RightAngleSnappingCandidate({coordinateHelper:r,targetPoint:h,constraint:new A.RayConstraint(r,e,G.scaleAndAdd(r.createVector(),e,v,Math.sign(t))),previousVertex:z,otherVertex:e,otherVertexType:K.OtherVertexType.CENTER,elevationInfo:m}))}};return k}(F.SnappingAlgorithm);d.RightAngleSnapper=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C){F=function(x){function k(){return x.apply(this,arguments)||this}u._inheritsLoose(k,x);var g=k.prototype;g.snapNewVertex=function(q,v){const t=v.editGeometryOperations.data.components[0],n=[],z=t.vertices.length;if("polygon"!==v.editGeometryOperations.data.type||2>z)return n;this._processCandidateProposal(t.vertices[0].pos,t.vertices[z-1].pos,q,v,n);return n};g.snapExistingVertex=function(q,v){const t=[],n=c.unwrap(v.vertexHandle),z=n.component;if(2>z.edges.length||"polyline"===
v.editGeometryOperations.data.type&&(0===n.index||n.index===z.vertices.length-1))return t;this._processCandidateProposal(n.leftEdge.leftVertex.pos,n.rightEdge.rightVertex.pos,q,v,t);return t};g._processCandidateProposal=function(q,v,t,n,z){if(this.exceedsShortLineThreshold(q,v,n)){var e=G.lerp(f.create(),q,v,.5),h=.5*G.distance(q,v);e=C.projectPointToCircle(f.create(),t,e,h);var {coordinateHelper:l,elevationInfo:y,pointer:r}=n;n=l.fromXYZ(e,l.getZ(t,0));t=K.anyMapPointToScreenPoint(t,l,y,this.view);
A.squareDistance(t,K.anyMapPointToScreenPoint(n,l,y,this.view))<this.squaredProximityTreshold(r)&&z.push(new L.RightAngleTriangleSnappingCandidate({coordinateHelper:l,targetPoint:n,point1:q,point2:v,elevationInfo:y}))}};return k}(F.SnappingAlgorithm);d.RightAngleTriangleSnapper=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(d,u,c,G,f,F,A,L,K){A=function(x){function k({coordinateHelper:g,targetPoint:q,point1:v,point2:t,elevationInfo:n}){g=x.call(this,g,q,new f.PlanarCircleConstraint(g,c.lerp(C,v,t,.5),.5*c.distance(v,t)),n)||this;g.p1=v;g.p2=t;return g}u._inheritsLoose(k,x);u._createClass(k,[{key:"hints",get:function(){const g=this.elevationInfo;return[new L.LineSnappingHint(F.LineSegmentHintType.REFERENCE,this.targetPoint,this.p1,g),new L.LineSnappingHint(F.LineSegmentHintType.REFERENCE,this.targetPoint,this.p2,
g),new K.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2,g)]}}]);return k}(A.SnappingCandidate);const C=G.create();d.RightAngleTriangleSnappingCandidate=A;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(d,u,
c,G,f){G=function(F){function A(L,K,C,x,k){L=F.call(this,L,K,new c.IntersectionConstraint(L,K,C.constraint,x.constraint),k)||this;L.first=C;L.second=x;return L}u._inheritsLoose(A,F);u._createClass(A,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new f.IntersectionSnappingHint(this.targetPoint,this.elevationInfo)]}}]);return A}(G.SnappingCandidate);d.IntersectionSnappingCandidate=G;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(d,u,c,G){G=function(f){function F(A,L){L=f.call(this,L)||this;L.intersectionPoint=A;return L}u._inheritsLoose(F,f);F.prototype.equals=function(A){return A instanceof F?c.objectEqual(this.intersectionPoint,A.intersectionPoint):!1};return F}(G.SnappingHint);
d.IntersectionSnappingHint=G;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(d,u,c){function G(){G=u._asyncToGenerator(function*(F,A){if("2d"===F.type)return F.hitTest(A);F=yield F.hitTest(A);if(0===F.results.length)return F;A=F.results[0];const L=c.isSome(A.distance)?1.05*A.distance:A.distance;A=F.results.findIndex(K=>
K.distance>L);-1!==A&&(F.results=F.results.slice(0,A));return F});return G.apply(this,arguments)}function f(F){return c.isSome(F)&&"graphic"===F.type}d.filterGraphicHits=function(F){return F.filter(f)};d.findFirstGraphicHit=function(F){var A;return null!=(A=F.find(f))?A:null};d.hitTestSelectSimilarDistance=function(F,A){return G.apply(this,arguments)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,c,G,f,F,A,L,K,C){d.OperationHandle=function(x){function k(q){q=x.call(this,q)||this;q.cancelled=!1;q.history={undo:[],redo:[]};q.type=null;return q}u._inheritsLoose(k,x);var g=k.prototype;g.addToHistory=function(q){this.history.redo=[];this.history.undo.push(q)};g.resetHistory=function(){this.history.redo=[];this.history.undo=[]};g.canUndo=function(){return 0<this.history.undo.length};g.canRedo=function(){return 0<this.history.redo.length};g.complete=function(){this._reset();this.onEnd();
this.emit("complete")};g.cancel=function(){this.cancelled=!0;this.complete()};g._reset=function(){this.activeComponent.reset()};g.refreshComponent=function(){const q=this.activeComponent;q&&("box"!==q.type&&"reshape"!==q.type&&"graphic-mover"!==q.type||q.refresh())};u._createClass(k,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:G.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(q){this._set("undo",()=>{this.canUndo()&&q()})}},{key:"redo",set:function(q){this._set("redo",()=>{this.canRedo()&&q()})}}]);return k}(f.EventedAccessor);c.__decorate([F.property()],d.OperationHandle.prototype,"activeComponent",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"cancelled",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,
"history",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"tool",null);c.__decorate([F.property()],d.OperationHandle.prototype,"type",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"canUndo",null);c.__decorate([F.property()],d.OperationHandle.prototype,"canRedo",null);c.__decorate([F.property()],d.OperationHandle.prototype,"onEnd",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"undo",null);c.__decorate([F.property()],d.OperationHandle.prototype,"redo",
null);c.__decorate([F.property()],d.OperationHandle.prototype,"toggleTool",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"addToSelection",void 0);c.__decorate([F.property()],d.OperationHandle.prototype,"removeFromSelection",void 0);d.OperationHandle=c.__decorate([C.subclass("esri.widgets.Sketch.support.OperationHandle")],d.OperationHandle);d.CreateOperationHandle=function(x){function k(){return x.apply(this,arguments)||this}u._inheritsLoose(k,x);return k}(d.OperationHandle);c.__decorate([F.property()],
d.CreateOperationHandle.prototype,"activeComponent",void 0);d.CreateOperationHandle=c.__decorate([C.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],d.CreateOperationHandle);d.UpdateOperationHandle=function(x){function k(g){return x.call(this,g)||this}u._inheritsLoose(k,x);return k}(d.OperationHandle);c.__decorate([F.property()],d.UpdateOperationHandle.prototype,"activeComponent",void 0);d.UpdateOperationHandle=c.__decorate([C.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
d.UpdateOperationHandle);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SelectionToolbar":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SelectionToolbar/SelectionToolbarViewModel".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t){const n={lassoTool:!0,rectangleTool:!0},z={createTool:"polygon",createOptions:{mode:"freehand"}},e={createTool:"rectangle"};A=function(h){function l(r,m){var D=h.call(this,r,m)||this;D._viewModelHandlesGroup=null;D.activeToolInfo=null;D.label=void 0;D.layers=[];D.messages=null;D.toolConfigs=[];D.view=null;D.viewModel=new t;D.visibleElements={...n};D._viewModelHandlesGroup=G.handlesGroup([D.viewModel.on("selection-change",O=>D.emit("selection-change",O)),D.viewModel.on("complete",
O=>{D._set("activeToolInfo",null);D.emit("complete",O)})]);return D}u._inheritsLoose(l,h);var y=l.prototype;y.destroy=function(){this._viewModelHandlesGroup=f.removeMaybe(this._viewModelHandlesGroup)};y.loadDependencies=function(){return Promise.all([new Promise((r,m)=>d(["../../chunks/calcite-action"],r,m)),new Promise((r,m)=>d(["../../chunks/calcite-icon"],r,m))])};y.castVisibleElements=function(r){return{...n,...r}};y.activate=function(r){this.cancel();switch(r){case "lasso":this._activateTool("lasso");
case "rectangle":this._activateTool("rectangle");default:this._activateTool(r)}};y.cancel=function(){this.viewModel.cancel();this._set("activeToolInfo",null)};y.render=function(){return v.tsx("div",{"aria-label":this.label,class:this.classes("esri-selection-toolbar","esri-widget")},v.tsx("div",{class:"esri-selection-toolbar__container"},this.renderDefaultTools(),this.renderCustomTools()))};y.renderDefaultTools=function(){var r;if("2d"===(null==(r=this.view)?void 0:r.type))return[this.renderRectangleTool(),
this.renderLassoTool()]};y.renderCustomTools=function(){if(this.toolConfigs&&this.toolConfigs.length)return this.toolConfigs.map(r=>{var m;return v.tsx("calcite-action",{active:(null==(m=this.activeToolInfo)?void 0:m.toolName)===r.toolName,bind:this,class:"esri-selection-toolbar__tool-button",label:r.toolName,onclick:()=>this._onCustomToolClick(r.toolName),scale:"s",text:r.toolName,title:r.toolName},v.tsx("calcite-icon",{scale:"s",icon:r.icon||"selection"}))})};y.renderLassoTool=function(){const {activeToolInfo:r,
messages:m,visibleElements:D}=this;if(D.lassoTool)return v.tsx("calcite-action",{active:"lasso"===(null==r?void 0:r.toolName),bind:this,label:m.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:m.selectByLasso,title:m.selectByLasso},v.tsx("calcite-icon",{scale:"s",icon:"lasso"}))};y.renderRectangleTool=function(){const {activeToolInfo:r,messages:m,visibleElements:D}=this;if(D.rectangleTool)return v.tsx("calcite-action",{active:"rectangle"===(null==r?void 0:r.toolName),bind:this,label:m.selectByRectangle,
onclick:this._onRectangleToolClick,scale:"s",text:m.selectByRectangle,title:m.selectByRectangle},v.tsx("calcite-icon",{scale:"s",icon:"cursor-marquee"}))};y._onCustomToolClick=function(r){this._toggleTool(r)};y._onLassoToolClick=function(){this._toggleTool("lasso")};y._onRectangleToolClick=function(){this._toggleTool("rectangle")};y._activateTool=function(r){var m=this._getToolOptions(r);m&&(m=this.viewModel.activate(m),this._set("activeToolInfo",{toolName:r,operation:m}))};y._toggleTool=function(r){if(this.activeToolInfo){const m=
this.activeToolInfo.toolName;this.cancel();if(m===r)return}this._activateTool(r)};y._getToolOptions=function(r){if("lasso"===r)return z;if("rectangle"===r)return e;const m=this.toolConfigs.find(Q=>Q.toolName===r);if(m){var {createTool:D,createOptions:O,selectionOptions:T}=m;return{createTool:D,createOptions:O,selectionOptions:T}}};return l}(k);c.__decorate([C.property({readOnly:!0})],A.prototype,"activeToolInfo",void 0);c.__decorate([C.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
A.prototype,"label",void 0);c.__decorate([F.aliasOf("viewModel.layers")],A.prototype,"layers",void 0);c.__decorate([C.property(),q.messageBundle("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],A.prototype,"messages",void 0);c.__decorate([C.property()],A.prototype,"toolConfigs",void 0);c.__decorate([F.aliasOf("viewModel.view")],A.prototype,"view",void 0);c.__decorate([C.property()],A.prototype,"viewModel",void 0);c.__decorate([C.property()],A.prototype,"visibleElements",void 0);c.__decorate([K.cast("visibleElements")],
A.prototype,"castVisibleElements",null);return A=c.__decorate([x.subclass("esri.widgets.support.SelectionToolbar")],A)})},"esri/widgets/support/SelectionToolbar/SelectionToolbarViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x){c=function(k){function g(v){v=k.call(this,v)||this;v._operationHandlesGroup=null;v.activeOperation=null;v.layers=null;v.selector=new x;return v}d._inheritsLoose(g,k);var q=g.prototype;q.destroy=function(){this._operationHandlesGroup=f.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};q.cancel=function(){"active"===this.state&&(this.activeOperation.cancel(),this.activeOperation=null);this.selector.candidates=null};q.activate=function(v){const {state:t}=
this;if("disabled"!==t)return"active"===t&&this.cancel(),this.selector.candidates=this._getCandidates(),v=this.selector.draw(v),this._operationHandlesGroup=G.handlesGroup([v.once("complete",n=>this._onOperationComplete(n)),v.on("selection-change",n=>this._onOperationSelectionChange(n))]),this.activeOperation=v};q._getCandidates=function(){let v=[];this.layers.forEach(t=>{v=v.concat(...t.graphics.toArray())});return v};q._onOperationSelectionChange=function(v){this.emit("selection-change",v)};q._onOperationComplete=
function(v){this._operationHandlesGroup=f.removeMaybe(this._operationHandlesGroup);this.activeOperation=null;this.emit("complete",v)};d._createClass(g,[{key:"state",get:function(){var v,t;return this.activeOperation?"active":null!=(v=this.view)&&v.ready&&null!=(t=this.layers)&&t.length?"ready":"disabled"}},{key:"view",set:function(v){this.selector.view=v;this._set("view",v)}}]);return g}(c.EventedAccessor);u.__decorate([F.property()],c.prototype,"activeOperation",void 0);u.__decorate([F.property()],
c.prototype,"layers",void 0);u.__decorate([F.property({readOnly:!0})],c.prototype,"selector",void 0);u.__decorate([F.property({readOnly:!0})],c.prototype,"state",null);u.__decorate([F.property()],c.prototype,"view",null);return c=u.__decorate([C.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],c)})},"esri/widgets/support/Selector2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Selector2D/SelectionOperation2D ./Selector2D/selectorUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k){c=function(g){function q(t){t=g.call(this,t)||this;t._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};t.candidates=null;t.options=null;t.view=null;return t}d._inheritsLoose(q,g);var v=q.prototype;v.draw=function(t){const {_defaultSelectionOptions:n,candidates:z,options:e,view:h}=this;return new x({candidates:z,options:{...t,selectionOptions:{...n,...e,...null==t?void 0:t.selectionOptions}},view:h})};v.selectionFrom=function(){var t=d._asyncToGenerator(function*(n,
z){const {_defaultSelectionOptions:e,candidates:h,options:l,view:y}=this,r=new G;yield k.updateSelection({selector:n,candidates:h,currentSelection:r,options:{...e,...l,...z},view:y});return r.toArray()});return function(n,z){return t.apply(this,arguments)}}();return q}(f.HandleOwnerMixin(c));u.__decorate([F.property()],c.prototype,"candidates",void 0);u.__decorate([F.property()],c.prototype,"options",void 0);u.__decorate([F.property({value:null})],c.prototype,"view",void 0);return c=u.__decorate([C.subclass("esri.widgets.support.Selector2D")],
c)})},"esri/widgets/support/Selector2D/SelectionOperation2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n){c=function(z){function e({candidates:l,options:y,view:r}){var m=z.call(this)||this;m._activeOptions=null;m._dashedFillSymbol=new v({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});m._dashedLineSymbol=new t({style:"dash",color:[12,207,255],width:2});m._defaultOptions={createTool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};m._completed=!1;m._handles=new F;m._sketchViewModel=new g;m._sketchGraphicsLayer=
new k({listMode:"hide",internal:!0});m._transparentPointSymbol=new n({color:[0,0,0,0],outline:{style:"none",width:0}});m.candidates=null;m.geometry=null;m.options=null;m.selection=new G;m.view=null;m.candidates=l;m.options=y;m.view=r;const {_dashedFillSymbol:D,_dashedLineSymbol:O,_sketchViewModel:T,_sketchGraphicsLayer:Q,_transparentPointSymbol:N}=d._assertThisInitialized(m);T.set({layer:Q,view:m.view,activePointSymbol:N,activeLineSymbol:O,activeVertexSymbol:N,activeFillSymbol:D,pointSymbol:N,polygonSymbol:D,
polylineSymbol:O,vertexSymbol:N});m._handles.add([T.on("create",P=>m._onSketchEvent(P)),T.on(["undo","redo"],P=>m._onSketchEvent(P))]);return m}d._inheritsLoose(e,z);var h=e.prototype;h.initialize=function(){this._load()};h.destroy=function(){this._handles.destroy();this._handles=null};h.cancel=function(){this._sketchViewModel.cancel()};h._load=function(){var l=d._asyncToGenerator(function*(){yield this.view.whenReady();const {options:y}=this,{createTool:r,createOptions:m}=this._activeOptions={...this._defaultOptions,
...y};this._sketchViewModel.create(r,m)});return function(){return l.apply(this,arguments)}}();h._onSketchEvent=function(l){const y="create"===l.type?l.graphic:l.graphics[0];this._processSelectionGeometry((null==y?void 0:y.geometry)||null,"create"===l.type&&"complete"===l.state,"create"===l.type&&"cancel"===l.state)};h._processSelectionGeometry=function(l,y,r){this._set("geometry",l);if(y||r)this._completed=!0;if(r)this._onComplete([],!0);else{var {_activeOptions:m,candidates:D,selection:O,view:T}=
this;q.updateSelection({selector:l,candidates:D,currentSelection:O,options:m.selectionOptions,view:T}).then(({added:Q,removed:N})=>{y?this._onComplete(this.selection.toArray(),!1):(Q.length||N.length)&&this.emit("selection-change",{added:Q,removed:N,type:"selection-change"})})}};h._onComplete=function(l,y){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:y,selection:l,type:"complete"})};d._createClass(e,[{key:"state",get:function(){const {_completed:l,_sketchViewModel:{state:y}}=
this;return l?"complete":"active"===y?"active":"disabled"}}]);return e}(f.EventedAccessor);u.__decorate([A.property()],c.prototype,"_completed",void 0);u.__decorate([A.property()],c.prototype,"candidates",void 0);u.__decorate([A.property({readOnly:!0})],c.prototype,"geometry",void 0);u.__decorate([A.property()],c.prototype,"options",void 0);u.__decorate([A.property({readOnly:!0})],c.prototype,"selection",void 0);u.__decorate([A.property({readOnly:!0})],c.prototype,"state",null);u.__decorate([A.property({value:null})],
c.prototype,"view",void 0);return c=u.__decorate([x.subclass("esri.widgets.support.Selector2D.SelectionOperation2D")],c)})},"esri/widgets/support/Selector2D/selectorUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers"],function(d,u,c){function G(){return f.apply(this,arguments)}function f(){f=c._asyncToGenerator(function*(){return new Promise((K,C)=>d(["../../../geometry/geometryEngineJSON"],K,C))});return f.apply(this,arguments)}function F(){return A.apply(this,
arguments)}function A(){A=c._asyncToGenerator(function*(){return G().then(({contains:K,intersects:C,overlaps:x,simplify:k})=>({contains:K,intersects:C,overlaps:x,simplify:k}))});return A.apply(this,arguments)}function L(){L=c._asyncToGenerator(function*(K){const {selector:C,candidates:x,currentSelection:k,options:g,view:q}=K;if(!(x&&x.length&&k&&q))return{added:[],removed:[]};const {overlaps:v,intersects:t,contains:n}=g,{spatialReference:z}=q;if(!C)return{added:[],removed:k.removeAll()};const e=yield F(),
h=[],l=[];x.forEach(y=>{var r=y.geometry;const m=v&&!!e.overlaps(z,C,r),D=t&&!!e.intersects(z,C,r);r=n&&!!e.contains(z,C,r);const O=k.includes(y);m||D||r?!O&&h.push(y):O&&l.push(y)});k.removeMany(l);k.addMany(h);return{added:h,removed:l}});return L.apply(this,arguments)}u.getGeometryEngineOperations=F;u.importGeometryEngine=G;u.updateSelection=function(K){return L.apply(this,arguments)};Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/uid ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t){const n={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};A=function(z){function e(l,y){y=z.call(this,(()=>{const {view:r,viewModel:m,snappingOptions:D,...O}=l;return O})(),y)||this;y._layerListFilter=null;y.label=void 0;y.messages=null;y.messagesCommon=null;y.snappingOptions=null;y.view=null;y.visibleElements={...n};y._defaultViewModel=null;null!=l&&l.viewModel?y.viewModel=l.viewModel:(y._defaultViewModel=new t({snappingOptions:l.snappingOptions,
view:l.view}),y.viewModel=y._defaultViewModel);return y}u._inheritsLoose(e,z);var h=e.prototype;h.destroy=function(){this._defaultViewModel=G.destroyMaybe(this._defaultViewModel)};h.loadDependencies=function(){return Promise.all([new Promise((l,y)=>d(["../../chunks/calcite-action"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-block"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-icon"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-label"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-panel"],
l,y)),new Promise((l,y)=>d(["../../chunks/calcite-list"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-list-item"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-list-item-group"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-switch"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-checkbox"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-accordion-item"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-accordion"],l,y)),new Promise((l,y)=>d(["../../chunks/calcite-input"],l,y))])};
h.castVisibleElements=function(l){return{...n,...l}};h.render=function(){const {label:l,visibleElements:{header:y}}=this;return v.tsx("div",{"aria-label":l,class:this.classes("esri-snapping-controls","esri-widget")},v.tsx("div",{class:"esri-snapping-controls__container"},y?this.renderHeaderView():this.renderContent()))};h.renderHeaderView=function(){return v.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};h.renderContent=function(){return[this.renderToggles(),
this.renderLayerList()]};h.renderToggles=function(){return v.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),v.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};h.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:l},viewModel:{snappingOptions:{enabled:y,enabledToggled:r}}}=this;return v.tsx("calcite-label",
{layout:"inline-space-between"},l,v.tsx("calcite-switch",{checked:y,disabled:r,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};h.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:l},viewModel:{snappingOptions:{enabled:y,selfEnabled:r,enabledToggled:m}}}=this;return v.tsx("calcite-label",{layout:"inline-space-between"},l,v.tsx("calcite-switch",{checked:r,disabled:m||!y,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};
h.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:l},viewModel:{snappingOptions:{enabled:y,featureEnabled:r,enabledToggled:m}}}=this;return v.tsx("calcite-label",{layout:"inline-space-between"},l,v.tsx("calcite-switch",{checked:r,disabled:m||!y,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};h.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:l,messagesCommon:y}=this,r=({target:{value:m}})=>
this._layerListFilter=""===m?null:new RegExp(m,"i");r=9<this.viewModel.layerListViewModel.operationalItems.length?v.tsx("calcite-input",{class:"esri-snapping-controls__layer-list__filter",clearable:!0,placeholder:null==l?void 0:l.searchLayers,onCalciteInputInput:r}):null;return v.tsx("calcite-block",{"intl-collapse":null==y?void 0:y.collapse,"intl-expand":null==y?void 0:y.expand,heading:l.snappingLayers,class:"esri-snapping-controls__layer-list-block",open:!0,collapsible:!0},r,v.tsx("calcite-list",
{class:"esri-snapping-controls__layer-list"},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,G.unwrap(this._layerListFilter))))}};h.renderLayerListItemCollection=function(l,y){return l.map(r=>{if(y?this._itemTitleMatchesFilter(r,y):1)return 0<r.children.length?this.renderLayerListItemGroup(r):this.renderLayerListItem(r);const m=r.children.filter(D=>this._itemTitleMatchesFilter(D,y));return 0<m.length?this.renderLayerListItemGroup(r,m):null}).toArray()};h.renderLayerListItem=
function(l){var {messages:{untitledLayer:y}}=this;y=l.title||y;const r=v.tsx("calcite-checkbox",{value:l.layer.id,checked:l.enabled,bind:this,onCalciteCheckboxChange:m=>this._handleLayerListItemChange(m.target)});return v.tsx("calcite-list-item",{key:`${this.id}-list-item-${l.uid}`,onclick:()=>{this._handleLayerListItemChange({checked:!r.properties.checked,value:r.properties.value})}},v.tsx("calcite-label",{class:"esri-snapping-controls__layer-list__item",slot:"content-start",tabIndex:-1,layout:"inline",
"disable-spacing":"true"},v.tsx("div",{class:"esri-snapping-controls__layer-list__item__checkbox"},r),v.tsx("div",{class:"esri-snapping-controls__layer-list__item__label"},y)))};h.renderLayerListItemGroup=function(l,y){const r=l.title||this.messages.untitledLayer,m=l.title&&""!==l.title?l.title:f.generateUID();return v.tsx("calcite-list-item",{key:m},v.tsx("calcite-accordion",{"icon-position":"start",appearance:"transparent",afterCreate:D=>{D.append(...Array.from(D.children).map(O=>{O.remove();return O}))}},
v.tsx("calcite-accordion-item",{active:!!y,"item-title":r,key:l.uid},v.tsx("calcite-list",null,[...this.renderLayerListItemCollection(null!=y?y:l.children)]))))};h._enableSnappingSwitchChange=function(l){this.snappingOptions.enabled=l.target.checked};h._featureEnabledSwitchChange=function(l){this.snappingOptions.featureEnabled=l.target.checked};h._itemTitleMatchesFilter=function(l,y){return y.test(l.title)};h._selfEnabledSwitchChange=function(l){this.snappingOptions.selfEnabled=l.target.checked};
h._handleLayerListItemChange=function(){var l=u._asyncToGenerator(function*(y){y.checked?this.viewModel.enableSnappingForLayer(y.value):this.viewModel.disableSnappingForLayer(y.value)});return function(y){return l.apply(this,arguments)}}();u._createClass(e,[{key:"viewModel",set:function(l){if(l!==this._get("viewModel")){if(G.isNone(this._defaultViewModel)||this._defaultViewModel!==l)this._defaultViewModel=G.destroyMaybe(this._defaultViewModel);this._set("viewModel",l)}}}]);return e}(k);c.__decorate([C.property()],
A.prototype,"_layerListFilter",void 0);c.__decorate([C.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],A.prototype,"label",void 0);c.__decorate([C.property(),q.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],A.prototype,"messages",void 0);c.__decorate([C.property(),q.messageBundle("esri/t9n/common")],A.prototype,"messagesCommon",void 0);c.__decorate([F.aliasOf("viewModel.snappingOptions")],A.prototype,"snappingOptions",void 0);c.__decorate([F.aliasOf("viewModel.view")],
A.prototype,"view",void 0);c.__decorate([C.property()],A.prototype,"viewModel",null);c.__decorate([C.property()],A.prototype,"visibleElements",void 0);c.__decorate([K.cast("visibleElements")],A.prototype,"castVisibleElements",null);return A=c.__decorate([x.subclass("esri.widgets.support.SnappingControls")],A)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q){c=function(v){function t(z){z=v.call(this,z)||this;z.layerListViewModel=new q.SnappingLayerListViewModel;z.snappingOptions=null;z.view=null;return z}d._inheritsLoose(t,v);var n=t.prototype;n.initialize=function(){this.handles.add([F.watch(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:z,view:e})=>{z.view=e},F.initial),F.watch(()=>{var z;return{viewModel:this.layerListViewModel,sources:null==(z=this.snappingOptions)?void 0:z.featureSources}},
({viewModel:z,sources:e})=>{z.featureSnappingSources=e},F.initial)])};n.enableSnappingForLayer=function(z){var e;(null!=(e=this._findSnappingSourceForLayer(z))?e:this._makeSnappingSourceForLayer(z)).enabled=!0};n.disableSnappingForLayer=function(z){if(z=this._findSnappingSourceForLayer(z))z.enabled=!1};n.updateEnabledFeatureSources=function(z){for(const e of this.snappingOptions.featureSources)g.canDisplayLayer(e.layer)&&(e.enabled=z.includes(e.layer.id))};n._findSnappingSourceForLayer=function(z){return this.snappingOptions.featureSources.find(e=>
e.layer.id===z)};n._makeSnappingSourceForLayer=function(z){var {layer:e}=this.layerListViewModel.operationalItemsFlat.find(h=>h.layer.id===z);if(!e)throw new G("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${z} because no such layer was found in the view`);e=new k({layer:e});this.snappingOptions.featureSources.add(e);return e};d._createClass(t,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return t}(f.HandleOwnerMixin(c));u.__decorate([A.property({constructOnly:!0})],
c.prototype,"layerListViewModel",void 0);u.__decorate([A.property({constructOnly:!0})],c.prototype,"snappingOptions",void 0);u.__decorate([A.property()],c.prototype,"state",null);u.__decorate([A.property({constructOnly:!0})],c.prototype,"view",void 0);return c=u.__decorate([x.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],c)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(d){function u(K){if(K)return null!=K.listMode?K.listMode:
void 0}function c(K){if(K)return null!=K.minScale?K.minScale:void 0}function G(K){if(K)return null!=K.maxScale?K.maxScale:void 0}function f(K){if(K){if(!("type"in K))return"sublayers";if(K.listMode!==L.hideChildren&&"wmts"!==K.type)switch(K.type){case "group":return"layers";default:return"sublayers"}}}function F(K,C){K&&K.sort((x,k)=>{x=C.indexOf(x.uid);k=C.indexOf(k.uid);return x>k?-1:x<k?1:0})}function A(K){return!(null==K||!K.layer)}const L={hide:"hide",hideChildren:"hide-children"};d.canDisplayLayer=
function(K){return u(K)!==L.hide};d.canSortSublayers=function(K){K=K&&(K.get("layer.layer")||K.layer);if(!K)return!1;K=K.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof K?K:!0};d.findLayerListMode=u;d.findLayerMaxScale=G;d.findLayerMinScale=c;d.findLayerVisibilityMode=function(K){if(!K)return"inherited";var C=K.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof C)return C?"independent":"inherited";C=K.get("capabilities.exportMap.supportsSublayerVisibility");
return"boolean"===typeof C?C?"independent":"inherited":null!=K.visibilityMode?K.visibilityMode:"independent"};d.findSelectedItem=function(K,C){var x;const k=null==(x=K.layer)?void 0:x.uid;return k&&C.find(g=>{var q;return(null==(q=g.layer)?void 0:q.uid)===k})};d.getItemLayers=function(K){return(K=null==K?void 0:K.layer)&&"group"===K.type?K.layers:null};d.getLegendLayerInfo=function(K){var C=A(K)?K:null;const x=null==K?void 0:K.parent;return(C="map-image"===(null==x?void 0:x.type)&&C.source)&&x?{layer:x,
title:"",sublayerIds:[C.mapLayerId]}:{layer:K,title:""}};d.getNormalizedChildLayerProperty=f;d.isLayerOutsideScaleRange=function(K,C){if(!K||isNaN(C))return!1;var x=c(K);K=G(K);x=!isNaN(x)&&0<x&&C>x;C=!isNaN(K)&&0<K&&C<K;return x||C};d.isSublayer=A;d.sortChildLayersToIds=function(K,C){if(K=null==K?void 0:K.layer){var x=f(K);x&&(K=K.get(x),F(K,C))}};d.sortLayersToIds=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k){d.SnappingLayerListViewModel=function(g){function q(){var t=g.apply(this,arguments)||this;t.featureSnappingSources=new G;return t}u._inheritsLoose(q,g);var v=q.prototype;v._compileList=function(){var t=this.get("view.map.layers");t&&(t=t.filter(x.isValidSnappingLayer),this._watchLayersListMode(t),(t=this._getViewableLayers(t))&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems())};v._createListItem=function(t){return new k.SnappingListItem({layer:t,
view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})};u._createClass(q,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(t=>t.children)}}]);return q}(C);c.__decorate([f.property()],d.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);c.__decorate([f.property()],d.SnappingLayerListViewModel.prototype,"operationalItems",void 0);d.SnappingLayerListViewModel=c.__decorate([K.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],
d.SnappingLayerListViewModel);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){const q=c.ofType(k);c=function(v){function t(z){z=v.call(this,z)||this;z._handles=new f;z.listItemCreatedFunction=null;z.operationalItems=new q;z.view=null;return z}d._inheritsLoose(t,v);var n=t.prototype;n.initialize=function(){this._handles.add([F.watch(()=>{var z;return[this.view,null==(z=this.view)?void 0:z.ready]},()=>this._viewHandles(),F.initial),F.watch(()=>this.listItemCreatedFunction,()=>this._listItemCreatedFunctionChanged())],"view")};n.destroy=function(){this._handles.destroy();
this.view=this._handles=null;this.operationalItems.removeAll()};n.triggerAction=function(z,e){z&&!z.disabled&&this.emit("trigger-action",{action:z,item:e})};n.moveListItem=function(z,e,h,l){var y,r;const m=null==z?void 0:z.layer;if(m){var D=null==(y=this.view)?void 0:null==(r=y.map)?void 0:r.layers;y=e?g.getItemLayers(e):D;D=h?g.getItemLayers(h):D;y&&D&&({operationalItems:r}=this,e=(null==e?void 0:e.children)||r,r=(null==h?void 0:h.children)||r,l=D.length-l,z.parent=h||null,e.includes(z)&&e.remove(z),
y.includes(m)&&y.remove(m),r.includes(z)||r.add(z,l),D.includes(m)||D.add(m,l))}};n._createLayerViewHandles=function(z){const {_handles:e}=this;e.remove("layer-views");this._compileList();z&&e.add(z.on("change",()=>this._compileList()),"layer-views")};n._createMapLayerHandles=function(z){const {_handles:e}=this;e.remove("map-layers");this._compileList();z&&e.add(z.on("change",()=>this._compileList()),"map-layers")};n._createListItem=function(z){const {view:e,listItemCreatedFunction:h}=this;return new k({layer:z,
listItemCreatedFunction:h,view:e})};n._removeAllItems=function(){const {_handles:z,operationalItems:e}=this;e.forEach(h=>{z.remove(`${"children"}-${h.uid}`)});e.removeAll()};n._getViewableLayers=function(z){if(z)return z.filter(e=>"hide"!==g.findLayerListMode(e))};n._watchLayersListMode=function(z){const {_handles:e}=this;e.remove("layer-list-mode");z&&z.forEach(h=>{"listMode"in h&&e.add(F.watch(()=>h.listMode,()=>this._compileList()),"layer-list-mode")})};n._compileList=function(){var z=this.get("view.map.layers");
this._watchLayersListMode(z);(z=this._getViewableLayers(z))&&z.length?(this._createNewItems(z),this._removeItems(z),this._sortItems(z)):this._removeAllItems()};n._createNewItems=function(z){const {operationalItems:e}=this;z.forEach(h=>{e.find(l=>l.layer===h)||e.add(this._createListItem(h))})};n._removeItems=function(z){const {_handles:e,operationalItems:h}=this,l=[];h.forEach(y=>{y&&z&&z.includes(y.layer)||(e.remove(`${"children"}-${y.uid}`),l.push(y))});h.removeMany(l)};n._sortItems=function(z){const {operationalItems:e}=
this;e.sort((h,l)=>{h=z.indexOf(h.layer);l=z.indexOf(l.layer);return h>l?-1:h<l?1:0})};n._listItemCreatedFunctionChanged=function(){this._removeAllItems();this._compileList()};n._viewHandles=function(){const {_handles:z,view:e}=this;z.remove(["map-layers","layer-views","view-layers"]);this._compileList();e&&e.ready&&z.add([F.watch(()=>{var h,l;return null==(h=this.view)?void 0:null==(l=h.map)?void 0:l.allLayers},h=>this._createMapLayerHandles(h),F.initial),F.watch(()=>{var h;return null==(h=this.view)?
void 0:h.allLayerViews},h=>this._createLayerViewHandles(h),F.initial)],"view-layers")};d._createClass(t,[{key:"state",get:function(){const z=this.get("view");return this.get("view.ready")?"ready":z?"loading":"disabled"}}]);return t}(G.EventedAccessor);u.__decorate([A.property()],c.prototype,"listItemCreatedFunction",void 0);u.__decorate([A.property({type:q})],c.prototype,"operationalItems",void 0);u.__decorate([A.property({readOnly:!0})],c.prototype,"state",null);u.__decorate([A.property()],c.prototype,
"view",void 0);return c=u.__decorate([x.subclass("esri.widgets.LayerList.LayerListViewModel")],c)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e){var h;K=G.ofType({key:"type",defaultKeyValue:"button",base:q,typeMap:{button:v,toggle:n,slider:t}});const l=G.ofType(K);c=h=function(y){function r(D){D=y.call(this,D)||this;D.actionsSections=new l;D.actionsOpen=!1;D.children=new (G.ofType(h));D.childrenSortable=!0;D.error=null;D.hidden=!1;D.layer=null;D.layerView=null;D.listItemCreatedFunction=null;D.open=!1;D.panel=null;D.parent=null;D.sortable=!0;D.view=null;D.visible=null;return D}d._inheritsLoose(r,
y);var m=r.prototype;m.initialize=function(){this.handles.add([A.watch(()=>this.layer,D=>this._watchLayerProperties(D),A.initial),A.watch(()=>this.view,D=>this._updateChildren(D),A.initial),A.watch(()=>this.panel,D=>this._setListItemOnPanel(D),A.initial),A.watch(()=>[this.layer,this.view],()=>this._getLayerView(),A.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:this})};m.destroy=function(){this.view=null};m.castPanel=function(D){this.get("panel.open")&&
!D.hasOwnProperty("open")&&(D.open=!0);return D?new z(D):null};m.clone=function(){return new h({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};m._setListItemOnPanel=function(D){D&&(D.listItem=this)};m._updateChildren=function(D){const O=this.children;O&&O.forEach(T=>T.view=D)};m._addChildren=
function(D){this.handles.remove("child-list-mode");this.children.removeAll();if(D){D.forEach(T=>{this.handles.add(A.watch(()=>T.listMode,()=>this._addChildren(D)),"child-list-mode")});var O=D.filter(T=>"hide"!==e.findLayerListMode(T));this.children.addMany(this._makeChildren(O))}};m._watchSublayerChanges=function(D){D&&this.handles.add(D.on("change",()=>{this._addChildren(D)}),"layer")};m._initializeChildLayers=function(D){this._addChildren(D);this._watchSublayerChanges(D)};m._makeChildren=function(D){return D.map(O=>
e.canDisplayLayer(O)?new h({layer:O,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()};m._watchLayerProperties=function(D){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),D))if(this.handles.add(A.watch(()=>D.listMode,()=>this._watchLayerProperties(D)),"layer"),"hide-children"===e.findLayerListMode(D))this.children.removeAll();else{var O=e.getNormalizedChildLayerProperty(D);O&&this.handles.add(A.watch(()=>D[O],()=>
{D.hasOwnProperty(O)&&this._initializeChildLayers(D[O])},A.initial),"layer")}};m._getLayerView=function(){var D=d._asyncToGenerator(function*(){const {layer:O,view:T}=this;if(O&&T)try{const Q=yield T.whenLayerView(O);Q.layer===this.layer&&this._set("layerView",Q)}catch{}});return function(){return D.apply(this,arguments)}}();m._isLayerUpdating=function(D){return D&&"loading"===D.loadStatus};d._createClass(r,[{key:"connectionStatus",get:function(){const {layerView:D}=this;if(D&&"connectionStatus"in
D)return D.connectionStatus}},{key:"incompatible",get:function(){const {layerView:D}=this;return D&&"spatialReferenceSupported"in D?!D.spatialReferenceSupported:!1}},{key:"title",get:function(){const D=this.get("layer.layer");return(!D||D&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(D){void 0===D?this._clearOverride("title"):this._override("title",D)}},{key:"updating",get:function(){const {layerView:D,connectionStatus:O}=this;return O?
!1:D?D.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!e.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return e.findLayerVisibilityMode(this.layer)}}]);return r}(F.IdentifiableMixin(f.HandleOwnerMixin(c)));u.__decorate([k.property({type:l})],c.prototype,"actionsSections",void 0);u.__decorate([k.property()],c.prototype,"actionsOpen",void 0);u.__decorate([k.property({type:G})],c.prototype,"children",
void 0);u.__decorate([k.property()],c.prototype,"childrenSortable",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"connectionStatus",null);u.__decorate([L.aliasOf("layer.loadError?")],c.prototype,"error",void 0);u.__decorate([k.property()],c.prototype,"hidden",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"incompatible",null);u.__decorate([k.property()],c.prototype,"layer",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"layerView",void 0);u.__decorate([k.property()],
c.prototype,"listItemCreatedFunction",void 0);u.__decorate([k.property()],c.prototype,"open",void 0);u.__decorate([k.property({type:z})],c.prototype,"panel",void 0);u.__decorate([x.cast("panel")],c.prototype,"castPanel",null);u.__decorate([k.property()],c.prototype,"parent",void 0);u.__decorate([k.property()],c.prototype,"sortable",void 0);u.__decorate([k.property()],c.prototype,"title",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"updating",null);u.__decorate([k.property({value:null})],
c.prototype,"view",void 0);u.__decorate([L.aliasOf("layer.visible")],c.prototype,"visible",void 0);u.__decorate([k.property({readOnly:!0})],c.prototype,"visibleAtCurrentScale",null);u.__decorate([k.property({readOnly:!0})],c.prototype,"visibilityMode",null);return c=h=u.__decorate([g.subclass("esri.widgets.LayerList.ListItem")],c)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(d,u,c,G,f,F,A,L){var K;G=K=function(C){function x(k){k=C.call(this,k)||this;k.displayValueEnabled=!1;k.max=1;k.min=0;k.step=.1;k.type="slider";k.value=null;return k}d._inheritsLoose(x,C);x.prototype.clone=function(){return new K({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return x}(L);u.__decorate([c.property()],
G.prototype,"displayValueEnabled",void 0);u.__decorate([c.property()],G.prototype,"max",void 0);u.__decorate([c.property()],G.prototype,"min",void 0);u.__decorate([c.property()],G.prototype,"step",void 0);u.__decorate([c.property()],G.prototype,"value",void 0);return G=K=u.__decorate([A.subclass("esri.support.Action.ActionSlider")],G)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g,q,v){f=function(t){function n(e,h){e=t.call(this,e,h)||this;e._legend=null;e._handles=new G;e.content=null;e.image=null;e.listItem=null;e.open=!1;e.visible=!0;return e}u._inheritsLoose(n,t);var z=n.prototype;z.initialize=function(){this.own([F.watch(()=>this.content,e=>this._createLegend(e),F.initial)])};z.destroy=function(){const {_legend:e}=this;e&&e.destroy();this._legend=null};z.render=function(){return v.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
z._renderContent=function(e){const {_legend:h,listItem:l}=this;return e?"legend"===e?l&&l.view&&l.layer&&h?v.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:h},h.render()):null:"string"===typeof e?v.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:e,innerHTML:e}):q.isWidget(e)?v.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:e},e.render()):e instanceof HTMLElement?v.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:e,bind:e,afterCreate:this._attachToNode}):null:null};z._renderContents=function(){const {content:e}=this;return Array.isArray(e)?e.map(h=>this._renderContent(h)):this._renderContent(e)};z._getLegendOptions=function(){const {listItem:e}=this;if(!e)return{};const {layer:h,view:l}=e;return h&&l?{view:l,layerInfos:[g.getLegendLayerInfo(h)]}:{}};
z._createLegend=function(e){this._hasLegend(e)&&!this._legend&&(new Promise((h,l)=>d(["../Legend"],y=>h(Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"}))),l))).then(({default:h})=>{const {_handles:l,listItem:y}=this,r=new h(this._getLegendOptions());this._legend=r;this.notifyChange("className");this.notifyChange("title");h=F.watch(()=>{var m,D;return[null==y?void 0:y.view,null==y?void 0:y.layer,null==y?void 0:null==(m=y.layer)?void 0:m.source,null==
y?void 0:null==(D=y.layer)?void 0:D.parent]},()=>this._updateLegend(r),F.initial);l.add(h,"legends");this.scheduleRender()})};z._hasLegend=function(e){return"legend"===e?!0:Array.isArray(e)?e.includes("legend"):!1};z._attachToNode=function(e){e.appendChild(this)};z._updateLegend=function(e){e.set(this._getLegendOptions());this.scheduleRender()};z._getWidget=function(e){return"legend"===e?this._legend:q.isWidget(e)?e:null};z._getFirstWidget=function(){const {content:e}=this;if(Array.isArray(e)){let h=
null;e.some(l=>{(l=this._getWidget(l))&&(h=l);return!!l});return h}return this._getWidget(e)};u._createClass(n,[{key:"className",get:function(){const {image:e}=this,h=this._getFirstWidget();return this._get("className")||!e&&h?h.iconClass:""},set:function(e){void 0===e?this._clearOverride("className"):this._override("className",e)}},{key:"title",get:function(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0===e?this._clearOverride("title"):this._override("title",
e)}}]);return n}(f.IdentifiableMixin(k));c.__decorate([A.property()],f.prototype,"className",null);c.__decorate([A.property()],f.prototype,"content",void 0);c.__decorate([A.property()],f.prototype,"image",void 0);c.__decorate([A.property()],f.prototype,"listItem",void 0);c.__decorate([A.property()],f.prototype,"title",null);c.__decorate([A.property()],f.prototype,"open",void 0);c.__decorate([A.property()],f.prototype,"visible",void 0);return f=c.__decorate([x.subclass("esri.widgets.LayerList.ListItemPanel")],
f)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],function(d,u,c){const G=A=>f(A)||F(A),f=A=>{if(!("type"in A))return!1;switch(A.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":return!0;default:return!1}},F=A=>{const L=c.getNormalizedChildLayerProperty(A);if(A.hasOwnProperty(L)&&u.isSome(A[L]))for(const K of A[L])if(G(K))return!0;return!1};d.isValidSnappingLayer=
G;d.isValidSnappingLayerGroup=F;d.isValidSnappingLayerSource=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(d,u,c,G,f,F,A,L,K,C,x,k,g){var q;d.SnappingListItem=q=function(v){function t(z){z=v.call(this,z)||this;z.children=new G;return z}u._inheritsLoose(t,v);var n=t.prototype;n._initializeChildLayers=function(z){z=z.filter(g.isValidSnappingLayer);v.prototype._initializeChildLayers.call(this,z)};n._makeChildren=function(z){return z.map(e=>k.canDisplayLayer(e)?new q({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).reverse()};u._createClass(t,[{key:"enabled",
get:function(){return f.isSome(this.featureSource)?this.featureSource.enabled:!1}},{key:"featureSource",get:function(){const {layer:z,getFeatureSnappingSources:e}=this;return e().find(h=>h.layer===z)}}]);return t}(x);c.__decorate([F.property()],d.SnappingListItem.prototype,"children",void 0);c.__decorate([F.property()],d.SnappingListItem.prototype,"enabled",null);c.__decorate([F.property({constructOnly:!0})],d.SnappingListItem.prototype,"getFeatureSnappingSources",void 0);c.__decorate([F.property()],
d.SnappingListItem.prototype,"featureSource",null);c.__decorate([F.property()],d.SnappingListItem.prototype,"parent",void 0);d.SnappingListItem=q=c.__decorate([C.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],d.SnappingListItem);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/handleUtils ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../views/interactive/sketch/SketchLabelOptions ../views/interactive/sketch/SketchTooltipOptions ../views/interactive/snapping/SnappingOptions ./Widget ./Sketch/SketchViewModel ./support/SelectionToolbar ./support/SnappingControls ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(d,
u,c,G,f,F,A,L,K,C,x,k,g,q,v,t,n,z,e,h,l,y,r,m,D,O){const T={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0}};G=function(Q){function N(w,E){E=Q.call(this,w,E)||this;E._activeCreateOptions=null;E._defaultViewModel=null;E._menuOpen=!1;E._selectionToolbar=null;
E._selectionHandlesGroup=null;E._snappingControls=null;E._viewModelHandlesGroup=null;E.availableCreateTools=["point","polyline","polygon","rectangle","circle"];E.createGraphic=null;E.creationMode="continuous";E.defaultCreateOptions=null;E.defaultUpdateOptions=null;E.iconClass="esri-icon-edit";E.label=void 0;E.labelOptions=new v;E.layer=null;E.layout="horizontal";E.messages=null;E.snappingOptions=new n;E.tooltipOptions=new t;E.updateGraphics=new f;E.view=null;E.visibleElements={...T};E._activateCreateTool=
E._activateCreateTool.bind(u._assertThisInitialized(E));null!=w&&w.viewModel||(E._defaultViewModel=new e,E.viewModel=E._defaultViewModel);return E}u._inheritsLoose(N,Q);var P=N.prototype;P.initialize=function(){const {layer:w,view:E}=this,J=new h({view:"2d"===(null==E?void 0:E.type)?E:null,layers:w?[w]:null});this._selectionHandlesGroup=F.handlesGroup([L.when(()=>J.activeToolInfo,()=>this.viewModel.cancel()),J.on("complete",X=>this._onSelectionOperationComplete(X))]);this._selectionToolbar=J;this._setUpSnappingControls()};
P.loadDependencies=function(){return Promise.all([new Promise((w,E)=>d(["../chunks/calcite-action"],w,E)),new Promise((w,E)=>d(["../chunks/calcite-icon"],w,E))])};P.destroy=function(){this._selectionToolbar.destroy();this._cleanupViewModel();this._selectionHandlesGroup=A.removeMaybe(this._selectionHandlesGroup);this._snappingControls=A.destroyMaybe(this._snappingControls)};P.castVisibleElements=function(w){w={...T,...w,createTools:{...T.createTools,...null==w?void 0:w.createTools},selectionTools:{...T.selectionTools,
...null==w?void 0:w.selectionTools},snappingControlsElements:{...T.snappingControlsElements,...null==w?void 0:w.snappingControlsElements}};A.isSome(this._snappingControls)&&(this._snappingControls.visibleElements=w.snappingControlsElements);return w};P.create=function(w,E){this._activeCreateOptions=E||null;this.viewModel.create(w,E)};P.update=function(w,E){return this.viewModel.update(w,E)};P.complete=function(){};P.cancel=function(){this._selectionToolbar.cancel();this.viewModel.cancel()};P.undo=
function(){var w;this.viewModel.undo();null==(w=this.view)?void 0:w.focus()};P.redo=function(){var w;this.viewModel.redo();null==(w=this.view)?void 0:w.focus()};P.delete=function(){};P.render=function(){const {label:w,layout:E,viewModel:{state:J}}=this;return D.tsx("div",{"aria-label":w,class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===J,["esri-sketch--vertical"]:"vertical"===E})},D.tsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),D.tsx("div",
{class:this.classes("esri-sketch__panel","esri-sketch__info-panel")},this.renderInfoPanelContents()))};P.renderTopPanelContents=function(){const w=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:E,visibleElements:J}=this;return[D.tsx("div",{role:"menu",key:"selection-button-container",class:w},this.renderDefaultSelectionButton(),this.renderSelectionToolbar()),E&&E.length?D.tsx("div",{role:"menu",class:w},this.renderDrawButtons()):null,J.undoRedoMenu?D.tsx("div",
{role:"menu",key:"undo-redo-menu-button-container",class:w},this.renderUndoRedoMenuButtons()):null,J.settingsMenu?D.tsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};P.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();if(this.updateGraphics.length)return[D.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},
this.renderFeatureCount()),D.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),key:"delete-button-container"},this.renderDeleteButton())]};P.renderSettingsMenu=function(){const {settings:w}=this.messages;return[D.tsx("div",{role:"menu",class:"esri-sketch__menu-container",key:"settings-menu-container"},D.tsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},D.tsx("span",{class:"esri-sketch__menu-title"},w)),this.renderSnappingControls())]};P.renderSnappingControls=
function(){const {snappingControls:w}=this.visibleElements;if(A.isSome(this._snappingControls)&&w)return this._snappingControls.render()};P.renderFeatureCount=function(){const {layout:w,messages:E,updateGraphics:{length:J}}=this,X=O.substitute(1===J?E.featureCount:E.featuresCount,{count:J});return D.tsx("div",{class:"esri-sketch__feature-count-badge","aria-label":X},D.tsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===w?J:X))};P.renderDeleteButton=function(){const w=this.messages.deleteFeature;
return D.tsx("calcite-action",{bind:this,label:w,onclick:this.delete,scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"trash"}))};P.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var w=this.messages.selectFeature;return D.tsx("calcite-action",{active:"ready"===this.state,bind:this,label:w,onclick:this._activateDefaultSelectTool,scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"cursor"}))}};P.renderSelectionToolbar=function(){var w;if("2d"===
(null==(w=this.view)?void 0:w.type))return w=this.visibleElements.selectionTools,this._selectionToolbar.visibleElements={lassoTool:!!w["lasso-selection"],rectangleTool:!!w["rectangle-selection"]},this._selectionToolbar.render()};P.renderDrawButtons=function(){const w=this.visibleElements.createTools;return this.availableCreateTools.map(E=>{if("point"===E&&w.point)return this.renderPointButton();if("polyline"===E&&w.polyline)return this.renderPolylineButton();if("polygon"===E&&w.polygon)return this.renderPolygonButton();
if("rectangle"===E&&w.rectangle)return this.renderRectangleButton();if("circle"===E&&w.circle)return this.renderCircleButton()})};P.renderPointButton=function(){const w=this.messages.drawPoint;return D.tsx("calcite-action",{active:"point"===this.activeTool,bind:this,label:w,onclick:()=>this._activateCreateTool("point"),scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"pin"}))};P.renderPolygonButton=function(){const w=this.messages.drawPolygon;return D.tsx("calcite-action",{active:"polygon"===
this.activeTool,bind:this,label:w,onclick:()=>this._activateCreateTool("polygon"),scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"polygon"}))};P.renderPolylineButton=function(){const w=this.messages.drawPolyline;return D.tsx("calcite-action",{active:"polyline"===this.activeTool,bind:this,label:w,onclick:()=>this._activateCreateTool("polyline"),scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"line"}))};P.renderCircleButton=function(){const w=this.messages.drawCircle;
return D.tsx("calcite-action",{active:"circle"===this.activeTool,bind:this,label:w,onclick:()=>this._activateCreateTool("circle"),scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"circle"}))};P.renderRectangleButton=function(){const w=this.messages.drawRectangle;return D.tsx("calcite-action",{active:"rectangle"===this.activeTool,bind:this,label:w,onclick:()=>this._activateCreateTool("rectangle"),scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"rectangle"}))};P.renderUndoRedoMenuButtons=
function(){return[this.renderUndoButton(),this.renderRedoButton()]};P.renderUndoButton=function(){const w=this.messages.undo;return D.tsx("calcite-action",{disabled:!this.viewModel.canUndo(),bind:this,label:w,onclick:this.undo,scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:y.isRTL(this.container)?"redo":"undo"}))};P.renderRedoButton=function(){const w=this.messages.redo;return D.tsx("calcite-action",{disabled:!this.viewModel.canRedo(),bind:this,label:w,onclick:this.redo,scale:"s",
text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:y.isRTL(this.container)?"undo":"redo"}))};P.renderSettingsMenuButton=function(){const w=this.messages.settings;return D.tsx("calcite-action",{active:this._menuOpen,bind:this,label:w,onclick:this._toggleMenu,scale:"s",text:w,title:w},D.tsx("calcite-icon",{scale:"s",icon:"gear"}))};P._activateCreateTool=function(w){this.activeTool===w?this.cancel():(this._selectionToolbar.cancel(),this.create(w))};P._onCreateOperation=function(w){if("complete"===
w.state){var {creationMode:E}=this,{type:J}=w;if("create"===J){const {tool:X,graphic:W}=w;w=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===E?this.create(X,w):"update"===E&&this.update([W])}}};P._toggleMenu=function(){this._menuOpen=!this._menuOpen;this.scheduleRender()};P._onSelectionOperationComplete=function(w){const {viewModel:{defaultUpdateOptions:E}}=this,{selection:J}=w;!w.aborted&&J.length&&(w=E.tool,this.update(J,{...E,tool:1<J.length&&"reshape"===w?"transform":w}));
this.notifyChange("state")};P._activateDefaultSelectTool=function(){var w;this.cancel();null==(w=this.view)?void 0:w.focus()};P._cleanupViewModel=function(){this._defaultViewModel=A.destroyMaybe(this._defaultViewModel);this._viewModelHandlesGroup=A.removeMaybe(this._viewModelHandlesGroup)};P._setUpSnappingControls=function(){const {snappingOptions:w,view:E}=this;this._snappingControls=A.destroyMaybe(this._snappingControls);w&&E&&(this._snappingControls=new l({snappingOptions:w,view:E,visibleElements:this.visibleElements.snappingControlsElements}))};
u._createClass(N,[{key:"activeTool",get:function(){const w=this._selectionToolbar.activeToolInfo;if(w)switch(w.toolName){case "lasso":return"lasso-selection";case "rectangle":return"rectangle-selection";case "default":return"custom-selection"}return this.viewModel.activeTool}},{key:"state",get:function(){return this._selectionToolbar.activeToolInfo?"active":this.viewModel.state}},{key:"viewModel",set:function(w){w!==this._get("viewModel")&&((A.isNone(this._defaultViewModel)||this._defaultViewModel!==
w)&&this._cleanupViewModel(),this._set("viewModel",w),w&&(this._viewModelHandlesGroup=F.handlesGroup([w.on("create",E=>{this.scheduleRender();this._onCreateOperation(E)}),w.on("update",()=>this.scheduleRender()),w.on("delete",E=>this.emit("delete",E)),w.on("undo",()=>this.scheduleRender()),w.on("redo",()=>this.scheduleRender()),L.watch(()=>w.layer,E=>{this._selectionToolbar.layers=E?[E]:null}),L.watch(()=>w.view,E=>{this._selectionToolbar.view="2d"===(null==E?void 0:E.type)?E:null;this._setUpSnappingControls()}),
L.watch(()=>w.state,()=>this.notifyChange("state"))])))}}]);return N}(z);c.__decorate([g.property()],G.prototype,"activeTool",null);c.__decorate([g.property({cast:Q=>{if(!Q||!Q.length)return null;const N=new Set(["point","polyline","polygon","rectangle","circle"]);return Q.filter(P=>N.has(P))}})],G.prototype,"availableCreateTools",void 0);c.__decorate([K.aliasOf("viewModel.createGraphic")],G.prototype,"createGraphic",void 0);c.__decorate([g.property()],G.prototype,"creationMode",void 0);c.__decorate([K.aliasOf("viewModel.defaultCreateOptions")],
G.prototype,"defaultCreateOptions",void 0);c.__decorate([K.aliasOf("viewModel.defaultUpdateOptions")],G.prototype,"defaultUpdateOptions",void 0);c.__decorate([g.property()],G.prototype,"iconClass",void 0);c.__decorate([g.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],G.prototype,"label",void 0);c.__decorate([K.aliasOf("viewModel.labelOptions")],G.prototype,"labelOptions",void 0);c.__decorate([K.aliasOf("viewModel.layer")],G.prototype,"layer",void 0);c.__decorate([g.property({type:["horizontal",
"vertical"]})],G.prototype,"layout",void 0);c.__decorate([g.property(),r.messageBundle("esri/widgets/Sketch/t9n/Sketch")],G.prototype,"messages",void 0);c.__decorate([K.aliasOf("viewModel.snappingOptions")],G.prototype,"snappingOptions",void 0);c.__decorate([g.property()],G.prototype,"state",null);c.__decorate([K.aliasOf("viewModel.tooltipOptions")],G.prototype,"tooltipOptions",void 0);c.__decorate([K.aliasOf("viewModel.updateGraphics")],G.prototype,"updateGraphics",void 0);c.__decorate([K.aliasOf("viewModel.view")],
G.prototype,"view",void 0);c.__decorate([g.property(),m.vmEvent(["create","update","undo","redo"])],G.prototype,"viewModel",null);c.__decorate([g.property()],G.prototype,"visibleElements",void 0);c.__decorate([k.cast("visibleElements")],G.prototype,"castVisibleElements",null);c.__decorate([K.aliasOf("viewModel.complete")],G.prototype,"complete",null);c.__decorate([K.aliasOf("viewModel.delete")],G.prototype,"delete",null);return G=c.__decorate([q.subclass("esri.widgets.Sketch")],G)});