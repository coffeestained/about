// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/Evented ../core/events ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ../chunks/componentsUtils ./support/jsxWidgetSupport ./support/tests ./support/vnodeCache ./support/widgetUtils ../intl/locale ../intl/messages".split(" "),
function(n,f,d,G,H,D,I,ba,J,K,E,L,w,x,M,g,N,O,P,Q,R,S,A,T,v,U,V,W){function F(l,e){for(const c in e)null!=l[c]&&("object"===typeof l[c]&&"object"===typeof e[c]?F(l[c],e[c]):l[c]=e[c]);return l}const X=K.getLogger("esri.widgets.Widget");let Y=0;const Z=R.createAdvancedProjector({postProcessProjectionOptions(l){const e=l.eventHandlerInterceptor,c=/capture$/i;l.eventHandlerInterceptor=(b,q,a,r)=>{const p=e(b,q,a,r),t=c.test(b);b=b.replace(c,"");if(!(b.toLowerCase()in a)||t){const m=b[2].toLowerCase()+
b.slice(3),h=u=>p.call(a,u);a.addEventListener(m,h,t);const k=r.afterRemoved;r.afterRemoved=u=>{null==k?void 0:k(u);a.removeEventListener(m,h,t)}}return p}},handleInterceptedEvent(l,e,c,b){const {eventPhase:q,type:a}=b,r=q===Event.CAPTURING_PHASE;let p=`on${a}${r?"capture":""}`;e=e.properties;if(!(p in e||(p=`on${a[0].toUpperCase()}${a.slice(1)}${r?"Capture":""}`,p in e)))return;v.clearVNodeCache();l.scheduleRender();e[p].call(e.bind||c,b)}});let B=!1;d=function(l){function e(b,q){var a=l.call(this,
b,q)||this;a._attached=!1;a._internalHandles=new I;a._projector=Z;a._readyForTrueRender=!1;a.domNode=null;a.iconClass="esri-icon-checkbox-unchecked";a.label=a.declaredClass.split(".").pop();a.visible=!0;a.key=n._assertThisInitialized(a);a._loadLocale=w.debounce(n._asyncToGenerator(function*(){if(a._messageBundleProps&&a._messageBundleProps.length){const m=yield w.eachAlways(a._messageBundleProps.map(function(){var h=n._asyncToGenerator(function*({bundlePath:k,propertyName:u}){k=yield W.fetchMessageBundle(k);
a.uiStrings&&Object.keys(a.uiStrings)&&(k=F(J.clone(k),a.uiStrings));a[u]=k});return function(k){return h.apply(this,arguments)}}()));for(const h of m)h.error&&X.error("widget-intl:locale-error",a.declaredClass,h.error)}yield a.loadLocale()}));S.commitAssetPath();const r="esri-widget-uid-"+M.generateUUID(),p=a.render.bind(n._assertThisInitialized(a));a._trackingTarget=new Q.SimpleTrackingTarget(()=>a.scheduleRender());const t=()=>{var m;if(!a._readyForTrueRender||a.destroyed)return null;if(!a.visible)return{vnodeSelector:"div",
properties:{key:r,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const h=p();let {properties:k}=h;k||(h.properties=k={});let {key:u,styles:y}=k;u||(k.key=r);y||(k.styles=y={});y.display||(y.display="");let aa=0;null==(m=h.children)?void 0:m.forEach(C=>{if(!A.isWidgetConstructor(C.vnodeSelector)){var {properties:z}=C;z||(C.properties=z={});z.key||(z.key=`${a.id}--${aa++}`)}});return A.processWidgets(n._assertThisInitialized(a),h)};a.render=()=>{if(B)return t();let m=
v.getVNodeCache(n._assertThisInitialized(a));if(m)return m;a._trackingTarget.clear();B=!0;try{m=P.runTracked(a._trackingTarget,t)}catch(h){throw console.error(h),h;}finally{B=!1}v.setVNodeCache(n._assertThisInitialized(a),m);return m};a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));T.registerLoading(a._resourcesFetch);return a}n._inheritsLoose(e,l);var c=e.prototype;c.normalizeCtorArgs=function(b,q){b={...b};q&&(b.container=q);
return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(w.throwIfNotAbortError)};c.loadDependencies=function(){var b=n._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.loadLocale=function(){var b=n._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.destroy=function(){this.destroyed||(E.destroyMaybe(this._trackingTarget),E.destroyMaybe(this.viewModel),
this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,v.deleteVNodeCache(this))};c.castContainer=function(b){return G.byId(b)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(v.deleteVNodeCache(this),this._projector.scheduleRender())};c.classes=function(...b){return U.classes.apply(this,b)};c.renderNow=function(){v.deleteVNodeCache(this);this._projector.renderNow()};
c._postInitialize=function(){var b,q=this;this.destroyed||(this.scheduleRender(),null!=(b=this._delegatedEventNames)&&b.length&&this._internalHandles.add(x.watch(()=>this.viewModel,(a,r)=>{r&&this._internalHandles.remove("delegated-events");a&&D.isEventTarget(a)&&this._internalHandles.add(this._delegatedEventNames.map(p=>D.on(a,p,t=>{this.emit(p,t)})),"delegated-events")},x.initial)),this.postInitialize(),b=function(){var a=n._asyncToGenerator(function*(){yield q._loadLocale().catch(w.throwIfNotAbortError);
q.scheduleRender()});return function(){return a.apply(this,arguments)}}(),this._internalHandles.add([V.onLocaleChange(b),x.watch(()=>this.uiStrings,b),x.when(()=>this.container,a=>{this.destroyed||this._attach(a)},{initial:!0,once:!0})]))};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){b&&this._attached&&(this._projector.detach(this.render),b.parentNode&&b.parentNode.removeChild(b),this._attached=!1)};n._createClass(e,[{key:"container",set:function(b){this._get("container")||
this._set("container",b)}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Y++},set:function(b){b&&this._set("id",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"test",get:function(){return{projector:this._projector}}}]);return e}(L.EsriPromiseMixin(H.EventedAccessor));d[A.WIDGET_SYMBOL]=!0;f.__decorate([g.property()],d.prototype,"_readyForTrueRender",void 0);f.__decorate([g.property({value:null})],d.prototype,
"container",null);f.__decorate([N.cast("container")],d.prototype,"castContainer",null);f.__decorate([g.property({aliasOf:"container"})],d.prototype,"domNode",void 0);f.__decorate([g.property()],d.prototype,"iconClass",void 0);f.__decorate([g.property()],d.prototype,"id",null);f.__decorate([g.property()],d.prototype,"label",void 0);f.__decorate([g.property()],d.prototype,"renderable",null);f.__decorate([g.property()],d.prototype,"uiStrings",void 0);f.__decorate([g.property()],d.prototype,"viewModel",
void 0);f.__decorate([g.property()],d.prototype,"visible",void 0);f.__decorate([g.property()],d.prototype,"key",void 0);f.__decorate([g.property()],d.prototype,"children",void 0);f.__decorate([g.property()],d.prototype,"afterCreate",void 0);f.__decorate([g.property()],d.prototype,"afterUpdate",void 0);f.__decorate([g.property()],d.prototype,"afterRemoved",void 0);return d=f.__decorate([O.subclass("esri.widgets.Widget")],d)});