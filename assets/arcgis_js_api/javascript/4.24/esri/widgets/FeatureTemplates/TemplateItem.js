// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(l,k,g,y,e,z,A,u,v,h,G,H,I,B,C){function D(b,c){return m.apply(this,arguments)}function m(){m=
k._asyncToGenerator(function*(b,c){var {renderer:d}=b;return d&&(c=new y({attributes:c.prototype.attributes}),d=yield d.getSymbolAsync(c))?d:E(b)});return m.apply(this,arguments)}function E(b){return n.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*(b){({geometryType:b}=b);return(b="point"===b||"multipoint"===b?yield new Promise((c,d)=>l(["../../symbols/SimpleMarkerSymbol"],a=>c(p(a)),d)):"polyline"===b?yield new Promise((c,d)=>l(["../../symbols/SimpleLineSymbol"],a=>c(p(a)),d)):
"polygon"===b||"mesh"===b||"multipatch"===b?yield new Promise((c,d)=>l(["../../symbols/SimpleFillSymbol"],a=>c(p(a)),d)):null)?new b.default:null});return n.apply(this,arguments)}const p=b=>Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));var q;const F=A.getLogger("esri.widgets.FeatureTemplates.TemplateItem");e=q=function(b){function c(a){a=b.call(this,a)||this;a._activeFetchInfo={id:null,request:null};a.description=null;a.label=null;a.layer=null;
a.template=null;a.thumbnail=null;return a}k._inheritsLoose(c,b);var d=c.prototype;d.initialize=function(){this.handles.add(v.watch(()=>{const {layer:a}=this;return[a&&"renderer"in a?a.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)},v.initial))};d.clone=function(){const a=u.isSome(this.thumbnail)?this.thumbnail.cloneNode(!0):null,f=new q({layer:this.layer,template:this.template});f._set("thumbnail",a);return f};c.fetchThumbnail=
function(){var a=k._asyncToGenerator(function*(f,r){var w;if("subtype-group"===f.type)return F.warn("Thumbnails for sublayers of a SubtypeGroupLayer are not yet supported."),null;const x=yield D(f,r);if(u.isNone(x))return null;const t={maxSize:36};"dictionary"===(null==(w=f.renderer)?void 0:w.type)&&(t.fieldMap=f.renderer.fieldMap,t.feature={attributes:r.prototype.attributes});return yield C.renderPreviewHTML(x,t)});return function(f,r){return a.apply(this,arguments)}}();return c}(z.HandleOwnerMixin(e));
g.__decorate([h.property({aliasOf:"template.description"})],e.prototype,"description",void 0);g.__decorate([h.property({aliasOf:"template.name"})],e.prototype,"label",void 0);g.__decorate([h.property()],e.prototype,"layer",void 0);g.__decorate([h.property()],e.prototype,"template",void 0);g.__decorate([h.property({readOnly:!0})],e.prototype,"thumbnail",void 0);return e=q=g.__decorate([B.subclass("esri.widgets.FeatureTemplates.TemplateItem")],e)});