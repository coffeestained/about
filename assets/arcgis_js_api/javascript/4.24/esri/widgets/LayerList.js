// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(S,G,r,E,R,Z,L,D,m,P,K,z,C){const ia=r.ofType(z);r=
function(ma){function ca(t){t=ma.call(this,t)||this;t._handles=new R;t.listItemCreatedFunction=null;t.operationalItems=new ia;t.view=null;return t}S._inheritsLoose(ca,ma);var F=ca.prototype;F.initialize=function(){this._handles.add([Z.watch(()=>{var t;return[this.view,null==(t=this.view)?void 0:t.ready]},()=>this._viewHandles(),Z.initial),Z.watch(()=>this.listItemCreatedFunction,()=>this._listItemCreatedFunctionChanged())],"view")};F.destroy=function(){this._handles.destroy();this.view=this._handles=
null;this.operationalItems.removeAll()};F.triggerAction=function(t,n){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:n})};F.moveListItem=function(t,n,A,u){var T,da;const Q=null==t?void 0:t.layer;if(Q){var p=null==(T=this.view)?void 0:null==(da=T.map)?void 0:da.layers;T=n?C.getItemLayers(n):p;p=A?C.getItemLayers(A):p;T&&p&&({operationalItems:da}=this,n=(null==n?void 0:n.children)||da,da=(null==A?void 0:A.children)||da,u=p.length-u,t.parent=A||null,n.includes(t)&&n.remove(t),T.includes(Q)&&
T.remove(Q),da.includes(t)||da.add(t,u),p.includes(Q)||p.add(Q,u))}};F._createLayerViewHandles=function(t){const {_handles:n}=this;n.remove("layer-views");this._compileList();t&&n.add(t.on("change",()=>this._compileList()),"layer-views")};F._createMapLayerHandles=function(t){const {_handles:n}=this;n.remove("map-layers");this._compileList();t&&n.add(t.on("change",()=>this._compileList()),"map-layers")};F._createListItem=function(t){const {view:n,listItemCreatedFunction:A}=this;return new z({layer:t,
listItemCreatedFunction:A,view:n})};F._removeAllItems=function(){const {_handles:t,operationalItems:n}=this;n.forEach(A=>{t.remove(`${"children"}-${A.uid}`)});n.removeAll()};F._getViewableLayers=function(t){if(t)return t.filter(n=>"hide"!==C.findLayerListMode(n))};F._watchLayersListMode=function(t){const {_handles:n}=this;n.remove("layer-list-mode");t&&t.forEach(A=>{"listMode"in A&&n.add(Z.watch(()=>A.listMode,()=>this._compileList()),"layer-list-mode")})};F._compileList=function(){var t=this.get("view.map.layers");
this._watchLayersListMode(t);(t=this._getViewableLayers(t))&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()};F._createNewItems=function(t){const {operationalItems:n}=this;t.forEach(A=>{n.find(u=>u.layer===A)||n.add(this._createListItem(A))})};F._removeItems=function(t){const {_handles:n,operationalItems:A}=this,u=[];A.forEach(T=>{T&&t&&t.includes(T.layer)||(n.remove(`${"children"}-${T.uid}`),u.push(T))});A.removeMany(u)};F._sortItems=function(t){const {operationalItems:n}=
this;n.sort((A,u)=>{A=t.indexOf(A.layer);u=t.indexOf(u.layer);return A>u?-1:A<u?1:0})};F._listItemCreatedFunctionChanged=function(){this._removeAllItems();this._compileList()};F._viewHandles=function(){const {_handles:t,view:n}=this;t.remove(["map-layers","layer-views","view-layers"]);this._compileList();n&&n.ready&&t.add([Z.watch(()=>{var A,u;return null==(A=this.view)?void 0:null==(u=A.map)?void 0:u.allLayers},A=>this._createMapLayerHandles(A),Z.initial),Z.watch(()=>{var A;return null==(A=this.view)?
void 0:A.allLayerViews},A=>this._createLayerViewHandles(A),Z.initial)],"view-layers")};S._createClass(ca,[{key:"state",get:function(){const t=this.get("view");return this.get("view.ready")?"ready":t?"loading":"disabled"}}]);return ca}(E.EventedAccessor);G.__decorate([L.property()],r.prototype,"listItemCreatedFunction",void 0);G.__decorate([L.property({type:ia})],r.prototype,"operationalItems",void 0);G.__decorate([L.property({readOnly:!0})],r.prototype,"state",null);G.__decorate([L.property()],r.prototype,
"view",void 0);return r=G.__decorate([K.subclass("esri.widgets.LayerList.LayerListViewModel")],r)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(S,G,r,E,R,Z,L,D,m,P,K,z,C,ia,ma,ca,F,t,n){var A;m=E.ofType({key:"type",defaultKeyValue:"button",base:ia,typeMap:{button:ma,toggle:F,slider:ca}});const u=E.ofType(m);r=A=function(T){function da(p){p=T.call(this,p)||this;p.actionsSections=new u;p.actionsOpen=!1;p.children=new (E.ofType(A));p.childrenSortable=!0;p.error=null;p.hidden=!1;p.layer=null;p.layerView=null;p.listItemCreatedFunction=null;p.open=!1;p.panel=null;p.parent=null;p.sortable=!0;p.view=null;p.visible=null;return p}S._inheritsLoose(da,
T);var Q=da.prototype;Q.initialize=function(){this.handles.add([L.watch(()=>this.layer,p=>this._watchLayerProperties(p),L.initial),L.watch(()=>this.view,p=>this._updateChildren(p),L.initial),L.watch(()=>this.panel,p=>this._setListItemOnPanel(p),L.initial),L.watch(()=>[this.layer,this.view],()=>this._getLayerView(),L.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:this})};Q.destroy=function(){this.view=null};Q.castPanel=function(p){this.get("panel.open")&&
!p.hasOwnProperty("open")&&(p.open=!0);return p?new t(p):null};Q.clone=function(){return new A({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};Q._setListItemOnPanel=function(p){p&&(p.listItem=this)};Q._updateChildren=function(p){const W=this.children;W&&W.forEach(qa=>qa.view=p)};Q._addChildren=
function(p){this.handles.remove("child-list-mode");this.children.removeAll();if(p){p.forEach(qa=>{this.handles.add(L.watch(()=>qa.listMode,()=>this._addChildren(p)),"child-list-mode")});var W=p.filter(qa=>"hide"!==n.findLayerListMode(qa));this.children.addMany(this._makeChildren(W))}};Q._watchSublayerChanges=function(p){p&&this.handles.add(p.on("change",()=>{this._addChildren(p)}),"layer")};Q._initializeChildLayers=function(p){this._addChildren(p);this._watchSublayerChanges(p)};Q._makeChildren=function(p){return p.map(W=>
n.canDisplayLayer(W)?new A({layer:W,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()};Q._watchLayerProperties=function(p){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),p))if(this.handles.add(L.watch(()=>p.listMode,()=>this._watchLayerProperties(p)),"layer"),"hide-children"===n.findLayerListMode(p))this.children.removeAll();else{var W=n.getNormalizedChildLayerProperty(p);W&&this.handles.add(L.watch(()=>p[W],()=>
{p.hasOwnProperty(W)&&this._initializeChildLayers(p[W])},L.initial),"layer")}};Q._getLayerView=function(){var p=S._asyncToGenerator(function*(){const {layer:W,view:qa}=this;if(W&&qa)try{const va=yield qa.whenLayerView(W);va.layer===this.layer&&this._set("layerView",va)}catch{}});return function(){return p.apply(this,arguments)}}();Q._isLayerUpdating=function(p){return p&&"loading"===p.loadStatus};S._createClass(da,[{key:"connectionStatus",get:function(){const {layerView:p}=this;if(p&&"connectionStatus"in
p)return p.connectionStatus}},{key:"incompatible",get:function(){const {layerView:p}=this;return p&&"spatialReferenceSupported"in p?!p.spatialReferenceSupported:!1}},{key:"title",get:function(){const p=this.get("layer.layer");return(!p||p&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(p){void 0===p?this._clearOverride("title"):this._override("title",p)}},{key:"updating",get:function(){const {layerView:p,connectionStatus:W}=this;return W?
!1:p?p.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!n.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return n.findLayerVisibilityMode(this.layer)}}]);return da}(Z.IdentifiableMixin(R.HandleOwnerMixin(r)));G.__decorate([z.property({type:u})],r.prototype,"actionsSections",void 0);G.__decorate([z.property()],r.prototype,"actionsOpen",void 0);G.__decorate([z.property({type:E})],r.prototype,"children",
void 0);G.__decorate([z.property()],r.prototype,"childrenSortable",void 0);G.__decorate([z.property({readOnly:!0})],r.prototype,"connectionStatus",null);G.__decorate([D.aliasOf("layer.loadError?")],r.prototype,"error",void 0);G.__decorate([z.property()],r.prototype,"hidden",void 0);G.__decorate([z.property({readOnly:!0})],r.prototype,"incompatible",null);G.__decorate([z.property()],r.prototype,"layer",void 0);G.__decorate([z.property({readOnly:!0})],r.prototype,"layerView",void 0);G.__decorate([z.property()],
r.prototype,"listItemCreatedFunction",void 0);G.__decorate([z.property()],r.prototype,"open",void 0);G.__decorate([z.property({type:t})],r.prototype,"panel",void 0);G.__decorate([K.cast("panel")],r.prototype,"castPanel",null);G.__decorate([z.property()],r.prototype,"parent",void 0);G.__decorate([z.property()],r.prototype,"sortable",void 0);G.__decorate([z.property()],r.prototype,"title",null);G.__decorate([z.property({readOnly:!0})],r.prototype,"updating",null);G.__decorate([z.property({value:null})],
r.prototype,"view",void 0);G.__decorate([D.aliasOf("layer.visible")],r.prototype,"visible",void 0);G.__decorate([z.property({readOnly:!0})],r.prototype,"visibleAtCurrentScale",null);G.__decorate([z.property({readOnly:!0})],r.prototype,"visibilityMode",null);return r=A=G.__decorate([C.subclass("esri.widgets.LayerList.ListItem")],r)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(S,G,r,E,R,Z,L,D){var m;E=m=function(P){function K(z){z=P.call(this,z)||this;z.displayValueEnabled=!1;z.max=1;z.min=0;z.step=.1;z.type="slider";z.value=null;return z}S._inheritsLoose(K,P);K.prototype.clone=function(){return new m({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return K}(D);G.__decorate([r.property()],
E.prototype,"displayValueEnabled",void 0);G.__decorate([r.property()],E.prototype,"max",void 0);G.__decorate([r.property()],E.prototype,"min",void 0);G.__decorate([r.property()],E.prototype,"step",void 0);G.__decorate([r.property()],E.prototype,"value",void 0);return E=m=G.__decorate([L.subclass("esri.support.Action.ActionSlider")],E)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(S,G,r,E,R,Z,L,D,m,P,K,z,C,ia,ma){R=function(ca){function F(n,A){n=ca.call(this,n,A)||this;n._legend=null;n._handles=new E;n.content=null;n.image=null;n.listItem=null;n.open=!1;n.visible=!0;return n}G._inheritsLoose(F,ca);var t=F.prototype;t.initialize=function(){this.own([Z.watch(()=>this.content,n=>this._createLegend(n),Z.initial)])};t.destroy=function(){const {_legend:n}=this;n&&n.destroy();this._legend=null};t.render=function(){return ma.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
t._renderContent=function(n){const {_legend:A,listItem:u}=this;return n?"legend"===n?u&&u.view&&u.layer&&A?ma.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:A},A.render()):null:"string"===typeof n?ma.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:n,innerHTML:n}):ia.isWidget(n)?ma.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:n},n.render()):n instanceof HTMLElement?ma.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:n,bind:n,afterCreate:this._attachToNode}):null:null};t._renderContents=function(){const {content:n}=this;return Array.isArray(n)?n.map(A=>this._renderContent(A)):this._renderContent(n)};t._getLegendOptions=function(){const {listItem:n}=this;if(!n)return{};const {layer:A,view:u}=n;return A&&u?{view:u,layerInfos:[C.getLegendLayerInfo(A)]}:
{}};t._createLegend=function(n){this._hasLegend(n)&&!this._legend&&(new Promise((A,u)=>S(["../Legend"],T=>A(Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}))),u))).then(({default:A})=>{const {_handles:u,listItem:T}=this,da=new A(this._getLegendOptions());this._legend=da;this.notifyChange("className");this.notifyChange("title");A=Z.watch(()=>{var Q,p;return[null==T?void 0:T.view,null==T?void 0:T.layer,null==T?void 0:null==(Q=T.layer)?void 0:Q.source,
null==T?void 0:null==(p=T.layer)?void 0:p.parent]},()=>this._updateLegend(da),Z.initial);u.add(A,"legends");this.scheduleRender()})};t._hasLegend=function(n){return"legend"===n?!0:Array.isArray(n)?n.includes("legend"):!1};t._attachToNode=function(n){n.appendChild(this)};t._updateLegend=function(n){n.set(this._getLegendOptions());this.scheduleRender()};t._getWidget=function(n){return"legend"===n?this._legend:ia.isWidget(n)?n:null};t._getFirstWidget=function(){const {content:n}=this;if(Array.isArray(n)){let A=
null;n.some(u=>{(u=this._getWidget(u))&&(A=u);return!!u});return A}return this._getWidget(n)};G._createClass(F,[{key:"className",get:function(){const {image:n}=this,A=this._getFirstWidget();return this._get("className")||!n&&A?A.iconClass:""},set:function(n){void 0===n?this._clearOverride("className"):this._override("className",n)}},{key:"title",get:function(){const n=this._getFirstWidget();return this._get("title")||n?n.label:""},set:function(n){void 0===n?this._clearOverride("title"):this._override("title",
n)}}]);return F}(R.IdentifiableMixin(z));r.__decorate([L.property()],R.prototype,"className",null);r.__decorate([L.property()],R.prototype,"content",void 0);r.__decorate([L.property()],R.prototype,"image",void 0);r.__decorate([L.property()],R.prototype,"listItem",void 0);r.__decorate([L.property()],R.prototype,"title",null);r.__decorate([L.property()],R.prototype,"open",void 0);r.__decorate([L.property()],R.prototype,"visible",void 0);return R=r.__decorate([K.subclass("esri.widgets.LayerList.ListItemPanel")],
R)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(S){function G(m){if(m)return null!=m.listMode?m.listMode:void 0}function r(m){if(m)return null!=m.minScale?m.minScale:void 0}function E(m){if(m)return null!=m.maxScale?m.maxScale:void 0}function R(m){if(m){if(!("type"in m))return"sublayers";if(m.listMode!==D.hideChildren&&"wmts"!==m.type)switch(m.type){case "group":return"layers";default:return"sublayers"}}}function Z(m,P){m&&m.sort((K,z)=>{K=P.indexOf(K.uid);
z=P.indexOf(z.uid);return K>z?-1:K<z?1:0})}function L(m){return!(null==m||!m.layer)}const D={hide:"hide",hideChildren:"hide-children"};S.canDisplayLayer=function(m){return G(m)!==D.hide};S.canSortSublayers=function(m){m=m&&(m.get("layer.layer")||m.layer);if(!m)return!1;m=m.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof m?m:!0};S.findLayerListMode=G;S.findLayerMaxScale=E;S.findLayerMinScale=r;S.findLayerVisibilityMode=function(m){if(!m)return"inherited";var P=m.get("layer.capabilities.exportMap.supportsSublayerVisibility");
if("boolean"===typeof P)return P?"independent":"inherited";P=m.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof P?P?"independent":"inherited":null!=m.visibilityMode?m.visibilityMode:"independent"};S.findSelectedItem=function(m,P){var K;const z=null==(K=m.layer)?void 0:K.uid;return z&&P.find(C=>{var ia;return(null==(ia=C.layer)?void 0:ia.uid)===z})};S.getItemLayers=function(m){return(m=null==m?void 0:m.layer)&&"group"===m.type?m.layers:null};S.getLegendLayerInfo=function(m){var P=
L(m)?m:null;const K=null==m?void 0:m.parent;return(P="map-image"===(null==K?void 0:K.type)&&P.source)&&K?{layer:K,title:"",sublayerIds:[P.mapLayerId]}:{layer:m,title:""}};S.getNormalizedChildLayerProperty=R;S.isLayerOutsideScaleRange=function(m,P){if(!m||isNaN(P))return!1;var K=r(m);m=E(m);K=!isNaN(K)&&0<K&&P>K;P=!isNaN(m)&&0<m&&P<m;return K||P};S.isSublayer=L;S.sortChildLayersToIds=function(m,P){if(m=null==m?void 0:m.layer){var K=R(m);K&&(m=m.get(K),Z(m,P))}};S.sortLayersToIds=Z;Object.defineProperties(S,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(S){function G(a,c){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);c&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable}));d.push.apply(d,e)}return d}function r(a){for(var c=1;c<arguments.length;c++){var d=null!=arguments[c]?arguments[c]:{};c%2?G(Object(d),!0).forEach(function(e){var h=d[e];e in
a?Object.defineProperty(a,e,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[e]=h}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):G(Object(d)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(d,e))})}return a}function E(a){"@babel/helpers - typeof";E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&
c!==Symbol.prototype?"symbol":typeof c};return E(a)}function R(){R=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a};return R.apply(this,arguments)}function Z(a,c){if(null==a)return{};if(null==a)var d={};else{d={};var e=Object.keys(a),h;for(h=0;h<e.length;h++){var k=e[h];0<=c.indexOf(k)||(d[k]=a[k])}}if(Object.getOwnPropertySymbols)for(h=Object.getOwnPropertySymbols(a),k=0;k<h.length;k++)e=
h[k],0<=c.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(d[e]=a[e]);return d}function L(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function D(a,c,d){a.addEventListener(c,d,!Ca&&wb)}function m(a,c,d){a.removeEventListener(c,d,!Ca&&wb)}function P(a,c){if(c){"\x3e"===c[0]&&(c=c.substring(1));if(a)try{if(a.matches)return a.matches(c);if(a.msMatchesSelector)return a.msMatchesSelector(c);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(c)}catch(d){}return!1}}
function K(a,c,d,e){if(a){d=d||document;do{if(null!=c&&("\x3e"===c[0]?a.parentNode===d&&P(a,c):P(a,c))||e&&a===d)return a;if(a===d)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function z(a,c,d){if(a&&c)if(a.classList)a.classList[d?"add":"remove"](c);else{var e=(" "+a.className+" ").replace(xb," ").replace(" "+c+" "," ");a.className=(e+(d?" "+c:"")).replace(xb," ")}}function C(a,c,d){var e=a&&a.style;if(e){if(void 0===d)return document.defaultView&&document.defaultView.getComputedStyle?
d=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),void 0===c?d:d[c];c in e||-1!==c.indexOf("webkit")||(c="-webkit-"+c);e[c]=d+("string"===typeof d?"":"px")}}function ia(a,c){var d="";if("string"===typeof a)d=a;else{do{var e=C(a,"transform");e&&"none"!==e&&(d=e+" "+d)}while(!c&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(d)}function ma(a,c,d){if(a){a=a.getElementsByTagName(c);c=0;var e=a.length;if(d)for(;c<
e;c++)d(a[c],c);return a}return[]}function ca(){var a=document.scrollingElement;return a?a:document.documentElement}function F(a,c,d,e,h){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==ca()){var k=a.getBoundingClientRect();var l=k.top;var x=k.left;var B=k.bottom;var H=k.right;var I=k.height;var N=k.width}else x=l=0,B=window.innerHeight,H=window.innerWidth,I=window.innerHeight,N=window.innerWidth;if((c||d)&&a!==window&&(h=h||a.parentNode,!Ca)){do if(h&&h.getBoundingClientRect&&
("none"!==C(h,"transform")||d&&"static"!==C(h,"position"))){B=h.getBoundingClientRect();l-=B.top+parseInt(C(h,"border-top-width"));x-=B.left+parseInt(C(h,"border-left-width"));B=l+k.height;H=x+k.width;break}while(h=h.parentNode)}e&&a!==window&&(e=(a=ia(h||a))&&a.a,h=a&&a.d,a&&(l/=h,x/=e,N/=e,I/=h,B=l+I,H=x+N));return{top:l,left:x,bottom:B,right:H,width:N,height:I}}}function t(a,c,d){var e=Q(a,!0);for(a=F(a)[c];e;){c=F(e)[d];var h=void 0;h="top"===d||"left"===d?a>=c:a<=c;if(!h)return e;if(e===ca())break;
e=Q(e,!1)}return!1}function n(a,c,d,e){for(var h=0,k=0,l=a.children;k<l.length;){if("none"!==l[k].style.display&&l[k]!==b.ghost&&(e||l[k]!==b.dragged)&&K(l[k],d.draggable,a,!1)){if(h===c)return l[k];h++}k++}return null}function A(a,c){for(a=a.lastElementChild;a&&(a===b.ghost||"none"===C(a,"display")||c&&!P(a,c));)a=a.previousElementSibling;return a||null}function u(a,c){var d=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===b.clone||c&&!P(a,
c)||d++;return d}function T(a){var c=0,d=0,e=ca();if(a){do{var h=ia(a),k=h.d;c+=a.scrollLeft*h.a;d+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[c,d]}function da(a,c){for(var d in a)if(a.hasOwnProperty(d))for(var e in c)if(c.hasOwnProperty(e)&&c[e]===a[d][e])return Number(d);return-1}function Q(a,c){if(!a||!a.getBoundingClientRect)return ca();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=C(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==
e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(d||c)return a;d=!0}}while(a=a.parentNode);return ca()}function p(a,c){return Math.round(a.top)===Math.round(c.top)&&Math.round(a.left)===Math.round(c.left)&&Math.round(a.height)===Math.round(c.height)&&Math.round(a.width)===Math.round(c.width)}function W(a,c){return function(){if(!Sa){var d=arguments;1===d.length?a.call(this,d[0]):a.apply(this,d);Sa=setTimeout(function(){Sa=
void 0},c)}}}function qa(a,c,d){a.scrollLeft+=c;a.scrollTop+=d}function va(a){var c=window.Polymer,d=window.jQuery||window.Zepto;return c&&c.dom?c.dom(a).cloneNode(!0):d?d(a).clone(!0)[0]:a.cloneNode(!0)}function Ha(){var a=[],c;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(d){if("none"!==C(d,"display")&&d!==b.ghost){a.push({target:d,rect:F(d)});var e=r({},a[a.length-1].rect);if(d.thisAnimationDuration){var h=ia(d,!0);h&&(e.top-=
h.f,e.left-=h.e)}d.fromRect=e}})},addAnimationState:function(d){a.push(d)},removeAnimationState:function(d){a.splice(da(a,{target:d}),1)},animateAll:function(d){var e=this;if(this.options.animation){var h=!1,k=0;a.forEach(function(l){var x=0,B=l.target,H=B.fromRect,I=F(B),N=B.prevFromRect,ja=B.prevToRect;l=l.rect;var ea=ia(B,!0);ea&&(I.top-=ea.f,I.left-=ea.e);B.toRect=I;B.thisAnimationDuration&&p(N,I)&&!p(H,I)&&(l.top-I.top)/(l.left-I.left)===(H.top-I.top)/(H.left-I.left)&&(x=Math.sqrt(Math.pow(N.top-
l.top,2)+Math.pow(N.left-l.left,2))/Math.sqrt(Math.pow(N.top-ja.top,2)+Math.pow(N.left-ja.left,2))*e.options.animation);p(I,H)||(B.prevFromRect=H,B.prevToRect=I,x||(x=e.options.animation),e.animate(B,l,I,x));x&&(h=!0,k=Math.max(k,x),clearTimeout(B.animationResetTimer),B.animationResetTimer=setTimeout(function(){B.animationTime=0;B.prevFromRect=null;B.fromRect=null;B.prevToRect=null;B.thisAnimationDuration=null},x),B.thisAnimationDuration=x)});clearTimeout(c);h?c=setTimeout(function(){"function"===
typeof d&&d()},k):"function"===typeof d&&d();a=[]}else clearTimeout(c),"function"===typeof d&&d()},animate:function(d,e,h,k){if(k){C(d,"transition","");C(d,"transform","");var l=ia(this.el),x=(e.left-h.left)/(l&&l.a||1);e=(e.top-h.top)/(l&&l.d||1);d.animatingX=!!x;d.animatingY=!!e;C(d,"transform","translate3d("+x+"px,"+e+"px,0)");this.forRepaintDummy=d.offsetWidth;C(d,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));C(d,"transform","translate3d(0,0,0)");"number"===
typeof d.animated&&clearTimeout(d.animated);d.animated=setTimeout(function(){C(d,"transition","");C(d,"transform","");d.animated=!1;d.animatingX=!1;d.animatingY=!1},k)}}}}function w(a){var c=r({putSortable:ka,cloneEl:aa,targetEl:v,rootEl:Y,oldIndex:La,oldDraggableIndex:Ta,newIndex:sa,newDraggableIndex:Ea},a);a=c.sortable;var d=c.rootEl,e=c.name,h=c.targetEl,k=c.cloneEl,l=c.toEl,x=c.fromEl,B=c.oldIndex,H=c.newIndex,I=c.oldDraggableIndex,N=c.newDraggableIndex,ja=c.originalEvent,ea=c.putSortable,na=
c.extraEventProperties;if(a=a||d&&d[ta]){var X=a.options,ua="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||Ca||Ua?(c=document.createEvent("Event"),c.initEvent(e,!0,!0)):c=new CustomEvent(e,{bubbles:!0,cancelable:!0});c.to=l||d;c.from=x||d;c.item=h||d;c.clone=k;c.oldIndex=B;c.newIndex=H;c.oldDraggableIndex=I;c.newDraggableIndex=N;c.originalEvent=ja;c.pullMode=ea?ea.lastPutMode:void 0;e=r(r({},na),Va.getEventProperties(e,a));for(var wa in e)c[wa]=e[wa];d&&d.dispatchEvent(c);X[ua]&&
X[ua].call(a,c)}}function b(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=c=R({},c);a[ta]=this;var d={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,l){k.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==b.supportPointer&&"PointerEvent"in window&&!Wa,emptyInsertThreshold:5};
Va.initializePlugins(this,a,d);for(var e in d)e in c||(c[e]=d[e]);zb(c);for(var h in this)"_"===h.charAt(0)&&"function"===typeof this[h]&&(this[h]=this[h].bind(this));if(this.nativeDraggable=c.forceFallback?!1:Kb)this.options.touchStartThreshold=1;c.supportPointer?D(a,"pointerdown",this._onTapStart):(D(a,"mousedown",this._onTapStart),D(a,"touchstart",this._onTapStart));this.nativeDraggable&&(D(a,"dragover",this),D(a,"dragenter",this));bb.push(this.el);c.store&&c.store.get&&this.sort(c.store.get(this)||
[]);R(this,Ha())}function f(a,c,d,e,h,k,l,x){var B=a[ta],H=B.options.onMove,I;if(!window.CustomEvent||Ca||Ua){var N=document.createEvent("Event");N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=c;N.from=a;N.dragged=d;N.draggedRect=e;N.related=h||c;N.relatedRect=k||F(c);N.willInsertAfter=x;N.originalEvent=l;a.dispatchEvent(N);H&&(I=H.call(B,N,l));return I}function g(a){a.draggable=!1}function q(){mb=!1}function y(a,c,d){d=F(n(d.el,0,d.options,!0));return c?
a.clientX<d.left-10||a.clientY<d.top&&a.clientX<d.right:a.clientY<d.top-10||a.clientY<d.bottom&&a.clientX<d.left}function J(a,c,d){d=F(A(d.el,d.options.draggable));return c?a.clientX>d.right+10||a.clientX<=d.right&&a.clientY>d.bottom&&a.clientX>=d.left:a.clientX>d.right&&a.clientY>d.top||a.clientX<=d.right&&a.clientY>d.bottom+10}function O(a,c,d,e,h,k,l,x){a=e?a.clientY:a.clientX;var B=e?d.height:d.width,H=e?d.top:d.left;d=e?d.bottom:d.right;e=!1;if(!l)if(x&&cb<B*h)if(!Xa&&(1===Ya?a>H+B*k/2:a<d-B*
k/2)&&(Xa=!0),Xa)e=!0;else{if(1===Ya?a<H+cb:a>d-cb)return-Ya}else if(a>H+B*(1-h)/2&&a<d-B*(1-h)/2)return c=u(v)<u(c)?1:-1,c;if(e||l)if(a<H+B*k/2||a>d-B*k/2)return a>H+B/2?1:-1;return 0}function U(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var c=a.length,d=0;c--;)d+=a.charCodeAt(c);return d.toString(36)}function fa(a){db.length=0;a=a.getElementsByTagName("input");for(var c=a.length;c--;){var d=a[c];d.checked&&db.push(d)}}function la(a){return setTimeout(a,0)}function xa(){ha.forEach(function(a){clearInterval(a.pid)});
ha=[]}function Ma(){}function Na(){}var Ca=L(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ua=L(/Edge/i),Ab=L(/firefox/i),Wa=L(/safari/i)&&!L(/chrome/i)&&!L(/android/i),Za=L(/iP(ad|od|hone)/i),Bb=L(/chrome/i)&&L(/android/i),wb={capture:!1,passive:!1},xb=/\s+/g,Sa,ta="Sortable"+(new Date).getTime(),Oa=[],nb={initializeByDefault:!0},Va={mount:function(a){for(var c in nb)!nb.hasOwnProperty(c)||c in a||(a[c]=nb[c]);Oa.forEach(function(d){if(d.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName,
" more than once");});Oa.push(a)},pluginEvent:function(a,c,d){var e=this;this.eventCanceled=!1;d.cancel=function(){e.eventCanceled=!0};var h=a+"Global";Oa.forEach(function(k){if(c[k.pluginName]){if(c[k.pluginName][h])c[k.pluginName][h](r({sortable:c},d));if(c.options[k.pluginName]&&c[k.pluginName][a])c[k.pluginName][a](r({sortable:c},d))}})},initializePlugins:function(a,c,d,e){Oa.forEach(function(k){var l=k.pluginName;if(a.options[l]||k.initializeByDefault)k=new k(a,c,a.options),k.sortable=a,k.options=
a.options,a[l]=k,R(d,k.defaults)});for(var h in a.options)a.options.hasOwnProperty(h)&&(e=this.modifyOption(a,h,a.options[h]),"undefined"!==typeof e&&(a.options[h]=e))},getEventProperties:function(a,c){var d={};Oa.forEach(function(e){"function"===typeof e.eventProperties&&R(d,e.eventProperties.call(c[e.pluginName],a))});return d},modifyOption:function(a,c,d){var e;Oa.forEach(function(h){a[h.pluginName]&&h.optionListeners&&"function"===typeof h.optionListeners[c]&&(e=h.optionListeners[c].call(a[h.pluginName],
d))});return e}},Lb=["evt"],ra=function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.evt;d=Z(d,Lb);Va.pluginEvent.bind(b)(a,c,r({dragEl:v,parentEl:ba,ghostEl:M,rootEl:Y,nextEl:Ia,lastDownEl:eb,cloneEl:aa,cloneHidden:Fa,dragStarted:$a,putSortable:ka,activeSortable:b.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Ta,newIndex:sa,newDraggableIndex:Ea,hideGhostForTarget:Cb,unhideGhostForTarget:Db,cloneNowHidden:function(){Fa=!0},cloneNowShown:function(){Fa=!1},dispatchSortableEvent:function(h){w({sortable:c,
name:h,originalEvent:e})}},d))},v,ba,M,Y,Ia,eb,aa,Fa,La,sa,Ta,Ea,fb,ka,Pa=!1,gb=!1,bb=[],Ja,ya,ob,pb,Eb,Fb,$a,Qa,Ya,Xa=!1,hb=!1,cb,oa,qb=[],mb=!1,db=[],ib="undefined"!==typeof document,Gb=Ua||Ca?"cssFloat":"float",Kb=ib&&!Bb&&!Za&&"draggable"in document.createElement("div"),Hb=function(){if(ib){if(Ca)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,c){var d=C(a),e=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-
parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),h=n(a,0,c);a=n(a,1,c);var k=h&&C(h);c=a&&C(a);var l=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+F(h).width,x=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+F(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":h&&k["float"]&&"none"!==k["float"]?(d="left"===k["float"]?"left":"right",
!a||"both"!==c.clear&&c.clear!==d?"horizontal":"vertical"):h&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||l>=e&&"none"===d[Gb]||a&&"none"===d[Gb]&&l+x>e)?"vertical":"horizontal"},Mb=function(a,c,d){var e=d?a.left:a.top,h=d?a.right:a.bottom;a=d?a.width:a.height;var k=d?c.left:c.top,l=d?c.right:c.bottom;c=d?c.width:c.height;return e===k||h===l||e+a/2===k+c/2},Nb=function(a,c){var d;bb.some(function(e){var h=e[ta].options.emptyInsertThreshold;if(h&&!A(e)){var k=
F(e),l=c>=k.top-h&&c<=k.bottom+h;if(a>=k.left-h&&a<=k.right+h&&l)return d=e}});return d},zb=function(a){function c(h,k){return function(l,x,B,H){var I=l.options.group.name&&x.options.group.name&&l.options.group.name===x.options.group.name;if(null==h&&(k||I))return!0;if(null==h||!1===h)return!1;if(k&&"clone"===h)return h;if("function"===typeof h)return c(h(l,x,B,H),k)(l,x,B,H);l=(k?l:x).options.group.name;return!0===h||"string"===typeof h&&h===l||h.join&&-1<h.indexOf(l)}}var d={},e=a.group;e&&"object"==
E(e)||(e={name:e});d.name=e.name;d.checkPull=c(e.pull,!0);d.checkPut=c(e.put);d.revertClone=e.revertClone;a.group=d},Cb=function(){!Hb&&M&&C(M,"display","none")},Db=function(){!Hb&&M&&C(M,"display","")};ib&&!Bb&&document.addEventListener("click",function(a){if(gb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),gb=!1},!0);var Ka=function(a){if(v){a=a.touches?a.touches[0]:a;var c=Nb(a.clientX,a.clientY);if(c){var d={},e;for(e in a)a.hasOwnProperty(e)&&
(d[e]=a[e]);d.target=d.rootEl=c;d.preventDefault=void 0;d.stopPropagation=void 0;c[ta]._onDragOver(d)}}},Ob=function(a){v&&v.parentNode[ta]._isOutsideThisEl(a.target)};b.prototype={constructor:b,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Qa=null)},_getDirection:function(a,c){return"function"===typeof this.options.direction?this.options.direction.call(this,a,c,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var c=this,d=this.el,e=this.options,h=e.preventOnFilter,
k=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,x=(l||a).target,B=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||x,H=e.filter;fa(d);if(!(v||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||B.isContentEditable||!this.nativeDraggable&&Wa&&x&&"SELECT"===x.tagName.toUpperCase()||(x=K(x,e.draggable,d,!1),x&&x.animated||eb===x))){La=u(x);Ta=u(x,e.draggable);if("function"===typeof H){if(H.call(this,a,x,this)){w({sortable:c,rootEl:B,
name:"filter",targetEl:x,toEl:d,fromEl:d});ra("filter",c,{evt:a});h&&a.cancelable&&a.preventDefault();return}}else if(H&&(H=H.split(",").some(function(I){if(I=K(B,I.trim(),d,!1))return w({sortable:c,rootEl:I,name:"filter",targetEl:x,fromEl:d,toEl:d}),ra("filter",c,{evt:a}),!0}))){h&&a.cancelable&&a.preventDefault();return}e.handle&&!K(B,e.handle,d,!1)||this._prepareDragStart(a,l,x)}}},_prepareDragStart:function(a,c,d){var e=this,h=e.el,k=e.options,l=h.ownerDocument;if(d&&!v&&d.parentNode===h){var x=
F(d);Y=h;v=d;ba=v.parentNode;Ia=v.nextSibling;eb=d;fb=k.group;b.dragged=v;Ja={target:v,clientX:(c||a).clientX,clientY:(c||a).clientY};Eb=Ja.clientX-x.left;Fb=Ja.clientY-x.top;this._lastX=(c||a).clientX;this._lastY=(c||a).clientY;v.style["will-change"]="all";d=function(){ra("delayEnded",e,{evt:a});b.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Ab&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,c),w({sortable:e,name:"choose",originalEvent:a}),z(v,k.chosenClass,!0))};k.ignore.split(",").forEach(function(B){ma(v,
B.trim(),g)});D(l,"dragover",Ka);D(l,"mousemove",Ka);D(l,"touchmove",Ka);D(l,"mouseup",e._onDrop);D(l,"touchend",e._onDrop);D(l,"touchcancel",e._onDrop);Ab&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0);ra("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!c||this.nativeDraggable&&(Ua||Ca)?d():b.eventCanceled?this._onDrop():(D(l,"mouseup",e._disableDelayedDrag),D(l,"touchend",e._disableDelayedDrag),D(l,"touchcancel",e._disableDelayedDrag),D(l,"mousemove",e._delayedDragTouchMoveHandler),
D(l,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&D(l,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(d,k.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&g(v);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;m(a,"mouseup",this._disableDelayedDrag);m(a,"touchend",this._disableDelayedDrag);m(a,"touchcancel",this._disableDelayedDrag);m(a,"mousemove",this._delayedDragTouchMoveHandler);m(a,"touchmove",this._delayedDragTouchMoveHandler);m(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,c){c=c||"touch"==a.pointerType&&a;!this.nativeDraggable||c?this.options.supportPointer?D(document,
"pointermove",this._onTouchMove):c?D(document,"touchmove",this._onTouchMove):D(document,"mousemove",this._onTouchMove):(D(v,"dragend",this),D(Y,"dragstart",this._onDragStart));try{document.selection?la(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},_dragStarted:function(a,c){Pa=!1;if(Y&&v){ra("dragStarted",this,{evt:c});this.nativeDraggable&&D(document,"dragover",Ob);var d=this.options;!a&&z(v,d.dragClass,!1);z(v,d.ghostClass,!0);b.active=this;a&&this._appendGhost();
w({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(ya){this._lastX=ya.clientX;this._lastY=ya.clientY;Cb();for(var a=document.elementFromPoint(ya.clientX,ya.clientY),c=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ya.clientX,ya.clientY);if(a===c)break;c=a}v.parentNode[ta]._isOutsideThisEl(a);if(c){do{if(c[ta]){var d=void 0;if((d=c[ta]._onDragOver({clientX:ya.clientX,clientY:ya.clientY,target:a,rootEl:c}))&&!this.options.dragoverBubble)break}a=
c}while(c=c.parentNode)}Db()}},_onTouchMove:function(a){if(Ja){var c=this.options,d=c.fallbackTolerance,e=c.fallbackOffset;c=a.touches?a.touches[0]:a;var h=M&&ia(M,!0),k=M&&h&&h.a,l=M&&h&&h.d,x=Za&&oa&&T(oa);k=(c.clientX-Ja.clientX+e.x)/(k||1)+(x?x[0]-qb[0]:0)/(k||1);e=(c.clientY-Ja.clientY+e.y)/(l||1)+(x?x[1]-qb[1]:0)/(l||1);if(!b.active&&!Pa){if(d&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}M&&(h?(h.e+=k-(ob||0),h.f+=e-(pb||0)):h={a:1,
b:0,c:0,d:1,e:k,f:e},d="matrix(".concat(h.a,",").concat(h.b,",").concat(h.c,",").concat(h.d,",").concat(h.e,",").concat(h.f,")"),C(M,"webkitTransform",d),C(M,"mozTransform",d),C(M,"msTransform",d),C(M,"transform",d),ob=k,pb=e,ya=c);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!M){var a=this.options.fallbackOnBody?document.body:Y,c=F(v,!0,Za,!0,a),d=this.options;if(Za){for(oa=a;"static"===C(oa,"position")&&"none"===C(oa,"transform")&&oa!==document;)oa=oa.parentNode;oa!==document.body&&
oa!==document.documentElement?(oa===document&&(oa=ca()),c.top+=oa.scrollTop,c.left+=oa.scrollLeft):oa=ca();qb=T(oa)}M=v.cloneNode(!0);z(M,d.ghostClass,!1);z(M,d.fallbackClass,!0);z(M,d.dragClass,!0);C(M,"transition","");C(M,"transform","");C(M,"box-sizing","border-box");C(M,"margin",0);C(M,"top",c.top);C(M,"left",c.left);C(M,"width",c.width);C(M,"height",c.height);C(M,"opacity","0.8");C(M,"position",Za?"absolute":"fixed");C(M,"zIndex","100000");C(M,"pointerEvents","none");b.ghost=M;a.appendChild(M);
C(M,"transform-origin",Eb/parseInt(M.style.width)*100+"% "+Fb/parseInt(M.style.height)*100+"%")}},_onDragStart:function(a,c){var d=this,e=a.dataTransfer,h=d.options;ra("dragStart",this,{evt:a});b.eventCanceled?this._onDrop():(ra("setupClone",this),b.eventCanceled||(aa=va(v),aa.removeAttribute("id"),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),z(aa,this.options.chosenClass,!1),b.clone=aa),d.cloneId=la(function(){ra("clone",d);b.eventCanceled||(d.options.removeCloneOnHide||Y.insertBefore(aa,
v),d._hideClone(),w({sortable:d,name:"clone"}))}),!c&&z(v,h.dragClass,!0),c?(gb=!0,d._loopId=setInterval(d._emulateDragOver,50)):(m(document,"mouseup",d._onDrop),m(document,"touchend",d._onDrop),m(document,"touchcancel",d._onDrop),e&&(e.effectAllowed="move",h.setData&&h.setData.call(d,e,v)),D(document,"drop",d),C(v,"transform","translateZ(0)")),Pa=!0,d._dragStartId=la(d._dragStarted.bind(d,c,a)),D(document,"selectstart",d),$a=!0,Wa&&C(document.body,"user-select","none"))},_onDragOver:function(a){function c(Ga,
jb){ra(Ga,X,r({evt:a,isOwner:ja,axis:wa?"vertical":"horizontal",revert:B,dragRect:za,targetRect:x,canSort:ea,fromSortable:na,target:l,completed:e,onMove:function(Ib,Pb){return f(Y,k,v,za,Ib,F(Ib),a,Pb)},changed:h},jb))}function d(){c("dragOverAnimationCapture");X.captureAnimationState();X!==na&&na.captureAnimationState()}function e(Ga){c("dragOverCompleted",{insertion:Ga});Ga&&(ja?N._hideClone():N._showClone(X),X!==na&&(z(v,ka?ka.options.ghostClass:N.options.ghostClass,!1),z(v,H.ghostClass,!0)),ka!==
X&&X!==b.active?ka=X:X===b.active&&ka&&(ka=null),na===X&&(X._ignoreWhileAnimating=l),X.animateAll(function(){c("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==na&&(na.animateAll(),na._ignoreWhileAnimating=null));if(l===v&&!v.animated||l===k&&!l.animated)Qa=null;H.dragoverBubble||a.rootEl||l===document||(v.parentNode[ta]._isOutsideThisEl(a.target),!Ga&&Ka(a));!H.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ua=!0}function h(){sa=u(v);Ea=u(v,H.draggable);w({sortable:X,
name:"change",toEl:k,newIndex:sa,newDraggableIndex:Ea,originalEvent:a})}var k=this.el,l=a.target,x,B,H=this.options,I=H.group,N=b.active,ja=fb===I,ea=H.sort,na=ka||N,X=this,ua=!1;if(!mb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();l=K(l,H.draggable,k,!0);c("dragOver");if(b.eventCanceled)return ua;if(v.contains(a.target)||l.animated&&l.animatingX&&l.animatingY||X._ignoreWhileAnimating===l)return e(!1);gb=!1;if(N&&!H.disabled&&(ja?ea||(B=ba!==Y):ka===this||(this.lastPutMode=fb.checkPull(this,
N,v,a))&&I.checkPut(this,N,v,a))){var wa="vertical"===this._getDirection(a,l);var za=F(v);c("dragOverValid");if(b.eventCanceled)return ua;if(B)return ba=Y,d(),this._hideClone(),c("revert"),b.eventCanceled||(Ia?Y.insertBefore(v,Ia):Y.appendChild(v)),e(!0);I=A(k,H.draggable);if(!I||J(a,wa,this)&&!I.animated){if(I===v)return e(!1);I&&k===a.target&&(l=I);l&&(x=F(l));if(!1!==f(Y,k,v,za,l,x,a,!!l))return d(),I&&I.nextSibling?k.insertBefore(v,I.nextSibling):k.appendChild(v),ba=k,h(),e(!0)}else if(I&&y(a,
wa,this)){var Aa=n(k,0,H,!0);if(Aa===v)return e(!1);l=Aa;x=F(l);if(!1!==f(Y,k,v,za,l,x,a,!1))return d(),k.insertBefore(v,Aa),ba=k,h(),e(!0)}else if(l.parentNode===k){x=F(l);var V=0;V=v.parentNode!==k;var pa=!Mb(v.animated&&v.toRect||za,l.animated&&l.toRect||x,wa);I=wa?"top":"left";var Da=t(l,"top","top")||t(v,"top","top"),kb=Da?Da.scrollTop:void 0;Qa!==l&&(Aa=x[I],Xa=!1,hb=!pa&&H.invertSwap||V);V=O(a,l,x,wa,pa?1:H.swapThreshold,null==H.invertedSwapThreshold?H.swapThreshold:H.invertedSwapThreshold,
hb,Qa===l);if(0!==V){pa=u(v);do{pa-=V;var Ba=ba.children[pa]}while(Ba&&("none"===C(Ba,"display")||Ba===M))}if(0===V||Ba===l)return e(!1);Qa=l;Ya=V;Ba=l.nextElementSibling;pa=!1;pa=1===V;V=f(Y,k,v,za,l,x,a,pa);if(!1!==V){if(1===V||-1===V)pa=1===V;mb=!0;setTimeout(q,30);d();pa&&!Ba?k.appendChild(v):l.parentNode.insertBefore(v,pa?Ba:l);Da&&qa(Da,0,kb-Da.scrollTop);ba=v.parentNode;void 0===Aa||hb||(cb=Math.abs(Aa-F(l)[I]));h();return e(!0)}}if(k.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,
_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove);m(document,"touchmove",this._onTouchMove);m(document,"pointermove",this._onTouchMove);m(document,"dragover",Ka);m(document,"mousemove",Ka);m(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;m(a,"mouseup",this._onDrop);m(a,"touchend",this._onDrop);m(a,"pointerup",this._onDrop);m(a,"touchcancel",this._onDrop);m(document,"selectstart",this)},_onDrop:function(a){var c=this.el,d=this.options;sa=u(v);Ea=u(v,
d.draggable);ra("drop",this,{evt:a});ba=v&&v.parentNode;sa=u(v);Ea=u(v,d.draggable);if(!b.eventCanceled&&(Xa=hb=Pa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wa&&C(document.body,"user-select",""),C(v,"transform",""),a&&($a&&(a.cancelable&&a.preventDefault(),!d.dropBubble&&a.stopPropagation()),
M&&M.parentNode&&M.parentNode.removeChild(M),(Y===ba||ka&&"clone"!==ka.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&m(v,"dragend",this),g(v),v.style["will-change"]="",$a&&!Pa&&z(v,ka?ka.options.ghostClass:this.options.ghostClass,!1),z(v,this.options.chosenClass,!1),w({sortable:this,name:"unchoose",toEl:ba,newIndex:null,newDraggableIndex:null,originalEvent:a}),Y!==ba?(0<=sa&&(w({rootEl:ba,name:"add",toEl:ba,fromEl:Y,originalEvent:a}),w({sortable:this,name:"remove",
toEl:ba,originalEvent:a}),w({rootEl:ba,name:"sort",toEl:ba,fromEl:Y,originalEvent:a}),w({sortable:this,name:"sort",toEl:ba,originalEvent:a})),ka&&ka.save()):sa!==La&&0<=sa&&(w({sortable:this,name:"update",toEl:ba,originalEvent:a}),w({sortable:this,name:"sort",toEl:ba,originalEvent:a})),b.active)))){if(null==sa||-1===sa)sa=La,Ea=Ta;w({sortable:this,name:"end",toEl:ba,originalEvent:a});this.save()}this._nulling()},_nulling:function(){ra("nulling",this);Y=v=ba=M=Ia=aa=eb=Fa=Ja=ya=$a=sa=Ea=La=Ta=Qa=Ya=
ka=fb=b.dragged=b.ghost=b.clone=b.active=null;db.forEach(function(a){a.checked=!0});db.length=ob=pb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],c,d=this.el.children,e=0,h=d.length,k=this.options;e<h;e++)c=d[e],K(c,k.draggable,this.el,
!1)&&a.push(c.getAttribute(k.dataIdAttr)||U(c));return a},sort:function(a,c){var d={},e=this.el;this.toArray().forEach(function(h,k){k=e.children[k];K(k,this.options.draggable,e,!1)&&(d[h]=k)},this);c&&this.captureAnimationState();a.forEach(function(h){d[h]&&(e.removeChild(d[h]),e.appendChild(d[h]))});c&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,c){return K(a,c||this.options.draggable,this.el,!1)},option:function(a,c){var d=this.options;
if(void 0===c)return d[a];var e=Va.modifyOption(this,a,c);d[a]="undefined"!==typeof e?e:c;"group"===a&&zb(d)},destroy:function(){ra("destroy",this);var a=this.el;a[ta]=null;m(a,"mousedown",this._onTapStart);m(a,"touchstart",this._onTapStart);m(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(m(a,"dragover",this),m(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(c){c.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();
bb.splice(bb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Fa||(ra("hideClone",this),b.eventCanceled||(C(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Fa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Fa&&(ra("showClone",this),b.eventCanceled||(v.parentNode!=Y||this.options.group.revertClone?Ia?Y.insertBefore(aa,Ia):Y.appendChild(aa):Y.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),C(aa,
"display",""),Fa=!1))}};ib&&D(document,"touchmove",function(a){(b.active||Pa)&&a.cancelable&&a.preventDefault()});b.utils={on:D,off:m,css:C,find:ma,is:function(a,c){return!!K(a,c,a,!1)},extend:function(a,c){if(a&&c)for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);return a},throttle:W,closest:K,toggleClass:z,clone:va,index:u,nextTick:la,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:n};b.get=function(a){return a[ta]};b.mount=function(){for(var a=arguments.length,c=Array(a),
d=0;d<a;d++)c[d]=arguments[d];c[0].constructor===Array&&(c=c[0]);c.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(b.utils=r(r({},b.utils),e.utils));Va.mount(e)})};b.create=function(a,c){return new b(a,c)};b.version="1.15.0";var ha=[],ab,rb,sb=!1,tb,ub,lb,Ra,vb=W(function(a,c,d,e){if(c.scroll){var h=(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,l=c.scrollSensitivity,
x=c.scrollSpeed,B=ca(),H=!1;if(rb!==d){rb=d;xa();ab=c.scroll;var I=c.scrollFn;!0===ab&&(ab=Q(d,!0))}d=0;var N=ab;do{var ja=N,ea=F(ja),na=ea.top,X=ea.bottom,ua=ea.left,wa=ea.right,za=ea.width;ea=ea.height;var Aa=void 0,V=void 0,pa=ja.scrollWidth,Da=ja.scrollHeight;V=C(ja);var kb=ja.scrollLeft,Ba=ja.scrollTop;ja===B?(Aa=za<pa&&("auto"===V.overflowX||"scroll"===V.overflowX||"visible"===V.overflowX),V=ea<Da&&("auto"===V.overflowY||"scroll"===V.overflowY||"visible"===V.overflowY)):(Aa=za<pa&&("auto"===
V.overflowX||"scroll"===V.overflowX),V=ea<Da&&("auto"===V.overflowY||"scroll"===V.overflowY));ua=Aa&&(Math.abs(wa-h)<=l&&kb+za<pa)-(Math.abs(ua-h)<=l&&!!kb);na=V&&(Math.abs(X-k)<=l&&Ba+ea<Da)-(Math.abs(na-k)<=l&&!!Ba);if(!ha[d])for(X=0;X<=d;X++)ha[X]||(ha[X]={});if(ha[d].vx!=ua||ha[d].vy!=na||ha[d].el!==ja)if(ha[d].el=ja,ha[d].vx=ua,ha[d].vy=na,clearInterval(ha[d].pid),0!=ua||0!=na)H=!0,ha[d].pid=setInterval(function(){e&&0===this.layer&&b.active._onTouchMove(lb);var Ga=ha[this.layer].vy?ha[this.layer].vy*
x:0,jb=ha[this.layer].vx?ha[this.layer].vx*x:0;"function"===typeof I&&"continue"!==I.call(b.dragged.parentNode[ta],jb,Ga,a,lb,ha[this.layer].el)||qa(ha[this.layer].el,jb,Ga)}.bind({layer:d}),24);d++}while(c.bubbleScroll&&N!==B&&(N=Q(N,!1)));sb=H}},30),Jb=function(a){var c=a.originalEvent,d=a.putSortable,e=a.dragEl,h=a.activeSortable,k=a.dispatchSortableEvent,l=a.hideGhostForTarget;a=a.unhideGhostForTarget;c&&(h=d||h,l(),c=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c,c=document.elementFromPoint(c.clientX,
c.clientY),a(),h&&!h.el.contains(c)&&(k("spill"),this.onSpill({dragEl:e,putSortable:d})))};Ma.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var c=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var d=n(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(c,d):this.sortable.el.appendChild(c);this.sortable.animateAll();a&&a.animateAll()},drop:Jb};R(Ma,{pluginName:"revertOnSpill"});
Na.prototype={onSpill:function(a){var c=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();c.parentNode&&c.parentNode.removeChild(c);a.animateAll()},drop:Jb};R(Na,{pluginName:"removeOnSpill"});b.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var c in this)"_"===c.charAt(0)&&"function"===typeof this[c]&&(this[c]=this[c].bind(this))}a.prototype={dragStarted:function(c){c=c.originalEvent;this.sortable.nativeDraggable?
D(document,"dragover",this._handleAutoScroll):this.options.supportPointer?D(document,"pointermove",this._handleFallbackAutoScroll):c.touches?D(document,"touchmove",this._handleFallbackAutoScroll):D(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(c){c=c.originalEvent;this.options.dragOverBubble||c.rootEl||this._handleAutoScroll(c)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),
m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Ra);xa();clearTimeout(Sa);Sa=void 0},nulling:function(){lb=rb=ab=sb=Ra=tb=ub=null;ha.length=0},_handleFallbackAutoScroll:function(c){this._handleAutoScroll(c,!0)},_handleAutoScroll:function(c,d){var e=this,h=(c.touches?c.touches[0]:c).clientX,k=(c.touches?c.touches[0]:c).clientY,l=document.elementFromPoint(h,k);lb=c;if(d||this.options.forceAutoScrollFallback||Ua||Ca||Wa){vb(c,
this.options,l,d);var x=Q(l,!0);!sb||Ra&&h===tb&&k===ub||(Ra&&clearInterval(Ra),Ra=setInterval(function(){var B=Q(document.elementFromPoint(h,k),!0);B!==x&&(x=B,xa());vb(c,e.options,B,d)},10),tb=h,ub=k)}else this.options.bubbleScroll&&Q(l,!0)!==ca()?vb(c,this.options,Q(l,!1),!1):xa()}};return R(a,{pluginName:"scroll",initializeByDefault:!0})});b.mount(Na,Ma);S.Sortable=b})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(S,
G,r,E,R,Z,L,D,m,P,K,z,C,ia,ma,ca,F,t,n,A,u,T,da){function Q(va){const {actionsOpen:Ha,children:w}=va;Ha&&(va.actionsOpen=!1);w.forEach(b=>Q(b))}const p=E.ofType(ca),W={exclusive:"exclusive",inherited:"inherited",independent:"independent"},qa={statusIndicators:!0};E=function(va){function Ha(b,f){var g=va.call(this,b,f)||this;g._handles=new Z;g._sortableNodes=new Map;g._sortableMap=new Map;g._focusSortUid=null;g._newUI=L("esri-layerlist-new-ui");g._tooltipReferenceMap=new Map;g.visibleItems=null;g.iconClass=
"esri-icon-layers";g.label=void 0;g.listItemCanGiveFunction=null;g.listItemCanReceiveFunction=null;g.listItemCreatedFunction=null;g.messages=null;g.messagesCommon=null;g.multipleSelectionEnabled=!1;g.operationalItems=null;g.selectionEnabled=!1;g.selectedItems=new p;g.view=null;g.viewModel=new ma;g.visibleElements={...qa};g._onSortableSort=({to:q,from:y,item:J,newIndex:O})=>{y&&q&&(y===q?g._sortLayers(g._sortableMap.get(y.dataset.group)):g._moveLayerFromChildList({to:q,from:y,item:J,newIndex:O}))};
g._sortableCanSort=(q,y)=>!(!q.el.dataset.group||!y.el.dataset.group);g._sortableCanPull=(q,y,J)=>{const {listItemCanGiveFunction:O}=G._assertThisInitialized(g);J={selected:J["data-item"],from:y.el["data-item"],to:q.el["data-item"]};return g._sortableCanSort(q,y)&&"function"===typeof O?O.call(null,J):!0};g._sortableCanPut=(q,y,J)=>{const {listItemCanReceiveFunction:O}=G._assertThisInitialized(g);J={selected:J["data-item"],from:y.el["data-item"],to:q.el["data-item"]};return g._sortableCanSort(q,y)&&
"function"===typeof O?O.call(null,J):!0};g._onSortableEnd=({oldIndex:q,from:y,to:J,item:O})=>{y!==J&&y.insertBefore(O,y.children[q])};return g}G._inheritsLoose(Ha,va);var w=Ha.prototype;w.initialize=function(){const b=this.operationalItems;this._setVisibleItems(b);this.own([D.on(()=>this.operationalItems,"change",()=>this._itemsChanged(b)),D.watch(()=>this.errorsVisible,()=>this._itemsChanged(b)),D.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),D.initial)])};w.loadDependencies=function(){return Promise.all([new Promise((b,
f)=>S(["../chunks/calcite-tooltip"],b,f))])};w.destroy=function(){this._destroySortables();this._tooltipReferenceMap.clear();this._handles.destroy();this._handles=null};w.castVisibleElements=function(b){return{...qa,...b}};w.triggerAction=function(b,f){this.viewModel.triggerAction(b,f)};w.render=function(){var b;const {visibleItems:f,_newUI:g}=this;var q=null==(b=this.viewModel)?void 0:b.state;b={["esri-layer-list--new-ui"]:g,["esri-hidden"]:"loading"===q,["esri-disabled"]:"disabled"===q};q=this.renderItemTooltips();
const y=this.renderItems();return u.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",b)},null!=f&&f.length?[q,y]:this.renderNoItems())};w.renderItemTooltip=function(b){const {_tooltipReferenceMap:f,messages:g}=this;return b?u.tsx("calcite-tooltip",{label:g.layerIncompatible,referenceElement:f.get(b.uid)},g.layerIncompatibleTooltip):null};w.renderItemTooltipNodes=function(b){const {incompatible:f,children:g}=b;return[f?this.renderItemTooltip(b):null,...f?[]:null==g?void 0:
g.toArray().map(q=>this.renderItemTooltipNodes(q))]};w.renderItemTooltips=function(){return this.visibleItems.toArray().map(b=>this.renderItemTooltipNodes(b))};w.renderNoItems=function(){return u.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};w.renderItems=function(){const {visibleItems:b,selectionEnabled:f,messages:g}=this;return u.tsx("ul",{"aria-label":g.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==b?void 0:b.map(q=>this.renderItem(q,null)).toArray())};w.renderActionsMenuIcon=function(b,f){const {messagesCommon:g}=this;return u.tsx("div",{key:"actions-menu-toggle","data-item":b,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:b.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":g.options,title:g.options},u.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};w.renderActionsMenu=function(b,f,g,q){var {panel:y}=b;y=y&&y.visible?this.renderPanelButton(y):null;const J=(f=1===g&&this._getSingleActionButton(f))?this.renderAction({item:b,action:f,singleAction:!0}):null;return(b=!f&&g?this.renderActionsMenuIcon(b,q):null)||y||f?u.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
y,J,b):null};w.renderChildList=function(b,f){var g;const {selectionEnabled:q}=this,{visibilityMode:y,children:J}=b,O=this._hasChildren(b),U=!O&&q&&"group"===(null==(g=b.layer)?void 0:g.type),{exclusive:fa,inherited:la}=W;g={["esri-layer-list__list--exclusive"]:y===fa,["esri-layer-list__list--inherited"]:y===la,["esri-layer-list__list--independent"]:y!==la&&y!==fa};return O||U?u.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":b.uid,"data-item":b,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,
afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",g),"aria-expanded":b.open?"true":"false",role:q?"listbox":y===fa?"radiogroup":"group",hidden:b.open||U?null:!0},null==J?void 0:J.map(xa=>this.renderItem(xa,b)).toArray()):null};w.renderChildrenToggle=function(b,f){var {messagesCommon:g}=this;const q=this._hasChildren(b),y={["esri-layer-list__child-toggle--open"]:b.open};g=b.open?g.collapse:g.expand;return q?u.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,
"data-item":b,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",y),tabindex:"0",role:"button","aria-controls":f,"aria-label":g,title:g},u.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),u.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),u.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl",
"esri-icon-left-triangle-arrow")})):null};w.renderItemMessage=function(b){return b.error?u.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},u.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages.layerError):b.incompatible?u.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",role:"alert"},u.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>
this._setTooltipReference(f,b)}),this.messages.layerIncompatible):null};w.renderItemContent=function(b,f,g){var {id:q}=this,y=`${q}_${b.uid}`;q=`${y}_actions`;y=`${y}__list`;const {panel:J}=b,O=this._filterActions(b.actionsSections),U=this._countActions(O);return[u.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(b,y),this.renderLabel(b,f,g),this.renderActionsMenu(b,O,U,q)),this.renderItemMessage(b),U?this.renderActionsSections(b,O,q):null,J&&
J.open?J.render():null,this.renderChildList(b,y)]};w.renderItem=function(b,f){const {_newUI:g,id:q,selectionEnabled:y,selectedItems:J,visibleElements:O}=this,U=`${`${q}_${b.uid}`}__title`;var fa=this._hasMessage(b);fa={["esri-layer-list__item--has-children"]:this._hasChildren(b),["esri-layer-list__item--has-message"]:!!fa,["esri-layer-list__item--updating"]:b.updating&&!f&&O.statusIndicators,["esri-layer-list__item--invisible"]:g&&!b.visible,["esri-layer-list__item--invisible-at-scale"]:!b.visibleAtCurrentScale,
["esri-layer-list__item--selectable"]:y};if(y){var la;const xa={["data-layer-uid"]:null==(la=b.layer)?void 0:la.uid,["data-sort-filter"]:(!b.sortable).toString()};return u.tsx("li",{key:`item-with-selection-${b.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",fa),"aria-labelledby":U,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":b,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":F.findSelectedItem(b,
J)?"true":"false",role:"option",...xa},this.renderItemContent(b,f,U))}return u.tsx("li",{key:`item-no-selection-${b.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",fa),"aria-labelledby":U},this.renderItemContent(b,f,U))};w.renderItemConnectionStatus=function(b){({connectionStatus:b}=b);return b?u.tsx("span",{class:this.classes({["esri-layer-list__connection-status"]:!0,["esri-layer-list__connection-status--disconnected"]:"disconnected"===
b,["esri-layer-list__connection-status--connected"]:"connected"===b}),key:"layer-connection-status"}):null};w.renderItemTitle=function(b,f){const {messages:g}=this;if(!b)return null;const q=b.title||g.untitledLayer;b=b.visibleAtCurrentScale?q:`${q} (${g.layerInvisibleAtScale})`;return u.tsx("span",{key:"layer-title-container",id:f,title:b,"aria-label":b,class:"esri-layer-list__item-title"},q)};w.renderItemToggleIcon=function(b,f){const {_newUI:g}=this,{exclusive:q}=W;f=f&&f.visibilityMode;return u.tsx("span",
{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:g,["esri-layer-list__item-toggle-icon"]:g&&f!==q,["esri-layer-list__item-radio-icon"]:g&&f===q,["esri-icon-radio-checked"]:f===q&&b.visible,["esri-icon-radio-unchecked"]:f===q&&!b.visible,["esri-icon-visible"]:f!==q&&b.visible,["esri-icon-non-visible"]:f!==q&&!b.visible}),"aria-hidden":"true"})};w.renderItemToggle=function(b,f,g){const {selectionEnabled:q,messages:y}=this,{exclusive:J}=W,O=f&&f.visibilityMode;return q?
u.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":b,"data-parent-visibility":O,tabIndex:0,title:b.visible?y.hideLayer:y.showLayer,"aria-checked":b.visible?"true":"false",role:O===J?"radio":"switch","aria-labelledby":g},this.renderItemToggleIcon(b,f)):u.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(b,f))};w.renderLabel=function(b,
f,g){const {selectionEnabled:q,_newUI:y,messages:J}=this,{inherited:O,exclusive:U}=W,fa=null==f?void 0:f.visibilityMode;var la=fa===U?"radio":"switch";f=[this.renderItemToggle(b,f,g),this.renderItemConnectionStatus(b),this.renderItemTitle(b,g)];y&&f.reverse();la=q?u.tsx("div",{key:`item-label-no-selection-${b.uid}`,class:"esri-layer-list__item-label"},f):u.tsx("div",{key:`item-label-with-selection-${b.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,
"data-item":b,"data-parent-visibility":fa,tabIndex:0,"aria-checked":b.visible?"true":"false",title:b.visible?J.hideLayer:J.showLayer,role:la,"aria-labelledby":g},f);return fa===O||b.error?u.tsx("div",{key:`item-label-container-${b.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(b,g)):la};w.renderPanelButton=function(b){const {className:f,open:g,title:q,image:y}=b,J=y||f?f:"esri-icon-default-action",O=this._getIconImageStyles(b),U={["esri-layer-list__item-actions-menu-item--active"]:g},
fa={["esri-layer-list__item-action-image"]:!!O["background-image"]};J&&(fa[J]=!!J);return u.tsx("div",{key:`panel-${b.uid}`,bind:this,"data-panel":b,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",U),role:"button",tabindex:"0",title:q,"aria-label":q},u.tsx("span",{class:this.classes(fa),styles:O}))};w.renderActionsSections=function(b,f,g){f=f.toArray().map((q,y)=>u.tsx("ul",{key:`${b}-action-section-${y}`,class:"esri-layer-list__item-actions-list"},
this.renderActionSection(b,q)));return u.tsx("div",{role:"group","aria-expanded":b.actionsOpen?"true":"false",key:"actions-section",id:g,class:"esri-layer-list__item-actions",hidden:b.actionsOpen?null:!0},f)};w.renderActionSection=function(b,f){return(f&&f.toArray()).map(g=>this.renderAction({item:b,action:g}))};w.renderActionIcon=function(b){const {active:f,className:g}=b,q=this._getIconImageStyles(b);b="button"!==b.type||b.image||g?g:"esri-icon-default-action";const y={["esri-layer-list__item-action-image"]:!f&&
!!q["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};b&&!f&&(y[b]=!0);return u.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",y),styles:q})};w.renderActionTitle=function(b,f){return f?null:u.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},b)};w.renderAction=function(b){const {item:f,action:g,singleAction:q}=b,{active:y,disabled:J,title:O}=g;b={["esri-layer-list__item-actions-menu-item"]:q&&
"button"===g.type,["esri-layer-list__item-action"]:y||!q&&"toggle"!==g.type,["esri-layer-list__action-toggle"]:!y&&"toggle"===g.type,["esri-layer-list__action-toggle--on"]:!y&&"toggle"===g.type&&g.value,["esri-disabled-element"]:J};const U=[this.renderActionIcon(g),this.renderActionTitle(O,q)];return q?u.tsx("div",{bind:this,"data-item":f,"data-action":g,role:"button",key:`single-action-${g.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:b,tabindex:"0",title:O,"aria-label":O},
U):u.tsx("li",{bind:this,"data-item":f,"data-action":g,key:`action-${g.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:b,tabindex:"0",role:"button",title:O,"aria-label":O},U)};w._setTooltipReference=function(b,f){this._tooltipReferenceMap.set(f.uid,b);this.scheduleRender()};w._hasMessage=function(b){return!!b.error||b.incompatible};w._hasChildren=function(b){return!!b.children.length&&!this._hasMessage(b)};w._sortNodeRemoved=function(b){const {_sortableMap:f}=this;b=b.dataset.group;
const g=f.get(b);g&&g.destroy();f.delete(b)};w._destroySortables=function(){const {_sortableMap:b,_sortableNodes:f}=this;b.forEach(g=>g&&g.destroy());b.clear();f.clear()};w._moveLayerFromChildList=function({to:b,from:f,item:g,newIndex:q}){this.viewModel.moveListItem(g["data-item"],f["data-item"],b["data-item"],q)};w._sortLayers=function(b){if(b){var f=b.el["data-item"];b=b.toArray();if(f)F.sortChildLayersToIds(f,b);else{var g,q;F.sortLayersToIds(null==(g=this.view)?void 0:null==(q=g.map)?void 0:q.layers,
b)}}};w._toggleSorting=function(b,f){const {_sortableMap:g,selectionEnabled:q}=this,y=g.get(f);var J=b["data-item"];J=("root"===f?!0:J.childrenSortable&&F.canSortSublayers(J))&&q;y?y.option("disabled",!J):J&&(b=da.Sortable.create(b,{dataIdAttr:"data-layer-uid",group:{name:f,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!J,chosenClass:"esri-layer-list--chosen"}),g.set(f,b))};
w._toggleAllSorting=function(){this._sortableNodes.forEach((b,f)=>this._toggleSorting(b,f))};w._sortNodeCreated=function(b){const f=b.dataset.group;f&&(this._sortableNodes.set(f,b),this._toggleSorting(b,f))};w._setVisibleItems=function(b){this.visibleItems=null==b?void 0:b.filter(f=>!f.hidden&&(this.errorsVisible||!f.error))};w._getSingleActionButton=function(b){return b.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};w._focusListItem=function(b){var f;const {_focusSortUid:g}=this;b&&g&&
(null==(f=b["data-item"].layer)?void 0:f.uid)===g&&(b.focus(),this._focusSortUid=null)};w._watchActionSectionChanges=function(b,f){const g="action-section"+f;this._handles.add(b.on("change",this.scheduleRender.bind(this)),g);b.forEach(q=>this._renderOnActionChanges(q,f))};w._renderOnActionChanges=function(b,f){f="actions"+f;"toggle"===b.type?this._handles.add(D.watch(()=>[null==b?void 0:b.className,null==b?void 0:b.image,null==b?void 0:b.id,null==b?void 0:b.title,null==b?void 0:b.visible,null==b?
void 0:b.value],()=>this.scheduleRender(),D.initial),f):"slider"===b.type?this._handles.add(D.watch(()=>[null==b?void 0:b.className,null==b?void 0:b.id,null==b?void 0:b.title,null==b?void 0:b.visible,null==b?void 0:b.value,null==b?void 0:b.displayValueEnabled,null==b?void 0:b.max,null==b?void 0:b.min,null==b?void 0:b.step],()=>this.scheduleRender(),D.initial),f):this._handles.add(D.watch(()=>[null==b?void 0:b.className,null==b?void 0:b.image,null==b?void 0:b.id,null==b?void 0:b.title,null==b?void 0:
b.visible],()=>this.scheduleRender(),D.initial),f)};w._renderOnItemChanges=function(b){const f=b.uid,g="items"+f;this._handles.add([D.watch(()=>{var q,y,J;return[null==b?void 0:b.actionsOpen,null==b?void 0:b.visible,null==b?void 0:b.open,null==b?void 0:b.updating,null==b?void 0:b.title,null==b?void 0:b.visibleAtCurrentScale,null==b?void 0:b.error,null==b?void 0:b.visibilityMode,null==b?void 0:b.panel,null==b?void 0:null==(q=b.panel)?void 0:q.title,null==b?void 0:null==(y=b.panel)?void 0:y.content,
null==b?void 0:null==(J=b.panel)?void 0:J.className,null==b?void 0:b.sortable,null==b?void 0:b.childrenSortable]},()=>this.scheduleRender(),D.syncAndInitial),D.watch(()=>[null==b?void 0:b.hidden,null==b?void 0:b.error],()=>this._setVisibleItems(this.operationalItems)),b.actionsSections.on("change",()=>this.scheduleRender()),b.children.on("change",()=>this.scheduleRender())],g);b.children.forEach(q=>this._renderOnItemChanges(q));b.actionsSections.forEach(q=>this._watchActionSectionChanges(q,f))};w._itemsChanged=
function(b){this._handles.removeAll();b.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(b);this.scheduleRender()};w._filterActions=function(b){return b.map(f=>f.filter(g=>g.visible))};w._countActions=function(b){return b.reduce((f,g)=>f+g.length,0)};w._getIconImageStyles=function(b){b="esri.widgets.LayerList.ListItemPanel"===b.declaredClass||"esri.support.Action.ActionButton"===b.declaredClass||"esri.support.Action.ActionToggle"===b.declaredClass?b.image:
null;return{"background-image":b?`url("${b}")`:null}};w._selectionKeydown=function(b){var f=R.eventKey(b);if(["ArrowDown","ArrowUp"].includes(f)){b.stopPropagation();var g=b.currentTarget,q=g["data-item"],{_sortableMap:y,selectedItems:J}=this;if(g=y.get(g.dataset.group)){var O=F.findSelectedItem(q,J),U=g.toArray();b=U.indexOf(b.target.dataset.layerUid);if(-1!==b){if("ArrowDown"===f){const Na=b+1;if(Na>=U.length)return;if(O){var fa;U.splice(Na,0,U.splice(b,1)[0]);g.sort(U);this._sortLayers(g);this._focusSortUid=
null==(fa=q.layer)?void 0:fa.uid}else{var la;this._focusSortUid=null==(la=q.layer)?void 0:la.uid;this.scheduleRender()}}if("ArrowUp"===f&&(f=b-1,!(-1>=f)))if(O){var xa;U.splice(f,0,U.splice(b,1)[0]);g.sort(U);this._sortLayers(g);this._focusSortUid=null==(xa=q.layer)?void 0:xa.uid}else{var Ma;this._focusSortUid=null==(Ma=q.layer)?void 0:Ma.uid;this.scheduleRender()}}}}else this._toggleSelection(b)};w._toggleActionsOpen=function(b){const f=b.currentTarget["data-item"];var {actionsOpen:g}=f;(g=!g)&&
this.operationalItems.forEach(q=>Q(q));f.actionsOpen=g;b.stopPropagation()};w._triggerPanel=function(b){const f=b.currentTarget["data-panel"];f&&(f.open=!f.open);b.stopPropagation()};w._triggerAction=function(b){var f=b.currentTarget;const g=f["data-action"];f=f["data-item"];"toggle"===g.type&&(g.value=!g.value);this.triggerAction(g,f);b.stopPropagation()};w._toggleVisibility=function(b){var f=b.currentTarget;const g=f.getAttribute("data-parent-visibility");f=f["data-item"];g===W.exclusive&&f.visible||
(f.visible=!f.visible);b.stopPropagation()};w._toggleChildrenClick=function(b){const f=b.currentTarget["data-item"];f.open=!f.open;b.stopPropagation()};w._toggleSelection=function(b){b.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:g}=this;b=b.currentTarget["data-item"];const q=F.findSelectedItem(b,g),{length:y}=g,J=q&&1===y;f?q?null==g.remove?void 0:g.remove(q):g.add(b):y&&!J?(g.removeAll(),g.add(b)):q?null==g.remove?void 0:g.remove(q):g.add(b)};return Ha}(ia);r.__decorate([z.property()],
E.prototype,"visibleItems",void 0);r.__decorate([z.property()],E.prototype,"iconClass",void 0);r.__decorate([z.property()],E.prototype,"errorsVisible",void 0);r.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],E.prototype,"label",void 0);r.__decorate([z.property()],E.prototype,"listItemCanGiveFunction",void 0);r.__decorate([z.property()],E.prototype,"listItemCanReceiveFunction",void 0);r.__decorate([m.aliasOf("viewModel.listItemCreatedFunction")],E.prototype,"listItemCreatedFunction",
void 0);r.__decorate([z.property(),n.messageBundle("esri/widgets/LayerList/t9n/LayerList")],E.prototype,"messages",void 0);r.__decorate([z.property(),n.messageBundle("esri/t9n/common")],E.prototype,"messagesCommon",void 0);r.__decorate([z.property()],E.prototype,"multipleSelectionEnabled",void 0);r.__decorate([m.aliasOf("viewModel.operationalItems")],E.prototype,"operationalItems",void 0);r.__decorate([z.property()],E.prototype,"selectionEnabled",void 0);r.__decorate([z.property()],E.prototype,"selectedItems",
void 0);r.__decorate([m.aliasOf("viewModel.view")],E.prototype,"view",void 0);r.__decorate([A.vmEvent("trigger-action"),z.property({type:ma})],E.prototype,"viewModel",void 0);r.__decorate([z.property()],E.prototype,"visibleElements",void 0);r.__decorate([K.cast("visibleElements")],E.prototype,"castVisibleElements",null);r.__decorate([m.aliasOf("viewModel.triggerAction")],E.prototype,"triggerAction",null);r.__decorate([t.accessibleHandler()],E.prototype,"_toggleActionsOpen",null);r.__decorate([t.accessibleHandler()],
E.prototype,"_triggerPanel",null);r.__decorate([t.accessibleHandler()],E.prototype,"_triggerAction",null);r.__decorate([t.accessibleHandler()],E.prototype,"_toggleVisibility",null);r.__decorate([t.accessibleHandler()],E.prototype,"_toggleChildrenClick",null);r.__decorate([t.accessibleHandler()],E.prototype,"_toggleSelection",null);return E=r.__decorate([C.subclass("esri.widgets.LayerList")],E)});