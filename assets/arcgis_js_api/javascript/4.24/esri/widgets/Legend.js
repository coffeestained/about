// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Legend/LegendViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./support/ActiveLayerInfo ../../intl/locale".split(" "),function(E,J,H,q,h,L,B,F,R,p,A,c,e,g){const r=
h.ofType(e),l="esri.layers.BuildingSceneLayer esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.GeoJSONLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.HeatmapLayer esri.layers.ImageryLayer esri.layers.ImageryTileLayer esri.layers.MapImageLayer esri.layers.OGCFeatureLayer esri.layers.PointCloudLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.TileLayer esri.layers.VoxelLayer esri.layers.WFSLayer esri.layers.WMSLayer esri.layers.WMTSLayer esri.layers.WCSLayer".split(" "),
P=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];H=function(O){function C(b){b=O.call(this,b)||this;b._handles=new L;b._layerViewByLayerId={};b._layerInfosByLayerViewId={};b._activeLayerInfosByLayerViewId={};b._activeLayerInfosWithNoParent=new h;b.activeLayerInfos=new r;b.basemapLegendVisible=!1;b.groundLegendVisible=!1;b.hideLayersNotInCurrentView=!1;b.keepCacheOnDestroy=!1;b.respectLayerVisibility=!0;b.layerInfos=[];b.view=
null;return b}E._inheritsLoose(C,O);var w=C.prototype;w.initialize=function(){this._handles.add(B.watch(()=>this.view,()=>this._viewHandles(),B.initial),"view");this._handles.add(g.onLocaleChange(()=>this._refresh()))};w.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};w._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(B.watch(()=>this.state,()=>this._stateHandles(),B.initial),"state")};w._stateHandles=function(){this._resetAll();
"ready"===this.state&&this._watchPropertiesAndAllLayerViews()};w._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};w._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};w._destroyViewActiveLayerInfo=function(b){this._handles.remove(b);const k=this._activeLayerInfosByLayerViewId[b];delete this._activeLayerInfosByLayerViewId[b];
k&&k.parent&&k.parent.children.remove(k)};w._watchPropertiesAndAllLayerViews=function(){const {allLayerViews:b}=this.view;b.length&&this._refresh();this._handles.add(b.on("change",k=>this._allLayerViewsChangeHandle(k)),"all-layer-views");this._handles.add(B.watch(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),"legend-properties")};w._allLayerViewsChangeHandle=function(b){b.removed.forEach(k=>this._destroyViewActiveLayerInfo(k.uid));this._refresh()};
w._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()};w._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)};w._sortActiveLayerInfos=function(b){if(!(2>b.length)){var k=[];b.forEach(d=>{if(!d.parent){var n=d.layer.parent;
(n=(n=n&&"uid"in n&&this._layerViewByLayerId[n.uid])&&this._activeLayerInfosByLayerViewId[n.uid])&&b.includes(n)&&(k.push(d),d.parent=n,n.children.add(d),this._sortActiveLayerInfos(n.children))}});b.removeMany(k);var D={};this.view.allLayerViews.forEach((d,n)=>D[d.layer.uid]=n);b.sort((d,n)=>(D[n.layer.uid]||0)-(D[d.layer.uid]||0))}};w._generateLayerViews=function(){const b=[];P.filter(this._filterLayerViews,this).map(this.get,this).filter(k=>null!=k).forEach(this._collectLayerViews("layerViews",
b));return b};w._filterLayerViews=function(b){const k=!this.groundLegendVisible&&"view.groundView.layerViews"===b;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===b||"view.basemapView.referenceLayerViews"===b))&&!k};w._collectLayerViews=function(b,k){const D=d=>{d&&d.forEach(n=>{k.push(n);D(n[b])});return k};return D};w._filterLayerViewsByLayerInfos=function(b){const k=this.layerInfos;return k&&k.length?k.some(D=>this._hasLayerInfo(D,b)):!0};w._hasLayerInfo=function(b,k){const D=
this._isLayerUIDMatching(b.layer,k.layer.uid);D&&(this._layerInfosByLayerViewId[k.uid]=b);return D};w._isLayerUIDMatching=function(b,k){return b&&(b.uid===k||this._hasLayerUID(b.layers,k))};w._hasLayerUID=function(b,k){return b&&b.some(D=>this._isLayerUIDMatching(D,k))};w._isLayerViewSupported=function(b){return l.includes(b.layer.declaredClass)?(this._layerViewByLayerId[b.layer.uid]=b,!0):!1};w._generateActiveLayerInfo=function(b){this._isLayerActive(b)?this._buildActiveLayerInfo(b):(this._handles.remove(b.uid),
this._handles.add(B.watch(()=>{var k;return[b.legendEnabled,null==(k=b.layer)?void 0:k.legendEnabled]},()=>this._layerActiveHandle(b)),b.uid))};w._layerActiveHandle=function(b){this._isLayerActive(b)&&(this._handles.remove(b.uid),this._buildActiveLayerInfo(b))};w._isLayerActive=function(b){return this.respectLayerVisibility?b.legendEnabled&&b.get("layer.legendEnabled"):!0};w._buildActiveLayerInfo=function(b){var k;const D=b.layer,d=b.uid;var n=this._layerInfosByLayerViewId[d];let u=this._activeLayerInfosByLayerViewId[d];
u||(u=new e({layer:D,layerView:b,title:n&&void 0!==n.title&&n.layer.uid===D.uid?n.title:D.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n&&n.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[d]=u);n=D.parent&&"uid"in D.parent&&this._layerViewByLayerId[null==(k=D.parent)?void 0:k.uid];u.parent=this._activeLayerInfosByLayerViewId[null==n?void 0:n.uid];if(!this._handles.has(d)){k=
B.watch(()=>D.title,S=>this._titleHandle(S,u));n=B.watch(()=>[D.opacity,"renderer"in D&&D.renderer,"pointSymbol"in D&&D.pointSymbol,"lineSymbol"in D&&D.lineSymbol,"polygonSymbol"in D&&D.polygonSymbol],()=>this._constructLegendElements(u));var Q=B.when(()=>{var S;return!0===(null==(S=this.view)?void 0:S.stationary)},()=>this._scaleHandle(u),B.initial);const U=B.watch(()=>b._effectiveRenderer,()=>this._constructLegendElements(u)),y=B.watch(()=>"effect"in D&&D.effect,()=>this._constructLegendElements(u));
k=[k,n,Q,U,y];this.respectLayerVisibility&&(n=B.watch(()=>b.legendEnabled,S=>this._legendEnabledHandle(S,u)),Q=B.watch(()=>D.legendEnabled,S=>this._legendEnabledHandle(S,u)),k.push(n,Q));this._handles.add(k,d)}u.isScaleDriven||this._constructLegendElements(u);this._addActiveLayerInfo(u)};w._titleHandle=function(b,k){k.title=b;this._constructLegendElements(k)};w._legendEnabledHandle=function(b,k){b?this._addActiveLayerInfo(k):this._removeActiveLayerInfo(k)};w._scaleHandle=function(b){(b.isScaleDriven||
b.hideLayersNotInCurrentView)&&this._constructLegendElements(b)};w._addActiveLayerInfo=function(b){const {layerView:k,layer:D}=b;if(this._isLayerActive(k)&&!this.activeLayerInfos.includes(b)){var d=b.parent;if(d)d.children.includes(b)||d.children.push(b),this._sortActiveLayerInfos(d.children);else{var n;d=null==(n=this.layerInfos)?void 0:n.some(u=>u.layer.uid===D.uid);D.parent&&"uid"in D.parent&&!d?this._activeLayerInfosWithNoParent.add(b):(this.activeLayerInfos.add(b),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const u=
[];this._activeLayerInfosWithNoParent.forEach(Q=>{var U=Q.layer.parent;U=U&&"uid"in U&&this._layerViewByLayerId[null==U?void 0:U.uid];if(U=this._activeLayerInfosByLayerViewId[null==U?void 0:U.uid])u.push(Q),Q.parent=U});u.length&&(this._activeLayerInfosWithNoParent.removeMany(u),u.forEach(Q=>this._addActiveLayerInfo(Q)))}}};w._removeActiveLayerInfo=function(b){const k=b.parent;k?k.children.remove(b):this.activeLayerInfos.remove(b)};w._constructLegendElements=function(b){var k;const D=b.layer;"featureCollections"in
D&&D.featureCollections?b.buildLegendElementsForFeatureCollections(D.featureCollections):"featureReduction"in D&&"binning"===(null==(k=D.featureReduction)?void 0:k.type)&&"renderer"in D.featureReduction?b.buildLegendElementsForRenderer(D.featureReduction.renderer):"renderer"in D&&D.renderer?b.buildLegendElementsForRenderer(D.renderer):"url"in D&&D.url?b.buildLegendElementsForTools():b.children.forEach(d=>this._constructLegendElements(d))};E._createClass(C,[{key:"state",get:function(){return this.get("view.ready")?
"ready":"disabled"}}]);return C}(q);J.__decorate([F.property({type:r})],H.prototype,"activeLayerInfos",void 0);J.__decorate([F.property()],H.prototype,"basemapLegendVisible",void 0);J.__decorate([F.property()],H.prototype,"groundLegendVisible",void 0);J.__decorate([F.property()],H.prototype,"hideLayersNotInCurrentView",void 0);J.__decorate([F.property()],H.prototype,"keepCacheOnDestroy",void 0);J.__decorate([F.property()],H.prototype,"respectLayerVisibility",void 0);J.__decorate([F.property()],H.prototype,
"layerInfos",void 0);J.__decorate([F.property({readOnly:!0})],H.prototype,"state",null);J.__decorate([F.property()],H.prototype,"view",void 0);return H=J.__decorate([c.subclass("esri.widgets.Legend.LegendViewModel")],H)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../kernel ../../../request ../../../symbols ../../../core/Accessor ../../../core/Collection ../../../core/Handles ../../../core/jsonMap ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/PropertyOrigin ../../../layers/effects/EffectView ../../../layers/effects/jsonUtils ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/support/rendererConversion ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/cimSymbolUtils ../../../symbols/support/previewUtils ../../../symbols/support/renderUtils ../../../symbols/support/symbolUtils ../../../symbols/support/utils ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils ../../smartMapping/support/utils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleFillSymbol".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c,e,g,r,l,P,O,C,w,b,k,D,d,n,u,Q,U,y,S,v,t,Y,K,T,f,x,I,Z,ea,da,G,M,X){function ba(ua){return"esri.renderers.SimpleRenderer"===ua.declaredClass}function ja(ua){return"esri.renderers.ClassBreaksRenderer"===ua.declaredClass}function pa(ua){return"esri.renderers.UniqueValueRenderer"===ua.declaredClass}function na(ua){return"esri.renderers.HeatmapRenderer"===ua.declaredClass}function ma(ua){return"esri.renderers.PointCloudClassBreaksRenderer"===ua.declaredClass}function ya(ua){return"esri.renderers.PointCloudStretchRenderer"===
ua.declaredClass}function fa(ua){return"esri.renderers.PointCloudUniqueValueRenderer"===ua.declaredClass}function za(ua){return"esri.renderers.DotDensityRenderer"===ua.declaredClass}function ka(ua){return"esri.renderers.PieChartRenderer"===ua.declaredClass}function qa(ua){return"esri.layers.BuildingSceneLayer"===ua.declaredClass}function sa(ua){ua="authoringInfo"in ua&&(null==ua?void 0:ua.authoringInfo);return"univariate-color-size"===(null==ua?void 0:ua.type)}function Ba(ua){ua="authoringInfo"in
ua&&(null==ua?void 0:ua.authoringInfo);return"univariate-color-size"===(null==ua?void 0:ua.type)&&"above-and-below"===(null==ua?void 0:ua.univariateTheme)}const ta=c.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Ea=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Fa=new A.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ka={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,
127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Ia=new M({size:6,outline:{color:[128,128,128,.5],width:.5}}),Oa=new X({style:"solid"}),Pa=new M({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Ha={};B=function(ua){function Ja(m){m=ua.call(this,m)||this;m._handles=new p;m._hasColorRamp=!1;m._hasOpacityRamp=!1;m._hasSizeRamp=!1;m._webStyleSymbolCache=
new Map;m._dotDensityUrlCache=new Map;m._scaleDrivenSizeVariable=null;m._hasClusterSizeVariable=!1;m.children=new R;m.layerView=null;m.layer=null;m.legendElements=[];m.parent=null;m.hideLayersNotInCurrentView=!1;m.keepCacheOnDestroy=!1;m.respectLayerVisibility=!0;m.sublayerIds=[];m.title=null;m.view=null;return m}J._inheritsLoose(Ja,ua);var ia=Ja.prototype;ia.initialize=function(){const m=()=>this.notifyChange("ready");this._handles.add([r.on(()=>this.children,"change",a=>{const {added:z,removed:N}=
a,V=this._handles;z.forEach(W=>{const aa=`activeLayerInfo-ready-watcher-${W.layer.uid}`;V.add(r.watch(()=>W.ready,m,r.initial),aa)});N.forEach(W=>V.remove(W.layer.uid));m()})]);this.keepCacheOnDestroy||(Ha={})};ia.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=this._webStyleSymbolCache=this._handles=null;this.keepCacheOnDestroy||(Ha=null)};ia.buildLegendElementsForFeatureCollections=function(){var m=J._asyncToGenerator(function*(a){if(this.hideLayersNotInCurrentView&&
!(yield this._isLayerInCurrentView()))this.legendElements=[],this.notifyChange("ready");else{a=Array.from(a,z=>{if("esri.layers.FeatureLayer"===z.declaredClass)return this._getRendererLegendElements(z.renderer,{title:z.title});if(z.featureSet&&z.featureSet.features.length){var N=z.layerDefinition,V=N&&N.drawingInfo;V=V&&U.fromJSON(V.renderer);N=Fa.read(N.geometryType);return V?this._getRendererLegendElements(V,{title:z.name,geometryType:N}):(ta.warn("drawingInfo not available!"),null)}return null});
try{const z=[];yield g.eachAlways(a).then(N=>{N.forEach(({value:V})=>V&&z.push(...V))});this.legendElements=z;this.notifyChange("ready")}catch(z){ta.warn("error while building legend for layer!",z)}}});return function(a){return m.apply(this,arguments)}}();ia.buildLegendElementsForRenderer=function(){var m=J._asyncToGenerator(function*(a){try{this.legendElements=(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getRendererLegendElements(a):[],this.notifyChange("ready")}catch(z){ta.warn("error while building legend for layer!",
z)}});return function(a){return m.apply(this,arguments)}}();ia.buildLegendElementsForTools=function(){var m=J._asyncToGenerator(function*(){var a=this;const z=this.layer;if("esri.layers.VoxelLayer"===z.declaredClass)this._constructLegendElementsForVoxellayer();else if("esri.layers.WMTSLayer"===z.declaredClass)this._constructLegendElementsForWMTSlayer();else if("esri.layers.WMSLayer"===z.declaredClass)yield this._constructLegendElementsForWMSSublayers();else if(qa(z))yield this._constructLegendElementsForBuildingSceneLayer();
else if("esri.layers.MapImageLayer"===z.declaredClass||"esri.layers.TileLayer"===z.declaredClass||qa(z))yield this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");var N="default";if("esri.layers.ImageryLayer"===z.declaredClass){var V,W;N=(null==z?void 0:null==(V=z.renderingRule)?void 0:V.functionName)||"default";V=null!=(W=z.bandIds)&&W.length?z.bandIds.join(""):"###";N=N+"_"+V}yield this._getLegendLayers(`${z.uid}-${N}`).then(function(){var aa=J._asyncToGenerator(function*(ca){a.legendElements=
[];a.notifyChange("ready");ca=ca.map(function(){var la=J._asyncToGenerator(function*(va){if("esri.layers.ImageryLayer"===z.declaredClass||"esri.layers.ImageryTileLayer"===z.declaredClass){const wa=r.watch(()=>["renderingRule"in z&&z.renderingRule,z.bandIds],()=>g.debounce(J._asyncToGenerator(function*(){Ha["default"]=null;z.renderer?yield a.buildLegendElementsForRenderer(z.renderer):yield a.buildLegendElementsForTools()}))());a._handles.add(wa,"imageryLayers-watcher")}(va=a._generateSymbolTableElementForLegendLayer(va))&&
va.infos.length&&("esri.layers.ImageryLayer"===z.declaredClass&&(va.title=z.title),a.legendElements.push(va));a.notifyChange("ready")});return function(va){return la.apply(this,arguments)}}());yield g.eachAlways(ca)});return function(ca){return aa.apply(this,arguments)}}()).catch(aa=>{ta.warn("Request to server for legend has failed!",aa)})}});return function(){return m.apply(this,arguments)}}();ia._isLayerInCurrentView=function(){var m=J._asyncToGenerator(function*(){const a=this.layer,z=this.layerView,
N=z&&"createQuery"in z&&"queryFeatureCount"in z;if(!(N||z&&"createQuery"in a&&"queryFeatureCount"in a))return!0;yield r.whenOnce(()=>!z.updating);const V=N?"createQuery"in z&&z.createQuery():"createQuery"in a&&a.createQuery();V.geometry=this.view.extent;return 0!==(N?"queryFeatureCount"in z&&(yield z.queryFeatureCount(V)):"queryFeatureCount"in a&&(yield a.queryFeatureCount(V)))});return function(){return m.apply(this,arguments)}}();ia._getParentLayerOpacity=function(m){let a=1;const z=m.parent;z&&
"uid"in z&&(a=this._getParentLayerOpacity(z));return m.opacity*a};ia._isGroupActive=function(){const m=this.children;return m.length?m.some(a=>a.ready):!1};ia._isRendererScaleDriven=function(m){return"dot-density"===m.type||Ea.test("valueExpression"in m&&m.valueExpression)?!0:(m="visualVariables"in m&&m.visualVariables)?m.some(a=>this._isScaleDrivenSizeVariable(a)):!1};ia._isScaleDrivenSizeVariable=function(m){if(m&&"size"!==m.type)return!1;const a=m.minSize,z=m.maxSize;return"object"===typeof a&&
a?this._isScaleDrivenSizeVariable(a):"object"===typeof z&&z?this._isScaleDrivenSizeVariable(z):!!m.expression||Ea.test(m.valueExpression)};ia._isLayerScaleDriven=function(m){if("minScale"in m&&0<m.minScale||"maxScale"in m&&0<m.maxScale)return!0;if("sublayers"in m&&m.sublayers)return m.sublayers.some(z=>this._isLayerScaleDriven(z));const a=m.parent;if(!1===m.loaded&&a&&"esri.layers.MapImageLayer"===a.declaredClass&&"source"in m&&m.source&&"map-layer"===m.source.type)for(const z of a.sourceJSON.layers)if(z.id===
m.source.mapLayerId&&(0<z.minScale||0<z.maxScale))return!0;return!1};ia._constructLegendElementsForVoxellayer=function(){var m=J._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("voxel-style-watcher");const a=this.layer;this._handles.add(r.watch(()=>a.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");var z=e.unwrap(a.getVariableStyle(null));const N=[];if(z){var V;if(null!=(V=z.uniqueValues)&&V.length){const aa=[];z.uniqueValues.forEach(ca=>
{ca.enabled&&aa.push({label:ca.label||`${ca.value}`,value:ca.value,symbol:new X({color:ca.color,outline:null})})});aa.length&&N.push({type:"symbol-table",title:z.label,infos:aa})}else if(z.transferFunction){const {colorStops:aa,stretchRange:ca}=z.transferFunction;V=aa.toArray().reverse();const la=ca.map((wa,ha)=>`${0===ha?da.SPECIAL_CHARS_LESS_THAN:da.SPECIAL_CHARS_GREATER_THAN} ${G.formatNumberLabel(wa)}`).reverse(),va=V.map(wa=>({color:wa.color,value:null,label:null}));va[0].label=la[0];va[va.length-
1].label=la[1];N.push({type:"color-ramp",title:z.label,infos:va,preview:K.renderColorRampPreviewHTML(V.map(wa=>wa.color))})}}const W=a.opacity;z=N.reduce((aa,ca)=>aa.concat(this._getAllInfos(ca)),[]).filter(aa=>!(null==aa||!aa.symbol)).map(aa=>this._getSymbolPreview(aa,W));yield g.eachAlways(z);this.legendElements=N;this.notifyChange("ready")});return function(){return m.apply(this,arguments)}}();ia._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");
const m=this.layer.activeLayer;this._handles.add(r.watch(()=>{const {layer:a}=this;return a&&"activeLayer"in a&&a.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");if(m.styleId&&m.styles){let a=null;m.styles.some(z=>m.styleId===z.id?(a=z.legendUrl,!0):!1);a&&(this.legendElements=[{type:"symbol-table",title:m.title,infos:[{src:a,opacity:this.opacity}]}])}this.notifyChange("ready")};ia._constructLegendElementsForWMSSublayers=function(){var m=J._asyncToGenerator(function*(){this.legendElements=
[];this._handles.remove("wms-sublayers-watcher");const a=this.layer;let z=null;if(a.customParameters||a.customLayerParameters)z={...a.customParameters,...a.customLayerParameters};this._handles.add(r.watch(()=>{const {layer:N}=this;return N&&"sublayers"in N&&N.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");this.legendElements=yield this._generateLegendElementsForWMSSublayers(a.sublayers,z);this.notifyChange("ready")});return function(){return m.apply(this,arguments)}}();
ia._generateLegendElementsForWMSSublayers=function(){var m=J._asyncToGenerator(function*(a,z){const N=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");a=a.toArray();for(const V of a)a=r.watch(()=>[V.title,V.visible,V.legendEnabled],()=>this._constructLegendElementsForWMSSublayers()),this._handles.add(a,"wms-sublayers-watcher"),(!this.respectLayerVisibility||V.visible&&V.legendEnabled)&&(a=yield this._generateSymbolTableElementForWMSSublayer(V,
z))&&a.infos.length&&N.unshift(a);return N});return function(a,z){return m.apply(this,arguments)}}();ia._generateSymbolTableElementForWMSSublayer=function(){var m=J._asyncToGenerator(function*(a,z){return!a.legendUrl&&a.sublayers?(z=(yield this._generateLegendElementsForWMSSublayers(a.sublayers,z)).filter(N=>N),{type:"symbol-table",title:a.title,infos:z}):this._generateSymbolTableElementForLegendUrl(a,z)});return function(a,z){return m.apply(this,arguments)}}();ia._generateSymbolTableElementForLegendUrl=
function(){var m=J._asyncToGenerator(function*(a,z){var N;let V=a.legendUrl;if(V){var W={type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};z&&(V=P.addQueryParameters(V,z));z=null;a=null==(N=a.layer)?void 0:N.opacity;try{if(z=(yield L(V,{responseType:"image"})).data)z.style.opacity=a}catch{}W.infos.push({src:V,preview:z,opacity:a});return W}});return function(a,z){return m.apply(this,arguments)}}();ia._getLegendLayers=function(m,a){const z=Ha&&Ha[m];return z?Promise.resolve(z):this._legendRequest(a).then(N=>
{N=N.layers;return Ha[m]=N})};ia._legendRequest=function(m){var a=this.layer;m={f:"json",dynamicLayers:m};if("esri.layers.ImageryLayer"===a.declaredClass){var z=a.exportImageServiceParameters.renderingRule;z&&(m.renderingRule=JSON.stringify(z.rasterFunctionDefinition||z.toJSON()));a.bandIds&&(m.bandIds=a.bandIds.join());if(a.raster||a.viewId||a.customParameters){const {raster:N,viewId:V,customParameters:W}=a;m={raster:N,viewId:V,...m,...W}}}z=a.url.replace(/(\/)+$/,"");"version"in a&&10.01<=a.version?
(a=z.indexOf("?"),z=-1<a?z.substring(0,a)+"/legend"+z.substring(a):z+"/legend"):(a=z.toLowerCase().indexOf("/rest/"),a=z.substring(0,a)+z.substring(a+5,z.length),z="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(a)+"\x26returnbytes\x3dtrue");return L(z,{query:m}).then(N=>N.data)};ia._constructLegendElementsForBuildingSceneLayer=function(){var m=J._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(r.watch(()=>
a.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(z){ta.warn("Request to server for legend has failed!",z)}});return function(){return m.apply(this,arguments)}}();ia._generateLegendElementsForBuildingSublayers=function(){var m=J._asyncToGenerator(function*(a,z){let N=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),
"sublayers-watcher");a=a.toArray();for(const W of a)if(a=r.watch(()=>["renderer"in W&&W.renderer,W.opacity,W.title,W.visible],()=>this._constructLegendElementsForBuildingSceneLayer()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||W.visible){a=W&&null!=W.opacity?W.opacity:null;var V=null!=a?a*z:z;"building-group"===W.type?(a={type:"symbol-table",title:W.title,infos:[]},V=yield this._generateLegendElementsForBuildingSublayers(W.sublayers,V),a.infos.push(...V),N=[a,...N]):W.renderer&&
(N=[...yield this._getRendererLegendElements(W.renderer,{title:W.title,opacity:V,sublayer:W}),...N])}return N.filter(W=>!!W&&("infos"in W?0<W.infos.length:!0))});return function(a,z){return m.apply(this,arguments)}}();ia._constructLegendElementsForSublayers=function(){var m=J._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(r.watch(()=>a.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");
try{this.legendElements=yield this._generateLegendElementsForSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(z){ta.warn("Request to server for legend has failed!",z)}});return function(){return m.apply(this,arguments)}}();ia._generateLegendElementsForSublayers=function(){var m=J._asyncToGenerator(function*(a,z,N){const V=this.layer;let W=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");a=a.toArray();!N&&this.sublayerIds&&
this.sublayerIds.length&&(a=this.sublayerIds.map(aa=>V.findSublayerById(aa)).filter(Boolean));for(const aa of a)if(a=r.watch(()=>[aa.renderer,aa.opacity,aa.title,aa.visible,aa.legendEnabled],()=>this._constructLegendElementsForSublayers()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||aa.visible&&aa.legendEnabled&&this._isSublayerInScale(aa))a=aa&&null!=aa.opacity?aa.opacity:null,a=null!=a?a*z:z,aa.renderer&&!aa.sublayers&&aa.originIdOf("renderer")>D.OriginId.SERVICE?(yield aa.load(),
W=[...yield this._getRendererLegendElements(aa.renderer,{title:aa.title,opacity:a,sublayer:aa}),...W]):(a=yield this._generateSymbolTableElementForSublayer(aa,a,N))&&W.unshift(a);return W.filter(aa=>!!aa&&("infos"in aa?0<aa.infos.length:!0))});return function(a,z,N){return m.apply(this,arguments)}}();ia._generateSymbolTableElementForSublayer=function(){var m=J._asyncToGenerator(function*(a,z,N){if(!N){N=new Map;var V=this.layer,W=a.source;let aa=null;if(W&&("map-layer"!==W.type||W.mapLayerId!==a.id||
W.gdbVersion&&W.gdbVersion!==("gdbVersion"in V&&V.gdbVersion))||a.originIdOf("renderer")>D.OriginId.SERVICE||a.originIdOf("labelingInfo")>D.OriginId.SERVICE||a.originIdOf("labelsVisible")>D.OriginId.SERVICE)W=new u.ExportImageParameters({layer:this.layer}),aa=W.hasDynamicLayers?W.dynamicLayers:null,W.destroy();(yield this._getLegendLayers(aa||`${V.uid}-default`,aa)).forEach(ca=>N.set(ca.layerId,ca))}V=N.get(a.id);return(!V||null!=V&&V.subLayerIds&&V.defaultVisibility)&&a.sublayers?(z=yield this._generateLegendElementsForSublayers(a.sublayers,
z,N),{type:"symbol-table",title:a.title,infos:z}):this._generateSymbolTableElementForLegendLayer(V,a,z)});return function(a,z,N){return m.apply(this,arguments)}}();ia._generateSymbolTableElementForLegendLayer=function(m,a,z){var N;if(!m||!m.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(m,a))return null;var V=null==a?void 0:a.renderer;let W=(null==a?void 0:a.title)||m.layerName;V&&(!a||(null==a?void 0:a.originIdOf("renderer"))>D.OriginId.SERVICE)&&(V=(null==a?void 0:a.title)||this._getRendererTitle(V,
a))&&(W&&"string"!==typeof V&&"title"in V&&(V.title=W),W=V);const aa={type:"symbol-table",title:W,legendType:m.legendType?m.legendType:null,infos:[]},ca=a?this._sanitizeLegendForSublayer(m.legend.slice(),a):m.legend;0<(null==(N=m.legendGroups)?void 0:N.length)?m.legendGroups.forEach(la=>{var va;const wa={type:"symbol-table",title:la.heading,legendType:m.legendType?m.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(ca.filter(ha=>ha.groupId===la.id),m.layerId,z)};0<(null==(va=
wa.infos)?void 0:va.length)&&aa.infos.push(wa)}):aa.infos=this._generateSymbolTableElementInfosForLegendLayer(ca,m.layerId,z);return 0<aa.infos.length?aa:null};ia._generateSymbolTableElementInfosForLegendLayer=function(m,a,z){return m.map(N=>{let V=N.url;if(N.imageData&&0<N.imageData.length)V=`data:image/png;base64,${N.imageData}`;else if(0!==V.indexOf("http"))V=h.addTokenParameter(`${this.layer.url}/${a}/images/${V}`);else return null;return{label:N.label,src:V,opacity:null==z?this.opacity:z,width:N.width,
height:N.height}}).filter(N=>!!N)};ia._isSublayerInScale=function(m){const a=m.minScale||0;m=m.maxScale||0;return 0<a&&a<this.scale||m>this.scale?!1:!0};ia._isLegendLayerInScale=function(m,a){a=a||this.layer;let z=null,N=null,V=!0;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?(0===m.minScale&&a.tileInfo&&(z=a.tileInfo.lods[0].scale),0===m.maxScale&&a.tileInfo&&(N=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(z=Math.min(a.minScale,m.minScale)||a.minScale||m.minScale,N=Math.max(a.maxScale,
m.maxScale));if(0<z&&z<this.scale||N>this.scale)V=!1;return V};ia._sanitizeLegendForSublayer=function(m,a){if("version"in this.layer&&10.1>this.layer.version||0===m.length)return m;a=a.renderer;let z=null,N=null;m.some(V=>V.values)&&m.some((V,W)=>{V.values||(z=W,N=V,N.label||(N.label="others"));return null!=N});a?"unique-value"===a.type?N&&(m.splice(z,1),m.push(N)):"class-breaks"===a.type&&(N&&m.splice(z,1),m.reverse(),N&&m.push(N)):N&&(m.splice(z,1),m.push(N));return m};ia._getRendererLegendElements=
function(){var m=J._asyncToGenerator(function*(a,z={}){var N=this.view;N=ba(a)||ja(a)||pa(a)||na(a)||za(a)||ka(a)?"2d"===N.type||y.isSupportedRenderer3D(a):"raster-stretch"===a.type||"raster-colormap"===a.type||"raster-shaded-relief"===a.type||ma(a)||ya(a)||fa(a)||"vector-field"===a.type||"flow"===a.type;return N?ma(a)||ya(a)||fa(a)||"esri.renderers.PointCloudRGBRenderer"===a.declaredClass?this._constructPointCloudRendererLegendElements(a,z):za(a)?this._constructDotDensityRendererLegendElements(a):
ka(a)?this._constructPieChartRendererLegendElements(a):this._constructRendererLegendElements(a,z):(ta.warn(`Renderer of type '${a.type}' not supported!`),[])});return function(a){return m.apply(this,arguments)}}();ia._getPointCloudRendererTitle=function(m){return m.legendOptions&&m.legendOptions.title||m.field};ia._constructPointCloudRendererLegendElements=function(m,a={}){a=a.title;const z=[];let N=null;var V=null;if(ma(m))N={type:"symbol-table",title:a||this._getPointCloudRendererTitle(m),infos:[]},
m.colorClassBreakInfos.forEach(W=>{N.infos.unshift({label:W.label||W.minValue+" - "+W.maxValue,value:[W.minValue,W.maxValue],symbol:this._getAppliedCloneSymbol(Ia,W.color)})});else if(ya(m)){V=m.stops;let W=null;if(V.length&&(1===V.length&&(W=V[0].color),!W)){const aa=V[0].value,ca=V[V.length-1].value;null!=aa&&null!=ca&&(W=x.getColorFromPointCloudStops(aa+(ca-aa)/2,V))}N={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Ia,W||Ia.color)}]};V=x.getRampStopsForPointCloud(m.stops);
V={type:"color-ramp",title:a||this._getPointCloudRendererTitle(m),infos:V,preview:K.renderColorRampPreviewHTML(V.map(aa=>aa.color))}}else fa(m)&&(N={type:"symbol-table",title:a||this._getPointCloudRendererTitle(m),infos:[]},m.colorUniqueValueInfos.forEach(W=>{N.infos.push({label:W.label||W.values.join(", "),value:W.values.join(", "),symbol:this._getAppliedCloneSymbol(Ia,W.color)})}));N&&N.infos.length&&z.push(N);V&&V.infos.length&&z.push(V);a=z.reduce((W,aa)=>W.concat(aa.infos),[]).filter(W=>!!W.symbol).map(W=>
this._getSymbolPreview(W,this.opacity,{symbolConfig:{applyColorModulation:!!m.colorModulation}}));return g.eachAlways(a).then(()=>z)};ia._getElementInfoForDotDensity=function(m,a){const {backgroundColor:z,outline:N,dotSize:V}=m;var W=this.effectList;W=null==W?void 0:W.effects.map(ca=>ca.toJSON());W=n.effectFunctionsFromJSON(W);W=V+"-"+a+"-"+z+"-"+(N&&JSON.stringify(N.toJSON()))+"-"+W;const aa=this._dotDensityUrlCache;m=aa.has(W)?aa.get(W):K.renderDotDensityPreviewHTML(m,a);aa.set(W,m);a=Y.renderSymbol([[{shape:{type:"image",
x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]}]],[m.width,m.height],{effectView:this.effectList});return{opacity:1,src:m.src,preview:a,width:m.width,height:m.height}};ia._constructDotDensityRendererLegendElements=function(m){const a=m.calculateDotValue(this.view.scale),z={type:"symbol-table",title:{value:a&&Math.round(a),unit:m.legendOptions&&m.legendOptions.unit||""},infos:[]};m.attributes.forEach(N=>{const V=this._getElementInfoForDotDensity(m,N.color);V.label=
N.label||N.valueExpressionTitle||N.field;z.infos.push(V)});return Promise.resolve([z])};ia._constructPieChartRendererLegendElements=function(){var m=J._asyncToGenerator(function*(a){var z,N,V;const W=this.layer.opacity,aa=[],ca=a.outline;a.attributes.forEach(wa=>{const ha=new M({color:wa.color,outline:ca});aa.push({label:wa.label||wa.valueExpressionTitle||wa.field,symbol:ha})});var la=aa.length?[...aa]:[];null!=(z=a.othersCategory)&&z.color&&0!==(null==(N=a.othersCategory)?void 0:N.threshold)&&(z=
new M({color:a.othersCategory.color,outline:ca}),aa.push({label:a.othersCategory.label||"Others",symbol:z}));null!=(V=a.defaultColor)&&V.a&&(V=new M({color:a.defaultColor,outline:ca}),aa.push({label:a.defaultLabel,symbol:V}));V=(yield this._getVisualVariableLegendElements(a,this.layer))||[];if(aa.length){var va;V.unshift({type:"symbol-table",title:null,infos:aa});la=la.filter(wa=>"Others"!==wa.label).map(wa=>wa.symbol.color).filter(Boolean);la=K.renderPieChartPreviewHTML(la,{holePercentage:a.holePercentage,
backgroundColor:null==(va=a.backgroundFillSymbol)?void 0:va.color,effectList:this.effectList,outline:ca});V.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(a,this.layer),infos:aa,preview:la})}a=V.reduce((wa,ha)=>wa.concat(this._getAllInfos(ha)),[]).filter(wa=>!(null==wa||!wa.symbol)&&!(null!=wa&&wa.preview)).map(wa=>this._getSymbolPreview(wa,W,{effectList:this.effectList}));yield g.eachAlways(a);return V});return function(a){return m.apply(this,arguments)}}();ia._constructRendererLegendElements=
function(){var m=J._asyncToGenerator(function*(a,z={}){const {title:N,sublayer:V}=z,W=V||this.layer;a=yield this._loadRenderer(a);this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1;this._scaleDrivenSizeVariable=null;const aa=(yield this._getVisualVariableLegendElements(a,W))||[],ca={type:"symbol-table",title:N||this._getRendererTitle(a,W),infos:[]};let la=null,va=!1;const wa=new Set;if("flow"!==a.type||this._hasSizeRamp)if(sa(a)){var ha=N,oa=Ba(a)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",
Aa=aa.findIndex(ra=>"color-ramp"===ra.type);Aa=-1!==Aa?aa.splice(Aa,1)[0]:null;var xa=aa.findIndex(ra=>"size-ramp"===ra.type);xa=-1!==xa?aa.splice(xa,1)[0]:null;var Ca=[];Aa&&(ha=Aa.title,Ca.push(Aa));xa&&(ha=xa.title,Ca.push(xa));0<Ca.length&&aa.push({type:oa,title:ha,infos:Ca})}else if(na(a))ha=I.getHeatmapRampStops(a),aa.push({type:"heatmap-ramp",title:N||(null==(xa=a.legendOptions)?void 0:xa.title),infos:ha,preview:K.renderColorRampPreviewHTML(ha.map(ra=>ra.color),{effectList:this.effectList})});
else if(pa(a)){if((oa=a&&a.authoringInfo)&&"relationship"===oa.type){const {focus:ra,numClasses:Da,field1:La,field2:Ma}=oa;if(Da&&La&&Ma){Aa=[La,Ma];oa=Z.getRotationAngleForFocus(ra)||0;for(ha of Aa){const {field:Qa,normalizationField:Na,label:Ra}=ha;Aa=Ra||{field:this._getFieldAlias(Qa,W),normField:Na&&this._getFieldAlias(Na,W)};xa=Pa.clone();xa.angle=oa;ca.infos.push({label:Aa,symbol:xa});wa.add(xa);oa+=90}ha=Z.getRelationshipRampElement({focus:ra,numClasses:Da,infos:a.uniqueValueInfos});aa.unshift(ha)}}else{const ra=
a.field;a.uniqueValueInfos.forEach(Da=>{Da.symbol&&ca.infos.push({label:Da.label||this._getDomainName(ra,Da.value,W)||Da.value,value:Da.value,symbol:Da.symbol})})}a.defaultSymbol&&(ca.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),va=!0)}else if(ja(a))la=this._isUnclassedRenderer(a),la&&this._hasSizeRamp||(a.classBreakInfos.forEach(ra=>{ra.symbol&&ca.infos.unshift({label:ra.label||(la?null:ra.minValue+" - "+ra.maxValue),value:[ra.minValue,ra.maxValue],symbol:ra.symbol})}),la&&
(ca.title=null),this._updateInfosforClassedSizeRenderer(a,ca.infos)),a.defaultSymbol&&!la&&(ca.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),va=!0);else if("raster-stretch"===a.type)if("esri.layers.ImageryTileLayer"===this.layer.declaredClass||"esri.layers.WCSLayer"===this.layer.declaredClass)ha=this._constructTileImageryStretchRendererElements(a),"stretch-ramp"===ha.type?aa.push(ha):ca.infos=ha;else{ha=this.layer;a.statistics&&a.statistics.length&&(oa=null!=a.statistics[0].min?
a.statistics[0].min:a.statistics[0][0],Aa=null!=a.statistics[0].max?a.statistics[0].max:a.statistics[0][1]);xa=[];xa=e.unwrap(ha.renderingRule?yield ha.generateRasterInfo(ha.renderingRule):ha.serviceRasterInfo);const ra=xa.keyProperties.BandProperties;Ca=Ka[ha.rasterInfo.pixelType.toLowerCase()];1===xa.bandCount?(oa=null!=oa?oa:xa.statistics?xa.statistics[ha.bandIds[0]].min:Ca[0],Aa=null!=Aa?Aa:xa.statistics?xa.statistics[ha.bandIds[0]].max:Ca[1],oa||Aa?aa.push(this._getStretchLegendElements(a,{min:oa,
max:Aa})):this._getServerSideLegend()):ha.bandIds&&1===ha.bandIds.length?(oa=null!=oa?oa:xa.statistics?xa.statistics[ha.bandIds[0]].min:Ca[0],Aa=null!=Aa?Aa:xa.statistics?xa.statistics[ha.bandIds[0]].max:Ca[1],oa||Aa?aa.push(this._getStretchLegendElements(a,{min:oa,max:Aa})):this._getServerSideLegend()):3<=xa.bandCount?ra&&ra.length>=xa.bandCount?ha.bandIds&&3===ha.bandIds.length?(xa=ha.bandIds.map(Da=>ra[Da].BandName),ca.infos=this._createSymbolTableElementMultiBand(xa)):"lerc"===ha.format?(xa=[0,
1,2].map(Da=>ra[Da].BandName),ca.infos=this._createSymbolTableElementMultiBand(xa)):this._getServerSideLegend():"lerc"===ha.format?(xa=["band1","band2","band3"],ca.infos=this._createSymbolTableElementMultiBand(xa)):this._getServerSideLegend():this._getServerSideLegend()}else if("raster-colormap"===a.type)a.colormapInfos.forEach(ra=>{ca.infos.push({label:ra.label,value:ra.value,symbol:this._getAppliedCloneSymbol(Oa,ra.color)})});else if(ba(a)){ha=a.symbol;switch(z.geometryType){case "point":ha="pointSymbol"in
W&&W.pointSymbol;break;case "polyline":ha="lineSymbol"in W&&W.lineSymbol;break;case "polygon":ha="polygonSymbol"in W&&W.polygonSymbol}a.symbol&&!this._hasSizeRamp&&ca.infos.push({label:a.label,symbol:ha})}else"vector-field"===a.type?(a.outputUnit&&(this.title="("+a.toJSON().outputUnit+")"),ca.title=a.attributeField,ha=a.getClassBreakInfos(),null!=ha&&ha.length?ha.forEach(ra=>{ca.infos.push({label:ra.minValue+" - "+ra.maxValue,symbol:ra.symbol})}):ca.infos.push({label:a.attributeField,symbol:a.getDefaultSymbol()})):
"raster-shaded-relief"===a.type&&aa.push(this._getStretchLegendElements(a,{min:0,max:255}));else ha=yield da.getSymbolForFlowRenderer(a),ca.infos.push({label:null,symbol:ha});const Ga=a.defaultSymbol;!Ga||va||ba(a)||la&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||aa.push({type:"symbol-table",infos:[{label:a.defaultLabel||"others",symbol:Ga}]});ca.infos.length&&aa.unshift(ca);const Sa=null==z.opacity?this.opacity:z.opacity,Ta=this._isTallSymbol("visualVariables"in a&&a.visualVariables),
Ua="esri.layers.ImageryLayer"===this.layer.declaredClass||"esri.layers.ImageryTileLayer"===this.layer.declaredClass;z=aa.reduce((ra,Da)=>ra.concat(this._getAllInfos(Da)),[]).filter(ra=>!(null==ra||!ra.symbol)).map(ra=>this._getSymbolPreview(ra,Sa,{isDefault:ra.symbol===Ga,applyScaleDrivenSize:!wa.has(ra.symbol),symbolConfig:{isTall:Ta,isSquareFill:Ua},effectList:wa.has(ra.symbol)?null:this.effectList}));a=null;yield g.eachAlways(z);return aa});return function(a){return m.apply(this,arguments)}}();
ia._getServerSideLegend=function(){setTimeout(()=>this.buildLegendElementsForTools(),0)};ia._getAllInfos=function(m){const a=null==m?void 0:m.infos;return a?a.reduce((z,N)=>z.concat(this._getAllInfos(N)),[]):[m]};ia._constructTileImageryStretchRendererElements=function(m){function a(va){var wa;const ha=(null!=V&&null!=(wa=V.bandIds)&&wa.length?V.bandIds:Array.from(Array(Math.min(W.bandCount,3)).keys())).map(oa=>va&&va[oa]&&va[oa].BandName||"band"+(oa+1));3>ha.length?ha.push(ha[1]):3<ha.length&&ha.splice(3);
return ha}var z,N;const V=this.layer,W=V.rasterInfo,aa=W.bandCount||m.statistics.length;var ca,la=[];la=W.keyProperties&&W.keyProperties.BandProperties;(ca=null!=m&&null!=(z=m.statistics)&&z.length?m.statistics:null==W?void 0:W.statistics)?(z=void 0!==ca[0].min?ca[0].min:ca[0][0],ca=ca[0].max||ca[0][1]):(ca=Ka[V.rasterInfo.pixelType.toLowerCase()],z=ca[0],ca=ca[1]);V.hasStandardTime()&&(z=V.getStandardTimeValue(z),ca=V.getStandardTimeValue(ca));if(1===W.bandCount||1===(null==(N=V.bandIds)?void 0:
N.length))return this._getStretchLegendElements(m,{min:z,max:ca});la=la&&la.length>=aa?a(la):a();return this._createSymbolTableElementMultiBand(la)};ia._getStretchLegendElements=function(m,a){m=x.getStrectchRampStops(m.colorRamp,a);return{type:"stretch-ramp",title:"",infos:m,preview:K.renderColorRampPreviewHTML(m.map(z=>z.color))}};ia._getSizeLegendElement=function(){var m=J._asyncToGenerator(function*(a,z,N,V){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(z):a,
infos:yield ea.getRampStops(N,z,yield da.getMedianColor(N),this.scale,this.view.type,V)}});return function(a,z,N,V){return m.apply(this,arguments)}}();ia._createSymbolTableElementMultiBand=function(m){const a=[],z=["red","green","blue"];m.forEach((N,V)=>{var W;a.push({label:{colorName:z[V],bandName:N},src:da.RGB_IMG_SOURCE[V],opacity:null!=(W=this.opacity)?W:1})});return a};ia._updateInfosforClassedSizeRenderer=function(m,a){const z=m.authoringInfo&&"class-breaks-size"===m.authoringInfo.type,N=m.classBreakInfos.some(V=>
T.isVolumetricSymbol(V.symbol));if(z&&N){const V=ea.REAL_WORLD_MAX_SIZE;m=m.classBreakInfos.length;const W=(V-ea.REAL_WORLD_MIN_SIZE)/(1<m?m-1:m);a.forEach((aa,ca)=>{aa.size=V-W*ca})}};ia._isTallSymbol=function(m){let a=!1,z=!1;if(m)for(let N=0;N<m.length&&(!a||!z);N++){const V=m[N];"size"===V.type&&("height"===V.axis&&(a=!0),"width-and-depth"===V.axis&&(z=!0))}return a&&z};ia._getSymbolPreview=function(){var m=J._asyncToGenerator(function*(a,z,N){var V=null!=N&&N.isDefault||null!=a.size||!this._hasSizeRamp?
a.size:l.px2pt(t.SymbolSizeDefaults.size);this._scaleDrivenSizeVariable&&null!=N&&N.applyScaleDrivenSize&&({getSize:V}=yield new Promise((W,aa)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],W,aa)),V=V(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===a.symbol.type?a.symbol.style:null}));return K.renderPreviewHTML(a.symbol,{size:V,opacity:z,scale:!1,symbolConfig:null==N?void 0:N.symbolConfig,effectView:null==N?void 0:N.effectList}).then(W=>
{a.preview=W;return a}).catch(()=>{a.preview=null;return a})});return function(a,z,N){return m.apply(this,arguments)}}();ia._loadRenderer=function(){var m=J._asyncToGenerator(function*(a){var z,N;const V=[];var W=this.layer;a=a.clone();this._hasClusterSizeVariable=!1;const aa="visualVariables"in a&&(null==(z=a.visualVariables)?void 0:z.some(la=>"size"===la.type&&"outline"!==la.target&&!Ea.test(la.valueExpression)));if(a&&"visualVariables"in a&&!aa&&"featureReduction"in W&&"cluster"===(null==(N=W.featureReduction)?
void 0:N.type)&&(z=e.unwrap(f.getClusterSizeVariable(this.layerView._effectiveRenderer,this.view)))){W=W.featureReduction;if("clusterMinSize"in W&&"clusterMaxSize"in W){const {clusterMinSize:la,clusterMaxSize:va}=W;z.legendOptions=new S({showLegend:la!==va})}a.visualVariables=(a.visualVariables||[]).concat([z]);this._hasClusterSizeVariable=!0}const ca=yield da.getMedianColor(a);if(ja(a)||pa(a))W=(a.classBreakInfos||a.uniqueValueInfos).map(la=>this._fetchSymbol(la.symbol,ca).then(va=>{la.symbol=va}).catch(()=>
{la.symbol=null})),Array.prototype.push.apply(V,W);V.push(this._fetchSymbol(a.symbol||a.defaultSymbol,a.defaultSymbol?null:ca).then(la=>{this._applySymbolToRenderer(a,la,ba(a))}).catch(()=>{this._applySymbolToRenderer(a,null,ba(a))}));return g.eachAlways(V).then(()=>a)});return function(a){return m.apply(this,arguments)}}();ia._applySymbolToRenderer=function(m,a,z){z?m.symbol=a:m.defaultSymbol=a};ia._fetchSymbol=function(){var m=J._asyncToGenerator(function*(a,z){if(!a)throw Error();if("web-style"===
a.type){const N=this._webStyleSymbolCache;try{const V=yield"2d"===this.view.type?a.fetchCIMSymbol({cache:N}):a.fetchSymbol({cache:N});return this._getAppliedCloneSymbol(V,z)}catch{throw ta.warn("Fetching web-style failed!"),Error();}}return this._getAppliedCloneSymbol(a,z)});return function(a,z){return m.apply(this,arguments)}}();ia._getAppliedCloneSymbol=function(m,a){if(!m||!a)return m;m=m.clone();const z=a&&a.toRgba();m.type.includes("3d")?this._applyColorTo3dSymbol(m,z):"cim"===m.type?v.applyCIMSymbolColor(m,
a):m.color&&(m.color=new q(z||m.color));return m};ia._applyColorTo3dSymbol=function(m,a){a&&m.symbolLayers.forEach(z=>{z&&(z.material||(z.material={}),z.material.color=new q(a))})};ia._getVisualVariableLegendElements=function(){var m=J._asyncToGenerator(function*(a,z){var N=this;if(!("visualVariables"in a&&a.visualVariables)||"vector-field"===a.type)return null;var V=a.visualVariables,W=[];const aa=[],ca=[];for(const ha of V)"color"===ha.type?W.push(ha):"size"===ha.type?aa.push(ha):"opacity"===ha.type&&
ca.push(ha);V=[...W,...aa,...ca];let la;if(0===W.length&&ja(a)&&a.classBreakInfos&&1===a.classBreakInfos.length)var va=(va=a.classBreakInfos[0])&&va.symbol;0===W.length&&ba(a)&&(va=a.symbol);va&&(va.type.includes("3d")?(W=va.symbolLayers.getItemAt(0),"water"===W.type?e.isSome(W.color)&&(la=W.color):e.isSome(W.material)&&e.isSome(W.material.color)&&(la=W.material.color)):va.url||(la=va.color));const wa=this.effectList;return(yield Promise.all(V.map(function(){var ha=J._asyncToGenerator(function*(oa){if(!oa.legendOptions||
!1!==oa.legendOptions.showLegend){const xa="flow"===a.type?oa.field:N._getRampTitle(oa,z);let Ca=null;var Aa="getField"in z&&z.getField&&z.getField(oa.field);Aa=Aa&&Q.isDateField(Aa);"color"===oa.type?(oa=yield x.getRampStops(oa,null,Aa),Ca={type:"color-ramp",title:xa,infos:oa,preview:K.renderColorRampPreviewHTML(oa.map(Ga=>Ga.color),{effectList:wa})},N._hasColorRamp||(N._hasColorRamp=!(null==Ca.infos||!Ca.infos.length))):"size"===oa.type&&"outline"!==oa.target?Ea.test(oa.valueExpression)?N._hasClusterSizeVariable||
(N._scaleDrivenSizeVariable=oa):(Ca=yield N._getSizeLegendElement(xa,oa,a,Aa),N._hasSizeRamp||(N._hasSizeRamp=!(null==Ca.infos||!Ca.infos.length))):"opacity"===oa.type&&(oa=yield x.getRampStops(oa,la,Aa),Ca={type:"opacity-ramp",title:xa,infos:oa,preview:K.renderColorRampPreviewHTML(oa.map(Ga=>Ga.color),{effectList:wa})},N._hasOpacityRamp||(N._hasOpacityRamp=!(null==Ca.infos||!Ca.infos.length)));return Ca&&Ca.infos?Ca:null}});return function(oa){return ha.apply(this,arguments)}}()))).filter(ha=>!!ha)});
return function(a,z){return m.apply(this,arguments)}}();ia._getDomainName=function(m,a,z){return m&&"function"!==typeof m?(z=(m="getField"in z&&z.getField&&z.getField(m))&&"getFieldDomain"in z&&z.getFieldDomain?z.getFieldDomain(m.name):null)&&"coded-value"===z.type?z.getName(a):null:null};ia._getClusterTitle=function(m){var a=this.layer;m=m.field;if("featureReduction"in a&&a.featureReduction&&"cluster"===a.featureReduction.type&&(a=a.featureReduction,a=(a="popupTemplate"in a&&a.popupTemplate)&&a.fieldInfos))for(const z of a)if(z.fieldName===
m)return"cluster_count"===m?z.label||{showCount:!0}:z.label;return{showCount:!0}};ia._getRampTitle=function(m,a){let z=m.field,N=m.normalizationField,V=!1,W=!1,aa=!1;var ca=null;z="function"===typeof z?null:z;N="function"===typeof N?null:N;ca=m.legendOptions&&m.legendOptions.title;if(null==ca)if(m.valueExpressionTitle)ca=m.valueExpressionTitle;else{if("renderer"in a&&a.renderer&&"authoringInfo"in a.renderer&&a.renderer.authoringInfo&&a.renderer.authoringInfo.visualVariables)for(m=a.renderer.authoringInfo.visualVariables,
ca=0;ca<m.length;ca++){const la=m[ca];if("color"===la.type){if("ratio"===la.style){V=!0;break}if("percent"===la.style){W=!0;break}if("percent-of-total"===la.style){aa=!0;break}}}ca={field:z&&this._getFieldAlias(z,a),normField:N&&this._getFieldAlias(N,a),ratio:V,ratioPercent:W,ratioPercentTotal:aa}}return ca};ia._getRendererTitle=function(m,a){if(m.legendOptions&&m.legendOptions.title)return m.legendOptions.title;if(m.valueExpressionTitle)return m.valueExpressionTitle;let z=m.field,N=null,V=null;ja(m)&&
(N=m.normalizationField,V="percent-of-total"===m.normalizationType);z="function"===typeof z?null:z;N="function"===typeof N?null:N;m=null;if(z||N)m={field:z&&this._getFieldAlias(z,a),normField:N&&this._getFieldAlias(N,a),normByPct:V};return m};ia._getFieldAlias=function(m,a){var z="popupTemplate"in a&&a.popupTemplate;z=z&&z.fieldInfos;let N=null;z&&z.some(W=>m===W.fieldName?(N=W,!0):!1);z=null;"getField"in a&&a.getField?z=a.getField(m):"fieldsIndex"in a&&a.fieldsIndex&&(z=a.fieldsIndex.get(m));a=N||
z;let V=null;a&&(V=N&&N.label||z&&z.alias||"name"in a&&a.name||"fieldName"in a&&a.fieldName);return V};ia._isUnclassedRenderer=function(m){const a=m.visualVariables;let z=!1;ja(m)&&m.classBreakInfos&&1===m.classBreakInfos.length&&a&&(z=m.field?a.some(N=>!(!N||m.field!==N.field||(m.normalizationField||N.normalizationField)&&m.normalizationField!==N.normalizationField)):!!a.length);return z};J._createClass(Ja,[{key:"effectList",get:function(){const m=this.layer;let a=null;"effect"in m&&m.effect&&(a=
new d.EffectView,a.effect=m.effect,a.end(),a.scale=this.scale);return a}},{key:"opacity",get:function(){var m;const a=this.layer.opacity,z=null==(m=this.parent)?void 0:m.opacity;m=(m=this.layer.parent)&&"uid"in m?this._getParentLayerOpacity(m):null;return null!=z?z*a:null!=m?m*a:a}},{key:"ready",get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length}},{key:"scale",get:function(){return this.view&&this.view.scale}},{key:"isScaleDriven",
get:function(){const m=this.layer;if(null===m)return!1;if("effect"in m&&m.effect&&Array.isArray(m.effect))return!0;if("featureReduction"in m&&m.featureReduction){if("cluster"===m.featureReduction.type)return!0;if("binning"===m.featureReduction.type&&"renderer"in m.featureReduction&&m.featureReduction.renderer)return this._isRendererScaleDriven(m.featureReduction.renderer)}return"renderer"in m&&m.renderer?this._isRendererScaleDriven(m.renderer):this._isLayerScaleDriven(this.layer)}},{key:"version",
get:function(){return this._get("version")+1}}]);return Ja}(F);H.__decorate([O.property()],B.prototype,"children",void 0);H.__decorate([O.property({readOnly:!0})],B.prototype,"effectList",null);H.__decorate([O.property()],B.prototype,"layerView",void 0);H.__decorate([O.property()],B.prototype,"layer",void 0);H.__decorate([O.property()],B.prototype,"legendElements",void 0);H.__decorate([O.property({readOnly:!0})],B.prototype,"opacity",null);H.__decorate([O.property()],B.prototype,"parent",void 0);
H.__decorate([O.property({readOnly:!0,dependsOn:[]})],B.prototype,"ready",null);H.__decorate([O.property()],B.prototype,"hideLayersNotInCurrentView",void 0);H.__decorate([O.property()],B.prototype,"keepCacheOnDestroy",void 0);H.__decorate([O.property()],B.prototype,"respectLayerVisibility",void 0);H.__decorate([O.property({readOnly:!0})],B.prototype,"scale",null);H.__decorate([O.property()],B.prototype,"sublayerIds",void 0);H.__decorate([O.property({readOnly:!0})],B.prototype,"isScaleDriven",null);
H.__decorate([O.property()],B.prototype,"title",void 0);H.__decorate([O.property({readOnly:!0,dependsOn:["ready"],value:0})],B.prototype,"version",null);H.__decorate([O.property()],B.prototype,"view",void 0);return B=H.__decorate([k.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],B)})},"esri/layers/effects/EffectView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./parser ./utils".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c){function e(l){l=A.parse(l)||[];var P=(P=l[0])?"type"in P:!1;return P?[{scale:-1,effects:l}]:l}function g(l,P,O){var C,w,b,k;return null!=(C=l[0])&&C.effects&&null!=(w=P[0])&&w.effects?(-1===(null==(b=l[0])?void 0:b.scale)||-1===(null==(k=P[0])?void 0:k.scale))&&(1<l.length||1<P.length)&&0>=O?!1:c.canInterpolateEffects(l[0].effects,P[0].effects):!0}function r(l,P,O){var C,w;const b=l.length>P.length?l:P;l=l.length>P.length?P:l;const k=l[l.length-1];P=null!=(C=null==
k?void 0:k.scale)?C:O;C=null!=(w=null==k?void 0:k.effects)?w:[];for(w=l.length;w<b.length;w++)l.push({scale:P,effects:[...C]});for(w=0;w<b.length;w++)l[w].scale=-1===l[w].scale?O:l[w].scale,b[w].scale=-1===b[w].scale?O:b[w].scale,c.normalizeEffects(l[w].effects,b[w].effects)}E.EffectView=function(l){function P(C){C=l.call(this,C)||this;C._from=null;C._to=null;C._final=null;C._current=[];C._time=0;C.duration=h("mapview-transitions-duration");C.effects=[];return C}J._inheritsLoose(P,l);var O=P.prototype;
O.canTransitionTo=function(C){try{return 0<this.scale&&g(this._current,e(C),this.scale)}catch{return!1}};O.transitionStep=function(C,w){this._applyTimeTransition(C);this._updateForScale(w)};O.end=function(){this._applyTimeTransition(this.duration)};O._transitionTo=function(C){0<this.scale&&g(this._current,C,this.scale)?(this._final=C,this._to=L.clone(C),r(this._current,this._to,this.scale),this._from=L.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=C);this._set("effects",
this._current[0]?L.clone(this._current[0].effects):[])};O._applyTimeTransition=function(C){if(this._to&&this._from&&this._current&&this._final){this._time+=C;C=Math.min(1,this._time/this.duration);for(let b=0;b<this._current.length;b++){const k=this._current[b],D=this._from[b],d=this._to[b];var w=D.scale;k.scale=w+(d.scale-w)*C;for(w=0;w<k.effects.length;w++)k.effects[w].interpolate(D.effects[w],d.effects[w],C)}1===C&&(this._current=this._final,this._set("effects",this._current[0]?L.clone(this._current[0].effects):
[]),this._from=this._to=this._final=null)}};O._updateForScale=function(C){this._set("scale",C);if(0!==this._current.length){var w=this._current,b=this._current.length-1,k,D=1;if(1===w.length||C>=w[0].scale)var d=k=w[0].effects;else if(C<=w[b].scale)d=k=w[b].effects;else for(let n=0;n<b;n++){const u=w[n],Q=w[n+1];if(u.scale>=C&&Q.scale<=C){D=(C-u.scale)/(Q.scale-u.scale);k=u.effects;d=Q.effects;break}}for(C=0;C<this.effects.length;C++)this.effects[C].interpolate(k[C],d[C],D)}};J._createClass(P,[{key:"effect",
set:function(C){const w=this._get("effect");C=C||"";if(w!==C){this._set("effect",C);try{this._transitionTo(e(C))}catch(b){this._transitionTo([]),B.getLogger(this.declaredClass).warn("Invalid Effect",{effect:C,error:b})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(C){this._updateForScale(C)}},{key:"transitioning",get:function(){return null!==this._to}}]);return P}(q);H.__decorate([F.property()],E.EffectView.prototype,"_to",void 0);
H.__decorate([F.property()],E.EffectView.prototype,"duration",void 0);H.__decorate([F.property({value:""})],E.EffectView.prototype,"effect",null);H.__decorate([F.property({readOnly:!0})],E.EffectView.prototype,"effects",void 0);H.__decorate([F.property({readOnly:!0})],E.EffectView.prototype,"hasEffects",null);H.__decorate([F.property({value:0})],E.EffectView.prototype,"scale",null);H.__decorate([F.property({readOnly:!0})],E.EffectView.prototype,"transitioning",null);E.EffectView=H.__decorate([p.subclass("esri.layers.effects.EffectView")],
E.EffectView);E.canInterpolateEffectStops=g;E.convertEffectToStops=e;E.normalizeEffectStops=r;Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/sql ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ./floorFilterUtils ./sublayerUtils".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c,e,g,r){const l={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};E.ExportImageParameters=function(P){function O(w){w=P.call(this,w)||this;w.floors=null;w.scale=0;return w}J._inheritsLoose(O,P);var C=O.prototype;C.destroy=function(){this.layer=null};C.toJSON=
function(){var w=this.layer;w={dpi:w.dpi,format:w.imageFormat,transparent:w.imageTransparency,gdbVersion:w.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?w.dynamicLayers=this.dynamicLayers:w={...w,layers:this.layers,layerDefs:this.layerDefs};return w};J._createClass(O,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const w=this.visibleSublayers.map(b=>{const k=g.getLayerFloorFilterClause(this.floors,b);return b.toExportImageJSON(k)});return w.length?JSON.stringify(w):
null}},{key:"hasDynamicLayers",get:function(){return this.layer&&r.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(w){this._get("layer")!==w&&(this._set("layer",w),this.handles.remove("layer"),w&&this.handles.add([w.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),w.on("sublayer-update",b=>this.notifyChange(l[b.propertyName]))],"layer"))}},{key:"layers",get:function(){const w=this.visibleSublayers;return w?w.length?
"show:"+w.map(b=>b.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var w;const b=!(null==(w=this.floors)||!w.length);w=this.visibleSublayers.filter(k=>null!=k.definitionExpression||b&&null!=k.floorInfo);return w.length?JSON.stringify(w.reduce((k,D)=>{var d=g.getLayerFloorFilterClause(this.floors,D);d=B.sqlAnd(d,D.definitionExpression);L.isSome(d)&&(k[D.id]=d);return k},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");this.commitProperty("dynamicLayers");
this.commitProperty("timeExtent");const w=this.layer;w&&(w.commitProperty("dpi"),w.commitProperty("imageFormat"),w.commitProperty("imageTransparency"),w.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const w=[];if(!this.layer)return w;var b=this.layer.sublayers;const k=D=>{const d=this.scale,n=0===D.minScale||d<=D.minScale,u=0===D.maxScale||d>=D.maxScale;D.visible&&(0===d||n&&u)&&(D.sublayers?D.sublayers.forEach(k):w.unshift(D))};b&&b.forEach(k);
b=this._get("visibleSublayers");return!b||b.length!==w.length||b.some((D,d)=>w[d]!==D)?w:b}}]);return O}(h.HandleOwnerMixin(q));H.__decorate([F.property({readOnly:!0})],E.ExportImageParameters.prototype,"dynamicLayers",null);H.__decorate([F.property()],E.ExportImageParameters.prototype,"floors",void 0);H.__decorate([F.property({readOnly:!0})],E.ExportImageParameters.prototype,"hasDynamicLayers",null);H.__decorate([F.property()],E.ExportImageParameters.prototype,"layer",null);H.__decorate([F.property({readOnly:!0})],
E.ExportImageParameters.prototype,"layers",null);H.__decorate([F.property({readOnly:!0})],E.ExportImageParameters.prototype,"layerDefs",null);H.__decorate([F.property({type:Number})],E.ExportImageParameters.prototype,"scale",void 0);H.__decorate([F.property(e.combinedViewLayerTimeExtentProperty)],E.ExportImageParameters.prototype,"timeExtent",void 0);H.__decorate([F.property({readOnly:!0})],E.ExportImageParameters.prototype,"version",null);H.__decorate([F.property({readOnly:!0})],E.ExportImageParameters.prototype,
"visibleSublayers",null);E.ExportImageParameters=H.__decorate([c.subclass("esri.layers.mixins.ExportImageParameters")],E.ExportImageParameters);Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(E){function J(H,q){if(null==H||!H.length)return null;H=H.filter(h=>""!==h).map(h=>`'${h}'`);H.push("''");return`${q} IN (${H.join(",")}) OR ${q} IS NULL`}E.getFloorFilterClause=function(H){var q;
const h=H.layer;return"floorInfo"in h&&null!=(q=h.floorInfo)&&q.floorField&&"floors"in H.view?J(H.view.floors,h.floorInfo.floorField):null};E.getLayerFloorFilterClause=function(H,q){var h;return"floorInfo"in q&&null!=(h=q.floorInfo)&&h.floorField?J(H,q.floorInfo.floorField):null};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/maybe","../../core/accessorSupport/PropertyOrigin"],
function(E,J,H){function q(h,L){if(!h||!h.length||J.isNone(L))return!0;L=L.slice().reverse().flatten(({sublayers:R})=>R&&R.toArray().reverse()).map(R=>R.id).toArray();if(h.length>L.length)return!1;let B=0;const F=L.length;for(const {id:R}of h){for(;B<F&&L[B]!==R;)B++;if(B>=F)return!1}return!0}E.isExportDynamic=function(h,L,B){return h.some(F=>{const R=F.source;return!(!R||"map-layer"===R.type&&R.mapLayerId===F.id&&(J.isNone(R.gdbVersion)||R.gdbVersion===B))||F.originIdOf("renderer")>H.OriginId.SERVICE||
F.originIdOf("labelingInfo")>H.OriginId.SERVICE||F.originIdOf("opacity")>H.OriginId.SERVICE||F.originIdOf("labelsVisible")>H.OriginId.SERVICE})?!0:!q(h,L)};E.isSublayerOverhaul=function(h){return!!h&&h.some(L=>null!=L.minScale||L.layerDefinition&&null!=L.layerDefinition.minScale)};E.shouldWriteSublayerStructure=function(h,L,B){return L.flatten(({sublayers:F})=>F).length!==h.length||h.some(F=>F.originIdOf("minScale")>B||F.originIdOf("maxScale")>B||F.originIdOf("renderer")>B||F.originIdOf("labelingInfo")>
B||F.originIdOf("opacity")>B||F.originIdOf("labelsVisible")>B||F.originIdOf("source")>B)?!0:!q(h,L)};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rendererConversion":function(){define(["exports","../../core/has","../../core/Error","../../core/maybe","../../symbols/support/symbolConversion"],function(E,J,H,q,h){function L(p){return q.isNone(p)||"simple"===p.type||"unique-value"===p.type||"class-breaks"===p.type||"dictionary"===
p.type||"heatmap"===p.type}function B(p,A){if(!A)return null;A=Array.isArray(A)?A:[A];if(0<A.length){const c=A.map(g=>g.details.symbol.type||g.details.symbol.declaredClass).filter(g=>!!g);c.sort();const e=[];c.forEach((g,r)=>{0!==r&&g===c[r-1]||e.push(g)});return new H("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${e.join(", ")}) which are not supported in 3D`,{renderer:p,symbolErrors:A})}return null}function F(p){const A=p.uniqueValueInfos.map(e=>h.to3D(e.symbol).error).filter(e=>
!!e),c=h.to3D(p.defaultSymbol);c.error&&A.unshift(c.error);return B(p,A)}function R(p){const A=p.classBreakInfos.map(e=>h.to3D(e.symbol).error).filter(e=>!!e),c=h.to3D(p.defaultSymbol);c.error&&A.unshift(c.error);return B(p,A)}E.isSupportedRenderer3D=L;E.validateTo3D=function(p){if(q.isNone(p))return null;if(!L(p))return new H("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${p.type||p.declaredClass}'`,{renderer:p});switch(p.type){case "simple":return B(p,h.to3D(p.symbol).error);
case "unique-value":return F(p);case "class-breaks":return R(p)}return null};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(E,J,H){function q(c){c=H.toCIMSymbolJSON(c);if("CIMTextSymbol"===c.type)return c.height;let e=0;if(c.symbolLayers)for(const g of c.symbolLayers)H.isCIMMarker(g)&&g.size>e?e=g.size:H.isCIMStroke(g)&&g.width>e?e=g.width:H.isCIMFill(g);
return e}function h(c,e,g,r){if("CIMTextSymbol"===c.type)c.height*=e;else{if(g&&c.effects)for(const l of c.effects)F(l,e);if(c.symbolLayers)for(const l of c.symbolLayers)switch(l.type){case "CIMPictureMarker":case "CIMVectorMarker":L(l,e,r);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=r&&r.preserveOutlineWidth||!l.width||(l.width*=e);break;case "CIMPictureFill":l.height&&(l.height*=e);l.offsetX&&(l.offsetX*=e);l.offsetY&&(l.offsetY*=e);break;case "CIMHatchFill":h(l.lineSymbol,e,!0,{...r,
preserveOutlineWidth:!1}),l.offsetX&&(l.offsetX*=e),l.offsetY&&(l.offsetY*=e),l.separation&&(l.separation*=e)}}}function L(c,e,g){c.markerPlacement&&B(c.markerPlacement,e);c.offsetX&&(c.offsetX*=e);c.offsetY&&(c.offsetY*=e);c.anchorPoint&&"Absolute"===c.anchorPointUnits&&(c.anchorPoint={x:c.anchorPoint.x*e,y:c.anchorPoint.y*e});c.size*=e;if("CIMVectorMarker"===c.type&&c.markerGraphics)for(const r of c.markerGraphics)c.scaleSymbolsProportionally||h(r.symbol,e,!0,g)}function B(c,e){H.isCIMMarkerStrokePlacement(c)&&
c.offset&&(c.offset*=e);switch(c.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":c.customEndingOffset&&(c.customEndingOffset*=e);c.offsetAlongLine&&(c.offsetAlongLine*=e);if(c.placementTemplate&&c.placementTemplate.length){var g=c.placementTemplate.map(r=>r*e);c.placementTemplate=g}break;case "CIMMarkerPlacementAlongLineVariableSize":c.maxRandomOffset&&(c.maxRandomOffset*=e);c.placementTemplate&&c.placementTemplate.length&&(g=c.placementTemplate.map(r=>
r*e),c.placementTemplate=g);break;case "CIMMarkerPlacementOnLine":c.startPointOffset&&(c.startPointOffset*=e);break;case "CIMMarkerPlacementAtExtremities":c.offsetAlongLine&&(c.offsetAlongLine*=e);break;case "CIMMarkerPlacementAtRatioPositions":c.beginPosition&&(c.beginPosition*=e);c.endPosition&&(c.endPosition*=e);break;case "CIMMarkerPlacementPolygonCenter":c.offsetX&&(c.offsetX*=e);c.offsetY&&(c.offsetY*=e);break;case "CIMMarkerPlacementInsidePolygon":c.offsetX&&(c.offsetX*=e),c.offsetY&&(c.offsetY*=
e),c.stepX&&(c.stepX*=e),c.stepY&&(c.stepY*=e)}}function F(c,e){switch(c.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":c.width&&(c.width*=e);break;case "CIMGeometricEffectBuffer":c.size&&(c.size*=e);break;case "CIMGeometricEffectCut":c.beginCut&&(c.beginCut*=e);c.endCut&&(c.endCut*=e);c.middleCut&&(c.middleCut*=e);break;case "CIMGeometricEffectDashes":c.customEndingOffset&&(c.customEndingOffset*=e);c.offsetAlongLine&&(c.offsetAlongLine*=e);if(c.dashTemplate&&c.dashTemplate.length){const g=
c.dashTemplate.map(r=>r*e);c.dashTemplate=g}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":c.length&&(c.length*=e);break;case "CIMGeometricEffectMove":c.offsetX&&(c.offsetX*=e);c.offsetY&&(c.offsetY*=e);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":c.offset&&(c.offset*=e);break;case "CIMGeometricEffectRegularPolygon":c.radius&&(c.radius*=e);break;case "CIMGeometricEffectTaperedPolygon":c.fromWidth&&(c.fromWidth*=
e);c.length&&(c.length*=e);c.toWidth&&(c.toWidth*=e);break;case "CIMGeometricEffectWave":c.amplitude&&(c.amplitude*=e),c.period&&(c.period*=e)}}function R(c,e){let g;g="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===c.type;if(g.symbolLayers)for(const r of g.symbolLayers)if(!(r.colorLocked||c&&(H.isCIMStroke(r)||H.isCIMMarker(r)&&r.markerPlacement&&H.isCIMMarkerStrokePlacement(r.markerPlacement))))switch(r.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":r.tintColor&&
p(e,r.tintColor);break;case "CIMVectorMarker":r.markerGraphics.forEach(l=>{R(l.symbol,e)});break;case "CIMSolidStroke":case "CIMSolidFill":p(e,r.color);break;case "CIMHatchFill":R(r.lineSymbol,e)}}function p(c,e){for(const g of c)if(g.join(".")===e.join("."))return;c.push(e)}function A(c,e,g){var r="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===r.type?!0:!1;if(r.symbolLayers)for(const l of r.symbolLayers)if(!l.colorLocked){if(c)if(g){if({layersToColor:r}=g,(H.isCIMStroke(l)||H.isCIMMarker(l)&&
l.markerPlacement&&H.isCIMMarkerStrokePlacement(l.markerPlacement))&&"fill"===r||H.isCIMFill(l)&&"outline"===r)continue}else if(H.isCIMStroke(l)||H.isCIMMarker(l)&&l.markerPlacement&&H.isCIMMarkerStrokePlacement(l.markerPlacement))continue;r=e.toArray();switch(l.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":l.tintColor=r;break;case "CIMVectorMarker":l.markerGraphics.forEach(P=>{A(P.symbol,e,g)});break;case "CIMSolidStroke":case "CIMSolidFill":l.color=r;break;case "CIMHatchFill":A(l.lineSymbol,
e,g)}}}E.applyCIMSymbolColor=function(c,e,g){e instanceof J||(e=new J(e));(c=H.toCIMSymbolJSON(c))&&A(c,e,g)};E.applyCIMSymbolRotation=function(c,e,g=!1){c=H.toCIMSymbolJSON(c);g&&0!==e&&(e=360-e);if("CIMTextSymbol"===c.type)c.angle=e;else if("CIMPointSymbol"===c.type&&c.symbolLayers){g=e-(c.angle||0);for(const r of c.symbolLayers)if(H.isCIMMarker(r)){let l=r.rotation||0;l=r.rotateClockwise?l-g:l+g;r.rotation=l}c.angle=e}};E.getCIMSymbolColor=function(c){c=H.toCIMSymbolJSON(c);const e=[];R(c,e);return e.length?
new J(H.fromCIMColor(e[0])):null};E.getCIMSymbolRotation=function(c,e=!1){c=H.toCIMSymbolJSON(c);return"CIMTextSymbol"===c.type||"CIMPointSymbol"===c.type?e&&0!==c.angle?360-c.angle:c.angle||0:0};E.getCIMSymbolSize=q;E.scaleCIMMarker=L;E.scaleCIMSymbolTo=function(c,e,g){const r=H.toCIMSymbolJSON(c);c=q(c);if(0===c)if("CIMTextSymbol"===r.type)r.height=e;else{if(r.symbolLayers)for(const l of r.symbolLayers)switch(l.type){case "CIMPictureMarker":case "CIMVectorMarker":l.size=e;break;case "CIMPictureStroke":case "CIMSolidStroke":l.width=
e}}else h(r,e/c,!1,g)};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(E,J){function H(q,h){"string"!==typeof q&&(q=String(q));switch(h){case "LowerCase":return q.toLowerCase();case "Allcaps":return q.toUpperCase();default:return q}}J._adjustTextCase=H;J.colorToArray=function(q){return[q.r,q.g,q.b,q.a]};J.createLabelOverrideFunction=function(q,h,L){const B=A=>{let c=A.length;for(;c--;)if(!" /-,\n".includes(A.charAt(c)))return!1;
return!0},F=[];var R=0;let p=-1;do p=h.indexOf("[",R),p>=R&&(p>R&&(R=h.substr(R,p-R),F.push([R,null,B(R)])),R=p+1,p=h.indexOf("]",R),p>=R&&(p>R&&(R=h.substr(R,p-R),(R=q[R])&&F.push([null,R,!1])),R=p+1));while(-1!==p);R<h.length-1&&(q=h.substr(R),F.push([q,null,B(q)]));return A=>{let c="",e=null;for(const g of F){const [r,l,P]=g;if(r)P?e=r:(e&&(c+=e,e=null),c+=r);else{const O=A.attributes[l];O&&(e&&(c+=e,e=null),c+=O)}}return H(c,L)}};J.evaluateValueOrFunction=function(q,h,L,B){return"function"===
typeof q?q(h,L,B):q};J.fromCIMColor=function(q){return q?{r:q[0],g:q[1],b:q[2],a:q[3]/255}:{r:0,g:0,b:0,a:0}};J.getValue=q=>isNaN(q)||!q?0:q;J.importGeometryEngine=function(){return new Promise((q,h)=>E(["../../geometry/geometryEngineJSON"],q,h))};J.isCIMFill=function(q){return"CIMGradientFill"===q.type||"CIMHatchFill"===q.type||"CIMPictureFill"===q.type||"CIMSolidFill"===q.type||"CIMWaterFill"===q.type};J.isCIMMarker=function(q){return"CIMVectorMarker"===q.type||"CIMPictureMarker"===q.type||"CIMBarChartMarker"===
q.type||"CIMCharacterMarker"===q.type||"CIMPieChartMarker"===q.type||"CIMStackedBarChartMarker"===q.type};J.isCIMMarkerStrokePlacement=function(q){return"CIMMarkerPlacementAlongLineRandomSize"===q.type||"CIMMarkerPlacementAlongLineSameSize"===q.type||"CIMMarkerPlacementAlongLineVariableSize"===q.type||"CIMMarkerPlacementAtExtremities"===q.type||"CIMMarkerPlacementAtMeasuredUnits"===q.type||"CIMMarkerPlacementAtRatioPositions"===q.type||"CIMMarkerPlacementOnLine"===q.type||"CIMMarkerPlacementOnVertices"===
q.type};J.isCIMStroke=function(q){return"CIMGradientStroke"===q.type||"CIMPictureStroke"===q.type||"CIMSolidStroke"===q.type};J.isGeometryEngineRequired=q=>{if(!q)return!1;for(const h of q)switch(h.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};J.resampleHermite=function(q,h,L,B,F,R,p=!0){const A=h/F;L/=R;const c=Math.ceil(A/2),e=Math.ceil(L/2);for(let l=0;l<R;l++)for(let P=0;P<F;P++){const O=4*(P+(p?R-l-1:l)*F);var g=0;let C=0,w=0,b=0,k=0,D=0,d=0;const n=
(l+.5)*L;for(let u=Math.floor(l*L);u<(l+1)*L;u++){var r=Math.abs(n-(u+.5))/e;const Q=(P+.5)*A;r*=r;for(let U=Math.floor(P*A);U<(P+1)*A;U++){let y=Math.abs(Q-(U+.5))/c;g=Math.sqrt(r+y*y);-1<=g&&1>=g&&(g=2*g*g*g-3*g*g+1,0<g&&(y=4*(U+u*h),d+=g*q[y+3],w+=g,255>q[y+3]&&(g=g*q[y+3]/250),b+=g*q[y],k+=g*q[y+1],D+=g*q[y+2],C+=g))}}B[O]=b/C;B[O+1]=k/C;B[O+2]=D/C;B[O+3]=d/w}};J.toCIMSymbolJSON=function(q){var h;return null==(h=q.data)?void 0:h.symbol};Object.defineProperties(J,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(E,J){function H(q,h){return Math.round(Math.min(Math.max(q+191.25*h,0),255))}E.SymbolSizeDefaults=void 0;(function(q){q[q.size=22]="size";q[q.lineWidth=50]="lineWidth";q[q.maxSize=120]="maxSize";q[q.maxOutlineSize=80]="maxOutlineSize";q[q.tallSymbolWidth=20]="tallSymbolWidth"})(E.SymbolSizeDefaults||(E.SymbolSizeDefaults={}));E.adjustColorBrightness=function(q,h){if("type"in q&&("linear"===q.type||"pattern"===
q.type))return q;q=new J(q);return new J([H(q.r,h),H(q.g,h),H(q.b,h),q.a])};E.adjustColorComponentBrightness=H;E.getConeShapes=function(q,h){let L=h?E.SymbolSizeDefaults.tallSymbolWidth:q;h=h?4:6;L=L<=E.SymbolSizeDefaults.size?L-.5*h:L-h;h=.15*L;const B=L;q-=h;return[{type:"ellipse",cx:.5*L,cy:q,rx:.5*L,ry:h},{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]}]};E.getCubeShapes=function(q,h){let L=h?E.SymbolSizeDefaults.tallSymbolWidth:
q;var B=h?4:6;B=L=L<=E.SymbolSizeDefaults.size?L-.5*B:L-B;h=h?.35*L:.5*L;return[{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,.5*h]},{command:"L",values:[.5*B,h]},{command:"L",values:[0,.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*h]},{command:"L",values:[.5*B,h]},{command:"L",values:[.5*B,q]},{command:"L",values:[0,q-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*B,h]},{command:"L",values:[.5*B,q]},{command:"L",
values:[B,q-.5*h]},{command:"L",values:[B,.5*h]},{command:"Z",values:[]}]}]};E.getCylinderShapes=function(q,h){var L=h?E.SymbolSizeDefaults.tallSymbolWidth:q;h=h?4:6;L=L<=E.SymbolSizeDefaults.size?L-.5*h:L-h;h=.5*L;const B=.15*L;q-=B;return[{type:"ellipse",cx:.5*L,cy:q,rx:h,ry:B},{type:"path",path:[{command:"M",values:[0,B]},{command:"L",values:[0,q]},{command:"L",values:[L,q]},{command:"L",values:[L,B]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*L,cy:B,rx:h,ry:B}]};E.getDiamondShapes=function(q){var h=
q;h=h<E.SymbolSizeDefaults.size?h-2:h-4;const L=Math.floor(q/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",values:[h,.5*q-L]},{command:"L",values:[.45*h-L,.5*q+L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",values:[.45*h-L,.5*q+L]},{command:"L",values:[0,.5*q-L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*q-L]},{command:"L",values:[.45*h-L,.5*q+L]},{command:"L",values:[.45*h,q]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[.45*h,q]},{command:"L",values:[h,.5*q-L]},{command:"L",values:[.45*h-L,.5*q+L]},{command:"Z",values:[]}]}]};E.getExtrudeSymbolShapes=function(q){const h=E.SymbolSizeDefaults.size;q*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*h]},{command:"L",values:[.3*h,.7*h]},{command:"L",values:[.3*h,.7*h+q]},{command:"L",values:[0,.7*h+q-.35*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*h,.7*h]},{command:"L",values:[.3*
h,.7*h+q]},{command:"L",values:[h,q]},{command:"L",values:[h,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*h,0]},{command:"L",values:[h,0]},{command:"L",values:[.3*h,.7*h]},{command:"L",values:[0,.35*h]},{command:"Z",values:[]}]}]};E.getInvertedConeShapes=function(q){let h=q;h=h<E.SymbolSizeDefaults.size?h-3:h-6;const L=.15*h,B=h;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[.5*B,q-L]},{command:"Z",values:[]}]},{type:"ellipse",
cx:.5*h,cy:0,rx:.5*h,ry:L}]};E.getPathSymbolShapes=function(q,h,L){var B=E.SymbolSizeDefaults.size;let F=B,R=B;1>q?F*=.75:1<q&&(R*=1.25);q=B;h&&L&&(F=R=q=B=0);return[{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[L?q:.875*q,0]},{command:"L",values:[L?F-.5*q:0,R-.5*B]},{command:"L",values:[F-.5*q,R-.5*B]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[q,h?0:.125*B]},{command:"L",values:[F-.5*q,h?R-.5*B:B]},{command:"L",values:[F-.5*
q,R-.5*B]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[F-.5*q,R-.5*B]},{command:"L",values:[L?F-.5*q:0,R-.5*B]},{command:"L",values:[L?F-.5*q:0,h?R-.5*B:B]},{command:"L",values:[F-.5*q,h?R-.5*B:B]},{command:"Z",values:[]}]}]};E.getTetrahedronShapes=function(q){var h=q;h=h<E.SymbolSizeDefaults.size?h-1:h-2;return[{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[q,h]},{command:"L",values:[.45*q,.6*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*q,0]},{command:"L",values:[.45*q,.6*h]},{command:"L",values:[0,h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,h]},{command:"L",values:[.45*q,.6*h]},{command:"L",values:[q,h]},{command:"Z",values:[]}]}]};E.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
E.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(E,J,H,q,h,L,B,F,R,p){function A(e,g,r){return e?H(e,{responseType:"image"}).then(l=>{l=l.data;const P=l.width,O=l.height,C=P/O;let w=g;r&&(w=Math.min(w,Math.max(P,O)));return{image:l,width:1>=C?Math.ceil(w*C):w,height:1>=C?w:Math.ceil(w/C)}}):Promise.reject(new h("renderUtils: imageDataSize","href not provided."))}const c=F.createProjector();E.renderSymbol=function(e,g,r){const l=Math.ceil(g[0]);g=Math.ceil(g[1]);if(!e.some(O=>!!O.length))return null;const P=r&&r.node||document.createElement("div");
null!=r.opacity&&(P.style.opacity=r.opacity.toString());null!=r.effectView&&(P.style.filter=p.getCSSFilterFromEffectList(r.effectView));c.append(P,R.renderSVG.bind(null,e,l,g,r));return P};E.tintImageWithColor=function(e,g,r,l,P){return A(e,g,P).then(O=>{const C=O.width?O.width:g,w=O.height?O.height:g;var b;if(b=O.image)b=r&&"ignore"!==l?"multiply"===l&&255===r.r&&255===r.g&&255===r.b&&1===r.a?!1:!0:!1;if(b){var k=O.image.width,D=O.image.height;L("edge")&&/\.svg$/i.test(e)&&(--k,--D);b=Math.ceil(C);
var d=Math.ceil(w);var n=document.createElement("canvas");n.width=b;n.height=d;n.style.width=b+"px";n.style.height=d+"px";n=n.getContext("2d");n.clearRect(0,0,b,d);b=n;b.drawImage(O.image,0,0,k,D,0,0,C,w);d=b.getImageData(0,0,C,w);n=[r.r/255,r.g/255,r.b/255,r.a];const Q=q.toHSV(r);for(let U=0;U<d.data.length;U+=4){O=d.data;k=U;D=n;var u=Q;switch(l){case "multiply":O[k+0]*=D[0];O[k+1]*=D[1];O[k+2]*=D[2];O[k+3]*=D[3];break;default:{const y=q.toHSV({r:O[k+0],g:O[k+1],b:O[k+2]});y.h=u.h;y.s=u.s;y.v=y.v/
100*u.v;u=q.toRGB(y);O[k+0]=u.r;O[k+1]=u.g;O[k+2]=u.b;O[k+3]*=D[3]}}}b.putImageData(d,0,0);e=b.canvas.toDataURL("image/png")}else(b=J.id&&J.id.findCredential(e))&&b.token&&(O=e.includes("?")?"\x26":"?",e=`${e}${O}token=${b.token}`);return{url:e,width:C,height:w}}).catch(()=>({url:e,width:g,height:g}))};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(E){function J(p,A){const c=[];let e,g;if(p[0].length!==
A.length)throw"dimensions do not match";const r=p.length,l=p[0].length;let P=0;for(e=0;e<r;e++){for(g=P=0;g<l;g++)P+=p[e][g]*A[g];c.push(P)}return c}function H(p){p=[p.r/255,p.g/255,p.b/255].map(A=>.04045>=A?A/12.92:((A+.055)/1.055)**2.4);p=J(F,p);return{x:100*p[0],y:100*p[1],z:100*p[2]}}function q(p){p=J(R,[p.x/100,p.y/100,p.z/100]).map(A=>Math.min(1,Math.max(.0031308>=A?12.92*A:1.055*A**(1/2.4)-.055,0)));return{r:Math.round(255*p[0]),g:Math.round(255*p[1]),b:Math.round(255*p[2])}}function h(p){p=
[p.x/95.047,p.y/100,p.z/108.883].map(A=>A>(6/29)**3?A**(1/3):1/3*(29/6)**2*A+4/29);return{l:116*p[1]-16,a:500*(p[0]-p[1]),b:200*(p[1]-p[2])}}function L(p){const A=p.l;p=[(A+16)/116+p.a/500,(A+16)/116,(A+16)/116-p.b/200].map(c=>c>6/29?c**3:3*(6/29)**2*(c-4/29));return{x:95.047*p[0],y:100*p[1],z:108.883*p[2]}}function B(p){if("r"in p&&"g"in p&&"b"in p)return p;if("l"in p&&"c"in p&&"h"in p){var A=p.c;var c=p.h;A={l:p.l,a:A*Math.cos(c),b:A*Math.sin(c)};return q(L(A))}if("l"in p&&"a"in p&&"b"in p)return q(L(p));
if("x"in p&&"y"in p&&"z"in p)return q(p);if("h"in p&&"s"in p&&"v"in p){{c=(p.h+360)%360/60;A=p.v/100*255;p=p.s/100*A;const e=p*(1-Math.abs(c%2-1));switch(Math.floor(c)){case 0:c={r:p,g:e,b:0};break;case 1:c={r:e,g:p,b:0};break;case 2:c={r:0,g:p,b:e};break;case 3:c={r:0,g:e,b:p};break;case 4:c={r:e,g:0,b:p};break;case 5:case 6:c={r:p,g:0,b:e};break;default:c={r:0,g:0,b:0}}c.r=Math.round(c.r+A-p);c.g=Math.round(c.g+A-p);c.b=Math.round(c.b+A-p);A=c}return A}return p}const F=[[.4124,.3576,.1805],[.2126,
.7152,.0722],[.0193,.1192,.9505]],R=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];E.darken=function(p,A){p=h(H(p));p.l*=1-A;return q(L(p))};E.toHSV=function(p){if("h"in p&&"s"in p&&"v"in p)return p;var A=B(p);{p=A.r;const c=A.g,e=A.b;A=Math.max(p,c,e);const g=A-Math.min(p,c,e);p=0===g?0:A===p?(c-e)/g%6:A===c?(e-p)/g+2:(p-c)/g+4;0>p&&(p+=6);p={h:60*p,s:100*(0===g?0:g/A),v:100/255*A}}return p};E.toLAB=function(p){return"l"in p&&"a"in p&&"b"in p?p:h(H(B(p)))};E.toLCH=function(p){if(!("l"in
p&&"c"in p&&"h"in p)){{var A=h(H(B(p)));p=A.l;var c=A.a;const e=A.b;A=Math.sqrt(c*c+e*e);c=Math.atan2(e,c);c=0<c?c:c+2*Math.PI;p={l:p,c:A,h:c}}}return p};E.toRGB=B;E.toXYZ=function(p){return"x"in p&&"y"in p&&"z"in p?p:H(B(p))};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(E,J,H,q,h,L,B){function F(f,x){f*=K/180;return Math.abs(x*Math.sin(f))+Math.abs(x*Math.cos(f))}function R(f){return f.map(x=>`${x.command} ${x.values.join(" ")}`).join(" ").trim()}function p(f,x,I,Z){if(f){if("circle"===f.type)return B.tsx("circle",{fill:x,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-dashoffset":I.dashOffset,"stroke-miterlimit":"4",cx:f.cx,cy:f.cy,r:f.r});if("ellipse"===
f.type)return B.tsx("ellipse",{fill:x,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",cx:f.cx,cy:f.cy,rx:f.rx,ry:f.ry});if("rect"===f.type)return B.tsx("rect",{fill:x,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",x:f.x,y:f.y,width:f.width,height:f.height});if("image"===
f.type)return B.tsx("image",{href:f.src,x:f.x,y:f.y,width:f.width,height:f.height,preserveAspectRatio:"none"});if("path"===f.type)return f="string"!==typeof f.path?R(f.path):f.path,B.tsx("path",{fill:x,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",d:f});if("text"===f.type)return B.tsx("text",{"alignment-baseline":Z.alignBaseline,fill:x,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,
"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4","text-anchor":Z.align,"text-decoration":Z.decoration,kerning:Z.kerning,rotate:Z.rotate,"text-rendering":U,"font-style":Z.font.style,"font-variant":Z.font.variant,"font-weight":Z.font.weight,"font-size":Z.font.size,"font-family":Z.font.family,x:f.x,y:f.y},f.text)}return null}function A(f){const x={fill:"none",pattern:null,linearGradient:null};if(f)if("type"in f&&"pattern"===f.type){var I=`patternId-${++u}`;
x.fill=`url(#${I})`;x.pattern={id:I,x:f.x,y:f.y,width:f.width,height:f.height,image:{x:0,y:0,width:f.width,height:f.height,href:f.src}}}else"type"in f&&"linear"===f.type?(I=`linearGradientId-${++Q}`,x.fill=`url(#${I})`,x.linearGradient={id:I,x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,stops:f.colors.map(Z=>({offset:Z.offset,color:Z.color&&(new J(Z.color)).toString()}))}):f&&(f=new J(f),x.fill=f.toString());return x}function c(f){const x={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(f&&(null!=f.width&&(x.width=f.width),f.cap&&(x.cap=f.cap),f.join&&(x.join=f.join.toString()),f.color&&(x.color=(new J(f.color)).toString()),f.dashArray&&(x.dashArray=f.dashArray),f.dashArray&&(x.dashOffset=f.dashoffset),f.style)){let Z=null;f.style in Y&&(Z=Y[f.style]);if(Array.isArray(Z)){Z=Z.slice(0);for(var I=0;I<Z.length;++I)Z[I]*=f.width;if("butt"!==f.cap){for(I=0;I<Z.length;I+=2)Z[I]-=f.width,1>Z[I]&&(Z[I]=1);for(I=1;I<Z.length;I+=2)Z[I]+=f.width}Z=Z.join(",")}x.dashArray=Z}return x}function e(f,
x){const I={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};f&&(I.align=f.align,I.alignBaseline=f.alignBaseline,I.decoration=f.decoration,I.kerning=f.kerning?"auto":"0",I.rotate=f.rotated?"90":"0",I.font.style=x.style||"normal",I.font.variant=x.variant||"normal",I.font.weight=x.weight||"normal",I.font.size=x.size&&x.size.toString()||"10pt",I.font.family=x.family||"serif");return I}function g(f){const {pattern:x,linearGradient:I}=
f;return x?B.tsx("pattern",{id:x.id,patternUnits:"userSpaceOnUse",x:x.x,y:x.y,width:x.width,height:x.height},B.tsx("image",{x:x.image.x,y:x.image.y,width:x.image.width,height:x.image.height,href:x.image.href})):I?(f=I.stops.map((Z,ea)=>B.tsx("stop",{key:`${ea}-stop`,offset:Z.offset,"stop-color":Z.color})),B.tsx("linearGradient",{id:I.id,gradientUnits:"userSpaceOnUse",x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2},f)):null}function r(f,x){if(!f)return null;const I=[];for(const Z of f){const {shape:ea,fill:da,stroke:G,
font:M}=Z;f=A(da);const X=c(G),ba="text"===ea.type?e(ea,M):null;I.push(p(ea,f.fill,X,ba))}return B.tsx("mask",{id:x,maskUnits:"userSpaceOnUse"},B.tsx("g",null,I))}function l(f,x,I){return h.translate(f,h.identity(f),[x,I])}function P(f,x,I,Z,ea){h.scale(f,h.identity(f),[x,I]);f[4]=f[4]*x-Z*x+Z;f[5]=f[5]*I-ea*I+ea;return f}function O(f,x,I,Z){var ea=x%360*Math.PI/180;h.rotate(f,h.identity(f),ea);x=Math.cos(ea);ea=Math.sin(ea);const da=f[4],G=f[5];f[4]=da*x-G*ea+Z*ea-I*x+I;f[5]=G*x+da*ea-I*ea-Z*x+Z;
return f}function C(f,x){v&&"left"in v?(v.left>f&&(v.left=f),v.right<f&&(v.right=f),v.top>x&&(v.top=x),v.bottom<x&&(v.bottom=x)):v={left:f,bottom:x,right:f,top:x}}function w(f){const x=f.args,I=x.length;switch(f.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(f=0;f<I;f+=2)C(x[f],x[f+1]);t.x=x[I-2];t.y=x[I-1];break;case "H":for(f=0;f<I;++f)C(x[f],t.y);t.x=x[I-1];break;case "V":for(f=0;f<I;++f)C(t.x,x[f]);t.y=x[I-1];break;case "m":f=0;"x"in t||(C(t.x=x[0],t.y=x[1]),f=2);for(;f<I;f+=
2)C(t.x+=x[f],t.y+=x[f+1]);break;case "l":case "t":for(f=0;f<I;f+=2)C(t.x+=x[f],t.y+=x[f+1]);break;case "h":for(f=0;f<I;++f)C(t.x+=x[f],t.y);break;case "v":for(f=0;f<I;++f)C(t.x,t.y+=x[f]);break;case "c":for(f=0;f<I;f+=6)C(t.x+x[f],t.y+x[f+1]),C(t.x+x[f+2],t.y+x[f+3]),C(t.x+=x[f+4],t.y+=x[f+5]);break;case "s":case "q":for(f=0;f<I;f+=4)C(t.x+x[f],t.y+x[f+1]),C(t.x+=x[f+2],t.y+=x[f+3]);break;case "A":for(f=0;f<I;f+=7)C(x[f+5],x[f+6]);t.x=x[I-2];t.y=x[I-1];break;case "a":for(f=0;f<I;f+=7)C(t.x+=x[f+
5],t.y+=x[f+6])}}function b(f,x,I){const Z=y[f.toLowerCase()];"number"===typeof Z&&(Z?x.length>=Z&&(f={action:f,args:x.slice(0,x.length-x.length%Z)},I.push(f),w(f)):(f={action:f,args:[]},I.push(f),w(f)))}function k(f){const x={x:0,y:0,width:0,height:0};if("circle"===f.type)x.x=f.cx-f.r,x.y=f.cy-f.r,x.width=2*f.r,x.height=2*f.r;else if("ellipse"===f.type)x.x=f.cx-f.rx,x.y=f.cy-f.ry,x.width=2*f.rx,x.height=2*f.ry;else if("image"===f.type||"rect"===f.type)x.x=f.x,x.y=f.y,x.width=f.width,x.height=f.height;
else if("path"===f.type){{const ea=("string"!==typeof f.path?R(f.path):f.path).match(S),da=[];v={};t={};if(ea){f="";var I=[],Z=ea.length;for(let G=0;G<Z;++G){const M=ea[G],X=parseFloat(M);isNaN(X)?(f&&b(f,I,da),I=[],f=M):I.push(X)}b(f,I,da);f={x:0,y:0,width:0,height:0};v&&"left"in v&&(f.x=v.left,f.y=v.top,f.width=v.right-v.left,f.height=v.bottom-v.top)}else f=null}x.x=f.x;x.y=f.y;x.width=f.width;x.height=f.height}return x}function D(f){const x={x:0,y:0,width:0,height:0};let I=null,Z=Number.NEGATIVE_INFINITY,
ea=Number.NEGATIVE_INFINITY;for(const da of f)I?(I.x=Math.min(I.x,da.x),I.y=Math.min(I.y,da.y),Z=Math.max(Z,da.x+da.width),ea=Math.max(ea,da.y+da.height)):(I=x,I.x=da.x,I.y=da.y,Z=da.x+da.width,ea=da.y+da.height);I&&(I.width=Z-I.x,I.height=ea-I.y);return I}function d(f,x,I,Z,ea,da,G,M,X){var ba=(G&&da?F(da,x):x)/2,ja=(G&&da?F(da,I):I)/2;X&&(ba=X[0],ja=X[1],ba=(G&&da?F(da,ba):ba)/2,ja=(G&&da?F(da,ja):ja)/2);const pa=f.width+Z,na=f.height+Z;G=q.create();X=q.create();var ma=!1;if(ea&&0!==pa&&0!==na){ea=
x!==I?x/I:pa/na;ma=x>I?x:I;let ya=1,fa=1;isNaN(ma)||(1<ea?(ya=ma/pa,fa=ma/ea/na):(fa=ma/na,ya=ma*ea/pa));h.multiply(X,X,P(G,ya,fa,ba,ja));ma=!0}ea=f.x+(pa-Z)/2;f=f.y+(na-Z)/2;h.multiply(X,X,l(G,ba-ea,ja-f));!ma&&(pa>x||na>I)&&(Z=pa/x>na/I,x=(Z?x:I)/(Z?pa:na),h.multiply(X,X,P(G,x,x,ea,f)));da&&h.multiply(X,X,O(G,da,ea,f));M&&h.multiply(X,X,l(G,M[0],M[1]));return`matrix(${X[0]},${X[1]},${X[2]},${X[3]},${X[4]},${X[5]})`}function n(f,x,I){f=null==f?void 0:f.effects.find(M=>"bloom"===M.type);if(!f)return null;
const {strength:Z,radius:ea}=f;f=0<Z?ea:0;const da=(Z+f)*x,G=4*Z+1;return B.tsx("filter",{id:`bloom${I}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},B.tsx("feMorphology",{operator:"dilate",radius:(Z+.5*f)*5**(x/100)*(.4+x/100),in:"SourceGraphic",result:"dilate"}),B.tsx("feGaussianBlur",{in:"dilate",stdDeviation:da/25,result:"blur"}),B.tsx("feGaussianBlur",{in:"blur",stdDeviation:da/50,result:"intensityBlur"}),B.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},
B.tsx("feFuncR",{type:"linear",slope:G}),B.tsx("feFuncG",{type:"linear",slope:G}),B.tsx("feFuncB",{type:"linear",slope:G})),B.tsx("feMerge",null,B.tsx("feMergeNode",{in:"intensityBlur"}),B.tsx("feMergeNode",{in:"intensityBrightness"}),B.tsx("feGaussianBlur",{stdDeviation:Z/10})))}let u=0,Q=0;L=H("android");const U=H("chrome")||L&&4<=L?"auto":"optimizeLegibility",y={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},S=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let v={},t={};const Y={solid:"none",
shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},K=Math.PI;let T=1;E.computeBBox=D;E.generateFillAttributes=A;E.generateStrokeAttributes=c;E.generateTextAttributes=e;E.getBoundingBox=k;E.getTransformMatrix=d;E.renderDef=g;E.renderSVG=function(f,x,I,Z={}){const ea=[],da=[],G=++T,M=n(Z.effectView,x,G);var X=null;if(M){var ba;X=null==(ba=Z.effectView)?void 0:ba.effects.find(ma=>
"bloom"===ma.type);X=(X.strength?X.strength+X.radius/2:0)/3;X=[Math.max(x+x*X,10),Math.max(I+I*X,10)]}for(ba=0;ba<f.length;ba++){var ja=f[ba];const ma=[];var pa=[],na=0;let ya=0,fa=0;for(const za of ja){const {shape:ka,fill:qa,stroke:sa,font:Ba,offset:ta}=za;Z.ignoreStrokeWidth||(na+=sa&&sa.width||0);ja=A(qa);const Ea=c(sa),Fa="text"===ka.type?e(ka,Ba):null;ea.push(g(ja));ma.push(p(ka,ja.fill,Ea,Fa));pa.push(k(ka));ta&&(ya+=ta[0],fa+=ta[1])}pa=d(D(pa),x,I,na,Z.scale,Z.rotation,Z.useRotationSize,[ya,
fa],X);na=null;Z.masking&&(na=`mask-${ba}`,ea.push(r(Z.masking[ba],na)),na=`url(#${na})`);da.push(na?B.tsx("g",{mask:na},B.tsx("g",{transform:pa},ma)):B.tsx("g",{transform:pa},ma))}Z.useRotationSize&&Z.rotation&&(x=F(Z.rotation,x),I=F(Z.rotation,I));M&&(x=X[0],I=X[1]);return B.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:x,height:I,style:"display: block;"},M,B.tsx("defs",null,ea),M?B.tsx("g",{filter:`url(#bloom${G})`},da):da)};E.renderShape=p;Object.defineProperties(E,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(E){function J(){const R=new Float32Array(6);R[0]=1;R[3]=1;return R}function H(R){const p=new Float32Array(6);p[0]=R[0];p[1]=R[1];p[2]=R[2];p[3]=R[3];p[4]=R[4];p[5]=R[5];return p}function q(R,p,A,c,e,g){const r=new Float32Array(6);r[0]=R;r[1]=p;r[2]=A;r[3]=c;r[4]=e;r[5]=g;return r}function h(R,p){return new Float32Array(R,p,6)}function L(R,p,A,c){const e=p[c];p=p[c+1];R[c]=A[0]*e+A[2]*p+A[4];R[c+
1]=A[1]*e+A[3]*p+A[5]}function B(R,p,A,c=0,e=0,g=2){for(e=e||p.length/g;c<e;c++)L(R,p,A,c*g)}const F=Object.freeze(Object.defineProperty({__proto__:null,create:J,clone:H,fromValues:q,createView:h,transform:L,transformMany:B},Symbol.toStringTag,{value:"Module"}));E.clone=H;E.create=J;E.createView=h;E.fromValues=q;E.mat2df32=F;E.transform=L;E.transformMany=B})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(E,J){function H(d,n){d[0]=n[0];d[1]=n[1];d[2]=n[2];d[3]=n[3];d[4]=n[4];
d[5]=n[5];return d}function q(d){d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=0;d[5]=0;return d}function h(d,n,u,Q,U,y,S){d[0]=n;d[1]=u;d[2]=Q;d[3]=U;d[4]=y;d[5]=S;return d}function L(d,n){const u=n[0],Q=n[1],U=n[2],y=n[3],S=n[4];n=n[5];let v=u*y-Q*U;if(!v)return null;v=1/v;d[0]=y*v;d[1]=-Q*v;d[2]=-U*v;d[3]=u*v;d[4]=(U*n-y*S)*v;d[5]=(Q*S-u*n)*v;return d}function B(d){return d[0]*d[3]-d[1]*d[2]}function F(d,n,u){const Q=n[0],U=n[1],y=n[2],S=n[3],v=n[4];n=n[5];const t=u[0],Y=u[1],K=u[2],T=u[3],f=u[4];u=u[5];d[0]=
Q*t+y*Y;d[1]=U*t+S*Y;d[2]=Q*K+y*T;d[3]=U*K+S*T;d[4]=Q*f+y*u+v;d[5]=U*f+S*u+n;return d}function R(d,n,u){const Q=n[0],U=n[1],y=n[2],S=n[3],v=n[4];n=n[5];const t=Math.sin(u);u=Math.cos(u);d[0]=Q*u+y*t;d[1]=U*u+S*t;d[2]=Q*-t+y*u;d[3]=U*-t+S*u;d[4]=v;d[5]=n;return d}function p(d,n,u){const Q=n[1],U=n[2],y=n[3],S=n[4],v=n[5],t=u[0];u=u[1];d[0]=n[0]*t;d[1]=Q*t;d[2]=U*u;d[3]=y*u;d[4]=S;d[5]=v;return d}function A(d,n,u){const Q=n[0],U=n[1],y=n[2],S=n[3],v=n[4];n=n[5];const t=u[0];u=u[1];d[0]=Q;d[1]=U;d[2]=
y;d[3]=S;d[4]=Q*t+y*u+v;d[5]=U*t+S*u+n;return d}function c(d,n){const u=Math.sin(n);n=Math.cos(n);d[0]=n;d[1]=u;d[2]=-u;d[3]=n;d[4]=0;d[5]=0;return d}function e(d,n){d[0]=n[0];d[1]=0;d[2]=0;d[3]=n[1];d[4]=0;d[5]=0;return d}function g(d,n){d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=n[0];d[5]=n[1];return d}function r(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"}function l(d){return Math.sqrt(d[0]**2+d[1]**2+d[2]**2+d[3]**2+d[4]**2+d[5]**2+1)}function P(d,n,u){d[0]=n[0]+u[0];d[1]=
n[1]+u[1];d[2]=n[2]+u[2];d[3]=n[3]+u[3];d[4]=n[4]+u[4];d[5]=n[5]+u[5];return d}function O(d,n,u){d[0]=n[0]-u[0];d[1]=n[1]-u[1];d[2]=n[2]-u[2];d[3]=n[3]-u[3];d[4]=n[4]-u[4];d[5]=n[5]-u[5];return d}function C(d,n,u){d[0]=n[0]*u;d[1]=n[1]*u;d[2]=n[2]*u;d[3]=n[3]*u;d[4]=n[4]*u;d[5]=n[5]*u;return d}function w(d,n,u,Q){d[0]=n[0]+u[0]*Q;d[1]=n[1]+u[1]*Q;d[2]=n[2]+u[2]*Q;d[3]=n[3]+u[3]*Q;d[4]=n[4]+u[4]*Q;d[5]=n[5]+u[5]*Q;return d}function b(d,n){return d[0]===n[0]&&d[1]===n[1]&&d[2]===n[2]&&d[3]===n[3]&&
d[4]===n[4]&&d[5]===n[5]}function k(d,n){const u=d[0],Q=d[1],U=d[2],y=d[3],S=d[4];d=d[5];const v=n[0],t=n[1],Y=n[2],K=n[3],T=n[4];n=n[5];return Math.abs(u-v)<=J.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(Q-t)<=J.EPSILON*Math.max(1,Math.abs(Q),Math.abs(t))&&Math.abs(U-Y)<=J.EPSILON*Math.max(1,Math.abs(U),Math.abs(Y))&&Math.abs(y-K)<=J.EPSILON*Math.max(1,Math.abs(y),Math.abs(K))&&Math.abs(S-T)<=J.EPSILON*Math.max(1,Math.abs(S),Math.abs(T))&&Math.abs(d-n)<=J.EPSILON*Math.max(1,Math.abs(d),
Math.abs(n))}const D=Object.freeze(Object.defineProperty({__proto__:null,copy:H,identity:q,set:h,invert:L,determinant:B,multiply:F,rotate:R,scale:p,translate:A,fromRotation:c,fromScaling:e,fromTranslation:g,str:r,frob:l,add:P,subtract:O,multiplyScalar:C,multiplyScalarAndAdd:w,exactEquals:b,equals:k,mul:F,sub:O},Symbol.toStringTag,{value:"Module"}));E.add=P;E.copy=H;E.determinant=B;E.equals=k;E.exactEquals=b;E.frob=l;E.fromRotation=c;E.fromScaling=e;E.fromTranslation=g;E.identity=q;E.invert=L;E.mat2d=
D;E.mul=F;E.multiply=F;E.multiplyScalar=C;E.multiplyScalarAndAdd=w;E.rotate=R;E.scale=p;E.set=h;E.str=r;E.sub=O;E.subtract=O;E.translate=A})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(E,J,H,q,h,L,B,F,R,p,A,c,e){function g(v){v=v.symbolLayers;
if(!v)return null;let t=null;v.forEach(Y=>{if("object"!==Y.type||null==Y.resource.href)t="water"===Y.type?F.unwrap(Y.color):F.isSome(Y.material)?F.unwrap(Y.material.color):null});return t?new q(t):null}function r(v,t){if(null==t)return v;v=v.toRgba();v[3]*=t;return new q(v)}function l(v,t,Y){if(v=v.symbolLayers){var K=T=>{T=F.isSome(T)?T:null;t=t||T||null!=Y&&S;return r(t,Y)};v.forEach(T=>{if("object"!==T.type||null==T.resource.href||t)if("water"===T.type)T.color=K(T.color);else{var f=F.isSome(T.material)?
T.material.color:null;f=K(f);F.isNone(T.material)?T.material=new e.Symbol3DMaterial({color:f}):T.material.color=f;null!=Y&&"outline"in T&&F.isSome(T.outline)&&F.isSome(T.outline.color)&&(T.outline.color=r(T.outline.color,Y))}})}}function P(v,t){return O.apply(this,arguments)}function O(){O=H._asyncToGenerator(function*(v,t){(v=v.symbolLayers)&&(yield L.forEach(v,function(){var Y=H._asyncToGenerator(function*(K){return C(K,t)});return function(K){return Y.apply(this,arguments)}}()))});return O.apply(this,
arguments)}function C(v,t){return w.apply(this,arguments)}function w(){w=H._asyncToGenerator(function*(v,t){switch(v.type){case "extrude":v.size="number"===typeof t[2]?t[2]:0;break;case "icon":case "line":case "text":t=b(t);F.isSome(t)&&(v.size=t);break;case "path":{const Y=d(t,p.ONES,[v.width,void 0,v.height]);v.width=Q(t[0],v.width,1,Y);v.height=Q(t[2],v.height,1,Y)}break;case "object":yield k(v,t)}});return w.apply(this,arguments)}function b(v){for(const t of v)if("number"===typeof t)return t;
return null}function k(v,t){return D.apply(this,arguments)}function D(){D=H._asyncToGenerator(function*(v,t){const {resourceSize:Y,symbolSize:K}=yield n(v),T=d(t,Y,K);v.width=Q(t[0],K[0],Y[0],T);v.depth=Q(t[1],K[1],Y[1],T);v.height=Q(t[2],K[2],Y[2],T)});return D.apply(this,arguments)}function d(v,t,Y){for(let K=0;3>K;K++){const T=v[K];switch(T){case "symbol-value":return null!=Y[K]?Y[K]/t[K]:1;case "proportional":break;default:if(T&&t[K])return T/t[K]}}return 1}function n(v){return u.apply(this,arguments)}
function u(){u=H._asyncToGenerator(function*(v){const t=yield(yield new Promise((I,Z)=>E(["./symbolLayerUtils"],I,Z))).computeObjectLayerResourceSize(v,10),{width:Y,height:K,depth:T}=v;v=[Y,T,K];let f=1;for(var x=0;3>x;x++)if(null!=v[x]){f=v[x]/t[x];break}for(x=0;3>x;x++)null==v[x]&&(v[x]=t[x]*f);return{resourceSize:t,symbolSize:v}});return u.apply(this,arguments)}function Q(v,t,Y,K){switch(v){case "proportional":return Y*K;case "symbol-value":return null!=t?t:Y;default:return v}}function U(){U=H._asyncToGenerator(function*(v,
t){if(v&&t){if(h.isSymbol3D(v))return P(v,t);if(h.isSymbol2D(v)&&(t=b(t),!F.isNone(t)))switch(v.type){case "simple-marker":v.size=t;break;case "picture-marker":{const Y=v.width/v.height;1<Y?(v.width=t,v.height=t*Y):(v.width=t*Y,v.height=t);break}case "simple-line":v.width=t;break;case "text":v.font.size=t}}});return U.apply(this,arguments)}const y=/\/resource\/(.*?)\.svg$/,S=new q("white");J.applyColorToSymbol=function(v,t,Y){if(v&&(t||null!=Y))if(t&&(t=new q(t)),h.isSymbol3D(v))l(v,t,Y);else if(h.isSymbol2D(v)){if(t=
t||v.color)v.color=r(t,Y);null!=Y&&"outline"in v&&v.outline&&v.outline.color&&(v.outline.color=r(v.outline.color,Y))}};J.applyOpacityToColor=r;J.applyRotationToSymbol=function(v,t,Y){v&&null!=t&&(h.isSymbol3D(v)?(v=v.symbolLayers)&&v.forEach(K=>{if(K&&"object"===K.type)switch(Y){case "tilt":K.tilt=t;break;case "roll":K.roll=t;break;default:K.heading=t}}):!h.isSymbol2D(v)||"simple-marker"!==v.type&&"picture-marker"!==v.type&&"text"!==v.type||(v.angle=t))};J.applySizesToSymbol=function(v,t){return U.apply(this,
arguments)};J.getCSSFilterFromEffectList=function(v){if(!v)return null;v=v.effects.filter(t=>"bloom"!==t.type).map(t=>t.toJSON());return A.effectFunctionsFromJSON(v)};J.getColorFromSymbol=function(v,t){if(!v)return null;let Y=null;h.isSymbol3D(v)?Y=g(v):h.isSymbol2D(v)&&(Y=v.color?new q(v.color):null);return Y?r(Y,t):null};J.getIconHref=function(v,t){t=t.resource.href;return!B("esri-canvas-svg-support")&&v.styleOrigin&&y.test(t)?t.replace(y,"/resource/png/$1.png"):t};J.getSymbolOutlineSize=function(v){if(!v)return 0;
if(h.isSymbol3D(v)){{const t=v.symbolLayers&&v.symbolLayers.length;t?(v=v.symbolLayers.getItemAt(t-1),v="outline"in v?F.get(v,"outline","size"):void 0):v=void 0}return F.isSome(v)?v:0}return(v=c.getStroke(v))&&R.px2pt(v.width)||0};J.isVolumetricSymbol=function(v){if(F.isNone(v)||!("symbolLayers"in v)||F.isNone(v.symbolLayers))return!1;switch(v.type){case "point-3d":return v.symbolLayers.some(t=>"object"===t.type);case "line-3d":return v.symbolLayers.some(t=>"path"===t.type);case "polygon-3d":return v.symbolLayers.some(t=>
"object"===t.type||"extrude"===t.type);default:return!1}};Object.defineProperties(J,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(E,J,H,q,h,L,B){function F(e){if(!e)return null;let g;switch(e.type){case "simple-fill":case "picture-fill":case "simple-marker":g=F(e.outline);break;case "simple-line":{const r=
L.pt2px(e.width);"none"!==e.style&&0!==r&&(g={color:e.color,style:c(e.style),width:r,cap:e.cap,join:"miter"===e.join?L.pt2px(e.miterLimit):e.join});break}default:g=null}return g}const R={left:"start",center:"middle",right:"end",justify:"start"},p={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},A=new h(1E3),c=(()=>{const e={};return g=>{if(e[g])return e[g];const r=g.replace(/-/g,"");return e[g]=r}})();H=new H([128,128,128]);E.defaultThematicColor=H;E.dekebabifyLineStyle=
c;E.getFill=function(e){const g=e.style;let r=null;if(e)switch(e.type){case "simple-marker":"cross"!==g&&"x"!==g&&(r=e.color);break;case "simple-fill":"solid"===g?r=e.color:"none"!==g&&(r={type:"pattern",x:0,y:0,src:J.getAssetUrl(`esri/symbols/patterns/${g}.png`),width:5,height:5});break;case "picture-fill":r={type:"pattern",src:e.url,width:L.pt2px(e.width)*e.xscale,height:L.pt2px(e.height)*e.yscale,x:L.pt2px(e.xoffset),y:L.pt2px(e.yoffset)};break;case "text":r=e.color;break;case "cim":r=B.getCIMSymbolColor(e)}return r};
E.getPatternUrlWithColor=function(e,g){const r=e+"-"+g;return void 0!==A.get(r)?Promise.resolve(A.get(r)):q(e,{responseType:"image"}).then(l=>{l=l.data;const P=l.naturalWidth,O=l.naturalHeight,C=document.createElement("canvas");C.width=P;C.height=O;const w=C.getContext("2d");w.fillStyle=g;w.fillRect(0,0,P,O);w.globalCompositeOperation="destination-in";w.drawImage(l,0,0);l=C.toDataURL();A.put(r,l);return l})};E.getSVGAlign=function(e){return e=(e=e.horizontalAlignment)&&R[e.toLowerCase()]||"middle"};
E.getSVGBaseline=function(e){return(e=e.verticalAlignment)&&p[e.toLowerCase()]||"alphabetic"};E.getSVGBaselineShift=function(e){return"bottom"===e.verticalAlignment?"super":null};E.getStroke=F;Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(E){return function(){function J(q,h){this._storage=new E.MemCacheStorage;this._storage.maxSize=q;h&&this._storage.registerRemoveFunc("",h)}var H=J.prototype;
H.put=function(q,h){this._storage.put(q,h,1,1)};H.pop=function(q){return this._storage.pop(q)};H.get=function(q){return this._storage.get(q)};H.clear=function(){this._storage.clearAll()};H.destroy=function(){this._storage.destroy()};return J}()})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(E,J,H,q,h,L,B,
F,R,p){function A(C,w){if(w&&(C.style.filter=p.getCSSFilterFromEffectList(w),w=w.effects))for(const b of w)if("drop-shadow"===(null==b?void 0:b.type)){0>b.offsetX?C.style.marginLeft=`${Math.abs(b.offsetX)}px`:C.style.marginRight=`${b.offsetX}px`;break}}function c(C,w){return e.apply(this,arguments)}function e(){e=H._asyncToGenerator(function*(C,w){switch(C.type){case "web-style":var {previewWebStyleSymbol:b}=yield new Promise((k,D)=>E(["./previewWebStyleSymbol"],k,D));return b(C,c,w);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:b}=
yield new Promise((k,D)=>E(["./previewSymbol3D"],k,D)),b(C,w);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:b}=yield new Promise((k,D)=>E(["./previewSymbol2D"],k,D)),b(C,w);case "cim":return{previewCIMSymbol:b}=yield new Promise((k,D)=>E(["./previewCIMSymbol"],k,D)),b(C,w)}});return e.apply(this,arguments)}function g(C){return C&&"opacity"in C?C.opacity*g(C.parent):1}function r(){r=H._asyncToGenerator(function*(C,
w){var b,k;if(C){var D=C.sourceLayer;D=null!=(b=h.isSome(w)&&null!=(k=w.useSourceLayer)&&k?D:C.layer)?b:D;b=g(D);if(h.isSome(C.symbol)&&(!h.isSome(w)||!0!==w.ignoreGraphicSymbol))return C="web-style"===C.symbol.type?yield C.symbol.fetchSymbol({...w,cache:h.isSome(w)?w.webStyleCache:null}):C.symbol.clone(),p.applyColorToSymbol(C,null,b),C;var d=h.isSome(w)&&w.renderer||D&&"renderer"in D&&D.renderer;if(k=d&&"getSymbolAsync"in d?yield d.getSymbolAsync(C,w):null){k="web-style"===k.type?yield k.fetchSymbol({...w,
cache:h.isSome(w)?w.webStyleCache:null}):k.clone();if(!("visualVariables"in d&&d.visualVariables&&d.visualVariables.length))return p.applyColorToSymbol(k,null,b),k;"arcadeRequiredForVisualVariables"in d&&d.arcadeRequiredForVisualVariables&&(h.isNone(w)||h.isNone(w.arcade))&&(w={...h.unwrap(w)},w.arcade=yield L.loadArcade());D=yield new Promise((S,v)=>E(["../../renderers/visualVariables/support/visualVariableUtils"],S,v));var n=[],u=[],Q=[],U=[];for(var y of d.visualVariables)switch(y.type){case "color":n.push(y);
break;case "opacity":u.push(y);break;case "rotation":U.push(y);break;case "size":y.target||Q.push(y)}y=(y=!!n.length&&n[n.length-1])?D.getColor(y,C,w):null;u=(u=!!u.length&&u[u.length-1])?D.getOpacity(u,C,w):null;null!=b&&(u=null!=u?u*b:b);p.applyColorToSymbol(k,y,u);Q.length&&(b=D.getAllSizes(Q,C,w),yield p.applySizesToSymbol(k,b));for(const S of U)p.applyRotationToSymbol(k,D.getRotationAngle(S,C,w),S.axis);return k}}});return r.apply(this,arguments)}function l(){l=H._asyncToGenerator(function*(C,
w){var b;if(C){var k=g(C.layer||C.sourceLayer);if(h.isSome(C.symbol)&&(!h.isSome(w)||!0!==w.ignoreGraphicSymbol))return C="web-style"===C.symbol.type?yield C.symbol.fetchSymbol(w):C.symbol.clone(),p.getColorFromSymbol(C,k);var D=h.isSome(w)&&w.renderer||C.get("layer.renderer")||C.get("sourceLayer.renderer"),d=yield D.getSymbolAsync(C,w);if(d){d="web-style"===d.type?yield d.fetchSymbol(w):d.clone();d=p.getColorFromSymbol(d,k);if(!("visualVariables"in D)||"visualVariables"in D&&!D.visualVariables||
"visualVariables"in D&&(null==(b=D.visualVariables)||!b.length))return d;D.arcadeRequiredForVisualVariables&&(h.isNone(w)||h.isNone(w.arcade))&&(w={...h.unwrap(w)},w.arcade=yield L.loadArcade());b=yield new Promise((Q,U)=>E(["../../renderers/visualVariables/support/visualVariableUtils"],Q,U));var n=[],u=[];for(const Q of D.visualVariables)switch(Q.type){case "color":n.push(Q);break;case "opacity":u.push(Q)}D=(D=0<n.length?n[n.length-1]:null)?b.getColor(D,C,w):d;C=(d=0<u.length?u[u.length-1]:null)?
b.getOpacity(d,C,w):null;null!=k&&(C=null!=C?C*k:k);return D?p.applyOpacityToColor(D,C):null}}});return l.apply(this,arguments)}let P=null;const O=[255,255,255];J.getDisplayedColor=function(C,w){return l.apply(this,arguments)};J.getDisplayedSymbol=function(C,w){return r.apply(this,arguments)};J.renderColorRampPreviewHTML=function(C,w={}){var b="horizontal"===w.align;const {width:k=b?75:24,height:D=b?24:75,gradient:d=!0}=w;var n=window.devicePixelRatio,u=k*n,Q=D*n;n=document.createElement("canvas");
n.width=u;n.height=Q;n.style.width=`${k}px`;n.style.height=`${D}px`;const U=n.getContext("2d");var y=b?u:0,S=b?0:Q;if(d){const v=U.createLinearGradient(0,0,y,S);b=C.length;const t=1===b?0:1/(b-1);C.forEach((Y,K)=>v.addColorStop(K*t,Y.toString()));U.fillStyle=v;U.fillRect(0,0,u,Q)}else{u=b?u/C.length:u;Q=b?Q:Q/C.length;S=y=0;for(const v of C)U.fillStyle=v.toString(),U.fillRect(y,S,u,Q),y=b?y+u:0,S=b?0:S+Q}C=document.createElement("div");C.style.width=`${k}px`;C.style.height=`${D}px`;A(C,null==w?void 0:
w.effectList);C.appendChild(n);return C};J.renderDotDensityPreviewHTML=function(C,w,b){const {backgroundColor:k,outline:D,dotSize:d}=C;b=b&&b.swatchSize||F.SymbolSizeDefaults.size;const n=Math.round(b*b/d**2*.8),u=window.devicePixelRatio;C=document.createElement("canvas");const Q=b*u;C.width=Q;C.height=Q;C.style.width=`${C.width/u}px`;C.style.height=`${C.height/u}px`;const U=C.getContext("2d");k&&(U.fillStyle=k.toCss(!0),U.fillRect(0,0,Q,Q),U.fill());U.fillStyle=w.toCss(!0);if(P&&P.length/2===n)for(w=
0;w<2*n;w+=2)U.fillRect(P[w],P[w+1],d*u,d*u),U.fill();else for(P=[],w=0;w<2*n;w+=2){const y=Math.floor(Math.random()*(Q-0+1)),S=Math.floor(Math.random()*(Q-0+1));P.push(y,S);U.fillRect(y,S,d*u,d*u);U.fill()}D&&(D.color&&(U.strokeStyle=D.color.toCss(!0)),U.lineWidth=D.width,U.strokeRect(0,0,Q,Q));b=new Image(b,b);b.src=C.toDataURL();return b};J.renderPieChartPreviewHTML=function(C,w={}){const b=w.radius||40;var k=2*Math.PI*b,D=C.length;const d=k/D,n=[],u=B.getStroke(w.outline);u&&(u.width*=2);(u||
w.backgroundColor)&&n.push({shape:{type:"circle",cx:b,cy:b,r:b},fill:w.backgroundColor,stroke:u,offset:[0,0]});const Q=w.values,U=Q&&Q.length===D&&100===Q.reduce((S,v)=>S+v,0),y=[0];for(let S=0;S<D;S++){const v=U?Q[S]*k/100:null;U&&y.push(v+y[S]);n.push({shape:{type:"circle",cx:b,cy:b,r:b/2},fill:[0,0,0,0],stroke:{width:b,dashArray:`${v||d} ${k}`,dashoffset:`-${U?y[S]/2:d/2*S}`,color:C[S]},offset:[0,0]})}D=null;C=2*b+((null==u?void 0:u.width)||0);if(k=w.holePercentage)u&&n.push({shape:{type:"circle",
cx:b,cy:b,r:b*k},fill:null,stroke:u,offset:[0,0]}),D=C/2,D=[[{shape:{type:"circle",cx:D,cy:D,r:D},fill:O,stroke:u?{...u,color:O}:null,offset:[0,0]},{shape:{type:"circle",cx:D,cy:D,r:b*k},fill:[0,0,0],stroke:null,offset:[0,0]}]];return R.renderSymbol([n],[C,C],{effectView:w.effectList,ignoreStrokeWidth:!0,masking:D,rotation:-90})};J.renderPreviewHTML=c;Object.defineProperties(J,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/clusterUtils":function(){define(["exports",
"../../../renderers/visualVariables/SizeVariable"],function(E,J){const H=(q,h)=>{q=q.featuresTilingScheme.getClosestInfoForScale(q.scale).level;return null!=h&&h.levels?h.levels[q]:null};E.getClusterSizeVariable=function(q,h){if(!(q&&"visualVariables"in q&&q.visualVariables))return null;q=q.visualVariables.find(L=>"size"===L.type);return(h=H(h,q))?new J({field:q.field,minSize:h[2].size,minDataValue:h[2].value,maxSize:h[3].size,maxDataValue:h[3].value}):null};Object.defineProperties(E,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(E,J,H,q,h){function L(e,g){const r=[],l=e.length-1;5===e.length?r.push(0,2,4):r.push(0,l);return e.map((P,O)=>r.includes(O)?h.createStopLabel(P,O,l,g):null)}function B(){B=H._asyncToGenerator(function*(e,g,r){let l=!1,P=[],O=[];if(e.stops){var C=e.stops;P=C.map(b=>b.value);(l=C.some(b=>!!b.label))&&
(O=C.map(b=>b.label))}C=P[P.length-1];if(null==P[0]&&null==C)return null;const w=l?null:L(P,r);return(yield Promise.all(P.map(function(){var b=H._asyncToGenerator(function*(k,D){const d="opacity"===e.type?yield F(k,e,g):(yield new Promise((n,u)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],n,u))).getColor(e,k);return{value:k,color:d,label:l?O[D]:w[D]}});return function(k,D){return b.apply(this,arguments)}}()))).reverse()});return B.apply(this,arguments)}function F(e,g){return R.apply(this,
arguments)}function R(){R=H._asyncToGenerator(function*(e,g,r=c){r=new q(r);e=(yield new Promise((l,P)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],l,P))).getOpacity(g,e);null!=e&&(r.a=e);return r});return R.apply(this,arguments)}function p(e,g){const {startIndex:r,endIndex:l,weight:P}=A(e,g);if(r===l)return g[r].color;e=q.blendColors(g[r].color,g[l].color,P);return new q(e)}function A(e,g){let r=0,l=g.length-1;g.some((P,O)=>{if(e<P.value)return l=O,!0;r=O;return!1});return{startIndex:r,
endIndex:l,weight:(e-g[r].value)/(g[l].value-g[r].value)}}const c=new q([64,64,64]);J.getColorFromPointCloudStops=p;J.getRampStops=function(e,g,r){return B.apply(this,arguments)};J.getRampStopsForPointCloud=function(e){let g=!1,r=[],l=[];r=e.map(C=>C.value);(g=e.some(C=>!!C.label))&&(l=e.map(C=>C.label));const P=r[r.length-1];if(null==r[0]&&null==P)return null;const O=g?null:L(r,!1);return r.map((C,w)=>{const b=p(C,e);return{value:C,color:b,label:g?l[w]:O[w]}}).reverse()};J.getStrectchRampStops=function(e,
g){let r=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((l,P)=>{0===P?r.push({value:g.max,color:new q(l.toColor),label:"high"}):r.push({value:null,color:new q(l.toColor),label:""});P===e.colorRamps.length-1?r.push({value:g.min,color:new q(l.fromColor),label:"low"}):r.push({value:null,color:new q(l.fromColor),label:""})});else{let l,P;e&&"algorithmic"===e.type?(l=e.fromColor,P=e.toColor):(l=[0,0,0,1],P=[255,255,255,1]);r=[{value:g.max,color:new q(P),label:"high"},{value:g.min,color:new q(l),
label:"low"}]}return r};Object.defineProperties(J,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(E,J,H,q,h,L,B){function F(c){return R.apply(this,arguments)}function R(){R=H._asyncToGenerator(function*(c){if(!("visualVariables"in c&&c.visualVariables))return null;
c=c.visualVariables.find(r=>"color"===r.type);if(!c)return null;var e=null,g=null;if(c.stops){if(1===c.stops.length)return c.stops[0].color;e=c.stops[0].value;g=c.stops[c.stops.length-1].value}e+=(g-e)/2;({getColor:g}=yield new Promise((r,l)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],r,l)));return g(c,e)});return R.apply(this,arguments)}function p(){p=H._asyncToGenerator(function*(c,e){const g=c.trailCap,r=c.trailWidth||1;c=e||(yield F(c))||c.color;return new B({cap:g,color:c,
width:r})});return p.apply(this,arguments)}const A=h.convertDateFormatToIntlOptions("short-date");J.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];J.SPECIAL_CHARS_GREATER_THAN="\x3e";J.SPECIAL_CHARS_LESS_THAN="\x3c";J.createStopLabel=function(c,e,g,r){let l="";0===e?l="\x3c ":e===g&&(l="\x3e ");e=null;e=r?h.formatDate(c,A):L.format(c);return l+e};J.getMedianColor=F;J.getSymbolForFlowRenderer=function(c,e){return p.apply(this,arguments)};Object.defineProperties(J,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(E,J,H){function q(A,c){return A-c}function h(A,c){let e;e=Number(A.toFixed(c));e<A?A=e+1/10**c:(A=e,e-=1/10**c);e=Number(e.toFixed(c));A=Number(A.toFixed(c));return[e,A]}function L(A,c,e,g,r){A=F(A,c,e,g);c=null==A.next||A.next<=r;return(null==A.previous||A.previous<=r)&&c||A.previous+A.next<=2*r}function B(A){A=String(A);var c=
A.match(R);if(c&&c[1])return{integer:c[1].split("").length,fractional:c[3]?c[3].split("").length:0};if(A.toLowerCase().includes("e")&&(c=A.split("e"),A=c[0],c=c[1],A&&c)){A=Number(A);c=Number(c);const e=0<c;e||(c=Math.abs(c));A=B(A);e?(A.integer+=c,A.fractional=c>A.fractional?0:A.fractional-c):(A.fractional+=c,A.integer=c>A.integer?1:A.integer-c);return A}return{integer:0,fractional:0}}function F(A,c,e,g){const r={previous:null,next:null};if(null!=e){const l=A-e;r.previous=Math.floor(Math.abs(100*
(c-e-l)/l))}null!=g&&(A=g-A,r.next=Math.floor(Math.abs(100*(g-c-A)/A)));return r}const R=/^-?(\d+)(\.(\d+))?$/i,p={maximumFractionDigits:20};E.format=function(A){return H.formatNumber(A,p)};E.numDigits=B;E.percentChange=F;E.round=function(A,c={}){A=A.slice(0);const {tolerance:e=2,strictBounds:g=!1,indexes:r=A.map((P,O)=>O)}=c;r.sort(q);for(c=0;c<r.length;c++){const P=r[c],O=A[P],C=0===P?null:A[P-1],w=P===A.length-1?null:A[P+1],b=B(O).fractional;if(b){let k=0,D=!1;for(var l=void 0;k<=b&&!D;)l=h(O,
k),l=g&&0===c?l[1]:l[0],D=L(O,l,C,w,e),k++;D&&(A[P]=l)}}return A};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(E,J){E.getHeatmapRampStops=function(H){if(!H.colorStops)return[];const q=[...H.colorStops].filter(L=>{var B;return 0<(null==(B=L.color)?void 0:B.a)});let h=q.length-1;if(q&&q[0]){const L=q[h];L&&1!==L.ratio&&(q.push(new J({ratio:1,
color:L.color})),h++)}return q.map((L,B)=>{let F="";if(0===B){var R;F=(null==(R=H.legendOptions)?void 0:R.minLabel)||"low"}else if(B===h){var p;F=(null==(p=H.legendOptions)?void 0:p.maxLabel)||"high"}return{color:L.color,label:F,ratio:L.ratio}}).reverse()};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],
function(E,J,H,q){function h(p){if(p){var {type:A}=p;return A.includes("3d")?q.getSymbolLayerFill(p.symbolLayers.getItemAt(0)):"simple-line"===A||"simple-marker"===p.type&&("x"===p.style||"cross"===p.style)?(p=H.getStroke(p))&&p.color:H.getFill(p)}}function L(p,A){const c=A.HH.label,e=A.LL.label,g=A.HL.label;A=A.LH.label;switch(p){case "HH":return{top:c,bottom:e,left:g,right:A};case "HL":return{top:g,bottom:A,left:e,right:c};case "LL":return{top:e,bottom:c,left:A,right:g};case "LH":return{top:A,bottom:g,
left:c,right:e};default:return{top:c,bottom:e,left:g,right:A}}}function B(p){let A=F[p];p&&null==A&&(A=F.HH);return A||0}const F={HH:315,HL:45,LL:135,LH:225},R={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};E.getRelationshipRampColors2D=function(p,A){const c=[],e=p.length**.5;p=J.clone(p);var g=(A||"HH").split("");A=g[0];for(g="H"===g[1];p.length;){const r=
[];for(;r.length<e;)r.push(p.shift());g&&r.reverse();c.push(r)}"L"===A&&c.reverse();return c};E.getRelationshipRampElement=function(p){const {focus:A,infos:c,numClasses:e}=p;var g=R[e];const r={};c.forEach(l=>{r[l.value]={label:l.label,fill:h(l.symbol)}});p=[];for(let l=0;l<e;l++){const P=[];for(let O=0;O<e;O++)P.push(r[g[l][O]].fill);p.push(P)}g=L(A,r);return{type:"relationship-ramp",numClasses:e,focus:A,colors:p,labels:g,rotation:B(A)}};E.getRotationAngleForFocus=B;Object.defineProperties(E,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),function(E,J,H,q,h,L,B,F,R,p,A,c,e,g,r,l,P){function O(G){const M=
G.outline;var X=F.isSome(G.material)?G.material.color:null;X=F.isSome(X)?X.toHex():null;if(F.isNone(M)||"pattern"in M&&F.isSome(M.pattern)&&"style"===M.pattern.type&&"none"===M.pattern.style)return"fill"===G.type&&"#ffffff"===X?{color:"#bdc3c7",width:.75}:null;G=p.pt2px(M.size)||0;return{color:"rgba("+(F.isSome(M.color)?M.color.toRgba():"255,255,255,1")+")",width:Math.min(G,I),style:"pattern"in M&&F.isSome(M.pattern)&&"style"===M.pattern.type?A.dekebabifyLineStyle(M.pattern.style):null,join:"butt",
cap:"patternCap"in M?M.patternCap:"butt"}}function C(G,M){var X=M&&M.resource;X=X&&X.href;if(G.thumbnail&&G.thumbnail.url)return Promise.resolve(G.thumbnail.url);if(X&&"object"!==M.type)return Promise.resolve(l.getIconHref(G,M));const ba=H.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return G.styleOrigin&&(G.styleOrigin.styleName||G.styleOrigin.styleUrl)?P.resolveWebStyleSymbol(G.styleOrigin,{portal:G.styleOrigin.portal},"webRef").catch(ja=>ja).then(ja=>{var pa;return(null==ja?void 0:
null==(pa=ja.thumbnail)?void 0:pa.url)||ba}):Promise.resolve(ba)}function w(G,M=1){const X=G.a;G=q.toHSV(G);const {r:ba,g:ja,b:pa}=q.toRGB({h:G.h,s:G.s/M,v:100-(100-G.v)/M});return[ba,ja,pa,X]}function b(G){return"water"===G.type?F.isNone(G.color)?null:G.color:F.isNone(G.material)||F.isNone(G.material.color)?null:G.material.color}function k(G,M=0){var X=b(G);if(!X){if("fill"===G.type)return null;M=g.adjustColorComponentBrightness(A.defaultThematicColor.r,M);return[M,M,M,100]}G=X.toRgba();for(X=0;3>
X;X++)G[X]=g.adjustColorComponentBrightness(G[X],M);return G}function D(G,M){return d.apply(this,arguments)}function d(){d=J._asyncToGenerator(function*(G,M){G=G.style;return"none"===G?null:{type:"pattern",x:0,y:0,src:yield A.getPatternUrlWithColor(H.getAssetUrl(`esri/symbols/patterns/${G}.png`),M.toCss(!0)),width:5,height:5}});return d.apply(this,arguments)}function n(G){return G.outline?O(G):{color:"rgba(0, 0, 0, 1)",width:1.5}}function u(G,M){G=b(G);if(!G)return null;let X;X="rgba("+(g.adjustColorComponentBrightness(G.r,
M)+",");X+=g.adjustColorComponentBrightness(G.g,M)+",";X+=g.adjustColorComponentBrightness(G.b,M)+",";return X+G.a+");"}function Q(G,M){M=u(G,M);if(!M)return{};if("pattern"in G&&F.isSome(G.pattern)&&"style"===G.pattern.type&&"none"===G.pattern.style)return null;const X=Math.min(G.size?p.pt2px(G.size):.75,I);return{color:M,width:X,style:"pattern"in G&&F.isSome(G.pattern)&&"style"===G.pattern.type?A.dekebabifyLineStyle(G.pattern.style):null,cap:"cap"in G?G.cap:null,join:"join"in G?"miter"===G.join?
p.pt2px(2):G.join:null}}function U(G,M,X){X*=.75;return{type:"linear",x1:X?.25*X:0,y1:X?.5*X:0,x2:X||4,y2:X?.5*X:4,colors:[{color:G,offset:0},{color:M,offset:1}]}}function y(G){const M=G.depth,X=G.height;return(G=G.width)&&M&&X&&G===M&&G<X}function S(G,M,X){const ba=[];if(!G)return ba;switch(G.type){case "icon":switch(G.resource&&G.resource.primitive||c.defaultPrimitive){case "circle":ba.push({shape:{type:"circle",cx:0,cy:0,r:.5*M},fill:k(G,0),stroke:O(G)});break;case "square":ba.push({shape:{type:"path",
path:[{command:"M",values:[0,M]},{command:"L",values:[0,0]},{command:"L",values:[M,0]},{command:"L",values:[M,M]},{command:"Z",values:[]}]},fill:k(G,0),stroke:O(G)});break;case "triangle":ba.push({shape:{type:"path",path:[{command:"M",values:[0,M]},{command:"L",values:[.5*M,0]},{command:"L",values:[M,M]},{command:"Z",values:[]}]},fill:k(G,0),stroke:O(G)});break;case "cross":ba.push({shape:{type:"path",path:[{command:"M",values:[.5*M,0]},{command:"L",values:[.5*M,M]},{command:"M",values:[0,.5*M]},
{command:"L",values:[M,.5*M]}]},stroke:n(G)});break;case "x":ba.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[M,M]},{command:"M",values:[M,0]},{command:"L",values:[0,M]}]},stroke:n(G)});break;case "kite":ba.push({shape:{type:"path",path:[{command:"M",values:[0,.5*M]},{command:"L",values:[.5*M,0]},{command:"L",values:[M,.5*M]},{command:"L",values:[.5*M,M]},{command:"Z",values:[]}]},fill:k(G,0),stroke:O(G)})}break;case "object":switch(G.resource&&G.resource.primitive||
e.defaultPrimitive){case "cone":var ja=k(G,0);G=k(G,-.6);G=U(ja,G,X?ea:M);M=g.getConeShapes(M,X);ba.push({shape:M[0],fill:G});ba.push({shape:M[1],fill:G});break;case "inverted-cone":X=k(G,0);G=k(G,-.6);G=U(X,G,M);M=g.getInvertedConeShapes(M);ba.push({shape:M[0],fill:G});ba.push({shape:M[1],fill:X});break;case "cube":M=g.getCubeShapes(M,X);ba.push({shape:M[0],fill:k(G,0)});ba.push({shape:M[1],fill:k(G,-.3)});ba.push({shape:M[2],fill:k(G,-.5)});break;case "cylinder":{ja=k(G,0);const pa=k(G,-.6);ja=
U(ja,pa,X?ea:M);M=g.getCylinderShapes(M,X);ba.push({shape:M[0],fill:ja});ba.push({shape:M[1],fill:ja});ba.push({shape:M[2],fill:k(G,0)});break}case "diamond":M=g.getDiamondShapes(M);ba.push({shape:M[0],fill:k(G,-.3)});ba.push({shape:M[1],fill:k(G,0)});ba.push({shape:M[2],fill:k(G,-.3)});ba.push({shape:M[3],fill:k(G,-.7)});break;case "sphere":X=k(G,0);G=k(G,-.6);G=U(X,G);G.x1=0;G.y1=0;G.x2=.25*M;G.y2=.25*M;ba.push({shape:{type:"circle",cx:0,cy:0,r:.5*M},fill:G});break;case "tetrahedron":M=g.getTetrahedronShapes(M),
ba.push({shape:M[0],fill:k(G,-.3)}),ba.push({shape:M[1],fill:k(G,0)}),ba.push({shape:M[2],fill:k(G,-.6)})}}return ba}function v(G){return(G="number"===typeof(null==G?void 0:G.size)?null==G?void 0:G.size:null)?p.pt2px(G):null}function t(G,M){const X=v(M),ba=M&&M.maxSize?p.pt2px(M.maxSize):null,ja=M&&M.disableUpsampling,pa=G.symbolLayers,na=[];let ma=0,ya=0;const fa=pa.getItemAt(pa.length-1);let za;fa&&"icon"===fa.type&&(za=fa.size&&p.pt2px(fa.size));pa.forEach(ka=>{if("icon"===ka.type||"object"===
ka.type){var qa="icon"===ka.type?ka.size&&p.pt2px(ka.size):0,sa=X||qa?Math.ceil(Math.min(X||qa,ba||x)):f;if(ka&&ka.resource&&ka.resource.href){var Ba=C(G,ka).then(ta=>{const Ea=ka.get("material.color");var Fa="icon"===ka.type?"multiply":"tint";return r.tintImageWithColor(ta,sa,Ea,Fa,ja)}).then(ta=>{const Ea=ta.width,Fa=ta.height;ma=Math.max(ma,Ea);ya=Math.max(ya,Fa);return[{shape:{type:"image",x:0,y:0,width:Ea,height:Fa,src:ta.url},fill:null,stroke:null}]});na.push(Ba)}else{let ta=sa;"icon"===ka.type&&
za&&X&&(ta=qa/za*sa);qa="tall"===(null==M?void 0:M.symbolConfig)||(null==M?void 0:null==(Ba=M.symbolConfig)?void 0:Ba.isTall)||("object"===ka.type?y(ka):!1);ma=Math.max(ma,qa?ea:ta);ya=Math.max(ya,ta);na.push(Promise.resolve(S(ka,ta,qa)))}}});return R.eachAlways(na).then(ka=>{const qa=[];ka.forEach(sa=>{sa.value?qa.push(sa.value):sa.error&&da.warn("error while building swatchInfo!",sa.error)});return r.renderSymbol(qa,[ma,ya],{node:M&&M.node,scale:!1,opacity:M&&M.opacity})})}function Y(G,M){const X=
G.symbolLayers,ba=[];G=l.isVolumetricSymbol(G);const ja=v(M),pa=(M&&M.maxSize?p.pt2px(M.maxSize):null)||I;let na=0,ma=0,ya;X.forEach((fa,za)=>{if(fa&&("line"===fa.type||"path"===fa.type)){var ka=[];switch(fa.type){case "line":var qa=Q(fa,0);if(F.isNone(qa))break;var sa=qa&&qa.width||0;0===za&&(ya=sa);fa=Math.min(ja||sa,pa);za=0===za?fa:ja?sa/ya*fa:fa;sa=za>Z/2?2*za:Z;ma=Math.max(ma,za);na=Math.max(na,sa);qa.width=za;ka.push({shape:{type:"path",path:[{command:"M",values:[0,.5*ma]},{command:"L",values:[na,
.5*ma]}]},stroke:qa});break;case "path":qa=Math.min(ja||f,pa);za=k(fa,0);sa=k(fa,-.2);var Ba=u(fa,-.4);Ba=Ba?{color:Ba,width:1}:{};if("quad"===fa.profile){const ta=fa.width;fa=fa.height;fa=g.getPathSymbolShapes(ta&&fa?ta/fa:1,0===fa,0===ta);Ba={...Ba,join:"bevel"};ka.push({shape:fa[0],fill:sa,stroke:Ba});ka.push({shape:fa[1],fill:sa,stroke:Ba});ka.push({shape:fa[2],fill:za,stroke:Ba})}else ka.push({shape:g.shapes.pathSymbol3DLayer[0],fill:sa,stroke:Ba}),ka.push({shape:g.shapes.pathSymbol3DLayer[1],
fill:za,stroke:Ba});na=ma=Math.max(ma,qa)}ba.push(ka)}});return Promise.resolve(r.renderSymbol(ba,[na,ma],{node:M&&M.node,scale:G,opacity:M&&M.opacity}))}function K(G,M){return T.apply(this,arguments)}function T(){T=J._asyncToGenerator(function*(G,M){const X="mesh-3d"===G.type;G=G.symbolLayers;var ba=v(M);const ja=M&&M.maxSize?p.pt2px(M.maxSize):null;ba=ba||f;const pa=[];let na=0,ma=0;var ya=!1;for(let Ba=0;Ba<G.length;Ba++){var fa=G.getItemAt(Ba);const ta=[];if(!X||"fill"===fa.type){var za=g.shapes.fill[0];
switch(fa.type){case "fill":var ka=O(fa);ya=Math.min(ba,ja||x);na=Math.max(na,ya);ma=Math.max(ma,ya);ya=!0;var qa=k(fa,0),sa="pattern"in fa&&fa.pattern;fa=b(fa);!X&&F.isSome(sa)&&"style"===sa.type&&"solid"!==sa.style&&fa&&(qa=yield D(sa,fa));ta.push({shape:za,fill:qa,stroke:ka});break;case "line":fa=Q(fa,0);if(F.isNone(fa))break;fa={stroke:fa,shape:za};na=Math.max(na,f);ma=Math.max(ma,f);ta.push(fa);break;case "extrude":za={join:"round",width:1,...Q(fa,-.4)};ka=k(fa,0);fa=k(fa,-.2);qa=Math.min(ba,
ja||x);sa=g.getExtrudeSymbolShapes(qa);za.width=1;ta.push({shape:sa[0],fill:fa,stroke:za});ta.push({shape:sa[1],fill:fa,stroke:za});ta.push({shape:sa[2],fill:ka,stroke:za});fa=.7*f+.5*qa;na=Math.max(na,f);ma=Math.max(ma,fa);break;case "water":ya=b(fa),fa=w(ya),za=w(ya,2),ka=w(ya,3),qa=g.getWaterSymbolShapes(),ya=!0,ta.push({shape:qa[0],fill:fa}),ta.push({shape:qa[1],fill:za}),ta.push({shape:qa[2],fill:ka}),fa=Math.min(ba,ja||x),na=Math.max(na,fa),ma=Math.max(ma,fa)}pa.push(ta)}}return r.renderSymbol(pa,
[na,ma],{node:M&&M.node,scale:ya,opacity:M&&M.opacity})});return T.apply(this,arguments)}const f=g.SymbolSizeDefaults.size,x=g.SymbolSizeDefaults.maxSize,I=g.SymbolSizeDefaults.maxOutlineSize,Z=g.SymbolSizeDefaults.lineWidth,ea=g.SymbolSizeDefaults.tallSymbolWidth,da=B.getLogger("esri.symbols.support.previewSymbol3D");E.getPatternDescriptor=D;E.getSizeFromOptions=v;E.getSymbolLayerFill=k;E.previewSymbol3D=function(G,M){if(0===G.symbolLayers.length)return Promise.reject(new L("symbolPreview: renderPreviewHTML3D",
"No symbolLayers in the symbol."));switch(G.type){case "point-3d":return t(G,M);case "line-3d":return Y(G,M);case "polygon-3d":case "mesh-3d":return K(G,M)}return Promise.reject(new L("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c){function e(r,l,P,O,C){var w=r.data;const b=P&&h.isSome(P.portal)?P.portal:B.getDefault(),k={portal:b,url:L.urlToObject(r.baseUrl),origin:"portal-item"};w=w.items.find(Q=>Q.name===l);if(!w)return Promise.reject(new q("symbolstyleutils:symbol-name-not-found",`The symbol name '${l}' could not be found`,{symbolName:l}));let D=F.fromJSON(A.symbolUrlFromStyleItem(w,O),k),d=w.thumbnail&&w.thumbnail.href;const n=w.thumbnail&&w.thumbnail.imageData;H.isDevEnvironment()&&(D=
H.adjustStaticAGOUrl(D),d=H.adjustStaticAGOUrl(d));const u={portal:b,url:L.urlToObject(L.removeFile(D)),origin:"portal-item"};return A.requestJSON(D,C).then(Q=>{Q="cimRef"===O?A.makeCIMSymbolRef(Q.data):Q.data;if((Q=R.fromJSON(Q,u))&&J.isSymbol3D(Q)){if(d){const U=F.fromJSON(d,k);Q.thumbnail=new c.Thumbnail({url:U})}else n&&(Q.thumbnail=new c.Thumbnail({url:`data:image/png;base64,${n}`}));r.styleUrl?Q.styleOrigin=new p({portal:P.portal,styleUrl:r.styleUrl,name:l}):r.styleName&&(Q.styleOrigin=new p({portal:P.portal,
styleName:r.styleName,name:l}))}return Q})}function g(r,l,P){const O=A.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,r.name),C=h.isSome(l.portal)?l.portal:B.getDefault();return A.requestJSON(O,P).then(w=>{w=A.makeCIMSymbolRef(w.data);return R.fromJSON(w,{portal:C,url:L.urlToObject(L.removeFile(O)),origin:"portal-item"})})}E.fetchSymbolFromStyle=e;E.resolveWebStyleSymbol=function(r,l,P,O){return r.name?r.styleName&&"Esri2DPointSymbolsStyle"===r.styleName?g(r,l,O):A.fetchStyle(r,l,O).then(C=>e(C,r.name,
l,P,O)):Promise.reject(new q("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(E){const J=/^devext.arcgis.com$/,H=/^qaext.arcgis.com$/,q=/^[\w-]*\.mapsdevext.arcgis.com$/,h=/^[\w-]*\.mapsqa.arcgis.com$/,L=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,J,H,/^jsapps.esri.com$/,q,h];E.adjustStaticAGOUrl=
function(B,F){return B?(F=F||globalThis.location.hostname)?null!=F.match(J)||null!=F.match(q)?B.replace("static.arcgis.com","staticdev.arcgis.com"):null!=F.match(H)||null!=F.match(h)?B.replace("static.arcgis.com","staticqa.arcgis.com"):B:B:B};E.isDevEnvironment=function(B){B=B||globalThis.location.hostname;return L.some(F=>{var R;return null!=(null==(R=B)?void 0:R.match(F))})};E.isTelemetryDevEnvironment=function(B){B=B||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(L).some(F=>
{var R;return null!=(null==(R=B)?void 0:R.match(F))})};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../symbols ../../../renderers/support/numberUtils ../../../symbols/support/cimSymbolUtils ../../../symbols/support/utils ./utils ../../support/widgetUtils ../../../support/themeUtils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleLineSymbol".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c,e){function g(K,T){const f=K.length-1;return K.map((x,I)=>R.createStopLabel(x,I,f,T))}function r(){r=H._asyncToGenerator(function*(K,T,f,x,I,Z){var ea,da,G=T.legendOptions;G=G&&G.customValues;const M=yield O(K,f);var X=null!=T.minSize&&null!=T.maxSize;f=T.stops&&1<T.stops.length;var ba=!!T.target;if(M&&(G||X||f&&!ba)){var ja=F.isVolumetricSymbol(M),pa=null,na=X=null;X=ja&&!f?L.round([T.minDataValue,T.maxDataValue]):G||(yield D(T,M,x,I));G=null==K?void 0:K.authoringInfo;
var ma=(ba="univariate-color-size"===(null==G?void 0:G.type))&&"above-and-below"===(null==G?void 0:G.univariateTheme);!X&&f&&(X=T.stops.map(ka=>ka.value),pa=T.stops.some(ka=>!!ka.label),"flow"===K.type&&(X=L.round(X)),pa&&(na=T.stops.map(ka=>ka.label)));ja&&2<(null==(ea=X)?void 0:ea.length)&&!ma&&(X=[X[0],X[X.length-1]]);if(!X)return null;ba&&5!==(null==(da=X)?void 0:da.length)&&(X=n({minSize:X[0],maxSize:X[X.length-1]}));var ya=ja?l(K,X):null,fa=F.getSymbolOutlineSize(M),za=pa?null:g(X,Z);return(yield Promise.all(X.map(function(){var ka=
H._asyncToGenerator(function*(qa,sa){const Ba=ja?ya[sa]:yield U(T,M,qa,x,I),ta=S(ma&&"class-breaks"===K.type?P(K,sa):M,Ba);return{value:qa,symbol:ta,label:pa?na[sa]:za[sa],size:Ba,outlineSize:fa}});return function(qa,sa){return ka.apply(this,arguments)}}()))).reverse()}});return r.apply(this,arguments)}function l(K,T){K=null==K?void 0:K.authoringInfo;const f="univariate-color-size"===(null==K?void 0:K.type);let x=[12,30];if(f){const I=T[0],Z=T[T.length-1];x=T.map(ea=>12+(ea-I)/(Z-I)*18)}f&&"below"===
(null==K?void 0:K.univariateTheme)&&x.reverse();return x}function P(K,T){const f=K.classBreakInfos,x=f.length;T=2>x||!(2<=T)?f[0].symbol.clone():f[x-1].symbol.clone();K.visualVariables.some(I=>"color"===I.type)&&(T.type.includes("3d")?b(T):k(T));return T}function O(K,T){return C.apply(this,arguments)}function C(){C=H._asyncToGenerator(function*(K,T){if("flow"===K.type)return R.getSymbolForFlowRenderer(K,T);if("pie-chart"===K.type){var f;return new c({color:null,outline:null!=(f=K.outline)&&f.width?
K.outline:new e})}let x=f=null;"simple"===K.type?f=K.symbol:"class-breaks"===K.type?(f=(K=K.classBreakInfos)&&K[0]&&K[0].symbol,x=1<K.length):"unique-value"===K.type&&(f=(K=K.uniqueValueInfos)&&K[0]&&K[0].symbol,x=1<K.length);if(!f||w(f))return null;f=f.clone();if(T||x)f.type.includes("3d")?b(f):k(f);return f});return C.apply(this,arguments)}function w(K){return K?h.isSymbol3D(K)?K.symbolLayers?K.symbolLayers.some(T=>T&&"fill"===T.type):!1:K.type.includes("fill"):!1}function b(K){"line-3d"===K.type?
K.symbolLayers.forEach(T=>{T.material={color:Y}}):K.symbolLayers.forEach(T=>{"icon"!==T.type||T.resource&&T.resource.href?T.material={color:t}:(T.material={color:v},T.outline={color:Y,size:1.5})})}function k(K){const T=A.isDarkTheme();if("cim"===K.type)B.applyCIMSymbolColor(K,new q(t));else if(K.type.includes("line"))K.color=Y;else if(K.color=T?Y:v,"simple-marker"===K.type)if(K.outline){var f,x;"#ffffff"===(null==(f=K.outline)?void 0:null==(x=f.color)?void 0:x.toHex())&&(K.outline.color=Y)}else K.outline=
{color:Y,width:1.5}}function D(K,T,f,x){return d.apply(this,arguments)}function d(){d=H._asyncToGenerator(function*(K,T,f,x){const I=(yield new Promise((da,G)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],da,G))).getSizeRangeAtScale(K,f,x),Z=I&&n(I);if(I||Z){var ea=Z.map(da=>{{const G=I.minSize,M=I.maxSize,X=K.minDataValue,ba=K.maxDataValue;let ja=null;da=ja=da<=G?X:da>=M?ba:(da-G)/(M-G)*(ba-X)+X}return da});ea=L.round(ea);for(let da=1;da<ea.length-1;da++){const G=yield u(K,
T,ea[da],ea[da-1],f,x);G&&(ea[da]=G[0],Z[da]=G[1])}return ea}});return d.apply(this,arguments)}function n(K){const T=K.minSize;K=(K.maxSize-T)/4;const f=[];for(let x=0;5>x;x++)f.push(T+K*x);return f}function u(K,T,f,x,I,Z){return Q.apply(this,arguments)}function Q(){Q=H._asyncToGenerator(function*(K,T,f,x,I,Z){const ea=yield U(K,T,f,I,Z);x=yield U(K,T,x,I,Z);var da=L.numDigits(f),G=da.fractional,M=da.integer;let X=da=null;0<f&&1>f&&(da=10**G,f*=da,M=L.numDigits(f).integer);for(G=M-1;0<=G;G--){var ba=
10**G;M=Math.floor(f/ba)*ba;ba*=Math.ceil(f/ba);null!=da&&(M/=da,ba/=da);let ja=(M+ba)/2;[,ja]=L.round([M,ja,ba],{indexes:[1]});const pa=yield U(K,T,M,I,Z),na=yield U(K,T,ba,I,Z),ma=yield U(K,T,ja,I,Z),ya=L.percentChange(ea,pa,x,null),fa=L.percentChange(ea,na,x,null),za=L.percentChange(ea,ma,x,null);let ka=20>=ya.previous,qa=20>=fa.previous;ka&&qa&&(ya.previous<=fa.previous?(ka=!0,qa=!1):(qa=!0,ka=!1));ka?X=[M,pa]:qa?X=[ba,na]:20>=za.previous&&(X=[ja,ma]);if(X)break}return X});return Q.apply(this,
arguments)}function U(K,T,f,x,I){return y.apply(this,arguments)}function y(){y=H._asyncToGenerator(function*(K,T,f,x,I){const {getSize:Z}=yield new Promise((ea,da)=>E(["../../../renderers/visualVariables/support/visualVariableUtils"],ea,da));return Z(K,f,{scale:x,view:I,shape:"simple-marker"===T.type?T.style:null})});return y.apply(this,arguments)}function S(K,T){K=K.clone();if(h.isSymbol3D(K))F.isVolumetricSymbol(K)||K.symbolLayers.forEach(f=>{"fill"!==f.type&&(f.size=T)});else if("esri.symbols.SimpleMarkerSymbol"===
K.declaredClass)K.size=T;else if("esri.symbols.PictureMarkerSymbol"===K.declaredClass){const f=K.width,x=K.height;K.height=T;K.width=f/x*T}else"esri.symbols.SimpleLineSymbol"===K.declaredClass?K.width=T:"esri.symbols.TextSymbol"===K.declaredClass&&K.font&&(K.font.size=T);return K}const v=[255,255,255],t=[200,200,200],Y=[128,128,128];J.REAL_WORLD_MAX_SIZE=30;J.REAL_WORLD_MIN_SIZE=12;J.getRampStops=function(K,T,f,x,I,Z){return r.apply(this,arguments)};Object.defineProperties(J,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/smartMapping/support/utils":function(){define("exports ../../../Color ../../../core/maybe ../../../intl/date ../../../intl/number ../../../renderers/support/utils ../../../renderers/visualVariables/SizeVariable".split(" "),function(E,J,H,q,h,L,B){E.formatDateLabel=function(F){return q.formatDate(new Date(F),L.timelineDateFormatOptions)};E.formatNumberLabel=function(F){const R=Math.floor(Math.log10(Math.abs(F)))+1;return h.formatNumber(F,{notation:1E6<=
Math.abs(F)?"compact":"standard",minimumSignificantDigits:2,maximumSignificantDigits:4>R||6<R?4:R})};E.getDeviationValues=function(F,R,p){if(H.isNone(R)||H.isNone(F))return[];const A=[];for(let c=-1*p;c<=p;c++)0!==c&&A.push(R+c*F);return A};E.getDynamicPathForSizeStops=function(F){const {max:R,min:p,padding:A,pathHeight:c,pathWidth:e,stops:g}=F,r=R-p;let l=`M0 0 L${e} 0 `,P;F=3===g.length?[g[0],g[1],g[2]]:[g[0],g[2],g[4]];const O=Math.min.apply(Math,F.map(w=>w.size)),C=Math.max(Math.abs(F[0].size-
F[1].size),Math.abs(F[2].size-F[1].size));F.reverse();F.forEach(({size:w,value:b},k)=>{b=Math.round(c-(b-p)/r*c);P=Math.round((w-O)/C*100)/100*e;0===P&&(P=A*e);0===k&&(l+=`L${P} 0 `);l+=`L${P} ${b} `});return l+=`L${P} ${c} L0 ${c} L0 0 Z`};E.getFillFromColor=function(F){return F instanceof J?F.toCss(!0):J.fromString(F).toCss(!0)};E.getPathForSizeStops=function(F){const {bottomValue:R,bottomWidth:p,max:A,min:c,pathHeight:e,pathWidth:g,topValue:r,topWidth:l}=F;F=l*g;const P=p*g,O=A-c;return`M${F} 0 L${F} ${Math.round(e-
(r-c)/O*e)} L${P} ${Math.round(e-(R-c)/O*e)} L${P} ${e} L0 ${e} L0 0 Z`};E.getSizesFromVariable=function(F){let R=F.maxSize;F=F.minSize;R instanceof B&&(R=R.stops[0].size);F instanceof B&&(F=F.stops[0].size);return[R,F]};E.getStopChanges=function(F,R,p){const A=p.length-1,c=p[0],e=p[A]-c,g=R-F,r=[];for(let l=1;l<A;l++)r.push({index:l,value:(p[l]-c)/e*g+F});r.unshift({index:0,value:F});r.push({index:A,value:R});return r};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(E,J,H,q,h,L,B,F,R,p,A){function c(b,k,D){h.getOrCreateMapValue(b,k,()=>[]).push(...D)}function e(){e=J._asyncToGenerator(function*(b){const k=
new Map;if("visualVariables"in b&&b.visualVariables){var D=b.visualVariables.filter(u=>"color"===u.type);for(const u of D){D=u.field||u.valueExpression;const Q=(yield p.getRampStops(u)).map(U=>U.color);c(k,D,Q)}}if("heatmap"===b.type){var d=A.getHeatmapRampStops(b).map(u=>u.color);c(k,b.field,d)}else if("pie-chart"===b.type){for(const u of b.attributes)c(k,u.field,[u.color]);c(k,null,[null==b?void 0:null==(d=b.othersCategory)?void 0:d.color,R.getColorFromSymbol(b.backgroundFillSymbol,null)])}else if("dot-density"===
b.type){for(const u of b.attributes)c(k,u.field,[u.color]);c(k,null,[b.backgroundColor])}else if("unique-value"===b.type){var n;if("predominance"===(null==(n=b.authoringInfo)?void 0:n.type))for(const u of b.uniqueValueInfos)c(k,u.value.toString(),[R.getColorFromSymbol(u.symbol,null)]);else{d=b.uniqueValueInfos.map(S=>R.getColorFromSymbol(S.symbol,null));const {field:u,field2:Q,field3:U,valueExpression:y}=b;(u||y)&&c(k,u||y,d);Q&&c(k,Q,d);U&&c(k,U,d)}}else"class-breaks"===b.type?(d=b.classBreakInfos.map(u=>
R.getColorFromSymbol(u.symbol,null)),c(k,b.field||b.valueExpression,d)):"simple"===b.type&&c(k,null,[R.getColorFromSymbol(b.symbol,null)]);"defaultSymbol"in b&&b.defaultSymbol&&c(k,null,[R.getColorFromSymbol(b.defaultSymbol,null)]);k.forEach((u,Q)=>{u=H.unique(u.filter(Boolean),(U,y)=>JSON.stringify(U)===JSON.stringify(y));k.set(Q,u)});return k});return e.apply(this,arguments)}function g(b,k,D){let d="";0===k?d=O.lt+" ":k===D&&(d=O.gt+" ");return d+b}function r(b){let k=b.minValue,D=b.maxValue;const d=
b.isFirstBreak?"":O.gt+" ";b="percent-of-total"===b.normalizationType?O.pct:"";k=null==k?"":B.format(k);D=null==D?"":B.format(D);return d+k+b+" "+O.ld+" "+D+b}function l(b,k){return"normalizationField"in b&&b.normalizationField?{type:"normalized-field",field:b.field,normalizationField:b.normalizationField}:"field"in b&&b.field?{type:"field",field:b.field}:"valueExpression"in b&&b.valueExpression?{type:"expression",expression:b.valueExpression,title:b.valueExpressionTitle,returnType:k}:null}const P=
q.getLogger("esri.renderers.support.utils"),O={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},C={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},w={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};q=L.convertDateFormatToIntlOptions("short-date");E.calculateDateFormatInterval=function(b){b=
b.map(u=>new Date(u));const k=b.length;let D=Infinity,d=null;for(let u=0;u<k-1;u++){const Q=b[u];let U=Infinity,y=null;for(let S=u+1;S<k;S++){var n=b[S];n=Q.getFullYear()!==n.getFullYear()&&"year"||Q.getMonth()!==n.getMonth()&&"month"||Q.getDate()!==n.getDate()&&"day"||Q.getHours()!==n.getHours()&&"hour"||Q.getMinutes()!==n.getMinutes()&&"minute"||Q.getSeconds()!==n.getSeconds()&&"second"||"millisecond";const v=C[n];v<U&&(U=v,y=n)}U<D&&(D=U,d=y)}return d};E.createClassBreakLabel=r;E.createColorStops=
function(b){const {values:k,colors:D,labelIndexes:d,isDate:n,dateFormatOptions:u}=b;return k.map((Q,U)=>{let y=null;if(!d||d.includes(U)){let S;(S=n?L.formatDate(Q,u):B.format(Q))&&(y=g(S,U,k.length-1))}return new F({value:Q,color:D[U],label:y})})};E.createUniqueValueLabel=function(b){const {value:k,domain:D,fieldInfo:d,dateFormatInterval:n}=b;b=String(k);const u=D&&"codedValues"in D&&D.codedValues?D.getName(k):null;u?b=u:"number"===typeof k&&(b=d&&"date"===d.type?L.formatDate(k,n&&L.convertDateFormatToIntlOptions(w[n])):
B.format(k));return b};E.getAttribute=l;E.getAttributes=function(b,k){const D=[];if("class-breaks"===b.type||"heatmap"===b.type)D.push(l(b,"number"));else if("unique-value"===b.type){var d=b.authoringInfo;if(d&&"relationship"===d.type){if(d.field1&&d.field2){var n=d.field2.field;const u=d.field2.normalizationField;D.push(l({field:d.field1.field,normalizationField:d.field1.normalizationField}));D.push(l({field:n,normalizationField:u}))}}else n=b.uniqueValueInfos[0],d=null,n&&n.value&&(n=typeof b.uniqueValueInfos[0].value,
"string"===n||"number"===n)&&(d=n),D.push(l(b,d)),[b.field2,b.field3].forEach(u=>u&&D.push({type:"field",field:u}))}else"attributes"in b&&b.attributes.forEach(u=>D.push(l(u,"number")));(b=k?k(b):"visualVariables"in b?b.visualVariables:null)&&b.forEach(u=>D.push(l(u,"number")));return H.unique(D.filter(Boolean),(u,Q)=>"field"===u.type&&"field"===Q.type?u.field===Q.field:"normalized-field"===u.type&&"normalized-field"===Q.type?u.field===Q.field&&u.normalizationField===Q.normalizationField:"expression"===
u.type&&"expression"===Q.type?u.expression===Q.expression:!1)};E.getColorsFromRenderer=function(b){return e.apply(this,arguments)};E.setLabelsForClassBreaks=function(b){const k=b.classBreakInfos,D=b.normalizationType;let d=[];if(k&&k.length)if("standard-deviation"===b.classificationMethod)P.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(b.round){d.push(k[0].minValue);for(const n of k)d.push(n.maxValue);d=B.round(d);k.forEach((n,
u)=>{n.label=r({minValue:0===u?d[0]:d[u],maxValue:d[u+1],isFirstBreak:0===u,normalizationType:D})})}else k.forEach((n,u)=>{n.label=r({minValue:n.minValue,maxValue:n.maxValue,isFirstBreak:0===u,normalizationType:D})})};E.timelineDateFormatOptions=q;E.updateClassBreak=function(b){if("standard-deviation"===b.classificationMethod)P.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");else{var k=b.classBreaks,D=b.change,d=D.index;D=D.value;var n=
k.length,u=-1,Q=-1;0===d?u=d:d===n?Q=d-1:(Q=d-1,u=d);b=b.normalizationType;d=null;-1<u&&u<n&&(d=k[u],d.minValue=D,d.label=r({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===u,normalizationType:b}));-1<Q&&Q<n&&(d=k[Q],d.maxValue=D,d.label=r({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===Q,normalizationType:b}))}};E.updateColorStops=function(b){const {stops:k,changes:D,isDate:d,dateFormatOptions:n}=b,u=k.map(U=>U.value);b=[];for(const U of D)b.push(U.index),u[U.index]=U.value;const Q=
B.round(u,{indexes:b});k.forEach((U,y)=>{U.value=u[y];if(null!=U.label){let S,v=null;(S=d?L.formatDate(Q[y],n):B.format(Q[y]))&&(v=g(S,y,k.length-1));U.label=v}})};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/Card":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/Handles ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../symbols/support/svgUtils ../../../symbols/support/utils ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/decorators/accessibleHandler ../../support/decorators/messageBundle ../../support/jsxFactory ../../support/widgetUtils ../../../intl/substitute".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c,e,g,r,l,P,O,C,w,b,k,D){var d;(function(u){u.Auto="auto";u.Stack="stack";u.SideBySide="side-by-side"})(d||(d={}));const n=window.devicePixelRatio;H=function(u){function Q(y,S){y=u.call(this,y,S)||this;y._handles=new q;y._hasIndicators=!1;y._selectedSectionName=null;y._sectionNames=[];y._sectionMap=new Map;y.activeLayerInfos=null;y.headingLevel=3;y.layout=d.Stack;y.messages=null;y.messagesCommon=null;y.type="card";y.view=null;return y}E._inheritsLoose(Q,u);var U=Q.prototype;
U.initialize=function(){this.own(h.watch(()=>this.activeLayerInfos,y=>{this._handles.removeAll();this._watchForSectionChanges(y)}))};U.destroy=function(){this._handles.destroy();this._handles=null};U.render=function(){this._hasIndicators=this.layout===d.Auto&&768>=this.view.container.clientWidth||this.layout===d.Stack;var y=this.activeLayerInfos;y=y&&y.toArray().map(t=>this._renderLegendForLayer(t)).filter(t=>!!t);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||
(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const S=this._sectionNames.length;var v=this._sectionNames.map((t,Y)=>{Y=D.substitute(this.messagesCommon.pagination.pageText,{index:Y+1,total:S});return b.tsx("div",{key:t,role:"tab",id:t,"aria-label":Y,"aria-controls":`${t}-panel`,"aria-selected":(this._selectedSectionName===t).toString(),tabIndex:this._selectedSectionName===t?0:-1,title:Y,onclick:this._selectSection,onkeydown:this._focusSection,
bind:this,class:this.classes("esri-legend--card__carousel-indicator",{["esri-legend--card__carousel-indicator--activated"]:this._selectedSectionName===t}),"data-section-name":t})});v=this._hasIndicators&&1<S?b.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},v):null;y=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):y&&y.length?y:null;return b.tsx("div",{class:this.classes("esri-legend--card",{["esri-legend--stacked"]:this._hasIndicators})},
y?y:b.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend),v)};U._selectSection=function(y){if(y=y.target.getAttribute("data-section-name"))this._selectedSectionName=y};U._focusSection=function(y){switch(y.key){case "ArrowLeft":case "ArrowRight":this._switchSectionOnArrowPress(y);break;case "Enter":case " ":this._selectSection(y)}};U._switchSectionOnArrowPress=function(y){const S=y.key,v="ArrowLeft"===S?-1:1;y=y.target.getAttribute("data-section-name");y=this._sectionNames.indexOf(y);
const t=this._sectionNames;let Y=null;-1!==y&&(t[y+v]?Y=document.getElementById(t[y+v]):"ArrowLeft"===S?Y=document.getElementById(t[t.length-1]):"ArrowRight"===S&&(Y=document.getElementById(t[0])),Y&&Y.focus())};U._watchForSectionChanges=function(y){this._generateSectionNames();y&&(y.forEach(S=>{const v=`activeLayerInfo-${S.layer.uid}-version-change`;this._handles.remove(v);this._watchForSectionChanges(S.children);this._handles.add(h.watch(()=>S.version,()=>this._generateSectionNames()),v)}),this._handles.remove("activeLayerInfos-collection-change"),
this._handles.add(y.on("change",()=>this._watchForSectionChanges(y)),"activeLayerInfos-collection-change"))};U._generateSectionNames=function(){this._sectionNames.length=0;this._selectedSectionName=null;this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)};U._getSectionName=function(y,S,v){return`${this.id}${y.uid}-type-${S.type}-${v}`};U._generateSectionNamesForActiveLayerInfo=function(y){y.children.forEach(this._generateSectionNamesForActiveLayerInfo,
this);y.legendElements&&y.legendElements.forEach((S,v)=>{this._sectionNames.push(this._getSectionName(y.layer,S,v))})};U._renderLegendForLayer=function(y){if(!y.ready)return null;if(y.children.length){var S=y.children.map(v=>this._renderLegendForLayer(v)).toArray();return b.tsx("div",{key:y.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},b.tsx("div",{class:"esri-legend--card__service-caption-container"},y.title),S)}{if((S=y.legendElements)&&!S.length)return null;
const v=S.some(t=>"relationship-ramp"===t.type);S=S.map((t,Y)=>this._renderLegendForElement(t,y,Y,v)).filter(t=>!!t);return S.length?b.tsx("div",{key:y.layer.uid,class:this.classes("esri-legend--card__service",{["esri-legend--card__group-layer-child"]:!!y.parent})},b.tsx("div",{class:"esri-legend--card__service-caption-container"},b.tsx("div",{class:"esri-legend--card__service-caption-text"},y.title)),b.tsx("div",{class:"esri-legend--card__service-content"},S)):null}};U._renderLegendForElement=function(y,
S,v,t=!1){var Y="color-ramp"===y.type,K="opacity-ramp"===y.type,T="size-ramp"===y.type;const f=S.layer;var x=null;"string"===typeof y.title?x=y.title:y.title&&(x=y.title,Y=P.getTitle(this.messages,x,Y||K),x=x.title?`${x.title} (${Y})`:Y);v=this._getSectionName(f,y,v);Y=this._hasIndicators?b.tsx("div",null,b.tsx(O.Heading,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},S.title),b.tsx(O.Heading,{level:O.incrementHeadingLevel(this.headingLevel),class:"esri-legend--card__layer-caption"},
x)):x?b.tsx(O.Heading,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},x):null;x=S.effectList;K=null;"symbol-table"===y.type?(T=y.infos.map((I,Z)=>this._renderLegendForElementInfo(I,S,y.legendType,Z)).filter(I=>!!I),T.length&&(K=b.tsx("div",{class:this.classes({["esri-legend--card__label-container"]:!(T[0].properties.classes&&T[0].properties.classes["esri-legend--card__symbol-row"])&&!t,["esri-legend--card__relationship-label-container"]:t})},T))):"color-ramp"===y.type||"opacity-ramp"===
y.type||"heatmap-ramp"===y.type?K=this._renderLegendForRamp(y,f.opacity,x):T?K=this._renderSizeRamp(y,f.opacity):"pie-chart-ramp"===y.type?K=this._renderPieChartRamp(y):"relationship-ramp"===y.type?K=r.renderRelationshipRamp(y,this.id,f.opacity,x):"univariate-above-and-below-ramp"===y.type?K=this._renderUnivariateAboveAndBelowRamp(y,f.opacity,x):"univariate-color-size-ramp"===y.type&&(K=this._renderUnivariateColorSizeRamp(y,f.opacity,x));if(!K)return null;t=b.tsx("div",{key:v,class:"esri-legend--card__section",
id:`${v}-panel`,role:"tabpanel","aria-labelledby":v,tabIndex:0},[Y,K]);this._sectionMap.set(v,t);return t};U._renderPieChartRamp=function(y){return b.tsx("div",{class:"esri-legend--card__pie-chart-ramp-preview",bind:y.preview,afterCreate:P.attachToNode})};U._renderUnivariateAboveAndBelowRamp=function(y,S,v){const {sizeRampElement:t,colorRampElement:Y}=l.getUnivariateAboveAndBelowRampElements(y,S,"horizontal");if(!t)return null;y=l.getUnivariateSizeRampSize(t,"full",!0,"horizontal");var K=l.getUnivariateColorRampSize(t,
"above",!0,"horizontal"),T=l.getUnivariateColorRampSize(t,"below",!0,"horizontal");K=l.getUnivariateColorRampPreview(Y,{width:K,height:12,rampAlignment:"horizontal",opacity:S,type:"above",effectList:v});S=l.getUnivariateColorRampPreview(Y,{width:T,height:12,rampAlignment:"horizontal",opacity:S,type:"below",effectList:v});v=l.getUnivariateColorRampMargin(t,"card");T=t.infos.map(I=>I.label);const f=T.length-1;T=T.map((I,Z)=>0===Z||Z===f?b.tsx("div",{key:Z},I):null);const x={marginTop:"3px",display:"flex"};
k.isRTL(this.container)?x.marginRight=`${v}px`:x.marginLeft=`${v}px`;y={width:`${y}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return b.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},b.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},t.infos.map((I,Z)=>b.tsx("div",{key:Z,class:"esri-legend--card__symbol",
bind:I.preview,afterCreate:P.attachToNode}))),K?b.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:x,key:"color-ramp-preview"},b.tsx("div",{bind:K,afterCreate:P.attachToNode}),b.tsx("div",{bind:S,afterCreate:P.attachToNode})):null,b.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},b.tsx("div",{class:"esri-legend__ramp-labels",styles:y},T)))};U._renderUnivariateColorSizeRamp=function(y,S,v){const {sizeRampElement:t,colorRampElement:Y}=l.getUnivariateColorSizeRampElements(y,
"horizontal");if(!t)return null;y=l.getUnivariateSizeRampSize(t,"full",!1,"horizontal");var K=l.getUnivariateColorRampSize(t,"full",!1,"horizontal");S=l.getUnivariateColorRampPreview(Y,{width:K,height:12,rampAlignment:"horizontal",opacity:S,type:"full",effectList:v});const T=l.getUnivariateColorRampMargin(t,"card"),f=t.infos.length-1;v=t.infos.map((x,I)=>0===I||I===f?b.tsx("div",{key:I},x.label):null);K={marginTop:"3px",display:"flex"};k.isRTL(this.container)?K.marginRight=`${T}px`:K.marginLeft=`${T}px`;
y={width:`${y}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return b.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},b.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},t.infos.map((x,I)=>b.tsx("div",{key:I,class:"esri-legend--card__symbol",bind:x.preview,afterCreate:P.attachToNode}))),b.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",
styles:K,key:"color-ramp-preview"},b.tsx("div",{bind:S,afterCreate:P.attachToNode})),b.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},b.tsx("div",{class:"esri-legend__ramp-labels",styles:y},v)))};U._renderLegendForElementInfo=function(y,S,v,t){var Y=S.layer;if(y.type)return this._renderLegendForElement(y,S,t);v=P.isImageryStretchedLegend(Y,v);if(y.preview){var K;if(!y.symbol||!y.symbol.type.includes("simple-fill")){if(!y.label)return b.tsx("div",{key:t,bind:y.preview,afterCreate:P.attachToNode});
S={["esri-legend--card__symbol-cell"]:this._hasIndicators};return b.tsx("div",{key:t,class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__symbol-row"]:this._hasIndicators})},b.tsx("div",{class:this.classes(S),bind:y.preview,afterCreate:P.attachToNode}),b.tsx("div",{class:this.classes("esri-legend--card__image-label",{["esri-legend--card__label-cell"]:this._hasIndicators})},P.getTitle(this.messages,y.label,!1)||""))}let f=v=255,x=255,I=0,Z=255,ea=255,da=255,G=0;const M=y.symbol.color&&
y.symbol.color.a,X=y.symbol.outline&&y.symbol.outline.color&&y.symbol.outline.color.a;M&&(v=y.symbol.color.r,f=y.symbol.color.g,x=y.symbol.color.b,I=y.symbol.color.a*Y.opacity);X&&(Z=y.symbol.outline.color.r,ea=y.symbol.outline.color.g,da=y.symbol.outline.color.b,G=y.symbol.outline.color.a*Y.opacity);var T=(Y=null!=(T=null==(K=y.symbol.color)?void 0:K.isBright)?T:!0)?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";S={background:M?`rgba(${v}, ${f}, ${x}, ${I})`:"none",color:Y?"black":"white",textShadow:`-1px -1px 0 ${T},\n                                              1px -1px 0 ${T},\n                                              -1px 1px 0 ${T},\n                                              1px 1px 0 ${T}`,
border:X?`1px solid rgba(${Z}, ${ea}, ${da}, ${G})`:"none",filter:e.getCSSFilterFromEffectList(S.effectList)};return b.tsx("div",{key:t,class:"esri-legend--card__layer-row"},b.tsx("div",{class:"esri-legend--card__label-element",styles:S}," ",y.label," "))}if(y.src)return S=this._renderImage(y,Y,v),b.tsx("div",{key:t,class:"esri-legend--card__layer-row"},S,b.tsx("div",{class:"esri-legend--card__image-label"},y.label||""))};U._renderImage=function(y,S,v){const {label:t,src:Y,opacity:K}=y;v={["esri-legend--card__imagery-layer-image--stretched"]:v,
["esri-legend--card__symbol"]:!v};S={opacity:`${null!=K?K:S.opacity}`};return b.tsx("img",{alt:P.getTitle(this.messages,t,!1),src:Y,border:0,width:y.width,height:y.height,class:this.classes(v),styles:S})};U._renderSizeRampLines=function(y){y=y.infos;var S=y[0],v=y[y.length-1],t=S.symbol;y=this._hasIndicators;S=L.pt2px(S.size+S.outlineSize)*n;v=L.pt2px(v.size+v.outlineSize)*n;const Y=y?S:S+50*n,K=y?S/2+50*n:S;var T;t?t.type.includes("3d")?(T=t.symbolLayers&&t.symbolLayers.length)?(T=t.symbolLayers.getItemAt(T-
1).get("resource.primitive"),T="triangle"===T||"cone"===T||"tetrahedron"===T):T=void 0:T="triangle"===t.style:T=void 0;if(t)if(t.type.includes("3d")){var f=t.symbolLayers&&t.symbolLayers.length;f?(t=t.symbolLayers.getItemAt(f-1),t=t.resource&&t.resource.primitive,t="circle"===t||"cross"===t||"kite"===t||"sphere"===t||"cube"===t||"diamond"===t):t=void 0}else t=t.style,t="circle"===t||"diamond"===t||"cross"===t;else t=void 0;f=document.createElement("canvas");f.width=Y;f.height=K;f.style.width=`${f.width/
n}px`;f.style.height=`${f.height/n}px`;const x=f.getContext("2d");if(y){x.beginPath();var I=Y/2-v/2;x.moveTo(0,0);x.lineTo(I,K);I=Y/2+v/2;x.moveTo(Y,0);x.lineTo(I,K)}else x.beginPath(),x.moveTo(0,K/2-v/2),x.lineTo(Y,0),x.moveTo(0,K/2+v/2),x.lineTo(Y,K);x.strokeStyle="#ddd";x.stroke();return b.tsx("div",{bind:f,afterCreate:P.attachToNode,styles:y?{display:"flex",marginTop:`-${T?0:t?S/2:0}px`,marginBottom:`-${T?v:t?v/2:0}px`}:{display:"flex",marginRight:`-${T?0:t?S/2:0}px`,marginLeft:`-${T?0:t?v/2:
0}px`}})};U._renderSizeRamp=function(y,S){var v=y.infos;const t=v[0].label,Y=v[v.length-1].label;let K=v[0].preview;v=v[v.length-1].preview;const T=this._hasIndicators,f={"flex-direction":T?"column":"row-reverse"};K&&(K=K.cloneNode(!0),K.style.display="flex");v&&(v=v.cloneNode(!0),v.style.display="flex");S={opacity:null!=S?`${S}`:""};return b.tsx("div",{class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__size-ramp-row"]:T})},b.tsx("div",{class:"esri-legend--card__ramp-label"},
T?t:Y),b.tsx("div",{class:"esri-legend--card__size-ramp-container",styles:f},b.tsx("div",{bind:K,afterCreate:P.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:S}),this._renderSizeRampLines(y),b.tsx("div",{bind:v,afterCreate:P.attachToNode,class:"esri-legend--card__size-ramp-container",styles:S})),b.tsx("div",{class:"esri-legend--card__ramp-label"},T?Y:t))};U._renderLegendForRamp=function(y,S,v){var t=y.infos;const Y="heatmap-ramp"===y.type,K=t.length-1;var T=2<K&&!Y?25*K:100,f=T+
20;const x=t.slice(0).reverse();x.forEach((ea,da)=>{ea.offset=Y?ea.ratio:da/K});const I=x.length-1;y=(y=0!==x.length%2&&x[x.length/2|0])&&b.tsx("div",{class:"esri-legend--card__interval-separators-container"},b.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),b.tsx("div",{class:"esri-legend--card__ramp-label"},y.label));const Z=t[t.length-1].label;t=t[0].label;T=c.renderSVG([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:x[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,
y:0,width:T,height:25},fill:{type:"linear",x1:10,y1:0,x2:T+10,y2:0,colors:x},stroke:{width:0}},{shape:{type:"path",path:`M${T+10} 0 L${f} ${12.5} L${T+10} ${25} Z`},fill:x[I].color,stroke:{width:0}}]],f,25);({messages:f}=this);S={filter:e.getCSSFilterFromEffectList(v),opacity:null==S?null:`${S}`};return b.tsx("div",{class:"esri-legend--card__layer-row",styles:{justifyContent:"center"}},b.tsx("div",{class:"esri-legend--card__ramp-label"},Y?f[Z]:Z),b.tsx("div",{class:"esri-legend--card__symbol-container"},
b.tsx("div",{styles:S},T),y),b.tsx("div",{class:"esri-legend--card__ramp-label"},Y?f[t]:t))};return Q}(g);J.__decorate([B.property()],H.prototype,"activeLayerInfos",void 0);J.__decorate([B.property()],H.prototype,"headingLevel",void 0);J.__decorate([B.property()],H.prototype,"layout",void 0);J.__decorate([B.property(),w.messageBundle("esri/widgets/Legend/t9n/Legend")],H.prototype,"messages",void 0);J.__decorate([B.property(),w.messageBundle("esri/t9n/common")],H.prototype,"messagesCommon",void 0);
J.__decorate([B.property({readOnly:!0})],H.prototype,"type",void 0);J.__decorate([B.property()],H.prototype,"view",void 0);J.__decorate([C.accessibleHandler()],H.prototype,"_selectSection",null);return H=J.__decorate([A.subclass("esri.widgets.Legend.styles.Card")],H)})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(E,
J,H,q,h){function L(R,p,A){const c=`${A}_arrowStart`;A=`${A}_arrowEnd`;R="left"===R;const e={markerStart:null,markerEnd:null};switch(p){case "HL":R?e.markerStart=`url(#${A})`:e.markerEnd=`url(#${c})`;break;case "LL":e.markerStart=`url(#${A})`;break;case "LH":R?e.markerEnd=`url(#${c})`:e.markerStart=`url(#${A})`;break;default:e.markerEnd=`url(#${c})`}return e}function B(R,p,A,c,e=60){const {focus:g,numClasses:r,colors:l,rotation:P}=R;R=!!g;const O=Math.sqrt(e**2+e**2)+(R?0:5),C=[],w=[];var b=[],k=
(e||75)/r;for(var D=0;D<r;D++){var d=D*k;for(var n=0;n<r;n++){var u=n*k;const Q=J.generateFillAttributes(l[D][n]),U=J.generateStrokeAttributes(null);u={type:"rect",x:u,y:d,width:k,height:k};C.push(J.renderDef(Q));w.push(J.renderShape(u,Q.fill,U,null));b.push(J.getBoundingBox(u))}}k=null;R||(k="margin: -15px -15px -18px -15px");D=L("left",g,p);d=L("right",g,p);n=J.computeBBox(b);b=J.getTransformMatrix(n,O,O,0,!1,P,!1);n=J.getTransformMatrix(n,O,O,0,!1,R?-45:null,!1);A={filter:H.getCSSFilterFromEffectList(c),
opacity:null==A?null:`${A}`};return h.tsx("div",{styles:A,class:R?F.diamondMidColRamp:F.squareTableCell},h.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:O,height:O,style:k},h.tsx("defs",null,h.tsx("marker",{id:`${p}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},h.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),h.tsx("marker",{id:`${p}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",
markerUnits:"strokeWidth",orient:"auto"},h.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),C),h.tsx("g",{transform:b},w),h.tsx("g",{transform:n},h.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":D.markerStart,"marker-end":D.markerEnd,x1:-10,y1:e-15,x2:-10,y2:15}),h.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":d.markerStart,"marker-end":d.markerEnd,x1:15,y1:e+10,x2:e-15,y2:e+10}))))}const F={diamondContainer:"esri-relationship-ramp--diamond__container",
diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",
squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};E.renderRelationshipRamp=function(R,p,A,c){const {focus:e,labels:g}=R,r=!!e;R=B(R,p,A,c);p={justifyContent:"center"};
A=q.isRTL();return r?h.tsx("div",{class:F.diamondContainer,styles:p},h.tsx("div",{class:F.diamondLeftCol},A?g.right:g.left),h.tsx("div",{class:F.diamondMidCol},h.tsx("div",{class:F.diamondMidColLabel},g.top),R,h.tsx("div",{class:F.diamondMidColLabel},g.bottom)),h.tsx("div",{class:F.diamondRightCol},A?g.left:g.right)):h.tsx("div",{class:F.squareTable},h.tsx("div",{class:F.squareTableRow},h.tsx("div",{class:q.classes(F.squareTableCell,F.squareTableLabel,F.squareTableLabelRightBottom)},A?g.top:g.left),
h.tsx("div",{class:F.squareTableCell}),h.tsx("div",{class:q.classes(F.squareTableCell,F.squareTableLabel,F.squareTableLabelLeftBottom)},A?g.left:g.top)),h.tsx("div",{class:F.squareTableRow},h.tsx("div",{class:F.squareTableCell}),R,h.tsx("div",{class:F.squareTableCell})),h.tsx("div",{class:F.squareTableRow},h.tsx("div",{class:q.classes(F.squareTableCell,F.squareTableLabel,F.squareTableLabelRightTop)},A?g.right:g.bottom),h.tsx("div",{class:F.squareTableCell}),h.tsx("div",{class:q.classes(F.squareTableCell,
F.squareTableLabel,F.squareTableLabelLeftTop)},A?g.bottom:g.right)))};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/support/univariateUtils":function(){define("exports ../../../../core/screenUtils ../../../../libs/maquette/projection ../../../../libs/maquette/projector ../../../../symbols/support/symbolUtils ../../../support/widgetUtils ../../../support/jsxFactory".split(" "),function(E,J,H,q,h,L,B){function F(g="vertical"){return"vertical"===
g?B.tsx("svg",{height:"4",width:"10"},B.tsx("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:"stroke:rgb(200, 200, 200);stroke-width:1"})):B.tsx("svg",{height:"10",width:"10"},B.tsx("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:"stroke:rgb(200, 200, 200);stroke-width:1"}))}function R(g,r="vertical"){const l=document.createElement("div");l.style.height="20px";l.className=e.univariateAboveAndBelowSymbol;null!=g&&(l.style.opacity=g.toString());c.append(l,F.bind(null,r));return l}function p(g,r,l="vertical",P){g.infos.forEach((O,
C)=>{if(P&&2===C)O.preview=R(r,l);else{C=J.pt2px(O.size)+("horizontal"===l?20:10);const w="div"===O.preview.tagName.toLowerCase(),b=w?O.preview:document.createElement("div");b.className=e.univariateAboveAndBelowSymbol;"horizontal"===l?b.style.width=`${C}px`:b.style.height=`${C}px`;w||b.appendChild(O.preview);O.preview=b}})}function A(g,r,l,P="vertical"){let O=0;g=g.infos;const C=Math.floor(g.length/2);var w="full"===r||"above"===r?0:C;for(r="full"===r||"below"===r?g.length-1:C;w<=r;w++)if(l&&w===
C)O+="horizontal"===P?10:20;else{const b=J.pt2px(g[w].size)+("horizontal"===P?20:10);O+=b}return Math.round(O)}const c=q.createProjector(),e={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};E.getUnivariateAboveAndBelowRampElements=function(g,r,l="vertical"){var P=g.infos;g=P.find(({type:w})=>"size-ramp"===w);P=P.find(({type:w})=>"color-ramp"===w);g&&(g={...g},g.infos=[...g.infos],p(g,r,l,!0));P&&(P={...P},P.infos=[...P.infos]);if("horizontal"===
l){var O,C;null==(O=g)?void 0:O.infos.reverse();null==(C=P)?void 0:C.infos.reverse()}return{sizeRampElement:g,colorRampElement:P}};E.getUnivariateColorRampMargin=function(g,r="classic"){g=g.infos;return"classic"===r?(J.pt2px(g[0].size)+10)/2:(J.pt2px(g[0].size)-J.pt2px(g[g.length-1].size))/2};E.getUnivariateColorRampPreview=function(g,r){if(!g)return null;g=g.infos.map(l=>l.color);g=h.renderColorRampPreviewHTML("full"===r.type?g:"above"===r.type?g.slice(0,3):g.slice(2,5),{width:r.width,height:r.height,
align:r.rampAlignment,effectList:r.effectList});g.className=e.colorRamp;null!=r.opacity&&(g.style.opacity=r.opacity.toString());return g};E.getUnivariateColorRampSize=function(g,r,l,P="vertical"){const O=A(g,r,l,P);g=g.infos;var C=Math.floor(g.length/2);const w="full"===r||"above"===r?0:C;C="full"===r||"below"===r?g.length-1:C;l=l?"vertical"===P?20:10:0;P="vertical"===P?10*("full"===r?2:1):20*("full"===r?2:1);return Math.round(O-(J.pt2px("full"===r?g[w].size+g[C].size:"above"===r?g[w].size:g[C].size)/
2+l/2+P/2))};E.getUnivariateColorSizeRampElements=function(g,r="vertical"){var l=g.infos;g=l.find(({type:C})=>"size-ramp"===C);l=l.find(({type:C})=>"color-ramp"===C);g&&(g={...g},g.infos=[...g.infos],p(g,null,r,!1));l&&(l={...l},l.infos=[...l.infos]);if("horizontal"===r){var P,O;null==(P=g)?void 0:P.infos.reverse();null==(O=l)?void 0:O.infos.reverse()}return{sizeRampElement:g,colorRampElement:l}};E.getUnivariateSizeRampSize=A;Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/styleUtils":function(){define(["exports","../../../intl","../../../intl/substitute"],function(E,J,H){E.attachToNode=function(q){q.appendChild(this)};E.getTitle=function(q,h,L){if(h){if("string"===typeof h||"number"===typeof h)return h;if("value"in h||"unit"in h)return H.substitute(q.dotValue,h);if("colorName"in h||"bandName"in h)return q[h.colorName]+": "+(q[h.bandName]||h.bandName);if("showCount"in h)return h.showCount?q.clusterCountTitle:null;var B=null;L?B=h.ratioPercentTotal?
"showRatioPercentTotal":h.ratioPercent?"showRatioPercent":h.ratio?"showRatio":h.normField?"showNormField":h.field?"showField":null:L||(B=h.normField?"showNormField":h.normByPct?"showNormPct":h.field?"showField":null);return B?H.substitute("showField"===B?"{field}":q[B],{field:h.field,normField:h.normField}):null}};E.isImageryStretchedLegend=function(q,h){return!!(h&&"Stretched"===h&&10.3<=q.version&&"esri.layers.ImageryLayer"===q.declaredClass)};E.isRendererTitle=function(q,h){return!h};Object.defineProperties(E,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],function(E,J,H,q){const h={heading:"esri-widget__heading"};E.CSS=h;E.Heading=function(L,B){const F=J.clamp(Math.ceil(L.level),1,6),R=`h${F}`;delete L.level;return q.tsx(R,{...L,class:H.classes(h.heading,L.class),role:"heading","aria-level":String(F)},B)};E.incrementHeadingLevel=function(L,B=1){return J.clamp(Math.ceil(L+
B),1,6)};Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/Classic":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/widgetUtils ../../support/decorators/messageBundle ../../support/jsxFactory ../../../intl/number".split(" "),
function(E,J,H,q,h,L,B,F,R,p,A,c,e,g,r,l,P){const O={display:"flex",alignItems:"flex-start"},C={marginLeft:"3px"},w={display:"table-cell",verticalAlign:"middle"};H=function(b){function k(d,n){d=b.call(this,d,n)||this;d.activeLayerInfos=null;d.headingLevel=3;d.messages=null;d.type="classic";return d}E._inheritsLoose(k,b);var D=k.prototype;D.render=function(){var d=this.activeLayerInfos;d=d&&d.toArray().map(n=>this._renderLegendForLayer(n)).filter(n=>!!n);return l.tsx("div",null,d&&d.length?d:l.tsx("div",
{class:"esri-legend__message"},this.messages.noLegend))};D._renderLegendForLayer=function(d){if(!d.ready)return null;var n=!!d.children.length;const u=`${"esri-legend__"}${d.layer.uid}-version-${d.version}`,Q=d.title?e.Heading({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},d.title):null;if(n)return n=d.children.map(U=>this._renderLegendForLayer(U)).toArray(),l.tsx("div",{key:u,class:this.classes("esri-legend__service","esri-legend__group-layer")},
Q,n);if((n=d.legendElements)&&!n.length)return null;n=n.map(U=>this._renderLegendForElement(U,d.layer,d.effectList)).filter(U=>!!U);return n.length?l.tsx("div",{key:u,class:this.classes("esri-legend__service",{["esri-legend__group-layer-child"]:!!d.parent}),tabIndex:0},Q,l.tsx("div",{class:"esri-legend__layer"},n)):null};D._renderLegendForElement=function(d,n,u,Q){var U="color-ramp"===d.type,y="opacity-ramp"===d.type;const S="size-ramp"===d.type;let v=null;if("symbol-table"===d.type||S){var t=d.infos.map(K=>
this._renderLegendForElementInfo(K,n,u,S,d.legendType)).filter(K=>!!K);t.length&&(v=l.tsx("div",{class:"esri-legend__layer-body"},t))}else"color-ramp"===d.type||"opacity-ramp"===d.type||"heatmap-ramp"===d.type||"stretch-ramp"===d.type?v=this._renderLegendForRamp(d,n.opacity):"relationship-ramp"===d.type?v=p.renderRelationshipRamp(d,this.id,n.opacity,u):"pie-chart-ramp"===d.type?v=this._renderPieChartRamp(d):"univariate-above-and-below-ramp"===d.type?v=this._renderUnivariateAboveAndBelowRamp(d,n.opacity,
u):"univariate-color-size-ramp"===d.type&&(v=this._renderUnivariateColorSizeRamp(d,n.opacity,u));if(!v)return null;t=d.title;var Y=null;"string"===typeof t?Y=t:t&&(Y=c.getTitle(this.messages,t,U||y),Y=c.isRendererTitle(t,U||y)&&t.title?`${t.title} (${Y})`:Y);U=Q?"esri-legend__layer-child-table":"esri-legend__layer-table";y=Y?l.tsx("div",{class:"esri-legend__layer-caption"},Y):null;return l.tsx("div",{class:this.classes(U,{["esri-legend__layer-table--size-ramp"]:S||!Q})},y,v)};D._renderPieChartRamp=
function(d){return l.tsx("div",{bind:d.preview,afterCreate:c.attachToNode})};D._renderUnivariateAboveAndBelowRamp=function(d,n,u){const {sizeRampElement:Q,colorRampElement:U}=A.getUnivariateAboveAndBelowRampElements(d,n);if(!Q)return null;var y=A.getUnivariateColorRampSize(Q,"above",!0);d=A.getUnivariateColorRampSize(Q,"below",!0);const S=A.getUnivariateColorRampPreview(U,{width:12,height:y,rampAlignment:"vertical",opacity:n,type:"above",effectList:u});n=A.getUnivariateColorRampPreview(U,{width:12,
height:d,rampAlignment:"vertical",opacity:n,type:"below",effectList:u});var v=A.getUnivariateColorRampMargin(Q);const t=Q.infos.map(x=>x.label);u=t.map((x,I)=>{const Z=2===I;return 0===I?l.tsx("div",{key:I,class:x?S?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},x):Z?l.tsx("div",null):null});const Y=t.length-1,K=Math.floor(t.length/2),T=t.map((x,I)=>{const Z=I===Y;return I===K||Z?l.tsx("div",{key:I,class:x?S?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":
null},x):null}),f={display:"table-cell",verticalAlign:"middle"};v={marginTop:`${v}px`};y={height:`${y}px`};d={height:`${d}px`};return l.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:O},l.tsx("div",{class:"esri-legend__layer-body"},Q.infos.map((x,I)=>l.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},l.tsx("div",{class:"esri-legend__symbol",styles:f,bind:x.preview,afterCreate:c.attachToNode}),S||0!==I%2?null:l.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},
t[I])))),S?l.tsx("div",{styles:v,key:"color-ramp-preview"},l.tsx("div",{styles:C},l.tsx("div",{styles:w},l.tsx("div",{class:"esri-legend__ramps",bind:S,afterCreate:c.attachToNode})),l.tsx("div",{styles:w},l.tsx("div",{class:"esri-legend__ramp-labels",styles:y},u))),l.tsx("div",{styles:C},l.tsx("div",{styles:w},l.tsx("div",{class:"esri-legend__ramps",bind:n,afterCreate:c.attachToNode})),l.tsx("div",{styles:w},l.tsx("div",{class:"esri-legend__ramp-labels",styles:d},T)))):null)};D._renderUnivariateColorSizeRamp=
function(d,n,u){const {sizeRampElement:Q,colorRampElement:U}=A.getUnivariateColorSizeRampElements(d);if(!Q)return null;var y=A.getUnivariateColorRampMargin(Q);d=A.getUnivariateColorRampSize(Q,"full",!1);n=A.getUnivariateColorRampPreview(U,{width:12,height:d,rampAlignment:"vertical",opacity:n,type:"full",effectList:u});const S=Q.infos.length-1;u=Q.infos.map((t,Y)=>0===Y||Y===S?l.tsx("div",{key:Y,class:t.label?U?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},t.label):
null);const v={display:"table-cell",verticalAlign:"middle"};y={marginTop:`${y}px`};d={height:`${d}px`};return l.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:O},l.tsx("div",{class:"esri-legend__layer-body"},Q.infos.map(t=>l.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},l.tsx("div",{class:"esri-legend__symbol",styles:v,bind:t.preview,afterCreate:c.attachToNode})))),l.tsx("div",{styles:y,key:"color-ramp-preview"},l.tsx("div",{styles:C},l.tsx("div",
{styles:w},l.tsx("div",{class:"esri-legend__ramps",bind:n,afterCreate:c.attachToNode})),l.tsx("div",{styles:w},l.tsx("div",{class:"esri-legend__ramp-labels",styles:d},u)))))};D._renderLegendForRamp=function(d,n){const u=d.infos,Q="heatmap-ramp"===d.type,U="stretch-ramp"===d.type,y=d.preview;y.className=`${"esri-legend__color-ramp"} ${"opacity-ramp"===d.type?"esri-legend__opacity-ramp":""}`;null!=n&&(y.style.opacity=n.toString());d=u.map(S=>l.tsx("div",{class:S.label?"esri-legend__ramp-label":null},
Q?this.messages[S.label]||S.label:U?this._getStretchStopLabel(S):S.label));n={height:y.style.height};return l.tsx("div",{class:"esri-legend__layer-row"},l.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",styles:{width:"24px"}},l.tsx("div",{class:"esri-legend__ramps",bind:y,afterCreate:c.attachToNode})),l.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},l.tsx("div",{class:"esri-legend__ramp-labels",styles:n},d)))};D._getStretchStopLabel=function(d){return d.label?
this.messages[d.label]+": "+("string"===typeof d.value?d.value:P.formatNumber(d.value,{style:"decimal",notation:d.value.toString().includes("e")?"scientific":"standard"})):""};D._renderLegendForElementInfo=function(d,n,u,Q,U){if(d.type)return this._renderLegendForElement(d,n,u,!0);u=null;U=c.isImageryStretchedLegend(n,U);d.preview?u=l.tsx("div",{class:"esri-legend__symbol",bind:d.preview,afterCreate:c.attachToNode}):d.src&&(u=this._renderImage(d,n,U));if(!u)return null;n={["esri-legend__imagery-layer-info--stretched"]:U};
return l.tsx("div",{class:"esri-legend__layer-row"},l.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",{["esri-legend__imagery-layer-info--stretched"]:U,["esri-legend__size-ramp"]:!U&&Q})},u),l.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",n)},c.getTitle(this.messages,d.label,!1)||""))};D._renderImage=function(d,n,u){const {label:Q,src:U,opacity:y}=d;u={["esri-legend__imagery-layer-image--stretched"]:u,["esri-legend__symbol"]:!u};
n={opacity:`${null!=y?y:n.opacity}`};return l.tsx("img",{alt:c.getTitle(this.messages,Q,!1),src:U,border:0,width:d.width,height:d.height,class:this.classes(u),styles:n})};return k}(R);J.__decorate([q.property()],H.prototype,"activeLayerInfos",void 0);J.__decorate([q.property()],H.prototype,"headingLevel",void 0);J.__decorate([q.property(),r.messageBundle("esri/widgets/Legend/t9n/Legend")],H.prototype,"messages",void 0);J.__decorate([q.property({readOnly:!0})],H.prototype,"type",void 0);return H=J.__decorate([F.subclass("esri.widgets.Legend.styles.Classic")],
H)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),function(E,J,H,
q,h,L,B,F,R,p,A,c,e,g,r,l,P,O){B=function(C){function w(k,D){k=C.call(this,k,D)||this;k._handles=new H;k.activeLayerInfos=null;k.basemapLegendVisible=!1;k.groundLegendVisible=!1;k.headingLevel=3;k.hideLayersNotInCurrentView=!1;k.keepCacheOnDestroy=!1;k.respectLayerVisibility=!0;k.iconClass="esri-icon-layer-list";k.label=void 0;k.layerInfos=null;k.messages=null;k.style=new r;k.view=null;k.viewModel=new e;return k}E._inheritsLoose(w,C);var b=w.prototype;b.initialize=function(){this.own([h.on(()=>this.view,
"resize",()=>this.scheduleRender()),h.on(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),h.watch(()=>this.headingLevel,k=>{const {style:D}=this;D&&(D.headingLevel=k)}),h.watch(()=>this.style,(k,D)=>{D&&k!==D&&D.destroy();k&&(k.activeLayerInfos=this.activeLayerInfos,"card"===k.type&&(k.view=this.view),k.headingLevel=this.headingLevel)},h.initial)])};b.destroy=function(){this._handles=q.destroyMaybe(this._handles)};b.castStyle=function(k){if(k instanceof
g||k instanceof r)return k;if("string"===typeof k)return"card"===k?new g:new r;if(k&&"string"===typeof k.type){const D={...k};delete D.type;return new ("card"===k.type?g:r)(D)}return new r};b.render=function(){return O.tsx("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof r?"esri-widget--panel":null)},this.style.render())};b._refreshActiveLayerInfos=function(k){this._handles.removeAll();k.forEach(D=>this._renderOnActiveLayerInfoChange(D));this.scheduleRender()};b._renderOnActiveLayerInfoChange=
function(k){var D=h.watch(()=>k.version,()=>this.scheduleRender());this._handles.add(D,`version_${k.layer.uid}`);D=h.on(()=>k.children,"change",()=>k.children.forEach(d=>this._renderOnActiveLayerInfoChange(d)),h.initial);this._handles.add(D,`children_${k.layer.uid}`);k.children.forEach(d=>this._renderOnActiveLayerInfoChange(d))};return w}(c);J.__decorate([L.aliasOf("viewModel.activeLayerInfos")],B.prototype,"activeLayerInfos",void 0);J.__decorate([L.aliasOf("viewModel.basemapLegendVisible")],B.prototype,
"basemapLegendVisible",void 0);J.__decorate([L.aliasOf("viewModel.groundLegendVisible")],B.prototype,"groundLegendVisible",void 0);J.__decorate([p.property()],B.prototype,"headingLevel",void 0);J.__decorate([L.aliasOf("viewModel.hideLayersNotInCurrentView")],B.prototype,"hideLayersNotInCurrentView",void 0);J.__decorate([L.aliasOf("viewModel.keepCacheOnDestroy")],B.prototype,"keepCacheOnDestroy",void 0);J.__decorate([L.aliasOf("viewModel.respectLayerVisibility")],B.prototype,"respectLayerVisibility",
void 0);J.__decorate([p.property()],B.prototype,"iconClass",void 0);J.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0);J.__decorate([L.aliasOf("viewModel.layerInfos")],B.prototype,"layerInfos",void 0);J.__decorate([p.property(),P.messageBundle("esri/widgets/Legend/t9n/Legend")],B.prototype,"messages",void 0);J.__decorate([p.property()],B.prototype,"style",void 0);J.__decorate([R.cast("style")],B.prototype,"castStyle",null);J.__decorate([L.aliasOf("viewModel.view")],
B.prototype,"view",void 0);J.__decorate([p.property()],B.prototype,"viewModel",void 0);return B=J.__decorate([A.subclass("esri.widgets.Legend")],B)});