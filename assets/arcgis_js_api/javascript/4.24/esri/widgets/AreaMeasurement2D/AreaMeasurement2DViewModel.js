// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../properties/defaultUnit ./AreaMeasurement2DTool ../support/InteractiveToolViewModel".split(" "),function(l,c,q,d,e,m,f,b,x,y,r,t,u,n,v){const w={handleWidth:8,
handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]};b=function(p){function k(a){a=p.call(this,a)||this;a.supportedViewType="2d";a.unsupportedErrorMessage="AreaMeasurement2DViewModel is only supported in 2D views.";a._handles=new q;a.geodesicDistanceThreshold=1E5;a.measurement=null;a.measurementLabel=null;a.palette=w;return a}l._inheritsLoose(k,p);var g=k.prototype;g.initialize=function(){this._handles.add([e.watch(()=>{var a;return null==(a=d.unwrap(this.view))?
void 0:a.spatialReference},()=>this.clear()),e.watch(()=>this.unit,a=>{d.isSome(this.tool)&&(this.tool.unit=a)},e.initial),e.watch(()=>this.geodesicDistanceThreshold,a=>{d.isSome(this.tool)&&(this.tool.geodesicDistanceThreshold=a)},e.initial),e.watch(()=>this.palette,a=>{d.isSome(this.tool)&&(this.tool.palette=a)},e.initial)])};g.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};g.start=function(){var a=l._asyncToGenerator(function*(){const h=this.view;d.isSome(h)&&(yield e.whenOnce(()=>
h.ready),n.isProjectionEngineRequired(h.spatialReference)&&(yield t.load()));this.createTool({interactive:!0})});return function(){return a.apply(this,arguments)}}();g.clear=function(){this.removeTool()};g.constructTool=function(){return new n.AreaMeasurement2DTool({view:d.unwrap(this.view),visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})};g._validateUnit=function(a){return this.unitOptions.includes(a)?a:this.unitOptions.includes(this.defaultUnit)?
this.defaultUnit:this.unitOptions[0]};g._validateUnits=function(a=[]){a=a.filter(h=>m.measurementAreaUnits.includes(h));return 0===a.length?m.measurementAreaUnits.slice():a};l._createClass(k,[{key:"state",get:function(){return this.disabled||d.isNone(this.view)||!n.isSupported(this.view.spatialReference)?"disabled":d.isSome(this.tool)&&this.tool.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(a){void 0===
a?this._clearOverride("unit"):this._override("unit",this._validateUnit(a))}},{key:"unitOptions",get:function(){return m.measurementAreaUnits},set:function(a){void 0===a?this._clearOverride("unitOptions"):this._override("unitOptions",this._validateUnits(a))}}]);return k}(v.InteractiveToolViewModel);c.__decorate([f.property(u.defaultUnitPropertyMetadata)],b.prototype,"defaultUnit",void 0);c.__decorate([f.property({type:Number})],b.prototype,"geodesicDistanceThreshold",void 0);c.__decorate([f.property({readOnly:!0,
aliasOf:"tool.measurement"})],b.prototype,"measurement",void 0);c.__decorate([f.property({readOnly:!0,aliasOf:"tool.measurementLabel"})],b.prototype,"measurementLabel",void 0);c.__decorate([f.property()],b.prototype,"palette",void 0);c.__decorate([f.property({readOnly:!0})],b.prototype,"state",null);c.__decorate([f.property({type:String})],b.prototype,"unit",null);c.__decorate([f.property({type:[String]})],b.prototype,"unitOptions",null);return b=c.__decorate([r.subclass("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],
b)});