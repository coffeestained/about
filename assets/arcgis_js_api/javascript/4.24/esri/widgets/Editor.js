// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.enabled=!1;return A}d._inheritsLoose(H,L);return H}(b);
l.__decorate([F.property({type:Boolean,nonNullable:!0})],b.prototype,"enabled",void 0);return b=l.__decorate([O.subclass("esri.views.interactive.sketch.SketchLabelOptions")],b)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){let L=function(A){function m(n){n=A.call(this,n)||this;n.mode="absolute-height";return n}d._inheritsLoose(m,A);return m}(b);l.__decorate([F.property({type:String,nonNullable:!0})],L.prototype,"mode",void 0);L=l.__decorate([O.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],L);let H=function(A){function m(){var n=A.apply(this,arguments)||this;n.distance=!0;n.elevation=!0;n.size=!0;n.scale=!0;n.rotation=!0;n.orientation=!0;n.totalLength=!0;n.area=!0;n.radius=
!0;return n}d._inheritsLoose(m,A);return m}(b);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"distance",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"elevation",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"size",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"scale",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"rotation",void 0);l.__decorate([F.property({type:Boolean,
nonNullable:!0})],H.prototype,"orientation",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"totalLength",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"area",void 0);l.__decorate([F.property({type:Boolean,nonNullable:!0})],H.prototype,"radius",void 0);H=l.__decorate([O.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],H);b=function(A){function m(n){n=A.call(this,n)||this;n.enabled=!1;n.elevation=new L;n.visibleElements=
new H;n.visualVariables=null;return n}d._inheritsLoose(m,A);return m}(b);l.__decorate([F.property({type:Boolean,nonNullable:!0})],b.prototype,"enabled",void 0);l.__decorate([F.property({type:L,nonNullable:!0})],b.prototype,"elevation",void 0);l.__decorate([F.property({type:H,nonNullable:!0})],b.prototype,"visibleElements",void 0);l.__decorate([F.property()],b.prototype,"visualVariables",void 0);return b=l.__decorate([O.subclass("esri.widgets.Sketch.SketchTooltipOptions")],b)})},"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){b=function(m){function n(y){y=m.call(this,y)||this;y.enabled=!1;y.enabledToggled=!1;y.selfEnabled=!0;y.featureEnabled=!0;y.featureSources=new F;y.distance=A.defaults.distance;y.touchSensitivityMultiplier=A.defaults.touchSensitivityMultiplier;return y}d._inheritsLoose(n,m);d._createClass(n,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},
{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]);return n}(b);l.__decorate([f.property()],b.prototype,"enabled",void 0);l.__decorate([f.property()],b.prototype,"enabledToggled",void 0);l.__decorate([f.property()],b.prototype,"selfEnabled",void 0);l.__decorate([f.property()],b.prototype,"featureEnabled",void 0);l.__decorate([f.property({type:F.ofType(H)})],b.prototype,"featureSources",void 0);l.__decorate([f.property()],b.prototype,"distance",void 0);
l.__decorate([f.property()],b.prototype,"touchSensitivityMultiplier",void 0);l.__decorate([f.property({readOnly:!0})],b.prototype,"effectiveEnabled",null);l.__decorate([f.property({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null);l.__decorate([f.property({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);return b=l.__decorate([L.subclass("esri.views.interactive.snapping.SnappingOptions")],b)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.layer=null;A.enabled=!0;A.updating=!1;A.availability=1;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property({constructOnly:!0})],b.prototype,"layer",void 0);l.__decorate([F.property()],b.prototype,"enabled",void 0);l.__decorate([F.property()],b.prototype,"updating",void 0);l.__decorate([F.property()],b.prototype,"availability",void 0);return b=l.__decorate([O.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
b)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,l,b,F,f,J,I){let O=function(L){function H(){var A=L.apply(this,arguments)||this;A.enabled=!0;return A}l._inheritsLoose(H,L);return H}(f.JSONSupport);b.__decorate([J.property({type:Boolean})],O.prototype,
"enabled",void 0);O=b.__decorate([I.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],O);f=function(L){function H(A){A=L.call(this,A)||this;A.lineSnapper=new O;A.parallelLineSnapper=new O;A.rightAngleSnapper=new O;A.rightAngleTriangleSnapper=new O;A.shortLineThreshold=15;A.distance=5;A.pointThreshold=1E-6;A.intersectionParallelLineThreshold=1E-6;A.parallelLineThreshold=1E-6;A.touchSensitivityMultiplier=1.5;A.pointOnLineThreshold=1E-6;A.orange=new F([255,127,0]);A.lineHintWidthReference=
3;A.lineHintWidthTarget=3;A.lineHintFadedExtensions=.3;A.parallelLineHintWidth=2;A.parallelLineHintLength=24;A.parallelLineHintOffset=1.5;A.rightAngleHintSize=24;A.rightAngleHintOutlineSize=1.5;return A}l._inheritsLoose(H,L);return H}(f.JSONSupport);b.__decorate([J.property({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"lineSnapper",void 0);b.__decorate([J.property({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"parallelLineSnapper",void 0);b.__decorate([J.property({type:O,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleSnapper",void 0);b.__decorate([J.property({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleTriangleSnapper",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"shortLineThreshold",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"distance",void 0);b.__decorate([J.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"pointThreshold",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"intersectionParallelLineThreshold",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"parallelLineThreshold",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"touchSensitivityMultiplier",
void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],f.prototype,"pointOnLineThreshold",void 0);b.__decorate([J.property({type:F,nonNullable:!0})],f.prototype,"orange",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthReference",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthTarget",void 0);b.__decorate([J.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],f.prototype,"lineHintFadedExtensions",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"parallelLineHintWidth",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],f.prototype,"parallelLineHintLength",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],f.prototype,"parallelLineHintOffset",
void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],f.prototype,"rightAngleHintSize",void 0);b.__decorate([J.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],f.prototype,"rightAngleHintOutlineSize",void 0);f=b.__decorate([I.subclass("esri.views.interactive.snapping.Settings.Defaults")],f);b=new f;d.defaults=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x){const C={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},h=window.CSS;I=function(g){function r(p,k){p=g.call(this,p,k)||this;p.abilities=null;p.displayType="auto";p.graphic=null;p.label=void 0;p.messages=null;p.messagesUnits=null;p.selectedFile=null;p.submitting=!1;p.viewModel=new n;p.visibleElements={...C};p._supportsImageOrientation=h&&h.supports&&h.supports("image-orientation",
"from-image");p._addAttachmentForm=null;p._updateAttachmentForm=null;return p}d._inheritsLoose(r,g);var u=r.prototype;u.initialize=function(){this.own([F.on(()=>{var p;return null==(p=this.viewModel)?void 0:p.attachmentInfos},"change",()=>this.scheduleRender()),F.watch(()=>{var p;return null==(p=this.viewModel)?void 0:p.mode},()=>this._modeChanged(),F.initial)])};u.castVisibleElements=function(p){return{...C,...p}};u.addAttachment=function(){const {_addAttachmentForm:p,viewModel:k}=this;this._set("submitting",
!0);this._set("error",null);return k.addAttachment(p).then(D=>{this._set("submitting",!1);this._set("error",null);k.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new b("attachments:add-attachment",this.messages.addErrorMessage,D));throw D;})};u.deleteAttachment=function(p){const {viewModel:k}=this;this._set("submitting",!0);this._set("error",null);return k.deleteAttachment(p).then(D=>{this._set("submitting",!1);this._set("error",null);k.mode="view";return D}).catch(D=>
{this._set("submitting",!1);this._set("error",new b("attachments:delete-attachment",this.messages.deleteErrorMessage,D));throw D;})};u.updateAttachment=function(){const {viewModel:p}=this,{_updateAttachmentForm:k}=this;this._set("submitting",!0);this._set("error",null);return p.updateAttachment(k).then(D=>{this._set("submitting",!1);this._set("error",null);p.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new b("attachments:update-attachment",this.messages.updateErrorMessage,
D));throw D;})};u.render=function(){const {submitting:p,viewModel:k}=this,{state:D}=k;return x.tsx("div",{class:this.classes("esri-attachments","esri-widget")},p?this.renderProgressBar():null,"loading"===D?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};u.renderErrorMessage=function(){const {error:p,visibleElements:k}=this;return p&&k.errorMessage?x.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},p.message):null};u.renderAttachments=function(){const {mode:p,
activeAttachmentInfo:k}=this.viewModel;return"add"===p?this.renderAddForm():"edit"===p?this.renderDetailsForm(k):this.renderAttachmentContainer()};u.renderLoading=function(){return x.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},x.tsx("div",{class:"esri-attachments__loader"}))};u.renderProgressBar=function(){return this.visibleElements.progressBar?x.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};u.renderAddForm=function(){const {submitting:p,selectedFile:k}=
this;var D=p||!k,N=this.visibleElements.cancelAddButton?x.tsx("button",{type:"button",bind:this,disabled:p,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",p&&"esri-button--disabled")},this.messages.cancel):null;D=this.visibleElements.addSubmitButton?x.tsx("button",{type:"submit",disabled:D,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:D})},this.messages.add):
null;const S=k?x.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},k.name):null;N=x.tsx("form",{bind:this,afterCreate:G.storeNode,afterRemoved:G.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},x.tsx("fieldset",{class:"esri-attachments__file-fieldset"},S,x.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},k?this.messages.changeFile:this.messages.selectFile,x.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),D,N);return x.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},N)};u.renderDetailsForm=function(p){const {visibleElements:k,viewModel:D,selectedFile:N,submitting:S}=this,{contentType:P,size:v,url:K}=p;var {abilities:e}=D,q=S||!N,w=e.editing&&e.operations.delete&&k.deleteButton?x.tsx("button",{key:"delete-button",type:"button",disabled:S,bind:this,onclick:z=>this._submitDeleteAttachment(z,p),class:this.classes("esri-button",
"esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:S})},this.messages.delete):null;q=e.editing&&e.operations.update&&k.updateButton?x.tsx("button",{disabled:q,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:q})},this.messages.update):null;const R=this.visibleElements.cancelUpdateButton?x.tsx("button",{disabled:S,key:"cancel-button",type:"button",bind:this,
onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:S})},this.messages.cancel):null;var Q=N?x.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},N.name):null;e=e.editing&&e.operations.update?x.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},Q,x.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,
x.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null;Q=x.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},x.tsx("label",null,f.formatFileSize(this.messagesUnits,v)));const c=x.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},x.tsx("label",null,P));w=x.tsx("form",{bind:this,afterCreate:G.storeNode,afterRemoved:G.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:this._submitUpdateAttachment},x.tsx("div",{class:"esri-attachments__metadata"},Q,c),e,x.tsx("div",{class:"esri-attachments__actions"},w,R,q));return x.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},x.tsx("a",{class:"esri-attachments__item-link",href:K,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:p,size:400}),x.tsx("div",{class:"esri-attachments__item-link-overlay"},x.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},x.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},x.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),x.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),w)};u.renderImageMask=function({attachmentInfo:p,size:k}){var {supportsResizeAttachments:D}=this.viewModel;const {contentType:N,name:S,url:P}=p,v=D&&y.isSupportedImage(N);p=(p=this._getCSSTransform(p,v))?{transform:p,"image-orientation":"none"}:{};const K=P.includes("?")?
"\x26":"?";k=v?`${P}${K}w=${k}`:y.getIconPath(N);D={["esri-attachments__image--resizable"]:D};return x.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!v},"esri-attachments__item-mask")},x.tsx("img",{styles:p,alt:S,src:k,class:this.classes(D,"esri-attachments__image")}))};u.renderAttachmentInfo=function({attachmentInfo:p,displayType:k}){var {viewModel:D}=this;({abilities:D}=D);const {name:N,url:S}=p;k=this.renderImageMask({attachmentInfo:p,size:"list"===k?48:400});var P=D.editing?
x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",G.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;P=x.tsx("label",{class:"esri-attachments__label"},x.tsx("span",{class:"esri-attachments__filename"},N||this.messages.noTitle),P);k=[k,P];D=D.editing?x.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":p.id,
onclick:()=>this._startEditAttachment(p),type:"button"},k):x.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:S,target:"_blank"},k);return x.tsx("li",{class:"esri-attachments__item",key:p},D)};u.renderAttachmentContainer=function(){const {effectiveDisplayType:p,viewModel:k,visibleElements:D}=this,{attachmentInfos:N,abilities:S}=k;var P=N&&N.length;const v={["esri-attachments__container--list"]:"preview"!==p,["esri-attachments__container--preview"]:"preview"===p},K=S.editing&&
S.operations.add&&D.addButton?x.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;P=P?x.tsx("ul",{class:"esri-attachments__items"},N.toArray().map(e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:p}))):x.tsx("div",{class:"esri-widget__content--empty"},
this.messages.noAttachments);return x.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",v)},P,K)};u._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};u._handleFileInputChange=function(p){p=(p=p.target)&&p.files&&p.files.item(0);this._set("selectedFile",p)};u._submitDeleteAttachment=function(p,k){p.preventDefault();this.deleteAttachment(k)};u._submitAddAttachment=function(p){p.preventDefault();this.addAttachment()};u._submitUpdateAttachment=
function(p){p.preventDefault();this.updateAttachment()};u._startEditAttachment=function(p){const {viewModel:k}=this;k.activeAttachmentInfo=p;k.mode="edit"};u._startAddAttachment=function(){this.viewModel.mode="add"};u._cancelForm=function(p){p.preventDefault();this.viewModel.mode="view"};u._getCSSTransform=function(p,k){({orientationInfo:p}=p);return!this._supportsImageOrientation&&k&&p?[p.rotation?`rotate(${p.rotation}deg)`:"",p.mirrored?"scaleX(-1)":""].join(" "):""};d._createClass(r,[{key:"effectiveDisplayType",
get:function(){const {displayType:p}=this;return p&&"auto"!==p?p:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return r}(m);l.__decorate([J.aliasOf("viewModel.abilities")],I.prototype,"abilities",void 0);l.__decorate([H.property()],I.prototype,"displayType",void 0);l.__decorate([H.property({readOnly:!0})],I.prototype,"effectiveDisplayType",null);l.__decorate([J.aliasOf("viewModel.graphic")],I.prototype,"graphic",void 0);l.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],I.prototype,"label",void 0);l.__decorate([H.property(),E.messageBundle("esri/widgets/Attachments/t9n/Attachments")],I.prototype,"messages",void 0);l.__decorate([H.property(),E.messageBundle("esri/core/t9n/Units")],I.prototype,"messagesUnits",void 0);l.__decorate([H.property({readOnly:!0})],I.prototype,"selectedFile",void 0);l.__decorate([H.property({readOnly:!0})],I.prototype,"submitting",void 0);l.__decorate([H.property({readOnly:!0})],I.prototype,"error",void 0);l.__decorate([H.property({type:n})],
I.prototype,"viewModel",void 0);l.__decorate([H.property()],I.prototype,"visibleElements",void 0);l.__decorate([L.cast("visibleElements")],I.prototype,"castVisibleElements",null);return I=l.__decorate([A.subclass("esri.widgets.Attachments")],I)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(d,l,b,F,f,J,I,O){function L(y,G,E){return y.units[G][E]}function H(y,G,E,x=2,C="abbr"){return`${O.formatNumber(G,
{minimumFractionDigits:x,maximumFractionDigits:x})} ${L(y,E,C)}`}function A(y,G,E,x=2,C="abbr"){return`${O.formatNumber(G,{minimumFractionDigits:x,maximumFractionDigits:x,signDisplay:"exceptZero"})} ${L(y,E,C)}`}function m(y,G,E){if(G===E)return y;switch(E){case "arithmetic":return-y+90;case "geographic":return-y-90}}const n=["B","kB","MB","GB","TB"];d.formatAngleDegrees=function(y,G,E,x,C){y=b.cyclicalDegrees.normalize(m(I.convertUnit(y,G,"degrees"),E,x),0,!0);C=f.unwrapOr(C,2);return O.formatNumber(y,
{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:C,minimumFractionDigits:C})};d.formatDMS=function(y,G,E=2){y=I.convertUnit(y,G,"degrees");G=y-Math.floor(y);y-=G;G*=60;let x=G-Math.floor(G);G-=x;x*=60;return`${y.toFixed()}\u00b0 ${G.toFixed()}' ${x.toFixed(E)}"`};d.formatDecimal=H;d.formatFileSize=function(y,G){let E=0===G?0:Math.floor(Math.log(G)/Math.log(l.ByteSizeUnit.KILOBYTES));E=F.clamp(E,0,n.length-1);G=O.formatNumber(G/l.ByteSizeUnit.KILOBYTES**E,{maximumFractionDigits:2});
return J.replace(y.units.bytes[n[E]],{fileSize:G})};d.formatImperialArea=function(y,G,E,x=2,C="abbr"){const h=I.preferredImperialAreaUnit(G,E);return H(y,I.convertUnit(G,E,h),h,x,C)};d.formatImperialLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredImperialLengthUnit(G,E);return H(y,I.convertUnit(G,E,h),h,x,C)};d.formatImperialRelativeLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredImperialLengthUnit(G,E);return A(y,I.convertUnit(G,E,h),h,x,C)};d.formatImperialRelativeVerticalLength=function(y,
G,E,x=2,C="abbr"){const h=I.preferredImperialVerticalLengthUnit(G,E);return A(y,I.convertUnit(G,E,h),h,x,C)};d.formatImperialVerticalLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredImperialVerticalLengthUnit(G,E);return H(y,I.convertUnit(G,E,h),h,x,C)};d.formatMetricArea=function(y,G,E,x=2,C="abbr"){const h=I.preferredMetricAreaUnit(G,E);return H(y,I.convertUnit(G,E,h),h,x,C)};d.formatMetricLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredMetricLengthUnit(G,E);return H(y,I.convertUnit(G,
E,h),h,x,C)};d.formatMetricRelativeLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredMetricLengthUnit(G,E);return A(y,I.convertUnit(G,E,h),h,x,C)};d.formatMetricRelativeVerticalLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredMetricVerticalLengthUnit(G,E);return A(y,I.convertUnit(G,E,h),h,x,C)};d.formatMetricVerticalLength=function(y,G,E,x=2,C="abbr"){const h=I.preferredMetricVerticalLengthUnit(G,E);return H(y,I.convertUnit(G,E,h),h,x,C)};d.formatRelativeAngleDegrees=function(y,G,E,x,C){E!==
x&&(y=-y);y=I.convertUnit(y,G,"degrees")%360;C=f.unwrapOr(C,2);return O.formatNumber(y,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:C,minimumFractionDigits:C,signDisplay:"exceptZero"})};d.formatRelativeDecimal=A;d.unitName=L;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(d){function l(b){return 32+b.length}d.ByteSizeUnit=void 0;(function(b){b[b.KILOBYTES=1024]=
"KILOBYTES";b[b.MEGABYTES=1048576]="MEGABYTES";b[b.GIGABYTES=1073741824]="GIGABYTES"})(d.ByteSizeUnit||(d.ByteSizeUnit={}));d.estimateAttributesObjectSize=function(b){if(!b)return 0;let F=32;for(const f in b)if(b.hasOwnProperty(f)){const J=b[f];switch(typeof J){case "string":F+=l(J);break;case "number":F+=16;break;case "boolean":F+=4}}return F};d.estimateFixedArraySize=function(b,F){return 32+b.length*F};d.estimateNumberByteSize=function(){return 16};d.estimateStringByteSize=l;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E){const x={editing:!1,operations:{add:!0,update:!0,delete:!0}},C=f.ofType(y);F=function(h){function g(u){var p=h.call(this,u)||this;p._getAttachmentsPromise=null;p._attachmentLayer=null;p.abilities={...x};p.activeAttachmentInfo=null;p.attachmentInfos=new C;p.graphic=null;p.mode="view";p.own(O.watch(()=>p.graphic,()=>p._graphicChanged(),O.initial));return p}d._inheritsLoose(g,h);var r=g.prototype;r.destroy=function(){this.graphic=this._attachmentLayer=null};
r.castAbilities=function(u){return{...x,...u}};r.getAttachments=function(){var u=d._asyncToGenerator(function*(){const {_attachmentLayer:p,attachmentInfos:k}=this;if(!p||"function"!==typeof p.queryAttachments)throw new J("invalid-layer","getAttachments(): A valid layer is required.");const D=this._getFeatureId();var N=new G({objectIds:[D],returnMetadata:!0});const S=[];this._getAttachmentsPromise=N=p.queryAttachments(N).then(P=>P[D]||S).catch(()=>S);this.notifyChange("state");N=yield N;k.removeAll();
N.length&&k.addMany(N);this._getAttachmentsPromise=null;this.notifyChange("state");return N});return function(){return u.apply(this,arguments)}}();r.addAttachment=function(){var u=d._asyncToGenerator(function*(p){const {_attachmentLayer:k,attachmentInfos:D,graphic:N,abilities:S}=this;if(!p)throw new J("invalid-attachment","addAttachment(): An attachment is required.",{attachment:p});if(!S.operations.add)throw new J("invalid-abilities","addAttachment(): add abilities are required.");if(!k||"function"!==
typeof k.addAttachment)throw new J("invalid-layer","addAttachment(): A valid layer is required.");p=yield k.addAttachment(N,p).then(P=>this._queryAttachment(P.objectId));D.add(p);return p});return function(p){return u.apply(this,arguments)}}();r.deleteAttachment=function(){var u=d._asyncToGenerator(function*(p){const {_attachmentLayer:k,attachmentInfos:D,graphic:N,abilities:S}=this;if(!p)throw new J("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:p});
if(!S.operations.delete)throw new J("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!k||"function"!==typeof k.deleteAttachments)throw new J("invalid-layer","deleteAttachment(): A valid layer is required.");const P=yield k.deleteAttachments(N,[p.id]).then(()=>p);D.remove(P);return P});return function(p){return u.apply(this,arguments)}}();r.updateAttachment=function(){var u=d._asyncToGenerator(function*(p,k=this.activeAttachmentInfo){const {_attachmentLayer:D,attachmentInfos:N,
graphic:S,abilities:P}=this;if(!p)throw new J("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:p});if(!k)throw new J("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:k});if(!P.operations.update)throw new J("invalid-abilities","updateAttachment(): Update abilities are required.");const v=N.findIndex(K=>K===k);if(!D||"function"!==typeof D.updateAttachment)throw new J("invalid-layer","updateAttachment(): A valid layer is required.");
p=yield D.updateAttachment(S,k.id,p).then(K=>this._queryAttachment(K.objectId));N.splice(v,1,p);return p});return function(p){return u.apply(this,arguments)}}();r._queryAttachment=function(){var u=d._asyncToGenerator(function*(p){if(!p)throw new J("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:k}=this,D=this._getFeatureId();p=new G({objectIds:[D],attachmentsWhere:`AttachmentId=${p}`,returnMetadata:!0});return k.queryAttachments(p).then(N=>N[D][0])});return function(p){return u.apply(this,
arguments)}}();r._getFeatureId=function(){const {_attachmentLayer:u,graphic:p}=this;if(!u||!p)return null;const {objectIdField:k}=u,{attributes:D}=p;return D&&D[k]};r._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};r._setAttachmentLayer=function(){var {graphic:u}=this;this._attachmentLayer=(u=E.getSourceLayer(u))?"scene"===u.type&&I.isSome(u.associatedLayer)?u.associatedLayer:u:null};d._createClass(g,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return g}(F);l.__decorate([L.property()],F.prototype,"abilities",void 0);l.__decorate([m.cast("abilities")],F.prototype,"castAbilities",null);l.__decorate([L.property()],F.prototype,"activeAttachmentInfo",void 0);l.__decorate([L.property({readOnly:!0,type:C})],F.prototype,"attachmentInfos",void 0);l.__decorate([L.property({type:b})],
F.prototype,"graphic",void 0);l.__decorate([L.property()],F.prototype,"mode",void 0);l.__decorate([L.property({readOnly:!0})],F.prototype,"state",null);l.__decorate([L.property({readOnly:!0})],F.prototype,"supportsResizeAttachments",null);return F=l.__decorate([n.subclass("esri.widgets.Attachments.AttachmentsViewModel")],F)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){function m(){m=l._asyncToGenerator(function*(ka,ta){return"function"===typeof ka?ka.call(null,ta):ka});return m.apply(this,arguments)}function n(ka){return ka?Y.test(ka):!1}function y(ka,ta){if(!n(ta)||!ka)return null;const ma=ta.replace(Y,"").toLowerCase();let la;ka.some(pa=>pa.name.toLowerCase()===ma?(la=pa,!0):!1);return la}function G(ka,ta){return(ta=E(ta,ka))?ta.name:ka}function E(ka,ta){return ka&&"function"===typeof ka.getField?ka.getField(ta):null}function x({formattedAttributes:ka,
template:ta,fieldInfoMap:ma}){return`${J.replace(J.replace(ta,la=>{{const pa=ma.get(la.toLowerCase());la=`{${pa&&pa.fieldName||la}}`}return la}),ka).replace(z,"")}`.trim()}function C(ka,ta,ma=!1){const la=ta[ka];"string"===typeof la&&(ma=(ma?encodeURIComponent(la):la).replace(U,"%27"),ta[ka]=ma)}function h(ka,ta=!1){const ma={...ka};Object.keys(ma).forEach(la=>C(la,ma,ta));return ma}function g(ka,ta){return ka.replace(B,(ma,la,pa)=>(ma=E(ta,pa))?`{${ma.name}}`:la)}function r(ka,ta,ma){return(ka=g(ka,
ma))?ka.replace(na,(la,pa,sa)=>{pa=`${pa||sa}`.trim();return J.replace(la,h(ta,pa&&"{"!==pa[0]))}):ka}function u(ka,ta){var ma=ta.fieldName,la=p(ta.fieldInfos,ma),pa=null==la?void 0:la.clone();la=ta.preventPlacesFormatting;ta=ta.layer;var sa=E(ta,ma);if(pa&&"date"===(null==sa?void 0:sa.type)){sa=pa.format||new H;sa.dateFormat=sa.dateFormat||"short-date-short-time";var da;if(!(da=!(null!=ta&&ta.layer)&&"feature"===(null==ta?void 0:ta.type)&&ta.datesInUnknownTimezone)){if(da=!(null==ta||!ta.layer))da=
ta.layer,da="map-image"===(null==da?void 0:da.type);da=da&&ta.layer.datesInUnknownTimezone}sa.dateTimeFormatOptions=da?{timeZone:"UTC"}:null;pa.format=sa}pa=pa&&pa.format;if("string"===typeof ka&&L.isRasterPixelValueField(ma)&&pa)return pa.formatRasterPixelValue(ka);"string"!==typeof ka||!pa||null!=pa.dateFormat||null==pa.places&&null==pa.digitSeparator||(ma=Number(ka),isNaN(ma)||(ka=ma));return"string"===typeof ka||null==ka||null==pa?N(ka):la?O.formatNumber(ka,{...O.convertNumberFormatToIntlOptions(pa),
minimumFractionDigits:0,maximumFractionDigits:20}):pa.format(ka)}function p(ka,ta){if(ka&&ka.length&&ta){var ma=ta.toLowerCase(),la=void 0;ka.some(pa=>pa.fieldName&&pa.fieldName.toLowerCase()===ma?(la=pa,!0):!1);return la}}function k({fieldName:ka,graphic:ta,layer:ma}){if(w(ka)||!ma||"function"!==typeof ma.getFeatureType)return null;const {typeIdField:la}=ma;return la&&ka===la?(ka=ma.getFeatureType(ta))?ka.name:null:null}function D({fieldName:ka,value:ta,graphic:ma,layer:la}){return w(ka)||!la||"function"!==
typeof la.getFieldDomain?null:(ka=la.getFieldDomain(ka,{feature:ma}))&&"coded-value"===ka.type?ka.getName(ta):null}function N(ka){return"string"===typeof ka?ka.replace(aa,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ka}function S(ka){const {value:ta,fieldName:ma,fieldInfos:la,fieldInfoMap:pa,layer:sa,graphic:da}=ka;return null==ta?"":(ka=D({fieldName:ma,value:ta,graphic:da,layer:sa}))||(ka=k({fieldName:ma,graphic:da,layer:sa}))?ka:pa.get(ma.toLowerCase())?u(ta,{fieldInfos:la||Array.from(pa.values()),
fieldName:ma,layer:sa}):(ka=sa&&sa.fieldsIndex)&&ka.isDateField(ma)?I.formatDate(ta,ra):N(ta)}function P(ka,ta){return v.apply(this,arguments)}function v(){v=l._asyncToGenerator(function*(ka,ta){var ma,la;const {layer:pa,graphic:sa,outFields:da,objectIds:ea,returnGeometry:ha,spatialReference:ja}=ka;ka=ea[0];if("number"!==typeof ka&&"string"!==typeof ka)return c.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:pa,graphic:sa,objectId:ka,requiredFields:da}),
null;if(null==(ma=pa.capabilities)||null==(la=ma.operations)||!la.supportsQuery)return c.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:pa,graphic:sa,requiredFields:da,returnGeometry:ha}),null;ma=pa.createQuery();ma.objectIds=ea;ma.outFields=null!=da&&da.length?da:[pa.objectIdField];ma.returnGeometry=!!ha;ma.returnZ=!!ha;ma.returnM=!!ha;ma.outSpatialReference=ja;return(yield pa.queryFeatures(ma,ta)).features[0]});return v.apply(this,arguments)}function K(ka){return e.apply(this,
arguments)}function e(){e=l._asyncToGenerator(function*(ka){var ta;if(null==(ta=ka.expressionInfos)||!ta.length)return!1;ta=yield A.loadArcade();({arcadeUtils:{hasGeometryFunctions:ta}}=ta);return ta(ka)});return e.apply(this,arguments)}function q(){q=l._asyncToGenerator(function*({graphic:ka,popupTemplate:ta,layer:ma,spatialReference:la},pa){if(ma&&ta&&("function"===typeof ma.load&&(yield ma.load(pa)),ka.attributes)){var sa=ka.attributes[ma.objectIdField];if(null!=sa){sa=[sa];var da=yield ta.getRequiredFields(ma.fieldsIndex),
ea=L.featureHasFields(da,ka);da=ea?[]:da;ta=ta.returnGeometry||(yield K(ta));if(!ea||ta)if(ma=yield P({layer:ma,graphic:ka,outFields:da,objectIds:sa,returnGeometry:ta,spatialReference:la},pa))ma.geometry&&(ka.geometry=ma.geometry),ma.attributes&&(ka.attributes={...ka.attributes,...ma.attributes})}}});return q.apply(this,arguments)}function w(ka=""){return ka?ka.includes("relationships/"):!1}function R({attributes:ka,graphic:ta,relatedInfo:ma,fieldInfos:la,fieldInfoMap:pa,layer:sa}){ka&&ta&&ma&&Object.keys(ta.attributes).forEach(da=>
{var ea=(ea={layerId:ma.relation.id.toString(),fieldName:da},`${"relationships/"}${ea.layerId}/${ea.fieldName}`);ka[ea]=S({fieldName:ea,fieldInfos:la,fieldInfoMap:pa,layer:sa,value:ta.attributes[da],graphic:ta})})}function Q({attributes:ka,relatedInfo:ta,fieldInfoMap:ma,fieldInfos:la,layer:pa}){ka&&ta&&(ta.relatedFeatures&&ta.relatedFeatures&&ta.relatedFeatures.forEach(sa=>R({attributes:ka,graphic:sa,relatedInfo:ta,fieldInfoMap:ma,fieldInfos:la,layer:pa})),ta.relatedStatsFeatures&&ta.relatedStatsFeatures&&
ta.relatedStatsFeatures.forEach(sa=>R({attributes:ka,graphic:sa,relatedInfo:ta,fieldInfoMap:ma,fieldInfos:la,layer:pa})))}const c=F.getLogger("esri.widgets.Feature.support.featureUtils"),z=/href=(""|'')/gi,B=/(\{([^\{\r\n]+)\})/g,U=/'/g,Y=/^\s*expression\//i,aa=/(\n)/gi,ca=/[\u00A0-\u9999<>&]/gim,na=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ba=/^(?:mailto:|tel:)/,ra=I.convertDateFormatToIntlOptions("short-date-short-time"),ua=ka=>{if(!ka)return!1;ka=ka.toUpperCase();return ka.includes("CURRENT_TIMESTAMP")||
ka.includes("CURRENT_DATE")||ka.includes("CURRENT_TIME")},Ba=({layer:ka,method:ta,query:ma,definitionExpression:la})=>{var pa,sa;null!=(pa=ka.capabilities)&&null!=(sa=pa.query)&&sa.supportsCacheHint&&"attachments"!==ta&&(ka=f.isSome(ma.where)&&ma.where,ta=f.isSome(ma.geometry)&&ma.geometry,ua(la)||ua(ka)||"extent"===(null==ta?void 0:ta.type)||"tile"===ma.resultType||(ma.cacheHint=!0))};d.applyTextFormattingHTML=N;d.createfieldInfoMap=function(ka,ta){const ma=new Map;ka&&ka.forEach(la=>{const pa=G(la.fieldName,
ta);la.fieldName=pa;ma.set(pa.toLowerCase(),la)});return ma};d.fixTokens=g;d.formatAttributes=function({fieldInfos:ka,attributes:ta,layer:ma,graphic:la,fieldInfoMap:pa,relatedInfos:sa}){const da={};null==sa?void 0:sa.forEach(ea=>Q({attributes:da,relatedInfo:ea,fieldInfoMap:pa,fieldInfos:ka,layer:ma}));Object.keys(ta).forEach(ea=>{da[ea]=S({fieldName:ea,fieldInfos:ka,fieldInfoMap:pa,layer:ma,value:ta[ea],graphic:la})});return da};d.formatEditInfo=function(ka,ta){const {creatorField:ma,creationDateField:la,
editorField:pa,editDateField:sa}=ka;if(ta){ka=ta[sa];if("number"===typeof ka)return ta=ta[pa],{type:"edit",date:I.formatDate(ka,ra),user:ta};ka=ta[la];return"number"===typeof ka?(ta=ta[ma],{type:"create",date:I.formatDate(ka,ra),user:ta}):null}};d.formatValueToFieldInfo=u;d.getAllFieldInfos=function(ka){const ta=[];if(!ka)return ta;const {fieldInfos:ma,content:la}=ka;ma&&ta.push(...ma);if(!la||!Array.isArray(la))return ta;la.forEach(pa=>{"fields"===pa.type&&(pa=pa&&pa.fieldInfos)&&ta.push(...pa)});
return ta};d.getFieldInfo=p;d.getFieldInfoLabel=function(ka,ta){return(ta=y(ta,null==ka?void 0:ka.fieldName))?ta.title||null:ka?ka.label||ka.fieldName:null};d.getFixedFieldName=G;d.getFixedFieldNames=function(ka,ta){return ka&&ka.map(ma=>G(ma,ta))};d.getSourceLayer=function(ka){if(!f.isNone(ka))return ka.get("sourceLayer")||ka.get("layer")};d.graphicCallback=function(ka,ta){return m.apply(this,arguments)};d.htmlEntities=function(ka){return ka.replace(ca,ta=>`&#${ta.charCodeAt(0)};`)};d.isExpressionField=
n;d.isRelatedField=w;d.preLayerQueryCallback=({query:ka,layer:ta,method:ma})=>{Ba({layer:ta,method:ma,query:ka,definitionExpression:`${ta.definitionExpression} ${ta.serviceDefinitionExpression}`})};d.preRequestCallback=({queryPayload:ka,layer:ta,method:ma})=>{Ba({layer:ta,method:ma,query:ka,definitionExpression:`${ta.definitionExpression} ${ta.serviceDefinitionExpression}`})};d.queryUpdatedFeature=function(ka,ta){return q.apply(this,arguments)};d.shouldOpenInNewTab=function(ka=""){if(ka)return!ba.test(ka.trim().toLowerCase())};
d.substituteAttributes=x;d.substituteFieldsInLinksAndAttributes=function({attributes:ka,globalAttributes:ta,layer:ma,text:la,expressionAttributes:pa,fieldInfoMap:sa}){return la?x({formattedAttributes:ta,template:r(la,{...ta,...pa,...ka},ma),fieldInfoMap:sa}):""};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(d,l){d.getIconPath=function(b){const F=
l.getAssetUrl("esri/themes/base/images/files/");return b?"text/plain"===b?`${F}text-32.svg`:"application/pdf"===b?`${F}pdf-32.svg`:"text/csv"===b?`${F}csv-32.svg`:"application/gpx+xml"===b?`${F}gpx-32.svg`:"application/x-dwf"===b?`${F}cad-32.svg`:"application/postscript"===b||"application/json"===b||"text/xml"===b||"model/vrml"===b?`${F}code-32.svg`:"application/x-zip-compressed"===b||"application/x-7z-compressed"===b||"application/x-gzip"===b||"application/x-tar"===b||"application/x-gtar"===b||"application/x-bzip2"===
b||"application/gzip"===b||"application/x-compress"===b||"application/x-apple-diskimage"===b||"application/x-rar-compressed"===b||"application/zip"===b?`${F}zip-32.svg`:b.includes("image/")?`${F}image-32.svg`:b.includes("audio/")?`${F}sound-32.svg`:b.includes("video/")?`${F}video-32.svg`:b.includes("msexcel")||b.includes("ms-excel")||b.includes("spreadsheetml")?`${F}excel-32.svg`:b.includes("msword")||b.includes("ms-word")||b.includes("wordprocessingml")?`${F}word-32.svg`:b.includes("powerpoint")||
b.includes("presentationml")?`${F}report-32.svg`:`${F}generic-32.svg`:`${F}generic-32.svg`};d.isSupportedImage=function(b){b=b.toLowerCase();return"image/bmp"===b||"image/emf"===b||"image/exif"===b||"image/gif"===b||"image/x-icon"===b||"image/jpeg"===b||"image/png"===b||"image/tiff"===b||"image/x-wmf"===b};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/FeatureForm":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/compilerUtils ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/domainUtils ../layers/support/fieldUtils ./Widget ./FeatureForm/FeatureFormViewModel ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../chunks/datetime ../intl/locale".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k){const D={datePattern:"D",timePattern:"tt"};F=function(N){function S(v,K){var e=N.call(this,v,K)||this;e._activeDateFieldEdit=null;e._activeInputName=null;e._activeNumberFieldEdit=null;e._fieldFocusNeeded=!1;e._fieldToInitialIncompatibleDomainValue=new Map;e._switchFieldsWithInitialIncompatibleValue=new Set;e._userUpdatedInputFieldNames=new Set;e.feature=null;e.formTemplate=null;e.groupDisplay="all";e.headingLevel=2;e.label=void 0;e.layer=null;
e.messages=null;e.messagesTemplates=null;e.spatialReference=null;e.strict=null;e.viewModel=new x;e._handleRadioInputChange=q=>{e._commitInputValue(q.target)};e._handleInputInput=q=>{e._commitInputValue(q.currentTarget,!0)};e._handleFormKeyDown=e._handleFormKeyDown.bind(l._assertThisInitialized(e));e._handleInputBlur=e._handleInputBlur.bind(l._assertThisInitialized(e));e._handleInputFocus=e._handleInputFocus.bind(l._assertThisInitialized(e));e._handleNumberInputMouseDown=e._handleNumberInputMouseDown.bind(l._assertThisInitialized(e));
e._handleInputKeyDown=e._handleInputKeyDown.bind(l._assertThisInitialized(e));e._handleOptionChange=e._handleOptionChange.bind(l._assertThisInitialized(e));e._handleGroupClick=e._handleGroupClick.bind(l._assertThisInitialized(e));e._handleSubmit=e._handleSubmit.bind(l._assertThisInitialized(e));e._afterInputCreateOrUpdate=e._afterInputCreateOrUpdate.bind(l._assertThisInitialized(e));return e}l._inheritsLoose(S,N);var P=S.prototype;P.initialize=function(){this.own([I.watch(()=>this.feature,()=>{const v=
this._getFocusableInput("forward");this._activeInputName=v&&v.name;this._userUpdatedInputFieldNames.clear();this._fieldToInitialIncompatibleDomainValue.clear();this._switchFieldsWithInitialIncompatibleValue.clear();this._fieldFocusNeeded=!0}),this.on("submit",v=>{if(0<v.invalid.length){const [K]=v.invalid;v.invalid.forEach(e=>this._userUpdatedInputFieldNames.add(e));this._activeInputName=K;this._fieldFocusNeeded=!0;this.scheduleRender()}})])};P.loadDependencies=function(){return Promise.all([new Promise((v,
K)=>d(["../chunks/calcite-combobox"],v,K)),new Promise((v,K)=>d(["../chunks/calcite-combobox-item"],v,K)),new Promise((v,K)=>d(["../chunks/calcite-combobox-item-group"],v,K)),new Promise((v,K)=>d(["../chunks/calcite-input-message"],v,K)),new Promise((v,K)=>d(["../chunks/calcite-switch"],v,K))])};P.destroy=function(){this._userUpdatedInputFieldNames.clear();this._userUpdatedInputFieldNames=null};P.getValues=function(){return null};P.submit=function(){return null};P.render=function(){const {state:v}=
this.viewModel;return u.tsx("div",{class:this.classes("esri-feature-form","esri-widget","esri-widget--panel")},"ready"===v?this.renderForm():null)};P.renderForm=function(){var v,K;const e=null!=(v=this.formTemplate)&&v.title?u.tsx(C.Heading,{key:"title",level:this.headingLevel},this.formTemplate.title):null;v=null!=(K=this.formTemplate)&&K.description?u.tsx("p",{class:"esri-feature-form__description-text",key:"description"},this.formTemplate.description):null;K=e||v?u.tsx("div",{class:"esri-feature-form__form-header"},
e,v):null;return u.tsx("form",{class:"esri-feature-form__form",novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},K,this.renderFields())};P.renderFields=function(){const {viewModel:{inputFields:v}}=this;return v.filter(K=>K.visible).map((K,e)=>K&&K.inputFields?this.renderGroup(K,e):this.renderLabeledField(K))};P.renderGroup=function(v,K){var e;const {description:q,inputFields:w,label:R,state:Q}=v,c=w.filter(ra=>ra.visible);var z=this.viewModel.findField(this._activeInputName);
z=!(!z||z.group!==v);const B=`${this.id}_group_${K}`,U=`${this.id}_group-label_${K}`,Y=`${this.id}_group-description_${K}`,aa=q?u.tsx("p",{class:this.classes("esri-feature-form__group-description","esri-feature-form__description-text"),id:Y},q):null,ca="sequential"===this.groupDisplay,na=ca?z:"expanded"===Q,ba=na?"esri-icon-up":"esri-icon-down";return u.tsx("fieldset",{"aria-expanded":na.toString(),"aria-labelledby":U,"aria-describedby":q?Y:"",class:this.classes("esri-feature-form__group",ca?"esri-feature-form__group--sequential":
null,na?null:"esri-feature-form__group--collapsed",z?"esri-feature-form__group--active":null),"data-group":v,id:B,key:K,onclick:this._handleGroupClick},u.tsx("button",{role:ca?"presentation":void 0,class:"esri-feature-form__group-header",type:"button",tabIndex:ca?-1:0},u.tsx("div",{class:"esri-feature-form__group-title"},u.tsx(C.Heading,{class:"esri-feature-form__group-label",id:U,level:null!=(e=this.formTemplate)&&e.title?C.incrementHeadingLevel(this.headingLevel):this.headingLevel},R),aa),ca?null:
u.tsx("span",{class:this.classes(ba,"esri-feature-form__group-toggle-icon")})),c.map(ra=>this.renderLabeledField(ra)))};P._getFocusableInput=function(v,K){var e=this.viewModel.allInputFields;e="forward"===v?e:e.slice().reverse();K?K&&K.inputFields?v=e.indexOf(K.inputFields[0]):(this._isInputFieldInGroup(K)&&"collapsed"===K.group.state?({inputFields:K}=K.group,v="forward"===v?K[K.length-1]:K[0]):v=K,v=e.indexOf(v)+1):v=0;for(;v<e.length;v++)if(K=e[v],K.visible)return K;return null};P.renderLabeledField=
function(v){const {feature:K,label:e,layer:q,type:w}=v;return u.tsx("label",{key:`${q.id}-${K.uid}-${v.name}`,class:"esri-feature-form__label"},[e,"unsupported"!==w?this.renderInputField(v):this.renderUnsupportedField(v),this.renderAuxiliaryText(v)])};P.renderInputField=function(v){const {domain:K,name:e,type:q,value:w}=v,R=this.getCommonInputProps(v);if("coded-value"===(null==K?void 0:K.type)){if(this._inputFieldHasInputType(v,"switch")){const {fieldElement:Q}=v;if(this._switchFieldsWithInitialIncompatibleValue.has(e)||
null==w||Q.input.onValue!==w&&Q.input.offValue!==w)this._switchFieldsWithInitialIncompatibleValue.add(e);else return this.renderSwitchInputField(v,R)}return"radio-buttons"===v.inputType?this.renderRadioButtonsInputField(v,K.codedValues.map(({code:Q,name:c})=>({value:Q,name:c})),R):this.renderSelectInputField(v,this._getFieldValueOptions(e,K),R)}return"datetime-picker"===v.inputType||"date"===q?this.renderDateInputField(v,R):"number"===q?u.tsx("input",{type:"number",...R,value:J.isSome(this._activeNumberFieldEdit)&&
this._activeNumberFieldEdit.fieldName===v.name?this._activeNumberFieldEdit.value:`${R.value}`}):"text-area"===v.inputType?u.tsx("textarea",{...R}):u.tsx("input",{type:"text",...R})};P._parseDateTime=function(v,K,e){if(e){var q;v=p.DateTime.fromJSDate(this._parseDate(v,e));K=p.DateTime.fromMillis(null!=(q=K.value)?q:Date.now());v="date"===e?v.set({hour:K.hour,minute:K.minute,second:K.second}):v.set({day:K.day,month:K.month,year:K.year});return v.isValid?v.toMillis():null}e=p.DateTime.fromJSDate(this._parseDate(v));
return e.isValid?e.toMillis():null};P.renderDateInputField=function(v,K){const {value:e,includeTime:q}=v,{date:w,time:R}=this._formatDate(0);var Q=`${this.id}-${K.key}`;const c=`${Q}-date`;Q=`${Q}-time`;const {_activeDateFieldEdit:z}=this;let {date:B,time:U}=this._formatDate(e);if((null==z?void 0:z.fieldName)===v.name){var Y,aa,ca,na;B=null!=(Y=null==(aa=z.date.input)?void 0:aa.value)?Y:B;U=null!=(ca=null==(na=z.time.input)?void 0:na.value)?ca:U}return u.tsx("div",{key:`${K.key}-date`,class:"esri-feature-form__date-input-container"},
u.tsx("div",{class:this.classes("esri-feature-form__date-input-part",q?null:"esri-feature-form__date-input-part--lone")},u.tsx("input",{"aria-label":v.label,"aria-describedby":c,type:"text",...K,"data-date-part":"date",class:this.classes(K.class,"esri-feature-form__input--date"),value:B}),u.tsx("div",{class:"esri-feature-form__date-format-hint",id:c},w)),q?u.tsx("div",{class:"esri-feature-form__date-input-part",key:"time-input"},u.tsx("input",{"aria-describedby":Q,"aria-label":v.label,type:"text",
...K,"data-date-part":"time",class:this.classes(K.class,"esri-feature-form__input--time"),value:U}),u.tsx("div",{class:"esri-feature-form__date-format-hint",id:Q},R)):null)};P.renderUnsupportedField=function(v){v=this.getCommonInputProps(v);return u.tsx("input",{afterCreate:v.afterCreate,afterUpdate:v.afterUpdate,class:this.classes("esri-input","esri-feature-form__input","esri-feature-form__input--disabled"),onfocus:v.onfocus,readOnly:!0,tabIndex:v.tabIndex,type:"text",value:v.value,["data-field-name"]:v["data-field-name"]})};
P.renderSelectInputField=function(v,K,e){const {value:q}=v,{messages:w,messagesTemplates:R}=this;var Q=K.map(B=>B.map(U=>u.tsx("calcite-combobox-item",{value:`${U.value}`,"text-label":U.name,key:`#${U.value}`,selected:q===U.value})));const [c,z]=Q;this._registerIncompatibleValue(q,K.flat(),v,B=>{z.unshift(u.tsx("calcite-combobox-item",{value:`${B}`,"text-label":`${B}`,key:"incompatible-option",readOnly:!0}))});K=0<z.length?[u.tsx("calcite-combobox-item-group",{key:"recommended",label:w.recommended},
c),u.tsx("calcite-combobox-item-group",{key:"other",label:R.other},z)]:c;Q=J.isNone(v.fieldElement)||this._inputFieldHasInputType(v,"combo-box")&&v.fieldElement.input.showNoValueOption;!v.required&&Q&&(v=this._inputFieldHasInputType(v,"combo-box")&&v.fieldElement.input.noValueOptionLabel||this.messages.empty,K.unshift(u.tsx("calcite-combobox-item",{value:"","text-label":this.messages.empty,key:"empty-option"},v)));return u.tsx("calcite-combobox",{...e,"selection-mode":"single",disabled:e.readOnly,
allowCustomValues:!1,onCalciteComboboxChange:B=>this._handleOptionChange(B.target)},K)};P._registerIncompatibleValue=function(v,K,e,q){const w=this._fieldToInitialIncompatibleDomainValue,R=w.has(e.name);if(R||null!=v&&""!==v&&!K.some(Q=>Q.value===v)||R)R||w.set(e.name,v),null==q?void 0:q(w.get(e.name))};P.renderRadioButtonsInputField=function(v,K,e){const {value:q}=v,w=K.map(R=>this.renderRadioButton({key:R.name,label:R.name,name:v.name,value:R.value,selected:R.value===q,props:e}));this._registerIncompatibleValue(q,
K,v);K=J.isNone(v.fieldElement)||this._inputFieldHasInputType(v,"radio-buttons")&&v.fieldElement.input.showNoValueOption;!v.required&&K&&(K=this._inputFieldHasInputType(v,"radio-buttons")&&v.fieldElement.input.noValueOptionLabel||this.messages.empty,w.unshift(this.renderRadioButton({key:"empty-option",label:K,name:v.name,value:"",selected:""===q||null===q,props:e})));return u.tsx("div",{key:`${e.key}-radio`,class:"esri-feature-form__input--radio-group"},w)};P.renderSwitchInputField=function(v,K){const {value:e}=
v;v=this._inputFieldHasInputType(v,"switch")?e===v.fieldElement.input.onValue:!1;return u.tsx("calcite-switch",{...K,class:"esri-feature-form__input--switch",onCalciteSwitchChange:q=>{this._parseValue(q.currentTarget)},checked:v,disabled:K.readOnly})};P.renderRadioButton=function({key:v,name:K,value:e,selected:q,label:w,props:R}){return u.tsx("label",{key:v,class:"esri-feature-form__input--radio-label"},u.tsx("input",{...R,class:"esri-feature-form__input--radio",name:K,type:"radio",value:e,checked:q,
onchange:this._handleRadioInputChange}),w)};P.renderAuxiliaryText=function(v){const K=this._userUpdatedInputFieldNames.has(v.name)&&!v.valid?v.errorMessage:J.isSome(this.viewModel.contingencyConstraintViolations.get(v.name))?this.messages.validationErrors.valuesIncompatible:null;if(J.isSome(K))return u.tsx("calcite-input-message",{status:"invalid",icon:!0,active:!0},K);if(v.description)return u.tsx("div",{key:"description",class:"esri-feature-form__description-text"},v.description)};P.getCommonInputProps=
function(v){var {groupDisplay:K}=this;const {editable:e,group:q,hint:w,maxLength:R,minLength:Q,name:c,required:z,type:B,valid:U,value:Y}=v,aa=this._userUpdatedInputFieldNames.has(c),ca=!e;K="all"===K&&J.isSome(q)&&"collapsed"===q.state;return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":U?"false":"true",class:this.classes("esri-input","esri-feature-form__input",ca?"esri-feature-form__input--disabled":null,aa&&!U?"esri-feature-form__input--invalid":
null),key:c,label:c,minlength:-1<Q?`${Q}`:"",maxlength:-1<R?`${R}`:"",...this._getNumberFieldConstraints(v),readOnly:ca,value:null==Y?"":`${Y}`,["data-field-name"]:c,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:"number"===B?this._handleNumberInputMouseDown:null,placeholder:"number"===B||"text"===B?w:"",required:z,tabIndex:K?-1:0}};P._isInputFieldInGroup=function(v){return!(v&&v.inputFields)&&J.isSome(v.group)};
P._handleNumberInputMouseDown=function({target:v}){v.focus();this.scheduleRender()};P._getFieldValueOptions=function(v,K){K=K.codedValues.map(({code:e,name:q})=>({value:e,name:q}));v=this.viewModel.fieldsWithContingentValues.has(v)?this._getContingentValueOptions(v):[];if(0<v.length){const e=new Set(v.map(q=>q.value));K=K.filter(q=>!e.has(q.value));return[v,K]}return[K,[]]};P._getContingentValueOptions=function(v){const K={};for(var e of this.viewModel.allInputFields){const {name:w,value:R}=e;!J.isNone(R)&&
w!==v&&this.viewModel.fieldsWithContingentValues.has(w)&&(K[w]=R)}var q=this.viewModel.joinedContingentValues.slice();e=new Map;for(const w of q){q=w.values[v];if(J.isNone(q)||"code"!==q.objectType&&"null"!==q.objectType)continue;const {code:R,name:Q}="null"===q.objectType?{code:"",name:this.messages.empty}:q.codedValue;e.has(R)||Object.entries(K).every(([c,z])=>!w.values.hasOwnProperty(c)||this._valueIsValidContingentValue(z,w.values[c]))&&e.set(R,{name:Q,value:R})}return[...e.values()]};P._getInputFieldFromInput=
function(v){return this.viewModel.findField(v.getAttribute("data-field-name"))};P._getNumberFieldConstraints=function(v){return(v=y.getDomainRange(v.domain)||G.getFieldRange(v.field))&&v.max!==Number.MAX_VALUE&&v.min!==Number.MIN_VALUE?v:{min:null,max:null}};P._afterInputCreateOrUpdate=function(v){var {viewModel:K}=this;const e=this._getInputFieldFromInput(v);K=K.findField(this._activeInputName);const q=this._fieldToInitialIncompatibleDomainValue.get(e.name)===e.value;this._fieldFocusNeeded&&K===
e&&("radio-buttons"!==e.inputType||q||v.checked)&&(this._fieldFocusNeeded=!1,v.focus())};P._handleInputFocus=function(v){v=v.target;const K=this._getInputFieldFromInput(v);this._activeInputName=K.name;"date"===K.type?this._syncDateFieldEdits(v):this._isNumberInputField(K)&&this._setUpNumberFieldEdit(v)};P._isNumberInputField=function({domain:v,inputType:K="text-box",type:e}){return"number"===e&&"text-box"===K&&(!v||"coded-value"!==v.type)};P._handleInputBlur=function(v){const K=v.target,e=this._getInputFieldFromInput(K);
if("date"===e.type){const R=v.relatedTarget;var q=R&&this._getInputFieldFromInput(R);if(q&&"date"===e.type&&"date"===q.type&&e.field===q.field){if(""!==K.value&&""===R.value){var w;q=R.getAttribute("data-date-part");R.value=this._formatDate(null!=(w=e.value)?w:Date.now())[q];this._parseDate(K.value,K.getAttribute("data-date-part"))&&this._commitInputValue(v.target,!0,!1)}return}}"number"===e.type&&J.isSome(this._activeNumberFieldEdit)&&(this._activeNumberFieldEdit.input.value=`${e.value}`,this._activeNumberFieldEdit=
null);this._commitInputValue(K);this.scheduleRender()};P._commitInputValue=function(v,K=!1,e=!0){const q=this._getInputFieldFromInput(v);if(this._activeDateFieldEdit){const {date:z,time:B}=this._activeDateFieldEdit,U=this._parseDateTime(v.value,q,z.active?"date":"time");v=null!==this.viewModel.getValue(q.name);const Y=z.input&&(B.input||!q.includeTime),aa=null===U;if(K)aa||(Y||!e||v)&&this._updateDateFieldValue(q,U);else{var w,R;if(""===(null==(w=z.input)?void 0:w.value)||""===(null==(R=B.input)?
void 0:R.value))this._updateDateFieldValue(q,null);else if(Y){var Q,c;K=`${z.input.value} ${null!=(Q=null==(c=B.input)?void 0:c.value)?Q:""}`;Q=this._parseDateTime(K,q);null===Q&&v||this._updateDateFieldValue(q,Q)}this._activeDateFieldEdit=null}}else J.isSome(this._activeNumberFieldEdit)&&this._isNumberInputField(q)&&(this._activeNumberFieldEdit.value=v.value),this._updateFieldValue(v)};P._handleInputKeyDown=function(v){const {key:K,altKey:e,ctrlKey:q,metaKey:w}=v;var R=this._getInputFieldFromInput(v.target);
if("Enter"!==K){var {type:Q}=R.field;R="single"===Q||"double"===Q;if(!("integer"!==Q&&"small-integer"!==Q&&!R||e||q||w)&&1===K.length){Q=Number(K);const c=["-","+"],z=["e","."];R=R?[...c,...z]:c;isNaN(Q)&&!R.includes(K)&&v.preventDefault()}}else this._isInputFieldInGroup(R)&&"collapsed"===R.group.state&&(R.group.state="expanded")};P._setUpNumberFieldEdit=function(v){this._activeNumberFieldEdit={fieldName:this._getInputFieldFromInput(v).name,input:v,value:v.value}};P._syncDateFieldEdits=function(v){var K,
e;const q=this._getInputFieldFromInput(v);if("date"===q.type){var w=v.getAttribute("data-date-part"),R="date"===w?{value:v.value,input:v,active:!0}:{...null==(K=this._activeDateFieldEdit)?void 0:K.date,active:!1};v="time"===w?{value:v.value,input:v,active:!0}:{...null==(e=this._activeDateFieldEdit)?void 0:e.time,active:!1};this._activeDateFieldEdit={fieldName:q.name,date:R,time:v}}};P._updateFieldValue=function(v){const K=v.getAttribute("data-field-name");this.viewModel.setValue(K,this._parseValue(v));
this._userUpdatedInputFieldNames.add(K);this.viewModel.fieldsWithContingentValues.has(K)&&(v=Object.fromEntries(Object.entries(this.getValues()).filter(([,e])=>J.isSome(e))),this.viewModel.validateContingencyConstraints(v))};P._updateDateFieldValue=function(v,K){this.viewModel.setValue(v.name,K);this._userUpdatedInputFieldNames.add(v.name)};P._parseValue=function(v){var K=this._getInputFieldFromInput(v),e=v.value;if(this._inputFieldHasInputType(K,"switch")&&"CALCITE-COMBOBOX"!==v.tagName)return v.checked?
K.fieldElement.input.onValue:K.fieldElement.input.offValue;if("radio-buttons"===K.inputType&&"radio"===v.type&&!v.checked)return K.value;var {type:q}=K;if("number"===q)return e?parseFloat(e):null;if("date"===q){if(!e)return null;q=Number(e);if(!isNaN(q))return q;v=v.getAttribute("data-date-part");e=this._parseDate(e,v);if(!e)return null;e=p.DateTime.fromJSDate(e);var w=K.domain;const R=p.DateTime.now();q=R;w&&"range"===w.type&&(w=p.DateTime.fromMillis(w.maxValue),R<w&&(q=w));K=this.viewModel.getValue(K.name);
K=null!=K?p.DateTime.fromMillis(K):q;e="date"===v?e.set({hour:K.hour,minute:K.minute,second:K.second}):e.set({day:K.day,month:K.month,year:K.year});return e.toMillis()}return e};P._handleOptionChange=function(v){this._commitInputValue(v);this.scheduleRender()};P._handleGroupClick=function(v){var K;const e=v.currentTarget["data-group"],q="expanded"===e.state,w="sequential"===this.groupDisplay;if(!q||v.target.closest(".esri-feature-form__group-header")){this._activeInputName=null==(K=this._getFocusableInput("forward",
e))?void 0:K.name;if(w){v=v.target.closest(".esri-feature-form__group-header");if(q&&!v)return;this.viewModel.inputFields.forEach(R=>{R&&R.inputFields&&R!==e&&(R.state="collapsed")})}e.state=q?"collapsed":"expanded";this._fieldFocusNeeded=w;this.scheduleRender()}};P._handleSubmit=function(v){v.preventDefault()};P._handleFormKeyDown=function(v){"Enter"===v.key&&this.viewModel.submit()};P._formatDate=function(v){if(null==v)return{date:"",time:""};v=p.DateTime.fromMillis(v,{locale:k.getLocale(),numberingSystem:"latn"});
return{date:v.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:v.toFormat(D.timePattern)}};P._parseDate=function(v,K){if(null==v||""===v)return null;const {timePattern:e,datePattern:q}=D;v=p.DateTime.fromFormat(v,K?"date"===K?q:e:`${q} ${e}`,{locale:k.getLocale(),numberingSystem:"latn"});return v.isValid?v.toJSDate():null};P._inputFieldHasInputType=function(v,K){var e;return J.isSome(v.fieldElement)&&(null==(e=v.fieldElement.input)?void 0:e.type)===K};P._valueIsValidContingentValue=
function(v,K){var e;switch(K.objectType){case "any":return!0;case "null":return null==v;case "code":return v===(null==(e=K.codedValue)?void 0:e.code);case "range":return v>=K.minValue&&v<=K.maxValue;default:return f.neverReached(K.objectType),!1}};return S}(E);b.__decorate([O.aliasOf("viewModel.feature")],F.prototype,"feature",void 0);b.__decorate([O.aliasOf("viewModel.formTemplate")],F.prototype,"formTemplate",void 0);b.__decorate([m.property()],F.prototype,"groupDisplay",void 0);b.__decorate([m.property()],
F.prototype,"headingLevel",void 0);b.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0);b.__decorate([O.aliasOf("viewModel.layer")],F.prototype,"layer",void 0);b.__decorate([m.property(),g.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],F.prototype,"messages",void 0);b.__decorate([m.property(),g.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],F.prototype,"messagesTemplates",void 0);b.__decorate([O.aliasOf("viewModel.spatialReference")],
F.prototype,"spatialReference",void 0);b.__decorate([O.aliasOf("viewModel.strict")],F.prototype,"strict",void 0);b.__decorate([m.property(),r.vmEvent(["value-change","submit"])],F.prototype,"viewModel",void 0);b.__decorate([O.aliasOf("viewModel.getValues")],F.prototype,"getValues",null);b.__decorate([O.aliasOf("viewModel.submit")],F.prototype,"submit",null);return F=b.__decorate([n.subclass("esri.widgets.FeatureForm")],F)})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../intl ../../core/Evented ../../core/HandleOwner ../../core/handleUtils ../../core/Logger ../../core/maybe ../../core/Promise ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../form/FormTemplate ../../layers/support/ContingentValue ../../layers/support/LayerContingentValuesCache ../../support/arcadeOnDemand ./InputField ./InputFieldGroup ../../intl/locale ../../intl/messages".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k){const D=new b({attributes:{}}),N=O.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel"),S=["editable","required","value","visibility"];b=function(P){function v(e){e=P.call(this,e)||this;e._arcade=null;e._compiledExpressionLookup=new Map;e._expressionLookup=new Map;e._expressionInvalidationCallbacks=new Set;e._contingentValuesCache=null;e._featureClone=D.clone();e._initialFeature=D.clone();e._arcadeGeometryOperationsEnabled=!1;e._inputFieldCache=
[];e.contingencyConstraintViolations=new Map;e.messages=null;e.strict=!1;return e}d._inheritsLoose(v,P);var K=v.prototype;K.initialize=function(){var e=this;const q=function(){var Q=d._asyncToGenerator(function*(){return e.messages=yield k.fetchMessageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")});return function(){return Q.apply(this,arguments)}}();q();const w=A.watch(()=>this.layer,Q=>{"feature"===(null==Q?void 0:Q.type)&&this.addResolvingPromise(h.createLoadedLayerContingentValuesCache(Q).then(c=>
{this._contingentValuesCache=c;this.notifyChange("fieldsWithContingentValues")}))},{initial:!0}),R=A.watch(()=>{var Q;return null==(Q=this.feature)?void 0:Q.geometry},Q=>{this._featureClone.geometry=Q;for(const c of this._expressionInvalidationCallbacks)c()});this.handles.add([p.onLocaleChange(q),w,R])};K.destroy=function(){this.layer=this.feature=null;this._contingentValuesCache=L.destroyMaybe(this._contingentValuesCache)};K.findField=function(e){return this.allInputFields.find(q=>q.name===e)};K.getValue=
function(e){var q;const {_featureClone:w,layer:R}=this,Q=!(null==R||!R.getField(e));return null!=(q=w.getAttribute(e))?q:Q?null:void 0};K.setValue=function(e,q){const {_featureClone:w,strict:R}=this,Q=this.findField(e);q=""===q?null:q;Q&&w.getAttribute(e)!==q&&(Q.value=q,R&&!Q.valid||this._afterValueChange(Q))};K.getValues=function(){return{...this._featureClone.attributes}};K.submit=function(){var e=this.allInputFields;const q=new Set(e.filter(R=>R.valid).map(({name:R})=>R));e=e.filter(R=>!R.valid).map(({name:R})=>
R);const w=this.getValues();if(0<this.validateContingencyConstraints(w,{includeIncompleteViolations:!0}).length)for(const [R,Q]of this.contingencyConstraintViolations.entries())"error"===Q.type&&(q.delete(R),e.push(R));this.emit("submit",{valid:[...q],invalid:e,values:w})};K.validateContingencyConstraints=function(e,q){const {_contingentValuesCache:w}=this,R=new Map;this.contingencyConstraintViolations=R;if(L.isNone(w))return[];const {invalid:Q,incomplete:c}=w.validateContingencyConstraints(e);e=
[...Q,...null!=q&&q.includeIncompleteViolations?c:[]];for(const z of e)for(const B of z.fieldGroup.fields)R.set(B,z);return e};K._emitChangeEvent=function({name:e,valid:q,value:w}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:e,value:w,valid:q})};K._updateInputFieldsFromElements=function(e,q,w){const R=new Map;for(const z of e)if(z.inputFields){e=R;var Q=z.groupElement,c=z;L.isSome(Q)&&e.set(Q,c);for(const B of z.inputFields)e=R,Q=B.fieldElement,c=B,L.isSome(Q)&&e.set(Q,
c)}else e=R,Q=z.fieldElement,c=z,L.isSome(Q)&&e.set(Q,c);q=this._updateInputFieldsRecursive(R,q.filter(this._isSupportedElement),w);for(const [z,B]of R.entries())R.delete(z),B.destroy();return q};K._updateInputFieldsRecursive=function(e,q,w,R=null){const Q=[];for(const z of q){var c=e.has(z);q=c?e.get(z):"group"===z.type?this._makeInputFieldGroupFromGroupElement(z,w):this._makeInputFieldFromFieldElement(z,w,R);Q.push(q);if(c)if(e.delete(z),q.inputFields){const {arcade:B,feature:U,expressionTrackingProvider:Y,
spatialReference:aa}=w;q.set({arcade:B,feature:U,expressionTrackingProvider:Y,spatialReference:aa})}else q.set(w);"group"===z.type&&(c=z.elements.filter(B=>this._isSupportedElement(B)),q.inputFields=this._updateInputFieldsRecursive(e,c,w,q))}return Q};K._updateInputFieldsFromLayerFields=function(e,q,w){if(!Array.isArray(q))return N.warn("esri.widgets.FeatureForm.FeatureFormViewModel","No attribute fields found."),[];const R=new Map;for(const aa of e)if(aa.inputFields){for(const ca of aa.inputFields)ca.destroy();
aa.inputFields.length=0;aa.destroy()}else R.set(aa.field,aa);e=[];const {feature:Q,initialFeature:c,layer:z,messages:B,spatialReference:U}=w;for(const aa of q){var Y;q=null!=(Y=R.get(aa))?Y:new r({field:aa,feature:Q,initialFeature:c,layer:z,messages:B,spatialReference:U,value:Q.getAttribute(aa.name)});q.set({fieldElement:null,requiredFunction:null,visibilityFunction:null,valueFunction:null,editableFunction:null});e.push(q);R.delete(aa)}for(const [aa,ca]of R.entries())R.delete(aa),ca.destroy();return e};
K._makeInputFieldFromFieldElement=function(e,q,w=null){var R=this;const {arcade:Q,expressionTrackingProvider:c,feature:z,initialFeature:B,layer:U,messages:Y,spatialReference:aa}=q,ca=new r({fieldElement:e,field:this._layerFieldsByName.get(e.fieldName),requiredFunction:this._getCompiledExpression(e.requiredExpression),visibilityFunction:this._getCompiledExpression(e.visibilityExpression),valueFunction:this._getCompiledExpression(e.valueExpression),editableFunction:this._getCompiledExpression(e.editableExpression),
group:w,arcade:Q,expressionTrackingProvider:c,feature:z,initialFeature:B,layer:U,messages:Y,spatialReference:aa,value:z.getAttribute(e.fieldName)}),na=`watch-expression-field-${ca.id}`;e=A.watch(()=>ca.fieldElement,ba=>{this.handles.remove(na);L.isSome(ba)&&this.handles.add(S.map(ra=>A.watch(()=>ba[`${ra}Expression`],function(){var ua=d._asyncToGenerator(function*(Ba){Ba&&""!==Ba&&(ca[`${ra}Function`]=yield R._getOrMakeCompiledExpression(Ba),ca.arcade=R._arcade)});return function(Ba){return ua.apply(this,
arguments)}}(),{initial:!0,sync:!0})),na)},{initial:!0,sync:!0});q=I.makeHandle(()=>this.handles.remove(na));w=A.watch(()=>ca.value,()=>this._afterValueChange(ca));ca.own([e,q,w]);return ca};K._makeInputFieldGroupFromGroupElement=function(e,q){var w=this;const {arcade:R,feature:Q,expressionTrackingProvider:c,spatialReference:z}=q,B=new u({groupElement:e,visibilityFunction:this._getCompiledExpression(e.visibilityExpression),inputFields:[],arcade:R,feature:Q,expressionTrackingProvider:c,spatialReference:z});
B.own(A.watch(()=>B.groupElement,U=>L.isSome(U)&&U.own(A.watch(()=>U.visibilityExpression,function(){var Y=d._asyncToGenerator(function*(aa){aa&&""!==aa&&(B.visibilityFunction=yield w._getOrMakeCompiledExpression(aa),B.arcade=w._arcade)});return function(aa){return Y.apply(this,arguments)}}(),{initial:!0})),{initial:!0}));return B};K._clearInputFieldCache=function(){for(const e of this._inputFieldCache){if(e.inputFields)for(const q of e.inputFields)q.destroy();e.destroy()}this._inputFieldCache=[]};
K._afterValueChange=function(e){const {name:q,value:w}=e;if(this.get("layer.typeIdField")===q&&"types"in this.layer){const R=new Set;this.layer.types.forEach(Q=>Object.keys(Q.domains).forEach(c=>R.add(c)));R.forEach(Q=>{(Q=this.findField(Q))&&Q.notifyChange("domain")})}this._featureClone.setAttribute(q,w);for(const R of this._expressionInvalidationCallbacks)R();this._emitChangeEvent(e)};K._registerExpression=function(e){const {_expressionInvalidationCallbacks:q}=this;q.add(e);return I.makeHandle(()=>
q.delete(e))};K._getCompiledExpression=function(e){return this._compiledExpressionLookup.get(this._expressionLookup.get(e))};K._getOrMakeCompiledExpression=function(){var e=d._asyncToGenerator(function*(q){var w;if(L.isNone(q)||""===q)return null;q=null!=(w=this._expressionLookup.get(q))?w:this._addToExpressionLookup(q);if(this._compiledExpressionLookup.has(q))return this._compiledExpressionLookup.get(q);this._arcade||(this._arcade=yield g.loadArcade());w=this._arcade.arcadeUtils;!this._arcadeGeometryOperationsEnabled&&
w.hasGeometryOperations(q)&&(yield w.enableGeometryOperations(),this._arcadeGeometryOperationsEnabled=!0);return this._addToCompiledExpressionLookup(q)});return function(q){return e.apply(this,arguments)}}();K._addToCompiledExpressionLookup=function(e){const {_arcade:{arcadeUtils:q},_compiledExpressionLookup:w}=this,R=q.createFunction(e);w.set(e,R);return R};K._addToExpressionLookup=function(e){var q;const {_expressionLookup:w,formTemplate:R}=this;var Q=L.isSome(R)&&L.isSome(R.expressionInfos)?Object.values(R.expressionInfos).find(c=>
c.name===e):null;Q=null!=(q=null==Q?void 0:Q.expression)?q:e;w.set(e,Q);e!==Q&&w.set(Q,Q);return Q};K._isSupportedElement=function(e){if("field"===e.type||"group"===e.type)return!0;N.warn("form-info::unsupported-element-type","Only element types 'field' and 'group' are supported",`Element ${e.label} has unsupported type '${e.type}'`);return!1};K._joinContingentValues=function(){var e=this._contingentValuesCache;if(L.isNone(e))return[];var q="typeIdField"in this.layer?this.layer.typeIdField:null;q=
q?this.getValue(q):null;const w=[];for(var R of e.fieldGroups){const {contingencies:B,fields:U,name:Y}=R;e=[];for(var Q of B)Q.isRetired||L.isSome(Q.subtype)&&Q.subtype.code!==q||e.push({values:Q.values});0<e.length&&w.push({name:Y,fields:U,contingencies:e})}const [c,z]=this._generateJoinPlan(w);R=c.flatMap(B=>this._joinFieldGroupContingencies(B));Q=z.flatMap(B=>B.contingencies);return[...R,...Q]};K._generateJoinPlan=function(e){var q=new Map,w=[],R=new Set;for(var Q of e)for(const U of Q.fields)if(q.has(U)){const Y=
q.get(U),aa=Q,ca=[Y.name,aa.name].sort().join("|");R.has(ca)||(w.push([Y,aa]),R.add(ca),q.set(U,aa))}else q.set(U,Q);q=new Set(w.flat());e=new Set(e);for(var c of q)e.delete(c);c=new Map;q=new Map;for(var z of new Set(w.flat()))R=Symbol(z.name),c.set(R,new Set([z])),q.set(z,R);for(const [U,Y]of w)if(w=q.get(U),z=q.get(Y),w!==z){R=c.get(w);Q=c.get(z);for(var B of Q)R.add(B),q.set(B,w);c.delete(z)}B=[...c.values()].map(U=>[...U]);w=[...e];return[B,w]};K._joinFieldGroupContingencies=function(e){const q=
e.slice();var w=q.shift(),R=q.shift();e=this._generateJoinKey(w.fields,R.fields);let Q=new Set([...w.fields,...R.fields]),c=new Map;for(var z of w.contingencies)[w]=this._hashContingency(z,e.codedValueFields,!0),c.has(w)?c.get(w).push(z):c.set(w,[z]);for(;0<q.length;){z=new Map;w=q.shift();const Y=this._generateJoinKey(Q,w.fields);for(var B of R.contingencies){const [aa,ca]=this._hashContingency(B,e.codedValueFields);R=ca?this._findMatchingContingenciesWithAnyHashMask(c,aa):c.get(aa);c.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&
R.push(...this._findMatchingContingenciesContainingAny(B,c.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),e.codedValueFields));if(!L.isNone(R))for(var U of R){R=0<e.rangeFields.length?this._joinContingenciesWithRangeDomains(U,B,e.rangeFields):this._joinContingencies(U,B);if(L.isNone(R))break;const [na]=this._hashContingency(R,Y.codedValueFields,!0);z.has(na)?z.get(na).push(R):z.set(na,[R])}}c=z;R=w;e=Y;Q=new Set([...Q,...R.fields])}B=[];for(const Y of R.contingencies){const [aa,ca]=this._hashContingency(Y,
e.codedValueFields);U=ca?this._findMatchingContingenciesWithAnyHashMask(c,aa):c.get(aa);c.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&U.push(...this._findMatchingContingenciesContainingAny(Y,c.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),e.codedValueFields));if(!L.isNone(U))for(const na of U)U=0<e.rangeFields.length?this._joinContingenciesWithRangeDomains(na,Y,e.rangeFields):this._joinContingencies(na,Y),L.isSome(U)&&B.push(U)}return B};K._joinContingencies=function(e,q){q={values:{...e.values,...q.values}};
for(const [w,R]of Object.entries(q.values))"any"===R.objectType&&L.isSome(e.values[w])&&(q.values[w]=e.values[w]);return q};K._joinContingenciesWithRangeDomains=function(e,q,w){const R=this._joinContingencies(e,q);for(const c of w){var Q=e.values[c];const z=q.values[c],{leftIsNull:B,rightIsNull:U,bothAreNull:Y,leftIsAny:aa,rightIsAny:ca,bothAreAny:na,leftIsRange:ba,rightIsRange:ra}=this._compareObjectTypes(Q.objectType,z.objectType);if(!Y&&!na)if(B&&ca||U&&aa)R.values[c]=new C({objectType:"null"});
else{if(B&&ra||U&&ba)return null;aa?(Q.minValue=-Infinity,Q.maxValue=Infinity):ca&&(z.minValue=-Infinity,z.maxValue=Infinity);w=Math.max(Q.minValue,z.minValue);Q=Math.min(Q.maxValue,z.maxValue);if(w>Q)return null;R.values[c]=new C({objectType:"range",minValue:w,maxValue:Q})}}return R};K._findMatchingContingenciesContainingAny=function(e,q,w){return q.filter(R=>w.every(Q=>{var c,z;const B=R.values[Q];Q=e.values[Q];return"any"===B.objectType||"any"===Q.objectType||(null==(c=B.codedValue)?void 0:c.code)===
(null==(z=Q.codedValue)?void 0:z.code)}))};K._findMatchingContingenciesWithAnyHashMask=function(e,q){q=RegExp(`${q}$`);const w=[];for(const [R,Q]of e){if("#JSAPI_CONTINGENT_VALUE_ANY_HASH"===R)break;q.test(R)&&w.push(...Q)}return w};K._generateJoinKey=function(e,q){e=Array.isArray(e)?new Set(e):e;var w=Array.isArray(q)?new Set(q):q;q=e.size<w.size?e:w;e=q===e?w:e;w=new Set;const R=new Set;for(const Q of q)if(e.has(Q)&&(q=this.layer.getFieldDomain(Q,{feature:this.feature}),!L.isNone(q)))switch(q.type){case "coded-value":w.add(Q);
break;case "range":R.add(Q)}return{codedValueFields:[...w],rangeFields:[...R]}};K._hashContingency=function(e,q,w=!1){if(1>q.length)return["#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",!1];const R=[];let Q=!1;for(const z of q)if(q=e.values[z],"any"===q.objectType){if(w)return["#JSAPI_CONTINGENT_VALUE_ANY_HASH",!0];Q=!0;R.push(`${z}:.*`)}else if("null"===q.objectType)R.push(`${z}:${"#JSAPI_CONTINGENT_VALUE_NULL_HASH"}`);else{var c;R.push(`${z}:${null==(c=q.codedValue)?void 0:c.code}`)}return[R.sort().join("\x26"),
Q]};K._compareObjectTypes=function(e,q){return{leftIsNull:"null"===e,rightIsNull:"null"===q,bothAreNull:"null"===e&&"null"===q,leftIsAny:"any"===e,rightIsAny:"any"===q,bothAreAny:"any"===e&&"any"===q,leftIsRange:"range"===e,rightIsRange:"range"===q}};d._createClass(v,[{key:"allInputFields",get:function(){return this.inputFields.reduce((e,q)=>q.inputFields?[...e,...q.inputFields]:[...e,q],[])}},{key:"_layerFieldsByName",get:function(){return new Map(this.layer.fields.map(e=>[e.name,e]))}},{key:"feature",
get:function(){return this._get("feature")},set:function(e){this._featureClone=e?e.clone():D.clone();this._initialFeature=this._featureClone.clone();this.contingencyConstraintViolations.clear();this._clearInputFieldCache();this._set("feature",e)}},{key:"fieldsWithContingentValues",get:function(){if(L.isNone(this._contingentValuesCache))return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap(q=>q.fields);return new Set(e)}},{key:"formTemplate",get:function(){return this.layer&&"formTemplate"in
this.layer?this.layer.formTemplate:null},set:function(e){null!=e?this._override("formTemplate",e):this._clearOverride("formTemplate")}},{key:"inputFields",get:function(){const {_arcade:e,_featureClone:q,_initialFeature:w,_inputFieldCache:R,formTemplate:Q,messages:c,layer:z,state:B,spatialReference:U}=this;if("ready"!==B)return[];var Y={arcade:e,feature:q,initialFeature:w,layer:z,messages:c,expressionTrackingProvider:{registerExpression:this._registerExpression.bind(this)},spatialReference:U};return this._inputFieldCache=
Y=L.isSome(Q)&&0<Q.elements.length?this._updateInputFieldsFromElements(R,Q.elements,Y):this._updateInputFieldsFromLayerFields(R,null==z?void 0:z.fields,Y)}},{key:"joinedContingentValues",get:function(){return this._joinContingentValues()}},{key:"layer",get:function(){var e;return null!=(e=this.feature)&&e.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null},set:function(e){e?this._override("layer",e):this._clearOverride("layer")}},{key:"spatialReference",get:function(){var e;
return(null==(e=this.layer)?void 0:e.spatialReference)||null},set:function(e){void 0===e?this._clearOverride("spatialReference"):this._override("spatialReference",e)}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"submittable",get:function(){return this.valid?!0:this.allInputFields.filter(e=>!e.valid).every(({submittable:e})=>e)}},{key:"valid",get:function(){const e=this.allInputFields;return 0<e.length&&e.every(({valid:q})=>q)}}]);return v}(J.HandleOwnerMixin(H.EsriPromiseMixin(f.EventedAccessor)));
l.__decorate([m.property({readOnly:!0})],b.prototype,"allInputFields",null);l.__decorate([m.property()],b.prototype,"_layerFieldsByName",null);l.__decorate([m.property()],b.prototype,"_inputFieldCache",void 0);l.__decorate([m.property()],b.prototype,"contingencyConstraintViolations",void 0);l.__decorate([m.property()],b.prototype,"feature",null);l.__decorate([m.property()],b.prototype,"fieldsWithContingentValues",null);l.__decorate([m.property({type:x})],b.prototype,"formTemplate",null);l.__decorate([m.property({readOnly:!0})],
b.prototype,"inputFields",null);l.__decorate([m.property()],b.prototype,"joinedContingentValues",null);l.__decorate([m.property()],b.prototype,"layer",null);l.__decorate([m.property()],b.prototype,"messages",void 0);l.__decorate([m.property()],b.prototype,"spatialReference",null);l.__decorate([m.property()],b.prototype,"state",null);l.__decorate([m.property()],b.prototype,"strict",void 0);l.__decorate([m.property()],b.prototype,"submittable",null);l.__decorate([m.property()],b.prototype,"valid",null);
l.__decorate([m.property()],b.prototype,"getValues",null);l.__decorate([m.property()],b.prototype,"submit",null);return b=l.__decorate([E.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],b)})},"esri/layers/support/ContingentValue":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.maxValue=null;A.minValue=null;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"objectType",void 0);l.__decorate([F.property()],b.prototype,"maxValue",void 0);l.__decorate([F.property()],b.prototype,"minValue",void 0);l.__decorate([F.property()],b.prototype,"codedValue",void 0);return b=l.__decorate([O.subclass("esri.layers.support.ContingentValue")],b)})},"esri/layers/support/LayerContingentValuesCache":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/JSONSupport ../../core/Loadable ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./arcgisLayerUrl ./Contingency ./ContingencyConstraintViolation ./ContingentValue ./ContingentValuesResult ./FieldGroup ./Subtype".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C){var h;F=h=function(g){function r(p){p=g.call(this,p)||this;p.request=b;p.fieldGroups=null;p.fieldGroupDefinitions=null;return p}d._inheritsLoose(r,g);var u=r.prototype;u.initialize=function(){};r.createLoadedLayerContingentValuesCache=function(){var p=d._asyncToGenerator(function*(k){yield k.load();if(void 0===k.layerId)return null;var D=k.sourceJSON.hasContingentValuesDefinition;if(D)return(new h({layer:k})).load();if(void 0===D){D=m.parse(k.url);if(J.isNone(D))return null;
D=D.url.path;if((yield h._staticFetchEnterpriseFeatureRoot(D)).supportsQueryDataElements&&(D=yield h._staticFetchEnterpriseFieldGroup(D,k.layerId.toString())))return D=D.map(N=>({name:N.name,isEditingRestrictive:N.isEditingRestrictive,fields:N.fieldNames.names})),(new h({layer:k,fieldGroupDefinitions:D})).load()}return null});return function(k){return p.apply(this,arguments)}}();u.load=function(){var p=d._asyncToGenerator(function*(k){const D=this.layer.load(k).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,
k));this.addResolvingPromise(D);return this});return function(k){return p.apply(this,arguments)}}();u.validateContingencyConstraints=function(p,k){const D=this.layer.typeIdField,N=Object.keys(p),S=[],P=[];for(const K of this.fieldGroups){const e=K.isEditingRestrictive?"error":"warning";if(k&&!K.fields.some(R=>k.includes(R)))continue;if(!K.fields.every(R=>N.includes(R))){P.push(new y({fieldGroup:K,type:e}));continue}let q=!1;const w=p[D];var v=K.contingencies.filter(R=>!R.isRetired&&R.subtype?R.subtype.code===
w:!0);for(const R of v){v=!0;for(const Q in R.values){const c=R.values[Q];if("any"!==c.objectType)if("null"===c.objectType){if(null!=p[Q]){v=!1;break}}else if("code"===c.objectType){if(p[Q]!==c.codedValue.code){v=!1;break}}else if("range"===c.objectType){const z=p[Q];if(z<c.minValue||z>c.maxValue){v=!1;break}}}if(v){q=!0;break}}q||S.push(new y({fieldGroup:K,type:e}))}return{invalid:S,incomplete:P}};u.getContingentValues=function(p,k,D=!1){const N=p[this.layer.typeIdField],S=void 0!==N&&null!==N,P=
{};let v=[];const K=this.fieldGroups.filter(q=>q.fields.includes(k));v.push(new G({objectType:"any"}));for(const q of K){let w=[];var e=q.contingencies.filter(c=>!c.isRetired&&(c.subtype&&S?c.subtype.code===N:!0));let R=!1;const Q={};for(const c of e){let z;e=!0;for(const B in c.values){const U=c.values[B];if(k===B)z=U,R=R||"range"===U.objectType;else if(void 0!==p[B]&&"any"!==U.objectType)if("null"===U.objectType)null!==p[B]&&(e=!1);else if("code"===U.objectType)p[B]!==U.codedValue.code&&(e=!1);
else if("range"===U.objectType){const Y=p[B];if(Y<U.minValue||Y>U.maxValue)e=!1}}if(z&&e){if("any"===z.objectType){w.length=0;w.push(z);break}e=this._generateKey(z);Q[e]||w.push(z);Q[e]=!0}}R&&(w=this._joinRange(w));P[q.name]=w;v=D?this._filterIntersection(v,w):null}1===K.length&&D&&(v=[]);return new E({contingentValuesAllGroups:v,contingentValuesByFieldGroup:P})};u._generateKey=function(p){switch(p.objectType){case "any":return"@any@";case "null":return"@null@";case "code":return p.codedValue.name+
p.codedValue.code.toString();case "range":return p.minValue.toString()+"-"+p.maxValue.toString()}};u._joinRange=function(p){p.sort((S,P)=>"null"===S.objectType?-1:"null"===P.objectType?1:S.minValue-P.minValue);let k,D;const N=[];for(const S of p)"null"===S.objectType?N.push(S):void 0===k?(k=S.minValue,D=S.maxValue):D<S.minValue?(N.push(new G({objectType:"range",minValue:k,maxValue:D})),k=S.minValue,D=S.maxValue):D<S.maxValue&&(D=S.maxValue);N.push(new G({objectType:"range",minValue:k,maxValue:D}));
return N};u._filterIntersection=function(p,k){var D,N;if(0===p.length||0===k.length)return[];if("any"===p[0].objectType)return k;if("any"===k[0].objectType)return p;const S="range"===p[0].objectType||"range"===(null==(D=p[1])?void 0:D.objectType);D="range"===k[0].objectType||"range"===(null==(N=k[1])?void 0:N.objectType);return S||D?this._intersectRanges(p,k):this._intersectValues(p,k)};u._intersectRanges=function(p,k){const D=[];let N=0;for(const S of p)for(;N<k.length;N++){const P=k[N];if("null"===
S.objectType&&"null"===P.objectType)D.push(new G({objectType:"null"}));else if("null"===S.objectType)break;else if("null"===P.objectType)continue;if(S.maxValue<P.minValue)break;if(S.maxValue===P.minValue){D.push(new G({objectType:"range",minValue:S.maxValue,maxValue:P.minValue}));break}if(!(S.minValue>P.maxValue))if(S.minValue===P.maxValue)D.push(new G({objectType:"range",minValue:S.minValue,maxValue:P.maxValue}));else{p=S.minValue>P.minValue?S.minValue:P.minValue;if(S.maxValue<P.maxValue){D.push(new G({objectType:"range",
minValue:p,maxValue:S.maxValue}));break}D.push(new G({objectType:"range",minValue:p,maxValue:P.maxValue}))}}return D};u._intersectValues=function(p,k){const D=[];for(const N of p)k.some(S=>{if(N.objectType===S.objectType)switch(N.objectType){case "any":case "null":return!0;case "code":return N.codedValue.code===S.codedValue.code&&N.codedValue.name===S.codedValue.name}return!1})&&D.push(N);return D};r._staticFetchEnterpriseFeatureRoot=function(){var p=d._asyncToGenerator(function*(k,D){return b(k,
{responseType:"json",query:{f:"json"},...D}).then(N=>N.data)});return function(k,D){return p.apply(this,arguments)}}();r._staticFetchEnterpriseFieldGroup=function(){var p=d._asyncToGenerator(function*(k,D,N){return b(`${k}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([D]),f:"json"},...N}).then(S=>{var P;return null==(P=S.data.layerDataElements)?void 0:P[0].dataElement.fieldGroups})});return function(k,D,N){return p.apply(this,arguments)}}();u._initializeContingentValues=function(){var p=
d._asyncToGenerator(function*(k,D){k=k?k:yield this._fetchFieldGroupDefs(D);this.fieldGroups=0===k.length?[]:yield this._fetchContingentValues(k,D)});return function(k,D){return p.apply(this,arguments)}}();u._fetchFieldGroupDefs=function(){var p=d._asyncToGenerator(function*(k){var D=this;if(void 0===this.layer.layerId)return[];const N=this.layer.sourceJSON,S=this.layer.layerId.toString(),P=J.unwrap(m.parse(this.layer.url)).url.path;return N.hasContingentValuesDefinition?(yield this._fetchAGOLFieldGroup(P,
S,k)).map(v=>({name:v.name,isEditingRestrictive:v.restrictive,fields:v.fields.map(K=>this.layer.fieldsIndex.normalizeFieldName(K))})):void 0!==N.hasContingentValuesDefinition?[]:this._fetchEnterpriseFeatureRoot(P,k).then(function(){var v=d._asyncToGenerator(function*(K){return K.supportsQueryDataElements?(yield D._fetchEnterpriseFieldGroup(P,S,k)).map(e=>({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fieldNames.names.map(q=>D.layer.fieldsIndex.normalizeFieldName(q))})):[]});return function(K){return v.apply(this,
arguments)}}())});return function(k){return p.apply(this,arguments)}}();u._fetchAGOLFieldGroup=function(){var p=d._asyncToGenerator(function*(k,D,N){return b(`${k}/${D}/fieldgroups`,{responseType:"json",query:{f:"json"},...N}).then(S=>S.data.fieldGroups)});return function(k,D,N){return p.apply(this,arguments)}}();u._fetchEnterpriseFieldGroup=function(){var p=d._asyncToGenerator(function*(k,D,N){return h._staticFetchEnterpriseFieldGroup(k,D,N)});return function(k,D,N){return p.apply(this,arguments)}}();
u._fetchEnterpriseFeatureRoot=function(){var p=d._asyncToGenerator(function*(k,D){return h._staticFetchEnterpriseFeatureRoot(k,D)});return function(k,D){return p.apply(this,arguments)}}();u._fetchContingentValues=function(){var p=d._asyncToGenerator(function*(k,D){if(void 0===this.layer.layerId)return[];const N=this.layer.sourceJSON,S=this.layer.layerId.toString(),P=J.unwrap(m.parse(this.layer.url)).url.path;if(N.hasContingentValuesDefinition)return D=yield this._fetchAGOLContingentValues(P,S,D),
this._constructFieldGroupsAGOL(k,D);D=yield this._fetchEnterpriseContingentValues(P,S,D);return this._constructFieldGroupsEnterprise(k,D)});return function(k,D){return p.apply(this,arguments)}}();u._constructFieldGroupsAGOL=function(p,k){return p.map(D=>{const N=k.contingentValuesDefinition.fieldGroups.find(S=>S.name===D.name);if(N){let S=[];S=k.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(D,k,N.subTypes):this._parseAGOLFieldGroup(D,k,N.contingentValues);return new x({name:D.name,
isEditingRestrictive:D.isEditingRestrictive,fields:D.fields,contingencies:S})}return null}).filter(D=>null!==D)};u._parseAGOLFieldGroupSubtype=function(p,k,D){let N=[];D.forEach(S=>{const P=this._getSubtypeAGOL(S.name);N=N.concat(this._parseAGOLFieldGroup(p,k,S.contingentValues,P))});return N};u._parseAGOLFieldGroup=function(p,k,D,N=null){const S=[];for(const P of D)D=this._parseAGOLContingency(P,p,k,N),S.push(D);return S};u._parseAGOLContingency=function(p,k,D,N){const S=p.id,P=p.retired?1===p.retired:
!1,v={};for(let e=0,q=0;e<k.fields.length;e++){const w=k.fields[e];var K=D.typeCodes[p.types[e]];if("Code"===K){let R=p.values[q];q++;const Q=this._getDomain(N,w);"string"===this.layer.getField(w).type&&(K=D.stringDicts.find(c=>c.domain===Q.name))&&(R=K.entries[R]);K=Q.codedValues.find(c=>c.code===R);K=new G({codedValue:K,objectType:"code"});v[w]=K}else"Range"===K?(K=p.values[q],q++,K=new G({minValue:K.range[0],maxValue:K.range[1],objectType:"range"}),v[w]=K):"Any"===K?(K=new G({objectType:"any"}),
v[w]=K):(K=new G({objectType:"null"}),v[w]=K)}return new n({id:S,isRetired:P,subtype:N,values:v})};u._constructFieldGroupsEnterprise=function(p,k){const D=k.fieldGroups;return p.map(N=>{var S=D.find(P=>P.name===N.name);return S?(S=S.contingencies.map(P=>{const v=P.id,K=P.isRetired||!1,e=this._getSubtypeEnterprise(P.subtypeCode),q={};for(let R=0;R<N.fields.length;R++){const Q=N.fields[R];let c=P.values[R];if("number"===typeof c||"string"===typeof c){var w=this._getDomain(e,Q);const z=this.layer.getField(Q);
"string"===z.type?c=k.stringDictionary[c]:"date"===z.type&&(c=(new Date(`${c}+00:00`)).getTime());w=w.codedValues.find(B=>B.code===c);w=new G({codedValue:w,objectType:"code"});q[Q]=w}else"object"===typeof c?(w=new G({minValue:c.minValue,maxValue:c.maxValue,objectType:"range"}),q[Q]=w):c?(w=new G({objectType:"any"}),q[Q]=w):(w=new G({objectType:"null"}),q[Q]=w)}return new n({id:v,isRetired:K,subtype:e,values:q})}),new x({name:N.name,isEditingRestrictive:N.isEditingRestrictive,fields:N.fields,contingencies:S})):
null}).filter(N=>null!==N)};u._fetchEnterpriseContingentValues=function(){var p=d._asyncToGenerator(function*(k,D,N){return b(`${k}/queryContingentValues`,{responseType:"json",query:{layers:JSON.stringify([D]),f:"json"},...N}).then(S=>{var P;return null==(P=S.data.contingentValueSets)?void 0:P[0]})});return function(k,D,N){return p.apply(this,arguments)}}();u._fetchAGOLContingentValues=function(){var p=d._asyncToGenerator(function*(k,D,N){return b(`${k}/${D}/contingentValues`,{responseType:"json",
query:{f:"json"},...N}).then(S=>S.data)});return function(k,D,N){return p.apply(this,arguments)}}();u._getSubtypeEnterprise=function(p){var k=this.layer.sourceJSON;let D;k.subtypes&&(k=k.subtypes.find(N=>N.code===p),D=C.fromJSON(k));return D?D:null};u._getSubtypeAGOL=function(p){var k=this.layer.sourceJSON;let D;k.subtypes&&(k=k.subtypes.find(N=>N.name===p),D=C.fromJSON(k));return D?D:null};u._getDomain=function(p,k){p=p?p.domains[k]:this.layer.getFieldDomain(k);return"inherited"===p.type?this.layer.getFieldDomain(k):
p};return r}(F.JSONSupportMixin(f));l.__decorate([I.property({constructOnly:!0})],F.prototype,"layer",void 0);l.__decorate([I.property({constructOnly:!0})],F.prototype,"request",void 0);l.__decorate([I.property({type:[x]})],F.prototype,"fieldGroups",void 0);l.__decorate([I.property()],F.prototype,"fieldGroupDefinitions",void 0);return F=h=l.__decorate([A.subclass("esri.layers.support.LayerContingentValuesCache")],F)})},"esri/layers/support/Contingency":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.isRetired=!1;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"id",void 0);l.__decorate([F.property()],b.prototype,"isRetired",void 0);l.__decorate([F.property()],b.prototype,"subtype",void 0);l.__decorate([F.property()],b.prototype,"values",void 0);return b=l.__decorate([O.subclass("esri.layers.support.Contingency")],b)})},"esri/layers/support/ContingencyConstraintViolation":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){return L.call(this,A)||this}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"fieldGroup",void 0);l.__decorate([F.property()],b.prototype,"type",void 0);return b=l.__decorate([O.subclass("esri.layers.support.ContingencyConstraintViolation")],b)})},"esri/layers/support/ContingentValuesResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){return L.call(this,A)||this}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"contingentValuesAllGroups",void 0);l.__decorate([F.property()],b.prototype,"contingentValuesByFieldGroup",void 0);return b=l.__decorate([O.subclass("esri.layers.support.ContingentValuesResult")],b)})},"esri/layers/support/FieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.fields=null;A.isEditingRestrictive=!1;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"name",void 0);l.__decorate([F.property()],b.prototype,"fields",void 0);l.__decorate([F.property()],b.prototype,"isEditingRestrictive",void 0);l.__decorate([F.property()],b.prototype,"contingencies",void 0);return b=l.__decorate([O.subclass("esri.layers.support.FieldGroup")],b)})},"esri/layers/support/Subtype":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(){var A=L.apply(this,arguments)||this;A.code=null;A.defaultValues={};A.domains={};A.name=null;return A}d._inheritsLoose(H,L);return H}(b.JSONSupport);l.__decorate([F.property({type:Number,json:{write:!0}})],b.prototype,"code",void 0);l.__decorate([F.property({type:Object,json:{write:!0}})],b.prototype,"defaultValues",void 0);l.__decorate([F.property({type:Object,json:{write:!0}})],b.prototype,"domains",void 0);l.__decorate([F.property({type:String,
json:{write:!0}})],b.prototype,"name",void 0);return b=l.__decorate([O.subclass("esri.layers.support.Subtype")],b)})},"esri/widgets/FeatureForm/InputField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/reactiveUtils ../../core/uid ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/CodedValueDomain ../../layers/support/Domain ../../layers/support/InheritedDomain ../../layers/support/RangeDomain ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g){function r(K){return 1E7<=K||-1E7>=K}function u(K){return!!K&&"maxLength"in K}var p;(function(K){K.Text="text";K.Number="number";K.Date="date";K.Unsupported="unsupported"})(p||(p={}));var k;(k||(k={})).TOO_SHORT="length-validation-error::too-short";const D={type:"number"},N={type:"number",intlOptions:{notation:"scientific"}},S={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}},
P=["editable","required","value","visibility"];b=function(K){function e(w){w=K.call(this,w)||this;w._storedValue=null;w._expressionTrackingHandles=new Map;w.arcade=null;w.editableFunction=null;w.id=O.generateUID().toString();w.requiredFunction=null;w.expressionTrackingProvider=null;w.valueFunction=null;w.visibilityFunction=null;w.feature=null;w.field=null;w.fieldElement=null;w.layer=null;w.description=null;w.inputType=null;w.error=null;w.group=null;w.hint=null;w.messages=null;w.name=null;return w}
d._inheritsLoose(e,K);var q=e.prototype;q.initialize=function(){const w=P.filter(R=>"value"!==R);this.own(w.map(R=>I.watch(()=>this.get(`${R}Function`),Q=>{J.isSome(Q)?this._registerExpressionWithTrackingProvider(R):this._unregisterExpressionWithTrackingProvider(R)},I.syncAndInitial)))};q.destroy=function(){for(const w of this._expressionTrackingHandles.values())w.remove()};q._isDomainCompatible=function(w){const {field:R}=this;if("coded-value"===(null==w?void 0:w.type)){const Q=typeof w.codedValues[0].code;
if("string"===Q&&h.isStringField(R)||"number"===Q&&h.isNumericField(R))return!0}return"range"===(null==w?void 0:w.type)&&h.isNumericField(R)||h.isDateField(R)?!0:!1};q._validate=function(){const {domain:w,field:R,initialFeature:Q,minLength:c,required:z,type:B,valid:U,value:Y}=this,aa=z&&null===Y,ca=void 0!==U;return!aa&&Q.getAttribute(R.name)===Y&&ca?null:aa?h.TypeValidationError.INVALID_TYPE:"text"===B&&-1<c&&"string"===typeof Y&&Y.length<c?k.TOO_SHORT:w?null!==Y||z?C.validateDomainValue(w,Y):null:
h.validateFieldValue(R,Y)};q._isVisibleByDefault=function(){var w;const R=null==(w=this.field)?void 0:w.type;return"oid"!==R&&"global-id"!==R&&!this._isGeometryField()};q._isEditorField=function(){return h.getFeatureEditFields(this.layer).includes(this.name)};q._isGeometryField=function(){return h.getFeatureGeometryFields(this.layer).includes(this.name)};q._shouldUseValueExpression=function(){const w=this._layerFieldAllowsEdits&&!this._configAllowsEdits&&J.isSome(this.valueFunction);w?this._registerExpressionWithTrackingProvider("value"):
this._unregisterExpressionWithTrackingProvider("value");return w};q._toErrorMessage=function(){const {domain:w,field:R,messages:Q,minLength:c,value:z,required:B,type:U}=this;var Y=this.error;return B&&null===z?Q.validationErrors.cannotBeNull:Y===C.DomainValidationError.VALUE_OUT_OF_RANGE||Y===h.NumericRangeValidationError.OUT_OF_RANGE?(Y=C.getDomainRange(w)||h.getFieldRange(R),g.substitute(Q.validationErrors.outsideRange,Y,{format:{max:"date"===U?S:r(Y.max)?N:D,min:"date"===U?S:r(Y.min)?N:D}})):Y===
C.DomainValidationError.INVALID_CODED_VALUE?Q.validationErrors.invalidCodedValue:Y===h.TypeValidationError.INVALID_TYPE?Q.validationErrors.invalidType:Y===k.TOO_SHORT?g.substitute(Q.validationErrors.tooShort,{min:c}):null};q._registerExpressionWithTrackingProvider=function(w){const {_expressionTrackingHandles:R,expressionTrackingProvider:Q}=this;if(!J.isNone(Q)&&!R.has(w)){var c=`evaluated${v(w)}Expression`,z=Q.registerExpression(()=>this.notifyChange(c));R.set(w,z)}};q._unregisterExpressionWithTrackingProvider=
function(w){const {_expressionTrackingHandles:R}=this,Q=R.get(w);Q&&(Q.remove(),R.delete(w))};d._createClass(e,[{key:"_configAllowsEdits",get:function(){var w,R,Q;const {fieldElement:c,layer:z,name:B}=this;if(J.isSome(c))return c.editableExpression?this.evaluatedEditableExpression:!1!==c.editable;const U="subtype-group"!==(null==z?void 0:z.type)?null==z?void 0:null==(w=z.popupTemplate)?void 0:null==(R=w.fieldInfos)?void 0:R.find(({fieldName:Y})=>Y===B):null;return null!=(Q=null==U?void 0:U.isEditable)?
Q:!0}},{key:"_layerFieldAllowsEdits",get:function(){const {field:w,layer:R}=this;return(null==R?void 0:R.capabilities.operations.supportsEditing)&&(null==w?void 0:w.editable)}},{key:"isUsingValueExpression",get:function(){return this._shouldUseValueExpression()}},{key:"evaluatedEditableExpression",get:function(){const {editableFunction:w,spatialReference:R}=this;if(J.isNone(w))return null;const {arcade:Q}=this,c=Q.arcadeUtils.getViewInfo({spatialReference:R});return Q.arcadeUtils.executeFunction(w,
Q.arcadeUtils.createExecContext(this.feature,c))}},{key:"evaluatedRequiredExpression",get:function(){const {requiredFunction:w,spatialReference:R}=this;if(J.isNone(w))return null;const {arcade:Q}=this,c=Q.arcadeUtils.getViewInfo({spatialReference:R});return Q.arcadeUtils.executeFunction(w,Q.arcadeUtils.createExecContext(this.feature,c))}},{key:"evaluatedVisibilityExpression",get:function(){const {visibilityFunction:w,spatialReference:R}=this;if(J.isNone(w))return null;const {arcade:Q}=this,c=Q.arcadeUtils.getViewInfo({spatialReference:R});
return Q.arcadeUtils.executeFunction(w,Q.arcadeUtils.createExecContext(this.feature,c))}},{key:"evaluatedValueExpression",get:function(){const {valueFunction:w,spatialReference:R}=this;if(J.isNone(w))return null;const {arcade:Q}=this,c=Q.arcadeUtils.getViewInfo({spatialReference:R});return Q.arcadeUtils.executeFunction(w,Q.arcadeUtils.createExecContext(this.feature,c))}},{key:"initialFeature",set:function(w){this._set("initialFeature",w);this.notifyChange("valid")}},{key:"domain",get:function(){var w,
{typeIdField:R}=this.layer;const Q=R===this.name;var c=null==(w=this.field)?void 0:w.domain;if(Q&&!c)return{layer:R}=this,R="subtype-group"===R.type?R.sublayers.map(({subtypeCode:z,title:B})=>({id:z,name:B})):R.types.map(({id:z,name:B})=>({code:z,name:B})),new y({name:"__internal-type-based-coded-value-domain__",codedValues:R});({feature:w}=this);R=R&&this.layer.getFieldDomain(this.name,{feature:w})||c;c=J.get(this.fieldElement,"domain");return J.isSome(c)&&this._isDomainCompatible(c)?c:R}},{key:"editable",
get:function(){var w;return this._layerFieldAllowsEdits?null!=(w=this.evaluatedEditableExpression)?w:this._configAllowsEdits:!1}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var w,{fieldElement:R}=this;R=J.isSome(R)&&"datetime-picker"===(null==(w=R.input)?void 0:w.type)?R.input.includeTime:void 0;return void 0===R?!0:R}},{key:"label",get:function(){return J.isSome(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}},
{key:"maxLength",get:function(){if(this.type===p.Date)return-1;const {field:w,fieldElement:R}=this,Q=null==w?void 0:w.length,c=J.isSome(R)&&u(R.input)?R.input.maxLength:NaN;return!isNaN(c)&&-1<=c&&(-1===Q||c<=Q)?c:Q}},{key:"minLength",get:function(){if(this.type===p.Date)return-1;const {field:w,fieldElement:R}=this,Q=null==w?void 0:w.length,c=J.isSome(R)&&u(R.input)?R.input.minLength:NaN;return!isNaN(c)&&-1<=c&&(-1===Q||c<=Q)?c:-1}},{key:"required",get:function(){const {editable:w,evaluatedRequiredExpression:R,
field:Q,visible:c}=this;return w?!1===(null==Q?void 0:Q.nullable)?!0:c&&J.isSome(R)?R:!1:!1},set:function(w){J.isNone(w)?this._clearOverride("required"):this._override("required",w)}},{key:"spatialReference",get:function(){var w;return(null==(w=this.layer)?void 0:w.spatialReference)||null},set:function(w){void 0===w?this._clearOverride("spatialReference"):this._override("spatialReference",w)}},{key:"submittable",get:function(){const {field:w,required:R,valid:Q,value:c}=this;return R&&J.isNone(c)?
!1:Q?!0:this.initialFeature.getAttribute(w.name)===c}},{key:"type",get:function(){const {field:w}=this;return h.isNumericField(w)?p.Number:h.isStringField(w)?p.Text:h.isDateField(w)?p.Date:p.Unsupported}},{key:"valid",get:function(){const w=this.editable?this._validate():null;this._set("error",w);return null===w}},{key:"value",get:function(){if(this._shouldUseValueExpression()){const w=this.evaluatedValueExpression;return this.type===p.Date&&w instanceof Date?w.getTime():J.isSome(w)&&"object"===typeof w?
w.toString():w}return this.get("_storedValue")},set:function(w){this.notifyChange("evaluatedVisibilityExpression");this.set("_storedValue",w)}},{key:"visible",get:function(){if(this._isEditorField())return!1;if(J.isSome(this.fieldElement)){var w;return null!=(w=this.evaluatedVisibilityExpression)?w:!0}return this._isVisibleByDefault()}}]);return e}(f.HandleOwnerMixin(F));l.__decorate([L.property()],b.prototype,"_storedValue",void 0);l.__decorate([L.property()],b.prototype,"_configAllowsEdits",null);
l.__decorate([L.property()],b.prototype,"_layerFieldAllowsEdits",null);l.__decorate([L.property()],b.prototype,"arcade",void 0);l.__decorate([L.property()],b.prototype,"editableFunction",void 0);l.__decorate([L.property()],b.prototype,"requiredFunction",void 0);l.__decorate([L.property()],b.prototype,"expressionTrackingProvider",void 0);l.__decorate([L.property()],b.prototype,"valueFunction",void 0);l.__decorate([L.property()],b.prototype,"isUsingValueExpression",null);l.__decorate([L.property()],
b.prototype,"visibilityFunction",void 0);l.__decorate([L.property()],b.prototype,"evaluatedEditableExpression",null);l.__decorate([L.property()],b.prototype,"evaluatedRequiredExpression",null);l.__decorate([L.property()],b.prototype,"evaluatedVisibilityExpression",null);l.__decorate([L.property()],b.prototype,"evaluatedValueExpression",null);l.__decorate([L.property()],b.prototype,"feature",void 0);l.__decorate([L.property()],b.prototype,"field",void 0);l.__decorate([L.property()],b.prototype,"fieldElement",
void 0);l.__decorate([L.property()],b.prototype,"initialFeature",null);l.__decorate([L.property()],b.prototype,"layer",void 0);l.__decorate([L.property({aliasOf:"fieldElement.description"})],b.prototype,"description",void 0);l.__decorate([L.property()],b.prototype,"domain",null);l.__decorate([L.property()],b.prototype,"editable",null);l.__decorate([L.property({aliasOf:"fieldElement.input.type"})],b.prototype,"inputType",void 0);l.__decorate([L.property({readOnly:!0})],b.prototype,"error",void 0);
l.__decorate([L.property({dependsOn:["error","messages","value"]})],b.prototype,"errorMessage",null);l.__decorate([L.property()],b.prototype,"group",void 0);l.__decorate([L.property({aliasOf:"fieldElement.hint"})],b.prototype,"hint",void 0);l.__decorate([L.property()],b.prototype,"includeTime",null);l.__decorate([L.property()],b.prototype,"label",null);l.__decorate([L.property()],b.prototype,"maxLength",null);l.__decorate([L.property()],b.prototype,"minLength",null);l.__decorate([L.property()],b.prototype,
"messages",void 0);l.__decorate([L.property({aliasOf:"field.name"})],b.prototype,"name",void 0);l.__decorate([L.property()],b.prototype,"required",null);l.__decorate([L.property()],b.prototype,"spatialReference",null);l.__decorate([L.property()],b.prototype,"submittable",null);l.__decorate([L.property()],b.prototype,"type",null);l.__decorate([L.property()],b.prototype,"valid",null);l.__decorate([L.property({value:null})],b.prototype,"value",null);l.__decorate([L.property()],b.prototype,"visible",
null);b=l.__decorate([n.subclass("esri.widgets.FeatureForm.InputField")],b);const v=K=>K.charAt(0).toUpperCase()+K.slice(1);return b})},"esri/widgets/FeatureForm/InputFieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m){const n=["visibility"];b=function(G){function E(C){C=G.call(this,C)||this;C._expressionTrackingHandles=new Map;C.arcade=null;C.visibilityExpression=null;C.description=null;C.expressionTrackingProvider=null;C.feature=null;C.groupElement=null;C.label=null;C.spatialReference=null;return C}d._inheritsLoose(E,G);var x=E.prototype;x.initialize=function(){this.own([...n.map(C=>J.watch(()=>this.get(`${C}Function`),h=>{f.isSome(h)?this._registerExpressionWithTrackingProvider(C):
this._unregisterExpressionWithTrackingProvider(C)},J.syncAndInitial)),J.watch(()=>[this.visible,this.inputFields],([C])=>{const {inputFields:h}=this;C=C?void 0:!1;for(const g of h)g.required=C},{initial:!0,equals:(C,h)=>h[0]===C[0]&&h[1]===C[1]})])};x.destroy=function(){for(const C of this._expressionTrackingHandles.values())C.remove()};x._registerExpressionWithTrackingProvider=function(C){const {_expressionTrackingHandles:h,expressionTrackingProvider:g}=this;if(!f.isNone(g)&&!h.has(C)){var r=`evaluated${y(C)}Expression`,
u=g.registerExpression(()=>this.notifyChange(r));h.set(C,u)}};x._unregisterExpressionWithTrackingProvider=function(C){const {_expressionTrackingHandles:h}=this,g=h.get(C);g&&(g.remove(),h.delete(C))};x._dirtyEvaluatedVisibilityExpression=function(){const {groupElement:C}=this;f.isSome(C)&&C.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")};d._createClass(E,[{key:"visibilityFunction",set:function(C){this._set("visibilityFunction",C);f.isSome(C)?this._registerExpressionWithTrackingProvider("visibility"):
this._unregisterExpressionWithTrackingProvider("visibility")}},{key:"evaluatedVisibilityExpression",get:function(){const {visibilityFunction:C,spatialReference:h}=this;if(!f.isNone(C)){var {arcade:g}=this,r=g.arcadeUtils.getViewInfo({spatialReference:f.unwrap(h)});return g.arcadeUtils.executeFunction(C,g.arcadeUtils.createExecContext(this.feature,r))}}},{key:"inputFields",get:function(){return this._get("inputFields")},set:function(C){this.handles.removeAll();C&&this.handles.add(C.map(h=>J.watch(()=>
h.visible,()=>this._dirtyEvaluatedVisibilityExpression())));this._set("inputFields",C)}},{key:"state",get:function(){return f.isSome(this.groupElement)&&this.groupElement.initialState||"expanded"},set:function(C){f.isNone(C)?this._clearOverride("state"):this._override("state",C)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibilityExpression&&this.inputFields&&this.inputFields.some(C=>C.visible)}}]);return E}(F.HandleOwnerMixin(b));l.__decorate([A.property()],b.prototype,"arcade",void 0);
l.__decorate([I.aliasOf("groupElement.visibilityExpression")],b.prototype,"visibilityExpression",void 0);l.__decorate([A.property()],b.prototype,"visibilityFunction",null);l.__decorate([A.property()],b.prototype,"evaluatedVisibilityExpression",null);l.__decorate([I.aliasOf("groupElement.description")],b.prototype,"description",void 0);l.__decorate([A.property()],b.prototype,"expressionTrackingProvider",void 0);l.__decorate([A.property()],b.prototype,"feature",void 0);l.__decorate([A.property()],b.prototype,
"groupElement",void 0);l.__decorate([A.property()],b.prototype,"inputFields",null);l.__decorate([I.aliasOf("groupElement.label")],b.prototype,"label",void 0);l.__decorate([A.property()],b.prototype,"spatialReference",void 0);l.__decorate([A.property()],b.prototype,"state",null);l.__decorate([A.property()],b.prototype,"visible",null);b=l.__decorate([m.subclass("esri.widgets.FeatureForm.InputFieldGroup")],b);const y=G=>G.charAt(0).toUpperCase()+G.slice(1);return b})},"esri/widgets/support/Heading":function(){define(["exports",
"../../core/mathUtils","./widgetUtils","./jsxFactory"],function(d,l,b,F){const f={heading:"esri-widget__heading"};d.CSS=f;d.Heading=function(J,I){const O=l.clamp(Math.ceil(J.level),1,6),L=`h${O}`;delete J.level;return F.tsx(L,{...J,class:b.classes(f.heading,J.class),role:"heading","aria-level":String(O)},I)};d.incrementHeadingLevel=function(J,I=1){return l.clamp(Math.ceil(J+I),1,6)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/datetime":function(){define(["exports"],
function(d){function l(a){return"undefined"===typeof a}function b(a){return"number"===typeof a}function F(a){return"number"===typeof a&&0===a%1}function f(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function J(a,t,W){if(0!==a.length)return a.reduce((Z,fa)=>{fa=[t(fa),fa];return Z?W(Z[0],fa[0])===Z[0]?Z:fa:fa},null)[1]}function I(a,t){return t.reduce((W,Z)=>{W[Z]=a[Z];return W},{})}function O(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function L(a,
t,W){return F(a)&&a>=t&&a<=W}function H(a,t=2){return 0>a?"-"+(""+-a).padStart(t,"0"):(""+a).padStart(t,"0")}function A(a){if(!l(a)&&null!==a&&""!==a)return parseInt(a,10)}function m(a){if(!l(a)&&null!==a&&""!==a)return parseFloat(a)}function n(a){if(!l(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function y(a,t,W=!1){t=10**t;return(W?Math.trunc:Math.round)(a*t)/t}function G(a){return 0===a%4&&(0!==a%100||0===a%400)}function E(a,t){var W=t-1;W=W-12*Math.floor(W/12)+1;return 2===
W?G(a+(t-W)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][W-1]}function x(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900));return+t}function C(a){var t=a-1;t=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===t?53:52}function h(a){return 99<a?a:60<a?1900+a:2E3+a}function g(a,t,W,Z=null){a=new Date(a);const fa=
{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Z&&(fa.timeZone=Z);return(t=(new Intl.DateTimeFormat(W,{timeZoneName:t,...fa})).formatToParts(a).find(oa=>"timezonename"===oa.type.toLowerCase()))?t.value:null}function r(a,t){a=parseInt(a,10);Number.isNaN(a)&&(a=0);t=parseInt(t,10)||0;t=0>a||Object.is(a,-0)?-t:t;return 60*a+t}function u(a){const t=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(t))throw new mb(`Invalid unit value ${a}`);return t}
function p(a,t){const W={};for(const Z in a)if(O(a,Z)){const fa=a[Z];void 0!==fa&&null!==fa&&(W[t(Z)]=u(fa))}return W}function k(a,t){const W=Math.trunc(Math.abs(a/60)),Z=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(t){case "short":return`${a}${H(W,2)}:${H(Z,2)}`;case "narrow":return`${a}${W}${0<Z?`:${Z}`:""}`;case "techie":return`${a}${H(W,2)}${H(Z,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`);}}function D(a){return I(a,["hour","minute","second","millisecond"])}
function N(a){switch(a){case "narrow":return[...Od];case "short":return[...Mc];case "long":return[...Pd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function S(a){switch(a){case "narrow":return[...Qd];case "short":return[...Nc];case "long":return[...Oc];case "numeric":return"1234567".split("");default:return null}}function P(a){switch(a){case "narrow":return[...Rd];case "short":return[...Sd];
case "long":return[...Td];default:return null}}function v(a,t,W="always",Z=!1){const fa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var oa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===W&&oa)switch(W="days"===a,t){case 1:return W?"tomorrow":`next ${fa[a][0]}`;case -1:return W?"yesterday":`last ${fa[a][0]}`;case 0:return W?"today":`this ${fa[a][0]}`}W=
Object.is(t,-0)||0>t;t=Math.abs(t);oa=1===t;const Aa=fa[a];a=Z?oa?Aa[1]:Aa[2]||Aa[1]:oa?fa[a][0]:a;return W?`${t} ${a} ago`:`in ${t} ${a}`}function K(a,t){let W="";for(const Z of a)W=Z.literal?W+Z.val:W+t(Z.val);return W}function e(a,t){if(l(a)||null===a)return t;if(a instanceof Ub)return a;if("string"===typeof a){const W=a.toLowerCase();return"local"===W||"system"===W?t:"utc"===W||"gmt"===W?ib.utcInstance:ib.parseSpecifier(W)||Bb.create(a)}return b(a)?ib.instance(a):"object"===typeof a&&a.offset&&
"number"===typeof a.offset?a:new Ud(a)}function q(a,t={}){const W=JSON.stringify([a,t]);let Z=Pc[W];Z||(Z=new Intl.ListFormat(a,t),Pc[W]=Z);return Z}function w(a,t={}){const W=JSON.stringify([a,t]);let Z=tc[W];Z||(Z=new Intl.DateTimeFormat(a,t),tc[W]=Z);return Z}function R(a,t={}){const W=JSON.stringify([a,t]);let Z=Yb[W];Z||(Z=new Intl.NumberFormat(a,t),Yb[W]=Z);return Z}function Q(a,t={}){const {base:W,...Z}=t,fa=JSON.stringify([a,Z]);let oa=uc[fa];oa||(oa=new Intl.RelativeTimeFormat(a,t),uc[fa]=
oa);return oa}function c(a){const t=[];for(let W=1;12>=W;W++){const Z=V.utc(2016,W,1);t.push(a(Z))}return t}function z(a){const t=[];for(let W=1;7>=W;W++){const Z=V.utc(2016,11,13+W);t.push(a(Z))}return t}function B(a,t,W,Z,fa){a=a.listingMode(W);return"error"===a?null:"en"===a?Z(t):fa(t)}function U(...a){a=a.reduce((t,W)=>t+W.source,"");return RegExp(`^${a}$`)}function Y(...a){return t=>a.reduce(([W,Z,fa],oa)=>{const [Aa,Fa,Ja]=oa(t,fa);return[{...W,...Aa},Fa||Z,Ja]},[{},null,1]).slice(0,2)}function aa(a,
...t){if(null==a)return[null,null];for(const [W,Z]of t)if(t=W.exec(a))return Z(t);return[null,null]}function ca(...a){return(t,W)=>{const Z={};let fa;for(fa=0;fa<a.length;fa++)Z[a[fa]]=A(t[W+fa]);return[Z,null,W+fa]}}function na(a,t,W){a=a[t];return l(a)?W:A(a)}function ba(a,t){return[{hours:na(a,t,0),minutes:na(a,t+1,0),seconds:na(a,t+2,0),milliseconds:n(a[t+3])},null,t+4]}function ra(a,t){const W=!a[t]&&!a[t+1];a=r(a[t+1],a[t+2]);return[{},W?null:ib.instance(a),t+3]}function ua(a,t){return[{},a[t]?
Bb.create(a[t]):null,t+1]}function Ba(a){const [t,W,Z,fa,oa,Aa,Fa,Ja,Ta]=a,Na="-"===t[0];a=Ja&&"-"===Ja[0];const Pa=(Va,bb=!1)=>void 0!==Va&&(bb||Va&&Na)?-Va:Va;return[{years:Pa(m(W)),months:Pa(m(Z)),weeks:Pa(m(fa)),days:Pa(m(oa)),hours:Pa(m(Aa)),minutes:Pa(m(Fa)),seconds:Pa(m(Ja),"-0"===Ja),milliseconds:Pa(n(Ta),a)}]}function ka(a,t,W,Z,fa,oa,Aa){t={year:2===t.length?h(A(t)):A(t),month:Mc.indexOf(W)+1,day:A(Z),hour:A(fa),minute:A(oa)};Aa&&(t.second=A(Aa));a&&(t.weekday=3<a.length?Oc.indexOf(a)+1:
Nc.indexOf(a)+1);return t}function ta(a){const [,t,W,Z,fa,oa,Aa,Fa,Ja,Ta,Na,Pa]=a;a=ka(t,fa,Z,W,oa,Aa,Fa);let Va;Va=Ja?Vd[Ja]:Ta?0:r(Na,Pa);return[a,new ib(Va)]}function ma(a){const [,t,W,Z,fa,oa,Aa,Fa]=a;return[ka(t,fa,Z,W,oa,Aa,Fa),ib.utcInstance]}function la(a){const [,t,W,Z,fa,oa,Aa,Fa]=a;return[ka(t,Fa,W,Z,fa,oa,Aa),ib.utcInstance]}function pa(a,t,W=!1){a={values:W?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy};return new Ua(a)}
function sa(a,t,W,Z,fa){a=a[fa][W];var oa=t[W]/a;oa=Math.sign(oa)!==Math.sign(Z[fa])&&0!==Z[fa]&&1>=Math.abs(oa)?0>oa?Math.floor(oa):Math.ceil(oa):Math.trunc(oa);Z[fa]+=oa;t[W]-=oa*a}function da(a,t){Wd.reduce((W,Z)=>{if(l(t[Z]))return W;W&&sa(a,t,W,t,Z);return Z},null)}function ea(a,t){a=t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Ua.fromMillis(a).as("days"))}function ha(a,t,W){var Z=[["years",(Fa,Ja)=>Ja.year-Fa.year],
["quarters",(Fa,Ja)=>Ja.quarter-Fa.quarter],["months",(Fa,Ja)=>Ja.month-Fa.month+12*(Ja.year-Fa.year)],["weeks",(Fa,Ja)=>{Fa=ea(Fa,Ja);return(Fa-Fa%7)/7}],["days",ea]];const fa={};let oa,Aa;for(const [Fa,Ja]of Z)0<=W.indexOf(Fa)&&(oa=Fa,Z=Ja(a,t),Aa=a.plus({[Fa]:Z}),Aa>t?(a=a.plus({[Fa]:Z-1}),--Z):a=Aa,fa[Fa]=Z);return[a,fa,Aa,oa]}function ja(a,t,W,Z){let [fa,oa,Aa,Fa]=ha(a,t,W);a=t-fa;W=W.filter(Ja=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ja));0===W.length&&(Aa<t&&(Aa=fa.plus({[Fa]:1})),
Aa!==fa&&(oa[Fa]=(oa[Fa]||0)+a/(Aa-fa)));t=Ua.fromObject(oa,Z);return 0<W.length?Ua.fromMillis(a,Z).shiftTo(...W).plus(t):t}function va({numberingSystem:a},t=""){return new RegExp(`${vc[a||"latn"]}${t}`)}function qa(a,t=W=>W){return{regex:a,deser:([W])=>{{let Z=parseInt(W,10);if(isNaN(Z)){Z="";for(let fa=0;fa<W.length;fa++){const oa=W.charCodeAt(fa);if(-1!==W[fa].search(vc.hanidec))Z+=Xd.indexOf(W[fa]);else for(const Aa in Qc){const [Fa,Ja]=Qc[Aa];oa>=Fa&&oa<=Ja&&(Z+=oa-Fa)}}W=parseInt(Z,10)}else W=
Z}return t(W)}}}function wa(a){return a.replace(/\./g,"\\.?").replace(wc,Rc)}function Ca(a,t){return null===a?null:{regex:RegExp(a.map(wa).join("|")),deser:([W])=>a.findIndex(Z=>W.replace(/\./g,"").replace(wc," ").toLowerCase()===Z.replace(/\./g,"").replace(wc," ").toLowerCase())+t}}function Ka(a,t){return{regex:a,deser:([,W,Z])=>r(W,Z),groups:t}}function Ga(a){return{regex:a,deser:([t])=>t}}function Ea(a,t){const W=va(t),Z=va(t,"{2}"),fa=va(t,"{3}"),oa=va(t,"{4}"),Aa=va(t,"{6}"),Fa=va(t,"{1,2}"),
Ja=va(t,"{1,3}"),Ta=va(t,"{1,6}"),Na=va(t,"{1,9}"),Pa=va(t,"{2,4}"),Va=va(t,"{4,6}"),bb=tb=>({regex:RegExp(tb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Hb])=>Hb,literal:!0}),qb=(tb=>{if(a.literal)return bb(tb);switch(tb.val){case "G":return Ca(t.eras("short",!1),0);case "GG":return Ca(t.eras("long",!1),0);case "y":return qa(Ta);case "yy":return qa(Pa,h);case "yyyy":return qa(oa);case "yyyyy":return qa(Va);case "yyyyyy":return qa(Aa);case "M":return qa(Fa);case "MM":return qa(Z);
case "MMM":return Ca(t.months("short",!0,!1),1);case "MMMM":return Ca(t.months("long",!0,!1),1);case "L":return qa(Fa);case "LL":return qa(Z);case "LLL":return Ca(t.months("short",!1,!1),1);case "LLLL":return Ca(t.months("long",!1,!1),1);case "d":return qa(Fa);case "dd":return qa(Z);case "o":return qa(Ja);case "ooo":return qa(fa);case "HH":return qa(Z);case "H":return qa(Fa);case "hh":return qa(Z);case "h":return qa(Fa);case "mm":return qa(Z);case "m":return qa(Fa);case "q":return qa(Fa);case "qq":return qa(Z);
case "s":return qa(Fa);case "ss":return qa(Z);case "S":return qa(Ja);case "SSS":return qa(fa);case "u":return Ga(Na);case "uu":return Ga(Fa);case "uuu":return qa(W);case "a":return Ca(t.meridiems(),0);case "kkkk":return qa(oa);case "kk":return qa(Pa,h);case "W":return qa(Fa);case "WW":return qa(Z);case "E":case "c":return qa(W);case "EEE":return Ca(t.weekdays("short",!1,!1),1);case "EEEE":return Ca(t.weekdays("long",!1,!1),1);case "ccc":return Ca(t.weekdays("short",!0,!1),1);case "cccc":return Ca(t.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return Ka(new RegExp(`([+-]${Fa.source})(?::(${Z.source}))?`),2);case "ZZZ":return Ka(new RegExp(`([+-]${Fa.source})(${Z.source})?`),2);case "z":return Ga(/[a-z_+-/]{1,256}?/i);default:return bb(tb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};qb.token=a;return qb}function Da(a){return[`^${a.map(t=>t.regex).reduce((t,W)=>`${t}(${W.source})`,"")}$`,a]}function La(a,t,W){if(a=a.match(t)){t={};let Z=1;for(const fa in W)if(O(W,fa)){const oa=W[fa],
Aa=oa.groups?oa.groups+1:1;!oa.literal&&oa.token&&(t[oa.token.val[0]]=oa.deser(a.slice(Z,Z+Aa)));Z+=Aa}return[a,t]}return[a,{}]}function Oa(a){const t=fa=>{switch(fa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};
let W=null,Z;l(a.z)||(W=Bb.create(a.z));l(a.Z)||(W||(W=new ib(a.Z)),Z=a.Z);l(a.q)||(a.M=3*(a.q-1)+1);l(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);l(a.u)||(a.S=n(a.u));return[Object.keys(a).reduce((fa,oa)=>{const Aa=t(oa);Aa&&(fa[Aa]=a[oa]);return fa},{}),W,Z]}function Ra(){Zb||(Zb=V.fromMillis(1555555555555));return Zb}function Ma(a,t){if(a.literal)return a;const W=kb.macroTokenToFormatOpts(a.val);if(!W)return a;t=kb.create(t,W).formatDateTimeParts(Ra()).map(Z=>
{{const {type:oa,value:Aa}=Z;if("literal"===oa)Z={literal:!0,val:Aa};else{Z=W[oa];var fa=Sc[oa];"object"===typeof fa&&(fa=fa[Z]);Z=fa?{literal:!1,val:fa}:void 0}}return Z});return t.includes(void 0)?a:t}function Qa(a,t){return Array.prototype.concat(...a.map(W=>Ma(W,t)))}function za(a,t,W){W=Qa(kb.parseFormat(W),a);var Z=W.map(oa=>Ea(oa,a));const fa=Z.find(oa=>oa.invalidReason);if(fa)return{input:t,tokens:W,invalidReason:fa.invalidReason};{const [oa,Aa]=Da(Z);Z=RegExp(oa,"i");const [Fa,Ja]=La(t,Z,
Aa),[Ta,Na,Pa]=Ja?Oa(Ja):[null,null,void 0];if(O(Ja,"a")&&O(Ja,"H"))throw new Vb("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:W,regex:Z,rawMatches:Fa,matches:Ja,result:Ta,zone:Na,specificOffset:Pa}}}function Ya(a,t){return new rb("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function sb(a,t,W){t=new Date(Date.UTC(a,t-1,W));100>a&&0<=a&&t.setUTCFullYear(t.getUTCFullYear()-1900);a=t.getUTCDay();return 0===a?7:a}function vb(a,
t){a=G(a)?$b:ac;const W=a.findIndex(Z=>Z<t);return{month:W+1,day:t-a[W]}}function M(a){const {year:t,month:W,day:Z}=a;var fa=Z+(G(t)?$b:ac)[W-1];const oa=sb(t,W,Z);fa=Math.floor((fa-oa+10)/7);let Aa;1>fa?(Aa=t-1,fa=C(Aa)):fa>C(t)?(Aa=t+1,fa=1):Aa=t;return{weekYear:Aa,weekNumber:fa,weekday:oa,...D(a)}}function Ib(a){const {weekYear:t,weekNumber:W,weekday:Z}=a;var fa=sb(t,1,4),oa=G(t)?366:365;fa=7*W+Z-fa-3;1>fa?(oa=t-1,fa+=G(oa)?366:365):fa>oa?(oa=t+1,fa-=G(t)?366:365):oa=t;const {month:Aa,day:Fa}=
vb(oa,fa);return{year:oa,month:Aa,day:Fa,...D(a)}}function wb(a){const {year:t,month:W,day:Z}=a;var fa=Z+(G(t)?$b:ac)[W-1];return{year:t,ordinal:fa,...D(a)}}function Cb(a){const {year:t,ordinal:W}=a,{month:Z,day:fa}=vb(t,W);return{year:t,month:Z,day:fa,...D(a)}}function Jb(a){const t=F(a.year),W=L(a.month,1,12),Z=L(a.day,1,E(a.year,a.month));return t?W?Z?!1:Ya("day",a.day):Ya("month",a.month):Ya("year",a.year)}function Qb(a){const {hour:t,minute:W,second:Z,millisecond:fa}=a;a=L(t,0,23)||24===t&&0===
W&&0===Z&&0===fa;const oa=L(W,0,59),Aa=L(Z,0,59),Fa=L(fa,0,999);return a?oa?Aa?Fa?!1:Ya("millisecond",fa):Ya("second",Z):Ya("minute",W):Ya("hour",t)}function Db(a){return new rb("unsupported zone",`the zone "${a.name}" is not supported`)}function fb(a){null===a.weekData&&(a.weekData=M(a.c));return a.weekData}function xb(a,t){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new V({...a,...t,old:a})}function Rb(a,t,W){let Z=a-6E4*t;const fa=W.offset(Z);if(t===fa)return[Z,t];Z-=
6E4*(fa-t);t=W.offset(Z);return fa===t?[Z,fa]:[a-6E4*Math.min(fa,t),Math.max(fa,t)]}function Sb(a,t){a=new Date(a+6E4*t);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Kb(a,t,W){return Rb(x(a),t,W)}function X(a,t){const W=a.o;var Z=a.c.year+Math.trunc(t.years);const fa=a.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters);Z={...a.c,year:Z,month:fa,day:Math.min(a.c.day,
E(Z,fa))+Math.trunc(t.days)+7*Math.trunc(t.weeks)};t=Ua.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds");Z=x(Z);let [oa,Aa]=Rb(Z,W,a.zone);0!==t&&(oa+=t,Aa=a.zone.offset(oa));return{ts:oa,o:Aa}}function ia(a,t,W,Z,fa,oa){const {setZone:Aa,zone:Fa}=W;return a&&
0!==Object.keys(a).length?(a=V.fromObject(a,{...W,zone:t||Fa,specificOffset:oa}),Aa?a:a.setZone(Fa)):V.invalid(new rb("unparsable",`the input "${fa}" can't be parsed as ${Z}`))}function xa(a,t,W=!0){return a.isValid?kb.create($a.create("en-US"),{allowZ:W,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Ha(a,t){const W=9999<a.c.year||0>a.c.year;let Z="";W&&0<=a.c.year&&(Z+="+");Z+=H(a.c.year,W?6:4);t?(Z=Z+"-"+H(a.c.month),Z=Z+"-"+H(a.c.day)):(Z+=H(a.c.month),Z+=H(a.c.day));return Z}function Ia(a,
t,W,Z,fa,oa){let Aa=H(a.c.hour);t?(Aa=Aa+":"+H(a.c.minute),0===a.c.second&&W||(Aa+=":")):Aa+=H(a.c.minute);0===a.c.second&&W||(Aa+=H(a.c.second),0===a.c.millisecond&&Z||(Aa=Aa+"."+H(a.c.millisecond,3)));fa&&(a.isOffsetFixed&&0===a.offset&&!oa?Aa+="Z":0>a.o?(Aa=Aa+"-"+H(Math.trunc(-a.o/60)),Aa=Aa+":"+H(Math.trunc(-a.o%60))):(Aa=Aa+"+"+H(Math.trunc(a.o/60)),Aa=Aa+":"+H(Math.trunc(a.o%60))));oa&&(Aa+="["+a.zone.ianaName+"]");return Aa}function Sa(a){const t={year:"year",years:"year",month:"month",months:"month",
day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new Tc(a);return t}function Wa(a,t){const W=e(t.zone,cb.defaultZone);t=$a.fromObject(t);const Z=cb.now();
var fa;if(l(a.year))a=Z;else{for(const oa of bc)l(a[oa])&&(a[oa]=T[oa]);if(fa=Jb(a)||Qb(a))return V.invalid(fa);fa=W.offset(Z);[a,fa]=Kb(a,fa,W)}return new V({ts:a,zone:W,loc:t,o:fa})}function db(a,t,W){const Z=l(W.round)?!0:W.round,fa=(Aa,Fa)=>{Aa=y(Aa,Z||W.calendary?0:2,!0);return t.loc.clone(W).relFormatter(W).format(Aa,Fa)},oa=Aa=>W.calendary?t.hasSame(a,Aa)?0:t.startOf(Aa).diff(a.startOf(Aa),Aa).get(Aa):t.diff(a,Aa).get(Aa);if(W.unit)return fa(oa(W.unit),W.unit);for(const Aa of W.units){const Fa=
oa(Aa);if(1<=Math.abs(Fa))return fa(Fa,Aa)}return fa(a>t?-0:0,W.units[W.units.length-1])}function eb(a){let t={};0<a.length&&"object"===typeof a[a.length-1]?(t=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[t,a]}function jb(a){if(V.isDateTime(a))return a;if(a&&a.valueOf&&b(a.valueOf()))return V.fromJSDate(a);if(a&&"object"===typeof a)return V.fromObject(a);throw new mb(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class yb extends Error{}class cc extends yb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}
class dc extends yb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class ec extends yb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class Vb extends yb{}class Tc extends yb{constructor(a){super(`Invalid unit ${a}`)}}class mb extends yb{}class Eb extends yb{constructor(){super("Zone is an abstract class")}}const xc={year:"numeric",month:"numeric",day:"numeric"},Uc={year:"numeric",month:"short",day:"numeric"},Yd={year:"numeric",month:"short",day:"numeric",weekday:"short"},
Vc={year:"numeric",month:"long",day:"numeric"},Wc={year:"numeric",month:"long",day:"numeric",weekday:"long"},Xc={hour:"numeric",minute:"numeric"},Yc={hour:"numeric",minute:"numeric",second:"numeric"},Zc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},$c={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},ad={hour:"numeric",minute:"numeric",hourCycle:"h23"},bd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},cd={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},dd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},ed={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},fd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},hd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
Zd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},id={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},jd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},kd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},ld={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},md=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Pd="January February March April May June July August September October November December".split(" "),Mc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Od="JFMAMJJASOND".split(""),Oc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Nc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Qd="MTWTFSS".split(""),yc=["AM","PM"],Td=["Before Christ",
"Anno Domini"],Sd=["BC","AD"],Rd=["B","A"],nd={D:xc,DD:Uc,DDD:Vc,DDDD:Wc,t:Xc,tt:Yc,ttt:Zc,tttt:$c,T:ad,TT:bd,TTT:cd,TTTT:dd,f:ed,ff:gd,fff:id,ffff:kd,F:fd,FF:hd,FFF:jd,FFFF:ld};class kb{static create(a,t={}){return new kb(a,t)}static parseFormat(a){let t=null,W="",Z=!1;const fa=[];for(let oa=0;oa<a.length;oa++){const Aa=a.charAt(oa);"'"===Aa?(0<W.length&&fa.push({literal:Z,val:W}),t=null,W="",Z=!Z):Z?W+=Aa:Aa===t?W+=Aa:(0<W.length&&fa.push({literal:!1,val:W}),t=W=Aa)}0<W.length&&fa.push({literal:Z,
val:W});return fa}static macroTokenToFormatOpts(a){return nd[a]}constructor(a,t){this.opts=t;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...t}).format()}formatDateTime(a,t={}){return this.loc.dtFormatter(a,{...this.opts,...t}).format()}formatDateTimeParts(a,t={}){return this.loc.dtFormatter(a,{...this.opts,...t}).formatToParts()}resolvedOptions(a,t={}){return this.loc.dtFormatter(a,
{...this.opts,...t}).resolvedOptions()}num(a,t=0){if(this.opts.forceSimple)return H(a,t);const W={...this.opts};0<t&&(W.padTo=t);return this.loc.numberFormatter(W).format(a)}formatDateTimeFromString(a,t){const W="en"===this.loc.listingMode(),Z=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,fa=(Na,Pa)=>this.loc.extract(a,Na,Pa),oa=Na=>a.isOffsetFixed&&0===a.offset&&Na.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Na.format):"",Aa=(Na,Pa)=>W?N(Na)[a.month-1]:fa(Pa?{month:Na}:{month:Na,
day:"numeric"},"month"),Fa=(Na,Pa)=>W?S(Na)[a.weekday-1]:fa(Pa?{weekday:Na}:{weekday:Na,month:"long",day:"numeric"},"weekday"),Ja=Na=>{const Pa=kb.macroTokenToFormatOpts(Na);return Pa?this.formatWithSystemDefault(a,Pa):Na},Ta=Na=>W?P(Na)[0>a.year?0:1]:fa({era:Na},"era");return K(kb.parseFormat(t),Na=>{switch(Na){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/
10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return oa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return oa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return oa({format:"techie",allowZ:this.opts.allowZ});
case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return W?yc[12>a.hour?0:1]:fa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Z?fa({day:"numeric"},"day"):this.num(a.day);case "dd":return Z?fa({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Fa("short",!0);case "cccc":return Fa("long",!0);
case "ccccc":return Fa("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Fa("short",!1);case "EEEE":return Fa("long",!1);case "EEEEE":return Fa("narrow",!1);case "L":return Z?fa({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return Z?fa({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return Z?fa({month:"numeric"},"month"):this.num(a.month);
case "MM":return Z?fa({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return Z?fa({year:"numeric"},"year"):this.num(a.year);case "yy":return Z?fa({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return Z?fa({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return Z?fa({year:"numeric"},"year"):this.num(a.year,6);case "G":return Ta("short");case "GG":return Ta("long");
case "GGGGG":return Ta("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ja(Na)}})}formatDurationFromString(a,t){const W=
fa=>{switch(fa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};t=kb.parseFormat(t);const Z=t.reduce((fa,{literal:oa,val:Aa})=>oa?fa:fa.concat(Aa),[]);a=a.shiftTo(...Z.map(W).filter(fa=>fa));return K(t,(fa=>oa=>{const Aa=W(oa);return Aa?this.num(fa.get(Aa),oa.length):oa})(a))}}class rb{constructor(a,t){this.reason=a;this.explanation=t}toMessage(){return this.explanation?
`${this.reason}: ${this.explanation}`:this.reason}}class Ub{get type(){throw new Eb;}get name(){throw new Eb;}get ianaName(){return this.name}get isUniversal(){throw new Eb;}offsetName(a,t){throw new Eb;}formatOffset(a,t){throw new Eb;}offset(a){throw new Eb;}equals(a){throw new Eb;}get isValid(){throw new Eb;}}let zc=null;class Ac extends Ub{static get instance(){null===zc&&(zc=new Ac);return zc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:t,locale:W}){return g(a,t,W)}formatOffset(a,t){return k(this.offset(a),t)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let fc={};const od={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let gc={};class Bb extends Ub{static create(a){gc[a]||(gc[a]=new Bb(a));return gc[a]}static resetCache(){gc={};fc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(t){return!1}}constructor(a){super();this.zoneName=a;this.valid=Bb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:t,locale:W}){return g(a,t,W,this.name)}formatOffset(a,t){return k(this.offset(a),t)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var t=this.name;fc[t]||(fc[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));t=fc[t];if(t.formatToParts){t=t.formatToParts(a);var W=[];for(let Na=0;Na<t.length;Na++){const {type:Pa,value:Va}=t[Na],bb=od[Pa];"era"===Pa?W[bb]=Va:l(bb)||(W[bb]=parseInt(Va,10))}t=W}else{{t=t.format(a).replace(/\u200E/g,"");t=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t);const [,Na,Pa,Va,bb,qb,tb,Hb]=t;t=[Va,Na,Pa,bb,qb,tb,Hb]}}let [Z,fa,oa,Aa,Fa,Ja,Ta]=t;"BC"===Aa&&(Z=-Math.abs(Z)+1);t=x({year:Z,month:fa,day:oa,hour:24===Fa?0:Fa,minute:Ja,second:Ta,
millisecond:0});a=+a;W=a%1E3;return(t-(a-(0<=W?W:1E3+W)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let Bc=null;class ib extends Ub{static get utcInstance(){null===Bc&&(Bc=new ib(0));return Bc}static instance(a){return 0===a?ib.utcInstance:new ib(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new ib(r(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?
"UTC":`UTC${k(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${k(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,t){return k(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Ud extends Ub{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let pd=()=>Date.now(),hc="system",ic=null,qd=null,rd=null,sd;class cb{static get now(){return pd}static set now(a){pd=a}static set defaultZone(a){hc=a}static get defaultZone(){return e(hc,Ac.instance)}static get defaultLocale(){return ic}static set defaultLocale(a){ic=a}static get defaultNumberingSystem(){return qd}static set defaultNumberingSystem(a){qd=a}static get defaultOutputCalendar(){return rd}static set defaultOutputCalendar(a){rd=a}static get throwOnInvalid(){return sd}static set throwOnInvalid(a){sd=
a}static resetCaches(){$a.resetCache();Bb.resetCache()}}let Pc={},tc={},Yb={},uc={},Wb=null;class td{constructor(a,t,W){this.padTo=W.padTo||0;this.floor=W.floor||!1;const {padTo:Z,floor:fa,...oa}=W;if(!t||0<Object.keys(oa).length)t={useGrouping:!1,...W},0<W.padTo&&(t.minimumIntegerDigits=W.padTo),this.inf=R(a,t)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):y(a,3);return H(a,this.padTo)}}class $d{constructor(a,t,W){this.opts=W;if(a.zone.isUniversal){var Z=
a.offset/60*-1;Z=0<=Z?`Etc/GMT+${Z}`:`Etc/GMT${Z}`;0!==a.offset&&Bb.create(Z).valid?this.dt=a:(Z="UTC",this.dt=W.timeZoneName?a:0===a.offset?a:V.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,Z=a.zone.name);a={...this.opts};Z&&(a.timeZone=Z);this.dtf=w(t,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ae{constructor(a,t,W){this.opts={style:"long",
...W};!t&&f()&&(this.rtf=Q(a,W))}format(a,t){return this.rtf?this.rtf.format(a,t):v(t,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,t){return this.rtf?this.rtf.formatToParts(a,t):[]}}class $a{static fromOpts(a){return $a.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,t,W,Z=!1){a=a||cb.defaultLocale;var fa;(fa=a)||(Z?Z="en-US":(Wb||(Wb=(new Intl.DateTimeFormat).resolvedOptions().locale),Z=Wb),fa=Z);return new $a(fa,t||cb.defaultNumberingSystem,W||
cb.defaultOutputCalendar,a)}static resetCache(){Wb=null;tc={};Yb={};uc={}}static fromObject({locale:a,numberingSystem:t,outputCalendar:W}={}){return $a.create(a,t,W)}constructor(a,t,W,Z){var fa=a.indexOf("-u-");if(-1===fa)a=[a];else{let Ja;fa=a.substring(0,fa);try{Ja=w(a).resolvedOptions()}catch(Pa){Ja=w(fa).resolvedOptions()}const {numberingSystem:Ta,calendar:Na}=Ja;a=[fa,Ta,Na]}const [oa,Aa,Fa]=a;this.locale=oa;this.numberingSystem=t||Aa||null;this.outputCalendar=W||Fa||null;t=this.locale;W=this.numberingSystem;
if((a=this.outputCalendar)||W)t+="-u",a&&(t+=`-ca-${a}`),W&&(t+=`-nu-${W}`);this.intl=t;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Z;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&t?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?$a.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,t=!1,W=!0){return B(this,a,W,N,()=>{const Z=t?{month:a,day:"numeric"}:{month:a},fa=t?"format":"standalone";this.monthsCache[fa][a]||(this.monthsCache[fa][a]=c(oa=>this.extract(oa,Z,"month")));return this.monthsCache[fa][a]})}weekdays(a,t=!1,W=!0){return B(this,a,W,S,()=>{const Z=t?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},fa=t?"format":"standalone";this.weekdaysCache[fa][a]||(this.weekdaysCache[fa][a]=z(oa=>this.extract(oa,
Z,"weekday")));return this.weekdaysCache[fa][a]})}meridiems(a=!0){return B(this,void 0,a,()=>yc,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[V.utc(2016,11,13,9),V.utc(2016,11,13,19)].map(W=>this.extract(W,t,"dayperiod"))}return this.meridiemCache})}eras(a,t=!0){return B(this,a,t,P,()=>{const W={era:a};this.eraCache[a]||(this.eraCache[a]=[V.utc(-40,1,1),V.utc(2017,1,1)].map(Z=>this.extract(Z,W,"era")));return this.eraCache[a]})}extract(a,t,W){return(a=this.dtFormatter(a,
t).formatToParts().find(Z=>Z.type.toLowerCase()===W))?a.value:null}numberFormatter(a={}){return new td(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,t={}){return new $d(a,this.intl,t)}relFormatter(a={}){return new ae(this.intl,this.isEnglish(),a)}listFormatter(a={}){return q(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===
a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const ud=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Cc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,vd=RegExp(`${Cc.source}${`(?:${ud.source}?(?:\\[(${md.source})\\])?)?`}`),Dc=RegExp(`(?:T${vd.source})?`),be=ca("weekYear","weekNumber","weekDay"),ce=ca("year","ordinal"),wd=RegExp(`${Cc.source} ?(?:${ud.source}|(${md.source}))?`),de=RegExp(`(?: ${wd.source})?`),ee=RegExp(`^T?${Cc.source}$`),fe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Vd={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},ge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,he=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ie=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
je=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,ke=U(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Dc),le=U(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Dc),me=U(/(\d{4})-?(\d{3})/,Dc),ne=U(vd),xd=Y(function(a,t){return[{year:na(a,t),month:na(a,t+1,1),day:na(a,t+2,1)},null,t+3]},ba,ra,ua),oe=Y(be,ba,ra,ua),pe=Y(ce,ba,ra,ua),qe=Y(ba,ra,ua),re=Y(ba),se=U(/(\d{4})-(\d\d)-(\d\d)/,de),te=U(wd),ue=Y(ba,ra,ua),yd={weeks:{days:7,hours:168,minutes:10080,
seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},ve={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},
...yd},we={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...yd},Lb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Wd=Lb.slice(0).reverse();class Ua{constructor(a){const t=
"longterm"===a.conversionAccuracy||!1;this.values=a.values;this.loc=a.loc||$a.create();this.conversionAccuracy=t?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=t?we:ve;this.isLuxonDuration=!0}static fromMillis(a,t){return Ua.fromObject({milliseconds:a},t)}static fromObject(a,t={}){if(null==a||"object"!==typeof a)throw new mb(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Ua({values:p(a,Ua.normalizeUnit),loc:$a.fromObject(t),conversionAccuracy:t.conversionAccuracy})}static fromDurationLike(a){if(b(a))return Ua.fromMillis(a);
if(Ua.isDuration(a))return a;if("object"===typeof a)return Ua.fromObject(a);throw new mb(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,t){const [W]=aa(a,[fe,Ba]);return W?Ua.fromObject(W,t):Ua.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,t){const [W]=aa(a,[ee,re]);return W?Ua.fromObject(W,t):Ua.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,t=null){if(!a)throw new mb("need to specify a reason the Duration is invalid");
a=a instanceof rb?a:new rb(a,t);if(cb.throwOnInvalid)throw new ec(a);return new Ua({invalid:a})}static normalizeUnit(a){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!t)throw new Tc(a);return t}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,t={}){t={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?kb.create(this.loc,t).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const t=Lb.map(W=>{const Z=this.values[W];return l(Z)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:W.slice(0,-1)}).format(Z)}).filter(W=>W);return this.loc.listFormatter({type:"conjunction",
style:a.listStyle||"narrow",...a}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)a+=y(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var t=this.toMillis();if(0>t||864E5<=t)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};t=this.shiftTo("hours","minutes","seconds","milliseconds");let W="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===t.seconds&&0===t.milliseconds||(W+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===t.milliseconds||
(W+=".SSS"));t=t.toFormat(W);a.includePrefix&&(t="T"+t);return t}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Ua.fromDurationLike(a);const t={};for(const W of Lb)if(O(a.values,W)||O(this.values,W))t[W]=a.get(W)+this.get(W);return pa(this,{values:t},!0)}minus(a){if(!this.isValid)return this;a=Ua.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;
const t={};for(const W of Object.keys(this.values))t[W]=u(a(this.values[W],W));return pa(this,{values:t},!0)}get(a){return this[Ua.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...p(a,Ua.normalizeUnit)};return pa(this,{values:a})}reconfigure({locale:a,numberingSystem:t,conversionAccuracy:W}={}){a={loc:this.loc.clone({locale:a,numberingSystem:t})};W&&(a.conversionAccuracy=W);return pa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;
const a=this.toObject();da(this.matrix,a);return pa(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(oa=>Ua.normalizeUnit(oa));const t={},W={},Z=this.toObject();let fa;for(const oa of Lb)if(0<=a.indexOf(oa)){fa=oa;let Aa=0;for(const Ja in W)Aa+=this.matrix[Ja][oa]*W[Ja],W[Ja]=0;b(Z[oa])&&(Aa+=Z[oa]);const Fa=Math.trunc(Aa);t[oa]=Fa;W[oa]=(1E3*Aa-1E3*Fa)/1E3;for(const Ja in Z)Lb.indexOf(Ja)>Lb.indexOf(oa)&&sa(this.matrix,Z,Ja,t,oa)}else b(Z[oa])&&(W[oa]=Z[oa]);for(const oa in W)0!==
W[oa]&&(t[fa]+=oa===fa?W[oa]:W[oa]/this.matrix[fa][oa]);return pa(this,{values:t},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const t of Object.keys(this.values))a[t]=0===this.values[t]?0:-this.values[t];return pa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;
for(const Z of Lb){var t=this.values[Z];var W=a.values[Z];t=void 0===t||0===t?void 0===W||0===W:t===W;if(!t)return!1}return!0}}class ab{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,t=null){if(!a)throw new mb("need to specify a reason the Interval is invalid");a=a instanceof rb?a:new rb(a,t);if(cb.throwOnInvalid)throw new dc(a);return new ab({invalid:a})}static fromDateTimes(a,t){a=jb(a);t=jb(t);var W=a&&a.isValid?t&&t.isValid?t<a?
ab.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null:ab.invalid("missing or invalid end"):ab.invalid("missing or invalid start");return null==W?new ab({start:a,end:t}):W}static after(a,t){t=Ua.fromDurationLike(t);a=jb(a);return ab.fromDateTimes(a,a.plus(t))}static before(a,t){t=Ua.fromDurationLike(t);a=jb(a);return ab.fromDateTimes(a.minus(t),a)}static fromISO(a,t){const [W,Z]=(a||"").split("/",2);if(W&&Z){let Aa;
try{var fa=V.fromISO(W,t);Aa=fa.isValid}catch(Ja){Aa=!1}let Fa;try{var oa=V.fromISO(Z,t);Fa=oa.isValid}catch(Ja){Fa=!1}if(Aa&&Fa)return ab.fromDateTimes(fa,oa);if(Aa){if(oa=Ua.fromISO(Z,t),oa.isValid)return ab.after(fa,oa)}else if(Fa&&(fa=Ua.fromISO(W,t),fa.isValid))return ab.before(oa,fa)}return ab.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:
null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(a),W=this.end.startOf(a);return Math.floor(W.diff(t,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:t}={}){return this.isValid?ab.fromDateTimes(a||this.s,t||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(jb).filter(oa=>this.contains(oa)).sort();const t=[];let {s:W}=this,Z=0;for(;W<this.e;){var fa=a[Z]||this.e;fa=+fa>+this.e?this.e:fa;t.push(ab.fromDateTimes(W,fa));W=fa;Z+=1}return t}splitBy(a){a=Ua.fromDurationLike(a);
if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:t}=this,W=1;const Z=[];for(;t<this.e;){var fa=this.start.plus(a.mapUnits(oa=>oa*W));fa=+fa>+this.e?this.e:fa;Z.push(ab.fromDateTimes(t,fa));t=fa;W+=1}return Z}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=
a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const t=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return t>=a?null:ab.fromDateTimes(t,a)}union(a){return this.isValid?ab.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [t,W]=a.sort((Z,fa)=>Z.s-fa.s).reduce(([Z,fa],oa)=>fa?fa.overlaps(oa)||fa.abutsStart(oa)?[Z,fa.union(oa)]:[Z.concat([fa]),oa]:[Z,oa],[[],null]);W&&t.push(W);
return t}static xor(a){let t=null,W=0;const Z=[];a=a.map(fa=>[{time:fa.s,type:"s"},{time:fa.e,type:"e"}]);a=Array.prototype.concat(...a).sort((fa,oa)=>fa.time-oa.time);for(const fa of a)W+="s"===fa.type?1:-1,1===W?t=fa.time:(t&&+t!==+fa.time&&Z.push(ab.fromDateTimes(t,fa.time)),t=null);return ab.merge(Z)}difference(...a){return ab.xor([this].concat(a)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?
`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${t}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,t){return this.isValid?this.e.diff(this.s,a,t):Ua.invalid(this.invalidReason)}mapEndpoints(a){return ab.fromDateTimes(a(this.s),
a(this.e))}}class Xb{static hasDST(a=cb.defaultZone){const t=V.now().setZone(a).set({month:12});return!a.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(a){return Bb.isValidZone(a)}static normalizeZone(a){return e(a,cb.defaultZone)}static months(a="long",{locale:t=null,numberingSystem:W=null,locObj:Z=null,outputCalendar:fa="gregory"}={}){return(Z||$a.create(t,W,fa)).months(a)}static monthsFormat(a="long",{locale:t=null,numberingSystem:W=null,locObj:Z=null,outputCalendar:fa=
"gregory"}={}){return(Z||$a.create(t,W,fa)).months(a,!0)}static weekdays(a="long",{locale:t=null,numberingSystem:W=null,locObj:Z=null}={}){return(Z||$a.create(t,W,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:t=null,numberingSystem:W=null,locObj:Z=null}={}){return(Z||$a.create(t,W,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return $a.create(a).meridiems()}static eras(a="short",{locale:t=null}={}){return $a.create(t,null,"gregory").eras(a)}static features(){return{relative:f()}}}
const vc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Qc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xd=vc.hanidec.replace(/[\[|\]]/g,"").split(""),Rc=`[ ${String.fromCharCode(160)}]`,wc=new RegExp(Rc,"g"),Sc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Zb=null;const ac=[0,31,59,90,120,151,181,212,243,273,304,334],$b=[0,31,60,91,121,152,182,213,244,274,305,335],T={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},jc={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},ub={ordinal:1,hour:0,minute:0,second:0,millisecond:0},bc="year month day hour minute second millisecond".split(" "),ya="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ec="year ordinal hour minute second millisecond".split(" ");class V{constructor(a){const t=a.zone||cb.defaultZone;let W=a.invalid||(Number.isNaN(a.ts)?new rb("invalid input"):null)||(t.isValid?null:Db(t));this.ts=l(a.ts)?cb.now():a.ts;let Z=null;var fa=null;W||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(t)?
[Z,fa]=[a.old.c,a.old.o]:(fa=t.offset(this.ts),Z=Sb(this.ts,fa),Z=(W=Number.isNaN(Z.year)?new rb("invalid input"):null)?null:Z,fa=W?null:fa));this._zone=t;this.loc=a.loc||$a.create();this.invalid=W;this.weekData=null;this.c=Z;this.o=fa;this.isLuxonDateTime=!0}static now(){return new V({})}static local(){const [a,t]=eb(arguments),[W,Z,fa,oa,Aa,Fa,Ja]=t;return Wa({year:W,month:Z,day:fa,hour:oa,minute:Aa,second:Fa,millisecond:Ja},a)}static utc(){const [a,t]=eb(arguments),[W,Z,fa,oa,Aa,Fa,Ja]=t;a.zone=
ib.utcInstance;return Wa({year:W,month:Z,day:fa,hour:oa,minute:Aa,second:Fa,millisecond:Ja},a)}static fromJSDate(a,t={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return V.invalid("invalid input");const W=e(t.zone,cb.defaultZone);return W.isValid?new V({ts:a,zone:W,loc:$a.fromObject(t)}):V.invalid(Db(W))}static fromMillis(a,t={}){if(b(a))return-864E13>a||864E13<a?V.invalid("Timestamp out of range"):new V({ts:a,zone:e(t.zone,cb.defaultZone),loc:$a.fromObject(t)});
throw new mb(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,t={}){if(b(a))return new V({ts:1E3*a,zone:e(t.zone,cb.defaultZone),loc:$a.fromObject(t)});throw new mb("fromSeconds requires a numerical input");}static fromObject(a,t={}){a=a||{};var W=e(t.zone,cb.defaultZone);if(!W.isValid)return V.invalid(Db(W));var Z=cb.now();const fa=l(t.specificOffset)?W.offset(Z):t.specificOffset,oa=p(a,Sa);var Aa=!l(oa.ordinal),Fa=!l(oa.year),Ja=!l(oa.month)||
!l(oa.day);Fa=Fa||Ja;var Ta=oa.weekYear||oa.weekNumber;t=$a.fromObject(t);if((Fa||Aa)&&Ta)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ja&&Aa)throw new Vb("Can't mix ordinal dates with month/day");Ja=Ta||oa.weekday&&!Fa;let Na=Sb(Z,fa);Ja?(Z=ya,Ta=jc,Na=M(Na)):Aa?(Z=Ec,Ta=ub,Na=wb(Na)):(Z=bc,Ta=T);let Pa=!1;for(var Va of Z)l(oa[Va])?oa[Va]=Pa?Ta[Va]:Na[Va]:Pa=!0;Ja?(Va=F(oa.weekYear),Z=L(oa.weekNumber,1,C(oa.weekYear)),Ta=L(oa.weekday,1,7),Va=Va?Z?Ta?!1:Ya("weekday",
oa.weekday):Ya("week",oa.week):Ya("weekYear",oa.weekYear)):Aa?(Va=F(oa.year),Z=L(oa.ordinal,1,G(oa.year)?366:365),Va=Va?Z?!1:Ya("ordinal",oa.ordinal):Ya("year",oa.year)):Va=Jb(oa);if(Va=Va||Qb(oa))return V.invalid(Va);Aa=Ja?Ib(oa):Aa?Cb(oa):oa;const [bb,qb]=Kb(Aa,fa,W);W=new V({ts:bb,zone:W,o:qb,loc:t});return oa.weekday&&Fa&&a.weekday!==W.weekday?V.invalid("mismatched weekday",`you can't specify both a weekday of ${oa.weekday} and a date of ${W.toISO()}`):W}static fromISO(a,t={}){const [W,Z]=aa(a,
[ke,xd],[le,oe],[me,pe],[ne,qe]);return ia(W,Z,t,"ISO 8601",a)}static fromRFC2822(a,t={}){const [W,Z]=aa(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[ge,ta]);return ia(W,Z,t,"RFC 2822",a)}static fromHTTP(a,t={}){const [W,Z]=aa(a,[he,ma],[ie,ma],[je,la]);return ia(W,Z,t,"HTTP",t)}static fromFormat(a,t,W={}){if(l(a)||l(t))throw new mb("fromFormat requires an input string and a format");const {locale:Z=null,numberingSystem:fa=null}=W;var oa=$a.fromOpts({locale:Z,numberingSystem:fa,
defaultToEN:!0});{const {result:Na,zone:Pa,specificOffset:Va,invalidReason:bb}=za(oa,a,t);oa=[Na,Pa,Va,bb]}const [Aa,Fa,Ja,Ta]=oa;return Ta?V.invalid(Ta):ia(Aa,Fa,W,`format ${t}`,a,Ja)}static fromString(a,t,W={}){return V.fromFormat(a,t,W)}static fromSQL(a,t={}){const [W,Z]=aa(a,[se,xd],[te,ue]);return ia(W,Z,t,"SQL",a)}static invalid(a,t=null){if(!a)throw new mb("need to specify a reason the DateTime is invalid");a=a instanceof rb?a:new rb(a,t);if(cb.throwOnInvalid)throw new cc(a);return new V({invalid:a})}static isDateTime(a){return a&&
a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?fb(this).weekYear:NaN}get weekNumber(){return this.isValid?fb(this).weekNumber:NaN}get weekday(){return this.isValid?
fb(this).weekday:NaN}get ordinal(){return this.isValid?wb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return G(this.year)}get daysInMonth(){return E(this.year,this.month)}get daysInYear(){return this.isValid?
G(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?C(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:t,numberingSystem:W,calendar:Z}=kb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:t,numberingSystem:W,outputCalendar:Z}}toUTC(a=0,t={}){return this.setZone(ib.instance(a),t)}toLocal(){return this.setZone(cb.defaultZone)}setZone(a,{keepLocalTime:t=!1,keepCalendarTime:W=!1}={}){a=e(a,cb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let Z=
this.ts;if(t||W)t=a.offset(this.ts),W=this.toObject(),[Z]=Kb(W,t,a);return xb(this,{ts:Z,zone:a})}return V.invalid(Db(a))}reconfigure({locale:a,numberingSystem:t,outputCalendar:W}={}){a=this.loc.clone({locale:a,numberingSystem:t,outputCalendar:W});return xb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=p(a,Sa);var t=!l(a.weekYear)||!l(a.weekNumber)||!l(a.weekday);const W=!l(a.ordinal),Z=!l(a.year),fa=!l(a.month)||!l(a.day),oa=a.weekYear||a.weekNumber;
if((Z||fa||W)&&oa)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(fa&&W)throw new Vb("Can't mix ordinal dates with month/day");t?t=Ib({...M(this.c),...a}):l(a.ordinal)?(t={...this.toObject(),...a},l(a.day)&&(t.day=Math.min(E(t.year,t.month),t.day))):t=Cb({...wb(this.c),...a});const [Aa,Fa]=Kb(t,this.o,this.zone);return xb(this,{ts:Aa,o:Fa})}plus(a){if(!this.isValid)return this;a=Ua.fromDurationLike(a);return xb(this,X(this,a))}minus(a){if(!this.isValid)return this;
a=Ua.fromDurationLike(a).negate();return xb(this,X(this,a))}startOf(a){if(!this.isValid)return this;const t={};a=Ua.normalizeUnit(a);switch(a){case "years":t.month=1;case "quarters":case "months":t.day=1;case "weeks":case "days":t.hour=0;case "hours":t.minute=0;case "minutes":t.second=0;case "seconds":t.millisecond=0}"weeks"===a&&(t.weekday=1);"quarters"===a&&(t.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(t)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
t={}){return this.isValid?kb.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=xc,t={}){return this.isValid?kb.create(this.loc.clone(t),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?kb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:t=!1,suppressMilliseconds:W=!1,includeOffset:Z=!0,extendedZone:fa=!1}={}){if(!this.isValid)return null;a="extended"===a;let oa=
Ha(this,a);return oa=oa+"T"+Ia(this,a,t,W,Z,fa)}toISODate({format:a="extended"}={}){return this.isValid?Ha(this,"extended"===a):null}toISOWeekDate(){return xa(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:t=!1,includeOffset:W=!0,includePrefix:Z=!1,extendedZone:fa=!1,format:oa="extended"}={}){return this.isValid?(Z?"T":"")+Ia(this,"extended"===oa,t,a,W,fa):null}toRFC2822(){return xa(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return xa(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Ha(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:t=!1,includeOffsetSpace:W=!0}={}){let Z="HH:mm:ss.SSS";if(t||a)W&&(Z+=" "),t?Z+="z":a&&(Z+="ZZ");return xa(this,Z,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):
NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const t={...this.c};a.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale);return t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,t="milliseconds",W={}){if(!this.isValid||!a.isValid)return Ua.invalid("created by diffing an invalid DateTime");W={locale:this.locale,numberingSystem:this.numberingSystem,...W};const Z=
(Array.isArray(t)?t:[t]).map(Ua.normalizeUnit);t=a.valueOf()>this.valueOf();a=ja(t?this:a,t?a:this,Z,W);return t?a.negate():a}diffNow(a="milliseconds",t={}){return this.diff(V.now(),a,t)}until(a){return this.isValid?ab.fromDateTimes(this,a):this}hasSame(a,t){if(!this.isValid)return!1;const W=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(t)<=W&&W<=a.endOf(t)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const t=a.base||V.fromObject({},{zone:this.zone}),W=a.padding?this<t?-a.padding:a.padding:0;let Z="years months days hours minutes seconds".split(" "),fa=a.unit;Array.isArray(a.unit)&&(Z=a.unit,fa=void 0);return db(t,this.plus(W),{...a,numeric:"always",units:Z,unit:fa})}toRelativeCalendar(a={}){return this.isValid?db(a.base||V.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(V.isDateTime))throw new mb("min requires all arguments be DateTimes");
return J(a,t=>t.valueOf(),Math.min)}static max(...a){if(!a.every(V.isDateTime))throw new mb("max requires all arguments be DateTimes");return J(a,t=>t.valueOf(),Math.max)}static fromFormatExplain(a,t,W={}){const {locale:Z=null,numberingSystem:fa=null}=W;W=$a.fromOpts({locale:Z,numberingSystem:fa,defaultToEN:!0});return za(W,a,t)}static fromStringExplain(a,t,W={}){return V.fromFormatExplain(a,t,W)}static get DATE_SHORT(){return xc}static get DATE_MED(){return Uc}static get DATE_MED_WITH_WEEKDAY(){return Yd}static get DATE_FULL(){return Vc}static get DATE_HUGE(){return Wc}static get TIME_SIMPLE(){return Xc}static get TIME_WITH_SECONDS(){return Yc}static get TIME_WITH_SHORT_OFFSET(){return Zc}static get TIME_WITH_LONG_OFFSET(){return $c}static get TIME_24_SIMPLE(){return ad}static get TIME_24_WITH_SECONDS(){return bd}static get TIME_24_WITH_SHORT_OFFSET(){return cd}static get TIME_24_WITH_LONG_OFFSET(){return dd}static get DATETIME_SHORT(){return ed}static get DATETIME_SHORT_WITH_SECONDS(){return fd}static get DATETIME_MED(){return gd}static get DATETIME_MED_WITH_SECONDS(){return hd}static get DATETIME_MED_WITH_WEEKDAY(){return Zd}static get DATETIME_FULL(){return id}static get DATETIME_FULL_WITH_SECONDS(){return jd}static get DATETIME_HUGE(){return kd}static get DATETIME_HUGE_WITH_SECONDS(){return ld}}
d.DateTime=V;d.Info=Xb;d.Interval=ab})},"esri/widgets/FeatureTemplates":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/HandleOwner ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./FeatureTemplates/TemplateItem ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g){function r(p){const {label:k}=p;return"items"in p?k:`${k}\u2013${p.layer.id}`}const u={filter:!0};F=function(p){function k(N,S){N=p.call(this,N,S)||this;N._iconIntersectionObserver=new IntersectionObserver((P,v)=>{P.forEach(function(){var K=l._asyncToGenerator(function*(e){if(e.isIntersecting){const R=e.target;if(R["data-has-icon"])v.unobserve(R);else{var {layer:q,template:w}=R["data-item"];R["data-has-icon"]=!0;e=yield E.fetchThumbnail(q,w).catch(()=>
{R["data-has-icon"]=!1;return null});f.isNone(e)||R.appendChild(e)}}});return function(e){return K.apply(this,arguments)}}())});N.enableListScroll=!0;N.filterFunction=null;N.filterText="";N.groupBy=null;N.headingLevel=4;N.label=void 0;N.layers=null;N.messages=null;N.selectedItem=null;N.viewModel=new y;N.visibleElements={...u};N.renderItemIcon=N.renderItemIcon.bind(l._assertThisInitialized(N));N._afterItemCreateOrUpdate=N._afterItemCreateOrUpdate.bind(l._assertThisInitialized(N));N._afterItemRemoved=
N._afterItemRemoved.bind(l._assertThisInitialized(N));return N}l._inheritsLoose(k,p);var D=k.prototype;D.initialize=function(){const N=({label:S})=>!this.filterText||S.toLowerCase().includes(this.filterText.toLowerCase());this.own(J.watch(()=>this.viewModel,(S,P)=>{S&&!S.filterFunction&&(this.filterFunction=N);P&&P!==S&&P.filterFunction===N&&(P.filterFunction=null)},J.initial))};D.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=
null)};D.loadDependencies=function(){return Promise.all([new Promise((N,S)=>d(["../chunks/calcite-icon"],N,S)),new Promise((N,S)=>d(["../chunks/calcite-input"],N,S)),new Promise((N,S)=>d(["../chunks/calcite-list-item"],N,S)),new Promise((N,S)=>d(["../chunks/calcite-progress"],N,S))])};D.castVisibleElements=function(N){return{...u,...N}};D.select=function(N){return null};D.render=function(){const {enableListScroll:N,filterText:S,headingLevel:P,messages:v,viewModel:{items:K,selectedItem:e,state:q}}=
this,w=this.visibleElements.filter;if(0<K.length&&"items"in K[0]){const R=K.find(Q=>Q.label===y.nullGroupBy.label);R&&(R.label=v.other)}return g.tsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":v.widgetLabel},"loading"===q?this.renderLoader():"ready"===q?g.tsx(G.ItemList,{id:this.id,identify:r,filterText:S,items:K,headingLevel:P,messages:{filterPlaceholder:v.filterPlaceholder,noItems:v.noItems,noMatches:v.noMatches},filterEnabled:w,onItemSelect:R=>{this.viewModel.select(R)},
onFilterChange:R=>{this.filterText=R;this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:e,enableListScroll:N}):null)};D.renderItemIcon=function({item:N}){return g.tsx("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":N,"data-has-icon":!1})};D.renderLoader=function(){return g.tsx("div",{class:"esri-feature-templates__loader",key:"loader"})};D._afterItemCreateOrUpdate=function(N){var S;
null==(S=this._iconIntersectionObserver)?void 0:S.observe(N)};D._afterItemRemoved=function(N){var S;null==(S=this._iconIntersectionObserver)?void 0:S.unobserve(N)};return k}(F.HandleOwnerMixin(n));b.__decorate([A.property()],F.prototype,"enableListScroll",void 0);b.__decorate([I.aliasOf("viewModel.filterFunction")],F.prototype,"filterFunction",void 0);b.__decorate([A.property()],F.prototype,"filterText",void 0);b.__decorate([I.aliasOf("viewModel.groupBy")],F.prototype,"groupBy",void 0);b.__decorate([A.property()],
F.prototype,"headingLevel",void 0);b.__decorate([A.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0);b.__decorate([I.aliasOf("viewModel.layers")],F.prototype,"layers",void 0);b.__decorate([A.property(),C.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],F.prototype,"messages",void 0);b.__decorate([I.aliasOf("viewModel.selectedItem")],F.prototype,"selectedItem",void 0);b.__decorate([A.property(),h.vmEvent("select")],F.prototype,"viewModel",
void 0);b.__decorate([A.property()],F.prototype,"visibleElements",void 0);b.__decorate([H.cast("visibleElements")],F.prototype,"castVisibleElements",null);b.__decorate([I.aliasOf("viewModel.select")],F.prototype,"select",null);return F=b.__decorate([m.subclass("esri.widgets.FeatureTemplates")],F)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Evented ../../core/HandleOwner ../../core/maybe ../../core/ObjectPool ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./TemplateItem ./TemplateItemGroup".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y){function G(h){return h.reduce((g,r)=>[...g,...r.templates],[])}var E;const x=({layer:h})=>({key:h,label:h.title}),C=({layer:h})=>({key:h.geometryType,label:h.geometryType});b=E=function(h){function g(u){u=h.call(this,u)||this;u._itemPool=new I(n);u._groupPool=new I(y);u.filterFunction=null;u.selectedItem=null;return u}d._inheritsLoose(g,h);var r=g.prototype;r.initialize=function(){this._get("groupBy")||(this.groupBy="layer")};r.destroy=function(){this._templateToLayer.clear()};
r.refresh=function(){this.notifyChange("items")};r.select=function(u){u=(null==u?void 0:u.clone())||null;this._set("selectedItem",u);this.emit("select",{item:u,template:(null==u?void 0:u.template)||null})};r._createItem=function(u,p){const k=this._itemPool.acquire();k.set({template:u,layer:p});return k};r._createGroup=function(u,p){const k=this._groupPool.acquire();k.set("label",u);k.items=p;return k};r._releasePreviousItems=function(){this._destroyItems(this._get("items"))};r._destroyItems=function(u){u&&
(u[0]instanceof n?u.forEach(p=>this._destroyItem(p)):u.forEach(p=>this._destroyGroup(p)))};r._destroyGroup=function(u){u.items.forEach(p=>this._destroyItem(p));u.items.length=0;this._groupPool.release(u)};r._destroyItem=function(u){u.layer=null;u.template=null;this._itemPool.release(u)};r._ensureGroupByObject=function(u){return"string"===typeof u?{key:u,label:u}:u};d._createClass(g,[{key:"_templateToLayer",get:function(){const u=new Map;for(const [p,k]of this._featureTemplatesByLayer)for(const D of k)u.set(D,
p);return u}},{key:"groupBy",set:function(u){this._set("groupBy",u);if("function"===typeof u)this._groupByFunction=p=>this._ensureGroupByObject(u(p));else switch(u){case "none":this._groupByFunction=null;break;case "layer":this._groupByFunction=x;break;case "geometry":this._groupByFunction=C}}},{key:"layers",get:function(){return this._get("layers")},set:function(u){this.handles.remove("layers");if(u){const p=()=>this.notifyChange("state");this.handles.add(u.map(k=>O.when(()=>k.loadStatus,p)),"layers")}this._set("layers",
u)}},{key:"state",get:function(){const {layers:u}=this;return u&&0!==u.length?u.some(p=>"loading"===p.loadStatus||"not-loaded"===p.loadStatus)?"loading":"ready":"disabled"}},{key:"_featureTemplatesByLayer",get:function(){if(!this.layers)return new Map;const u=[];for(const p of this.layers){const k="templates"in p&&p.templates?p.templates:[],D="types"in p&&p.types?G(p.types):[];u.push([p,[...k,...D]])}return new Map(u)}},{key:"numberOfFeatureTemplates",get:function(){return Array.from(this._featureTemplatesByLayer.values()).reduce((u,
p)=>u+p.length,0)}},{key:"items",get:function(){if(0===this.numberOfFeatureTemplates)return this._releasePreviousItems(),[];var u=this._featureTemplatesByLayer,p=[],k=J.isSome(this.filterFunction)?this.filterFunction:E._nullFilterFunction;for(const [N,S]of u){const {loadStatus:P,capabilities:{operations:{supportsEditing:v,supportsAdd:K}}}=N;if("loaded"===P&&v&&K)for(const e of S)p.push({layer:N,template:e,matchesFilter:k({label:e.name})})}if(J.isNone(this._groupByFunction))return k=p.filter(({matchesFilter:N})=>
N).map(({template:N,layer:S})=>this._createItem(N,S)),this._releasePreviousItems(),k;u=new Map;for(var D of p){const {template:N,layer:S}=D;p=this._groupByFunction({template:N,layer:S});const {key:P,label:v}=J.isSome(p.key)?p:E.nullGroupBy;u.has(P)||u.set(P,{label:v,templateItemInfos:[]});u.get(P).templateItemInfos.push(D)}D=[];for(const N of u.values()){const {label:S,templateItemInfos:P}=N;p=P.filter(({matchesFilter:v})=>v);p=k({label:S})?P:0<P.length?p:[];0<p.length&&(p=p.map(({template:v,layer:K})=>
this._createItem(v,K)),D.push(this._createGroup(S,p)))}if(1===D.length&&D[0].label===E.nullGroupBy.label)return this._releasePreviousItems(),D[0].items;this._releasePreviousItems();return D}}]);return g}(f.HandleOwnerMixin(F.EventedAccessor));b.nullGroupBy={key:Symbol(),label:"Other\u200b"};b._nullFilterFunction=h=>!0;l.__decorate([L.property()],b.prototype,"_groupByFunction",void 0);l.__decorate([L.property({readOnly:!0})],b.prototype,"_templateToLayer",null);l.__decorate([L.property()],b.prototype,
"filterFunction",void 0);l.__decorate([L.property()],b.prototype,"groupBy",null);l.__decorate([L.property()],b.prototype,"layers",null);l.__decorate([L.property()],b.prototype,"state",null);l.__decorate([L.property({readOnly:!0})],b.prototype,"_featureTemplatesByLayer",null);l.__decorate([L.property({readOnly:!0})],b.prototype,"numberOfFeatureTemplates",null);l.__decorate([L.property({readOnly:!0})],b.prototype,"items",null);l.__decorate([L.property({readOnly:!0})],b.prototype,"selectedItem",void 0);
l.__decorate([L.property()],b.prototype,"select",null);return b=E=l.__decorate([m.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],b)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){function E(p,k){return x.apply(this,arguments)}function x(){x=l._asyncToGenerator(function*(p,k){var {renderer:D}=p;return D&&(k=new F({attributes:k.prototype.attributes}),D=yield D.getSymbolAsync(k))?D:C(p)});return x.apply(this,arguments)}function C(p){return h.apply(this,arguments)}function h(){h=l._asyncToGenerator(function*(p){({geometryType:p}=p);return(p="point"===p||"multipoint"===p?yield new Promise((k,D)=>d(["../../symbols/SimpleMarkerSymbol"],N=>
k(g(N)),D)):"polyline"===p?yield new Promise((k,D)=>d(["../../symbols/SimpleLineSymbol"],N=>k(g(N)),D)):"polygon"===p||"mesh"===p||"multipatch"===p?yield new Promise((k,D)=>d(["../../symbols/SimpleFillSymbol"],N=>k(g(N)),D)):null)?new p.default:null});return h.apply(this,arguments)}const g=p=>Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}));var r;const u=I.getLogger("esri.widgets.FeatureTemplates.TemplateItem");f=r=function(p){function k(N){N=p.call(this,
N)||this;N._activeFetchInfo={id:null,request:null};N.description=null;N.label=null;N.layer=null;N.template=null;N.thumbnail=null;return N}l._inheritsLoose(k,p);var D=k.prototype;D.initialize=function(){this.handles.add(L.watch(()=>{const {layer:N}=this;return[N&&"renderer"in N?N.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)},L.initial))};D.clone=function(){const N=O.isSome(this.thumbnail)?this.thumbnail.cloneNode(!0):
null,S=new r({layer:this.layer,template:this.template});S._set("thumbnail",N);return S};k.fetchThumbnail=function(){var N=l._asyncToGenerator(function*(S,P){var v;if("subtype-group"===S.type)return u.warn("Thumbnails for sublayers of a SubtypeGroupLayer are not yet supported."),null;const K=yield E(S,P);if(O.isNone(K))return null;const e={maxSize:36};"dictionary"===(null==(v=S.renderer)?void 0:v.type)&&(e.fieldMap=S.renderer.fieldMap,e.feature={attributes:P.prototype.attributes});return yield G.renderPreviewHTML(K,
e)});return function(S,P){return N.apply(this,arguments)}}();return k}(J.HandleOwnerMixin(f));b.__decorate([H.property({aliasOf:"template.description"})],f.prototype,"description",void 0);b.__decorate([H.property({aliasOf:"template.name"})],f.prototype,"label",void 0);b.__decorate([H.property()],f.prototype,"layer",void 0);b.__decorate([H.property()],f.prototype,"template",void 0);b.__decorate([H.property({readOnly:!0})],f.prototype,"thumbnail",void 0);return f=r=b.__decorate([y.subclass("esri.widgets.FeatureTemplates.TemplateItem")],
f)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(d,l,b,F,f,J,I,O,L,H){function A(h,g){if(g&&(h.style.filter=H.getCSSFilterFromEffectList(g),g=g.effects))for(const r of g)if("drop-shadow"===(null==r?void 0:r.type)){0>r.offsetX?h.style.marginLeft=`${Math.abs(r.offsetX)}px`:h.style.marginRight=`${r.offsetX}px`;
break}}function m(h,g){return n.apply(this,arguments)}function n(){n=b._asyncToGenerator(function*(h,g){switch(h.type){case "web-style":var {previewWebStyleSymbol:r}=yield new Promise((u,p)=>d(["./previewWebStyleSymbol"],u,p));return r(h,m,g);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:r}=yield new Promise((u,p)=>d(["./previewSymbol3D"],u,p)),r(h,g);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:r}=
yield new Promise((u,p)=>d(["./previewSymbol2D"],u,p)),r(h,g);case "cim":return{previewCIMSymbol:r}=yield new Promise((u,p)=>d(["./previewCIMSymbol"],u,p)),r(h,g)}});return n.apply(this,arguments)}function y(h){return h&&"opacity"in h?h.opacity*y(h.parent):1}function G(){G=b._asyncToGenerator(function*(h,g){var r,u;if(h){var p=h.sourceLayer;p=null!=(r=f.isSome(g)&&null!=(u=g.useSourceLayer)&&u?p:h.layer)?r:p;r=y(p);if(f.isSome(h.symbol)&&(!f.isSome(g)||!0!==g.ignoreGraphicSymbol))return h="web-style"===
h.symbol.type?yield h.symbol.fetchSymbol({...g,cache:f.isSome(g)?g.webStyleCache:null}):h.symbol.clone(),H.applyColorToSymbol(h,null,r),h;var k=f.isSome(g)&&g.renderer||p&&"renderer"in p&&p.renderer;if(u=k&&"getSymbolAsync"in k?yield k.getSymbolAsync(h,g):null){u="web-style"===u.type?yield u.fetchSymbol({...g,cache:f.isSome(g)?g.webStyleCache:null}):u.clone();if(!("visualVariables"in k&&k.visualVariables&&k.visualVariables.length))return H.applyColorToSymbol(u,null,r),u;"arcadeRequiredForVisualVariables"in
k&&k.arcadeRequiredForVisualVariables&&(f.isNone(g)||f.isNone(g.arcade))&&(g={...f.unwrap(g)},g.arcade=yield J.loadArcade());p=yield new Promise((K,e)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],K,e));var D=[],N=[],S=[],P=[];for(var v of k.visualVariables)switch(v.type){case "color":D.push(v);break;case "opacity":N.push(v);break;case "rotation":P.push(v);break;case "size":v.target||S.push(v)}v=(v=!!D.length&&D[D.length-1])?p.getColor(v,h,g):null;N=(N=!!N.length&&N[N.length-
1])?p.getOpacity(N,h,g):null;null!=r&&(N=null!=N?N*r:r);H.applyColorToSymbol(u,v,N);S.length&&(r=p.getAllSizes(S,h,g),yield H.applySizesToSymbol(u,r));for(const K of P)H.applyRotationToSymbol(u,p.getRotationAngle(K,h,g),K.axis);return u}}});return G.apply(this,arguments)}function E(){E=b._asyncToGenerator(function*(h,g){var r;if(h){var u=y(h.layer||h.sourceLayer);if(f.isSome(h.symbol)&&(!f.isSome(g)||!0!==g.ignoreGraphicSymbol))return h="web-style"===h.symbol.type?yield h.symbol.fetchSymbol(g):h.symbol.clone(),
H.getColorFromSymbol(h,u);var p=f.isSome(g)&&g.renderer||h.get("layer.renderer")||h.get("sourceLayer.renderer"),k=yield p.getSymbolAsync(h,g);if(k){k="web-style"===k.type?yield k.fetchSymbol(g):k.clone();k=H.getColorFromSymbol(k,u);if(!("visualVariables"in p)||"visualVariables"in p&&!p.visualVariables||"visualVariables"in p&&(null==(r=p.visualVariables)||!r.length))return k;p.arcadeRequiredForVisualVariables&&(f.isNone(g)||f.isNone(g.arcade))&&(g={...f.unwrap(g)},g.arcade=yield J.loadArcade());r=
yield new Promise((S,P)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],S,P));var D=[],N=[];for(const S of p.visualVariables)switch(S.type){case "color":D.push(S);break;case "opacity":N.push(S)}p=(p=0<D.length?D[D.length-1]:null)?r.getColor(p,h,g):k;h=(k=0<N.length?N[N.length-1]:null)?r.getOpacity(k,h,g):null;null!=u&&(h=null!=h?h*u:u);return p?H.applyOpacityToColor(p,h):null}}});return E.apply(this,arguments)}let x=null;const C=[255,255,255];l.getDisplayedColor=function(h,g){return E.apply(this,
arguments)};l.getDisplayedSymbol=function(h,g){return G.apply(this,arguments)};l.renderColorRampPreviewHTML=function(h,g={}){var r="horizontal"===g.align;const {width:u=r?75:24,height:p=r?24:75,gradient:k=!0}=g;var D=window.devicePixelRatio,N=u*D,S=p*D;D=document.createElement("canvas");D.width=N;D.height=S;D.style.width=`${u}px`;D.style.height=`${p}px`;const P=D.getContext("2d");var v=r?N:0,K=r?0:S;if(k){const e=P.createLinearGradient(0,0,v,K);r=h.length;const q=1===r?0:1/(r-1);h.forEach((w,R)=>
e.addColorStop(R*q,w.toString()));P.fillStyle=e;P.fillRect(0,0,N,S)}else{N=r?N/h.length:N;S=r?S:S/h.length;K=v=0;for(const e of h)P.fillStyle=e.toString(),P.fillRect(v,K,N,S),v=r?v+N:0,K=r?0:K+S}h=document.createElement("div");h.style.width=`${u}px`;h.style.height=`${p}px`;A(h,null==g?void 0:g.effectList);h.appendChild(D);return h};l.renderDotDensityPreviewHTML=function(h,g,r){const {backgroundColor:u,outline:p,dotSize:k}=h;r=r&&r.swatchSize||O.SymbolSizeDefaults.size;const D=Math.round(r*r/k**2*
.8),N=window.devicePixelRatio;h=document.createElement("canvas");const S=r*N;h.width=S;h.height=S;h.style.width=`${h.width/N}px`;h.style.height=`${h.height/N}px`;const P=h.getContext("2d");u&&(P.fillStyle=u.toCss(!0),P.fillRect(0,0,S,S),P.fill());P.fillStyle=g.toCss(!0);if(x&&x.length/2===D)for(g=0;g<2*D;g+=2)P.fillRect(x[g],x[g+1],k*N,k*N),P.fill();else for(x=[],g=0;g<2*D;g+=2){const v=Math.floor(Math.random()*(S-0+1)),K=Math.floor(Math.random()*(S-0+1));x.push(v,K);P.fillRect(v,K,k*N,k*N);P.fill()}p&&
(p.color&&(P.strokeStyle=p.color.toCss(!0)),P.lineWidth=p.width,P.strokeRect(0,0,S,S));r=new Image(r,r);r.src=h.toDataURL();return r};l.renderPieChartPreviewHTML=function(h,g={}){const r=g.radius||40;var u=2*Math.PI*r,p=h.length;const k=u/p,D=[],N=I.getStroke(g.outline);N&&(N.width*=2);(N||g.backgroundColor)&&D.push({shape:{type:"circle",cx:r,cy:r,r},fill:g.backgroundColor,stroke:N,offset:[0,0]});const S=g.values,P=S&&S.length===p&&100===S.reduce((K,e)=>K+e,0),v=[0];for(let K=0;K<p;K++){const e=P?
S[K]*u/100:null;P&&v.push(e+v[K]);D.push({shape:{type:"circle",cx:r,cy:r,r:r/2},fill:[0,0,0,0],stroke:{width:r,dashArray:`${e||k} ${u}`,dashoffset:`-${P?v[K]/2:k/2*K}`,color:h[K]},offset:[0,0]})}p=null;h=2*r+((null==N?void 0:N.width)||0);if(u=g.holePercentage)N&&D.push({shape:{type:"circle",cx:r,cy:r,r:r*u},fill:null,stroke:N,offset:[0,0]}),p=h/2,p=[[{shape:{type:"circle",cx:p,cy:p,r:p},fill:C,stroke:N?{...N,color:C}:null,offset:[0,0]},{shape:{type:"circle",cx:p,cy:p,r:r*u},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return L.renderSymbol([D],[h,h],{effectView:g.effectList,ignoreStrokeWidth:!0,masking:p,rotation:-90})};l.renderPreviewHTML=m;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(d,l,b,F,f,J,I){function O(n){if(!n)return null;let y;switch(n.type){case "simple-fill":case "picture-fill":case "simple-marker":y=
O(n.outline);break;case "simple-line":{const G=J.pt2px(n.width);"none"!==n.style&&0!==G&&(y={color:n.color,style:m(n.style),width:G,cap:n.cap,join:"miter"===n.join?J.pt2px(n.miterLimit):n.join});break}default:y=null}return y}const L={left:"start",center:"middle",right:"end",justify:"start"},H={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},A=new f(1E3),m=(()=>{const n={};return y=>{if(n[y])return n[y];const G=y.replace(/-/g,"");return n[y]=G}})();b=new b([128,
128,128]);d.defaultThematicColor=b;d.dekebabifyLineStyle=m;d.getFill=function(n){const y=n.style;let G=null;if(n)switch(n.type){case "simple-marker":"cross"!==y&&"x"!==y&&(G=n.color);break;case "simple-fill":"solid"===y?G=n.color:"none"!==y&&(G={type:"pattern",x:0,y:0,src:l.getAssetUrl(`esri/symbols/patterns/${y}.png`),width:5,height:5});break;case "picture-fill":G={type:"pattern",src:n.url,width:J.pt2px(n.width)*n.xscale,height:J.pt2px(n.height)*n.yscale,x:J.pt2px(n.xoffset),y:J.pt2px(n.yoffset)};
break;case "text":G=n.color;break;case "cim":G=I.getCIMSymbolColor(n)}return G};d.getPatternUrlWithColor=function(n,y){const G=n+"-"+y;return void 0!==A.get(G)?Promise.resolve(A.get(G)):F(n,{responseType:"image"}).then(E=>{E=E.data;const x=E.naturalWidth,C=E.naturalHeight,h=document.createElement("canvas");h.width=x;h.height=C;const g=h.getContext("2d");g.fillStyle=y;g.fillRect(0,0,x,C);g.globalCompositeOperation="destination-in";g.drawImage(E,0,0);E=h.toDataURL();A.put(G,E);return E})};d.getSVGAlign=
function(n){return n=(n=n.horizontalAlignment)&&L[n.toLowerCase()]||"middle"};d.getSVGBaseline=function(n){return(n=n.verticalAlignment)&&H[n.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=function(n){return"bottom"===n.verticalAlignment?"super":null};d.getStroke=O;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(d){return function(){function l(F,f){this._storage=new d.MemCacheStorage;this._storage.maxSize=
F;f&&this._storage.registerRemoveFunc("",f)}var b=l.prototype;b.put=function(F,f){this._storage.put(F,f,1,1)};b.pop=function(F){return this._storage.pop(F)};b.get=function(F){return this._storage.get(F)};b.clear=function(){this._storage.clearAll()};b.destroy=function(){this._storage.destroy()};return l}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(d,l,b){function F(m){m=b.toCIMSymbolJSON(m);if("CIMTextSymbol"===m.type)return m.height;
let n=0;if(m.symbolLayers)for(const y of m.symbolLayers)b.isCIMMarker(y)&&y.size>n?n=y.size:b.isCIMStroke(y)&&y.width>n?n=y.width:b.isCIMFill(y);return n}function f(m,n,y,G){if("CIMTextSymbol"===m.type)m.height*=n;else{if(y&&m.effects)for(const E of m.effects)O(E,n);if(m.symbolLayers)for(const E of m.symbolLayers)switch(E.type){case "CIMPictureMarker":case "CIMVectorMarker":J(E,n,G);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=G&&G.preserveOutlineWidth||!E.width||(E.width*=n);break;case "CIMPictureFill":E.height&&
(E.height*=n);E.offsetX&&(E.offsetX*=n);E.offsetY&&(E.offsetY*=n);break;case "CIMHatchFill":f(E.lineSymbol,n,!0,{...G,preserveOutlineWidth:!1}),E.offsetX&&(E.offsetX*=n),E.offsetY&&(E.offsetY*=n),E.separation&&(E.separation*=n)}}}function J(m,n,y){m.markerPlacement&&I(m.markerPlacement,n);m.offsetX&&(m.offsetX*=n);m.offsetY&&(m.offsetY*=n);m.anchorPoint&&"Absolute"===m.anchorPointUnits&&(m.anchorPoint={x:m.anchorPoint.x*n,y:m.anchorPoint.y*n});m.size*=n;if("CIMVectorMarker"===m.type&&m.markerGraphics)for(const G of m.markerGraphics)m.scaleSymbolsProportionally||
f(G.symbol,n,!0,y)}function I(m,n){b.isCIMMarkerStrokePlacement(m)&&m.offset&&(m.offset*=n);switch(m.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":m.customEndingOffset&&(m.customEndingOffset*=n);m.offsetAlongLine&&(m.offsetAlongLine*=n);if(m.placementTemplate&&m.placementTemplate.length){var y=m.placementTemplate.map(G=>G*n);m.placementTemplate=y}break;case "CIMMarkerPlacementAlongLineVariableSize":m.maxRandomOffset&&(m.maxRandomOffset*=n);m.placementTemplate&&
m.placementTemplate.length&&(y=m.placementTemplate.map(G=>G*n),m.placementTemplate=y);break;case "CIMMarkerPlacementOnLine":m.startPointOffset&&(m.startPointOffset*=n);break;case "CIMMarkerPlacementAtExtremities":m.offsetAlongLine&&(m.offsetAlongLine*=n);break;case "CIMMarkerPlacementAtRatioPositions":m.beginPosition&&(m.beginPosition*=n);m.endPosition&&(m.endPosition*=n);break;case "CIMMarkerPlacementPolygonCenter":m.offsetX&&(m.offsetX*=n);m.offsetY&&(m.offsetY*=n);break;case "CIMMarkerPlacementInsidePolygon":m.offsetX&&
(m.offsetX*=n),m.offsetY&&(m.offsetY*=n),m.stepX&&(m.stepX*=n),m.stepY&&(m.stepY*=n)}}function O(m,n){switch(m.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":m.width&&(m.width*=n);break;case "CIMGeometricEffectBuffer":m.size&&(m.size*=n);break;case "CIMGeometricEffectCut":m.beginCut&&(m.beginCut*=n);m.endCut&&(m.endCut*=n);m.middleCut&&(m.middleCut*=n);break;case "CIMGeometricEffectDashes":m.customEndingOffset&&(m.customEndingOffset*=n);m.offsetAlongLine&&(m.offsetAlongLine*=
n);if(m.dashTemplate&&m.dashTemplate.length){const y=m.dashTemplate.map(G=>G*n);m.dashTemplate=y}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":m.length&&(m.length*=n);break;case "CIMGeometricEffectMove":m.offsetX&&(m.offsetX*=n);m.offsetY&&(m.offsetY*=n);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":m.offset&&(m.offset*=n);break;case "CIMGeometricEffectRegularPolygon":m.radius&&(m.radius*=n);break;case "CIMGeometricEffectTaperedPolygon":m.fromWidth&&
(m.fromWidth*=n);m.length&&(m.length*=n);m.toWidth&&(m.toWidth*=n);break;case "CIMGeometricEffectWave":m.amplitude&&(m.amplitude*=n),m.period&&(m.period*=n)}}function L(m,n){let y;y="CIMTextSymbol"===m.type?m.symbol:m;m="CIMPolygonSymbol"===m.type;if(y.symbolLayers)for(const G of y.symbolLayers)if(!(G.colorLocked||m&&(b.isCIMStroke(G)||b.isCIMMarker(G)&&G.markerPlacement&&b.isCIMMarkerStrokePlacement(G.markerPlacement))))switch(G.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":G.tintColor&&
H(n,G.tintColor);break;case "CIMVectorMarker":G.markerGraphics.forEach(E=>{L(E.symbol,n)});break;case "CIMSolidStroke":case "CIMSolidFill":H(n,G.color);break;case "CIMHatchFill":L(G.lineSymbol,n)}}function H(m,n){for(const y of m)if(y.join(".")===n.join("."))return;m.push(n)}function A(m,n,y){var G="CIMTextSymbol"===m.type?m.symbol:m;m="CIMPolygonSymbol"===G.type?!0:!1;if(G.symbolLayers)for(const E of G.symbolLayers)if(!E.colorLocked){if(m)if(y){if({layersToColor:G}=y,(b.isCIMStroke(E)||b.isCIMMarker(E)&&
E.markerPlacement&&b.isCIMMarkerStrokePlacement(E.markerPlacement))&&"fill"===G||b.isCIMFill(E)&&"outline"===G)continue}else if(b.isCIMStroke(E)||b.isCIMMarker(E)&&E.markerPlacement&&b.isCIMMarkerStrokePlacement(E.markerPlacement))continue;G=n.toArray();switch(E.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":E.tintColor=G;break;case "CIMVectorMarker":E.markerGraphics.forEach(x=>{A(x.symbol,n,y)});break;case "CIMSolidStroke":case "CIMSolidFill":E.color=G;break;case "CIMHatchFill":A(E.lineSymbol,
n,y)}}}d.applyCIMSymbolColor=function(m,n,y){n instanceof l||(n=new l(n));(m=b.toCIMSymbolJSON(m))&&A(m,n,y)};d.applyCIMSymbolRotation=function(m,n,y=!1){m=b.toCIMSymbolJSON(m);y&&0!==n&&(n=360-n);if("CIMTextSymbol"===m.type)m.angle=n;else if("CIMPointSymbol"===m.type&&m.symbolLayers){y=n-(m.angle||0);for(const G of m.symbolLayers)if(b.isCIMMarker(G)){let E=G.rotation||0;E=G.rotateClockwise?E-y:E+y;G.rotation=E}m.angle=n}};d.getCIMSymbolColor=function(m){m=b.toCIMSymbolJSON(m);const n=[];L(m,n);return n.length?
new l(b.fromCIMColor(n[0])):null};d.getCIMSymbolRotation=function(m,n=!1){m=b.toCIMSymbolJSON(m);return"CIMTextSymbol"===m.type||"CIMPointSymbol"===m.type?n&&0!==m.angle?360-m.angle:m.angle||0:0};d.getCIMSymbolSize=F;d.scaleCIMMarker=J;d.scaleCIMSymbolTo=function(m,n,y){const G=b.toCIMSymbolJSON(m);m=F(m);if(0===m)if("CIMTextSymbol"===G.type)G.height=n;else{if(G.symbolLayers)for(const E of G.symbolLayers)switch(E.type){case "CIMPictureMarker":case "CIMVectorMarker":E.size=n;break;case "CIMPictureStroke":case "CIMSolidStroke":E.width=
n}}else f(G,n/m,!1,y)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(d,l){function b(F,f){"string"!==typeof F&&(F=String(F));switch(f){case "LowerCase":return F.toLowerCase();case "Allcaps":return F.toUpperCase();default:return F}}l._adjustTextCase=b;l.colorToArray=function(F){return[F.r,F.g,F.b,F.a]};l.createLabelOverrideFunction=function(F,f,J){const I=A=>{let m=A.length;for(;m--;)if(!" /-,\n".includes(A.charAt(m)))return!1;
return!0},O=[];var L=0;let H=-1;do H=f.indexOf("[",L),H>=L&&(H>L&&(L=f.substr(L,H-L),O.push([L,null,I(L)])),L=H+1,H=f.indexOf("]",L),H>=L&&(H>L&&(L=f.substr(L,H-L),(L=F[L])&&O.push([null,L,!1])),L=H+1));while(-1!==H);L<f.length-1&&(F=f.substr(L),O.push([F,null,I(F)]));return A=>{let m="",n=null;for(const y of O){const [G,E,x]=y;if(G)x?n=G:(n&&(m+=n,n=null),m+=G);else{const C=A.attributes[E];C&&(n&&(m+=n,n=null),m+=C)}}return b(m,J)}};l.evaluateValueOrFunction=function(F,f,J,I){return"function"===
typeof F?F(f,J,I):F};l.fromCIMColor=function(F){return F?{r:F[0],g:F[1],b:F[2],a:F[3]/255}:{r:0,g:0,b:0,a:0}};l.getValue=F=>isNaN(F)||!F?0:F;l.importGeometryEngine=function(){return new Promise((F,f)=>d(["../../geometry/geometryEngineJSON"],F,f))};l.isCIMFill=function(F){return"CIMGradientFill"===F.type||"CIMHatchFill"===F.type||"CIMPictureFill"===F.type||"CIMSolidFill"===F.type||"CIMWaterFill"===F.type};l.isCIMMarker=function(F){return"CIMVectorMarker"===F.type||"CIMPictureMarker"===F.type||"CIMBarChartMarker"===
F.type||"CIMCharacterMarker"===F.type||"CIMPieChartMarker"===F.type||"CIMStackedBarChartMarker"===F.type};l.isCIMMarkerStrokePlacement=function(F){return"CIMMarkerPlacementAlongLineRandomSize"===F.type||"CIMMarkerPlacementAlongLineSameSize"===F.type||"CIMMarkerPlacementAlongLineVariableSize"===F.type||"CIMMarkerPlacementAtExtremities"===F.type||"CIMMarkerPlacementAtMeasuredUnits"===F.type||"CIMMarkerPlacementAtRatioPositions"===F.type||"CIMMarkerPlacementOnLine"===F.type||"CIMMarkerPlacementOnVertices"===
F.type};l.isCIMStroke=function(F){return"CIMGradientStroke"===F.type||"CIMPictureStroke"===F.type||"CIMSolidStroke"===F.type};l.isGeometryEngineRequired=F=>{if(!F)return!1;for(const f of F)switch(f.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};l.resampleHermite=function(F,f,J,I,O,L,H=!0){const A=f/O;J/=L;const m=Math.ceil(A/2),n=Math.ceil(J/2);for(let E=0;E<L;E++)for(let x=0;x<O;x++){const C=4*(x+(H?L-E-1:E)*O);var y=0;let h=0,g=0,r=0,u=0,p=0,k=0;const D=
(E+.5)*J;for(let N=Math.floor(E*J);N<(E+1)*J;N++){var G=Math.abs(D-(N+.5))/n;const S=(x+.5)*A;G*=G;for(let P=Math.floor(x*A);P<(x+1)*A;P++){let v=Math.abs(S-(P+.5))/m;y=Math.sqrt(G+v*v);-1<=y&&1>=y&&(y=2*y*y*y-3*y*y+1,0<y&&(v=4*(P+N*f),k+=y*F[v+3],g+=y,255>F[v+3]&&(y=y*F[v+3]/250),r+=y*F[v],u+=y*F[v+1],p+=y*F[v+2],h+=y))}}I[C]=r/h;I[C+1]=u/h;I[C+2]=p/h;I[C+3]=k/g}};l.toCIMSymbolJSON=function(F){var f;return null==(f=F.data)?void 0:f.symbol};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(d,l){function b(F,f){return Math.round(Math.min(Math.max(F+191.25*f,0),255))}d.SymbolSizeDefaults=void 0;(function(F){F[F.size=22]="size";F[F.lineWidth=50]="lineWidth";F[F.maxSize=120]="maxSize";F[F.maxOutlineSize=80]="maxOutlineSize";F[F.tallSymbolWidth=20]="tallSymbolWidth"})(d.SymbolSizeDefaults||(d.SymbolSizeDefaults={}));d.adjustColorBrightness=function(F,f){if("type"in F&&("linear"===F.type||"pattern"===
F.type))return F;F=new l(F);return new l([b(F.r,f),b(F.g,f),b(F.b,f),F.a])};d.adjustColorComponentBrightness=b;d.getConeShapes=function(F,f){let J=f?d.SymbolSizeDefaults.tallSymbolWidth:F;f=f?4:6;J=J<=d.SymbolSizeDefaults.size?J-.5*f:J-f;f=.15*J;const I=J;F-=f;return[{type:"ellipse",cx:.5*J,cy:F,rx:.5*J,ry:f},{type:"path",path:[{command:"M",values:[.5*I,0]},{command:"L",values:[I,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]}]};d.getCubeShapes=function(F,f){let J=f?d.SymbolSizeDefaults.tallSymbolWidth:
F;var I=f?4:6;I=J=J<=d.SymbolSizeDefaults.size?J-.5*I:J-I;f=f?.35*J:.5*J;return[{type:"path",path:[{command:"M",values:[.5*I,0]},{command:"L",values:[I,.5*f]},{command:"L",values:[.5*I,f]},{command:"L",values:[0,.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*f]},{command:"L",values:[.5*I,f]},{command:"L",values:[.5*I,F]},{command:"L",values:[0,F-.5*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*I,f]},{command:"L",values:[.5*I,F]},{command:"L",
values:[I,F-.5*f]},{command:"L",values:[I,.5*f]},{command:"Z",values:[]}]}]};d.getCylinderShapes=function(F,f){var J=f?d.SymbolSizeDefaults.tallSymbolWidth:F;f=f?4:6;J=J<=d.SymbolSizeDefaults.size?J-.5*f:J-f;f=.5*J;const I=.15*J;F-=I;return[{type:"ellipse",cx:.5*J,cy:F,rx:f,ry:I},{type:"path",path:[{command:"M",values:[0,I]},{command:"L",values:[0,F]},{command:"L",values:[J,F]},{command:"L",values:[J,I]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*J,cy:I,rx:f,ry:I}]};d.getDiamondShapes=function(F){var f=
F;f=f<d.SymbolSizeDefaults.size?f-2:f-4;const J=Math.floor(F/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[f,.5*F-J]},{command:"L",values:[.45*f-J,.5*F+J]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[.45*f-J,.5*F+J]},{command:"L",values:[0,.5*F-J]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*F-J]},{command:"L",values:[.45*f-J,.5*F+J]},{command:"L",values:[.45*f,F]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,F]},{command:"L",values:[f,.5*F-J]},{command:"L",values:[.45*f-J,.5*F+J]},{command:"Z",values:[]}]}]};d.getExtrudeSymbolShapes=function(F){const f=d.SymbolSizeDefaults.size;F*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*f]},{command:"L",values:[.3*f,.7*f]},{command:"L",values:[.3*f,.7*f+F]},{command:"L",values:[0,.7*f+F-.35*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*f,.7*f]},{command:"L",values:[.3*
f,.7*f+F]},{command:"L",values:[f,F]},{command:"L",values:[f,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*f,0]},{command:"L",values:[f,0]},{command:"L",values:[.3*f,.7*f]},{command:"L",values:[0,.35*f]},{command:"Z",values:[]}]}]};d.getInvertedConeShapes=function(F){let f=F;f=f<d.SymbolSizeDefaults.size?f-3:f-6;const J=.15*f,I=f;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[I,0]},{command:"L",values:[.5*I,F-J]},{command:"Z",values:[]}]},{type:"ellipse",
cx:.5*f,cy:0,rx:.5*f,ry:J}]};d.getPathSymbolShapes=function(F,f,J){var I=d.SymbolSizeDefaults.size;let O=I,L=I;1>F?O*=.75:1<F&&(L*=1.25);F=I;f&&J&&(O=L=F=I=0);return[{type:"path",path:[{command:"M",values:[F,0]},{command:"L",values:[J?F:.875*F,0]},{command:"L",values:[J?O-.5*F:0,L-.5*I]},{command:"L",values:[O-.5*F,L-.5*I]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[F,0]},{command:"L",values:[F,f?0:.125*I]},{command:"L",values:[O-.5*F,f?L-.5*I:I]},{command:"L",values:[O-.5*
F,L-.5*I]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[O-.5*F,L-.5*I]},{command:"L",values:[J?O-.5*F:0,L-.5*I]},{command:"L",values:[J?O-.5*F:0,f?L-.5*I:I]},{command:"L",values:[O-.5*F,f?L-.5*I:I]},{command:"Z",values:[]}]}]};d.getTetrahedronShapes=function(F){var f=F;f=f<d.SymbolSizeDefaults.size?f-1:f-2;return[{type:"path",path:[{command:"M",values:[.45*F,0]},{command:"L",values:[F,f]},{command:"L",values:[.45*F,.6*f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*F,0]},{command:"L",values:[.45*F,.6*f]},{command:"L",values:[0,f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,f]},{command:"L",values:[.45*F,.6*f]},{command:"L",values:[F,f]},{command:"Z",values:[]}]}]};d.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
d.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(d,l,b,F,f,J,I,O,L,H){function A(n,y,G){return n?b(n,{responseType:"image"}).then(E=>{E=E.data;const x=E.width,C=E.height,h=x/C;let g=y;G&&(g=Math.min(g,Math.max(x,C)));return{image:E,width:1>=h?Math.ceil(g*h):g,height:1>=h?g:Math.ceil(g/h)}}):Promise.reject(new f("renderUtils: imageDataSize","href not provided."))}const m=O.createProjector();d.renderSymbol=function(n,y,G){const E=Math.ceil(y[0]);y=Math.ceil(y[1]);if(!n.some(C=>!!C.length))return null;const x=G&&G.node||document.createElement("div");
null!=G.opacity&&(x.style.opacity=G.opacity.toString());null!=G.effectView&&(x.style.filter=H.getCSSFilterFromEffectList(G.effectView));m.append(x,L.renderSVG.bind(null,n,E,y,G));return x};d.tintImageWithColor=function(n,y,G,E,x){return A(n,y,x).then(C=>{const h=C.width?C.width:y,g=C.height?C.height:y;var r;if(r=C.image)r=G&&"ignore"!==E?"multiply"===E&&255===G.r&&255===G.g&&255===G.b&&1===G.a?!1:!0:!1;if(r){var u=C.image.width,p=C.image.height;J("edge")&&/\.svg$/i.test(n)&&(--u,--p);r=Math.ceil(h);
var k=Math.ceil(g);var D=document.createElement("canvas");D.width=r;D.height=k;D.style.width=r+"px";D.style.height=k+"px";D=D.getContext("2d");D.clearRect(0,0,r,k);r=D;r.drawImage(C.image,0,0,u,p,0,0,h,g);k=r.getImageData(0,0,h,g);D=[G.r/255,G.g/255,G.b/255,G.a];const S=F.toHSV(G);for(let P=0;P<k.data.length;P+=4){C=k.data;u=P;p=D;var N=S;switch(E){case "multiply":C[u+0]*=p[0];C[u+1]*=p[1];C[u+2]*=p[2];C[u+3]*=p[3];break;default:{const v=F.toHSV({r:C[u+0],g:C[u+1],b:C[u+2]});v.h=N.h;v.s=N.s;v.v=v.v/
100*N.v;N=F.toRGB(v);C[u+0]=N.r;C[u+1]=N.g;C[u+2]=N.b;C[u+3]*=p[3]}}}r.putImageData(k,0,0);n=r.canvas.toDataURL("image/png")}else(r=l.id&&l.id.findCredential(n))&&r.token&&(C=n.includes("?")?"\x26":"?",n=`${n}${C}token=${r.token}`);return{url:n,width:h,height:g}}).catch(()=>({url:n,width:y,height:y}))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(d){function l(H,A){const m=[];let n,y;if(H[0].length!==
A.length)throw"dimensions do not match";const G=H.length,E=H[0].length;let x=0;for(n=0;n<G;n++){for(y=x=0;y<E;y++)x+=H[n][y]*A[y];m.push(x)}return m}function b(H){H=[H.r/255,H.g/255,H.b/255].map(A=>.04045>=A?A/12.92:((A+.055)/1.055)**2.4);H=l(O,H);return{x:100*H[0],y:100*H[1],z:100*H[2]}}function F(H){H=l(L,[H.x/100,H.y/100,H.z/100]).map(A=>Math.min(1,Math.max(.0031308>=A?12.92*A:1.055*A**(1/2.4)-.055,0)));return{r:Math.round(255*H[0]),g:Math.round(255*H[1]),b:Math.round(255*H[2])}}function f(H){H=
[H.x/95.047,H.y/100,H.z/108.883].map(A=>A>(6/29)**3?A**(1/3):1/3*(29/6)**2*A+4/29);return{l:116*H[1]-16,a:500*(H[0]-H[1]),b:200*(H[1]-H[2])}}function J(H){const A=H.l;H=[(A+16)/116+H.a/500,(A+16)/116,(A+16)/116-H.b/200].map(m=>m>6/29?m**3:3*(6/29)**2*(m-4/29));return{x:95.047*H[0],y:100*H[1],z:108.883*H[2]}}function I(H){if("r"in H&&"g"in H&&"b"in H)return H;if("l"in H&&"c"in H&&"h"in H){var A=H.c;var m=H.h;A={l:H.l,a:A*Math.cos(m),b:A*Math.sin(m)};return F(J(A))}if("l"in H&&"a"in H&&"b"in H)return F(J(H));
if("x"in H&&"y"in H&&"z"in H)return F(H);if("h"in H&&"s"in H&&"v"in H){{m=(H.h+360)%360/60;A=H.v/100*255;H=H.s/100*A;const n=H*(1-Math.abs(m%2-1));switch(Math.floor(m)){case 0:m={r:H,g:n,b:0};break;case 1:m={r:n,g:H,b:0};break;case 2:m={r:0,g:H,b:n};break;case 3:m={r:0,g:n,b:H};break;case 4:m={r:n,g:0,b:H};break;case 5:case 6:m={r:H,g:0,b:n};break;default:m={r:0,g:0,b:0}}m.r=Math.round(m.r+A-H);m.g=Math.round(m.g+A-H);m.b=Math.round(m.b+A-H);A=m}return A}return H}const O=[[.4124,.3576,.1805],[.2126,
.7152,.0722],[.0193,.1192,.9505]],L=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];d.darken=function(H,A){H=f(b(H));H.l*=1-A;return F(J(H))};d.toHSV=function(H){if("h"in H&&"s"in H&&"v"in H)return H;var A=I(H);{H=A.r;const m=A.g,n=A.b;A=Math.max(H,m,n);const y=A-Math.min(H,m,n);H=0===y?0:A===H?(m-n)/y%6:A===m?(n-H)/y+2:(H-m)/y+4;0>H&&(H+=6);H={h:60*H,s:100*(0===y?0:y/A),v:100/255*A}}return H};d.toLAB=function(H){return"l"in H&&"a"in H&&"b"in H?H:f(b(I(H)))};d.toLCH=function(H){if(!("l"in
H&&"c"in H&&"h"in H)){{var A=f(b(I(H)));H=A.l;var m=A.a;const n=A.b;A=Math.sqrt(m*m+n*n);m=Math.atan2(n,m);m=0<m?m:m+2*Math.PI;H={l:H,c:A,h:m}}}return H};d.toRGB=I;d.toXYZ=function(H){return"x"in H&&"y"in H&&"z"in H?H:b(I(H))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I){function O(c,z){c*=R/180;return Math.abs(z*Math.sin(c))+Math.abs(z*Math.cos(c))}function L(c){return c.map(z=>`${z.command} ${z.values.join(" ")}`).join(" ").trim()}function H(c,z,B,U){if(c){if("circle"===c.type)return I.tsx("circle",{fill:z,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-dashoffset":B.dashOffset,"stroke-miterlimit":"4",cx:c.cx,cy:c.cy,r:c.r});if("ellipse"===
c.type)return I.tsx("ellipse",{fill:z,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",cx:c.cx,cy:c.cy,rx:c.rx,ry:c.ry});if("rect"===c.type)return I.tsx("rect",{fill:z,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",x:c.x,y:c.y,width:c.width,height:c.height});if("image"===
c.type)return I.tsx("image",{href:c.src,x:c.x,y:c.y,width:c.width,height:c.height,preserveAspectRatio:"none"});if("path"===c.type)return c="string"!==typeof c.path?L(c.path):c.path,I.tsx("path",{fill:z,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",d:c});if("text"===c.type)return I.tsx("text",{"alignment-baseline":U.alignBaseline,fill:z,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,
"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4","text-anchor":U.align,"text-decoration":U.decoration,kerning:U.kerning,rotate:U.rotate,"text-rendering":P,"font-style":U.font.style,"font-variant":U.font.variant,"font-weight":U.font.weight,"font-size":U.font.size,"font-family":U.font.family,x:c.x,y:c.y},c.text)}return null}function A(c){const z={fill:"none",pattern:null,linearGradient:null};if(c)if("type"in c&&"pattern"===c.type){var B=`patternId-${++N}`;
z.fill=`url(#${B})`;z.pattern={id:B,x:c.x,y:c.y,width:c.width,height:c.height,image:{x:0,y:0,width:c.width,height:c.height,href:c.src}}}else"type"in c&&"linear"===c.type?(B=`linearGradientId-${++S}`,z.fill=`url(#${B})`,z.linearGradient={id:B,x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,stops:c.colors.map(U=>({offset:U.offset,color:U.color&&(new l(U.color)).toString()}))}):c&&(c=new l(c),z.fill=c.toString());return z}function m(c){const z={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(c&&(null!=c.width&&(z.width=c.width),c.cap&&(z.cap=c.cap),c.join&&(z.join=c.join.toString()),c.color&&(z.color=(new l(c.color)).toString()),c.dashArray&&(z.dashArray=c.dashArray),c.dashArray&&(z.dashOffset=c.dashoffset),c.style)){let U=null;c.style in w&&(U=w[c.style]);if(Array.isArray(U)){U=U.slice(0);for(var B=0;B<U.length;++B)U[B]*=c.width;if("butt"!==c.cap){for(B=0;B<U.length;B+=2)U[B]-=c.width,1>U[B]&&(U[B]=1);for(B=1;B<U.length;B+=2)U[B]+=c.width}U=U.join(",")}z.dashArray=U}return z}function n(c,
z){const B={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};c&&(B.align=c.align,B.alignBaseline=c.alignBaseline,B.decoration=c.decoration,B.kerning=c.kerning?"auto":"0",B.rotate=c.rotated?"90":"0",B.font.style=z.style||"normal",B.font.variant=z.variant||"normal",B.font.weight=z.weight||"normal",B.font.size=z.size&&z.size.toString()||"10pt",B.font.family=z.family||"serif");return B}function y(c){const {pattern:z,linearGradient:B}=
c;return z?I.tsx("pattern",{id:z.id,patternUnits:"userSpaceOnUse",x:z.x,y:z.y,width:z.width,height:z.height},I.tsx("image",{x:z.image.x,y:z.image.y,width:z.image.width,height:z.image.height,href:z.image.href})):B?(c=B.stops.map((U,Y)=>I.tsx("stop",{key:`${Y}-stop`,offset:U.offset,"stop-color":U.color})),I.tsx("linearGradient",{id:B.id,gradientUnits:"userSpaceOnUse",x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2},c)):null}function G(c,z){if(!c)return null;const B=[];for(const U of c){const {shape:Y,fill:aa,stroke:ca,
font:na}=U;c=A(aa);const ba=m(ca),ra="text"===Y.type?n(Y,na):null;B.push(H(Y,c.fill,ba,ra))}return I.tsx("mask",{id:z,maskUnits:"userSpaceOnUse"},I.tsx("g",null,B))}function E(c,z,B){return f.translate(c,f.identity(c),[z,B])}function x(c,z,B,U,Y){f.scale(c,f.identity(c),[z,B]);c[4]=c[4]*z-U*z+U;c[5]=c[5]*B-Y*B+Y;return c}function C(c,z,B,U){var Y=z%360*Math.PI/180;f.rotate(c,f.identity(c),Y);z=Math.cos(Y);Y=Math.sin(Y);const aa=c[4],ca=c[5];c[4]=aa*z-ca*Y+U*Y-B*z+B;c[5]=ca*z+aa*Y-B*Y-U*z+U;return c}
function h(c,z){e&&"left"in e?(e.left>c&&(e.left=c),e.right<c&&(e.right=c),e.top>z&&(e.top=z),e.bottom<z&&(e.bottom=z)):e={left:c,bottom:z,right:c,top:z}}function g(c){const z=c.args,B=z.length;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=0;c<B;c+=2)h(z[c],z[c+1]);q.x=z[B-2];q.y=z[B-1];break;case "H":for(c=0;c<B;++c)h(z[c],q.y);q.x=z[B-1];break;case "V":for(c=0;c<B;++c)h(q.x,z[c]);q.y=z[B-1];break;case "m":c=0;"x"in q||(h(q.x=z[0],q.y=z[1]),c=2);for(;c<B;c+=2)h(q.x+=
z[c],q.y+=z[c+1]);break;case "l":case "t":for(c=0;c<B;c+=2)h(q.x+=z[c],q.y+=z[c+1]);break;case "h":for(c=0;c<B;++c)h(q.x+=z[c],q.y);break;case "v":for(c=0;c<B;++c)h(q.x,q.y+=z[c]);break;case "c":for(c=0;c<B;c+=6)h(q.x+z[c],q.y+z[c+1]),h(q.x+z[c+2],q.y+z[c+3]),h(q.x+=z[c+4],q.y+=z[c+5]);break;case "s":case "q":for(c=0;c<B;c+=4)h(q.x+z[c],q.y+z[c+1]),h(q.x+=z[c+2],q.y+=z[c+3]);break;case "A":for(c=0;c<B;c+=7)h(z[c+5],z[c+6]);q.x=z[B-2];q.y=z[B-1];break;case "a":for(c=0;c<B;c+=7)h(q.x+=z[c+5],q.y+=z[c+
6])}}function r(c,z,B){const U=v[c.toLowerCase()];"number"===typeof U&&(U?z.length>=U&&(c={action:c,args:z.slice(0,z.length-z.length%U)},B.push(c),g(c)):(c={action:c,args:[]},B.push(c),g(c)))}function u(c){const z={x:0,y:0,width:0,height:0};if("circle"===c.type)z.x=c.cx-c.r,z.y=c.cy-c.r,z.width=2*c.r,z.height=2*c.r;else if("ellipse"===c.type)z.x=c.cx-c.rx,z.y=c.cy-c.ry,z.width=2*c.rx,z.height=2*c.ry;else if("image"===c.type||"rect"===c.type)z.x=c.x,z.y=c.y,z.width=c.width,z.height=c.height;else if("path"===
c.type){{const Y=("string"!==typeof c.path?L(c.path):c.path).match(K),aa=[];e={};q={};if(Y){c="";var B=[],U=Y.length;for(let ca=0;ca<U;++ca){const na=Y[ca],ba=parseFloat(na);isNaN(ba)?(c&&r(c,B,aa),B=[],c=na):B.push(ba)}r(c,B,aa);c={x:0,y:0,width:0,height:0};e&&"left"in e&&(c.x=e.left,c.y=e.top,c.width=e.right-e.left,c.height=e.bottom-e.top)}else c=null}z.x=c.x;z.y=c.y;z.width=c.width;z.height=c.height}return z}function p(c){const z={x:0,y:0,width:0,height:0};let B=null,U=Number.NEGATIVE_INFINITY,
Y=Number.NEGATIVE_INFINITY;for(const aa of c)B?(B.x=Math.min(B.x,aa.x),B.y=Math.min(B.y,aa.y),U=Math.max(U,aa.x+aa.width),Y=Math.max(Y,aa.y+aa.height)):(B=z,B.x=aa.x,B.y=aa.y,U=aa.x+aa.width,Y=aa.y+aa.height);B&&(B.width=U-B.x,B.height=Y-B.y);return B}function k(c,z,B,U,Y,aa,ca,na,ba){var ra=(ca&&aa?O(aa,z):z)/2,ua=(ca&&aa?O(aa,B):B)/2;ba&&(ra=ba[0],ua=ba[1],ra=(ca&&aa?O(aa,ra):ra)/2,ua=(ca&&aa?O(aa,ua):ua)/2);const Ba=c.width+U,ka=c.height+U;ca=F.create();ba=F.create();var ta=!1;if(Y&&0!==Ba&&0!==
ka){Y=z!==B?z/B:Ba/ka;ta=z>B?z:B;let ma=1,la=1;isNaN(ta)||(1<Y?(ma=ta/Ba,la=ta/Y/ka):(la=ta/ka,ma=ta*Y/Ba));f.multiply(ba,ba,x(ca,ma,la,ra,ua));ta=!0}Y=c.x+(Ba-U)/2;c=c.y+(ka-U)/2;f.multiply(ba,ba,E(ca,ra-Y,ua-c));!ta&&(Ba>z||ka>B)&&(U=Ba/z>ka/B,z=(U?z:B)/(U?Ba:ka),f.multiply(ba,ba,x(ca,z,z,Y,c)));aa&&f.multiply(ba,ba,C(ca,aa,Y,c));na&&f.multiply(ba,ba,E(ca,na[0],na[1]));return`matrix(${ba[0]},${ba[1]},${ba[2]},${ba[3]},${ba[4]},${ba[5]})`}function D(c,z,B){c=null==c?void 0:c.effects.find(na=>"bloom"===
na.type);if(!c)return null;const {strength:U,radius:Y}=c;c=0<U?Y:0;const aa=(U+c)*z,ca=4*U+1;return I.tsx("filter",{id:`bloom${B}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},I.tsx("feMorphology",{operator:"dilate",radius:(U+.5*c)*5**(z/100)*(.4+z/100),in:"SourceGraphic",result:"dilate"}),I.tsx("feGaussianBlur",{in:"dilate",stdDeviation:aa/25,result:"blur"}),I.tsx("feGaussianBlur",{in:"blur",stdDeviation:aa/50,result:"intensityBlur"}),I.tsx("feComponentTransfer",{in:"SourceGraphic",
result:"intensityBrightness"},I.tsx("feFuncR",{type:"linear",slope:ca}),I.tsx("feFuncG",{type:"linear",slope:ca}),I.tsx("feFuncB",{type:"linear",slope:ca})),I.tsx("feMerge",null,I.tsx("feMergeNode",{in:"intensityBlur"}),I.tsx("feMergeNode",{in:"intensityBrightness"}),I.tsx("feGaussianBlur",{stdDeviation:U/10})))}let N=0,S=0;J=b("android");const P=b("chrome")||J&&4<=J?"auto":"optimizeLegibility",v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},K=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let e=
{},q={};const w={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},R=Math.PI;let Q=1;d.computeBBox=p;d.generateFillAttributes=A;d.generateStrokeAttributes=m;d.generateTextAttributes=n;d.getBoundingBox=u;d.getTransformMatrix=k;d.renderDef=y;d.renderSVG=function(c,z,B,U={}){const Y=[],aa=[],ca=++Q,na=D(U.effectView,z,ca);var ba=null;if(na){var ra;ba=
null==(ra=U.effectView)?void 0:ra.effects.find(ta=>"bloom"===ta.type);ba=(ba.strength?ba.strength+ba.radius/2:0)/3;ba=[Math.max(z+z*ba,10),Math.max(B+B*ba,10)]}for(ra=0;ra<c.length;ra++){var ua=c[ra];const ta=[];var Ba=[],ka=0;let ma=0,la=0;for(const pa of ua){const {shape:sa,fill:da,stroke:ea,font:ha,offset:ja}=pa;U.ignoreStrokeWidth||(ka+=ea&&ea.width||0);ua=A(da);const va=m(ea),qa="text"===sa.type?n(sa,ha):null;Y.push(y(ua));ta.push(H(sa,ua.fill,va,qa));Ba.push(u(sa));ja&&(ma+=ja[0],la+=ja[1])}Ba=
k(p(Ba),z,B,ka,U.scale,U.rotation,U.useRotationSize,[ma,la],ba);ka=null;U.masking&&(ka=`mask-${ra}`,Y.push(G(U.masking[ra],ka)),ka=`url(#${ka})`);aa.push(ka?I.tsx("g",{mask:ka},I.tsx("g",{transform:Ba},ta)):I.tsx("g",{transform:Ba},ta))}U.useRotationSize&&U.rotation&&(z=O(U.rotation,z),B=O(U.rotation,B));na&&(z=ba[0],B=ba[1]);return I.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:z,height:B,style:"display: block;"},na,I.tsx("defs",null,Y),na?I.tsx("g",{filter:`url(#bloom${ca})`},aa):aa)};d.renderShape=
H;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(d){function l(){const L=new Float32Array(6);L[0]=1;L[3]=1;return L}function b(L){const H=new Float32Array(6);H[0]=L[0];H[1]=L[1];H[2]=L[2];H[3]=L[3];H[4]=L[4];H[5]=L[5];return H}function F(L,H,A,m,n,y){const G=new Float32Array(6);G[0]=L;G[1]=H;G[2]=A;G[3]=m;G[4]=n;G[5]=y;return G}function f(L,H){return new Float32Array(L,H,6)}function J(L,H,A,
m){const n=H[m];H=H[m+1];L[m]=A[0]*n+A[2]*H+A[4];L[m+1]=A[1]*n+A[3]*H+A[5]}function I(L,H,A,m=0,n=0,y=2){for(n=n||H.length/y;m<n;m++)J(L,H,A,m*y)}const O=Object.freeze(Object.defineProperty({__proto__:null,create:l,clone:b,fromValues:F,createView:f,transform:J,transformMany:I},Symbol.toStringTag,{value:"Module"}));d.clone=b;d.create=l;d.createView=f;d.fromValues=F;d.mat2df32=O;d.transform=J;d.transformMany=I})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(d,l){function b(k,
D){k[0]=D[0];k[1]=D[1];k[2]=D[2];k[3]=D[3];k[4]=D[4];k[5]=D[5];return k}function F(k){k[0]=1;k[1]=0;k[2]=0;k[3]=1;k[4]=0;k[5]=0;return k}function f(k,D,N,S,P,v,K){k[0]=D;k[1]=N;k[2]=S;k[3]=P;k[4]=v;k[5]=K;return k}function J(k,D){const N=D[0],S=D[1],P=D[2],v=D[3],K=D[4];D=D[5];let e=N*v-S*P;if(!e)return null;e=1/e;k[0]=v*e;k[1]=-S*e;k[2]=-P*e;k[3]=N*e;k[4]=(P*D-v*K)*e;k[5]=(S*K-N*D)*e;return k}function I(k){return k[0]*k[3]-k[1]*k[2]}function O(k,D,N){const S=D[0],P=D[1],v=D[2],K=D[3],e=D[4];D=D[5];
const q=N[0],w=N[1],R=N[2],Q=N[3],c=N[4];N=N[5];k[0]=S*q+v*w;k[1]=P*q+K*w;k[2]=S*R+v*Q;k[3]=P*R+K*Q;k[4]=S*c+v*N+e;k[5]=P*c+K*N+D;return k}function L(k,D,N){const S=D[0],P=D[1],v=D[2],K=D[3],e=D[4];D=D[5];const q=Math.sin(N);N=Math.cos(N);k[0]=S*N+v*q;k[1]=P*N+K*q;k[2]=S*-q+v*N;k[3]=P*-q+K*N;k[4]=e;k[5]=D;return k}function H(k,D,N){const S=D[1],P=D[2],v=D[3],K=D[4],e=D[5],q=N[0];N=N[1];k[0]=D[0]*q;k[1]=S*q;k[2]=P*N;k[3]=v*N;k[4]=K;k[5]=e;return k}function A(k,D,N){const S=D[0],P=D[1],v=D[2],K=D[3],
e=D[4];D=D[5];const q=N[0];N=N[1];k[0]=S;k[1]=P;k[2]=v;k[3]=K;k[4]=S*q+v*N+e;k[5]=P*q+K*N+D;return k}function m(k,D){const N=Math.sin(D);D=Math.cos(D);k[0]=D;k[1]=N;k[2]=-N;k[3]=D;k[4]=0;k[5]=0;return k}function n(k,D){k[0]=D[0];k[1]=0;k[2]=0;k[3]=D[1];k[4]=0;k[5]=0;return k}function y(k,D){k[0]=1;k[1]=0;k[2]=0;k[3]=1;k[4]=D[0];k[5]=D[1];return k}function G(k){return"mat2d("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+")"}function E(k){return Math.sqrt(k[0]**2+k[1]**2+k[2]**2+k[3]**2+k[4]**
2+k[5]**2+1)}function x(k,D,N){k[0]=D[0]+N[0];k[1]=D[1]+N[1];k[2]=D[2]+N[2];k[3]=D[3]+N[3];k[4]=D[4]+N[4];k[5]=D[5]+N[5];return k}function C(k,D,N){k[0]=D[0]-N[0];k[1]=D[1]-N[1];k[2]=D[2]-N[2];k[3]=D[3]-N[3];k[4]=D[4]-N[4];k[5]=D[5]-N[5];return k}function h(k,D,N){k[0]=D[0]*N;k[1]=D[1]*N;k[2]=D[2]*N;k[3]=D[3]*N;k[4]=D[4]*N;k[5]=D[5]*N;return k}function g(k,D,N,S){k[0]=D[0]+N[0]*S;k[1]=D[1]+N[1]*S;k[2]=D[2]+N[2]*S;k[3]=D[3]+N[3]*S;k[4]=D[4]+N[4]*S;k[5]=D[5]+N[5]*S;return k}function r(k,D){return k[0]===
D[0]&&k[1]===D[1]&&k[2]===D[2]&&k[3]===D[3]&&k[4]===D[4]&&k[5]===D[5]}function u(k,D){const N=k[0],S=k[1],P=k[2],v=k[3],K=k[4];k=k[5];const e=D[0],q=D[1],w=D[2],R=D[3],Q=D[4];D=D[5];return Math.abs(N-e)<=l.EPSILON*Math.max(1,Math.abs(N),Math.abs(e))&&Math.abs(S-q)<=l.EPSILON*Math.max(1,Math.abs(S),Math.abs(q))&&Math.abs(P-w)<=l.EPSILON*Math.max(1,Math.abs(P),Math.abs(w))&&Math.abs(v-R)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(K-Q)<=l.EPSILON*Math.max(1,Math.abs(K),Math.abs(Q))&&Math.abs(k-
D)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(D))}const p=Object.freeze(Object.defineProperty({__proto__:null,copy:b,identity:F,set:f,invert:J,determinant:I,multiply:O,rotate:L,scale:H,translate:A,fromRotation:m,fromScaling:n,fromTranslation:y,str:G,frob:E,add:x,subtract:C,multiplyScalar:h,multiplyScalarAndAdd:g,exactEquals:r,equals:u,mul:O,sub:C},Symbol.toStringTag,{value:"Module"}));d.add=x;d.copy=b;d.determinant=I;d.equals=u;d.exactEquals=r;d.frob=E;d.fromRotation=m;d.fromScaling=n;d.fromTranslation=
y;d.identity=F;d.invert=J;d.mat2d=p;d.mul=O;d.multiply=O;d.multiplyScalar=h;d.multiplyScalarAndAdd=g;d.rotate=L;d.scale=H;d.set=f;d.str=G;d.sub=C;d.subtract=C;d.translate=A})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(d,l,b,F,f,J,I,O,
L,H,A,m,n){function y(e){e=e.symbolLayers;if(!e)return null;let q=null;e.forEach(w=>{if("object"!==w.type||null==w.resource.href)q="water"===w.type?O.unwrap(w.color):O.isSome(w.material)?O.unwrap(w.material.color):null});return q?new F(q):null}function G(e,q){if(null==q)return e;e=e.toRgba();e[3]*=q;return new F(e)}function E(e,q,w){if(e=e.symbolLayers){var R=Q=>{Q=O.isSome(Q)?Q:null;q=q||Q||null!=w&&K;return G(q,w)};e.forEach(Q=>{if("object"!==Q.type||null==Q.resource.href||q)if("water"===Q.type)Q.color=
R(Q.color);else{var c=O.isSome(Q.material)?Q.material.color:null;c=R(c);O.isNone(Q.material)?Q.material=new n.Symbol3DMaterial({color:c}):Q.material.color=c;null!=w&&"outline"in Q&&O.isSome(Q.outline)&&O.isSome(Q.outline.color)&&(Q.outline.color=G(Q.outline.color,w))}})}}function x(e,q){return C.apply(this,arguments)}function C(){C=b._asyncToGenerator(function*(e,q){(e=e.symbolLayers)&&(yield J.forEach(e,function(){var w=b._asyncToGenerator(function*(R){return h(R,q)});return function(R){return w.apply(this,
arguments)}}()))});return C.apply(this,arguments)}function h(e,q){return g.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*(e,q){switch(e.type){case "extrude":e.size="number"===typeof q[2]?q[2]:0;break;case "icon":case "line":case "text":q=r(q);O.isSome(q)&&(e.size=q);break;case "path":{const w=k(q,H.ONES,[e.width,void 0,e.height]);e.width=S(q[0],e.width,1,w);e.height=S(q[2],e.height,1,w)}break;case "object":yield u(e,q)}});return g.apply(this,arguments)}function r(e){for(const q of e)if("number"===
typeof q)return q;return null}function u(e,q){return p.apply(this,arguments)}function p(){p=b._asyncToGenerator(function*(e,q){const {resourceSize:w,symbolSize:R}=yield D(e),Q=k(q,w,R);e.width=S(q[0],R[0],w[0],Q);e.depth=S(q[1],R[1],w[1],Q);e.height=S(q[2],R[2],w[2],Q)});return p.apply(this,arguments)}function k(e,q,w){for(let R=0;3>R;R++){const Q=e[R];switch(Q){case "symbol-value":return null!=w[R]?w[R]/q[R]:1;case "proportional":break;default:if(Q&&q[R])return Q/q[R]}}return 1}function D(e){return N.apply(this,
arguments)}function N(){N=b._asyncToGenerator(function*(e){const q=yield(yield new Promise((B,U)=>d(["./symbolLayerUtils"],B,U))).computeObjectLayerResourceSize(e,10),{width:w,height:R,depth:Q}=e;e=[w,Q,R];let c=1;for(var z=0;3>z;z++)if(null!=e[z]){c=e[z]/q[z];break}for(z=0;3>z;z++)null==e[z]&&(e[z]=q[z]*c);return{resourceSize:q,symbolSize:e}});return N.apply(this,arguments)}function S(e,q,w,R){switch(e){case "proportional":return w*R;case "symbol-value":return null!=q?q:w;default:return e}}function P(){P=
b._asyncToGenerator(function*(e,q){if(e&&q){if(f.isSymbol3D(e))return x(e,q);if(f.isSymbol2D(e)&&(q=r(q),!O.isNone(q)))switch(e.type){case "simple-marker":e.size=q;break;case "picture-marker":{const w=e.width/e.height;1<w?(e.width=q,e.height=q*w):(e.width=q*w,e.height=q);break}case "simple-line":e.width=q;break;case "text":e.font.size=q}}});return P.apply(this,arguments)}const v=/\/resource\/(.*?)\.svg$/,K=new F("white");l.applyColorToSymbol=function(e,q,w){if(e&&(q||null!=w))if(q&&(q=new F(q)),f.isSymbol3D(e))E(e,
q,w);else if(f.isSymbol2D(e)){if(q=q||e.color)e.color=G(q,w);null!=w&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=G(e.outline.color,w))}};l.applyOpacityToColor=G;l.applyRotationToSymbol=function(e,q,w){e&&null!=q&&(f.isSymbol3D(e)?(e=e.symbolLayers)&&e.forEach(R=>{if(R&&"object"===R.type)switch(w){case "tilt":R.tilt=q;break;case "roll":R.roll=q;break;default:R.heading=q}}):!f.isSymbol2D(e)||"simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=q))};l.applySizesToSymbol=
function(e,q){return P.apply(this,arguments)};l.getCSSFilterFromEffectList=function(e){if(!e)return null;e=e.effects.filter(q=>"bloom"!==q.type).map(q=>q.toJSON());return A.effectFunctionsFromJSON(e)};l.getColorFromSymbol=function(e,q){if(!e)return null;let w=null;f.isSymbol3D(e)?w=y(e):f.isSymbol2D(e)&&(w=e.color?new F(e.color):null);return w?G(w,q):null};l.getIconHref=function(e,q){q=q.resource.href;return!I("esri-canvas-svg-support")&&e.styleOrigin&&v.test(q)?q.replace(v,"/resource/png/$1.png"):
q};l.getSymbolOutlineSize=function(e){if(!e)return 0;if(f.isSymbol3D(e)){{const q=e.symbolLayers&&e.symbolLayers.length;q?(e=e.symbolLayers.getItemAt(q-1),e="outline"in e?O.get(e,"outline","size"):void 0):e=void 0}return O.isSome(e)?e:0}return(e=m.getStroke(e))&&L.px2pt(e.width)||0};l.isVolumetricSymbol=function(e){if(O.isNone(e)||!("symbolLayers"in e)||O.isNone(e.symbolLayers))return!1;switch(e.type){case "point-3d":return e.symbolLayers.some(q=>"object"===q.type);case "line-3d":return e.symbolLayers.some(q=>
"path"===q.type);case "polygon-3d":return e.symbolLayers.some(q=>"object"===q.type||"extrude"===q.type);default:return!1}};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L){b=function(H){function A(m){m=H.call(this,m)||this;m.items=null;m.label=null;return m}d._inheritsLoose(A,H);return A}(F.IdentifiableMixin(b));l.__decorate([f.property()],b.prototype,"items",void 0);l.__decorate([f.property()],b.prototype,"label",void 0);return b=l.__decorate([L.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],b)})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/Heading","../support/widgetUtils","../support/jsxFactory"],
function(d,l,b,F){function f(H){const {headingLevel:A,identify:m,items:n,renderIcon:y,filterText:G,onItemMouseLeave:E,onItemMouseEnter:x,onItemSelect:C,selectedItem:h}=H,g=H.enableListScroll?L.scroller:null;return 0===n.length?F.tsx("div",{class:L.noMatchesMessage,key:"no-matches"},H.messages.noMatches):F.tsx("div",{class:g,key:"item-container"},n.map(r=>r.items?O({group:r,filterText:G,headingLevel:A,identify:m,onItemMouseLeave:E,onItemMouseEnter:x,onItemSelect:C,renderIcon:y,selectedItem:h}):I({item:r,
identify:m,grouped:!0,onItemMouseLeave:E,onItemMouseEnter:x,onItemSelect:C,renderIcon:y,filterText:G,selectedItem:h})))}function J(H){const {messages:A,filterText:m,enableListScroll:n}=H;return F.tsx("div",{key:"filter",class:n?null:L.filterContainerSticky},F.tsx("calcite-input",{onCalciteInputInput:y=>{y=y.currentTarget;H.onFilterChange&&H.onFilterChange(y.value)},placeholder:A.filterPlaceholder,value:m,type:"search"}))}function I(H){const {identify:A,item:m,selectedItem:n,grouped:y,onItemSelect:G,
onItemMouseEnter:E,onItemMouseLeave:x,renderIcon:C}=H;H=`${(null==A?void 0:A(m))||m.id}__${m.label}`;const h=n?`${(null==A?void 0:A(n))||n.id}__${n.label}`:"";return F.tsx("calcite-list-item",{"aria-level":y?"2":"","data-item":m,key:H,class:b.classes(L.item,H===h?L.itemSelected:""),label:m.label,onclick:g=>{g=g.currentTarget["data-item"];G&&G(g)},onmouseenter:g=>{g=g.currentTarget["data-item"];E&&E(g)},onkeydown:g=>{b.isActivationKey(g.key)&&(g=g.currentTarget["data-item"],G&&G(g))},onmouseleave:g=>
{g=g.currentTarget["data-item"];x&&x(g)},tabIndex:0},F.tsx("div",{slot:"content-start"},C&&C({item:m})))}function O(H){const {group:A,identify:m,onItemMouseLeave:n,onItemMouseEnter:y,onItemSelect:G,filterText:E,renderIcon:x,selectedItem:C,headingLevel:h}=H;return F.tsx("div",{class:L.group,key:A.label},F.tsx(l.Heading,{level:h,class:L.groupHeader},A.label),A.items.map(g=>I({item:g,identify:m,grouped:!0,onItemMouseLeave:n,onItemMouseEnter:y,onItemSelect:G,renderIcon:x,filterText:E,selectedItem:C})))}
const L={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",
filterContainerSticky:"esri-item-list__filter-container--sticky",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};d.ItemList=function(H){var A;const {id:m,identify:n,filterEnabled:y=!0,headingLevel:G=4,items:E,selectedItem:x,messages:C,filterText:h="",onFilterChange:g,renderIcon:r,onItemMouseLeave:u,onItemMouseEnter:p,
onItemSelect:k}=H;H=null!=(A=H.enableListScroll)?A:!0;return F.tsx("div",{key:m},y?J({filterText:h,messages:C,onFilterChange:g,id:m}):null,f({enableListScroll:H,identify:n,items:E,selectedItem:x,messages:C,filterText:h,headingLevel:G,renderIcon:r,onItemMouseLeave:u,onItemMouseEnter:p,onItemSelect:k}))};d.renderGroup=O;d.renderItem=I;d.renderLabel=function(H){const {match:A,text:m}=H;H=null;if(A){H=m.toLowerCase();var n=A.toLowerCase(),y=H.indexOf(n);-1===y?H=m:(H=m.substring(0,y),n=m.substr(y,A.length),
y=m.substring(y+A.length),H=F.tsx("span",null,H,F.tsx("strong",null,n),y))}else H=m;return F.tsx("span",{class:L.itemLabel},H)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){I=function(E){function x(h,g){h=E.call(this,h,g)||this;h._animationDelay=500;h._animationPromise=null;h.location=null;h.view=null;h.viewModel=new n;h.visible=!1;return h}d._inheritsLoose(x,E);var C=x.prototype;C.initialize=function(){this.own([f.watch(()=>this.visible,h=>this._visibleChange(h))])};C.destroy=function(){this._animationPromise=null};C.show=function(h){const {location:g,promise:r}=h;g&&(this.viewModel.location=g);this.visible=!0;h=()=>this.hide();
r&&r.catch(()=>{}).then(h)};C.hide=function(){this.visible=!1};C.render=function(){var {visible:h}=this,{screenLocation:g}=this.viewModel;g=!!g;h={["esri-spinner--start"]:h&&g,["esri-spinner--finish"]:!h&&g};g=this._getPositionStyles();return G.tsx("div",{class:this.classes("esri-spinner",h),styles:g})};C._visibleChange=function(h){if(h)this.viewModel.screenLocationEnabled=!0;else{var g=F.after(this._animationDelay);this._animationPromise=g;g.catch(()=>{}).then(()=>{this._animationPromise===g&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};C._getPositionStyles=function(){const {screenLocation:h,view:g}=this.viewModel;if(b.isNone(g)||b.isNone(h))return{};const {padding:r}=g;return{left:`${h.x-r.left}px`,top:`${h.y-r.top}px`}};return x}(m);l.__decorate([J.aliasOf("viewModel.location")],I.prototype,"location",void 0);l.__decorate([J.aliasOf("viewModel.view")],I.prototype,"view",void 0);l.__decorate([H.property({type:n})],I.prototype,"viewModel",void 0);l.__decorate([J.aliasOf("viewModel.visible")],I.prototype,
"visible",void 0);return I=l.__decorate([A.subclass("esri.widgets.Spinner")],I)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(d,l,b,F,f,J,I,O){F=function(L){function H(A){A=L.call(this,A)||this;A.visible=
!1;return A}d._inheritsLoose(H,L);return H}(O);l.__decorate([b.property()],F.prototype,"visible",void 0);return F=l.__decorate([I.subclass("esri.widgets.CompassViewModel")],F)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){const m=Symbol("anchorHandles");b=function(y){function G(E){var x=y.call(this,E)||this;x[n]=new F;x.location=null;x.screenLocationEnabled=!1;x.view=null;x[m].add([J.when(()=>f.applySome(x.screenLocationEnabled?x.view:null,C=>[C.size,"3d"===C.type?C.camera:C.viewpoint]),()=>x.notifyChange("screenLocation")),J.watch(()=>x.screenLocation,(C,h)=>{f.isSome(C)&&f.isSome(h)&&x.emit("view-change")})]);return x}d._inheritsLoose(G,y);G.prototype.destroy=function(){this.view=
null;this[m]=f.destroyMaybe(this[m])};d._createClass(G,[{key:"screenLocation",get:function(){const {location:E,view:x,screenLocationEnabled:C}=this;return C&&f.isSome(E)&&f.isSome(x)&&x.ready?x.toScreen(E):null}}]);return G}(b.EventedAccessor);var n=m;l.__decorate([I.property()],b.prototype,"location",void 0);l.__decorate([I.property()],b.prototype,"screenLocation",null);l.__decorate([I.property()],b.prototype,"screenLocationEnabled",void 0);l.__decorate([I.property()],b.prototype,"view",void 0);
return b=l.__decorate([A.subclass("esri.widgets.support.AnchorElementViewModel")],b)})},"esri/widgets/Editor/deprecationUtils":function(){define(["exports","../../core/deprecate"],function(d,l){d.workflowDeprecation=function(b,F,f){l.deprecated(b,"`"+F+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",{replacement:f,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})};
Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../views/interactive/sketch/SketchLabelOptions ../../views/interactive/sketch/SketchTooltipOptions ../../views/interactive/snapping/SnappingOptions ../Attachments/AttachmentsViewModel ./CreateFeaturesWorkflow ./CreateWorkflow ./deprecationUtils ./UpdateWorkflow ../FeatureForm/FeatureFormViewModel ../FeatureTemplates/FeatureTemplatesViewModel ../Sketch/SketchViewModel ../Spinner/SpinnerViewModel".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S){function P(q,w,R){K.error(new F(q,w,R))}function v(q,w){return q&&q.find(R=>R.layer===w)}const K=I.getLogger("esri.widgets.Editor.EditorViewModel"),e=["create","create-features","update"];f=function(q){function w(Q){Q=q.call(this,Q)||this;Q._sketchGraphicsLayer=new G({listMode:"hide",internal:!0});Q.activeWorkflow=null;Q.activityQueue=[];Q.failures=[];Q.attachmentsViewModel=new h({abilities:{editing:!0}});Q.featureFormViewModel=new k;
Q.featureTemplatesViewModel=new D;Q.labelOptions=new E;Q.layerInfos=null;Q.sketchViewModel=new N({layer:Q._sketchGraphicsLayer});Q.snappingOptions=new C;Q.spinnerViewModel=new S;Q.tooltipOptions=new x;return Q}d._inheritsLoose(w,q);var R=w.prototype;R.initialize=function(){this.handles.add([O.on(()=>this.activeWorkflow,"cancel",()=>this.emit("workflow-cancel")),O.on(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),O.when(()=>{var Q;return null==(Q=this.view)?void 0:Q.map},Q=>{Q.add(this._sketchGraphicsLayer)},
O.initial),O.watch(()=>this.editableItems.toArray(),()=>{const {activeWorkflow:Q}=this;this.refreshCreationTemplates();if(Q){var {stepId:c}=Q;"create"===Q.type?"awaiting-feature-creation-info"!==c||this.canCreate||this._cancelWorkflow():"update"===Q.type&&("awaiting-feature-to-update"===c&&!this.canUpdate||"awaiting-update-feature-candidate"===c&&!Q.data.candidates.some(z=>{const B=this.editableItems.find(U=>U.layer===z.layer);return B&&B.supports.includes("update")}))&&this._cancelWorkflow()}})])};
R.destroy=function(){this._cancelWorkflow().then(()=>{var Q;null!=(Q=this.view)&&Q.map&&this.view.map.remove(this._sketchGraphicsLayer);this.view=null})};R.startCreateWorkflowAtFeatureTypeSelection=function(){var Q=d._asyncToGenerator(function*(){u.workflowDeprecation(K,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection");if(this.canCreate){yield this._cancelWorkflow();var c=this._createCreateWorkflow();yield c.start();this._set("activeWorkflow",c)}else P("editing:unsupported-workflow",
"Create workflow is unsupported or disabled.")});return function(){return Q.apply(this,arguments)}}();R.startCreateFeaturesWorkflowAtFeatureTypeSelection=function(){var Q=d._asyncToGenerator(function*(){return this.startCreateFeaturesWorkflow()});return function(){return Q.apply(this,arguments)}}();R.startCreateWorkflowAtFeatureCreation=function(){var Q=d._asyncToGenerator(function*(c){u.workflowDeprecation(K,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation");if(this.canCreate){yield this._cancelWorkflow();
var z=this._createCreateWorkflow("awaiting-feature-to-create");z.data.creationInfo=c;yield z.start();this._set("activeWorkflow",z)}else P("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(c){return Q.apply(this,arguments)}}();R.startCreateFeaturesWorkflowAtFeatureCreation=function(){var Q=d._asyncToGenerator(function*(c){return this.startCreateFeaturesWorkflow(c,"creating-features")});return function(c){return Q.apply(this,arguments)}}();R.startCreateFeaturesWorkflow=
function(){var Q=d._asyncToGenerator(function*(c,z="awaiting-feature-creation-info"){if(!this.canCreate)throw new F("editing:unsupported-workflow","Creating features is unsupported or disabled.");yield this._cancelWorkflow();c=this._createCreateFeaturesWorkflow(c,z);yield c.start();this._set("activeWorkflow",c)});return function(c){return Q.apply(this,arguments)}}();R.startCreateWorkflowAtFeatureEdit=function(){var Q=d._asyncToGenerator(function*(c){u.workflowDeprecation(K,"startCreateWorkflowAtFeatureEdit");
if(this.canCreate){yield this._cancelWorkflow();var z=this._createCreateWorkflow("editing-new-feature");z.data.edits.feature=c;yield z.start();this._set("activeWorkflow",z)}else P("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(c){return Q.apply(this,arguments)}}();R.startUpdateWorkflowAtFeatureSelection=function(){var Q=d._asyncToGenerator(function*(){if(this.canUpdate){yield this._cancelWorkflow();var c=this._createUpdateWorkflow();yield c.start();
this._set("activeWorkflow",c)}else P("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(){return Q.apply(this,arguments)}}();R.startUpdateWorkflowAtMultipleFeatureSelection=function(){var Q=d._asyncToGenerator(function*(c){if(this.canUpdate){yield this._cancelWorkflow();var z=this._createUpdateWorkflow("awaiting-update-feature-candidate");z.data.candidates=c;yield z.start();this._set("activeWorkflow",z)}else P("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});
return function(c){return Q.apply(this,arguments)}}();R.startUpdateWorkflowAtFeatureEdit=function(){var Q=d._asyncToGenerator(function*(c){if(this.canUpdate){yield this._cancelWorkflow();var z=this._createUpdateWorkflow("editing-existing-feature");z.data.edits.feature=c;yield z.start();this._set("activeWorkflow",z)}else P("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(c){return Q.apply(this,arguments)}}();R.deleteFeatureFromWorkflow=function(){var Q=
d._asyncToGenerator(function*(){const {activeWorkflow:c}=this;c&&"update"===c.type?(yield this._delete(c.data.edits.feature),yield c.reset()):P("editing:unsupported-workflow","Deleting requires an active update workflow.")});return function(){return Q.apply(this,arguments)}}();R.cancelWorkflow=function(){var Q=d._asyncToGenerator(function*(c){return this._cancelWorkflow({warn:!0,...c})});return function(c){return Q.apply(this,arguments)}}();R.refreshCreationTemplates=function(){const Q=[];for(const {layer:c,
supports:z}of this.editableItems)c.loaded&&z.includes("create")&&Q.push(c);this.featureTemplatesViewModel.layers=Q};R._cancelWorkflow=function(){var Q=d._asyncToGenerator(function*(c){const z=this.activeWorkflow;z?c&&!1===c.force?(yield z.cancel(c),this._set("activeWorkflow",null)):(this.emit("workflow-cancel"),this._set("activeWorkflow",null),yield z.cancel(c)):c&&c.warn&&P("editing:no-active-workflow","There is no active workflow to cancel.")});return function(c){return Q.apply(this,arguments)}}();
R._createCreateFeaturesWorkflow=function(Q,c){return g.create(this,Q,c,(z,B)=>this._applyEdits(z,B))};R._createCreateWorkflow=function(Q){return r.create(this,Q,(c,z)=>this._applyEdits(c,z))};R._createUpdateWorkflow=function(Q){return p.create(this,Q,(c,z)=>this._applyEdits(c,z))};R._delete=function(){var Q=d._asyncToGenerator(function*(c){const z=c.sourceLayer;"applyEdits"in z&&(yield this._applyEdits(z,{deleteFeatures:[c]}))});return function(c){return Q.apply(this,arguments)}}();R._applyEdits=
function(){var Q=d._asyncToGenerator(function*(c,z){var B=this;yield this._queueOperation(d._asyncToGenerator(function*(){const U=yield B.view.whenLayerView(c),Y=yield c.applyEdits(z);yield O.whenOnce(()=>!U.updating);return Y}))});return function(c,z){return Q.apply(this,arguments)}}();R._queueOperation=function(Q){this.activityQueue.push(Q);this.notifyChange("syncing");const c=(z,B)=>{z=B.indexOf(z);-1<z&&B.splice(z,1)};return Q().then(({addFeatureResults:z,deleteFeatureResults:B,updateFeatureResults:U})=>
{if(z=z.find(Y=>!!Y.error)||U.find(Y=>!!Y.error)||B.find(Y=>!!Y.error))throw z.error;}).catch(z=>{P("editing:operation-error","An error occurred.",{error:z});const B={error:z,retry:()=>{c(B,this.failures);return this._queueOperation(Q)},cancel:()=>{c(B,this.failures)}};this._set("failures",[...this.failures,B])}).then(()=>{c(Q,this.activityQueue);this.notifyChange("syncing")})};d._createClass(w,[{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(Q){Q&&0!==Q.length||
(Q=[...e]);this._set("allowedWorkflows",Q)}},{key:"canCreate",get:function(){return this.editableItems.some(Q=>Q.supports.includes("create"))}},{key:"canUpdate",get:function(){return this.editableItems.some(Q=>Q.supports.includes("update"))}},{key:"editableItems",get:function(){var Q,c,z;const B=null==(Q=this.view)?void 0:Q.allLayerViews;if(!B)return new b;const U=new Set(null==(c=this.view)?void 0:null==(z=c.map)?void 0:z.editableLayers);return B.filter(Y=>U.has(Y.layer)).map(Y=>{const {layer:aa,
suspended:ca}=Y,{data:na,operations:ba}=aa.capabilities;Y=v(this.layerInfos,aa);const ra="supportsAttachment"in na&&na.supportsAttachment&&(!Y||!1!==Y.allowAttachments);if(ca)return{hasAttachments:ra,layer:aa,supports:[]};const ua=[];ba.supportsAdd&&(this.allowedWorkflows.includes("create")||this.allowedWorkflows.includes("create-features"))&&(!Y||!1!==Y.enabled&&!1!==Y.addEnabled)&&ua.push("create");ba.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!Y||!1!==Y.enabled&&!1!==Y.updateEnabled)&&
ua.push("update");!1!==(Y&&Y.deleteEnabled)&&ba.supportsDelete&&ua.push("delete");return{hasAttachments:ra,layer:aa,supports:ua}}).reverse()}},{key:"state",get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var Q=this.attachmentsViewModel.mode;if("add"===Q)return"adding-attachment";if("edit"===Q)return"editing-attachment";({activeWorkflow:Q}=this);return Q?Q.stepId:"ready"}},{key:"syncing",get:function(){return 0<this.activityQueue.length}},{key:"view",set:function(Q){this.sketchViewModel.view=
Q;this.spinnerViewModel.view=Q;this._set("view",Q)}}]);return w}(J.HandleOwnerMixin(f.EventedAccessor));l.__decorate([n.property({readOnly:!0})],f.prototype,"activeWorkflow",void 0);l.__decorate([n.property({readOnly:!0})],f.prototype,"activityQueue",void 0);l.__decorate([n.property({value:[...e]})],f.prototype,"allowedWorkflows",null);l.__decorate([n.property({readOnly:!0})],f.prototype,"canCreate",null);l.__decorate([n.property({readOnly:!0})],f.prototype,"canUpdate",null);l.__decorate([n.property({readOnly:!0})],
f.prototype,"editableItems",null);l.__decorate([n.property({readOnly:!0})],f.prototype,"failures",void 0);l.__decorate([n.property()],f.prototype,"attachmentsViewModel",void 0);l.__decorate([n.property()],f.prototype,"featureFormViewModel",void 0);l.__decorate([n.property()],f.prototype,"featureTemplatesViewModel",void 0);l.__decorate([L.aliasOf("sketchViewModel.labelOptions")],f.prototype,"labelOptions",void 0);l.__decorate([n.property()],f.prototype,"layerInfos",void 0);l.__decorate([n.property()],
f.prototype,"sketchViewModel",void 0);l.__decorate([L.aliasOf("sketchViewModel.snappingOptions")],f.prototype,"snappingOptions",void 0);l.__decorate([n.property()],f.prototype,"spinnerViewModel",void 0);l.__decorate([n.property()],f.prototype,"state",null);l.__decorate([n.property({readOnly:!0})],f.prototype,"syncing",null);l.__decorate([L.aliasOf("sketchViewModel.tooltipOptions")],f.prototype,"tooltipOptions",void 0);l.__decorate([n.property()],f.prototype,"view",null);return f=l.__decorate([y.subclass("esri.widgets.Editor.EditorViewModel")],
f)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(d,l,b,F,f,J,I,O,L,H,A,m,n){F=function(y){function G(x){x=y.call(this,
x)||this;x.elevationInfo=null;x.graphics=new m.GraphicsCollection;x.screenSizePerspectiveEnabled=!0;x.type="graphics";x.internal=!1;return x}d._inheritsLoose(G,y);var E=G.prototype;E.destroy=function(){this.removeAll();this.graphics.destroy()};E.add=function(x){this.graphics.add(x);return this};E.addMany=function(x){this.graphics.addMany(x);return this};E.removeAll=function(){this.graphics.removeAll();return this};E.remove=function(x){this.graphics.remove(x)};E.removeMany=function(x){this.graphics.removeMany(x)};
E.on=function(x,C){return y.prototype.on.call(this,x,C)};E.graphicChanged=function(x){this.emit("graphic-update",x)};return G}(H.BlendLayer(A.ScaleRangeLayer(L)));l.__decorate([b.property({type:n.default})],F.prototype,"elevationInfo",void 0);l.__decorate([b.property(O.owningCollectionProperty(m.GraphicsCollection,"graphics"))],F.prototype,"graphics",void 0);l.__decorate([b.property({type:["show","hide"]})],F.prototype,"listMode",void 0);l.__decorate([b.property()],F.prototype,"screenSizePerspectiveEnabled",
void 0);l.__decorate([b.property({readOnly:!0})],F.prototype,"type",void 0);l.__decorate([b.property({constructOnly:!0})],F.prototype,"internal",void 0);return F=l.__decorate([I.subclass("esri.layers.GraphicsLayer")],F)})},"esri/widgets/Editor/CreateFeaturesWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/handleUtils ../../core/maybe ../../core/reactiveUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/interactive/snapping/FeatureSnappingLayerSource ./CreateFeaturesWorkflowData ./Workflow ./workflowUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){var E;I=E=function(x){function C(g){g=x.call(this,g)||this;g.type="create-features";g.createFeatureState="create-new";g.featureFormHandle=null;g.visualVariableAttributes={rotation:null,size:null};g.highlightHandles=new Map;g.preventDefaultActionOnCancel=!1;return g}d._inheritsLoose(C,x);var h=C.prototype;h.updatePendingFeature=function(){var g=d._asyncToGenerator(function*(r,u){this.preventDefaultActionOnCancel=!0;this.data.viewModel.sketchViewModel.cancel();
b.remove(this.lastActiveGraphics,r);return this._startUpdating(r,u)});return function(r,u){return g.apply(this,arguments)}}();C.create=function(g,r,u,p){g=new E({data:new n.CreateFeaturesWorkflowData({creationInfo:f.unwrap(r),viewModel:g}),onCommit:function(){var k=d._asyncToGenerator(function*(D){yield p(D.creationInfo.layer,{addFeatures:D.viewModel.sketchViewModel.layer.graphics.toArray()})});return function(D){return k.apply(this,arguments)}}()});g._set("steps",this._createWorkflowSteps(g,u));
return g};h._fadeExistingFeatures=function(g){if("effect"in g){const u=g.effect;g.effect="saturate(0.6) opacity(0.8)";return F.makeHandle(()=>g.effect=u)}const r=g.opacity;g.opacity=.7;return F.makeHandle(()=>g.opacity=r)};h._highlight=function(g){const r=this.data.viewModel.view;"3d"===r.type&&this.highlightHandles.set(g,r.highlight(g))};h._removeHighlight=function(g){f.removeMaybe(this.highlightHandles.get(g));this.highlightHandles.delete(g)};h._startCreating=function(){var g=d._asyncToGenerator(function*(r){this.createFeatureState=
"create-new";return G.startCreatingNewFeature(this.data.viewModel.sketchViewModel,this.data.creationInfo,r)});return function(r){return g.apply(this,arguments)}}();h._startUpdating=function(){var g=d._asyncToGenerator(function*(r,u){const p=this.data.viewModel,k=p.sketchViewModel,D=this.data.creationInfo.layer,N=G.findLayerInfo(p.layerInfos,D);p.featureFormViewModel.set({feature:r,formTemplate:null==N?void 0:N.formTemplate,spatialReference:p.view.spatialReference});f.removeMaybe(this.featureFormHandle);
this.featureFormHandle=p.featureFormViewModel.on("value-change",d._asyncToGenerator(function*(){r.attributes=p.featureFormViewModel.getValues();yield G.updateGraphicSymbolWhenRequired(r,u)}));this._removeHighlight(r);this.createFeatureState="update-pending";this.visualVariableAttributes=G.getVisualVariableAttributes(r);return G.startUpdatingFeature(k,r,D,this.visualVariableAttributes,u)});return function(r,u){return g.apply(this,arguments)}}();C._createWorkflowSteps=function(g,r="awaiting-feature-creation-info"){const {data:u,
handles:p}=g;let k=null,D=!0;const N=new Map;r=G.createWorkflowSteps(["awaiting-feature-creation-info","creating-features"],r,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var S=this;return d._asyncToGenerator(function*(){u.creationInfo=null;p.add(u.viewModel.featureTemplatesViewModel.on("select",({item:P})=>{u.creationInfo={layer:P.layer,template:P.template};u.viewModel.activeWorkflow.next()}),S.id)})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){p.remove(S.id)})()}}),
"creating-features":()=>({id:"creating-features",setUp(){var S=this;return d._asyncToGenerator(function*(){const P=u.viewModel.view,v=u.viewModel.sketchViewModel;D=v.updateOnGraphicClick;v.updateOnGraphicClick=!1;g.lastActiveGraphics=[];g.featureFormHandle=f.removeMaybe(g.featureFormHandle);g.visualVariableAttributes={rotation:null,size:null};const K="2d"===P.type?g._fadeExistingFeatures(u.creationInfo.layer):null,e=v.on("create",function(){var z=d._asyncToGenerator(function*(B){if("cancel"===B.state){if(g.preventDefaultActionOnCancel){g.preventDefaultActionOnCancel=
!1;return}if(1>g.lastActiveGraphics.length)return g._startCreating(N);B=g.lastActiveGraphics.pop();return g._startUpdating(B,N)}if("complete"===B.state)return g._startUpdating(B.graphic,N)});return function(B){return z.apply(this,arguments)}}()),q=v.on("update",function(){var z=d._asyncToGenerator(function*(B){var U=B.graphics[0];if("complete"===B.state){U!==k&&(g.lastActiveGraphics.push(U),g._highlight(U));k=null;if(B.aborted&&g.preventDefaultActionOnCancel){g.preventDefaultActionOnCancel=!1;return}return g._startCreating(N)}"start"===
B.state&&g._removeHighlight(U);yield G.visualVariableInteractiveUpdate(P,U,B,g.visualVariableAttributes,N);B=U.attributes;f.isSome(g.visualVariableAttributes.rotation)&&({field:U}=g.visualVariableAttributes.rotation,u.viewModel.featureFormViewModel.setValue(U,B[U]));f.isSome(g.visualVariableAttributes.size)&&({field:U}=g.visualVariableAttributes.size,u.viewModel.featureFormViewModel.setValue(U,B[U]))});return function(B){return z.apply(this,arguments)}}()),w=v.on("delete",function(){var z=d._asyncToGenerator(function*(B){B=
B.graphics[0];b.remove(g.lastActiveGraphics,B);k=B});return function(B){return z.apply(this,arguments)}}());let R=null;const Q=J.watch(()=>{var z;const B=v.snappingOptions.featureSources.find(U=>U.layer===u.creationInfo.layer);return{hasFeatureLayerSource:!!B,enabled:null!=(z=null==B?void 0:B.enabled)?z:!1}},({hasFeatureLayerSource:z,enabled:B})=>{const U=v.snappingOptions.featureSources;z?(f.isNone(R)&&(R=new m({layer:v.layer,enabled:B}),U.add(R)),R.enabled=B):(f.isSome(R)&&U.remove(R),R=f.destroyMaybe(R))},
J.syncAndInitial),c=P.on("immediate-click",function(){var z=d._asyncToGenerator(function*(B){({results:B}=yield P.hitTest(B,{include:v.layer}));if(B=B.find(U=>"graphic"===U.type))B=B.graphic,"transform"!==v.activeTool&&"reshape"!==v.activeTool||v.updateGraphics.getItemAt(0)===B||(yield g.updatePendingFeature(B,N))});return function(B){return z.apply(this,arguments)}}());yield g._startCreating(N);p.add({remove:()=>{f.removeMaybe(g.featureFormHandle);e.remove();q.remove();w.remove();Q.remove();f.isSome(R)&&
v.snappingOptions.featureSources.remove(R);R=f.destroyMaybe(R);v.cancel();c.remove();f.removeMaybe(K)}},S.id)})()},tearDown(S){var P=this;return d._asyncToGenerator(function*(){S.cancelled&&u.viewModel.sketchViewModel.layer.removeAll();p.remove(P.id);u.viewModel.sketchViewModel.updateOnGraphicClick=D})()}})});return G.avoidFeatureTemplateSelectionWithOnlyOneItem(u,r)};d._createClass(C,[{key:"numPendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics.length}},{key:"pendingFeatures",
get:function(){return this.data.viewModel.sketchViewModel.layer.graphics}}]);return C}(y);return I=E=l.__decorate([A.subclass("esri.widgets.Editor.CreateFeaturesWorkflow")],I)})},"esri/widgets/Editor/CreateFeaturesWorkflowData":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L){d.CreateFeaturesWorkflowData=function(H){function A(m){m=H.call(this,m)||this;m.creationInfo=null;m.viewModel=null;return m}l._inheritsLoose(A,H);return A}(F);b.__decorate([f.property()],d.CreateFeaturesWorkflowData.prototype,"creationInfo",void 0);b.__decorate([f.property()],d.CreateFeaturesWorkflowData.prototype,"viewModel",void 0);d.CreateFeaturesWorkflowData=b.__decorate([L.subclass("esri.widgets.Editor.CreateFeaturesWorkflowData")],d.CreateFeaturesWorkflowData);Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(d,l,b,F,f,J,I,O,L,H){F=function(A){function m(y){y=A.call(this,y)||this;y._indexHistory=
[];y._lastStepIndex=-1;y._stepIndex=-1;y._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};y.data=void 0;y.started=!1;y.steps=[];y.type=null;return y}d._inheritsLoose(m,A);var n=m.prototype;n.cancel=function(){var y=d._asyncToGenerator(function*(G={force:!0}){return!1!==G.force?this._cancel():new Promise((E,x)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(E)},deny:()=>x(new b("workflow:cancel-denied","Request to cancel workflow was denied."))}})})});
return function(){return y.apply(this,arguments)}}();n.commit=function(){var y=d._asyncToGenerator(function*(){this.handles.remove(this._handleKeys.beforeCommit);yield this.onCommit(this.data);this.handles.remove(this._handleKeys.afterCommit);this.emit("commit");this.started&&(yield this.reset())});return function(){return y.apply(this,arguments)}}();n.go=function(){var y=d._asyncToGenerator(function*(G){var {steps:E}=this;E=E.findIndex(x=>x.id===G);this._indexHistory.push(this._stepIndex);yield this._go(E)});
return function(G){return y.apply(this,arguments)}}();n.next=function(){var y=d._asyncToGenerator(function*(){this._indexHistory.push(this._stepIndex);yield this._go(this._stepIndex+1)});return function(){return y.apply(this,arguments)}}();n.previous=function(){var y=d._asyncToGenerator(function*(G={cancelCurrentStep:!1}){yield this._go(this._indexHistory.pop(),G.cancelCurrentStep)});return function(){return y.apply(this,arguments)}}();n.reset=function(){var y=d._asyncToGenerator(function*(){yield this._cancel(!1);
yield this.start()});return function(){return y.apply(this,arguments)}}();n.start=function(){var y=d._asyncToGenerator(function*(){this._set("started",!0);yield this._go(-1===this._stepIndex?0:this._stepIndex)});return function(){return y.apply(this,arguments)}}();n._cancel=function(){var y=d._asyncToGenerator(function*(G=!0){this.started&&(this._set("started",!1),yield this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll());this.handles.remove([this._handleKeys.afterCommit,
this._handleKeys.beforeCommit]);this._resetIndexing(G);G&&this.emit("cancel")});return function(){return y.apply(this,arguments)}}();n._go=function(){var y=d._asyncToGenerator(function*(G=-1,E=!1){-1>=G||G>=this.steps.length||(this.started&&(-1<this._lastStepIndex&&(yield this.steps[this._lastStepIndex].tearDown({cancelled:E})),yield this.steps[G].setUp(),this._lastStepIndex=G),this._stepIndex=G,this._notifyStepProps())});return function(){return y.apply(this,arguments)}}();n._resetIndexing=function(y=
!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;y&&this._notifyStepProps()};n._notifyStepProps=function(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")};d._createClass(m,[{key:"hasNextStep",get:function(){const {steps:y}=this;return!!(y&&this._stepIndex<y.filter(G=>!G.parent).length-1)}},{key:"hasPreviousStep",get:function(){return 0<this._stepIndex}},{key:"stepId",get:function(){var {steps:y}=this;return(y=y&&y[this._stepIndex])&&
y.id}}]);return m}(f.HandleOwnerMixin(F.EventedAccessor));l.__decorate([J.property()],F.prototype,"data",void 0);l.__decorate([J.property()],F.prototype,"hasNextStep",null);l.__decorate([J.property()],F.prototype,"hasPreviousStep",null);l.__decorate([J.property()],F.prototype,"onCommit",void 0);l.__decorate([J.property()],F.prototype,"started",void 0);l.__decorate([J.property({readOnly:!0})],F.prototype,"stepId",null);l.__decorate([J.property()],F.prototype,"steps",void 0);l.__decorate([J.property({readOnly:!0})],
F.prototype,"type",void 0);l.__decorate([J.property()],F.prototype,"commit",null);return F=l.__decorate([H.subclass("esri.widgets.Editor.Workflow")],F)})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Graphic ../../core/has ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/diffUtils ../../renderers/support/clickToleranceUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/visualVariables/support/visualVariableUtils ../../symbols/support/symbolConversion ../../symbols/support/symbolUtils ../../views/3d/layers/graphics/GraphicState ../../views/support/drapedUtils ../../views/support/hitTestSelectUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g){function r(ma){const la=ma.sourceLayer;var pa;if(!(pa="feature"!==la.type)){a:switch(la.renderer.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":case "pie-chart":pa=!0;break a;default:pa=!1}pa=!pa}if(pa)return{rotation:null,size:null};let sa=pa=null;var da=la.renderer.getVisualVariablesForType("rotation").filter(ea=>(!ea.axis||"heading"===ea.axis)&&ea.field&&!ea.valueExpression&&I.isSome(G.getRotationAngle(ea,
ma)));1===da.length&&(pa=u(da[0],la));da=la.renderer.getVisualVariablesForType("size").filter(ea=>ea.field&&!ea.useSymbolValue&&!ea.valueExpression&&y.getTransformationType(ea)===y.TransformationType.RealWorldSize&&I.isSome(G.getSize(ea,ma)));1===da.length&&(sa=N(da[0],la));return{rotation:pa,size:sa}}function u(ma,la){var pa;const sa="heading"===(ma.axis||"heading")&&"arithmetic"===ma.rotationType?-1:1,da=ma.field,ea=(la=la.fields&&la.fields.filter(va=>va.name===da))&&1===la.length?la[0].type:"double";
var ha=0,ja=0;return{field:da,fieldType:ea,getDefault:()=>Promise.resolve(0),getValue:va=>{ja=ha-sa*va;return S((ja+360)%360,ea)},initValue:va=>{ha=null!=va?va:ja;ja=0},isUpdatingInteractively:!1,rotationType:null!=(pa=ma.rotationType)?pa:"geographic"}}function p(ma,la){switch(la){case "width":return ma[0];case "depth":return ma[1];case "height":return ma[2];default:return ma[2]||ma[1]||ma[0]}}function k(ma,la,pa){return D.apply(this,arguments)}function D(){D=b._asyncToGenerator(function*(ma,la,pa){if(I.isNone(la))return 0;
({symbol:la}=E.to3D(la));if(I.isNone(la)||"web-style"===la.type||"cim"===la.type)return 0;la=la.symbolLayers.getItemAt(0);if(!la)return 0;switch(la.type){case "icon":return{computeIconLayerResourceSize:pa}=yield new Promise((sa,da)=>d(["../../symbols/support/symbolLayerUtils"],sa,da)),la.size||Math.min(ta.icon,(yield pa(la,ta.icon))[0])||ta.icon;case "text":return la.size||ta.text;case "line":return la.size||ta.line;case "object":{const {computeObjectLayerResourceSize:sa}=yield new Promise((da,ea)=>
d(["../../symbols/support/symbolLayerUtils"],da,ea));ma=yield sa(la,ma.scale/ta.viewScaleSizeFactor);return p(ma,pa)}case "path":return(null!=la.width?la.width:la.height)||ma.scale/ta.viewScaleSizeFactor;case "extrude":return la.size||ma.scale/ta.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}});return D.apply(this,arguments)}function N(ma,la){var pa;const sa=ma.field,da=ma.axis,ea=(la=la.fields&&la.fields.filter(wa=>wa.name===sa))&&1===la.length?la[0].type:"double";var ha=
0,ja=0;const va=null!=(pa=n.meterIn[ma.valueUnit])?pa:1;let qa;qa="area"===ma.valueRepresentation?wa=>(wa*va/2)**2*Math.PI:"radius"===ma.valueRepresentation||"distance"===ma.valueRepresentation?wa=>wa*va/2:wa=>wa*va;return{field:sa,fieldType:ea,getDefault:function(){var wa=b._asyncToGenerator(function*(Ca,Ka){return S(qa(yield k(Ka,Ca,da)),ea)});return function(Ca,Ka){return wa.apply(this,arguments)}}(),getValue:(wa,Ca)=>{ha||(ha=Ca.pixelSizeAt(Ca.center));ja=ha*wa;return S(ja,ea)},initValue:wa=>
{ha=null!=wa?wa:ja;ja=0},isUpdatingInteractively:!1,displayUnit:ka(ma.valueUnit),axis:ma.axis}}function S(ma,la){switch(la){case "small-integer":case "integer":case "long":return Math.round(ma);case "double":case "single":return ma;default:return 0}}function P(ma,la){return v.apply(this,arguments)}function v(){v=b._asyncToGenerator(function*(ma,la){la=yield x.getDisplayedSymbol(ma,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:la});const pa=A.diff(ma.symbol,la);I.isSome(pa)&&(ma.symbol=la)});
return v.apply(this,arguments)}function K(ma){if("mesh"===ma||"multipatch"===ma)throw Error("Mesh and Multipatch not supported");return ma}function e(){e=b._asyncToGenerator(function*(ma,la,pa,sa){yield q(ma,la,sa);const da=ma.on("create",function(){var ea=b._asyncToGenerator(function*(ha){if("cancel"===ha.state)return q(ma,la,sa);"complete"===ha.state&&(ha=ha.graphic,ha.sourceLayer||(ha.sourceLayer=la.layer),ha.attributes||(ha.attributes={...la.template.prototype.attributes}),yield P(ha,sa),pa(ha))});
return function(ha){return ea.apply(this,arguments)}}());return{remove:()=>{da.remove();ma.cancel()}}});return e.apply(this,arguments)}function q(ma,la,pa){return w.apply(this,arguments)}function w(){w=b._asyncToGenerator(function*(ma,la,pa){const sa=la.layer;la={...la.template.prototype.attributes};yield R(ma,sa,la,pa);pa={graphicProperties:{attributes:la,sourceLayer:sa},hasZ:sa.capabilities.data.supportsZ};ma.layer.elevationInfo=sa.elevationInfo;return ma.create(K(sa.geometryType),pa)});return w.apply(this,
arguments)}function R(ma,la,pa,sa){return Q.apply(this,arguments)}function Q(){Q=b._asyncToGenerator(function*(ma,la,pa,sa){var da;la=new F({sourceLayer:la,attributes:pa});const {rotation:ea,size:ha}=r(la);let ja=yield x.getDisplayedSymbol(la,{useSourceLayer:!0,webStyleCache:sa}),va=!1;for(const qa of[ha,ea])I.isNone(qa)||null!=pa[qa.field]||(pa[qa.field]=yield qa.getDefault(ja,ma.view),va=!0);va&&(ja=yield x.getDisplayedSymbol(la,{useSourceLayer:!0,webStyleCache:sa}));switch(null==(da=ja)?void 0:
da.type){case "simple-fill":case "polygon-3d":ma.polygonSymbol=ja;break;case "simple-line":case "line-3d":ma.polylineSymbol=ja;break;case "simple-marker":case "picture-marker":case "point-3d":case "cim":ma.pointSymbol=ja}c(ma.tooltipOptions,ha,ea)});return Q.apply(this,arguments)}function c(ma,la,pa){if(I.isSome(la)||I.isSome(pa)){var sa;ma.visualVariables={size:I.isSome(la)?{unit:la.displayUnit,axis:la.axis,valueType:la.fieldType}:null,rotation:I.isSome(pa)?{valueType:pa.fieldType,rotationType:null!=
(sa=pa.rotationType)?sa:"geographic"}:null}}else ma.visualVariables=null}function z(ma,la,pa,sa){return B.apply(this,arguments)}function B(){B=b._asyncToGenerator(function*(ma,la,pa,sa){if(0===ma.length)return[];const {updatable:da,graphicsByLayer:ea}=yield pa.async(b._asyncToGenerator(function*(){var {results:ha}=yield O.whenOrAbort(g.hitTestSelectSimilarDistance(la,pa),sa);const ja=new Map,va=({layer:qa})=>{var wa=ja.get(qa);return wa?wa:(wa=[],ja.set(qa,wa),wa)};g.filterGraphicHits(ha).forEach(({graphic:qa})=>
va(qa).push(qa));ha=ma.filter(({supports:qa,layer:wa})=>qa.includes("update")&&ja.has(wa));0!==ha.length&&pa.stopPropagation();return{updatable:ha,graphicsByLayer:ja}}));return O.whenOrAbort(O.eachAlways(da.map(function(){var ha=b._asyncToGenerator(function*({layer:ja}){const {objectIdField:va,displayField:qa}=ja,wa=[va];ja.fieldsIndex.has(qa)&&wa.push(qa);const Ca=ea.get(ja);if(Ca.some(Ka=>wa.some(Ga=>!(Ga in Ka.attributes)))){const Ka=ja.createQuery();Ka.outFields=wa;Ka.returnGeometry=!1;Ka.objectIds=
Ca.map(Ga=>Ga.getObjectId());return ja.queryFeatures(Ka,{signal:sa}).then(({features:Ga})=>Ga)}return Ca});return function(ja){return ha.apply(this,arguments)}}())),sa)});return B.apply(this,arguments)}function U(ma,la,pa,sa){return Y.apply(this,arguments)}function Y(){Y=b._asyncToGenerator(function*(ma,la,pa,sa){if(0===ma.length)return[];let da=null;const ea=yield pa.async(b._asyncToGenerator(function*(){var {results:ha}=yield O.whenOrAbort(la.hitTest(pa),sa);if(0===ha.length)return[];const ja=new Set;
da=g.filterGraphicHits(ha);da.forEach(({graphic:va})=>va&&ja.add(va.layer));ha=ma.items.filter(({layer:va,supports:qa})=>qa.includes("update")&&ja.has(va));0<ha.length&&pa.stopPropagation();return ha}));return O.whenOrAbort(O.eachAlways(ea.map(({layer:ha})=>{const {objectIdField:ja,displayField:va}=ha;var qa=[ja];ha.fieldsIndex.has(va)&&qa.push(va);const wa=ha.createQuery();wa.outFields=qa;wa.returnGeometry=!1;qa="renderer"in ha?m.calculateTolerance({renderer:ha.renderer,event:pa}):0;wa.geometry=
h.createQueryGeometry(pa.mapPoint,qa,la);wa.outSpatialReference=la.spatialReference;return ha.queryFeatures(wa,{signal:sa}).then(({features:Ca})=>{da.forEach(({graphic:Ka})=>{Ka.layer===ha&&(Ca.find(Ga=>Ga.attributes[ja]===Ka.attributes[ha.objectIdField])||Ca.push(Ka))});return Ca})})),sa)});return Y.apply(this,arguments)}function aa(){aa=b._asyncToGenerator(function*(ma,la,pa,sa){switch(la.type){case "3d":return z(ma,la,pa,sa);case "2d":return U(ma,la,pa,sa)}});return aa.apply(this,arguments)}function ca(){ca=
b._asyncToGenerator(function*(ma,la,pa){const sa=ma.layer,da=sa.createQuery();da.objectIds=[ma.getAttribute(sa.objectIdField)];da.outFields=["*"];da.outSpatialReference=la.spatialReference;da.returnM=sa.capabilities.data.supportsM;da.returnZ=sa.capabilities.data.supportsZ;return(yield sa.queryFeatures(da,{signal:pa})).features[0]});return ca.apply(this,arguments)}function na(ma,la,pa,sa,da){return ba.apply(this,arguments)}function ba(){ba=b._asyncToGenerator(function*(ma,la,pa,sa,da){let ea=!1;const {rotation:ha,
size:ja}=sa;[ha,ja].forEach(function(){var va=b._asyncToGenerator(function*(qa){if(!I.isNone(qa)){var wa=la.attributes[qa.field];I.isSome(wa)?qa.initValue(wa):(wa=yield qa.getDefault(la.symbol,ma.view),qa.initValue(wa),la.setAttribute(qa.field,wa),ea=!0)}});return function(qa){return va.apply(this,arguments)}}());ea&&(yield P(la,da));sa={multipleSelectionEnabled:!1};"point"===pa.geometryType&&(sa.enableRotation=I.isSome(ha),sa.enableScaling=I.isSome(ja));c(ma.tooltipOptions,ja,ha);ma.layer.elevationInfo=
pa.elevationInfo;return ma.update(la,sa)});return ba.apply(this,arguments)}function ra(ma,la,pa,sa,da){return ua.apply(this,arguments)}function ua(){ua=b._asyncToGenerator(function*(ma,la,pa,sa,da){var ea;if(I.isSome(la.geometry)&&"point"===(null==(ea=la.geometry)?void 0:ea.type)){ea=sa.rotation;var ha=pa.toolEventInfo;ha=!ha||"rotate-start"!==ha.type&&"rotate"!==ha.type&&"rotate-stop"!==ha.type?null:ha;if(I.isSome(ea)&&I.isSome(ha))if("rotate-stop"===ha.type)ea.isUpdatingInteractively=!1,ea.initValue();
else{ea.isUpdatingInteractively=!0;const {field:ja,getValue:va}=ea;la.attributes[ja]=va(ha.angle,ma)}sa=sa.size;pa=pa.toolEventInfo;pa=!pa||"scale-start"!==pa.type&&"scale"!==pa.type&&"scale-stop"!==pa.type?null:pa;if(I.isSome(sa)&&I.isSome(pa))if("scale-stop"===pa.type)sa.isUpdatingInteractively=!1,sa.initValue();else{sa.isUpdatingInteractively=!0;const {field:ja,getValue:va}=sa;la.attributes[ja]=va(pa.xScale,ma)}yield P(la,da)}});return ua.apply(this,arguments)}function Ba(){Ba=b._asyncToGenerator(function*(ma,
la,pa,sa,da,ea){const ha=ma.clone();yield P(ha,ea);sa.map.add(pa.layer);pa.layer.add(ha);const ja=ma.sourceLayer,va=sa.whenLayerView(ja),qa=()=>{const Ma=ma.attributes[ma.layer.objectIdField];va.then(Qa=>Qa.setVisibility(Ma,!1),()=>{});return{remove(){va.then(Qa=>Qa.setVisibility(Ma,!0),()=>{})}}};let wa=null,Ca=null;if("3d"===sa.type){const Ma=new C.GraphicState({graphic:ha});wa=J.handlesGroup([sa.trackGraphicState(Ma),L.watch(()=>Ma.displaying,Qa=>{Ca=Qa?qa():I.removeMaybe(Ca)},L.initial)])}else Ca=
qa();yield na(pa,ha,ja,la,ea);let Ka=null;va.then(Ma=>Ka=Ma,()=>{});const Ga=la.size,Ea=la.rotation,Da=L.watch(()=>ma.attributes,function(){var Ma=b._asyncToGenerator(function*(Qa){let za=!1;for(const Ya in Qa){const sb=Qa[Ya];sb!==ha.attributes[Ya]&&(ha.setAttribute(Ya,sb),I.isSome(Ga)&&!Ga.isUpdatingInteractively&&Ga.field===Ya&&Ga.initValue(sb),I.isSome(Ea)&&!Ea.isUpdatingInteractively&&Ea.field===Ya&&Ea.initValue(sb),I.isNone(Ka)||Ka.requiredFields.includes(Ya))&&(za=!0)}za&&(yield P(ha,ea))});
return function(Qa){return Ma.apply(this,arguments)}}()),La=pa.on("update",function(){var Ma=b._asyncToGenerator(function*(Qa){const za=Qa.graphics[0];if("complete"===Qa.state)return na(pa,za,ja,la,ea);yield ra(sa,za,Qa,la,ea);da(za.clone())});return function(Qa){return Ma.apply(this,arguments)}}()),Oa=pa.on(["undo","redo"],function(){var Ma=b._asyncToGenerator(function*(Qa){da(Qa.graphics[0].clone())});return function(Qa){return Ma.apply(this,arguments)}}()),Ra=()=>{};return{interactive:{remove(){Oa.remove();
La.remove();pa.cancel();Da&&Da.remove();this.remove=Ra}},visual:{remove(){I.removeMaybe(Ca);sa.whenLayerView(ja).then(Ma=>L.whenOnce(()=>!Ma.updating)).then(()=>{I.removeMaybe(wa);pa.layer.remove(ha);this.remove=Ra})}}}});return Ba.apply(this,arguments)}function ka(ma){switch(ma){case "unknown":case "decimal-degrees":return null;default:return ma}}const ta={icon:H.px2pt(24),text:H.px2pt(12),line:H.px2pt(1),viewScaleSizeFactor:100};l.avoidFeatureTemplateSelectionWithOnlyOneItem=function(ma,la){ma.viewModel.refreshCreationTemplates();
if("awaiting-feature-creation-info"===la[0].id){var pa=ma.viewModel.featureTemplatesViewModel.items;1!==pa.length?pa=null:(pa=pa[0],pa="items"in pa?1===pa.items.length?pa.items[0]:null:pa);I.isSome(pa)&&(ma.creationInfo={layer:pa.layer,template:pa.template},la.shift())}return la};l.createWorkflowSteps=function(ma,la,pa){let sa=!1;return ma.filter(da=>sa?!0:sa=da===la).map(da=>pa[da]())};l.fetchCandidates=function(ma,la,pa,sa){return aa.apply(this,arguments)};l.fetchFullFeature=function(ma,la,pa){return ca.apply(this,
arguments)};l.findLayerInfo=function(ma,la){return ma&&ma.find(pa=>pa.layer===la)};l.getVisualVariableAttributes=r;l.setUpFeatureAdd=function(ma,la,pa,sa){return e.apply(this,arguments)};l.setUpGeometryUpdate=function(ma,la,pa,sa,da,ea){return Ba.apply(this,arguments)};l.sizeDefaults=ta;l.sizeVariableUnitToLengthUnit=ka;l.startCreatingNewFeature=q;l.startUpdatingFeature=na;l.updateGraphicSymbolWhenRequired=P;l.visualVariableInteractiveUpdate=ra;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(d){function l(f,J){return J?"xoffset"in J&&J.xoffset?Math.max(f,Math.abs(J.xoffset)):"yoffset"in J&&J.yoffset?Math.max(f,Math.abs(J.yoffset||0)):f:f}function b(f,J){if("number"===typeof f)return f;if(f&&f.stops&&f.stops.length){{f=f.stops;let I=J=0;for(let O=0;O<f.length;O++){const L=f[O].size;"number"===typeof L&&(J+=L,I++)}f=J/I}return f}return J}function F(f,J){if(!J)return f;J=J.filter(L=>"size"===L.type).map(L=>
{const {maxSize:H,minSize:A}=L;return(b(H,f)+b(A,f))/2});let I=0;const O=J.length;if(0===O)return f;for(let L=0;L<O;L++)I+=J[L];return Math.max(Math.floor(I/O),f)}d.calculateTolerance=function(f){const J=f&&f.renderer;f="touch"===(f&&f.event&&f.event.pointerType)?9:6;if(!J)return f;f="visualVariables"in J?F(f,J.visualVariables):f;if("simple"===J.type)return l(f,J.symbol);if("unique-value"===J.type){let I=f;J.uniqueValueInfos.forEach(O=>{I=l(I,O.symbol)});return I}if("class-breaks"===J.type){let I=
f;J.classBreakInfos.forEach(O=>{I=l(I,O.symbol)});return I}return f};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L){d.GraphicState=function(H){function A(m){m=H.call(this,m)||this;m.tracking=!1;m.displaying=!1;m.isDraped=!1;return m}l._inheritsLoose(A,H);return A}(F.EventedAccessor);b.__decorate([f.property({constructOnly:!0})],d.GraphicState.prototype,"graphic",void 0);b.__decorate([f.property()],d.GraphicState.prototype,"tracking",void 0);b.__decorate([f.property()],d.GraphicState.prototype,"displaying",void 0);b.__decorate([f.property()],d.GraphicState.prototype,"isDraped",void 0);
d.GraphicState=b.__decorate([L.subclass("esri.views.3d.layers.graphics.GraphicState")],d.GraphicState);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),function(d,l,b,F,f,J){function I(L,H,A,m=new J){let n;if("2d"===A.type)n=H*A.resolution;else if("3d"===A.type){var y=
A.overlayPixelSizeInMapUnits(L),G=A.basemapSpatialReference;n=b.isSome(G)&&!G.equals(A.spatialReference)?F.getMetersPerUnitForSR(G)/F.getMetersPerUnitForSR(A.spatialReference):H*y}H=L.x-n;y=L.y-n;G=L.x+n;L=L.y+n;({spatialReference:A}=A);m.xmin=Math.min(H,G);m.ymin=Math.min(y,L);m.xmax=Math.max(H,G);m.ymax=Math.max(y,L);m.spatialReference=A;return m}const O=new J;d.createQueryGeometry=I;d.intersectsDrapedGeometry=function(L,H,A){L=A.toMap(L);if(b.isNone(L))return!1;const m=f.calculateTolerance();return I(L,
m,A,O).intersects(H)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(d,l,b){function F(){F=l._asyncToGenerator(function*(J,I){if("2d"===J.type)return J.hitTest(I);J=yield J.hitTest(I);if(0===J.results.length)return J;I=J.results[0];const O=b.isSome(I.distance)?1.05*I.distance:I.distance;I=J.results.findIndex(L=>L.distance>
O);-1!==I&&(J.results=J.results.slice(0,I));return J});return F.apply(this,arguments)}function f(J){return b.isSome(J)&&"graphic"===J.type}d.filterGraphicHits=function(J){return J.filter(f)};d.findFirstGraphicHit=function(J){var I;return null!=(I=J.find(f))?I:null};d.hitTestSelectSimilarDistance=function(J,I){return F.apply(this,arguments)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Editor/CreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ./CreateWorkflowData ./Edits ./Workflow ./workflowUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n){var y;F=y=function(G){function E(x){x=G.call(this,x)||this;x.type="create";return x}d._inheritsLoose(E,G);E.create=function(x,C,h){x=new y({data:new H({edits:new A.Edits,viewModel:x}),onCommit:function(){var g=d._asyncToGenerator(function*(r){yield h(r.creationInfo.layer,{addFeatures:[r.edits.feature]})});return function(r){return g.apply(this,arguments)}}()});x._set("steps",this._createWorkflowSteps(x,C));return x};E._createWorkflowSteps=function(x,C="awaiting-feature-creation-info"){const {data:h,
handles:g}=x,r=new Map;x=n.createWorkflowSteps(["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature"],C,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var u=this;return d._asyncToGenerator(function*(){h.creationInfo=null;h.edits.feature=null;h.viewModel.featureTemplatesViewModel.select(null);g.add(h.viewModel.featureTemplatesViewModel.on("select",({item:p})=>{h.creationInfo={layer:p.layer,template:p.template};h.viewModel.activeWorkflow.next()}),
u.id)})()},tearDown(){var u=this;return d._asyncToGenerator(function*(){g.remove(u.id)})()}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",setUp(){var u=this;return d._asyncToGenerator(function*(){g.add(yield n.setUpFeatureAdd(h.viewModel.sketchViewModel,h.creationInfo,p=>{h.edits.feature=p;h.viewModel.activeWorkflow.next()},r),u.id)})()},tearDown(){var u=this;return d._asyncToGenerator(function*(){g.remove(u.id)})()}}),"editing-new-feature":()=>({id:"editing-new-feature",setUp(){var u=
this;return d._asyncToGenerator(function*(){const p=h.edits.feature,k=p.sourceLayer,D=h.viewModel,N=D.sketchViewModel;var S=n.findLayerInfo(D.layerInfos,k);S=null==S?void 0:S.formTemplate;const {spatialReference:P}=D.view;D.featureFormViewModel.set({feature:p,formTemplate:S,spatialReference:P});N.allowDeleteKey=!1;const v=n.getVisualVariableAttributes(p);yield n.startUpdatingFeature(N,p,k,v,r);S=N.on("update",function(){var K=d._asyncToGenerator(function*(e){var q=e.graphics[0];if("complete"===e.state)return n.startUpdatingFeature(N,
q,k,v,r);yield n.visualVariableInteractiveUpdate(N.view,q,e,v,r);e=q.attributes;b.isSome(v.rotation)&&({field:q}=v.rotation,D.featureFormViewModel.setValue(q,e[q]));b.isSome(v.size)&&({field:q}=v.size,D.featureFormViewModel.setValue(q,e[q]))});return function(e){return K.apply(this,arguments)}}());g.add([h.viewModel.featureFormViewModel.on("value-change",d._asyncToGenerator(function*(){h.edits.updateAttributes(h.viewModel.featureFormViewModel.getValues());p.attributes=h.edits.feature.attributes;"3d"===
N.view.type&&(yield n.updateGraphicSymbolWhenRequired(p,r))})),S],u.id)})()},tearDown(u){var p=this;return d._asyncToGenerator(function*(){u.cancelled&&h.viewModel.sketchViewModel.layer.removeAll();g.remove(p.id)})()}})});return n.avoidFeatureTemplateSelectionWithOnlyOneItem(h,x)};return E}(m);return F=y=l.__decorate([L.subclass("esri.widgets.Editor.CreateWorkflow")],F)})},"esri/widgets/Editor/CreateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.creationInfo=null;A.edits=null;A.viewModel=null;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"creationInfo",void 0);l.__decorate([F.property()],b.prototype,"edits",void 0);l.__decorate([F.property()],b.prototype,"viewModel",void 0);return b=l.__decorate([O.subclass("esri.widgets.Editor.CreateWorkflowData")],b)})},"esri/widgets/Editor/Edits":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){function m(n){return J.isNone(n)?null:JSON.stringify(n)}d.Edits=function(n){function y(E){E=n.call(this,E)||this;E._baselineAttributesJSON=null;E._baselineGeometryJSON=null;E.feature=null;return E}l._inheritsLoose(y,n);var G=y.prototype;G.trackChanges=function(){this.feature&&(this._baselineAttributesJSON=m(this.feature.attributes),this._baselineGeometryJSON=m(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))};G.updateAttributes=
function(E){this.feature.attributes=E;this.notifyChange("attributesModified")};G.updateGeometry=function(E){this.feature.geometry=E;this.notifyChange("geometryModified")};l._createClass(y,[{key:"attributesModified",get:function(){const {_baselineAttributesJSON:E,feature:x}=this;return!(!x||E===m(x.attributes))}},{key:"geometryModified",get:function(){const {_baselineGeometryJSON:E,feature:x}=this;return!(!x||E===m(x.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}}]);
return y}(f.HandleOwnerMixin(F));b.__decorate([I.property()],d.Edits.prototype,"attributesModified",null);b.__decorate([I.property()],d.Edits.prototype,"feature",void 0);b.__decorate([I.property()],d.Edits.prototype,"geometryModified",null);b.__decorate([I.property()],d.Edits.prototype,"modified",null);d.Edits=b.__decorate([A.subclass("esri.widgets.Editor.Edits")],d.Edits);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/support/layerViewUtils ./Edits ./UpdateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x){var C;I=C=function(h){function g(u){u=h.call(this,u)||this;u.type="update";return u}d._inheritsLoose(g,h);g.create=function(u,p,k){u=new C({data:new G({edits:new y.Edits,viewModel:u}),onCommit:function(){var D=d._asyncToGenerator(function*(N){const S=N.edits.feature,P=S.sourceLayer,v=S.clone();if(!N.edits.attributesModified){const {objectIdField:K}=P;v.attributes={[K]:S.getAttribute(K)}}N.edits.geometryModified||(v.geometry=null);yield k(P,{updateFeatures:[v]})});
return function(N){return D.apply(this,arguments)}}()});u._set("steps",this._createWorkflowSteps(u,p));return u};var r=g.prototype;r.highlight=function(u){var {data:{viewModel:{view:p}}}=this;p=u&&p.allLayerViews.items.find(({layer:k})=>k===u.layer);n.highlightsSupported(p)&&this.handles.add(p.highlight(u),"candidate-highlight")};r.unhighlight=function(){this.handles.remove("candidate-highlight")};g._createWorkflowSteps=function(u,p="awaiting-feature-to-update"){const {data:k,handles:D}=u,N=new Map;
return x.createWorkflowSteps(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],p,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",setUp(){var S=this;return d._asyncToGenerator(function*(){const {spinnerViewModel:P,view:v}=k.viewModel;let K=null;D.add({remove(){K&&(K.abort(),K=null)}},S.id);k.edits.feature=null;const e=v.on("immediate-click",q=>{P.location=q.mapPoint;P.visible=!0;K&&K.abort();const {editableItems:w}=
k.viewModel;K=new AbortController;(new Promise((R,Q)=>{f.onAbort(K.signal,()=>Q(f.createAbortError()));R(x.fetchCandidates(w,v,q,K.signal))})).then(R=>{f.throwIfAborted(K);k.candidates=R.reduce((Q,c)=>c.error?Q:[...Q,...c.value],[]);k.viewModel.spinnerViewModel.visible=1===k.candidates.length;0!==k.candidates.length&&(1===k.candidates.length?(k.edits.feature=k.candidates[0],k.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>k.viewModel.spinnerViewModel.visible=!1)):k.viewModel.activeWorkflow.next())})});
v.focus();D.add(e,S.id)})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){D.remove(S.id)})()}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",setUp(){var S=this;return d._asyncToGenerator(function*(){const {edits:P}=k;P.feature=null;D.add(J.watch(()=>P.feature,v=>{u.unhighlight();u.highlight(v)}),S.id)})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){u.unhighlight();D.remove(S.id)})()}}),"editing-existing-feature":()=>({id:"editing-existing-feature",
setUp(){var S=this;return d._asyncToGenerator(function*(){if(!D.has("editing-existing-feature")){var P=k.edits.feature,v=k.viewModel;k.editableItem=v.editableItems.find(c=>c.layer===P.layer);var K=new AbortController;D.add({remove:()=>K.abort()},S.id);var e=v.view.whenLayerView(P.layer),q=x.fetchFullFeature(P,v.view,K.signal);e=yield e;var w=yield q;if(!f.isAborted(K)){k.edits.updateGeometry(w.geometry);k.edits.updateAttributes(w.attributes);k.edits.trackChanges();v.attachmentsViewModel.set({graphic:w,
mode:"view"});q=w.sourceLayer;var R=x.findLayerInfo(v.layerInfos,q);v.featureFormViewModel.set({feature:w,formTemplate:null==R?void 0:R.formTemplate,spatialReference:v.view.spatialReference});var Q="createInteractiveEditSession"in e?e.createInteractiveEditSession(P):null;e=[v.featureFormViewModel.on("value-change",c=>{k.edits.updateAttributes(v.featureFormViewModel.getValues());w.attributes=k.edits.feature.attributes;Q&&Q.setAttribute(c.fieldName,c.value)}),J.watch(()=>v.attachmentsViewModel.mode,
c=>{"add"===c&&k.viewModel.activeWorkflow.go("adding-attachment");"edit"===c&&k.viewModel.activeWorkflow.go("editing-attachment")})];Q&&(e.push(b.makeHandle(()=>Q.rollback())),D.add(b.makeHandle(()=>Q.commit()),u._handleKeys.afterCommit));({supportsGeometryUpdate:q}=q.capabilities.editing);if(q){v.sketchViewModel.allowDeleteKey=!1;const c=x.getVisualVariableAttributes(w),{interactive:z,visual:B}=yield x.setUpGeometryUpdate(w,c,v.sketchViewModel,v.view,({geometry:U,attributes:Y})=>{if(F.isSome(c.rotation)){var {field:aa}=
c.rotation;v.featureFormViewModel.setValue(aa,Y[aa])}F.isSome(c.size)&&({field:aa}=c.size,v.featureFormViewModel.setValue(aa,Y[aa]));k.edits.updateAttributes(Y);k.edits.updateGeometry(U);v.featureFormViewModel.feature.geometry=U},N);e.push(z,B);D.add(z,u._handleKeys.beforeCommit);D.add(B,u._handleKeys.afterCommit)}else u.highlight(w);D.add(e,S.id)}}})()},tearDown({cancelled:S}){var P=this;return d._asyncToGenerator(function*(){S&&(u.unhighlight(),D.remove(P.id))})()}}),"adding-attachment":()=>({id:"adding-attachment",
parent:"editing-existing-feature",setUp(){return d._asyncToGenerator(function*(){})()},tearDown(){return d._asyncToGenerator(function*(){k.viewModel.attachmentsViewModel.mode="view"})()}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",setUp(){return d._asyncToGenerator(function*(){})()},tearDown(){return d._asyncToGenerator(function*(){k.viewModel.attachmentsViewModel.mode="view"})()}})})};return g}(E);return I=C=l.__decorate([m.subclass("esri.widgets.Editor.UpdateWorkflow")],
I)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(d,l){d.extractSafeScaleBounds=function(b){var F,f;const J=b.effectiveScaleRange;b=null!=(F=null==J?void 0:J.minScale)?F:0;F=null!=(f=null==J?void 0:J.maxScale)?f:0;return{minScale:b,maxScale:F}};d.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};d.isScaleRangeActive=function(b,F){return 0<b||0<F};d.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};
d.scaleBoundsPredicate=function(b,F,f){return l.isNone(b)||b>f&&(0===F||b<F)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(d,
l,b,F,f,J,I,O){b=function(L){function H(A){A=L.call(this,A)||this;A.candidates=null;A.editableItem=null;A.edits=null;A.viewModel=null;return A}d._inheritsLoose(H,L);return H}(b);l.__decorate([F.property()],b.prototype,"candidates",void 0);l.__decorate([F.property()],b.prototype,"editableItem",void 0);l.__decorate([F.property()],b.prototype,"edits",void 0);l.__decorate([F.property()],b.prototype,"viewModel",void 0);return b=l.__decorate([O.subclass("esri.widgets.Editor.UpdateWorkflowData")],b)})},
"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/sketch/SketchLabelOptions ../../views/interactive/sketch/SketchTooltipOptions ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/hitTestSelectUtils ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S,P,v,K,e,q,w,R,Q,c,z,B,U,Y){function aa(la){return"polygon"===la||"rectangle"===la||"circle"===la?!0:!1}function ca(la,pa){ba("undo",la.history.undo,la.history.redo,pa)}function na(la,pa){ba("redo",la.history.redo,la.history.undo,pa)}function ba(la,pa,sa,da){const ea=pa.pop().updates,ha=[];da.forEach((ja,va)=>{va=ea[va];null!=va&&("geometry"in va&&A.isSome(va.geometry)&&(ha.push({geometry:ja.geometry}),ja.geometry=va.geometry),"symbol"in
va&&A.isSome(va.symbol)&&(ha.push({symbol:ja.symbol}),ja.symbol=va.symbol),"undo"in va&&(ha.push(va),va[la](ja)))});sa.push({updates:ha})}function ra(la){return{updates:la.map(pa=>({geometry:pa.geometry}))}}function ua(la){return"requireError"in la&&"aborted"===la.requireError}const Ba=la=>Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"})),ka=H.getLogger("esri.widgets.Sketch.SketchViewModel"),ta={defaultZ:0},ma={reshapeOptions:{edgeOperation:"split",
shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};J=function(la){function pa(da){da=la.call(this,da)||this;da._numUpdating=0;da._handles=new L;da._internalGraphicsLayer=new u({listMode:"hide",internal:!0,title:"SVM Internal"});da._operationHandle=null;da._viewHandles=new L;da.activeFillSymbol=null;da.activeLineSymbol=null;da.activeVertexSymbol=
null;da.allowDeleteKey=!0;da.labelOptions=new e;da.layer=null;da.pointSymbol=new B({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});da.polygonSymbol=new U({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});da.polylineSymbol=new Y({color:[130,130,130,1],width:2});da._snappingManager=null;da.tooltipOptions=new q;da.updateGraphics=new f;da.updateOnGraphicClick=!0;da.updatePointSymbol=new B({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});da.updatePolygonSymbol=
new U({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});da.updatePolylineSymbol=new Y({color:[12,207,255],width:2});da.vertexSymbol=new B({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});da._moduleLoaderAbortController=null;da._viewReadyAbortController=null;da._originalAutoOpenEnabled=null;da.defaultCreateOptions=ta;da.defaultUpdateOptions=ma;da.snappingOptions=new R;return da}l._inheritsLoose(pa,la);var sa=pa.prototype;sa.initialize=function(){this._handles.add([n.on(()=>
{var da,ea;return null==(da=this.view)?void 0:null==(ea=da.map)?void 0:ea.layers},"change",da=>{da.removed.includes(this.layer)&&this.cancel()}),n.on(()=>{var da;return null==(da=this.layer)?void 0:da.graphics},"change",da=>{if(A.isSome(this._operationHandle))for(const ea of da.removed)this.updateGraphics.includes(ea)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(ea):this._operationHandle.cancel())}),n.watch(()=>{var da,ea;return null!=(da=null==(ea=this.layer)?void 0:ea.elevationInfo)?
da:null},da=>{da!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=da)},n.syncAndInitial),n.watch(()=>this.view,da=>{A.destroyMaybe(this._snappingManager);da&&(this._snappingManager=new w.SnappingManager({view:da,options:this.snappingOptions}),"2d"===da.type?new Promise((ea,ha)=>d(["../../views/2d/interactive/editingTools"],ea,ha)):"3d"===da.type&&(new Promise((ea,ha)=>d(["../../views/3d/interactive/editingTools"],ea,ha)),new Promise((ea,ha)=>d(["../../views/3d/layers/GraphicsLayerView3D"],
ja=>ea(Ba(ja)),ha))))},n.syncAndInitial),n.watch(()=>{var da;return null==(da=this.view)?void 0:da.spatialReference},(da,ea)=>{da&&ea&&!da.equals(ea)&&this.cancel()})])};sa.destroy=function(){this.cancel();this._handles=A.destroyMaybe(this._handles);this._viewHandles=A.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=A.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};sa.cancel=function(){this._moduleLoaderAbortController=A.abortMaybe(this._moduleLoaderAbortController);
this._viewReadyAbortController=A.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};sa.complete=function(){this._operationHandle&&this._operationHandle.complete()};sa.delete=function(){const {state:da,updateGraphics:ea}=this;if("active"===da&&ea.length){const {activeTool:ha,layer:ja}=this,va=ea.toArray();ja.removeMany(va);this.cancel();this._emitDeleteEvent({graphics:va,tool:ha})}};sa.create=function(){var da=l._asyncToGenerator(function*(ea,ha){this.cancel();
yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),m.createAbortError();A.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(ea){P.addUniqueLayer(this.view,this._internalGraphicsLayer);var ja=yield this._setupCreateOperation(ea,ha);A.isNone(ja)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):
(ja.on("complete",()=>{if(ja===this._operationHandle){const va=this.createGraphic,qa=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);ja.cancelled||null==va||this.layer.add(va);this.emit("create",{graphic:va,state:qa?"cancel":"complete",tool:ea,toolEventInfo:null,type:"create"})}}),this._operationHandle=ja,this.view.ready&&p.isDOMContainer(this.view)&&
this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(ea,ha){return da.apply(this,arguments)}}();sa.update=function(){var da=l._asyncToGenerator(function*(ea,ha){this.cancel();yield this._waitViewReady();const {layer:ja,view:va,state:qa}=this;if("disabled"===qa)throw va||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ja||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),
m.createAbortError();A.isSome(this.view.activeTool)&&(this.view.activeTool=null);const wa=Array.isArray(ea)?ea:[ea];null!=ea&&wa&&wa.length?wa.some(Ca=>Ca.layer!==ja?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):A.isNone(Ca.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):!1)||(ea=yield this._setupUpdateOperation(wa,
ha),this.destroyed||A.isNone(ea)||ua(ea)||(P.addUniqueLayer(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(ea,ha),this.emit("update",{graphics:wa,state:"start",aborted:!1,tool:ea.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(ea,ha){return da.apply(this,arguments)}}();sa._updateSpatialReference=function(){var da=l._asyncToGenerator(function*(ea){this._beginAsyncOperation();ea=Array.isArray(ea)?
ea:[ea];for(const ha of ea)A.isSome(ha.geometry)&&"mesh"!==ha.geometry.type&&!r.equals(ha.geometry.spatialReference,this.view.spatialReference)&&(C.canProjectWithoutEngine(ha.geometry.spatialReference,this.view.spatialReference)||C.isLoaded()||(yield C.load()),ha.geometry=C.project(ha.geometry,this.view.spatialReference));this._endAsyncOperation()});return function(ea){return da.apply(this,arguments)}}();sa.undo=function(){this.canUndo()&&this._operationHandle.undo()};sa.redo=function(){this.canRedo()&&
this._operationHandle.redo()};sa.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};sa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};sa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};sa._getFirstHit=function(){var da=l._asyncToGenerator(function*(ea){var ha=this.view;if("2d"===ha.type){const va=[];this.view.map.allLayers.forEach(qa=>{"vector-tile"!==
qa.type&&"imagery"!==qa.type||va.push(qa)});ha=yield this.view.hitTest(ea,{exclude:va});return Q.findFirstGraphicHit(ha.results)}const ja=[this.view.map.ground];ha.map.allLayers.forEach(va=>{"integrated-mesh"===va.type&&ja.push(va)});ea=yield ha.hitTest(ea,{exclude:ja});if(0<ea.results.length){const va=ea.results[0];if(A.isSome(va)&&"graphic"===va.type&&va.graphic&&(!ea.ground.mapPoint||1>ha.map.ground.opacity||ea.ground.distance-A.unwrapOr(va.distance,0)>-Math.min(3*ea.ground.distance,"global"===
ha.viewingMode?h.getReferenceEllipsoid(ha.renderCoordsHelper.spatialReference).radius/ha.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return va}return null});return function(ea){return da.apply(this,arguments)}}();sa._generateViewHandles=function(da){var ea=this;return[da.on("immediate-click",function(){var ha=l._asyncToGenerator(function*(ja){var va="active"===ea.state&&"create"===ea._operationHandle.type;if("disabled"!==ea.state&&!va&&ea.updateOnGraphicClick){ea._beginAsyncOperation();
var qa=yield ja.async(()=>ea._getFirstHit(c.createScreenPointFromEvent(ja)));va=null;A.isSome(qa)?(qa=qa.graphic,ea.updateGraphics.includes(qa)||qa.layer===ea.layer?(ja.stopPropagation(),va=qa):"2d"!==da.type||ea._isComponentGraphic(qa)||"active"!==ea.state||ea.cancel()):"active"===ea.state&&ea.cancel();A.isSome(va)&&!ea.updateGraphics.includes(va)&&(yield ea.update([va],{...ea.defaultUpdateOptions,reshapeOptions:{...ea.defaultUpdateOptions.reshapeOptions}}));ea._endAsyncOperation()}});return function(ja){return ha.apply(this,
arguments)}}(),v.ViewEventPriorities.WIDGET)]};sa._setupCreateOperation=function(){var da=l._asyncToGenerator(function*(ea,ha){ea=yield this._setupDrawGraphicTool(ea,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...ha});if(A.isNone(ea))return null;this.view.tools.add(ea);this.view.activeTool=ea;return this._setupCreateOperationHandle(ea)});return function(ea,ha){return da.apply(this,arguments)}}();sa._setupDrawGraphicTool=function(){var da=l._asyncToGenerator(function*(ea,ha,
ja){if("multipoint"===ea&&"3d"===ha.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const va="rectangle"!==ea,qa="rectangle"!==ea;this.snappingOptions.enabledToggled=!1;ea={view:ha,mode:"rectangle"===ea||"circle"===ea?"hybrid":"click",...ja,snapToScene:!1,geometryType:ea,graphicSymbol:this._getGraphicSymbolFromTool(ea),snappingManager:this._snappingManager,forceUniformSize:qa,centered:va};return"2d"===this.view.type?this._makeDrawGraphicTool2D(ea):
this._makeDrawGraphicTool3D(ea)});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._makeDrawGraphicTool2D=function(){var da=l._asyncToGenerator(function*(ea){const ha=yield this._requireModule(new Promise((ja,va)=>d(["../../views/2d/interactive/editingTools"],ja,va)));return ua(ha)||this.destroyed?null:new ha.module.DrawGraphicTool2D({...ea,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:aa(ea.geometryType)?
this.activeFillSymbol:null})});return function(ea){return da.apply(this,arguments)}}();sa._makeDrawGraphicTool3D=function(){var da=l._asyncToGenerator(function*(ea){const ha=yield this._requireModule(new Promise((va,qa)=>d(["../../views/3d/interactive/editingTools"],va,qa)));if(ua(ha)||this.destroyed)return null;const {elevationInfo:ja}=this.layer;return new ha.module.DrawGraphicTool3D({...ea,elevationInfo:ja,snapToScene:A.isSome(ja)?"absolute-height"===ja.mode:!0,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})});
return function(ea){return da.apply(this,arguments)}}();sa._setupCreateOperationHandle=function(da){let ea=null;const ha=da.forceUniformSize,ja=da.centered,va=[this.view.on("key-down",wa=>{if(wa.key===K.SKETCH_KEYS.pan)wa.stopPropagation(),wa.repeat||(da.enabled=!1);else if(wa.key===K.SKETCH_KEYS.complete)wa.stopPropagation(),da.completeCreateOperation();else if(wa.key!==K.SKETCH_KEYS.vertexAdd||wa.repeat)wa.key===K.SKETCH_KEYS.undo?(wa.stopPropagation(),qa.undo()):wa.key===K.SKETCH_KEYS.redo?(wa.stopPropagation(),
qa.redo()):wa.key!==K.SKETCH_KEYS.snappingToggle||"rectangle"===da.geometryType||"circle"===da.geometryType||wa.repeat?wa.key!==K.SKETCH_KEYS.constraint||"rectangle"!==da.geometryType&&"circle"!==da.geometryType||wa.repeat?wa.key!==K.SKETCH_KEYS.center||wa.repeat||(da.centered=!ja,wa.stopPropagation()):(da.forceUniformSize=!ha,wa.stopPropagation()):(this.snappingOptions.enabledToggled=!0,wa.stopPropagation());else{const Ca=da.drawOperation.geometryType;if("polyline"===Ca||"polygon"===Ca||"multipoint"===
Ca)wa.stopPropagation(),da.drawOperation.commitStagedVertex()}},v.ViewEventPriorities.WIDGET),this.view.on("key-up",wa=>{wa.key===K.SKETCH_KEYS.pan?da.enabled=!0:wa.key===K.SKETCH_KEYS.snappingToggle&&"rectangle"!==da.geometryType&&"circle"!==da.geometryType?(this.snappingOptions.enabledToggled=!1,wa.stopPropagation()):wa.key!==K.SKETCH_KEYS.constraint||"rectangle"!==da.geometryType&&"circle"!==da.geometryType?wa.key===K.SKETCH_KEYS.center&&(da.centered=ja,wa.stopPropagation()):(da.forceUniformSize=
ha,wa.stopPropagation())},v.ViewEventPriorities.WIDGET),da.on("vertex-add",wa=>{ea=A.isNone(ea)?"start":"active";switch(wa.operation){case "apply":this.emit("create",{graphic:A.unwrap(da.graphic),state:ea,tool:this.activeTool,toolEventInfo:wa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[A.unwrap(da.graphic)],tool:da.geometryType});break;case "redo":this._emitRedoEvent({graphics:[A.unwrap(da.graphic)],tool:da.geometryType})}}),da.on("cursor-update",wa=>{0<da.drawOperation.numCommittedVertices&&
this.emit("create",{graphic:A.unwrap(da.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:wa.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),da.on("vertex-remove",wa=>{switch(wa.operation){case "apply":this.emit("create",{graphic:A.unwrap(da.graphic),state:"active",tool:this.activeTool,toolEventInfo:wa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[A.unwrap(da.graphic)],tool:da.geometryType});break;case "redo":this._emitRedoEvent({graphics:[A.unwrap(da.graphic)],
tool:da.geometryType})}}),da.on("complete",wa=>{this._set("createGraphic",A.unwrap(wa.graphic));ea="complete";wa.aborted?qa&&qa.cancel():qa&&qa.complete()}),n.watch(()=>this._getGraphicSymbolFromTool(da.geometryType),wa=>{da.graphicSymbol=wa})],qa=new z.OperationHandle({activeComponent:da,tool:da.geometryType,type:"create",onEnd:()=>{var wa;va.forEach(Ca=>Ca.remove());va.length=0;null==(wa=this.view.tools)?void 0:wa.remove(da)},undo:()=>{da.canUndo&&da.undo()},redo:()=>{da.canRedo&&da.redo()},canUndo:()=>
da.canUndo,canRedo:()=>da.canRedo});return qa};sa._getGraphicSymbolFromTool=function(da){switch(da){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};sa._setupUpdateOperation=function(){var da=l._asyncToGenerator(function*(ea,ha){const {layer:ja,view:va}=this;ha={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...ha,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,
...null==ha?void 0:ha.reshapeOptions}};var qa=ha.tool;for(var wa of ea)ja.remove(wa),ja.add(wa);if("3d"===va.type){if(0===ea.length)return null;switch(qa){case "move":return this._setupMove3DOperation(ea,ha,va,qa);case "reshape":if(1<ea.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;qa=N.isSupportedGraphic(ea[0]);if(qa===k.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(ea[0],ha,va);this._logError("sketch:reshape",
`Reshape operation not supported for provided graphic(s) (${k.isSupportedGraphicResultMessage(qa)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(ea,ha,va)}}switch(qa){case "move":return this._setupMove2DOperation(ea,ha,va);case "reshape":if(1<ea.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;wa=N.isSupportedGraphic(ea[0]);if(wa===k.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(ea,
qa,ha,va);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${k.isSupportedGraphicResultMessage(wa)}).`);return null;case "transform":return 1===ea.length&&(wa=A.get(ea[0].geometry,"type"),"point"===wa||"multipoint"===wa)&&(qa="reshape"),this._setupTransformOrReshape2DOperation(ea,qa,ha,va)}});return function(ea,ha){return da.apply(this,arguments)}}();sa._setupMove3DOperation=function(){var da=l._asyncToGenerator(function*(ea,ha,ja,va,qa=!1){var wa=this;for(var Ca of ea){const Da=
D.isSupportedGraphic(Ca);if(Da!==k.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${k.isSupportedGraphicResultMessage(Da)}).`),null}Ca=yield this._requireModule(new Promise((Da,La)=>d(["../../views/3d/interactive/editingTools"],Da,La)));if(ua(Ca))return Ca;const Ka=new Ca.module.GraphicMoveTool({view:ja,enableZ:ha.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(Ka);Ka.graphics.addMany(ea);
qa||this.updateGraphics.addMany(ea);const Ga=[],Ea=new z.UpdateOperationHandle({activeComponent:Ka,tool:va,type:"update",onEnd:()=>{var Da;Ga.forEach(La=>La.remove());Ga.length=0;null==(Da=this.view.tools)?void 0:Da.remove(Ka);Ka.destroyed||Ka.destroy()},undo:()=>{ca(Ea,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:va})},redo:()=>{na(Ea,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:va})},addToSelection:Da=>
{this.updateGraphics.push(Da);Ka.graphics.push(Da);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Da],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Da=>{const La=this.updateGraphics.indexOf(Da);Ea.history.undo.forEach(Oa=>Oa.updates.splice(La,1));Ea.history.redo.forEach(Oa=>Oa.updates.splice(La,1));this.updateGraphics.remove(Da);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Ea.complete():Ka.graphics.remove(Da)},toggleTool:function(){var Da=l._asyncToGenerator(function*(){if(1===wa.updateGraphics.length&&!1!==ha.toggleToolOnClick&&"transform"===va){var La=wa.updateGraphics.getItemAt(0);N.isSupportedGraphic(La)===k.SupportedGraphicResult.SUPPORTED&&(La=yield wa._setupReshape3DOperation(La,ha,ja,!0),ua(La)||(Ea.onEnd(),Ea.destroy(),
wa._setUpdateOperationHandle(La,ha)))}});return function(){return Da.apply(this,arguments)}}()});Ga.push(...this._getHandlesForComponent(Ea,ha),this.view.on("immediate-click",Da=>this._getCommonUpdateOperationClickHandlers(Ea,Da,ha),v.ViewEventPriorities.WIDGET),ja.on("key-down",Da=>{this._getCommonUpdateOperationKeyDownHandlers(Ea,Da);Da.key===K.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Da.stopPropagation())},v.ViewEventPriorities.WIDGET),ja.on("key-up",Da=>{Da.key===K.SKETCH_KEYS.snappingToggle&&
(this.snappingOptions.enabledToggled=!1,Da.stopPropagation())},v.ViewEventPriorities.WIDGET));return Ea});return function(ea,ha,ja,va){return da.apply(this,arguments)}}();sa._setupGraphicTransform3DOperation=function(da,ea,ha,ja=!1){if(1===da.length&&S.isSupportedGraphic(da[0])===k.SupportedGraphicResult.SUPPORTED){const va=da[0],qa=va.geometry;if(A.isSome(qa)&&("point"===qa.type||"mesh"===qa.type))return this._setupPointTransform3DOperation(va,ea,ha);if(A.isSome(qa)&&("polygon"===qa.type||"polyline"===
qa.type))return this._setupPolyTransform3DOperation(va,ea,ha,ja)}return this._setupMove3DOperation(da,ea,ha,"transform",ja)};sa._setupPointTransform3DOperation=function(){var da=l._asyncToGenerator(function*(ea,ha,ja){var va=this;const {enableRotation:qa,enableScaling:wa,enableZ:Ca}=ha,Ka=yield this._requireModule(new Promise((La,Oa)=>d(["../../views/3d/interactive/editingTools"],La,Oa)));if(ua(Ka))return Ka;const Ga=new Ka.module.GraphicTransformTool({graphic:ea,view:ja,enableRotation:qa,enableScaling:wa,
enableZ:Ca,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(Ga);this.updateGraphics.add(ea);const Ea=[],Da=new z.UpdateOperationHandle({activeComponent:Ga,tool:"transform",type:"update",onEnd:()=>{var La;Ea.forEach(Oa=>Oa.remove());Ea.length=0;null==(La=this.view.tools)?void 0:La.remove(Ga);Ga.destroyed||Ga.destroy()},undo:()=>{ca(Da,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>
{na(Da,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var La=l._asyncToGenerator(function*(Oa){va.updateGraphics.add(Oa);va.emit("update",{graphics:va.updateGraphics.toArray(),state:"active",aborted:!1,tool:va.activeTool,toolEventInfo:{added:[Oa],removed:[],type:"selection-change"},type:"update"});Oa=yield va._setupMove3DOperation(va.updateGraphics.toArray(),ha,ja,"transform",!0);ua(Oa)||(Da.onEnd(),Da.destroy(),
va._setUpdateOperationHandle(Oa,ha))});return function(Oa){return La.apply(this,arguments)}}(),removeFromSelection:La=>{this.updateGraphics.remove(La);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[La],type:"selection-change"},type:"update"});Da.complete()},toggleTool:()=>{}});Ea.push(...this._getHandlesForComponent(Da,ha),this.view.on("immediate-click",La=>this._getCommonUpdateOperationClickHandlers(Da,La,
ha),v.ViewEventPriorities.WIDGET),ja.on("key-down",La=>{this._getCommonUpdateOperationKeyDownHandlers(Da,La);La.key===K.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,La.stopPropagation())},v.ViewEventPriorities.WIDGET),ja.on("key-up",La=>{La.key===K.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,La.stopPropagation())},v.ViewEventPriorities.WIDGET));return Da});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._setupPolyTransform3DOperation=
function(){var da=l._asyncToGenerator(function*(ea,ha,ja,va=!1){var qa=this;const {enableRotation:wa,enableScaling:Ca,enableZ:Ka,preserveAspectRatio:Ga}=ha,Ea=yield this._requireModule(new Promise((Ra,Ma)=>d(["../../views/3d/interactive/editingTools"],Ra,Ma)));if(ua(Ea))return Ea;const Da=new Ea.module.ExtentTransformTool({graphic:ea,view:ja,enableRotation:wa,enableScaling:Ca,enableZ:Ka,preserveAspectRatio:Ga,tooltipOptions:this.tooltipOptions});this.view.tools.add(Da);va||this.updateGraphics.add(ea);
const La=[],Oa=new z.UpdateOperationHandle({activeComponent:Da,tool:"transform",type:"update",onEnd:()=>{var Ra;La.forEach(Ma=>Ma.remove());La.length=0;null==(Ra=this.view.tools)?void 0:Ra.remove(Da);Da.destroyed||Da.destroy()},canUndo:()=>Da.canUndo,undo:()=>{Da.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>Da.canRedo,redo:()=>{Da.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ra=
l._asyncToGenerator(function*(Ma){qa.updateGraphics.add(Ma);qa.emit("update",{graphics:qa.updateGraphics.toArray(),state:"active",aborted:!1,tool:qa.activeTool,toolEventInfo:{added:[Ma],removed:[],type:"selection-change"},type:"update"});Ma=yield qa._setupMove3DOperation(qa.updateGraphics.toArray(),ha,ja,"transform",!0);ua(Ma)||(Oa.onEnd(),Oa.destroy(),qa._setUpdateOperationHandle(Ma,ha))});return function(Ma){return Ra.apply(this,arguments)}}(),removeFromSelection:Ra=>{this.updateGraphics.remove(Ra);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ra],type:"selection-change"},type:"update"});Oa.complete()},toggleTool:function(){var Ra=l._asyncToGenerator(function*(){if(1===qa.updateGraphics.length&&!1!==ha.toggleToolOnClick){var Ma=qa.updateGraphics.getItemAt(0);N.isSupportedGraphic(Ma)===k.SupportedGraphicResult.SUPPORTED&&(Ma=yield qa._setupReshape3DOperation(Ma,ha,ja,!0),ua(Ma)||(Oa.onEnd(),Oa.destroy(),
qa._setUpdateOperationHandle(Ma,ha)))}});return function(){return Ra.apply(this,arguments)}}()});La.push(...this._getHandlesForComponent(Oa,ha),this.view.on("immediate-click",Ra=>this._getCommonUpdateOperationClickHandlers(Oa,Ra,ha),v.ViewEventPriorities.WIDGET),this.view.on("key-down",Ra=>this._getCommonUpdateOperationKeyDownHandlers(Oa,Ra),v.ViewEventPriorities.WIDGET),this.view.on("key-down",Ra=>{Ra.key!==K.SKETCH_KEYS.constraint||Ra.repeat||(Da.preserveAspectRatio=!Da.preserveAspectRatio,Ra.stopPropagation())},
v.ViewEventPriorities.WIDGET),this.view.on("key-up",Ra=>{Ra.key===K.SKETCH_KEYS.constraint&&(Da.preserveAspectRatio=!Da.preserveAspectRatio,Ra.stopPropagation())},v.ViewEventPriorities.WIDGET));return Oa});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._setupMove2DOperation=function(){var da=l._asyncToGenerator(function*(ea,ha,ja){var va=this;this.updateGraphics.addMany(ea);yield this._updateSpatialReference(ea);const qa=yield this._getGraphicMover(ea,ha,ja);if(ua(qa))return qa;
const wa=new z.UpdateOperationHandle({activeComponent:qa,tool:"move",type:"update",onEnd:()=>{var Ea;this._displayDefaultCursor();Ga.forEach(Da=>Da.remove());Ka.forEach(Da=>Da.remove());Ga=[];Ka=[];qa.destroy();null==(Ea=this._internalGraphicsLayer)?void 0:Ea.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const Ea=this.updateGraphics.toArray();ca(wa,Ea);wa.refreshComponent();this._emitUndoEvent({graphics:Ea,tool:"move"})},redo:()=>{const Ea=this.updateGraphics.toArray();na(wa,Ea);wa.refreshComponent();
this._emitRedoEvent({graphics:Ea,tool:"move"})},addToSelection:function(){var Ea=l._asyncToGenerator(function*(Da){yield va._updateSpatialReference(Da);va.updateGraphics.push(Da);qa.graphics=va.updateGraphics.toArray();va.emit("update",{graphics:va.updateGraphics.toArray(),state:"active",aborted:!1,tool:va.activeTool,toolEventInfo:{added:[Da],removed:[],type:"selection-change"},type:"update"})});return function(Da){return Ea.apply(this,arguments)}}(),removeFromSelection:Ea=>{const Da=this.updateGraphics.indexOf(Ea);
wa.history.undo.forEach(Oa=>Oa.updates.splice(Da,1));wa.history.redo.forEach(Oa=>Oa.updates.splice(Da,1));this.updateGraphics.remove(Ea);const La=this.updateGraphics.toArray();this.emit("update",{graphics:La,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ea],type:"selection-change"},type:"update"});0===this.updateGraphics.length?wa.complete():qa.graphics=La}});let Ca=!1,Ka=[ja.on("immediate-click",Ea=>this._getCommonUpdateOperationClickHandlers(wa,Ea,ha),v.ViewEventPriorities.WIDGET),
ja.on("key-down",Ea=>{this._getCommonUpdateOperationKeyDownHandlers(wa,Ea);Ea.key!==K.SKETCH_KEYS.constraint||Ea.repeat||(Ca=!0,qa.enableMoveAllGraphics=!qa.enableMoveAllGraphics)},v.ViewEventPriorities.WIDGET),ja.on("key-up",Ea=>{Ea.key===K.SKETCH_KEYS.constraint&&Ca&&(Ca=!1,qa.enableMoveAllGraphics=!qa.enableMoveAllGraphics)},v.ViewEventPriorities.WIDGET)],Ga=this._getHandlesForComponent(wa,ha);return wa});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._setupReshape3DOperation=
function(){var da=l._asyncToGenerator(function*(ea,ha,ja,va=!1){var qa=this;const wa=yield this._requireModule(new Promise((Ea,Da)=>d(["../../views/3d/interactive/editingTools"],Ea,Da)));if(ua(wa))return wa;this.snappingOptions.enabledToggled=!1;const Ca=new wa.module.GraphicReshapeTool({view:ja,graphic:ea,enableZVertex:ha.enableZ&&"move"===ha.reshapeOptions.vertexOperation,enableZShape:ha.enableZ&&"move"===ha.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===ha.reshapeOptions.shapeOperation||
"move-xy"===ha.reshapeOptions.shapeOperation,enableMidpoints:"split"===ha.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===ha.reshapeOptions.edgeOperation,snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});ja.tools.add(Ca);va||this.updateGraphics.add(ea);const Ka=[],Ga=new z.UpdateOperationHandle({activeComponent:Ca,tool:"reshape",type:"update",onEnd:()=>{var Ea;Ka.forEach(Da=>Da.remove());Ka.length=0;null==(Ea=this.view.tools)?void 0:
Ea.remove(Ca);Ca.destroyed||Ca.destroy()},canUndo:()=>Ca.canUndo,undo:()=>{Ca.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>Ca.canRedo,redo:()=>{Ca.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var Ea=l._asyncToGenerator(function*(Da){qa.updateGraphics.add(Da);qa.emit("update",{graphics:qa.updateGraphics.toArray(),state:"active",aborted:!1,tool:qa.activeTool,toolEventInfo:{added:[Da],
removed:[],type:"selection-change"},type:"update"});Da=yield qa._setupMove3DOperation(qa.updateGraphics.toArray(),ha,ja,"transform",!0);ua(Da)||(Ga.onEnd(),Ga.destroy(),qa._setUpdateOperationHandle(Da,ha))});return function(Da){return Ea.apply(this,arguments)}}(),removeFromSelection:Ea=>{this.updateGraphics.remove(Ea);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ea],type:"selection-change"},type:"update"});
Ga.complete()},toggleTool:function(){var Ea=l._asyncToGenerator(function*(){if(!1!==ha.toggleToolOnClick){var Da=yield qa._setupGraphicTransform3DOperation(qa.updateGraphics.toArray(),ha,ja,!0);ua(Da)||(Ga.onEnd(),Ga.destroy(),qa._setUpdateOperationHandle(Da,ha))}});return function(){return Ea.apply(this,arguments)}}()});Ka.push(...this._getHandlesForComponent(Ga,ha),ja.on("immediate-click",Ea=>this._getCommonUpdateOperationClickHandlers(Ga,Ea,ha),v.ViewEventPriorities.WIDGET),ja.on("key-down",Ea=>
{this._getCommonUpdateOperationKeyDownHandlers(Ga,Ea);Ea.key===K.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Ea.stopPropagation())},v.ViewEventPriorities.WIDGET),ja.on("key-up",Ea=>{Ea.key===K.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Ea.stopPropagation())},v.ViewEventPriorities.WIDGET));return Ga});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._setupTransformOrReshape2DOperation=function(){var da=l._asyncToGenerator(function*(ea,
ha,ja,va){var qa=this;this.updateGraphics.addMany(ea);yield this._updateSpatialReference(ea);ea="transform"===ha?yield this._getBox(ea,ja,va):yield this._getReshape(ea,ja,va);if(ua(ea))return ea;const wa=new z.UpdateOperationHandle({activeComponent:ea,type:"update",onEnd:()=>{Ka.forEach(Ga=>Ga.remove());Ca.forEach(Ga=>Ga.remove());Ka=[];Ca=[];wa.activeComponent&&!wa.activeComponent.destroyed&&wa.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>
{ca(wa,this.updateGraphics.toArray());wa.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:wa.tool})},redo:()=>{na(wa,this.updateGraphics.toArray());wa.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:wa.tool})},addToSelection:function(){var Ga=l._asyncToGenerator(function*(Ea){var Da=wa.activeComponent;if("reshape"===Da.type){Da=[...qa.updateGraphics,Ea];qa.updateGraphics.removeAll();Da=yield qa._setupMove2DOperation(Da,ja,va);
if(ua(Da))return;wa.onEnd();wa.destroy();qa._setUpdateOperationHandle(Da,ja)}else qa.updateGraphics.add(Ea),Da.graphics=qa.updateGraphics.toArray(),Da.refresh(),wa.resetHistory();qa.emit("update",{graphics:qa.updateGraphics.toArray(),state:"active",aborted:!1,tool:qa.activeTool,toolEventInfo:{added:[Ea],removed:[],type:"selection-change"},type:"update"})});return function(Ea){return Ga.apply(this,arguments)}}(),removeFromSelection:function(){var Ga=l._asyncToGenerator(function*(Ea){const Da=qa.updateGraphics.indexOf(Ea);
wa.history.undo.forEach(Oa=>Oa.updates.splice(Da,1));wa.history.redo.forEach(Oa=>Oa.updates.splice(Da,1));qa.updateGraphics.remove(Ea);const La=qa.updateGraphics.toArray();if(0===La.length)wa.complete();else{const Oa=La[0].geometry;1!==La.length||!A.isSome(Oa)||"point"!==Oa.type&&"multipoint"!==Oa.type?wa.activeComponent.graphics=La:wa.toggleTool()}qa.emit("update",{graphics:La,state:"active",aborted:!1,tool:qa.activeTool,toolEventInfo:{added:[],removed:[Ea],type:"selection-change"},type:"update"})});
return function(Ea){return Ga.apply(this,arguments)}}(),toggleTool:function(){var Ga=l._asyncToGenerator(function*(){if(!(1<qa.updateGraphics.length)){var Ea=qa.updateGraphics.getItemAt(0),Da=Ea.geometry;A.isSome(Da)&&("reshape"===wa.tool&&("point"===Da.type||"multipoint"===Da.type)||"transform"===wa.tool&&"extent"===Da.type)||(Da=null,"transform"===wa.tool?Da=yield qa._getReshape([Ea],ja,va):"reshape"===wa.tool&&(Da=yield qa._getBox([Ea],ja,va)),ua(Da)||(wa.activeComponent.destroy(),wa.activeComponent=
Da,wa.activeComponent&&(Ka.forEach(La=>La.remove()),Ka=qa._getHandlesForComponent(wa,ja))))}});return function(){return Ga.apply(this,arguments)}}()});let Ca=[va.on("immediate-click",Ga=>this._getCommonUpdateOperationClickHandlers(wa,Ga,ja),v.ViewEventPriorities.WIDGET),va.on("key-down",Ga=>{this._getCommonUpdateOperationKeyDownHandlers(wa,Ga);Ga.key!==K.SKETCH_KEYS.snappingToggle||Ga.repeat||(this.snappingOptions.enabledToggled=!0,Ga.stopPropagation());Ga.key===K.SKETCH_KEYS.constraint&&!Ga.repeat&&
wa&&(Ga=wa.activeComponent)&&"box"===Ga.type&&(Ga.preserveAspectRatio=!Ga.preserveAspectRatio)},v.ViewEventPriorities.WIDGET),va.on("key-up",Ga=>{var Ea;Ga.key===K.SKETCH_KEYS.snappingToggle&&"reshape"===(null==wa?void 0:null==(Ea=wa.activeComponent)?void 0:Ea.type)&&(this.snappingOptions.enabledToggled=!1,Ga.stopPropagation());Ga.key===K.SKETCH_KEYS.constraint&&wa&&(Ga=wa.activeComponent)&&"box"===Ga.type&&(Ga.preserveAspectRatio=!Ga.preserveAspectRatio)},v.ViewEventPriorities.WIDGET)],Ka=this._getHandlesForComponent(wa,
ja);return wa});return function(ea,ha,ja,va){return da.apply(this,arguments)}}();sa._getGraphicMover=function(){var da=l._asyncToGenerator(function*(ea,ha,ja){({enableMoveAllGraphics:ha}=ha);const va=yield this._requireModule(new Promise((qa,wa)=>d(["../../views/draw/support/GraphicMover"],Ca=>qa(Ba(Ca)),wa)));return ua(va)?va:new va.module.default({enableMoveAllGraphics:ha,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:ea,view:ja,callbacks:{onGraphicMoveStart:({dx:qa,dy:wa,graphic:Ca})=>{this._displayGrabbingCursor();
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:qa,dy:wa,mover:Ca,type:"move-start"},type:"update"})},onGraphicMove:({dx:qa,dy:wa,graphic:Ca})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:qa,dy:wa,mover:Ca,type:"move"},type:"update"}),onGraphicMoveStop:({dx:qa,dy:wa,graphic:Ca})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:qa,dy:wa,mover:Ca,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._getBox=function(){var da=l._asyncToGenerator(function*(ea,ha,ja){const {enableRotation:va,enableScaling:qa,preserveAspectRatio:wa}=ha;ha=yield this._requireModule(new Promise((Ca,Ka)=>d(["../../views/draw/support/Box"],
Ga=>Ca(Ba(Ga)),Ka)));return ua(ha)?ha:new ha.module.default({graphics:ea,enableRotation:va,enableScaling:qa,preserveAspectRatio:wa,layer:this._internalGraphicsLayer,view:ja,callbacks:{onMoveStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onMove:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onMoveStop:Ca=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScaleStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScale:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onScaleStop:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotateStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotate:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onRotateStop:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...Ca},type:"update"})}})});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._getReshape=function(){var da=l._asyncToGenerator(function*(ea,ha,ja){var va,qa;const wa="split"===(null==(va=ha.reshapeOptions)?void 0:va.edgeOperation);ha="move"===(null==(qa=ha.reshapeOptions)?void 0:qa.shapeOperation);qa=yield this._requireModule(new Promise((Ca,Ka)=>d(["../../views/draw/support/Reshape"],Ga=>Ca(Ba(Ga)),Ka)));return ua(qa)?qa:new qa.module.default({enableMidpoints:wa,
enableMovement:ha,graphic:ea[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:ja,callbacks:{onReshapeStart:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onReshape:Ca=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ca},type:"update"}),onReshapeStop:({mover:Ca,type:Ka})=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Ca,type:Ka},type:"update"}),onMoveStart:({dx:Ca,dy:Ka,mover:Ga,type:Ea})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:Ka,mover:Ga,type:Ea},type:"update"}),onMove:({dx:Ca,dy:Ka,mover:Ga,type:Ea})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:Ka,mover:Ga,type:Ea},
type:"update"}),onMoveStop:({dx:Ca,dy:Ka,mover:Ga,type:Ea})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ca,dy:Ka,mover:Ga,type:Ea},type:"update"}),onVertexAdd:({added:Ca,type:Ka,vertices:Ga})=>{Ca=Ca.map(Ea=>g.geometryToCoordinates(Ea.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Ca,vertices:Ga,type:Ka},type:"update"})},onVertexRemove:({removed:Ca,
type:Ka,vertices:Ga})=>{Ca=Ca.map(Ea=>g.geometryToCoordinates(Ea.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Ca,vertices:Ga,type:Ka},type:"update"})}}})});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._getHandlesForComponent=function(da,ea){const ha=da.activeComponent;switch(ha.type){case "graphic-mover":return[ha.on("graphic-click",({graphic:ja,viewEvent:va})=>{var qa;null!=(qa=va.native)&&
qa.shiftKey&&(va.stopPropagation(),da.removeFromSelection(ja))}),ha.on("graphic-move-start",ja=>da.addToHistory(ra(ja.allGraphics)))];case "box":return[ha.on("graphic-click",ja=>this._onTransformOrReshape2DGraphicClick(da,ea,ja)),ha.on("move-start",ja=>da.addToHistory(ra(ja.graphics))),ha.on("rotate-start",ja=>da.addToHistory(ra(ja.graphics))),ha.on("scale-start",ja=>da.addToHistory(ra(ja.graphics)))];case "reshape":return[ha.on("graphic-click",ja=>this._onTransformOrReshape2DGraphicClick(da,ea,ja)),
ha.on("move-start",ja=>da.addToHistory(ra([ja.mover]))),ha.on("reshape-start",ja=>da.addToHistory(ra([ja.graphic]))),ha.on("vertex-add",ja=>da.addToHistory(ra([ja.oldGraphic]))),ha.on("vertex-remove",ja=>da.addToHistory(ra([ja.oldGraphic])))];case "move-3d":return[ha.on("graphic-move-start",ja=>{da.addToHistory(ra(ja.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ja.allGraphics.length?ja.allGraphics[0]:
null,type:"move-start"},type:"update"})}),ha.on("graphic-move",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja.dx,dy:ja.dy,mover:0<ja.allGraphics.length?ja.allGraphics[0]:null,type:"move"},type:"update"})}),ha.on("graphic-move-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ja.allGraphics.length?ja.allGraphics[0]:
null,type:"move-stop"},type:"update"})}),ha.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],da,ea):da.toggleTool()})];case "transform-3d":return[ha.on("record-undo",({record:ja})=>{da.addToHistory({updates:[ja]})}),ha.on("graphic-translate-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move-start"},type:"update"})}),ha.on("graphic-translate-stop",
ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move-stop"},type:"update"})}),ha.on("graphic-rotate-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,type:"rotate-start"},type:"update"})}),ha.on("graphic-rotate-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,type:"rotate-stop"},type:"update"})}),ha.on("graphic-scale-start",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale-start"},type:"update"})}),ha.on("graphic-scale-stop",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale-stop"},type:"update"})}),ha.on("graphic-translate",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,dx:ja.dxScreen,dy:ja.dyScreen,type:"move"},type:"update"})}),ha.on("graphic-rotate",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,angle:ja.angle,
type:"rotate"},type:"update"})}),ha.on("graphic-scale",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ja.graphic,xScale:ja.xScale,yScale:ja.yScale,type:"scale"},type:"update"})}),ha.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],da,ea):da.toggleTool()})];case "reshape-3d":return[ha.on("reshape",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:ja,type:"update"})}),ha.on("move",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,type:"update"})}),ha.on("vertex-add",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,type:"update"})}),ha.on("vertex-remove",ja=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ja,
type:"update"})}),ha.on("immediate-click",ja=>{ja.shiftKey?this._toggleSelection([ja.graphic],da,ea):da.toggleTool()})]}};sa._onTransformOrReshape2DGraphicClick=function(da,ea,ha){var ja;const {graphic:va,viewEvent:qa}=ha;if(null!=(ja=qa.native)&&ja.shiftKey&&va.layer===this.layer)return qa.stopPropagation(),da.removeFromSelection(va);if(ea.toggleToolOnClick)return qa.stopPropagation(),da.toggleTool()};sa._setUpdateOperationHandle=function(da,ea){this._operationHandle=da;const ha=this.view.map;this._disablePopup(ea);
da.on("complete",()=>{if(da===this._operationHandle){const ja=this.updateGraphics.toArray(),va=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();ha&&ha.remove(this._internalGraphicsLayer);this._restorePopup(ea);this.emit("update",{graphics:ja,state:"complete",aborted:da.cancelled,tool:va,toolEventInfo:null,type:"update"})}})};sa._getCommonUpdateOperationClickHandlers=
function(){var da=l._asyncToGenerator(function*(ea,ha,ja){const va=c.createScreenPointFromEvent(ha),qa=yield ha.async(()=>this._getFirstHit(va));A.isNone(qa)?ea.complete():ha.native.shiftKey&&this._toggleSelection([qa.graphic],ea,ja)?ha.stopPropagation():this.updateGraphics.includes(qa.graphic)?ha.stopPropagation():ea.complete()});return function(ea,ha,ja){return da.apply(this,arguments)}}();sa._toggleSelection=function(da,ea,ha){const ja=!!ha.multipleSelectionEnabled;return da.some(va=>null==va?
!1:ja&&va.layer===this.layer?(this.updateGraphics.includes(va)?ea.removeFromSelection(va):ea.addToSelection(va),!0):!1)};sa._getCommonUpdateOperationKeyDownHandlers=function(da,ea){if(da){var ha=ea.key;ha===K.SKETCH_KEYS.undo&&da.canUndo()?(ea.stopPropagation(),da.undo()):ha===K.SKETCH_KEYS.redo&&da.canRedo()?(ea.stopPropagation(),da.redo()):ha===K.SKETCH_KEYS.cancel?(ea.stopPropagation(),da.cancel()):this.allowDeleteKey&&K.SKETCH_KEYS.delete.includes(ha)&&this._onDeleteKey(ea)}};sa._onDeleteKey=
function(da){if(this._operationHandle&&"update"===this._operationHandle.type){var ea=this.activeComponent,ha=this.updateGraphics.toArray();A.isNone(ea)||"reshape-3d"===ea.type||"reshape"===ea.type&&(1!==ha.length||"point"!==A.get(ha[0].geometry,"type"))||(da.stopPropagation(),this.delete())}};sa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=A.destroyMaybe(this._internalGraphicsLayer))};
sa._isComponentGraphic=function(da){const {activeComponent:ea}=this;return!da||A.isNone(ea)?!1:da.attributes&&da.attributes.esriSketchTool||"draw-2d"===ea.type&&ea.graphic===da||("box"===ea.type||"reshape"===ea.type)&&ea.isUIGraphic(da)};sa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};sa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};sa._displayDefaultCursor=
function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};sa._logError=function(da,ea,ha){ka.error(new I(da,ea,ha))};sa._requireModule=function(){var da=l._asyncToGenerator(function*(ea){const ha=new AbortController;this._moduleLoaderAbortController=ha;ea=yield ea;return this._moduleLoaderAbortController!==ha||ha.signal.aborted?{requireError:"aborted"}:{module:ea}});return function(ea){return da.apply(this,arguments)}}();sa._emitUndoEvent=function(da){this.emit("undo",
{...da,type:"undo"})};sa._emitRedoEvent=function(da){this.emit("redo",{...da,type:"redo"})};sa._emitDeleteEvent=function(da){this.emit("delete",{...da,type:"delete"})};sa.wait=function(){return n.whenOnce(()=>!this.updating)};sa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};sa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};sa._disablePopupEnabled=function(da){var ea;return"3d"!==(null==(ea=this.view)?void 0:ea.type)||this.updateOnGraphicClick||
A.isSome(da)&&da.toggleToolOnClick};sa._disablePopup=function(da){this._disablePopupEnabled(da)&&(da=this.view.popup)&&A.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=da.autoOpenEnabled,da.autoOpenEnabled=!1)};sa._restorePopup=function(da){this._disablePopupEnabled(da)&&(da=this.view.popup)&&A.isSome(this._originalAutoOpenEnabled)&&(da.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};sa._waitViewReady=function(){var da=l._asyncToGenerator(function*(){const ea=
this.view;ea&&(A.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield m.whenOrAbort(n.whenOnce(()=>null==ea?void 0:ea.ready),this._viewReadyAbortController.signal))});return function(){return da.apply(this,arguments)}}();l._createClass(pa,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?
this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return!A.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):A.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(da){this._set("defaultCreateOptions",{...ta,...da})}},{key:"defaultUpdateOptions",set:function(da){this._set("defaultUpdateOptions",
{...ma,...da,reshapeOptions:{...ma.reshapeOptions,...null==da?void 0:da.reshapeOptions}})}},{key:"snappingOptions",set:function(da){A.isSome(this._snappingManager)&&(this._snappingManager.options=da);this._set("snappingOptions",da)}},{key:"state",get:function(){var da;const ea=!(null==(da=this.view)||!da.ready||!this.layer);da=this._operationHandle;return ea&&da?"active":ea?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(da){const ea=this._get("view");if(ea){const {container:ha,
map:ja}=ea;ha&&(ea.cursor=null);ja&&ja.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");da&&this._handles.add(n.when(()=>da.ready,ha=>{this._viewHandles.removeAll();ha&&this._viewHandles.add(this._generateViewHandles(da))},n.syncAndInitial),"view-ready");this._set("view",da)}},{key:"test",get:function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:ma}}}]);return pa}(O.EventedAccessor);b.__decorate([y.property()],
J.prototype,"updating",null);b.__decorate([y.property()],J.prototype,"_operationHandle",void 0);b.__decorate([y.property({readOnly:!0})],J.prototype,"activeTool",null);b.__decorate([y.property()],J.prototype,"activeFillSymbol",void 0);b.__decorate([y.property()],J.prototype,"activeLineSymbol",void 0);b.__decorate([y.property()],J.prototype,"activeVertexSymbol",void 0);b.__decorate([y.property()],J.prototype,"allowDeleteKey",void 0);b.__decorate([y.property({readOnly:!0})],J.prototype,"createGraphic",
null);b.__decorate([y.property()],J.prototype,"defaultCreateOptions",null);b.__decorate([y.property()],J.prototype,"defaultUpdateOptions",null);b.__decorate([y.property({type:e,nonNullable:!0})],J.prototype,"labelOptions",void 0);b.__decorate([y.property()],J.prototype,"layer",void 0);b.__decorate([y.property({types:F.symbolTypes})],J.prototype,"pointSymbol",void 0);b.__decorate([y.property({types:F.symbolTypes})],J.prototype,"polygonSymbol",void 0);b.__decorate([y.property({types:F.symbolTypes})],
J.prototype,"polylineSymbol",void 0);b.__decorate([y.property({type:R,nonNullable:!0})],J.prototype,"snappingOptions",null);b.__decorate([y.property()],J.prototype,"_snappingManager",void 0);b.__decorate([y.property({readOnly:!0})],J.prototype,"state",null);b.__decorate([y.property({type:q,nonNullable:!0})],J.prototype,"tooltipOptions",void 0);b.__decorate([y.property({readOnly:!0})],J.prototype,"updateGraphics",void 0);b.__decorate([y.property()],J.prototype,"updateOnGraphicClick",void 0);b.__decorate([y.property({types:F.symbolTypes})],
J.prototype,"updatePointSymbol",void 0);b.__decorate([y.property({types:F.symbolTypes})],J.prototype,"updatePolygonSymbol",void 0);b.__decorate([y.property({types:F.symbolTypes})],J.prototype,"updatePolylineSymbol",void 0);b.__decorate([y.property({types:F.symbolTypes})],J.prototype,"vertexSymbol",void 0);b.__decorate([y.property({value:null})],J.prototype,"view",null);return J=b.__decorate([x.subclass("esri.widgets.Sketch.SketchViewModel")],J)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n){function y(E){E&&(F.empty(E),E.parentNode&&E.parentNode.removeChild(E))}const G=[0,0];d.DOMContainer=E=>{E=function(x){function C(...g){var r=x.call(this,...g)||this;r._freqInfo={freq:16,time:750};r._overlayRenderTaskHandle=null;r.height=0;r.position=null;r.resizing=!1;r.root=null;r.surface=null;r.suspended=!0;r.ui=null;r.userContent=null;r.width=0;r.widthBreakpoint=null;r.handles.add([f.watch(()=>r.cursor,u=>{const {surface:p}=l._assertThisInitialized(r);p&&p.setAttribute("data-cursor",
u)}),f.watch(()=>r.interacting,u=>{const {surface:p}=l._assertThisInitialized(r);p&&p.setAttribute("data-interacting",u.toString())})]);return r}l._inheritsLoose(C,x);var h=C.prototype;h.initialize=function(){this.handles.add(f.watch(()=>this.ui,(g,r)=>this._handleUIChange(g,r)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};h.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),
this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};h.blur=function(){this.surface&&this.surface.blur()};h.focus=function(){this.surface&&this.surface.focus()};h.pageToContainer=function(g,r,u){const p=this.position;g-=p[0];r-=p[1];u?(u[0]=g,u[1]=r):u=[g,r];return u};h.containerToPage=function(g,r,u){const p=this.position;g+=p[0];r+=p[1];u?(u[0]=g,u[1]=r):u=[g,r];return u};h._handleUIChange=function(g,r){r&&(this.handles.remove("ui"),r.destroy());g&&this._wireUI(g);this._set("ui",
g)};h._wireUI=function(g){this.handles.remove("ui");g&&(g.view=this,this.handles.add([f.watch(()=>this.root,r=>{if(r){{const u=document.createElement("div");r.appendChild(u);r=u}}else r=null;g.container=r},f.initial),f.watch(()=>this.popup,(r,u)=>{u&&g.remove(u,"popup");r&&(r.view=g.view,g.add(r,{key:"popup",position:"manual"}))},f.initial)],"ui"))};h._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};h._startMeasuring=function(){const g=this._freqInfo;
g.freq=16;g.time=750;this.handles.add([(()=>{const r=()=>{g.freq=16;g.time=750};window.addEventListener("resize",r);return{remove(){window.removeEventListener("resize",r)}}})(),J.addFrameTask({prepare:r=>{const u=this._measure(),p=this._freqInfo;p.time+=r.deltaTime;u&&(p.freq=16,this._get("resizing")||this._set("resizing",!0));p.time<p.freq||(p.time=0,this._position()||u?p.freq=16:p.freq=Math.min(750,2*p.freq),!u&&512<=p.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();
this._position()};h._measure=function(){var g=this.container;const r=g?g.clientWidth:0;g=g?g.clientHeight:0;if(0===r||0===g)return this.suspended||this._set("suspended",!0),!1;const u=this.width,p=this.height;if(r===u&&g===p)return this.suspended&&this._set("suspended",!1),!1;this._set("width",r);this._set("height",g);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:u,oldHeight:p,width:r,height:g});return!0};h._position=function(){var g=this.container;const r=this.position;{const u=
(g.ownerDocument||window.document).defaultView;g=g.getBoundingClientRect();G[0]=g.left+u.pageXOffset;G[1]=g.top+u.pageYOffset}return r&&G[0]===r[0]&&G[1]===r[1]?!1:(this._set("position",[G[0],G[1]]),!0)};h.forceDOMReadyCycle=function(){};l._createClass(C,[{key:"container",set:function(g){var r=this._get("container");if(r!==g)if(this.handles.remove("dom-size"),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=
null),this.overlay.destroy(),this._set("overlay",null),y(this.root),this._set("root",null),F.reparent(this.userContent,r),y(this.userContent),this._set("userContent",null)),g){g.classList.add("esri-view");r=document.createElement("div");r.className="esri-view-user-storage";F.reparent(g,r);g.appendChild(r);this._set("userContent",r);r=document.createElement("div");r.className="esri-view-root";g.insertBefore(r,g.firstChild);this._set("root",r);const u=document.createElement("div");u.className="esri-view-surface";
u.setAttribute("role","application");u.tabIndex=0;r.appendChild(u);this._set("surface",u);const p=new m;r.appendChild(p.surface);this._set("overlay",p);f.watch(()=>p.needsRender,k=>{k&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=J.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(f.watch(()=>this.size,k=>{const [D,N]=k;D>=document.body.clientWidth||
N>=document.body.clientHeight?u.classList.add("esri-view-surface--inset-outline"):u.classList.remove("esri-view-surface--inset-outline")},f.initial),"dom-size");this._set("container",g);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const g=document.activeElement===this.surface;return document.hasFocus()&&g}},{key:"popup",get:function(){return this._get("popup")||
new n({view:this})},set:function(g){const r=this._get("popup");r&&r!==g&&r.destroy();this._set("popup",g)}},{key:"size",get:function(){return[this.width,this.height]}}]);return C}(E);b.__decorate([I.property({value:null,cast:x=>F.byId(x)})],E.prototype,"container",null);b.__decorate([I.property({readOnly:!0})],E.prototype,"focused",null);b.__decorate([I.property({readOnly:!0})],E.prototype,"height",void 0);b.__decorate([I.property({type:n})],E.prototype,"popup",null);b.__decorate([I.property({type:m})],
E.prototype,"overlay",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"position",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"resizing",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"root",void 0);b.__decorate([I.property({value:null,readOnly:!0})],E.prototype,"size",null);b.__decorate([I.property({readOnly:!0})],E.prototype,"surface",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"suspended",void 0);b.__decorate([I.property()],E.prototype,
"ui",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"userContent",void 0);b.__decorate([I.property({readOnly:!0})],E.prototype,"width",void 0);b.__decorate([I.property()],E.prototype,"widthBreakpoint",void 0);return E=b.__decorate([A.subclass("esri.views.DOMContainer")],E)};d.isDOMContainer=function(E){return E&&"focus"in E};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m){b=function(n){function y(){var E=n.apply(this,arguments)||this;E.items=new F;E._watchUpdatingTracking=new H.WatchUpdatingTracking;E._callbacks=new Map;E._projector=m.createProjector();E._hiddenProjector=m.createProjector();return E}d._inheritsLoose(y,n);var G=y.prototype;G.initialize=function(){const E=document.createElement("div");E.className="esri-overlay-surface";this._set("surface",E);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");E.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,x=>{for(const C of x.added){const h=()=>C.render();this._callbacks.set(C,h);this._projector.append(this.surface,h)}for(const C of x.removed)x=this._projector.detach(this._callbacks.get(C)),this.surface.removeChild(x.domNode),this._callbacks.delete(C)})};G.addItem=function(E){this.items.add(E)};G.removeItem=function(E){this.items.remove(E)};G.destroy=function(){this.items.removeAll();
this._callbacks.forEach(E=>this._projector.detach(E));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};G.render=function(){this._projector.renderNow()};G.computeBoundingRect=function(E){const x=this._hiddenSurface,C=this._hiddenProjector;let h=null;const g=()=>h=E.render();C.append(x,g);C.renderNow();const r={left:0,top:0,right:0,bottom:0};if(h&&h.domNode){const u=h.domNode.getBoundingClientRect();r.left=u.left;r.top=u.top;r.right=u.right;r.bottom=u.bottom}for(C.detach(g);x.firstChild;)x.removeChild(x.firstChild);
return r};G.overlaps=function(E,x){E=this.computeBoundingRect(E);x=this.computeBoundingRect(x);return Math.max(E.left,x.left)<=Math.min(E.right,x.right)&&Math.max(E.top,x.top)<=Math.min(E.bottom,x.bottom)};G.renderCanvas=function(E){if(this.items.some(C=>C.visible)){var x=E.getContext("2d");x.save();x.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(C=>{x.save();C.renderCanvas(x);x.restore()});x.restore()}};d._createClass(y,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(E=>E.visible)}}]);return y}(b);l.__decorate([f.property({readOnly:!0})],b.prototype,"surface",void 0);l.__decorate([f.property({readOnly:!0})],b.prototype,"items",void 0);l.__decorate([f.property({readOnly:!0})],b.prototype,"needsRender",null);l.__decorate([f.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);l.__decorate([f.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",void 0);
return b=l.__decorate([L.subclass("esri.views.overlay.ViewOverlay")],b)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S,P){function v(w,R){return void 0===R?`${"esri-popup"}__${w}`:`${"esri-popup"}__${w}-${R}`}const K={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},e=I.getLogger("esri.widgets.Popup"),q={closeButton:!0,featureNavigation:!0};b=function(w){function R(c,z){var B=w.call(this,c,z)||this;B._blurClose=!1;B._blurContainer=!1;B._containerNode=null;B._mainContainerNode=null;B._featureMenuNode=null;B._actionsMenuNode=null;B._focusClose=!1;
B._focusContainer=!1;B._focusDockButton=!1;B._focusFeatureMenuButton=!1;B._focusActionsMenuButton=!1;B._focusFirstFeature=!1;B._focusFirstAction=!1;B._handles=new J;B._pointerOffsetInPx=16;B._spinner=null;B._feature=null;B._featureMenuIntersectionObserverCallback=([U])=>{null!=U&&U.isIntersecting&&B.viewModel.featurePage++};B._featureMenuIntersectionObserver=new IntersectionObserver(B._featureMenuIntersectionObserverCallback,{root:window.document});B._displaySpinnerThrottled=H.throttle(()=>B._displaySpinner(),
0);B.actions=null;B.alignment="auto";B.autoCloseEnabled=null;B.autoOpenEnabled=null;B.defaultPopupTemplateEnabled=null;B.content=null;B.collapsed=!1;B.collapseEnabled=!0;B.dockEnabled=!1;B.featureCount=null;B.featureMenuOpen=!1;B.features=null;B.goToOverride=null;B.headingLevel=2;B.highlightEnabled=null;B.location=null;B.label=void 0;B.maxInlineActions=3;B.messages=null;B.messagesCommon=null;B.promises=null;B.selectedFeature=null;B.selectedFeatureIndex=null;B.spinnerEnabled=!0;B.title=null;B.updateLocationEnabled=
null;B.view=null;B.viewModel=new r;B.visible=null;B.visibleElements={...q};B._addSelectedFeatureIndexHandle();B.own([L.watch(()=>{var U;return null==(U=B.viewModel)?void 0:U.screenLocation},()=>B._positionContainer()),L.watch(()=>{var U;return[null==(U=B.viewModel)?void 0:U.active,B.dockEnabled]},()=>B._toggleScreenLocationEnabled()),L.watch(()=>{var U;return null==(U=B.viewModel)?void 0:U.screenLocation},(U,Y)=>{!!U!==!!Y&&B.reposition()}),L.watch(()=>{var U,Y,aa,ca,na,ba;return[null==(U=B.viewModel)?
void 0:null==(Y=U.view)?void 0:Y.padding,null==(aa=B.viewModel)?void 0:null==(ca=aa.view)?void 0:ca.size,null==(na=B.viewModel)?void 0:na.active,null==(ba=B.viewModel)?void 0:ba.location,B.alignment]},()=>B.reposition()),L.watch(()=>B.spinnerEnabled,U=>B._spinnerEnabledChange(U)),L.watch(()=>{var U,Y;return null==(U=B.viewModel)?void 0:null==(Y=U.view)?void 0:Y.size},(U,Y)=>B._updateDockEnabledForViewSize(U,Y)),L.watch(()=>{var U;return null==(U=B.viewModel)?void 0:U.view},(U,Y)=>B._viewChange(U,
Y)),L.watch(()=>{var U,Y;return null==(U=B.viewModel)?void 0:null==(Y=U.view)?void 0:Y.ready},(U,Y)=>B._viewReadyChange(U,Y)),L.watch(()=>{var U,Y;return[null==(U=B.viewModel)?void 0:U.waitingForResult,null==(Y=B.viewModel)?void 0:Y.location]},()=>{B._hideSpinner();B._displaySpinnerThrottled()}),L.watch(()=>{var U,Y,aa,ca;return[null==(U=B.selectedFeatureWidget)?void 0:null==(Y=U.viewModel)?void 0:Y.title,null==(aa=B.selectedFeatureWidget)?void 0:null==(ca=aa.viewModel)?void 0:ca.state]},()=>B._setTitleFromFeatureWidget()),
L.watch(()=>{var U,Y,aa,ca;return[null==(U=B.selectedFeatureWidget)?void 0:null==(Y=U.viewModel)?void 0:Y.content,null==(aa=B.selectedFeatureWidget)?void 0:null==(ca=aa.viewModel)?void 0:ca.state]},()=>B._setContentFromFeatureWidget()),L.when(()=>!B.collapsed,()=>{var U,Y;"xsmall"===(null==(U=B.viewModel)?void 0:null==(Y=U.view)?void 0:Y.widthBreakpoint)&&B.viewModel.active&&B.collapseEnabled&&B.viewModel.centerAtLocation()}),L.on(()=>{var U;return null==(U=B.viewModel)?void 0:U.allActions},"change",
()=>B._watchActions()),L.watch(()=>{var U;return null==(U=B.viewModel)?void 0:U.allActions},()=>B._watchActions(),L.initial),L.watch(()=>{var U;return null==(U=B.viewModel)?void 0:U.featureViewModels},()=>B._featureMenuViewportScrollTop())]);return B}d._inheritsLoose(R,w);var Q=R.prototype;Q.destroy=function(){var c,z;this._destroySelectedFeatureWidget();this._destroySpinner();null==(c=this._handles)?void 0:c.destroy();this._unobserveFeatureMenuObserver();null==(z=this._featureMenuIntersectionObserver)?
void 0:z.disconnect();this._handles=null};Q.castVisibleElements=function(c){return{...q,...c}};Q.blur=function(){const {active:c}=this.viewModel;c||e.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};Q.clear=function(){this.viewModel.clear()};Q.close=function(){this.visible=!1};Q.fetchFeatures=function(c,z){return this.viewModel.fetchFeatures(c,z)};Q.focus=function(){const {active:c}=this.viewModel;
c||e.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};Q.next=function(){return this.viewModel.next()};Q.open=function(c){var z,B;this._handles.remove("selected-index");const U={collapsed:c?!!c.collapsed:!1,actionsMenuOpen:c?!!c.actionsMenuOpen:!1,featureMenuOpen:c?!!c.featureMenuOpen:!1};"xsmall"===(null==(z=this.viewModel)?void 0:null==(B=z.view)?void 0:B.widthBreakpoint)&&(U.collapsed=!0);
this.set(U);this.viewModel.open(c);this._shouldFocus(c);this._addSelectedFeatureIndexHandle()};Q.previous=function(){return this.viewModel.previous()};Q.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};Q.triggerAction=function(c){this.viewModel.triggerAction(c)};Q.render=function(){var c,z,B,U;const {actionsMenuOpen:Y,dockEnabled:aa,featureMenuVisible:ca,dividedActions:na,currentAlignment:ba,currentDockPosition:ra}=this,{active:ua}=this.viewModel;var {menuActions:Ba}=
na;Ba=ua&&1<Ba.length&&Y;const ka=null==(c=this.selectedFeature)?void 0:null==(z=c.layer)?void 0:z.title;c=null==(B=this.selectedFeature)?void 0:null==(U=B.layer)?void 0:U.id;return N.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===ba,["esri-popup--aligned-bottom-center"]:"bottom-center"===ba,["esri-popup--aligned-top-left"]:"top-left"===ba,["esri-popup--aligned-bottom-left"]:"bottom-left"===ba,["esri-popup--aligned-top-right"]:"top-right"===ba,["esri-popup--aligned-bottom-right"]:"bottom-right"===
ba,["esri-popup--is-docked"]:ua&&aa,["esri-popup--shadow"]:ua&&!aa,["esri-popup--is-docked-top-left"]:"top-left"===ra,["esri-popup--is-docked-top-center"]:"top-center"===ra,["esri-popup--is-docked-top-right"]:"top-right"===ra,["esri-popup--is-docked-bottom-left"]:"bottom-left"===ra,["esri-popup--is-docked-bottom-center"]:"bottom-center"===ra,["esri-popup--is-docked-bottom-right"]:"bottom-right"===ra,["esri-popup--feature-menu-open"]:ca,["esri-popup--actions-menu-open"]:Ba}),role:"presentation","data-layer-title":ka,
"data-layer-id":c,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},ua?[this.renderMainContainer(),this.renderPointer()]:null)};Q.renderLoadingIcon=function(){return N.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};Q.renderNavigationLoading=function(){const {messagesCommon:c}=this;return this.viewModel.pendingPromisesCount?N.tsx("div",{key:v("loading-container"),role:"presentation",class:"esri-popup__loading-container",
"aria-label":c.loading,title:c.loading},this.renderLoadingIcon()):null};Q.renderPreviousIcon=function(){const c=S.isRTL(this.container);return N.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:c,["esri-popup__pagination-previous-icon--rtl"]:c,["esri-icon-left-triangle-arrow"]:!c,["esri-popup__pagination-previous-icon"]:!c})})};Q.renderPreviousButton=function(){const {messages:c}=this;return N.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":c.previous,title:c.previous},this.renderPreviousIcon())};Q.renderNextIcon=function(){const c=S.isRTL(this.container);return N.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:c,["esri-popup__pagination-next-icon--rtl"]:c,["esri-icon-right-triangle-arrow"]:!c,["esri-popup__pagination-next-icon"]:!c})})};Q.renderNextButton=
function(){const {messages:c}=this;return N.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":c.next,title:c.next},this.renderNextIcon())};Q.renderFeatureMenuButton=function(){const {featureMenuOpen:c,featureMenuId:z,messagesCommon:B}=this,{featureCount:U,selectedFeatureIndex:Y}=this.viewModel;return N.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,
onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":z,"aria-expanded":c.toString(),"aria-label":B.menu,title:B.menu},this._getPageText(U,Y))};Q.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:
null};Q.renderDockIcon=function(){const {dockEnabled:c}=this,z=this._wouldDockTo();return N.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:c,["esri-popup__icon--dock-icon"]:!c,["esri-icon-dock-right"]:!c&&("top-right"===z||"bottom-right"===z),["esri-icon-dock-left"]:!c&&("top-left"===z||"bottom-left"===z),["esri-icon-maximize"]:!c&&"top-center"===z,["esri-icon-dock-bottom"]:!c&&"bottom-center"===z},"esri-popup__icon")})};Q.renderDockButton=function(){var c,z,B;const {dockEnabled:U,
messages:Y}=this,aa=null==(c=this.viewModel)?void 0:null==(z=c.view)?void 0:z.widthBreakpoint;c=U?Y.undock:Y.dock;return"xsmall"!==aa&&null!=(B=this.dockOptions)&&B.buttonEnabled?N.tsx("div",{role:"button","aria-label":c,title:c,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};Q.renderTitle=
function(){const {title:c}=this.viewModel,{titleId:z,collapsible:B,contentCollapsed:U,messagesCommon:Y}=this;var aa={["esri-popup__header-container--button"]:B};const ca=N.tsx(u.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:c});aa=B?N.tsx("button",{key:`${c}--collapsible`,id:z,title:U?Y.expand:Y.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",aa),"aria-expanded":U?"false":"true",onclick:this._toggleCollapsed,
type:"button"},ca):N.tsx("div",{key:c,id:z,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",aa)},ca);return c?aa:null};Q.renderCloseIcon=function(){return N.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};Q.renderCloseButton=function(){const {visibleElements:c,messagesCommon:z}=this;return c.closeButton?N.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,
class:"esri-popup__button","aria-label":z.close,title:z.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};Q.renderHeader=function(){return N.tsx("header",{class:"esri-popup__header"},this.renderTitle(),N.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};Q.renderContentContainer=function(){const {contentId:c,hasContent:z,contentCollapsed:B}=this,{content:U}=this.viewModel;return z&&
!B?N.tsx("article",{key:U,enterAnimation:this._createFeatureUpdatedAnimation(),id:c,class:"esri-popup__content"},this.renderContent()):null};Q.renderActionsMenuButton=function(){const {actionsMenuId:c,actionsMenuButtonId:z,actionsMenuOpen:B,dividedActions:U,messagesCommon:Y}=this,aa=B?Y.close:Y.open,{menuActions:ca}=U;return ca.length?N.tsx("div",{key:v("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:z,"aria-haspopup":"true","aria-controls":B?
c:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":aa,title:aa},N.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};Q.renderMenuActions=function(){const {actionsMenuId:c,actionsMenuButtonId:z,actionsMenuOpen:B,dividedActions:U}=this,{menuActions:Y}=U;return Y.length&&B?N.tsx("ul",{id:c,role:"menu","aria-labelledby":z,key:v("actions"),
class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},Y.toArray().map(aa=>this.renderAction({action:aa,type:"menu-item"}))):null};Q.renderInlineActions=function(){const {inlineActions:c}=this.dividedActions;return!!c.length&&c.toArray().map(z=>this.renderAction({action:z,type:"inline"}))};Q.renderInlineActionsContainer=function(){const {inlineActions:c,menuActions:z}=this.dividedActions,B=!!c.length,
U=!!z.length;return B||U?N.tsx("div",{key:"inline-actions-container","data-inline-actions":B.toString(),"data-menu-actions":U.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};Q.renderNavigation=function(){return this.featureNavigationVisible?N.tsx("section",{key:v("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};Q.renderFooter=function(){const {featureNavigationVisible:c,
dividedActions:z}=this,{inlineActions:B,menuActions:U}=z,Y=!!B.length,aa={["esri-popup__footer--has-pagination"]:c,["esri-popup__footer--has-actions"]:Y,["esri-popup__footer--has-actions-menu"]:!!U.length};return c||Y?N.tsx("div",{key:v("feature-buttons"),class:this.classes("esri-popup__footer",aa)},this.renderInlineActionsContainer(),this.renderNavigation()):null};Q.renderFeatureMenuContainer=function(){var {messages:c}=this;const {featureViewModels:z,isLoadingFeature:B}=this.viewModel;c=P.substitute(c.selectedFeatures,
{total:z.length});return N.tsx("section",{key:v("menu"),class:"esri-popup__feature-menu"},N.tsx("strong",{class:"esri-popup__feature-menu-header"},c),N.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:S.storeNode},this.renderFeatureMenu(),N.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),B?N.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):
null))};Q.renderPointer=function(){return this.dockEnabled?null:N.tsx("div",{key:v("pointer"),class:"esri-popup__pointer",role:"presentation"},N.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};Q.renderMainContainer=function(){const {dockEnabled:c,currentAlignment:z,currentDockPosition:B,titleId:U,contentId:Y,collapsible:aa,hasContent:ca,contentCollapsed:na,visibleElements:ba}=this,{title:ra}=this.viewModel,ua="bottom-left"===z||"bottom-center"===z||"bottom-right"===
z||"top-left"===B||"top-center"===B||"top-right"===B,Ba="top-left"===z||"top-center"===z||"top-right"===z||"bottom-left"===B||"bottom-center"===B||"bottom-right"===B;return N.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:c,["esri-popup--is-collapsible"]:aa,["esri-popup--is-collapsed"]:na}),tabIndex:ba.closeButton?null:-1,role:"dialog","aria-labelledby":ra?U:"","aria-describedby":ca&&!na?Y:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},ua?this.renderFooter():null,ua?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Ba?this.renderFooter():null,Ba?this.renderFeatureMenuContainer():null)};Q.renderContent=function(){var c;const z=null==(c=this.viewModel)?void 0:c.content;return z?"string"===typeof z?N.tsx("div",{key:z,innerHTML:z}):this.renderNodeContent(z):null};Q.renderActionText=function(c){return N.tsx("span",{key:"text",class:"esri-popup__action-text"},
c)};Q.renderActionIcon=function(c){const z=this._getActionClass(c),B=this._getActionImage(c),U={["esri-icon-loading-indicator"]:c.active,["esri-rotating"]:c.active,["esri-popup__icon"]:!!z,["esri-popup__action-image"]:!c.active&&!!B};z&&(U[z]=!c.active);return N.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",U),styles:this._getIconStyles(B)})};Q.renderAction=function(c){const {action:z,type:B}=c;c=this._getActionTitle(z);const U={["esri-popup__action"]:"toggle"!==
z.type,["esri-popup__action-toggle"]:"toggle"===z.type,["esri-popup__action-toggle--on"]:"toggle"===z.type&&z.value,["esri-popup__button--disabled"]:z.disabled},Y=[this.renderActionIcon(z),this.renderActionText(c)];c="menu-item"===B?N.tsx("li",{key:z.uid,role:"menuitem",tabIndex:0,title:c,"aria-label":c,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":z.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Y):N.tsx("div",{key:z.uid,
role:"button",tabIndex:0,title:c,"aria-label":c,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":z.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Y);return z.visible?c:null};Q.renderFeatureMenuItem=function(c,z){const {messages:B,messagesCommon:U}=this,{selectedFeatureIndex:Y,selectedFeatureViewModel:aa}=this.viewModel;var ca=c===aa;const na={["esri-popup__feature-menu-item--selected"]:ca};ca=ca?N.tsx("span",{key:v(`feature-menu-selected-feature-${Y}`),
title:B.selectedFeature,"aria-label":B.selectedFeature,class:"esri-icon-check-mark"}):null;c=N.tsx("span",{innerHTML:c.title||U.untitled});return N.tsx("li",{role:"menuitem",tabIndex:-1,key:v(`feature-menu-feature-${Y}`),class:this.classes(na,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":z,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,
onmouseleave:this._removeActiveFeature},N.tsx("span",{class:"esri-popup__feature-menu-title"},c,ca))};Q.renderFeatureMenu=function(){const {featureMenuId:c}=this,{featureViewModels:z}=this.viewModel;return 1<z.length?N.tsx("ol",{class:"esri-popup__feature-menu-list",id:c,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},z.filter(B=>!!B.graphic).map((B,U)=>this.renderFeatureMenuItem(B,U))):null};Q._getActionTitle=
function(c){const {messages:z,selectedFeature:B,messagesCommon:U}=this,{id:Y}=c,aa=null==B?void 0:B.attributes;return(c="zoom-to-feature"===Y?P.substitute(c.title,{messages:z}):"remove-selected-feature"===Y?P.substitute(c.title,{messages:U}):"zoom-to-clustered-features"===Y?P.substitute(c.title,{messages:z}):"browse-clustered-features"===Y?P.substitute(c.title,{messages:z}):c.title)&&aa?P.substitute(c,aa):c};Q._getActionClass=function(c){var {selectedFeature:z}=this;z=null==z?void 0:z.attributes;
const {className:B,image:U}=c;return(c=U||B?B:"esri-icon-default-action")&&z?P.substitute(c,z):c};Q._getActionImage=function(c){var {selectedFeature:z}=this;z=null==z?void 0:z.attributes;({image:c}=c);return c&&z?P.substitute(c,z):c};Q._createFeatureUpdatedAnimation=function(){return S.cssTransition("enter","esri-popup--feature-updated")};Q._getInlineActionCount=function(){const {maxInlineActions:c,featureNavigationVisible:z}=this;if("number"!==typeof c)return null;const B=Math.round(c);return Math.max(z?
B-1:B,0)};Q._watchActions=function(){const {allActions:c}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");c&&c.forEach(z=>{this._handles.add(L.watch(()=>[z.uid,z.active,z.className,z.disabled,z.id,z.title,z.image,z.visible],()=>this.scheduleRender()),"actions")})};Q._divideActions=function(){var {allActions:c}=this.viewModel;c=c.filter(Y=>Y.visible);const z=this._getInlineActionCount(),B=null===z,U=0===z;return{inlineActions:B?c.slice(0):U?new F:c.slice(0,z),menuActions:B?
new F:U?c.slice(0):c.slice(z)}};Q._featureMenuOpenChanged=function(c){c?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};Q._actionsMenuOpenChanged=function(c){c?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};Q._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:c,messagesCommon:z}=this;if(c){var B,U;this.viewModel.title="error"===(null==(B=c.viewModel)?void 0:B.state)?z.errorMessage:(null==(U=c.viewModel)?void 0:U.title)||""}};Q._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:c}=
this;c&&(this.viewModel.content=c)};Q._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};Q._featureMenuIntersectionObserverCreated=function(c){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(c);this._featureMenuIntersectionObserverNode=c};Q._handleFeatureMenuKeyup=function(c){"Escape"===f.eventKey(c)&&(c.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};Q._handleActionMenuKeyup=function(c){"Escape"===f.eventKey(c)&&(c.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};Q._setActiveFeature=function(c){const {viewModel:z}=this;z.activeFeature=z.features[c.currentTarget["data-feature-index"]]||null};Q._removeActiveFeature=function(){this.viewModel.activeFeature=null};Q._handleFeatureMenuItemKeyup=function(c){const z=f.eventKey(c);var {_featureMenuNode:B}=
this;const U=c.currentTarget["data-feature-index"];if(B){B=B.querySelectorAll("li");var Y=B.length;"ArrowUp"===z?(c.stopPropagation(),B[(U-1+Y)%Y].focus()):"ArrowDown"===z?(c.stopPropagation(),B[(U+1+Y)%Y].focus()):"Home"===z?(c.stopPropagation(),B[0].focus()):"End"===z&&(c.stopPropagation(),B[B.length-1].focus())}};Q._handleActionMenuItemKeyup=function(c){const z=f.eventKey(c);var {_actionsMenuNode:B}=this;const U=c.currentTarget.dataset.actionUid;var {menuActions:Y}=this.dividedActions;Y=Y.findIndex(ca=>
ca.uid===U);if(B){B=B.querySelectorAll("li");var aa=B.length;"ArrowUp"===z?(c.stopPropagation(),B[(Y-1+aa)%aa].focus()):"ArrowDown"===z?(c.stopPropagation(),B[(Y+1+aa)%aa].focus()):"Home"===z?(c.stopPropagation(),B[0].focus()):"End"===z&&(c.stopPropagation(),B[B.length-1].focus())}};Q._handleMainKeyup=function(c){const z=f.eventKey(c);"ArrowLeft"===z&&(c.stopPropagation(),this.previous());"ArrowRight"===z&&(c.stopPropagation(),this.next())};Q._spinnerEnabledChange=function(c){this._destroySpinner();
c&&(c=this.get("viewModel.view"),this._createSpinner(c))};Q._hideSpinner=function(){const {_spinner:c}=this;c&&(c.location=null,c.hide())};Q._displaySpinner=function(){const {_spinner:c}=this;if(c){var {location:z,waitingForResult:B}=this.viewModel;B?c.show({location:z}):c.hide()}};Q._getIconStyles=function(c){return{"background-image":c?`url(${c})`:""}};Q._shouldFocus=function(){var c=d._asyncToGenerator(function*(z){z.shouldFocus&&(yield L.whenOnce(()=>{var B;return!0===(null==(B=this.viewModel)?
void 0:B.active)}),this.focus())});return function(z){return c.apply(this,arguments)}}();Q._addSelectedFeatureIndexHandle=function(){const c=L.watch(()=>{var z;return null==(z=this.viewModel)?void 0:z.selectedFeatureIndex},(z,B)=>this._selectedFeatureIndexUpdated(z,B));this._handles.add(c,"selected-index")};Q._selectedFeatureIndexUpdated=function(c,z){const {featureCount:B}=this;B&&c!==z&&-1!==c&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};Q._destroySelectedFeatureWidget=function(){const {_feature:c}=
this;c&&(c.viewModel=null,c&&!c.destroyed&&c.destroy());this._feature=null};Q._isScreenLocationWithinView=function(c,z){return-1<c.x&&-1<c.y&&c.x<=z.width&&c.y<=z.height};Q._isOutsideView=function(c){const {popupHeight:z,popupWidth:B,screenLocation:U,side:Y,view:aa}=c;if(isNaN(B)||isNaN(z)||!aa||!U)return!1;c=aa.padding;return"right"===Y&&U.x+B/2>aa.width-c.right||"left"===Y&&U.x-B/2<c.left||"top"===Y&&U.y-z<c.top||"bottom"===Y&&U.y+z>aa.height-c.bottom?!0:!1};Q._calculateAutoAlignment=function(c){if("auto"!==
c)return c;const {_pointerOffsetInPx:z,_containerNode:B,_mainContainerNode:U,viewModel:Y}=this,{screenLocation:aa,view:ca}=Y;if(O.isNone(aa)||!ca||!B)return"top-center";if(!this._isScreenLocationWithinView(aa,ca))return this._get("currentAlignment")||"top-center";var na=(c=U?window.getComputedStyle(U,null):null)?parseInt(c.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,ba=c?parseInt(c.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ra,width:ua}=B.getBoundingClientRect();
c=ua+z;const Ba=Math.max(ra,na,ba)+z;na=this._isOutsideView({popupHeight:Ba,popupWidth:c,screenLocation:aa,side:"right",view:ca});ba=this._isOutsideView({popupHeight:Ba,popupWidth:c,screenLocation:aa,side:"left",view:ca});const ka=this._isOutsideView({popupHeight:Ba,popupWidth:c,screenLocation:aa,side:"top",view:ca});c=this._isOutsideView({popupHeight:Ba,popupWidth:c,screenLocation:aa,side:"bottom",view:ca});return ba?ka?"bottom-right":"top-right":na?ka?"bottom-left":"top-left":ka?c?"top-center":
"bottom-center":"top-center"};Q._callCurrentAlignment=function(c){return"function"===typeof c?c.call(this):c};Q._getCurrentAlignment=function(){const {alignment:c,dockEnabled:z}=this;return z||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(c)))};Q._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};Q._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};
Q._calculatePositionResult=function(c){const z=["left","right"];S.isRTL(this.container)&&z.reverse();return c.replace(/leading/gi,z[0]).replace(/trailing/gi,z[1])};Q._callDockPosition=function(c){return"function"===typeof c?c.call(this):c};Q._getDockPosition=function(){var c;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(c=this.dockOptions)?void 0:c.position)))};Q._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?
this._getDockPosition():null};Q._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};Q._calculateAutoDockPosition=function(c){var z;if("auto"!==c)return c;c=null==(z=this.viewModel)?void 0:z.view;z=S.isRTL(this.container)?"top-left":"top-right";if(!c)return z;var B=c.padding||{left:0,right:0,top:0,bottom:0};B=c.width-B.left-B.right;({breakpoints:c}=c);return c&&B<=c.xsmall?"bottom-center":z};Q._positionContainer=function(c=this._containerNode){c&&(this._containerNode=c);if(c){var {screenLocation:z}=
this.viewModel,{width:B}=c.getBoundingClientRect();if(z=this._calculatePositionStyle(z,B))c.style.top=z.top,c.style.left=z.left,c.style.bottom=z.bottom,c.style.right=z.right}};Q._calculateFullWidth=function(c){const {currentAlignment:z,_pointerOffsetInPx:B}=this;return"top-left"===z||"bottom-left"===z||"top-right"===z||"bottom-right"===z?c+B:c};Q._calculateAlignmentPosition=function(c,z,B,U){const {currentAlignment:Y,_pointerOffsetInPx:aa}=this;U/=2;const ca=B.height-z;B=B.width-c;const {padding:na}=
this.view;if("bottom-center"===Y)return{top:z+aa-na.top,left:c-U-na.left};if("top-left"===Y)return{bottom:ca+aa-na.bottom,right:B+aa-na.right};if("bottom-left"===Y)return{top:z+aa-na.top,right:B+aa-na.right};if("top-right"===Y)return{bottom:ca+aa-na.bottom,left:c+aa-na.left};if("bottom-right"===Y)return{top:z+aa-na.top,left:c+aa-na.left};if("top-center"===Y)return{bottom:ca+aa-na.bottom,left:c-U-na.left}};Q._calculatePositionStyle=function(c,z){const {dockEnabled:B,view:U}=this;if(U){if(B)return{left:"",
top:"",right:"",bottom:""};if(!O.isNone(c)&&z&&(z=this._calculateFullWidth(z),c=this._calculateAlignmentPosition(c.x,c.y,U,z)))return{top:void 0!==c.top?`${c.top}px`:"auto",left:void 0!==c.left?`${c.left}px`:"auto",bottom:void 0!==c.bottom?`${c.bottom}px`:"auto",right:void 0!==c.right?`${c.right}px`:"auto"}}};Q._viewChange=function(c,z){c&&z&&(this.close(),this.clear())};Q._viewReadyChange=function(c,z){c?(c=this.get("viewModel.view"),this._wireUpView(c)):z&&(this.close(),this.clear())};Q._wireUpView=
function(c){this._destroySpinner();if(c){var {spinnerEnabled:z}=this;z&&this._createSpinner(c);this._setDockEnabledForViewSize(this.dockOptions)}};Q._dockingThresholdCrossed=function(c,z,B){const [U,Y]=c,[aa,ca]=z,{width:na,height:ba}=B;return U<=na&&aa>na||U>na&&aa<=na||Y<=ba&&ca>ba||Y>ba&&ca<=ba};Q._updateDockEnabledForViewSize=function(c,z){if(c&&z){var B=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},U=B.left+B.right,Y=B.top+B.bottom;B=[];var aa=[];B[0]=c[0]-U;B[1]=c[1]-Y;
aa[0]=z[0]-U;aa[1]=z[1]-Y;({dockOptions:c}=this);this._dockingThresholdCrossed(B,aa,c.breakpoint)&&this._setDockEnabledForViewSize(c);this._setCurrentDockPosition()}};Q._focusDockButtonNode=function(c){this._focusDockButton&&(this._focusDockButton=!1,c.focus())};Q._closeButtonNodeUpdated=function(c){this._focusClose?(this._focusClose=!1,c.focus()):this._blurClose&&(this._blurClose=!1,c.blur())};Q._mainContainerNodeUpdated=function(c){this._mainContainerNode=c;this._focusContainer?(this._focusContainer=
!1,c.focus()):this._blurContainer&&(this._blurContainer=!1,c.blur())};Q._featureMenuNodeUpdated=function(c){(this._featureMenuNode=c)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,c=c.querySelectorAll("li"),c.length&&c[0].focus())};Q._actionsMenuNodeUpdated=function(c){(this._actionsMenuNode=c)&&this._focusFirstAction&&(this._focusFirstAction=!1,c=c.querySelectorAll("li"),c.length&&c[0].focus())};Q._focusFeatureMenuButtonNode=function(c){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=
!1,c.focus())};Q._focusActionsMenuButtonNode=function(c){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,c.focus())};Q._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};Q._toggleScreenLocationEnabled=function(){const {dockEnabled:c,viewModel:z}=this;z&&(z.screenLocationEnabled=z.active&&!c)};Q._shouldDockAtCurrentViewSize=function(c){var z,B;c=c.breakpoint;const U=null==(z=this.viewModel)?void 0:null==(B=z.view)?void 0:
B.ui;if(!U)return!1;const {width:Y,height:aa}=U;if(isNaN(Y)||isNaN(aa))return!1;z=c.hasOwnProperty("width")&&Y<=c.width;B=c.hasOwnProperty("height")&&aa<=c.height;return z||B};Q._setDockEnabledForViewSize=function(c){c.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(c))};Q._getPageText=function(c,z){return this.featureNavigationVisible?P.substitute(this.messages.pageText,{index:z+1,total:c}):null};Q._destroySpinner=function(){const {_spinner:c,view:z}=this;c&&(z&&z.ui&&z.ui.remove(this._spinner,
"popup-spinner"),c.destroy(),this._spinner=null)};Q._createSpinner=function(c){c&&(this._spinner=new C({view:c}),c.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};Q._toggleCollapsed=function(){this.collapsed=!this.collapsed};Q._close=function(){this.close();this.view&&this.view.focus()};Q._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};Q._toggleFeatureMenu=function(){const c=!this.featureMenuOpen;this._featureMenuOpenChanged(c);
this.actionsMenuOpen=!1;this.featureMenuOpen=c};Q._toggleActionsMenu=function(){const c=!this.actionsMenuOpen;this._actionsMenuOpenChanged(c);this.featureMenuOpen=!1;this.actionsMenuOpen=c};Q._triggerAction=function(c){const z=c.currentTarget.dataset.actionUid;var {allActions:B}=this.viewModel;c=B.findIndex(U=>U.uid===z);(B=B.getItemAt(c))&&"toggle"===B.type&&(B.value=!B.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(c)};Q._selectFeature=function(c){c=c.currentTarget["data-feature-index"];
isNaN(c)||(this.viewModel.selectedFeatureIndex=c);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};Q._next=function(){this.next()};Q._previous=function(){this.previous()};d._createClass(R,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},
{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var c,z,B,U,Y,aa,ca;return!!(this.selectedFeatureWidget?(null==(c=this.selectedFeatureWidget)?0:null==(z=c.viewModel)?0:z.waitingForContent)||"error"===(null==(B=this.selectedFeatureWidget)?void 0:null==(U=B.viewModel)?void 0:U.state)||(null==(Y=this.selectedFeatureWidget)?0:null==(aa=Y.viewModel)?0:aa.content):null==(ca=this.viewModel)?0:ca.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&
1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?
this._get("actionsMenuOpen"):!1},set:function(c){this._set("actionsMenuOpen",!!c)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||K},set:function(c){var z={...K};const B=this.get("viewModel.view.breakpoints");var U={};B&&(U.width=B.xsmall,U.height=B.xsmall);c={...z,...c};z={...z.breakpoint,...U};({breakpoint:U}=c);!0===U?
c.breakpoint=z:"object"===typeof U&&(c.breakpoint={...z,...U});this._set("dockOptions",c);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:c,visibleElements:z,headingLevel:B}=this,{selectedFeatureViewModel:U}=this.viewModel,Y={...z,title:!1};if(!U)return null;c?(c.viewModel=U,c.visibleElements=Y):this._feature=new x({headingLevel:B+1,viewModel:U,visibleElements:Y});return this._feature}}]);return R}(g.FeatureContentMixin(h));l.__decorate([G.property({readOnly:!0})],
b.prototype,"actionsMenuId",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"actionsMenuButtonId",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"featureMenuId",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"titleId",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"contentId",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"hasContent",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"featureNavigationVisible",null);l.__decorate([G.property({readOnly:!0})],
b.prototype,"collapsible",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"featureMenuVisible",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"contentCollapsed",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"dividedActions",null);l.__decorate([A.aliasOf("viewModel.actions")],b.prototype,"actions",void 0);l.__decorate([G.property()],b.prototype,"actionsMenuOpen",null);l.__decorate([G.property()],b.prototype,"alignment",void 0);l.__decorate([A.aliasOf("viewModel.autoCloseEnabled")],
b.prototype,"autoCloseEnabled",void 0);l.__decorate([A.aliasOf("viewModel.autoOpenEnabled")],b.prototype,"autoOpenEnabled",void 0);l.__decorate([A.aliasOf("viewModel.defaultPopupTemplateEnabled")],b.prototype,"defaultPopupTemplateEnabled",void 0);l.__decorate([A.aliasOf("viewModel.content")],b.prototype,"content",void 0);l.__decorate([G.property()],b.prototype,"collapsed",void 0);l.__decorate([G.property()],b.prototype,"collapseEnabled",void 0);l.__decorate([G.property({readOnly:!0})],b.prototype,
"currentAlignment",null);l.__decorate([G.property({readOnly:!0})],b.prototype,"currentDockPosition",null);l.__decorate([G.property()],b.prototype,"dockOptions",null);l.__decorate([G.property()],b.prototype,"dockEnabled",void 0);l.__decorate([A.aliasOf("viewModel.featureCount")],b.prototype,"featureCount",void 0);l.__decorate([G.property()],b.prototype,"featureMenuOpen",void 0);l.__decorate([A.aliasOf("viewModel.features")],b.prototype,"features",void 0);l.__decorate([A.aliasOf("viewModel.goToOverride")],
b.prototype,"goToOverride",void 0);l.__decorate([G.property()],b.prototype,"headingLevel",void 0);l.__decorate([A.aliasOf("viewModel.highlightEnabled")],b.prototype,"highlightEnabled",void 0);l.__decorate([A.aliasOf("viewModel.location")],b.prototype,"location",void 0);l.__decorate([G.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);l.__decorate([G.property()],b.prototype,"maxInlineActions",void 0);l.__decorate([G.property(),k.messageBundle("esri/widgets/Popup/t9n/Popup")],
b.prototype,"messages",void 0);l.__decorate([G.property(),k.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);l.__decorate([A.aliasOf("viewModel.promises")],b.prototype,"promises",void 0);l.__decorate([A.aliasOf("viewModel.selectedFeature")],b.prototype,"selectedFeature",void 0);l.__decorate([A.aliasOf("viewModel.selectedFeatureIndex")],b.prototype,"selectedFeatureIndex",void 0);l.__decorate([G.property({readOnly:!0})],b.prototype,"selectedFeatureWidget",null);l.__decorate([G.property()],
b.prototype,"spinnerEnabled",void 0);l.__decorate([A.aliasOf("viewModel.title")],b.prototype,"title",void 0);l.__decorate([A.aliasOf("viewModel.updateLocationEnabled")],b.prototype,"updateLocationEnabled",void 0);l.__decorate([A.aliasOf("viewModel.view")],b.prototype,"view",void 0);l.__decorate([G.property({type:r}),D.vmEvent(["triggerAction","trigger-action"])],b.prototype,"viewModel",void 0);l.__decorate([A.aliasOf("viewModel.visible")],b.prototype,"visible",void 0);l.__decorate([G.property()],
b.prototype,"visibleElements",void 0);l.__decorate([y.cast("visibleElements")],b.prototype,"castVisibleElements",null);l.__decorate([p.accessibleHandler()],b.prototype,"_close",null);l.__decorate([p.accessibleHandler()],b.prototype,"_toggleDockEnabled",null);l.__decorate([p.accessibleHandler()],b.prototype,"_toggleFeatureMenu",null);l.__decorate([p.accessibleHandler()],b.prototype,"_toggleActionsMenu",null);l.__decorate([p.accessibleHandler()],b.prototype,"_triggerAction",null);l.__decorate([p.accessibleHandler()],
b.prototype,"_selectFeature",null);l.__decorate([p.accessibleHandler()],b.prototype,"_next",null);l.__decorate([p.accessibleHandler()],b.prototype,"_previous",null);return b=l.__decorate([E.subclass("esri.widgets.Popup")],b)})},"esri/core/throttle":function(){define(["exports"],function(d){d.throttle=function(l,b,F,f){let J=null,I=1E3;"number"===typeof b?(I=b,f=F):(J=null!=b?b:null,I=F);let O=0,L;const H=()=>{O=0;l.apply(f,L)};b=(...A)=>{J&&J.apply(f,A);L=A;I?O||(O=setTimeout(H,I)):H()};b.remove=
()=>{O&&(clearTimeout(O),O=0)};b.forceUpdate=()=>{O&&(clearTimeout(O),H())};b.hasPendingUpdates=()=>!!O;return b};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k){const D={title:!0,content:!0,lastEditedInfo:!0};F=function(N){function S(v,K){v=N.call(this,v,K)||this;v._contentWidgets=[];v.graphic=null;v.defaultPopupTemplateEnabled=!1;v.headingLevel=2;v.label=void 0;v.messages=null;v.messagesCommon=null;v.messagesURIUtils=null;v.spatialReference=null;v.title=null;v.visibleElements={...D};v.map=null;v.view=null;v.viewModel=new C;return v}l._inheritsLoose(S,N);var P=S.prototype;P.initialize=function(){this.own(f.watch(()=>
{var v;return null==(v=this.viewModel)?void 0:v.contentViewModels},()=>this._setupContentWidgets(),f.initial))};P.loadDependencies=function(){return new Promise((v,K)=>d(["../chunks/calcite-notice"],v,K))};P.destroy=function(){this._destroyContentWidgets()};P.castVisibleElements=function(v){return{...D,...v}};P.render=function(){var {state:v}=this.viewModel;v=p.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===v?this.renderError():"loading"===v?this.renderLoading():
this.renderContentContainer());return p.tsx("div",{class:this.classes("esri-feature","esri-widget")},v)};P.setActiveMedia=function(v,K){this.viewModel.setActiveMedia(v,K)};P.nextMedia=function(v){this.viewModel.nextMedia(v)};P.previousMedia=function(v){this.viewModel.previousMedia(v)};P.renderError=function(){const {messagesCommon:v,messages:K,visibleElements:e}=this;return p.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},e.title?p.tsx("div",{key:"error-title",
slot:"title"},v.errorMessage):null,p.tsx("div",{key:"error-message",slot:"message"},K.loadingError))};P.renderLoading=function(){return p.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},p.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};P.renderContentContainer=function(){const {visibleElements:v}=this;return v.content?p.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):
null};P.renderTitle=function(){const {visibleElements:v,title:K}=this;return v.title?p.tsx(g.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:K}):null};P.renderContent=function(){var v=this.viewModel.content;return v?Array.isArray(v)?v.length?p.tsx("div",{key:"content-content-elements"},v.map(this.renderContentElement,this)):null:"string"===typeof v?(v=this._contentWidgets[0],!v||v.destroyed?null:p.tsx("div",{key:"content-content"},v.render())):this.renderNodeContent(v):null};
P.renderContentElement=function(v,K){const {visibleElements:e}=this;if("boolean"!==typeof e.content&&!e.content[v.type])return null;switch(v.type){case "attachments":return this.renderAttachments(K);case "custom":return this.renderCustom(v,K);case "fields":return this.renderFields(K);case "media":return this.renderMedia(K);case "text":return this.renderText(v,K);case "expression":return this.renderExpression(K);default:return null}};P.renderAttachments=function(v){const K=this._contentWidgets[v];
if(!K||K.destroyed)return null;const {state:e,attachmentInfos:q}=K.viewModel;return"loading"===e||0<q.length?p.tsx("div",{key:this._buildKey("attachments-element",v),class:this.classes("esri-feature__content-element")},K.render()):null};P.renderExpression=function(v){const K=this._contentWidgets[v];return!K||K.destroyed?null:p.tsx("div",{key:this._buildKey("expression-element",v),class:"esri-feature__content-element"},K.render())};P.renderCustom=function(v,K){({creator:v}=v);const e=this._contentWidgets[K];
return!e||e.destroyed?null:v?p.tsx("div",{key:this._buildKey("custom-element",K),class:"esri-feature__content-element"},e.render()):null};P.renderFields=function(v){const K=this._contentWidgets[v];return!K||K.destroyed?null:p.tsx("div",{key:this._buildKey("fields-element",v),class:"esri-feature__content-element"},K.render())};P.renderMedia=function(v){const K=this._contentWidgets[v];return!K||K.destroyed?null:p.tsx("div",{key:this._buildKey("media-element",v),class:"esri-feature__content-element"},
K.render())};P.renderLastEditInfo=function(){const {visibleElements:v,messages:K}=this;var {lastEditInfo:e}=this.viewModel;if(!e||!v.lastEditedInfo)return null;const {date:q,user:w}=e;e=k.substitute("edit"===e.type?w?K.lastEditedByUser:K.lastEdited:w?K.lastCreatedByUser:K.lastCreated,{date:q,user:w});return p.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},e)};P.renderText=function(v,K){const e=this._contentWidgets[K];return!e||
e.destroyed?null:v.text?p.tsx("div",{key:this._buildKey("text-element",K),class:this.classes("esri-feature__content-element","esri-feature__text")},e.render()):null};P._buildKey=function(v,...K){const e=this.get("viewModel.graphic.uid")||"0";K=K.join("-");return`${v}__${e}-${K}`};P._destroyContentWidget=function(v){v&&(v.viewModel=null,!v.destroyed&&v.destroy())};P._destroyContentWidgets=function(){this._contentWidgets.forEach(v=>this._destroyContentWidget(v));this._contentWidgets=[]};P._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:v,visibleElements:K}=this;var e=this.get("viewModel.content");const {contentViewModels:q}=this.viewModel;Array.isArray(e)?e.forEach((w,R)=>{"attachments"===w.type&&(this._contentWidgets[R]=new n({displayType:w.displayType,headingLevel:K.title?v+1:v,viewModel:q[R]}));"fields"===w.type&&(this._contentWidgets[R]=new E({viewModel:q[R]}));"media"===w.type&&(this._contentWidgets[R]=new x({viewModel:q[R]}));"text"===w.type&&(this._contentWidgets[R]=
new y({viewModel:q[R]}));"custom"===w.type&&(this._contentWidgets[R]=new y({viewModel:q[R]}));"expression"===w.type&&(this._contentWidgets[R]=new G({viewModel:q[R]}))},this):(e=q[0])&&!e.destroyed&&(this._contentWidgets[0]=new y({viewModel:e}));this.scheduleRender()};return S}(h.FeatureContentMixin(m));b.__decorate([J.aliasOf("viewModel.graphic")],F.prototype,"graphic",void 0);b.__decorate([J.aliasOf("viewModel.defaultPopupTemplateEnabled")],F.prototype,"defaultPopupTemplateEnabled",void 0);b.__decorate([H.property()],
F.prototype,"headingLevel",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0);b.__decorate([H.property(),u.messageBundle("esri/widgets/Feature/t9n/Feature")],F.prototype,"messages",void 0);b.__decorate([H.property(),u.messageBundle("esri/t9n/common")],F.prototype,"messagesCommon",void 0);b.__decorate([H.property(),u.messageBundle("esri/widgets/support/t9n/uriUtils")],F.prototype,"messagesURIUtils",void 0);b.__decorate([J.aliasOf("viewModel.spatialReference")],
F.prototype,"spatialReference",void 0);b.__decorate([J.aliasOf("viewModel.title")],F.prototype,"title",void 0);b.__decorate([H.property()],F.prototype,"visibleElements",void 0);b.__decorate([L.cast("visibleElements")],F.prototype,"castVisibleElements",null);b.__decorate([J.aliasOf("viewModel.map")],F.prototype,"map",void 0);b.__decorate([J.aliasOf("viewModel.view")],F.prototype,"view",void 0);b.__decorate([H.property({type:C})],F.prototype,"viewModel",void 0);return F=b.__decorate([A.subclass("esri.widgets.Feature")],
F)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){f=function(E){function x(h,g){h=E.call(this,h,g)||this;h._featureElementInfo=null;h.attachmentsWidget=new H;h.description=null;h.displayType=null;h.graphic=null;h.headingLevel=2;h.title=null;h.viewModel=new m;return h}d._inheritsLoose(x,E);var C=x.prototype;C.initialize=function(){this._featureElementInfo=new n;this.own([b.watch(()=>{var h,g;return[null==(h=this.viewModel)?void 0:h.description,null==(g=this.viewModel)?void 0:g.title,this.headingLevel]},()=>
this._setupFeatureElementInfo(),b.initial),b.watch(()=>{var h;return null==(h=this.viewModel)?void 0:h.graphic},h=>this.attachmentsWidget.graphic=h,b.initial)])};C.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};C.render=function(){var h;const {attachmentsWidget:g}=this;return G.tsx("div",{class:"esri-feature-attachments"},null==(h=this._featureElementInfo)?void 0:h.render(),null==g?void 0:g.render())};C._setupFeatureElementInfo=function(){const {description:h,
title:g,headingLevel:r}=this;this._featureElementInfo.set({description:h,title:g,headingLevel:r})};return x}(A);l.__decorate([O.property({readOnly:!0})],f.prototype,"attachmentsWidget",void 0);l.__decorate([F.aliasOf("viewModel.description")],f.prototype,"description",void 0);l.__decorate([F.aliasOf("attachmentsWidget.displayType")],f.prototype,"displayType",void 0);l.__decorate([F.aliasOf("viewModel.graphic")],f.prototype,"graphic",void 0);l.__decorate([O.property()],f.prototype,"headingLevel",void 0);
l.__decorate([F.aliasOf("viewModel.title")],f.prototype,"title",void 0);l.__decorate([O.property({type:m})],f.prototype,"viewModel",void 0);return f=l.__decorate([L.subclass("esri.widgets.Feature.FeatureAttachments")],f)})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(d,l,b,F,f,J,I,O){F=function(L){function H(A){A=L.call(this,A)||this;A.description=null;A.title=null;return A}d._inheritsLoose(H,L);return H}(O);l.__decorate([b.property()],F.prototype,"description",void 0);l.__decorate([b.property()],F.prototype,"title",void 0);return F=l.__decorate([I.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],F)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){F=function(m){function n(G,E){G=m.call(this,G,E)||this;G.description=null;G.headingLevel=2;G.title=null;return G}d._inheritsLoose(n,m);var y=n.prototype;y.render=function(){return A.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};y.renderTitle=function(){const {title:G}=this;return G?A.tsx(L.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},G):null};y.renderDescription=function(){const {description:G}=
this;return G?A.tsx("div",{key:"description",class:"esri-feature-element-info__description"},G):null};return n}(O);l.__decorate([b.property()],F.prototype,"description",void 0);l.__decorate([b.property()],F.prototype,"headingLevel",void 0);l.__decorate([b.property()],F.prototype,"title",void 0);return F=l.__decorate([I.subclass("esri.widgets.Feature.support.FeatureElementInfo")],F)})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n){F=function(y){function G(x,C){x=y.call(this,x,C)||this;x.creator=null;x.graphic=null;x.viewModel=null;x._addTargetToAnchors=h=>{Array.from(h.querySelectorAll("a")).forEach(g=>{A.shouldOpenInNewTab(g.href)&&!g.hasAttribute("target")&&g.setAttribute("target","_blank")})};return x}d._inheritsLoose(G,y);var E=G.prototype;E.renderLoading=function(){return n.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},n.tsx("div",{class:"esri-feature-content__loader"}))};
E.renderCreated=function(){var x;const C=null==(x=this.viewModel)?void 0:x.created;return C?C instanceof HTMLElement?n.tsx("div",{key:C,bind:C,afterCreate:this._attachToNode}):m.isWidget(C)?n.tsx("div",{key:C},!C.destroyed&&C.render()):n.tsx("div",{key:C,innerHTML:C,afterCreate:this._addTargetToAnchors}):null};E.render=function(){var x;const C=null==(x=this.viewModel)?void 0:x.state;return n.tsx("div",{class:"esri-feature-content"},"loading"===C?this.renderLoading():this.renderCreated())};E._attachToNode=
function(x){x.appendChild(this)};return G}(L);l.__decorate([b.aliasOf("viewModel.creator")],F.prototype,"creator",void 0);l.__decorate([b.aliasOf("viewModel.graphic")],F.prototype,"graphic",void 0);l.__decorate([I.property({type:H})],F.prototype,"viewModel",void 0);return F=l.__decorate([O.subclass("esri.widgets.Feature.FeatureContent")],F)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m){F=function(n){function y(E){var x=n.call(this,E)||this;x._loadingPromise=null;x.created=null;x.creator=null;x.destroyer=null;x.graphic=null;x.handles.add(J.watch(()=>x.creator,C=>{x._destroyContent();x._createContent(C)},J.initial));return x}d._inheritsLoose(y,n);var G=y.prototype;G.destroy=function(){this._destroyContent()};G._destroyContent=function(){const {created:E,graphic:x,destroyer:C}=this;E&&(m.graphicCallback(C,{graphic:x}).catch(()=>null),this._set("created",
null))};G._createContent=function(){var E=d._asyncToGenerator(function*(x){var {graphic:C}=this;this._loadingPromise=x=m.graphicCallback(x,{graphic:C}).catch(()=>null);this.notifyChange("state");C=yield x;x===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",C))});return function(x){return E.apply(this,arguments)}}();d._createClass(y,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return y}(f.HandleOwnerMixin(F));l.__decorate([I.property({readOnly:!0})],
F.prototype,"created",void 0);l.__decorate([I.property()],F.prototype,"creator",void 0);l.__decorate([I.property()],F.prototype,"destroyer",void 0);l.__decorate([I.property({type:b})],F.prototype,"graphic",void 0);l.__decorate([I.property({readOnly:!0})],F.prototype,"state",null);return F=l.__decorate([A.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],F)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){f=function(E){function x(h,g){h=E.call(this,h,g)||this;h.viewModel=new n;return h}d._inheritsLoose(x,E);var C=x.prototype;C.initialize=function(){this.own(b.watch(()=>{var h;return null==(h=this.viewModel)?void 0:h.contentElementViewModel},()=>this._setupExpressionWidget(),b.initial))};C.destroy=function(){this._destroyContentWidget()};C.renderLoading=function(){return G.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},G.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};C.render=function(){var h;const {state:g}=this.viewModel;return G.tsx("div",{class:"esri-feature-expression"},"loading"===g?this.renderLoading():"disabled"===g?null:null==(h=this._contentWidget)?void 0:h.render())};C._destroyContentWidget=function(){const {_contentWidget:h}=this;h&&(h.viewModel=null,h.destroy());this._contentWidget=null};C._setupExpressionWidget=function(){const {contentElementViewModel:h,
contentElement:g}=this.viewModel,r=null==g?void 0:g.type;this._destroyContentWidget();this._contentWidget=h?"fields"===r?new A({viewModel:h}):"media"===r?new m({viewModel:h}):"text"===r?new H({viewModel:h}):null:null;this.scheduleRender()};return x}(L);l.__decorate([F.property({type:n})],f.prototype,"viewModel",void 0);return f=l.__decorate([O.subclass("esri.widgets.Feature.FeatureExpression")],f)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E){f=function(x){function C(g,r){g=x.call(this,g,r)||this;g._featureElementInfo=null;g.attributes=null;g.description=null;g.expressionInfos=null;g.fieldInfos=null;g.title=null;g.viewModel=new A;g.messages=null;g.messagesURIUtils=null;return g}d._inheritsLoose(C,x);var h=C.prototype;h.initialize=function(){this._featureElementInfo=new m;this.own(b.watch(()=>{var g,r;return[null==(g=this.viewModel)?void 0:g.description,null==(r=this.viewModel)?void 0:r.title]},
()=>this._setupFeatureElementInfo(),b.initial))};h.destroy=function(){this._featureElementInfo.destroy()};h.renderFieldInfo=function(g,r){var {attributes:u}=this.viewModel;const p=g.fieldName,k=g.label||p;u=u?null==u[p]?"":u[p]:"";g=!(!g.format||!g.format.dateFormat);u="number"!==typeof u||g?n.autoLink(this.messagesURIUtils,u):this._forceLTR(u);g={["esri-feature-fields__field-data--date"]:g};return E.tsx("tr",{key:`fields-element-info-row-${p}-${r}`},E.tsx("th",{key:`fields-element-info-row-header-${p}-${r}`,
class:"esri-feature-fields__field-header",innerHTML:k}),E.tsx("td",{key:`fields-element-info-row-data-${p}-${r}`,class:this.classes("esri-feature-fields__field-data",g),innerHTML:u}))};h.renderFields=function(){const {formattedFieldInfos:g}=this.viewModel;return null!=g&&g.length?E.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},E.tsx("tbody",null,g.map((r,u)=>this.renderFieldInfo(r,u)))):null};h.render=function(){var g;return E.tsx("div",{class:"esri-feature-fields"},
null==(g=this._featureElementInfo)?void 0:g.render(),this.renderFields())};h._setupFeatureElementInfo=function(){const {description:g,title:r}=this;this._featureElementInfo.set({description:g,title:r})};h._forceLTR=function(g){return`&lrm;${g}`};return C}(H);l.__decorate([F.aliasOf("viewModel.attributes")],f.prototype,"attributes",void 0);l.__decorate([F.aliasOf("viewModel.description")],f.prototype,"description",void 0);l.__decorate([F.aliasOf("viewModel.expressionInfos")],f.prototype,"expressionInfos",
void 0);l.__decorate([F.aliasOf("viewModel.fieldInfos")],f.prototype,"fieldInfos",void 0);l.__decorate([F.aliasOf("viewModel.title")],f.prototype,"title",void 0);l.__decorate([O.property({type:A})],f.prototype,"viewModel",void 0);l.__decorate([O.property(),G.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);l.__decorate([O.property(),G.messageBundle("esri/widgets/support/t9n/uriUtils")],f.prototype,"messagesURIUtils",void 0);return f=l.__decorate([L.subclass("esri.widgets.Feature.FeatureFields")],
f)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),function(d,l,b,F,f,J,I,O,L,H,A){b=function(m){function n(y){y=
m.call(this,y)||this;y.attributes=null;y.expressionInfos=null;y.description=null;y.fieldInfos=null;y.title=null;return y}d._inheritsLoose(n,m);d._createClass(n,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:y,fieldInfos:G}=this,E=[];null==G?void 0:G.forEach(x=>{if(!x.hasOwnProperty("visible")||x.visible)x=x.clone(),x.label=A.getFieldInfoLabel(x,y),E.push(x)});return E}}]);return n}(b);l.__decorate([F.property()],b.prototype,"attributes",void 0);l.__decorate([F.property({type:[L]})],
b.prototype,"expressionInfos",void 0);l.__decorate([F.property()],b.prototype,"description",void 0);l.__decorate([F.property({type:[H]})],b.prototype,"fieldInfos",void 0);l.__decorate([F.property({readOnly:!0})],b.prototype,"formattedFieldInfos",null);l.__decorate([F.property()],b.prototype,"title",void 0);return b=l.__decorate([O.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],b)})},"esri/widgets/support/uriUtils":function(){define(["exports","../../core/string"],function(d,
l){function b(f){let J=null;F.some(I=>{I.pattern.test(f)&&(J=I);return!!J});return J}const F=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},
{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},
{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];d.autoLink=function(f,J){if("string"!==typeof J||!J)return J;const I=b(J);if(!I)return J;const O=J.match(I.pattern);f=l.replace(l.replace(I.label,
{messages:f,hierPart:O&&O[2]}),{appName:I.appName});return J.replace(I.pattern,`<a${I.target?` target="${I.target}"`:""} href="$1"${"_blank"===I.target?' rel\x3d"noreferrer"':""}>${f}</a>`)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g){J=function(r){function u(k,D){var N=r.call(this,k,D)||this;N._refreshTimer=null;N._refreshIntervalInfo=null;N._featureElementInfo=null;N.attributes=null;N.activeMediaInfoIndex=null;N.description=null;N.fieldInfoMap=null;N.layer=null;N.mediaInfos=null;N.popupTemplate=null;N.relatedInfos=null;N.title=null;N.viewModel=new n;N.messages=null;N._getChartDependencies=function(){var S=d._asyncToGenerator(function*(P){const v=yield E.loadChartsModule(),{destroyed:K,
viewModel:e}=d._assertThisInitialized(N);if(!K&&e&&P){var {activeMediaInfo:q}=e,w=yield N._getRendererColors(v);N._renderChart({chartDiv:P,mediaInfo:q,chartsModule:v,colorMap:w})}});return function(P){return S.apply(this,arguments)}}();return N}d._inheritsLoose(u,r);var p=u.prototype;p.initialize=function(){this._featureElementInfo=new y;this.own([F.watch(()=>{var k,D;return[null==(k=this.viewModel)?void 0:k.activeMediaInfo,null==(D=this.viewModel)?void 0:D.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),
F.initial),F.watch(()=>{var k,D;return[null==(k=this.viewModel)?void 0:k.description,null==(D=this.viewModel)?void 0:D.title]},()=>this._setupFeatureElementInfo(),F.initial)])};p.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};p.render=function(){var k;return h.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(k=this._featureElementInfo)?void 0:k.render(),this.renderMedia())};p.renderMedia=function(){const {formattedMediaInfoCount:k}=
this.viewModel;return k?h.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};p.renderImageMediaInfo=function(k){var {_refreshIntervalInfo:D}=this;const {activeMediaInfoIndex:N,formattedMediaInfoCount:S}=this.viewModel,{value:P,refreshInterval:v,altText:K,title:e,type:q}=k,{sourceURL:w,linkURL:R}=P;k=G.shouldOpenInNewTab(R)?"_blank":"_self";const Q="_blank"===k?"noreferrer":
"";D=v?D:null;D=h.tsx("img",{alt:K||e,key:`media-${q}-${N}-${S}-${D?D.timestamp:0}`,src:D?D.sourceURL:w});return(k=R?h.tsx("a",{title:e,href:R,rel:Q,target:k},D):null)?k:D};p.renderChartMediaInfo=function(k){const {activeMediaInfoIndex:D,formattedMediaInfoCount:N}=this.viewModel;return h.tsx("div",{key:`media-${k.type}-${D}-${N}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};p.renderMediaInfoType=function(){const {activeMediaInfo:k}=this.viewModel;return k?
"image"===k.type?this.renderImageMediaInfo(k):k.type.includes("chart")?this.renderChartMediaInfo(k):null:null};p.renderMediaInfo=function(){var {activeMediaInfo:k}=this.viewModel;if(!k)return null;const D=k.title?h.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:k.title}):null;k=k.caption?h.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:k.caption}):null;return h.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
h.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),D,k)};p.renderMediaPageButton=function(k){if(2>this.viewModel.formattedMediaInfoCount)return null;const D=(k="previous"===k)?this.messages.previous:this.messages.next,N=k?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),S=k?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),P=k?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return h.tsx("button",{type:"button",key:k?"media-previous":"media-next",title:D,"aria-label":D,tabIndex:0,class:N,bind:this,onclick:k?this._previous:this._next},h.tsx("span",
{"aria-hidden":"true",class:S}),h.tsx("span",{"aria-hidden":"true",class:P}))};p._setupFeatureElementInfo=function(){const {description:k,title:D}=this;this._featureElementInfo.set({description:k,title:D})};p._next=function(){this.viewModel.next()};p._previous=function(){this.viewModel.previous()};p._getRendererColors=function(){var k=d._asyncToGenerator(function*(D){var N;const {am4core:S}=D;D=null==(N=this.viewModel)?void 0:N.layer;const P=new Map;if(!D)return P;const v=yield A.getColorsFromRenderer(D.renderer);
v.delete(null);if(!Array.from(v.values()).every(K=>1===(null==K?void 0:K.length)))return P;P.set("default-line-value",S.color({r:50,g:50,b:50,a:1}));Array.from(v.keys()).forEach(K=>{K&&P.set(K,S.color(v.get(K)[0].toCss(!0)))});return P});return function(D){return k.apply(this,arguments)}}();p._handleMediaKeyup=function(k){const D=b.eventKey(k);"ArrowLeft"===D&&(k.stopPropagation(),this.viewModel.previous());"ArrowRight"===D&&(k.stopPropagation(),this.viewModel.next())};p._renderChart=function(k){const {abilities:D}=
this.viewModel,{chartsModule:N,chartDiv:S,mediaInfo:P,colorMap:v}=k,{value:K,type:e}=P,{am4core:q}=N,w=E.getColorSet(q);g.isDarkTheme()&&q.useTheme(N.am4themes_dark);const R=window.matchMedia("(prefers-reduced-motion: reduce)");D.chartAnimation&&!R.matches?q.useTheme(N.am4themes_animated):q.unuseTheme(N.am4themes_animated);q.useTheme(function(Q){Q instanceof q.ColorSet&&w&&(Q.list=w)});k="pie-chart"===e?this._createPieChart(k):this._createXYChart(k);S.setAttribute("aria-label",P.altText||P.title);
k.data=K.series.map(Q=>({["tooltip"]:Q.tooltip,["value"]:Q.value,["color"]:v.get(Q.fieldName)})).filter(Q=>"pie-chart"===e?0<Q.value:!0)};p._customizeChartTooltip=function(k,D){k.label.wrap=!0;k.label.maxWidth=200;k.autoTextColor=!1;k.getFillFromObject=!1;k.label.fill=D.color("#ffffff");k.background.fill=D.color({r:0,g:0,b:0,a:.7})};p._createPieChart=function(k){const {chartDiv:D,chartsModule:N}=k,{am4core:S,am4charts:P}=N;k=S.create(D,P.PieChart);k.rtl=x.isRTL(this.container);const v=k.series.push(new P.PieSeries);
v.labels.template.disabled=!0;v.ticks.template.disabled=!0;v.dataFields.value="value";v.dataFields.category="tooltip";this._customizeChartTooltip(v.tooltip,S);v.slices.template.tooltipText=k.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";v.slices.template.propertyFields.fill="color";v.slices.template.propertyFields.stroke="color";return k};p._getMinSeriesValue=function(k){let D=0;k.forEach(N=>D=Math.min(N.value,D));return D};p._createColumnChart=
function(k,D){const {chartsModule:N,mediaInfo:S}=D;({value:D}=S);const {am4core:P,am4charts:v}=N,K=k.xAxes.push(new v.CategoryAxis);K.dataFields.category="tooltip";K.renderer.labels.template.disabled=!0;this._customizeChartTooltip(K.tooltip,P);K.tooltip.events.on("sizechanged",()=>{K.tooltip.dy=-K.tooltip.contentHeight});var e=k.yAxes.push(new v.ValueAxis);const q=e.renderer.labels.template;e.renderer.minLabelPosition=.05;e.renderer.maxLabelPosition=.95;e.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(e.tooltip,
P);q.wrap=!0;e=k.series.push(new v.ColumnSeries);e.dataFields.valueY="value";e.dataFields.categoryX="tooltip";e.columns.template.propertyFields.fill="color";e.columns.template.propertyFields.stroke="color";k.cursor=new v.XYCursor;15<D.series.length&&(k.scrollbarX=new P.Scrollbar)};p._createBarChart=function(k,D){const {chartsModule:N,mediaInfo:S}=D;({value:D}=S);const {am4core:P,am4charts:v}=N,K=k.yAxes.push(new v.CategoryAxis);K.dataFields.category="tooltip";K.renderer.inversed=!0;K.renderer.labels.template.disabled=
!0;this._customizeChartTooltip(K.tooltip,P);K.tooltip.events.on("sizechanged",()=>{K.tooltip.dx=K.tooltip.contentWidth});var e=k.xAxes.push(new v.ValueAxis);const q=e.renderer.labels.template;e.renderer.minLabelPosition=.05;e.renderer.maxLabelPosition=.95;e.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(e.tooltip,P);q.wrap=!0;e=k.series.push(new v.ColumnSeries);e.dataFields.valueX="value";e.dataFields.categoryY="tooltip";e.columns.template.propertyFields.fill="color";e.columns.template.propertyFields.stroke=
"color";k.cursor=new v.XYCursor;15<D.series.length&&(k.scrollbarY=new P.Scrollbar)};p._createLineChart=function(k,D){const {chartsModule:N,mediaInfo:S,colorMap:P}=D;({value:D}=S);const {am4core:v,am4charts:K}=N,e=k.xAxes.push(new K.CategoryAxis);e.dataFields.category="tooltip";e.renderer.labels.template.disabled=!0;this._customizeChartTooltip(e.tooltip,v);e.tooltip.events.on("sizechanged",()=>{e.tooltip.dy=-e.tooltip.contentHeight});var q=k.yAxes.push(new K.ValueAxis),w=q.renderer.labels.template;
q.renderer.minLabelPosition=.05;q.renderer.maxLabelPosition=.95;q.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(q.tooltip,v);w.wrap=!0;q=k.series.push(new K.LineSeries);q.dataFields.categoryX="tooltip";q.dataFields.valueY="value";q.strokeWidth=1;if(w=P.get("default-line-value"))q.stroke=w;q=q.bullets.push(new K.CircleBullet);q.propertyFields.fill="color";q.propertyFields.stroke="color";k.cursor=new K.XYCursor;15<D.series.length&&(k.scrollbarX=new v.Scrollbar)};p._createXYChart=
function(k){const {chartDiv:D,chartsModule:N,mediaInfo:S}=k,{type:P}=S,{am4core:v,am4charts:K}=N,e=v.create(D,K.XYChart);e.rtl=x.isRTL(this.container);"column-chart"===P&&this._createColumnChart(e,k);"bar-chart"===P&&this._createBarChart(e,k);"line-chart"===P&&this._createLineChart(e,k);return e};p._clearMediaRefreshTimer=function(){const {_refreshTimer:k}=this;k&&(clearTimeout(k),this._refreshTimer=null)};p._updateMediaInfoTimestamp=function(k){const D=Date.now();this._refreshIntervalInfo={timestamp:D,
sourceURL:this._getImageSource(k,D)};this.scheduleRender()};p._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:k}=this.viewModel;k&&"image"===k.type&&k.refreshInterval&&this._setRefreshTimeout(k)};p._setRefreshTimeout=function(k){const {refreshInterval:D,value:N}=k;D&&(k=6E4*D,this._updateMediaInfoTimestamp(N.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(N.sourceURL)},k))};p._getImageSource=function(k,D){const N=k.includes("?")?
"\x26":"?",[S,P=""]=k.split("#");return`${S}${N}timestamp=${D}${P?"#":""}${P}`};return u}(m);l.__decorate([f.aliasOf("viewModel.attributes")],J.prototype,"attributes",void 0);l.__decorate([f.aliasOf("viewModel.activeMediaInfoIndex")],J.prototype,"activeMediaInfoIndex",void 0);l.__decorate([f.aliasOf("viewModel.description")],J.prototype,"description",void 0);l.__decorate([f.aliasOf("viewModel.fieldInfoMap")],J.prototype,"fieldInfoMap",void 0);l.__decorate([f.aliasOf("viewModel.layer")],J.prototype,
"layer",void 0);l.__decorate([f.aliasOf("viewModel.mediaInfos")],J.prototype,"mediaInfos",void 0);l.__decorate([f.aliasOf("viewModel.popupTemplate")],J.prototype,"popupTemplate",void 0);l.__decorate([f.aliasOf("viewModel.relatedInfos")],J.prototype,"relatedInfos",void 0);l.__decorate([f.aliasOf("viewModel.title")],J.prototype,"title",void 0);l.__decorate([L.property({type:n})],J.prototype,"viewModel",void 0);l.__decorate([L.property(),C.messageBundle("esri/widgets/Feature/t9n/Feature")],J.prototype,
"messages",void 0);return J=l.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia")],J)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(d,l,b,F,f,J,I,O,L,H,A){function m(r,u,p){f.getOrCreateMapValue(r,
u,()=>[]).push(...p)}function n(){n=l._asyncToGenerator(function*(r){const u=new Map;if("visualVariables"in r&&r.visualVariables){var p=r.visualVariables.filter(N=>"color"===N.type);for(const N of p){p=N.field||N.valueExpression;const S=(yield H.getRampStops(N)).map(P=>P.color);m(u,p,S)}}if("heatmap"===r.type){var k=A.getHeatmapRampStops(r).map(N=>N.color);m(u,r.field,k)}else if("pie-chart"===r.type){for(const N of r.attributes)m(u,N.field,[N.color]);m(u,null,[null==r?void 0:null==(k=r.othersCategory)?
void 0:k.color,L.getColorFromSymbol(r.backgroundFillSymbol,null)])}else if("dot-density"===r.type){for(const N of r.attributes)m(u,N.field,[N.color]);m(u,null,[r.backgroundColor])}else if("unique-value"===r.type){var D;if("predominance"===(null==(D=r.authoringInfo)?void 0:D.type))for(const N of r.uniqueValueInfos)m(u,N.value.toString(),[L.getColorFromSymbol(N.symbol,null)]);else{k=r.uniqueValueInfos.map(K=>L.getColorFromSymbol(K.symbol,null));const {field:N,field2:S,field3:P,valueExpression:v}=r;
(N||v)&&m(u,N||v,k);S&&m(u,S,k);P&&m(u,P,k)}}else"class-breaks"===r.type?(k=r.classBreakInfos.map(N=>L.getColorFromSymbol(N.symbol,null)),m(u,r.field||r.valueExpression,k)):"simple"===r.type&&m(u,null,[L.getColorFromSymbol(r.symbol,null)]);"defaultSymbol"in r&&r.defaultSymbol&&m(u,null,[L.getColorFromSymbol(r.defaultSymbol,null)]);u.forEach((N,S)=>{N=b.unique(N.filter(Boolean),(P,v)=>JSON.stringify(P)===JSON.stringify(v));u.set(S,N)});return u});return n.apply(this,arguments)}function y(r,u,p){let k=
"";0===u?k=C.lt+" ":u===p&&(k=C.gt+" ");return k+r}function G(r){let u=r.minValue,p=r.maxValue;const k=r.isFirstBreak?"":C.gt+" ";r="percent-of-total"===r.normalizationType?C.pct:"";u=null==u?"":I.format(u);p=null==p?"":I.format(p);return k+u+r+" "+C.ld+" "+p+r}function E(r,u){return"normalizationField"in r&&r.normalizationField?{type:"normalized-field",field:r.field,normalizationField:r.normalizationField}:"field"in r&&r.field?{type:"field",field:r.field}:"valueExpression"in r&&r.valueExpression?
{type:"expression",expression:r.valueExpression,title:r.valueExpressionTitle,returnType:u}:null}const x=F.getLogger("esri.renderers.support.utils"),C={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},h={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},g={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};F=J.convertDateFormatToIntlOptions("short-date");d.calculateDateFormatInterval=function(r){r=r.map(N=>new Date(N));const u=r.length;let p=Infinity,k=null;for(let N=0;N<u-1;N++){const S=r[N];let P=Infinity,v=null;for(let K=N+1;K<u;K++){var D=r[K];D=S.getFullYear()!==D.getFullYear()&&"year"||S.getMonth()!==D.getMonth()&&"month"||S.getDate()!==D.getDate()&&"day"||S.getHours()!==D.getHours()&&"hour"||S.getMinutes()!==D.getMinutes()&&"minute"||S.getSeconds()!==D.getSeconds()&&"second"||"millisecond";
const e=h[D];e<P&&(P=e,v=D)}P<p&&(p=P,k=v)}return k};d.createClassBreakLabel=G;d.createColorStops=function(r){const {values:u,colors:p,labelIndexes:k,isDate:D,dateFormatOptions:N}=r;return u.map((S,P)=>{let v=null;if(!k||k.includes(P)){let K;(K=D?J.formatDate(S,N):I.format(S))&&(v=y(K,P,u.length-1))}return new O({value:S,color:p[P],label:v})})};d.createUniqueValueLabel=function(r){const {value:u,domain:p,fieldInfo:k,dateFormatInterval:D}=r;r=String(u);const N=p&&"codedValues"in p&&p.codedValues?p.getName(u):
null;N?r=N:"number"===typeof u&&(r=k&&"date"===k.type?J.formatDate(u,D&&J.convertDateFormatToIntlOptions(g[D])):I.format(u));return r};d.getAttribute=E;d.getAttributes=function(r,u){const p=[];if("class-breaks"===r.type||"heatmap"===r.type)p.push(E(r,"number"));else if("unique-value"===r.type){var k=r.authoringInfo;if(k&&"relationship"===k.type){if(k.field1&&k.field2){var D=k.field2.field;const N=k.field2.normalizationField;p.push(E({field:k.field1.field,normalizationField:k.field1.normalizationField}));
p.push(E({field:D,normalizationField:N}))}}else D=r.uniqueValueInfos[0],k=null,D&&D.value&&(D=typeof r.uniqueValueInfos[0].value,"string"===D||"number"===D)&&(k=D),p.push(E(r,k)),[r.field2,r.field3].forEach(N=>N&&p.push({type:"field",field:N}))}else"attributes"in r&&r.attributes.forEach(N=>p.push(E(N,"number")));(r=u?u(r):"visualVariables"in r?r.visualVariables:null)&&r.forEach(N=>p.push(E(N,"number")));return b.unique(p.filter(Boolean),(N,S)=>"field"===N.type&&"field"===S.type?N.field===S.field:
"normalized-field"===N.type&&"normalized-field"===S.type?N.field===S.field&&N.normalizationField===S.normalizationField:"expression"===N.type&&"expression"===S.type?N.expression===S.expression:!1)};d.getColorsFromRenderer=function(r){return n.apply(this,arguments)};d.setLabelsForClassBreaks=function(r){const u=r.classBreakInfos,p=r.normalizationType;let k=[];if(u&&u.length)if("standard-deviation"===r.classificationMethod)x.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(r.round){k.push(u[0].minValue);for(const D of u)k.push(D.maxValue);k=I.round(k);u.forEach((D,N)=>{D.label=G({minValue:0===N?k[0]:k[N],maxValue:k[N+1],isFirstBreak:0===N,normalizationType:p})})}else u.forEach((D,N)=>{D.label=G({minValue:D.minValue,maxValue:D.maxValue,isFirstBreak:0===N,normalizationType:p})})};d.timelineDateFormatOptions=F;d.updateClassBreak=function(r){if("standard-deviation"===r.classificationMethod)x.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var u=r.classBreaks,p=r.change,k=p.index;p=p.value;var D=u.length,N=-1,S=-1;0===k?N=k:k===D?S=k-1:(S=k-1,N=k);r=r.normalizationType;k=null;-1<N&&N<D&&(k=u[N],k.minValue=p,k.label=G({minValue:k.minValue,maxValue:k.maxValue,isFirstBreak:0===N,normalizationType:r}));-1<S&&S<D&&(k=u[S],k.maxValue=p,k.label=G({minValue:k.minValue,maxValue:k.maxValue,isFirstBreak:0===S,normalizationType:r}))}};d.updateColorStops=function(r){const {stops:u,changes:p,isDate:k,dateFormatOptions:D}=r,N=u.map(P=>P.value);
r=[];for(const P of p)r.push(P.index),N[P.index]=P.value;const S=I.round(N,{indexes:r});u.forEach((P,v)=>{P.value=N[v];if(null!=P.label){let K,e=null;(K=k?J.formatDate(S[v],D):I.format(S[v]))&&(e=y(K,v,u.length-1));P.label=e}})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(d,l,b){function F(A,m){return A-m}function f(A,m){let n;n=Number(A.toFixed(m));
n<A?A=n+1/10**m:(A=n,n-=1/10**m);n=Number(n.toFixed(m));A=Number(A.toFixed(m));return[n,A]}function J(A,m,n,y,G){A=O(A,m,n,y);m=null==A.next||A.next<=G;return(null==A.previous||A.previous<=G)&&m||A.previous+A.next<=2*G}function I(A){A=String(A);var m=A.match(L);if(m&&m[1])return{integer:m[1].split("").length,fractional:m[3]?m[3].split("").length:0};if(A.toLowerCase().includes("e")&&(m=A.split("e"),A=m[0],m=m[1],A&&m)){A=Number(A);m=Number(m);const n=0<m;n||(m=Math.abs(m));A=I(A);n?(A.integer+=m,A.fractional=
m>A.fractional?0:A.fractional-m):(A.fractional+=m,A.integer=m>A.integer?1:A.integer-m);return A}return{integer:0,fractional:0}}function O(A,m,n,y){const G={previous:null,next:null};if(null!=n){const E=A-n;G.previous=Math.floor(Math.abs(100*(m-n-E)/E))}null!=y&&(A=y-A,G.next=Math.floor(Math.abs(100*(y-m-A)/A)));return G}const L=/^-?(\d+)(\.(\d+))?$/i,H={maximumFractionDigits:20};d.format=function(A){return b.formatNumber(A,H)};d.numDigits=I;d.percentChange=O;d.round=function(A,m={}){A=A.slice(0);const {tolerance:n=
2,strictBounds:y=!1,indexes:G=A.map((x,C)=>C)}=m;G.sort(F);for(m=0;m<G.length;m++){const x=G[m],C=A[x],h=0===x?null:A[x-1],g=x===A.length-1?null:A[x+1],r=I(C).fractional;if(r){let u=0,p=!1;for(var E=void 0;u<=r&&!p;)E=f(C,u),E=y&&0===m?E[1]:E[0],p=J(C,E,h,g,n),u++;p&&(A[x]=E)}}return A};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../Color","./utils"],function(d,l,b,F,f){function J(n,y){const G=[],E=n.length-1;5===n.length?G.push(0,2,4):G.push(0,E);return n.map((x,C)=>G.includes(C)?f.createStopLabel(x,C,E,y):null)}function I(){I=b._asyncToGenerator(function*(n,y,G){let E=!1,x=[],C=[];if(n.stops){var h=n.stops;x=h.map(r=>r.value);(E=h.some(r=>!!r.label))&&(C=h.map(r=>r.label))}h=x[x.length-1];if(null==x[0]&&null==h)return null;const g=E?null:J(x,G);return(yield Promise.all(x.map(function(){var r=b._asyncToGenerator(function*(u,
p){const k="opacity"===n.type?yield O(u,n,y):(yield new Promise((D,N)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],D,N))).getColor(n,u);return{value:u,color:k,label:E?C[p]:g[p]}});return function(u,p){return r.apply(this,arguments)}}()))).reverse()});return I.apply(this,arguments)}function O(n,y){return L.apply(this,arguments)}function L(){L=b._asyncToGenerator(function*(n,y,G=m){G=new F(G);n=(yield new Promise((E,x)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],
E,x))).getOpacity(y,n);null!=n&&(G.a=n);return G});return L.apply(this,arguments)}function H(n,y){const {startIndex:G,endIndex:E,weight:x}=A(n,y);if(G===E)return y[G].color;n=F.blendColors(y[G].color,y[E].color,x);return new F(n)}function A(n,y){let G=0,E=y.length-1;y.some((x,C)=>{if(n<x.value)return E=C,!0;G=C;return!1});return{startIndex:G,endIndex:E,weight:(n-y[G].value)/(y[E].value-y[G].value)}}const m=new F([64,64,64]);l.getColorFromPointCloudStops=H;l.getRampStops=function(n,y,G){return I.apply(this,
arguments)};l.getRampStopsForPointCloud=function(n){let y=!1,G=[],E=[];G=n.map(h=>h.value);(y=n.some(h=>!!h.label))&&(E=n.map(h=>h.label));const x=G[G.length-1];if(null==G[0]&&null==x)return null;const C=y?null:J(G,!1);return G.map((h,g)=>{const r=H(h,n);return{value:h,color:r,label:y?E[g]:C[g]}}).reverse()};l.getStrectchRampStops=function(n,y){let G=[];if(n&&"multipart"===n.type)n.colorRamps.reverse().forEach((E,x)=>{0===x?G.push({value:y.max,color:new F(E.toColor),label:"high"}):G.push({value:null,
color:new F(E.toColor),label:""});x===n.colorRamps.length-1?G.push({value:y.min,color:new F(E.fromColor),label:"low"}):G.push({value:null,color:new F(E.fromColor),label:""})});else{let E,x;n&&"algorithmic"===n.type?(E=n.fromColor,x=n.toColor):(E=[0,0,0,1],x=[255,255,255,1]);G=[{value:y.max,color:new F(x),label:"high"},{value:y.min,color:new F(E),label:"low"}]}return G};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(d,l,b,F,f,J,I){function O(m){return L.apply(this,arguments)}function L(){L=b._asyncToGenerator(function*(m){if(!("visualVariables"in m&&m.visualVariables))return null;m=m.visualVariables.find(G=>"color"===G.type);if(!m)return null;var n=null,y=null;if(m.stops){if(1===m.stops.length)return m.stops[0].color;n=m.stops[0].value;y=m.stops[m.stops.length-1].value}n+=(y-n)/2;({getColor:y}=yield new Promise((G,E)=>d(["../../../renderers/visualVariables/support/visualVariableUtils"],G,E)));return y(m,
n)});return L.apply(this,arguments)}function H(){H=b._asyncToGenerator(function*(m,n){const y=m.trailCap,G=m.trailWidth||1;m=n||(yield O(m))||m.color;return new I({cap:y,color:m,width:G})});return H.apply(this,arguments)}const A=f.convertDateFormatToIntlOptions("short-date");l.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];l.SPECIAL_CHARS_GREATER_THAN="\x3e";l.SPECIAL_CHARS_LESS_THAN="\x3c";l.createStopLabel=function(m,n,y,G){let E="";0===n?E="\x3c ":n===y&&(E="\x3e ");n=null;n=G?f.formatDate(m,A):J.format(m);return E+n};l.getMedianColor=O;l.getSymbolForFlowRenderer=function(m,n){return H.apply(this,arguments)};Object.defineProperties(l,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(d,l){d.getHeatmapRampStops=function(b){if(!b.colorStops)return[];const F=[...b.colorStops].filter(J=>{var I;return 0<(null==(I=J.color)?void 0:I.a)});let f=F.length-1;if(F&&F[0]){const J=F[f];J&&1!==J.ratio&&(F.push(new l({ratio:1,color:J.color})),f++)}return F.map((J,I)=>{let O="";if(0===I){var L;O=(null==
(L=b.legendOptions)?void 0:L.minLabel)||"low"}else if(I===f){var H;O=(null==(H=b.legendOptions)?void 0:H.maxLabel)||"high"}return{color:J.color,label:O,ratio:J.ratio}}).reverse()};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m){const n={chartAnimation:!0};b=function(y){function G(x){x=y.call(this,x)||this;x.abilities={...n};x.activeMediaInfoIndex=0;x.attributes=null;x.description=null;x.fieldInfoMap=null;x.formattedAttributes=null;x.expressionAttributes=null;x.layer=null;x.mediaInfos=null;x.popupTemplate=null;x.relatedInfos=null;x.title=null;return x}d._inheritsLoose(G,y);var E=G.prototype;E.castAbilities=function(x){return{...n,...x}};E.setActiveMedia=function(x){this._setContentElementMedia(x)};
E.next=function(){this._pageContentElementMedia(1)};E.previous=function(){this._pageContentElementMedia(-1)};E._setContentElementMedia=function(x){const {formattedMediaInfoCount:C}=this;this.activeMediaInfoIndex=(x+C)%C};E._pageContentElementMedia=function(x){const {activeMediaInfoIndex:C}=this;this._setContentElementMedia(C+x)};E._formatMediaInfos=function(){const {attributes:x,mediaInfos:C,formattedAttributes:h,expressionAttributes:g,fieldInfoMap:r,layer:u}=this;return null==C?void 0:C.map(p=>{p=
null==p?void 0:p.clone();if(!p)return null;p.title=A.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:r,globalAttributes:h,expressionAttributes:g,layer:u,text:p.title});p.caption=A.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:r,globalAttributes:h,expressionAttributes:g,layer:u,text:p.caption});p.altText=A.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:r,globalAttributes:h,expressionAttributes:g,layer:u,text:p.altText});if("image"===p.type){var {value:k}=
p;this._setImageValue({value:k,formattedAttributes:h,layer:u});return p.value.sourceURL?p:void 0}return"pie-chart"===p.type||"line-chart"===p.type||"column-chart"===p.type||"bar-chart"===p.type?({value:k}=p,this._setChartValue({value:k,chartType:p.type,attributes:x,formattedAttributes:h,layer:u}),p):null}).filter(Boolean)};E._setImageValue=function(x){const {fieldInfoMap:C}=this,{value:h,formattedAttributes:g,layer:r}=x,{linkURL:u,sourceURL:p}=h;p&&(x=A.fixTokens(p,r),h.sourceURL=A.substituteAttributes({formattedAttributes:g,
template:x,fieldInfoMap:C}));u&&(x=A.fixTokens(u,r),h.linkURL=A.substituteAttributes({formattedAttributes:g,template:x,fieldInfoMap:C}))};E._setChartValue=function(x){const {value:C,attributes:h,formattedAttributes:g,chartType:r,layer:u}=x,{popupTemplate:p,relatedInfos:k}=this,{fields:D,normalizeField:N}=C;C.fields=A.getFixedFieldNames(D,u);N&&(C.normalizeField=A.getFixedFieldName(N,u));if(D.some(P=>!!(null!=g[P]||A.isRelatedField(P)&&k.size))){var S=null==p?void 0:p.fieldInfos;D.forEach(P=>{A.isRelatedField(P)?
C.series=[...C.series,...this._getRelatedChartInfos({fieldInfos:S,fieldName:P,formattedAttributes:g,chartType:r,value:C})]:(P=this._getChartOption({value:C,attributes:h,chartType:r,formattedAttributes:g,fieldName:P,fieldInfos:S}),C.series.push(P))})}};E._getRelatedChartInfos=function(x){var C;const {fieldInfos:h,fieldName:g,formattedAttributes:r,chartType:u,value:p}=x,k=[];x=m.getRelatedFieldInfo(g);const {layerId:D,fieldName:N}=x;x=null==(C=this.relatedInfos)?void 0:C.get(D.toString());if(!x)return k;
const {relatedFeatures:S,relation:P}=x;if(!P||!S)return k;({cardinality:C}=P);S.forEach(v=>{const {attributes:K}=v;K&&Object.keys(K).forEach(e=>{e===N&&k.push(this._getChartOption({value:p,attributes:K,formattedAttributes:r,fieldName:g,chartType:u,relatedFieldName:e,fieldInfos:h}))})});return"one-to-many"===C||"many-to-many"===C?k:[k[0]]};E._getTooltip=function({label:x,value:C,chartType:h}){return"pie-chart"===h?`${x}`:`${x}: ${C}`};E._getChartOption=function(x){const {value:C,attributes:h,formattedAttributes:g,
fieldName:r,relatedFieldName:u,fieldInfos:p,chartType:k}=x,{layer:D,fieldInfoMap:N}=this,{normalizeField:S,tooltipField:P}=C;x=S?A.isRelatedField(S)?h[m.getRelatedFieldInfo(S).fieldName]:h[S]:null;var v=u&&void 0!==h[u]?h[u]:void 0!==h[r]?h[r]:g[r];x=new H({fieldName:r,value:void 0===v?null:v&&x?v/x:v});if(A.isRelatedField(r)){var K,e,q,w,R;v=N.get(r.toLowerCase());const c=N.get(P.toLowerCase());var Q=null!=(K=null==v?void 0:v.fieldName)?K:r;K=null!=(e=null==c?void 0:c.fieldName)?e:P;e=null!=(q=null!=
(w=null!=(R=g[K])?R:null==v?void 0:v.label)?w:null==v?void 0:v.fieldName)?q:u;x.tooltip=this._getTooltip({label:e,value:g[Q],chartType:k});return x}w=A.getFieldInfo(p,r);q=A.getFixedFieldName(r,D);w=P&&void 0!==g[P]?g[P]:A.getFieldInfoLabel(w||new L({fieldName:q}),null==(Q=this.popupTemplate)?void 0:Q.expressionInfos);x.tooltip=this._getTooltip({label:w,value:g[q],chartType:k});return x};d._createClass(G,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||
null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return G}(b);l.__decorate([F.property()],b.prototype,"abilities",void 0);l.__decorate([I.cast("abilities")],b.prototype,"castAbilities",null);l.__decorate([F.property()],b.prototype,"activeMediaInfoIndex",void 0);l.__decorate([F.property({readOnly:!0})],b.prototype,"activeMediaInfo",null);l.__decorate([F.property()],b.prototype,
"attributes",void 0);l.__decorate([F.property()],b.prototype,"description",void 0);l.__decorate([F.property()],b.prototype,"fieldInfoMap",void 0);l.__decorate([F.property()],b.prototype,"formattedAttributes",void 0);l.__decorate([F.property()],b.prototype,"expressionAttributes",void 0);l.__decorate([F.property({readOnly:!0})],b.prototype,"formattedMediaInfos",null);l.__decorate([F.property()],b.prototype,"layer",void 0);l.__decorate([F.property({readOnly:!0})],b.prototype,"formattedMediaInfoCount",
null);l.__decorate([F.property()],b.prototype,"mediaInfos",void 0);l.__decorate([F.property()],b.prototype,"popupTemplate",void 0);l.__decorate([F.property()],b.prototype,"relatedInfos",void 0);l.__decorate([F.property()],b.prototype,"title",void 0);return b=l.__decorate([O.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],b)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../kernel ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S,P,v,K,e,q,w){function R(ba,ra){if(!ra.relationships)return null;let ua=null;({relationships:ra}=ra);ra.some(Ba=>Ba.id===parseInt(ba,10)?(ua=Ba,!0):!1);return ua}function Q({originRelationship:ba,relationships:ra,layerId:ua}){let Ba;ra&&ra.some(ka=>{`${ka.relatedTableId}`===ua&&ka.id===ba.id&&(Ba=ka);return!!Ba});return Ba}function c(ba,ra){ra=ra.toLowerCase();for(const ua in ba)if(ua.toLowerCase()===ra)return ba[ua];return null}function z(ba,
ra,ua,Ba){const ka=new K;ka.outFields=["*"];ka.relationshipId="number"===typeof ra.id?ra.id:parseInt(ra.id,10);ka.objectIds=[ba.attributes[ua.objectIdField]];return ua.queryRelatedFeatures(ka,Ba)}function B(ba,ra,ua){let Ba=0;const ka=[];for(;Ba<ra.length;)ka.push(`${ba} IN (${ra.slice(Ba,ua+Ba)})`),Ba+=ua;return ka.join(" OR ")}function U(ba,ra,ua,Ba){return Y.apply(this,arguments)}function Y(){Y=l._asyncToGenerator(function*(ba,ra,ua,Ba){var ka=ua.layerId.toString();const {layerInfo:ta,relation:ma,
relatedFields:la,outStatistics:pa,url:sa,sourceSpatialReference:da}=ra;ka=Q({originRelationship:ma,relationships:ta.relationships,layerId:ka});if(ka.relationshipTableId&&ka.keyFieldInRelationshipTable){ua=(yield z(ba,ka,ua,Ba))[ba.attributes[ua.objectIdField]];if(!ua)return null;const ea=ua.features.map(ha=>ha.attributes[ta.objectIdField]);if(0<(null==pa?void 0:pa.length)&&ta.supportsStatistics)return ra=new D,ra.where=B(ta.objectIdField,ea,1E3),ra.outFields=la,ra.outStatistics=pa,ra.sourceSpatialReference=
da,ra={features:Promise.resolve(ua),statsFeatures:H.executeQueryJSON(sa,ra)},J.eachAlways(ra)}return(ka=null==ka?void 0:ka.keyField)?(ua=I.isNumericField(aa(ta.fields,ka)),ba=c(ba.attributes,ma.keyField),ka=ua?`${ka}=${ba}`:`${ka}='${ba}'`,ba=H.executeQueryJSON(sa,new D({where:ka,outFields:ra.relatedFields,sourceSpatialReference:da}),Ba),ra=ra.outStatistics&&0<ra.outStatistics.length&&ta.supportsStatistics?H.executeQueryJSON(sa,new D({where:ka,outFields:ra.relatedFields,outStatistics:ra.outStatistics,
sourceSpatialReference:da}),Ba):null,Ba={features:ba},ra&&(Ba.statsFeatures=ra),J.eachAlways(Ba)):null});return Y.apply(this,arguments)}function aa(ba,ra){if(null!=ba){ra=ra.toLowerCase();for(const ua of ba)if(ua&&ua.name.toLowerCase()===ra)return ua}return null}const ca=f.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),na=new Map;d.createRelatedInfo=function(ba,ra){if(ba=R(ba,ra))return{url:`${ra.url}/${ba.relatedTableId}`,sourceSpatialReference:ra.spatialReference,relation:ba,relatedFields:[],
outStatistics:[]}};d.getDestinationRelation=Q;d.getRelatedFieldInfo=function(ba){if(!w.isRelatedField(ba))return null;const [ra,ua]=ba.split("/").slice(1);return{layerId:ra,fieldName:ua}};d.queryLayerInfos=function({relatedInfos:ba,layer:ra},ua){const Ba={};ba.forEach((ka,ta)=>{({relation:ka}=ka);if(!ka)throw ta=new F("relation-required","A relation is required on a layer to retrieve related records."),ca.error(ta),ta;({relatedTableId:ka}=ka);if("number"!==typeof ka)throw ta=new F("A related table ID is required on a layer to retrieve related records."),
ca.error(ta),ta;ka=`${ra.url}/${ka}`;const ma=na.get(ka),la=ma?ma:b(ka,{query:{f:"json"},signal:ua&&ua.signal});ma||na.set(ka,la);Ba[ta]=la});return J.eachAlways(Ba)};d.queryRelatedFeatures=function({graphic:ba,relatedInfos:ra,layer:ua},Ba){const ka={};ra.forEach((ta,ma)=>{ta.layerInfo&&(ka[ma]=U(ba,ta,ua,Ba))});return J.eachAlways(ka)};d.setRelatedFeatures=function(ba,ra){if(ra&&ba){var {features:ua,statsFeatures:Ba}=ba;ba=ua&&ua.value;ra.relatedFeatures=ba?ba.features:[];ba=Ba&&Ba.value;ra.relatedStatsFeatures=
ba?ba.features:[]}};d.updateRelatedInfo=function({relatedInfo:ba,fieldName:ra,fieldInfo:ua}){ba.relatedFields.push(ra);ua.statisticType&&(ra=new q({statisticType:ua.statisticType,onStatisticField:ra,outStatisticFieldName:ra}),ba.outStatistics.push(ra))};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(d,l,b,F,f,J){function I(n){if(!n)return"en-us";if(H.has(n.toLowerCase()))return n.toLowerCase();{n=n.split("-")[0].toLowerCase();let G=null;for(y of H.keys())if(y.startsWith(n)){G=y;break}var y=G}return y||"en-us"}function O(){O=b._asyncToGenerator(function*(n=J.getLocale()){n=I(n);if(A&&n===m)return A;A=(new Promise((y,G)=>d(["../../chunks/index"],y,G))).then(y=>y.index);m=n;try{const [y,G]=yield Promise.all([A,H.get(m)()]);m===n&&(y.am4core.options.defaultLocale=G.default);y.am4core.options.suppressWarnings=
!0;y.am4core.options.autoDispose=!0}catch{return m=A=null}return A});return O.apply(this,arguments)}F="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var L=[{name:"default",colors:[].concat(F.slice(30,39),F.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const H=new Map([["ar",()=>(new Promise((n,y)=>d(["../../chunks/ar"],n,y))).then(n=>n.ar)],["bg-bg",()=>(new Promise((n,
y)=>d(["../../chunks/bg_BG"],n,y))).then(n=>n.bg_BG)],["bs-ba",()=>(new Promise((n,y)=>d(["../../chunks/bs_BA"],n,y))).then(n=>n.bs_BA)],["ca-es",()=>(new Promise((n,y)=>d(["../../chunks/ca_ES"],n,y))).then(n=>n.ca_ES)],["cs-cz",()=>(new Promise((n,y)=>d(["../../chunks/cs_CZ"],n,y))).then(n=>n.cs_CZ)],["da-dk",()=>(new Promise((n,y)=>d(["../../chunks/da_DK"],n,y))).then(n=>n.da_DK)],["de-de",()=>(new Promise((n,y)=>d(["../../chunks/de_DE"],n,y))).then(n=>n.de_DE)],["de-ch",()=>(new Promise((n,y)=>
d(["../../chunks/de_CH"],n,y))).then(n=>n.de_CH)],["el-gr",()=>(new Promise((n,y)=>d(["../../chunks/el_GR"],n,y))).then(n=>n.el_GR)],["en-us",()=>(new Promise((n,y)=>d(["../../chunks/en_US"],n,y))).then(n=>n.en_US)],["en-ca",()=>(new Promise((n,y)=>d(["../../chunks/en_CA"],n,y))).then(n=>n.en_CA)],["es-es",()=>(new Promise((n,y)=>d(["../../chunks/es_ES"],n,y))).then(n=>n.es_ES)],["et-ee",()=>(new Promise((n,y)=>d(["../../chunks/et_EE"],n,y))).then(n=>n.et_EE)],["fi-fi",()=>(new Promise((n,y)=>d(["../../chunks/fi_FI"],
n,y))).then(n=>n.fi_FI)],["fr-fr",()=>(new Promise((n,y)=>d(["../../chunks/fr_FR"],n,y))).then(n=>n.fr_FR)],["he-il",()=>(new Promise((n,y)=>d(["../../chunks/he_IL"],n,y))).then(n=>n.he_IL)],["hr-hr",()=>(new Promise((n,y)=>d(["../../chunks/hr_HR"],n,y))).then(n=>n.hr_HR)],["hu-hu",()=>(new Promise((n,y)=>d(["../../chunks/hu_HU"],n,y))).then(n=>n.hu_HU)],["id-id",()=>(new Promise((n,y)=>d(["../../chunks/id_ID"],n,y))).then(n=>n.id_ID)],["it-it",()=>(new Promise((n,y)=>d(["../../chunks/it_IT"],n,y))).then(n=>
n.it_IT)],["ja-jp",()=>(new Promise((n,y)=>d(["../../chunks/ja_JP"],n,y))).then(n=>n.ja_JP)],["ko-kr",()=>(new Promise((n,y)=>d(["../../chunks/ko_KR"],n,y))).then(n=>n.ko_KR)],["lt-lt",()=>(new Promise((n,y)=>d(["../../chunks/lt_LT"],n,y))).then(n=>n.lt_LT)],["lv-lv",()=>(new Promise((n,y)=>d(["../../chunks/lv_LV"],n,y))).then(n=>n.lv_LV)],["nb-no",()=>(new Promise((n,y)=>d(["../../chunks/nb_NO"],n,y))).then(n=>n.nb_NO)],["nl-nl",()=>(new Promise((n,y)=>d(["../../chunks/nl_NL"],n,y))).then(n=>n.nl_NL)],
["pl-pl",()=>(new Promise((n,y)=>d(["../../chunks/pl_PL"],n,y))).then(n=>n.pl_PL)],["pt-br",()=>(new Promise((n,y)=>d(["../../chunks/pt_BR"],n,y))).then(n=>n.pt_BR)],["pt-pt",()=>(new Promise((n,y)=>d(["../../chunks/pt_PT"],n,y))).then(n=>n.pt_PT)],["ro-ro",()=>(new Promise((n,y)=>d(["../../chunks/ro_RO"],n,y))).then(n=>n.ro_RO)],["ru-ru",()=>(new Promise((n,y)=>d(["../../chunks/ru_RU"],n,y))).then(n=>n.ru_RU)],["sk-sk",()=>(new Promise((n,y)=>d(["../../chunks/sk_SK"],n,y))).then(n=>n.sk_SK)],["sl-sl",
()=>(new Promise((n,y)=>d(["../../chunks/sl_SL"],n,y))).then(n=>n.sl_SL)],["sr-rs",()=>(new Promise((n,y)=>d(["../../chunks/sr_RS"],n,y))).then(n=>n.sr_RS)],["sv-se",()=>(new Promise((n,y)=>d(["../../chunks/sv_SE"],n,y))).then(n=>n.sv_SE)],["th-th",()=>(new Promise((n,y)=>d(["../../chunks/th_TH"],n,y))).then(n=>n.th_TH)],["tr-tr",()=>(new Promise((n,y)=>d(["../../chunks/tr_TR"],n,y))).then(n=>n.tr_TR)],["uk-ua",()=>(new Promise((n,y)=>d(["../../chunks/uk_UA"],n,y))).then(n=>n.uk_UA)],["vi-vn",()=>
(new Promise((n,y)=>d(["../../chunks/vi_VN"],n,y))).then(n=>n.vi_VN)],["zh-cn",()=>(new Promise((n,y)=>d(["../../chunks/zh_Hans"],n,y))).then(n=>n.zh_Hans)],["zh-hk",()=>(new Promise((n,y)=>d(["../../chunks/zh_Hant"],n,y))).then(n=>n.zh_Hant)],["zh-tw",()=>(new Promise((n,y)=>d(["../../chunks/zh_Hant"],n,y))).then(n=>n.zh_Hant)]]);let A,m;l.getChartLocale=I;l.getColorSet=function(n,y="default"){const G=L.find(E=>E.name===y);return G?G.colors.map(E=>n.color(E)):null};l.loadChartsModule=function(){return O.apply(this,
arguments)};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D){f=function(N){function S(P){var v=N.call(this,P)||this;v._abortController=null;v.expressionInfo=null;v.graphic=null;v.contentElement=null;v.contentElementViewModel=null;v.interceptor=null;v.view=null;v._cancelQuery=()=>{const {_abortController:K}=d._assertThisInitialized(v);K&&K.abort();v._abortController=null};v._createVM=()=>{var K,e;const q=null==(K=v.contentElement)?void 0:K.type;null==(e=v.contentElementViewModel)?void 0:e.destroy();
K="fields"===q?new p:"media"===q?new k:"text"===q?new u:null;v._set("contentElementViewModel",K)};v._compile=d._asyncToGenerator(function*(){v._cancelQuery();const K=new AbortController;v._abortController=K;yield v._compileExpression();v._abortController===K&&(v._abortController=null)});v._compileThrottled=O.throttle(v._compile,1,d._assertThisInitialized(v));v._compileExpression=d._asyncToGenerator(function*(){const {expressionInfo:K,graphic:e,interceptor:q,spatialReference:w,map:R,view:Q,_abortController:c}=
d._assertThisInitialized(v);if(K&&e&&w&&R){var z=yield D.loadArcadeUtils();if(c===v._abortController)if((z=yield D.createCompiledExpression({arcadeUtils:z,expressionInfo:K,graphic:e,interceptor:q,map:R,spatialReference:w,view:Q}))&&"esri.arcade.Dictionary"===z.declaredClass){z=yield F.castAsJsonAsync(z,c.signal);var B=null==z?void 0:z.type;z="media"===B?h.fromJSON(z):"text"===B?g.fromJSON(z):"fields"===B?C.fromJSON(z):null;v._set("contentElement",z)}else v._set("contentElement",null)}else v._set("contentElement",
null)});v.handles.add([I.watch(()=>[v.expressionInfo,v.graphic,v.map,v.spatialReference,v.view],()=>v._compileThrottled(),I.initial),I.watch(()=>[v.contentElement],()=>v._createVM(),I.initial)]);return v}d._inheritsLoose(S,N);S.prototype.destroy=function(){var P;this._cancelQuery();null==(P=this.contentElementViewModel)?void 0:P.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};d._createClass(S,[{key:"spatialReference",get:function(){var P;return(null==(P=this.view)?
void 0:P.spatialReference)||null},set:function(P){void 0===P?this._clearOverride("spatialReference"):this._override("spatialReference",P)}},{key:"state",get:function(){const {_abortController:P,contentElement:v,contentElementViewModel:K}=this;return P?"loading":v||K?"ready":"disabled"}},{key:"map",get:function(){var P;return(null==(P=this.view)?void 0:P.map)||null},set:function(P){void 0===P?this._clearOverride("map"):this._override("map",P)}}]);return S}(J.HandleOwnerMixin(f));l.__decorate([L.property()],
f.prototype,"_abortController",void 0);l.__decorate([L.property({type:r})],f.prototype,"expressionInfo",void 0);l.__decorate([L.property({type:b})],f.prototype,"graphic",void 0);l.__decorate([L.property({readOnly:!0})],f.prototype,"contentElement",void 0);l.__decorate([L.property({readOnly:!0})],f.prototype,"contentElementViewModel",void 0);l.__decorate([L.property()],f.prototype,"interceptor",void 0);l.__decorate([L.property()],f.prototype,"spatialReference",null);l.__decorate([L.property({readOnly:!0})],
f.prototype,"state",null);l.__decorate([L.property()],f.prototype,"map",null);l.__decorate([L.property()],f.prototype,"view",void 0);return f=l.__decorate([n.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],f)})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C){function h(X,ia,xa){return""===ia||null===ia||void 0===ia||ia===xa||ia===xa?X:X=X.split(ia).join(xa)}function g(X){return X instanceof Cb||X instanceof b||X instanceof Jb}function r(X){return p(X)||D(X)||q(X)||k(X)||null===X||X===fb||"number"===typeof X?!0:!1}function u(X,ia){return void 0===X?ia:X}function p(X){return"string"===typeof X||X instanceof String}function k(X){return"boolean"===typeof X}function D(X){return"number"===typeof X}function N(X){return"number"===
typeof X&&isFinite(X)&&Math.floor(X)===X}function S(X){return X instanceof Array}function P(X){return"esri.arcade.Feature"===(null==X?void 0:X.arcadeDeclaredClass)?!0:!1}function v(X){return!0===(X&&X.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===X.declaredRootClass)}function K(X){return!0===(X&&X.declaredRootClass&&"esri.arcade.featureSetCollection"===X.declaredRootClass)}function e(X){return X instanceof F}function q(X){return X instanceof Date}function w(X,ia,xa){if(X.length<
ia||X.length>xa)throw Error("Function called with wrong number of Parameters");}function R(X){return 0>X?-Math.round(-X):Math.round(X)}function Q(){let X=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ia){const xa=(X+16*Math.random())%16|0;X=Math.floor(X/16);return("x"===ia?xa:xa&3|8).toString(16)})}function c(X,ia){if(!1===isNaN(X)){if(void 0===ia||null===ia||""===ia)return X.toString();ia=h(ia,"\u2030","");ia=h(ia,"\u00a4","");return G.format(X,{pattern:ia})}return X.toString()}
function z(X,ia){X=n.DateTime.fromJSDate(X);return void 0===ia||null===ia||""===ia?X.toISO({suppressMilliseconds:!0}):X.toFormat(B(ia),{locale:x.getLocale(),numberingSystem:"latn"})}function B(X){X=X.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let ia="";const xa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Ha of X.match(xa))switch(Ha){case "D":ia+=
"d";break;case "DD":ia+="dd";break;case "DDD":ia+="o";break;case "d":ia+="c";break;case "ddd":ia+="ccc";break;case "dddd":ia+="cccc";break;case "M":ia+="L";break;case "MM":ia+="LL";break;case "MMM":ia+="LLL";break;case "MMMM":ia+="LLLL";break;case "YY":ia+="yy";break;case "Y":case "YYYY":ia+="yyyy";break;case "Q":ia+="q";break;case "Z":ia+="ZZ";break;case "ZZ":ia+="ZZZ";break;case "S":ia+="'S'";break;case "SS":ia+="'SS'";break;case "SSS":ia+="u";break;case "A":case "a":ia+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ia+=
Ha;break;default:ia=2<=Ha.length&&"["===Ha.slice(0,1)&&"]"===Ha.slice(-1)?ia+`'${Ha.slice(1,-1)}'`:ia+`'${Ha}'`}return ia}function U(X,ia,xa){switch(xa){case "\x3e":return X>ia;case "\x3c":return X<ia;case "\x3e\x3d":return X>=ia;case "\x3c\x3d":return X<=ia}return!1}function Y(X,ia,xa){if(null===X){if(null===ia||ia===fb)return U(null,null,xa);if(D(ia))return U(0,ia,xa);if(p(ia)||k(ia))return U(0,ua(ia),xa);if(q(ia))return U(0,ia.getTime(),xa)}if(X===fb){if(null===ia||ia===fb)return U(null,null,xa);
if(D(ia))return U(0,ia,xa);if(p(ia)||k(ia))return U(0,ua(ia),xa);if(q(ia))return U(0,ia.getTime(),xa)}else if(D(X)){if(D(ia))return U(X,ia,xa);if(k(ia))return U(X,ua(ia),xa);if(null===ia||ia===fb)return U(X,0,xa);if(p(ia))return U(X,ua(ia),xa);if(q(ia))return U(X,ia.getTime(),xa)}else if(p(X)){if(p(ia))return U(ca(X),ca(ia),xa);if(q(ia))return U(ua(X),ia.getTime(),xa);if(D(ia))return U(ua(X),ia,xa);if(null===ia||ia===fb)return U(ua(X),0,xa);if(k(ia))return U(ua(X),ua(ia),xa)}else if(q(X)){if(q(ia))return U(X,
ia,xa);if(null===ia||ia===fb)return U(X.getTime(),0,xa);if(D(ia))return U(X.getTime(),ia,xa);if(k(ia)||p(ia))return U(X.getTime(),ua(ia),xa)}else if(k(X)){if(k(ia))return U(X,ia,xa);if(D(ia))return U(ua(X),ua(ia),xa);if(q(ia))return U(ua(X),ia.getTime(),xa);if(null===ia||ia===fb)return U(ua(X),0,xa);if(p(ia))return U(ua(X),ua(ia),xa)}return!aa(X,ia)||"\x3c\x3d"!==xa&&"\x3e\x3d"!==xa?!1:!0}function aa(X,ia){if(X===ia||null===X&&ia===fb||null===ia&&X===fb)return!0;if(q(X)&&q(ia))return X.getTime()===
ia.getTime();if(X instanceof f||X instanceof J)return X.equalityTest(ia);if(X instanceof H&&ia instanceof H){const xa=X.cache._arcadeCacheId,Ha=ia.cache._arcadeCacheId;if(void 0!==xa&&null!==xa)return xa===Ha}return void 0!==X&&void 0!==ia&&null!==X&&null!==ia&&"object"===typeof X&&"object"===typeof ia&&(X._arcadeCacheId===ia._arcadeCacheId&&void 0!==X._arcadeCacheId&&null!==X._arcadeCacheId||X._underlyingGraphic===ia._underlyingGraphic&&void 0!==X._underlyingGraphic&&null!==X._underlyingGraphic)?
!0:!1}function ca(X,ia){if(p(X))return X;if(null===X)return"";if(D(X))return c(X,ia);if(k(X))return X.toString();if(q(X))return z(X,ia);if(X instanceof O)return JSON.stringify(X.toJSON());if(S(X)){ia=[];for(var xa=0;xa<X.length;xa++)ia[xa]=ra(X[xa]);return"["+ia.join(",")+"]"}if(X instanceof F){ia=[];for(xa=0;xa<X.length();xa++)ia[xa]=ra(X.get(xa));return"["+ia.join(",")+"]"}return null!==X&&"object"===typeof X&&void 0!==X.castToText?X.castToText():g(X)?"object, Function":""}function na(X){const ia=
[];if(!1===S(X))return null;if(X instanceof F){for(var xa=0;xa<X.length();xa++)ia[xa]=ua(X.get(xa));return ia}for(xa=0;xa<X.length;xa++)ia[xa]=ua(X[xa]);return ia}function ba(X,ia){if(p(X))return X;if(null===X)return"";if(D(X))return c(X,ia);if(k(X))return X.toString();if(q(X))return z(X,ia);if(X instanceof O)return X instanceof I?'{"xmin":'+X.xmin.toString()+',"ymin":'+X.ymin.toString()+","+(X.hasZ?'"zmin":'+X.zmin.toString()+",":"")+(X.hasM?'"mmin":'+X.mmin.toString()+",":"")+'"xmax":'+X.xmax.toString()+
',"ymax":'+X.ymax.toString()+","+(X.hasZ?'"zmax":'+X.zmax.toString()+",":"")+(X.hasM?'"mmax":'+X.mmax.toString()+",":"")+'"spatialReference":'+ja(X.spatialReference)+"}":ja(X.toJSON(),(Ha,Ia)=>Ha.key===Ia.key?0:"spatialReference"===Ha.key?1:"spatialReference"===Ia.key||Ha.key<Ia.key?-1:Ha.key>Ia.key?1:0);if(S(X)){ia=[];for(var xa=0;xa<X.length;xa++)ia[xa]=ra(X[xa]);return"["+ia.join(",")+"]"}if(X instanceof F){ia=[];for(xa=0;xa<X.length();xa++)ia[xa]=ra(X.get(xa));return"["+ia.join(",")+"]"}return null!==
X&&"object"===typeof X&&void 0!==X.castToText?X.castToText():g(X)?"object, Function":""}function ra(X){return null===X?"null":k(X)||D(X)||p(X)?JSON.stringify(X):X instanceof O||X instanceof F||X instanceof Array?ba(X):X instanceof Date?JSON.stringify(z(X,"")):null!==X&&"object"===typeof X&&void 0!==X.castToText?X.castToText():"null"}function ua(X,ia){return D(X)?X:null===X||""===X?0:q(X)?NaN:k(X)?X?1:0:S(X)||""===X||void 0===X?NaN:void 0!==ia&&p(X)?(ia=h(ia,"\u2030",""),ia=h(ia,"\u00a4",""),G.parse(X,
{pattern:ia})):X===fb?0:Number(X)}function Ba(X){return q(X)?X:p(X)&&(X=ta(X))?X.toJSDate():null}function ka(X){return q(X)?n.DateTime.fromJSDate(X):p(X)?ta(X):null}function ta(X){const ia=/ (\d\d)/;let xa=n.DateTime.fromISO(X);return xa.isValid||ia.test(X)&&(X=X.replace(ia,"T$1"),xa=n.DateTime.fromISO(X),xa.isValid)?xa:null}function ma(X){return k(X)?X:p(X)?(X=X.toLowerCase(),"true"===X?!0:!1):D(X)?0===X||isNaN(X)?!1:!0:!1}function la(X,ia){if(y.isNone(X))return null;if(null===X.spatialReference||
void 0===X.spatialReference)X.spatialReference=ia;return X}function pa(X){if(null===X)return null;if(X instanceof H)return"NaN"===X.x||null===X.x||isNaN(X.x)?null:X;if(X instanceof A){if(0===X.rings.length)return null;for(const ia of X.rings)if(0<ia.length)return X;return null}if(X instanceof m){if(0===X.paths.length)return null;for(const ia of X.paths)if(0<ia.length)return X;return null}return X instanceof L?0===X.points.length?null:X:X instanceof I?"NaN"===X.xmin||null===X.xmin||isNaN(X.xmin)?null:
X:null}function sa(X,ia){if(!X||!X.domain)return ia;let xa=null;if("string"===X.field.type||"esriFieldTypeString"===X.field.type)ia=ca(ia);else{if(null===ia||void 0===ia)return null;if(""===ia)return ia;ia=ua(ia)}for(let Ha=0;Ha<X.domain.codedValues.length;Ha++){const Ia=X.domain.codedValues[Ha];Ia.code===ia&&(xa=Ia)}return null===xa?ia:xa.name}function da(X,ia){if(!X||!X.domain)return ia;let xa=null;ia=ca(ia);for(let Ha=0;Ha<X.domain.codedValues.length;Ha++){const Ia=X.domain.codedValues[Ha];Ia.name===
ia&&(xa=Ia)}return null===xa?ia:xa.code}function ea(X,ia,xa=null,Ha=null){if(!ia||!ia.fields)return null;let Ia=null;for(let db=0;db<ia.fields.length;db++){const eb=ia.fields[db];eb.name.toLowerCase()===X.toString().toLowerCase()&&(Ia=eb)}if(null===Ia)throw Error("Field not found");let Sa,Wa;null===Ha&&xa&&ia.typeIdField&&(Ha=xa.hasField(ia.typeIdField)?xa.field(ia.typeIdField):null);null!==Ha&&void 0!==Ha&&ia.types.some(function(db){return db.id===Ha?((Sa=db.domains&&db.domains[Ia.name])&&"inherited"===
Sa.type&&(Sa=ha(Ia.name,ia),Wa=!0),!0):!1});Wa||Sa||(Sa=ha(X,ia));return{field:Ia,domain:Sa}}function ha(X,ia){let xa;ia.fields.some(function(Ha){Ha.name.toLowerCase()===X.toLowerCase()&&(xa=Ha.domain);return!!xa});return xa}function ja(X,ia){ia||(ia={});"function"===typeof ia&&(ia={cmp:ia});const xa="boolean"===typeof ia.cycles?ia.cycles:!1,Ha=ia.cmp&&function(Sa){return function(Wa){return function(db,eb){return Sa({key:db,value:Wa[db]},{key:eb,value:Wa[eb]})}}}(ia.cmp),Ia=[];return function db(Wa){Wa&&
Wa.toJSON&&"function"===typeof Wa.toJSON&&(Wa=Wa.toJSON());if(void 0!==Wa){if("number"===typeof Wa)return isFinite(Wa)?""+Wa:"null";if("object"!==typeof Wa)return JSON.stringify(Wa);var eb;if(Array.isArray(Wa)){var jb="[";for(eb=0;eb<Wa.length;eb++)eb&&(jb+=","),jb+=db(Wa[eb])||"null";return jb+"]"}if(null===Wa)return"null";if(Ia.includes(Wa)){if(xa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var yb=Ia.push(Wa)-1,cc=Object.keys(Wa).sort(Ha&&Ha(Wa));
jb="";for(eb=0;eb<cc.length;eb++){const dc=cc[eb],ec=db(Wa[dc]);ec&&(jb&&(jb+=","),jb+=JSON.stringify(dc)+":"+ec)}Ia.splice(yb,1);return"{"+jb+"}"}}(X)}function va(X){if(null===X)return null;const ia=[];for(const xa of X)xa&&xa.arcadeDeclaredClass&&"esri.arcade.Feature"===xa.arcadeDeclaredClass?ia.push(xa.geometry()):ia.push(xa);return ia}function qa(X,ia){if(ia instanceof H)X.push(ia.hasZ?ia.hasM?[ia.x,ia.y,ia.z,ia.m]:[ia.x,ia.y,ia.z]:[ia.x,ia.y]);else throw Error("Invalid Argument");}function wa(X,
ia){if(S(X)||e(X)){let xa=!1,Ha=!1,Ia=[];if(S(X)){for(const Sa of X)qa(Ia,Sa);0<Ia.length&&(ia=X[0].spatialReference,xa=X[0].hasZ,Ha=X[0].hasM)}else if(X instanceof J)Ia=X._elements,0<Ia.length&&(xa=X._hasZ,Ha=X._hasM,ia=X.get(0).spatialReference);else if(e(X)){for(const Sa of X.toArray())qa(Ia,Sa);0<Ia.length&&(ia=X.get(0).spatialReference,xa=!0===X.get(0).hasZ,Ha=!0===X.get(0).hasM)}else throw Error("Invalid Argument");if(0===Ia.length)return null;!1===E.isClockwise(Ia,Ha,xa)&&(Ia=Ia.slice(0).reverse());
return new A({rings:[Ia],spatialReference:ia,hasZ:xa,hasM:Ha})}return X}function Ca(X,ia){if(S(X)||e(X)){let xa=!1,Ha=!1,Ia=[];if(S(X)){for(const Sa of X)qa(Ia,Sa);0<Ia.length&&(ia=X[0].spatialReference,xa=!0===X[0].hasZ,Ha=!0===X[0].hasM)}else if(X instanceof J)Ia=X._elements,0<Ia.length&&(xa=X._hasZ,Ha=X._hasM,ia=X.get(0).spatialReference);else if(e(X)){for(const Sa of X.toArray())qa(Ia,Sa);0<Ia.length&&(ia=X.get(0).spatialReference,xa=!0===X.get(0).hasZ,Ha=!0===X.get(0).hasM)}return 0===Ia.length?
null:new m({paths:[Ia],spatialReference:ia,hasZ:xa,hasM:Ha})}return X}function Ka(X,ia){if(S(X)||e(X)){let xa=!1,Ha=!1,Ia=[];if(S(X)){for(const Sa of X)qa(Ia,Sa);0<Ia.length&&(ia=X[0].spatialReference,xa=!0===X[0].hasZ,Ha=!0===X[0].hasM)}else if(X instanceof J)Ia=X._elements,0<Ia.length&&(xa=X._hasZ,Ha=X._hasM,ia=X.get(0).spatialReference);else if(e(X)){for(const Sa of X.toArray())qa(Ia,Sa);0<Ia.length&&(ia=X.get(0).spatialReference,xa=!0===X.get(0).hasZ,Ha=!0===X.get(0).hasM)}return 0===Ia.length?
null:new L({points:Ia,spatialReference:ia,hasZ:xa,hasM:Ha})}return X}function Ga(X,ia=!1){const xa=[];if(null===X)return xa;if(!0===S(X)){for(var Ha=0;Ha<X.length;Ha++){var Ia=ca(X[Ha]);""===Ia&&!0!==ia||xa.push(Ia)}return xa}if(X instanceof F){for(Ha=0;Ha<X.length();Ha++)Ia=ca(X.get(Ha)),""===Ia&&!0!==ia||xa.push(Ia);return xa}return r(X)?(X=ca(X),""===X&&!0!==ia||xa.push(X),xa):[]}function Ea(X){Sb++;return 0===Sb%100?(Sb=0,new Promise(ia=>{setTimeout(()=>{ia(X)},0)})):X}function Da(X,ia,xa){switch(xa){case "\x26":return X&
ia;case "|":return X|ia;case "^":return X^ia;case "\x3c\x3c":return X<<ia;case "\x3e\x3e":return X>>ia;case "\x3e\x3e\x3e":return X>>>ia}}function La(X,ia=null){if(null!=X){if(k(X)||D(X)||p(X))return X;if(X instanceof O)return!0===(null==ia?void 0:ia.keepGeometryType)?X:X.toJSON();if(X instanceof F)return X.toArray().map(xa=>La(xa,ia));if(X instanceof Array)return X.map(xa=>La(xa,ia));if(X instanceof Date)return X;if(null!==X&&"object"===typeof X&&void 0!==X.castAsJson)return X.castAsJson(ia)}return null}
function Oa(X,ia,xa,Ha,Ia){return Ra.apply(this,arguments)}function Ra(){Ra=l._asyncToGenerator(function*(X,ia,xa,Ha,Ia){X=yield Ma(X,ia,xa);Ia[Ha]=X});return Ra.apply(this,arguments)}function Ma(X){return Qa.apply(this,arguments)}function Qa(){Qa=l._asyncToGenerator(function*(X,ia=null,xa=null){X instanceof F&&(X=X.toArray());if(null!=X){if(r(X)||X instanceof O||X instanceof Date)return La(X,xa);if(X instanceof Array){const Ha=[],Ia=[];for(const Sa of X)null===Sa||r(Sa)||Sa instanceof O||Sa instanceof
Date?Ia.push(La(Sa,xa)):(Ia.push(null),Ha.push(Oa(Sa,ia,xa,Ia.length-1,Ia)));0<Ha.length&&(yield Promise.all(Ha));return Ia}if(null!==X&&"object"===typeof X&&void 0!==X.castAsJsonAsync)return X.castAsJsonAsync(ia,xa)}return null});return Qa.apply(this,arguments)}function za(X,ia,xa){const Ha=X.fullSchema();return null!==Ha&&Ha.fields?ea(ia,Ha,X,xa):null}function Ya(X){X=X.fullSchema();return null!==X&&X.fields?X.typeIdField?{subtypeField:X.typeIdField,subtypes:X.types?X.types.map(ia=>({name:ia.name,
code:ia.id})):[]}:null:null}function sb(X,ia,xa,Ha){const Ia=X.fullSchema();if(null===Ia||!Ia.fields)return null;Ha=ea(ia,Ia,X,Ha);if(void 0===xa)try{xa=X.field(ia)}catch(Sa){return null}return sa(Ha,xa)}function vb(X,ia,xa,Ha){const Ia=X.fullSchema();if(null===Ia||!Ia.fields)return null;if(void 0===xa){try{xa=X.field(ia)}catch(Sa){return null}return xa}X=ea(ia,Ia,X,Ha);return da(X,xa)}function M(X){X=X.fullSchema();if(null===X||!X.fields)return null;const ia=[];for(const xa of X.fields)ia.push(C.esriFieldToJson(xa));
return{objectIdField:X.objectIdField,globalIdField:X.globalIdField,geometryType:void 0===C.layerGeometryEsriRestConstants[X.geometryType]?"":C.layerGeometryEsriRestConstants[X.geometryType],fields:ia}}let Ib=function(X){this.value=X},wb=function(X){this.value=X},Cb=function(X){this.fn=X},Jb=function(X,ia){this.paramCount=ia;this.fn=X};const Qb=Cb,Db=Jb,fb={type:"VOID"},xb={type:"BREAK"},Rb={type:"CONTINUE"};let Sb=0;const Kb=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Ib,ImplicitResultE:wb,
NativeFunctionE:Cb,SizzleFunctionE:Jb,NativeFunction:Qb,ImplicitResult:wb,ReturnResult:Ib,SizzleFunction:Db,voidOperation:fb,breakResult:xb,continueResult:Rb,multiReplace:h,isFunctionParameter:g,isSimpleType:r,defaultUndefined:u,isString:p,isBoolean:k,isNumber:D,isInteger:N,isArray:S,isFeature:P,isFeatureSet:v,isFeatureSetCollection:K,isImmutableArray:e,isDate:q,pcCheck:w,absRound:R,generateUUID:Q,formatNumber:c,formatDate:z,standardiseDateFormat:B,greaterThanLessThan:Y,equalityTest:aa,toString:ca,
toNumberArray:na,toStringExplicit:ba,toNumber:ua,toDate:Ba,toDateTime:ka,toBoolean:ma,fixSpatialReference:la,fixNullGeometry:pa,getDomainValue:sa,getDomainCode:da,getDomain:ea,stableStringify:ja,autoCastFeatureToGeometry:va,autoCastArrayOfPointsToPolygon:wa,autoCastArrayOfPointsToPolyline:Ca,autoCastArrayOfPointsToMultiPoint:Ka,toStringArray:Ga,tick:Ea,binaryOperator:Da,castAsJson:La,castAsJsonAsync:Ma,featureFullDomain:za,featureSubtypes:Ya,featureDomainValueLookup:sb,featureDomainCodeLookup:vb,
featureSchema:M},Symbol.toStringTag,{value:"Module"}));d.ImplicitResult=wb;d.ImplicitResultE=wb;d.NativeFunction=Qb;d.NativeFunctionE=Cb;d.ReturnResult=Ib;d.ReturnResultE=Ib;d.SizzleFunction=Db;d.SizzleFunctionE=Jb;d.absRound=R;d.autoCastArrayOfPointsToMultiPoint=Ka;d.autoCastArrayOfPointsToPolygon=wa;d.autoCastArrayOfPointsToPolyline=Ca;d.autoCastFeatureToGeometry=va;d.binaryOperator=Da;d.breakResult=xb;d.castAsJson=La;d.castAsJsonAsync=Ma;d.continueResult=Rb;d.defaultUndefined=u;d.equalityTest=
aa;d.featureDomainCodeLookup=vb;d.featureDomainValueLookup=sb;d.featureFullDomain=za;d.featureSchema=M;d.featureSubtypes=Ya;d.fixNullGeometry=pa;d.fixSpatialReference=la;d.formatDate=z;d.formatNumber=c;d.generateUUID=Q;d.getDomain=ea;d.getDomainCode=da;d.getDomainValue=sa;d.greaterThanLessThan=Y;d.isArray=S;d.isBoolean=k;d.isDate=q;d.isFeature=P;d.isFeatureSet=v;d.isFeatureSetCollection=K;d.isFunctionParameter=g;d.isImmutableArray=e;d.isInteger=N;d.isNumber=D;d.isSimpleType=r;d.isString=p;d.lc=Kb;
d.multiReplace=h;d.pcCheck=w;d.stableStringify=ja;d.standardiseDateFormat=B;d.tick=Ea;d.toBoolean=ma;d.toDate=Ba;d.toDateTime=ka;d.toNumber=ua;d.toNumberArray=na;d.toString=ca;d.toStringArray=Ga;d.toStringExplicit=ba;d.voidOperation=fb})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(d,l){this.context=this.definition=null;this.definition=d;this.context=l}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function d(b=[]){this._elements=b}var l=
d.prototype;l.length=function(){return this._elements.length};l.get=function(b){return this._elements[b]};l.toArray=function(){const b=[];for(let F=0;F<this.length();F++)b.push(this.get(F));return b};return d}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(d,l,b){return function(F){function f(I,O,L,H,A){I=F.call(this,I)||this;I._lazyPath=[];I._hasZ=!1;I._hasM=!1;I._hasZ=L;I._hasM=H;I._spRef=O;I._cacheId=
A;return I}d._inheritsLoose(f,F);var J=f.prototype;J.get=function(I){if(void 0===this._lazyPath[I]){const O=this._elements[I];if(void 0===O)return;this._lazyPath[I]=new b(O,this._spRef,this._hasZ,this._hasM,this._cacheId,I)}return this._lazyPath[I]};J.equalityTest=function(I){return I===this?!0:null===I||!1===I instanceof f?!1:I.getUniqueHash()===this.getUniqueHash()};J.getUniqueHash=function(){return this._cacheId.toString()};return f}(l)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./ImmutableArray","../geometry/Point"],function(d,l,b){return function(F){function f(I,O,L,H,A,m){I=F.call(this,I)||this;I._lazyPt=[];I._hasZ=!1;I._hasM=!1;I._spRef=O;I._hasZ=L;I._hasM=H;I._cacheId=A;I._partId=m;return I}d._inheritsLoose(f,F);var J=f.prototype;J.get=function(I){if(void 0===this._lazyPt[I]){const O=this._elements[I];if(void 0===O)return;const L=this._hasZ,H=this._hasM;let A=null;A=L&&!H?new b(O[0],O[1],O[2],void 0,this._spRef):H&&!L?new b(O[0],O[1],void 0,O[2],this._spRef):L&&H?new b(O[0],
O[1],O[2],O[3],this._spRef):new b(O[0],O[1],this._spRef);A.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+I.toString();this._lazyPt[I]=A}return this._lazyPt[I]};J.equalityTest=function(I){return I===this?!0:null===I||!1===I instanceof f?!1:I.getUniqueHash()===this.getUniqueHash()};J.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return f}(l)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(d,
l,b){function F(m){m||(m=b.getLocale());let n=m in L;if(!n){const x=m.split("-");1<x.length&&x[0]in L&&(m=x[0],n=!0);n||(m="en")}const [y,G,E="#,##0.###"]=L[m];return{decimal:y,group:G,pattern:E}}function f(m,n,y){y=y||{};!0===y.places&&(y.places=0);Infinity===y.places&&(y.places=6);n=n.split(".");var G="string"===typeof y.places&&y.places.indexOf(","),E=y.places;G?E=y.places.substring(G+1):0<=E||(E=(n[1]||[]).length);0>y.round||(m=Number(m.toFixed(Number(E))));m=String(Math.abs(m)).split(".");const x=
m[1]||"";n[1]||y.places?(G&&(y.places=y.places.substring(0,G)),G=void 0!==y.places?y.places:n[1]&&n[1].lastIndexOf("0")+1,G>x.length&&(m[1]=x.padEnd(Number(G),"0")),E<x.length&&(m[1]=x.substr(0,Number(E)))):m[1]&&m.pop();E=n[0].replace(",","");G=E.indexOf("0");-1!==G&&(G=E.length-G,G>m[0].length&&(m[0]=m[0].padStart(G,"0")),E.includes("#")||(m[0]=m[0].substr(m[0].length-G)));E=n[0].lastIndexOf(",");let C,h;-1!==E&&(C=n[0].length-E-1,n=n[0].substr(0,E),E=n.lastIndexOf(","),-1!==E&&(h=n.length-E-1));
n=[];for(E=m[0];E;)G=E.length-C,n.push(0<G?E.substr(G):E),E=0<G?E.slice(0,G):"",h&&(C=h,h=void 0);m[0]=n.reverse().join(y.group||",");return m.join(y.decimal||".")}function J(m){m=m||{};var n=F(m.locale);const y=m.pattern||n.pattern,G=n.group,E=n.decimal;let x=1;if(y.includes("%"))x/=100;else if(y.includes("\u2030"))x/=1E3;else if(y.includes("\u00a4"))throw Error("currency notation not supported");n=y.split(";");1===n.length&&n.push("-"+n[0]);return{regexp:A(n,C=>{C="(?:"+l.escapeRegExpString(C,".")+
")";return C.replace(H,h=>{const g={signed:!1,separator:m.strict?G:[G,""],fractional:m.fractional,decimal:E,exponent:!1};h=h.split(".");let r=m.places;1===h.length&&1!==x&&(h[1]="###");1===h.length||0===r?g.fractional=!1:(void 0===r&&(r=m.pattern?h[1].lastIndexOf("0")+1:Infinity),r&&null==m.fractional&&(g.fractional=!0),!m.places&&r<h[1].length&&(r+=","+h[1].length),g.places=r);h=h[0].split(",");1<h.length&&(g.groupSize=h.pop().length,1<h.length&&(g.groupSize2=h.pop().length));return"("+I(g)+")"})},
!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:G,decimal:E,factor:x}}function I(m){m=m||{};"places"in m||(m.places=Infinity);"string"!==typeof m.decimal&&(m.decimal=".");"fractional"in m&&!/^0/.test(String(m.places))||(m.fractional=[!0,!1]);"exponent"in m||(m.exponent=[!0,!1]);"eSigned"in m||(m.eSigned=[!0,!1]);var n=O(m);const y=A(m.fractional,E=>{let x="";E&&0!==m.places&&(x="\\"+m.decimal,x=Infinity===m.places?"(?:"+x+"\\d+)?":x+("\\d{"+m.places+"}"));return x},!0),G=A(m.exponent,E=>E?"([eE]"+O({signed:m.eSigned})+
")":"");n+=y;y&&(n="(?:(?:"+n+")|(?:"+y+"))");return n+G}function O(m){m=m||{};"signed"in m||(m.signed=[!0,!1]);"separator"in m?"groupSize"in m||(m.groupSize=3):m.separator="";const n=A(m.signed,G=>G?"[-+]":"",!0),y=A(m.separator,G=>{if(!G)return"(?:\\d+)";G=l.escapeRegExpString(G);" "===G?G="\\s":"\u00a0"===G&&(G="\\s\\xa0");const E=m.groupSize,x=m.groupSize2;return x?(G="(?:0|[1-9]\\d{0,"+(x-1)+"}(?:["+G+"]\\d{"+x+"})*["+G+"]\\d{"+E+"})",0<E-x?"(?:"+G+"|(?:0|[1-9]\\d{0,"+(E-1)+"}))":G):"(?:0|[1-9]\\d{0,"+
(E-1)+"}(?:["+G+"]\\d{"+E+"})*)"},!0);return n+y}const L={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",",
"\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},H=/[#0,]*[#0](?:\.0*#*)?/,A=(m,n,y)=>{if(!(m instanceof Array))return n(m);const G=[];for(let E=0;E<m.length;E++)G.push(n(m[E]));m=G.join("|");return"("+(y?"?:":"")+m+")"};d._parseInfo=J;d.format=function(m,n){n={...n};var y=F(n.locale);
n.customs=y;var G=n.pattern||y.pattern;if(isNaN(m)||Infinity===Math.abs(m))return null;{n=n||{};y=n.customs.group;const x=n.customs.decimal;G=G.split(";");var E=G[0];G=G[0>m?1:0]||"-"+E;if(G.includes("%"))m*=100;else if(G.includes("\u2030"))m*=1E3;else{if(G.includes("\u00a4"))throw Error("currency notation not supported");if(G.includes("E"))throw Error("exponential notation not supported");}const C=H;E=E.match(C);if(!E)throw Error("unable to find a number expression in pattern: "+G);!1===n.fractional&&
(n.places=0);m=G.replace(C,f(m,E[0],{decimal:x,group:y,places:n.places,round:n.round}))}return m};d.getCustoms=F;d.parse=function(m,n){n=J(n);m=(new RegExp("^"+n.regexp+"$")).exec(m);if(!m)return NaN;let y=m[1];if(!m[1]){if(!m[2])return NaN;y=m[2];n.factor*=-1}y=y.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,".");return Number(y)*n.factor};d.regexp=function(m){return J(m).regexp};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/arcade/featureset/support/shared":function(){define(["exports",
"../../../geometry/Extent","../../../layers/support/Field"],function(d,l,b){function F(f){return f instanceof Date}d.FeatureServiceDatabaseType=void 0;(function(f){f[f.Standardised=0]="Standardised";f[f.StandardisedNoInterval=1]="StandardisedNoInterval";f[f.SqlServer=2]="SqlServer";f[f.Oracle=3]="Oracle";f[f.Postgres=4]="Postgres";f[f.PGDB=5]="PGDB";f[f.FILEGDB=6]="FILEGDB";f[f.NotEvaluated=7]="NotEvaluated"})(d.FeatureServiceDatabaseType||(d.FeatureServiceDatabaseType={}));d.IdState=void 0;(function(f){f[f.InFeatureSet=
0]="InFeatureSet";f[f.NotInFeatureSet=1]="NotInFeatureSet";f[f.Unknown=2]="Unknown"})(d.IdState||(d.IdState={}));d.callback=function(f,J){return function(){try{f.apply(null,arguments)}catch(I){J.reject(I)}}};d.cloneAttributes=function(f){const J={};for(const I in f)J[I]=f[I];return J};d.cloneField=function(f){return b.fromJSON(f.toJSON())};d.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 9001;
case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};d.convertSquareUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};d.defaultMaxRecords=1E3;d.equalityTest=function(f,J){return f===J?!0:F(f)&&F(J)?f.getTime()===J.getTime():!1};d.errback=function(f){return function(J){f.reject(J)}};
d.esriFieldToJson=function(f){return f.toJSON?f.toJSON():f};d.extractServiceUrl=function(f){if(void 0===f)return"";f=f.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");f=f.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return f=f.split("?")[0]};d.isArray=function(f){return f instanceof Array};d.isBoolean=function(f){return"boolean"===typeof f};d.isDate=F;d.isNumber=function(f){return"number"===typeof f};d.isString=function(f){return"string"===typeof f||f instanceof String};d.layerFieldEsriConstants=
{"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",
esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};d.layerGeometryEsriConstants=
{point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};d.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",
esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};d.sameGeomType=function(f,J){return f===J||"point"===f&&"esriGeometryPoint"===J||"polyline"===f&&"esriGeometryPolyline"===J||"polygon"===f&&"esriGeometryPolygon"===J||"extent"===f&&"esriGeometryEnvelope"===J||"multipoint"===f&&"esriGeometryMultipoint"===J||"point"===J&&"esriGeometryPoint"===f||"polyline"===J&&"esriGeometryPolyline"===
f||"polygon"===J&&"esriGeometryPolygon"===f||"extent"===J&&"esriGeometryEnvelope"===f||"multipoint"===J&&"esriGeometryMultipoint"===f?!0:!1};d.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.extent;case "point":return new l({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};d.stableStringify=function(f,J){J||(J={});"function"===typeof J&&(J={cmp:J});const I="boolean"===
typeof J.cycles?J.cycles:!1,O=J.cmp&&function(H){return function(A){return function(m,n){return H({key:m,value:A[m]},{key:n,value:A[n]})}}}(J.cmp),L=[];return function m(A){A&&A.toJSON&&"function"===typeof A.toJSON&&(A=A.toJSON());if(void 0!==A){if("number"===typeof A)return isFinite(A)?""+A:"null";if("object"!==typeof A)return JSON.stringify(A);var n;if(Array.isArray(A)){var y="[";for(n=0;n<A.length;n++)n&&(y+=","),y+=m(A[n])||"null";return y+"]"}if(null===A)return"null";if(L.includes(A)){if(I)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var G=L.push(A)-1,E=Object.keys(A).sort(O&&O(A));y="";for(n=0;n<E.length;n++){const x=E[n],C=m(A[x]);C&&(y&&(y+=","),y+=JSON.stringify(x)+":"+C)}L.splice(G,1);return"{"+y+"}"}}(f)};d.toEsriGeometryType=function(f){switch(f){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(d,l,b,F,f,J,I){function O(h){return`<ul class="esri-widget__list">${h.map(g=>`<li>${"string"===typeof g?I.applyTextFormattingHTML(I.htmlEntities(g)):g}</li>`).join("")}</ul>`}function L(h){return`<table class="esri-widget__table">${h.keys().map(g=>
{var r=h.field(g);r="string"===typeof r?I.applyTextFormattingHTML(I.htmlEntities(r)):r;return`<tr><th>${g}</th><td>${r}</td></tr>`}).join("")}</table>`}function H({aggregatedFeatures:h,arcadeUtils:g,featureSetVars:r,context:u,viewInfo:p,map:k,graphic:D,interceptor:N}){r.forEach(S=>{S=S.toLowerCase();var P={map:k,spatialReference:p.sr,interceptor:N};"$map"===S&&(u.vars[S]=g.convertMapToFeatureSetCollection(P));"$layer"===S&&(u.vars[S]=g.convertFeatureLayerToFeatureSet({layer:D.sourceLayer,spatialReference:p.sr,
interceptor:N}));"$datastore"===S&&(u.vars[S]=g.convertServiceUrlToWorkspace({url:D.sourceLayer.url,spatialReference:p.sr,interceptor:N}));if("$aggregatedfeatures"===S){P=D.layer;const {fields:v,objectIdField:K,geometryType:e,spatialReference:q,displayField:w}=P;P=new J({fields:v,objectIdField:K,geometryType:e,spatialReference:q,displayField:w,..."feature"===P.type?{templates:P.templates,typeIdField:P.typeIdField,types:P.types}:null,source:h});u.vars[S]=g.convertFeatureLayerToFeatureSet({layer:P,
spatialReference:p.sr,interceptor:N})}})}function A(){return new Promise((h,g)=>d(["../../../support/arcadeUtils"],h,g))}function m(h){return n.apply(this,arguments)}function n(){n=b._asyncToGenerator(function*({graphic:h,view:g}){const {isAggregate:r,layer:u}=h;if(!r||!u||"2d"!==(null==g?void 0:g.type))return[];g=yield g.whenLayerView(u);if(!g.createQuery||!g.queryFeatures)return[];const p=g.createQuery();p.aggregateIds=[h.getObjectId()];({features:h}=yield g.queryFeatures(p));return h});return n.apply(this,
arguments)}function y(h){return G.apply(this,arguments)}function G(){G=b._asyncToGenerator(function*({expressionInfo:h,arcadeUtils:g,interceptor:r,spatialReference:u,map:p,graphic:k,view:D}){if(!h||!h.expression)return null;const N=g.createSyntaxTree(h.expression),S=x.filter(v=>g.hasVariable(N,v));[D]=yield Promise.all([m({graphic:k,view:D}),g.loadScriptDependencies(N,!0,S)]);const P=g.getViewInfo({spatialReference:u});u=g.createExecContext(k,P);u.interceptor=r;u.useAsync=!0;H({aggregatedFeatures:D,
arcadeUtils:g,featureSetVars:S,context:u,viewInfo:P,map:p,graphic:k,interceptor:r});r=g.createFunction(N,u);return g.executeAsyncFunction(r,u).catch(v=>C.error("arcade-execution-error",{error:v,graphic:k,expressionInfo:h}))});return G.apply(this,arguments)}function E(){E=b._asyncToGenerator(function*({expressionInfos:h,spatialReference:g,graphic:r,interceptor:u,map:p,view:k}){if(!h||!h.length)return{};const D=yield A(),N={};for(const S of h)N[`expression/${S.name}`]=y({expressionInfo:S,arcadeUtils:D,
interceptor:u,spatialReference:g,map:p,graphic:r,view:k});h=yield f.eachAlways(N);g={};for(const S in h)r=h[S].value,r="string"===typeof r?I.applyTextFormattingHTML(I.htmlEntities(r)):Array.isArray(r)?O(r):"esri.arcade.Dictionary"===(null==r?void 0:r.declaredClass)?L(r):r,g[S]=r;return g});return E.apply(this,arguments)}const x=["$datastore","$map","$layer","$aggregatedfeatures"],C=F.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");l.createCompiledExpression=y;l.createCompiledExpressions=
function(h){return E.apply(this,arguments)};l.loadArcadeUtils=A;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D){var N;const S=I.getLogger("esri.widgets.FeatureViewModel"),P={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};f=N=function(v){function K(q){var w=v.call(this,q)||this;w._handles=new J;w._error=null;w._featureAbortController=null;w.graphicChangedThrottled=A.throttle(w._graphicChanged,1,d._assertThisInitialized(w));w._expressionAttributes=null;w._graphicExpressionAttributes=
null;w.abilities={...P};w.content=null;w.contentViewModels=[];w.defaultPopupTemplateEnabled=!1;w.formattedAttributes=null;w.lastEditInfo=null;w.relatedInfos=new Map;w.title="";w.view=null;w._isAllowedContentType=R=>{const {abilities:Q}=d._assertThisInitialized(w);return"attachments"===R.type&&Q.attachmentsContent||"custom"===R.type&&Q.customContent||"fields"===R.type&&Q.fieldsContent||"media"===R.type&&Q.mediaContent||"text"===R.type&&Q.textContent||"expression"===R.type&&Q.expressionContent};w._handles.add(H.watch(()=>
[w.graphic,w._effectivePopupTemplate,w.abilities],()=>w.graphicChangedThrottled(),H.initial));return w}d._inheritsLoose(K,v);var e=K.prototype;e.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};e.castAbilities=function(q){return{...P,...q}};e.setActiveMedia=function(q,w){q=this.contentViewModels[q];q instanceof u&&q.setActiveMedia(w)};e.nextMedia=function(q){q=
this.contentViewModels[q];q instanceof u&&q.next()};e.previousMedia=function(q){q=this.contentViewModels[q];q instanceof u&&q.previous()};e._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};e._graphicChanged=function(){var q=d._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:w}=this;if(w){var R=new AbortController;this._featureAbortController=R;try{yield this._queryFeature({signal:R.signal})}catch(Q){L.isAbortError(Q)||
(this._error=Q,S.error("error","The popupTemplate could not be displayed for this feature.",{error:Q,graphic:w,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===R&&(this._featureAbortController=null)}});return function(){return q.apply(this,arguments)}}();e._cancelFeatureQuery=function(){const {_featureAbortController:q}=this;q&&q.abort();this._featureAbortController=null};e._compileContentElement=function(q,w){if("attachments"===q.type)return this._compileAttachments(q,
w);if("custom"===q.type)return this._compileCustom(q,w);if("fields"===q.type)return this._compileFields(q,w);if("media"===q.type)return this._compileMedia(q,w);if("text"===q.type)return this._compileText(q,w);if("expression"===q.type)return this._compileExpression(q,w)};e._compileContent=function(q){this._destroyContentViewModels();if(this.graphic)return Array.isArray(q)?q.filter(this._isAllowedContentType).map((w,R)=>this._compileContentElement(w,R)):"string"===typeof q?this._compileText(new x({text:q}),
0).text:q};e._destroyContentViewModels=function(){var q;null==(q=this._handles)?void 0:q.remove("content-view-models");this.contentViewModels.forEach(w=>w&&!w.destroyed&&w.destroy());this._set("contentViewModels",[])};e._setExpressionContentVM=function(q,w){const {formattedAttributes:R}=this,{contentElement:Q,contentElementViewModel:c}=q;q=null==Q?void 0:Q.type;c&&q&&("fields"===q&&(this._createFieldsFormattedAttributes({contentElement:Q,contentElementIndex:w,formattedAttributes:R}),c.set(this._createFieldsVMParams(Q,
w))),"media"===q&&(this._createMediaFormattedAttributes({contentElement:Q,contentElementIndex:w,formattedAttributes:R}),c.set(this._createMediaVMParams(Q,w))),"text"===q&&c.set(this._createTextVMParams(Q)))};e._compileExpression=function(q,w){const {expressionInfo:R}=q,{graphic:Q,map:c,spatialReference:z,view:B}=this,U=new g({expressionInfo:R,graphic:Q,interceptor:N.interceptor,map:c,spatialReference:z,view:B});this.contentViewModels[w]=U;this._handles.add(H.watch(()=>U.contentElementViewModel,()=>
this._setExpressionContentVM(U,w),H.initial),"content-view-models");return q};e._compileAttachments=function(q,w){const {graphic:R}=this,{description:Q,title:c}=q;this.contentViewModels[w]=new C({graphic:R,...this._compileTitleAndDesc({title:c,description:Q})});return q};e._compileCustom=function(q,w){const {graphic:R}=this,{creator:Q,destroyer:c}=q;this.contentViewModels[w]=new h({graphic:R,creator:Q,destroyer:c});return q};e._compileTitleAndDesc=function({title:q,description:w}){const {_fieldInfoMap:R,
_sourceLayer:Q,graphic:c,formattedAttributes:z,_expressionAttributes:B}=this,{attributes:U}=c,Y=z.global;return{title:k.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:R,globalAttributes:Y,expressionAttributes:B,layer:Q,text:q}),description:k.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:R,globalAttributes:Y,expressionAttributes:B,layer:Q,text:w})}};e._createFieldsVMParams=function(q,w){const {_effectivePopupTemplate:R,formattedAttributes:Q}=this,c={...Q.global,...Q.content[w]};
w=(null==q?void 0:q.fieldInfos)||(null==R?void 0:R.fieldInfos);w=null==w?void 0:w.filter(({fieldName:Y})=>k.isExpressionField(Y)||k.isRelatedField(Y)||c.hasOwnProperty(Y));const z=null==R?void 0:R.expressionInfos,{description:B,title:U}=q;return{attributes:c,expressionInfos:z,fieldInfos:w,...this._compileTitleAndDesc({title:U,description:B})}};e._compileFields=function(q,w){const R=q.clone();q=new r(this._createFieldsVMParams(q,w));this.contentViewModels[w]=q;R.fieldInfos=q.formattedFieldInfos.slice(0);
return R};e._createMediaVMParams=function(q,w){const {abilities:R,graphic:Q,_fieldInfoMap:c,formattedAttributes:z,_effectivePopupTemplate:B,relatedInfos:U,_sourceLayer:Y,_expressionAttributes:aa}=this,{attributes:ca}=Q,{description:na,mediaInfos:ba,title:ra}=q;return{abilities:{chartAnimation:R.chartAnimation},activeMediaInfoIndex:q.activeMediaInfoIndex||0,attributes:ca,layer:Y,fieldInfoMap:c,formattedAttributes:{...z.global,...z.content[w]},expressionAttributes:aa,mediaInfos:ba,popupTemplate:B,relatedInfos:U,
...this._compileTitleAndDesc({title:ra,description:na})}};e._compileMedia=function(q,w){const R=q.clone();q=new u(this._createMediaVMParams(q,w));R.mediaInfos=q.formattedMediaInfos.slice(0);this.contentViewModels[w]=q;return R};e._createTextVMParams=function(q){const {graphic:w,_fieldInfoMap:R,_sourceLayer:Q,_expressionAttributes:c}=this;if(q&&q.text){const {attributes:z}=w;q.text=k.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:R,globalAttributes:this.formattedAttributes.global,
expressionAttributes:c,layer:Q,text:q.text})}return{graphic:w,creator:q.text}};e._compileText=function(q,w){q=q.clone();this.contentViewModels[w]=new h(this._createTextVMParams(q));return q};e._compileLastEditInfo=function(){const {_effectivePopupTemplate:q,_sourceLayer:w,graphic:R}=this;if(q){var {lastEditInfoEnabled:Q}=q,c=null==w?void 0:w.editFieldsInfo;if(Q&&c)return k.formatEditInfo(c,R.attributes)}};e._compileTitle=function(q){const {_fieldInfoMap:w,_sourceLayer:R,graphic:Q,_expressionAttributes:c}=
this,{attributes:z}=Q;return k.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:w,globalAttributes:this.formattedAttributes.global,expressionAttributes:c,layer:R,text:q})};e._getTitle=function(){var q=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:w,graphic:R}=this;return k.graphicCallback(null==w?void 0:w.title,{graphic:R})});return function(){return q.apply(this,arguments)}}();e._getContent=function(){var q=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:w,
graphic:R}=this;return k.graphicCallback(null==w?void 0:w.content,{graphic:R})});return function(){return q.apply(this,arguments)}}();e._queryFeature=function(){var q=d._asyncToGenerator(function*(w){const {_featureAbortController:R,_sourceLayer:Q,graphic:c,_effectivePopupTemplate:z,spatialReference:B,map:U,view:Y}=this,{content:{value:aa},title:{value:ca}}=yield L.eachAlways({content:this._getContent(),title:this._getTitle()});R===this._featureAbortController&&c&&(yield k.queryUpdatedFeature({graphic:c,
popupTemplate:z,layer:Q,spatialReference:B},w),{expressionAttributes:{value:w}}=yield L.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(w),expressionAttributes:p.createCompiledExpressions({expressionInfos:null==z?void 0:z.expressionInfos,spatialReference:B,graphic:c,map:U,interceptor:N.interceptor,view:Y})}),R===this._featureAbortController&&c&&(this._expressionAttributes=w,this._graphicExpressionAttributes={...c.attributes,...w},this._set("formattedAttributes",this._createFormattedAttributes(aa)),
this._set("title",this._compileTitle(ca)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(aa)||null)))});return function(w){return q.apply(this,arguments)}}();e._createMediaFormattedAttributes=function({contentElement:q,contentElementIndex:w,formattedAttributes:R}){const {_effectivePopupTemplate:Q,graphic:c,relatedInfos:z,_sourceLayer:B,_fieldInfoMap:U,_graphicExpressionAttributes:Y}=this;R.content[w]=k.formatAttributes({fieldInfos:null==Q?void 0:
Q.fieldInfos,graphic:c,attributes:{...Y,...q.attributes},layer:B,fieldInfoMap:U,relatedInfos:z})};e._createFieldsFormattedAttributes=function({contentElement:q,contentElementIndex:w,formattedAttributes:R}){if(q.fieldInfos){const {graphic:Q,relatedInfos:c,_sourceLayer:z,_fieldInfoMap:B,_graphicExpressionAttributes:U}=this;R.content[w]=k.formatAttributes({fieldInfos:q.fieldInfos,graphic:Q,attributes:{...U,...q.attributes},layer:z,fieldInfoMap:B,relatedInfos:c})}};e._createFormattedAttributes=function(q){const {_effectivePopupTemplate:w,
graphic:R,relatedInfos:Q,_sourceLayer:c,_fieldInfoMap:z,_graphicExpressionAttributes:B}=this,U={global:k.formatAttributes({fieldInfos:null==w?void 0:w.fieldInfos,graphic:R,attributes:B,layer:c,fieldInfoMap:z,relatedInfos:Q}),content:[]};Array.isArray(q)&&q.forEach((Y,aa)=>{"fields"===Y.type&&this._createFieldsFormattedAttributes({contentElement:Y,contentElementIndex:aa,formattedAttributes:U});"media"===Y.type&&this._createMediaFormattedAttributes({contentElement:Y,contentElementIndex:aa,formattedAttributes:U})});
return U};e._checkForRelatedFeatures=function(q){const {graphic:w,_effectivePopupTemplate:R}=this;return this._queryRelatedInfos(w,k.getAllFieldInfos(R),q)};e._queryRelatedInfos=function(){var q=d._asyncToGenerator(function*(w,R,Q){const {relatedInfos:c,_sourceLayer:z}=this;c.clear();const B=O.isSome(z.associatedLayer)?yield z.associatedLayer.load(Q):z;if(B){var U=R.filter(ca=>ca&&k.isRelatedField(ca.fieldName));if(U&&U.length){R.forEach(ca=>this._configureRelatedInfo(ca,B));var Y=yield D.queryLayerInfos({relatedInfos:c,
layer:B},Q);Object.keys(Y).forEach(ca=>{var na;const ba=c.get(ca.toString());ca=null==(na=Y[ca])?void 0:na.value;ba&&ca&&(ba.layerInfo=ca.data)});var aa=yield D.queryRelatedFeatures({graphic:w,relatedInfos:c,layer:B},Q);Object.keys(aa).forEach(ca=>{var na;D.setRelatedFeatures(null==(na=aa[ca])?void 0:na.value,c.get(ca.toString()))})}}});return function(w,R,Q){return q.apply(this,arguments)}}();e._configureRelatedInfo=function(q,w){const {relatedInfos:R}=this,Q=D.getRelatedFieldInfo(q.fieldName);if(Q){var {layerId:c,
fieldName:z}=Q;c&&(w=R.get(c.toString())||D.createRelatedInfo(c,w))&&(D.updateRelatedInfo({relatedInfo:w,fieldName:z,fieldInfo:q}),this.relatedInfos.set(c,w))}};d._createClass(K,[{key:"_effectivePopupTemplate",get:function(){return O.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return k.createfieldInfoMap(k.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return k.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(q){this._set("graphic",q?q.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(q){void 0===q?this._clearOverride("spatialReference"):this._override("spatialReference",q)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(q){void 0===q?this._clearOverride("map"):
this._override("map",q)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return K}(f);f.interceptor=new F.FeatureSetQueryInterceptor(k.preLayerQueryCallback,k.preRequestCallback);l.__decorate([m.property()],f.prototype,"_error",void 0);l.__decorate([m.property()],f.prototype,"_featureAbortController",void 0);l.__decorate([m.property({readOnly:!0})],f.prototype,"_effectivePopupTemplate",null);l.__decorate([m.property({readOnly:!0})],f.prototype,"_fieldInfoMap",null);
l.__decorate([m.property({readOnly:!0})],f.prototype,"_sourceLayer",null);l.__decorate([m.property()],f.prototype,"abilities",void 0);l.__decorate([G.cast("abilities")],f.prototype,"castAbilities",null);l.__decorate([m.property({readOnly:!0})],f.prototype,"content",void 0);l.__decorate([m.property({readOnly:!0})],f.prototype,"contentViewModels",void 0);l.__decorate([m.property({type:Boolean})],f.prototype,"defaultPopupTemplateEnabled",void 0);l.__decorate([m.property({readOnly:!0})],f.prototype,"state",
null);l.__decorate([m.property({readOnly:!0})],f.prototype,"formattedAttributes",void 0);l.__decorate([m.property({type:b,value:null})],f.prototype,"graphic",null);l.__decorate([m.property({readOnly:!0})],f.prototype,"lastEditInfo",void 0);l.__decorate([m.property({readOnly:!0})],f.prototype,"relatedInfos",void 0);l.__decorate([m.property()],f.prototype,"spatialReference",null);l.__decorate([m.property({readOnly:!0})],f.prototype,"title",void 0);l.__decorate([m.property()],f.prototype,"map",null);
l.__decorate([m.property({readOnly:!0})],f.prototype,"waitingForContent",null);l.__decorate([m.property()],f.prototype,"view",void 0);return f=N=l.__decorate([E.subclass("esri.widgets.FeatureViewModel")],f)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(d){d.FeatureSetQueryInterceptor=function(l,b){this.preLayerQueryCallback=l;this.preRequestCallback=b;this.preLayerQueryCallback||(this.preLayerQueryCallback=F=>{});this.preRequestCallback||(this.preLayerQueryCallback=
F=>{})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(d,
l,b,F,f,J,I,O,L,H,A){d.FeatureContentMixin=m=>{m=function(n){function y(){var G=n.apply(this,arguments)||this;G.renderNodeContent=E=>H.isWidget(E)&&!E.destroyed?A.tsx("div",{key:E},E.render()):E instanceof HTMLElement?A.tsx("div",{key:E,bind:E,afterCreate:G._attachToNode}):H.hasDomNode(E)?A.tsx("div",{key:E,bind:E.domNode,afterCreate:G._attachToNode}):null;return G}l._inheritsLoose(y,n);y.prototype._attachToNode=function(G){G.appendChild(this)};return y}(m);return m=b.__decorate([L.subclass("esri.widgets.Feature.ContentMixin")],
m)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S,P,v,K,e){const q=J.ofType({key:"type",defaultKeyValue:"button",base:h,typeMap:{button:g,toggle:r}}),w=L.getLogger("esri.widgets.Popup.PopupViewModel");b=function(R){function Q(z){z=R.call(this,z)||this;z._handles=new O;z._pendingPromises=new Set;z._fetchFeaturesController=null;z._selectedClusterFeature=null;z.featurePage=null;z.actions=new q;z.activeFeature=null;z.defaultPopupTemplateEnabled=!1;z.autoCloseEnabled=!1;z.autoOpenEnabled=
!0;z.browseClusterEnabled=!1;z.content=null;z.featuresPerPage=20;z.featureViewModelAbilities=null;z.featureViewModels=[];z.highlightEnabled=!0;z.includeDefaultActions=!0;z.selectedClusterBoundaryFeature=new F({symbol:new e({outline:{width:1.5,color:"cyan"},style:"none"})});z.title=null;z.updateLocationEnabled=!1;z.view=null;z.visible=!1;z.zoomFactor=4;z.zoomToLocation=null;return z}d._inheritsLoose(Q,R);var c=Q.prototype;c.initialize=function(){this._handles.add([A.watch(()=>[this.autoOpenEnabled,
this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),A.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),A.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),A.watch(()=>{var z,B;return null==(z=this.view)?void 0:null==(B=z.animation)?void 0:B.state},z=>this._animationStateChange(z)),A.watch(()=>this.location,z=>this._locationChange(z)),
A.watch(()=>this.selectedFeature,z=>this._selectedFeatureChange(z)),A.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),A.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),A.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",z=>S.triggerAction({event:z,view:this.view})),A.when(()=>
!this.waitingForResult,()=>this._waitingForResultChange(),A.sync),A.watch(()=>{var z,B;return[this.features,null==(z=this.view)?void 0:z.map,null==(B=this.view)?void 0:B.spatialReference]},()=>this._updateFeatureVMs()),A.watch(()=>{var z;return null==(z=this.view)?void 0:z.scale},()=>this._viewScaleChange()),A.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),A.watch(()=>this.browseClusterEnabled,z=>z?this.enableClusterBrowsing():this.disableClusterBrowsing())])};c.destroy=function(){this._cancelFetchingFeatures();
this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};c.centerAtLocation=function(){var {view:z}=this;const B=S.getSelectedTarget(this);return B?this.callGoTo({target:{target:B,scale:z.scale}}):(z=new I("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:B,view:z}),w.error(z),Promise.reject(z))};c.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,
activeFeature:null})};c.fetchFeatures=function(z,B){const {view:U}=this;return U&&z?U.fetchPopupFeatures(z,{event:B&&B.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:B&&B.signal}):(z=new I("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:z,view:U}),w.error(z),Promise.reject(z))};c.open=function(z){z={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...z,visible:!0};var {fetchFeatures:B}=z;delete z.fetchFeatures;
B&&this._setFetchFeaturesPromises(z.location);B=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const U of B)delete z[U];this.set(z)};c.triggerAction=function(z){(z=this.allActions.getItemAt(z))&&!z.disabled&&this.emit("trigger-action",{action:z})};c.next=function(){this.selectedFeatureIndex+=1;return this};c.previous=function(){--this.selectedFeatureIndex;return this};c.disableClusterBrowsing=function(){S.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};c.enableClusterBrowsing=
function(){var z=d._asyncToGenerator(function*(){const {view:B,selectedFeature:U}=this;"2d"!==(null==B?void 0:B.type)?w.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",U):S.isClusterFeature(U)?(yield S.displayClusterExtent(this),yield S.browseAggregateFeatures(this)):w.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",U)});return function(){return z.apply(this,arguments)}}();c._animationStateChange=function(z){this.zoomToLocation||
(N.zoomToFeature.disabled="waiting-for-target"===z)};c._clearBrowsedClusterGraphics=function(){var z;const B=null==(z=this.view)?void 0:z.graphics;B&&(B.remove(this.selectedClusterBoundaryFeature),B.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};c._viewScaleChange=function(){S.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};
c._locationChange=function(z){const {selectedFeature:B,updateLocationEnabled:U}=this;U&&z&&(!B||B.geometry)&&this.centerAtLocation()};c._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};c._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};c._setGraphicOnFeatureViewModels=function(){const {features:z,featureCount:B,featurePage:U,featuresPerPage:Y,featureViewModels:aa}=this;if(null!==
U){var ca=((U-1)*Y+B)%B;aa.slice(ca,ca+Y).forEach((na,ba)=>{na&&!na.graphic&&(na.graphic=z[ca+ba])})}};c._selectedFeatureChange=function(){var z=d._asyncToGenerator(function*(B){if(B){var {location:U,updateLocationEnabled:Y,view:aa}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(aa.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),S.isClusterFeature(B)||(B.symbol=yield u.getDisplayedSymbol(B),this._selectedClusterFeature=B,aa.graphics.add(this._selectedClusterFeature))):
!Y&&U||!B.geometry?Y&&!B.geometry&&this.centerAtLocation().then(()=>{this.location=aa.center.clone()}):this.location=H.unwrap(this._getPointFromGeometry(B.geometry))}});return function(B){return z.apply(this,arguments)}}();c._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};c._setFetchFeaturesPromises=function(z){return this._fetchFeaturesWithController(this._getScreenPoint(z||this.location)).then(B=>{const {clientOnlyGraphics:U,promisesPerLayerView:Y}=B;B=Promise.resolve(U);
const aa=Y.map(ca=>ca.promise);this.promises=[B,...aa]})};c._destroyFeatureVMs=function(){this.featureViewModels.forEach(z=>z&&!z.destroyed&&z.destroy());this._set("featureViewModels",[])};c._updateFeatureVMs=function(){const {selectedFeature:z,features:B,featureViewModels:U}=this;S.isClusterFeature(z)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(B&&B.length){var Y=U.slice(0),aa=[];B.forEach((ca,na)=>{if(ca){var ba=null;Y.some((Ba,ka)=>{Ba&&Ba.graphic===ca&&(ba=Ba,Y.splice(ka,1));
return!!ba});if(ba)aa[na]=ba;else{var ra,ua;const Ba=new D({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(ra=this.view)?void 0:ra.spatialReference,graphic:ca===z?ca:null,map:null==(ua=this.view)?void 0:ua.map,view:this.view});aa[na]=Ba}}});Y.forEach(ca=>ca&&!ca.destroyed&&ca.destroy());this._set("featureViewModels",aa)}};c._getScreenPoint=function(z){const {view:B}=this;return B&&z&&"function"===typeof B.toScreen?B.toScreen(z):
null};c._autoOpenEnabledChange=function(){const {_handles:z,autoOpenEnabled:B}=this;z.remove("auto-fetch-features");if(B&&this.view){const U=this.view.on("click",Y=>{"mouse"===Y.pointerType&&0!==Y.button||this._fetchFeaturesAndOpen(Y)},p.ViewEventPriorities.WIDGET);z.add(U,"auto-fetch-features")}};c._cancelFetchingFeatures=function(){const z=this._fetchFeaturesController;z&&z.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};c._fetchFeaturesWithController=function(z,
B){this._cancelFetchingFeatures();const U=new AbortController,{signal:Y}=U;this._fetchFeaturesController=U;this.notifyChange("waitingForResult");z=this.fetchFeatures(z,{signal:Y,event:B});z.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return z};c._fetchFeaturesAndOpen=function(z){const {screenPoint:B,mapPoint:U}=z,{view:Y}=this;this._fetchFeaturesWithController(B,z).then(aa=>{const {clientOnlyGraphics:ca,promisesPerLayerView:na,location:ba}=aa,
ra=[Promise.resolve(ca),...na.map(ua=>ua.promise)];Y.popup.open({location:ba||U,promises:ra});return aa})};c._updatePendingPromises=function(z){z&&this._pendingPromises.has(z)&&(this._pendingPromises.delete(z),this.notifyChange("pendingPromisesCount"))};c._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};c._getPointFromGeometry=function(z){return H.isNone(z)?null:"point"===z.type?z:"extent"===z.type?z.center:"polygon"===z.type?z.centroid:"multipoint"===z.type||"polyline"===z.type?z.extent.center:
null};c._getLayerView=function(){var z=d._asyncToGenerator(function*(B,U){yield B.when();return B.whenLayerView(U)});return function(B,U){return z.apply(this,arguments)}}();c._getHighlightLayer=function(z){const {layer:B,sourceLayer:U}=z;return"map-notes"===(null==U?void 0:U.type)||"subtype-group"===(null==U?void 0:U.type)?U:B};c._getHighlightTarget=function(z,B){B="imagery"===B.type?void 0:"objectIdField"in B&&B.objectIdField;const U=z.attributes;return U&&B&&U[B]||z};c._highlightActiveFeature=function(){var z=
d._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");const {highlightEnabled:B,view:U,activeFeature:Y,visible:aa}=this;if(Y&&U&&B&&aa){var ca=this._getHighlightLayer(Y);if(ca&&ca instanceof C){var na=this._getLayerView(U,ca);this._highlightActiveFeaturePromise=na;var ba=yield na;ba&&k.highlightsSupported(ba)&&this._highlightActiveFeaturePromise===na&&this.activeFeature&&this.highlightEnabled&&(ca=ba.highlight(this._getHighlightTarget(Y,ca)),this._handles.add(ca,"highlight-active-feature"))}}});
return function(){return z.apply(this,arguments)}}();c._highlightSelectedFeature=function(){var z=d._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:B,highlightEnabled:U,view:Y,visible:aa}=this;if(B&&Y&&U&&aa){var ca=this._getHighlightLayer(B);if(ca&&ca instanceof C){var na=this._getLayerView(Y,ca);this._highlightSelectedFeaturePromise=na;var ba=yield na;ba&&k.highlightsSupported(ba)&&this._highlightSelectedFeaturePromise===na&&this.selectedFeature&&
this.highlightEnabled&&this.visible&&(ca=ba.highlight(this._getHighlightTarget(B,ca)),this._handles.add(ca,"highlight-selected-feature"))}}});return function(){return z.apply(this,arguments)}}();c._updateFeatures=function(z){const {features:B}=this;z&&z.length&&(B.length?(z=z.filter(U=>!B.includes(U)),this.features=B.concat(z)):this.features=z)};d._createClass(Q,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(z=>z.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||
this.waitingForResult)}},{key:"allActions",get:function(){const z=this._get("allActions")||new q;z.removeAll();const {actions:B,defaultActions:U,defaultPopupTemplateEnabled:Y,includeDefaultActions:aa,selectedFeature:ca}=this;var na=aa?U.concat(B):B;const ba=ca&&("function"===typeof ca.getEffectivePopupTemplate&&ca.getEffectivePopupTemplate(Y)||ca.popupTemplate),ra=ba&&ba.actions;(na=ba&&ba.overwriteActions?ra:ra?ra.concat(na):na)&&na.filter(Boolean).forEach(ua=>z.add(ua));return z}},{key:"defaultActions",
get:function(){const z=this._get("defaultActions")||new q;z.removeAll();z.addMany(S.isClusterFeature(this.selectedFeature)?[N.zoomToClusteredFeatures.clone(),N.browseClusteredFeatures.clone()]:[N.zoomToFeature.clone()]);return z}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(z){z=z||[];this._set("features",z);const {pendingPromisesCount:B,promiseCount:U,selectedFeatureIndex:Y}=this,aa=U&&z.length;aa&&
B&&-1===Y?this.selectedFeatureIndex=0:aa&&-1!==Y||(this.selectedFeatureIndex=z.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(z){const B=this.get("view.spatialReference.isWebMercator");z&&z.get("spatialReference.isWGS84")&&B&&(z=x.geographicToWebMercator(z));this._set("location",z)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||
0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(z){this._pendingPromises.clear();this.features=[];Array.isArray(z)&&z.length?(this._set("promises",z),z=z.slice(0),z.forEach(B=>{this._pendingPromises.add(B);B.then(U=>{this._pendingPromises.has(B)&&this._updateFeatures(U);this._updatePendingPromises(B)},()=>this._updatePendingPromises(B))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},
{key:"selectedFeature",get:function(){const {features:z,selectedFeatureIndex:B}=this;return-1===B?null:z[B]||null}},{key:"selectedFeatureIndex",get:function(){const z=this._get("selectedFeatureIndex");return"number"===typeof z?z:-1},set:function(z){const {featureCount:B}=this;z=isNaN(z)||-1>z||!B?-1:(z+B)%B;this.activeFeature=null;this._set("selectedFeatureIndex",z)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?
"ready":"disabled"}}]);return Q}(v.GoToMixin(P));l.__decorate([m.property()],b.prototype,"featurePage",void 0);l.__decorate([m.property()],b.prototype,"isLoadingFeature",null);l.__decorate([m.property({type:q})],b.prototype,"actions",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"active",null);l.__decorate([m.property()],b.prototype,"activeFeature",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"allActions",null);l.__decorate([m.property({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",
void 0);l.__decorate([m.property()],b.prototype,"autoCloseEnabled",void 0);l.__decorate([m.property()],b.prototype,"autoOpenEnabled",void 0);l.__decorate([m.property()],b.prototype,"browseClusterEnabled",void 0);l.__decorate([m.property()],b.prototype,"content",void 0);l.__decorate([m.property({type:q,readOnly:!0})],b.prototype,"defaultActions",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"featureCount",null);l.__decorate([m.property()],b.prototype,"features",null);l.__decorate([m.property()],
b.prototype,"featuresPerPage",void 0);l.__decorate([m.property()],b.prototype,"featureViewModelAbilities",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"featureViewModels",void 0);l.__decorate([m.property()],b.prototype,"highlightEnabled",void 0);l.__decorate([m.property()],b.prototype,"includeDefaultActions",void 0);l.__decorate([m.property({type:K})],b.prototype,"location",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"pendingPromisesCount",null);l.__decorate([m.property({readOnly:!0})],
b.prototype,"selectedClusterBoundaryFeature",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"waitingForResult",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"promiseCount",null);l.__decorate([m.property()],b.prototype,"promises",null);l.__decorate([m.property({value:null,readOnly:!0})],b.prototype,"selectedFeature",null);l.__decorate([m.property({value:-1})],b.prototype,"selectedFeatureIndex",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"selectedFeatureViewModel",
null);l.__decorate([m.property({readOnly:!0})],b.prototype,"state",null);l.__decorate([m.property()],b.prototype,"title",void 0);l.__decorate([m.property()],b.prototype,"updateLocationEnabled",void 0);l.__decorate([m.property()],b.prototype,"view",void 0);l.__decorate([m.property()],b.prototype,"visible",void 0);l.__decorate([m.property()],b.prototype,"zoomFactor",void 0);l.__decorate([m.property()],b.prototype,"zoomToLocation",void 0);l.__decorate([m.property()],b.prototype,"centerAtLocation",null);
return b=l.__decorate([E.subclass("esri.widgets.Popup.PopupViewModel")],b)})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(d,l){const b=new l({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),F=new l({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),f=new l({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});
l=new l({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});d.all=[b,F,l,f];d.browseClusteredFeatures=l;d.removeSelectedFeature=F;d.zoomToClusteredFeatures=f;d.zoomToFeature=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),
function(d,l,b,F,f,J){function I(x){const {selectedFeature:C,location:h,view:g}=x;return g?"3d"===g.type?C||h:x.get("selectedFeature.geometry")||h:null}function O(x){var C,h;return(null==x?void 0:x.isAggregate)&&"cluster"===(null==x?void 0:null==(C=x.sourceLayer)?void 0:null==(h=C.featureReduction)?void 0:h.type)}function L(x,C){if("3d"!==(null==C?void 0:C.type)||!x||"esri.Graphic"!==x.declaredClass)return!0;if((C=C.getViewForGraphic(x))&&"whenGraphicBounds"in C){let h=!1;C.whenGraphicBounds(x,{useViewElevation:!0}).then(g=>
{h=!g||!g.boundingBox||g.boundingBox[0]===g.boundingBox[3]&&g.boundingBox[1]===g.boundingBox[4]&&g.boundingBox[2]===g.boundingBox[5]}).catch(()=>{const g=new b("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:x});E.error(g)});return h}return!0}function H(x){return A.apply(this,arguments)}function A(){A=l._asyncToGenerator(function*(x){const {location:C,selectedFeature:h,view:g,zoomFactor:r}=x,u=I(x);if(!u)throw x=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",
{target:u,view:g}),E.error(x),x;const p=g.scale/r,k=x.get("selectedFeature.geometry")||C,D=k&&"point"===k.type&&L(h,g);J.zoomToFeature.active=!0;J.zoomToFeature.disabled=!0;try{yield x.view.goTo({target:u,scale:D?p:void 0})}finally{J.zoomToFeature.active=!1,J.zoomToFeature.disabled=!1,x.zoomToLocation=null,D&&(x.location=k)}});return A.apply(this,arguments)}function m(x){return n.apply(this,arguments)}function n(){n=l._asyncToGenerator(function*(x){const {selectedFeature:C,view:h}=x;if("2d"!==(null==
h?void 0:h.type))throw x=new b("zoomToCluster:invalid-view","View must be 2d MapView.",{view:h}),E.error(x),x;if(!O(C))throw x=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:C}),E.error(x),x;x=yield h.whenLayerView(C.sourceLayer);const g=x.createQuery();g.aggregateIds=[C.getObjectId()];J.zoomToClusteredFeatures.active=!0;J.zoomToClusteredFeatures.disabled=!0;({extent:x}=yield x.queryExtent(g));yield h.goTo({target:x});
J.zoomToClusteredFeatures.active=!1;J.zoomToClusteredFeatures.disabled=!1});return n.apply(this,arguments)}function y(){y=l._asyncToGenerator(function*(x){const {selectedFeature:C,view:h}=x;var g=yield h.whenLayerView(C.sourceLayer);const r=g.createQuery();r.aggregateIds=[C.getObjectId()];({extent:g}=yield g.queryExtent(r));x.selectedClusterBoundaryFeature.geometry=g;h.graphics.add(x.selectedClusterBoundaryFeature)});return y.apply(this,arguments)}function G(){G=l._asyncToGenerator(function*(x){const {selectedFeature:C,
view:h}=x;x=yield h.whenLayerView(C.sourceLayer);const g=x.createQuery();g.aggregateIds=[C.getObjectId()];J.browseClusteredFeatures.active=!0;J.browseClusteredFeatures.disabled=!0;({features:x}=yield x.queryFeatures(g));J.browseClusteredFeatures.active=!1;J.browseClusteredFeatures.disabled=!1;h.popup.open({features:[C].concat(x),featureMenuOpen:!0})});return G.apply(this,arguments)}const E=F.getLogger("esri.widgets.Popup.PopupViewModel");d.browseAggregateFeatures=function(x){return G.apply(this,arguments)};
d.displayClusterExtent=function(x){return y.apply(this,arguments)};d.getSelectedTarget=I;d.isClusterFeature=O;d.isZoomScreenSize=L;d.removeClusteredFeaturesForBrowsing=function(x){const C=x.features.filter(h=>O(h));C.length&&(x.features=C)};d.triggerAction=x=>{const {event:C,view:h}=x;({action:x}=C);var g=h&&h.popup;if(!x)return Promise.reject(new b("trigger-action:missing-arguments","Event has no action"));if(!g)return Promise.reject(new b("trigger-action:missing-arguments","view.popup is missing"));
const {disabled:r,id:u}=x;if(!u)return Promise.reject(new b("trigger-action:invalid-action","action.id is missing"));if(r)return Promise.reject(new b("trigger-action:invalid-action","Action is disabled"));if(u===J.zoomToFeature.id)return H(g.viewModel).catch(f.throwIfNotAbortError);if(u===J.zoomToClusteredFeatures.id)return m(g.viewModel);if(u===J.browseClusteredFeatures.id)return g.featureMenuOpen=!g.featureMenuOpen,g.viewModel.browseClusterEnabled=!g.viewModel.browseClusterEnabled,Promise.resolve();
g.viewModel.browseClusterEnabled=!1;if(u===J.removeSelectedFeature.id){g.close();({selectedFeature:x}=g);if(!x)return Promise.reject(new b(`trigger-action:${J.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:x}));({sourceLayer:g}=x);g?g.remove(x):h.graphics.remove(x)}return Promise.resolve()};d.zoomToClusterExtent=m;d.zoomToLocation=H;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O){d.GoToMixin=L=>{L=function(H){function A(...m){m=H.call(this,...m)||this;m.goToOverride=null;m.view=null;return m}l._inheritsLoose(A,H);A.prototype.callGoTo=function(m){const {view:n}=this;return this.goToOverride?this.goToOverride(n,m):n.goTo(m.target,m.options)};return A}(L);b.__decorate([F.property()],L.prototype,"goToOverride",void 0);b.__decorate([F.property()],L.prototype,"view",void 0);return L=b.__decorate([O.subclass("esri.widgets.support.GoTo")],L)};Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(d,l){d.SupportedGraphicResult=void 0;(function(b){b[b.SUPPORTED=0]="SUPPORTED";b[b.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";b[b.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";b[b.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";b[b.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";b[b.SYMBOL_TYPE_UNSUPPORTED=
5]="SYMBOL_TYPE_UNSUPPORTED"})(d.SupportedGraphicResult||(d.SupportedGraphicResult={}));d.isSupportedGraphicResultMessage=function(b){switch(b){case d.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case d.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case d.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case d.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";
case d.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,l,b,F,f){d.isSupportedGraphic=function(J){var I;if("graphics"!==
(null==(I=J.layer)?void 0:I.type))return f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(b.isNone(J.geometry))return f.SupportedGraphicResult.GEOMETRY_MISSING;switch(J.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==F.getGraphicEffectiveElevationMode(J)&&F.hasGraphicFeatureExpressionInfo(J)?
f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:f.SupportedGraphicResult.SUPPORTED};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(d,l,b){function F(H,A){return l.isNone(A)||!A.mode?H?"absolute-height":"on-the-ground":A.mode}function f(H,A){return F(l.isSome(H)?H.hasZ:!1,A)}function J(H){const A=I(H);return f(H.geometry,
A)}function I(H){return H.layer&&"elevationInfo"in H.layer?H.layer.elevationInfo:null}function O(H,A,m,n,y,G,E=null){if(!l.isNone(G)){var x=l.isSome(E)?E.mode:"absolute-height";if("on-the-ground"===x)return 0;({absoluteZ:G}=L(A,m,n,y,H,G));a:{E=l.isSome(E)&&l.isSome(E.offset)?E.offset:0;switch(x){case "absolute-height":H=G-E;break a;case "relative-to-ground":H=G-(l.unwrapOr(H.elevationProvider.getElevation(A,m,n,y,"ground"),0)+E);break a;case "relative-to-scene":H=G-(l.unwrapOr(H.elevationProvider.getElevation(A,
m,n,y,"scene"),0)+E);break a}H=void 0}return H}}function L(H,A,m,n,y,G){const E=l.isSome(G.offset)?G.offset:0;switch(G.mode){case "absolute-height":return{absoluteZ:m+E,elevation:0};case "on-the-ground":return m=l.unwrapOr(y.elevationProvider.getElevation(H,A,0,n,"ground"),0),{absoluteZ:m,elevation:m};case "relative-to-ground":return H=l.unwrapOr(y.elevationProvider.getElevation(H,A,m,n,"ground"),0),{absoluteZ:m+H+E,elevation:H};case "relative-to-scene":return H=l.unwrapOr(y.elevationProvider.getElevation(H,
A,m,n,"scene"),0),{absoluteZ:m+H+E,elevation:H}}}d.absoluteHeightElevationInfo={mode:"absolute-height",offset:0};d.getConvertedElevation=function(H,A,m,n=null){return O(H,A.x,A.y,A.hasZ?A.z:0,A.spatialReference,m,n)};d.getConvertedElevationFromVector=function(H,A,m,n,y=null){return O(H,A[0],A[1],2<A.length?A[2]:0,m,n,y)};d.getEffectiveElevationMode=F;d.getGeometryEffectiveElevationMode=f;d.getGraphicEffectiveElevationInfo=function(H){var A=I(H);H=f(H.geometry,A);A=l.isSome(A)&&"on-the-ground"!==H?
l.unwrapOr(A.offset,0)*b.getMetersPerUnit(l.unwrapOr(A.unit,"meters")):0;return{mode:H,offset:A}};d.getGraphicEffectiveElevationMode=J;d.getZForElevationMode=function(H,A,m){if(!l.isNone(m)&&m.mode){var n=H.hasZ?H.z:0,y=l.isSome(m.offset)?m.offset:0;switch(m.mode){case "absolute-height":return n-y;case "on-the-ground":return 0;case "relative-to-ground":return H=l.unwrapOr(A.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"ground"),0)+y,n-H;case "relative-to-scene":return H=l.unwrapOr(A.elevationProvider.getElevation(H.x,
H.y,H.z,H.spatialReference,"scene"),0)+y,n-H}}};d.hasGraphicFeatureExpressionInfo=function(H){if("on-the-ground"===J(H))return!1;H=I(H);H=l.isSome(H)&&H.featureExpressionInfo?H.featureExpressionInfo.expression:null;return!(!H||"0"===H)};d.zValueInAbsoluteHeightMode=L;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle",
"../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,l,b,F,f){function J(I){var O;return"graphics"!==(null==(O=I.layer)?void 0:O.type)?{result:f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:l.isNone(I.geometry)?{result:f.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==F.getGraphicEffectiveElevationMode(I)&&F.hasGraphicFeatureExpressionInfo(I)?{result:f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,geometry:null}:"point"!==
I.geometry.type&&"polyline"!==I.geometry.type&&("polygon"!==I.geometry.type||I.geometry instanceof b)?{result:f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:f.SupportedGraphicResult.SUPPORTED,geometry:I.geometry}}d.geometryOfSupportedGraphic=function(I){return J(I).geometry};d.isSupportedGraphic=function(I){return J(I).result};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y){var G;f=G=function(E){function x(...h){h=E.call(this,...h)||this;h.center=null;h.geodesic=!1;h.numberOfPoints=60;h.radius=1E3;h.radiusUnit="meters";return h}d._inheritsLoose(x,E);var C=x.prototype;C.normalizeCtorArgs=function(h,g){if(!h||!h.center){if(h&&h.rings)return E.prototype.normalizeCtorArgs.call(this,h,g);h={center:h}}return{...E.prototype.normalizeCtorArgs.call(this),...h,...g}};C.initialize=function(){var h=this.center;const g=this.numberOfPoints;this.hasZ=
h&&h.hasZ;if(0===this.rings.length&&h){var r=b.convertUnit(this.radius,this.radiusUnit,"meters"),u=h.spatialReference,p="geographic";if(u.isWebMercator)p="webMercator";else if(null!=y[u.wkid]||u.wkt&&0===u.wkt.indexOf("PROJCS"))p="projected";if(this.geodesic){let k;switch(p){case "webMercator":k=n.webMercatorToGeographic(h);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":k=
h}h=this._createGeodesicCircle(k,r,g);"webMercator"===p&&(h=n.geographicToWebMercator(h))}else{let k;"webMercator"===p||"projected"===p?k=r/this._convert2Meters(1,h.spatialReference):"geographic"===p&&(k=b.lengthToDegrees(r,"meters",A.getReferenceEllipsoid(h.spatialReference).radius));h=this._createPlanarCircle(h,k,g)}this.spatialReference=h.spatialReference;this.addRing(h.rings[0])}};C.clone=function(){const {center:h,numberOfPoints:g,radius:r,radiusUnit:u,geodesic:p}=this;return new G({center:h.clone(),
numberOfPoints:g,radius:r,radiusUnit:u,geodesic:p})};C._createGeodesicCircle=function(h,g,r){let u=0;const p=[];for(;360>u;){const k=[0,0];m.directGeodeticSolver(k,[h.x,h.y],u,g);this.hasZ&&k.push(h.z);p.push(k);u+=360/r}p.push(p[0]);return new H(p)};C._createPlanarCircle=function(h,g,r){const u=[],p=2*Math.PI/r;for(let D=0;D<r;++D){var k=p*D;k=[h.x+Math.cos(-k)*g,h.y+Math.sin(-k)*g];this.hasZ&&k.push(h.z);u.push(k)}u.push(u[0]);return new H({spatialReference:h.spatialReference,rings:[u]})};C._convert2Meters=
function(h,g){if(null!=y[g.wkid])g=y.values[y[g.wkid]];else{g=g.wkt;const r=g.lastIndexOf(",")+1,u=g.lastIndexOf("]]");g=parseFloat(g.substring(r,u))}return h*g};return x}(H);l.__decorate([F.property({type:L})],f.prototype,"center",void 0);l.__decorate([F.property()],f.prototype,"geodesic",void 0);l.__decorate([F.property()],f.prototype,"numberOfPoints",void 0);l.__decorate([F.property()],f.prototype,"radius",void 0);l.__decorate([F.property()],f.prototype,"radiusUnit",void 0);return f=G=l.__decorate([O.subclass("esri.geometry.Circle")],
f)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(d,l,b,F,f,J,I,O,L,H){function A(h){if(!h)return null;if(J.isGeographic(h)&&h.wkid){var g=f.spheroids[h.wkid];if(g)return g}return h.wkt&&((h=f.WKT_SPHEROID_REGEX.exec(h.wkt))&&2===h.length?(g=h[1].split(","),!g||3>g.length?h=null:(h=parseFloat(g[1]),g=parseFloat(g[2]),
h=isNaN(h)||isNaN(g)?null:{a:h,f:0===g?0:1/g})):h=null,h)?h:null}function m(h){h=A(h||H.WGS84);if("b"in h&&"eSq"in h&&"radius"in h)return h;const g=h.a*(1-h.f);return Object.assign(h,{b:g,eSq:1-(g/h.a)**2,radius:(2*h.a+g)/3,densificationRatio:1E4/((2*h.a+g)/3)})}function n(h){return 0>h?h+360:h}function y(h,g,r){const {a:u,eSq:p}=m(r);r=Math.sqrt(p);const k=Math.sin(g[1]*f.toRadians);g=u*g[0]*f.toRadians;r=0<p?u*(1-p)*(k/(1-p*k*k)-1/(2*r)*Math.log((1-r*k)/(1+r*k)))*.5:u*k;h[0]=g;h[1]=r;return h}function G(h){return null!==
A(h)}function E(h,g){if("polyline"!==h.type&&"polygon"!==h.type)throw new b("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:r}=h;if(!G(r))throw new b("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var u="polyline"===h.type?h.paths:h.rings;const p=[],k=[0,0],D={distance:null};for(const P of u){u=[];p.push(u);u.push([P[0][0],P[0][1]]);var N=P[0][0],S=P[0][1];let v,K;for(let e=0;e<
P.length-1;e++){v=P[e+1][0];K=P[e+1][1];if(N===v&&S===K)continue;const q=[N,S];C(D,[N,S],[v,K],r);const {azimuth:w,distance:R}=D;N=R/g;if(1<N){for(S=1;S<=N-1;S++)x(k,q,w,S*g,r),u.push(k.slice(0));x(k,q,w,(R+Math.floor(N-1)*g)/2,r);u.push(k.slice(0))}x(k,q,w,R,r);u.push(k.slice(0));N=k[0];S=k[1]}}return"polyline"===h.type?new I({paths:p,spatialReference:r}):new O({rings:p,spatialReference:r})}function x(h,g,r,u,p){const k=g[0]*f.toRadians;g=g[1]*f.toRadians;r*=f.toRadians;const {a:D,b:N,f:S}=m(p);
p=Math.sin(r);r=Math.cos(r);var P=(1-S)*Math.tan(g);g=1/Math.sqrt(1+P*P);const v=P*g,K=Math.atan2(P,r);P=g*p;const e=P*P;var q=1-e,w=q*(D*D-N*N)/(N*N);const R=1+w/16384*(4096+w*(-768+w*(320-175*w))),Q=w/1024*(256+w*(-128+w*(74-47*w)));w=u/(N*R);let c=2*Math.PI,z,B,U,Y;for(;1E-12<Math.abs(w-c);)U=Math.cos(2*K+w),z=Math.sin(w),B=Math.cos(w),Y=Q*z*(U+Q/4*(B*(-1+2*U*U)-Q/6*U*(-3+4*z*z)*(-3+4*U*U))),c=w,w=u/(N*R)+Y;u=v*z-g*B*r;q=S/16*q*(4+S*(4-3*q));u=Math.atan2(v*B+g*z*r,(1-S)*Math.sqrt(e+u*u))/f.toRadians;
h[0]=(k+(Math.atan2(z*p,g*B-v*z*r)-(1-q)*S*P*(w+q*z*(U+q*B*(-1+2*U*U)))))/f.toRadians;h[1]=u;return h}function C(h,g,r,u){var p=g[0]*f.toRadians;g=g[1]*f.toRadians;var k=r[0]*f.toRadians;r=r[1]*f.toRadians;const {a:D,b:N,f:S,radius:P}=m(u),v=k-p;var K=Math.atan((1-S)*Math.tan(g)),e=Math.atan((1-S)*Math.tan(r));u=Math.sin(K);K=Math.cos(K);const q=Math.sin(e);e=Math.cos(e);let w=1E3,R=v,Q,c,z;let B,U,Y;do{var aa=Math.sin(R);var ca=Math.cos(R);z=Math.sqrt(e*aa*e*aa+(K*q-u*e*ca)*(K*q-u*e*ca));if(0===
z)return h.distance=0,h.azimuth=void 0,h.reverseAzimuth=void 0,h;ca=u*q+K*e*ca;B=Math.atan2(z,ca);U=K*e*aa/z;c=1-U*U;aa=ca-2*u*q/c;isNaN(aa)&&(aa=0);Y=S/16*c*(4+S*(4-3*c));Q=R;R=v+(1-Y)*S*U*(B+Y*z*(aa+Y*ca*(-1+2*aa*aa)))}while(1E-12<Math.abs(R-Q)&&0<--w);if(0===w)return u=Math.acos(Math.sin(g)*Math.sin(r)+Math.cos(g)*Math.cos(r)*Math.cos(k-p))*P,p=k-p,h.azimuth=Math.atan2(Math.sin(p)*Math.cos(r),Math.cos(g)*Math.sin(r)-Math.sin(g)*Math.cos(r)*Math.cos(p))/f.toRadians,h.distance=u,h.reverseAzimuth=
void 0,h;p=c*(D*D-N*N)/(N*N);g=p/1024*(256+p*(-128+p*(74-47*p)));k=Math.atan2(K*Math.sin(R),K*q*Math.cos(R)-u*e);h.azimuth=Math.atan2(e*Math.sin(R),K*q-u*e*Math.cos(R))/f.toRadians;h.distance=N*(1+p/16384*(4096+p*(-768+p*(320-175*p))))*(B-g*z*(aa+g/4*(ca*(-1+2*aa*aa)-g/6*aa*(-3+4*z*z)*(-3+4*aa*aa))));h.reverseAzimuth=k/f.toRadians;return h}d.directGeodeticSolver=x;d.geodesicAreas=function(h,g="square-meters"){if(h.some(k=>!G(k.spatialReference)))throw new b("geodesic-areas:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const r=[];for(var u=0;u<h.length;u++){var p=h[u];const {radius:k,densificationRatio:D}=m(p.spatialReference);r.push(E(p,k*D))}h=[];u=[0,0];p=[0,0];for(let k=0;k<r.length;k++){const {rings:D,spatialReference:N}=r[k];let S=0;for(let P=0;P<D.length;P++){const v=D[P];y(u,v[0],N);y(p,v[v.length-1],N);let K=p[0]*u[1]-u[0]*p[1];for(let e=0;e<v.length-1;e++)y(u,v[e+1],N),y(p,v[e],N),K+=p[0]*u[1]-u[0]*p[1];S+=K}S=F.convertUnit(S,"square-meters",g);
h.push(S/-2)}return h};d.geodesicDensify=E;d.geodesicDistance=function(h,g,r="meters"){if(!h||!g)throw new b("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!h.spatialReference||!g.spatialReference)throw new b("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!J.equals(h.spatialReference,g.spatialReference))throw new b("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");
const {spatialReference:u}=h;if(!G(u))throw new b("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(h.x===g.x&&h.y===g.y)return{distance:0,azimuth:0,reverseAzimuth:0};const p={distance:null};C(p,[h.x,h.y],[g.x,g.y],u);p.distance=F.convertUnit(p.distance,"meters",r);p.azimuth=n(p.azimuth);p.reverseAzimuth=n(p.reverseAzimuth);return p};d.geodesicLengths=function(h,g="meters"){if(!h)throw new b("geodesic-lengths:invalid-geometries","the input geometries type is not supported");
if(h.some(p=>!G(p.spatialReference)))throw new b("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const r=[];for(let p=0;p<h.length;p++){var u=h[p];const {spatialReference:k}=u;u="polyline"===u.type?u.paths:u.rings;let D=0;for(let N=0;N<u.length;N++){const S=u[N];let P=0;for(let v=1;v<S.length;v++){const K=S[v-1][0],e=S[v][0],q=S[v-1][1],w=S[v][1];if(q!==w||K!==e){const R={distance:null};C(R,[K,q],[e,w],k);P+=R.distance}}D+=P}D=F.convertUnit(D,
"meters",g);r.push(D)}return r};d.inverseGeodeticSolver=C;d.isSupported=G;d.pointFromDistance=function(h,g,r){if(!h||null==g||null==r)throw new b("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>r||360<r)throw new b("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!h.spatialReference)throw new b("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");
const {spatialReference:u}=h;if(!G(u))throw new b("geodesic-distance:not-supported","input geometry spatial reference is not supported");const p=[0,0];x(p,[h.x,h.y],r,g,u);return new L({x:p[0],y:p[1],spatialReference:u})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils",
"../isSupportedGraphicUtils"],function(d,l,b,F,f){d.isSupportedGraphic=function(J){var I;if("graphics"!==(null==(I=J.layer)?void 0:I.type))return f.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(b.isNone(J.geometry))return f.SupportedGraphicResult.GEOMETRY_MISSING;switch(J.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return f.SupportedGraphicResult.SUPPORTED;default:return f.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return(I=
b.isSome(J.symbol)&&"point-3d"===J.symbol.type&&J.symbol.symbolLayers)&&0<I.length&&I.some(O=>"object"===O.type)?"on-the-ground"!==F.getGraphicEffectiveElevationMode(J)&&F.hasGraphicFeatureExpressionInfo(J)?f.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:f.SupportedGraphicResult.SUPPORTED:f.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/draw/support/layerUtils":function(){define(["exports",
"../../../core/maybe"],function(d,l){d.addUniqueLayer=function(b,F,f){if(F&&b&&b.map){({map:b}=b);var J=b.layers.find(I=>I===F);J||b.add(F,f);void 0!==f&&null!==f&&b.layers.reorder(J,f)}};d.findLayerView=function(b,F){return b.allLayerViews.find(f=>{f=f.layer;return f===F||"sublayers"in f&&l.isSome(f.sublayers)&&f.sublayers.includes(F)})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(d){d.SKETCH_KEYS=
{redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ./snappingFactory ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate ../support/viewUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h){d.SnappingManager=function(g){function r(p){p=g.call(this,p)||this;p.options=new E;p.snappingEnginesFactory=G.defaultSnappingEnginesFactory;p._engines=[];p._currentMainCandidate=null;p._currentOtherActiveCandidates=[];return p}l._inheritsLoose(r,g);var u=r.prototype;u.initialize=function(){this.handles.add([O.watch(()=>{const {effectiveFeatureEnabled:p,effectiveSelfEnabled:k,touchSensitivityMultiplier:D,distance:N}=this.options;return{effectiveFeatureEnabled:p,
effectiveSelfEnabled:k,touchSensitivityMultiplier:D,distance:N}},()=>{this.doneSnapping();this.emit("changed")},O.sync),O.watch(()=>this.options,p=>{for(const k of this._engines)k.options=p},O.sync),O.watch(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:p,snappingEnginesFactory:k})=>this._recreateEngines(p,k),O.syncAndInitial)])};u.destroy=function(){this._destroyEngines()};u._recreateEngines=function(p,
k){this._destroyEngines();if(p){var {view:D,options:N}=this;this._engines=k(D,N)}};u._destroyEngines=function(){for(const p of this._engines)p.destroy();this._engines=[]};u.snap=function(){var p=l._asyncToGenerator(function*(k,D,N){const S=D.coordinateHelper.pointToVector(k),P=yield this._fetchCandidates(S,D,N);return{get valid(){return!I.isAborted(N)},apply:()=>{const {snappedPoint:v,hints:K}=this._processCandidates(S,P,D);this._removeVisualization();J.isSome(D.visualizer)&&this.handles.add(D.visualizer.draw(K,
{coordinateHelper:D.coordinateHelper,elevationInfo:D.elevationInfo,view:this.view}),"visualization-handle");return v}}});return function(k,D,N){return p.apply(this,arguments)}}();u.update=function(p,k){this._removeVisualization();let D=p;const N=[];if(J.isSome(this._currentMainCandidate)){const S=k.coordinateHelper;p=S.pointToVector(p);const P=this._currentMainCandidate.constraint.closestTo(p);if(x.squareDistance(h.anyMapPointToScreenPoint(p,S,k.elevationInfo,this.view),h.anyMapPointToScreenPoint(P,
S,k.elevationInfo,this.view))<this._squaredPointProximityThreshold(k.pointer)){D=S.vectorToDehydratedPoint(P);this._currentMainCandidate.targetPoint=P;N.push(...this._currentMainCandidate.hints);for(const v of this._currentOtherActiveCandidates)v.targetPoint=P,N.push(...v.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}J.isSome(k.visualizer)&&this.handles.add(k.visualizer.draw(N,{coordinateHelper:k.coordinateHelper,elevationInfo:k.elevationInfo,view:this.view}),"visualization-handle");
return D};u.doneSnapping=function(){this._removeVisualization();this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};u._removeVisualization=function(){this.handles.remove("visualization-handle")};u._fetchCandidates=function(){var p=l._asyncToGenerator(function*(k,D,N){return(yield Promise.all(this._engines.map(S=>S.fetchCandidates(k,D,N)))).flat()});return function(k,D,N){return p.apply(this,arguments)}}();u._processCandidates=function(p,k,D){if(1>k.length)return this.doneSnapping(),
{snappedPoint:D.coordinateHelper.vectorToDehydratedPoint(p),hints:[]};x.sortCandidatesInPlace(p,k);const N=this._currentMainCandidate;if(J.isSome(N)){const S=this._findOldConstraintInNewCandidates(N,k);if(0<=S)if(k[S]instanceof C.IntersectionSnappingCandidate){if(y.squaredDistance(p,N.targetPoint)<this._squaredPointProximityThreshold(D.pointer))return this._updateSnappingCandidate(N,k,D)}else return this._intersectWithOtherCandidates(S,k,p,D)}return this._intersectWithOtherCandidates(0,k,p,D)};u._findOldConstraintInNewCandidates=
function(p,k){return p instanceof C.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(k,p.first)&&0<=this._findOldCandidateIndex(k,p.second)?0:-1:this._findOldCandidateIndex(k,p)};u._intersectWithOtherCandidates=function(p,k,D,N){const S=k[p],P=[],v=N.coordinateHelper;for(let K=0;K<k.length;++K){if(K===p)continue;const e=k[K];for(const q of S.constraint.intersect(e.constraint)){const w=v.fromXYZ(q.intersection,S.targetPoint[2]);P.push([new C.IntersectionSnappingCandidate(v,w,S,e,e.elevationInfo),
x.squareDistance(h.anyMapPointToScreenPoint(D,N.coordinateHelper,N.elevationInfo,this.view),h.anyMapPointToScreenPoint(w,N.coordinateHelper,N.elevationInfo,this.view))])}}return 0<P.length&&(P.sort((K,e)=>K[1]-e[1]),P[0][1]<this._squaredPointProximityThreshold(N.pointer))?this._updateSnappingCandidate(P[0][0],k,N):this._updateSnappingCandidate(S,k,N)};u._updateSnappingCandidate=function(p,k,D){this.doneSnapping();this._currentMainCandidate=p;const N=this._currentMainCandidate.targetPoint,S=[];S.push(...p.hints);
for(const P of k){if(p instanceof C.IntersectionSnappingCandidate){if(P.constraint.objectEqual(p.first.constraint)||P.constraint.objectEqual(p.second.constraint))continue}else if(P.constraint.objectEqual(p.constraint))continue;P.constraint.check(N)&&(P.targetPoint=N,this._currentOtherActiveCandidates.push(P),S.push(...P.hints))}return{snappedPoint:D.coordinateHelper.vectorToDehydratedPoint(N),hints:S}};u._squaredPointProximityThreshold=function(p){return"touch"===p?this.squaredTouchProximityThreshold:
this.squaredMouseProximityTreshold};u._findOldCandidateIndex=function(p,k){let D=-1;for(let N=0;N<p.length;++N)if(k.constraint.objectEqual(p[N].constraint)){D=N;break}return D};l._createClass(r,[{key:"updating",get:function(){return this._engines.some(p=>p.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:p,touchSensitivityMultiplier:k}=this.options,D=p*k;return D*
D}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this._engines}}}]);return r}(F.EventedMixin(f.HandleOwner));b.__decorate([L.property({constructOnly:!0})],d.SnappingManager.prototype,"view",void 0);b.__decorate([L.property()],d.SnappingManager.prototype,"options",void 0);b.__decorate([L.property({readOnly:!0})],d.SnappingManager.prototype,"updating",null);b.__decorate([L.property()],d.SnappingManager.prototype,"snappingEnginesFactory",void 0);
b.__decorate([L.property()],d.SnappingManager.prototype,"_engines",void 0);b.__decorate([L.property()],d.SnappingManager.prototype,"squaredMouseProximityTreshold",null);b.__decorate([L.property()],d.SnappingManager.prototype,"squaredTouchProximityThreshold",null);d.SnappingManager=b.__decorate([n.subclass("esri.views.interactive.snapping.SnappingManager")],d.SnappingManager);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2":function(){define(["exports",
"./common"],function(d,l){function b(B,U){B[0]=U[0];B[1]=U[1];return B}function F(B,U,Y){B[0]=U;B[1]=Y;return B}function f(B,U,Y){B[0]=U[0]+Y[0];B[1]=U[1]+Y[1];return B}function J(B,U,Y){B[0]=U[0]-Y[0];B[1]=U[1]-Y[1];return B}function I(B,U,Y){B[0]=U[0]*Y[0];B[1]=U[1]*Y[1];return B}function O(B,U,Y){B[0]=U[0]/Y[0];B[1]=U[1]/Y[1];return B}function L(B,U){B[0]=Math.ceil(U[0]);B[1]=Math.ceil(U[1]);return B}function H(B,U){B[0]=Math.floor(U[0]);B[1]=Math.floor(U[1]);return B}function A(B,U,Y){B[0]=Math.min(U[0],
Y[0]);B[1]=Math.min(U[1],Y[1]);return B}function m(B,U,Y){B[0]=Math.max(U[0],Y[0]);B[1]=Math.max(U[1],Y[1]);return B}function n(B,U){B[0]=Math.round(U[0]);B[1]=Math.round(U[1]);return B}function y(B,U,Y){B[0]=U[0]*Y;B[1]=U[1]*Y;return B}function G(B,U,Y,aa){B[0]=U[0]+Y[0]*aa;B[1]=U[1]+Y[1]*aa;return B}function E(B,U){const Y=U[0]-B[0];B=U[1]-B[1];return Math.sqrt(Y*Y+B*B)}function x(B,U){const Y=U[0]-B[0];B=U[1]-B[1];return Y*Y+B*B}function C(B){const U=B[0];B=B[1];return Math.sqrt(U*U+B*B)}function h(B){const U=
B[0];B=B[1];return U*U+B*B}function g(B,U){B[0]=-U[0];B[1]=-U[1];return B}function r(B,U){B[0]=1/U[0];B[1]=1/U[1];return B}function u(B,U){var Y=U[0];const aa=U[1];Y=Y*Y+aa*aa;0<Y&&(Y=1/Math.sqrt(Y),B[0]=U[0]*Y,B[1]=U[1]*Y);return B}function p(B,U){return B[0]*U[0]+B[1]*U[1]}function k(B,U,Y){U=U[0]*Y[1]-U[1]*Y[0];B[0]=B[1]=0;B[2]=U;return B}function D(B,U,Y,aa){const ca=U[0];U=U[1];B[0]=ca+aa*(Y[0]-ca);B[1]=U+aa*(Y[1]-U);return B}function N(B,U){U=U||1;const Y=2*l.RANDOM()*Math.PI;B[0]=Math.cos(Y)*
U;B[1]=Math.sin(Y)*U;return B}function S(B,U,Y){const aa=U[0];U=U[1];B[0]=Y[0]*aa+Y[2]*U;B[1]=Y[1]*aa+Y[3]*U;return B}function P(B,U,Y){const aa=U[0];U=U[1];B[0]=Y[0]*aa+Y[2]*U+Y[4];B[1]=Y[1]*aa+Y[3]*U+Y[5];return B}function v(B,U,Y){const aa=U[0];U=U[1];B[0]=Y[0]*aa+Y[3]*U+Y[6];B[1]=Y[1]*aa+Y[4]*U+Y[7];return B}function K(B,U,Y){const aa=U[0];U=U[1];B[0]=Y[0]*aa+Y[4]*U+Y[12];B[1]=Y[1]*aa+Y[5]*U+Y[13];return B}function e(B,U,Y,aa){const ca=U[0]-Y[0];U=U[1]-Y[1];const na=Math.sin(aa);aa=Math.cos(aa);
B[0]=ca*aa-U*na+Y[0];B[1]=ca*na+U*aa+Y[1];return B}function q(B,U){var Y=B[0];B=B[1];const aa=U[0];U=U[1];let ca=Y*Y+B*B;0<ca&&(ca=1/Math.sqrt(ca));let na=aa*aa+U*U;0<na&&(na=1/Math.sqrt(na));Y=(Y*aa+B*U)*ca*na;return 1<Y?0:-1>Y?Math.PI:Math.acos(Y)}function w(B){return"vec2("+B[0]+", "+B[1]+")"}function R(B,U){return B[0]===U[0]&&B[1]===U[1]}function Q(B,U){const Y=B[0];B=B[1];const aa=U[0];U=U[1];return Math.abs(Y-aa)<=l.EPSILON*Math.max(1,Math.abs(Y),Math.abs(aa))&&Math.abs(B-U)<=l.EPSILON*Math.max(1,
Math.abs(B),Math.abs(U))}function c(B,U,Y,aa,ca){let na=U[0]-Y[0];Y=U[1]-Y[1];ca=(aa[0]*na+aa[1]*Y)*(ca-1);na=aa[0]*ca;Y=aa[1]*ca;B[0]=U[0]+na;B[1]=U[1]+Y;return B}const z=Object.freeze(Object.defineProperty({__proto__:null,copy:b,set:F,add:f,subtract:J,multiply:I,divide:O,ceil:L,floor:H,min:A,max:m,round:n,scale:y,scaleAndAdd:G,distance:E,squaredDistance:x,length:C,squaredLength:h,negate:g,inverse:r,normalize:u,dot:p,cross:k,lerp:D,random:N,transformMat2:S,transformMat2d:P,transformMat3:v,transformMat4:K,
rotate:e,angle:q,str:w,exactEquals:R,equals:Q,projectAndScale:c,len:C,sub:J,mul:I,div:O,dist:E,sqrDist:x,sqrLen:h},Symbol.toStringTag,{value:"Module"}));d.add=f;d.angle=q;d.ceil=L;d.copy=b;d.cross=k;d.dist=E;d.distance=E;d.div=O;d.divide=O;d.dot=p;d.equals=Q;d.exactEquals=R;d.floor=H;d.inverse=r;d.len=C;d.length=C;d.lerp=D;d.max=m;d.min=A;d.mul=I;d.multiply=I;d.negate=g;d.normalize=u;d.projectAndScale=c;d.random=N;d.rotate=e;d.round=n;d.scale=y;d.scaleAndAdd=G;d.set=F;d.sqrDist=x;d.sqrLen=h;d.squaredDistance=
x;d.squaredLength=h;d.str=w;d.sub=J;d.subtract=J;d.transformMat2=S;d.transformMat2d=P;d.transformMat3=v;d.transformMat4=K;d.vec2=z})},"esri/views/interactive/snapping/snappingFactory":function(){define(["exports","./FeatureSnappingEngine","./SelfSnappingEngine"],function(d,l,b){d.defaultSnappingEnginesFactory=function(F,f){return[new b.SelfSnappingEngine({view:F,options:f}),new l.FeatureSnappingEngine({view:F,options:f,spatialReference:F.spatialReference})]};Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../../layers/graphics/data/QueryEngineResult ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p){l.FeatureSnappingEngine=function(N){function S(v){v=N.call(this,v)||this;v.options=null;v.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return v}b._inheritsLoose(S,N);var P=S.prototype;P.initialize=function(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),H.sync);O.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",
v=>this._updateLayerView(v.layer,v.layerView)),this.view.on("layerview-destroy",v=>this._updateLayerView(v.layer,null))])};P._updateLayerView=function(v,K){for(const [,e]of this.snappingSources)e.snappingSource.layerSource.layer===v&&(e.layerView=K)};P.destroy=function(){this._set("options",null);for(const [,v]of this.snappingSources)v.destroy()};P.fetchCandidates=function(){var v=b._asyncToGenerator(function*(K,e,q){if(O.isNone(this.options)||!this.options.effectiveFeatureEnabled)return[];var w=
[];const R=this._computeScreeenSizeDistanceParameters(K,e),Q={distance:R,point:K,coordinateHelper:e.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:c,layerView:z}]of this.snappingSources)!c.layerSource.enabled||O.isSome(z)&&z.suspended||w.push(c.fetchCandidates(Q,q).then(B=>B.filter(U=>!this._candidateIsExcluded(c,U,e.excludeFeature))));w=(yield L.eachAlwaysValues(w)).flat();this._addRightAngleCandidates(w,K,R,e);L.throwIfAborted(q);h.sortCandidatesInPlace(K,w);return w});
return function(K,e,q){return v.apply(this,arguments)}}();P._addRightAngleCandidates=function(v,K,e,q){var w,R,Q,c,z,B,U,Y;const aa=O.isSome(q.vertexHandle)?null==(w=q.vertexHandle.rightEdge)?void 0:null==(R=w.rightVertex)?void 0:R.pos:O.isSome(q.editGeometryOperations)&&"polygon"===q.editGeometryOperations.data.type?null==(Q=O.unwrap(null==(c=q.editGeometryOperations.data.components[0])?void 0:c.getFirstVertex()))?void 0:Q.pos:null;w=O.isSome(q.vertexHandle)?null==(z=q.vertexHandle.leftEdge)?void 0:
null==(B=z.leftVertex)?void 0:B.pos:O.isSome(q.editGeometryOperations)?null==(U=O.unwrap(null==(Y=q.editGeometryOperations.data.components[0])?void 0:Y.getLastVertex()))?void 0:U.pos:null;z=v.length;for(B=0;B<z;B++)this._addRightAngleCandidate(v[B],w,K,e,q,v),this._addRightAngleCandidate(v[B],aa,K,e,q,v)};P._addRightAngleCandidate=function(v,K,e,q,w,R){if(!O.isNone(K)&&v instanceof g.EdgeSnappingCandidate){var Q=v.constraint.closestTo(K),c=(Q[0]-e[0])/q.x;e=(Q[1]-e[1])/q.y;1>=c*c+e*e&&(w=w.coordinateHelper,
R.push(new u.RightAngleSnappingCandidate({coordinateHelper:w,targetPoint:Q,otherVertex:K,otherVertexType:u.OtherVertexType.NEXT,previousVertex:v.constraint.start,constraint:new C.RayConstraint(w,K,Q),objectId:v.objectId,elevationInfo:v.elevationInfo})))}};P._computeScreeenSizeDistanceParameters=function(v,K){const e=O.isSome(this.options)?this.options.distance*("touch"===K.pointer?this.options.touchSensitivityMultiplier:1):0;return O.isNone(this.view)?{x:e,y:e,pixelSize:e}:"2d"===this.view.type?(v=
e*this.view.resolution,{x:v,y:v,pixelSize:v}):this._computeScreenSizeDistanceParameters3D(v,e,this.view,K)};P._computeScreenSizeDistanceParameters3D=function(v,K,e,q){const {coordinateHelper:w,elevationInfo:R}=q,Q=e.state.camera.computeScreenPixelSizeAt(p.anyMapPointToRender(v,w,R,e,D)),c=Q*e.renderCoordsHelper.unitInMeters/e.mapCoordsHelper.unitInMeters;K*=c;const z=this._computeScreenMagnitudeOfMapOffset(v,c,0,e,q);v=this._computeScreenMagnitudeOfMapOffset(v,0,c,e,q);return{x:K/z,y:K/v,pixelSize:Q}};
P._computeScreenMagnitudeOfMapOffset=function(v,K,e,q,{coordinateHelper:w,elevationInfo:R}){const Q=w.clone(v);Q[0]+=K;Q[1]+=e;v=p.anyMapPointToScreenPoint(v,w,R,q);w=p.anyMapPointToScreenPoint(Q,w,R,q);q=w.x-v.x;w=w.y-v.y;return Math.sqrt(q*q+w*w)};P._candidateIsExcluded=function(v,K,e){if(O.isNone(e))return!1;K=this._getCandidateObjectId(K);if(O.isNone(K))return!1;v=v.layerSource.layer;return"graphics"===v.type?e.uid===K:e.sourceLayer===v&&e.attributes&&"objectIdField"in v?e.attributes[v.objectIdField]===
K:!1};P._getCandidateObjectId=function(v){return v instanceof r.FeatureSnappingCandidate?v.objectId:null};P._createSourceInfo=function(v){const K=this._createFeatureSnappingSourceType(v);if(O.isNone(K))return null;if("loading"in K)return this.updatingHandles.addPromise(K.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const e=O.isSome(this.view)?this.view.allLayerViews.find(q=>q.layer===v.layer):null;return new k(K.source,e)};P._createFeatureSnappingSourceType=function(v){switch(v.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(v);
case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(v)}return null};P._createFeatureSnappingSourceFeatureLayer=function(v){switch(v.layer.source.type){case "feature-layer":var K=this._getSourceModule("featureService");return O.isSome(K.module)?{source:new K.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:v})}:{loading:K.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==v.layer.geometryType)return K=this._getSourceModule("featureCollection"),
O.isSome(K.module)?{source:new K.module.FeatureCollectionSnappingSource({layerSource:v})}:{loading:K.loader}}return null};P._createFeatureSnappingSourceGraphicsLayer=function(v){const K=this._getSourceModule("graphics");return O.isSome(K.module)?{source:new K.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:v})}:{loading:K.loader}};P._getSourceModule=function(v){const K=this.sourceModules[v];return O.isNone(K.loader)?(v=this._loadSourceModule(v).then(e=>
{K.module=e}),K.loader=v,{module:K.module,loader:v}):{module:K.module,loader:K.loader}};P._loadSourceModule=function(v){switch(v){case "featureService":return this.updatingHandles.addPromise(new Promise((K,e)=>d(["./featureSources/FeatureServiceSnappingSource"],K,e)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((K,e)=>d(["./featureSources/FeatureCollectionSnappingSource"],K,e)));case "graphics":return this.updatingHandles.addPromise(new Promise((K,e)=>d(["./featureSources/GraphicsSnappingSource"],
K,e)))}return null};b._createClass(S,[{key:"updating",get:function(){return I.someMap(this.snappingSources,({snappingSource:v})=>v.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){const v=this._get("snappingSources")||new Map,K=new Map;if(O.isSome(this.options)&&O.isSome(this.options.featureSources))for(const q of this.options.featureSources.items){const w=q.layer.uid;var e=v.get(w);e?(v.delete(w),K.set(w,e)):q.layer.loaded?(e=this._createSourceInfo(q),O.isSome(e)&&
K.set(w,e)):this.updatingHandles.addPromise(q.layer.load())}for(const [,q]of v)q.destroy();return K}},{key:"types",get:function(){return x.SnappingTypes.EDGE|x.SnappingTypes.VERTEX}}]);return S}(f.HandleOwner);F.__decorate([A.property({constructOnly:!0})],l.FeatureSnappingEngine.prototype,"spatialReference",void 0);F.__decorate([A.property({constructOnly:!0})],l.FeatureSnappingEngine.prototype,"view",void 0);F.__decorate([A.property()],l.FeatureSnappingEngine.prototype,"options",void 0);F.__decorate([A.property({readOnly:!0})],
l.FeatureSnappingEngine.prototype,"updating",null);F.__decorate([A.property({readOnly:!0})],l.FeatureSnappingEngine.prototype,"snappingSources",null);l.FeatureSnappingEngine=F.__decorate([G.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],l.FeatureSnappingEngine);let k=function(){function N(S,P){this.snappingSource=S;this.layerView=P;this.handles=new J;P=this.snappingSource.layerSource.layer;"refresh"in P&&this.handles.add(P.on("refresh",()=>S.refresh()));this.handles.add([H.watch(()=>
S.updating,v=>S.layerSource.updating=v,H.syncAndInitial),H.watch(()=>S.availability,v=>S.layerSource.availability=v,H.syncAndInitial)])}N.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return N}();const D=E.create();Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y){function G(C,h,g,r,u,p){u-=g;p-=r;C=Math.min(1,Math.max(0,((C-g)*u+(h-r)*p)/(u*u+p*p)));return{x:g+u*C,y:r+p*C}}function E(C,h){return C?h?4:3:h?3:2}let x=function(){function C(g,r,u){this.items=g;this.query=r;this.geometryType=u.geometryType;this.hasM=u.hasM;this.hasZ=u.hasZ;this.fieldsIndex=u.fieldsIndex;this.objectIdField=u.objectIdField;this.spatialReference=u.spatialReference;this.featureAdapter=u.featureAdapter}var h=C.prototype;h.createQueryResponseForCount=
function(){const g=new L(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:r,having:u,outStatistics:p}=this.query;if(null==r||!r.length)return 1;const k=new Map,D=new Map,N=new Set;for(const v of p){var {statisticType:S}=v;S="exceedslimit"!==S?v.onStatisticField:void 0;if(!D.has(S)){var P=[];for(const K of r){const e=this._getAttributeValues(g,K,k);P.push(e)}D.set(S,this._calculateUniqueValues(P,
g.returnDistinctValues))}S=D.get(S);for(const K in S){const {data:e,items:q}=S[K];P=e.join(",");u&&!g.validateItems(q,u)||N.add(P)}}return N.size};h.createQueryResponse=function(){var g=b._asyncToGenerator(function*(){let r;r=this.query.outStatistics?this.query.outStatistics.some(u=>"exceedslimit"===u.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(O.isValid(this.query.outSR)&&
!O.equals(this.query.geometry.spatialReference,this.query.outSR)?r.queryGeometry=A.cleanFromGeometryEngine({spatialReference:this.query.outSR,...H.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):r.queryGeometry=A.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return r});return function(){return g.apply(this,arguments)}}();h.createSnappingResponse=function(g,r){const u=this.featureAdapter,p=E(this.hasZ,this.hasM),{x:k,y:D}=
g.point,N="number"===typeof g.distance?g.distance:g.distance.x,S="number"===typeof g.distance?g.distance:g.distance.y,P={candidates:[]},v="esriGeometryPolygon"===this.geometryType;r=this._getPointCreator(g.point,this.spatialReference,r);for(const z of this.items){var K=u.getGeometry(z);if(F.isNone(K))continue;const {coords:B,lengths:U}=K;if(g.types&l.SnappingTypes.EDGE){K=0;for(var e=0;e<U.length;e++){var q=U[e];for(var w=0;w<q;w++,K+=p){var R=B[K],Q=B[K+1];if(w!==q-1){const Y=B[K+p],aa=B[K+p+1],
{x:ca,y:na}=G(k,D,R,Q,Y,aa);var c=(k-ca)/N;const ba=(D-na)/S;c=c*c+ba*ba;1>=c&&P.candidates.push({type:"edge",objectId:u.getObjectId(z),distance:Math.sqrt(c),target:r(ca,na),start:r(R,Q),end:r(Y,aa)})}}}}if(g.types&l.SnappingTypes.VERTEX)for(K=v?B.length-p:B.length,e=0;e<K;e+=p)q=B[e],w=B[e+1],R=(k-q)/N,Q=(D-w)/S,R=R*R+Q*Q,1>=R&&P.candidates.push({type:"vertex",objectId:u.getObjectId(z),distance:Math.sqrt(R),target:r(q,w)})}P.candidates.sort((z,B)=>z.distance-B.distance);return P};h._getPointCreator=
function(g,r,u){const p=F.isSome(u)&&!O.equals(r,u)?k=>H.project(k,r,u):k=>k;return null!=g.z&&null!=g.m?(k,D)=>p({x:k,y:D,z:g.z,m:g.m}):null!=g.z?(k,D)=>p({x:k,y:D,z:g.z}):null!=g.m?(k,D)=>p({x:k,y:D,m:g.m}):(k,D)=>p({x:k,y:D})};h.createSummaryStatisticsResponse=function(){var g=b._asyncToGenerator(function*(r){const {field:u,valueExpression:p,normalizationField:k,normalizationType:D,normalizationTotal:N,minValue:S,maxValue:P,scale:v}=r;r=this.fieldsIndex.isDateField(u);var K=yield this._getDataValues({field:u,
valueExpression:p,normalizationField:k,normalizationType:D,normalizationTotal:N,scale:v});const e=n.isNullCountSupported({normalizationType:D,normalizationField:k,minValue:S,maxValue:P}),q=this.fieldsIndex.get(u),w={value:.5,fieldType:null==q?void 0:q.type};K=m.isStringField(q)?n.calculateStringStatistics({values:K,supportsNullCount:e,percentileParams:w}):n.calculateStatistics({values:K,minValue:S,maxValue:P,useSampleStdDev:!D,supportsNullCount:e,percentileParams:w});return n.processSummaryStatisticsResult(K,
r)});return function(r){return g.apply(this,arguments)}}();h.createUniqueValuesResponse=function(){var g=b._asyncToGenerator(function*(r){const {field:u,valueExpression:p,domain:k,returnAllCodedValues:D,scale:N}=r;r=yield this._getDataValues({field:u,valueExpression:p,scale:N});r=n.calculateUniqueValuesCount(r);return n.createUVResult(r,k,D)});return function(r){return g.apply(this,arguments)}}();h.createClassBreaksResponse=function(){var g=b._asyncToGenerator(function*(r){const {field:u,valueExpression:p,
normalizationField:k,normalizationType:D,normalizationTotal:N,classificationMethod:S,standardDeviationInterval:P,minValue:v,maxValue:K,numClasses:e,scale:q}=r;r=yield this._getDataValues({field:u,valueExpression:p,normalizationField:k,normalizationType:D,normalizationTotal:N,scale:q});r=n.calculateClassBreaks(r,{field:u,normalizationField:k,normalizationType:D,normalizationTotal:N,classificationMethod:S,standardDeviationInterval:P,minValue:v,maxValue:K,numClasses:e});return n.resolveCBResult(r,S)});
return function(r){return g.apply(this,arguments)}}();h.createHistogramResponse=function(){var g=b._asyncToGenerator(function*(r){const {field:u,valueExpression:p,normalizationField:k,normalizationType:D,normalizationTotal:N,classificationMethod:S,standardDeviationInterval:P,minValue:v,maxValue:K,numBins:e,scale:q}=r;r=yield this._getDataValues({field:u,valueExpression:p,normalizationField:k,normalizationType:D,normalizationTotal:N,scale:q});return n.calculateHistogram(r,{field:u,normalizationField:k,
normalizationType:D,normalizationTotal:N,classificationMethod:S,standardDeviationInterval:P,minValue:v,maxValue:K,numBins:e})});return function(r){return g.apply(this,arguments)}}();h._sortFeatures=function(g,r,u){if(1<g.length&&r&&r.length)for(const p of r.reverse()){r=p.split(" ");const k=r[0],D=this.fieldsIndex.get(k);r=r[1]&&"desc"===r[1].toLowerCase();const N=n.getAttributeComparator(null==D?void 0:D.type,r);g.sort((S,P)=>{S=u(S,k,D);P=u(P,k,D);return N(S,P)})}};h._createFeatureQueryResponse=
function(g){const r=this.items,{geometryType:u,hasM:p,hasZ:k,objectIdField:D,spatialReference:N}=this,{outFields:S,outSR:P,quantizationParameters:v,resultRecordCount:K,resultOffset:e,returnZ:q,returnM:w}=g,R=null!=K?r.length>(e||0)+K:!1,Q=S&&(S.includes("*")?[...this.fieldsIndex.fields]:S.map(c=>this.fieldsIndex.get(c)));return{exceededTransferLimit:R,features:this._createFeatures(g,r),fields:Q,geometryType:u,hasM:p&&w,hasZ:k&&q,objectIdFieldName:D,spatialReference:A.cleanFromGeometryEngine(P?P:N),
transform:v&&I.toQuantizationTransform(v)||null}};h._createFeatures=function(g,r){const u=new L(g,this.featureAdapter,this.fieldsIndex),{hasM:p,hasZ:k}=this,{orderByFields:D,quantizationParameters:N,returnGeometry:S,returnCentroid:P,maxAllowableOffset:v,resultOffset:K,resultRecordCount:e,returnZ:q=!1,returnM:w=!1}=g,R=k&&q,Q=p&&w;g=[];var c=0;r=[...r];this._sortFeatures(r,D,(U,Y,aa)=>u.getFieldValue(U,Y,aa));if(S||P){var z=I.toQuantizationTransform(N);if(S&&!P)for(var B of r)g[c++]={attributes:u.getAttributes(B),
geometry:A.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(B),v,z,R,Q)};else if(!S&&P)for(const U of r)g[c++]={attributes:u.getAttributes(U),centroid:A.transformCentroid(this,this.featureAdapter.getCentroid(U,this),z)};else for(const U of r)g[c++]={attributes:u.getAttributes(U),centroid:A.transformCentroid(this,this.featureAdapter.getCentroid(U,this),z),geometry:A.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(U),v,z,R,Q)}}else for(z of r)(B=
u.getAttributes(z))&&(g[c++]={attributes:B});c=K||0;null!=e&&(g=g.slice(c,Math.min(g.length,c+e)));return g};h._createExceedsLimitQueryResponse=function(g){var r=!1;let u=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY;r=Number.POSITIVE_INFINITY;for(const k of g.outStatistics)if("exceedslimit"===k.statisticType){u=null!=k.maxPointCount?k.maxPointCount:Number.POSITIVE_INFINITY;p=null!=k.maxRecordCount?k.maxRecordCount:Number.POSITIVE_INFINITY;r=null!=k.maxVertexCount?k.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)r=this.items.length>u;else if(this.items.length>p)r=!0;else{g=this.hasZ?this.hasM?4:3:this.hasM?3:2;const k=this.featureAdapter;r=this.items.reduce((D,N)=>{N=k.getGeometry(N);return D+(F.isSome(N)&&N.coords.length||0)},0)/g>r}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(r)}}]}};h._createStatisticsQueryResponse=
function(){var g=b._asyncToGenerator(function*(r){var u={attributes:{}};const p=[],k=new Map,D=new Map,N=new Map,S=new Map,P=new L(r,this.featureAdapter,this.fieldsIndex);var v=r.outStatistics;const {groupByFieldsForStatistics:K,having:e,orderByFields:q}=r;r=K&&K.length;const w=!!r,R=w&&K[0],Q=w&&!this.fieldsIndex.get(R);for(const Y of v){const {outStatisticFieldName:aa,statisticType:ca}=Y;v=Y;var c="exceedslimit"!==ca?Y.onStatisticField:void 0;const na="percentile_disc"===ca||"percentile_cont"===
ca,ba="EnvelopeAggregate"===ca||"CentroidAggregate"===ca||"ConvexHullAggregate"===ca,ra=w&&1===r&&(c===R||Q)&&"count"===ca;if(w){if(!N.has(c)){var z=[];for(const ua of K){var B=this._getAttributeValues(P,ua,k);z.push(B)}N.set(c,this._calculateUniqueValues(z,P.returnDistinctValues))}z=N.get(c);for(const ua in z){const {count:Ba,data:ka,items:ta,itemPositions:ma}=z[ua];B=ka.join(",");if(!e||P.validateItems(ta,e)){const la=S.get(B)||{attributes:{}};if(ba){la.aggregateGeometries||(la.aggregateGeometries=
{});const {aggregateGeometries:pa,outStatisticFieldName:sa}=yield this._getAggregateGeometry(v,ta);la.aggregateGeometries[sa]=pa}else{var U=null;if(ra)U=Ba;else{const pa=this._getAttributeValues(P,c,k);U=ma.map(sa=>pa[sa]);U=na&&"statisticParameters"in v?this._getPercentileValue(v,U):this._getStatisticValue(v,U,null,P.returnDistinctValues)}la.attributes[aa]=U}K.forEach((pa,sa)=>la.attributes[this.fieldsIndex.get(pa)?pa:`EXPR_${sa+1}`]=ka[sa]);S.set(B,la)}}}else if(ba){u.aggregateGeometries||(u.aggregateGeometries=
{});const {aggregateGeometries:ua,outStatisticFieldName:Ba}=yield this._getAggregateGeometry(v,this.items);u.aggregateGeometries[Ba]=ua}else c=this._getAttributeValues(P,c,k),u.attributes[aa]=na&&"statisticParameters"in v?this._getPercentileValue(v,c):this._getStatisticValue(v,c,D,P.returnDistinctValues);p.push({name:aa,alias:aa,type:"esriFieldTypeDouble"})}u=w?Array.from(S.values()):[u];this._sortFeatures(u,q,(Y,aa)=>Y.attributes[aa]);return{fields:p,features:u}});return function(r){return g.apply(this,
arguments)}}();h._getAggregateGeometry=function(){var g=b._asyncToGenerator(function*(r,u){var p=yield new Promise((q,w)=>d(["../../../geometry/geometryEngineJSON"],q,w));const {statisticType:k,outStatisticFieldName:D}=r,{featureAdapter:N,spatialReference:S,geometryType:P,hasZ:v,hasM:K}=this;u=u.map(q=>A.getGeometry(P,v,K,N.getGeometry(q)));const e=p.convexHull(S,u,!0)[0];r={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===k?(p=e?J.getPolygonExtent(e):J.getGeometryExtent(p.union(S,
u)),r.aggregateGeometries={...p,spatialReference:S},r.outStatisticFieldName=D||"extent"):"CentroidAggregate"===k?(p=e?f.polygonCentroid(e):f.extentCentroid(J.getGeometryExtent(p.union(S,u))),r.aggregateGeometries={x:p[0],y:p[1],spatialReference:S},r.outStatisticFieldName=D||"centroid"):"ConvexHullAggregate"===k&&(r.aggregateGeometries=e,r.outStatisticFieldName=D||"convexHull");return r});return function(r,u){return g.apply(this,arguments)}}();h._getStatisticValue=function(g,r,u,p){const {onStatisticField:k,
statisticType:D}=g;g=null;g=null!=u&&u.has(k)?u.get(k):m.isStringField(this.fieldsIndex.get(k))?n.calculateStringStatistics({values:r,returnDistinct:p}):n.calculateStatistics({values:r,minValue:null,maxValue:null,useSampleStdDev:!0});u&&u.set(k,g);return g["var"===D?"variance":D]};h._getPercentileValue=function(g,r){const {onStatisticField:u,statisticParameters:p,statisticType:k}=g,{value:D,orderBy:N}=p;g=this.fieldsIndex.get(u);return n.calculatePercentile(r,{value:D,orderBy:N,fieldType:null==g?
void 0:g.type,isDiscrete:"percentile_disc"===k})};h._getAttributeValues=function(g,r,u){if(u.has(r))return u.get(r);const p=this.fieldsIndex.get(r),k=this.items.map(D=>g.getFieldValue(D,r,p));u.set(r,k);return k};h._getAttributeNormalizedValues=function(g,r){return this.items.map(u=>g.getNormalizedValue(u,{field:r.field,fieldInfo:this.fieldsIndex.get(r.field),normalizationField:r.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(r.normalizationField),normalizationType:r.normalizationType,
normalizationTotal:r.normalizationTotal}))};h._getAttributeExpressionValues=function(){var g=b._asyncToGenerator(function*(r,u,p){const {arcadeUtils:k}=yield y.loadArcade();u=k.createFunction(u);p=p&&k.getViewInfo(p);return r.getExpressionValues(this.items,u,p,k)});return function(r,u,p){return g.apply(this,arguments)}}();h._calculateUniqueValues=function(g,r){const u={},p=this.items,k=p.length;for(let D=0;D<k;D++){const N=p[D],S=[];for(const v of g)S.push(v[D]);const P=S.join(",");r?null==u[P]&&
(u[P]={count:1,data:S,items:[N],itemPositions:[D]}):null==u[P]?u[P]={count:1,data:S,items:[N],itemPositions:[D]}:(u[P].count++,u[P].items.push(N),u[P].itemPositions.push(D))}return u};h._getDataValues=function(){var g=b._asyncToGenerator(function*(r){const u=new L(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:p,field:k,normalizationField:D,normalizationType:N,normalizationTotal:S,scale:P}=r;r=p?{viewingMode:"map",scale:P,spatialReference:this.query.outSR||this.spatialReference}:
null;return p?this._getAttributeExpressionValues(u,p,r):this._getAttributeNormalizedValues(u,{field:k,normalizationField:D,normalizationType:N,normalizationTotal:S})});return function(r){return g.apply(this,arguments)}}();b._createClass(C,[{key:"size",get:function(){return this.items.length}}]);return C}();l.SnappingTypes=void 0;(function(C){C[C.NONE=0]="NONE";C[C.EDGE=1]="EDGE";C[C.VERTEX=2]="VERTEX"})(l.SnappingTypes||(l.SnappingTypes={}));l.QueryEngineResult=x;Object.defineProperties(l,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(d,l,b){function F({scale:S,translate:P},v){return Math.round((v-P[0])/S[0])}function f({scale:S,translate:P},v){return Math.round((P[1]-v)/S[1])}function J(S,P,v){const K=[];let e,q,w,R;for(let Q=0;Q<v.length;Q++){const c=v[Q];if(0<Q){if(w=F(S,c[0]),R=f(S,c[1]),w!==e||R!==q)K.push(P(c,w-e,R-q)),e=w,q=R}else e=F(S,c[0]),q=f(S,c[1]),K.push(P(c,
e,q))}return 0<K.length?K:null}function I(S,P,v,K){return J(S,v?K?N:D:K?D:k,P)}function O(S,P,v,K){const e=[];v=v?K?N:D:K?D:k;for(K=0;K<P.length;K++){const q=J(S,v,P[K]);q&&3<=q.length&&e.push(q)}return e.length?e:null}function L(S,P,v,K){const e=[];v=v?K?N:D:K?D:k;for(K=0;K<P.length;K++){const q=J(S,v,P[K]);q&&2<=q.length&&e.push(q)}return e.length?e:null}function H({scale:S,translate:P},v){return v*S[0]+P[0]}function A({scale:S,translate:P},v){return P[1]-v*S[1]}function m(S,P,v){const K=Array(v.length);
if(!v.length)return K;const [e,q]=S.scale;let w=H(S,v[0][0]);S=A(S,v[0][1]);K[0]=P(v[0],w,S);for(let R=1;R<v.length;R++){const Q=v[R];w+=Q[0]*e;S-=Q[1]*q;K[R]=P(Q,w,S)}return K}function n(S,P,v){const K=Array(v.length);for(let e=0;e<v.length;e++)K[e]=m(S,P,v[e]);return K}function y(S,P,v,K){return m(S,v?K?N:D:K?D:k,P)}function G(S,P,v,K){return n(S,v?K?N:D:K?D:k,P)}function E(S,P,v,K){return n(S,v?K?N:D:K?D:k,P)}function x(S,P,v){let [K,e]=v[0],q=Math.min(K,P[0]),w=Math.min(e,P[1]),R=Math.max(K,P[2]);
P=Math.max(e,P[3]);for(let Q=1;Q<v.length;Q++){const [c,z]=v[Q];K+=c;e+=z;0>c&&(q=Math.min(q,K));0<c&&(R=Math.max(R,K));0>z?w=Math.min(w,e):0<z&&(P=Math.max(P,e))}S[0]=q;S[1]=w;S[2]=R;S[3]=P;return S}function C(S,P){if(!P.length)return null;S[0]=S[1]=Number.POSITIVE_INFINITY;S[2]=S[3]=Number.NEGATIVE_INFINITY;for(let v=0;v<P.length;v++)x(S,S,P[v]);return S}function h(S,P,v,K,e){P.xmin=F(S,v.xmin);P.ymin=f(S,v.ymin);P.xmax=F(S,v.xmax);P.ymax=f(S,v.ymax);P!==v&&(K&&(P.zmin=v.zmin,P.zmax=v.zmax),e&&
(P.mmin=v.mmin,P.mmax=v.mmax));return P}function g(S,P,v,K,e){P.points=I(S,v.points,K,e);return P}function r(S,P,v,K,e){P.x=F(S,v.x);P.y=f(S,v.y);P!==v&&(K&&(P.z=v.z),e&&(P.m=v.m));return P}function u(S,P,v,K,e){S=O(S,v.rings,K,e);if(!S)return null;P.rings=S;return P}function p(S,P,v,K,e){S=L(S,v.paths,K,e);if(!S)return null;P.paths=S;return P}const k=(S,P,v)=>[P,v],D=(S,P,v)=>[P,v,S[2]],N=(S,P,v)=>[P,v,S[2],S[3]];d.equals=function(S,P){if(S===P||null==S&&null==P)return!0;if(null==S||null==P)return!1;
let v,K,e,q;S&&"upperLeft"===S.originPosition?(v=S.translate[0],K=S.translate[1],S=S.scale[0]):(v=l.isSome(S.extent)?S.extent.xmin:0,K=l.isSome(S.extent)?S.extent.ymax:0,S=S.tolerance);P&&"upperLeft"===P.originPosition?(e=P.translate[0],q=P.translate[1],P=P.scale[0]):(e=l.isSome(P.extent)?P.extent.xmin:0,q=l.isSome(P.extent)?P.extent.ymax:0,P=P.tolerance);return v===e&&K===q&&S===P};d.getQuantizedBoundsCoordsArray=x;d.getQuantizedBoundsCoordsArrayArray=C;d.getQuantizedBoundsPaths=function(S){return C([0,
0,0,0],S)};d.getQuantizedBoundsPoints=function(S){const P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return x(P,P,S)};d.getQuantizedBoundsRings=function(S){return C([0,0,0,0],S)};d.quantizeBounds=function(S,P,v){P[0]=F(S,v[0]);P[3]=f(S,v[1]);P[2]=F(S,v[2]);P[1]=f(S,v[3]);return P};d.quantizeExtent=h;d.quantizeGeometry=function(S,P){return S&&P?b.isPoint(P)?r(S,{},P,!1,!1):b.isPolyline(P)?p(S,{},P,!1,!1):b.isPolygon(P)?u(S,{},P,!1,!1):b.isMultipoint(P)?
g(S,{},P,!1,!1):b.isExtent(P)?h(S,{},P,!1,!1):null:null};d.quantizeMultipoint=g;d.quantizePaths=L;d.quantizePoint=r;d.quantizePoints=I;d.quantizePolygon=u;d.quantizePolyline=p;d.quantizeRings=O;d.quantizeX=F;d.quantizeY=f;d.toQuantizationTransform=function(S){return S?{originPosition:"upper-left"===S.originPosition?"upperLeft":"lower-left"===S.originPosition?"lowerLeft":S.originPosition,scale:S.tolerance?[S.tolerance,S.tolerance]:[1,1],translate:l.isSome(S.extent)?[S.extent.xmin,S.extent.ymax]:[0,
0]}:null};d.unquantizeBounds=function(S,P,v){return v?(P[0]=H(S,v[0]),P[1]=A(S,v[3]),P[2]=H(S,v[2]),P[3]=A(S,v[1]),P):[H(S,P[0]),A(S,P[3]),H(S,P[2]),A(S,P[1])]};d.unquantizeCoordsArray=m;d.unquantizeCoordsArrayArray=n;d.unquantizeExtent=function(S,P,v,K,e){P.xmin=H(S,v.xmin);P.ymin=A(S,v.ymin);P.xmax=H(S,v.xmax);P.ymax=A(S,v.ymax);P!==v&&(K&&(P.zmin=v.zmin,P.zmax=v.zmax),e&&(P.mmin=v.mmin,P.mmax=v.mmax));return P};d.unquantizeMultipoint=function(S,P,v,K,e){l.isSome(v)&&(P.points=y(S,v.points,K,e));
return P};d.unquantizePaths=G;d.unquantizePoint=function(S,P,v,K,e){if(l.isNone(v))return P;P.x=H(S,v.x);P.y=A(S,v.y);P!==v&&(K&&(P.z=v.z),e&&(P.m=v.m));return P};d.unquantizePoints=y;d.unquantizePolygon=function(S,P,v,K,e){l.isSome(v)&&(P.rings=E(S,v.rings,K,e));return P};d.unquantizePolyline=function(S,P,v,K,e){l.isSome(v)&&(P.paths=G(S,v.paths,K,e));return P};d.unquantizeRings=E;d.unquantizeX=H;d.unquantizeY=A;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(d,l,b){return function(){function F(J,I,O){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=J.returnDistinctValues;this.fieldsIndex=O;this.featureAdapter=I;if((I=J.outFields)&&!I.includes("*")){this.outFields=I;J=0;for(const H of I){var L=l.getExpressionFromFieldName(H);L=(I=this.fieldsIndex.get(L))?null:l.getWhereClause(L,
O);I=I?I.name:l.getAliasFromFieldName(H)||`FIELD_EXP_${J++}`;this._fieldDataCache.set(H,{alias:I,clause:L})}}}var f=F.prototype;f.countDistinctValues=function(J){if(!this.returnDistinctValues)return J.length;J.forEach(I=>this.getAttributes(I));return this._returnDistinctMap.size};f.getAttributes=function(J){J=this._processAttributesForOutFields(J);return this._processAttributesForDistinctValues(J)};f.getFieldValue=function(J,I,O){const L=O?O.name:I;let H=null;this._fieldDataCache.has(L)?H=this._fieldDataCache.get(L).clause:
O||(H=l.getWhereClause(I,this.fieldsIndex),this._fieldDataCache.set(L,{alias:L,clause:H}));return O?this.featureAdapter.getAttribute(J,L):H.calculateValue(J,this.featureAdapter)};f.getNormalizedValue=function(J,I){const O=I.normalizationType,L=I.normalizationTotal;let H=this.getFieldValue(J,I.field,I.fieldInfo);O&&Number.isFinite(H)&&(J=this.getFieldValue(J,I.normalizationField,I.normalizationFieldInfo),H=b.getNormalizedValue(H,O,J,L));return H};f.getExpressionValue=function(J,I,O,L){J={attributes:this.featureAdapter.getAttributes(J),
layer:{fields:this.fieldsIndex.fields}};O=L.createExecContext(J,O);return L.executeFunction(I,O)};f.getExpressionValues=function(J,I,O,L){const H={fields:this.fieldsIndex.fields};return J.map(A=>{A={attributes:this.featureAdapter.getAttributes(A),layer:H};A=L.createExecContext(A,O);return L.executeFunction(I,A)})};f.validateItem=function(J,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:l.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testFeature(J,
this.featureAdapter)};f.validateItems=function(J,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:l.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testSet(J,this.featureAdapter)};f._processAttributesForOutFields=function(J){const I=this.outFields;if(!I||!I.length)return this.featureAdapter.getAttributes(J);const O={};for(const L of I){const {alias:H,clause:A}=this._fieldDataCache.get(L);O[H]=A?A.calculateValue(J,this.featureAdapter):this.featureAdapter.getAttribute(J,
H)}return O};f._processAttributesForDistinctValues=function(J){if(d.isNone(J)||!this.returnDistinctValues)return J;var I=this.outFields,O=[];if(I)for(const H of I){var {alias:L}=this._fieldDataCache.get(H);O.push(J[L])}else for(L in J)O.push(J[L]);I=`${(I||["*"]).join(",")}=${O.join(",")}`;O=this._returnDistinctMap.get(I)||0;this._returnDistinctMap.set(I,++O);return 1<O?null:J};return F}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],
function(d,l,b){function F(L,H){return L?I.get(L,H):null}function f(L,H,A,m=!0){const n=[];for(const y of H)if("*"!==y&&!L.has(y))if(m){H=J(y);try{const G=F(H,L);if(!G)throw new l("feature-store:unsupported-query","invalid SQL expression",{where:H});if(!G.isStandardized)throw new l("feature-store:unsupported-query","expression is not standard",{clause:G});f(L,G.fieldNames,"expression contains missing fields")}catch(G){if((H=G&&G.details)&&(H.clause||H.where))throw G;H&&H.missingFields?n.push(...H.missingFields):
n.push(y)}}else n.push(y);if(n.length)throw new l("feature-store:unsupported-query",A,{missingFields:n});}function J(L){return L.split(" as ")[0]}const I=new b.WhereClauseCache(50,500),O=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));d.getAliasFromFieldName=function(L){return L.split(" as ")[1]};d.getExpressionFromFieldName=J;d.getWhereClause=F;d.hasInvalidFieldType=function(L,H){return(L=
H.get(L))?!O.has(L.type):!1};d.validateFields=f;d.validateHaving=function(L,H,A){if(!H)return!0;const m=I.get(H,L);if(!m)throw new l("feature-store:unsupported-query","invalid SQL expression",{having:H});if(!m.isAggregate)throw new l("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:H});f(L,m.fieldNames,"having contains missing fields");if(!m.getExpressions().every(n=>{const {aggregateType:y,field:G}=n,E=L.has(G)&&L.get(G).name;return A.some(x=>{const {onStatisticField:C,
statisticType:h}=x;return(L.has(C)&&L.get(C).name)===E&&h.toLowerCase().trim()===y})}))throw new l("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:H});return!0};d.validateWhere=function(L,H){if(!H)return!0;const A=I.get(H,L);if(!A)throw new l("feature-store:unsupported-query","invalid SQL expression",{where:H});if(!A.isStandardized)throw new l("feature-store:unsupported-query","where clause is not standard",{where:H});f(L,A.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(d,l,b){let F=function(){function f(J,I){this._cache=new l(J);this._invalidCache=new l(I)}f.prototype.get=function(J,I){const O=`${I.uid}:${J}`,L=this._cache.get(O);if(L)return L;if(void 0!==this._invalidCache.get(O))return null;try{const H=b.WhereClause.create(J,I);this._cache.put(O,H);return H}catch{return this._invalidCache.put(O,
null),null}};return f}();d.WhereClauseCache=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(d,l,b,F,f,J){function I(e,q){e+="";return e.length>=q?e:Array(q-e.length+1).join("0")+e}function O(e,q,w="0",R="0",Q="0",c="0",z="",B="0",U="0"){return"+"===z||"-"===z?(e=`${I(parseInt(e,
10),4)}-${I(parseInt(q,10),2)}-${I(parseInt(w,10),2)}`,q="",10>parseFloat(c)&&(q="0"),R=`${I(parseInt(R,10),2)}:${I(parseInt(Q,10),2)}:${q+parseFloat(c).toString()}`,z=`${z}${I(parseInt(B,10),2)}:${I(parseInt(U,10),2)}`,new Date(e+"T"+R+z)):new Date(parseInt(e,10),parseInt(q,10)-1,parseInt(w,10),parseInt(R,10),parseInt(Q,10),parseFloat(c))}function L(e){let q=u.exec(e);if(null!==q){const [,w,R,Q,c,z,B]=q;return O(w,R,Q,c,z,B)}q=p.exec(e);if(null!==q){const [,w,R,Q,c,z,B,U,Y,aa]=q;return O(w,R,Q,c,
z,B,U,Y,aa)}q=k.exec(e);if(null!==q){const [,w,R,Q,c,z,B,U,Y]=q;return O(w,R,Q,c,z,"0",B,U,Y)}q=D.exec(e);if(null!==q){const [,w,R,Q,c,z]=q;return O(w,R,Q,c,z)}q=r.exec(e);if(null!==q){const [,w,R,Q]=q;return O(w,R,Q)}throw Error("SQL Invalid Timestamp");}function H(e){e=r.exec(e);if(null===e)throw Error("SQL Invalid Date");const [,q,w,R]=e;return new Date(parseInt(q,10),parseInt(w,10)-1,parseInt(R,10))}function A(e){return Array.isArray(e)?e:[e]}function m(e){return null!==e?!0!==e:null}function n(e,
q){return null!=e&&null!=q?!0===e&&!0===q:!1===e||!1===q?!1:null}function y(e,q){return null!=e&&null!=q?!0===e||!0===q:!0===e||!0===q?!0:null}function G(e,q){if(null==e)return null;let w=!1;for(const R of q)if(null==R)w=null;else if(e===R){w=!0;break}return w}function E(e,q,w){if(null==e)return null;{let R="",Q=v.Normal;for(let c=0;c<q.length;c++){const z=q.charAt(c);switch(Q){case v.Normal:z===w?Q=v.Escaped:R="-[]/{}()*+?.\\^$|".includes(z)?R+("\\"+z):"%"===z?R+".*":"_"===z?R+".":R+z;break;case v.Escaped:R=
"-[]/{}()*+?.\\^$|".includes(z)?R+("\\"+z):R+z,Q=v.Normal}}q=new RegExp("^"+R+"$","m")}return q.test(e)}function x(e){return e instanceof Date?e.valueOf():e}function C(e,q,w){if(null==q||null==w)return null;q=x(q);w=x(w);switch(e){case "\x3c\x3e":return q!==w;case "\x3d":return q===w;case "\x3e":return q>w;case "\x3c":return q<w;case "\x3e\x3d":return q>=w;case "\x3c\x3d":return q<=w}}function h(e,q,w){if(q instanceof f.SqlInterval)if(w instanceof Date)switch(e){case "+":return new Date(q.valueInMilliseconds()+
w.getTime());case "-":return q.valueInMilliseconds()-w.getTime();case "*":return q.valueInMilliseconds()*w.getTime();case "/":return q.valueInMilliseconds()/w.getTime()}else if(w instanceof f.SqlInterval)switch(e){case "+":return f.SqlInterval.createFromMilliseconds(q.valueInMilliseconds()+w.valueInMilliseconds());case "-":return f.SqlInterval.createFromMilliseconds(q.valueInMilliseconds()-w.valueInMilliseconds());case "*":return q.valueInMilliseconds()*w.valueInMilliseconds();case "/":return q.valueInMilliseconds()/
w.valueInMilliseconds()}else q=q.valueInMilliseconds();else if(w instanceof f.SqlInterval)if(q instanceof Date)switch(e){case "+":return new Date(w.valueInMilliseconds()+q.getTime());case "-":return new Date(q.getTime()-w.valueInMilliseconds());case "*":return q.getTime()*w.valueInMilliseconds();case "/":return q.getTime()/w.valueInMilliseconds()}else w=w.valueInMilliseconds();else if(q instanceof Date&&"number"===typeof w)switch(w*=864E5,q=q.getTime(),e){case "+":return new Date(q+w);case "-":return new Date(q-
w);case "*":return new Date(q*w);case "/":return new Date(q/w)}else if(w instanceof Date&&"number"===typeof q)switch(q*=864E5,w=w.getTime(),e){case "+":return new Date(q+w);case "-":return new Date(q-w);case "*":return new Date(q*w);case "/":return new Date(q/w)}switch(e){case "+":return q+w;case "-":return q-w;case "*":return q*w;case "/":return q/w}}function g(e,q,w,R){e=R.getAttribute(e,q);return null!=e&&1===w[q]?new Date(e):e}const r=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,N=new Set(["current_timestamp","current_date","current_time"]);let S=function(){function e(){}e.makeBool=function(q){return!0===q};e.featureValue=function(q,w,R,Q){return g(q,w,R,Q)};e.equalsNull=function(q){return null===q};e.applyLike=function(q,w,R){return E(q,w,
R)};e.ensureArray=function(q){return A(q)};e.applyIn=function(q,w){return G(q,w)};e.currentDate=function(){const q=new Date;q.setHours(0,0,0,0);return q};e.makeSqlInterval=function(q,w,R){return f.SqlInterval.createFromValueAndQualifer(q,w,R)};e.convertInterval=function(q){return q instanceof f.SqlInterval?q.valueInMilliseconds():q};e.currentTimestamp=function(){return new Date};e.compare=function(q,w,R){return C(q,w,R)};e.calculate=function(q,w,R){return h(q,w,R)};e.makeComparable=function(q){return x(q)};
e.evaluateFunction=function(q,w){return f.evaluateFunction(q,w)};e.lookup=function(q,w){q=w[q];return void 0===q?null:q};e.between=function(q,w){return null==q||null==w[0]||null==w[1]?null:q>=w[0]&&q<=w[1]};e.notbetween=function(q,w){return null==q||null==w[0]||null==w[1]?null:q<w[0]||q>w[1]};e.ternaryNot=function(q){return m(q)};e.ternaryAnd=function(q,w){return n(q,w)};e.ternaryOr=function(q,w){return y(q,w)};return e}(),P=function(){function e(w,R){this.fieldsIndex=R;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=J.WhereGrammar.parse(w);const {isStandardized:Q,isAggregate:c,referencedFieldNames:z}=this._extractExpressionInfo(R);this.referencedFieldNames=z;this.isStandardized=Q;this.isAggregate=c}e.create=function(w,R){return new e(w,R)};var q=e.prototype;q.testSet=function(w,R=K){const Q={};for(const c of this.fieldNames)Q[c]=w.map(z=>R.getAttribute(z,c));return!!this._evaluateNode(this.parseTree,{attributes:Q},K)};q.calculateValue=function(w,R=K){w=this._evaluateNode(this.parseTree,
w,R);return w instanceof f.SqlInterval?w.valueInMilliseconds()/864E5:w};q.calculateValueCompiled=function(w,R=K){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(w,this.parameters,R,this.datefields);if(b("esri-csp-restrictions"))return this.calculateValue(w,R);this._compileMe();return this.parseTree._compiledVersion(w,this.parameters,R,this.datefields)};q.testFeature=function(w,R=K){return!!this._evaluateNode(this.parseTree,w,R)};q.testFeatureCompiled=function(w,R=K){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(w,this.parameters,R,this.datefields);if(b("esri-csp-restrictions"))return this.testFeature(w,R);this._compileMe();return!!this.parseTree._compiledVersion(w,this.parameters,R,this.datefields)};q.getFunctions=function(){const w=new Set;this._visitAll(this.parseTree,R=>{"function"===R.type&&w.add(R.name.toLowerCase())});return Array.from(w)};q.getExpressions=function(){const w=new Map;this._visitAll(this.parseTree,R=>{if("function"===
R.type){const Q=R.name.toLowerCase();R=R.args.value[0];if("column-reference"===R.type){R=R.column;const c=`${Q}-${R}`;w.has(c)||w.set(c,{aggregateType:Q,field:R})}}});return[...w.values()]};q.getVariables=function(){const w=new Set;this._visitAll(this.parseTree,R=>{"parameter"===R.type&&w.add(R.value.toLowerCase())});return Array.from(w)};q._compileMe=function(){const w="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature",
"lookups","attributeAdapter","datefields",w)).bind(S)};q._extractExpressionInfo=function(w){const R=[],Q=new Set;let c=!0,z=!0;this._visitAll(this.parseTree,B=>{switch(B.type){case "column-reference":{const U=w.get(B.column);let Y,aa;U?Y=aa=U.name:(aa=B.column,Y=aa.toLowerCase());!U||"date"!==U.type&&"esriFieldTypeDate"!==U.type||(this.datefields[U.name]=1);Q.has(Y)||(Q.add(Y),R.push(aa));B.column=aa;break}case "function":{const {name:U,args:Y}=B;B=Y.value.length;c&&(c=f.isStandardized(U,B));z&&(z=
F.isAggregate(U,B))}}});return{referencedFieldNames:Array.from(R),isStandardized:c,isAggregate:z}};q._visitAll=function(w,R){if(null!=w)switch(R(w),w.type){case "when-clause":this._visitAll(w.operand,R);this._visitAll(w.value,R);break;case "case-expression":for(const Q of w.clauses)this._visitAll(Q,R);"simple"===w.format&&this._visitAll(w.operand,R);null!==w.else&&this._visitAll(w.else,R);break;case "expression-list":for(const Q of w.value)this._visitAll(Q,R);break;case "unary-expression":this._visitAll(w.expr,
R);break;case "binary-expression":this._visitAll(w.left,R);this._visitAll(w.right,R);break;case "function":this._visitAll(w.args,R)}};q.evaluateNodeToJavaScript=function(w){switch(w.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(w.value)+", "+JSON.stringify(w.qualifier)+","+JSON.stringify(w.op)+")";case "case-expression":var R="";if("simple"===w.format){var Q="this.makeComparable("+this.evaluateNodeToJavaScript(w.operand)+")";R="( ";for(let c=0;c<w.clauses.length;c++)R+=
" ("+Q+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(w.clauses[c].operand)+")) ? ("+this.evaluateNodeToJavaScript(w.clauses[c].value)+") : "}else for(R="( ",Q=0;Q<w.clauses.length;Q++)R+=" this.makeBool("+this.evaluateNodeToJavaScript(w.clauses[Q].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(w.clauses[Q].value)+") : ";R=null!==w.else?R+this.evaluateNodeToJavaScript(w.else):R+"null";return R+=" )";case "parameter":return"this.lookup("+JSON.stringify(w.value.toLowerCase())+
",lookups)";case "expression-list":R="[";for(Q of w.value)"["!==R&&(R+=","),R+=this.evaluateNodeToJavaScript(Q);return R+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(w.expr)+")";case "binary-expression":switch(w.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+" )";
case "IS":if("null"!==w.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(w.left)+")";case "ISNOT":if("null"!==w.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(w.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(w.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(w.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(w.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(w.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+","+JSON.stringify(w.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+","+JSON.stringify(w.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(w.operator)+","+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(w.operator)+","+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+
")"}throw Error("Not Supported Operator "+w.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(w.value);case "date":return"(new Date("+H(w.value).getTime().toString()+"))";case "timestamp":return"(new Date("+L(w.value).getTime().toString()+"))";case "current-time":return"date"===w.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(w.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(w.name)+","+this.evaluateNodeToJavaScript(w.args)+")"}throw Error("Unsupported sql syntax "+w.type);};q._evaluateNode=function(w,R,Q){switch(w.type){case "interval":return R=this._evaluateNode(w.value,R,Q),f.SqlInterval.createFromValueAndQualifer(R,w.qualifier,w.op);case "case-expression":if("simple"===w.format){var c=x(this._evaluateNode(w.operand,R,Q));for(var z=0;z<w.clauses.length;z++)if(c===x(this._evaluateNode(w.clauses[z].operand,R,Q)))return this._evaluateNode(w.clauses[z].value,
R,Q)}else for(c=0;c<w.clauses.length;c++)if(!0===this._evaluateNode(w.clauses[c].operand,R,Q))return this._evaluateNode(w.clauses[c].value,R,Q);return null!==w.else?this._evaluateNode(w.else,R,Q):null;case "parameter":return this.parameters[w.value.toLowerCase()];case "expression-list":c=[];for(z of w.value)c.push(this._evaluateNode(z,R,Q));return c;case "unary-expression":return m(this._evaluateNode(w.expr,R,Q));case "binary-expression":switch(w.operator){case "AND":return n(this._evaluateNode(w.left,
R,Q),this._evaluateNode(w.right,R,Q));case "OR":return y(this._evaluateNode(w.left,R,Q),this._evaluateNode(w.right,R,Q));case "IS":if("null"!==w.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(w.left,R,Q);case "ISNOT":if("null"!==w.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(w.left,R,Q);case "IN":return c=A(this._evaluateNode(w.right,R,Q)),G(this._evaluateNode(w.left,R,Q),c);case "NOT IN":return c=A(this._evaluateNode(w.right,
R,Q)),m(G(this._evaluateNode(w.left,R,Q),c));case "BETWEEN":return c=this._evaluateNode(w.left,R,Q),w=this._evaluateNode(w.right,R,Q),null==c||null==w[0]||null==w[1]?null:c>=x(w[0])&&c<=x(w[1]);case "NOTBETWEEN":return c=this._evaluateNode(w.left,R,Q),w=this._evaluateNode(w.right,R,Q),null==c||null==w[0]||null==w[1]?null:c<x(w[0])||c>x(w[1]);case "LIKE":return E(this._evaluateNode(w.left,R,Q),this._evaluateNode(w.right,R,Q),w.escape);case "NOT LIKE":return m(E(this._evaluateNode(w.left,R,Q),this._evaluateNode(w.right,
R,Q),w.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return C(w.operator,this._evaluateNode(w.left,R,Q),this._evaluateNode(w.right,R,Q));case "-":case "+":case "*":case "/":return h(w.operator,this._evaluateNode(w.left,R,Q),this._evaluateNode(w.right,R,Q))}case "null":case "boolean":case "string":case "number":return w.value;case "date":return H(w.value);case "timestamp":return L(w.value);case "current-time":return R=new Date,"date"===w.mode&&R.setHours(0,
0,0,0),R;case "column-reference":return g(R,w.column,this.datefields,Q);case "function":return R=this._evaluateNode(w.args,R,Q),this.isAggregate?F.aggregateFunction(w.name,R):f.evaluateFunction(w.name,R)}throw Error("Unsupported sql syntax "+w.type);};l._createClass(e,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,w=>{"current-time"===
w.type?this._hasDateFunctions=!0:"function"===w.type&&(this._hasDateFunctions=this._hasDateFunctions||N.has(w.name.toLowerCase()))});return this._hasDateFunctions}}]);return e}();var v;(function(e){e[e.Normal=0]="Normal";e[e.Escaped=1]="Escaped"})(v||(v={}));const K={getAttribute(e,q){return(e&&"object"===typeof e.attributes?e.attributes:e)[q]}};d.WhereClause=P;d.defaultAttributeAdapter=K;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(d){function l(f){let J=0;for(let I=0;I<f.length;I++)J+=f[I];return J/f.length}function b(f){const J=l(f),I=f.length;let O=0;for(const L of f)O+=(L-J)**2;return 1<I?O/(I-1):0}const F={min:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.min.apply(Math,f[0])},max:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.max.apply(Math,f[0])},avg:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:l(f[0])},sum:{minParams:1,maxParams:1,evaluate:f=>{if(null==f[0])f=null;else{{f=f[0];
let J=0;for(let I=0;I<f.length;I++)J+=f[I];f=J}}return f}},stddev:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sqrt(b(f[0]))},count:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].length},var:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:b(f[0])}};d.aggregateFunction=function(f,J){const I=F[f.toLowerCase()];if(null==I)throw Error("Function Not Recognised");if(J.length<I.minParams||J.length>I.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);
return I.evaluate(J)};d.isAggregate=function(f,J){f=F[f.toLowerCase()];return null!=f&&J>=f.minParams&&J<=f.maxParams};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(d,l){let b=function(){function f(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}f._fixDefaults=function(J){if(null!==J.precision||null!==J.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};f.createFromMilliseconds=function(J){const I=new f;I.second=J/1E3;return I};f.createFromValueAndQualifer=function(J,I,O){let L=null;const H=new f;H.op="-"===O?"-":"+";if("interval-period"===I.type){f._fixDefaults(I);if("year"===I.period||"month"===I.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(J))H[I.period]=parseFloat(J);else throw Error("Illegal Interval");}else{f._fixDefaults(I.start);f._fixDefaults(I.end);if("year"===I.start.period||"month"===I.start.period)throw Error("Year-Month Intervals not supported");
if("year"===I.end.period||"month"===I.end.period)throw Error("Year-Month Intervals not supported");switch(I.start.period){case "day":switch(I.end.period){case "hour":L=/^[0-9]{1,} [0-9]{1,}$/;if(L.test(J))H[I.start.period]=parseFloat(J.split(" ")[0]),H[I.end.period]=parseFloat(J.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":L=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(L.test(J))H[I.start.period]=parseFloat(J.split(" ")[0]),J=J.split(" ")[1].split(":"),H.hour=parseFloat(J[0]),
H.minute=parseFloat(J[1]);else throw Error("Illegal Interval");break;case "second":L=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(L.test(J))H[I.start.period]=parseFloat(J.split(" ")[0]),J=J.split(" ")[1].split(":"),H.hour=parseFloat(J[0]),H.minute=parseFloat(J[1]),H.second=parseFloat(J[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(I.end.period){case "minute":L=/^[0-9]{1,}:[0-9]{1,}$/;if(L.test(J))H.hour=
parseFloat(J.split(":")[0]),H.minute=parseFloat(J.split(":")[1]);else throw Error("Illegal Interval");break;case "second":L=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(L.test(J))J=J.split(":"),H.hour=parseFloat(J[0]),H.minute=parseFloat(J[1]),H.second=parseFloat(J[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(I.end.period){case "second":L=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(L.test(J))J=J.split(":"),
H.minute=parseFloat(J[0]),H.second=parseFloat(J[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return H};f.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f}();const F={extract:{minParams:2,maxParams:2,evaluate:([f,J])=>{if(null==J)return null;if(J instanceof Date)switch(f.toUpperCase()){case "SECOND":return J.getSeconds();
case "MINUTE":return J.getMinutes();case "HOUR":return J.getHours();case "DAY":return J.getDate();case "MONTH":return J.getMonth()+1;case "YEAR":return J.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:f=>{if(2===f.length){const [J,I]=f;return null==J||null==I?null:J.toString().substring(I-1)}if(3===f.length){const [J,I,O]=f;return null==J||null==I||null==O?null:0>=O?"":J.toString().substring(I-1,I+O-1)}}},position:{minParams:2,maxParams:2,
evaluate:([f,J])=>null==f||null==J?null:J.indexOf(f)+1},trim:{minParams:2,maxParams:3,evaluate:f=>{var J=3===f.length,I=J?f[1]:" ";J=J?f[2]:f[1];if(null==I||null==J)return null;I=`(${l.escapeRegExpString(I)})`;switch(f[0]){case "BOTH":return J.replace(new RegExp(`^${I}*|${I}*$`,"g"),"");case "LEADING":return J.replace(new RegExp(`^${I}*`,"g"),"");case "TRAILING":return J.replace(new RegExp(`${I}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:f=>
null==f[0]?null:Math.abs(f[0])},ceiling:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.ceil(f[0])},floor:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.floor(f[0])},log:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])},log10:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.log(f[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.sin(f[0])},cos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.cos(f[0])},tan:{minParams:1,
maxParams:1,evaluate:f=>null==f[0]?null:Math.tan(f[0])},asin:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.asin(f[0])},acos:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.acos(f[0])},atan:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:Math.atan(f[0])},sign:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:0<f[0]?1:0>f[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==f[1]?null:f[0]**f[1]},mod:{minParams:2,maxParams:2,evaluate:f=>null==f[0]||null==
f[1]?null:f[0]%f[1]},round:{minParams:1,maxParams:2,evaluate:f=>{const J=f[0];f=2===f.length?10**f[1]:1;return null==J?null:Math.round(J*f)/f}},truncate:{minParams:1,maxParams:2,evaluate:f=>null==f[0]?null:1===f.length?parseInt(f[0].toFixed(0),10):parseFloat(f[0].toFixed(f[1]))},char_length:{minParams:1,maxParams:1,evaluate:f=>"string"===typeof f[0]||f[0]instanceof String?f[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:f=>{let J="";for(let I=0;I<f.length;I++){if(null==f[I])return null;
J+=f[I].toString()}return J}},lower:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:f=>null==f[0]?null:f[0].toString().toUpperCase()}};d.SqlInterval=b;d.evaluateFunction=function(f,J){const I=F[f.toLowerCase()];if(null==I)throw Error("Function Not Recognised");if(J.length<I.minParams||J.length>I.maxParams)throw Error(`Invalid Parameter count for call to ${f.toUpperCase()}`);return I.evaluate(J)};d.isStandardized=function(f,
J){f=F[f.toLowerCase()];return null!=f&&J>=f.minParams&&J<=f.maxParams};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(d,l){var b={exports:{}};(function(f){(function(J,I){f.exports&&(f.exports=I())})(l.commonjsGlobal,function(){function J(O,L,H,A){O=Error.call(this,O);Object.setPrototypeOf&&Object.setPrototypeOf(O,J.prototype);O.expected=L;O.found=H;O.location=
A;O.name="SyntaxError";return O}function I(O,L,H){H=H||" ";if(O.length>L)return O;L-=O.length;H+=H.repeat(L);return O+H.slice(0,L)}(function(O,L){function H(){this.constructor=O}H.prototype=L.prototype;O.prototype=new H})(J,Error);J.prototype.format=function(O){var L="Error: "+this.message;if(this.location){var H=null,A;for(A=0;A<O.length;A++)if(O[A].source===this.location.source){H=O[A].text.split(/\r\n|\n|\r/g);break}O=this.location.start;A=this.location.source+":"+O.line+":"+O.column;if(H){var m=
this.location.end,n=I("",O.line.toString().length);H=H[O.line-1];m=O.line===m.line?m.column:H.length+1;L+="\n --\x3e "+A+"\n"+n+" |\n"+O.line+" | "+H+"\n"+n+" | "+I("",O.column-1)+I("",m-O.column,"^")}else L+="\n at "+A}return L};J.buildMessage=function(O,L){function H(G){return G.charCodeAt(0).toString(16).toUpperCase()}function A(G){return G.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+
H(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+H(E)})}function m(G){return G.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+H(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+H(E)})}function n(G){return y[G.type](G)}var y={literal:function(G){return'"'+A(G.text)+'"'},class:function(G){var E=G.parts.map(function(x){return Array.isArray(x)?
m(x[0])+"-"+m(x[1]):m(x)});return"["+(G.inverted?"^":"")+E+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(G){return G.description}};return"Expected "+function(G){G=G.map(n);var E,x;G.sort();if(0<G.length){for(x=E=1;E<G.length;E++)G[E-1]!==G[E]&&(G[x]=G[E],x++);G.length=x}switch(G.length){case 1:return G[0];case 2:return G[0]+" or "+G[1];default:return G.slice(0,-1).join(", ")+", or "+G[G.length-1]}}(O)+" but "+(L?'"'+A(L)+'"':"end of input")+" found."};
return{SyntaxError:J,parse:function(O,L){function H(V,a){return{type:"literal",text:V,ignoreCase:a}}function A(V,a,t){return{type:"class",parts:V,inverted:a,ignoreCase:t}}function m(V){var a=jc[V],t;if(!a){for(t=V-1;!jc[t];)t--;a=jc[t];for(a={line:a.line,column:a.column};t<V;)10===O.charCodeAt(t)?(a.line++,a.column=1):a.column++,t++;jc[V]=a}return a}function n(V,a){var t=m(V),W=m(a);return{source:Ib,start:{offset:V,line:t.line,column:t.column},end:{offset:a,line:W.line,column:W.column}}}function y(V){T<
ub||(T>ub&&(ub=T,bc=[]),bc.push(V))}function G(){var V=T;za();var a=x();a!==M?(za(),V=a):(T=V,V=M);return V}function E(){var V=T;var a=x();if(a!==M){V=[];var t=T;var W=za();var Z=Ra();if(Z!==M){var fa=za();var oa=x();oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;for(;t!==M;)V.push(t),t=T,W=za(),Z=Ra(),Z!==M?(fa=za(),oa=x(),oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)):(T=t,t=M);t={type:"expression-list"};a=[a];for(W=0;W<V.length;W++)a.push(V[W][3]);t.value=a;V=t}else T=V,V=M;return V}function x(){var V=T;var a=
C();if(a!==M){V=[];var t=T;var W=za();var Z=sa();if(Z!==M){var fa=za();var oa=C();oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;for(;t!==M;)V.push(t),t=T,W=za(),Z=sa(),Z!==M?(fa=za(),oa=C(),oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)):(T=t,t=M);V=vb(a,V)}else T=V,V=M;return V}function C(){var V=T;var a=h();if(a!==M){V=[];var t=T;var W=za();var Z=pa();if(Z!==M){var fa=za();var oa=h();oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;for(;t!==M;)V.push(t),t=T,W=za(),Z=pa(),Z!==M?(fa=za(),oa=h(),oa!==M?t=W=[W,Z,fa,
oa]:(T=t,t=M)):(T=t,t=M);V=vb(a,V)}else T=V,V=M;return V}function h(){var V=T;var a=la();if(a===M){a=T;if(33===O.charCodeAt(T)){var t=Jb;T++}else t=M,0===ya&&y(fc);if(t!==M){var W=T;ya++;if(61===O.charCodeAt(T)){var Z=Qb;T++}else Z=M,0===ya&&y(od);ya--;Z===M?W=void 0:(T=W,W=M);W!==M?a=t=[t,W]:(T=a,a=M)}else T=a,a=M}a!==M?(t=za(),W=h(),W!==M?V={type:"unary-expression",operator:"NOT",expr:W}:(T=V,V=M)):(T=V,V=M);if(V===M){a=T;V=p();if(V!==M){za();a=[];t=T;W=za();Z=g();if(Z!==M){var fa=za();var oa=p();
oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;if(t!==M)for(;t!==M;)a.push(t),t=T,W=za(),Z=g(),Z!==M?(fa=za(),oa=p(),oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)):(T=t,t=M);else a=M;a!==M&&(a={type:"arithmetic",tail:a});a===M&&(a=T,t=u(),t!==M?(za(),W=Ma(),W!==M?(za(),W=E(),W!==M?(za(),Z=Qa(),Z!==M?a={op:t,right:W}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M)):(T=a,a=M),a===M&&(a=T,t=u(),t!==M?(za(),W=Ma(),W!==M?(za(),W=Qa(),W!==M?a={op:t,right:{type:"expression-list",value:[]}}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M),a===M&&(a=T,
t=u(),t!==M?(za(),W=q(),W!==M?a={op:t,right:W}:(T=a,a=M)):(T=a,a=M))),a===M&&(a=T,Z=la(),Z!==M?(za(),t=da(),t!==M?(za(),W=p(),W!==M?(za(),fa=pa(),fa!==M?(za(),Z=p(),Z!==M?a={op:"NOT"+t,right:{type:"expression-list",value:[W,Z]}}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M)):(T=a,a=M)):(T=a,a=M),a===M&&(a=T,Z=da(),Z!==M?(za(),t=p(),t!==M?(za(),W=pa(),W!==M?(za(),fa=p(),fa!==M?a={op:Z,right:{type:"expression-list",value:[t,fa]}}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M)):(T=a,a=M)),a===M&&(a=T,t=ta(),t!==M?(za(),W=la(),W!==
M?(za(),W=p(),W!==M?a={op:t+"NOT",right:W}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M),a===M&&(a=T,t=ta(),t!==M?(za(),W=p(),W!==M?a={op:t,right:W}:(T=a,a=M)):(T=a,a=M)),a===M&&(a=T,t=r(),t!==M?(za(),W=B(),W!==M?(za(),Z=T,O.substr(T,6).toLowerCase()===Tc?(fa=O.substr(T,6),T+=6):(fa=M,0===ya&&y(de)),fa!==M?(fa=T,ya++,oa=K(),ya--,oa===M?fa=void 0:(T=fa,fa=M),fa!==M?Z="ESCAPE":(T=Z,Z=M)):(T=Z,Z=M),Z!==M?(za(),Z=U(),Z!==M?a={op:t,right:W,escape:Z.value}:(T=a,a=M)):(T=a,a=M)):(T=a,a=M)):(T=a,a=M),a===M&&(a=T,t=r(),
t!==M?(za(),W=B(),W!==M?a={op:t,right:W,escape:""}:(T=a,a=M)):(T=a,a=M))))));a===M&&(a=null);""==a||void 0==a||null==a?a=V:(t=null,a=t="arithmetic"==a.type?vb(V,a.tail):sb(a.op,V,a.right,a.escape))}else T=a,a=M;V=a}return V}function g(){if(O.substr(T,2)===Db){var V=Db;T+=2}else V=M,0===ya&&y(gc);V===M&&(62===O.charCodeAt(T)?(V=fb,T++):(V=M,0===ya&&y(Bb)),V===M&&(O.substr(T,2)===xb?(V=xb,T+=2):(V=M,0===ya&&y(Bc)),V===M&&(O.substr(T,2)===Rb?(V=Rb,T+=2):(V=M,0===ya&&y(ib)),V===M&&(60===O.charCodeAt(T)?
(V=Sb,T++):(V=M,0===ya&&y(Ud)),V===M&&(61===O.charCodeAt(T)?(V=Qb,T++):(V=M,0===ya&&y(od)),V===M&&(O.substr(T,2)===Kb?(V=Kb,T+=2):(V=M,0===ya&&y(pd))))))));return V}function r(){var V=V=T;var a=la();if(a!==M){var t=za();var W=ma();W!==M?V=a=[a,t,W]:(T=V,V=M)}else T=V,V=M;V!==M&&(V=V[0]+" "+V[2]);V===M&&(V=ma());return V}function u(){var V=V=T;var a=la();if(a!==M){var t=za();var W=ka();W!==M?V=a=[a,t,W]:(T=V,V=M)}else T=V,V=M;V!==M&&(V=V[0]+" "+V[2]);V===M&&(V=ka());return V}function p(){var V=T;var a=
D();if(a!==M){V=[];var t=T;var W=za();var Z=k();if(Z!==M){var fa=za();var oa=D();oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;for(;t!==M;)V.push(t),t=T,W=za(),Z=k(),Z!==M?(fa=za(),oa=D(),oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)):(T=t,t=M);V=vb(a,V)}else T=V,V=M;return V}function k(){if(43===O.charCodeAt(T)){var V=X;T++}else V=M,0===ya&&y(hc);V===M&&(45===O.charCodeAt(T)?(V=ia,T++):(V=M,0===ya&&y(ic)));return V}function D(){var V=T;var a=S();if(a!==M){V=[];var t=T;var W=za();var Z=N();if(Z!==M){var fa=za();
var oa=S();oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)}else T=t,t=M;for(;t!==M;)V.push(t),t=T,W=za(),Z=N(),Z!==M?(fa=za(),oa=S(),oa!==M?t=W=[W,Z,fa,oa]:(T=t,t=M)):(T=t,t=M);V=vb(a,V)}else T=V,V=M;return V}function N(){if(42===O.charCodeAt(T)){var V=xa;T++}else V=M,0===ya&&y(qd);V===M&&(47===O.charCodeAt(T)?(V=Ha,T++):(V=M,0===ya&&y(rd)));return V}function S(){var V=U();if(V===M){var a=T;var t=T;var W=na();if(W!==M){var Z=ba();if(Z!==M){var fa=ra();fa!==M?t=parseFloat(W+Z+fa):(T=t,t=M)}else T=t,t=M}else T=t,
t=M;t===M&&(t=T,W=na(),W!==M?(Z=ba(),Z!==M?t=parseFloat(W+Z):(T=t,t=M)):(T=t,t=M),t===M&&(t=T,W=na(),W!==M?(Z=ra(),Z!==M?t=parseFloat(W+Z):(T=t,t=M)):(T=t,t=M),t===M&&(t=T,W=na(),W!==M&&(W=parseFloat(W)),t=W)));var oa=t;if(oa!==M){var Aa=T;ya++;var Fa=v();ya--;Fa===M?Aa=void 0:(T=Aa,Aa=M);Aa!==M?a={type:"number",value:oa}:(T=a,a=M)}else T=a,a=M;V=a;if(V===M){var Ja=T;var Ta=T;if(O.substr(T,4).toLowerCase()===yb){var Na=O.substr(T,4);T+=4}else Na=M,0===ya&&y(vd);if(Na!==M){var Pa=T;ya++;var Va=K();
ya--;Va===M?Pa=void 0:(T=Pa,Pa=M);Pa!==M?Ta=Na=[Na,Pa]:(T=Ta,Ta=M)}else T=Ta,Ta=M;var bb=Ta;bb!==M&&(bb={type:"boolean",value:!0});Ja=bb;if(Ja===M){Ja=T;var qb=T;if(O.substr(T,5).toLowerCase()===cc){var tb=O.substr(T,5);T+=5}else tb=M,0===ya&&y(Dc);if(tb!==M){var Hb=T;ya++;var af=K();ya--;af===M?Hb=void 0:(T=Hb,Hb=M);Hb!==M?qb=tb=[tb,Hb]:(T=qb,qb=M)}else T=qb,qb=M;bb=qb;bb!==M&&(bb={type:"boolean",value:!1});Ja=bb}V=Ja;if(V===M){var kc=T;if(O.substr(T,4).toLowerCase()===jb){var zd=O.substr(T,4);T+=
4}else zd=M,0===ya&&y(Cc);if(zd!==M){var Fc=T;ya++;var bf=K();ya--;bf===M?Fc=void 0:(T=Fc,Fc=M);Fc!==M?kc=zd=[zd,Fc]:(T=kc,kc=M)}else T=kc,kc=M;var xe=kc;xe!==M&&(xe={type:"null",value:null});V=xe;if(V===M){var lc=T;var mc=T;if(O.substr(T,4).toLowerCase()===ad){var Je=O.substr(T,4);T+=4}else Je=M,0===ya&&y(xd);if(Je!==M){var Ad=T;ya++;var cf=K();ya--;cf===M?Ad=void 0:(T=Ad,Ad=M);Ad!==M?mc="DATE":(T=mc,mc=M)}else T=mc,mc=M;if(mc!==M){za();var Ke=B();Ke!==M?lc={type:"date",value:Ke.value}:(T=lc,lc=
M)}else T=lc,lc=M;V=lc;if(V===M){var nc=T;var oc=T;if(O.substr(T,9).toLowerCase()===$c){var Le=O.substr(T,9);T+=9}else Le=M,0===ya&&y(ne);if(Le!==M){var Bd=T;ya++;var df=K();ya--;df===M?Bd=void 0:(T=Bd,Bd=M);Bd!==M?oc="TIMESTAMP":(T=oc,oc=M)}else T=oc,oc=M;if(oc!==M){za();var Me=B();Me!==M?nc={type:"timestamp",value:Me.value}:(T=nc,nc=M)}else T=nc,nc=M;V=nc;if(V===M){var gb=T;var ye=ja();if(ye!==M){za();if(45===O.charCodeAt(T)){var Mb=ia;T++}else Mb=M,0===ya&&y(ic);Mb===M&&(43===O.charCodeAt(T)?(Mb=
X,T++):(Mb=M,0===ya&&y(hc)));if(Mb!==M){za();var Gc=B();if(Gc!==M){za();var Ne=R();Ne!==M?gb={type:"interval",value:Gc,qualifier:Ne,op:Mb}:(T=gb,gb=M)}else T=gb,gb=M}else T=gb,gb=M}else T=gb,gb=M;gb===M&&(gb=T,ye=ja(),ye!==M?(za(),Mb=B(),Mb!==M?(za(),Gc=R(),Gc!==M?gb={type:"interval",value:Mb,qualifier:Gc,op:""}:(T=gb,gb=M)):(T=gb,gb=M)):(T=gb,gb=M));V=gb}}}}}}var Xa=V;if(Xa===M){var nb=T;var pc=T;if(O.substr(T,7).toLowerCase()===Xc){var Oe=O.substr(T,7);T+=7}else Oe=M,0===ya&&y(ke);if(Oe!==M){var Cd=
T;ya++;var ef=K();ya--;ef===M?Cd=void 0:(T=Cd,Cd=M);Cd!==M?pc="EXTRACT":(T=pc,pc=M)}else T=pc,pc=M;if(pc!==M){za();var ff=Ma();if(ff!==M){za();var zb=va();zb===M&&(zb=qa(),zb===M&&(zb=wa(),zb===M&&(zb=Ca(),zb===M&&(zb=Ka(),zb===M&&(zb=Ga())))));var Pe=zb;if(Pe!==M){za();var gf=ea();if(gf!==M){za();var Qe=x();if(Qe!==M){za();var hf=Qa();hf!==M?nb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Pe},Qe]}}:(T=nb,nb=M)}else T=nb,nb=M}else T=nb,nb=M}else T=nb,nb=
M}else T=nb,nb=M}else T=nb,nb=M;Xa=nb;if(Xa===M){var ob=T;var qc=T;if(O.substr(T,9).toLowerCase()===Wc){var Re=O.substr(T,9);T+=9}else Re=M,0===ya&&y(je);if(Re!==M){var Dd=T;ya++;var jf=K();ya--;jf===M?Dd=void 0:(T=Dd,Dd=M);Dd!==M?qc="SUBSTRING":(T=qc,qc=M)}else T=qc,qc=M;if(qc!==M){za();var kf=Ma();if(kf!==M){za();var ze=x();if(ze!==M){za();var lf=ea();if(lf!==M){za();var Ae=x();if(Ae!==M){za();var Nb=T;var rc=T;if(O.substr(T,3).toLowerCase()===Vc){var Se=O.substr(T,3);T+=3}else Se=M,0===ya&&y(ie);
if(Se!==M){var Ed=T;ya++;var mf=K();ya--;mf===M?Ed=void 0:(T=Ed,Ed=M);Ed!==M?rc="FOR":(T=rc,rc=M)}else T=rc,rc=M;var Hc=rc;if(Hc!==M){var nf=za();var Te=x();if(Te!==M){var of=za();Nb=Hc=[Hc,nf,Te,of]}else T=Nb,Nb=M}else T=Nb,Nb=M;Nb===M&&(Nb=null);Hc=Qa();Hc!==M?ob={type:"function",name:"substring",args:{type:"expression-list",value:Nb?[ze,Ae,Nb[2]]:[ze,Ae]}}:(T=ob,ob=M)}else T=ob,ob=M}else T=ob,ob=M}else T=ob,ob=M}else T=ob,ob=M}else T=ob,ob=M;Xa=ob;if(Xa===M){var Za=T;var Be=ha();if(Be!==M){za();
var Ce=Ma();if(Ce!==M){za();var Ob=w();Ob===M&&(Ob=null);za();var Ic=x();if(Ic!==M){za();var De=ea();if(De!==M){za();var Ue=x();if(Ue!==M){za();var pf=Qa();pf!==M?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ob?"BOTH":Ob},Ic,Ue]}}:(T=Za,Za=M)}else T=Za,Za=M}else T=Za,Za=M}else T=Za,Za=M}else T=Za,Za=M}else T=Za,Za=M;Za===M&&(Za=T,Be=ha(),Be!==M?(za(),Ce=Ma(),Ce!==M?(za(),Ob=w(),Ob===M&&(Ob=null),za(),Ic=x(),Ic!==M?(za(),De=Qa(),De!==M?Za={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ob?"BOTH":Ob},Ic]}}:(T=Za,Za=M)):(T=Za,Za=M)):(T=Za,Za=M)):(T=Za,Za=M));Xa=Za;if(Xa===M){var pb=T;var sc=T;if(O.substr(T,8).toLowerCase()===Zc){var Ve=O.substr(T,8);T+=8}else Ve=M,0===ya&&y(me);if(Ve!==M){var Fd=T;ya++;var qf=K();ya--;qf===M?Fd=void 0:(T=Fd,Fd=M);Fd!==M?sc="POSITION":(T=sc,sc=M)}else T=sc,sc=M;if(sc!==M){za();var rf=Ma();if(rf!==M){za();var We=x();if(We!==M){za();var sf=ka();if(sf!==M){za();var Xe=x();if(Xe!==
M){za();var tf=Qa();tf!==M?pb={type:"function",name:"position",args:{type:"expression-list",value:[We,Xe]}}:(T=pb,pb=M)}else T=pb,pb=M}else T=pb,pb=M}else T=pb,pb=M}else T=pb,pb=M}else T=pb,pb=M;Xa=pb;if(Xa===M){var Tb=T;var Gd;var Ab=T;Ab=Gd=P();if(Ab===M)if(Ab=T,96===O.charCodeAt(T)?(Gd=yc,T++):(Gd=M,0===ya&&y(Sc)),Gd!==M){var Hd=[];if(Ac.test(O.charAt(T))){var Pb=O.charAt(T);T++}else Pb=M,0===ya&&y(Zb);if(Pb!==M)for(;Pb!==M;)Hd.push(Pb),Ac.test(O.charAt(T))?(Pb=O.charAt(T),T++):(Pb=M,0===ya&&y(Zb));
else Hd=M;Hd!==M?(96===O.charCodeAt(T)?(Pb=yc,T++):(Pb=M,0===ya&&y(Sc)),Pb!==M?Ab=Hd.join(""):(T=Ab,Ab=M)):(T=Ab,Ab=M)}else T=Ab,Ab=M;var Ye=Ab;if(Ye!==M){za();var uf=Ma();if(uf!==M){za();var Id=E();Id===M&&(Id=null);za();var vf=Qa();vf!==M?Tb={type:"function",name:Ye,args:Id?Id:{type:"expression-list",value:[]}}:(T=Tb,Tb=M)}else T=Tb,Tb=M}else T=Tb,Tb=M;Xa=Tb;if(Xa===M){var Fb;var hb=T;var Ee=Ea();if(Ee!==M){za();var Jc=x();if(Jc!==M){za();var Kc=[];for(Fb=aa();Fb!==M;)Kc.push(Fb),Fb=aa();Fb=za();
var Jd=Da();Jd!==M?hb={type:"case-expression",format:"simple",operand:Jc,clauses:Kc,else:null}:(T=hb,hb=M)}else T=hb,hb=M}else T=hb,hb=M;if(hb===M)if(hb=T,Ee=Ea(),Ee!==M)if(za(),Jc=x(),Jc!==M){za();Kc=[];for(Fb=aa();Fb!==M;)Kc.push(Fb),Fb=aa();Fb=za();Jd=ca();if(Jd!==M){za();var wf=Da();wf!==M?hb={type:"case-expression",format:"simple",operand:Jc,clauses:Kc,else:Jd.value}:(T=hb,hb=M)}else T=hb,hb=M}else T=hb,hb=M;else T=hb,hb=M;var Fe=hb;if(Fe===M){var Gb;var lb=T;var Ge=Ea();if(Ge!==M){za();var Lc=
[];for(Gb=Y();Gb!==M;)Lc.push(Gb),Gb=Y();Gb=za();var Kd=Da();Kd!==M?lb={type:"case-expression",format:"searched",clauses:Lc,else:null}:(T=lb,lb=M)}else T=lb,lb=M;if(lb===M)if(lb=T,Ge=Ea(),Ge!==M){za();Lc=[];for(Gb=Y();Gb!==M;)Lc.push(Gb),Gb=Y();Gb=za();Kd=ca();if(Kd!==M){za();var xf=Da();xf!==M?lb={type:"case-expression",format:"searched",clauses:Lc,else:Kd.value}:(T=lb,lb=M)}else T=lb,lb=M}else T=lb,lb=M;Fe=lb}Xa=Fe;if(Xa===M){var Ld;var Md=T;var Ze=v();if(Ze!==M){var $e=[];for(Ld=e();Ld!==M;)$e.push(Ld),
Ld=e();Md=Ze+$e.join("")}else T=Md,Md=M;var Nd=Md;if(Nd!==M){var He=Nd;Nd=/^CURRENT_DATE$/i.test(He)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(He)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:He}}Xa=Nd;if(Xa===M&&(Xa=q(),Xa===M)){Xa=T;var yf=Ma();if(yf!==M){za();var Ie=x();if(Ie!==M){za();var zf=Qa();zf!==M?(Ie.paren=!0,Xa=Ie):(T=Xa,Xa=M)}else T=Xa,Xa=M}else T=Xa,Xa=M}}}}}}}}return Xa}function P(){var V;var a=T;var t=v();if(t!==M){a=[];for(V=
K();V!==M;)a.push(V),V=K();a=t+a.join("")}else T=a,a=M;return a}function v(){if(Td.test(O.charAt(T))){var V=O.charAt(T);T++}else V=M,0===ya&&y(sd);return V}function K(){if(Sd.test(O.charAt(T))){var V=O.charAt(T);T++}else V=M,0===ya&&y(cb);return V}function e(){if(Rd.test(O.charAt(T))){var V=O.charAt(T);T++}else V=M,0===ya&&y(Pc);return V}function q(){var V=T;if(64===O.charCodeAt(T)){var a=Ia;T++}else a=M,0===ya&&y(tc);if(a!==M){var t=P();t!==M?V=a=[a,t]:(T=V,V=M)}else T=V,V=M;V!==M&&(V={type:"parameter",
value:V[1]});return V}function w(){var V=T;if(O.substr(T,7).toLowerCase()===bd){var a=O.substr(T,7);T+=7}else a=M,0===ya&&y(oe);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="LEADING":(T=V,V=M)}else T=V,V=M;V===M&&(V=T,O.substr(T,8).toLowerCase()===cd?(a=O.substr(T,8),T+=8):(a=M,0===ya&&y(pe)),a!==M?(a=T,ya++,t=K(),ya--,t===M?a=void 0:(T=a,a=M),a!==M?V="TRAILING":(T=V,V=M)):(T=V,V=M),V===M&&(V=T,O.substr(T,4).toLowerCase()===dd?(a=O.substr(T,4),T+=4):(a=M,0===ya&&y(qe)),a!==M?
(a=T,ya++,t=K(),ya--,t===M?a=void 0:(T=a,a=M),a!==M?V="BOTH":(T=V,V=M)):(T=V,V=M)));return V}function R(){var V=T;var a=T;var t=Q();if(t!==M){za();var W=Ma();if(W!==M)if(za(),W=z(),W!==M){za();var Z=Qa();Z!==M?a={type:"interval-period",period:t.value,precision:W,secondary:null}:(T=a,a=M)}else T=a,a=M;else T=a,a=M}else T=a,a=M;a===M&&(a=T,t=Q(),t!==M&&(t=ac(t)),a=t);if(a!==M)if(za(),t=T,O.substr(T,2).toLowerCase()===ed?(W=O.substr(T,2),T+=2):(W=M,0===ya&&y(re)),W!==M?(W=T,ya++,Z=K(),ya--,Z===M?W=void 0:
(T=W,W=M),W!==M?t="TO":(T=t,t=M)):(T=t,t=M),t!==M){za();t=T;W=Q();W!==M&&(W={type:"interval-period",period:W.value,precision:null,secondary:null});t=W;if(t===M){t=T;W=Ga();if(W!==M)if(za(),W=Ma(),W!==M)if(za(),W=z(),W!==M)if(za(),Z=Ra(),Z!==M)if(za(),Z=c(),Z!==M){za();var fa=Qa();fa!==M?t=$b(W,Z):(T=t,t=M)}else T=t,t=M;else T=t,t=M;else T=t,t=M;else T=t,t=M;else T=t,t=M;t===M&&(t=T,W=Ga(),W!==M?(za(),W=Ma(),W!==M?(za(),W=z(),W!==M?(za(),Z=Qa(),Z!==M?t={type:"interval-period",period:"second",precision:W,
secondary:null}:(T=t,t=M)):(T=t,t=M)):(T=t,t=M)):(T=t,t=M),t===M&&(t=T,W=Ga(),W!==M&&(W={type:"interval-period",period:"second",precision:null,secondary:null}),t=W))}t!==M?V={type:"interval-qualifier",start:a,end:t}:(T=V,V=M)}else T=V,V=M;else T=V,V=M;V===M&&(V=T,t=Q(),t!==M?(za(),a=Ma(),a!==M?(za(),a=c(),a!==M?(za(),W=Qa(),W!==M?V={type:"interval-period",period:t.value,precision:a,secondary:null}:(T=V,V=M)):(T=V,V=M)):(T=V,V=M)):(T=V,V=M),V===M&&(V=T,t=Q(),t!==M&&(t=ac(t)),V=t,V===M&&(V=T,t=Ga(),
t!==M?(za(),a=Ma(),a!==M?(za(),a=z(),a!==M?(za(),W=Ra(),W!==M?(za(),t=c(),t!==M?(za(),W=Qa(),W!==M?V=$b(a,t):(T=V,V=M)):(T=V,V=M)):(T=V,V=M)):(T=V,V=M)):(T=V,V=M)):(T=V,V=M),V===M&&(V=T,t=Ga(),t!==M?(za(),a=Ma(),a!==M?(za(),a=c(),a!==M?(za(),W=Qa(),W!==M?V={type:"interval-period",period:"second",precision:a,secondary:null}:(T=V,V=M)):(T=V,V=M)):(T=V,V=M)):(T=V,V=M),V===M&&(V=T,t=Ga(),t!==M&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),V=t)))));return V}function Q(){var V=
T;V=wa();V!==M&&(V={type:"string",value:"day"});V===M&&(V=T,V=Ca(),V!==M&&(V={type:"string",value:"hour"}),V===M&&(V=T,V=Ka(),V!==M&&(V={type:"string",value:"minute"}),V===M&&(V=T,V=qa(),V!==M&&(V={type:"string",value:"month"}),V===M&&(V=T,V=va(),V!==M&&(V={type:"string",value:"year"})))));return V}function c(){var V=ua();V!==M&&(V=parseFloat(V));return V}function z(){var V=ua();V!==M&&(V=parseFloat(V));return V}function B(){var V=U();V===M&&(V=q());return V}function U(){var V=T;if(39===O.charCodeAt(T)){var a=
Sa;T++}else a=M,0===ya&&y(Yb);a===M&&(O.substr(T,2)===Wa?(a=Wa,T+=2):(a=M,0===ya&&y(uc)));if(a!==M){a=[];var t=T;O.substr(T,2)===db?(t=db,T+=2):(t=M,0===ya&&y(Wb));t!==M&&(t="'");t===M&&(nd.test(O.charAt(T))?(t=O.charAt(T),T++):(t=M,0===ya&&y(td)));for(;t!==M;)a.push(t),t=T,O.substr(T,2)===db?(t=db,T+=2):(t=M,0===ya&&y(Wb)),t!==M&&(t="'"),t===M&&(nd.test(O.charAt(T))?(t=O.charAt(T),T++):(t=M,0===ya&&y(td)));39===O.charCodeAt(T)?(t=Sa,T++):(t=M,0===ya&&y(Yb));t!==M?V={type:"string",value:a.join("")}:
(T=V,V=M)}else T=V,V=M;return V}function Y(){var V=T;if(La()!==M){za();var a=x();if(a!==M){za();var t=Oa();t!==M?(za(),t=x(),t!==M?V={type:"when-clause",operand:a,value:t}:(T=V,V=M)):(T=V,V=M)}else T=V,V=M}else T=V,V=M;return V}function aa(){var V=T;if(La()!==M){za();var a=x();if(a!==M){za();var t=Oa();t!==M?(za(),t=x(),t!==M?V={type:"when-clause",operand:a,value:t}:(T=V,V=M)):(T=V,V=M)}else T=V,V=M}else T=V,V=M;return V}function ca(){var V=T;var a=T;if(O.substr(T,4).toLowerCase()===Od){var t=O.substr(T,
4);T+=4}else t=M,0===ya&&y(vc);if(t!==M){t=T;ya++;var W=K();ya--;W===M?t=void 0:(T=t,t=M);t!==M?a="ELSE":(T=a,a=M)}else T=a,a=M;a!==M?(za(),a=x(),a!==M?V={type:"else-clause",value:a}:(T=V,V=M)):(T=V,V=M);return V}function na(){var V=ua();if(V===M){V=T;if(45===O.charCodeAt(T)){var a=ia;T++}else a=M,0===ya&&y(ic);a===M&&(43===O.charCodeAt(T)?(a=X,T++):(a=M,0===ya&&y(hc)));if(a!==M){var t=ua();t!==M?V=a[0]+t:(T=V,V=M)}else T=V,V=M}return V}function ba(){var V=T;if(46===O.charCodeAt(T)){var a=eb;T++}else a=
M,0===ya&&y($d);a!==M?(V=ua(),V===M&&(V=null),V="."+(null!=V?V:"")):(T=V,V=M);return V}function ra(){var V;var a=V=T;if(rb.test(O.charAt(T))){var t=O.charAt(T);T++}else t=M,0===ya&&y($a);t!==M?(Ub.test(O.charAt(T))?(a=O.charAt(T),T++):(a=M,0===ya&&y(ud)),a===M&&(a=null),a="e"+(null===a?"":a)):(T=a,a=M);a!==M?(t=ua(),t!==M?V=a+t:(T=V,V=M)):(T=V,V=M);return V}function ua(){var V=[];var a=Ba();if(a!==M)for(;a!==M;)V.push(a),a=Ba();else V=M;V!==M&&(V=V.join(""));return V}function Ba(){if(kb.test(O.charAt(T))){var V=
O.charAt(T);T++}else V=M,0===ya&&y(ae);return V}function ka(){var V=T;if(O.substr(T,2).toLowerCase()===dc){var a=O.substr(T,2);T+=2}else a=M,0===ya&&y(be);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="IN":(T=V,V=M)}else T=V,V=M;return V}function ta(){var V=T;if(O.substr(T,2).toLowerCase()===ec){var a=O.substr(T,2);T+=2}else a=M,0===ya&&y(ce);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="IS":(T=V,V=M)}else T=V,V=M;return V}function ma(){var V=T;if(O.substr(T,
4).toLowerCase()===Vb){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(wd);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="LIKE":(T=V,V=M)}else T=V,V=M;return V}function la(){var V=T;if(O.substr(T,3).toLowerCase()===mb){var a=O.substr(T,3);T+=3}else a=M,0===ya&&y(ee);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="NOT":(T=V,V=M)}else T=V,V=M;return V}function pa(){var V=T;if(O.substr(T,3).toLowerCase()===Eb){var a=O.substr(T,3);T+=3}else a=M,0===ya&&y(fe);if(a!==
M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="AND":(T=V,V=M)}else T=V,V=M;return V}function sa(){var V=T;if(O.substr(T,2).toLowerCase()===xc){var a=O.substr(T,2);T+=2}else a=M,0===ya&&y(Vd);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="OR":(T=V,V=M)}else T=V,V=M;return V}function da(){var V=T;if(O.substr(T,7).toLowerCase()===Uc){var a=O.substr(T,7);T+=7}else a=M,0===ya&&y(ge);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="BETWEEN":(T=V,V=M)}else T=
V,V=M;return V}function ea(){var V=T;if(O.substr(T,4).toLowerCase()===Yd){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(he);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="FROM":(T=V,V=M)}else T=V,V=M;return V}function ha(){var V=T;if(O.substr(T,4).toLowerCase()===Yc){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(le);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="TRIM":(T=V,V=M)}else T=V,V=M;return V}function ja(){var V=T;if(O.substr(T,8).toLowerCase()===fd){var a=
O.substr(T,8);T+=8}else a=M,0===ya&&y(se);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="INTERVAL":(T=V,V=M)}else T=V,V=M;return V}function va(){var V=T;if(O.substr(T,4).toLowerCase()===gd){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(te);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="YEAR":(T=V,V=M)}else T=V,V=M;return V}function qa(){var V=T;if(O.substr(T,5).toLowerCase()===hd){var a=O.substr(T,5);T+=5}else a=M,0===ya&&y(ue);if(a!==M){a=T;ya++;var t=K();
ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="MONTH":(T=V,V=M)}else T=V,V=M;return V}function wa(){var V=T;if(O.substr(T,3).toLowerCase()===Zd){var a=O.substr(T,3);T+=3}else a=M,0===ya&&y(yd);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="DAY":(T=V,V=M)}else T=V,V=M;return V}function Ca(){var V=T;if(O.substr(T,4).toLowerCase()===id){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(ve);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="HOUR":(T=V,V=M)}else T=V,V=M;return V}
function Ka(){var V=T;if(O.substr(T,6).toLowerCase()===jd){var a=O.substr(T,6);T+=6}else a=M,0===ya&&y(we);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="MINUTE":(T=V,V=M)}else T=V,V=M;return V}function Ga(){var V=T;if(O.substr(T,6).toLowerCase()===kd){var a=O.substr(T,6);T+=6}else a=M,0===ya&&y(Lb);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="SECOND":(T=V,V=M)}else T=V,V=M;return V}function Ea(){var V=T;if(O.substr(T,4).toLowerCase()===ld){var a=O.substr(T,
4);T+=4}else a=M,0===ya&&y(Wd);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="CASE":(T=V,V=M)}else T=V,V=M;return V}function Da(){var V=T;if(O.substr(T,3).toLowerCase()===md){var a=O.substr(T,3);T+=3}else a=M,0===ya&&y(Ua);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="END":(T=V,V=M)}else T=V,V=M;return V}function La(){var V=T;if(O.substr(T,4).toLowerCase()===Pd){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(ab);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:
(T=a,a=M);a!==M?V="WHEN":(T=V,V=M)}else T=V,V=M;return V}function Oa(){var V=T;if(O.substr(T,4).toLowerCase()===Mc){var a=O.substr(T,4);T+=4}else a=M,0===ya&&y(Xb);if(a!==M){a=T;ya++;var t=K();ya--;t===M?a=void 0:(T=a,a=M);a!==M?V="THEN":(T=V,V=M)}else T=V,V=M;return V}function Ra(){if(44===O.charCodeAt(T)){var V=Oc;T++}else V=M,0===ya&&y(Qc);return V}function Ma(){if(40===O.charCodeAt(T)){var V=Nc;T++}else V=M,0===ya&&y(Xd);return V}function Qa(){if(41===O.charCodeAt(T)){var V=Qd;T++}else V=M,0===
ya&&y(Rc);return V}function za(){var V;var a=[];for(V=Ya();V!==M;)a.push(V),V=Ya();return a}function Ya(){if(zc.test(O.charAt(T))){var V=O.charAt(T);T++}else V=M,0===ya&&y(wc);return V}function sb(V,a,t,W){V={type:"binary-expression",operator:V,left:a,right:t};void 0!==W&&(V.escape=W);return V}function vb(V,a){for(var t=0;t<a.length;t++)V=sb(a[t][1],V,a[t][3]);return V}L=void 0!==L?L:{};var M={},Ib=L.grammarSource,wb={start:G},Cb=G,Jb="!",Qb="\x3d",Db="\x3e\x3d",fb="\x3e",xb="\x3c\x3d",Rb="\x3c\x3e",
Sb="\x3c",Kb="!\x3d",X="+",ia="-",xa="*",Ha="/",Ia="@",Sa="'",Wa="N'",db="''",eb=".",jb="null",yb="true",cc="false",dc="in",ec="is",Vb="like",Tc="escape",mb="not",Eb="and",xc="or",Uc="between",Yd="from",Vc="for",Wc="substring",Xc="extract",Yc="trim",Zc="position",$c="timestamp",ad="date",bd="leading",cd="trailing",dd="both",ed="to",fd="interval",gd="year",hd="month",Zd="day",id="hour",jd="minute",kd="second",ld="case",md="end",Pd="when",Mc="then",Od="else",Oc=",",Nc="(",Qd=")",yc="`",Td=/^[A-Za-z_\x80-\uFFFF]/,
Sd=/^[A-Za-z0-9_]/,Rd=/^[A-Za-z0-9_.\x80-\uFFFF]/,nd=/^[^']/,kb=/^[0-9]/,rb=/^[eE]/,Ub=/^[+\-]/,zc=/^[ \t\n\r]/,Ac=/^[^`]/,fc=H("!",!1),od=H("\x3d",!1),gc=H("\x3e\x3d",!1),Bb=H("\x3e",!1),Bc=H("\x3c\x3d",!1),ib=H("\x3c\x3e",!1),Ud=H("\x3c",!1),pd=H("!\x3d",!1),hc=H("+",!1),ic=H("-",!1),qd=H("*",!1),rd=H("/",!1),sd=A([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),cb=A([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Pc=A([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),tc=H("@",!1),
Yb=H("'",!1),uc=H("N'",!1),Wb=H("''",!1),td=A(["'"],!0,!1),$d=H(".",!1),ae=A([["0","9"]],!1,!1),$a=A(["e","E"],!1,!1),ud=A(["+","-"],!1,!1),Cc=H("NULL",!0),vd=H("TRUE",!0),Dc=H("FALSE",!0),be=H("IN",!0),ce=H("IS",!0),wd=H("LIKE",!0),de=H("ESCAPE",!0),ee=H("NOT",!0),fe=H("AND",!0),Vd=H("OR",!0),ge=H("BETWEEN",!0),he=H("FROM",!0),ie=H("FOR",!0),je=H("SUBSTRING",!0),ke=H("EXTRACT",!0),le=H("TRIM",!0),me=H("POSITION",!0),ne=H("TIMESTAMP",!0),xd=H("DATE",!0),oe=H("LEADING",!0),pe=H("TRAILING",!0),qe=H("BOTH",
!0),re=H("TO",!0),se=H("INTERVAL",!0),te=H("YEAR",!0),ue=H("MONTH",!0),yd=H("DAY",!0),ve=H("HOUR",!0),we=H("MINUTE",!0),Lb=H("SECOND",!0),Wd=H("CASE",!0),Ua=H("END",!0),ab=H("WHEN",!0),Xb=H("THEN",!0),vc=H("ELSE",!0),Qc=H(",",!1),Xd=H("(",!1),Rc=H(")",!1),wc=A([" ","\t","\n","\r"],!1,!1),Sc=H("`",!1),Zb=A(["`"],!0,!1),ac=function(V){return{type:"interval-period",period:V.value,precision:null,secondary:null}},$b=function(V,a){return{type:"interval-period",period:"second",precision:V,secondary:a}},
T=0,jc=[{line:1,column:1}],ub=0,bc=[],ya=0;if("startRule"in L){if(!(L.startRule in wb))throw Error("Can't start parsing from rule \""+L.startRule+'".');Cb=wb[L.startRule]}var Ec=Cb();if(Ec!==M&&T===O.length)return Ec;Ec!==M&&T<O.length&&y({type:"end"});throw function(V,a,t){return new J(J.buildMessage(V,a),V,a,t)}(bc,ub<O.length?O.charAt(ub):null,ub<O.length?n(ub,ub+1):n(ub,ub));}}})})(b);let F=function(){function f(){}f.parse=function(J){return b.exports.parse(J)};return f}();d.WhereGrammar=F;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(d,l,b){function F(g){const r=null!=g.minValue||null!=g.maxValue,u=!!g.sqlExpression&&g.supportsSQLExpression;return!(null!=g.normalizationField||null!=g.normalizationType)&&!r&&!u}function f(g){const {values:r,useSampleStdDev:u,supportsNullCount:p}=g;var k=Number.POSITIVE_INFINITY;let D=Number.NEGATIVE_INFINITY,
N=null,S=null;var P=null;let v=null,K=0;const e=null==g.minValue?-Infinity:g.minValue,q=null==g.maxValue?Infinity:g.maxValue;for(const w of r)Number.isFinite(w)?w>=e&&w<=q&&(N+=w,k=Math.min(k,w),D=Math.max(D,w),K++):"string"===typeof w&&K++;if(K&&null!=N){S=N/K;P=0;for(const w of r)Number.isFinite(w)&&w>=e&&w<=q&&(P+=(w-S)**2);v=u?1<K?P/(K-1):0:0<K?P/K:0;P=Math.sqrt(v)}else D=k=null;k={avg:S,count:K,max:D,min:k,stddev:P,sum:N,variance:v};p&&(k.nullcount=r.length-K);g.percentileParams&&(k.median=J(r,
g.percentileParams));return k}function J(g,r){const {fieldType:u,value:p,orderBy:k,isDiscrete:D}=r,N=I(u,"desc"===k);g=[...g].filter(K=>null!=K).sort((K,e)=>N(K,e));if(0===g.length)return null;if(0>=p)return g[0];if(1<=p)return g[g.length-1];var S=(g.length-1)*p,P=Math.floor(S);r=P+1;S%=1;P=g[P];const v=g[r];return r>=g.length||D||"string"===typeof P||"string"===typeof v?P:P*(1-S)+v*S}function I(g,r){const u=r?1:-1,p=L(r),k=O(r);if(!g||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID",
"esriFieldTypeGlobalID",...C].includes(g))return(D,N)=>"number"===typeof D&&"number"===typeof N?p(D,N):"string"===typeof D&&"string"===typeof N?k(D,N):u;if("esriFieldTypeDate"===g)return(D,N)=>{D=(new Date(D)).getTime();N=(new Date(N)).getTime();return isNaN(D)||isNaN(N)?u:p(D,N)};if(C.has(g))return(D,N)=>p(D,N);if("esriFieldTypeString"===g)return(D,N)=>k(D,N);if("esriFieldTypeGUID"===g||"esriFieldTypeGlobalID"===g){const D=O(r);return(N,S)=>D(H(N),H(S))}return r?(D,N)=>1:(D,N)=>-1}function O(g){return g?
(r,u)=>{var p,k;r=null==(p=r)?void 0:p.toUpperCase();u=null==(k=u)?void 0:k.toUpperCase();return r>u?-1:r<u?1:0}:(r,u)=>{var p,k;r=null==(p=r)?void 0:p.toUpperCase();u=null==(k=u)?void 0:k.toUpperCase();return r<u?-1:r>u?1:0}}function L(g){return g?(r,u)=>u-r:(r,u)=>r-u}function H(g){return g.substr(24,12)+g.substr(19,4)+g.substr(16,2)+g.substr(14,2)+g.substr(11,2)+g.substr(9,2)+g.substr(6,2)+g.substr(4,2)+g.substr(2,2)+g.substr(0,2)}function A(g,r){const u=n({field:r.field,normalizationType:r.normalizationType,
normalizationField:r.normalizationField,classificationMethod:r.classificationMethod,standardDeviationInterval:r.standardDeviationInterval,breakCount:r.numClasses||5});g=m(g,r.minValue,r.maxValue);return b.createGenerateRendererClassBreaks({definition:u,values:g,normalizationTotal:r.normalizationTotal})}function m(g,r,u){r=null==r?-Infinity:r;u=null==u?Infinity:u;return g.filter(p=>Number.isFinite(p)&&p>=r&&p<=u)}function n(g){const r=g.field,u=g.classificationMethod||"equal-interval",p=g.normalizationType,
k=g.normalizationField,D=new l;D.classificationField=r;D.breakCount=g.breakCount;D.classificationMethod=u;D.standardDeviationInterval="standard-deviation"===u?g.standardDeviationInterval||1:void 0;D.normalizationType=p;D.normalizationField="field"===p?k:void 0;return D}function y(g,r){const {field:u,classificationMethod:p,standardDeviationInterval:k,normalizationType:D,normalizationField:N,normalizationTotal:S,minValue:P,maxValue:v}=r,K=r.numBins||10;let e=r=null,q=null;p&&"equal-interval"!==p||D?
({classBreaks:g}=A(g,{field:u,normalizationType:D,normalizationField:N,normalizationTotal:S,classificationMethod:p,standardDeviationInterval:k,minValue:P,maxValue:v,numClasses:K}),r=g[0].minValue,e=g[g.length-1].maxValue,q=g.map(w=>[w.minValue,w.maxValue])):(null!=P&&null!=v?(r=P,e=v):(g=f({values:g,minValue:P,maxValue:v,useSampleStdDev:!D,supportsNullCount:F({normalizationType:D,normalizationField:N,minValue:P,maxValue:v})}),r=g.min,e=g.max),q=E(r,e,K));return{min:r,max:e,intervals:q}}function G(g,
r){let u=-1;for(let p=g.length-1;0<=p;p--)if(r>=g[p][0]){u=p;break}return u}function E(g,r,u){const p=(r-g)/u,k=[];let D;for(let N=1;N<=u;N++)D=g+p,D=Number(D.toFixed(16)),k.push([g,N===u?r:D]),g=D;return k}const x=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,C=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),h="min max avg stddev count sum variance nullcount median".split(" ");d.calculateClassBreaks=A;d.calculateHistogram=function(g,r){const {min:u,
max:p,intervals:k}=y(g,r),D=k.map((N,S)=>({minValue:k[S][0],maxValue:k[S][1],count:0}));for(const N of g)null!=N&&N>=u&&N<=p&&(g=G(k,N),-1<g&&D[g].count++);return{bins:D,minValue:u,maxValue:p,normalizationTotal:r.normalizationTotal}};d.calculatePercentile=J;d.calculateStatistics=f;d.calculateStringStatistics=function(g){const r=g.returnDistinct?[...new Set(g.values)]:g.values,u=r.filter(k=>null!=k).length,p={count:u};g.supportsNullCount&&(p.nullcount=r.length-u);g.percentileParams&&(p.median=J(r,
g.percentileParams));return p};d.calculateUniqueValuesCount=function(g){const r={};for(let u of g){if(null==u||"string"===typeof u&&""===u.trim())u=null;null==r[u]?r[u]={count:1,data:u}:r[u].count++}return{count:r}};d.createClassBreaksDefinition=n;d.createUVResult=function(g,r,u){const p=g.count;g=[];u&&r&&"coded-value"===r.type&&r.codedValues.forEach(k=>{k=k.code;p.hasOwnProperty(k)||(p[k]={data:k,count:0})});for(const k in p)r=p[k],g.push({value:r.data,count:r.count,label:r.label});return{uniqueValueInfos:g}};
d.getAttributeComparator=I;d.getEqualIntervalBins=E;d.getNormalizedValue=function(g,r,u,p){let k=null;switch(r){case "log":0!==g&&(k=Math.log(g)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(p)&&0!==p&&(k=g/p*100);break;case "field":Number.isFinite(u)&&0!==u&&(k=g/u);break;case "natural-log":0<g&&(k=Math.log(g));break;case "square-root":0<g&&(k=g**.5)}return k};d.isNullCountSupported=F;d.processSummaryStatisticsResult=function(g,r){let u;for(u in g)h.includes(u)&&(Number.isFinite(g[u])||
(g[u]=null));if(!r)return g;["avg","stddev","variance"].forEach(p=>{null!=g[p]&&(g[p]=Math.ceil(g[p]))});return g};d.resolveCBResult=function(g,r){let u=g.classBreaks;const p=u[0].minValue,k=u[u.length-1].maxValue,D="standard-deviation"===r;u=u.map(N=>{const S=N.label;N={minValue:N.minValue,maxValue:N.maxValue,label:S};if(D&&S){const P=S.match(x).map(v=>+v.trim());2===P.length?(N.minStdDev=P[0],N.maxStdDev=P[1],0>P[0]&&0<P[1]&&(N.hasAvg=!0)):1===P.length&&(S.includes("\x3c")?(N.minStdDev=null,N.maxStdDev=
P[0]):S.includes("\x3e")&&(N.minStdDev=P[0],N.maxStdDev=null))}return N});return{minValue:p,maxValue:k,classBreakInfos:u,normalizationTotal:g.normalizationTotal}};d.statisticTypes=h;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(d,l,b,F,f,J,I,O,L){f=new b.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});b=new b.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});L=function(H){function A(){var m=H.apply(this,arguments)||this;m.breakCount=null;m.classificationField=
null;m.classificationMethod=null;m.normalizationField=null;m.normalizationType=null;m.type="class-breaks-definition";return m}d._inheritsLoose(A,H);d._createClass(A,[{key:"standardDeviationInterval",set:function(m){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",m)}},{key:"definedInterval",set:function(m){"defined-interval"===this.classificationMethod&&this._set("definedInterval",m)}}]);return A}(L);l.__decorate([F.property({json:{write:!0}})],L.prototype,"breakCount",
void 0);l.__decorate([F.property({json:{write:!0}})],L.prototype,"classificationField",void 0);l.__decorate([F.property({type:String,json:{read:f.read,write:f.write}})],L.prototype,"classificationMethod",void 0);l.__decorate([F.property({json:{write:!0}})],L.prototype,"normalizationField",void 0);l.__decorate([F.property({json:{read:b.read,write:b.write}})],L.prototype,"normalizationType",void 0);l.__decorate([F.property({value:null,json:{write:!0}})],L.prototype,"standardDeviationInterval",null);
l.__decorate([F.property({value:null,json:{write:!0}})],L.prototype,"definedInterval",null);l.__decorate([F.property()],L.prototype,"type",void 0);return L=l.__decorate([O.subclass("esri.rest.support.ClassBreaksDefinition")],L)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){b=new b.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});F=function(m){function n(){var y=m.apply(this,arguments)||this;y.baseSymbol=null;y.colorRamp=null;y.type=null;return y}d._inheritsLoose(n,m);return n}(F.JSONSupport);l.__decorate([f.property({type:A,json:{write:!0}})],F.prototype,"baseSymbol",void 0);l.__decorate([f.property({types:H.types,json:{read:{reader:H.fromJSON},write:!0}})],F.prototype,"colorRamp",void 0);l.__decorate([f.property({json:{read:b.read,
write:b.write}})],F.prototype,"type",void 0);return F=l.__decorate([L.subclass("esri.rest.support.ClassificationDefinition")],F)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(d){function l(A){const {classificationMethod:m,breakCount:n,normalizationType:y,definedInterval:G}=A.definition,E=[];var x=A.values;if(0===x.length)return[];x=x.sort((p,k)=>p-k);var C=x[0],h=x[x.length-1];if("equal-interval"===m)if(x.length>=n){x=(h-C)/n;A=C;for(var g=1;g<n;g++){var r=Number((C+
g*x).toFixed(6));E.push({minValue:A,maxValue:r,label:b(A,r,y)});A=r}E.push({minValue:A,maxValue:h,label:b(A,h,y)})}else x.forEach(p=>{E.push({minValue:p,maxValue:p,label:b(p,p,y)})});else if("natural-breaks"===m){x=F(x);A=f(x.uniqueValues,A.valueFrequency||x.valueFrequency,n);for(g=1;g<n;g++)x.uniqueValues.length>g&&(r=Number(x.uniqueValues[A[g]].toFixed(6)),E.push({minValue:C,maxValue:r,label:b(C,r,y)}),C=r);E.push({minValue:C,maxValue:h,label:b(C,h,y)})}else if("quantile"===m)if(x.length>=n&&C!==
h){A=Math.ceil(x.length/n);g=0;for(r=1;r<n;r++){var u=A+g-1;u>x.length&&(u=x.length-1);0>u&&(u=0);E.push({minValue:C,maxValue:x[u],label:b(C,x[u],y)});C=x[u];g+=A;A=Math.ceil((x.length-g)/(n-r))}E.push({minValue:C,maxValue:h,label:b(C,h,y)})}else for(h=-1,C=0;C<x.length;C++)A=x[C],A!==h&&(h=A,E.push({minValue:h,maxValue:A,label:b(h,A,y)}),h=A);else if("standard-deviation"===m)if(A=O(x),g=L(x,A),0===g)E.push({minValue:x[0],maxValue:x[0],label:b(x[0],x[0],y)});else{x=I(C,h,n,A,g)*g;g=0;for(r=n;1<=r;r--)u=
Number((A-(r-.5)*x).toFixed(6)),E.push({minValue:C,maxValue:u,label:b(C,u,y)}),C=u,g++;r=Number((A+.5*x).toFixed(6));E.push({minValue:C,maxValue:r,label:b(C,r,y)});C=r;g++;for(u=1;u<=n;u++)r=g===2*n?h:Number((A+(u+.5)*x).toFixed(6)),E.push({minValue:C,maxValue:r,label:b(C,r,y)}),C=r,g++}else if("defined-interval"===m){if(!G)return E;h=x[0];x=x[x.length-1];C=Math.ceil((x-h)/G);A=h;for(g=1;g<C;g++)r=Number((h+g*G).toFixed(6)),E.push({minValue:A,maxValue:r,label:b(A,r,y)}),A=r;E.push({minValue:A,maxValue:x,
label:b(A,x,y)})}return E}function b(A,m,n){let y=null;return y=A===m?n&&"percent-of-total"===n?A+"%":A.toString():n&&"percent-of-total"===n?A+"% - "+m+"%":A+" - "+m}function F(A){const m=[],n=[];let y=Number.MIN_VALUE,G=1,E=-1;for(let x=0;x<A.length;x++){const C=A[x];C===y?(G++,n[E]=G):null!==C&&(m.push(C),y=C,G=1,n.push(G),E++)}return{uniqueValues:m,valueFrequency:n}}function f(A,m,n){var y=A.length;const G=[];n>y&&(n=y);for(var E=0;E<n;E++)G.push(Math.round(E*y/n-1));G.push(y-1);E=J(G,A,m,n);{y=
E.mean;E=E.sdcm;var x=n,C=0,h=0;let r=0,u=0,p=!0;for(let k=0;2>k&&p;k++){0===k&&(p=!1);for(var g=0;g<x-1;g++)for(;G[g+1]+1!==G[g+2];)if(G[g+1]+=1,C=H(g,G,A,m),r=C.sbMean,C=C.sbSdcm,h=H(g+1,G,A,m),u=h.sbMean,h=h.sbSdcm,C+h<E[g]+E[g+1])E[g]=C,E[g+1]=h,y[g]=r,y[g+1]=u,p=!0;else{--G[g+1];break}for(g=x-1;0<g;g--)for(;G[g]!==G[g-1]+1;)if(--G[g],C=H(g-1,G,A,m),r=C.sbMean,C=C.sbSdcm,h=H(g,G,A,m),u=h.sbMean,h=h.sbSdcm,C+h<E[g-1]+E[g])E[g-1]=C,E[g]=h,y[g-1]=r,y[g]=u,p=!0;else{G[g]+=1;break}}y=p}y&&(E=J(G,A,
m,n));return G}function J(A,m,n,y){let G=[];var E=[],x=[];let C=0;const h=[],g=[];for(var r=0;r<y;r++){var u=H(r,A,m,n);h.push(u.sbMean);g.push(u.sbSdcm);C+=g[r]}u=C;for(r=!0;r||C<u;){r=!1;G=[];for(E=0;E<y;E++)G.push(A[E]);for(x=0;x<y;x++)for(u=A[x]+1;u<=A[x+1];u++)if(E=m[u],0<x&&u!==A[x+1]&&Math.abs(E-h[x])>Math.abs(E-h[x-1]))A[x]=u;else if(x<y-1&&A[x]!==u-1&&Math.abs(E-h[x])>Math.abs(E-h[x+1])){A[x+1]=u-1;break}u=C;C=0;E=[];x=[];for(let p=0;p<y;p++){E.push(h[p]);x.push(g[p]);const k=H(p,A,m,n);
h[p]=k.sbMean;g[p]=k.sbSdcm;C+=g[p]}}if(C>u){for(m=0;m<y;m++)A[m]=G[m],h[m]=E[m],g[m]=x[m];C=u}return{mean:h,sdcm:g}}function I(A,m,n,y,G){A=Math.max(y-A,m-y)/G/n;return 1<=A?1:.5<=A?.5:.25}function O(A){let m=0;for(let n=0;n<A.length;n++)m+=A[n];return m/=A.length}function L(A,m){let n=0;for(let y=0;y<A.length;y++){const G=A[y];n+=(G-m)*(G-m)}n/=A.length;return Math.sqrt(n)}function H(A,m,n,y){var G=0,E=0;for(var x=m[A]+1;x<=m[A+1];x++){const C=y[x];G+=n[x]*C;E+=C}0>=E&&console.log("Exception in Natural Breaks calculation");
G/=E;E=0;for(x=m[A]+1;x<=m[A+1];x++)E+=y[x]*(n[x]-G)**2;return{sbMean:G,sbSdcm:E}}d.createGenerateRendererClassBreaks=function(A){const {normalizationTotal:m}=A;return{classBreaks:l(A),normalizationTotal:m}};d.createGenerateRendererUniqueValues=function(A){A=F(A);const m=[],n=A.uniqueValues.length;for(let y=0;y<n;y++){const G=A.uniqueValues[y];m.push({value:G,count:A.valueFrequency[y],label:G.toString()})}return{uniqueValues:m}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(d,l,b,F,f,J,I){function O(E,x){if(!x)return null;if("x"in x){var C={x:0,y:0};[C.x,C.y]=E(x.x,x.y,m);null!=x.z&&(C.z=x.z);null!=x.m&&(C.m=x.m);return C}if("xmin"in x)return C={xmin:0,ymin:0,
xmax:0,ymax:0},[C.xmin,C.ymin]=E(x.xmin,x.ymin,m),[C.xmax,C.ymax]=E(x.xmax,x.ymax,m),x.hasZ&&(C.zmin=x.zmin,C.zmax=x.zmax,C.hasZ=!0),x.hasM&&(C.mmin=x.mmin,C.mmax=x.mmax,C.hasM=!0),C;if("rings"in x)return{rings:L(x.rings,E),hasM:x.hasM,hasZ:x.hasZ};if("paths"in x)return{paths:L(x.paths,E),hasM:x.hasM,hasZ:x.hasZ};if("points"in x)return{points:H(x.points,E),hasM:x.hasM,hasZ:x.hasZ}}function L(E,x){const C=[];for(const h of E)C.push(H(h,x));return C}function H(E,x){const C=[];for(const h of E)E=x(h[0],
h[1],[0,0]),C.push(E),2<h.length&&E.push(h[2]),3<h.length&&E.push(h[3]);return C}function A(){A=l._asyncToGenerator(function*(E,x){x&&(E=Array.isArray(E)?E.map(C=>b.isSome(C.geometry)&&C.geometry.spatialReference):[E],yield F.initializeProjection(E.map(C=>({source:C,dest:x}))))});return A.apply(this,arguments)}const m=[0,0],n=O.bind(null,I.lngLatToXY),y=O.bind(null,I.xyToLngLat),G=new (function(){function E(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var x=E.prototype;
x.push=function(){var C=l._asyncToGenerator(function*(h,g,r){if(!(h&&h.length&&g&&r)||J.equals(g,r))return h;const u={geometries:h,inSpatialReference:g,outSpatialReference:r,resolve:null};this._jobs.push(u);return new Promise(p=>{u.resolve=p;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(h,g,r){return C.apply(this,arguments)}}();x._process=function(){this._timer=null;const C=this._jobs.shift();if(C){var {geometries:h,inSpatialReference:g,outSpatialReference:r,resolve:u}=
C;I.canProject(g,r)?J.isWebMercator(r)?u(h.map(n)):u(h.map(y)):u(F.projectMany(f.jsonAdapter,h,g,r,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return E}());d.checkProjectionSupport=function(E,x){return A.apply(this,arguments)};d.project=function(E,x,C,h){if(!E)return E;C||(C=x,x=E.spatialReference);return J.isValid(x)&&J.isValid(C)&&!J.equals(x,C)?I.canProject(x,C)?(E=J.isWebMercator(C)?n(E):y(E),E.spatialReference=C,E):F.projectMany(f.jsonAdapter,[E],x,C,null,h)[0]:
E};d.projectMany=function(E,x,C){return G.push(E,x,C)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(d){let l=function(I,O,L){this.x=I;this.y=O;this.spatialReference=L;this.m=this.z=void 0},b=function(I,O,L,H){this.rings=I;this.spatialReference=O;this.hasM=this.hasZ=void 0;L&&(this.hasZ=L);H&&(this.hasM=H)},F=function(I,O,L,H){this.paths=I;this.spatialReference=O;this.hasM=this.hasZ=
void 0;L&&(this.hasZ=L);H&&(this.hasM=H)},f=function(I,O,L,H){this.points=I;this.spatialReference=O;this.hasM=this.hasZ=void 0;L&&(this.hasZ=L);H&&(this.hasM=H)},J=function(I,O,L,H,A){this.xmin=I;this.ymin=O;this.xmax=L;this.ymax=H;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0};d.jsonAdapter={convertToGEGeometry:function(I,O){return null==O?null:I.convertJSONToGeometry(O)},exportPoint:function(I,O,L){L=new l(I.getPointX(O),I.getPointY(O),L);const H=I.hasZ(O),A=I.hasM(O);H&&
(L.z=I.getPointZ(O));A&&(L.m=I.getPointM(O));return L},exportPolygon:function(I,O,L){return new b(I.exportPaths(O),L,I.hasZ(O),I.hasM(O))},exportPolyline:function(I,O,L){return new F(I.exportPaths(O),L,I.hasZ(O),I.hasM(O))},exportMultipoint:function(I,O,L){return new f(I.exportPoints(O),L,I.hasZ(O),I.hasM(O))},exportExtent:function(I,O,L){var H=I.hasZ(O);const A=I.hasM(O);L=new J(I.getXMin(O),I.getYMin(O),I.getXMax(O),I.getYMax(O),L);H&&(H=I.getZExtent(O),L.zmin=H.vmin,L.zmax=H.vmax);A&&(I=I.getMExtent(O),
L.mmin=I.vmin,L.mmax=I.vmax);return L}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y){function G(K,e,q,w=K.hasZ,R=K.hasM){if(f.isNone(e))return null;const Q=K.hasZ&&w,c=K.hasM&&R;return q?(K=m.quantizeOptimizedGeometry(S,e,K.hasZ,K.hasM,"esriGeometryPoint",q,w,R),m.convertToPoint(K,Q,c)):m.convertToPoint(e,Q,c)}function E(){E=b._asyncToGenerator(function*(K,e,q){const {outFields:w,orderByFields:R,groupByFieldsForStatistics:Q,outStatistics:c}=K;if(w)for(var z=0;z<w.length;z++)w[z]=w[z].trim();if(R)for(z=0;z<R.length;z++)R[z]=R[z].trim();if(Q)for(z=
0;z<Q.length;z++)Q[z]=Q[z].trim();if(c)for(z=0;z<c.length;z++)c[z].onStatisticField&&(c[z].onStatisticField=c[z].onStatisticField.trim());K.geometry&&!K.outSR&&(K.outSR=K.geometry.spatialReference);return x(K,e,q)});return E.apply(this,arguments)}function x(K,e,q){return C.apply(this,arguments)}function C(){C=b._asyncToGenerator(function*(K,e,q){if(!K)return null;var {where:w}=K;K.where=w=w&&w.trim();if(!w||/^1 *= *1$/.test(w)||e&&e===w)K.where=null;if(!K.geometry)return K;e=yield h(K);K.distance=
0;K.units=null;"esriSpatialRelEnvelopeIntersects"===K.spatialRel&&({spatialReference:w}=K.geometry,e=I.getGeometryExtent(e),e.spatialReference=w);K.geometry=e;yield y.checkProjectionSupport(e.spatialReference,q);e=(yield L.normalizeCentralMeridian(O.fromJSON(e)))[0];if(f.isNone(e))throw k;e=e.toJSON();e=yield y.project(e,e.spatialReference,q);if(!e)throw k;e.spatialReference=q;K.geometry=e;return K});return C.apply(this,arguments)}function h(K){return g.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*(K){const {geometry:e,
distance:q,units:w}=K;if(null==q||"vertexAttributes"in e)return e;var R=e.spatialReference;K=w?p.fromJSON(w):J.getUnitString(R);R=R&&(H.isGeographic(R)||H.isWebMercator(R))?e:yield y.checkProjectionSupport(R,H.WGS84).then(()=>y.project(e,H.WGS84));return(yield r())(R.spatialReference,R,q,K)});return g.apply(this,arguments)}function r(){return u.apply(this,arguments)}function u(){u=b._asyncToGenerator(function*(){return(yield new Promise((K,e)=>d(["../../../geometry/geometryEngineJSON"],K,e))).geodesicBuffer});
return u.apply(this,arguments)}const p=new F.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),k=Object.freeze({}),D=new n,N=new n,S=new n,P={esriGeometryPoint:m.convertToPoint,esriGeometryPolyline:m.convertToPolyline,esriGeometryPolygon:m.convertToPolygon,esriGeometryMultipoint:m.convertToMultipoint},v=(K,e)=>"_geVersion"!==K?e:void 0;l.QUERY_ENGINE_EMPTY_RESULT=
k;l.cleanFromGeometryEngine=function(K){return K&&"_geVersion"in K?JSON.parse(JSON.stringify(K,v)):K};l.getCentroid=function(K,e,q){if("esriGeometryPolygon"!==K.geometryType||!e||!e.centroid&&!e.geometry)return null;e.centroid||(e.centroid=A.getCentroidOptimizedGeometry(new n,e.geometry,K.hasZ,K.hasM));return G(K,e.centroid,q)};l.getGeometry=function(K,e,q,w,R,Q,c=e,z=q){const B=e&&c,U=q&&z;w=f.isSome(w)?"coords"in w?w:w.geometry:null;if(f.isNone(w))return null;if(R)return e=m.generalizeOptimizedGeometry(N,
w,e,q,K,R,c,z),Q&&(e=m.quantizeOptimizedGeometry(S,e,B,U,K,Q)),P[K](e,B,U);if(Q)return Q=m.quantizeOptimizedGeometry(S,w,e,q,K,Q,c,z),P[K](Q,B,U);m.removeZMValues(D,w,e,q,c,z);return P[K](D,B,U)};l.normalizeQuery=function(K,e,q){return E.apply(this,arguments)};l.normalizeQueryLike=x;l.transformCentroid=G;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(d,l){function b(f,
J,I,O,L,H,A=1){H=L?H?4:3:H?3:2;let m=I,n=I+H,y=0,G=0,E=I=0,x=0;for(let C=0,h=O-1;C<h;C++,m+=H,n+=H){O=J[m];const g=J[m+1],r=J[m+2],u=J[n],p=J[n+1],k=J[n+2];let D=O*p-u*g;E+=D;y+=(O+u)*D;G+=(g+p)*D;L&&(D=O*k-u*r,I+=(r+k)*D,x+=D);O<f[0]&&(f[0]=O);O>f[1]&&(f[1]=O);g<f[2]&&(f[2]=g);g>f[3]&&(f[3]=g);L&&(r<f[4]&&(f[4]=r),r>f[5]&&(f[5]=r))}0<E*A&&(E*=-1);0<x*A&&(x*=-1);if(!E)return null;f=[y,G,.5*E];L&&(f[3]=I,f[4]=.5*x);return f}function F(f,J,I,O,L){L=O?L?4:3:L?3:2;let H=J,A=J+L,m=0,n=0,y=0,G=0;for(let h=
0,g=I-1;h<g;h++,H+=L,A+=L){var E=f[H];const r=f[H+1],u=f[H+2],p=f[A],k=f[A+1],D=f[A+2];if(O){{var x=p-E;var C=k-r;const N=D-u;x=Math.sqrt(x*x+C*C+N*N)}}else x=p-E,C=k-r,x=Math.sqrt(x*x+C*C);x&&(m+=x,O?(E=[E+.5*(p-E),r+.5*(k-r),u+.5*(D-u)],n+=x*E[0],y+=x*E[1],G+=x*E[2]):(E=[E+.5*(p-E),r+.5*(k-r)],n+=x*E[0],y+=x*E[1]))}return 0<m?O?[n/m,y/m,G/m]:[n/m,y/m]:0<I?O?[f[J],f[J+1],f[J+2]]:[f[J],f[J+1]]:null}d.getCentroidOptimizedGeometry=function(f,J,I,O,L){if(l.isNone(J)||!J.lengths.length)return null;const H=
"upperLeft"===(null==L?void 0:L.originPosition)?-1:1;f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);L=f.coords;const A=[],m=I?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:n,coords:y}=J,G=I?O?4:3:O?3:2;let E=0;for(var x of n){const C=b(m,y,E,x,I,O,H);C&&A.push(C);
E+=x*G}A.sort((C,h)=>{let g=H*C[2]-H*h[2];0===g&&I&&(g=C[4]-h[4]);return g});A.length&&(x=6*A[0][2],L[0]=A[0][0]/x,L[1]=A[0][1]/x,I&&(x=6*A[0][4],L[2]=0!==x?A[0][3]/x:0),L[0]<m[0]||L[0]>m[1]||L[1]<m[2]||L[1]>m[3]||I&&(L[2]<m[4]||L[2]>m[5]))&&(L.length=0);if(!L.length)if(J=J.lengths[0]?F(y,0,n[0],I,O):null)L[0]=J[0],L[1]=J[1],I&&2<J.length&&(L[2]=J[2]);else return null;return f};d.lineCentroid=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),
function(d,l,b,F,f,J,I){let O=function(G){this.coordinateHelper=G},L=function(G){function E(C,h){C=G.call(this,C)||this;C.point=h;return C}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?J.objectEqual(this.point,C.point):!1};x.check=function(C){return b.squaredDistance(C,this.point)<f.defaults.pointThreshold};x.closestTo=function(){return this.coordinateHelper.clone(this.point)};x.intersect=function(C){const h=[];C instanceof H?h.push(...I.intersectLineAndPoint({start:C.start,
end:C.end,type:C instanceof m?I.LineType.LINE:I.LineType.RAY},this.point)):C instanceof y&&h.push(...I.intersectCircleAndPoint(C.center,C.radius,this.point));return h.map(g=>new n(this.coordinateHelper,g,this,C))};return E}(O),H=function(G){function E(C,h,g){C=G.call(this,C)||this;C.start=h;C.end=g;return C}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?J.objectEqual(this.start,C.start)&&J.objectEqual(this.end,C.end):!1};x.intersect=function(C){const h=[];
C instanceof L?h.push(...I.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof m?I.LineType.LINE:I.LineType.RAY},C.point)):C instanceof E?h.push(...I.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof m?I.LineType.LINE:I.LineType.RAY},{start:C.start,end:C.end,type:C instanceof m?I.LineType.LINE:I.LineType.RAY})):C instanceof y&&h.push(...I.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof m?I.LineType.LINE:I.LineType.RAY},C.center,
C.radius));return h.map(g=>new n(this.coordinateHelper,g,this,C))};return E}(O),A=function(G){function E(C,h,g){C=G.call(this,C,h,g)||this;C.dir=F.create();C.p=F.create();return C}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?G.prototype.objectEqual.call(this,C):!1};x.check=function(C){b.subtract(this.dir,this.end,this.start);b.subtract(this.p,C,this.start);return 0<=b.dot(this.dir,this.p)?I.pointToLineDistance(C,this.start,this.end)<f.defaults.pointOnLineThreshold:
!1};x.closestTo=function(C){const h=this.coordinateHelper.clone(C);I.projectPointToRay(h,C,this.start,this.end);return h};return E}(H),m=function(G){function E(C,h,g){return G.call(this,C,h,g)||this}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?G.prototype.objectEqual.call(this,C):!1};x.check=function(C){return I.pointToLineDistance(C,this.start,this.end)<f.defaults.pointOnLineThreshold};x.closestTo=function(C){const h=this.coordinateHelper.clone(C);I.projectPointToLine(h,
C,this.start,this.end);return h};return E}(H),n=function(G){function E(C,h,g,r){C=G.call(this,C)||this;C.intersection=h;C.first=g;C.second=r;return C}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?this.first.objectEqual(C.first)&&this.second.objectEqual(C.second):!1};x.check=function(){return!1};x.closestTo=function(C){C=this.coordinateHelper.clone(C);b.copy(C,this.intersection);return C};x.intersect=function(){return[]};return E}(O),y=function(G){function E(C,
h,g){C=G.call(this,C)||this;C.center=h;C.radius=g;return C}l._inheritsLoose(E,G);var x=E.prototype;x.objectEqual=function(C){return C instanceof E?this.center[0]===C.center[0]&&this.center[1]===C.center[1]&&this.radius===C.radius:!1};x.check=function(){return!1};x.closestTo=function(C){const h=this.coordinateHelper.clone(C);I.projectPointToCircle(h,C,this.center,this.radius);return h};x.intersect=function(C){const h=[];C instanceof H?h.push(...I.intersectLineLikeAndCircle({start:C.start,end:C.end,
type:C instanceof m?I.LineType.LINE:I.LineType.RAY},this.center,this.radius)):C instanceof L&&h.push(...I.intersectCircleAndPoint(this.center,this.radius,C.point));return h.map(g=>new n(this.coordinateHelper,g,this,C))};return E}(O);d.IntersectionConstraint=n;d.LineConstraint=m;d.LineLikeConstraint=H;d.PlanarCircleConstraint=y;d.PointConstraint=L;d.RayConstraint=A;d.SnappingConstraint=O;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2f64":function(){define(["exports"],
function(d){function l(){return[0,0]}function b(E){return[E[0],E[1]]}function F(E,x){return[E,x]}function f(E){const x=[0,0],C=Math.min(2,E.length);for(let h=0;h<C;++h)x[h]=E[h];return x}function J(E,x){return new Float64Array(E,x,2)}function I(){return[0,0]}function O(){return[1,1]}function L(){return[1,0]}function H(){return[0,1]}const A=[0,0],m=[1,1],n=[1,0],y=[0,1],G=Object.freeze(Object.defineProperty({__proto__:null,create:l,clone:b,fromValues:F,fromArray:f,createView:J,zeros:I,ones:O,unitX:L,
unitY:H,ZEROS:A,ONES:m,UNIT_X:n,UNIT_Y:y},Symbol.toStringTag,{value:"Module"}));d.ONES=m;d.UNIT_X=n;d.UNIT_Y=y;d.ZEROS=A;d.clone=b;d.create=l;d.createView=J;d.fromArray=f;d.fromValues=F;d.ones=O;d.unitX=L;d.unitY=H;d.vec2f64=G;d.zeros=I})},"esri/views/interactive/snapping/snappingUtils":function(){define(["exports","../../../chunks/vec2"],function(d,l){d.LineSegmentHintType=void 0;(function(b){b[b.TARGET=0]="TARGET";b[b.REFERENCE=1]="REFERENCE";b[b.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(d.LineSegmentHintType||
(d.LineSegmentHintType={}));d.objectEqual=function(b,F){const f=b.length===F.length&&b[0]===F[0]&&b[1]===F[1];switch(b.length){case 2:return f;case 3:return f&&b[2]===F[2];case 4:return f&&b[3]===F[3]}return!1};d.sortCandidatesInPlace=function(b,F){F.sort((f,J)=>{f=l.squaredDistance(f.targetPoint,b);J=l.squaredDistance(J.targetPoint,b);return f-J})};d.squareDistance=function(b,F){const f=b.x-F.x;b=b.y-F.y;return f*f+b*b};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(d,l,b,F){function f(n,y){return n[0]*y[1]-n[1]*y[0]}function J(n,y,G){y=b.dot(G,y)/b.squaredLength(G);return b.scale(n,G,y)}function I(n,y,G,E,x=G){b.subtract(L,E,G);b.subtract(A,y,x);J(m,A,L);return b.add(n,x,m)}function O(n,y,G,E){b.subtract(L,y,G);y=E/b.length(L);return b.scaleAndAdd(n,G,L,y)}d.LineType=void 0;(function(n){n[n.RAY=0]="RAY";n[n.LINE=1]="LINE"})(d.LineType||
(d.LineType={}));const L=F.create(),H=F.create(),A=F.create(),m=F.create();d.cross=f;d.intersectCircleAndPoint=function(n,y,G){O(A,G,n,y);return l.floatEqualAbsolute(A[0],G[0])&&l.floatEqualAbsolute(A[1],G[1])?[F.clone(G)]:[]};d.intersectLineAndPoint=function(n,y){I(A,y,n.start,n.end);return l.floatEqualAbsolute(A[0],y[0])&&l.floatEqualAbsolute(A[1],y[1])?[F.clone(y)]:[]};d.intersectLineAndRay=function(n,y){const G=n.start;var E=y.start,x=y.end;const C=b.subtract(L,n.end,G);var h=b.subtract(H,x,E);
x=f(C,h);if(1E-6>=Math.abs(x))return[];E=b.subtract(A,G,E);h=f(h,E)/x;x=f(C,E)/x;if(0<=h){if(0<=x||y.type===d.LineType.LINE)return[b.scaleAndAdd(m,G,C,h)]}else if(n.type===d.LineType.LINE&&(0<=x||y.type===d.LineType.LINE))return[b.scaleAndAdd(m,G,C,h)];return[]};d.intersectLineLikeAndCircle=function(n,y,G){const E=[],x=b.subtract(L,n.end,n.start);var C=b.subtract(H,n.start,y);y=b.squaredLength(x);const h=2*b.dot(x,C);G=b.squaredLength(C)-G*G;G=h*h-4*y*G;0===G?(y=-h/(2*y),(n.type===d.LineType.LINE||
0<=y)&&E.push(b.scaleAndAdd(m,n.start,x,y))):0<G&&(G=Math.sqrt(G),C=(-h+G)/(2*y),(n.type===d.LineType.LINE||0<=C)&&E.push(b.scaleAndAdd(m,n.start,x,C)),y=(-h-G)/(2*y),(n.type===d.LineType.LINE||0<=y)&&E.push(b.scaleAndAdd(A,n.start,x,y)));return E};d.pointToLineDistance=function(n,y,G){return Math.abs((y[0]-n[0])*(G[1]-n[1])-(y[1]-n[1])*(G[0]-n[0]))/b.distance(y,G)};d.projectPoint=J;d.projectPointToCircle=O;d.projectPointToLine=I;d.projectPointToRay=function(n,y,G,E){b.subtract(L,E,G);b.subtract(A,
y,G);y=b.dot(L,A)/b.squaredLength(L);return 0<y?b.scaleAndAdd(n,G,L,y):b.copy(n,G)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),function(d,l,b,F,f,J){f=function(I){function O(L){return I.call(this,{...L,constraint:new b.LineConstraint(L.coordinateHelper,
L.edgeStart,L.edgeEnd)})||this}l._inheritsLoose(O,I);l._createClass(O,[{key:"hints",get:function(){return[new J.LineSnappingHint(F.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo)]}}]);return O}(f.FeatureSnappingCandidate);d.EdgeSnappingCandidate=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"./SnappingCandidate"],function(d,l,b){b=function(F){function f({coordinateHelper:J,targetPoint:I,objectId:O,constraint:L,elevationInfo:H}){J=F.call(this,J,I,L,H)||this;J.objectId=O;return J}l._inheritsLoose(f,F);return f}(b.SnappingCandidate);d.FeatureSnappingCandidate=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(d){d.SnappingCandidate=function(l,
b,F,f){this.coordinateHelper=l;this.targetPoint=b;this.constraint=F;this.elevationInfo=f};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,l,b,F,f,J){F.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");b=function(I){function O(L,
H,A,m,n=!0,y=!0){m=I.call(this,m)||this;m.type=L;m.lineStart=H;m.lineEnd=A;m.fadeLeft=n;m.fadeRight=y;return m}l._inheritsLoose(O,I);O.prototype.equals=function(L){return L instanceof O?this.type===L.type&&f.objectEqual(this.lineStart,L.lineStart)&&f.objectEqual(this.lineEnd,L.lineEnd)&&this.fadeLeft===L.fadeLeft&&this.fadeRight===L.fadeRight:!1};return O}(J.SnappingHint);d.LineSnappingHint=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],
function(d){d.SnappingHint=function(l){this.elevationInfo=l};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),function(d,l,b,F,f,J){F=function(I){function O({coordinateHelper:L,targetPoint:H,constraint:A,previousVertex:m,
otherVertex:n,otherVertexType:y,objectId:G,elevationInfo:E}){L=I.call(this,L,H,A,E)||this;L.previousVertex=m;L.otherVertex=n;L.otherVertexType=y;L.objectId=G;return L}l._inheritsLoose(O,I);l._createClass(O,[{key:"hints",get:function(){const L=this.previousVertex,H=this.otherVertexType===d.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,A=this.otherVertexType===d.OtherVertexType.CENTER?this.targetPoint:this.otherVertex,m=this.elevationInfo;return[new f.LineSnappingHint(b.LineSegmentHintType.TARGET,
H,A,m),new f.LineSnappingHint(b.LineSegmentHintType.REFERENCE,L,H,m),new J.RightAngleSnappingHint(this.previousVertex,H,A,m)]}}]);return O}(F.SnappingCandidate);d.OtherVertexType=void 0;(function(I){I[I.NEXT=0]="NEXT";I[I.CENTER=1]="CENTER"})(d.OtherVertexType||(d.OtherVertexType={}));d.RightAngleSnappingCandidate=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(d,l,b,F,f,J){F.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");b=function(I){function O(L,H,A,m){m=I.call(this,m)||this;m.previousVertex=L;m.centerVertex=H;m.nextVertex=A;return m}l._inheritsLoose(O,I);O.prototype.equals=function(L){return L instanceof O?f.objectEqual(this.previousVertex,L.previousVertex)&&f.objectEqual(this.centerVertex,L.centerVertex)&&f.objectEqual(this.nextVertex,L.nextVertex):!1};return O}(J.SnappingHint);d.RightAngleSnappingHint=b;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(d,l,b,F,f,J,I){function O(E,x,C){({camera:C}=C.state);C.projectToScreen(E,y);C.projectToScreen(x,G);return b.squaredDistance(y,G)}function L(E,x,C,h,g=f.create()){E=x.toXYZ(E);E[2]=I.getConvertedElevationFromVector(h,
E,x.spatialReference,C)||0;h.renderCoordsHelper.toRenderCoords(E,x.spatialReference,g);return g}const H=new J,A=f.create(),m=l.createRenderScreenPointArray3(),n=l.createRenderScreenPointArray3(),y=l.createScreenPointArray(),G=l.createScreenPointArray();d.anyMapPointToRender=L;d.anyMapPointToScreenPoint=function(E,x,C,h){if("2d"===h.type)return h.toScreen(x.vectorToPoint(E,H));L(E,x,C,h,A);h.state.camera.projectToScreen(A,y);return l.createScreenPoint(y[0],y[1])};d.anyMapPointsToRenderWithEqualRelativeZ=
function(E,x,C,h,g,r,u){E=C.toXYZ(E);x=C.toXYZ(x);if("absolute-height"!==h.mode){const p=I.getConvertedElevationFromVector(g,E,C.spatialReference,h);h=I.getConvertedElevationFromVector(g,x,C.spatialReference,h);h=(null==p?h:null==h?p:Math.min(p,h))||0;E[2]=h;x[2]=h}g.renderCoordsHelper.toRenderCoords(E,C.spatialReference,r);g.renderCoordsHelper.toRenderCoords(x,C.spatialReference,u)};d.renderScreenSpaceTangent=function(E,x,C,h){C.projectToRenderScreen(E,m);C.projectToRenderScreen(x,n);b.subtract(h,
n,m);b.normalize(h,h)};d.screenDistance=function(E,x,C){return Math.sqrt(O(E,x,C))};d.screenDistanceSquared=O;d.vectorToRender=function(E,x,C,h,g=f.create()){E=F.copy(A,E);E[2]=I.getConvertedElevationFromVector(h,E,x,C)||0;h.renderCoordsHelper.toRenderCoords(E,x,g);return g};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){d.SelfSnappingEngine=function(E){function x(h){h=E.call(this,h)||this;h.updating=!1;h._snappers=new f;return h}l._inheritsLoose(x,E);var C=x.prototype;C.initialize=function(){this._snappers.push(new m.ParallelLineSnapper(this.view,this.options),new A.LineSnapper(this.view,this.options),new n.RightAngleSnapper(this.view,this.options),new y.RightAngleTriangleSnapper(this.view,this.options))};C.fetchCandidates=function(){var h=l._asyncToGenerator(function*(g,r){if(!this.options.effectiveSelfEnabled)return[];
const u=[];for(const p of this._snappers.items)u.push(...p.snap(g,r));G.sortCandidatesInPlace(g,u);return u});return function(g,r){return h.apply(this,arguments)}}();l._createClass(x,[{key:"options",set:function(h){this._set("options",h);for(const g of this._snappers)g.options=h}}]);return x}(F);b.__decorate([J.property({readOnly:!0})],d.SelfSnappingEngine.prototype,"updating",void 0);b.__decorate([J.property({constructOnly:!0})],d.SelfSnappingEngine.prototype,"view",void 0);b.__decorate([J.property()],
d.SelfSnappingEngine.prototype,"options",null);d.SelfSnappingEngine=b.__decorate([H.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],d.SelfSnappingEngine);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,l,b,F,f,J,I,O,L){f=function(H){function A(){return H.apply(this,arguments)||this}l._inheritsLoose(A,H);var m=A.prototype;m.snapNewVertex=function(n,y){var G=y.editGeometryOperations.data.components[0],E=G.edges.length;const x=[];if(1>E)return x;const C=O.anyMapPointToScreenPoint(n,y.coordinateHelper,y.elevationInfo,this.view);E=G=G.edges[E-1];do this.edgeExceedsShortLineThreshold(E,y)&&this._processCandidateProposal(E.leftVertex.pos,E.rightVertex.pos,n,C,y,x),E=E.leftVertex.leftEdge;while(E&&
E!==G);return x};m.snapExistingVertex=function(n,y){const G=[],E=b.unwrap(y.vertexHandle);var x=E.component;if(2>x.edges.length)return G;const C=O.anyMapPointToScreenPoint(n,y.coordinateHelper,y.elevationInfo,this.view);var h=E.leftEdge;const g=E.rightEdge;h&&g&&this.edgeExceedsShortLineThreshold(h,y)&&this.edgeExceedsShortLineThreshold(g,y)&&this._processCandidateProposal(h.leftVertex.pos,g.rightVertex.pos,n,C,y,G);h=x=x.edges[0];do h!==E.leftEdge&&h!==E.rightEdge&&this.edgeExceedsShortLineThreshold(h,
y)&&this._processCandidateProposal(h.leftVertex.pos,h.rightVertex.pos,n,C,y,G),h=h.rightVertex.rightEdge;while(h&&h!==x);return G};m._processCandidateProposal=function(n,y,G,E,x,C){const h=L.projectPointToLine(F.create(),G,n,y),{coordinateHelper:g,elevationInfo:r,pointer:u}=x;G=g.fromXYZ(h,g.getZ(G,0));J.squareDistance(E,O.anyMapPointToScreenPoint(G,g,r,this.view))<this.squaredProximityTreshold(u)&&C.push(new I.LineSnappingCandidate({coordinateHelper:g,lineStart:n,lineEnd:y,targetPoint:G,elevationInfo:r}))};
return A}(f.SnappingAlgorithm);d.LineSnapper=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ./Settings ./snappingUtils ../support/viewUtils".split(" "),function(d,l,b,F,f,J){let I=function(){function O(H,A){this.view=H;this.options=A;this.squaredShortLineThreshold=F.defaults.shortLineThreshold*F.defaults.shortLineThreshold}
var L=O.prototype;L.snap=function(H,A){return b.isSome(A.vertexHandle)?"vertex"!==A.vertexHandle.type?[]:this.snapExistingVertex(H,A):this.snapNewVertex(H,A)};L.edgeExceedsShortLineThreshold=function(H,A){return this.exceedsShortLineThreshold(H.leftVertex.pos,H.rightVertex.pos,A)};L.exceedsShortLineThreshold=function(H,A,{elevationInfo:m,editGeometryOperations:n}){n=n.data.coordinateHelper;return 0===this.squaredShortLineThreshold||f.squareDistance(J.anyMapPointToScreenPoint(A,n,m,this.view),J.anyMapPointToScreenPoint(H,
n,m,this.view))>this.squaredShortLineThreshold};L.squaredProximityTreshold=function(H){return"touch"===H?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};l._createClass(O,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:H,touchSensitivityMultiplier:A}=this.options,m=H*A;return m*m}}]);return O}();d.SnappingAlgorithm=I;Object.defineProperties(d,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),function(d,l,b,F,f,J,I,O){I=function(A){function m({coordinateHelper:n,lineStart:y,lineEnd:G,targetPoint:E,elevationInfo:x}){n=A.call(this,n,E,new f.LineConstraint(n,y,G),
x)||this;n.referenceLineHint=new O.LineSnappingHint(J.LineSegmentHintType.REFERENCE_EXTENSION,y,G,x);return n}l._inheritsLoose(m,A);m.prototype._lineEndClosestToTarget=function(){const n=this.constraint.start,y=this.constraint.end;return 0<Math.sign(b.dot(b.subtract(H,y,n),b.subtract(L,this.targetPoint,n)))?y:n};l._createClass(m,[{key:"hints",get:function(){return[this.referenceLineHint,new O.LineSnappingHint(J.LineSegmentHintType.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo)]}}]);
return m}(I.SnappingCandidate);const L=F.create(),H=F.create();d.LineSnappingCandidate=I;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A){I=function(m){function n(){var G=m.apply(this,arguments)||this;G._tmpProjection=f.create();return G}l._inheritsLoose(n,m);var y=n.prototype;y.snapNewVertex=function(G,E){var x=E.editGeometryOperations.data.components[0],C=x.edges.length,h=x.vertices.length;const g=[];if(2>C)return g;const r=H.anyMapPointToScreenPoint(G,E.coordinateHelper,E.elevationInfo,this.view);h=x.vertices[h-1];const u=x.vertices[0];C=x=x.edges[C-1];do this.edgeExceedsShortLineThreshold(C,E)&&(this._checkEdgeForParalleLines(C,
h.pos,G,r,E,g),this._checkEdgeForParalleLines(C,u.pos,G,r,E,g)),C=C.leftVertex.leftEdge;while(C&&C!==x);return g};y.snapExistingVertex=function(G,E){const x=[],C=b.unwrap(E.vertexHandle);var h=C.component;if(3>h.edges.length)return x;const g=H.anyMapPointToScreenPoint(G,E.coordinateHelper,E.elevationInfo,this.view),r=C.leftEdge,u=C.rightEdge,p=h.vertices[0],k=h.vertices[h.vertices.length-1];let D=h=h.edges[0];do D!==r&&D!==u&&this.edgeExceedsShortLineThreshold(D,E)&&(r&&this._checkEdgeForParalleLines(D,
r.leftVertex.pos,G,g,E,x),u&&this._checkEdgeForParalleLines(D,u.rightVertex.pos,G,g,E,x),C===p?this._checkEdgeForParalleLines(D,k.pos,G,g,E,x):C===k&&this._checkEdgeForParalleLines(D,p.pos,G,g,E,x)),D=D.rightVertex.rightEdge;while(D&&D!==h);return x};y._checkEdgeForParalleLines=function(G,E,x,C,h,g){const r=G.leftVertex.pos,u=G.rightVertex.pos;A.projectPointToLine(this._tmpProjection,E,r,u);if(!(F.squaredDistance(this._tmpProjection,E)<J.defaults.parallelLineThreshold)){A.projectPointToLine(this._tmpProjection,
x,r,u,E);var {coordinateHelper:p,elevationInfo:k,pointer:D}=h;x=p.fromXYZ(this._tmpProjection,p.getZ(x,0));O.squareDistance(C,H.anyMapPointToScreenPoint(x,p,k,this.view))<this.squaredProximityTreshold(D)&&!this._parallelToPreviousCandidate(G,g)&&g.push(new L.ParallelLineSnappingCandidate({coordinateHelper:p,referenceLine:G,lineStart:E,targetPoint:x,elevationInfo:k}))}};y._parallelToPreviousCandidate=function(G,E){const x=G.leftVertex.pos,C=G.rightVertex.pos;for(const h of E)if(A.projectPointToLine(this._tmpProjection,
C,h.constraint.start,h.constraint.end,x),F.squaredDistance(this._tmpProjection,C)<J.defaults.parallelLineThreshold)return h.addReferenceLine(G),!0;return!1};return n}(I.SnappingAlgorithm);d.ParallelLineSnapper=I;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(d,l,b,F,f,J,I,O){J=function(L){function H({coordinateHelper:A,referenceLine:m,lineStart:n,targetPoint:y,elevationInfo:G}){const E=A.clone(n);b.subtract(E,b.add(E,E,m.rightVertex.pos),m.leftVertex.pos);A=L.call(this,A,y,new F.LineConstraint(A,n,E),G)||this;A._referenceLines=[{edge:m,fadeLeft:!0,fadeRight:!0}];return A}l._inheritsLoose(H,L);H.prototype.addReferenceLine=function(A){const m={edge:A,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{A.rightVertex.rightEdge===n.edge&&(n.fadeLeft=
!1,m.fadeRight=!1);A.leftVertex.leftEdge===n.edge&&(n.fadeRight=!1,m.fadeLeft=!1)});this._referenceLines.push(m)};l._createClass(H,[{key:"hints",get:function(){const A=this.elevationInfo;return[new I.LineSnappingHint(f.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint,A),new O.ParallelSnappingHint(this.constraint.start,this.targetPoint,A),...this._referenceLines.map(m=>new I.LineSnappingHint(f.LineSegmentHintType.REFERENCE,m.edge.leftVertex.pos,m.edge.rightVertex.pos,A,m.fadeLeft,
m.fadeRight))]}}]);return H}(J.SnappingCandidate);d.ParallelLineSnappingCandidate=J;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,l,b,F,f,J){F.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");b=function(I){function O(L,
H,A){A=I.call(this,A)||this;A.lineStart=L;A.lineEnd=H;return A}l._inheritsLoose(O,I);O.prototype.equals=function(L){return L instanceof O?f.objectEqual(this.lineStart,L.lineStart)&&f.objectEqual(this.lineEnd,L.lineEnd):!1};return O}(J.SnappingHint);d.ParallelSnappingHint=b;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H){J=function(A){function m(){var y=A.apply(this,arguments)||this;y._tmp=f.create();return y}l._inheritsLoose(m,A);var n=m.prototype;n.snapNewVertex=function(y,G){var E=G.editGeometryOperations.data.components[0],x=E.vertices.length;const C=[];if(2>x)return C;const h=H.anyMapPointToScreenPoint(y,G.coordinateHelper,G.elevationInfo,this.view);x=E.vertices[x-1];this._checkForSnappingCandidate(C,x.leftEdge,x.pos,y,x.leftEdge.leftVertex.pos,x.pos,G,y,h);E=E.vertices[0];this._checkForSnappingCandidate(C,
E.rightEdge,E.pos,y,E.rightEdge.rightVertex.pos,E.pos,G,y,h);return C};n.snapExistingVertex=function(y,G){const E=[];var x=b.unwrap(G.vertexHandle),C=x.component;const h=C.vertices.length;if(3>h)return E;const g=H.anyMapPointToScreenPoint(y,G.coordinateHelper,G.elevationInfo,this.view);var r=x.leftEdge;x=x.rightEdge;const u=C.vertices[0];C=C.vertices[h-1];if(!r)return this._checkForSnappingCandidate(E,u.rightEdge.rightVertex.rightEdge,u.rightEdge.rightVertex.pos,y,u.rightEdge.rightVertex.rightEdge.rightVertex.pos,
u.rightEdge.rightVertex.pos,G,y,g),E;if(!x)return this._checkForSnappingCandidate(E,C.leftEdge.leftVertex.leftEdge,C.leftEdge.leftVertex.pos,y,C.leftEdge.leftVertex.leftEdge.leftVertex.pos,C.leftEdge.leftVertex.pos,G,y,g),E;r&&r.leftVertex.leftEdge&&(C=r.leftVertex.leftEdge,this._checkForSnappingCandidate(E,C,r.leftVertex.pos,y,C.leftVertex.pos,r.leftVertex.pos,G,y,g));x&&x.rightVertex.rightEdge&&(r=x.rightVertex.rightEdge,this._checkForSnappingCandidate(E,r,x.rightVertex.pos,y,r.rightVertex.pos,
x.rightVertex.pos,G,y,g));return E};n._checkForSnappingCandidate=function(y,G,E,x,C,h,g,r,u){if(this.edgeExceedsShortLineThreshold(G,g)){F.subtract(this._tmp,G.rightVertex.pos,G.leftVertex.pos);G=f.fromValues(this._tmp[1],-this._tmp[0]);E=F.dot(G,F.subtract(this._tmp,x,E))/F.squaredLength(G);var {coordinateHelper:p,elevationInfo:k,pointer:D}=g;g=p.fromXYZ(F.scaleAndAdd(f.create(),h,G,E),p.getZ(r,0));O.squareDistance(u,H.anyMapPointToScreenPoint(g,p,k,this.view))<this.squaredProximityTreshold(D)&&
y.push(new L.RightAngleSnappingCandidate({coordinateHelper:p,targetPoint:g,constraint:new I.RayConstraint(p,h,F.scaleAndAdd(p.createVector(),h,G,Math.sign(E))),previousVertex:C,otherVertex:h,otherVertexType:L.OtherVertexType.CENTER,elevationInfo:k}))}};return m}(J.SnappingAlgorithm);d.RightAngleSnapper=J;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H){J=function(A){function m(){return A.apply(this,arguments)||this}l._inheritsLoose(m,A);var n=m.prototype;n.snapNewVertex=function(y,G){const E=G.editGeometryOperations.data.components[0],x=[],C=E.vertices.length;if("polygon"!==G.editGeometryOperations.data.type||2>C)return x;this._processCandidateProposal(E.vertices[0].pos,E.vertices[C-1].pos,y,G,x);return x};n.snapExistingVertex=function(y,G){const E=[],x=b.unwrap(G.vertexHandle),C=x.component;if(2>C.edges.length||"polyline"===
G.editGeometryOperations.data.type&&(0===x.index||x.index===C.vertices.length-1))return E;this._processCandidateProposal(x.leftEdge.leftVertex.pos,x.rightEdge.rightVertex.pos,y,G,E);return E};n._processCandidateProposal=function(y,G,E,x,C){if(this.exceedsShortLineThreshold(y,G,x)){var h=F.lerp(f.create(),y,G,.5),g=.5*F.distance(y,G);h=H.projectPointToCircle(f.create(),E,h,g);var {coordinateHelper:r,elevationInfo:u,pointer:p}=x;x=r.fromXYZ(h,r.getZ(E,0));E=L.anyMapPointToScreenPoint(E,r,u,this.view);
I.squareDistance(E,L.anyMapPointToScreenPoint(x,r,u,this.view))<this.squaredProximityTreshold(p)&&C.push(new O.RightAngleTriangleSnappingCandidate({coordinateHelper:r,targetPoint:x,point1:y,point2:G,elevationInfo:u}))}};return m}(J.SnappingAlgorithm);d.RightAngleTriangleSnapper=J;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(d,l,b,F,f,J,I,O,L){I=function(A){function m({coordinateHelper:n,targetPoint:y,point1:G,point2:E,elevationInfo:x}){n=A.call(this,n,y,new f.PlanarCircleConstraint(n,b.lerp(H,G,E,.5),.5*b.distance(G,E)),x)||this;n.p1=G;n.p2=E;return n}l._inheritsLoose(m,A);l._createClass(m,[{key:"hints",get:function(){const n=this.elevationInfo;return[new O.LineSnappingHint(J.LineSegmentHintType.REFERENCE,this.targetPoint,this.p1,n),new O.LineSnappingHint(J.LineSegmentHintType.REFERENCE,this.targetPoint,this.p2,
n),new L.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2,n)]}}]);return m}(I.SnappingCandidate);const H=F.create();d.RightAngleTriangleSnappingCandidate=I;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(d,l,
b,F,f){F=function(J){function I(O,L,H,A,m){O=J.call(this,O,L,new b.IntersectionConstraint(O,L,H.constraint,A.constraint),m)||this;O.first=H;O.second=A;return O}l._inheritsLoose(I,J);l._createClass(I,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new f.IntersectionSnappingHint(this.targetPoint,this.elevationInfo)]}}]);return I}(F.SnappingCandidate);d.IntersectionSnappingCandidate=F;Object.defineProperties(d,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(d,l,b,F){F=function(f){function J(I,O){O=f.call(this,O)||this;O.intersectionPoint=I;return O}l._inheritsLoose(J,f);J.prototype.equals=function(I){return I instanceof J?b.objectEqual(this.intersectionPoint,I.intersectionPoint):!1};return J}(F.SnappingHint);
d.IntersectionSnappingHint=F;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,b,F,f,J,I,O,L,H){d.OperationHandle=function(A){function m(y){y=A.call(this,y)||this;y.cancelled=!1;y.history={undo:[],redo:[]};y.type=null;return y}l._inheritsLoose(m,A);var n=m.prototype;n.addToHistory=function(y){this.history.redo=[];this.history.undo.push(y)};n.resetHistory=function(){this.history.redo=[];this.history.undo=[]};n.canUndo=function(){return 0<this.history.undo.length};n.canRedo=function(){return 0<this.history.redo.length};n.complete=function(){this._reset();this.onEnd();
this.emit("complete")};n.cancel=function(){this.cancelled=!0;this.complete()};n._reset=function(){this.activeComponent.reset()};n.refreshComponent=function(){const y=this.activeComponent;y&&("box"!==y.type&&"reshape"!==y.type&&"graphic-mover"!==y.type||y.refresh())};l._createClass(m,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:F.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(y){this._set("undo",()=>{this.canUndo()&&y()})}},{key:"redo",set:function(y){this._set("redo",()=>{this.canRedo()&&y()})}}]);return m}(f.EventedAccessor);b.__decorate([J.property()],d.OperationHandle.prototype,"activeComponent",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"cancelled",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,
"history",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"tool",null);b.__decorate([J.property()],d.OperationHandle.prototype,"type",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"canUndo",null);b.__decorate([J.property()],d.OperationHandle.prototype,"canRedo",null);b.__decorate([J.property()],d.OperationHandle.prototype,"onEnd",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"undo",null);b.__decorate([J.property()],d.OperationHandle.prototype,"redo",
null);b.__decorate([J.property()],d.OperationHandle.prototype,"toggleTool",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"addToSelection",void 0);b.__decorate([J.property()],d.OperationHandle.prototype,"removeFromSelection",void 0);d.OperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.OperationHandle")],d.OperationHandle);d.CreateOperationHandle=function(A){function m(){return A.apply(this,arguments)||this}l._inheritsLoose(m,A);return m}(d.OperationHandle);b.__decorate([J.property()],
d.CreateOperationHandle.prototype,"activeComponent",void 0);d.CreateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],d.CreateOperationHandle);d.UpdateOperationHandle=function(A){function m(n){return A.call(this,n)||this}l._inheritsLoose(m,A);return m}(d.OperationHandle);b.__decorate([J.property()],d.UpdateOperationHandle.prototype,"activeComponent",void 0);d.UpdateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
d.UpdateOperationHandle);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/uid ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E){const x={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};I=function(C){function h(r,u){u=C.call(this,(()=>{const {view:p,viewModel:k,snappingOptions:D,...N}=r;return N})(),u)||this;u._layerListFilter=null;u.label=void 0;u.messages=null;u.messagesCommon=null;u.snappingOptions=null;u.view=null;u.visibleElements={...x};u._defaultViewModel=null;null!=r&&r.viewModel?u.viewModel=r.viewModel:(u._defaultViewModel=new E({snappingOptions:r.snappingOptions,
view:r.view}),u.viewModel=u._defaultViewModel);return u}l._inheritsLoose(h,C);var g=h.prototype;g.destroy=function(){this._defaultViewModel=F.destroyMaybe(this._defaultViewModel)};g.loadDependencies=function(){return Promise.all([new Promise((r,u)=>d(["../../chunks/calcite-action"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-block"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-icon"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-label"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-panel"],
r,u)),new Promise((r,u)=>d(["../../chunks/calcite-list"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-list-item"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-list-item-group"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-switch"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-checkbox"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-accordion-item"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-accordion"],r,u)),new Promise((r,u)=>d(["../../chunks/calcite-input"],r,u))])};
g.castVisibleElements=function(r){return{...x,...r}};g.render=function(){const {label:r,visibleElements:{header:u}}=this;return G.tsx("div",{"aria-label":r,class:this.classes("esri-snapping-controls","esri-widget")},G.tsx("div",{class:"esri-snapping-controls__container"},u?this.renderHeaderView():this.renderContent()))};g.renderHeaderView=function(){return G.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};g.renderContent=function(){return[this.renderToggles(),
this.renderLayerList()]};g.renderToggles=function(){return G.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),G.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};g.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:r},viewModel:{snappingOptions:{enabled:u,enabledToggled:p}}}=this;return G.tsx("calcite-label",
{layout:"inline-space-between"},r,G.tsx("calcite-switch",{checked:u,disabled:p,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};g.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:r},viewModel:{snappingOptions:{enabled:u,selfEnabled:p,enabledToggled:k}}}=this;return G.tsx("calcite-label",{layout:"inline-space-between"},r,G.tsx("calcite-switch",{checked:p,disabled:k||!u,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};
g.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:r},viewModel:{snappingOptions:{enabled:u,featureEnabled:p,enabledToggled:k}}}=this;return G.tsx("calcite-label",{layout:"inline-space-between"},r,G.tsx("calcite-switch",{checked:p,disabled:k||!u,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};g.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:r,messagesCommon:u}=this,p=({target:{value:k}})=>
this._layerListFilter=""===k?null:new RegExp(k,"i");p=9<this.viewModel.layerListViewModel.operationalItems.length?G.tsx("calcite-input",{class:"esri-snapping-controls__layer-list__filter",clearable:!0,placeholder:null==r?void 0:r.searchLayers,onCalciteInputInput:p}):null;return G.tsx("calcite-block",{"intl-collapse":null==u?void 0:u.collapse,"intl-expand":null==u?void 0:u.expand,heading:r.snappingLayers,class:"esri-snapping-controls__layer-list-block",open:!0,collapsible:!0},p,G.tsx("calcite-list",
{class:"esri-snapping-controls__layer-list"},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,F.unwrap(this._layerListFilter))))}};g.renderLayerListItemCollection=function(r,u){return r.map(p=>{if(u?this._itemTitleMatchesFilter(p,u):1)return 0<p.children.length?this.renderLayerListItemGroup(p):this.renderLayerListItem(p);const k=p.children.filter(D=>this._itemTitleMatchesFilter(D,u));return 0<k.length?this.renderLayerListItemGroup(p,k):null}).toArray()};g.renderLayerListItem=
function(r){var {messages:{untitledLayer:u}}=this;u=r.title||u;const p=G.tsx("calcite-checkbox",{value:r.layer.id,checked:r.enabled,bind:this,onCalciteCheckboxChange:k=>this._handleLayerListItemChange(k.target)});return G.tsx("calcite-list-item",{key:`${this.id}-list-item-${r.uid}`,onclick:()=>{this._handleLayerListItemChange({checked:!p.properties.checked,value:p.properties.value})}},G.tsx("calcite-label",{class:"esri-snapping-controls__layer-list__item",slot:"content-start",tabIndex:-1,layout:"inline",
"disable-spacing":"true"},G.tsx("div",{class:"esri-snapping-controls__layer-list__item__checkbox"},p),G.tsx("div",{class:"esri-snapping-controls__layer-list__item__label"},u)))};g.renderLayerListItemGroup=function(r,u){const p=r.title||this.messages.untitledLayer,k=r.title&&""!==r.title?r.title:f.generateUID();return G.tsx("calcite-list-item",{key:k},G.tsx("calcite-accordion",{"icon-position":"start",appearance:"transparent",afterCreate:D=>{D.append(...Array.from(D.children).map(N=>{N.remove();return N}))}},
G.tsx("calcite-accordion-item",{active:!!u,"item-title":p,key:r.uid},G.tsx("calcite-list",null,[...this.renderLayerListItemCollection(null!=u?u:r.children)]))))};g._enableSnappingSwitchChange=function(r){this.snappingOptions.enabled=r.target.checked};g._featureEnabledSwitchChange=function(r){this.snappingOptions.featureEnabled=r.target.checked};g._itemTitleMatchesFilter=function(r,u){return u.test(r.title)};g._selfEnabledSwitchChange=function(r){this.snappingOptions.selfEnabled=r.target.checked};
g._handleLayerListItemChange=function(){var r=l._asyncToGenerator(function*(u){u.checked?this.viewModel.enableSnappingForLayer(u.value):this.viewModel.disableSnappingForLayer(u.value)});return function(u){return r.apply(this,arguments)}}();l._createClass(h,[{key:"viewModel",set:function(r){if(r!==this._get("viewModel")){if(F.isNone(this._defaultViewModel)||this._defaultViewModel!==r)this._defaultViewModel=F.destroyMaybe(this._defaultViewModel);this._set("viewModel",r)}}}]);return h}(m);b.__decorate([H.property()],
I.prototype,"_layerListFilter",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],I.prototype,"label",void 0);b.__decorate([H.property(),y.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],I.prototype,"messages",void 0);b.__decorate([H.property(),y.messageBundle("esri/t9n/common")],I.prototype,"messagesCommon",void 0);b.__decorate([J.aliasOf("viewModel.snappingOptions")],I.prototype,"snappingOptions",void 0);b.__decorate([J.aliasOf("viewModel.view")],
I.prototype,"view",void 0);b.__decorate([H.property()],I.prototype,"viewModel",null);b.__decorate([H.property()],I.prototype,"visibleElements",void 0);b.__decorate([L.cast("visibleElements")],I.prototype,"castVisibleElements",null);return I=b.__decorate([A.subclass("esri.widgets.support.SnappingControls")],I)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y){b=function(G){function E(C){C=G.call(this,C)||this;C.layerListViewModel=new y.SnappingLayerListViewModel;C.snappingOptions=null;C.view=null;return C}d._inheritsLoose(E,G);var x=E.prototype;x.initialize=function(){this.handles.add([J.watch(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:C,view:h})=>{C.view=h},J.initial),J.watch(()=>{var C;return{viewModel:this.layerListViewModel,sources:null==(C=this.snappingOptions)?void 0:C.featureSources}},
({viewModel:C,sources:h})=>{C.featureSnappingSources=h},J.initial)])};x.enableSnappingForLayer=function(C){var h;(null!=(h=this._findSnappingSourceForLayer(C))?h:this._makeSnappingSourceForLayer(C)).enabled=!0};x.disableSnappingForLayer=function(C){if(C=this._findSnappingSourceForLayer(C))C.enabled=!1};x.updateEnabledFeatureSources=function(C){for(const h of this.snappingOptions.featureSources)n.canDisplayLayer(h.layer)&&(h.enabled=C.includes(h.layer.id))};x._findSnappingSourceForLayer=function(C){return this.snappingOptions.featureSources.find(h=>
h.layer.id===C)};x._makeSnappingSourceForLayer=function(C){var {layer:h}=this.layerListViewModel.operationalItemsFlat.find(g=>g.layer.id===C);if(!h)throw new F("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${C} because no such layer was found in the view`);h=new m({layer:h});this.snappingOptions.featureSources.add(h);return h};d._createClass(E,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return E}(f.HandleOwnerMixin(b));l.__decorate([I.property({constructOnly:!0})],
b.prototype,"layerListViewModel",void 0);l.__decorate([I.property({constructOnly:!0})],b.prototype,"snappingOptions",void 0);l.__decorate([I.property()],b.prototype,"state",null);l.__decorate([I.property({constructOnly:!0})],b.prototype,"view",void 0);return b=l.__decorate([A.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],b)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(d){function l(L){if(L)return null!=L.listMode?L.listMode:
void 0}function b(L){if(L)return null!=L.minScale?L.minScale:void 0}function F(L){if(L)return null!=L.maxScale?L.maxScale:void 0}function f(L){if(L){if(!("type"in L))return"sublayers";if(L.listMode!==O.hideChildren&&"wmts"!==L.type)switch(L.type){case "group":return"layers";default:return"sublayers"}}}function J(L,H){L&&L.sort((A,m)=>{A=H.indexOf(A.uid);m=H.indexOf(m.uid);return A>m?-1:A<m?1:0})}function I(L){return!(null==L||!L.layer)}const O={hide:"hide",hideChildren:"hide-children"};d.canDisplayLayer=
function(L){return l(L)!==O.hide};d.canSortSublayers=function(L){L=L&&(L.get("layer.layer")||L.layer);if(!L)return!1;L=L.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof L?L:!0};d.findLayerListMode=l;d.findLayerMaxScale=F;d.findLayerMinScale=b;d.findLayerVisibilityMode=function(L){if(!L)return"inherited";var H=L.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof H)return H?"independent":"inherited";H=L.get("capabilities.exportMap.supportsSublayerVisibility");
return"boolean"===typeof H?H?"independent":"inherited":null!=L.visibilityMode?L.visibilityMode:"independent"};d.findSelectedItem=function(L,H){var A;const m=null==(A=L.layer)?void 0:A.uid;return m&&H.find(n=>{var y;return(null==(y=n.layer)?void 0:y.uid)===m})};d.getItemLayers=function(L){return(L=null==L?void 0:L.layer)&&"group"===L.type?L.layers:null};d.getLegendLayerInfo=function(L){var H=I(L)?L:null;const A=null==L?void 0:L.parent;return(H="map-image"===(null==A?void 0:A.type)&&H.source)&&A?{layer:A,
title:"",sublayerIds:[H.mapLayerId]}:{layer:L,title:""}};d.getNormalizedChildLayerProperty=f;d.isLayerOutsideScaleRange=function(L,H){if(!L||isNaN(H))return!1;var A=b(L);L=F(L);A=!isNaN(A)&&0<A&&H>A;H=!isNaN(L)&&0<L&&H<L;return A||H};d.isSublayer=I;d.sortChildLayersToIds=function(L,H){if(L=null==L?void 0:L.layer){var A=f(L);A&&(L=L.get(A),J(L,H))}};d.sortLayersToIds=J;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m){d.SnappingLayerListViewModel=function(n){function y(){var E=n.apply(this,arguments)||this;E.featureSnappingSources=new F;return E}l._inheritsLoose(y,n);var G=y.prototype;G._compileList=function(){var E=this.get("view.map.layers");E&&(E=E.filter(A.isValidSnappingLayer),this._watchLayersListMode(E),(E=this._getViewableLayers(E))&&E.length?(this._createNewItems(E),this._removeItems(E),this._sortItems(E)):this._removeAllItems())};G._createListItem=function(E){return new m.SnappingListItem({layer:E,
view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})};l._createClass(y,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(E=>E.children)}}]);return y}(H);b.__decorate([f.property()],d.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);b.__decorate([f.property()],d.SnappingLayerListViewModel.prototype,"operationalItems",void 0);d.SnappingLayerListViewModel=b.__decorate([L.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],
d.SnappingLayerListViewModel);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n){const y=b.ofType(m);b=function(G){function E(C){C=G.call(this,C)||this;C._handles=new f;C.listItemCreatedFunction=null;C.operationalItems=new y;C.view=null;return C}d._inheritsLoose(E,G);var x=E.prototype;x.initialize=function(){this._handles.add([J.watch(()=>{var C;return[this.view,null==(C=this.view)?void 0:C.ready]},()=>this._viewHandles(),J.initial),J.watch(()=>this.listItemCreatedFunction,()=>this._listItemCreatedFunctionChanged())],"view")};x.destroy=function(){this._handles.destroy();
this.view=this._handles=null;this.operationalItems.removeAll()};x.triggerAction=function(C,h){C&&!C.disabled&&this.emit("trigger-action",{action:C,item:h})};x.moveListItem=function(C,h,g,r){var u,p;const k=null==C?void 0:C.layer;if(k){var D=null==(u=this.view)?void 0:null==(p=u.map)?void 0:p.layers;u=h?n.getItemLayers(h):D;D=g?n.getItemLayers(g):D;u&&D&&({operationalItems:p}=this,h=(null==h?void 0:h.children)||p,p=(null==g?void 0:g.children)||p,r=D.length-r,C.parent=g||null,h.includes(C)&&h.remove(C),
u.includes(k)&&u.remove(k),p.includes(C)||p.add(C,r),D.includes(k)||D.add(k,r))}};x._createLayerViewHandles=function(C){const {_handles:h}=this;h.remove("layer-views");this._compileList();C&&h.add(C.on("change",()=>this._compileList()),"layer-views")};x._createMapLayerHandles=function(C){const {_handles:h}=this;h.remove("map-layers");this._compileList();C&&h.add(C.on("change",()=>this._compileList()),"map-layers")};x._createListItem=function(C){const {view:h,listItemCreatedFunction:g}=this;return new m({layer:C,
listItemCreatedFunction:g,view:h})};x._removeAllItems=function(){const {_handles:C,operationalItems:h}=this;h.forEach(g=>{C.remove(`${"children"}-${g.uid}`)});h.removeAll()};x._getViewableLayers=function(C){if(C)return C.filter(h=>"hide"!==n.findLayerListMode(h))};x._watchLayersListMode=function(C){const {_handles:h}=this;h.remove("layer-list-mode");C&&C.forEach(g=>{"listMode"in g&&h.add(J.watch(()=>g.listMode,()=>this._compileList()),"layer-list-mode")})};x._compileList=function(){var C=this.get("view.map.layers");
this._watchLayersListMode(C);(C=this._getViewableLayers(C))&&C.length?(this._createNewItems(C),this._removeItems(C),this._sortItems(C)):this._removeAllItems()};x._createNewItems=function(C){const {operationalItems:h}=this;C.forEach(g=>{h.find(r=>r.layer===g)||h.add(this._createListItem(g))})};x._removeItems=function(C){const {_handles:h,operationalItems:g}=this,r=[];g.forEach(u=>{u&&C&&C.includes(u.layer)||(h.remove(`${"children"}-${u.uid}`),r.push(u))});g.removeMany(r)};x._sortItems=function(C){const {operationalItems:h}=
this;h.sort((g,r)=>{g=C.indexOf(g.layer);r=C.indexOf(r.layer);return g>r?-1:g<r?1:0})};x._listItemCreatedFunctionChanged=function(){this._removeAllItems();this._compileList()};x._viewHandles=function(){const {_handles:C,view:h}=this;C.remove(["map-layers","layer-views","view-layers"]);this._compileList();h&&h.ready&&C.add([J.watch(()=>{var g,r;return null==(g=this.view)?void 0:null==(r=g.map)?void 0:r.allLayers},g=>this._createMapLayerHandles(g),J.initial),J.watch(()=>{var g;return null==(g=this.view)?
void 0:g.allLayerViews},g=>this._createLayerViewHandles(g),J.initial)],"view-layers")};d._createClass(E,[{key:"state",get:function(){const C=this.get("view");return this.get("view.ready")?"ready":C?"loading":"disabled"}}]);return E}(F.EventedAccessor);l.__decorate([I.property()],b.prototype,"listItemCreatedFunction",void 0);l.__decorate([I.property({type:y})],b.prototype,"operationalItems",void 0);l.__decorate([I.property({readOnly:!0})],b.prototype,"state",null);l.__decorate([I.property()],b.prototype,
"view",void 0);return b=l.__decorate([A.subclass("esri.widgets.LayerList.LayerListViewModel")],b)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h){var g;L=F.ofType({key:"type",defaultKeyValue:"button",base:y,typeMap:{button:G,toggle:x,slider:E}});const r=F.ofType(L);b=g=function(u){function p(D){D=u.call(this,D)||this;D.actionsSections=new r;D.actionsOpen=!1;D.children=new (F.ofType(g));D.childrenSortable=!0;D.error=null;D.hidden=!1;D.layer=null;D.layerView=null;D.listItemCreatedFunction=null;D.open=!1;D.panel=null;D.parent=null;D.sortable=!0;D.view=null;D.visible=null;return D}d._inheritsLoose(p,
u);var k=p.prototype;k.initialize=function(){this.handles.add([I.watch(()=>this.layer,D=>this._watchLayerProperties(D),I.initial),I.watch(()=>this.view,D=>this._updateChildren(D),I.initial),I.watch(()=>this.panel,D=>this._setListItemOnPanel(D),I.initial),I.watch(()=>[this.layer,this.view],()=>this._getLayerView(),I.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:this})};k.destroy=function(){this.view=null};k.castPanel=function(D){this.get("panel.open")&&
!D.hasOwnProperty("open")&&(D.open=!0);return D?new C(D):null};k.clone=function(){return new g({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};k._setListItemOnPanel=function(D){D&&(D.listItem=this)};k._updateChildren=function(D){const N=this.children;N&&N.forEach(S=>S.view=D)};k._addChildren=
function(D){this.handles.remove("child-list-mode");this.children.removeAll();if(D){D.forEach(S=>{this.handles.add(I.watch(()=>S.listMode,()=>this._addChildren(D)),"child-list-mode")});var N=D.filter(S=>"hide"!==h.findLayerListMode(S));this.children.addMany(this._makeChildren(N))}};k._watchSublayerChanges=function(D){D&&this.handles.add(D.on("change",()=>{this._addChildren(D)}),"layer")};k._initializeChildLayers=function(D){this._addChildren(D);this._watchSublayerChanges(D)};k._makeChildren=function(D){return D.map(N=>
h.canDisplayLayer(N)?new g({layer:N,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()};k._watchLayerProperties=function(D){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),D))if(this.handles.add(I.watch(()=>D.listMode,()=>this._watchLayerProperties(D)),"layer"),"hide-children"===h.findLayerListMode(D))this.children.removeAll();else{var N=h.getNormalizedChildLayerProperty(D);N&&this.handles.add(I.watch(()=>D[N],()=>
{D.hasOwnProperty(N)&&this._initializeChildLayers(D[N])},I.initial),"layer")}};k._getLayerView=function(){var D=d._asyncToGenerator(function*(){const {layer:N,view:S}=this;if(N&&S)try{const P=yield S.whenLayerView(N);P.layer===this.layer&&this._set("layerView",P)}catch{}});return function(){return D.apply(this,arguments)}}();k._isLayerUpdating=function(D){return D&&"loading"===D.loadStatus};d._createClass(p,[{key:"connectionStatus",get:function(){const {layerView:D}=this;if(D&&"connectionStatus"in
D)return D.connectionStatus}},{key:"incompatible",get:function(){const {layerView:D}=this;return D&&"spatialReferenceSupported"in D?!D.spatialReferenceSupported:!1}},{key:"title",get:function(){const D=this.get("layer.layer");return(!D||D&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(D){void 0===D?this._clearOverride("title"):this._override("title",D)}},{key:"updating",get:function(){const {layerView:D,connectionStatus:N}=this;return N?
!1:D?D.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!h.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return h.findLayerVisibilityMode(this.layer)}}]);return p}(J.IdentifiableMixin(f.HandleOwnerMixin(b)));l.__decorate([m.property({type:r})],b.prototype,"actionsSections",void 0);l.__decorate([m.property()],b.prototype,"actionsOpen",void 0);l.__decorate([m.property({type:F})],b.prototype,"children",
void 0);l.__decorate([m.property()],b.prototype,"childrenSortable",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"connectionStatus",null);l.__decorate([O.aliasOf("layer.loadError?")],b.prototype,"error",void 0);l.__decorate([m.property()],b.prototype,"hidden",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"incompatible",null);l.__decorate([m.property()],b.prototype,"layer",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"layerView",void 0);l.__decorate([m.property()],
b.prototype,"listItemCreatedFunction",void 0);l.__decorate([m.property()],b.prototype,"open",void 0);l.__decorate([m.property({type:C})],b.prototype,"panel",void 0);l.__decorate([A.cast("panel")],b.prototype,"castPanel",null);l.__decorate([m.property()],b.prototype,"parent",void 0);l.__decorate([m.property()],b.prototype,"sortable",void 0);l.__decorate([m.property()],b.prototype,"title",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"updating",null);l.__decorate([m.property({value:null})],
b.prototype,"view",void 0);l.__decorate([O.aliasOf("layer.visible")],b.prototype,"visible",void 0);l.__decorate([m.property({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);l.__decorate([m.property({readOnly:!0})],b.prototype,"visibilityMode",null);return b=g=l.__decorate([n.subclass("esri.widgets.LayerList.ListItem")],b)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(d,l,b,F,f,J,I,O){var L;F=L=function(H){function A(m){m=H.call(this,m)||this;m.displayValueEnabled=!1;m.max=1;m.min=0;m.step=.1;m.type="slider";m.value=null;return m}d._inheritsLoose(A,H);A.prototype.clone=function(){return new L({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return A}(O);l.__decorate([b.property()],
F.prototype,"displayValueEnabled",void 0);l.__decorate([b.property()],F.prototype,"max",void 0);l.__decorate([b.property()],F.prototype,"min",void 0);l.__decorate([b.property()],F.prototype,"step",void 0);l.__decorate([b.property()],F.prototype,"value",void 0);return F=L=l.__decorate([I.subclass("esri.support.Action.ActionSlider")],F)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n,y,G){f=function(E){function x(h,g){h=E.call(this,h,g)||this;h._legend=null;h._handles=new F;h.content=null;h.image=null;h.listItem=null;h.open=!1;h.visible=!0;return h}l._inheritsLoose(x,E);var C=x.prototype;C.initialize=function(){this.own([J.watch(()=>this.content,h=>this._createLegend(h),J.initial)])};C.destroy=function(){const {_legend:h}=this;h&&h.destroy();this._legend=null};C.render=function(){return G.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
C._renderContent=function(h){const {_legend:g,listItem:r}=this;return h?"legend"===h?r&&r.view&&r.layer&&g?G.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:g},g.render()):null:"string"===typeof h?G.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:h,innerHTML:h}):y.isWidget(h)?G.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:h},h.render()):h instanceof HTMLElement?G.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:h,bind:h,afterCreate:this._attachToNode}):null:null};C._renderContents=function(){const {content:h}=this;return Array.isArray(h)?h.map(g=>this._renderContent(g)):this._renderContent(h)};C._getLegendOptions=function(){const {listItem:h}=this;if(!h)return{};const {layer:g,view:r}=h;return g&&r?{view:r,layerInfos:[n.getLegendLayerInfo(g)]}:{}};
C._createLegend=function(h){this._hasLegend(h)&&!this._legend&&(new Promise((g,r)=>d(["../Legend"],u=>g(Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"}))),r))).then(({default:g})=>{const {_handles:r,listItem:u}=this,p=new g(this._getLegendOptions());this._legend=p;this.notifyChange("className");this.notifyChange("title");g=J.watch(()=>{var k,D;return[null==u?void 0:u.view,null==u?void 0:u.layer,null==u?void 0:null==(k=u.layer)?void 0:k.source,null==
u?void 0:null==(D=u.layer)?void 0:D.parent]},()=>this._updateLegend(p),J.initial);r.add(g,"legends");this.scheduleRender()})};C._hasLegend=function(h){return"legend"===h?!0:Array.isArray(h)?h.includes("legend"):!1};C._attachToNode=function(h){h.appendChild(this)};C._updateLegend=function(h){h.set(this._getLegendOptions());this.scheduleRender()};C._getWidget=function(h){return"legend"===h?this._legend:y.isWidget(h)?h:null};C._getFirstWidget=function(){const {content:h}=this;if(Array.isArray(h)){let g=
null;h.some(r=>{(r=this._getWidget(r))&&(g=r);return!!r});return g}return this._getWidget(h)};l._createClass(x,[{key:"className",get:function(){const {image:h}=this,g=this._getFirstWidget();return this._get("className")||!h&&g?g.iconClass:""},set:function(h){void 0===h?this._clearOverride("className"):this._override("className",h)}},{key:"title",get:function(){const h=this._getFirstWidget();return this._get("title")||h?h.label:""},set:function(h){void 0===h?this._clearOverride("title"):this._override("title",
h)}}]);return x}(f.IdentifiableMixin(m));b.__decorate([I.property()],f.prototype,"className",null);b.__decorate([I.property()],f.prototype,"content",void 0);b.__decorate([I.property()],f.prototype,"image",void 0);b.__decorate([I.property()],f.prototype,"listItem",void 0);b.__decorate([I.property()],f.prototype,"title",null);b.__decorate([I.property()],f.prototype,"open",void 0);b.__decorate([I.property()],f.prototype,"visible",void 0);return f=b.__decorate([A.subclass("esri.widgets.LayerList.ListItemPanel")],
f)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],function(d,l,b){const F=I=>f(I)||J(I),f=I=>{if(!("type"in I))return!1;switch(I.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":return!0;default:return!1}},J=I=>{const O=b.getNormalizedChildLayerProperty(I);if(I.hasOwnProperty(O)&&l.isSome(I[O]))for(const L of I[O])if(F(L))return!0;return!1};d.isValidSnappingLayer=
F;d.isValidSnappingLayerGroup=J;d.isValidSnappingLayerSource=f;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(d,l,b,F,f,J,I,O,L,H,A,m,n){var y;d.SnappingListItem=y=function(G){function E(C){C=G.call(this,C)||this;C.children=new F;return C}l._inheritsLoose(E,G);var x=E.prototype;x._initializeChildLayers=function(C){C=C.filter(n.isValidSnappingLayer);G.prototype._initializeChildLayers.call(this,C)};x._makeChildren=function(C){return C.map(h=>m.canDisplayLayer(h)?new y({layer:h,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).reverse()};l._createClass(E,[{key:"enabled",
get:function(){return f.isSome(this.featureSource)?this.featureSource.enabled:!1}},{key:"featureSource",get:function(){const {layer:C,getFeatureSnappingSources:h}=this;return h().find(g=>g.layer===C)}}]);return E}(A);b.__decorate([J.property()],d.SnappingListItem.prototype,"children",void 0);b.__decorate([J.property()],d.SnappingListItem.prototype,"enabled",null);b.__decorate([J.property({constructOnly:!0})],d.SnappingListItem.prototype,"getFeatureSnappingSources",void 0);b.__decorate([J.property()],
d.SnappingListItem.prototype,"featureSource",null);b.__decorate([J.property()],d.SnappingListItem.prototype,"parent",void 0);d.SnappingListItem=y=b.__decorate([H.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],d.SnappingListItem);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/HandleOwner ../core/Logger ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ../views/interactive/sketch/SketchLabelOptions ../views/interactive/sketch/SketchTooltipOptions ../views/interactive/snapping/SnappingOptions ./Attachments ./FeatureForm ./FeatureTemplates ./Spinner ./Widget ./Editor/deprecationUtils ./Editor/EditorViewModel ./FeatureTemplates/ItemList ./support/Heading ./support/SnappingControls ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),function(d,
l,b,F,f,J,I,O,L,H,A,m,n,y,G,E,x,C,h,g,r,u,p,k,D,N,S,P,v,K,e,q,w,R){function Q(U){U.focus()}const c=w.classes("esri-editor__scroller","esri-editor__panel-content"),z={undoRedoButtons:!1},B=J.getLogger("esri.widgets.Editor");F=function(U){function Y(ca,na){var ba=U.call(this,ca,na)||this;ba._candidateCommitted=!1;ba._featureForm=new g;ba._stateStack=[];ba._attachments=new h({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});
ba._featureTemplates=new r({enableListScroll:!1});ba._filterText="";ba._prompt=null;ba._spinner=new u;ba._snappingPopover=null;ba.activeWorkflow=null;ba.allowedWorkflows=null;ba.useDeprecatedCreateWorkflow=!1;ba.headingLevel=4;ba.iconClass="esri-icon-edit";ba.label=void 0;ba.labelOptions=new E;ba.layerInfos=null;ba.messages=null;ba.messagesCommon=null;ba.messagesTemplates=null;ba.snappingOptions=new C;ba.tooltipOptions=new x;ba.supportingWidgetDefaults=null;ba.view=null;ba.viewModel=new D;ba.visibleElements=
{...z};ba._setCandidateFeature=(ra,ua=!1)=>{if(!ba._candidateCommitted){var Ba=ba._assertActiveUpdateWorkflow();Ba.data.edits.feature=ra;ua&&(Ba.next(),ba._candidateCommitted=!0)}};ba._handleSave=ba._handleSave.bind(l._assertThisInitialized(ba));ba._handleBack=ba._handleBack.bind(l._assertThisInitialized(ba));ba._handleDone=ba._handleDone.bind(l._assertThisInitialized(ba));ba._handleDelete=ba._handleDelete.bind(l._assertThisInitialized(ba));ba._handleAdd=ba._handleAdd.bind(l._assertThisInitialized(ba));
ba._handleEdit=ba._handleEdit.bind(l._assertThisInitialized(ba));ba._handleAttachmentAdd=ba._handleAttachmentAdd.bind(l._assertThisInitialized(ba));ba._handleAttachmentUpdate=ba._handleAttachmentUpdate.bind(l._assertThisInitialized(ba));ba._handleAttachmentDelete=ba._handleAttachmentDelete.bind(l._assertThisInitialized(ba));ba.EditorPanel=ba.EditorPanel.bind(l._assertThisInitialized(ba));return ba}l._inheritsLoose(Y,U);var aa=Y.prototype;aa.initialize=function(){const {view:ca,snappingOptions:na}=
this;this._snappingControls=new P({snappingOptions:na,view:ca,visibleElements:{header:!1}});this.own([O.watch(()=>this.headingLevel,ba=>{this._featureForm.headingLevel=S.incrementHeadingLevel(ba);this._featureTemplates.headingLevel=S.incrementHeadingLevel(ba)},O.initial),this.viewModel.featureTemplatesViewModel.on("select",({item:ba})=>this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(ba):this.startCreateFeaturesWorkflowAtFeatureCreation(ba)),O.watch(()=>this.viewModel.state,
(ba,ra)=>{ba=this._stateStack.indexOf(ba);-1===ba?this._stateStack.push(ra):this._stateStack.splice(ba)}),O.watch(()=>this.viewModel,ba=>{this._featureForm.viewModel=ba?ba.featureFormViewModel:null;this._attachments.viewModel=ba?ba.attachmentsViewModel:null;this._featureTemplates.viewModel=ba?ba.featureTemplatesViewModel:null;this._spinner.viewModel=ba?ba.spinnerViewModel:null},O.initial),O.watch(()=>this.view,(ba,ra)=>{const ua=`editor-${this.id}-spinner`;ra&&ra.ui.remove(this._spinner,ua);ba&&ba.ui.add(this._spinner,
{key:ua,position:"manual"})},O.initial),O.on(()=>{var ba;return null==(ba=this.viewModel)?void 0:ba.sketchViewModel},"create",()=>{this.scheduleRender()}),O.on(()=>{var ba;return null==(ba=this.viewModel)?void 0:ba.activeWorkflow},"cancel-request",({controller:ba})=>{const {messages:ra,messagesCommon:ua}=this;this._prompt={title:ra.cancelRequestTitle,message:ra.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:ua.form.yes,action:()=>{ba.allow();this._prompt=null}},secondary:{label:ua.form.no,
action:()=>{ba.deny();return this._prompt=null}}}};this.scheduleRender()}),O.watch(()=>this.supportingWidgetDefaults,ba=>{ba&&(this._featureForm.set(ba.featureForm),this._attachments.set(ba.attachments),this._featureTemplates.set(ba.featureTemplates),this.viewModel.sketchViewModel.set(ba.sketch))},O.initial),O.watch(()=>{var ba;return null==(ba=this._attachments)?void 0:ba.error},ba=>{if(ba){var {messages:ra,messagesCommon:ua}=this;this._prompt={title:ra.errorWarningTitle,message:ba.message,context:"warning",
actions:{primary:{label:ua.form.ok,action:()=>{this._prompt=null}}}}}}),O.watch(()=>{var ba;return null==(ba=this.viewModel)?void 0:ba.failures},ba=>{if(ba){var {messages:ra}=this,[{error:ua,retry:Ba,cancel:ka}]=ba;this._prompt={title:ra.errorWarningTitle,message:R.substitute(ra.errorWarningMessageTemplate,{errorMessage:ua.message}),context:"warning",actions:{primary:{label:ra.retry,action:()=>{Ba();this._prompt=null}},secondary:{label:ra.ignore,action:()=>{ka();return this._prompt=null}}}}}}),O.watch(()=>
{var ba;return null==(ba=this.viewModel)?void 0:ba.state},ba=>{"awaiting-feature-to-update"===ba&&(this._filterText="");"awaiting-update-feature-candidate"===ba&&(this._candidateCommitted=!1)}),O.watch(()=>{var ba,ra;return[null==(ba=this._attachments)?void 0:ba.selectedFile,null==(ra=this._attachments)?void 0:ra.submitting]},()=>this.scheduleRender()),O.when(()=>{var ba;return!(null!=(ba=this.viewModel)&&ba.activeWorkflow)},()=>this._featureTemplates.filterText=""),O.on(()=>this.view,"key-down",
ba=>{var ra;"Escape"===ba.key&&null!=(ra=this.viewModel)&&ra.activeWorkflow&&this._handleBack()})])};aa.destroy=function(){this._attachments.destroy();this._featureForm.destroy();this._featureTemplates.destroy();this._snappingControls.destroy()};aa.loadDependencies=function(){return Promise.all([new Promise((ca,na)=>d(["../chunks/calcite-action"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-action-menu"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-button"],ca,na)),new Promise((ca,na)=>
d(["../chunks/calcite-flow"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-icon"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-loader"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-panel"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-popover"],ca,na)),new Promise((ca,na)=>d(["../chunks/calcite-scrim"],ca,na))])};aa.castVisibleElements=function(ca){return{...z,...ca}};aa.startCreateWorkflowAtFeatureTypeSelection=function(){k.workflowDeprecation(B,"startCreateWorkflowAtFeatureTypeSelection",
"startCreateFeaturesWorkflowAtFeatureTypeSelection");return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};aa.startCreateFeaturesWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()};aa.startCreateWorkflowAtFeatureCreation=function(ca){k.workflowDeprecation(B,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation");return this.viewModel.startCreateWorkflowAtFeatureCreation(ca)};aa.startCreateFeaturesWorkflowAtFeatureCreation=
function(ca){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(ca)};aa.startCreateWorkflowAtFeatureEdit=function(ca){k.workflowDeprecation(B,"startCreateWorkflowAtFeatureEdit");return this.viewModel.startCreateWorkflowAtFeatureEdit(ca)};aa.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()};aa.startUpdateWorkflowAtMultipleFeatureSelection=function(ca){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(ca)};
aa.startUpdateWorkflowAtFeatureEdit=function(ca){return this.viewModel.startUpdateWorkflowAtFeatureEdit(ca)};aa.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()};aa.cancelWorkflow=function(ca){return this.viewModel.cancelWorkflow(ca)};aa.render=function(){const {_attachments:ca,_prompt:na,viewModel:ba}=this;if(!ba)return q.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"});const {state:ra}=ba,ua=I.isSome(na)?q.tsx("calcite-scrim",null,this.renderPrompt(na)):
null;return q.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"},ba.syncing||ca.submitting?this.renderProgressBar():null,q.tsx("calcite-flow",null,this._stateStack.map(Ba=>this.renderState(Ba)),this.renderState(ra)),ua)};aa.renderState=function(ca){switch(ca){case "ready":return this.renderLanding(ca);case "awaiting-feature-creation-info":return this.renderTemplates(ca);case "creating-features":case "editing-new-feature":case "editing-existing-feature":return this.renderAttributeEditing(ca);
case "awaiting-feature-to-update":return this.renderFeatureUpdating(ca);case "awaiting-update-feature-candidate":return this.renderFeatureList(ca);case "awaiting-feature-to-create":return this.renderFeatureCreation(ca);case "adding-attachment":return this.renderAttachmentAdding(ca);case "editing-attachment":return this.renderAttachmentEditing(ca)}return q.tsx("div",null)};aa.isPanelActive=function(ca){return this.viewModel.state===ca};aa.renderTemplates=function(ca){const {EditorPanel:na,headingLevel:ba,
messages:ra,messagesCommon:ua,_handleBack:Ba,_snappingControls:ka,viewModel:{sketchViewModel:ta}}=this;return q.tsx(na,{active:this.isPanelActive(ca),key:"templates-panel",handleBack:Ba,heading:ra.selectTemplate,headingLevel:ba,messages:ra,messagesCommon:ua,sketchViewModel:ta,snappingControls:ka},q.tsx("div",{class:c},this._featureTemplates.render()))};aa.renderAttributeEditing=function(ca){const {activeWorkflow:na,EditorPanel:ba,messages:ra,messagesCommon:ua,headingLevel:Ba,_handleBack:ka,_snappingControls:ta,
viewModel:ma}=this,{sketchViewModel:la}=ma;var pa=ma.featureFormViewModel;if("create-features"===na.type&&1>na.pendingFeatures.length)return this.renderFeatureCreation(ca);var sa="update"===na.type&&!na.data.edits.modified||ma.syncing;const da="update"===na.type?ra.editFeature:ra.createFeatures,ea="update"===na.type?ua.update:ua.create,ha="create-features"===na.type&&"create-new"===na.createFeatureState,ja="update"===na.type&&na.data.editableItem.supports.includes("delete"),va="update"===na.type&&
na.data.editableItem.hasAttachments;sa=[{label:"create-features"===na.type&&1<na.numPendingFeatures?R.substitute(ra.createFeaturesTemplate,{numFeatures:na.numPendingFeatures}):ea,type:"primary",disabled:sa,clickHandler:this._handleSave,width:ja?"half":"full"}];ja&&sa.push({label:ua.delete,type:"tertiary",clickHandler:this._handleDelete,appearance:"outline",width:"half"});pa=pa.inputFields.every(qa=>!qa.visible)?this.renderMessage(R.substitute(ra.clickToFinishTemplate,{button:ea})):q.tsx("div",{class:"esri-editor__panel-content__section"},
q.tsx("div",{class:"esri-editor__panel-content__section__group"},this._featureForm.render(),va?q.tsx("div",{key:"attachments"},q.tsx("div",null,ra.attachments),this._attachments.render()):null));return q.tsx(ba,{active:this.isPanelActive(ca),key:"attribute-editing-panel",heading:da,headingLevel:Ba,handleBack:ka,messages:ra,messagesCommon:ua,sketchViewModel:la,snappingControls:ta},q.tsx("div",{class:c},pa,ha?q.tsx("calcite-scrim",null):null),this.renderFooterActions(sa))};aa.renderAttachmentAdding=
function(ca){const {_attachments:na,EditorPanel:ba,_handleBack:ra,headingLevel:ua,messages:Ba,messagesCommon:ka,_snappingControls:ta,viewModel:{sketchViewModel:ma}}=this,la=[{label:na.submitting?ka.cancel:ka.add,disabled:na.submitting||!na.selectedFile,type:"primary",clickHandler:this._handleAttachmentAdd,width:"full"}];return q.tsx(ba,{active:this.isPanelActive(ca),key:"attachment-adding-panel",heading:Ba.addAttachment,headingLevel:ua,handleBack:ra,messages:Ba,messagesCommon:ka,sketchViewModel:ma,
snappingControls:ta},q.tsx("div",{class:c},na.render()),this.renderFooterActions(la))};aa.renderAttachmentEditing=function(ca){const {_attachments:na,EditorPanel:ba,_handleBack:ra,headingLevel:ua,messages:Ba,messagesCommon:ka,_snappingControls:ta,viewModel:{sketchViewModel:ma}}=this,la=[{label:ka.update,disabled:na.submitting||!na.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate,width:"half"},{label:ka.delete,disabled:na.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete,
width:"half",appearance:"outline"}];return q.tsx(ba,{active:this.isPanelActive(ca),key:"attachment-editing-panel",heading:Ba.editAttachment,headingLevel:ua,handleBack:ra,messages:Ba,messagesCommon:ka,sketchViewModel:ma,snappingControls:ta},q.tsx("div",{class:c},na.render()),this.renderFooterActions(la))};aa.renderFeatureUpdating=function(ca){const {EditorPanel:na,_handleBack:ba,headingLevel:ra,messages:ua,messagesCommon:Ba,_snappingControls:ka,viewModel:{sketchViewModel:ta}}=this;return q.tsx(na,
{active:this.isPanelActive(ca),key:"feature-updating-panel",heading:ua.selectFeature,headingLevel:ra,handleBack:ba,messages:ua,messagesCommon:Ba,sketchViewModel:ta,snappingControls:ka},q.tsx("div",{class:c},this.renderMessage(ua.selectFeatureToEdit)))};aa.renderMessage=function(ca){return q.tsx("div",{class:"esri-editor__panel-content__message"},ca)};aa.renderFeatureCreation=function(ca){const {EditorPanel:na,_handleBack:ba,headingLevel:ra,messages:ua,messagesCommon:Ba,_snappingControls:ka,viewModel:ta}=
this,{sketchViewModel:ma}=ta;var la=ta.sketchViewModel,pa=this._assertActiveCreateWorkflow().data.creationInfo.layer;la=la.canUndo()&&la.createGraphic?la.createGraphic:null;pa=this._getSketchingTip(pa.geometryType,la);return q.tsx(na,{active:this.isPanelActive(ca),key:"feature-creation-panel",heading:ua.placeFeature,headingLevel:ra,handleBack:ba,messages:ua,messagesCommon:Ba,sketchViewModel:ma,snappingControls:ka},q.tsx("div",{class:c},this.renderMessage(pa)))};aa.renderFooterActions=function(ca){return ca.map(({type:na,
disabled:ba,class:ra,...ua},Ba)=>this.renderButton({class:this.classes("esri-editor__control-button","secondary"===na?"esri-button--secondary":"tertiary"===na?"esri-button--tertiary":null,ba?"esri-button--disabled":null,ra),disabled:null!=ba?ba:!1,key:Ba,slot:"footer-actions",...ua}))};aa.renderPrompt=function({title:ca,message:na,context:ba,actions:ra}){const ua=!!ra.secondary,Ba=q.tsx("calcite-button",{appearance:"solid",color:"danger"===ba?"red":"blue",width:ua?"half":"full",onclick:ra.primary.action,
key:"prompt-primary-button",afterCreate:Q},ra.primary.label);ra=ua?q.tsx("calcite-button",{appearance:"clear",color:"danger"===ba?"red":"blue",width:"half",onclick:ra.secondary.action,key:"prompt-secondary-button"},ra.secondary.label):null;return q.tsx("div",{class:`${"esri-editor__prompt"}--${ba}`},q.tsx("div",{class:"esri-editor__prompt__header"},q.tsx("calcite-icon",{icon:"exclamation-mark-triangle"}),q.tsx(S.Heading,{class:"esri-editor__prompt__header__heading",level:this.headingLevel},ca)),q.tsx("div",
{class:"esri-editor__prompt__message"},na),q.tsx("div",{class:"esri-editor__prompt__divider"}),q.tsx("div",{class:"esri-editor__prompt__actions"},ra,Ba))};aa.renderProgressBar=function(){return q.tsx("div",{class:this.classes("esri-editor__progress-bar"),key:"progress-bar"})};aa.renderButton=function(ca){const {disabled:na,class:ba,key:ra,clickHandler:ua,label:Ba,...ka}=ca;return q.tsx("calcite-button",{class:ba,disabled:na,key:ra,onclick:ua,type:"button",...ka},Ba)};aa.renderLanding=function(ca){const {EditorPanel:na,
headingLevel:ba,messages:ra,messagesCommon:ua,_snappingControls:Ba,viewModel:{sketchViewModel:ka}}=this;return q.tsx(na,{active:this.isPanelActive(ca),key:"landing-panel",heading:ra.widgetLabel,headingLevel:ba,showBackButton:!1,messages:ra,messagesCommon:ua,sketchViewModel:ka,snappingControls:Ba},q.tsx("div",{class:c},q.tsx("div",{key:"edit-actions",class:"esri-editor__panel-content__section"},this.renderUpdateActions()),q.tsx("div",{key:"create-actions",class:"esri-editor__panel-content__section"},
this.renderCreateActions())))};aa.renderUpdateActions=function(){const {messages:ca,messagesCommon:na}=this;return q.tsx("div",null,q.tsx(S.Heading,{level:S.incrementHeadingLevel(this.headingLevel)},ca.editFeatures),q.tsx("div",{class:"esri-editor__update-features-action-buttons"},q.tsx("calcite-action",{text:na.select,textEnabled:!0,icon:"cursor",alignment:"start",class:"esri-editor__update-features-action-buttons--button",onclick:this._handleEdit})))};aa.renderCreateActions=function(){const {_featureTemplates:ca,
headingLevel:na,messages:ba}=this;if(0!==ca.viewModel.numberOfFeatureTemplates)return q.tsx("div",null,q.tsx(S.Heading,{level:S.incrementHeadingLevel(na)},ba.createFeatures),q.tsx("div",{key:"templates",class:"esri-editor__feature-templates-container"},ca.render()))};aa.renderFeatureList=function(ca){const {EditorPanel:na,_handleBack:ba,headingLevel:ra,messages:ua,messagesCommon:Ba,messagesTemplates:ka,_snappingControls:ta,viewModel:{editableItems:ma,sketchViewModel:la}}=this;var pa=this._assertActiveUpdateWorkflow().data.candidates;
const sa=R.substitute(ua.multipleFeaturesTemplate,{total:pa.length}),da=new Map;let ea=0;pa.map(ja=>({label:this._getLabel(ja),id:ja.attributes[ja.layer.objectIdField],data:ja})).filter(ja=>{const {label:va,data:qa}=ja;ja=this._filterText.toLowerCase();const {title:wa}=qa.layer;return this.viewModel.editableItems.find(Ca=>Ca.layer===qa.layer).supports.includes("update")&&(!ja||va.toLowerCase().includes(ja)||wa.toLowerCase().includes(ja))}).forEach(ja=>{ea++;const va=ja.data.layer;da.has(va)?da.get(va).items.push(ja):
da.set(va,{id:`${va.id}`,label:va.title,items:[ja]})});pa=ma.filter(({layer:ja})=>da.has(ja)).map(({layer:ja})=>da.get(ja)).toArray();const ha=10<ea||0<this._filterText.length;return q.tsx(na,{active:this.isPanelActive(ca),key:"feature-list",heading:sa,headingLevel:ra,handleBack:ba,messages:ua,messagesCommon:Ba,sketchViewModel:la,snappingControls:ta},q.tsx("div",{class:c},N.ItemList({id:this.id,enableListScroll:!1,filterEnabled:ha,filterText:this._filterText,items:pa,messages:{filterPlaceholder:ka.filterPlaceholder,
noItems:ka.noItems,noMatches:ka.noMatches},onItemMouseEnter:({data:ja})=>this._setCandidateFeature(ja),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:ja})=>this._setCandidateFeature(ja,!0),onFilterChange:ja=>this._filterText=ja})))};aa.EditorPanel=function(ca,...na){const {active:ba,handleBack:ra,heading:ua,headingLevel:Ba,key:ka,messages:ta,messagesCommon:ma,showBackButton:la,sketchViewModel:pa,snappingControls:sa}=ca;return q.tsx("calcite-panel",{bind:this,key:ka,heading:ua,
headingLevel:Ba,showBackButton:null!=la?la:!0,beforeBack:null!=ra?ra:null,onCalcitePanelScroll:this._onSnappingPopoverPanelScroll},q.tsx("div",{class:"esri-editor__panel-toolbar"},q.tsx("calcite-popover",{autoClose:ba,afterCreate:this._afterSnappingPopoverCreated,afterUpdate:this._afterSnappingPopoverUpdated,bind:this,label:ta.snappingSettings,heading:ta.snappingSettings,"reference-element":`${ka}__snappingButton`,"overlay-positioning":"fixed",placement:"bottom"},q.tsx("div",{class:"esri-editor__snapping-controls-popover"},
sa.render())),q.tsx("calcite-button",{id:`${ka}__snappingButton`,text:ta.snapping,appearance:"transparent",color:"neutral",alignment:"icon-end-space-between","icon-start":"vertex-gps","icon-end":"caret-down",width:"full",class:"esri-editor__panel-toolbar__snapping-button"},ta.snapping),this.visibleElements.undoRedoButtons?[q.tsx("calcite-button",{key:"undo-button",text:ma.undo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"undo",scale:"l",disabled:!pa.canUndo(),onclick:pa.undo.bind(pa)}),
q.tsx("calcite-button",{key:"redo-button",text:ma.redo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"redo",scale:"l",disabled:!pa.canRedo(),onclick:pa.redo.bind(pa)})]:null),na)};aa._onSnappingPopoverPanelScroll=function(){var ca;null!=(ca=this._snappingPopover)&&ca.open&&this._snappingPopover.toggle()};aa._afterSnappingPopoverCreated=function(ca){this._snappingPopover=ca};aa._afterSnappingPopoverUpdated=function(ca){this._snappingPopover=ca};aa._getSketchingTip=function(ca,
na){const {messages:ba}=this;if("point"===ca)return ba.tips.clickToAddPoint;if("polygon"===ca||"polyline"===ca){if(!na)return ba.tips.clickToStart;[na]=na.geometry["polygon"===ca?"rings":"paths"];return"polygon"===ca&&4>na?ba.tips.clickToContinue:ba.tips.clickToContinueThenDoubleClickToEnd}return ba.tips.clickToAddFeature};aa._getLabel=function(ca){var na=ca.layer;if(!na)return null;const {objectIdField:ba}=na;({attributes:ca}=ca);return(na=G.getDisplayFieldName(na))&&ca[na]&&`${ca[na]}`||R.substitute(this.messages.untitledFeatureTemplate,
{id:ca[ba]})};aa._handleDelete=function(){const {messages:ca,messagesCommon:na}=this;this._prompt={title:ca.deleteWarningTitle,message:ca.deleteWarningMessage,context:"danger",actions:{primary:{label:na.delete,action:()=>{this.viewModel.deleteFeatureFromWorkflow();this._prompt=null}},secondary:{label:ca.keepFeature,action:()=>this._prompt=null}}}};aa._handleSave=function(){const {featureFormViewModel:ca}=this.viewModel;ca.submit();!ca.submittable||0<ca.validateContingencyConstraints(ca.getValues(),
{includeIncompleteViolations:!0}).length||this.viewModel.activeWorkflow.commit()};aa._handleAttachmentAdd=function(){const {_attachments:ca}=this,{activeWorkflow:na}=this.viewModel;ca.addAttachment().then(()=>na.previous())};aa._handleAttachmentUpdate=function(){const {_attachments:ca}=this,{activeWorkflow:na}=this.viewModel;ca.updateAttachment().then(()=>na.previous())};aa._handleAttachmentDelete=function(){const {messages:ca,messagesCommon:na}=this;this._prompt={title:ca.deleteAttachmentWarningTitle,
message:ca.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:na.delete,action:()=>{const {_attachments:ba}=this,{activeWorkflow:ra}=this.viewModel;ba.deleteAttachment(ba.viewModel.activeAttachmentInfo).then(()=>{ra.previous();this._prompt=null})}},secondary:{label:ca.keepAttachment,action:()=>this._prompt=null}}}};aa._handleAdd=function(){};aa._handleEdit=function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()};aa._handleDone=function(){this.viewModel.cancelWorkflow({force:!0})};
aa._handleBack=function(){var ca=l._asyncToGenerator(function*(){const {messages:na}=this,ba=this.activeWorkflow,ra=()=>{ba.hasPreviousStep?ba.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};if("create"===ba.type||"create-features"===ba.type&&0<ba.numPendingFeatures||"editing-existing-feature"===ba.stepId&&ba.data.edits.modified){const {type:ua}=ba;this._prompt={title:"create"===ua?na.cancelAddTitle:na.cancelEditTitle,message:"create"===ua?na.cancelAddWarningMessage:na.cancelEditWarningMessage,
context:"danger",actions:{primary:{label:"create"===ua?na.discardFeature:na.discardEdits,action:()=>{ra();this._prompt=null}},secondary:{label:"create"===ua?na.continueAdding:na.continueEditing,action:()=>this._prompt=null}}};this.scheduleRender();throw Error();}ra()});return function(){return ca.apply(this,arguments)}}();aa._assertActiveCreateWorkflow=function(){const {type:ca}=this.viewModel.activeWorkflow;if("create"===ca||"create-features"===ca)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be instance of CreateWorkflow or CreateFeaturesWorkflow");
};aa._assertActiveUpdateWorkflow=function(){if("update"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be an UpdateWorkflow");};return Y}(f.HandleOwnerMixin(p));b.__decorate([n.property()],F.prototype,"_attachments",void 0);b.__decorate([L.aliasOf("viewModel.activeWorkflow")],F.prototype,"activeWorkflow",void 0);b.__decorate([L.aliasOf("viewModel.allowedWorkflows")],F.prototype,"allowedWorkflows",void 0);b.__decorate([n.property()],
F.prototype,"useDeprecatedCreateWorkflow",void 0);b.__decorate([n.property()],F.prototype,"headingLevel",void 0);b.__decorate([n.property()],F.prototype,"iconClass",void 0);b.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0);b.__decorate([L.aliasOf("viewModel.labelOptions")],F.prototype,"labelOptions",void 0);b.__decorate([L.aliasOf("viewModel.layerInfos")],F.prototype,"layerInfos",void 0);b.__decorate([n.property(),K.messageBundle("esri/widgets/Editor/t9n/Editor")],
F.prototype,"messages",void 0);b.__decorate([n.property(),K.messageBundle("esri/t9n/common")],F.prototype,"messagesCommon",void 0);b.__decorate([n.property(),K.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],F.prototype,"messagesTemplates",void 0);b.__decorate([L.aliasOf("viewModel.snappingOptions")],F.prototype,"snappingOptions",void 0);b.__decorate([L.aliasOf("viewModel.tooltipOptions")],F.prototype,"tooltipOptions",void 0);b.__decorate([n.property()],F.prototype,"supportingWidgetDefaults",
void 0);b.__decorate([L.aliasOf("viewModel.view")],F.prototype,"view",void 0);b.__decorate([n.property(),e.vmEvent(["workflow-cancel","workflow-commit"])],F.prototype,"viewModel",void 0);b.__decorate([n.property()],F.prototype,"visibleElements",void 0);b.__decorate([m.cast("visibleElements")],F.prototype,"castVisibleElements",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleDelete",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleAttachmentAdd",null);b.__decorate([v.accessibleHandler()],
F.prototype,"_handleAttachmentUpdate",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleAttachmentDelete",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleAdd",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleEdit",null);b.__decorate([v.accessibleHandler()],F.prototype,"_handleDone",null);return F=b.__decorate([y.subclass("esri.widgets.Editor")],F)});