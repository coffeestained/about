// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Histogram ./Slider ./Widget ./HistogramRangeSlider/HistogramRangeSliderViewModel ./smartMapping/support/utils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),function(x,
e,q,r,l,d,F,v,n,y,z,A,B,C,D,G,E,t){d=function(w){function u(a,g){a=w.call(this,a,g)||this;a._barElements=[];a._histogram=null;a._slider=null;a.average=null;a.barCreatedFunction=null;a.bins=null;a.dataLines=null;a.dataLineCreatedFunction=null;a.excludedBarColor=new q("#d7e5f0");a.hasTimeData=null;a.includedBarColor=new q("#599dd4");a.label=void 0;a.labelFormatFunction=null;a.max=null;a.messages=null;a.min=null;a.precision=4;a.rangeType=null;a.standardDeviation=null;a.standardDeviationCount=1;a.values=
null;a.viewModel=new C;return a}x._inheritsLoose(u,w);var h=u.prototype;h.initialize=function(){const {average:a,bins:g,hasTimeData:p,max:b,min:k,viewModel:f}=this;this._updateBarFill=this._updateBarFill.bind(this);this._histogram=new z({average:a,bins:g,barCreatedFunction:(c,m)=>{0===c&&(this._barElements=[]);this._barElements.push(m);this._updateBarFill(c,m);this.barCreatedFunction&&this.barCreatedFunction(c,m)},dataLines:this._getDataLines(),dataLineCreatedFunction:(c,m)=>{this.dataLineCreatedFunction&&
this.dataLineCreatedFunction(c,m)},labelFormatFunction:this.labelFormatFunction,layout:"horizontal",max:b,min:k});this._slider=new A({labelFormatFunction:this.labelFormatFunction,layout:"horizontal",visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!p,viewModel:f});this.own([this._slider.on(["max-change","min-change"],c=>this.emit(c.type,c)),this._slider.on(["segment-drag","thumb-change","thumb-drag"],c=>{this._updateBarFills();this.emit(c.type,c)}),r.watch(()=>this.bins,c=>{if(c&&
this._histogram.bins){const m=this._histogram.bins.length-c.length;this._barElements.splice(-m,m)}else this._barElements=[];this._histogram.set({bins:c});this._updateBarFills();this.scheduleRender()}),r.watch(()=>[this.max,this.min,this.rangeType,this.values],([c,m])=>{this._histogram.set({max:c,min:m});this._updateBarFills();this.scheduleRender()}),r.watch(()=>[this.average,this.dataLines,this.standardDeviation,this.standardDeviationCount],([c])=>{this._histogram.set({average:c,dataLines:this._getDataLines()})}),
r.watch(()=>this.labelFormatFunction,c=>{this._histogram.set({labelFormatFunction:c})}),r.watch(()=>this.hasTimeData,c=>{this._slider.set({rangeLabelInputsEnabled:!c})})])};h.generateWhereClause=function(a){return this.viewModel.generateWhereClause(a)};h.render=function(){const {rangeType:a,viewModel:g,label:p}=this,b=this.classes("esri-histogram-range-slider","esri-widget",`${"esri-histogram-range-slider__range-type--"}${a}`,"disabled"===g.state?"esri-disabled":null);return t.tsx("div",{"aria-label":p,
class:b},"disabled"===g.state?null:this.renderContent())};h.renderContent=function(){return[this.renderHistogram(),this.renderSlider()]};h.renderSlider=function(){return t.tsx("div",{key:`${this.id}-slider-container`,class:"esri-histogram-range-slider__slider-container"},this._slider.render())};h.renderHistogram=function(){return t.tsx("div",{class:"esri-histogram-range-slider__histogram-container"},this._histogram.render())};h._getDataLines=function(){return[...this._getStandardDeviationDataLines(),
...this.dataLines||[]]};h._getStandardDeviationDataLines=function(){const {average:a,standardDeviation:g,standardDeviationCount:p}=this;return D.getDeviationValues(g,a,p).map(b=>({value:b}))};h._updateBarFills=function(){this._barElements.forEach((a,g)=>this._updateBarFill(g,a))};h._updateBarFill=function(a,g){g.setAttribute("fill",this._getFillForBar(a).toHex())};h._getFillForBar=function(a){const {bins:g,rangeType:p,values:b}=this;if(!(g&&g.length&&p&&b.length))return null;a=g[a];if(!a)return null;
const {maxValue:k,minValue:f}=a;a=k-f;const c=b[0]>f&&b[0]<k;switch(p){case "equal":case "not-equal":return this.includedBarColor;case "less-than":case "at-most":return c?this._getBlendedColor((b[0]-f)/a):k<=b[0]?this.includedBarColor:this.excludedBarColor;case "greater-than":case "at-least":return c?this._getBlendedColor(1-(b[0]-f)/a):f>=b[0]?this.includedBarColor:this.excludedBarColor;case "between":if(2===b.length)return b[0]>f&&b[0]<k?this._getBlendedColor(1-(b[0]-f)/a):b[1]>f&&b[1]<k?this._getBlendedColor((b[1]-
f)/a):f>=b[0]&&k<=b[1]?this.includedBarColor:this.excludedBarColor;case "not-between":if(2===b.length)return b[0]>f&&b[0]<k?this._getBlendedColor((b[0]-f)/a):b[1]>f&&b[1]<k?this._getBlendedColor(1-(b[1]-f)/a):f>b[0]&&k<b[1]?this.excludedBarColor:this.includedBarColor;default:return this.includedBarColor}};h._getBlendedColor=function(a){return q.blendColors(this.excludedBarColor,this.includedBarColor,a)};return u}(B);e.__decorate([l.aliasOf("viewModel.average")],d.prototype,"average",void 0);e.__decorate([n.property()],
d.prototype,"barCreatedFunction",void 0);e.__decorate([l.aliasOf("viewModel.bins")],d.prototype,"bins",void 0);e.__decorate([n.property()],d.prototype,"dataLines",void 0);e.__decorate([n.property()],d.prototype,"dataLineCreatedFunction",void 0);e.__decorate([n.property({type:q,json:{type:[v.Integer],write:!0}})],d.prototype,"excludedBarColor",void 0);e.__decorate([l.aliasOf("viewModel.hasTimeData")],d.prototype,"hasTimeData",void 0);e.__decorate([n.property({type:q,json:{type:[v.Integer],write:!0}})],
d.prototype,"includedBarColor",void 0);e.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],d.prototype,"label",void 0);e.__decorate([l.aliasOf("viewModel.labelFormatFunction")],d.prototype,"labelFormatFunction",void 0);e.__decorate([l.aliasOf("viewModel.max")],d.prototype,"max",void 0);e.__decorate([n.property(),E.messageBundle("esri/widgets/HistogramRangeSlider/t9n/HistogramRangeSlider")],d.prototype,"messages",void 0);e.__decorate([l.aliasOf("viewModel.min")],d.prototype,
"min",void 0);e.__decorate([l.aliasOf("viewModel.precision")],d.prototype,"precision",void 0);e.__decorate([l.aliasOf("viewModel.rangeType")],d.prototype,"rangeType",void 0);e.__decorate([l.aliasOf("viewModel.standardDeviation")],d.prototype,"standardDeviation",void 0);e.__decorate([n.property()],d.prototype,"standardDeviationCount",void 0);e.__decorate([l.aliasOf("viewModel.values")],d.prototype,"values",void 0);e.__decorate([n.property()],d.prototype,"viewModel",void 0);return d=e.__decorate([y.subclass("esri.widgets.HistogramRangeSlider")],
d)});