// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(m,a,b,g,e,B,t,A,y,k,n,
d,u){g=function(r){function I(L,q){L=r.call(this,L,q)||this;L.messages=null;L.showMoreResultsOpen=!1;L.viewModel=null;return L}m._inheritsLoose(I,r);var J=I.prototype;J.render=function(){return d.tsx("div",{class:"esri-search-result-renderer esri-widget"},d.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};
J.renderMoreResults=function(){return d.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};J.renderSearchResultName=function(){var L;const q=null==(L=this.viewModel)?void 0:L.selectedResult;return d.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},q&&q.name||"")};J.renderMoreResultsLists=function(){var L,q=null==(L=this.viewModel)?void 0:L.results;({resultCount:L}=this.viewModel);
if(2>L)return null;q=q.map(O=>this.renderMoreResultsList(O));return d.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},q)};J.renderMoreResultsButton=function(){const {messages:L}=this,{resultCount:q}=this.viewModel;return 2>q?null:d.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},d.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,
onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?L.hideMoreResults:L.showMoreResults))};J.renderMoreResultsHeader=function(L,q){return d.tsx("div",{key:`esri-search-result-renderer__header-${q}`,class:"esri-search-result-renderer__more-results-list-header"},L)};J.renderMoreResultsList=function(L){var q,O;const {results:x}=L;var V=x.length;const X=!!V,Z=null==(q=this.viewModel)?void 0:q.selectedResult;q=1===V&&x[0]===Z;V=this._getSourceName(L.source,L.sourceIndex);V=1<(null==(O=this.viewModel)?
void 0:O.results.length)&&!q?this.renderMoreResultsHeader(V,L.sourceIndex):null;O=X&&x.map((aa,G)=>this.renderMoreResultsListItem(aa,G));O=X&&!q?d.tsx("ul",{key:`esri-search-result-renderer__list-${L.sourceIndex}`},O):null;return X?d.tsx("div",{key:`esri-search-result-renderer__results-${L.sourceIndex}`},V,O):null};J.renderMoreResultsListItem=function(L,q){const O=this.get("viewModel.selectedResult");return L!==O?d.tsx("li",{key:`esri-search-result-renderer__list-item-${q}`},d.tsx("a",{class:"esri-widget__anchor",
href:"#",tabindex:"0",bind:this,"data-result":L,onclick:this._selectResultClick,onkeydown:this._selectResultClick},L.name)):null};J._showMoreResultsClick=function(L){L.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(L=this.get("viewModel.view.popup"))&&L.reposition()};J._selectResultClick=function(L){L.preventDefault();L=L.currentTarget["data-result"];this.viewModel&&this.viewModel.select(L)};J._getSourceName=function(L,q){return q===y.ALL_INDEX?this.messages.all:L.name};return I}(A);
a.__decorate([b.property(),n.messageBundle("esri/widgets/Search/t9n/Search")],g.prototype,"messages",void 0);a.__decorate([b.property()],g.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],g.prototype,"viewModel",void 0);a.__decorate([k.accessibleHandler()],g.prototype,"_showMoreResultsClick",null);a.__decorate([k.accessibleHandler()],g.prototype,"_selectResultClick",null);return g=a.__decorate([t.subclass("esri.widgets.Search.SearchResultRenderer")],g)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/deprecate ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n,d,u,r,I,J,L,q,O,x,V,X,Z,aa,G,l,w,h,E,Q,z,D,F,N,T,K,M,W,Y){function P(da,ba){return da.hasOwnProperty(ba)&&null!=da[ba]&&""!==da[ba]}const S=r.getLogger("esri.widgets.Search.SearchViewModel"),ea=y.ofType({key:da=>da.layer?"layer":"locator",base:z,typeMap:{layer:E,locator:Q}}),ia=aa.WGS84,fa=/<(?:.|\s)*?>/g;t=function(da){function ba(c){c=da.call(this,c)||this;c._handles=new u;c._gotoController=null;c._searching=null;c._createdFeatureLayers=[];c.autoNavigate=!0;c.autoSelect=
!0;c.defaultPopupTemplate=null;c.defaultSources=new ea;c.defaultSymbols={point:new M({url:b.getAssetUrl("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new W({color:[130,130,130,1],width:2}),polygon:new Y({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=w.getDefault();c.resultCount=
null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=null;c.sources=new ea;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}m._inheritsLoose(ba,da);var H=ba.prototype;H.initialize=function(){var c=this;const f=function(){var p=m._asyncToGenerator(function*(){const v=yield l.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=v;c.defaultPopupTemplate=
new B({title:v.searchResult,content:"{Match_addr}"})});return function(){return p.apply(this,arguments)}}();f();this._handles.add([L.watch(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),L.initial),G.onLocaleChange(f)])};H.destroy=function(){this._destroyFeatureLayers();this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};H.clear=function(){this.searchTerm=""};H.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);
this._set("resultGraphic",null)};H.search=function(c,f){this.emit("search-start");this.clearGraphics();const p=this._createSuggestionForSearch(c);return this._searching=c=this.when().then(()=>this._getResultsFromSources(p,f).then(v=>{var C;if(null!=(C=I.unwrap(null==f?void 0:f.signal))&&C.aborted)return null;const R={activeSourceIndex:this.activeSourceIndex,searchTerm:p.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(R,v,p);v=this._getFirstResult(R.results);C=(p.location&&
v?v.name:p.text).replace(fa,"");this._set("searchTerm",C);(p.key&&"number"===typeof p.sourceIndex||p.location)&&this._set("selectedSuggestion",p);this._set("results",R.results);this._set("resultCount",R.results.reduce((U,ca)=>U+ca.results.length,0));this.emit("search-complete",R);return this._selectFirstResult(v).then(()=>R)})).then(v=>{this._clearSearching();return v},v=>{this._clearSearching();throw v;})};H.searchNearby=function(c){if(!this.locationEnabled){var f=new n("searchNearby:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});S.error(f);return Promise.reject(f)}this._searching=f=N.getCurrentPosition().then(p=>N.positionToPoint({position:p,view:this.view},c)).then(p=>this.search(p,c));f.catch(()=>{}).then(()=>this._clearSearching());return f};H.select=function(c){this.clearGraphics();if(!c){var f=new n("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});S.error(f);return Promise.reject(f)}const {view:p}=this,v=P(c,"sourceIndex")?
c.sourceIndex:this._getSourceIndexOfResult(c),C=this.allSources.getItemAt(v);if(!C)return f=new n("select:missing-source","Cannot select without a source.",{source:C}),S.error(f),Promise.reject(f);f=C instanceof E?this._getLayerSourcePopupTemplate(C):C.popupTemplate;const R=C.resultSymbol||this._getDefaultSymbol(c),U=P(C,"resultGraphicEnabled")?C.resultGraphicEnabled:this.resultGraphicEnabled,ca=P(C,"autoNavigate")?C.autoNavigate:this.autoNavigate,ha=P(C,"popupEnabled")?C.popupEnabled:this.popupEnabled,
pa=ha?f||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ja}=c;if(!ja)return f=new n("select:missing-feature","Cannot select without a feature.",{feature:ja}),S.error(f),Promise.reject(f);const {attributes:sa,geometry:qa,layer:ta,sourceLayer:ua}=ja,na=D.getPointFromGeometry(qa);f={layerViewQuery:this._getLayerView(ja),elevationQuery:p&&I.isSome(na)?D.getPointWithElevation(na,p).catch(()=>na):Promise.resolve(na)};return J.eachAlways(f).then(ka=>{const la=ka.layerViewQuery.value,va=ka.elevationQuery.value;
R instanceof K&&(R.text=c.name);ka=p&&ca?c.target||c.extent:null;return(I.isSome(ka)?this._goToSearchResult(ka):Promise.resolve()).then(()=>{var oa;const ma=la?ja:new e({geometry:qa,symbol:R,attributes:sa,layer:ta,sourceLayer:ua,popupTemplate:pa}),ra=ha&&(null==(oa=this.view)?void 0:oa.popup);(oa=ra&&ma.getEffectivePopupTemplate(ra.defaultPopupTemplateEnabled))&&p.popup.open({features:[ma],location:va});la&&h.highlightsSupported(la)&&!oa&&this._highlightFeature({graphic:ma,layerView:la});!la&&U&&
p&&p.graphics.push(ma);this._setResultFloor(c);this._set("selectedResult",c);this._set("resultGraphic",ma);this.emit("select-result",{result:c,source:C,sourceIndex:v});return c})})};H.suggest=function(c,f,p){const v=c||this.searchTerm;this.emit("suggest-start",{searchTerm:v});return this._suggestTimer(f,p).then(()=>this._suggestImmediate(v,p).then(C=>{this._set("suggestions",C.results);this._set("suggestionCount",C.results.reduce((R,U)=>R+U.results.length,0));this.emit("suggest-complete",C);return C}))};
H.when=function(){var c=m._asyncToGenerator(function*(){yield L.whenOnce(()=>!this.updating)});return function(){return c.apply(this,arguments)}}();H._update=function(){var c=m._asyncToGenerator(function*(){const {portal:f,view:p}=this;if(this.includeDefaultSources){const v=this._updatingPromise=J.eachAlways([null==f?void 0:f.load(),null==p?void 0:p.when()]);if(this.destroyed)return;yield v;if(v!==this._updatingPromise)return}yield L.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();
this._updatingPromise=null});return function(){return c.apply(this,arguments)}}();H._clearSearching=function(){this._searching=null};H._convertHelperServices=function(){var c,f;const p=null==(c=this.portal)?void 0:null==(f=c.helperServices)?void 0:f.geocode;return p?p.map(v=>{if(!1!==v.placefinding){var C=g.apiKey&&F.isArcGISWorldGeocoder(v.url)?{url:F.meteredArcGISLocatorUrl}:null;v=Q.fromJSON({...v,...C});C=v.url;(F.isArcGISWorldGeocoder(C)||F.isProxiedArcGISWorldGeocoder(C)||F.isMeteredArcGISWorldGeocoder(C))&&
v.set({singleLineFieldName:"SingleLine",outFields:v.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:v.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof v.defaultZoomScale?v.defaultZoomScale:2500});if(v.singleLineFieldName)return v}}).filter(Boolean):[]};H._destroyFeatureLayers=function(){this._createdFeatureLayers.forEach(c=>null==c?void 0:c.destroy());this._createdFeatureLayers=[]};H._getLayerSources=function(c,f){var p;const v=null==(p=this.view)?void 0:
p.map;return c.map(C=>{const R=v.findLayerById(C.id);if(R){C=this._getLayerJSON(C);var U=E.fromJSON(C);U.placeholder=f;this._getLayer(R,C).then(ca=>{U.layer=ca});return U}}).filter(Boolean).toArray()};H._getTableSources=function(c,f){var p;const v=null==(p=this.view)?void 0:p.map;return c.map(C=>{const R=v.findTableById(C.id);if(R){C=this._getLayerJSON(C);var U=E.fromJSON(C);U.placeholder=f;this._getLayer(R,C).then(ca=>{U.layer=ca});return U}}).filter(Boolean).toArray()};H._convertApplicationProperties=
function(){var c,f,p;const v=null==(c=this.view)?void 0:c.map;c=null==v?void 0:null==(f=v.applicationProperties)?void 0:null==(p=f.viewing)?void 0:p.search;if(!c)return[];const {enabled:C,hintText:R,layers:U,tables:ca}=c;if(!C)return[];f=this._getLayerSources(U,R);p=this._getTableSources(ca,R);return[...f,...p]};H._getSubLayer=function(){var c=m._asyncToGenerator(function*(f,p){yield f.load();if(!f.allSublayers)throw Error();f=f.allSublayers.find(v=>v.id===p.subLayer);if(!f)throw Error();f=yield f.createFeatureLayer();
this._createdFeatureLayers.push(f);return f});return function(f,p){return c.apply(this,arguments)}}();H._getBuildingSubLayer=function(){var c=m._asyncToGenerator(function*(f,p){yield f.load();f=f.allSublayers.find(v=>v.id===p.subLayer);if("building-component"!==(null==f?void 0:f.type))throw Error();yield f.load();if(null==f.associatedLayer)throw Error();yield f.associatedLayer.load();return f});return function(f,p){return c.apply(this,arguments)}}();H._getLayer=function(c,f){return"feature"===c.type||
"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,f).catch(()=>{const p=new n("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});S.error(p);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,f):Promise.resolve(null)};H._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};H._updateDefaultSources=function(){const {defaultSources:c,
includeDefaultSources:f}=this;this._destroyFeatureLayers();c.removeAll();f&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};H._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};H._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};
H._closePopup=function(){var c;const f=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=this);if(f&&c){var {selectedFeature:p}=f;p&&p===c&&f.close()}};H._suggestTimer=function(c,f){return J.after(null!=c?c:this.suggestionDelay,null,f&&f.signal)};H._createLocationForSearch=function(c){return c instanceof e?D.getPointFromGeometry(c.geometry):c instanceof Z?c:Array.isArray(c)&&2===c.length?new Z({longitude:c[0],latitude:c[1]}):null};H._createSuggestionForSearch=function(c){if(c&&P(c,"key")&&P(c,
"text")&&P(c,"sourceIndex"))return c;const f=this._createLocationForSearch(c),p="string"===typeof c?c:this.searchTerm,{selectedSuggestion:v,selectedResult:C}=this,R=(c=!c&&v&&C)&&v.location;return c&&v.key===C.key&&v.sourceIndex===C.sourceIndex||R?v:{location:I.unwrap(f),text:f?"":p,sourceIndex:null,key:null}};H._getFirstResult=function(c){let f=null;c&&c.some(p=>{({results:p}=p);p=p[0];const v=!!p;v&&(f=p);return v});return f};H._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):
Promise.resolve(null)};H._suggestImmediate=function(c,f){return this.when().then(()=>this._getSuggestionsFromSources(c,f)).then(p=>{var v;if(null!=(v=I.unwrap(null==f?void 0:f.signal))&&v.aborted)return null;v={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(v,p);return v})};H._formatSourceResponse=function(c,f,p){const v=f&&f.value||[];f=f&&f.error;const C=this.allSources.getItemAt(p);f?(c.errors.push({sourceIndex:p,source:C,
error:f}),S.error(f),c.numErrors++):(c.results.push({sourceIndex:p,source:C,results:v}),c.numResults+=v.length)};H._formatResponse=function(c,f,p){if(f)if(-1===c.activeSourceIndex){const v=p&&P(p,"sourceIndex")&&-1!==p.sourceIndex?p.sourceIndex:void 0;f.forEach((C,R)=>{this._formatSourceResponse(c,C,void 0!==v?v:R)})}else this._formatSourceResponse(c,f[0],c.activeSourceIndex)};H._getResultsFromSources=function(c,f){var {allSources:p}=this;const v=!c.location&&P(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,
C=[];if(!p.length)return p=new n("search:no-sources-defined","At least one source is required.",{allSources:p}),S.error(p),Promise.reject(p);-1===v?p.forEach((R,U)=>{C.push(this._getResultsFromSource(c,U,f))}):C.push(this._getResultsFromSource(c,v,f));return J.eachAlways(C)};H._getSuggestionsFromSources=function(c,f){const {allSources:p,activeSourceIndex:v}=this,C=[];if(!p.length){const R=new n("suggest:no-sources-defined","At least one source is required.",{allSources:p});S.error(R);return Promise.reject(R)}-1===
v?p.forEach((R,U)=>{C.push(this._getSuggestionsFromSource(c,U,f))}):C.push(this._getSuggestionsFromSource(c,v,f));return J.eachAlways(C)};H._getResultsFromSource=function(c,f,p){var v;const C=this.allSources.getItemAt(f),{location:R=null}=c,U=(null==(v=this.view)?void 0:v.spatialReference)||ia;v=P(C,"maxResults")?C.maxResults:this.maxResults;const ca=C instanceof E&&P(C,"exactMatch")?C.exactMatch:!1,{view:ha}=this;return C.getResults({view:ha,sourceIndex:f,location:R,suggestResult:c,spatialReference:U,
exactMatch:ca,maxResults:v},p)};H._getSuggestionsFromSource=function(c,f,p){const v=this.allSources.getItemAt(f);var C=P(v,"suggestionsEnabled")?v.suggestionsEnabled:this.suggestionsEnabled,R=c.length,U=P(v,"minSuggestCharacters")?v.minSuggestCharacters:this.minSuggestCharacters;if(C&&c.trim()&&R>=U){var ca;C=(null==(ca=this.view)?void 0:ca.spatialReference)||ia;ca=P(v,"maxSuggestions")?v.maxSuggestions:this.maxSuggestions;({view:R}=this);U=v instanceof E&&P(v,"exactMatch")?v.exactMatch:!1;return v.getSuggestions({view:R,
sourceIndex:f,suggestTerm:c,spatialReference:C,maxSuggestions:ca,exactMatch:U},p)}return Promise.resolve(null)};H._getLayerSourcePopupTemplate=function(c){const {layer:f}=c;if(f)return P(c,"popupTemplate")?c.popupTemplate:f.popupTemplate};H._getSourceIndexOfResult=function(c){let f=null;this.results.some(p=>p.results.some(v=>v===c?(f=p.sourceIndex,!0):!1));return f};H._goToSearchResult=function(){var c=m._asyncToGenerator(function*(f){const p=!!f;this._abortGoTo();const v=new AbortController;this._gotoController=
v;yield this.callGoTo({target:{target:f},options:{animate:p,signal:v.signal}});this._gotoController=null});return function(f){return c.apply(this,arguments)}}();H._getDefaultSymbol=function(c){var f;const {defaultSymbols:p}=this;c=null==(f=c.feature)?void 0:f.geometry;if(I.isNone(c))return null;if((f=this._get("defaultSymbol"))&&("point"===c.type||"multipoint"===c.type))return f;switch(c.type){case "point":case "multipoint":return p.point;case "polyline":return p.polyline;case "extent":case "polygon":return p.polygon;
default:return null}};H._removeHighlight=function(){this._handles.remove("highlight")};H._getLayerView=function(){var c=m._asyncToGenerator(function*(f){const {view:p}=this;if(!f||!p||"building-component"===f.layer.type||"subtype-sublayer"===f.layer.type)return null;({layer:f}=f);yield p.when();return p.whenLayerView(f)});return function(f){return c.apply(this,arguments)}}();H._highlightFeature=function(c){const {graphic:f,layerView:p}=c,{attributes:v,layer:C}=f;({objectIdField:c}=C);c=p.highlight(v&&
v[c]||f);this._handles.add(c,"highlight")};H._setResultFloor=function(c){var f,p,v;const {view:C}=this,R=null==(f=c.feature)?void 0:f.attributes;(c=null==(p=c.feature)?void 0:p.sourceLayer)&&"floorInfo"in c&&null!=c&&null!=(v=c.floorInfo)&&v.floorField&&R&&C.emit("select-result-floor",R[c.floorInfo.floorField])};m._createClass(ba,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&
this.searchAllEnabled?-1:0},set:function(c){void 0===c?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:f,includeDefaultSources:p}=this,v="function"===typeof p?p.call(null,{sources:c,defaultSources:f}):p?f.concat(c):
c,C=this._get("allSources")||new ea;C.removeAll();C.addMany(v.filter(Boolean));return C}},{key:"defaultSymbol",get:function(){k.deprecatedProperty(S,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});return this._get("defaultSymbol")},set:function(c){k.deprecatedProperty(S,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});this._set("defaultSymbol",c)}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||N.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");
else{var f=N.supported();if(c&&!f){const p=new n("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});S.error(p)}this._override("locationEnabled",c&&f)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:f,allPlaceholder:p}=this;if(-1===f)return p;const v=c.getItemAt(f);return v?v.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();
this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return ba}(T.GoToMixin(d.EventedMixin(A)));t.ALL_INDEX=-1;a.__decorate([q.property()],t.prototype,"_searching",void 0);a.__decorate([q.property()],t.prototype,"_updatingPromise",
void 0);a.__decorate([q.property({readOnly:!0,value:null})],t.prototype,"activeSource",null);a.__decorate([q.property()],t.prototype,"activeSourceIndex",null);a.__decorate([q.property()],t.prototype,"allPlaceholder",null);a.__decorate([q.property({readOnly:!0})],t.prototype,"allSources",null);a.__decorate([q.property()],t.prototype,"autoNavigate",void 0);a.__decorate([q.property()],t.prototype,"autoSelect",void 0);a.__decorate([q.property()],t.prototype,"defaultPopupTemplate",void 0);a.__decorate([q.property({readOnly:!0})],
t.prototype,"defaultSources",void 0);a.__decorate([q.property()],t.prototype,"defaultSymbol",null);a.__decorate([q.property()],t.prototype,"defaultSymbols",void 0);a.__decorate([q.property()],t.prototype,"includeDefaultSources",void 0);a.__decorate([q.property()],t.prototype,"locationEnabled",null);a.__decorate([q.property()],t.prototype,"maxInputLength",void 0);a.__decorate([q.property()],t.prototype,"maxResults",void 0);a.__decorate([q.property()],t.prototype,"maxSuggestions",void 0);a.__decorate([q.property()],
t.prototype,"messages",void 0);a.__decorate([q.property()],t.prototype,"minSuggestCharacters",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"placeholder",null);a.__decorate([q.property()],t.prototype,"popupEnabled",void 0);a.__decorate([q.property({type:B})],t.prototype,"popupTemplate",void 0);a.__decorate([q.property({type:w})],t.prototype,"portal",void 0);a.__decorate([q.property()],t.prototype,"resultCount",void 0);a.__decorate([q.property()],t.prototype,"resultGraphicEnabled",void 0);
a.__decorate([q.property({readOnly:!0})],t.prototype,"resultGraphic",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"results",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"selectedSuggestion",void 0);a.__decorate([q.property()],t.prototype,"searchAllEnabled",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"selectedResult",void 0);a.__decorate([q.property()],t.prototype,"searchTerm",null);a.__decorate([q.property({type:ea})],t.prototype,"sources",void 0);
a.__decorate([q.property({readOnly:!0})],t.prototype,"state",null);a.__decorate([q.property()],t.prototype,"suggestionDelay",void 0);a.__decorate([q.property()],t.prototype,"suggestionCount",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"suggestions",void 0);a.__decorate([q.property()],t.prototype,"suggestionsEnabled",void 0);a.__decorate([q.property({readOnly:!0})],t.prototype,"updating",null);a.__decorate([q.property()],t.prototype,"view",void 0);a.__decorate([q.property()],t.prototype,
"clear",null);return t=a.__decorate([X.subclass("esri.widgets.Search.SearchViewModel")],t)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(m,a){m.extractSafeScaleBounds=function(b){var g,e;const B=b.effectiveScaleRange;b=null!=(g=null==B?void 0:B.minScale)?g:0;g=null!=(e=null==B?void 0:B.maxScale)?e:0;return{minScale:b,maxScale:g}};m.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};m.isScaleRangeActive=function(b,g){return 0<
b||0<g};m.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};m.scaleBoundsPredicate=function(b,g,e){return a.isNone(b)||b>e&&(0===g||b<g)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),
function(m,a,b,g,e,B,t,A){var y;e=y=function(k){function n(u){var r=k.call(this,u)||this;r.displayField=null;r.exactMatch=null;r.orderByFields=null;r.searchFields=null;r.searchTemplate=null;r.suggestionTemplate=null;r.getResults=(I,J)=>A.getResults({source:m._assertThisInitialized(r),...I},J);r.getSuggestions=(I,J)=>A.getSuggestions({source:m._assertThisInitialized(r),...I},J);return r}m._inheritsLoose(n,k);var d=n.prototype;d.clone=function(){return new y({autoNavigate:this.autoNavigate,filter:this.filter,
maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,
layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};d._getFirstStringField=function(){var u,r;return null!=(u=null==(r=this.layer.fieldsIndex.fields.find(I=>"string"===I.type))?void 0:r.name)?u:""};d._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};d._getSearchFieldsString=function(){const {layer:u,searchFields:r}=this;return u.loaded?`: ${(r||
[this._getDisplayField()]).map(I=>{const J=u.getField(I);return J&&J.alias||I}).join(", ")}`:""};d._getLayerTitle=function(){var {layer:u}=this;if(u&&({title:u}=u,u))return`${u}${this._getSearchFieldsString()}`};m._createClass(n,[{key:"layer",set:function(u){this._set("layer",u);u&&u.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(u){void 0===u?this._clearOverride("name"):this._override("name",u)}}]);return n}(t);a.__decorate([g.property({json:{read:{source:"field.name"},
write:{target:"field.name"}}})],e.prototype,"displayField",void 0);a.__decorate([g.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],e.prototype,"exactMatch",void 0);a.__decorate([g.property({value:null})],e.prototype,"layer",null);a.__decorate([g.property()],e.prototype,"name",null);a.__decorate([g.property({type:[String],json:{write:!0}})],e.prototype,"orderByFields",void 0);a.__decorate([g.property()],e.prototype,"searchFields",void 0);a.__decorate([g.property()],
e.prototype,"searchTemplate",void 0);a.__decorate([g.property()],e.prototype,"suggestionTemplate",void 0);return e=y=a.__decorate([B.subclass("esri.widgets.Search.LayerSearchSource")],e)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,a,b,g,e,B,t,A,y){b=function(k){function n(d){d=k.call(this,d)||this;d.autoNavigate=null;d.filter=null;d.getResults=null;d.getSuggestions=null;d.maxResults=null;d.maxSuggestions=null;d.minSuggestCharacters=null;d.outFields=null;d.placeholder="";d.popupEnabled=null;d.popupTemplate=null;d.prefix="";d.resultGraphicEnabled=null;d.resultSymbol=null;d.suggestionsEnabled=null;d.suffix="";d.withinViewEnabled=!1;d.zoomScale=null;return d}m._inheritsLoose(n,k);return n}(b.IdentifiableMixin(g.JSONSupport));
a.__decorate([e.property()],b.prototype,"autoNavigate",void 0);a.__decorate([e.property()],b.prototype,"filter",void 0);a.__decorate([e.property()],b.prototype,"getResults",void 0);a.__decorate([e.property()],b.prototype,"getSuggestions",void 0);a.__decorate([e.property()],b.prototype,"maxResults",void 0);a.__decorate([e.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([e.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([e.property()],b.prototype,"outFields",void 0);
a.__decorate([e.property()],b.prototype,"placeholder",void 0);a.__decorate([e.property()],b.prototype,"popupEnabled",void 0);a.__decorate([e.property()],b.prototype,"popupTemplate",void 0);a.__decorate([e.property()],b.prototype,"prefix",void 0);a.__decorate([e.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([e.property()],b.prototype,"resultSymbol",void 0);a.__decorate([e.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([e.property()],b.prototype,"suffix",void 0);
a.__decorate([e.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([e.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([y.subclass("esri.widgets.Search.SearchSource")],b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n,d){function u(z,D){const {filter:F,withinViewEnabled:N}=z;z=D&&D.extent;return F&&F.geometry||(N&&z?z:void 0)}function r(z){return I.apply(this,arguments)}function I(){I=a._asyncToGenerator(function*(z){z&&(yield z.load())});return I.apply(this,arguments)}function J(z){var D,F,N;return null!=(D=null==z?void 0:null==(F=z.capabilities)?void 0:null==(N=F.query)?void 0:N.supportsPagination)?D:!1}function L(z){var D,F,N,T;return null!=(D=null==z?void 0:null==(F=z.fieldsIndex)?
void 0:null==(N=F.fields)?void 0:null==(T=N.find(K=>"string"===K.type))?void 0:T.name)?D:""}function q(z,D){return z&&D?D.every(F=>!!z.getField(F)):!1}function O(z,D,F){let N=null;({codedValues:z}=z);z&&z.some(T=>{var K=T.name;K=F?K:K.toLowerCase();return(F?D:D.toLowerCase())===K?(N=T.code.toString(),!0):!1});return N}function x(z,D){return(D=D&&D.where)?`(${z}) AND (${D})`:z}function V({currentTerm:z,field:D,filter:F,exactMatch:N,url:T,type:K}){var M=D.type;D=D.name;if("string"===M||"date"===M||
"global-id"===M){if(M=T=h.test(T))a:{for(M=0;M<z.length;M++)if(255<z.charCodeAt(M)){M=!0;break a}M=!1}M=M?"N":"";if(N&&"search"===K)return x(`${D} = ${M}'${z}'`,F);K=T?D:`UPPER(${D})`;z=T?z:z.toUpperCase();return x(`${K} LIKE ${M}${N?`'${z}%'`:`'%${z}%'`}`,F)}return"oid"===M||"small-integer"===M||"integer"===M||"single"===M||"double"===M?(N=Number(z),isNaN(N)?null:x(`${D} = ${N}`,F)):x(`${D} = ${z}`,F)}function X({searchTerm:z,layer:D,searchFields:F,filter:N,exactMatch:T,type:K}){const {definitionExpression:M,
url:W}=D;let Y="";z&&F&&F.forEach(P=>{var S=D.getField(P);P=((P="function"===typeof D.getFieldDomain&&D.getFieldDomain(P))&&"coded-value"===P.type?O(P,z,T):null)||z||null;null!==P&&(S=V({currentTerm:P,field:S,filter:N,exactMatch:T,url:W,type:K}))&&(Y+=Y?` OR (${S})`:`(${S})`)});return M?`(${M}) AND (${Y})`:Y}function Z(z,D){let F=null;({codedValues:z}=z);z&&z.length&&z.some(N=>N.code===D?(F=N.name,!0):!1);return F}function aa(z,D){return z[Object.keys(z).find(F=>F.toLowerCase()===D.toLowerCase())]}
function G(z,D,F){const N=z.sourceLayer,{attributes:T}=z;z="function"===typeof N.getFieldDomain&&N.getFieldDomain(F);return D?n.substitute(D,T):F&&T?(D=N.getField(F),F=aa(T,F),null==F?"":z&&"coded-value"===z.type?Z(z,F):"date"===(null==D?void 0:D.type)?d.formatDate(new Date(F)):"number"===typeof F?F.toString():"string"!==typeof F?"":F.trim()):""}function l(z,D,F,N){return z.features.map(T=>{var K=T.sourceLayer,{attributes:M}=T;({objectIdField:K}=K);M=M[K];return T={text:G(T,D.suggestionTemplate,N),
key:M,sourceIndex:F}})}function w(z,D,F,N,T,K,M){return z.features.map(W=>{{var Y=W.clone();var P=W.sourceLayer;P=(P=P&&P.objectIdField)&&W.attributes[P];const ea=G(W,F.searchTemplate,T);var S=k.createExtentFromGeometry(Y.geometry,D,K);S="number"===typeof M?k.scaleExtent(e.clone(S),D,M):S;W=W.clone();t.isSome(S)&&(W.geometry=y.fromExtent(S));Y={extent:S,target:W,feature:Y,key:P,name:ea,sourceIndex:N}}return Y})}const h=/https?:\/\/services.*\.arcgis\.com/i,E=/(?:\{([^}]+)\})/g,Q=B.getLogger("esri.widgets.Search.support.layerSearchUtils");
m.getResults=function(z,D){const {exactMatch:F=!1,location:N,maxResults:T,spatialReference:K,source:M,sourceIndex:W,suggestResult:Y,view:P}=z,{layer:S,filter:ea,zoomScale:ia}=M,fa=P&&P.scale,da=u(M,P),ba=D&&D.signal;return r(S).then(()=>{const H=S.popupTemplate;return H?H.getRequiredFields(S.fieldsIndex):null}).then(H=>{var c,f,p;const {objectIdField:v,returnZ:C}=S,R=M.displayField||M.layer.displayField||L(M.layer);if(!S.getField(R))throw Q.error("invalid-field: displayField is invalid."),new g("getResults():invalid-field",
"displayField is invalid.");H=H&&H.length?H:[R];var U=(H=M.outFields||H)&&H.includes("*");H.includes(v)||U||H.push(v);null!=(c=S.floorInfo)&&c.floorField&&H.push(S.floorInfo.floorField);if(!U&&!q(S,H))throw Q.error("invalid-field: outField is invalid."),new g("getResults():invalid-field","outField is invalid.");c=S.createQuery();({orderByFields:U}=M);U&&(c.orderByFields=U);K&&(c.outSpatialReference=K,U=1/A.getMetersPerUnitForSR(K))&&(c.maxAllowableOffset=U);U="mesh"===S.geometryType||"multipatch"===
S.geometryType;const ca=(null==(f=S.capabilities)?void 0:null==(p=f.data)?void 0:p.supportsZ)&&!U;c.returnZ=ca&&!1!==C;c.returnGeometry=!0;c.multipatchOption=U?"xyFootprint":null;H&&(c.outFields=H);if(N)c.geometry=N;else if(Y.key)c.objectIds=[Y.key];else{f=M.searchFields||[R];if(!q(S,f))throw Q.error("invalid-field: search field is invalid."),new g("getResults():invalid-field","search field is invalid.");J(S)&&(c.num=T);da&&(c.geometry=da);if(!Y.text.trim())return[];const {prefix:ha="",suffix:pa=
""}=M;p=`${ha}${Y.text}${pa}`.replace(/'/g,"''");f=X({searchTerm:p,layer:S,searchFields:f,filter:ea,exactMatch:F,type:"search"});if(!f)return[];c.where=f}return S.queryFeatures(c,{signal:ba}).then(ha=>w(ha,P,M,W,R,fa,ia))})};m.getSuggestions=function(z,D){const {source:F,spatialReference:N,view:T,suggestTerm:K,maxSuggestions:M,sourceIndex:W,exactMatch:Y}=z,{layer:P,filter:S}=F,ea=D&&D.signal,ia=u(F,T);return r(P).then(()=>{if(!J(P))return[];const fa=F.displayField||F.layer.displayField||L(F.layer);
var da=F.searchFields||[fa];const ba=[];F.suggestionTemplate?F.suggestionTemplate.replace(E,(C,R)=>{ba.push(R);return C}):ba.push(fa);var H=ba&&ba.includes("*");ba.includes(P.objectIdField)||H||ba.push(P.objectIdField);var c=!!P.getField(fa);H=H||q(P,ba);const f=q(P,da);if(!c)throw Q.error("invalid-field: displayField is invalid."),new g("getSuggestions():invalid-field","displayField is invalid.");if(!H)throw Q.error("invalid-field: outField is invalid."),new g("getSuggestions():invalid-field","outField is invalid.");
if(!f)throw Q.error("invalid-field: search field is invalid."),new g("getSuggestions():invalid-field","search field is invalid.");c=P.createQuery();({orderByFields:H}=F);H&&(c.orderByFields=H);c.outSpatialReference=N;c.returnGeometry=!1;c.num=M;c.outFields=ba;ia&&(c.geometry=ia);if(!K.trim())return[];const {prefix:p="",suffix:v=""}=F;H=`${p}${K}${v}`.replace(/'/g,"''");da=X({searchTerm:H,layer:P,searchFields:da,filter:S,exactMatch:Y,type:"suggest"});if(!da)return[];c.where=da;return P.queryFeatures(c,
{signal:ea}).then(C=>l(C,F,W,fa))})};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),function(m,a,b,g,e,B,t){function A(k,n,d){const u=k.hasZ?k.z:void 0;return n&&n.map?(d?B.getExtentForScale(n,d):n.extent).clone().centerAt(k).set({zmax:u,
zmin:u}):new t({xmin:k.x-.25,ymin:k.y-.25,xmax:k.x+.25,ymax:k.y+.25,spatialReference:k.spatialReference,zmin:u,zmax:u})}const y=g.getLogger("esri.widgets.Search.support.geometryUtils");m.createExtentFromGeometry=function(k,n,d){if(e.isNone(k))return null;if("extent"===k.type)return k;if("multipoint"===k.type||"polygon"===k.type||"polyline"===k.type)return k.extent;if("point"===k.type)return A(k,n,d)};m.getPointFromGeometry=function(k){if(e.isNone(k))return null;switch(k.type){case "point":return k;
case "extent":return k.center;case "polygon":return k.centroid;case "multipoint":return k.getPoint(0);case "polyline":return k.getPoint(0,0)}return null};m.getPointWithElevation=function(k,n){var d,u;if(!n)return y.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!k)return y.error("missing-parameter: point is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","point is missing."));if(k.hasZ||"2d"===
n.type)return Promise.resolve(k);const r=null==n?void 0:null==(d=n.map)?void 0:d.ground;return r&&r.layers.length?r.queryElevation(k,{cache:null==(u=n.basemapTerrain)?void 0:u.elevationQueryCache}).then(I=>I.geometry):Promise.resolve(k)};m.scaleExtent=function(k,n,d){return e.isNone(k)||e.isNone(n)?null:A(k.center,n,d)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],
function(m,a){function b(g,e){e=a.getMetersPerUnitForSR(e);return g/(e*a.inchesPerMeter*96)}m.getExtentForScale=function(g,e){const B=g.extent;g=g.width;e=b(e,B.spatialReference);return B.clone().expand(e*g/B.width)};m.getResolutionForScale=b;m.getScale=function(g,e){e=e||g.extent;g=g.width;const B=a.getMetersPerUnitForSR(e&&e.spatialReference);return e&&g?e.width/g*B*a.inchesPerMeter*96:0};m.getScaleForResolution=function(g,e){e=a.getMetersPerUnitForSR(e);return g*e*a.inchesPerMeter*96};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/locatorUtils".split(" "),function(m,a,b,g,e,B,t,A){var y;e=y=function(k){function n(d){var u=k.call(this,d)||this;u.apiKey=null;u.categories=
null;u.countryCode=null;u.defaultZoomScale=null;u.localSearchDisabled=!1;u.locationType=null;u.name="";u.placeholder="";u.searchTemplate="";u.singleLineFieldName=null;u.suggestionsEnabled=null;u.url=null;u.zoomScale=null;u.getResults=(r,I)=>A.getResults({source:m._assertThisInitialized(u),...r},I);u.getSuggestions=(r,I)=>A.getSuggestions({source:m._assertThisInitialized(u),...r},I);return u}m._inheritsLoose(n,k);n.prototype.clone=function(){return new y({apiKey:this.apiKey,autoNavigate:this.autoNavigate,
filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?b.clone(this.categories):
null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return n}(t);a.__decorate([g.property()],e.prototype,"apiKey",void 0);a.__decorate([g.property()],e.prototype,"categories",void 0);a.__decorate([g.property()],e.prototype,"countryCode",void 0);a.__decorate([g.property({json:{write:!0}})],e.prototype,"defaultZoomScale",void 0);a.__decorate([g.property()],e.prototype,"localSearchDisabled",
void 0);a.__decorate([g.property()],e.prototype,"locationType",void 0);a.__decorate([g.property({json:{write:!0}})],e.prototype,"name",void 0);a.__decorate([g.property({json:{write:!0}})],e.prototype,"placeholder",void 0);a.__decorate([g.property()],e.prototype,"searchTemplate",void 0);a.__decorate([g.property({json:{write:!0}})],e.prototype,"singleLineFieldName",void 0);a.__decorate([g.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],e.prototype,"suggestionsEnabled",void 0);a.__decorate([g.property({json:{write:!0}})],
e.prototype,"url",void 0);a.__decorate([g.property({json:{write:!0}})],e.prototype,"zoomScale",void 0);return e=y=a.__decorate([B.subclass("esri.widgets.Search.LocatorSearchSource")],e)})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n){function d(q,O){if(O.localSearchDisabled)return null;O=null==q?void 0:q.scale;return"number"===typeof O&&3E5>=O?q.get("extent.center"):null}function u(q,O){const {source:x,spatialReference:V,location:X,sourceIndex:Z,view:aa}=q,{apiKey:G,url:l,zoomScale:w,defaultZoomScale:h}=x,E=aa&&aa.scale;q=O&&O.signal;O=new y;O.location=X;G&&(O.apiKey=G);V&&(O.outSpatialReference=V);return B.locationToAddress(l,O,{signal:q}).then(Q=>L([Q],{sourceIndex:Z,scale:E,view:aa,zoomScale:w,
defaultZoomScale:h})).catch(()=>[])}function r(q,O){const {filter:x,withinViewEnabled:V}=q;q=O&&O.extent;return(O=n.createExtentFromGeometry(x&&x.geometry,O,O&&O.scale))||(V&&q?q:void 0)}function I(q,O){const {source:x,suggestResult:V,spatialReference:X,view:Z,maxResults:aa,sourceIndex:G}=q,l=x&&x.zoomScale,w=x&&x.defaultZoomScale;if(!V.text.trim())return Promise.resolve(null);q=`${!V.key&&x.prefix?x.prefix:""}${V.text}${!V.key&&x.suffix?x.suffix:""}`;const h=new A,{apiKey:E,url:Q}=x,z=Z&&Z.scale;
var D=r(x,Z);O=O&&O.signal;E&&(h.apiKey=E);if(!Q)return Promise.resolve(null);x.categories&&(h.categories=x.categories);x.locationType&&(h.locationType=x.locationType);X&&(h.outSpatialReference=X);const F=d(Z,x);F&&(h.location=F);h.maxLocations=aa;D&&(h.searchExtent=b.unwrap(D));x.countryCode&&(h.countryCode=x.countryCode);({key:D}=V);const N=`${D}`;D&&(h.magicKey=N);h.address={};h.address[x.singleLineFieldName||"Single Line Input"]=q;x.outFields&&(h.outFields=x.outFields);return e.addressToLocations(Q,
h,{signal:O}).then(T=>L(T,{key:N,scale:z,sourceIndex:G,view:Z,zoomScale:l,defaultZoomScale:w}))}function J(q,O){return q.map(x=>({text:x.text,key:x.magicKey,sourceIndex:O}))}function L(q,O){return q.filter(Boolean).map(x=>{{const {key:Z,scale:aa,sourceIndex:G,view:l,zoomScale:w,defaultZoomScale:h}=O,{attributes:E,extent:Q,location:z,address:D}=x;x=new a({geometry:z,attributes:E});var V=Q||z,X=n.createExtentFromGeometry(V,l,aa);V="number"===typeof w?n.scaleExtent(X,l,w):"number"===typeof h&&"point"===
V.type?n.scaleExtent(X,l,h):X;X=z?`${z.x},${z.y}`:"";X=D||X;const F=x.clone();b.isSome(V)&&(F.geometry=g.fromExtent(V));x={extent:V,feature:x,target:F,key:Z,name:X,sourceIndex:G}}return x})}m.getLocation=d;m.getResults=function(q,O){return q.location?u(q,O):I(q,O)};m.getSuggestions=function(q,O){const {source:x,spatialReference:V,view:X,suggestTerm:Z,maxSuggestions:aa,sourceIndex:G}=q;q=new k;const {apiKey:l,url:w}=x,h=r(x,X);O=O&&O.signal;if(!w)return Promise.resolve(null);l&&(q.apiKey=l);x.categories&&
(q.categories=x.categories);V&&(q.outSpatialReference=V);const E=d(X,x);E&&(q.location=E);if(!Z.trim())return Promise.resolve(null);const {prefix:Q="",suffix:z=""}=x;q.text=`${Q}${Z}${z}`;h&&(q.searchExtent=b.unwrap(h));q.maxSuggestions=aa;x.countryCode&&(q.countryCode=x.countryCode);return t.suggestLocations(w,q,{signal:O}).then(D=>J(D,G))};m.isArcGISWorldGeocoder=function(q){return q?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(q):!1};m.isMeteredArcGISWorldGeocoder=function(q){return q?
/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(q):!1};m.isProxiedArcGISWorldGeocoder=function(q){return q?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(q):!1};m.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),
function(m,a,b,g,e,B,t){function A(){A=a._asyncToGenerator(function*(k,n,d){n=t.from(n);k=g.parseUrl(k);const {address:u,...r}=n.toJSON();n=g.encode({...k.query,...u,...r,f:"json"});d=g.asValidOptions(n,d);return b(`${k.path}/findAddressCandidates`,d).then(y)});return A.apply(this,arguments)}function y({data:k}){if(!k)return[];const {candidates:n,spatialReference:d}=k;return n?n.map(u=>{if(u){var {extent:r,location:I}=u,J=r?e.isValidExtent(r):!0;if(e.isValidLocation(I)&&J)return r&&(r.spatialReference=
d),I.spatialReference=d,B.fromJSON(u)}}):[]}m.addressToLocations=function(k,n,d){return A.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/utils":function(){define(["exports"],function(m){m.isValidExtent=function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};m.isValidLocation=function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y};
m.normalizeExtent=function(a){return a?a.shiftCentralMeridian():null};m.normalizePoint=function(a){return a?a.clone().normalize():null};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(m,a,b,g,e,B,t,A,y,k){b=function(n){function d(u){u=n.call(this,u)||this;u.address=null;u.attributes=null;u.extent=null;u.location=null;u.score=null;return u}m._inheritsLoose(d,n);return d}(b.JSONSupport);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([g.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([g.property({type:y,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([g.property({type:k,
json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([g.property({type:Number,json:{write:!0}})],b.prototype,"score",void 0);return b=a.__decorate([A.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n,d,u){b=function(r){function I(J){J=r.call(this,J)||this;J.address=null;J.apiKey=null;J.categories=null;J.countryCode=null;J.forStorage=null;J.location=null;J.locationType=null;J.magicKey=null;J.maxLocations=null;J.outFields=null;J.outSpatialReference=null;J.searchExtent=null;return J}m._inheritsLoose(I,r);return I}(g.JSONSupport);a.__decorate([e.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([e.property(k.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([e.property({type:[String],json:{read:{source:"category",reader:r=>r?r.split(","):null},write:{target:"category",writer:(r,I)=>{I.category=r?r.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([e.property({type:n,json:{write:{writer:(r,I)=>{I.location=r?r.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([e.property({type:[String],json:{write:{writer:(r,I)=>{I.outFields=r?r.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([e.property({type:u,json:{write:{writer:(r,I)=>{r=r?r.shiftCentralMeridian():null;I.searchExtent=r}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([y.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(m){m.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(m,a,b,g,e,B){function t(){t=a._asyncToGenerator(function*(y,k,n){k=B.from(k);y=g.parseUrl(y);k={...k.toJSON(),f:"json"};k=g.encode({...y.query,...k});n=g.asValidOptions(k,n);return b(`${y.path}/reverseGeocode`,n).then(A)});
return t.apply(this,arguments)}function A({data:y}){if(y){var {address:k,location:n}=y;return e.fromJSON({address:k&&k.Match_addr||"",attributes:k||{},location:n,score:100})}}m.locationToAddress=function(y,k,n){return t.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n,d){b=function(u){function r(I){I=u.call(this,I)||this;I.apiKey=null;I.location=null;I.locationType=null;I.outSpatialReference=null;return I}m._inheritsLoose(r,u);return r}(g.JSONSupport);a.__decorate([e.property(k.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([e.property({type:n,json:{write:{writer:(u,r)=>{u=u?u.clone().normalize():null;r.location="undefined"!==typeof u?u:null}}}})],b.prototype,"location",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([y.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(m,a,b,
g,e,B){function t(){t=a._asyncToGenerator(function*(y,k,n){y=g.parseUrl(y);k=B.from(k);k={...k.toJSON(),f:"json"};k=g.encode({...y.query,...k});n=g.asValidOptions(k,n);return b(`${y.path}/suggest`,n).then(A)});return t.apply(this,arguments)}function A(y){({data:y}=y);if(!y)return[];({suggestions:y}=y);return y?y.map(k=>new e(k)):[]}m.suggestLocations=function(y,k,n){return t.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,a,b,g,e,B,t,A){b=function(y){function k(n){n=y.call(this,n)||this;n.isCollection=null;n.magicKey=null;n.text=null;return n}m._inheritsLoose(k,y);return k}(b.JSONSupport);a.__decorate([g.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([A.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(m,a,b,g,e,B,t,A,y,k,n,d,u){b=function(r){function I(J){J=
r.call(this,J)||this;J.apiKey=null;J.categories=null;J.countryCode=null;J.location=null;J.maxSuggestions=null;J.outSpatialReference=null;J.searchExtent=null;J.text=null;return J}m._inheritsLoose(I,r);return I}(g.JSONSupport);a.__decorate([e.property(k.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([e.property({type:[String],json:{read:{source:"category",reader:r=>r?r.split(","):null},write:{target:"category",writer:(r,I)=>{I.category=r?r.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([e.property({type:String,
json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([e.property({type:n,json:{write:{writer:(r,I)=>{I.location=r?r.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([e.property({type:u,json:{write:{writer:(r,I)=>{r=r?r.shiftCentralMeridian():
null;I.searchExtent=JSON.stringify(r)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([y.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/arrayUtils ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n,d,u,r,I,J,L,q,O,x,V,X,Z,aa,G,l,w,h,E,Q,z){function D(K,M,W){if(!M)return Promise.resolve(K);const Y=M.spatialReference;return Y.isWGS84?Promise.resolve(K):Y.isWebMercator?Promise.resolve(t.geographicToWebMercator(K)):F(W).then(P=>{if(!P)throw new b("geometry-service:missing-url","Geometry service URL is missing");const S=new z({geometries:[K],outSpatialReference:Y});return l.project(P,S,W).then(ea=>ea[0])})}function F(K){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const M=A.getDefault();return M.load(K).catch(()=>{}).then(()=>M.get("helperServices.geometry.url"))}const N=e.getLogger("esri.widgets.support.geolocationUtils"),T={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};m.getCurrentPosition=function(K){K||(K=T);return new Promise((M,W)=>{setTimeout(()=>W(new b("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(M,W,K)})};m.positionToPoint=function(K,M){const {position:W,view:Y}=K;K=
W&&W.coords||{};K={accuracy:K.accuracy,altitude:K.altitude,altitudeAccuracy:K.altitudeAccuracy,heading:K.heading,latitude:K.latitude,longitude:K.longitude,speed:K.speed};K=W?{coords:K,timestamp:W.timestamp}:W;K=(K=K&&K.coords)?new B({longitude:K.longitude,latitude:K.latitude,z:K.altitude||null,spatialReference:{wkid:4326}}):null;return D(K,Y,M)};m.supported=function(){var K;(K=g("esri-geolocation"))||N.warn("geolocation-unsupported","Geolocation unsupported.");K&&((K=window.isSecureContext)||N.warn("insecure-context",
"Geolocation requires a secure origin."));return K};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(m,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});m.conversionTypeKebabDict=a;m.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,
UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,
UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,
UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",
UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],
function(m,a,b){const g=new a.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});m.generalizeToRESTParameters=function(e){const {geometries:B,deviationUnit:t,maxDeviation:A}=e.toJSON();e={maxDeviation:A};B&&B.length&&(e.geometries=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B}),e.sr=JSON.stringify(B[0].spatialReference));g.write(t,
e,"deviationUnit");return e};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(m,a,b,g,e,B,
t,A,y){b=function(k){function n(d){d=k.call(this,d)||this;d.deviationUnit=null;d.geometries=null;d.maxDeviation=null;return d}m._inheritsLoose(n,k);return n}(b.JSONSupport);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([g.property({json:{read:{reader:k=>k?k.map(n=>y.fromJSON(n)):null},write:{writer:(k,n)=>{n.geometries=k.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([g.property({type:Number,json:{write:!0}})],b.prototype,
"maxDeviation",void 0);b=a.__decorate([A.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=t.ensureType(b);return b})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(m,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});m.lengthsToRESTParameters=function(g){const {polylines:e,lengthUnit:B,geodesic:t,calculationType:A}=g.toJSON(),y={};y.polylines=JSON.stringify(e);g=g.polylines[0].spatialReference;y.sr=g.wkid?g.wkid:JSON.stringify(g.toJSON());
B&&(y.lengthUnit=B);t&&(y.geodesic=t);A&&(y.calculationType=b.toJSON(A));return y};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n){b=function(d){function u(r){r=d.call(this,r)||this;r.calculationType=null;r.geodesic=null;r.lengthUnit=null;r.polylines=null;return r}m._inheritsLoose(u,d);return u}(g.JSONSupport);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([e.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([e.property({type:[n],
json:{read:{reader:d=>d?d.map(u=>k.fromJSON(u)):null},write:{writer:(d,u)=>{u.polylines=d.map(r=>r.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([y.subclass("esri.rest.support.LengthsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,a,b){const g=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),
e=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});m.offsetToRESTParameters=function(B){const {geometries:t,bevelRatio:A,offsetDistance:y,offsetHow:k,offsetUnit:n}=B.toJSON();B={bevelRatio:A,offsetDistance:y};t&&t.length&&(B.geometries=JSON.stringify({geometryType:b.getJsonType(t[0]),geometries:t}),B.sr=JSON.stringify(t[0].spatialReference));k&&(B.offsetHow=g.toJSON(k));n&&(B.offsetUnit=e.toJSON(n));return B};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(m,a,b,g,e,B,t,A,y){b=function(k){function n(d){d=k.call(this,d)||this;d.bevelRatio=
null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}m._inheritsLoose(n,k);return n}(b.JSONSupport);a.__decorate([g.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([g.property({json:{read:{reader:k=>k?k.map(n=>y.fromJSON(n)):null},write:{writer:(k,n)=>{n.geometries=k.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([g.property({type:Number,json:{write:!0}})],b.prototype,"offsetDistance",void 0);a.__decorate([g.property({type:String,
json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([A.subclass("esri.rest.support.OffsetParameters")],b);b.from=t.ensureType(b);return b})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(m,
a,b,g,e,B,t,A){function y(){y=a._asyncToGenerator(function*(n,d,u){d=k(d);n=B.parseUrl(n);const r={...n.query,f:"json",...d.toJSON()},I=d.outSpatialReference,J=e.getJsonType(d.geometries[0]);d=B.asValidOptions(r,u);return b(n.path+"/project",d).then(({data:{geometries:L}})=>t.decodeGeometries(L,J,I))});return y.apply(this,arguments)}const k=g.ensureType(A);m.project=function(n,d,u){return y.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(m,a){m.decodeGeometries=function(b,g,e){const B=a.getGeometryType(g);return b.map(t=>{t=B.fromJSON(t);t.spatialReference=e;return t})};m.encodeGeometries=function(b){return{geometryType:a.getJsonType(b[0]),geometries:b.map(g=>g.toJSON())}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,a,b,g,e,B,t,A,y){b=function(k){function n(d){d=k.call(this,d)||this;d.geometries=null;d.outSpatialReference=null;d.transformation=null;d.transformForward=null;return d}m._inheritsLoose(n,k);n.prototype.toJSON=function(){const d=this.geometries.map(I=>I.toJSON()),u=this.geometries[0],r={};r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());r.inSR=u.spatialReference.wkid||JSON.stringify(u.spatialReference.toJSON());r.geometries=JSON.stringify({geometryType:y.getJsonType(u),
geometries:d});this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(r.transformForward=this.transformForward);return r};return n}(b.JSONSupport);a.__decorate([g.property()],b.prototype,"geometries",void 0);a.__decorate([g.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([g.property()],b.prototype,"transformation",void 0);a.__decorate([g.property()],b.prototype,"transformForward",
void 0);return b=a.__decorate([A.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,a,b){const g=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",
esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});m.relationToRESTParameters=function(e){const {geometries1:B,geometries2:t,relation:A,relationParameter:y}=e.toJSON();e={};if(B&&B.length){e.geometries1=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B});const k=B[0].spatialReference;e.sr=k.wkid?k.wkid:
JSON.stringify(k)}t&&0<t.length&&(e.geometries2=JSON.stringify({geometryType:b.getJsonType(t[0]),geometries:t}));A&&(e.relation=g.toJSON(A));y&&(e.relationParam=y);return e};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,a,b,g,e,B,t,A,y){b=function(k){function n(d){d=k.call(this,d)||this;d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}m._inheritsLoose(n,k);return n}(b.JSONSupport);a.__decorate([g.property({json:{read:{reader:k=>k?k.map(n=>y.fromJSON(n)):null},write:{writer:(k,n)=>{n.geometries1=k.map(d=>d.toJSON())}}}})],b.prototype,"geometries1",void 0);a.__decorate([g.property({json:{read:{reader:k=>k?k.map(n=>y.fromJSON(n)):null},write:{writer:(k,n)=>{n.geometries2=
k.map(d=>d.toJSON())}}}})],b.prototype,"geometries2",void 0);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([g.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([A.subclass("esri.rest.support.RelationParameters")],b);b.from=t.ensureType(b);return b})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(m,a){const b=new a.JSONMap({0:"default-curve-extension",
1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});m.trimExtendToRESTParameters=function(g){const {extendHow:e,polylines:B,trimExtendTo:t}=g.toJSON();g={};g.extendHow=b.toJSON(e);B&&B.length&&(g.polylines=JSON.stringify(B),g.sr=JSON.stringify(B[0].spatialReference));t&&(g.trimExtendTo=JSON.stringify(t));return g};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(m,a,b,g,e,B,t,A,y,k,n){b=function(d){function u(r){r=d.call(this,r)||this;r.extendHow="default-curve-extension";r.polylines=null;r.trimExtendTo=null;return r}m._inheritsLoose(u,d);return u}(g.JSONSupport);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([e.property({type:[n],json:{read:{reader:d=>d?d.map(u=>k.fromJSON(u)):null},write:{writer:(d,u)=>{u.polylines=d.map(r=>r.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([e.property({json:{read:{reader:d=>
d?k.fromJSON(d):null},write:{writer:(d,u)=>{u.trimExtendTo=d.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([y.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=A.ensureType(b);return b})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,a,b,g,e,B,t,A){m.GoToMixin=y=>{y=function(k){function n(...d){d=k.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}a._inheritsLoose(n,k);n.prototype.callGoTo=function(d){const {view:u}=this;return this.goToOverride?this.goToOverride(u,d):u.goTo(d.target,d.options)};return n}(y);b.__decorate([g.property()],y.prototype,"goToOverride",void 0);b.__decorate([g.property()],y.prototype,"view",void 0);return y=b.__decorate([A.subclass("esri.widgets.support.GoTo")],y)};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/reactiveUtils ../core/string ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(m,
a,b,g,e,B,t,A,y,k,n,d,u,r,I,J,L,q,O,x,V){const X=/<[a-z/][\s\S]*>/i;b=function(Z){function aa(l,w){var h=Z.call(this,l,w)||this;h._activeMenuItemIndex=-1;h._handles=new e;h._inputNode=null;h._menuItemCount=0;h._sourceMenuButtonNode=null;h._sourceListNode=null;h._suggestionListNode=null;h._searchResultRenderer=new I;h._locateFailed=null;h._container=null;h.activeMenu="none";h.activeSource=null;h.activeSourceIndex=null;h.allPlaceholder=null;h.allSources=null;h.autoNavigate=null;h.autoSelect=null;h.defaultSources=
null;h.disabled=!1;h.goToOverride=null;h.iconClass="esri-icon-search";h.includeDefaultSources=null;h.label=void 0;h.locationEnabled=null;h.maxResults=null;h.maxSuggestions=null;h.messages=null;h.messagesCommon=null;h.minSuggestCharacters=null;h.popupEnabled=null;h.popupTemplate=null;h.portal=null;h.resultGraphic=null;h.resultGraphicEnabled=null;h.results=null;h.searchAllEnabled=null;h.searchTerm=null;h.selectedResult=null;h.sources=null;h.suggestions=null;h.suggestionsEnabled=null;h.view=null;h.viewModel=
new J;h._clearActiveMenu=()=>{h.activeMenu="none"};h._removeActiveMenu=E=>{var Q;(E=E.relatedTarget)&&null!=(Q=h._container)&&Q.contains(E)||h._clearActiveMenu()};h.own([B.watch(()=>h.searchTerm,E=>{(E&&"warning"===h.activeMenu||!E&&!h.get("viewModel.selectedSuggestion.location"))&&h._clearActiveMenu()}),B.on(()=>{var E;return null==(E=h.viewModel)?void 0:E.allSources},"change",()=>h._watchSourceChanges()),B.watch(()=>h.activeMenu,()=>h._resetActiveMenuItemIndex(),B.initial),B.watch(()=>{var E;return null==
(E=h.viewModel)?void 0:E.defaultPopupTemplate},E=>{E&&(E.content=h._renderSearchResultsContent.bind(m._assertThisInitialized(h)))},B.initial)]);return h}m._inheritsLoose(aa,Z);var G=aa.prototype;G.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};G.clear=function(){};G.focus=function(){var l;null==(l=this._inputNode)?
void 0:l.focus();this.emit("search-focus")};G.blur=function(){var l;null==(l=this._inputNode)?void 0:l.blur();this.emit("search-blur")};G.search=function(l){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const w=new AbortController,{signal:h}=w;this._searchController=w;return this.viewModel.search(l,{signal:h}).catch(E=>{if(this._searchController===w)return this._clearActiveMenu(),this._searchController=null,E}).then(E=>{if(this._searchController===w)return this.activeMenu=E.numResults?
"none":"warning",this._searchController=null,E})};G.suggest=function(l){this._cancelSuggest();const w=new AbortController,{signal:h}=w;this._suggestController=w;return this.viewModel.suggest(l,null,{signal:h}).then(E=>{if(this._suggestController===w)return this._suggestController=null,E.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),E}).catch(()=>{if(this._suggestController===w)return this._suggestController=null})};G.render=function(){const {state:l}=this.viewModel;return x.tsx("div",
{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===l,["esri-widget--disabled"]:this.disabled})},"loading"===l?this.renderLoader():this.renderContainer())};G.renderSubmitButton=function(){const {messages:l,disabled:w}=this;return x.tsx("button",{"aria-label":l.searchButtonTitle,bind:this,disabled:w,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:l.searchButtonTitle,type:"button"},
x.tsx("span",{"aria-hidden":"true",class:"esri-icon-search"}))};G.renderWarningMenu=function(){return x.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},x.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};G.renderSourceMenuButton=function(){const {messages:l,activeMenu:w,sourceMenuId:h,sourceMenuButtonId:E,disabled:Q}=this,{activeSourceIndex:z,allSources:D}=this.viewModel;return 1<D.length?x.tsx("button",{id:E,key:"esri-search__source-menu-button",
bind:this,disabled:Q,"aria-label":l.searchIn,title:l.searchIn,"aria-haspopup":"true","aria-expanded":("source"===w).toString(),"aria-controls":h,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:L.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),x.tsx("span",{"aria-hidden":"true",
class:"esri-icon-up-arrow esri-search__sources-button--up"}),x.tsx("span",{class:"esri-search__source-name"},this._getSourceName(z))):null};G.renderSourcesList=function(){const {allSources:l,searchAllEnabled:w}=this.viewModel,{_activeMenuItemIndex:h,activeMenu:E,sourceMenuId:Q,sourceMenuButtonId:z}=this,D="source"===E&&-1<h?this._buildId("source-item",h):null;return 1<l.length?x.tsx("ul",{"aria-activedescendant":D,"aria-labelledby":z,id:Q,role:"menu",bind:this,afterCreate:L.storeNode,onkeydown:this._handleSourceMenuKeydown,
onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},w?this.renderSource(J.ALL_INDEX):null,l.map((F,N)=>this.renderSource(N)).toArray()):null};G.renderSourcesMenu=function(){const {allSources:l}=this.viewModel;return 1<l.length?x.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};G.renderLoader=function(){const {messages:l,messagesCommon:w,disabled:h}=this;return x.tsx("div",
{class:"esri-widget__loader",key:"base-loader",tabIndex:h?-1:null},x.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),x.tsx("span",{class:"esri-icon-font-fallback-text"},l.searchButtonTitle),x.tsx("span",{class:"esri-widget__loader-text"},w.loading))};G.renderContainer=function(){const {allSources:l,state:w}=this.viewModel,{activeMenu:h}=this;return x.tsx("div",{tabIndex:-1,afterCreate:E=>{this._container=E;E.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:E=>
{E.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<l.length,["esri-search--loading"]:"loading"===w,["esri-search--searching"]:"searching"===w,["esri-search--warning"]:"warning"===h,["esri-search--sources"]:"source"===h,["esri-search--show-suggestions"]:"suggestion"===h},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};
G.renderClearButton=function(){return this.searchTerm?x.tsx("button",{bind:this,disabled:this.disabled,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};G.renderLocationGroup=function(){const {messages:l,locationEnabled:w,displayedSearchTerm:h}=this,E="suggestion"===
this.activeMenu&&0===this._activeMenuItemIndex;return w&&!h?x.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},x.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",
E?"esri-menu__list-item--focus":null)},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",l.useCurrentLocation)):null};G.renderInput=function(){const {activeMenu:l,locationEnabled:w,displayedSearchTerm:h,messages:E,suggestionsMenuId:Q,inputId:z,_activeMenuItemIndex:D,disabled:F}=this,{maxInputLength:N,placeholder:T,searchTerm:K,suggestionCount:M}=this.viewModel,W=!!(w&&!h||M),Y="suggestion"===l&&-1<D?this._buildId("suggestion-item",D):null;return x.tsx("input",{"aria-activedescendant":Y,
"aria-autocomplete":"list","aria-expanded":(W&&"suggestion"===l).toString(),"aria-controls":W?Q:null,"aria-haspopup":"listbox","aria-label":E.searchButtonTitle,bind:this,disabled:F,placeholder:T,maxlength:N,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:K,id:z,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:L.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,
onblur:this.blur,title:K?"":T})};G.renderForm=function(){return x.tsx("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};G.renderSuggestList=function(l){const {sourceIndex:w}=l,h=l.results;return l.results.length?x.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${w}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},h.map(E=>this.renderSuggestion(E,this._menuItemCount++))):
null};G.renderSuggestionsGroup=function(){const {suggestions:l}=this.viewModel;return l?l.map(w=>[this.renderSuggestionHeader(w),this.renderSuggestList(w)]):null};G.renderSuggestionsMenu=function(){const {displayedSearchTerm:l,locationEnabled:w,suggestionsMenuId:h,inputId:E}=this,{suggestionCount:Q}=this.viewModel;this._menuItemCount=0;return w&&!l||Q?x.tsx("div",{id:h,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":E,
bind:this,afterCreate:L.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};G.renderInputContainer=function(){return x.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};G.renderSuggestionHeader=function(l){const {allSources:w,activeSourceIndex:h}=this.viewModel,{sourceIndex:E}=l,Q=1<w.length&&h===J.ALL_INDEX;return l.results.length&&
Q?x.tsx("div",{key:`esri-search__suggestion-header-${E}`,class:"esri-menu__header"},this._getSourceName(E)):null};G.renderSuggestion=function(l,w){const {_activeMenuItemIndex:h,messages:E}=this;var {searchTerm:Q}=this.viewModel;if(Q){var {text:z}=l;z=z||E.untitledResult;const D=[];if(X.test(z))D.push(x.tsx("div",{innerHTML:z}));else{z=this._splitResult(z,Q);const F=Q.toLowerCase();z.forEach((N,T)=>{N&&N.length&&(N.toLowerCase()===F?D.push(x.tsx("strong",{key:T},N)):D.push(N))})}Q="suggestion"===this.activeMenu&&
h===w;return x.tsx("li",{bind:this,id:this._buildId("suggestion-item",w),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===w).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${w}`,"data-suggestion":l,role:"option",class:this.classes("esri-menu__list-item",Q?"esri-menu__list-item--focus":null)},D)}};G.renderSource=function(l){const {activeSourceIndex:w,searchAllEnabled:h}=this.viewModel,E={["esri-menu__list-item--active"]:l===w,["esri-menu__list-item--focus"]:"source"===
this.activeMenu&&l===(h?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return x.tsx("li",{bind:this,key:`esri-search__source-${l}`,id:this._buildId("source-item",h?l+1:l),"aria-checked":(l===w).toString(),onclick:this._handleSourceClick,"data-source-index":l,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",E)},this._getSourceName(l))};G.renderNoResultsWarning=function(l){const {messages:w}=this;l=l?V.substitute(w.noResultsFoundForValue,{value:`"${l}"`}):
w.noResultsFound;return x.tsx("div",{key:"esri-search__no_results"},x.tsx("div",{class:"esri-search__warning-header"},w.noResults),x.tsx("div",{class:"esri-search__warning-text"},l))};G.renderEmptySearchWarning=function(){const {messages:l}=this;return x.tsx("div",{key:"esri-search__empty-search"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),x.tsx("span",{class:"esri-search__no-value-text"},l.emptyValue))};G.renderLocateWarning=function(){const {messages:l}=this;return x.tsx("div",
{key:"esri-search__locate-error"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),x.tsx("span",{class:"esri-search__no-value-text"},l.locateError))};G.renderWarning=function(){var l;const {displayedSearchTerm:w,_locateFailed:h}=this,{viewModel:E}=this;return h?this.renderLocateWarning():null!=(l=E.selectedSuggestion)&&l.location||w?this.renderNoResultsWarning(w):this.renderEmptySearchWarning()};G._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};G._buildId=
function(l,w){return`${this.id}-${l}${void 0===w?"":`-${w}`}`};G._watchSourceChanges=function(){const {_handles:l,viewModel:{allSources:w}}=this;l.remove("sources");w.forEach(h=>l.add(B.watch(()=>h.name,()=>this.scheduleRender()),"sources"))};G._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};G._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var l;null==
(l=this._sourceListNode)?void 0:l.focus()}};G._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};G._handleSearchButtonClick=function(){this.search()};G._handleSuggestionClick=function(l){if(l=l.currentTarget["data-suggestion"])this._focus(),this.search(l)};G._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};G._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const l=new AbortController,{signal:w}=l;this._searchController=
l;this.viewModel.searchNearby({signal:w}).then(h=>{this.activeMenu=h.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};G._handleSourceClick=function(l){this._setSourceFromMenuItem(l.currentTarget)};G._setSourceFromMenuItem=function(l){var w;l&&(this.viewModel.activeSourceIndex=l["data-source-index"],this._clearActiveMenu(),null==(w=this._sourceMenuButtonNode)?void 0:w.focus())};G._cancelSuggest=function(){this._suggestController&&
(this._suggestController.abort(),this._suggestController=null)};G._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};G._handleInputKeyup=function(l){var w,h=g.eventKey(l);if(!l.ctrlKey&&!l.metaKey&&"Copy"!==h&&"ArrowLeft"!==h&&"ArrowRight"!==h&&"Shift"!==h)if("Tab"===h||"Escape"===h||l.shiftKey&&"Tab"===h)this._cancelSuggest(),"Escape"===h&&this._clearActiveMenu();else{var E="Home"===h||"End"===h||"ArrowUp"===h||"ArrowDown"===
h;if("Enter"===h&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var Q=null==(w=this._suggestionListNode)?void 0:w.getElementsByTagName("li");if(null!=Q&&Q.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(E){l.preventDefault();this._cancelSuggest();this._handleItemNavigation(h,Q,this._suggestionListNode);return}l=Q[this._activeMenuItemIndex];if("Enter"===h&&l){(h=l["data-suggestion"])?(this._focus(),this.search(h)):l["data-current-location-item"]&&this._useCurrentLocation();
return}}this.viewModel.searchTerm&&this.suggest()}}};G._handleItemNavigation=function(l,w,h){const E=this._activeMenuItemIndex;"Home"===l&&(this._activeMenuItemIndex=0);"End"===l&&(this._activeMenuItemIndex=w.length-1);"ArrowUp"===l&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?w.length-1:this._activeMenuItemIndex-1);"ArrowDown"===l&&(this._activeMenuItemIndex=this._activeMenuItemIndex===w.length-1?0:this._activeMenuItemIndex+1);E!==this._activeMenuItemIndex&&L.keepMenuItemWithinView(w[this._activeMenuItemIndex],
h)};G._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};G._openSuggestionMenu=function(){this.activeMenu="suggestion"};G._handleInputPaste=function(l){l=l.target;this.viewModel.searchTerm!==l.value&&(this.viewModel.searchTerm=l.value);this.viewModel.searchTerm&&this.suggest()};G._handleSourceMenuKeydown=function(l){const w=g.eventKey(l);L.isActivationKey(w)?(l.preventDefault(),l=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],
this._setSourceFromMenuItem(l)):"ArrowUp"!==w&&"ArrowDown"!==w&&"End"!==w&&"Home"!==w||l.preventDefault()};G._handleSourceMenuKeyup=function(l){var w;const h=g.eventKey(l),E="ArrowUp"===h||"ArrowDown"===h||"End"===h||"Home"===h;E&&l.preventDefault();if("Escape"===h){var Q;this._clearActiveMenu();null==(Q=this._sourceMenuButtonNode)?void 0:Q.focus()}else(l=null==(w=this._sourceListNode)?void 0:w.getElementsByTagName("li"))&&0!==l.length&&E&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(h,
l,this._sourceListNode.parentElement))};G._focus=function(l){this.focus();l&&(this.activeMenu=l)};G._formSubmit=function(l){l.preventDefault();-1===this._activeMenuItemIndex&&this.search()};G._getSourceName=function(l){const {messages:w}=this;var {allSources:h}=this.viewModel;h=h.getItemAt(l);return l===J.ALL_INDEX?w.all:h?h.name||w.untitledSource:w.untitledSource};G._splitResult=function(l,w){w=t.escapeRegExpString(w);return l.replace(new RegExp(`(^|)(${w})(|$)`,"ig"),"$1|$2|$3").split("|")};G._renderSearchResultsContent=
function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};m._createClass(aa,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);
return aa}(r);a.__decorate([d.property()],b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([d.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"inputId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"suggestionsMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([d.property()],b.prototype,"activeMenu",
void 0);a.__decorate([A.aliasOf("viewModel.activeSource")],b.prototype,"activeSource",void 0);a.__decorate([A.aliasOf("viewModel.activeSourceIndex")],b.prototype,"activeSourceIndex",void 0);a.__decorate([A.aliasOf("viewModel.allPlaceholder")],b.prototype,"allPlaceholder",void 0);a.__decorate([A.aliasOf("viewModel.allSources")],b.prototype,"allSources",void 0);a.__decorate([A.aliasOf("viewModel.autoNavigate")],b.prototype,"autoNavigate",void 0);a.__decorate([A.aliasOf("viewModel.autoSelect")],b.prototype,
"autoSelect",void 0);a.__decorate([A.aliasOf("viewModel.defaultSources")],b.prototype,"defaultSources",void 0);a.__decorate([d.property()],b.prototype,"disabled",void 0);a.__decorate([A.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);a.__decorate([d.property()],b.prototype,"iconClass",void 0);a.__decorate([A.aliasOf("viewModel.includeDefaultSources")],b.prototype,"includeDefaultSources",void 0);a.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
b.prototype,"label",void 0);a.__decorate([A.aliasOf("viewModel.locationEnabled")],b.prototype,"locationEnabled",void 0);a.__decorate([A.aliasOf("viewModel.maxResults")],b.prototype,"maxResults",void 0);a.__decorate([A.aliasOf("viewModel.maxSuggestions")],b.prototype,"maxSuggestions",void 0);a.__decorate([d.property(),q.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([d.property(),q.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);
a.__decorate([A.aliasOf("viewModel.minSuggestCharacters")],b.prototype,"minSuggestCharacters",void 0);a.__decorate([A.aliasOf("viewModel.popupEnabled")],b.prototype,"popupEnabled",void 0);a.__decorate([A.aliasOf("viewModel.popupTemplate")],b.prototype,"popupTemplate",void 0);a.__decorate([A.aliasOf("viewModel.portal")],b.prototype,"portal",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphic")],b.prototype,"resultGraphic",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphicEnabled")],b.prototype,
"resultGraphicEnabled",void 0);a.__decorate([A.aliasOf("viewModel.results")],b.prototype,"results",void 0);a.__decorate([A.aliasOf("viewModel.searchAllEnabled")],b.prototype,"searchAllEnabled",void 0);a.__decorate([A.aliasOf("viewModel.searchTerm")],b.prototype,"searchTerm",void 0);a.__decorate([A.aliasOf("viewModel.selectedResult")],b.prototype,"selectedResult",void 0);a.__decorate([A.aliasOf("viewModel.sources")],b.prototype,"sources",void 0);a.__decorate([A.aliasOf("viewModel.suggestions")],b.prototype,
"suggestions",void 0);a.__decorate([A.aliasOf("viewModel.suggestionsEnabled")],b.prototype,"suggestionsEnabled",void 0);a.__decorate([A.aliasOf("viewModel.view")],b.prototype,"view",void 0);a.__decorate([O.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),d.property({type:J})],b.prototype,"viewModel",void 0);a.__decorate([A.aliasOf("viewModel.clear")],b.prototype,"clear",null);return b=a.__decorate([u.subclass("esri.widgets.Search")],b)});