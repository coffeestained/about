// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/maybe ../core/object ../core/urlUtils ./utils ./support/NetworkServiceDescription".split(" "),function(g,n,h,u,w,x,p,k,y){function q(){q=n._asyncToGenerator(function*(a,c,d){if(!a)throw new u("network-service:missing-url","Url to Network service is missing");var b=k.asValidOptions({f:"json",token:c},d);({data:b}=yield h(a,b));b.supportedTravelModes||(b.supportedTravelModes=[]);for(let f=0;f<b.supportedTravelModes.length;f++)b.supportedTravelModes[f].id||
(b.supportedTravelModes[f].id=b.supportedTravelModes[f].itemId);a=10.4<=b.currentVersion?z(a,c,d):A(a,d);const {defaultTravelMode:e,supportedTravelModes:l}=yield a;b.defaultTravelMode=e;b.supportedTravelModes=l;return y.fromJSON(b)});return q.apply(this,arguments)}function A(a,c){return r.apply(this,arguments)}function r(){r=n._asyncToGenerator(function*(a,c){var d,b,e=k.asValidOptions({f:"json"},c);({data:a}=yield h(a.replace(/\/rest\/.*$/i,"/info"),e));if(!a||!a.owningSystemUrl)return{supportedTravelModes:[],
defaultTravelMode:null};({owningSystemUrl:a}=a);const l=p.removeTrailingSlash(a)+"/sharing/rest/portals/self";({data:e}=yield h(l,e));e=x.getDeepValue("helperServices.routingUtilities.url",e);if(!e)return{supportedTravelModes:[],defaultTravelMode:null};a=k.parseUrl(a);a={f:"json",serviceName:/\/solve$/i.test(a.path)?"Route":/\/solveclosestfacility$/i.test(a.path)?"ClosestFacility":"ServiceAreas"};c=k.asValidOptions(a,c);e=p.removeTrailingSlash(e)+"/GetTravelModes/execute";a=yield h(e,c);c=[];e=null;
if(null!=a&&null!=(d=a.data)&&null!=(b=d.results)&&b.length){d=a.data.results;for(const m of d)if("supportedTravelModes"===m.paramName){var f;if(null!=(f=m.value)&&f.features)for(const {attributes:v}of m.value.features)v&&(d=JSON.parse(v.TravelMode),c.push(d))}else"defaultTravelMode"===m.paramName&&(e=m.value)}return{supportedTravelModes:c,defaultTravelMode:e}});return r.apply(this,arguments)}function z(a,c,d){return t.apply(this,arguments)}function t(){t=n._asyncToGenerator(function*(a,c,d){try{const b=
k.asValidOptions({f:"json",token:c},d),e=p.removeTrailingSlash(a)+"/retrieveTravelModes",{data:{supportedTravelModes:l,defaultTravelMode:f}}=yield h(e,b);return{supportedTravelModes:l,defaultTravelMode:f}}catch(b){throw new u("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:b});}});return t.apply(this,arguments)}g.collectGeometries=function(a,c,d,b){b[d]=[c.length,c.length+a.length];a.forEach(e=>{c.push(e.geometry)})};g.dropZValuesOffInputGeometry=
function(a,c){for(let d=0;d<c.length;d++){const b=a[c[d]];if(b&&b.length)for(const e of b)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")};g.fetchServiceDescription=function(a,c,d){return q.apply(this,arguments)};g.isInputGeometryZAware=function(a,c){for(let d=0;d<c.length;d++){const b=a[c[d]];if(b&&b.length)for(const e of b)if(w.isSome(e)&&e.hasZ)return!0}return!1};Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});