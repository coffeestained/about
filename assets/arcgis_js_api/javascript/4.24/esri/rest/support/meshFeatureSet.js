// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../Graphic ../../core/maybe ../../geometry/Extent ../../geometry/Mesh ../../geometry/Point ../../geometry/support/axisAngleDegrees ../../geometry/support/MeshTransform ../../layers/support/infoFor3D ./FeatureSet".split(" "),function(l,p,m,q,n,r,t,u,h,v){function w(a){return({attributes:d})=>{if(!d)return{};if(!a)return d;for(const b in d)a.has(b)||delete d[b];return d}}function x(a,d,b){const {status:c,source:f}=y(a);if(c===g.FAILED)return null;const e=z(a,d,b),k=q.fromJSON(a.geometry);
k.spatialReference=d;a=A(a,b);return c===g.PENDING?n.createIncomplete(e,{extent:k,transform:a}):n.createWithExternalSource(e,f,{extent:k,transform:a})}function z({attributes:a},d,{transformFieldRoles:b}){return new r({x:a[b.originX],y:a[b.originY],z:a[b.originZ],spatialReference:d})}function A({attributes:a,assetMappings:d},{transformFieldRoles:b}){var c;return new u({translation:[a[b.translationX],a[b.translationY],a[b.translationZ]],rotation:t.fromAxisAndAngle([a[b.rotationX],a[b.rotationY],a[b.rotationZ]],
a[b.rotationDeg]),scale:[a[b.scaleX],a[b.scaleY],a[b.scaleZ]],geographic:!(null!=(c=d[h.AssetMapFieldRole.flags])&&c.includes("PROJECT_VERTICES"))})}function y(a){if(!a.assetMappings)return{status:g.FAILED};const d=[],b=new Map;for(const f of a.assetMappings){a=f[h.AssetMapFieldRole.seqNo];const e=f[h.AssetMapFieldRole.assetName],k=f[h.AssetMapFieldRole.assetURL];var c=f[h.AssetMapFieldRole.conversionStatus];if(c===h.Status.FAILED)return{status:g.FAILED};if(c!==h.Status.COMPLETED)return{status:g.PENDING};
null==a?d.push({name:e,source:k}):((c=b.get(e))?c=c.multipart:(c=[],d.push({name:e,source:{multipart:c}}),b.set(e,{multipart:c})),c[a]=k)}return{status:g.COMPLETED,source:d}}var g;(function(a){a[a.FAILED=0]="FAILED";a[a.PENDING=1]="PENDING";a[a.COMPLETED=2]="COMPLETED"})(g||(g={}));l.meshFeatureSetFromJSON=function(a,d,b){var c=b.features;b.features=[];delete b.geometryType;b=v.fromJSON(b);b.geometryType="mesh";const f=b.spatialReference;a=m.isNone(a.outFields)||!a.outFields.length?()=>({}):w(a.outFields.includes("*")?
null:new Set(a.outFields));for(const e of c)c=x(e,f,d),m.isSome(c)&&b.features.push(new p({geometry:c,attributes:a(e)}));return b};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});