// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f){var t;m=new m.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});k=t=function(w){function C(u){u=w.call(this,u)||this;u.dpi=96;u.format=null;u.origin=null;u.minScale=0;u.maxScale=0;u.size=null;u.spatialReference=null;return u}g._inheritsLoose(C,w);C.create=function(u=
{}){const {resolutionFactor:D=1,scales:J,size:S=256,spatialReference:T=d.WebMercator,numLODs:P=24}=u;if(!r.isValid(T)){u=[];if(J)for(var X=0;X<J.length;X++){var Q=J[X];u.push({level:X,scale:Q,resolution:Q})}else for(X=5E-4,Q=P-1;0<=Q;Q--)u.unshift({level:Q,scale:X,resolution:X}),X*=2;return new t({dpi:96,lods:u,origin:new h(0,0,T),size:[S,S],spatialReference:T})}X=r.getInfo(T);u=u.origin?new h({x:u.origin.x,y:u.origin.y,spatialReference:T}):X?new h({x:X.origin[0],y:X.origin[1],spatialReference:T}):
new h({x:0,y:0,spatialReference:T});X=1/(39.37*E.getMetersPerUnitForSR(T)*96);Q=[];if(J)for(var O=0;O<J.length;O++){var Z=J[O];Q.push({level:O,scale:Z,resolution:Z*X})}else{var L=r.isGeographic(T)?512/S*5.916575275917094E8:256/S*5.91657527591555E8;O=Math.ceil(P/D);Q.push({level:0,scale:L,resolution:L*X});for(Z=1;Z<O;Z++)L/=2**D,Q.push({level:Z,scale:L,resolution:L*X})}return new t({dpi:96,lods:Q,origin:u,size:[S,S],spatialReference:T})};var x=C.prototype;x.readOrigin=function(u,D){return h.fromJSON({spatialReference:D.spatialReference,
...u})};x.readSize=function(u,D){return[D.cols,D.rows]};x.writeSize=function(u,D){D.cols=u[0];D.rows=u[1]};x.zoomToScale=function(u){const D=this.scales;if(0>=u)return D[0];if(u>=D.length-1)return D[D.length-1];{const J=Math.floor(u);return D[J]/(D[J]/D[J+1])**(u-J)}};x.scaleToZoom=function(u){const D=this.scales,J=D.length-1;let S=0;for(;S<J;S++){const T=D[S],P=D[S+1];if(T<=u)break;if(P===u)return S+1;if(T>u&&P<u)return S+Math.log(T/u)/Math.log(T/P)}return S};x.snapScale=function(u,D=.95){u=this.scaleToZoom(u);
return u%Math.floor(u)>=D?this.zoomToScale(Math.ceil(u)):this.zoomToScale(Math.floor(u))};x.tileAt=function(u,D,J,S){var T=this.lodAt(u);if(!T)return null;let P;if("number"===typeof D)P=D,D=J;else{if(r.equals(D.spatialReference,this.spatialReference))P=D.x,D=D.y;else{S=B.project(D,this.spatialReference);if(q.isNone(S))return null;P=S.x;D=S.y}S=J}J=T.resolution*this.size[0];T=T.resolution*this.size[1];S||(S={id:null,level:0,row:0,col:0,extent:e.create()});S.level=u;S.row=Math.floor((this.origin.y-
D)/T+.001);S.col=Math.floor((P-this.origin.x)/J+.001);this.updateTileInfo(S);return S};x.updateTileInfo=function(u,D=t.ExtrapolateOptions.NONE){var J=this.lodAt(u.level);J||D!==t.ExtrapolateOptions.POWER_OF_TWO||(D=this.lods[this.lods.length-1],D.level<u.level&&(J=D));if(J){var S=u.level-J.level;D=J.resolution*this.size[0]/2**S;J=J.resolution*this.size[1]/2**S;u.id=`${u.level}/${u.row}/${u.col}`;u.extent||(u.extent=e.create());u.extent[0]=this.origin.x+u.col*D;u.extent[1]=this.origin.y-(u.row+1)*
J;u.extent[2]=u.extent[0]+D;u.extent[3]=u.extent[1]+J}};x.upsampleTile=function(u){const D=this._upsampleLevels[u.level];if(!D||-1===D.parentLevel)return!1;u.level=D.parentLevel;u.row=Math.floor(u.row/D.factor+.001);u.col=Math.floor(u.col/D.factor+.001);this.updateTileInfo(u);return!0};x.getTileBounds=function(u,D){var {resolution:J}=this.lodAt(D.level);const S=J*this.size[0];J*=this.size[1];u[0]=this.origin.x+D.col*S;u[1]=this.origin.y-(D.row+1)*J;u[2]=u[0]+S;u[3]=u[1]+J;return u};x.lodAt=function(u){return this._levelToLOD&&
this._levelToLOD[u]||null};x.clone=function(){return t.fromJSON(this.write({}))};x.getOrCreateCompatible=function(u,D){if(256===this.size[0]&&256===this.size[1])return 256===u?this:null;const J=[],S=this.lods.length;for(let T=0;T<S;T++){const P=this.lods[T];J.push(new f({level:P.level,scale:P.scale,resolution:P.resolution*D}))}return new t({size:[u,u],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:J})};x._initializeUpsampleLevels=
function(){const u=this.lods;this._upsampleLevels=[];let D=null;for(let J=0;J<u.length;J++){const S=u[J];this._upsampleLevels[S.level]={parentLevel:D?D.level:-1,factor:D?D.resolution/S.resolution:0};D=S}};g._createClass(C,[{key:"isWrappable",get:function(){const {spatialReference:u,origin:D}=this;if(u&&D){const J=r.getInfo(u);return u.isWrappable&&Math.abs(J.origin[0]-D.x)<=J.dx}return!1}},{key:"lods",set:function(u){let D=0,J=0;const S=[];this._levelToLOD={};u&&(D=-Infinity,J=Infinity,u.forEach(T=>
{S.push(T.scale);D=T.scale>D?T.scale:D;J=T.scale<J?T.scale:J;this._levelToLOD[T.level]=T}));this._set("scales",S);this._set("minScale",D);this._set("maxScale",J);this._set("lods",u);this._initializeUpsampleLevels()}}]);return C}(k.JSONSupport);p.__decorate([z.property({type:Number,json:{write:!0}})],k.prototype,"compressionQuality",void 0);p.__decorate([z.property({type:Number,json:{write:!0}})],k.prototype,"dpi",void 0);p.__decorate([z.property({type:String,json:{read:m.read,write:m.write,origins:{"web-scene":{read:!1,
write:!1}}}})],k.prototype,"format",void 0);p.__decorate([z.property({readOnly:!0})],k.prototype,"isWrappable",null);p.__decorate([z.property({type:h,json:{write:!0}})],k.prototype,"origin",void 0);p.__decorate([n.reader("origin")],k.prototype,"readOrigin",null);p.__decorate([z.property({type:[f],value:null,json:{write:!0}})],k.prototype,"lods",null);p.__decorate([z.property({readOnly:!0})],k.prototype,"minScale",void 0);p.__decorate([z.property({readOnly:!0})],k.prototype,"maxScale",void 0);p.__decorate([z.property({readOnly:!0})],
k.prototype,"scales",void 0);p.__decorate([z.property({cast:w=>Array.isArray(w)?w:"number"===typeof w?[w,w]:[256,256]})],k.prototype,"size",void 0);p.__decorate([n.reader("size",["rows","cols"])],k.prototype,"readSize",null);p.__decorate([a.writer("size",{cols:{type:v.Integer},rows:{type:v.Integer}})],k.prototype,"writeSize",null);p.__decorate([z.property({type:d,json:{write:!0}})],k.prototype,"spatialReference",void 0);k=t=p.__decorate([b.subclass("esri.layers.support.TileInfo")],k);(function(w){w=
w.ExtrapolateOptions||(w.ExtrapolateOptions={});w[w.NONE=0]="NONE";w[w.POWER_OF_TWO=1]="POWER_OF_TWO"})(k||(k={}));return k})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,p,m,k,q,E,z,H){var G;m=G=function(v){function n(b){b=
v.call(this,b)||this;b.cols=null;b.level=0;b.levelValue=null;b.origin=null;b.resolution=0;b.rows=null;b.scale=0;return b}g._inheritsLoose(n,v);n.prototype.clone=function(){return new G({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return n}(m.JSONSupport);p.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,"cols",void 0);p.__decorate([k.property({type:z.Integer,
json:{write:!0}})],m.prototype,"level",void 0);p.__decorate([k.property({type:String,json:{write:!0}})],m.prototype,"levelValue",void 0);p.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,"origin",void 0);p.__decorate([k.property({type:Number,json:{write:!0}})],m.prototype,"resolution",void 0);p.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,
"rows",void 0);p.__decorate([k.property({type:Number,json:{write:!0}})],m.prototype,"scale",void 0);return m=G=p.__decorate([H.subclass("esri.layers.support.LOD")],m)})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b){function a(e,r){return r?h[e].valueToClassName[r].split(" "):[]}const h={widthBreakpoint:{getValue(e){const r=e.viewSize[0];e=e.breakpoints;const B=this.values;return r<=e.xsmall?B.xsmall:r<=e.small?B.small:r<=e.medium?B.medium:r<=e.large?B.large:B.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const r=e.viewSize[1];e=e.breakpoints;const B=this.values;return r<=e.xsmall?B.xsmall:r<=e.small?B.small:r<=e.medium?B.medium:r<=e.large?B.large:B.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){e=e.viewSize;const r=this.values;return e[1]>=e[0]?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};g.BreakpointsOwner=
e=>{e=function(r){function B(...t){t=r.call(this,...t)||this;t._breakpointsHandles=new q;t.orientation=null;t.widthBreakpoint=null;t.heightBreakpoint=null;t.breakpoints=d;return t}p._inheritsLoose(B,r);var f=B.prototype;f.initialize=function(){this._breakpointsHandles.add(z.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),z.initial))};f.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=E.destroyMaybe(this._breakpointsHandles))};f._updateClassNames=
function(){if(this.container){var t=k.acquire(),w=k.acquire(),C=!1,x;for(x in h){const u=this[x],D=h[x].getValue({viewSize:this.size,breakpoints:this.breakpoints});u!==D&&(C=!0,this[x]=D,a(x,u).forEach(J=>w.push(J)),a(x,D).forEach(J=>t.push(J)))}C&&(this._applyClassNameChanges(t,w),k.release(t),k.release(w))}};f._applyClassNameChanges=function(t,w){const C=this.container;C&&(w.forEach(x=>C.classList.remove(x)),t.forEach(x=>C.classList.add(x)))};f._removeActiveClassNames=function(){const t=this.container;
if(t)for(var w in h)a(w,this[w]).forEach(C=>t.classList.remove(C))};p._createClass(B,[{key:"breakpoints",set:function(t){var w=this._get("breakpoints");if(t!==w){w=(w=t)&&w.xsmall<w.small&&w.small<w.medium&&w.medium<w.large;if(!w){const C=JSON.stringify(d,null,2);console.warn("provided breakpoints are not valid, using defaults:"+C)}t=w?t:d;this._set("breakpoints",{...t})}}}]);return B}(e);m.__decorate([H.property()],e.prototype,"breakpoints",null);m.__decorate([H.property()],e.prototype,"orientation",
void 0);m.__decorate([H.property()],e.prototype,"widthBreakpoint",void 0);m.__decorate([H.property()],e.prototype,"heightBreakpoint",void 0);return e=m.__decorate([b.subclass("esri.views.BreakpointsOwner")],e)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a){function h(e){e&&(k.empty(e),e.parentNode&&e.parentNode.removeChild(e))}const d=[0,0];g.DOMContainer=e=>{e=function(r){function B(...t){var w=r.call(this,...t)||this;w._freqInfo={freq:16,time:750};w._overlayRenderTaskHandle=null;w.height=0;w.position=null;w.resizing=!1;w.root=null;w.surface=null;w.suspended=!0;w.ui=null;w.userContent=null;w.width=0;w.widthBreakpoint=null;w.handles.add([q.watch(()=>w.cursor,C=>{const {surface:x}=p._assertThisInitialized(w);x&&x.setAttribute("data-cursor",
C)}),q.watch(()=>w.interacting,C=>{const {surface:x}=p._assertThisInitialized(w);x&&x.setAttribute("data-interacting",C.toString())})]);return w}p._inheritsLoose(B,r);var f=B.prototype;f.initialize=function(){this.handles.add(q.watch(()=>this.ui,(t,w)=>this._handleUIChange(t,w)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};f.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),
this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};f.blur=function(){this.surface&&this.surface.blur()};f.focus=function(){this.surface&&this.surface.focus()};f.pageToContainer=function(t,w,C){const x=this.position;t-=x[0];w-=x[1];C?(C[0]=t,C[1]=w):C=[t,w];return C};f.containerToPage=function(t,w,C){const x=this.position;t+=x[0];w+=x[1];C?(C[0]=t,C[1]=w):C=[t,w];return C};f._handleUIChange=function(t,w){w&&(this.handles.remove("ui"),w.destroy());t&&this._wireUI(t);this._set("ui",
t)};f._wireUI=function(t){this.handles.remove("ui");t&&(t.view=this,this.handles.add([q.watch(()=>this.root,w=>{if(w){{const C=document.createElement("div");w.appendChild(C);w=C}}else w=null;t.container=w},q.initial),q.watch(()=>this.popup,(w,C)=>{C&&t.remove(C,"popup");w&&(w.view=t.view,t.add(w,{key:"popup",position:"manual"}))},q.initial)],"ui"))};f._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};f._startMeasuring=function(){const t=this._freqInfo;
t.freq=16;t.time=750;this.handles.add([(()=>{const w=()=>{t.freq=16;t.time=750};window.addEventListener("resize",w);return{remove(){window.removeEventListener("resize",w)}}})(),E.addFrameTask({prepare:w=>{const C=this._measure(),x=this._freqInfo;x.time+=w.deltaTime;C&&(x.freq=16,this._get("resizing")||this._set("resizing",!0));x.time<x.freq||(x.time=0,this._position()||C?x.freq=16:x.freq=Math.min(750,2*x.freq),!C&&512<=x.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();
this._position()};f._measure=function(){var t=this.container;const w=t?t.clientWidth:0;t=t?t.clientHeight:0;if(0===w||0===t)return this.suspended||this._set("suspended",!0),!1;const C=this.width,x=this.height;if(w===C&&t===x)return this.suspended&&this._set("suspended",!1),!1;this._set("width",w);this._set("height",t);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:C,oldHeight:x,width:w,height:t});return!0};f._position=function(){var t=this.container;const w=this.position;{const C=
(t.ownerDocument||window.document).defaultView;t=t.getBoundingClientRect();d[0]=t.left+C.pageXOffset;d[1]=t.top+C.pageYOffset}return w&&d[0]===w[0]&&d[1]===w[1]?!1:(this._set("position",[d[0],d[1]]),!0)};f.forceDOMReadyCycle=function(){};p._createClass(B,[{key:"container",set:function(t){var w=this._get("container");if(w!==t)if(this.handles.remove("dom-size"),this._stopMeasuring(),w&&(w.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=
null),this.overlay.destroy(),this._set("overlay",null),h(this.root),this._set("root",null),k.reparent(this.userContent,w),h(this.userContent),this._set("userContent",null)),t){t.classList.add("esri-view");w=document.createElement("div");w.className="esri-view-user-storage";k.reparent(t,w);t.appendChild(w);this._set("userContent",w);w=document.createElement("div");w.className="esri-view-root";t.insertBefore(w,t.firstChild);this._set("root",w);const C=document.createElement("div");C.className="esri-view-surface";
C.setAttribute("role","application");C.tabIndex=0;w.appendChild(C);this._set("surface",C);const x=new b;w.appendChild(x.surface);this._set("overlay",x);q.watch(()=>x.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=E.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(q.watch(()=>this.size,u=>{const [D,J]=u;D>=document.body.clientWidth||
J>=document.body.clientHeight?C.classList.add("esri-view-surface--inset-outline"):C.classList.remove("esri-view-surface--inset-outline")},q.initial),"dom-size");this._set("container",t);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}},{key:"popup",get:function(){return this._get("popup")||
new a({view:this})},set:function(t){const w=this._get("popup");w&&w!==t&&w.destroy();this._set("popup",t)}},{key:"size",get:function(){return[this.width,this.height]}}]);return B}(e);m.__decorate([z.property({value:null,cast:r=>k.byId(r)})],e.prototype,"container",null);m.__decorate([z.property({readOnly:!0})],e.prototype,"focused",null);m.__decorate([z.property({readOnly:!0})],e.prototype,"height",void 0);m.__decorate([z.property({type:a})],e.prototype,"popup",null);m.__decorate([z.property({type:b})],
e.prototype,"overlay",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"position",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"resizing",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"root",void 0);m.__decorate([z.property({value:null,readOnly:!0})],e.prototype,"size",null);m.__decorate([z.property({readOnly:!0})],e.prototype,"surface",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"suspended",void 0);m.__decorate([z.property()],e.prototype,
"ui",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"userContent",void 0);m.__decorate([z.property({readOnly:!0})],e.prototype,"width",void 0);m.__decorate([z.property()],e.prototype,"widthBreakpoint",void 0);return e=m.__decorate([n.subclass("esri.views.DOMContainer")],e)};g.isDOMContainer=function(e){return e&&"focus"in e};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b){m=function(a){function h(){var e=a.apply(this,arguments)||this;e.items=new k;e._watchUpdatingTracking=new v.WatchUpdatingTracking;e._callbacks=new Map;e._projector=b.createProjector();e._hiddenProjector=b.createProjector();return e}g._inheritsLoose(h,a);var d=h.prototype;d.initialize=function(){const e=document.createElement("div");e.className="esri-overlay-surface";this._set("surface",e);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");e.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const B of r.added){const f=()=>B.render();this._callbacks.set(B,f);this._projector.append(this.surface,f)}for(const B of r.removed)r=this._projector.detach(this._callbacks.get(B)),this.surface.removeChild(r.domNode),this._callbacks.delete(B)})};d.addItem=function(e){this.items.add(e)};d.removeItem=function(e){this.items.remove(e)};d.destroy=function(){this.items.removeAll();
this._callbacks.forEach(e=>this._projector.detach(e));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};d.render=function(){this._projector.renderNow()};d.computeBoundingRect=function(e){const r=this._hiddenSurface,B=this._hiddenProjector;let f=null;const t=()=>f=e.render();B.append(r,t);B.renderNow();const w={left:0,top:0,right:0,bottom:0};if(f&&f.domNode){const C=f.domNode.getBoundingClientRect();w.left=C.left;w.top=C.top;w.right=C.right;w.bottom=C.bottom}for(B.detach(t);r.firstChild;)r.removeChild(r.firstChild);
return w};d.overlaps=function(e,r){e=this.computeBoundingRect(e);r=this.computeBoundingRect(r);return Math.max(e.left,r.left)<=Math.min(e.right,r.right)&&Math.max(e.top,r.top)<=Math.min(e.bottom,r.bottom)};d.renderCanvas=function(e){if(this.items.some(B=>B.visible)){var r=e.getContext("2d");r.save();r.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(B=>{r.save();B.renderCanvas(r);r.restore()});r.restore()}};g._createClass(h,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(e=>e.visible)}}]);return h}(m);p.__decorate([q.property({readOnly:!0})],m.prototype,"surface",void 0);p.__decorate([q.property({readOnly:!0})],m.prototype,"items",void 0);p.__decorate([q.property({readOnly:!0})],m.prototype,"needsRender",null);p.__decorate([q.property({readOnly:!0})],m.prototype,"_watchUpdatingTracking",void 0);p.__decorate([q.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],m.prototype,"updating",void 0);
return m=p.__decorate([G.subclass("esri.views.overlay.ViewOverlay")],m)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D,J,S,T){function P(Z,L){return void 0===L?`${"esri-popup"}__${Z}`:`${"esri-popup"}__${Z}-${L}`}const X={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Q=z.getLogger("esri.widgets.Popup"),O={closeButton:!0,featureNavigation:!0};m=function(Z){function L(l,A){var y=Z.call(this,l,A)||this;y._blurClose=!1;y._blurContainer=!1;y._containerNode=null;y._mainContainerNode=null;y._featureMenuNode=null;y._actionsMenuNode=null;y._focusClose=!1;
y._focusContainer=!1;y._focusDockButton=!1;y._focusFeatureMenuButton=!1;y._focusActionsMenuButton=!1;y._focusFirstFeature=!1;y._focusFirstAction=!1;y._handles=new E;y._pointerOffsetInPx=16;y._spinner=null;y._feature=null;y._featureMenuIntersectionObserverCallback=([K])=>{null!=K&&K.isIntersecting&&y.viewModel.featurePage++};y._featureMenuIntersectionObserver=new IntersectionObserver(y._featureMenuIntersectionObserverCallback,{root:window.document});y._displaySpinnerThrottled=v.throttle(()=>y._displaySpinner(),
0);y.actions=null;y.alignment="auto";y.autoCloseEnabled=null;y.autoOpenEnabled=null;y.defaultPopupTemplateEnabled=null;y.content=null;y.collapsed=!1;y.collapseEnabled=!0;y.dockEnabled=!1;y.featureCount=null;y.featureMenuOpen=!1;y.features=null;y.goToOverride=null;y.headingLevel=2;y.highlightEnabled=null;y.location=null;y.label=void 0;y.maxInlineActions=3;y.messages=null;y.messagesCommon=null;y.promises=null;y.selectedFeature=null;y.selectedFeatureIndex=null;y.spinnerEnabled=!0;y.title=null;y.updateLocationEnabled=
null;y.view=null;y.viewModel=new w;y.visible=null;y.visibleElements={...O};y._addSelectedFeatureIndexHandle();y.own([G.watch(()=>{var K;return null==(K=y.viewModel)?void 0:K.screenLocation},()=>y._positionContainer()),G.watch(()=>{var K;return[null==(K=y.viewModel)?void 0:K.active,y.dockEnabled]},()=>y._toggleScreenLocationEnabled()),G.watch(()=>{var K;return null==(K=y.viewModel)?void 0:K.screenLocation},(K,U)=>{!!K!==!!U&&y.reposition()}),G.watch(()=>{var K,U,ba,ea,na,ha;return[null==(K=y.viewModel)?
void 0:null==(U=K.view)?void 0:U.padding,null==(ba=y.viewModel)?void 0:null==(ea=ba.view)?void 0:ea.size,null==(na=y.viewModel)?void 0:na.active,null==(ha=y.viewModel)?void 0:ha.location,y.alignment]},()=>y.reposition()),G.watch(()=>y.spinnerEnabled,K=>y._spinnerEnabledChange(K)),G.watch(()=>{var K,U;return null==(K=y.viewModel)?void 0:null==(U=K.view)?void 0:U.size},(K,U)=>y._updateDockEnabledForViewSize(K,U)),G.watch(()=>{var K;return null==(K=y.viewModel)?void 0:K.view},(K,U)=>y._viewChange(K,
U)),G.watch(()=>{var K,U;return null==(K=y.viewModel)?void 0:null==(U=K.view)?void 0:U.ready},(K,U)=>y._viewReadyChange(K,U)),G.watch(()=>{var K,U;return[null==(K=y.viewModel)?void 0:K.waitingForResult,null==(U=y.viewModel)?void 0:U.location]},()=>{y._hideSpinner();y._displaySpinnerThrottled()}),G.watch(()=>{var K,U,ba,ea;return[null==(K=y.selectedFeatureWidget)?void 0:null==(U=K.viewModel)?void 0:U.title,null==(ba=y.selectedFeatureWidget)?void 0:null==(ea=ba.viewModel)?void 0:ea.state]},()=>y._setTitleFromFeatureWidget()),
G.watch(()=>{var K,U,ba,ea;return[null==(K=y.selectedFeatureWidget)?void 0:null==(U=K.viewModel)?void 0:U.content,null==(ba=y.selectedFeatureWidget)?void 0:null==(ea=ba.viewModel)?void 0:ea.state]},()=>y._setContentFromFeatureWidget()),G.when(()=>!y.collapsed,()=>{var K,U;"xsmall"===(null==(K=y.viewModel)?void 0:null==(U=K.view)?void 0:U.widthBreakpoint)&&y.viewModel.active&&y.collapseEnabled&&y.viewModel.centerAtLocation()}),G.on(()=>{var K;return null==(K=y.viewModel)?void 0:K.allActions},"change",
()=>y._watchActions()),G.watch(()=>{var K;return null==(K=y.viewModel)?void 0:K.allActions},()=>y._watchActions(),G.initial),G.watch(()=>{var K;return null==(K=y.viewModel)?void 0:K.featureViewModels},()=>y._featureMenuViewportScrollTop())]);return y}g._inheritsLoose(L,Z);var I=L.prototype;I.destroy=function(){var l,A;this._destroySelectedFeatureWidget();this._destroySpinner();null==(l=this._handles)?void 0:l.destroy();this._unobserveFeatureMenuObserver();null==(A=this._featureMenuIntersectionObserver)?
void 0:A.disconnect();this._handles=null};I.castVisibleElements=function(l){return{...O,...l}};I.blur=function(){const {active:l}=this.viewModel;l||Q.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};I.clear=function(){this.viewModel.clear()};I.close=function(){this.visible=!1};I.fetchFeatures=function(l,A){return this.viewModel.fetchFeatures(l,A)};I.focus=function(){const {active:l}=this.viewModel;
l||Q.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};I.next=function(){return this.viewModel.next()};I.open=function(l){var A,y;this._handles.remove("selected-index");const K={collapsed:l?!!l.collapsed:!1,actionsMenuOpen:l?!!l.actionsMenuOpen:!1,featureMenuOpen:l?!!l.featureMenuOpen:!1};"xsmall"===(null==(A=this.viewModel)?void 0:null==(y=A.view)?void 0:y.widthBreakpoint)&&(K.collapsed=!0);
this.set(K);this.viewModel.open(l);this._shouldFocus(l);this._addSelectedFeatureIndexHandle()};I.previous=function(){return this.viewModel.previous()};I.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};I.triggerAction=function(l){this.viewModel.triggerAction(l)};I.render=function(){var l,A,y,K;const {actionsMenuOpen:U,dockEnabled:ba,featureMenuVisible:ea,dividedActions:na,currentAlignment:ha,currentDockPosition:la}=this,{active:pa}=this.viewModel;var {menuActions:qa}=
na;qa=pa&&1<qa.length&&U;const M=null==(l=this.selectedFeature)?void 0:null==(A=l.layer)?void 0:A.title;l=null==(y=this.selectedFeature)?void 0:null==(K=y.layer)?void 0:K.id;return J.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===ha,["esri-popup--aligned-bottom-center"]:"bottom-center"===ha,["esri-popup--aligned-top-left"]:"top-left"===ha,["esri-popup--aligned-bottom-left"]:"bottom-left"===ha,["esri-popup--aligned-top-right"]:"top-right"===ha,["esri-popup--aligned-bottom-right"]:"bottom-right"===
ha,["esri-popup--is-docked"]:pa&&ba,["esri-popup--shadow"]:pa&&!ba,["esri-popup--is-docked-top-left"]:"top-left"===la,["esri-popup--is-docked-top-center"]:"top-center"===la,["esri-popup--is-docked-top-right"]:"top-right"===la,["esri-popup--is-docked-bottom-left"]:"bottom-left"===la,["esri-popup--is-docked-bottom-center"]:"bottom-center"===la,["esri-popup--is-docked-bottom-right"]:"bottom-right"===la,["esri-popup--feature-menu-open"]:ea,["esri-popup--actions-menu-open"]:qa}),role:"presentation","data-layer-title":M,
"data-layer-id":l,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},pa?[this.renderMainContainer(),this.renderPointer()]:null)};I.renderLoadingIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};I.renderNavigationLoading=function(){const {messagesCommon:l}=this;return this.viewModel.pendingPromisesCount?J.tsx("div",{key:P("loading-container"),role:"presentation",class:"esri-popup__loading-container",
"aria-label":l.loading,title:l.loading},this.renderLoadingIcon()):null};I.renderPreviousIcon=function(){const l=S.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:l,["esri-popup__pagination-previous-icon--rtl"]:l,["esri-icon-left-triangle-arrow"]:!l,["esri-popup__pagination-previous-icon"]:!l})})};I.renderPreviousButton=function(){const {messages:l}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":l.previous,title:l.previous},this.renderPreviousIcon())};I.renderNextIcon=function(){const l=S.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:l,["esri-popup__pagination-next-icon--rtl"]:l,["esri-icon-right-triangle-arrow"]:!l,["esri-popup__pagination-next-icon"]:!l})})};I.renderNextButton=
function(){const {messages:l}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":l.next,title:l.next},this.renderNextIcon())};I.renderFeatureMenuButton=function(){const {featureMenuOpen:l,featureMenuId:A,messagesCommon:y}=this,{featureCount:K,selectedFeatureIndex:U}=this.viewModel;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,
onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":A,"aria-expanded":l.toString(),"aria-label":y.menu,title:y.menu},this._getPageText(K,U))};I.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:
null};I.renderDockIcon=function(){const {dockEnabled:l}=this,A=this._wouldDockTo();return J.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:l,["esri-popup__icon--dock-icon"]:!l,["esri-icon-dock-right"]:!l&&("top-right"===A||"bottom-right"===A),["esri-icon-dock-left"]:!l&&("top-left"===A||"bottom-left"===A),["esri-icon-maximize"]:!l&&"top-center"===A,["esri-icon-dock-bottom"]:!l&&"bottom-center"===A},"esri-popup__icon")})};I.renderDockButton=function(){var l,A,y;const {dockEnabled:K,
messages:U}=this,ba=null==(l=this.viewModel)?void 0:null==(A=l.view)?void 0:A.widthBreakpoint;l=K?U.undock:U.dock;return"xsmall"!==ba&&null!=(y=this.dockOptions)&&y.buttonEnabled?J.tsx("div",{role:"button","aria-label":l,title:l,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};I.renderTitle=
function(){const {title:l}=this.viewModel,{titleId:A,collapsible:y,contentCollapsed:K,messagesCommon:U}=this;var ba={["esri-popup__header-container--button"]:y};const ea=J.tsx(C.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:l});ba=y?J.tsx("button",{key:`${l}--collapsible`,id:A,title:K?U.expand:U.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ba),"aria-expanded":K?"false":"true",onclick:this._toggleCollapsed,
type:"button"},ea):J.tsx("div",{key:l,id:A,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ba)},ea);return l?ba:null};I.renderCloseIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};I.renderCloseButton=function(){const {visibleElements:l,messagesCommon:A}=this;return l.closeButton?J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,
class:"esri-popup__button","aria-label":A.close,title:A.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};I.renderHeader=function(){return J.tsx("header",{class:"esri-popup__header"},this.renderTitle(),J.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};I.renderContentContainer=function(){const {contentId:l,hasContent:A,contentCollapsed:y}=this,{content:K}=this.viewModel;return A&&
!y?J.tsx("article",{key:K,enterAnimation:this._createFeatureUpdatedAnimation(),id:l,class:"esri-popup__content"},this.renderContent()):null};I.renderActionsMenuButton=function(){const {actionsMenuId:l,actionsMenuButtonId:A,actionsMenuOpen:y,dividedActions:K,messagesCommon:U}=this,ba=y?U.close:U.open,{menuActions:ea}=K;return ea.length?J.tsx("div",{key:P("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:A,"aria-haspopup":"true","aria-controls":y?
l:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":ba,title:ba},J.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};I.renderMenuActions=function(){const {actionsMenuId:l,actionsMenuButtonId:A,actionsMenuOpen:y,dividedActions:K}=this,{menuActions:U}=K;return U.length&&y?J.tsx("ul",{id:l,role:"menu","aria-labelledby":A,key:P("actions"),
class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},U.toArray().map(ba=>this.renderAction({action:ba,type:"menu-item"}))):null};I.renderInlineActions=function(){const {inlineActions:l}=this.dividedActions;return!!l.length&&l.toArray().map(A=>this.renderAction({action:A,type:"inline"}))};I.renderInlineActionsContainer=function(){const {inlineActions:l,menuActions:A}=this.dividedActions,y=!!l.length,
K=!!A.length;return y||K?J.tsx("div",{key:"inline-actions-container","data-inline-actions":y.toString(),"data-menu-actions":K.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};I.renderNavigation=function(){return this.featureNavigationVisible?J.tsx("section",{key:P("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};I.renderFooter=function(){const {featureNavigationVisible:l,
dividedActions:A}=this,{inlineActions:y,menuActions:K}=A,U=!!y.length,ba={["esri-popup__footer--has-pagination"]:l,["esri-popup__footer--has-actions"]:U,["esri-popup__footer--has-actions-menu"]:!!K.length};return l||U?J.tsx("div",{key:P("feature-buttons"),class:this.classes("esri-popup__footer",ba)},this.renderInlineActionsContainer(),this.renderNavigation()):null};I.renderFeatureMenuContainer=function(){var {messages:l}=this;const {featureViewModels:A,isLoadingFeature:y}=this.viewModel;l=T.substitute(l.selectedFeatures,
{total:A.length});return J.tsx("section",{key:P("menu"),class:"esri-popup__feature-menu"},J.tsx("strong",{class:"esri-popup__feature-menu-header"},l),J.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:S.storeNode},this.renderFeatureMenu(),J.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),y?J.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):
null))};I.renderPointer=function(){return this.dockEnabled?null:J.tsx("div",{key:P("pointer"),class:"esri-popup__pointer",role:"presentation"},J.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};I.renderMainContainer=function(){const {dockEnabled:l,currentAlignment:A,currentDockPosition:y,titleId:K,contentId:U,collapsible:ba,hasContent:ea,contentCollapsed:na,visibleElements:ha}=this,{title:la}=this.viewModel,pa="bottom-left"===A||"bottom-center"===A||"bottom-right"===
A||"top-left"===y||"top-center"===y||"top-right"===y,qa="top-left"===A||"top-center"===A||"top-right"===A||"bottom-left"===y||"bottom-center"===y||"bottom-right"===y;return J.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:l,["esri-popup--is-collapsible"]:ba,["esri-popup--is-collapsed"]:na}),tabIndex:ha.closeButton?null:-1,role:"dialog","aria-labelledby":la?K:"","aria-describedby":ea&&!na?U:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},pa?this.renderFooter():null,pa?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),qa?this.renderFooter():null,qa?this.renderFeatureMenuContainer():null)};I.renderContent=function(){var l;const A=null==(l=this.viewModel)?void 0:l.content;return A?"string"===typeof A?J.tsx("div",{key:A,innerHTML:A}):this.renderNodeContent(A):null};I.renderActionText=function(l){return J.tsx("span",{key:"text",class:"esri-popup__action-text"},
l)};I.renderActionIcon=function(l){const A=this._getActionClass(l),y=this._getActionImage(l),K={["esri-icon-loading-indicator"]:l.active,["esri-rotating"]:l.active,["esri-popup__icon"]:!!A,["esri-popup__action-image"]:!l.active&&!!y};A&&(K[A]=!l.active);return J.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",K),styles:this._getIconStyles(y)})};I.renderAction=function(l){const {action:A,type:y}=l;l=this._getActionTitle(A);const K={["esri-popup__action"]:"toggle"!==
A.type,["esri-popup__action-toggle"]:"toggle"===A.type,["esri-popup__action-toggle--on"]:"toggle"===A.type&&A.value,["esri-popup__button--disabled"]:A.disabled},U=[this.renderActionIcon(A),this.renderActionText(l)];l="menu-item"===y?J.tsx("li",{key:A.uid,role:"menuitem",tabIndex:0,title:l,"aria-label":l,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":A.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},U):J.tsx("div",{key:A.uid,
role:"button",tabIndex:0,title:l,"aria-label":l,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":A.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},U);return A.visible?l:null};I.renderFeatureMenuItem=function(l,A){const {messages:y,messagesCommon:K}=this,{selectedFeatureIndex:U,selectedFeatureViewModel:ba}=this.viewModel;var ea=l===ba;const na={["esri-popup__feature-menu-item--selected"]:ea};ea=ea?J.tsx("span",{key:P(`feature-menu-selected-feature-${U}`),
title:y.selectedFeature,"aria-label":y.selectedFeature,class:"esri-icon-check-mark"}):null;l=J.tsx("span",{innerHTML:l.title||K.untitled});return J.tsx("li",{role:"menuitem",tabIndex:-1,key:P(`feature-menu-feature-${U}`),class:this.classes(na,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":A,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,
onmouseleave:this._removeActiveFeature},J.tsx("span",{class:"esri-popup__feature-menu-title"},l,ea))};I.renderFeatureMenu=function(){const {featureMenuId:l}=this,{featureViewModels:A}=this.viewModel;return 1<A.length?J.tsx("ol",{class:"esri-popup__feature-menu-list",id:l,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},A.filter(y=>!!y.graphic).map((y,K)=>this.renderFeatureMenuItem(y,K))):null};I._getActionTitle=
function(l){const {messages:A,selectedFeature:y,messagesCommon:K}=this,{id:U}=l,ba=null==y?void 0:y.attributes;return(l="zoom-to-feature"===U?T.substitute(l.title,{messages:A}):"remove-selected-feature"===U?T.substitute(l.title,{messages:K}):"zoom-to-clustered-features"===U?T.substitute(l.title,{messages:A}):"browse-clustered-features"===U?T.substitute(l.title,{messages:A}):l.title)&&ba?T.substitute(l,ba):l};I._getActionClass=function(l){var {selectedFeature:A}=this;A=null==A?void 0:A.attributes;
const {className:y,image:K}=l;return(l=K||y?y:"esri-icon-default-action")&&A?T.substitute(l,A):l};I._getActionImage=function(l){var {selectedFeature:A}=this;A=null==A?void 0:A.attributes;({image:l}=l);return l&&A?T.substitute(l,A):l};I._createFeatureUpdatedAnimation=function(){return S.cssTransition("enter","esri-popup--feature-updated")};I._getInlineActionCount=function(){const {maxInlineActions:l,featureNavigationVisible:A}=this;if("number"!==typeof l)return null;const y=Math.round(l);return Math.max(A?
y-1:y,0)};I._watchActions=function(){const {allActions:l}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");l&&l.forEach(A=>{this._handles.add(G.watch(()=>[A.uid,A.active,A.className,A.disabled,A.id,A.title,A.image,A.visible],()=>this.scheduleRender()),"actions")})};I._divideActions=function(){var {allActions:l}=this.viewModel;l=l.filter(U=>U.visible);const A=this._getInlineActionCount(),y=null===A,K=0===A;return{inlineActions:y?l.slice(0):K?new k:l.slice(0,A),menuActions:y?
new k:K?l.slice(0):l.slice(A)}};I._featureMenuOpenChanged=function(l){l?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};I._actionsMenuOpenChanged=function(l){l?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};I._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:l,messagesCommon:A}=this;if(l){var y,K;this.viewModel.title="error"===(null==(y=l.viewModel)?void 0:y.state)?A.errorMessage:(null==(K=l.viewModel)?void 0:K.title)||""}};I._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:l}=
this;l&&(this.viewModel.content=l)};I._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};I._featureMenuIntersectionObserverCreated=function(l){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(l);this._featureMenuIntersectionObserverNode=l};I._handleFeatureMenuKeyup=function(l){"Escape"===q.eventKey(l)&&(l.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};I._handleActionMenuKeyup=function(l){"Escape"===q.eventKey(l)&&(l.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};I._setActiveFeature=function(l){const {viewModel:A}=this;A.activeFeature=A.features[l.currentTarget["data-feature-index"]]||null};I._removeActiveFeature=function(){this.viewModel.activeFeature=null};I._handleFeatureMenuItemKeyup=function(l){const A=q.eventKey(l);var {_featureMenuNode:y}=
this;const K=l.currentTarget["data-feature-index"];if(y){y=y.querySelectorAll("li");var U=y.length;"ArrowUp"===A?(l.stopPropagation(),y[(K-1+U)%U].focus()):"ArrowDown"===A?(l.stopPropagation(),y[(K+1+U)%U].focus()):"Home"===A?(l.stopPropagation(),y[0].focus()):"End"===A&&(l.stopPropagation(),y[y.length-1].focus())}};I._handleActionMenuItemKeyup=function(l){const A=q.eventKey(l);var {_actionsMenuNode:y}=this;const K=l.currentTarget.dataset.actionUid;var {menuActions:U}=this.dividedActions;U=U.findIndex(ea=>
ea.uid===K);if(y){y=y.querySelectorAll("li");var ba=y.length;"ArrowUp"===A?(l.stopPropagation(),y[(U-1+ba)%ba].focus()):"ArrowDown"===A?(l.stopPropagation(),y[(U+1+ba)%ba].focus()):"Home"===A?(l.stopPropagation(),y[0].focus()):"End"===A&&(l.stopPropagation(),y[y.length-1].focus())}};I._handleMainKeyup=function(l){const A=q.eventKey(l);"ArrowLeft"===A&&(l.stopPropagation(),this.previous());"ArrowRight"===A&&(l.stopPropagation(),this.next())};I._spinnerEnabledChange=function(l){this._destroySpinner();
l&&(l=this.get("viewModel.view"),this._createSpinner(l))};I._hideSpinner=function(){const {_spinner:l}=this;l&&(l.location=null,l.hide())};I._displaySpinner=function(){const {_spinner:l}=this;if(l){var {location:A,waitingForResult:y}=this.viewModel;y?l.show({location:A}):l.hide()}};I._getIconStyles=function(l){return{"background-image":l?`url(${l})`:""}};I._shouldFocus=function(){var l=g._asyncToGenerator(function*(A){A.shouldFocus&&(yield G.whenOnce(()=>{var y;return!0===(null==(y=this.viewModel)?
void 0:y.active)}),this.focus())});return function(A){return l.apply(this,arguments)}}();I._addSelectedFeatureIndexHandle=function(){const l=G.watch(()=>{var A;return null==(A=this.viewModel)?void 0:A.selectedFeatureIndex},(A,y)=>this._selectedFeatureIndexUpdated(A,y));this._handles.add(l,"selected-index")};I._selectedFeatureIndexUpdated=function(l,A){const {featureCount:y}=this;y&&l!==A&&-1!==l&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};I._destroySelectedFeatureWidget=function(){const {_feature:l}=
this;l&&(l.viewModel=null,l&&!l.destroyed&&l.destroy());this._feature=null};I._isScreenLocationWithinView=function(l,A){return-1<l.x&&-1<l.y&&l.x<=A.width&&l.y<=A.height};I._isOutsideView=function(l){const {popupHeight:A,popupWidth:y,screenLocation:K,side:U,view:ba}=l;if(isNaN(y)||isNaN(A)||!ba||!K)return!1;l=ba.padding;return"right"===U&&K.x+y/2>ba.width-l.right||"left"===U&&K.x-y/2<l.left||"top"===U&&K.y-A<l.top||"bottom"===U&&K.y+A>ba.height-l.bottom?!0:!1};I._calculateAutoAlignment=function(l){if("auto"!==
l)return l;const {_pointerOffsetInPx:A,_containerNode:y,_mainContainerNode:K,viewModel:U}=this,{screenLocation:ba,view:ea}=U;if(H.isNone(ba)||!ea||!y)return"top-center";if(!this._isScreenLocationWithinView(ba,ea))return this._get("currentAlignment")||"top-center";var na=(l=K?window.getComputedStyle(K,null):null)?parseInt(l.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,ha=l?parseInt(l.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:la,width:pa}=y.getBoundingClientRect();
l=pa+A;const qa=Math.max(la,na,ha)+A;na=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"right",view:ea});ha=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"left",view:ea});const M=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"top",view:ea});l=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"bottom",view:ea});return ha?M?"bottom-right":"top-right":na?M?"bottom-left":"top-left":M?l?"top-center":"bottom-center":
"top-center"};I._callCurrentAlignment=function(l){return"function"===typeof l?l.call(this):l};I._getCurrentAlignment=function(){const {alignment:l,dockEnabled:A}=this;return A||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(l)))};I._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};I._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};I._calculatePositionResult=
function(l){const A=["left","right"];S.isRTL(this.container)&&A.reverse();return l.replace(/leading/gi,A[0]).replace(/trailing/gi,A[1])};I._callDockPosition=function(l){return"function"===typeof l?l.call(this):l};I._getDockPosition=function(){var l;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(l=this.dockOptions)?void 0:l.position)))};I._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};
I._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};I._calculateAutoDockPosition=function(l){var A;if("auto"!==l)return l;l=null==(A=this.viewModel)?void 0:A.view;A=S.isRTL(this.container)?"top-left":"top-right";if(!l)return A;var y=l.padding||{left:0,right:0,top:0,bottom:0};y=l.width-y.left-y.right;({breakpoints:l}=l);return l&&y<=l.xsmall?"bottom-center":A};I._positionContainer=function(l=this._containerNode){l&&(this._containerNode=l);if(l){var {screenLocation:A}=this.viewModel,
{width:y}=l.getBoundingClientRect();if(A=this._calculatePositionStyle(A,y))l.style.top=A.top,l.style.left=A.left,l.style.bottom=A.bottom,l.style.right=A.right}};I._calculateFullWidth=function(l){const {currentAlignment:A,_pointerOffsetInPx:y}=this;return"top-left"===A||"bottom-left"===A||"top-right"===A||"bottom-right"===A?l+y:l};I._calculateAlignmentPosition=function(l,A,y,K){const {currentAlignment:U,_pointerOffsetInPx:ba}=this;K/=2;const ea=y.height-A;y=y.width-l;const {padding:na}=this.view;if("bottom-center"===
U)return{top:A+ba-na.top,left:l-K-na.left};if("top-left"===U)return{bottom:ea+ba-na.bottom,right:y+ba-na.right};if("bottom-left"===U)return{top:A+ba-na.top,right:y+ba-na.right};if("top-right"===U)return{bottom:ea+ba-na.bottom,left:l+ba-na.left};if("bottom-right"===U)return{top:A+ba-na.top,left:l+ba-na.left};if("top-center"===U)return{bottom:ea+ba-na.bottom,left:l-K-na.left}};I._calculatePositionStyle=function(l,A){const {dockEnabled:y,view:K}=this;if(K){if(y)return{left:"",top:"",right:"",bottom:""};
if(!H.isNone(l)&&A&&(A=this._calculateFullWidth(A),l=this._calculateAlignmentPosition(l.x,l.y,K,A)))return{top:void 0!==l.top?`${l.top}px`:"auto",left:void 0!==l.left?`${l.left}px`:"auto",bottom:void 0!==l.bottom?`${l.bottom}px`:"auto",right:void 0!==l.right?`${l.right}px`:"auto"}}};I._viewChange=function(l,A){l&&A&&(this.close(),this.clear())};I._viewReadyChange=function(l,A){l?(l=this.get("viewModel.view"),this._wireUpView(l)):A&&(this.close(),this.clear())};I._wireUpView=function(l){this._destroySpinner();
if(l){var {spinnerEnabled:A}=this;A&&this._createSpinner(l);this._setDockEnabledForViewSize(this.dockOptions)}};I._dockingThresholdCrossed=function(l,A,y){const [K,U]=l,[ba,ea]=A,{width:na,height:ha}=y;return K<=na&&ba>na||K>na&&ba<=na||U<=ha&&ea>ha||U>ha&&ea<=ha};I._updateDockEnabledForViewSize=function(l,A){if(l&&A){var y=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},K=y.left+y.right,U=y.top+y.bottom;y=[];var ba=[];y[0]=l[0]-K;y[1]=l[1]-U;ba[0]=A[0]-K;ba[1]=A[1]-U;({dockOptions:l}=
this);this._dockingThresholdCrossed(y,ba,l.breakpoint)&&this._setDockEnabledForViewSize(l);this._setCurrentDockPosition()}};I._focusDockButtonNode=function(l){this._focusDockButton&&(this._focusDockButton=!1,l.focus())};I._closeButtonNodeUpdated=function(l){this._focusClose?(this._focusClose=!1,l.focus()):this._blurClose&&(this._blurClose=!1,l.blur())};I._mainContainerNodeUpdated=function(l){this._mainContainerNode=l;this._focusContainer?(this._focusContainer=!1,l.focus()):this._blurContainer&&(this._blurContainer=
!1,l.blur())};I._featureMenuNodeUpdated=function(l){(this._featureMenuNode=l)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,l=l.querySelectorAll("li"),l.length&&l[0].focus())};I._actionsMenuNodeUpdated=function(l){(this._actionsMenuNode=l)&&this._focusFirstAction&&(this._focusFirstAction=!1,l=l.querySelectorAll("li"),l.length&&l[0].focus())};I._focusFeatureMenuButtonNode=function(l){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,l.focus())};I._focusActionsMenuButtonNode=function(l){this._focusActionsMenuButton&&
(this._focusActionsMenuButton=!1,l.focus())};I._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};I._toggleScreenLocationEnabled=function(){const {dockEnabled:l,viewModel:A}=this;A&&(A.screenLocationEnabled=A.active&&!l)};I._shouldDockAtCurrentViewSize=function(l){var A,y;l=l.breakpoint;const K=null==(A=this.viewModel)?void 0:null==(y=A.view)?void 0:y.ui;if(!K)return!1;const {width:U,height:ba}=K;if(isNaN(U)||isNaN(ba))return!1;A=l.hasOwnProperty("width")&&
U<=l.width;y=l.hasOwnProperty("height")&&ba<=l.height;return A||y};I._setDockEnabledForViewSize=function(l){l.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(l))};I._getPageText=function(l,A){return this.featureNavigationVisible?T.substitute(this.messages.pageText,{index:A+1,total:l}):null};I._destroySpinner=function(){const {_spinner:l,view:A}=this;l&&(A&&A.ui&&A.ui.remove(this._spinner,"popup-spinner"),l.destroy(),this._spinner=null)};I._createSpinner=function(l){l&&(this._spinner=
new B({view:l}),l.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};I._toggleCollapsed=function(){this.collapsed=!this.collapsed};I._close=function(){this.close();this.view&&this.view.focus()};I._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};I._toggleFeatureMenu=function(){const l=!this.featureMenuOpen;this._featureMenuOpenChanged(l);this.actionsMenuOpen=!1;this.featureMenuOpen=l};I._toggleActionsMenu=function(){const l=
!this.actionsMenuOpen;this._actionsMenuOpenChanged(l);this.featureMenuOpen=!1;this.actionsMenuOpen=l};I._triggerAction=function(l){const A=l.currentTarget.dataset.actionUid;var {allActions:y}=this.viewModel;l=y.findIndex(K=>K.uid===A);(y=y.getItemAt(l))&&"toggle"===y.type&&(y.value=!y.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(l)};I._selectFeature=function(l){l=l.currentTarget["data-feature-index"];isNaN(l)||(this.viewModel.selectedFeatureIndex=l);this.featureMenuOpen=!1;this._focusFeatureMenuButton=
!0;this.scheduleRender()};I._next=function(){this.next()};I._previous=function(){this.previous()};g._createClass(L,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var l,
A,y,K,U,ba,ea;return!!(this.selectedFeatureWidget?(null==(l=this.selectedFeatureWidget)?0:null==(A=l.viewModel)?0:A.waitingForContent)||"error"===(null==(y=this.selectedFeatureWidget)?void 0:null==(K=y.viewModel)?void 0:K.state)||(null==(U=this.selectedFeatureWidget)?0:null==(ba=U.viewModel)?0:ba.content):null==(ea=this.viewModel)?0:ea.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",
get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(l){this._set("actionsMenuOpen",
!!l)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||X},set:function(l){var A={...X};const y=this.get("viewModel.view.breakpoints");var K={};y&&(K.width=y.xsmall,K.height=y.xsmall);l={...A,...l};A={...A.breakpoint,...K};({breakpoint:K}=l);!0===K?l.breakpoint=A:"object"===typeof K&&(l.breakpoint={...A,...K});this._set("dockOptions",
l);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:l,visibleElements:A,headingLevel:y}=this,{selectedFeatureViewModel:K}=this.viewModel,U={...A,title:!1};if(!K)return null;l?(l.viewModel=K,l.visibleElements=U):this._feature=new r({headingLevel:y+1,viewModel:K,visibleElements:U});return this._feature}}]);return L}(t.FeatureContentMixin(f));p.__decorate([d.property({readOnly:!0})],m.prototype,"actionsMenuId",null);p.__decorate([d.property({readOnly:!0})],
m.prototype,"actionsMenuButtonId",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"featureMenuId",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"titleId",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"contentId",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"hasContent",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"featureNavigationVisible",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"collapsible",null);p.__decorate([d.property({readOnly:!0})],
m.prototype,"featureMenuVisible",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"contentCollapsed",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"dividedActions",null);p.__decorate([n.aliasOf("viewModel.actions")],m.prototype,"actions",void 0);p.__decorate([d.property()],m.prototype,"actionsMenuOpen",null);p.__decorate([d.property()],m.prototype,"alignment",void 0);p.__decorate([n.aliasOf("viewModel.autoCloseEnabled")],m.prototype,"autoCloseEnabled",void 0);p.__decorate([n.aliasOf("viewModel.autoOpenEnabled")],
m.prototype,"autoOpenEnabled",void 0);p.__decorate([n.aliasOf("viewModel.defaultPopupTemplateEnabled")],m.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([n.aliasOf("viewModel.content")],m.prototype,"content",void 0);p.__decorate([d.property()],m.prototype,"collapsed",void 0);p.__decorate([d.property()],m.prototype,"collapseEnabled",void 0);p.__decorate([d.property({readOnly:!0})],m.prototype,"currentAlignment",null);p.__decorate([d.property({readOnly:!0})],m.prototype,"currentDockPosition",
null);p.__decorate([d.property()],m.prototype,"dockOptions",null);p.__decorate([d.property()],m.prototype,"dockEnabled",void 0);p.__decorate([n.aliasOf("viewModel.featureCount")],m.prototype,"featureCount",void 0);p.__decorate([d.property()],m.prototype,"featureMenuOpen",void 0);p.__decorate([n.aliasOf("viewModel.features")],m.prototype,"features",void 0);p.__decorate([n.aliasOf("viewModel.goToOverride")],m.prototype,"goToOverride",void 0);p.__decorate([d.property()],m.prototype,"headingLevel",void 0);
p.__decorate([n.aliasOf("viewModel.highlightEnabled")],m.prototype,"highlightEnabled",void 0);p.__decorate([n.aliasOf("viewModel.location")],m.prototype,"location",void 0);p.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],m.prototype,"label",void 0);p.__decorate([d.property()],m.prototype,"maxInlineActions",void 0);p.__decorate([d.property(),u.messageBundle("esri/widgets/Popup/t9n/Popup")],m.prototype,"messages",void 0);p.__decorate([d.property(),u.messageBundle("esri/t9n/common")],
m.prototype,"messagesCommon",void 0);p.__decorate([n.aliasOf("viewModel.promises")],m.prototype,"promises",void 0);p.__decorate([n.aliasOf("viewModel.selectedFeature")],m.prototype,"selectedFeature",void 0);p.__decorate([n.aliasOf("viewModel.selectedFeatureIndex")],m.prototype,"selectedFeatureIndex",void 0);p.__decorate([d.property({readOnly:!0})],m.prototype,"selectedFeatureWidget",null);p.__decorate([d.property()],m.prototype,"spinnerEnabled",void 0);p.__decorate([n.aliasOf("viewModel.title")],
m.prototype,"title",void 0);p.__decorate([n.aliasOf("viewModel.updateLocationEnabled")],m.prototype,"updateLocationEnabled",void 0);p.__decorate([n.aliasOf("viewModel.view")],m.prototype,"view",void 0);p.__decorate([d.property({type:w}),D.vmEvent(["triggerAction","trigger-action"])],m.prototype,"viewModel",void 0);p.__decorate([n.aliasOf("viewModel.visible")],m.prototype,"visible",void 0);p.__decorate([d.property()],m.prototype,"visibleElements",void 0);p.__decorate([h.cast("visibleElements")],m.prototype,
"castVisibleElements",null);p.__decorate([x.accessibleHandler()],m.prototype,"_close",null);p.__decorate([x.accessibleHandler()],m.prototype,"_toggleDockEnabled",null);p.__decorate([x.accessibleHandler()],m.prototype,"_toggleFeatureMenu",null);p.__decorate([x.accessibleHandler()],m.prototype,"_toggleActionsMenu",null);p.__decorate([x.accessibleHandler()],m.prototype,"_triggerAction",null);p.__decorate([x.accessibleHandler()],m.prototype,"_selectFeature",null);p.__decorate([x.accessibleHandler()],
m.prototype,"_next",null);p.__decorate([x.accessibleHandler()],m.prototype,"_previous",null);return m=p.__decorate([e.subclass("esri.widgets.Popup")],m)})},"esri/core/throttle":function(){define(["exports"],function(g){g.throttle=function(p,m,k,q){let E=null,z=1E3;"number"===typeof m?(z=m,q=k):(E=null!=m?m:null,z=k);let H=0,G;const v=()=>{H=0;p.apply(q,G)};m=(...n)=>{E&&E.apply(q,n);G=n;z?H||(H=setTimeout(v,z)):v()};m.remove=()=>{H&&(clearTimeout(H),H=0)};m.forceUpdate=()=>{H&&(clearTimeout(H),v())};
m.hasPendingUpdates=()=>!!H;return m};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u){const D={title:!0,content:!0,lastEditedInfo:!0};k=function(J){function S(P,X){P=J.call(this,P,X)||this;P._contentWidgets=[];P.graphic=null;P.defaultPopupTemplateEnabled=!1;P.headingLevel=2;P.label=void 0;P.messages=null;P.messagesCommon=null;P.messagesURIUtils=null;P.spatialReference=null;P.title=null;P.visibleElements={...D};P.map=null;P.view=null;P.viewModel=new B;return P}p._inheritsLoose(S,J);var T=S.prototype;T.initialize=function(){this.own(q.watch(()=>
{var P;return null==(P=this.viewModel)?void 0:P.contentViewModels},()=>this._setupContentWidgets(),q.initial))};T.loadDependencies=function(){return new Promise((P,X)=>g(["../chunks/calcite-notice"],P,X))};T.destroy=function(){this._destroyContentWidgets()};T.castVisibleElements=function(P){return{...D,...P}};T.render=function(){var {state:P}=this.viewModel;P=x.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===P?this.renderError():"loading"===P?this.renderLoading():
this.renderContentContainer());return x.tsx("div",{class:this.classes("esri-feature","esri-widget")},P)};T.setActiveMedia=function(P,X){this.viewModel.setActiveMedia(P,X)};T.nextMedia=function(P){this.viewModel.nextMedia(P)};T.previousMedia=function(P){this.viewModel.previousMedia(P)};T.renderError=function(){const {messagesCommon:P,messages:X,visibleElements:Q}=this;return x.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},Q.title?x.tsx("div",{key:"error-title",
slot:"title"},P.errorMessage):null,x.tsx("div",{key:"error-message",slot:"message"},X.loadingError))};T.renderLoading=function(){return x.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},x.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};T.renderContentContainer=function(){const {visibleElements:P}=this;return P.content?x.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):
null};T.renderTitle=function(){const {visibleElements:P,title:X}=this;return P.title?x.tsx(t.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:X}):null};T.renderContent=function(){var P=this.viewModel.content;return P?Array.isArray(P)?P.length?x.tsx("div",{key:"content-content-elements"},P.map(this.renderContentElement,this)):null:"string"===typeof P?(P=this._contentWidgets[0],!P||P.destroyed?null:x.tsx("div",{key:"content-content"},P.render())):this.renderNodeContent(P):null};
T.renderContentElement=function(P,X){const {visibleElements:Q}=this;if("boolean"!==typeof Q.content&&!Q.content[P.type])return null;switch(P.type){case "attachments":return this.renderAttachments(X);case "custom":return this.renderCustom(P,X);case "fields":return this.renderFields(X);case "media":return this.renderMedia(X);case "text":return this.renderText(P,X);case "expression":return this.renderExpression(X);default:return null}};T.renderAttachments=function(P){const X=this._contentWidgets[P];
if(!X||X.destroyed)return null;const {state:Q,attachmentInfos:O}=X.viewModel;return"loading"===Q||0<O.length?x.tsx("div",{key:this._buildKey("attachments-element",P),class:this.classes("esri-feature__content-element")},X.render()):null};T.renderExpression=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:x.tsx("div",{key:this._buildKey("expression-element",P),class:"esri-feature__content-element"},X.render())};T.renderCustom=function(P,X){({creator:P}=P);const Q=this._contentWidgets[X];
return!Q||Q.destroyed?null:P?x.tsx("div",{key:this._buildKey("custom-element",X),class:"esri-feature__content-element"},Q.render()):null};T.renderFields=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:x.tsx("div",{key:this._buildKey("fields-element",P),class:"esri-feature__content-element"},X.render())};T.renderMedia=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:x.tsx("div",{key:this._buildKey("media-element",P),class:"esri-feature__content-element"},
X.render())};T.renderLastEditInfo=function(){const {visibleElements:P,messages:X}=this;var {lastEditInfo:Q}=this.viewModel;if(!Q||!P.lastEditedInfo)return null;const {date:O,user:Z}=Q;Q=u.substitute("edit"===Q.type?Z?X.lastEditedByUser:X.lastEdited:Z?X.lastCreatedByUser:X.lastCreated,{date:O,user:Z});return x.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},Q)};T.renderText=function(P,X){const Q=this._contentWidgets[X];return!Q||
Q.destroyed?null:P.text?x.tsx("div",{key:this._buildKey("text-element",X),class:this.classes("esri-feature__content-element","esri-feature__text")},Q.render()):null};T._buildKey=function(P,...X){const Q=this.get("viewModel.graphic.uid")||"0";X=X.join("-");return`${P}__${Q}-${X}`};T._destroyContentWidget=function(P){P&&(P.viewModel=null,!P.destroyed&&P.destroy())};T._destroyContentWidgets=function(){this._contentWidgets.forEach(P=>this._destroyContentWidget(P));this._contentWidgets=[]};T._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:P,visibleElements:X}=this;var Q=this.get("viewModel.content");const {contentViewModels:O}=this.viewModel;Array.isArray(Q)?Q.forEach((Z,L)=>{"attachments"===Z.type&&(this._contentWidgets[L]=new a({displayType:Z.displayType,headingLevel:X.title?P+1:P,viewModel:O[L]}));"fields"===Z.type&&(this._contentWidgets[L]=new e({viewModel:O[L]}));"media"===Z.type&&(this._contentWidgets[L]=new r({viewModel:O[L]}));"text"===Z.type&&(this._contentWidgets[L]=
new h({viewModel:O[L]}));"custom"===Z.type&&(this._contentWidgets[L]=new h({viewModel:O[L]}));"expression"===Z.type&&(this._contentWidgets[L]=new d({viewModel:O[L]}))},this):(Q=O[0])&&!Q.destroyed&&(this._contentWidgets[0]=new h({viewModel:Q}));this.scheduleRender()};return S}(f.FeatureContentMixin(b));m.__decorate([E.aliasOf("viewModel.graphic")],k.prototype,"graphic",void 0);m.__decorate([E.aliasOf("viewModel.defaultPopupTemplateEnabled")],k.prototype,"defaultPopupTemplateEnabled",void 0);m.__decorate([v.property()],
k.prototype,"headingLevel",void 0);m.__decorate([v.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);m.__decorate([v.property(),C.messageBundle("esri/widgets/Feature/t9n/Feature")],k.prototype,"messages",void 0);m.__decorate([v.property(),C.messageBundle("esri/t9n/common")],k.prototype,"messagesCommon",void 0);m.__decorate([v.property(),C.messageBundle("esri/widgets/support/t9n/uriUtils")],k.prototype,"messagesURIUtils",void 0);m.__decorate([E.aliasOf("viewModel.spatialReference")],
k.prototype,"spatialReference",void 0);m.__decorate([E.aliasOf("viewModel.title")],k.prototype,"title",void 0);m.__decorate([v.property()],k.prototype,"visibleElements",void 0);m.__decorate([G.cast("visibleElements")],k.prototype,"castVisibleElements",null);m.__decorate([E.aliasOf("viewModel.map")],k.prototype,"map",void 0);m.__decorate([E.aliasOf("viewModel.view")],k.prototype,"view",void 0);m.__decorate([v.property({type:B})],k.prototype,"viewModel",void 0);return k=m.__decorate([n.subclass("esri.widgets.Feature")],
k)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){q=function(e){function r(f,t){f=e.call(this,f,t)||this;f._featureElementInfo=null;f.attachmentsWidget=new v;f.description=null;f.displayType=null;f.graphic=null;f.headingLevel=2;f.title=null;f.viewModel=new b;return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){this._featureElementInfo=new a;this.own([m.watch(()=>{var f,t;return[null==(f=this.viewModel)?void 0:f.description,null==(t=this.viewModel)?void 0:t.title,this.headingLevel]},()=>
this._setupFeatureElementInfo(),m.initial),m.watch(()=>{var f;return null==(f=this.viewModel)?void 0:f.graphic},f=>this.attachmentsWidget.graphic=f,m.initial)])};B.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};B.render=function(){var f;const {attachmentsWidget:t}=this;return d.tsx("div",{class:"esri-feature-attachments"},null==(f=this._featureElementInfo)?void 0:f.render(),null==t?void 0:t.render())};B._setupFeatureElementInfo=function(){const {description:f,
title:t,headingLevel:w}=this;this._featureElementInfo.set({description:f,title:t,headingLevel:w})};return r}(n);p.__decorate([H.property({readOnly:!0})],q.prototype,"attachmentsWidget",void 0);p.__decorate([k.aliasOf("viewModel.description")],q.prototype,"description",void 0);p.__decorate([k.aliasOf("attachmentsWidget.displayType")],q.prototype,"displayType",void 0);p.__decorate([k.aliasOf("viewModel.graphic")],q.prototype,"graphic",void 0);p.__decorate([H.property()],q.prototype,"headingLevel",void 0);
p.__decorate([k.aliasOf("viewModel.title")],q.prototype,"title",void 0);p.__decorate([H.property({type:b})],q.prototype,"viewModel",void 0);return q=p.__decorate([G.subclass("esri.widgets.Feature.FeatureAttachments")],q)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r){const B={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},f=window.CSS;z=function(t){function w(x,u){x=t.call(this,x,u)||this;x.abilities=null;x.displayType="auto";x.graphic=null;x.label=void 0;x.messages=null;x.messagesUnits=null;x.selectedFile=null;x.submitting=!1;x.viewModel=new a;x.visibleElements={...B};x._supportsImageOrientation=f&&f.supports&&f.supports("image-orientation",
"from-image");x._addAttachmentForm=null;x._updateAttachmentForm=null;return x}g._inheritsLoose(w,t);var C=w.prototype;C.initialize=function(){this.own([k.on(()=>{var x;return null==(x=this.viewModel)?void 0:x.attachmentInfos},"change",()=>this.scheduleRender()),k.watch(()=>{var x;return null==(x=this.viewModel)?void 0:x.mode},()=>this._modeChanged(),k.initial)])};C.castVisibleElements=function(x){return{...B,...x}};C.addAttachment=function(){const {_addAttachmentForm:x,viewModel:u}=this;this._set("submitting",
!0);this._set("error",null);return u.addAttachment(x).then(D=>{this._set("submitting",!1);this._set("error",null);u.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new m("attachments:add-attachment",this.messages.addErrorMessage,D));throw D;})};C.deleteAttachment=function(x){const {viewModel:u}=this;this._set("submitting",!0);this._set("error",null);return u.deleteAttachment(x).then(D=>{this._set("submitting",!1);this._set("error",null);u.mode="view";return D}).catch(D=>
{this._set("submitting",!1);this._set("error",new m("attachments:delete-attachment",this.messages.deleteErrorMessage,D));throw D;})};C.updateAttachment=function(){const {viewModel:x}=this,{_updateAttachmentForm:u}=this;this._set("submitting",!0);this._set("error",null);return x.updateAttachment(u).then(D=>{this._set("submitting",!1);this._set("error",null);x.mode="view";return D}).catch(D=>{this._set("submitting",!1);this._set("error",new m("attachments:update-attachment",this.messages.updateErrorMessage,
D));throw D;})};C.render=function(){const {submitting:x,viewModel:u}=this,{state:D}=u;return r.tsx("div",{class:this.classes("esri-attachments","esri-widget")},x?this.renderProgressBar():null,"loading"===D?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};C.renderErrorMessage=function(){const {error:x,visibleElements:u}=this;return x&&u.errorMessage?r.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},x.message):null};C.renderAttachments=function(){const {mode:x,
activeAttachmentInfo:u}=this.viewModel;return"add"===x?this.renderAddForm():"edit"===x?this.renderDetailsForm(u):this.renderAttachmentContainer()};C.renderLoading=function(){return r.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},r.tsx("div",{class:"esri-attachments__loader"}))};C.renderProgressBar=function(){return this.visibleElements.progressBar?r.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};C.renderAddForm=function(){const {submitting:x,selectedFile:u}=
this;var D=x||!u,J=this.visibleElements.cancelAddButton?r.tsx("button",{type:"button",bind:this,disabled:x,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",x&&"esri-button--disabled")},this.messages.cancel):null;D=this.visibleElements.addSubmitButton?r.tsx("button",{type:"submit",disabled:D,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:D})},this.messages.add):
null;const S=u?r.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},u.name):null;J=r.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},r.tsx("fieldset",{class:"esri-attachments__file-fieldset"},S,r.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},u?this.messages.changeFile:this.messages.selectFile,r.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),D,J);return r.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},J)};C.renderDetailsForm=function(x){const {visibleElements:u,viewModel:D,selectedFile:J,submitting:S}=this,{contentType:T,size:P,url:X}=x;var {abilities:Q}=D,O=S||!J,Z=Q.editing&&Q.operations.delete&&u.deleteButton?r.tsx("button",{key:"delete-button",type:"button",disabled:S,bind:this,onclick:A=>this._submitDeleteAttachment(A,x),class:this.classes("esri-button",
"esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:S})},this.messages.delete):null;O=Q.editing&&Q.operations.update&&u.updateButton?r.tsx("button",{disabled:O,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:O})},this.messages.update):null;const L=this.visibleElements.cancelUpdateButton?r.tsx("button",{disabled:S,key:"cancel-button",type:"button",bind:this,
onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:S})},this.messages.cancel):null;var I=J?r.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},J.name):null;Q=Q.editing&&Q.operations.update?r.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},I,r.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,
r.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null;I=r.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},r.tsx("label",null,q.formatFileSize(this.messagesUnits,P)));const l=r.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},r.tsx("label",null,T));Z=r.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:this._submitUpdateAttachment},r.tsx("div",{class:"esri-attachments__metadata"},I,l),Q,r.tsx("div",{class:"esri-attachments__actions"},Z,L,O));return r.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},r.tsx("a",{class:"esri-attachments__item-link",href:X,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:x,size:400}),r.tsx("div",{class:"esri-attachments__item-link-overlay"},r.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},r.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),r.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),Z)};C.renderImageMask=function({attachmentInfo:x,size:u}){var {supportsResizeAttachments:D}=this.viewModel;const {contentType:J,name:S,url:T}=x,P=D&&h.isSupportedImage(J);x=(x=this._getCSSTransform(x,P))?{transform:x,"image-orientation":"none"}:{};const X=T.includes("?")?
"\x26":"?";u=P?`${T}${X}w=${u}`:h.getIconPath(J);D={["esri-attachments__image--resizable"]:D};return r.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!P},"esri-attachments__item-mask")},r.tsx("img",{styles:x,alt:S,src:u,class:this.classes(D,"esri-attachments__image")}))};C.renderAttachmentInfo=function({attachmentInfo:x,displayType:u}){var {viewModel:D}=this;({abilities:D}=D);const {name:J,url:S}=x;u=this.renderImageMask({attachmentInfo:x,size:"list"===u?48:400});var T=D.editing?
r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",d.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;T=r.tsx("label",{class:"esri-attachments__label"},r.tsx("span",{class:"esri-attachments__filename"},J||this.messages.noTitle),T);u=[u,T];D=D.editing?r.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":x.id,
onclick:()=>this._startEditAttachment(x),type:"button"},u):r.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:S,target:"_blank"},u);return r.tsx("li",{class:"esri-attachments__item",key:x},D)};C.renderAttachmentContainer=function(){const {effectiveDisplayType:x,viewModel:u,visibleElements:D}=this,{attachmentInfos:J,abilities:S}=u;var T=J&&J.length;const P={["esri-attachments__container--list"]:"preview"!==x,["esri-attachments__container--preview"]:"preview"===x},X=S.editing&&
S.operations.add&&D.addButton?r.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;T=T?r.tsx("ul",{class:"esri-attachments__items"},J.toArray().map(Q=>this.renderAttachmentInfo({attachmentInfo:Q,displayType:x}))):r.tsx("div",{class:"esri-widget__content--empty"},
this.messages.noAttachments);return r.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",P)},T,X)};C._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};C._handleFileInputChange=function(x){x=(x=x.target)&&x.files&&x.files.item(0);this._set("selectedFile",x)};C._submitDeleteAttachment=function(x,u){x.preventDefault();this.deleteAttachment(u)};C._submitAddAttachment=function(x){x.preventDefault();this.addAttachment()};C._submitUpdateAttachment=
function(x){x.preventDefault();this.updateAttachment()};C._startEditAttachment=function(x){const {viewModel:u}=this;u.activeAttachmentInfo=x;u.mode="edit"};C._startAddAttachment=function(){this.viewModel.mode="add"};C._cancelForm=function(x){x.preventDefault();this.viewModel.mode="view"};C._getCSSTransform=function(x,u){({orientationInfo:x}=x);return!this._supportsImageOrientation&&u&&x?[x.rotation?`rotate(${x.rotation}deg)`:"",x.mirrored?"scaleX(-1)":""].join(" "):""};g._createClass(w,[{key:"effectiveDisplayType",
get:function(){const {displayType:x}=this;return x&&"auto"!==x?x:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return w}(b);p.__decorate([E.aliasOf("viewModel.abilities")],z.prototype,"abilities",void 0);p.__decorate([v.property()],z.prototype,"displayType",void 0);p.__decorate([v.property({readOnly:!0})],z.prototype,"effectiveDisplayType",null);p.__decorate([E.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);p.__decorate([v.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],z.prototype,"label",void 0);p.__decorate([v.property(),e.messageBundle("esri/widgets/Attachments/t9n/Attachments")],z.prototype,"messages",void 0);p.__decorate([v.property(),e.messageBundle("esri/core/t9n/Units")],z.prototype,"messagesUnits",void 0);p.__decorate([v.property({readOnly:!0})],z.prototype,"selectedFile",void 0);p.__decorate([v.property({readOnly:!0})],z.prototype,"submitting",void 0);p.__decorate([v.property({readOnly:!0})],z.prototype,"error",void 0);p.__decorate([v.property({type:a})],
z.prototype,"viewModel",void 0);p.__decorate([v.property()],z.prototype,"visibleElements",void 0);p.__decorate([G.cast("visibleElements")],z.prototype,"castVisibleElements",null);return z=p.__decorate([n.subclass("esri.widgets.Attachments")],z)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(g,p,m,k,q,E,z,H){function G(h,d,e){return h.units[d][e]}function v(h,d,e,r=2,B="abbr"){return`${H.formatNumber(d,
{minimumFractionDigits:r,maximumFractionDigits:r})} ${G(h,e,B)}`}function n(h,d,e,r=2,B="abbr"){return`${H.formatNumber(d,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${G(h,e,B)}`}function b(h,d,e){if(d===e)return h;switch(e){case "arithmetic":return-h+90;case "geographic":return-h-90}}const a=["B","kB","MB","GB","TB"];g.formatAngleDegrees=function(h,d,e,r,B){h=m.cyclicalDegrees.normalize(b(z.convertUnit(h,d,"degrees"),e,r),0,!0);B=q.unwrapOr(B,2);return H.formatNumber(h,
{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:B,minimumFractionDigits:B})};g.formatDMS=function(h,d,e=2){h=z.convertUnit(h,d,"degrees");d=h-Math.floor(h);h-=d;d*=60;let r=d-Math.floor(d);d-=r;r*=60;return`${h.toFixed()}\u00b0 ${d.toFixed()}' ${r.toFixed(e)}"`};g.formatDecimal=v;g.formatFileSize=function(h,d){let e=0===d?0:Math.floor(Math.log(d)/Math.log(p.ByteSizeUnit.KILOBYTES));e=k.clamp(e,0,a.length-1);d=H.formatNumber(d/p.ByteSizeUnit.KILOBYTES**e,{maximumFractionDigits:2});
return E.replace(h.units.bytes[a[e]],{fileSize:d})};g.formatImperialArea=function(h,d,e,r=2,B="abbr"){const f=z.preferredImperialAreaUnit(d,e);return v(h,z.convertUnit(d,e,f),f,r,B)};g.formatImperialLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredImperialLengthUnit(d,e);return v(h,z.convertUnit(d,e,f),f,r,B)};g.formatImperialRelativeLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredImperialLengthUnit(d,e);return n(h,z.convertUnit(d,e,f),f,r,B)};g.formatImperialRelativeVerticalLength=function(h,
d,e,r=2,B="abbr"){const f=z.preferredImperialVerticalLengthUnit(d,e);return n(h,z.convertUnit(d,e,f),f,r,B)};g.formatImperialVerticalLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredImperialVerticalLengthUnit(d,e);return v(h,z.convertUnit(d,e,f),f,r,B)};g.formatMetricArea=function(h,d,e,r=2,B="abbr"){const f=z.preferredMetricAreaUnit(d,e);return v(h,z.convertUnit(d,e,f),f,r,B)};g.formatMetricLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredMetricLengthUnit(d,e);return v(h,z.convertUnit(d,
e,f),f,r,B)};g.formatMetricRelativeLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredMetricLengthUnit(d,e);return n(h,z.convertUnit(d,e,f),f,r,B)};g.formatMetricRelativeVerticalLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredMetricVerticalLengthUnit(d,e);return n(h,z.convertUnit(d,e,f),f,r,B)};g.formatMetricVerticalLength=function(h,d,e,r=2,B="abbr"){const f=z.preferredMetricVerticalLengthUnit(d,e);return v(h,z.convertUnit(d,e,f),f,r,B)};g.formatRelativeAngleDegrees=function(h,d,e,r,B){e!==
r&&(h=-h);h=z.convertUnit(h,d,"degrees")%360;B=q.unwrapOr(B,2);return H.formatNumber(h,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:B,minimumFractionDigits:B,signDisplay:"exceptZero"})};g.formatRelativeDecimal=n;g.unitName=G;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(g){function p(m){return 32+m.length}g.ByteSizeUnit=void 0;(function(m){m[m.KILOBYTES=1024]=
"KILOBYTES";m[m.MEGABYTES=1048576]="MEGABYTES";m[m.GIGABYTES=1073741824]="GIGABYTES"})(g.ByteSizeUnit||(g.ByteSizeUnit={}));g.estimateAttributesObjectSize=function(m){if(!m)return 0;let k=32;for(const q in m)if(m.hasOwnProperty(q)){const E=m[q];switch(typeof E){case "string":k+=p(E);break;case "number":k+=16;break;case "boolean":k+=4}}return k};g.estimateFixedArraySize=function(m,k){return 32+m.length*k};g.estimateNumberByteSize=function(){return 16};g.estimateStringByteSize=p;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e){const r={editing:!1,operations:{add:!0,update:!0,delete:!0}},B=q.ofType(h);k=function(f){function t(C){var x=f.call(this,C)||this;x._getAttachmentsPromise=null;x._attachmentLayer=null;x.abilities={...r};x.activeAttachmentInfo=null;x.attachmentInfos=new B;x.graphic=null;x.mode="view";x.own(H.watch(()=>x.graphic,()=>x._graphicChanged(),H.initial));return x}g._inheritsLoose(t,f);var w=t.prototype;w.destroy=function(){this.graphic=this._attachmentLayer=null};
w.castAbilities=function(C){return{...r,...C}};w.getAttachments=function(){var C=g._asyncToGenerator(function*(){const {_attachmentLayer:x,attachmentInfos:u}=this;if(!x||"function"!==typeof x.queryAttachments)throw new E("invalid-layer","getAttachments(): A valid layer is required.");const D=this._getFeatureId();var J=new d({objectIds:[D],returnMetadata:!0});const S=[];this._getAttachmentsPromise=J=x.queryAttachments(J).then(T=>T[D]||S).catch(()=>S);this.notifyChange("state");J=yield J;u.removeAll();
J.length&&u.addMany(J);this._getAttachmentsPromise=null;this.notifyChange("state");return J});return function(){return C.apply(this,arguments)}}();w.addAttachment=function(){var C=g._asyncToGenerator(function*(x){const {_attachmentLayer:u,attachmentInfos:D,graphic:J,abilities:S}=this;if(!x)throw new E("invalid-attachment","addAttachment(): An attachment is required.",{attachment:x});if(!S.operations.add)throw new E("invalid-abilities","addAttachment(): add abilities are required.");if(!u||"function"!==
typeof u.addAttachment)throw new E("invalid-layer","addAttachment(): A valid layer is required.");x=yield u.addAttachment(J,x).then(T=>this._queryAttachment(T.objectId));D.add(x);return x});return function(x){return C.apply(this,arguments)}}();w.deleteAttachment=function(){var C=g._asyncToGenerator(function*(x){const {_attachmentLayer:u,attachmentInfos:D,graphic:J,abilities:S}=this;if(!x)throw new E("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:x});
if(!S.operations.delete)throw new E("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!u||"function"!==typeof u.deleteAttachments)throw new E("invalid-layer","deleteAttachment(): A valid layer is required.");const T=yield u.deleteAttachments(J,[x.id]).then(()=>x);D.remove(T);return T});return function(x){return C.apply(this,arguments)}}();w.updateAttachment=function(){var C=g._asyncToGenerator(function*(x,u=this.activeAttachmentInfo){const {_attachmentLayer:D,attachmentInfos:J,
graphic:S,abilities:T}=this;if(!x)throw new E("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:x});if(!u)throw new E("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:u});if(!T.operations.update)throw new E("invalid-abilities","updateAttachment(): Update abilities are required.");const P=J.findIndex(X=>X===u);if(!D||"function"!==typeof D.updateAttachment)throw new E("invalid-layer","updateAttachment(): A valid layer is required.");
x=yield D.updateAttachment(S,u.id,x).then(X=>this._queryAttachment(X.objectId));J.splice(P,1,x);return x});return function(x){return C.apply(this,arguments)}}();w._queryAttachment=function(){var C=g._asyncToGenerator(function*(x){if(!x)throw new E("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:u}=this,D=this._getFeatureId();x=new d({objectIds:[D],attachmentsWhere:`AttachmentId=${x}`,returnMetadata:!0});return u.queryAttachments(x).then(J=>J[D][0])});return function(x){return C.apply(this,
arguments)}}();w._getFeatureId=function(){const {_attachmentLayer:C,graphic:x}=this;if(!C||!x)return null;const {objectIdField:u}=C,{attributes:D}=x;return D&&D[u]};w._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};w._setAttachmentLayer=function(){var {graphic:C}=this;this._attachmentLayer=(C=e.getSourceLayer(C))?"scene"===C.type&&z.isSome(C.associatedLayer)?C.associatedLayer:C:null};g._createClass(t,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return t}(k);p.__decorate([G.property()],k.prototype,"abilities",void 0);p.__decorate([b.cast("abilities")],k.prototype,"castAbilities",null);p.__decorate([G.property()],k.prototype,"activeAttachmentInfo",void 0);p.__decorate([G.property({readOnly:!0,type:B})],k.prototype,"attachmentInfos",void 0);p.__decorate([G.property({type:m})],
k.prototype,"graphic",void 0);p.__decorate([G.property()],k.prototype,"mode",void 0);p.__decorate([G.property({readOnly:!0})],k.prototype,"state",null);p.__decorate([G.property({readOnly:!0})],k.prototype,"supportsResizeAttachments",null);return k=p.__decorate([a.subclass("esri.widgets.Attachments.AttachmentsViewModel")],k)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n){function b(){b=p._asyncToGenerator(function*(M,V){return"function"===typeof M?M.call(null,V):M});return b.apply(this,arguments)}function a(M){return M?U.test(M):!1}function h(M,V){if(!a(V)||!M)return null;const ca=V.replace(U,"").toLowerCase();let ia;M.some(ka=>ka.name.toLowerCase()===ca?(ia=ka,!0):!1);return ia}function d(M,V){return(V=e(V,M))?V.name:M}function e(M,V){return M&&"function"===typeof M.getField?M.getField(V):null}function r({formattedAttributes:M,template:V,
fieldInfoMap:ca}){return`${E.replace(E.replace(V,ia=>{{const ka=ca.get(ia.toLowerCase());ia=`{${ka&&ka.fieldName||ia}}`}return ia}),M).replace(A,"")}`.trim()}function B(M,V,ca=!1){const ia=V[M];"string"===typeof ia&&(ca=(ca?encodeURIComponent(ia):ia).replace(K,"%27"),V[M]=ca)}function f(M,V=!1){const ca={...M};Object.keys(ca).forEach(ia=>B(ia,ca,V));return ca}function t(M,V){return M.replace(y,(ca,ia,ka)=>(ca=e(V,ka))?`{${ca.name}}`:ia)}function w(M,V,ca){return(M=t(M,ca))?M.replace(na,(ia,ka,ra)=>
{ka=`${ka||ra}`.trim();return E.replace(ia,f(V,ka&&"{"!==ka[0]))}):M}function C(M,V){var ca=V.fieldName,ia=x(V.fieldInfos,ca),ka=null==ia?void 0:ia.clone();ia=V.preventPlacesFormatting;V=V.layer;var ra=e(V,ca);if(ka&&"date"===(null==ra?void 0:ra.type)){ra=ka.format||new v;ra.dateFormat=ra.dateFormat||"short-date-short-time";var va;if(!(va=!(null!=V&&V.layer)&&"feature"===(null==V?void 0:V.type)&&V.datesInUnknownTimezone)){if(va=!(null==V||!V.layer))va=V.layer,va="map-image"===(null==va?void 0:va.type);
va=va&&V.layer.datesInUnknownTimezone}ra.dateTimeFormatOptions=va?{timeZone:"UTC"}:null;ka.format=ra}ka=ka&&ka.format;if("string"===typeof M&&G.isRasterPixelValueField(ca)&&ka)return ka.formatRasterPixelValue(M);"string"!==typeof M||!ka||null!=ka.dateFormat||null==ka.places&&null==ka.digitSeparator||(ca=Number(M),isNaN(ca)||(M=ca));return"string"===typeof M||null==M||null==ka?J(M):ia?H.formatNumber(M,{...H.convertNumberFormatToIntlOptions(ka),minimumFractionDigits:0,maximumFractionDigits:20}):ka.format(M)}
function x(M,V){if(M&&M.length&&V){var ca=V.toLowerCase(),ia=void 0;M.some(ka=>ka.fieldName&&ka.fieldName.toLowerCase()===ca?(ia=ka,!0):!1);return ia}}function u({fieldName:M,graphic:V,layer:ca}){if(Z(M)||!ca||"function"!==typeof ca.getFeatureType)return null;const {typeIdField:ia}=ca;return ia&&M===ia?(M=ca.getFeatureType(V))?M.name:null:null}function D({fieldName:M,value:V,graphic:ca,layer:ia}){return Z(M)||!ia||"function"!==typeof ia.getFieldDomain?null:(M=ia.getFieldDomain(M,{feature:ca}))&&"coded-value"===
M.type?M.getName(V):null}function J(M){return"string"===typeof M?M.replace(ba,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):M}function S(M){const {value:V,fieldName:ca,fieldInfos:ia,fieldInfoMap:ka,layer:ra,graphic:va}=M;return null==V?"":(M=D({fieldName:ca,value:V,graphic:va,layer:ra}))||(M=u({fieldName:ca,graphic:va,layer:ra}))?M:ka.get(ca.toLowerCase())?C(V,{fieldInfos:ia||Array.from(ka.values()),fieldName:ca,layer:ra}):(M=ra&&ra.fieldsIndex)&&M.isDateField(ca)?z.formatDate(V,la):J(V)}function T(M,
V){return P.apply(this,arguments)}function P(){P=p._asyncToGenerator(function*(M,V){var ca,ia;const {layer:ka,graphic:ra,outFields:va,objectIds:Ba,returnGeometry:Da,spatialReference:Ga}=M;M=Ba[0];if("number"!==typeof M&&"string"!==typeof M)return l.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ka,graphic:ra,objectId:M,requiredFields:va}),null;if(null==(ca=ka.capabilities)||null==(ia=ca.operations)||!ia.supportsQuery)return l.warn("The specified layer cannot be queried. The following fields will not be available.",
{layer:ka,graphic:ra,requiredFields:va,returnGeometry:Da}),null;ca=ka.createQuery();ca.objectIds=Ba;ca.outFields=null!=va&&va.length?va:[ka.objectIdField];ca.returnGeometry=!!Da;ca.returnZ=!!Da;ca.returnM=!!Da;ca.outSpatialReference=Ga;return(yield ka.queryFeatures(ca,V)).features[0]});return P.apply(this,arguments)}function X(M){return Q.apply(this,arguments)}function Q(){Q=p._asyncToGenerator(function*(M){var V;if(null==(V=M.expressionInfos)||!V.length)return!1;V=yield n.loadArcade();({arcadeUtils:{hasGeometryFunctions:V}}=
V);return V(M)});return Q.apply(this,arguments)}function O(){O=p._asyncToGenerator(function*({graphic:M,popupTemplate:V,layer:ca,spatialReference:ia},ka){if(ca&&V&&("function"===typeof ca.load&&(yield ca.load(ka)),M.attributes)){var ra=M.attributes[ca.objectIdField];if(null!=ra){ra=[ra];var va=yield V.getRequiredFields(ca.fieldsIndex),Ba=G.featureHasFields(va,M);va=Ba?[]:va;V=V.returnGeometry||(yield X(V));if(!Ba||V)if(ca=yield T({layer:ca,graphic:M,outFields:va,objectIds:ra,returnGeometry:V,spatialReference:ia},
ka))ca.geometry&&(M.geometry=ca.geometry),ca.attributes&&(M.attributes={...M.attributes,...ca.attributes})}}});return O.apply(this,arguments)}function Z(M=""){return M?M.includes("relationships/"):!1}function L({attributes:M,graphic:V,relatedInfo:ca,fieldInfos:ia,fieldInfoMap:ka,layer:ra}){M&&V&&ca&&Object.keys(V.attributes).forEach(va=>{var Ba=(Ba={layerId:ca.relation.id.toString(),fieldName:va},`${"relationships/"}${Ba.layerId}/${Ba.fieldName}`);M[Ba]=S({fieldName:Ba,fieldInfos:ia,fieldInfoMap:ka,
layer:ra,value:V.attributes[va],graphic:V})})}function I({attributes:M,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka}){M&&V&&(V.relatedFeatures&&V.relatedFeatures&&V.relatedFeatures.forEach(ra=>L({attributes:M,graphic:ra,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka})),V.relatedStatsFeatures&&V.relatedStatsFeatures&&V.relatedStatsFeatures.forEach(ra=>L({attributes:M,graphic:ra,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka})))}const l=k.getLogger("esri.widgets.Feature.support.featureUtils"),
A=/href=(""|'')/gi,y=/(\{([^\{\r\n]+)\})/g,K=/'/g,U=/^\s*expression\//i,ba=/(\n)/gi,ea=/[\u00A0-\u9999<>&]/gim,na=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ha=/^(?:mailto:|tel:)/,la=z.convertDateFormatToIntlOptions("short-date-short-time"),pa=M=>{if(!M)return!1;M=M.toUpperCase();return M.includes("CURRENT_TIMESTAMP")||M.includes("CURRENT_DATE")||M.includes("CURRENT_TIME")},qa=({layer:M,method:V,query:ca,definitionExpression:ia})=>{var ka,ra;null!=(ka=M.capabilities)&&null!=(ra=ka.query)&&ra.supportsCacheHint&&
"attachments"!==V&&(M=q.isSome(ca.where)&&ca.where,V=q.isSome(ca.geometry)&&ca.geometry,pa(ia)||pa(M)||"extent"===(null==V?void 0:V.type)||"tile"===ca.resultType||(ca.cacheHint=!0))};g.applyTextFormattingHTML=J;g.createfieldInfoMap=function(M,V){const ca=new Map;M&&M.forEach(ia=>{const ka=d(ia.fieldName,V);ia.fieldName=ka;ca.set(ka.toLowerCase(),ia)});return ca};g.fixTokens=t;g.formatAttributes=function({fieldInfos:M,attributes:V,layer:ca,graphic:ia,fieldInfoMap:ka,relatedInfos:ra}){const va={};null==
ra?void 0:ra.forEach(Ba=>I({attributes:va,relatedInfo:Ba,fieldInfoMap:ka,fieldInfos:M,layer:ca}));Object.keys(V).forEach(Ba=>{va[Ba]=S({fieldName:Ba,fieldInfos:M,fieldInfoMap:ka,layer:ca,value:V[Ba],graphic:ia})});return va};g.formatEditInfo=function(M,V){const {creatorField:ca,creationDateField:ia,editorField:ka,editDateField:ra}=M;if(V){M=V[ra];if("number"===typeof M)return V=V[ka],{type:"edit",date:z.formatDate(M,la),user:V};M=V[ia];return"number"===typeof M?(V=V[ca],{type:"create",date:z.formatDate(M,
la),user:V}):null}};g.formatValueToFieldInfo=C;g.getAllFieldInfos=function(M){const V=[];if(!M)return V;const {fieldInfos:ca,content:ia}=M;ca&&V.push(...ca);if(!ia||!Array.isArray(ia))return V;ia.forEach(ka=>{"fields"===ka.type&&(ka=ka&&ka.fieldInfos)&&V.push(...ka)});return V};g.getFieldInfo=x;g.getFieldInfoLabel=function(M,V){return(V=h(V,null==M?void 0:M.fieldName))?V.title||null:M?M.label||M.fieldName:null};g.getFixedFieldName=d;g.getFixedFieldNames=function(M,V){return M&&M.map(ca=>d(ca,V))};
g.getSourceLayer=function(M){if(!q.isNone(M))return M.get("sourceLayer")||M.get("layer")};g.graphicCallback=function(M,V){return b.apply(this,arguments)};g.htmlEntities=function(M){return M.replace(ea,V=>`&#${V.charCodeAt(0)};`)};g.isExpressionField=a;g.isRelatedField=Z;g.preLayerQueryCallback=({query:M,layer:V,method:ca})=>{qa({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};g.preRequestCallback=({queryPayload:M,layer:V,method:ca})=>
{qa({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};g.queryUpdatedFeature=function(M,V){return O.apply(this,arguments)};g.shouldOpenInNewTab=function(M=""){if(M)return!ha.test(M.trim().toLowerCase())};g.substituteAttributes=r;g.substituteFieldsInLinksAndAttributes=function({attributes:M,globalAttributes:V,layer:ca,text:ia,expressionAttributes:ka,fieldInfoMap:ra}){return ia?r({formattedAttributes:V,template:w(ia,{...V,...ka,...M},ca),
fieldInfoMap:ra}):""};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(g,p){g.getIconPath=function(m){const k=p.getAssetUrl("esri/themes/base/images/files/");return m?"text/plain"===m?`${k}text-32.svg`:"application/pdf"===m?`${k}pdf-32.svg`:"text/csv"===m?`${k}csv-32.svg`:"application/gpx+xml"===m?`${k}gpx-32.svg`:"application/x-dwf"===m?`${k}cad-32.svg`:
"application/postscript"===m||"application/json"===m||"text/xml"===m||"model/vrml"===m?`${k}code-32.svg`:"application/x-zip-compressed"===m||"application/x-7z-compressed"===m||"application/x-gzip"===m||"application/x-tar"===m||"application/x-gtar"===m||"application/x-bzip2"===m||"application/gzip"===m||"application/x-compress"===m||"application/x-apple-diskimage"===m||"application/x-rar-compressed"===m||"application/zip"===m?`${k}zip-32.svg`:m.includes("image/")?`${k}image-32.svg`:m.includes("audio/")?
`${k}sound-32.svg`:m.includes("video/")?`${k}video-32.svg`:m.includes("msexcel")||m.includes("ms-excel")||m.includes("spreadsheetml")?`${k}excel-32.svg`:m.includes("msword")||m.includes("ms-word")||m.includes("wordprocessingml")?`${k}word-32.svg`:m.includes("powerpoint")||m.includes("presentationml")?`${k}report-32.svg`:`${k}generic-32.svg`:`${k}generic-32.svg`};g.isSupportedImage=function(m){m=m.toLowerCase();return"image/bmp"===m||"image/emf"===m||"image/exif"===m||"image/gif"===m||"image/x-icon"===
m||"image/jpeg"===m||"image/png"===m||"image/tiff"===m||"image/x-wmf"===m};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(g,p,m,k,q,E,z,H){k=function(G){function v(n){n=G.call(this,n)||this;n.description=null;n.title=null;return n}g._inheritsLoose(v,G);return v}(H);p.__decorate([m.property()],k.prototype,"description",void 0);p.__decorate([m.property()],k.prototype,"title",void 0);return k=p.__decorate([z.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],k)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n){k=function(b){function a(d,e){d=b.call(this,d,e)||this;d.description=null;d.headingLevel=2;d.title=null;return d}g._inheritsLoose(a,b);var h=a.prototype;h.render=function(){return n.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};h.renderTitle=function(){const {title:d}=this;return d?n.tsx(G.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},d):null};h.renderDescription=function(){const {description:d}=
this;return d?n.tsx("div",{key:"description",class:"esri-feature-element-info__description"},d):null};return a}(H);p.__decorate([m.property()],k.prototype,"description",void 0);p.__decorate([m.property()],k.prototype,"headingLevel",void 0);p.__decorate([m.property()],k.prototype,"title",void 0);return k=p.__decorate([z.subclass("esri.widgets.Feature.support.FeatureElementInfo")],k)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(g,p,m,k){const q={heading:"esri-widget__heading"};g.CSS=q;g.Heading=function(E,z){const H=p.clamp(Math.ceil(E.level),1,6),G=`h${H}`;delete E.level;return k.tsx(G,{...E,class:m.classes(q.heading,E.class),role:"heading","aria-level":String(H)},z)};g.incrementHeadingLevel=function(E,z=1){return p.clamp(Math.ceil(E+z),1,6)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a){k=function(h){function d(r,B){r=h.call(this,r,B)||this;r.creator=null;r.graphic=null;r.viewModel=null;r._addTargetToAnchors=f=>{Array.from(f.querySelectorAll("a")).forEach(t=>{n.shouldOpenInNewTab(t.href)&&!t.hasAttribute("target")&&t.setAttribute("target","_blank")})};return r}g._inheritsLoose(d,h);var e=d.prototype;e.renderLoading=function(){return a.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},a.tsx("div",{class:"esri-feature-content__loader"}))};
e.renderCreated=function(){var r;const B=null==(r=this.viewModel)?void 0:r.created;return B?B instanceof HTMLElement?a.tsx("div",{key:B,bind:B,afterCreate:this._attachToNode}):b.isWidget(B)?a.tsx("div",{key:B},!B.destroyed&&B.render()):a.tsx("div",{key:B,innerHTML:B,afterCreate:this._addTargetToAnchors}):null};e.render=function(){var r;const B=null==(r=this.viewModel)?void 0:r.state;return a.tsx("div",{class:"esri-feature-content"},"loading"===B?this.renderLoading():this.renderCreated())};e._attachToNode=
function(r){r.appendChild(this)};return d}(G);p.__decorate([m.aliasOf("viewModel.creator")],k.prototype,"creator",void 0);p.__decorate([m.aliasOf("viewModel.graphic")],k.prototype,"graphic",void 0);p.__decorate([z.property({type:v})],k.prototype,"viewModel",void 0);return k=p.__decorate([H.subclass("esri.widgets.Feature.FeatureContent")],k)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b){k=function(a){function h(e){var r=a.call(this,e)||this;r._loadingPromise=null;r.created=null;r.creator=null;r.destroyer=null;r.graphic=null;r.handles.add(E.watch(()=>r.creator,B=>{r._destroyContent();r._createContent(B)},E.initial));return r}g._inheritsLoose(h,a);var d=h.prototype;d.destroy=function(){this._destroyContent()};d._destroyContent=function(){const {created:e,graphic:r,destroyer:B}=this;e&&(b.graphicCallback(B,{graphic:r}).catch(()=>null),this._set("created",
null))};d._createContent=function(){var e=g._asyncToGenerator(function*(r){var {graphic:B}=this;this._loadingPromise=r=b.graphicCallback(r,{graphic:B}).catch(()=>null);this.notifyChange("state");B=yield r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",B))});return function(r){return e.apply(this,arguments)}}();g._createClass(h,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return h}(q.HandleOwnerMixin(k));p.__decorate([z.property({readOnly:!0})],
k.prototype,"created",void 0);p.__decorate([z.property()],k.prototype,"creator",void 0);p.__decorate([z.property()],k.prototype,"destroyer",void 0);p.__decorate([z.property({type:m})],k.prototype,"graphic",void 0);p.__decorate([z.property({readOnly:!0})],k.prototype,"state",null);return k=p.__decorate([n.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],k)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){q=function(e){function r(f,t){f=e.call(this,f,t)||this;f.viewModel=new a;return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){this.own(m.watch(()=>{var f;return null==(f=this.viewModel)?void 0:f.contentElementViewModel},()=>this._setupExpressionWidget(),m.initial))};B.destroy=function(){this._destroyContentWidget()};B.renderLoading=function(){return d.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},d.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};B.render=function(){var f;const {state:t}=this.viewModel;return d.tsx("div",{class:"esri-feature-expression"},"loading"===t?this.renderLoading():"disabled"===t?null:null==(f=this._contentWidget)?void 0:f.render())};B._destroyContentWidget=function(){const {_contentWidget:f}=this;f&&(f.viewModel=null,f.destroy());this._contentWidget=null};B._setupExpressionWidget=function(){const {contentElementViewModel:f,
contentElement:t}=this.viewModel,w=null==t?void 0:t.type;this._destroyContentWidget();this._contentWidget=f?"fields"===w?new n({viewModel:f}):"media"===w?new b({viewModel:f}):"text"===w?new v({viewModel:f}):null:null;this.scheduleRender()};return r}(G);p.__decorate([k.property({type:a})],q.prototype,"viewModel",void 0);return q=p.__decorate([H.subclass("esri.widgets.Feature.FeatureExpression")],q)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e){q=function(r){function B(t,w){t=r.call(this,t,w)||this;t._featureElementInfo=null;t.attributes=null;t.description=null;t.expressionInfos=null;t.fieldInfos=null;t.title=null;t.viewModel=new n;t.messages=null;t.messagesURIUtils=null;return t}g._inheritsLoose(B,r);var f=B.prototype;f.initialize=function(){this._featureElementInfo=new b;this.own(m.watch(()=>{var t,w;return[null==(t=this.viewModel)?void 0:t.description,null==(w=this.viewModel)?void 0:w.title]},
()=>this._setupFeatureElementInfo(),m.initial))};f.destroy=function(){this._featureElementInfo.destroy()};f.renderFieldInfo=function(t,w){var {attributes:C}=this.viewModel;const x=t.fieldName,u=t.label||x;C=C?null==C[x]?"":C[x]:"";t=!(!t.format||!t.format.dateFormat);C="number"!==typeof C||t?a.autoLink(this.messagesURIUtils,C):this._forceLTR(C);t={["esri-feature-fields__field-data--date"]:t};return e.tsx("tr",{key:`fields-element-info-row-${x}-${w}`},e.tsx("th",{key:`fields-element-info-row-header-${x}-${w}`,
class:"esri-feature-fields__field-header",innerHTML:u}),e.tsx("td",{key:`fields-element-info-row-data-${x}-${w}`,class:this.classes("esri-feature-fields__field-data",t),innerHTML:C}))};f.renderFields=function(){const {formattedFieldInfos:t}=this.viewModel;return null!=t&&t.length?e.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},e.tsx("tbody",null,t.map((w,C)=>this.renderFieldInfo(w,C)))):null};f.render=function(){var t;return e.tsx("div",{class:"esri-feature-fields"},
null==(t=this._featureElementInfo)?void 0:t.render(),this.renderFields())};f._setupFeatureElementInfo=function(){const {description:t,title:w}=this;this._featureElementInfo.set({description:t,title:w})};f._forceLTR=function(t){return`&lrm;${t}`};return B}(v);p.__decorate([k.aliasOf("viewModel.attributes")],q.prototype,"attributes",void 0);p.__decorate([k.aliasOf("viewModel.description")],q.prototype,"description",void 0);p.__decorate([k.aliasOf("viewModel.expressionInfos")],q.prototype,"expressionInfos",
void 0);p.__decorate([k.aliasOf("viewModel.fieldInfos")],q.prototype,"fieldInfos",void 0);p.__decorate([k.aliasOf("viewModel.title")],q.prototype,"title",void 0);p.__decorate([H.property({type:n})],q.prototype,"viewModel",void 0);p.__decorate([H.property(),d.messageBundle("esri/widgets/Feature/t9n/Feature")],q.prototype,"messages",void 0);p.__decorate([H.property(),d.messageBundle("esri/widgets/support/t9n/uriUtils")],q.prototype,"messagesURIUtils",void 0);return q=p.__decorate([G.subclass("esri.widgets.Feature.FeatureFields")],
q)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),function(g,p,m,k,q,E,z,H,G,v,n){m=function(b){function a(h){h=
b.call(this,h)||this;h.attributes=null;h.expressionInfos=null;h.description=null;h.fieldInfos=null;h.title=null;return h}g._inheritsLoose(a,b);g._createClass(a,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:h,fieldInfos:d}=this,e=[];null==d?void 0:d.forEach(r=>{if(!r.hasOwnProperty("visible")||r.visible)r=r.clone(),r.label=n.getFieldInfoLabel(r,h),e.push(r)});return e}}]);return a}(m);p.__decorate([k.property()],m.prototype,"attributes",void 0);p.__decorate([k.property({type:[G]})],
m.prototype,"expressionInfos",void 0);p.__decorate([k.property()],m.prototype,"description",void 0);p.__decorate([k.property({type:[v]})],m.prototype,"fieldInfos",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"formattedFieldInfos",null);p.__decorate([k.property()],m.prototype,"title",void 0);return m=p.__decorate([H.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],m)})},"esri/widgets/support/uriUtils":function(){define(["exports","../../core/string"],function(g,
p){function m(q){let E=null;k.some(z=>{z.pattern.test(q)&&(E=z);return!!E});return E}const k=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},
{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},
{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];g.autoLink=function(q,E){if("string"!==typeof E||!E)return E;const z=m(E);if(!z)return E;const H=E.match(z.pattern);q=p.replace(p.replace(z.label,
{messages:q,hierPart:H&&H[2]}),{appName:z.appName});return E.replace(z.pattern,`<a${z.target?` target="${z.target}"`:""} href="$1"${"_blank"===z.target?' rel\x3d"noreferrer"':""}>${q}</a>`)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t){E=function(w){function C(u,D){var J=w.call(this,u,D)||this;J._refreshTimer=null;J._refreshIntervalInfo=null;J._featureElementInfo=null;J.attributes=null;J.activeMediaInfoIndex=null;J.description=null;J.fieldInfoMap=null;J.layer=null;J.mediaInfos=null;J.popupTemplate=null;J.relatedInfos=null;J.title=null;J.viewModel=new a;J.messages=null;J._getChartDependencies=function(){var S=g._asyncToGenerator(function*(T){const P=yield e.loadChartsModule(),{destroyed:X,
viewModel:Q}=g._assertThisInitialized(J);if(!X&&Q&&T){var {activeMediaInfo:O}=Q,Z=yield J._getRendererColors(P);J._renderChart({chartDiv:T,mediaInfo:O,chartsModule:P,colorMap:Z})}});return function(T){return S.apply(this,arguments)}}();return J}g._inheritsLoose(C,w);var x=C.prototype;x.initialize=function(){this._featureElementInfo=new h;this.own([k.watch(()=>{var u,D;return[null==(u=this.viewModel)?void 0:u.activeMediaInfo,null==(D=this.viewModel)?void 0:D.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),
k.initial),k.watch(()=>{var u,D;return[null==(u=this.viewModel)?void 0:u.description,null==(D=this.viewModel)?void 0:D.title]},()=>this._setupFeatureElementInfo(),k.initial)])};x.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};x.render=function(){var u;return f.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(u=this._featureElementInfo)?void 0:u.render(),this.renderMedia())};x.renderMedia=function(){const {formattedMediaInfoCount:u}=
this.viewModel;return u?f.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};x.renderImageMediaInfo=function(u){var {_refreshIntervalInfo:D}=this;const {activeMediaInfoIndex:J,formattedMediaInfoCount:S}=this.viewModel,{value:T,refreshInterval:P,altText:X,title:Q,type:O}=u,{sourceURL:Z,linkURL:L}=T;u=d.shouldOpenInNewTab(L)?"_blank":"_self";const I="_blank"===u?"noreferrer":
"";D=P?D:null;D=f.tsx("img",{alt:X||Q,key:`media-${O}-${J}-${S}-${D?D.timestamp:0}`,src:D?D.sourceURL:Z});return(u=L?f.tsx("a",{title:Q,href:L,rel:I,target:u},D):null)?u:D};x.renderChartMediaInfo=function(u){const {activeMediaInfoIndex:D,formattedMediaInfoCount:J}=this.viewModel;return f.tsx("div",{key:`media-${u.type}-${D}-${J}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};x.renderMediaInfoType=function(){const {activeMediaInfo:u}=this.viewModel;return u?
"image"===u.type?this.renderImageMediaInfo(u):u.type.includes("chart")?this.renderChartMediaInfo(u):null:null};x.renderMediaInfo=function(){var {activeMediaInfo:u}=this.viewModel;if(!u)return null;const D=u.title?f.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:u.title}):null;u=u.caption?f.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:u.caption}):null;return f.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
f.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),D,u)};x.renderMediaPageButton=function(u){if(2>this.viewModel.formattedMediaInfoCount)return null;const D=(u="previous"===u)?this.messages.previous:this.messages.next,J=u?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),S=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),T=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return f.tsx("button",{type:"button",key:u?"media-previous":"media-next",title:D,"aria-label":D,tabIndex:0,class:J,bind:this,onclick:u?this._previous:this._next},f.tsx("span",
{"aria-hidden":"true",class:S}),f.tsx("span",{"aria-hidden":"true",class:T}))};x._setupFeatureElementInfo=function(){const {description:u,title:D}=this;this._featureElementInfo.set({description:u,title:D})};x._next=function(){this.viewModel.next()};x._previous=function(){this.viewModel.previous()};x._getRendererColors=function(){var u=g._asyncToGenerator(function*(D){var J;const {am4core:S}=D;D=null==(J=this.viewModel)?void 0:J.layer;const T=new Map;if(!D)return T;const P=yield n.getColorsFromRenderer(D.renderer);
P.delete(null);if(!Array.from(P.values()).every(X=>1===(null==X?void 0:X.length)))return T;T.set("default-line-value",S.color({r:50,g:50,b:50,a:1}));Array.from(P.keys()).forEach(X=>{X&&T.set(X,S.color(P.get(X)[0].toCss(!0)))});return T});return function(D){return u.apply(this,arguments)}}();x._handleMediaKeyup=function(u){const D=m.eventKey(u);"ArrowLeft"===D&&(u.stopPropagation(),this.viewModel.previous());"ArrowRight"===D&&(u.stopPropagation(),this.viewModel.next())};x._renderChart=function(u){const {abilities:D}=
this.viewModel,{chartsModule:J,chartDiv:S,mediaInfo:T,colorMap:P}=u,{value:X,type:Q}=T,{am4core:O}=J,Z=e.getColorSet(O);t.isDarkTheme()&&O.useTheme(J.am4themes_dark);const L=window.matchMedia("(prefers-reduced-motion: reduce)");D.chartAnimation&&!L.matches?O.useTheme(J.am4themes_animated):O.unuseTheme(J.am4themes_animated);O.useTheme(function(I){I instanceof O.ColorSet&&Z&&(I.list=Z)});u="pie-chart"===Q?this._createPieChart(u):this._createXYChart(u);S.setAttribute("aria-label",T.altText||T.title);
u.data=X.series.map(I=>({["tooltip"]:I.tooltip,["value"]:I.value,["color"]:P.get(I.fieldName)})).filter(I=>"pie-chart"===Q?0<I.value:!0)};x._customizeChartTooltip=function(u,D){u.label.wrap=!0;u.label.maxWidth=200;u.autoTextColor=!1;u.getFillFromObject=!1;u.label.fill=D.color("#ffffff");u.background.fill=D.color({r:0,g:0,b:0,a:.7})};x._createPieChart=function(u){const {chartDiv:D,chartsModule:J}=u,{am4core:S,am4charts:T}=J;u=S.create(D,T.PieChart);u.rtl=r.isRTL(this.container);const P=u.series.push(new T.PieSeries);
P.labels.template.disabled=!0;P.ticks.template.disabled=!0;P.dataFields.value="value";P.dataFields.category="tooltip";this._customizeChartTooltip(P.tooltip,S);P.slices.template.tooltipText=u.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";P.slices.template.propertyFields.fill="color";P.slices.template.propertyFields.stroke="color";return u};x._getMinSeriesValue=function(u){let D=0;u.forEach(J=>D=Math.min(J.value,D));return D};x._createColumnChart=
function(u,D){const {chartsModule:J,mediaInfo:S}=D;({value:D}=S);const {am4core:T,am4charts:P}=J,X=u.xAxes.push(new P.CategoryAxis);X.dataFields.category="tooltip";X.renderer.labels.template.disabled=!0;this._customizeChartTooltip(X.tooltip,T);X.tooltip.events.on("sizechanged",()=>{X.tooltip.dy=-X.tooltip.contentHeight});var Q=u.yAxes.push(new P.ValueAxis);const O=Q.renderer.labels.template;Q.renderer.minLabelPosition=.05;Q.renderer.maxLabelPosition=.95;Q.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(Q.tooltip,
T);O.wrap=!0;Q=u.series.push(new P.ColumnSeries);Q.dataFields.valueY="value";Q.dataFields.categoryX="tooltip";Q.columns.template.propertyFields.fill="color";Q.columns.template.propertyFields.stroke="color";u.cursor=new P.XYCursor;15<D.series.length&&(u.scrollbarX=new T.Scrollbar)};x._createBarChart=function(u,D){const {chartsModule:J,mediaInfo:S}=D;({value:D}=S);const {am4core:T,am4charts:P}=J,X=u.yAxes.push(new P.CategoryAxis);X.dataFields.category="tooltip";X.renderer.inversed=!0;X.renderer.labels.template.disabled=
!0;this._customizeChartTooltip(X.tooltip,T);X.tooltip.events.on("sizechanged",()=>{X.tooltip.dx=X.tooltip.contentWidth});var Q=u.xAxes.push(new P.ValueAxis);const O=Q.renderer.labels.template;Q.renderer.minLabelPosition=.05;Q.renderer.maxLabelPosition=.95;Q.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(Q.tooltip,T);O.wrap=!0;Q=u.series.push(new P.ColumnSeries);Q.dataFields.valueX="value";Q.dataFields.categoryY="tooltip";Q.columns.template.propertyFields.fill="color";Q.columns.template.propertyFields.stroke=
"color";u.cursor=new P.XYCursor;15<D.series.length&&(u.scrollbarY=new T.Scrollbar)};x._createLineChart=function(u,D){const {chartsModule:J,mediaInfo:S,colorMap:T}=D;({value:D}=S);const {am4core:P,am4charts:X}=J,Q=u.xAxes.push(new X.CategoryAxis);Q.dataFields.category="tooltip";Q.renderer.labels.template.disabled=!0;this._customizeChartTooltip(Q.tooltip,P);Q.tooltip.events.on("sizechanged",()=>{Q.tooltip.dy=-Q.tooltip.contentHeight});var O=u.yAxes.push(new X.ValueAxis),Z=O.renderer.labels.template;
O.renderer.minLabelPosition=.05;O.renderer.maxLabelPosition=.95;O.min=this._getMinSeriesValue(D.series);this._customizeChartTooltip(O.tooltip,P);Z.wrap=!0;O=u.series.push(new X.LineSeries);O.dataFields.categoryX="tooltip";O.dataFields.valueY="value";O.strokeWidth=1;if(Z=T.get("default-line-value"))O.stroke=Z;O=O.bullets.push(new X.CircleBullet);O.propertyFields.fill="color";O.propertyFields.stroke="color";u.cursor=new X.XYCursor;15<D.series.length&&(u.scrollbarX=new P.Scrollbar)};x._createXYChart=
function(u){const {chartDiv:D,chartsModule:J,mediaInfo:S}=u,{type:T}=S,{am4core:P,am4charts:X}=J,Q=P.create(D,X.XYChart);Q.rtl=r.isRTL(this.container);"column-chart"===T&&this._createColumnChart(Q,u);"bar-chart"===T&&this._createBarChart(Q,u);"line-chart"===T&&this._createLineChart(Q,u);return Q};x._clearMediaRefreshTimer=function(){const {_refreshTimer:u}=this;u&&(clearTimeout(u),this._refreshTimer=null)};x._updateMediaInfoTimestamp=function(u){const D=Date.now();this._refreshIntervalInfo={timestamp:D,
sourceURL:this._getImageSource(u,D)};this.scheduleRender()};x._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:u}=this.viewModel;u&&"image"===u.type&&u.refreshInterval&&this._setRefreshTimeout(u)};x._setRefreshTimeout=function(u){const {refreshInterval:D,value:J}=u;D&&(u=6E4*D,this._updateMediaInfoTimestamp(J.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(J.sourceURL)},u))};x._getImageSource=function(u,D){const J=u.includes("?")?
"\x26":"?",[S,T=""]=u.split("#");return`${S}${J}timestamp=${D}${T?"#":""}${T}`};return C}(b);p.__decorate([q.aliasOf("viewModel.attributes")],E.prototype,"attributes",void 0);p.__decorate([q.aliasOf("viewModel.activeMediaInfoIndex")],E.prototype,"activeMediaInfoIndex",void 0);p.__decorate([q.aliasOf("viewModel.description")],E.prototype,"description",void 0);p.__decorate([q.aliasOf("viewModel.fieldInfoMap")],E.prototype,"fieldInfoMap",void 0);p.__decorate([q.aliasOf("viewModel.layer")],E.prototype,
"layer",void 0);p.__decorate([q.aliasOf("viewModel.mediaInfos")],E.prototype,"mediaInfos",void 0);p.__decorate([q.aliasOf("viewModel.popupTemplate")],E.prototype,"popupTemplate",void 0);p.__decorate([q.aliasOf("viewModel.relatedInfos")],E.prototype,"relatedInfos",void 0);p.__decorate([q.aliasOf("viewModel.title")],E.prototype,"title",void 0);p.__decorate([G.property({type:a})],E.prototype,"viewModel",void 0);p.__decorate([G.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,
"messages",void 0);return E=p.__decorate([v.subclass("esri.widgets.Feature.FeatureMedia")],E)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(g,p,m,k,q,E,z,H,G,v,n){function b(w,C,x){q.getOrCreateMapValue(w,
C,()=>[]).push(...x)}function a(){a=p._asyncToGenerator(function*(w){const C=new Map;if("visualVariables"in w&&w.visualVariables){var x=w.visualVariables.filter(J=>"color"===J.type);for(const J of x){x=J.field||J.valueExpression;const S=(yield v.getRampStops(J)).map(T=>T.color);b(C,x,S)}}if("heatmap"===w.type){var u=n.getHeatmapRampStops(w).map(J=>J.color);b(C,w.field,u)}else if("pie-chart"===w.type){for(const J of w.attributes)b(C,J.field,[J.color]);b(C,null,[null==w?void 0:null==(u=w.othersCategory)?
void 0:u.color,G.getColorFromSymbol(w.backgroundFillSymbol,null)])}else if("dot-density"===w.type){for(const J of w.attributes)b(C,J.field,[J.color]);b(C,null,[w.backgroundColor])}else if("unique-value"===w.type){var D;if("predominance"===(null==(D=w.authoringInfo)?void 0:D.type))for(const J of w.uniqueValueInfos)b(C,J.value.toString(),[G.getColorFromSymbol(J.symbol,null)]);else{u=w.uniqueValueInfos.map(X=>G.getColorFromSymbol(X.symbol,null));const {field:J,field2:S,field3:T,valueExpression:P}=w;
(J||P)&&b(C,J||P,u);S&&b(C,S,u);T&&b(C,T,u)}}else"class-breaks"===w.type?(u=w.classBreakInfos.map(J=>G.getColorFromSymbol(J.symbol,null)),b(C,w.field||w.valueExpression,u)):"simple"===w.type&&b(C,null,[G.getColorFromSymbol(w.symbol,null)]);"defaultSymbol"in w&&w.defaultSymbol&&b(C,null,[G.getColorFromSymbol(w.defaultSymbol,null)]);C.forEach((J,S)=>{J=m.unique(J.filter(Boolean),(T,P)=>JSON.stringify(T)===JSON.stringify(P));C.set(S,J)});return C});return a.apply(this,arguments)}function h(w,C,x){let u=
"";0===C?u=B.lt+" ":C===x&&(u=B.gt+" ");return u+w}function d(w){let C=w.minValue,x=w.maxValue;const u=w.isFirstBreak?"":B.gt+" ";w="percent-of-total"===w.normalizationType?B.pct:"";C=null==C?"":z.format(C);x=null==x?"":z.format(x);return u+C+w+" "+B.ld+" "+x+w}function e(w,C){return"normalizationField"in w&&w.normalizationField?{type:"normalized-field",field:w.field,normalizationField:w.normalizationField}:"field"in w&&w.field?{type:"field",field:w.field}:"valueExpression"in w&&w.valueExpression?
{type:"expression",expression:w.valueExpression,title:w.valueExpressionTitle,returnType:C}:null}const r=k.getLogger("esri.renderers.support.utils"),B={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},f={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},t={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};k=E.convertDateFormatToIntlOptions("short-date");g.calculateDateFormatInterval=function(w){w=w.map(J=>new Date(J));const C=w.length;let x=Infinity,u=null;for(let J=0;J<C-1;J++){const S=w[J];let T=Infinity,P=null;for(let X=J+1;X<C;X++){var D=w[X];D=S.getFullYear()!==D.getFullYear()&&"year"||S.getMonth()!==D.getMonth()&&"month"||S.getDate()!==D.getDate()&&"day"||S.getHours()!==D.getHours()&&"hour"||S.getMinutes()!==D.getMinutes()&&"minute"||S.getSeconds()!==D.getSeconds()&&"second"||"millisecond";
const Q=f[D];Q<T&&(T=Q,P=D)}T<x&&(x=T,u=P)}return u};g.createClassBreakLabel=d;g.createColorStops=function(w){const {values:C,colors:x,labelIndexes:u,isDate:D,dateFormatOptions:J}=w;return C.map((S,T)=>{let P=null;if(!u||u.includes(T)){let X;(X=D?E.formatDate(S,J):z.format(S))&&(P=h(X,T,C.length-1))}return new H({value:S,color:x[T],label:P})})};g.createUniqueValueLabel=function(w){const {value:C,domain:x,fieldInfo:u,dateFormatInterval:D}=w;w=String(C);const J=x&&"codedValues"in x&&x.codedValues?x.getName(C):
null;J?w=J:"number"===typeof C&&(w=u&&"date"===u.type?E.formatDate(C,D&&E.convertDateFormatToIntlOptions(t[D])):z.format(C));return w};g.getAttribute=e;g.getAttributes=function(w,C){const x=[];if("class-breaks"===w.type||"heatmap"===w.type)x.push(e(w,"number"));else if("unique-value"===w.type){var u=w.authoringInfo;if(u&&"relationship"===u.type){if(u.field1&&u.field2){var D=u.field2.field;const J=u.field2.normalizationField;x.push(e({field:u.field1.field,normalizationField:u.field1.normalizationField}));
x.push(e({field:D,normalizationField:J}))}}else D=w.uniqueValueInfos[0],u=null,D&&D.value&&(D=typeof w.uniqueValueInfos[0].value,"string"===D||"number"===D)&&(u=D),x.push(e(w,u)),[w.field2,w.field3].forEach(J=>J&&x.push({type:"field",field:J}))}else"attributes"in w&&w.attributes.forEach(J=>x.push(e(J,"number")));(w=C?C(w):"visualVariables"in w?w.visualVariables:null)&&w.forEach(J=>x.push(e(J,"number")));return m.unique(x.filter(Boolean),(J,S)=>"field"===J.type&&"field"===S.type?J.field===S.field:
"normalized-field"===J.type&&"normalized-field"===S.type?J.field===S.field&&J.normalizationField===S.normalizationField:"expression"===J.type&&"expression"===S.type?J.expression===S.expression:!1)};g.getColorsFromRenderer=function(w){return a.apply(this,arguments)};g.setLabelsForClassBreaks=function(w){const C=w.classBreakInfos,x=w.normalizationType;let u=[];if(C&&C.length)if("standard-deviation"===w.classificationMethod)r.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(w.round){u.push(C[0].minValue);for(const D of C)u.push(D.maxValue);u=z.round(u);C.forEach((D,J)=>{D.label=d({minValue:0===J?u[0]:u[J],maxValue:u[J+1],isFirstBreak:0===J,normalizationType:x})})}else C.forEach((D,J)=>{D.label=d({minValue:D.minValue,maxValue:D.maxValue,isFirstBreak:0===J,normalizationType:x})})};g.timelineDateFormatOptions=k;g.updateClassBreak=function(w){if("standard-deviation"===w.classificationMethod)r.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var C=w.classBreaks,x=w.change,u=x.index;x=x.value;var D=C.length,J=-1,S=-1;0===u?J=u:u===D?S=u-1:(S=u-1,J=u);w=w.normalizationType;u=null;-1<J&&J<D&&(u=C[J],u.minValue=x,u.label=d({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===J,normalizationType:w}));-1<S&&S<D&&(u=C[S],u.maxValue=x,u.label=d({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===S,normalizationType:w}))}};g.updateColorStops=function(w){const {stops:C,changes:x,isDate:u,dateFormatOptions:D}=w,J=C.map(T=>T.value);
w=[];for(const T of x)w.push(T.index),J[T.index]=T.value;const S=z.round(J,{indexes:w});C.forEach((T,P)=>{T.value=J[P];if(null!=T.label){let X,Q=null;(X=u?E.formatDate(S[P],D):z.format(S[P]))&&(Q=h(X,P,C.length-1));T.label=Q}})};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(g,p,m){function k(n,b){return n-b}function q(n,b){let a;a=Number(n.toFixed(b));
a<n?n=a+1/10**b:(n=a,a-=1/10**b);a=Number(a.toFixed(b));n=Number(n.toFixed(b));return[a,n]}function E(n,b,a,h,d){n=H(n,b,a,h);b=null==n.next||n.next<=d;return(null==n.previous||n.previous<=d)&&b||n.previous+n.next<=2*d}function z(n){n=String(n);var b=n.match(G);if(b&&b[1])return{integer:b[1].split("").length,fractional:b[3]?b[3].split("").length:0};if(n.toLowerCase().includes("e")&&(b=n.split("e"),n=b[0],b=b[1],n&&b)){n=Number(n);b=Number(b);const a=0<b;a||(b=Math.abs(b));n=z(n);a?(n.integer+=b,n.fractional=
b>n.fractional?0:n.fractional-b):(n.fractional+=b,n.integer=b>n.integer?1:n.integer-b);return n}return{integer:0,fractional:0}}function H(n,b,a,h){const d={previous:null,next:null};if(null!=a){const e=n-a;d.previous=Math.floor(Math.abs(100*(b-a-e)/e))}null!=h&&(n=h-n,d.next=Math.floor(Math.abs(100*(h-b-n)/n)));return d}const G=/^-?(\d+)(\.(\d+))?$/i,v={maximumFractionDigits:20};g.format=function(n){return m.formatNumber(n,v)};g.numDigits=z;g.percentChange=H;g.round=function(n,b={}){n=n.slice(0);const {tolerance:a=
2,strictBounds:h=!1,indexes:d=n.map((r,B)=>B)}=b;d.sort(k);for(b=0;b<d.length;b++){const r=d[b],B=n[r],f=0===r?null:n[r-1],t=r===n.length-1?null:n[r+1],w=z(B).fractional;if(w){let C=0,x=!1;for(var e=void 0;C<=w&&!x;)e=q(B,C),e=h&&0===b?e[1]:e[0],x=E(B,e,f,t,a),C++;x&&(n[r]=e)}}return n};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a){function h(Q){Q=Q.symbolLayers;if(!Q)return null;let O=null;Q.forEach(Z=>{if("object"!==Z.type||null==Z.resource.href)O="water"===Z.type?H.unwrap(Z.color):H.isSome(Z.material)?H.unwrap(Z.material.color):null});return O?new k(O):null}function d(Q,O){if(null==O)return Q;Q=Q.toRgba();Q[3]*=O;return new k(Q)}function e(Q,O,Z){if(Q=Q.symbolLayers){var L=I=>{I=H.isSome(I)?I:null;O=O||I||null!=Z&&X;return d(O,Z)};Q.forEach(I=>{if("object"!==I.type||null==I.resource.href||
O)if("water"===I.type)I.color=L(I.color);else{var l=H.isSome(I.material)?I.material.color:null;l=L(l);H.isNone(I.material)?I.material=new a.Symbol3DMaterial({color:l}):I.material.color=l;null!=Z&&"outline"in I&&H.isSome(I.outline)&&H.isSome(I.outline.color)&&(I.outline.color=d(I.outline.color,Z))}})}}function r(Q,O){return B.apply(this,arguments)}function B(){B=m._asyncToGenerator(function*(Q,O){(Q=Q.symbolLayers)&&(yield E.forEach(Q,function(){var Z=m._asyncToGenerator(function*(L){return f(L,O)});
return function(L){return Z.apply(this,arguments)}}()))});return B.apply(this,arguments)}function f(Q,O){return t.apply(this,arguments)}function t(){t=m._asyncToGenerator(function*(Q,O){switch(Q.type){case "extrude":Q.size="number"===typeof O[2]?O[2]:0;break;case "icon":case "line":case "text":O=w(O);H.isSome(O)&&(Q.size=O);break;case "path":{const Z=u(O,v.ONES,[Q.width,void 0,Q.height]);Q.width=S(O[0],Q.width,1,Z);Q.height=S(O[2],Q.height,1,Z)}break;case "object":yield C(Q,O)}});return t.apply(this,
arguments)}function w(Q){for(const O of Q)if("number"===typeof O)return O;return null}function C(Q,O){return x.apply(this,arguments)}function x(){x=m._asyncToGenerator(function*(Q,O){const {resourceSize:Z,symbolSize:L}=yield D(Q),I=u(O,Z,L);Q.width=S(O[0],L[0],Z[0],I);Q.depth=S(O[1],L[1],Z[1],I);Q.height=S(O[2],L[2],Z[2],I)});return x.apply(this,arguments)}function u(Q,O,Z){for(let L=0;3>L;L++){const I=Q[L];switch(I){case "symbol-value":return null!=Z[L]?Z[L]/O[L]:1;case "proportional":break;default:if(I&&
O[L])return I/O[L]}}return 1}function D(Q){return J.apply(this,arguments)}function J(){J=m._asyncToGenerator(function*(Q){const O=yield(yield new Promise((y,K)=>g(["./symbolLayerUtils"],y,K))).computeObjectLayerResourceSize(Q,10),{width:Z,height:L,depth:I}=Q;Q=[Z,I,L];let l=1;for(var A=0;3>A;A++)if(null!=Q[A]){l=Q[A]/O[A];break}for(A=0;3>A;A++)null==Q[A]&&(Q[A]=O[A]*l);return{resourceSize:O,symbolSize:Q}});return J.apply(this,arguments)}function S(Q,O,Z,L){switch(Q){case "proportional":return Z*L;
case "symbol-value":return null!=O?O:Z;default:return Q}}function T(){T=m._asyncToGenerator(function*(Q,O){if(Q&&O){if(q.isSymbol3D(Q))return r(Q,O);if(q.isSymbol2D(Q)&&(O=w(O),!H.isNone(O)))switch(Q.type){case "simple-marker":Q.size=O;break;case "picture-marker":{const Z=Q.width/Q.height;1<Z?(Q.width=O,Q.height=O*Z):(Q.width=O*Z,Q.height=O);break}case "simple-line":Q.width=O;break;case "text":Q.font.size=O}}});return T.apply(this,arguments)}const P=/\/resource\/(.*?)\.svg$/,X=new k("white");p.applyColorToSymbol=
function(Q,O,Z){if(Q&&(O||null!=Z))if(O&&(O=new k(O)),q.isSymbol3D(Q))e(Q,O,Z);else if(q.isSymbol2D(Q)){if(O=O||Q.color)Q.color=d(O,Z);null!=Z&&"outline"in Q&&Q.outline&&Q.outline.color&&(Q.outline.color=d(Q.outline.color,Z))}};p.applyOpacityToColor=d;p.applyRotationToSymbol=function(Q,O,Z){Q&&null!=O&&(q.isSymbol3D(Q)?(Q=Q.symbolLayers)&&Q.forEach(L=>{if(L&&"object"===L.type)switch(Z){case "tilt":L.tilt=O;break;case "roll":L.roll=O;break;default:L.heading=O}}):!q.isSymbol2D(Q)||"simple-marker"!==
Q.type&&"picture-marker"!==Q.type&&"text"!==Q.type||(Q.angle=O))};p.applySizesToSymbol=function(Q,O){return T.apply(this,arguments)};p.getCSSFilterFromEffectList=function(Q){if(!Q)return null;Q=Q.effects.filter(O=>"bloom"!==O.type).map(O=>O.toJSON());return n.effectFunctionsFromJSON(Q)};p.getColorFromSymbol=function(Q,O){if(!Q)return null;let Z=null;q.isSymbol3D(Q)?Z=h(Q):q.isSymbol2D(Q)&&(Z=Q.color?new k(Q.color):null);return Z?d(Z,O):null};p.getIconHref=function(Q,O){O=O.resource.href;return!z("esri-canvas-svg-support")&&
Q.styleOrigin&&P.test(O)?O.replace(P,"/resource/png/$1.png"):O};p.getSymbolOutlineSize=function(Q){if(!Q)return 0;if(q.isSymbol3D(Q)){{const O=Q.symbolLayers&&Q.symbolLayers.length;O?(Q=Q.symbolLayers.getItemAt(O-1),Q="outline"in Q?H.get(Q,"outline","size"):void 0):Q=void 0}return H.isSome(Q)?Q:0}return(Q=b.getStroke(Q))&&G.px2pt(Q.width)||0};p.isVolumetricSymbol=function(Q){if(H.isNone(Q)||!("symbolLayers"in Q)||H.isNone(Q.symbolLayers))return!1;switch(Q.type){case "point-3d":return Q.symbolLayers.some(O=>
"object"===O.type);case "line-3d":return Q.symbolLayers.some(O=>"path"===O.type);case "polygon-3d":return Q.symbolLayers.some(O=>"object"===O.type||"extrude"===O.type);default:return!1}};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(g,p,m,k,q,E,z){function H(a){if(!a)return null;
let h;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":h=H(a.outline);break;case "simple-line":{const d=E.pt2px(a.width);"none"!==a.style&&0!==d&&(h={color:a.color,style:b(a.style),width:d,cap:a.cap,join:"miter"===a.join?E.pt2px(a.miterLimit):a.join});break}default:h=null}return h}const G={left:"start",center:"middle",right:"end",justify:"start"},v={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},n=new q(1E3),b=(()=>{const a={};return h=>
{if(a[h])return a[h];const d=h.replace(/-/g,"");return a[h]=d}})();m=new m([128,128,128]);g.defaultThematicColor=m;g.dekebabifyLineStyle=b;g.getFill=function(a){const h=a.style;let d=null;if(a)switch(a.type){case "simple-marker":"cross"!==h&&"x"!==h&&(d=a.color);break;case "simple-fill":"solid"===h?d=a.color:"none"!==h&&(d={type:"pattern",x:0,y:0,src:p.getAssetUrl(`esri/symbols/patterns/${h}.png`),width:5,height:5});break;case "picture-fill":d={type:"pattern",src:a.url,width:E.pt2px(a.width)*a.xscale,
height:E.pt2px(a.height)*a.yscale,x:E.pt2px(a.xoffset),y:E.pt2px(a.yoffset)};break;case "text":d=a.color;break;case "cim":d=z.getCIMSymbolColor(a)}return d};g.getPatternUrlWithColor=function(a,h){const d=a+"-"+h;return void 0!==n.get(d)?Promise.resolve(n.get(d)):k(a,{responseType:"image"}).then(e=>{e=e.data;const r=e.naturalWidth,B=e.naturalHeight,f=document.createElement("canvas");f.width=r;f.height=B;const t=f.getContext("2d");t.fillStyle=h;t.fillRect(0,0,r,B);t.globalCompositeOperation="destination-in";
t.drawImage(e,0,0);e=f.toDataURL();n.put(d,e);return e})};g.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&G[a.toLowerCase()]||"middle"};g.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&v[a.toLowerCase()]||"alphabetic"};g.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};g.getStroke=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function p(k,
q){this._storage=new g.MemCacheStorage;this._storage.maxSize=k;q&&this._storage.registerRemoveFunc("",q)}var m=p.prototype;m.put=function(k,q){this._storage.put(k,q,1,1)};m.pop=function(k){return this._storage.pop(k)};m.get=function(k){return this._storage.get(k)};m.clear=function(){this._storage.clearAll()};m.destroy=function(){this._storage.destroy()};return p}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(g,p,m){function k(b){b=m.toCIMSymbolJSON(b);
if("CIMTextSymbol"===b.type)return b.height;let a=0;if(b.symbolLayers)for(const h of b.symbolLayers)m.isCIMMarker(h)&&h.size>a?a=h.size:m.isCIMStroke(h)&&h.width>a?a=h.width:m.isCIMFill(h);return a}function q(b,a,h,d){if("CIMTextSymbol"===b.type)b.height*=a;else{if(h&&b.effects)for(const e of b.effects)H(e,a);if(b.symbolLayers)for(const e of b.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":E(e,a,d);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=d&&d.preserveOutlineWidth||
!e.width||(e.width*=a);break;case "CIMPictureFill":e.height&&(e.height*=a);e.offsetX&&(e.offsetX*=a);e.offsetY&&(e.offsetY*=a);break;case "CIMHatchFill":q(e.lineSymbol,a,!0,{...d,preserveOutlineWidth:!1}),e.offsetX&&(e.offsetX*=a),e.offsetY&&(e.offsetY*=a),e.separation&&(e.separation*=a)}}}function E(b,a,h){b.markerPlacement&&z(b.markerPlacement,a);b.offsetX&&(b.offsetX*=a);b.offsetY&&(b.offsetY*=a);b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*a,y:b.anchorPoint.y*
a});b.size*=a;if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const d of b.markerGraphics)b.scaleSymbolsProportionally||q(d.symbol,a,!0,h)}function z(b,a){m.isCIMMarkerStrokePlacement(b)&&b.offset&&(b.offset*=a);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&(b.customEndingOffset*=a);b.offsetAlongLine&&(b.offsetAlongLine*=a);if(b.placementTemplate&&b.placementTemplate.length){var h=b.placementTemplate.map(d=>d*a);b.placementTemplate=
h}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=a);b.placementTemplate&&b.placementTemplate.length&&(h=b.placementTemplate.map(d=>d*a),b.placementTemplate=h);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=a);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&(b.offsetAlongLine*=a);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=a);b.endPosition&&(b.endPosition*=a);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&
(b.offsetX*=a);b.offsetY&&(b.offsetY*=a);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&(b.offsetX*=a),b.offsetY&&(b.offsetY*=a),b.stepX&&(b.stepX*=a),b.stepY&&(b.stepY*=a)}}function H(b,a){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=a);break;case "CIMGeometricEffectBuffer":b.size&&(b.size*=a);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=a);b.endCut&&(b.endCut*=a);b.middleCut&&(b.middleCut*=a);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&
(b.customEndingOffset*=a);b.offsetAlongLine&&(b.offsetAlongLine*=a);if(b.dashTemplate&&b.dashTemplate.length){const h=b.dashTemplate.map(d=>d*a);b.dashTemplate=h}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&(b.length*=a);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=a);b.offsetY&&(b.offsetY*=a);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=a);break;case "CIMGeometricEffectRegularPolygon":b.radius&&
(b.radius*=a);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&(b.fromWidth*=a);b.length&&(b.length*=a);b.toWidth&&(b.toWidth*=a);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=a),b.period&&(b.period*=a)}}function G(b,a){let h;h="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(h.symbolLayers)for(const d of h.symbolLayers)if(!(d.colorLocked||b&&(m.isCIMStroke(d)||m.isCIMMarker(d)&&d.markerPlacement&&m.isCIMMarkerStrokePlacement(d.markerPlacement))))switch(d.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":d.tintColor&&
v(a,d.tintColor);break;case "CIMVectorMarker":d.markerGraphics.forEach(e=>{G(e.symbol,a)});break;case "CIMSolidStroke":case "CIMSolidFill":v(a,d.color);break;case "CIMHatchFill":G(d.lineSymbol,a)}}function v(b,a){for(const h of b)if(h.join(".")===a.join("."))return;b.push(a)}function n(b,a,h){var d="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===d.type?!0:!1;if(d.symbolLayers)for(const e of d.symbolLayers)if(!e.colorLocked){if(b)if(h){if({layersToColor:d}=h,(m.isCIMStroke(e)||m.isCIMMarker(e)&&
e.markerPlacement&&m.isCIMMarkerStrokePlacement(e.markerPlacement))&&"fill"===d||m.isCIMFill(e)&&"outline"===d)continue}else if(m.isCIMStroke(e)||m.isCIMMarker(e)&&e.markerPlacement&&m.isCIMMarkerStrokePlacement(e.markerPlacement))continue;d=a.toArray();switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor=d;break;case "CIMVectorMarker":e.markerGraphics.forEach(r=>{n(r.symbol,a,h)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=d;break;case "CIMHatchFill":n(e.lineSymbol,
a,h)}}}g.applyCIMSymbolColor=function(b,a,h){a instanceof p||(a=new p(a));(b=m.toCIMSymbolJSON(b))&&n(b,a,h)};g.applyCIMSymbolRotation=function(b,a,h=!1){b=m.toCIMSymbolJSON(b);h&&0!==a&&(a=360-a);if("CIMTextSymbol"===b.type)b.angle=a;else if("CIMPointSymbol"===b.type&&b.symbolLayers){h=a-(b.angle||0);for(const d of b.symbolLayers)if(m.isCIMMarker(d)){let e=d.rotation||0;e=d.rotateClockwise?e-h:e+h;d.rotation=e}b.angle=a}};g.getCIMSymbolColor=function(b){b=m.toCIMSymbolJSON(b);const a=[];G(b,a);return a.length?
new p(m.fromCIMColor(a[0])):null};g.getCIMSymbolRotation=function(b,a=!1){b=m.toCIMSymbolJSON(b);return"CIMTextSymbol"===b.type||"CIMPointSymbol"===b.type?a&&0!==b.angle?360-b.angle:b.angle||0:0};g.getCIMSymbolSize=k;g.scaleCIMMarker=E;g.scaleCIMSymbolTo=function(b,a,h){const d=m.toCIMSymbolJSON(b);b=k(b);if(0===b)if("CIMTextSymbol"===d.type)d.height=a;else{if(d.symbolLayers)for(const e of d.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":e.size=a;break;case "CIMPictureStroke":case "CIMSolidStroke":e.width=
a}}else q(d,a/b,!1,h)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(g,p){function m(k,q){"string"!==typeof k&&(k=String(k));switch(q){case "LowerCase":return k.toLowerCase();case "Allcaps":return k.toUpperCase();default:return k}}p._adjustTextCase=m;p.colorToArray=function(k){return[k.r,k.g,k.b,k.a]};p.createLabelOverrideFunction=function(k,q,E){const z=n=>{let b=n.length;for(;b--;)if(!" /-,\n".includes(n.charAt(b)))return!1;
return!0},H=[];var G=0;let v=-1;do v=q.indexOf("[",G),v>=G&&(v>G&&(G=q.substr(G,v-G),H.push([G,null,z(G)])),G=v+1,v=q.indexOf("]",G),v>=G&&(v>G&&(G=q.substr(G,v-G),(G=k[G])&&H.push([null,G,!1])),G=v+1));while(-1!==v);G<q.length-1&&(k=q.substr(G),H.push([k,null,z(k)]));return n=>{let b="",a=null;for(const h of H){const [d,e,r]=h;if(d)r?a=d:(a&&(b+=a,a=null),b+=d);else{const B=n.attributes[e];B&&(a&&(b+=a,a=null),b+=B)}}return m(b,E)}};p.evaluateValueOrFunction=function(k,q,E,z){return"function"===
typeof k?k(q,E,z):k};p.fromCIMColor=function(k){return k?{r:k[0],g:k[1],b:k[2],a:k[3]/255}:{r:0,g:0,b:0,a:0}};p.getValue=k=>isNaN(k)||!k?0:k;p.importGeometryEngine=function(){return new Promise((k,q)=>g(["../../geometry/geometryEngineJSON"],k,q))};p.isCIMFill=function(k){return"CIMGradientFill"===k.type||"CIMHatchFill"===k.type||"CIMPictureFill"===k.type||"CIMSolidFill"===k.type||"CIMWaterFill"===k.type};p.isCIMMarker=function(k){return"CIMVectorMarker"===k.type||"CIMPictureMarker"===k.type||"CIMBarChartMarker"===
k.type||"CIMCharacterMarker"===k.type||"CIMPieChartMarker"===k.type||"CIMStackedBarChartMarker"===k.type};p.isCIMMarkerStrokePlacement=function(k){return"CIMMarkerPlacementAlongLineRandomSize"===k.type||"CIMMarkerPlacementAlongLineSameSize"===k.type||"CIMMarkerPlacementAlongLineVariableSize"===k.type||"CIMMarkerPlacementAtExtremities"===k.type||"CIMMarkerPlacementAtMeasuredUnits"===k.type||"CIMMarkerPlacementAtRatioPositions"===k.type||"CIMMarkerPlacementOnLine"===k.type||"CIMMarkerPlacementOnVertices"===
k.type};p.isCIMStroke=function(k){return"CIMGradientStroke"===k.type||"CIMPictureStroke"===k.type||"CIMSolidStroke"===k.type};p.isGeometryEngineRequired=k=>{if(!k)return!1;for(const q of k)switch(q.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};p.resampleHermite=function(k,q,E,z,H,G,v=!0){const n=q/H;E/=G;const b=Math.ceil(n/2),a=Math.ceil(E/2);for(let e=0;e<G;e++)for(let r=0;r<H;r++){const B=4*(r+(v?G-e-1:e)*H);var h=0;let f=0,t=0,w=0,C=0,x=0,u=0;const D=
(e+.5)*E;for(let J=Math.floor(e*E);J<(e+1)*E;J++){var d=Math.abs(D-(J+.5))/a;const S=(r+.5)*n;d*=d;for(let T=Math.floor(r*n);T<(r+1)*n;T++){let P=Math.abs(S-(T+.5))/b;h=Math.sqrt(d+P*P);-1<=h&&1>=h&&(h=2*h*h*h-3*h*h+1,0<h&&(P=4*(T+J*q),u+=h*k[P+3],t+=h,255>k[P+3]&&(h=h*k[P+3]/250),w+=h*k[P],C+=h*k[P+1],x+=h*k[P+2],f+=h))}}z[B]=w/f;z[B+1]=C/f;z[B+2]=x/f;z[B+3]=u/t}};p.toCIMSymbolJSON=function(k){var q;return null==(q=k.data)?void 0:q.symbol};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(g,p,m,k,q){function E(a,h){const d=[],e=a.length-1;5===a.length?d.push(0,2,4):d.push(0,e);return a.map((r,B)=>d.includes(B)?q.createStopLabel(r,B,e,h):null)}function z(){z=m._asyncToGenerator(function*(a,h,d){let e=!1,r=[],B=[];if(a.stops){var f=a.stops;r=f.map(w=>w.value);(e=f.some(w=>!!w.label))&&(B=f.map(w=>w.label))}f=r[r.length-1];
if(null==r[0]&&null==f)return null;const t=e?null:E(r,d);return(yield Promise.all(r.map(function(){var w=m._asyncToGenerator(function*(C,x){const u="opacity"===a.type?yield H(C,a,h):(yield new Promise((D,J)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],D,J))).getColor(a,C);return{value:C,color:u,label:e?B[x]:t[x]}});return function(C,x){return w.apply(this,arguments)}}()))).reverse()});return z.apply(this,arguments)}function H(a,h){return G.apply(this,arguments)}function G(){G=
m._asyncToGenerator(function*(a,h,d=b){d=new k(d);a=(yield new Promise((e,r)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],e,r))).getOpacity(h,a);null!=a&&(d.a=a);return d});return G.apply(this,arguments)}function v(a,h){const {startIndex:d,endIndex:e,weight:r}=n(a,h);if(d===e)return h[d].color;a=k.blendColors(h[d].color,h[e].color,r);return new k(a)}function n(a,h){let d=0,e=h.length-1;h.some((r,B)=>{if(a<r.value)return e=B,!0;d=B;return!1});return{startIndex:d,endIndex:e,
weight:(a-h[d].value)/(h[e].value-h[d].value)}}const b=new k([64,64,64]);p.getColorFromPointCloudStops=v;p.getRampStops=function(a,h,d){return z.apply(this,arguments)};p.getRampStopsForPointCloud=function(a){let h=!1,d=[],e=[];d=a.map(f=>f.value);(h=a.some(f=>!!f.label))&&(e=a.map(f=>f.label));const r=d[d.length-1];if(null==d[0]&&null==r)return null;const B=h?null:E(d,!1);return d.map((f,t)=>{const w=v(f,a);return{value:f,color:w,label:h?e[t]:B[t]}}).reverse()};p.getStrectchRampStops=function(a,h){let d=
[];if(a&&"multipart"===a.type)a.colorRamps.reverse().forEach((e,r)=>{0===r?d.push({value:h.max,color:new k(e.toColor),label:"high"}):d.push({value:null,color:new k(e.toColor),label:""});r===a.colorRamps.length-1?d.push({value:h.min,color:new k(e.fromColor),label:"low"}):d.push({value:null,color:new k(e.fromColor),label:""})});else{let e,r;a&&"algorithmic"===a.type?(e=a.fromColor,r=a.toColor):(e=[0,0,0,1],r=[255,255,255,1]);d=[{value:h.max,color:new k(r),label:"high"},{value:h.min,color:new k(e),label:"low"}]}return d};
Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(g,p,m,k,q,E,z){function H(b){return G.apply(this,arguments)}function G(){G=m._asyncToGenerator(function*(b){if(!("visualVariables"in b&&b.visualVariables))return null;
b=b.visualVariables.find(d=>"color"===d.type);if(!b)return null;var a=null,h=null;if(b.stops){if(1===b.stops.length)return b.stops[0].color;a=b.stops[0].value;h=b.stops[b.stops.length-1].value}a+=(h-a)/2;({getColor:h}=yield new Promise((d,e)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],d,e)));return h(b,a)});return G.apply(this,arguments)}function v(){v=m._asyncToGenerator(function*(b,a){const h=b.trailCap,d=b.trailWidth||1;b=a||(yield H(b))||b.color;return new z({cap:h,color:b,
width:d})});return v.apply(this,arguments)}const n=q.convertDateFormatToIntlOptions("short-date");p.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];p.SPECIAL_CHARS_GREATER_THAN="\x3e";p.SPECIAL_CHARS_LESS_THAN="\x3c";p.createStopLabel=function(b,a,h,d){let e="";0===a?e="\x3c ":a===h&&(e="\x3e ");a=null;a=d?q.formatDate(b,n):E.format(b);return e+a};p.getMedianColor=H;p.getSymbolForFlowRenderer=function(b,a){return v.apply(this,arguments)};Object.defineProperties(p,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(g,p){g.getHeatmapRampStops=function(m){if(!m.colorStops)return[];const k=[...m.colorStops].filter(E=>{var z;return 0<(null==(z=E.color)?void 0:z.a)});let q=k.length-1;if(k&&k[0]){const E=k[q];E&&1!==E.ratio&&(k.push(new p({ratio:1,color:E.color})),q++)}return k.map((E,z)=>{let H="";if(0===z){var G;H=(null==
(G=m.legendOptions)?void 0:G.minLabel)||"low"}else if(z===q){var v;H=(null==(v=m.legendOptions)?void 0:v.maxLabel)||"high"}return{color:E.color,label:H,ratio:E.ratio}}).reverse()};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b){const a={chartAnimation:!0};m=function(h){function d(r){r=h.call(this,r)||this;r.abilities={...a};r.activeMediaInfoIndex=0;r.attributes=null;r.description=null;r.fieldInfoMap=null;r.formattedAttributes=null;r.expressionAttributes=null;r.layer=null;r.mediaInfos=null;r.popupTemplate=null;r.relatedInfos=null;r.title=null;return r}g._inheritsLoose(d,h);var e=d.prototype;e.castAbilities=function(r){return{...a,...r}};e.setActiveMedia=function(r){this._setContentElementMedia(r)};
e.next=function(){this._pageContentElementMedia(1)};e.previous=function(){this._pageContentElementMedia(-1)};e._setContentElementMedia=function(r){const {formattedMediaInfoCount:B}=this;this.activeMediaInfoIndex=(r+B)%B};e._pageContentElementMedia=function(r){const {activeMediaInfoIndex:B}=this;this._setContentElementMedia(B+r)};e._formatMediaInfos=function(){const {attributes:r,mediaInfos:B,formattedAttributes:f,expressionAttributes:t,fieldInfoMap:w,layer:C}=this;return null==B?void 0:B.map(x=>{x=
null==x?void 0:x.clone();if(!x)return null;x.title=n.substituteFieldsInLinksAndAttributes({attributes:r,fieldInfoMap:w,globalAttributes:f,expressionAttributes:t,layer:C,text:x.title});x.caption=n.substituteFieldsInLinksAndAttributes({attributes:r,fieldInfoMap:w,globalAttributes:f,expressionAttributes:t,layer:C,text:x.caption});x.altText=n.substituteFieldsInLinksAndAttributes({attributes:r,fieldInfoMap:w,globalAttributes:f,expressionAttributes:t,layer:C,text:x.altText});if("image"===x.type){var {value:u}=
x;this._setImageValue({value:u,formattedAttributes:f,layer:C});return x.value.sourceURL?x:void 0}return"pie-chart"===x.type||"line-chart"===x.type||"column-chart"===x.type||"bar-chart"===x.type?({value:u}=x,this._setChartValue({value:u,chartType:x.type,attributes:r,formattedAttributes:f,layer:C}),x):null}).filter(Boolean)};e._setImageValue=function(r){const {fieldInfoMap:B}=this,{value:f,formattedAttributes:t,layer:w}=r,{linkURL:C,sourceURL:x}=f;x&&(r=n.fixTokens(x,w),f.sourceURL=n.substituteAttributes({formattedAttributes:t,
template:r,fieldInfoMap:B}));C&&(r=n.fixTokens(C,w),f.linkURL=n.substituteAttributes({formattedAttributes:t,template:r,fieldInfoMap:B}))};e._setChartValue=function(r){const {value:B,attributes:f,formattedAttributes:t,chartType:w,layer:C}=r,{popupTemplate:x,relatedInfos:u}=this,{fields:D,normalizeField:J}=B;B.fields=n.getFixedFieldNames(D,C);J&&(B.normalizeField=n.getFixedFieldName(J,C));if(D.some(T=>!!(null!=t[T]||n.isRelatedField(T)&&u.size))){var S=null==x?void 0:x.fieldInfos;D.forEach(T=>{n.isRelatedField(T)?
B.series=[...B.series,...this._getRelatedChartInfos({fieldInfos:S,fieldName:T,formattedAttributes:t,chartType:w,value:B})]:(T=this._getChartOption({value:B,attributes:f,chartType:w,formattedAttributes:t,fieldName:T,fieldInfos:S}),B.series.push(T))})}};e._getRelatedChartInfos=function(r){var B;const {fieldInfos:f,fieldName:t,formattedAttributes:w,chartType:C,value:x}=r,u=[];r=b.getRelatedFieldInfo(t);const {layerId:D,fieldName:J}=r;r=null==(B=this.relatedInfos)?void 0:B.get(D.toString());if(!r)return u;
const {relatedFeatures:S,relation:T}=r;if(!T||!S)return u;({cardinality:B}=T);S.forEach(P=>{const {attributes:X}=P;X&&Object.keys(X).forEach(Q=>{Q===J&&u.push(this._getChartOption({value:x,attributes:X,formattedAttributes:w,fieldName:t,chartType:C,relatedFieldName:Q,fieldInfos:f}))})});return"one-to-many"===B||"many-to-many"===B?u:[u[0]]};e._getTooltip=function({label:r,value:B,chartType:f}){return"pie-chart"===f?`${r}`:`${r}: ${B}`};e._getChartOption=function(r){const {value:B,attributes:f,formattedAttributes:t,
fieldName:w,relatedFieldName:C,fieldInfos:x,chartType:u}=r,{layer:D,fieldInfoMap:J}=this,{normalizeField:S,tooltipField:T}=B;r=S?n.isRelatedField(S)?f[b.getRelatedFieldInfo(S).fieldName]:f[S]:null;var P=C&&void 0!==f[C]?f[C]:void 0!==f[w]?f[w]:t[w];r=new v({fieldName:w,value:void 0===P?null:P&&r?P/r:P});if(n.isRelatedField(w)){var X,Q,O,Z,L;P=J.get(w.toLowerCase());const l=J.get(T.toLowerCase());var I=null!=(X=null==P?void 0:P.fieldName)?X:w;X=null!=(Q=null==l?void 0:l.fieldName)?Q:T;Q=null!=(O=null!=
(Z=null!=(L=t[X])?L:null==P?void 0:P.label)?Z:null==P?void 0:P.fieldName)?O:C;r.tooltip=this._getTooltip({label:Q,value:t[I],chartType:u});return r}Z=n.getFieldInfo(x,w);O=n.getFixedFieldName(w,D);Z=T&&void 0!==t[T]?t[T]:n.getFieldInfoLabel(Z||new G({fieldName:O}),null==(I=this.popupTemplate)?void 0:I.expressionInfos);r.tooltip=this._getTooltip({label:Z,value:t[O],chartType:u});return r};g._createClass(d,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||
null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return d}(m);p.__decorate([k.property()],m.prototype,"abilities",void 0);p.__decorate([z.cast("abilities")],m.prototype,"castAbilities",null);p.__decorate([k.property()],m.prototype,"activeMediaInfoIndex",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"activeMediaInfo",null);p.__decorate([k.property()],m.prototype,
"attributes",void 0);p.__decorate([k.property()],m.prototype,"description",void 0);p.__decorate([k.property()],m.prototype,"fieldInfoMap",void 0);p.__decorate([k.property()],m.prototype,"formattedAttributes",void 0);p.__decorate([k.property()],m.prototype,"expressionAttributes",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"formattedMediaInfos",null);p.__decorate([k.property()],m.prototype,"layer",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"formattedMediaInfoCount",
null);p.__decorate([k.property()],m.prototype,"mediaInfos",void 0);p.__decorate([k.property()],m.prototype,"popupTemplate",void 0);p.__decorate([k.property()],m.prototype,"relatedInfos",void 0);p.__decorate([k.property()],m.prototype,"title",void 0);return m=p.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],m)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../kernel ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D,J,S,T,P,X,Q,O,Z){function L(ha,la){if(!la.relationships)return null;let pa=null;({relationships:la}=la);la.some(qa=>qa.id===parseInt(ha,10)?(pa=qa,!0):!1);return pa}function I({originRelationship:ha,relationships:la,layerId:pa}){let qa;la&&la.some(M=>{`${M.relatedTableId}`===pa&&M.id===ha.id&&(qa=M);return!!qa});return qa}function l(ha,la){la=la.toLowerCase();for(const pa in ha)if(pa.toLowerCase()===la)return ha[pa];return null}function A(ha,
la,pa,qa){const M=new X;M.outFields=["*"];M.relationshipId="number"===typeof la.id?la.id:parseInt(la.id,10);M.objectIds=[ha.attributes[pa.objectIdField]];return pa.queryRelatedFeatures(M,qa)}function y(ha,la,pa){let qa=0;const M=[];for(;qa<la.length;)M.push(`${ha} IN (${la.slice(qa,pa+qa)})`),qa+=pa;return M.join(" OR ")}function K(ha,la,pa,qa){return U.apply(this,arguments)}function U(){U=p._asyncToGenerator(function*(ha,la,pa,qa){var M=pa.layerId.toString();const {layerInfo:V,relation:ca,relatedFields:ia,
outStatistics:ka,url:ra,sourceSpatialReference:va}=la;M=I({originRelationship:ca,relationships:V.relationships,layerId:M});if(M.relationshipTableId&&M.keyFieldInRelationshipTable){pa=(yield A(ha,M,pa,qa))[ha.attributes[pa.objectIdField]];if(!pa)return null;const Ba=pa.features.map(Da=>Da.attributes[V.objectIdField]);if(0<(null==ka?void 0:ka.length)&&V.supportsStatistics)return la=new D,la.where=y(V.objectIdField,Ba,1E3),la.outFields=ia,la.outStatistics=ka,la.sourceSpatialReference=va,la={features:Promise.resolve(pa),
statsFeatures:v.executeQueryJSON(ra,la)},E.eachAlways(la)}return(M=null==M?void 0:M.keyField)?(pa=z.isNumericField(ba(V.fields,M)),ha=l(ha.attributes,ca.keyField),M=pa?`${M}=${ha}`:`${M}='${ha}'`,ha=v.executeQueryJSON(ra,new D({where:M,outFields:la.relatedFields,sourceSpatialReference:va}),qa),la=la.outStatistics&&0<la.outStatistics.length&&V.supportsStatistics?v.executeQueryJSON(ra,new D({where:M,outFields:la.relatedFields,outStatistics:la.outStatistics,sourceSpatialReference:va}),qa):null,qa={features:ha},
la&&(qa.statsFeatures=la),E.eachAlways(qa)):null});return U.apply(this,arguments)}function ba(ha,la){if(null!=ha){la=la.toLowerCase();for(const pa of ha)if(pa&&pa.name.toLowerCase()===la)return pa}return null}const ea=q.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),na=new Map;g.createRelatedInfo=function(ha,la){if(ha=L(ha,la))return{url:`${la.url}/${ha.relatedTableId}`,sourceSpatialReference:la.spatialReference,relation:ha,relatedFields:[],outStatistics:[]}};g.getDestinationRelation=
I;g.getRelatedFieldInfo=function(ha){if(!Z.isRelatedField(ha))return null;const [la,pa]=ha.split("/").slice(1);return{layerId:la,fieldName:pa}};g.queryLayerInfos=function({relatedInfos:ha,layer:la},pa){const qa={};ha.forEach((M,V)=>{({relation:M}=M);if(!M)throw V=new k("relation-required","A relation is required on a layer to retrieve related records."),ea.error(V),V;({relatedTableId:M}=M);if("number"!==typeof M)throw V=new k("A related table ID is required on a layer to retrieve related records."),
ea.error(V),V;M=`${la.url}/${M}`;const ca=na.get(M),ia=ca?ca:m(M,{query:{f:"json"},signal:pa&&pa.signal});ca||na.set(M,ia);qa[V]=ia});return E.eachAlways(qa)};g.queryRelatedFeatures=function({graphic:ha,relatedInfos:la,layer:pa},qa){const M={};la.forEach((V,ca)=>{V.layerInfo&&(M[ca]=K(ha,V,pa,qa))});return E.eachAlways(M)};g.setRelatedFeatures=function(ha,la){if(la&&ha){var {features:pa,statsFeatures:qa}=ha;ha=pa&&pa.value;la.relatedFeatures=ha?ha.features:[];ha=qa&&qa.value;la.relatedStatsFeatures=
ha?ha.features:[]}};g.updateRelatedInfo=function({relatedInfo:ha,fieldName:la,fieldInfo:pa}){ha.relatedFields.push(la);pa.statisticType&&(la=new O({statisticType:pa.statisticType,onStatisticField:la,outStatisticFieldName:la}),ha.outStatistics.push(la))};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(g,p,m,k,q,E){function z(a){if(!a)return"en-us";if(v.has(a.toLowerCase()))return a.toLowerCase();{a=a.split("-")[0].toLowerCase();let d=null;for(h of v.keys())if(h.startsWith(a)){d=h;break}var h=d}return h||"en-us"}function H(){H=m._asyncToGenerator(function*(a=E.getLocale()){a=z(a);if(n&&a===b)return n;n=(new Promise((h,d)=>g(["../../chunks/index"],h,d))).then(h=>h.index);b=a;try{const [h,d]=yield Promise.all([n,v.get(b)()]);b===a&&(h.am4core.options.defaultLocale=d.default);h.am4core.options.suppressWarnings=
!0;h.am4core.options.autoDispose=!0}catch{return b=n=null}return n});return H.apply(this,arguments)}k="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var G=[{name:"default",colors:[].concat(k.slice(30,39),k.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const v=new Map([["ar",()=>(new Promise((a,h)=>g(["../../chunks/ar"],a,h))).then(a=>a.ar)],["bg-bg",()=>(new Promise((a,
h)=>g(["../../chunks/bg_BG"],a,h))).then(a=>a.bg_BG)],["bs-ba",()=>(new Promise((a,h)=>g(["../../chunks/bs_BA"],a,h))).then(a=>a.bs_BA)],["ca-es",()=>(new Promise((a,h)=>g(["../../chunks/ca_ES"],a,h))).then(a=>a.ca_ES)],["cs-cz",()=>(new Promise((a,h)=>g(["../../chunks/cs_CZ"],a,h))).then(a=>a.cs_CZ)],["da-dk",()=>(new Promise((a,h)=>g(["../../chunks/da_DK"],a,h))).then(a=>a.da_DK)],["de-de",()=>(new Promise((a,h)=>g(["../../chunks/de_DE"],a,h))).then(a=>a.de_DE)],["de-ch",()=>(new Promise((a,h)=>
g(["../../chunks/de_CH"],a,h))).then(a=>a.de_CH)],["el-gr",()=>(new Promise((a,h)=>g(["../../chunks/el_GR"],a,h))).then(a=>a.el_GR)],["en-us",()=>(new Promise((a,h)=>g(["../../chunks/en_US"],a,h))).then(a=>a.en_US)],["en-ca",()=>(new Promise((a,h)=>g(["../../chunks/en_CA"],a,h))).then(a=>a.en_CA)],["es-es",()=>(new Promise((a,h)=>g(["../../chunks/es_ES"],a,h))).then(a=>a.es_ES)],["et-ee",()=>(new Promise((a,h)=>g(["../../chunks/et_EE"],a,h))).then(a=>a.et_EE)],["fi-fi",()=>(new Promise((a,h)=>g(["../../chunks/fi_FI"],
a,h))).then(a=>a.fi_FI)],["fr-fr",()=>(new Promise((a,h)=>g(["../../chunks/fr_FR"],a,h))).then(a=>a.fr_FR)],["he-il",()=>(new Promise((a,h)=>g(["../../chunks/he_IL"],a,h))).then(a=>a.he_IL)],["hr-hr",()=>(new Promise((a,h)=>g(["../../chunks/hr_HR"],a,h))).then(a=>a.hr_HR)],["hu-hu",()=>(new Promise((a,h)=>g(["../../chunks/hu_HU"],a,h))).then(a=>a.hu_HU)],["id-id",()=>(new Promise((a,h)=>g(["../../chunks/id_ID"],a,h))).then(a=>a.id_ID)],["it-it",()=>(new Promise((a,h)=>g(["../../chunks/it_IT"],a,h))).then(a=>
a.it_IT)],["ja-jp",()=>(new Promise((a,h)=>g(["../../chunks/ja_JP"],a,h))).then(a=>a.ja_JP)],["ko-kr",()=>(new Promise((a,h)=>g(["../../chunks/ko_KR"],a,h))).then(a=>a.ko_KR)],["lt-lt",()=>(new Promise((a,h)=>g(["../../chunks/lt_LT"],a,h))).then(a=>a.lt_LT)],["lv-lv",()=>(new Promise((a,h)=>g(["../../chunks/lv_LV"],a,h))).then(a=>a.lv_LV)],["nb-no",()=>(new Promise((a,h)=>g(["../../chunks/nb_NO"],a,h))).then(a=>a.nb_NO)],["nl-nl",()=>(new Promise((a,h)=>g(["../../chunks/nl_NL"],a,h))).then(a=>a.nl_NL)],
["pl-pl",()=>(new Promise((a,h)=>g(["../../chunks/pl_PL"],a,h))).then(a=>a.pl_PL)],["pt-br",()=>(new Promise((a,h)=>g(["../../chunks/pt_BR"],a,h))).then(a=>a.pt_BR)],["pt-pt",()=>(new Promise((a,h)=>g(["../../chunks/pt_PT"],a,h))).then(a=>a.pt_PT)],["ro-ro",()=>(new Promise((a,h)=>g(["../../chunks/ro_RO"],a,h))).then(a=>a.ro_RO)],["ru-ru",()=>(new Promise((a,h)=>g(["../../chunks/ru_RU"],a,h))).then(a=>a.ru_RU)],["sk-sk",()=>(new Promise((a,h)=>g(["../../chunks/sk_SK"],a,h))).then(a=>a.sk_SK)],["sl-sl",
()=>(new Promise((a,h)=>g(["../../chunks/sl_SL"],a,h))).then(a=>a.sl_SL)],["sr-rs",()=>(new Promise((a,h)=>g(["../../chunks/sr_RS"],a,h))).then(a=>a.sr_RS)],["sv-se",()=>(new Promise((a,h)=>g(["../../chunks/sv_SE"],a,h))).then(a=>a.sv_SE)],["th-th",()=>(new Promise((a,h)=>g(["../../chunks/th_TH"],a,h))).then(a=>a.th_TH)],["tr-tr",()=>(new Promise((a,h)=>g(["../../chunks/tr_TR"],a,h))).then(a=>a.tr_TR)],["uk-ua",()=>(new Promise((a,h)=>g(["../../chunks/uk_UA"],a,h))).then(a=>a.uk_UA)],["vi-vn",()=>
(new Promise((a,h)=>g(["../../chunks/vi_VN"],a,h))).then(a=>a.vi_VN)],["zh-cn",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hans"],a,h))).then(a=>a.zh_Hans)],["zh-hk",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)],["zh-tw",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)]]);let n,b;p.getChartLocale=z;p.getColorSet=function(a,h="default"){const d=G.find(e=>e.name===h);return d?d.colors.map(e=>a.color(e)):null};p.loadChartsModule=function(){return H.apply(this,
arguments)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D){q=function(J){function S(T){var P=J.call(this,T)||this;P._abortController=null;P.expressionInfo=null;P.graphic=null;P.contentElement=null;P.contentElementViewModel=null;P.interceptor=null;P.view=null;P._cancelQuery=()=>{const {_abortController:X}=g._assertThisInitialized(P);X&&X.abort();P._abortController=null};P._createVM=()=>{var X,Q;const O=null==(X=P.contentElement)?void 0:X.type;null==(Q=P.contentElementViewModel)?void 0:Q.destroy();
X="fields"===O?new x:"media"===O?new u:"text"===O?new C:null;P._set("contentElementViewModel",X)};P._compile=g._asyncToGenerator(function*(){P._cancelQuery();const X=new AbortController;P._abortController=X;yield P._compileExpression();P._abortController===X&&(P._abortController=null)});P._compileThrottled=H.throttle(P._compile,1,g._assertThisInitialized(P));P._compileExpression=g._asyncToGenerator(function*(){const {expressionInfo:X,graphic:Q,interceptor:O,spatialReference:Z,map:L,view:I,_abortController:l}=
g._assertThisInitialized(P);if(X&&Q&&Z&&L){var A=yield D.loadArcadeUtils();if(l===P._abortController)if((A=yield D.createCompiledExpression({arcadeUtils:A,expressionInfo:X,graphic:Q,interceptor:O,map:L,spatialReference:Z,view:I}))&&"esri.arcade.Dictionary"===A.declaredClass){A=yield k.castAsJsonAsync(A,l.signal);var y=null==A?void 0:A.type;A="media"===y?f.fromJSON(A):"text"===y?t.fromJSON(A):"fields"===y?B.fromJSON(A):null;P._set("contentElement",A)}else P._set("contentElement",null)}else P._set("contentElement",
null)});P.handles.add([z.watch(()=>[P.expressionInfo,P.graphic,P.map,P.spatialReference,P.view],()=>P._compileThrottled(),z.initial),z.watch(()=>[P.contentElement],()=>P._createVM(),z.initial)]);return P}g._inheritsLoose(S,J);S.prototype.destroy=function(){var T;this._cancelQuery();null==(T=this.contentElementViewModel)?void 0:T.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};g._createClass(S,[{key:"spatialReference",get:function(){var T;return(null==(T=this.view)?
void 0:T.spatialReference)||null},set:function(T){void 0===T?this._clearOverride("spatialReference"):this._override("spatialReference",T)}},{key:"state",get:function(){const {_abortController:T,contentElement:P,contentElementViewModel:X}=this;return T?"loading":P||X?"ready":"disabled"}},{key:"map",get:function(){var T;return(null==(T=this.view)?void 0:T.map)||null},set:function(T){void 0===T?this._clearOverride("map"):this._override("map",T)}}]);return S}(E.HandleOwnerMixin(q));p.__decorate([G.property()],
q.prototype,"_abortController",void 0);p.__decorate([G.property({type:w})],q.prototype,"expressionInfo",void 0);p.__decorate([G.property({type:m})],q.prototype,"graphic",void 0);p.__decorate([G.property({readOnly:!0})],q.prototype,"contentElement",void 0);p.__decorate([G.property({readOnly:!0})],q.prototype,"contentElementViewModel",void 0);p.__decorate([G.property()],q.prototype,"interceptor",void 0);p.__decorate([G.property()],q.prototype,"spatialReference",null);p.__decorate([G.property({readOnly:!0})],
q.prototype,"state",null);p.__decorate([G.property()],q.prototype,"map",null);p.__decorate([G.property()],q.prototype,"view",void 0);return q=p.__decorate([a.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],q)})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B){function f(N,Y,ma){return""===Y||null===Y||void 0===Y||Y===ma||Y===ma?N:N=N.split(Y).join(ma)}function t(N){return N instanceof cb||N instanceof m||N instanceof ab}function w(N){return x(N)||D(N)||O(N)||u(N)||null===N||N===Ya||"number"===typeof N?!0:!1}function C(N,Y){return void 0===N?Y:N}function x(N){return"string"===typeof N||N instanceof String}function u(N){return"boolean"===typeof N}function D(N){return"number"===typeof N}function J(N){return"number"===
typeof N&&isFinite(N)&&Math.floor(N)===N}function S(N){return N instanceof Array}function T(N){return"esri.arcade.Feature"===(null==N?void 0:N.arcadeDeclaredClass)?!0:!1}function P(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===N.declaredRootClass)}function X(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureSetCollection"===N.declaredRootClass)}function Q(N){return N instanceof k}function O(N){return N instanceof Date}function Z(N,Y,ma){if(N.length<
Y||N.length>ma)throw Error("Function called with wrong number of Parameters");}function L(N){return 0>N?-Math.round(-N):Math.round(N)}function I(){let N=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){const ma=(N+16*Math.random())%16|0;N=Math.floor(N/16);return("x"===Y?ma:ma&3|8).toString(16)})}function l(N,Y){if(!1===isNaN(N)){if(void 0===Y||null===Y||""===Y)return N.toString();Y=f(Y,"\u2030","");Y=f(Y,"\u00a4","");return d.format(N,{pattern:Y})}return N.toString()}
function A(N,Y){N=a.DateTime.fromJSDate(N);return void 0===Y||null===Y||""===Y?N.toISO({suppressMilliseconds:!0}):N.toFormat(y(Y),{locale:r.getLocale(),numberingSystem:"latn"})}function y(N){N=N.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Y="";const ma=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const ua of N.match(ma))switch(ua){case "D":Y+=
"d";break;case "DD":Y+="dd";break;case "DDD":Y+="o";break;case "d":Y+="c";break;case "ddd":Y+="ccc";break;case "dddd":Y+="cccc";break;case "M":Y+="L";break;case "MM":Y+="LL";break;case "MMM":Y+="LLL";break;case "MMMM":Y+="LLLL";break;case "YY":Y+="yy";break;case "Y":case "YYYY":Y+="yyyy";break;case "Q":Y+="q";break;case "Z":Y+="ZZ";break;case "ZZ":Y+="ZZZ";break;case "S":Y+="'S'";break;case "SS":Y+="'SS'";break;case "SSS":Y+="u";break;case "A":case "a":Y+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Y+=
ua;break;default:Y=2<=ua.length&&"["===ua.slice(0,1)&&"]"===ua.slice(-1)?Y+`'${ua.slice(1,-1)}'`:Y+`'${ua}'`}return Y}function K(N,Y,ma){switch(ma){case "\x3e":return N>Y;case "\x3c":return N<Y;case "\x3e\x3d":return N>=Y;case "\x3c\x3d":return N<=Y}return!1}function U(N,Y,ma){if(null===N){if(null===Y||Y===Ya)return K(null,null,ma);if(D(Y))return K(0,Y,ma);if(x(Y)||u(Y))return K(0,pa(Y),ma);if(O(Y))return K(0,Y.getTime(),ma)}if(N===Ya){if(null===Y||Y===Ya)return K(null,null,ma);if(D(Y))return K(0,
Y,ma);if(x(Y)||u(Y))return K(0,pa(Y),ma);if(O(Y))return K(0,Y.getTime(),ma)}else if(D(N)){if(D(Y))return K(N,Y,ma);if(u(Y))return K(N,pa(Y),ma);if(null===Y||Y===Ya)return K(N,0,ma);if(x(Y))return K(N,pa(Y),ma);if(O(Y))return K(N,Y.getTime(),ma)}else if(x(N)){if(x(Y))return K(ea(N),ea(Y),ma);if(O(Y))return K(pa(N),Y.getTime(),ma);if(D(Y))return K(pa(N),Y,ma);if(null===Y||Y===Ya)return K(pa(N),0,ma);if(u(Y))return K(pa(N),pa(Y),ma)}else if(O(N)){if(O(Y))return K(N,Y,ma);if(null===Y||Y===Ya)return K(N.getTime(),
0,ma);if(D(Y))return K(N.getTime(),Y,ma);if(u(Y)||x(Y))return K(N.getTime(),pa(Y),ma)}else if(u(N)){if(u(Y))return K(N,Y,ma);if(D(Y))return K(pa(N),pa(Y),ma);if(O(Y))return K(pa(N),Y.getTime(),ma);if(null===Y||Y===Ya)return K(pa(N),0,ma);if(x(Y))return K(pa(N),pa(Y),ma)}return!ba(N,Y)||"\x3c\x3d"!==ma&&"\x3e\x3d"!==ma?!1:!0}function ba(N,Y){if(N===Y||null===N&&Y===Ya||null===Y&&N===Ya)return!0;if(O(N)&&O(Y))return N.getTime()===Y.getTime();if(N instanceof q||N instanceof E)return N.equalityTest(Y);
if(N instanceof v&&Y instanceof v){const ma=N.cache._arcadeCacheId,ua=Y.cache._arcadeCacheId;if(void 0!==ma&&null!==ma)return ma===ua}return void 0!==N&&void 0!==Y&&null!==N&&null!==Y&&"object"===typeof N&&"object"===typeof Y&&(N._arcadeCacheId===Y._arcadeCacheId&&void 0!==N._arcadeCacheId&&null!==N._arcadeCacheId||N._underlyingGraphic===Y._underlyingGraphic&&void 0!==N._underlyingGraphic&&null!==N._underlyingGraphic)?!0:!1}function ea(N,Y){if(x(N))return N;if(null===N)return"";if(D(N))return l(N,
Y);if(u(N))return N.toString();if(O(N))return A(N,Y);if(N instanceof H)return JSON.stringify(N.toJSON());if(S(N)){Y=[];for(var ma=0;ma<N.length;ma++)Y[ma]=la(N[ma]);return"["+Y.join(",")+"]"}if(N instanceof k){Y=[];for(ma=0;ma<N.length();ma++)Y[ma]=la(N.get(ma));return"["+Y.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():t(N)?"object, Function":""}function na(N){const Y=[];if(!1===S(N))return null;if(N instanceof k){for(var ma=0;ma<N.length();ma++)Y[ma]=pa(N.get(ma));
return Y}for(ma=0;ma<N.length;ma++)Y[ma]=pa(N[ma]);return Y}function ha(N,Y){if(x(N))return N;if(null===N)return"";if(D(N))return l(N,Y);if(u(N))return N.toString();if(O(N))return A(N,Y);if(N instanceof H)return N instanceof z?'{"xmin":'+N.xmin.toString()+',"ymin":'+N.ymin.toString()+","+(N.hasZ?'"zmin":'+N.zmin.toString()+",":"")+(N.hasM?'"mmin":'+N.mmin.toString()+",":"")+'"xmax":'+N.xmax.toString()+',"ymax":'+N.ymax.toString()+","+(N.hasZ?'"zmax":'+N.zmax.toString()+",":"")+(N.hasM?'"mmax":'+N.mmax.toString()+
",":"")+'"spatialReference":'+Ga(N.spatialReference)+"}":Ga(N.toJSON(),(ua,wa)=>ua.key===wa.key?0:"spatialReference"===ua.key?1:"spatialReference"===wa.key||ua.key<wa.key?-1:ua.key>wa.key?1:0);if(S(N)){Y=[];for(var ma=0;ma<N.length;ma++)Y[ma]=la(N[ma]);return"["+Y.join(",")+"]"}if(N instanceof k){Y=[];for(ma=0;ma<N.length();ma++)Y[ma]=la(N.get(ma));return"["+Y.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():t(N)?"object, Function":""}function la(N){return null===
N?"null":u(N)||D(N)||x(N)?JSON.stringify(N):N instanceof H||N instanceof k||N instanceof Array?ha(N):N instanceof Date?JSON.stringify(A(N,"")):null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():"null"}function pa(N,Y){return D(N)?N:null===N||""===N?0:O(N)?NaN:u(N)?N?1:0:S(N)||""===N||void 0===N?NaN:void 0!==Y&&x(N)?(Y=f(Y,"\u2030",""),Y=f(Y,"\u00a4",""),d.parse(N,{pattern:Y})):N===Ya?0:Number(N)}function qa(N){return O(N)?N:x(N)&&(N=V(N))?N.toJSDate():null}function M(N){return O(N)?
a.DateTime.fromJSDate(N):x(N)?V(N):null}function V(N){const Y=/ (\d\d)/;let ma=a.DateTime.fromISO(N);return ma.isValid||Y.test(N)&&(N=N.replace(Y,"T$1"),ma=a.DateTime.fromISO(N),ma.isValid)?ma:null}function ca(N){return u(N)?N:x(N)?(N=N.toLowerCase(),"true"===N?!0:!1):D(N)?0===N||isNaN(N)?!1:!0:!1}function ia(N,Y){if(h.isNone(N))return null;if(null===N.spatialReference||void 0===N.spatialReference)N.spatialReference=Y;return N}function ka(N){if(null===N)return null;if(N instanceof v)return"NaN"===
N.x||null===N.x||isNaN(N.x)?null:N;if(N instanceof n){if(0===N.rings.length)return null;for(const Y of N.rings)if(0<Y.length)return N;return null}if(N instanceof b){if(0===N.paths.length)return null;for(const Y of N.paths)if(0<Y.length)return N;return null}return N instanceof G?0===N.points.length?null:N:N instanceof z?"NaN"===N.xmin||null===N.xmin||isNaN(N.xmin)?null:N:null}function ra(N,Y){if(!N||!N.domain)return Y;let ma=null;if("string"===N.field.type||"esriFieldTypeString"===N.field.type)Y=ea(Y);
else{if(null===Y||void 0===Y)return null;if(""===Y)return Y;Y=pa(Y)}for(let ua=0;ua<N.domain.codedValues.length;ua++){const wa=N.domain.codedValues[ua];wa.code===Y&&(ma=wa)}return null===ma?Y:ma.name}function va(N,Y){if(!N||!N.domain)return Y;let ma=null;Y=ea(Y);for(let ua=0;ua<N.domain.codedValues.length;ua++){const wa=N.domain.codedValues[ua];wa.name===Y&&(ma=wa)}return null===ma?Y:ma.code}function Ba(N,Y,ma=null,ua=null){if(!Y||!Y.fields)return null;let wa=null;for(let bb=0;bb<Y.fields.length;bb++){const $a=
Y.fields[bb];$a.name.toLowerCase()===N.toString().toLowerCase()&&(wa=$a)}if(null===wa)throw Error("Field not found");let Ma,Pa;null===ua&&ma&&Y.typeIdField&&(ua=ma.hasField(Y.typeIdField)?ma.field(Y.typeIdField):null);null!==ua&&void 0!==ua&&Y.types.some(function(bb){return bb.id===ua?((Ma=bb.domains&&bb.domains[wa.name])&&"inherited"===Ma.type&&(Ma=Da(wa.name,Y),Pa=!0),!0):!1});Pa||Ma||(Ma=Da(N,Y));return{field:wa,domain:Ma}}function Da(N,Y){let ma;Y.fields.some(function(ua){ua.name.toLowerCase()===
N.toLowerCase()&&(ma=ua.domain);return!!ma});return ma}function Ga(N,Y){Y||(Y={});"function"===typeof Y&&(Y={cmp:Y});const ma="boolean"===typeof Y.cycles?Y.cycles:!1,ua=Y.cmp&&function(Ma){return function(Pa){return function(bb,$a){return Ma({key:bb,value:Pa[bb]},{key:$a,value:Pa[$a]})}}}(Y.cmp),wa=[];return function bb(Pa){Pa&&Pa.toJSON&&"function"===typeof Pa.toJSON&&(Pa=Pa.toJSON());if(void 0!==Pa){if("number"===typeof Pa)return isFinite(Pa)?""+Pa:"null";if("object"!==typeof Pa)return JSON.stringify(Pa);
var $a;if(Array.isArray(Pa)){var db="[";for($a=0;$a<Pa.length;$a++)$a&&(db+=","),db+=bb(Pa[$a])||"null";return db+"]"}if(null===Pa)return"null";if(wa.includes(Pa)){if(ma)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ob=wa.push(Pa)-1,Cb=Object.keys(Pa).sort(ua&&ua(Pa));db="";for($a=0;$a<Cb.length;$a++){const Db=Cb[$a],Eb=bb(Pa[Db]);Eb&&(db&&(db+=","),db+=JSON.stringify(Db)+":"+Eb)}wa.splice(ob,1);return"{"+db+"}"}}(N)}function Fa(N){if(null===
N)return null;const Y=[];for(const ma of N)ma&&ma.arcadeDeclaredClass&&"esri.arcade.Feature"===ma.arcadeDeclaredClass?Y.push(ma.geometry()):Y.push(ma);return Y}function ya(N,Y){if(Y instanceof v)N.push(Y.hasZ?Y.hasM?[Y.x,Y.y,Y.z,Y.m]:[Y.x,Y.y,Y.z]:[Y.x,Y.y]);else throw Error("Invalid Argument");}function nb(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,ma=N[0].hasZ,ua=N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&
(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}else throw Error("Invalid Argument");if(0===wa.length)return null;!1===e.isClockwise(wa,ua,ma)&&(wa=wa.slice(0).reverse());return new n({rings:[wa],spatialReference:Y,hasZ:ma,hasM:ua})}return N}function Xa(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,
ma=!0===N[0].hasZ,ua=!0===N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}return 0===wa.length?null:new b({paths:[wa],spatialReference:Y,hasZ:ma,hasM:ua})}return N}function eb(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,ma=
!0===N[0].hasZ,ua=!0===N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}return 0===wa.length?null:new G({points:wa,spatialReference:Y,hasZ:ma,hasM:ua})}return N}function pb(N,Y=!1){const ma=[];if(null===N)return ma;if(!0===S(N)){for(var ua=0;ua<N.length;ua++){var wa=ea(N[ua]);""===wa&&!0!==Y||ma.push(wa)}return ma}if(N instanceof
k){for(ua=0;ua<N.length();ua++)wa=ea(N.get(ua)),""===wa&&!0!==Y||ma.push(wa);return ma}return w(N)?(N=ea(N),""===N&&!0!==Y||ma.push(N),ma):[]}function vb(N){qb++;return 0===qb%100?(qb=0,new Promise(Y=>{setTimeout(()=>{Y(N)},0)})):N}function Qa(N,Y,ma){switch(ma){case "\x26":return N&Y;case "|":return N|Y;case "^":return N^Y;case "\x3c\x3c":return N<<Y;case "\x3e\x3e":return N>>Y;case "\x3e\x3e\x3e":return N>>>Y}}function Sa(N,Y=null){if(null!=N){if(u(N)||D(N)||x(N))return N;if(N instanceof H)return!0===
(null==Y?void 0:Y.keepGeometryType)?N:N.toJSON();if(N instanceof k)return N.toArray().map(ma=>Sa(ma,Y));if(N instanceof Array)return N.map(ma=>Sa(ma,Y));if(N instanceof Date)return N;if(null!==N&&"object"===typeof N&&void 0!==N.castAsJson)return N.castAsJson(Y)}return null}function Ea(N,Y,ma,ua,wa){return da.apply(this,arguments)}function da(){da=p._asyncToGenerator(function*(N,Y,ma,ua,wa){N=yield ja(N,Y,ma);wa[ua]=N});return da.apply(this,arguments)}function ja(N){return sa.apply(this,arguments)}
function sa(){sa=p._asyncToGenerator(function*(N,Y=null,ma=null){N instanceof k&&(N=N.toArray());if(null!=N){if(w(N)||N instanceof H||N instanceof Date)return Sa(N,ma);if(N instanceof Array){const ua=[],wa=[];for(const Ma of N)null===Ma||w(Ma)||Ma instanceof H||Ma instanceof Date?wa.push(Sa(Ma,ma)):(wa.push(null),ua.push(Ea(Ma,Y,ma,wa.length-1,wa)));0<ua.length&&(yield Promise.all(ua));return wa}if(null!==N&&"object"===typeof N&&void 0!==N.castAsJsonAsync)return N.castAsJsonAsync(Y,ma)}return null});
return sa.apply(this,arguments)}function xa(N,Y,ma){const ua=N.fullSchema();return null!==ua&&ua.fields?Ba(Y,ua,N,ma):null}function Aa(N){N=N.fullSchema();return null!==N&&N.fields?N.typeIdField?{subtypeField:N.typeIdField,subtypes:N.types?N.types.map(Y=>({name:Y.name,code:Y.id})):[]}:null:null}function Ca(N,Y,ma,ua){const wa=N.fullSchema();if(null===wa||!wa.fields)return null;ua=Ba(Y,wa,N,ua);if(void 0===ma)try{ma=N.field(Y)}catch(Ma){return null}return ra(ua,ma)}function Ka(N,Y,ma,ua){const wa=
N.fullSchema();if(null===wa||!wa.fields)return null;if(void 0===ma){try{ma=N.field(Y)}catch(Ma){return null}return ma}N=Ba(Y,wa,N,ua);return va(N,ma)}function Ua(N){N=N.fullSchema();if(null===N||!N.fields)return null;const Y=[];for(const ma of N.fields)Y.push(B.esriFieldToJson(ma));return{objectIdField:N.objectIdField,globalIdField:N.globalIdField,geometryType:void 0===B.layerGeometryEsriRestConstants[N.geometryType]?"":B.layerGeometryEsriRestConstants[N.geometryType],fields:Y}}let Ta=function(N){this.value=
N},Ia=function(N){this.value=N},cb=function(N){this.fn=N},ab=function(N,Y){this.paramCount=Y;this.fn=N};const lb=cb,fb=ab,Ya={type:"VOID"},gb={type:"BREAK"},sb={type:"CONTINUE"};let qb=0;const rb=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Ta,ImplicitResultE:Ia,NativeFunctionE:cb,SizzleFunctionE:ab,NativeFunction:lb,ImplicitResult:Ia,ReturnResult:Ta,SizzleFunction:fb,voidOperation:Ya,breakResult:gb,continueResult:sb,multiReplace:f,isFunctionParameter:t,isSimpleType:w,defaultUndefined:C,
isString:x,isBoolean:u,isNumber:D,isInteger:J,isArray:S,isFeature:T,isFeatureSet:P,isFeatureSetCollection:X,isImmutableArray:Q,isDate:O,pcCheck:Z,absRound:L,generateUUID:I,formatNumber:l,formatDate:A,standardiseDateFormat:y,greaterThanLessThan:U,equalityTest:ba,toString:ea,toNumberArray:na,toStringExplicit:ha,toNumber:pa,toDate:qa,toDateTime:M,toBoolean:ca,fixSpatialReference:ia,fixNullGeometry:ka,getDomainValue:ra,getDomainCode:va,getDomain:Ba,stableStringify:Ga,autoCastFeatureToGeometry:Fa,autoCastArrayOfPointsToPolygon:nb,
autoCastArrayOfPointsToPolyline:Xa,autoCastArrayOfPointsToMultiPoint:eb,toStringArray:pb,tick:vb,binaryOperator:Qa,castAsJson:Sa,castAsJsonAsync:ja,featureFullDomain:xa,featureSubtypes:Aa,featureDomainValueLookup:Ca,featureDomainCodeLookup:Ka,featureSchema:Ua},Symbol.toStringTag,{value:"Module"}));g.ImplicitResult=Ia;g.ImplicitResultE=Ia;g.NativeFunction=lb;g.NativeFunctionE=cb;g.ReturnResult=Ta;g.ReturnResultE=Ta;g.SizzleFunction=fb;g.SizzleFunctionE=ab;g.absRound=L;g.autoCastArrayOfPointsToMultiPoint=
eb;g.autoCastArrayOfPointsToPolygon=nb;g.autoCastArrayOfPointsToPolyline=Xa;g.autoCastFeatureToGeometry=Fa;g.binaryOperator=Qa;g.breakResult=gb;g.castAsJson=Sa;g.castAsJsonAsync=ja;g.continueResult=sb;g.defaultUndefined=C;g.equalityTest=ba;g.featureDomainCodeLookup=Ka;g.featureDomainValueLookup=Ca;g.featureFullDomain=xa;g.featureSchema=Ua;g.featureSubtypes=Aa;g.fixNullGeometry=ka;g.fixSpatialReference=ia;g.formatDate=A;g.formatNumber=l;g.generateUUID=I;g.getDomain=Ba;g.getDomainCode=va;g.getDomainValue=
ra;g.greaterThanLessThan=U;g.isArray=S;g.isBoolean=u;g.isDate=O;g.isFeature=T;g.isFeatureSet=P;g.isFeatureSetCollection=X;g.isFunctionParameter=t;g.isImmutableArray=Q;g.isInteger=J;g.isNumber=D;g.isSimpleType=w;g.isString=x;g.lc=rb;g.multiReplace=f;g.pcCheck=Z;g.stableStringify=Ga;g.standardiseDateFormat=y;g.tick=vb;g.toBoolean=ca;g.toDate=qa;g.toDateTime=M;g.toNumber=pa;g.toNumberArray=na;g.toString=ea;g.toStringArray=pb;g.toStringExplicit=ha;g.voidOperation=Ya})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(g,
p){this.context=this.definition=null;this.definition=g;this.context=p}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function g(m=[]){this._elements=m}var p=g.prototype;p.length=function(){return this._elements.length};p.get=function(m){return this._elements[m]};p.toArray=function(){const m=[];for(let k=0;k<this.length();k++)m.push(this.get(k));return m};return g}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray",
"./ImmutablePointArray"],function(g,p,m){return function(k){function q(z,H,G,v,n){z=k.call(this,z)||this;z._lazyPath=[];z._hasZ=!1;z._hasM=!1;z._hasZ=G;z._hasM=v;z._spRef=H;z._cacheId=n;return z}g._inheritsLoose(q,k);var E=q.prototype;E.get=function(z){if(void 0===this._lazyPath[z]){const H=this._elements[z];if(void 0===H)return;this._lazyPath[z]=new m(H,this._spRef,this._hasZ,this._hasM,this._cacheId,z)}return this._lazyPath[z]};E.equalityTest=function(z){return z===this?!0:null===z||!1===z instanceof
q?!1:z.getUniqueHash()===this.getUniqueHash()};E.getUniqueHash=function(){return this._cacheId.toString()};return q}(p)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(g,p,m){return function(k){function q(z,H,G,v,n,b){z=k.call(this,z)||this;z._lazyPt=[];z._hasZ=!1;z._hasM=!1;z._spRef=H;z._hasZ=G;z._hasM=v;z._cacheId=n;z._partId=b;return z}g._inheritsLoose(q,k);var E=q.prototype;E.get=function(z){if(void 0===
this._lazyPt[z]){const H=this._elements[z];if(void 0===H)return;const G=this._hasZ,v=this._hasM;let n=null;n=G&&!v?new m(H[0],H[1],H[2],void 0,this._spRef):v&&!G?new m(H[0],H[1],void 0,H[2],this._spRef):G&&v?new m(H[0],H[1],H[2],H[3],this._spRef):new m(H[0],H[1],this._spRef);n.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+z.toString();this._lazyPt[z]=n}return this._lazyPt[z]};E.equalityTest=function(z){return z===this?!0:null===z||!1===z instanceof q?!1:z.getUniqueHash()===
this.getUniqueHash()};E.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return q}(p)})},"esri/chunks/datetime":function(){define(["exports"],function(g){function p(c){return"undefined"===typeof c}function m(c){return"number"===typeof c}function k(c){return"number"===typeof c&&0===c%1}function q(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(c){return!1}}function E(c,F,R){if(0!==c.length)return c.reduce((W,aa)=>{aa=[F(aa),aa];return W?R(W[0],
aa[0])===W[0]?W:aa:aa},null)[1]}function z(c,F){return F.reduce((R,W)=>{R[W]=c[W];return R},{})}function H(c,F){return Object.prototype.hasOwnProperty.call(c,F)}function G(c,F,R){return k(c)&&c>=F&&c<=R}function v(c,F=2){return 0>c?"-"+(""+-c).padStart(F,"0"):(""+c).padStart(F,"0")}function n(c){if(!p(c)&&null!==c&&""!==c)return parseInt(c,10)}function b(c){if(!p(c)&&null!==c&&""!==c)return parseFloat(c)}function a(c){if(!p(c)&&null!==c&&""!==c)return c=1E3*parseFloat("0."+c),Math.floor(c)}function h(c,
F,R=!1){F=10**F;return(R?Math.trunc:Math.round)(c*F)/F}function d(c){return 0===c%4&&(0!==c%100||0===c%400)}function e(c,F){var R=F-1;R=R-12*Math.floor(R/12)+1;return 2===R?d(c+(F-R)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][R-1]}function r(c){let F=Date.UTC(c.year,c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond);100>c.year&&0<=c.year&&(F=new Date(F),F.setUTCFullYear(F.getUTCFullYear()-1900));return+F}function B(c){var F=c-1;F=(F+Math.floor(F/4)-Math.floor(F/100)+Math.floor(F/400))%
7;return 4===(c+Math.floor(c/4)-Math.floor(c/100)+Math.floor(c/400))%7||3===F?53:52}function f(c){return 99<c?c:60<c?1900+c:2E3+c}function t(c,F,R,W=null){c=new Date(c);const aa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};W&&(aa.timeZone=W);return(F=(new Intl.DateTimeFormat(R,{timeZoneName:F,...aa})).formatToParts(c).find(fa=>"timezonename"===fa.type.toLowerCase()))?F.value:null}function w(c,F){c=parseInt(c,10);Number.isNaN(c)&&(c=0);F=parseInt(F,
10)||0;F=0>c||Object.is(c,-0)?-F:F;return 60*c+F}function C(c){const F=Number(c);if("boolean"===typeof c||""===c||Number.isNaN(F))throw new kb(`Invalid unit value ${c}`);return F}function x(c,F){const R={};for(const W in c)if(H(c,W)){const aa=c[W];void 0!==aa&&null!==aa&&(R[F(W)]=C(aa))}return R}function u(c,F){const R=Math.trunc(Math.abs(c/60)),W=Math.trunc(Math.abs(c%60));c=0<=c?"+":"-";switch(F){case "short":return`${c}${v(R,2)}:${v(W,2)}`;case "narrow":return`${c}${R}${0<W?`:${W}`:""}`;case "techie":return`${c}${v(R,
2)}${v(W,2)}`;default:throw new RangeError(`Value format ${F} is out of range for property format`);}}function D(c){return z(c,["hour","minute","second","millisecond"])}function J(c){switch(c){case "narrow":return[...Lc];case "short":return[...Wb];case "long":return[...Mc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function S(c){switch(c){case "narrow":return[...Nc];case "short":return[...Xb];
case "long":return[...Yb];case "numeric":return"1234567".split("");default:return null}}function T(c){switch(c){case "narrow":return[...Oc];case "short":return[...Pc];case "long":return[...Qc];default:return null}}function P(c,F,R="always",W=!1){const aa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var fa=-1===["hours","minutes","seconds"].indexOf(c);
if("auto"===R&&fa)switch(R="days"===c,F){case 1:return R?"tomorrow":`next ${aa[c][0]}`;case -1:return R?"yesterday":`last ${aa[c][0]}`;case 0:return R?"today":`this ${aa[c][0]}`}R=Object.is(F,-0)||0>F;F=Math.abs(F);fa=1===F;const oa=aa[c];c=W?fa?oa[1]:oa[2]||oa[1]:fa?aa[c][0]:c;return R?`${F} ${c} ago`:`in ${F} ${c}`}function X(c,F){let R="";for(const W of c)R=W.literal?R+W.val:R+F(W.val);return R}function Q(c,F){if(p(c)||null===c)return F;if(c instanceof zb)return c;if("string"===typeof c){const R=
c.toLowerCase();return"local"===R||"system"===R?F:"utc"===R||"gmt"===R?hb.utcInstance:hb.parseSpecifier(R)||tb.create(c)}return m(c)?hb.instance(c):"object"===typeof c&&c.offset&&"number"===typeof c.offset?c:new Rc(c)}function O(c,F={}){const R=JSON.stringify([c,F]);let W=Zb[R];W||(W=new Intl.ListFormat(c,F),Zb[R]=W);return W}function Z(c,F={}){const R=JSON.stringify([c,F]);let W=Ib[R];W||(W=new Intl.DateTimeFormat(c,F),Ib[R]=W);return W}function L(c,F={}){const R=JSON.stringify([c,F]);let W=Jb[R];
W||(W=new Intl.NumberFormat(c,F),Jb[R]=W);return W}function I(c,F={}){const {base:R,...W}=F,aa=JSON.stringify([c,W]);let fa=Kb[aa];fa||(fa=new Intl.RelativeTimeFormat(c,F),Kb[aa]=fa);return fa}function l(c){const F=[];for(let R=1;12>=R;R++){const W=Ja.utc(2016,R,1);F.push(c(W))}return F}function A(c){const F=[];for(let R=1;7>=R;R++){const W=Ja.utc(2016,11,13+R);F.push(c(W))}return F}function y(c,F,R,W,aa){c=c.listingMode(R);return"error"===c?null:"en"===c?W(F):aa(F)}function K(...c){c=c.reduce((F,
R)=>F+R.source,"");return RegExp(`^${c}$`)}function U(...c){return F=>c.reduce(([R,W,aa],fa)=>{const [oa,ta,za]=fa(F,aa);return[{...R,...oa},ta||W,za]},[{},null,1]).slice(0,2)}function ba(c,...F){if(null==c)return[null,null];for(const [R,W]of F)if(F=R.exec(c))return W(F);return[null,null]}function ea(...c){return(F,R)=>{const W={};let aa;for(aa=0;aa<c.length;aa++)W[c[aa]]=n(F[R+aa]);return[W,null,R+aa]}}function na(c,F,R){c=c[F];return p(c)?R:n(c)}function ha(c,F){return[{hours:na(c,F,0),minutes:na(c,
F+1,0),seconds:na(c,F+2,0),milliseconds:a(c[F+3])},null,F+4]}function la(c,F){const R=!c[F]&&!c[F+1];c=w(c[F+1],c[F+2]);return[{},R?null:hb.instance(c),F+3]}function pa(c,F){return[{},c[F]?tb.create(c[F]):null,F+1]}function qa(c){const [F,R,W,aa,fa,oa,ta,za,Ra]=c,Ha="-"===F[0];c=za&&"-"===za[0];const La=(Oa,ib=!1)=>void 0!==Oa&&(ib||Oa&&Ha)?-Oa:Oa;return[{years:La(b(R)),months:La(b(W)),weeks:La(b(aa)),days:La(b(fa)),hours:La(b(oa)),minutes:La(b(ta)),seconds:La(b(za),"-0"===za),milliseconds:La(a(Ra),
c)}]}function M(c,F,R,W,aa,fa,oa){F={year:2===F.length?f(n(F)):n(F),month:Wb.indexOf(R)+1,day:n(W),hour:n(aa),minute:n(fa)};oa&&(F.second=n(oa));c&&(F.weekday=3<c.length?Yb.indexOf(c)+1:Xb.indexOf(c)+1);return F}function V(c){const [,F,R,W,aa,fa,oa,ta,za,Ra,Ha,La]=c;c=M(F,aa,W,R,fa,oa,ta);let Oa;Oa=za?Sc[za]:Ra?0:w(Ha,La);return[c,new hb(Oa)]}function ca(c){const [,F,R,W,aa,fa,oa,ta]=c;return[M(F,aa,W,R,fa,oa,ta),hb.utcInstance]}function ia(c){const [,F,R,W,aa,fa,oa,ta]=c;return[M(F,ta,R,W,aa,fa,
oa),hb.utcInstance]}function ka(c,F,R=!1){c={values:R?F.values:{...c.values,...F.values||{}},loc:c.loc.clone(F.loc),conversionAccuracy:F.conversionAccuracy||c.conversionAccuracy};return new Na(c)}function ra(c,F,R,W,aa){c=c[aa][R];var fa=F[R]/c;fa=Math.sign(fa)!==Math.sign(W[aa])&&0!==W[aa]&&1>=Math.abs(fa)?0>fa?Math.floor(fa):Math.ceil(fa):Math.trunc(fa);W[aa]+=fa;F[R]-=fa*c}function va(c,F){Tc.reduce((R,W)=>{if(p(F[W]))return R;R&&ra(c,F,R,F,W);return W},null)}function Ba(c,F){c=F.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-
c.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Na.fromMillis(c).as("days"))}function Da(c,F,R){var W=[["years",(ta,za)=>za.year-ta.year],["quarters",(ta,za)=>za.quarter-ta.quarter],["months",(ta,za)=>za.month-ta.month+12*(za.year-ta.year)],["weeks",(ta,za)=>{ta=Ba(ta,za);return(ta-ta%7)/7}],["days",Ba]];const aa={};let fa,oa;for(const [ta,za]of W)0<=R.indexOf(ta)&&(fa=ta,W=za(c,F),oa=c.plus({[ta]:W}),oa>F?(c=c.plus({[ta]:W-1}),--W):c=oa,aa[ta]=W);return[c,aa,oa,fa]}function Ga(c,
F,R,W){let [aa,fa,oa,ta]=Da(c,F,R);c=F-aa;R=R.filter(za=>0<=["hours","minutes","seconds","milliseconds"].indexOf(za));0===R.length&&(oa<F&&(oa=aa.plus({[ta]:1})),oa!==aa&&(fa[ta]=(fa[ta]||0)+c/(oa-aa)));F=Na.fromObject(fa,W);return 0<R.length?Na.fromMillis(c,W).shiftTo(...R).plus(F):F}function Fa({numberingSystem:c},F=""){return new RegExp(`${Lb[c||"latn"]}${F}`)}function ya(c,F=R=>R){return{regex:c,deser:([R])=>{{let W=parseInt(R,10);if(isNaN(W)){W="";for(let aa=0;aa<R.length;aa++){const fa=R.charCodeAt(aa);
if(-1!==R[aa].search(Lb.hanidec))W+=Uc.indexOf(R[aa]);else for(const oa in $b){const [ta,za]=$b[oa];fa>=ta&&fa<=za&&(W+=fa-ta)}}R=parseInt(W,10)}else R=W}return F(R)}}}function nb(c){return c.replace(/\./g,"\\.?").replace(Mb,ac)}function Xa(c,F){return null===c?null:{regex:RegExp(c.map(nb).join("|")),deser:([R])=>c.findIndex(W=>R.replace(/\./g,"").replace(Mb," ").toLowerCase()===W.replace(/\./g,"").replace(Mb," ").toLowerCase())+F}}function eb(c,F){return{regex:c,deser:([,R,W])=>w(R,W),groups:F}}
function pb(c){return{regex:c,deser:([F])=>F}}function vb(c,F){const R=Fa(F),W=Fa(F,"{2}"),aa=Fa(F,"{3}"),fa=Fa(F,"{4}"),oa=Fa(F,"{6}"),ta=Fa(F,"{1,2}"),za=Fa(F,"{1,3}"),Ra=Fa(F,"{1,6}"),Ha=Fa(F,"{1,9}"),La=Fa(F,"{2,4}"),Oa=Fa(F,"{4,6}"),ib=wb=>({regex:RegExp(wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Nb])=>Nb,literal:!0}),yb=(wb=>{if(c.literal)return ib(wb);switch(wb.val){case "G":return Xa(F.eras("short",!1),0);case "GG":return Xa(F.eras("long",!1),0);case "y":return ya(Ra);
case "yy":return ya(La,f);case "yyyy":return ya(fa);case "yyyyy":return ya(Oa);case "yyyyyy":return ya(oa);case "M":return ya(ta);case "MM":return ya(W);case "MMM":return Xa(F.months("short",!0,!1),1);case "MMMM":return Xa(F.months("long",!0,!1),1);case "L":return ya(ta);case "LL":return ya(W);case "LLL":return Xa(F.months("short",!1,!1),1);case "LLLL":return Xa(F.months("long",!1,!1),1);case "d":return ya(ta);case "dd":return ya(W);case "o":return ya(za);case "ooo":return ya(aa);case "HH":return ya(W);
case "H":return ya(ta);case "hh":return ya(W);case "h":return ya(ta);case "mm":return ya(W);case "m":return ya(ta);case "q":return ya(ta);case "qq":return ya(W);case "s":return ya(ta);case "ss":return ya(W);case "S":return ya(za);case "SSS":return ya(aa);case "u":return pb(Ha);case "uu":return pb(ta);case "uuu":return ya(R);case "a":return Xa(F.meridiems(),0);case "kkkk":return ya(fa);case "kk":return ya(La,f);case "W":return ya(ta);case "WW":return ya(W);case "E":case "c":return ya(R);case "EEE":return Xa(F.weekdays("short",
!1,!1),1);case "EEEE":return Xa(F.weekdays("long",!1,!1),1);case "ccc":return Xa(F.weekdays("short",!0,!1),1);case "cccc":return Xa(F.weekdays("long",!0,!1),1);case "Z":case "ZZ":return eb(new RegExp(`([+-]${ta.source})(?::(${W.source}))?`),2);case "ZZZ":return eb(new RegExp(`([+-]${ta.source})(${W.source})?`),2);case "z":return pb(/[a-z_+-/]{1,256}?/i);default:return ib(wb)}})(c)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};yb.token=c;return yb}function Qa(c){return[`^${c.map(F=>
F.regex).reduce((F,R)=>`${F}(${R.source})`,"")}$`,c]}function Sa(c,F,R){if(c=c.match(F)){F={};let W=1;for(const aa in R)if(H(R,aa)){const fa=R[aa],oa=fa.groups?fa.groups+1:1;!fa.literal&&fa.token&&(F[fa.token.val[0]]=fa.deser(c.slice(W,W+oa)));W+=oa}return[c,F]}return[c,{}]}function Ea(c){const F=aa=>{switch(aa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";
case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let R=null,W;p(c.z)||(R=tb.create(c.z));p(c.Z)||(R||(R=new hb(c.Z)),W=c.Z);p(c.q)||(c.M=3*(c.q-1)+1);p(c.h)||(12>c.h&&1===c.a?c.h+=12:12===c.h&&0===c.a&&(c.h=0));0===c.G&&c.y&&(c.y=-c.y);p(c.u)||(c.S=a(c.u));return[Object.keys(c).reduce((aa,fa)=>{const oa=F(fa);oa&&(aa[oa]=c[fa]);return aa},{}),R,W]}function da(){Ob||(Ob=Ja.fromMillis(1555555555555));return Ob}function ja(c,
F){if(c.literal)return c;const R=jb.macroTokenToFormatOpts(c.val);if(!R)return c;F=jb.create(F,R).formatDateTimeParts(da()).map(W=>{{const {type:fa,value:oa}=W;if("literal"===fa)W={literal:!0,val:oa};else{W=R[fa];var aa=Vc[fa];"object"===typeof aa&&(aa=aa[W]);W=aa?{literal:!1,val:aa}:void 0}}return W});return F.includes(void 0)?c:F}function sa(c,F){return Array.prototype.concat(...c.map(R=>ja(R,F)))}function xa(c,F,R){R=sa(jb.parseFormat(R),c);var W=R.map(fa=>vb(fa,c));const aa=W.find(fa=>fa.invalidReason);
if(aa)return{input:F,tokens:R,invalidReason:aa.invalidReason};{const [fa,oa]=Qa(W);W=RegExp(fa,"i");const [ta,za]=Sa(F,W,oa),[Ra,Ha,La]=za?Ea(za):[null,null,void 0];if(H(za,"a")&&H(za,"H"))throw new Ab("Can't include meridiem when specifying 24-hour format");return{input:F,tokens:R,regex:W,rawMatches:ta,matches:za,result:Ra,zone:Ha,specificOffset:La}}}function Aa(c,F){return new mb("unit out of range",`you specified ${F} (of type ${typeof F}) as a ${c}, which is invalid`)}function Ca(c,F,R){F=new Date(Date.UTC(c,
F-1,R));100>c&&0<=c&&F.setUTCFullYear(F.getUTCFullYear()-1900);c=F.getUTCDay();return 0===c?7:c}function Ka(c,F){c=d(c)?Pb:Qb;const R=c.findIndex(W=>W<F);return{month:R+1,day:F-c[R]}}function Ua(c){const {year:F,month:R,day:W}=c;var aa=W+(d(F)?Pb:Qb)[R-1];const fa=Ca(F,R,W);aa=Math.floor((aa-fa+10)/7);let oa;1>aa?(oa=F-1,aa=B(oa)):aa>B(F)?(oa=F+1,aa=1):oa=F;return{weekYear:oa,weekNumber:aa,weekday:fa,...D(c)}}function Ta(c){const {weekYear:F,weekNumber:R,weekday:W}=c;var aa=Ca(F,1,4),fa=d(F)?366:
365;aa=7*R+W-aa-3;1>aa?(fa=F-1,aa+=d(fa)?366:365):aa>fa?(fa=F+1,aa-=d(F)?366:365):fa=F;const {month:oa,day:ta}=Ka(fa,aa);return{year:fa,month:oa,day:ta,...D(c)}}function Ia(c){const {year:F,month:R,day:W}=c;var aa=W+(d(F)?Pb:Qb)[R-1];return{year:F,ordinal:aa,...D(c)}}function cb(c){const {year:F,ordinal:R}=c,{month:W,day:aa}=Ka(F,R);return{year:F,month:W,day:aa,...D(c)}}function ab(c){const F=k(c.year),R=G(c.month,1,12),W=G(c.day,1,e(c.year,c.month));return F?R?W?!1:Aa("day",c.day):Aa("month",c.month):
Aa("year",c.year)}function lb(c){const {hour:F,minute:R,second:W,millisecond:aa}=c;c=G(F,0,23)||24===F&&0===R&&0===W&&0===aa;const fa=G(R,0,59),oa=G(W,0,59),ta=G(aa,0,999);return c?fa?oa?ta?!1:Aa("millisecond",aa):Aa("second",W):Aa("minute",R):Aa("hour",F)}function fb(c){return new mb("unsupported zone",`the zone "${c.name}" is not supported`)}function Ya(c){null===c.weekData&&(c.weekData=Ua(c.c));return c.weekData}function gb(c,F){c={ts:c.ts,zone:c.zone,c:c.c,o:c.o,loc:c.loc,invalid:c.invalid};return new Ja({...c,
...F,old:c})}function sb(c,F,R){let W=c-6E4*F;const aa=R.offset(W);if(F===aa)return[W,F];W-=6E4*(aa-F);F=R.offset(W);return aa===F?[W,aa]:[c-6E4*Math.min(aa,F),Math.max(aa,F)]}function qb(c,F){c=new Date(c+6E4*F);return{year:c.getUTCFullYear(),month:c.getUTCMonth()+1,day:c.getUTCDate(),hour:c.getUTCHours(),minute:c.getUTCMinutes(),second:c.getUTCSeconds(),millisecond:c.getUTCMilliseconds()}}function rb(c,F,R){return sb(r(c),F,R)}function N(c,F){const R=c.o;var W=c.c.year+Math.trunc(F.years);const aa=
c.c.month+Math.trunc(F.months)+3*Math.trunc(F.quarters);W={...c.c,year:W,month:aa,day:Math.min(c.c.day,e(W,aa))+Math.trunc(F.days)+7*Math.trunc(F.weeks)};F=Na.fromObject({years:F.years-Math.trunc(F.years),quarters:F.quarters-Math.trunc(F.quarters),months:F.months-Math.trunc(F.months),weeks:F.weeks-Math.trunc(F.weeks),days:F.days-Math.trunc(F.days),hours:F.hours,minutes:F.minutes,seconds:F.seconds,milliseconds:F.milliseconds}).as("milliseconds");W=r(W);let [fa,oa]=sb(W,R,c.zone);0!==F&&(fa+=F,oa=c.zone.offset(fa));
return{ts:fa,o:oa}}function Y(c,F,R,W,aa,fa){const {setZone:oa,zone:ta}=R;return c&&0!==Object.keys(c).length?(c=Ja.fromObject(c,{...R,zone:F||ta,specificOffset:fa}),oa?c:c.setZone(ta)):Ja.invalid(new mb("unparsable",`the input "${aa}" can't be parsed as ${W}`))}function ma(c,F,R=!0){return c.isValid?jb.create(Va.create("en-US"),{allowZ:R,forceSimple:!0}).formatDateTimeFromString(c,F):null}function ua(c,F){const R=9999<c.c.year||0>c.c.year;let W="";R&&0<=c.c.year&&(W+="+");W+=v(c.c.year,R?6:4);F?
(W=W+"-"+v(c.c.month),W=W+"-"+v(c.c.day)):(W+=v(c.c.month),W+=v(c.c.day));return W}function wa(c,F,R,W,aa,fa){let oa=v(c.c.hour);F?(oa=oa+":"+v(c.c.minute),0===c.c.second&&R||(oa+=":")):oa+=v(c.c.minute);0===c.c.second&&R||(oa+=v(c.c.second),0===c.c.millisecond&&W||(oa=oa+"."+v(c.c.millisecond,3)));aa&&(c.isOffsetFixed&&0===c.offset&&!fa?oa+="Z":0>c.o?(oa=oa+"-"+v(Math.trunc(-c.o/60)),oa=oa+":"+v(Math.trunc(-c.o%60))):(oa=oa+"+"+v(Math.trunc(c.o/60)),oa=oa+":"+v(Math.trunc(c.o%60))));fa&&(oa+="["+
c.zone.ianaName+"]");return oa}function Ma(c){const F={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[c.toLowerCase()];if(!F)throw new bc(c);
return F}function Pa(c,F){const R=Q(F.zone,Za.defaultZone);F=Va.fromObject(F);const W=Za.now();var aa;if(p(c.year))c=W;else{for(const fa of cc)p(c[fa])&&(c[fa]=dc[fa]);if(aa=ab(c)||lb(c))return Ja.invalid(aa);aa=R.offset(W);[c,aa]=rb(c,aa,R)}return new Ja({ts:c,zone:R,loc:F,o:aa})}function bb(c,F,R){const W=p(R.round)?!0:R.round,aa=(oa,ta)=>{oa=h(oa,W||R.calendary?0:2,!0);return F.loc.clone(R).relFormatter(R).format(oa,ta)},fa=oa=>R.calendary?F.hasSame(c,oa)?0:F.startOf(oa).diff(c.startOf(oa),oa).get(oa):
F.diff(c,oa).get(oa);if(R.unit)return aa(fa(R.unit),R.unit);for(const oa of R.units){const ta=fa(oa);if(1<=Math.abs(ta))return aa(ta,oa)}return aa(c>F?-0:0,R.units[R.units.length-1])}function $a(c){let F={};0<c.length&&"object"===typeof c[c.length-1]?(F=c[c.length-1],c=Array.from(c).slice(0,c.length-1)):c=Array.from(c);return[F,c]}function db(c){if(Ja.isDateTime(c))return c;if(c&&c.valueOf&&m(c.valueOf()))return Ja.fromJSDate(c);if(c&&"object"===typeof c)return Ja.fromObject(c);throw new kb(`Unknown datetime argument: ${c}, of type ${typeof c}`);
}class ob extends Error{}class Cb extends ob{constructor(c){super(`Invalid DateTime: ${c.toMessage()}`)}}class Db extends ob{constructor(c){super(`Invalid Interval: ${c.toMessage()}`)}}class Eb extends ob{constructor(c){super(`Invalid Duration: ${c.toMessage()}`)}}class Ab extends ob{}class bc extends ob{constructor(c){super(`Invalid unit ${c}`)}}class kb extends ob{}class ub extends ob{constructor(){super("Zone is an abstract class")}}const Rb={year:"numeric",month:"numeric",day:"numeric"},ec={year:"numeric",
month:"short",day:"numeric"},Wc={year:"numeric",month:"short",day:"numeric",weekday:"short"},fc={year:"numeric",month:"long",day:"numeric"},gc={year:"numeric",month:"long",day:"numeric",weekday:"long"},hc={hour:"numeric",minute:"numeric"},ic={hour:"numeric",minute:"numeric",second:"numeric"},jc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},kc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},lc={hour:"numeric",minute:"numeric",hourCycle:"h23"},mc={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},nc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},oc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},pc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},qc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},rc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},sc={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Xc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},tc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},uc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},vc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
wc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},xc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Mc="January February March April May June July August September October November December".split(" "),Wb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Lc="JFMAMJJASOND".split(""),Yb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Xb="Mon Tue Wed Thu Fri Sat Sun".split(" "),
Nc="MTWTFSS".split(""),yc=["AM","PM"],Qc=["Before Christ","Anno Domini"],Pc=["BC","AD"],Oc=["B","A"],Yc={D:Rb,DD:ec,DDD:fc,DDDD:gc,t:hc,tt:ic,ttt:jc,tttt:kc,T:lc,TT:mc,TTT:nc,TTTT:oc,f:pc,ff:rc,fff:tc,ffff:vc,F:qc,FF:sc,FFF:uc,FFFF:wc};class jb{static create(c,F={}){return new jb(c,F)}static parseFormat(c){let F=null,R="",W=!1;const aa=[];for(let fa=0;fa<c.length;fa++){const oa=c.charAt(fa);"'"===oa?(0<R.length&&aa.push({literal:W,val:R}),F=null,R="",W=!W):W?R+=oa:oa===F?R+=oa:(0<R.length&&aa.push({literal:!1,
val:R}),F=R=oa)}0<R.length&&aa.push({literal:W,val:R});return aa}static macroTokenToFormatOpts(c){return Yc[c]}constructor(c,F){this.opts=F;this.loc=c;this.systemLoc=null}formatWithSystemDefault(c,F){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(c,{...this.opts,...F}).format()}formatDateTime(c,F={}){return this.loc.dtFormatter(c,{...this.opts,...F}).format()}formatDateTimeParts(c,F={}){return this.loc.dtFormatter(c,{...this.opts,...F}).formatToParts()}resolvedOptions(c,
F={}){return this.loc.dtFormatter(c,{...this.opts,...F}).resolvedOptions()}num(c,F=0){if(this.opts.forceSimple)return v(c,F);const R={...this.opts};0<F&&(R.padTo=F);return this.loc.numberFormatter(R).format(c)}formatDateTimeFromString(c,F){const R="en"===this.loc.listingMode(),W=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,aa=(Ha,La)=>this.loc.extract(c,Ha,La),fa=Ha=>c.isOffsetFixed&&0===c.offset&&Ha.allowZ?"Z":c.isValid?c.zone.formatOffset(c.ts,Ha.format):"",oa=(Ha,La)=>R?J(Ha)[c.month-
1]:aa(La?{month:Ha}:{month:Ha,day:"numeric"},"month"),ta=(Ha,La)=>R?S(Ha)[c.weekday-1]:aa(La?{weekday:Ha}:{weekday:Ha,month:"long",day:"numeric"},"weekday"),za=Ha=>{const La=jb.macroTokenToFormatOpts(Ha);return La?this.formatWithSystemDefault(c,La):Ha},Ra=Ha=>R?T(Ha)[0>c.year?0:1]:aa({era:Ha},"era");return X(jb.parseFormat(F),Ha=>{switch(Ha){case "S":return this.num(c.millisecond);case "u":case "SSS":return this.num(c.millisecond,3);case "s":return this.num(c.second);case "ss":return this.num(c.second,
2);case "uu":return this.num(Math.floor(c.millisecond/10),2);case "uuu":return this.num(Math.floor(c.millisecond/100));case "m":return this.num(c.minute);case "mm":return this.num(c.minute,2);case "h":return this.num(0===c.hour%12?12:c.hour%12);case "hh":return this.num(0===c.hour%12?12:c.hour%12,2);case "H":return this.num(c.hour);case "HH":return this.num(c.hour,2);case "Z":return fa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return fa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return fa({format:"techie",
allowZ:this.opts.allowZ});case "ZZZZ":return c.zone.offsetName(c.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return c.zone.offsetName(c.ts,{format:"long",locale:this.loc.locale});case "z":return c.zoneName;case "a":return R?yc[12>c.hour?0:1]:aa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return W?aa({day:"numeric"},"day"):this.num(c.day);case "dd":return W?aa({day:"2-digit"},"day"):this.num(c.day,2);case "c":return this.num(c.weekday);case "ccc":return ta("short",!0);case "cccc":return ta("long",
!0);case "ccccc":return ta("narrow",!0);case "E":return this.num(c.weekday);case "EEE":return ta("short",!1);case "EEEE":return ta("long",!1);case "EEEEE":return ta("narrow",!1);case "L":return W?aa({month:"numeric",day:"numeric"},"month"):this.num(c.month);case "LL":return W?aa({month:"2-digit",day:"numeric"},"month"):this.num(c.month,2);case "LLL":return oa("short",!0);case "LLLL":return oa("long",!0);case "LLLLL":return oa("narrow",!0);case "M":return W?aa({month:"numeric"},"month"):this.num(c.month);
case "MM":return W?aa({month:"2-digit"},"month"):this.num(c.month,2);case "MMM":return oa("short",!1);case "MMMM":return oa("long",!1);case "MMMMM":return oa("narrow",!1);case "y":return W?aa({year:"numeric"},"year"):this.num(c.year);case "yy":return W?aa({year:"2-digit"},"year"):this.num(c.year.toString().slice(-2),2);case "yyyy":return W?aa({year:"numeric"},"year"):this.num(c.year,4);case "yyyyyy":return W?aa({year:"numeric"},"year"):this.num(c.year,6);case "G":return Ra("short");case "GG":return Ra("long");
case "GGGGG":return Ra("narrow");case "kk":return this.num(c.weekYear.toString().slice(-2),2);case "kkkk":return this.num(c.weekYear,4);case "W":return this.num(c.weekNumber);case "WW":return this.num(c.weekNumber,2);case "o":return this.num(c.ordinal);case "ooo":return this.num(c.ordinal,3);case "q":return this.num(c.quarter);case "qq":return this.num(c.quarter,2);case "X":return this.num(Math.floor(c.ts/1E3));case "x":return this.num(c.ts);default:return za(Ha)}})}formatDurationFromString(c,F){const R=
aa=>{switch(aa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};F=jb.parseFormat(F);const W=F.reduce((aa,{literal:fa,val:oa})=>fa?aa:aa.concat(oa),[]);c=c.shiftTo(...W.map(R).filter(aa=>aa));return X(F,(aa=>fa=>{const oa=R(fa);return oa?this.num(aa.get(oa),fa.length):fa})(c))}}class mb{constructor(c,F){this.reason=c;this.explanation=F}toMessage(){return this.explanation?
`${this.reason}: ${this.explanation}`:this.reason}}class zb{get type(){throw new ub;}get name(){throw new ub;}get ianaName(){return this.name}get isUniversal(){throw new ub;}offsetName(c,F){throw new ub;}formatOffset(c,F){throw new ub;}offset(c){throw new ub;}equals(c){throw new ub;}get isValid(){throw new ub;}}let Sb=null;class zc extends zb{static get instance(){null===Sb&&(Sb=new zc);return Sb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(c,
{format:F,locale:R}){return t(c,F,R)}formatOffset(c,F){return u(this.offset(c),F)}offset(c){return-(new Date(c)).getTimezoneOffset()}equals(c){return"system"===c.type}get isValid(){return!0}}let Fb={};const Zc={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let Gb={};class tb extends zb{static create(c){Gb[c]||(Gb[c]=new tb(c));return Gb[c]}static resetCache(){Gb={};Fb={}}static isValidSpecifier(c){return this.isValidZone(c)}static isValidZone(c){if(!c)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:c})).format(),!0}catch(F){return!1}}constructor(c){super();this.zoneName=c;this.valid=tb.isValidZone(c)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(c,{format:F,locale:R}){return t(c,F,R,this.name)}formatOffset(c,F){return u(this.offset(c),F)}offset(c){c=new Date(c);if(isNaN(c))return NaN;var F=this.name;Fb[F]||(Fb[F]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:F,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));F=Fb[F];if(F.formatToParts){F=F.formatToParts(c);var R=[];for(let Ha=0;Ha<F.length;Ha++){const {type:La,value:Oa}=F[Ha],ib=Zc[La];"era"===La?R[ib]=Oa:p(ib)||(R[ib]=parseInt(Oa,10))}F=R}else{{F=F.format(c).replace(/\u200E/g,"");F=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(F);const [,Ha,La,Oa,ib,yb,wb,Nb]=F;F=[Oa,Ha,La,ib,yb,wb,Nb]}}let [W,aa,fa,oa,ta,za,Ra]=F;"BC"===oa&&(W=-Math.abs(W)+1);F=r({year:W,month:aa,day:fa,hour:24===ta?0:ta,minute:za,second:Ra,
millisecond:0});c=+c;R=c%1E3;return(F-(c-(0<=R?R:1E3+R)))/6E4}equals(c){return"iana"===c.type&&c.name===this.name}get isValid(){return this.valid}}let Tb=null;class hb extends zb{static get utcInstance(){null===Tb&&(Tb=new hb(0));return Tb}static instance(c){return 0===c?hb.utcInstance:new hb(c)}static parseSpecifier(c){return c&&(c=c.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new hb(w(c[1],c[2])):null}constructor(c){super();this.fixed=c}get type(){return"fixed"}get name(){return 0===this.fixed?
"UTC":`UTC${u(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${u(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(c,F){return u(this.fixed,F)}get isUniversal(){return!0}offset(){return this.fixed}equals(c){return"fixed"===c.type&&c.fixed===this.fixed}get isValid(){return!0}}class Rc extends zb{constructor(c){super();this.zoneName=c}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let Ac=()=>Date.now(),Bc="system",Cc=null,Dc=null,Ec=null,Fc;class Za{static get now(){return Ac}static set now(c){Ac=c}static set defaultZone(c){Bc=c}static get defaultZone(){return Q(Bc,zc.instance)}static get defaultLocale(){return Cc}static set defaultLocale(c){Cc=c}static get defaultNumberingSystem(){return Dc}static set defaultNumberingSystem(c){Dc=c}static get defaultOutputCalendar(){return Ec}static set defaultOutputCalendar(c){Ec=c}static get throwOnInvalid(){return Fc}static set throwOnInvalid(c){Fc=
c}static resetCaches(){Va.resetCache();tb.resetCache()}}let Zb={},Ib={},Jb={},Kb={},Hb=null;class $c{constructor(c,F,R){this.padTo=R.padTo||0;this.floor=R.floor||!1;const {padTo:W,floor:aa,...fa}=R;if(!F||0<Object.keys(fa).length)F={useGrouping:!1,...R},0<R.padTo&&(F.minimumIntegerDigits=R.padTo),this.inf=L(c,F)}format(c){if(this.inf)return this.inf.format(this.floor?Math.floor(c):c);c=this.floor?Math.floor(c):h(c,3);return v(c,this.padTo)}}class ad{constructor(c,F,R){this.opts=R;if(c.zone.isUniversal){var W=
c.offset/60*-1;W=0<=W?`Etc/GMT+${W}`:`Etc/GMT${W}`;0!==c.offset&&tb.create(W).valid?this.dt=c:(W="UTC",this.dt=R.timeZoneName?c:0===c.offset?c:Ja.fromMillis(c.ts+6E4*c.offset))}else"system"===c.zone.type?this.dt=c:(this.dt=c,W=c.zone.name);c={...this.opts};W&&(c.timeZone=W);this.dtf=Z(F,c)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class bd{constructor(c,F,R){this.opts={style:"long",
...R};!F&&q()&&(this.rtf=I(c,R))}format(c,F){return this.rtf?this.rtf.format(c,F):P(F,c,this.opts.numeric,"long"!==this.opts.style)}formatToParts(c,F){return this.rtf?this.rtf.formatToParts(c,F):[]}}class Va{static fromOpts(c){return Va.create(c.locale,c.numberingSystem,c.outputCalendar,c.defaultToEN)}static create(c,F,R,W=!1){c=c||Za.defaultLocale;var aa;(aa=c)||(W?W="en-US":(Hb||(Hb=(new Intl.DateTimeFormat).resolvedOptions().locale),W=Hb),aa=W);return new Va(aa,F||Za.defaultNumberingSystem,R||
Za.defaultOutputCalendar,c)}static resetCache(){Hb=null;Ib={};Jb={};Kb={}}static fromObject({locale:c,numberingSystem:F,outputCalendar:R}={}){return Va.create(c,F,R)}constructor(c,F,R,W){var aa=c.indexOf("-u-");if(-1===aa)c=[c];else{let za;aa=c.substring(0,aa);try{za=Z(c).resolvedOptions()}catch(La){za=Z(aa).resolvedOptions()}const {numberingSystem:Ra,calendar:Ha}=za;c=[aa,Ra,Ha]}const [fa,oa,ta]=c;this.locale=fa;this.numberingSystem=F||oa||null;this.outputCalendar=R||ta||null;F=this.locale;R=this.numberingSystem;
if((c=this.outputCalendar)||R)F+="-u",c&&(F+=`-ca-${c}`),R&&(F+=`-nu-${R}`);this.intl=F;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=W;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var c=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=c}return this.fastNumbersCached}listingMode(){const c=this.isEnglish(),F=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return c&&F?"en":"intl"}clone(c){return c&&0!==Object.getOwnPropertyNames(c).length?Va.create(c.locale||this.specifiedLocale,c.numberingSystem||this.numberingSystem,c.outputCalendar||this.outputCalendar,c.defaultToEN||!1):this}redefaultToEN(c={}){return this.clone({...c,defaultToEN:!0})}redefaultToSystem(c=
{}){return this.clone({...c,defaultToEN:!1})}months(c,F=!1,R=!0){return y(this,c,R,J,()=>{const W=F?{month:c,day:"numeric"}:{month:c},aa=F?"format":"standalone";this.monthsCache[aa][c]||(this.monthsCache[aa][c]=l(fa=>this.extract(fa,W,"month")));return this.monthsCache[aa][c]})}weekdays(c,F=!1,R=!0){return y(this,c,R,S,()=>{const W=F?{weekday:c,year:"numeric",month:"long",day:"numeric"}:{weekday:c},aa=F?"format":"standalone";this.weekdaysCache[aa][c]||(this.weekdaysCache[aa][c]=A(fa=>this.extract(fa,
W,"weekday")));return this.weekdaysCache[aa][c]})}meridiems(c=!0){return y(this,void 0,c,()=>yc,()=>{if(!this.meridiemCache){const F={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ja.utc(2016,11,13,9),Ja.utc(2016,11,13,19)].map(R=>this.extract(R,F,"dayperiod"))}return this.meridiemCache})}eras(c,F=!0){return y(this,c,F,T,()=>{const R={era:c};this.eraCache[c]||(this.eraCache[c]=[Ja.utc(-40,1,1),Ja.utc(2017,1,1)].map(W=>this.extract(W,R,"era")));return this.eraCache[c]})}extract(c,F,R){return(c=
this.dtFormatter(c,F).formatToParts().find(W=>W.type.toLowerCase()===R))?c.value:null}numberFormatter(c={}){return new $c(this.intl,c.forceSimple||this.fastNumbers,c)}dtFormatter(c,F={}){return new ad(c,this.intl,F)}relFormatter(c={}){return new bd(this.intl,this.isEnglish(),c)}listFormatter(c={}){return O(this.intl,c)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(c){return this.locale===
c.locale&&this.numberingSystem===c.numberingSystem&&this.outputCalendar===c.outputCalendar}}const Gc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ub=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Hc=RegExp(`${Ub.source}${`(?:${Gc.source}?(?:\\[(${xc.source})\\])?)?`}`),Vb=RegExp(`(?:T${Hc.source})?`),cd=ea("weekYear","weekNumber","weekDay"),dd=ea("year","ordinal"),Ic=RegExp(`${Ub.source} ?(?:${Gc.source}|(${xc.source}))?`),ed=RegExp(`(?: ${Ic.source})?`),fd=RegExp(`^T?${Ub.source}$`),gd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Sc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},hd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
kd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,ld=K(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vb),md=K(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vb),nd=K(/(\d{4})-?(\d{3})/,Vb),od=K(Hc),Jc=U(function(c,F){return[{year:na(c,F),month:na(c,F+1,1),day:na(c,F+2,1)},null,F+3]},ha,la,pa),pd=U(cd,ha,la,pa),qd=U(dd,ha,la,pa),rd=U(ha,la,pa),sd=U(ha),td=K(/(\d{4})-(\d\d)-(\d\d)/,ed),ud=K(Ic),vd=U(ha,la,pa),Kc={weeks:{days:7,hours:168,minutes:10080,
seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},
...Kc},xd={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Kc},xb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Tc=xb.slice(0).reverse();class Na{constructor(c){const F=
"longterm"===c.conversionAccuracy||!1;this.values=c.values;this.loc=c.loc||Va.create();this.conversionAccuracy=F?"longterm":"casual";this.invalid=c.invalid||null;this.matrix=F?xd:wd;this.isLuxonDuration=!0}static fromMillis(c,F){return Na.fromObject({milliseconds:c},F)}static fromObject(c,F={}){if(null==c||"object"!==typeof c)throw new kb(`Duration.fromObject: argument expected to be an object, got ${null===c?"null":typeof c}`);return new Na({values:x(c,Na.normalizeUnit),loc:Va.fromObject(F),conversionAccuracy:F.conversionAccuracy})}static fromDurationLike(c){if(m(c))return Na.fromMillis(c);
if(Na.isDuration(c))return c;if("object"===typeof c)return Na.fromObject(c);throw new kb(`Unknown duration argument ${c} of type ${typeof c}`);}static fromISO(c,F){const [R]=ba(c,[gd,qa]);return R?Na.fromObject(R,F):Na.invalid("unparsable",`the input "${c}" can't be parsed as ISO 8601`)}static fromISOTime(c,F){const [R]=ba(c,[fd,sd]);return R?Na.fromObject(R,F):Na.invalid("unparsable",`the input "${c}" can't be parsed as ISO 8601`)}static invalid(c,F=null){if(!c)throw new kb("need to specify a reason the Duration is invalid");
c=c instanceof mb?c:new mb(c,F);if(Za.throwOnInvalid)throw new Eb(c);return new Na({invalid:c})}static normalizeUnit(c){const F={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[c?c.toLowerCase():c];if(!F)throw new bc(c);return F}static isDuration(c){return c&&
c.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(c,F={}){F={...F,floor:!1!==F.round&&!1!==F.floor};return this.isValid?jb.create(this.loc,F).formatDurationFromString(this,c):"Invalid Duration"}toHuman(c={}){const F=xb.map(R=>{const W=this.values[R];return p(W)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...c,unit:R.slice(0,-1)}).format(W)}).filter(R=>R);return this.loc.listFormatter({type:"conjunction",
style:c.listStyle||"narrow",...c}).format(F)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let c="P";0!==this.years&&(c+=this.years+"Y");if(0!==this.months||0!==this.quarters)c+=this.months+3*this.quarters+"M";0!==this.weeks&&(c+=this.weeks+"W");0!==this.days&&(c+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)c+="T";0!==this.hours&&(c+=this.hours+"H");0!==this.minutes&&(c+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)c+=h(this.seconds+this.milliseconds/1E3,3)+"S";"P"===c&&(c+="T0S");return c}toISOTime(c={}){if(!this.isValid)return null;var F=this.toMillis();if(0>F||864E5<=F)return null;c={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...c};F=this.shiftTo("hours","minutes","seconds","milliseconds");let R="basic"===c.format?"hhmm":"hh:mm";c.suppressSeconds&&0===F.seconds&&0===F.milliseconds||(R+="basic"===c.format?"ss":":ss",c.suppressMilliseconds&&0===F.milliseconds||
(R+=".SSS"));F=F.toFormat(R);c.includePrefix&&(F="T"+F);return F}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(c){if(!this.isValid)return this;c=Na.fromDurationLike(c);const F={};for(const R of xb)if(H(c.values,R)||H(this.values,R))F[R]=c.get(R)+this.get(R);return ka(this,{values:F},!0)}minus(c){if(!this.isValid)return this;c=Na.fromDurationLike(c);return this.plus(c.negate())}mapUnits(c){if(!this.isValid)return this;
const F={};for(const R of Object.keys(this.values))F[R]=C(c(this.values[R],R));return ka(this,{values:F},!0)}get(c){return this[Na.normalizeUnit(c)]}set(c){if(!this.isValid)return this;c={...this.values,...x(c,Na.normalizeUnit)};return ka(this,{values:c})}reconfigure({locale:c,numberingSystem:F,conversionAccuracy:R}={}){c={loc:this.loc.clone({locale:c,numberingSystem:F})};R&&(c.conversionAccuracy=R);return ka(this,c)}as(c){return this.isValid?this.shiftTo(c).get(c):NaN}normalize(){if(!this.isValid)return this;
const c=this.toObject();va(this.matrix,c);return ka(this,{values:c},!0)}shiftTo(...c){if(!this.isValid||0===c.length)return this;c=c.map(fa=>Na.normalizeUnit(fa));const F={},R={},W=this.toObject();let aa;for(const fa of xb)if(0<=c.indexOf(fa)){aa=fa;let oa=0;for(const za in R)oa+=this.matrix[za][fa]*R[za],R[za]=0;m(W[fa])&&(oa+=W[fa]);const ta=Math.trunc(oa);F[fa]=ta;R[fa]=(1E3*oa-1E3*ta)/1E3;for(const za in W)xb.indexOf(za)>xb.indexOf(fa)&&ra(this.matrix,W,za,F,fa)}else m(W[fa])&&(R[fa]=W[fa]);for(const fa in R)0!==
R[fa]&&(F[aa]+=fa===aa?R[fa]:R[fa]/this.matrix[aa][fa]);return ka(this,{values:F},!0).normalize()}negate(){if(!this.isValid)return this;const c={};for(const F of Object.keys(this.values))c[F]=0===this.values[F]?0:-this.values[F];return ka(this,{values:c},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(c){if(!this.isValid||!c.isValid||!this.loc.equals(c.loc))return!1;
for(const W of xb){var F=this.values[W];var R=c.values[W];F=void 0===F||0===F?void 0===R||0===R:F===R;if(!F)return!1}return!0}}class Wa{constructor(c){this.s=c.start;this.e=c.end;this.invalid=c.invalid||null;this.isLuxonInterval=!0}static invalid(c,F=null){if(!c)throw new kb("need to specify a reason the Interval is invalid");c=c instanceof mb?c:new mb(c,F);if(Za.throwOnInvalid)throw new Db(c);return new Wa({invalid:c})}static fromDateTimes(c,F){c=db(c);F=db(F);var R=c&&c.isValid?F&&F.isValid?F<c?
Wa.invalid("end before start",`The end of an interval must be after its start, but you had start=${c.toISO()} and end=${F.toISO()}`):null:Wa.invalid("missing or invalid end"):Wa.invalid("missing or invalid start");return null==R?new Wa({start:c,end:F}):R}static after(c,F){F=Na.fromDurationLike(F);c=db(c);return Wa.fromDateTimes(c,c.plus(F))}static before(c,F){F=Na.fromDurationLike(F);c=db(c);return Wa.fromDateTimes(c.minus(F),c)}static fromISO(c,F){const [R,W]=(c||"").split("/",2);if(R&&W){let oa;
try{var aa=Ja.fromISO(R,F);oa=aa.isValid}catch(za){oa=!1}let ta;try{var fa=Ja.fromISO(W,F);ta=fa.isValid}catch(za){ta=!1}if(oa&&ta)return Wa.fromDateTimes(aa,fa);if(oa){if(fa=Na.fromISO(W,F),fa.isValid)return Wa.after(aa,fa)}else if(ta&&(aa=Na.fromISO(R,F),aa.isValid))return Wa.before(fa,aa)}return Wa.invalid("unparsable",`the input "${c}" can't be parsed as ISO 8601`)}static isInterval(c){return c&&c.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:
null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(c="milliseconds"){return this.isValid?this.toDuration(...[c]).get(c):NaN}count(c="milliseconds"){if(!this.isValid)return NaN;const F=this.start.startOf(c),R=this.end.startOf(c);return Math.floor(R.diff(F,c).get(c))+1}hasSame(c){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,c):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(c){return this.isValid?this.s>c:!1}isBefore(c){return this.isValid?this.e<=c:!1}contains(c){return this.isValid?this.s<=c&&this.e>c:!1}set({start:c,end:F}={}){return this.isValid?Wa.fromDateTimes(c||this.s,F||this.e):this}splitAt(...c){if(!this.isValid)return[];c=c.map(db).filter(fa=>this.contains(fa)).sort();const F=[];let {s:R}=this,W=0;for(;R<this.e;){var aa=c[W]||this.e;aa=+aa>+this.e?this.e:aa;F.push(Wa.fromDateTimes(R,aa));R=aa;W+=1}return F}splitBy(c){c=Na.fromDurationLike(c);
if(!this.isValid||!c.isValid||0===c.as("milliseconds"))return[];let {s:F}=this,R=1;const W=[];for(;F<this.e;){var aa=this.start.plus(c.mapUnits(fa=>fa*R));aa=+aa>+this.e?this.e:aa;W.push(Wa.fromDateTimes(F,aa));F=aa;R+=1}return W}divideEqually(c){return this.isValid?this.splitBy(this.length()/c).slice(0,c):[]}overlaps(c){return this.e>c.s&&this.s<c.e}abutsStart(c){return this.isValid?+this.e===+c.s:!1}abutsEnd(c){return this.isValid?+c.e===+this.s:!1}engulfs(c){return this.isValid?this.s<=c.s&&this.e>=
c.e:!1}equals(c){return this.isValid&&c.isValid?this.s.equals(c.s)&&this.e.equals(c.e):!1}intersection(c){if(!this.isValid)return this;const F=this.s>c.s?this.s:c.s;c=this.e<c.e?this.e:c.e;return F>=c?null:Wa.fromDateTimes(F,c)}union(c){return this.isValid?Wa.fromDateTimes(this.s<c.s?this.s:c.s,this.e>c.e?this.e:c.e):this}static merge(c){const [F,R]=c.sort((W,aa)=>W.s-aa.s).reduce(([W,aa],fa)=>aa?aa.overlaps(fa)||aa.abutsStart(fa)?[W,aa.union(fa)]:[W.concat([aa]),fa]:[W,fa],[[],null]);R&&F.push(R);
return F}static xor(c){let F=null,R=0;const W=[];c=c.map(aa=>[{time:aa.s,type:"s"},{time:aa.e,type:"e"}]);c=Array.prototype.concat(...c).sort((aa,fa)=>aa.time-fa.time);for(const aa of c)R+="s"===aa.type?1:-1,1===R?F=aa.time:(F&&+F!==+aa.time&&W.push(Wa.fromDateTimes(F,aa.time)),F=null);return Wa.merge(W)}difference(...c){return Wa.xor([this].concat(c)).map(F=>this.intersection(F)).filter(F=>F&&!F.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(c){return this.isValid?
`${this.s.toISO(c)}/${this.e.toISO(c)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(c){return this.isValid?`${this.s.toISOTime(c)}/${this.e.toISOTime(c)}`:"Invalid Interval"}toFormat(c,{separator:F=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(c)}${F}${this.e.toFormat(c)}`:"Invalid Interval"}toDuration(c,F){return this.isValid?this.e.diff(this.s,c,F):Na.invalid(this.invalidReason)}mapEndpoints(c){return Wa.fromDateTimes(c(this.s),
c(this.e))}}class Bb{static hasDST(c=Za.defaultZone){const F=Ja.now().setZone(c).set({month:12});return!c.isUniversal&&F.offset!==F.set({month:6}).offset}static isValidIANAZone(c){return tb.isValidZone(c)}static normalizeZone(c){return Q(c,Za.defaultZone)}static months(c="long",{locale:F=null,numberingSystem:R=null,locObj:W=null,outputCalendar:aa="gregory"}={}){return(W||Va.create(F,R,aa)).months(c)}static monthsFormat(c="long",{locale:F=null,numberingSystem:R=null,locObj:W=null,outputCalendar:aa=
"gregory"}={}){return(W||Va.create(F,R,aa)).months(c,!0)}static weekdays(c="long",{locale:F=null,numberingSystem:R=null,locObj:W=null}={}){return(W||Va.create(F,R,null)).weekdays(c)}static weekdaysFormat(c="long",{locale:F=null,numberingSystem:R=null,locObj:W=null}={}){return(W||Va.create(F,R,null)).weekdays(c,!0)}static meridiems({locale:c=null}={}){return Va.create(c).meridiems()}static eras(c="short",{locale:F=null}={}){return Va.create(F,null,"gregory").eras(c)}static features(){return{relative:q()}}}
const Lb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},$b={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Uc=Lb.hanidec.replace(/[\[|\]]/g,"").split(""),ac=`[ ${String.fromCharCode(160)}]`,Mb=new RegExp(ac,"g"),Vc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Ob=null;const Qb=[0,31,59,90,120,151,181,212,243,273,304,334],Pb=[0,31,60,91,121,152,182,213,244,274,305,335],dc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},cc="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class Ja{constructor(c){const F=c.zone||Za.defaultZone;let R=c.invalid||(Number.isNaN(c.ts)?new mb("invalid input"):null)||(F.isValid?null:fb(F));this.ts=p(c.ts)?Za.now():c.ts;let W=null;var aa=null;R||(c.old&&c.old.ts===this.ts&&c.old.zone.equals(F)?
[W,aa]=[c.old.c,c.old.o]:(aa=F.offset(this.ts),W=qb(this.ts,aa),W=(R=Number.isNaN(W.year)?new mb("invalid input"):null)?null:W,aa=R?null:aa));this._zone=F;this.loc=c.loc||Va.create();this.invalid=R;this.weekData=null;this.c=W;this.o=aa;this.isLuxonDateTime=!0}static now(){return new Ja({})}static local(){const [c,F]=$a(arguments),[R,W,aa,fa,oa,ta,za]=F;return Pa({year:R,month:W,day:aa,hour:fa,minute:oa,second:ta,millisecond:za},c)}static utc(){const [c,F]=$a(arguments),[R,W,aa,fa,oa,ta,za]=F;c.zone=
hb.utcInstance;return Pa({year:R,month:W,day:aa,hour:fa,minute:oa,second:ta,millisecond:za},c)}static fromJSDate(c,F={}){c="[object Date]"===Object.prototype.toString.call(c)?c.valueOf():NaN;if(Number.isNaN(c))return Ja.invalid("invalid input");const R=Q(F.zone,Za.defaultZone);return R.isValid?new Ja({ts:c,zone:R,loc:Va.fromObject(F)}):Ja.invalid(fb(R))}static fromMillis(c,F={}){if(m(c))return-864E13>c||864E13<c?Ja.invalid("Timestamp out of range"):new Ja({ts:c,zone:Q(F.zone,Za.defaultZone),loc:Va.fromObject(F)});
throw new kb(`fromMillis requires a numerical input, but received a ${typeof c} with value ${c}`);}static fromSeconds(c,F={}){if(m(c))return new Ja({ts:1E3*c,zone:Q(F.zone,Za.defaultZone),loc:Va.fromObject(F)});throw new kb("fromSeconds requires a numerical input");}static fromObject(c,F={}){c=c||{};var R=Q(F.zone,Za.defaultZone);if(!R.isValid)return Ja.invalid(fb(R));var W=Za.now();const aa=p(F.specificOffset)?R.offset(W):F.specificOffset,fa=x(c,Ma);var oa=!p(fa.ordinal),ta=!p(fa.year),za=!p(fa.month)||
!p(fa.day);ta=ta||za;var Ra=fa.weekYear||fa.weekNumber;F=Va.fromObject(F);if((ta||oa)&&Ra)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(za&&oa)throw new Ab("Can't mix ordinal dates with month/day");za=Ra||fa.weekday&&!ta;let Ha=qb(W,aa);za?(W=Ad,Ra=yd,Ha=Ua(Ha)):oa?(W=Bd,Ra=zd,Ha=Ia(Ha)):(W=cc,Ra=dc);let La=!1;for(var Oa of W)p(fa[Oa])?fa[Oa]=La?Ra[Oa]:Ha[Oa]:La=!0;za?(Oa=k(fa.weekYear),W=G(fa.weekNumber,1,B(fa.weekYear)),Ra=G(fa.weekday,1,7),Oa=Oa?W?Ra?!1:
Aa("weekday",fa.weekday):Aa("week",fa.week):Aa("weekYear",fa.weekYear)):oa?(Oa=k(fa.year),W=G(fa.ordinal,1,d(fa.year)?366:365),Oa=Oa?W?!1:Aa("ordinal",fa.ordinal):Aa("year",fa.year)):Oa=ab(fa);if(Oa=Oa||lb(fa))return Ja.invalid(Oa);oa=za?Ta(fa):oa?cb(fa):fa;const [ib,yb]=rb(oa,aa,R);R=new Ja({ts:ib,zone:R,o:yb,loc:F});return fa.weekday&&ta&&c.weekday!==R.weekday?Ja.invalid("mismatched weekday",`you can't specify both a weekday of ${fa.weekday} and a date of ${R.toISO()}`):R}static fromISO(c,F={}){const [R,
W]=ba(c,[ld,Jc],[md,pd],[nd,qd],[od,rd]);return Y(R,W,F,"ISO 8601",c)}static fromRFC2822(c,F={}){const [R,W]=ba(c.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[hd,V]);return Y(R,W,F,"RFC 2822",c)}static fromHTTP(c,F={}){const [R,W]=ba(c,[id,ca],[jd,ca],[kd,ia]);return Y(R,W,F,"HTTP",F)}static fromFormat(c,F,R={}){if(p(c)||p(F))throw new kb("fromFormat requires an input string and a format");const {locale:W=null,numberingSystem:aa=null}=R;var fa=Va.fromOpts({locale:W,numberingSystem:aa,
defaultToEN:!0});{const {result:Ha,zone:La,specificOffset:Oa,invalidReason:ib}=xa(fa,c,F);fa=[Ha,La,Oa,ib]}const [oa,ta,za,Ra]=fa;return Ra?Ja.invalid(Ra):Y(oa,ta,R,`format ${F}`,c,za)}static fromString(c,F,R={}){return Ja.fromFormat(c,F,R)}static fromSQL(c,F={}){const [R,W]=ba(c,[td,Jc],[ud,vd]);return Y(R,W,F,"SQL",c)}static invalid(c,F=null){if(!c)throw new kb("need to specify a reason the DateTime is invalid");c=c instanceof mb?c:new mb(c,F);if(Za.throwOnInvalid)throw new Cb(c);return new Ja({invalid:c})}static isDateTime(c){return c&&
c.isLuxonDateTime||!1}get(c){return this[c]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ya(this).weekYear:NaN}get weekNumber(){return this.isValid?Ya(this).weekNumber:NaN}get weekday(){return this.isValid?
Ya(this).weekday:NaN}get ordinal(){return this.isValid?Ia(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return d(this.year)}get daysInMonth(){return e(this.year,this.month)}get daysInYear(){return this.isValid?
d(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?B(this.weekYear):NaN}resolvedLocaleOptions(c={}){const {locale:F,numberingSystem:R,calendar:W}=jb.create(this.loc.clone(c),c).resolvedOptions(this);return{locale:F,numberingSystem:R,outputCalendar:W}}toUTC(c=0,F={}){return this.setZone(hb.instance(c),F)}toLocal(){return this.setZone(Za.defaultZone)}setZone(c,{keepLocalTime:F=!1,keepCalendarTime:R=!1}={}){c=Q(c,Za.defaultZone);if(c.equals(this.zone))return this;if(c.isValid){let W=
this.ts;if(F||R)F=c.offset(this.ts),R=this.toObject(),[W]=rb(R,F,c);return gb(this,{ts:W,zone:c})}return Ja.invalid(fb(c))}reconfigure({locale:c,numberingSystem:F,outputCalendar:R}={}){c=this.loc.clone({locale:c,numberingSystem:F,outputCalendar:R});return gb(this,{loc:c})}setLocale(c){return this.reconfigure({locale:c})}set(c){if(!this.isValid)return this;c=x(c,Ma);var F=!p(c.weekYear)||!p(c.weekNumber)||!p(c.weekday);const R=!p(c.ordinal),W=!p(c.year),aa=!p(c.month)||!p(c.day),fa=c.weekYear||c.weekNumber;
if((W||aa||R)&&fa)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(aa&&R)throw new Ab("Can't mix ordinal dates with month/day");F?F=Ta({...Ua(this.c),...c}):p(c.ordinal)?(F={...this.toObject(),...c},p(c.day)&&(F.day=Math.min(e(F.year,F.month),F.day))):F=cb({...Ia(this.c),...c});const [oa,ta]=rb(F,this.o,this.zone);return gb(this,{ts:oa,o:ta})}plus(c){if(!this.isValid)return this;c=Na.fromDurationLike(c);return gb(this,N(this,c))}minus(c){if(!this.isValid)return this;
c=Na.fromDurationLike(c).negate();return gb(this,N(this,c))}startOf(c){if(!this.isValid)return this;const F={};c=Na.normalizeUnit(c);switch(c){case "years":F.month=1;case "quarters":case "months":F.day=1;case "weeks":case "days":F.hour=0;case "hours":F.minute=0;case "minutes":F.second=0;case "seconds":F.millisecond=0}"weeks"===c&&(F.weekday=1);"quarters"===c&&(F.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(F)}endOf(c){return this.isValid?this.plus({[c]:1}).startOf(c).minus(1):this}toFormat(c,
F={}){return this.isValid?jb.create(this.loc.redefaultToEN(F)).formatDateTimeFromString(this,c):"Invalid DateTime"}toLocaleString(c=Rb,F={}){return this.isValid?jb.create(this.loc.clone(F),c).formatDateTime(this):"Invalid DateTime"}toLocaleParts(c={}){return this.isValid?jb.create(this.loc.clone(c),c).formatDateTimeParts(this):[]}toISO({format:c="extended",suppressSeconds:F=!1,suppressMilliseconds:R=!1,includeOffset:W=!0,extendedZone:aa=!1}={}){if(!this.isValid)return null;c="extended"===c;let fa=
ua(this,c);return fa=fa+"T"+wa(this,c,F,R,W,aa)}toISODate({format:c="extended"}={}){return this.isValid?ua(this,"extended"===c):null}toISOWeekDate(){return ma(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:c=!1,suppressSeconds:F=!1,includeOffset:R=!0,includePrefix:W=!1,extendedZone:aa=!1,format:fa="extended"}={}){return this.isValid?(W?"T":"")+wa(this,"extended"===fa,F,c,R,aa):null}toRFC2822(){return ma(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ma(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
ua(this,!0):null}toSQLTime({includeOffset:c=!0,includeZone:F=!1,includeOffsetSpace:R=!0}={}){let W="HH:mm:ss.SSS";if(F||c)R&&(W+=" "),F?W+="z":c&&(W+="ZZ");return ma(this,W,!0)}toSQL(c={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(c)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):
NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(c={}){if(!this.isValid)return{};const F={...this.c};c.includeConfig&&(F.outputCalendar=this.outputCalendar,F.numberingSystem=this.loc.numberingSystem,F.locale=this.loc.locale);return F}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(c,F="milliseconds",R={}){if(!this.isValid||!c.isValid)return Na.invalid("created by diffing an invalid DateTime");R={locale:this.locale,numberingSystem:this.numberingSystem,...R};const W=
(Array.isArray(F)?F:[F]).map(Na.normalizeUnit);F=c.valueOf()>this.valueOf();c=Ga(F?this:c,F?c:this,W,R);return F?c.negate():c}diffNow(c="milliseconds",F={}){return this.diff(Ja.now(),c,F)}until(c){return this.isValid?Wa.fromDateTimes(this,c):this}hasSame(c,F){if(!this.isValid)return!1;const R=c.valueOf();c=this.setZone(c.zone,{keepLocalTime:!0});return c.startOf(F)<=R&&R<=c.endOf(F)}equals(c){return this.isValid&&c.isValid&&this.valueOf()===c.valueOf()&&this.zone.equals(c.zone)&&this.loc.equals(c.loc)}toRelative(c=
{}){if(!this.isValid)return null;const F=c.base||Ja.fromObject({},{zone:this.zone}),R=c.padding?this<F?-c.padding:c.padding:0;let W="years months days hours minutes seconds".split(" "),aa=c.unit;Array.isArray(c.unit)&&(W=c.unit,aa=void 0);return bb(F,this.plus(R),{...c,numeric:"always",units:W,unit:aa})}toRelativeCalendar(c={}){return this.isValid?bb(c.base||Ja.fromObject({},{zone:this.zone}),this,{...c,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...c){if(!c.every(Ja.isDateTime))throw new kb("min requires all arguments be DateTimes");
return E(c,F=>F.valueOf(),Math.min)}static max(...c){if(!c.every(Ja.isDateTime))throw new kb("max requires all arguments be DateTimes");return E(c,F=>F.valueOf(),Math.max)}static fromFormatExplain(c,F,R={}){const {locale:W=null,numberingSystem:aa=null}=R;R=Va.fromOpts({locale:W,numberingSystem:aa,defaultToEN:!0});return xa(R,c,F)}static fromStringExplain(c,F,R={}){return Ja.fromFormatExplain(c,F,R)}static get DATE_SHORT(){return Rb}static get DATE_MED(){return ec}static get DATE_MED_WITH_WEEKDAY(){return Wc}static get DATE_FULL(){return fc}static get DATE_HUGE(){return gc}static get TIME_SIMPLE(){return hc}static get TIME_WITH_SECONDS(){return ic}static get TIME_WITH_SHORT_OFFSET(){return jc}static get TIME_WITH_LONG_OFFSET(){return kc}static get TIME_24_SIMPLE(){return lc}static get TIME_24_WITH_SECONDS(){return mc}static get TIME_24_WITH_SHORT_OFFSET(){return nc}static get TIME_24_WITH_LONG_OFFSET(){return oc}static get DATETIME_SHORT(){return pc}static get DATETIME_SHORT_WITH_SECONDS(){return qc}static get DATETIME_MED(){return rc}static get DATETIME_MED_WITH_SECONDS(){return sc}static get DATETIME_MED_WITH_WEEKDAY(){return Xc}static get DATETIME_FULL(){return tc}static get DATETIME_FULL_WITH_SECONDS(){return uc}static get DATETIME_HUGE(){return vc}static get DATETIME_HUGE_WITH_SECONDS(){return wc}}
g.DateTime=Ja;g.Info=Bb;g.Interval=Wa})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(g,p,m){function k(b){b||(b=m.getLocale());let a=b in G;if(!a){const r=b.split("-");1<r.length&&r[0]in G&&(b=r[0],a=!0);a||(b="en")}const [h,d,e="#,##0.###"]=G[b];return{decimal:h,group:d,pattern:e}}function q(b,a,h){h=h||{};!0===h.places&&(h.places=0);Infinity===h.places&&(h.places=6);a=a.split(".");var d="string"===typeof h.places&&h.places.indexOf(","),e=h.places;d?e=h.places.substring(d+
1):0<=e||(e=(a[1]||[]).length);0>h.round||(b=Number(b.toFixed(Number(e))));b=String(Math.abs(b)).split(".");const r=b[1]||"";a[1]||h.places?(d&&(h.places=h.places.substring(0,d)),d=void 0!==h.places?h.places:a[1]&&a[1].lastIndexOf("0")+1,d>r.length&&(b[1]=r.padEnd(Number(d),"0")),e<r.length&&(b[1]=r.substr(0,Number(e)))):b[1]&&b.pop();e=a[0].replace(",","");d=e.indexOf("0");-1!==d&&(d=e.length-d,d>b[0].length&&(b[0]=b[0].padStart(d,"0")),e.includes("#")||(b[0]=b[0].substr(b[0].length-d)));e=a[0].lastIndexOf(",");
let B,f;-1!==e&&(B=a[0].length-e-1,a=a[0].substr(0,e),e=a.lastIndexOf(","),-1!==e&&(f=a.length-e-1));a=[];for(e=b[0];e;)d=e.length-B,a.push(0<d?e.substr(d):e),e=0<d?e.slice(0,d):"",f&&(B=f,f=void 0);b[0]=a.reverse().join(h.group||",");return b.join(h.decimal||".")}function E(b){b=b||{};var a=k(b.locale);const h=b.pattern||a.pattern,d=a.group,e=a.decimal;let r=1;if(h.includes("%"))r/=100;else if(h.includes("\u2030"))r/=1E3;else if(h.includes("\u00a4"))throw Error("currency notation not supported");
a=h.split(";");1===a.length&&a.push("-"+a[0]);return{regexp:n(a,B=>{B="(?:"+p.escapeRegExpString(B,".")+")";return B.replace(v,f=>{const t={signed:!1,separator:b.strict?d:[d,""],fractional:b.fractional,decimal:e,exponent:!1};f=f.split(".");let w=b.places;1===f.length&&1!==r&&(f[1]="###");1===f.length||0===w?t.fractional=!1:(void 0===w&&(w=b.pattern?f[1].lastIndexOf("0")+1:Infinity),w&&null==b.fractional&&(t.fractional=!0),!b.places&&w<f[1].length&&(w+=","+f[1].length),t.places=w);f=f[0].split(",");
1<f.length&&(t.groupSize=f.pop().length,1<f.length&&(t.groupSize2=f.pop().length));return"("+z(t)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:e,factor:r}}function z(b){b=b||{};"places"in b||(b.places=Infinity);"string"!==typeof b.decimal&&(b.decimal=".");"fractional"in b&&!/^0/.test(String(b.places))||(b.fractional=[!0,!1]);"exponent"in b||(b.exponent=[!0,!1]);"eSigned"in b||(b.eSigned=[!0,!1]);var a=H(b);const h=n(b.fractional,e=>{let r="";e&&0!==b.places&&(r="\\"+b.decimal,r=Infinity===
b.places?"(?:"+r+"\\d+)?":r+("\\d{"+b.places+"}"));return r},!0),d=n(b.exponent,e=>e?"([eE]"+H({signed:b.eSigned})+")":"");a+=h;h&&(a="(?:(?:"+a+")|(?:"+h+"))");return a+d}function H(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";const a=n(b.signed,d=>d?"[-+]":"",!0),h=n(b.separator,d=>{if(!d)return"(?:\\d+)";d=p.escapeRegExpString(d);" "===d?d="\\s":"\u00a0"===d&&(d="\\s\\xa0");const e=b.groupSize,r=b.groupSize2;return r?(d="(?:0|[1-9]\\d{0,"+
(r-1)+"}(?:["+d+"]\\d{"+r+"})*["+d+"]\\d{"+e+"})",0<e-r?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+d+"]\\d{"+e+"})*)"},!0);return a+h}const G={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},v=/[#0,]*[#0](?:\.0*#*)?/,n=(b,a,h)=>{if(!(b instanceof Array))return a(b);const d=[];for(let e=0;e<b.length;e++)d.push(a(b[e]));
b=d.join("|");return"("+(h?"?:":"")+b+")"};g._parseInfo=E;g.format=function(b,a){a={...a};var h=k(a.locale);a.customs=h;var d=a.pattern||h.pattern;if(isNaN(b)||Infinity===Math.abs(b))return null;{a=a||{};h=a.customs.group;const r=a.customs.decimal;d=d.split(";");var e=d[0];d=d[0>b?1:0]||"-"+e;if(d.includes("%"))b*=100;else if(d.includes("\u2030"))b*=1E3;else{if(d.includes("\u00a4"))throw Error("currency notation not supported");if(d.includes("E"))throw Error("exponential notation not supported");
}const B=v;e=e.match(B);if(!e)throw Error("unable to find a number expression in pattern: "+d);!1===a.fractional&&(a.places=0);b=d.replace(B,q(b,e[0],{decimal:r,group:h,places:a.places,round:a.round}))}return b};g.getCustoms=k;g.parse=function(b,a){a=E(a);b=(new RegExp("^"+a.regexp+"$")).exec(b);if(!b)return NaN;let h=b[1];if(!b[1]){if(!b[2])return NaN;h=b[2];a.factor*=-1}h=h.replace(new RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return Number(h)*a.factor};g.regexp=function(b){return E(b).regexp};
Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../geometry/Extent","../../../layers/support/Field"],function(g,p,m){function k(q){return q instanceof Date}g.FeatureServiceDatabaseType=void 0;(function(q){q[q.Standardised=0]="Standardised";q[q.StandardisedNoInterval=1]="StandardisedNoInterval";q[q.SqlServer=2]="SqlServer";q[q.Oracle=3]="Oracle";q[q.Postgres=4]="Postgres";q[q.PGDB=
5]="PGDB";q[q.FILEGDB=6]="FILEGDB";q[q.NotEvaluated=7]="NotEvaluated"})(g.FeatureServiceDatabaseType||(g.FeatureServiceDatabaseType={}));g.IdState=void 0;(function(q){q[q.InFeatureSet=0]="InFeatureSet";q[q.NotInFeatureSet=1]="NotInFeatureSet";q[q.Unknown=2]="Unknown"})(g.IdState||(g.IdState={}));g.callback=function(q,E){return function(){try{q.apply(null,arguments)}catch(z){E.reject(z)}}};g.cloneAttributes=function(q){const E={};for(const z in q)E[z]=q[z];return E};g.cloneField=function(q){return m.fromJSON(q.toJSON())};
g.convertLinearUnitsToCode=function(q){if(void 0===q)return null;if("number"===typeof q||"number"===typeof q)return q;switch(q.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};g.convertSquareUnitsToCode=function(q){if(void 0===q)return null;if("number"===typeof q)return q;switch(q.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
g.defaultMaxRecords=1E3;g.equalityTest=function(q,E){return q===E?!0:k(q)&&k(E)?q.getTime()===E.getTime():!1};g.errback=function(q){return function(E){q.reject(E)}};g.esriFieldToJson=function(q){return q.toJSON?q.toJSON():q};g.extractServiceUrl=function(q){if(void 0===q)return"";q=q.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");q=q.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return q=q.split("?")[0]};g.isArray=function(q){return q instanceof Array};g.isBoolean=function(q){return"boolean"===
typeof q};g.isDate=k;g.isNumber=function(q){return"number"===typeof q};g.isString=function(q){return"string"===typeof q||q instanceof String};g.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};g.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};g.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",
polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};g.sameGeomType=function(q,E){return q===E||"point"===q&&"esriGeometryPoint"===E||"polyline"===q&&"esriGeometryPolyline"===E||"polygon"===q&&"esriGeometryPolygon"===
E||"extent"===q&&"esriGeometryEnvelope"===E||"multipoint"===q&&"esriGeometryMultipoint"===E||"point"===E&&"esriGeometryPoint"===q||"polyline"===E&&"esriGeometryPolyline"===q||"polygon"===E&&"esriGeometryPolygon"===q||"extent"===E&&"esriGeometryEnvelope"===q||"multipoint"===E&&"esriGeometryMultipoint"===q?!0:!1};g.shapeExtent=function(q){if(null===q)return null;switch(q.type){case "polygon":case "multipoint":case "polyline":return q.extent;case "point":return new p({xmin:q.x,ymin:q.y,xmax:q.x,ymax:q.y,
spatialReference:q.spatialReference});case "extent":return q}return null};g.stableStringify=function(q,E){E||(E={});"function"===typeof E&&(E={cmp:E});const z="boolean"===typeof E.cycles?E.cycles:!1,H=E.cmp&&function(v){return function(n){return function(b,a){return v({key:b,value:n[b]},{key:a,value:n[a]})}}}(E.cmp),G=[];return function b(n){n&&n.toJSON&&"function"===typeof n.toJSON&&(n=n.toJSON());if(void 0!==n){if("number"===typeof n)return isFinite(n)?""+n:"null";if("object"!==typeof n)return JSON.stringify(n);
var a;if(Array.isArray(n)){var h="[";for(a=0;a<n.length;a++)a&&(h+=","),h+=b(n[a])||"null";return h+"]"}if(null===n)return"null";if(G.includes(n)){if(z)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var d=G.push(n)-1,e=Object.keys(n).sort(H&&H(n));h="";for(a=0;a<e.length;a++){const r=e[a],B=b(n[r]);B&&(h&&(h+=","),h+=JSON.stringify(r)+":"+B)}G.splice(d,1);return"{"+h+"}"}}(q)};g.toEsriGeometryType=function(q){switch(q){case "point":return"esriGeometryPoint";
case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(g,
p,m,k,q,E,z){function H(f){return`<ul class="esri-widget__list">${f.map(t=>`<li>${"string"===typeof t?z.applyTextFormattingHTML(z.htmlEntities(t)):t}</li>`).join("")}</ul>`}function G(f){return`<table class="esri-widget__table">${f.keys().map(t=>{var w=f.field(t);w="string"===typeof w?z.applyTextFormattingHTML(z.htmlEntities(w)):w;return`<tr><th>${t}</th><td>${w}</td></tr>`}).join("")}</table>`}function v({aggregatedFeatures:f,arcadeUtils:t,featureSetVars:w,context:C,viewInfo:x,map:u,graphic:D,interceptor:J}){w.forEach(S=>
{S=S.toLowerCase();var T={map:u,spatialReference:x.sr,interceptor:J};"$map"===S&&(C.vars[S]=t.convertMapToFeatureSetCollection(T));"$layer"===S&&(C.vars[S]=t.convertFeatureLayerToFeatureSet({layer:D.sourceLayer,spatialReference:x.sr,interceptor:J}));"$datastore"===S&&(C.vars[S]=t.convertServiceUrlToWorkspace({url:D.sourceLayer.url,spatialReference:x.sr,interceptor:J}));if("$aggregatedfeatures"===S){T=D.layer;const {fields:P,objectIdField:X,geometryType:Q,spatialReference:O,displayField:Z}=T;T=new E({fields:P,
objectIdField:X,geometryType:Q,spatialReference:O,displayField:Z,..."feature"===T.type?{templates:T.templates,typeIdField:T.typeIdField,types:T.types}:null,source:f});C.vars[S]=t.convertFeatureLayerToFeatureSet({layer:T,spatialReference:x.sr,interceptor:J})}})}function n(){return new Promise((f,t)=>g(["../../../support/arcadeUtils"],f,t))}function b(f){return a.apply(this,arguments)}function a(){a=m._asyncToGenerator(function*({graphic:f,view:t}){const {isAggregate:w,layer:C}=f;if(!w||!C||"2d"!==
(null==t?void 0:t.type))return[];t=yield t.whenLayerView(C);if(!t.createQuery||!t.queryFeatures)return[];const x=t.createQuery();x.aggregateIds=[f.getObjectId()];({features:f}=yield t.queryFeatures(x));return f});return a.apply(this,arguments)}function h(f){return d.apply(this,arguments)}function d(){d=m._asyncToGenerator(function*({expressionInfo:f,arcadeUtils:t,interceptor:w,spatialReference:C,map:x,graphic:u,view:D}){if(!f||!f.expression)return null;const J=t.createSyntaxTree(f.expression),S=r.filter(P=>
t.hasVariable(J,P));[D]=yield Promise.all([b({graphic:u,view:D}),t.loadScriptDependencies(J,!0,S)]);const T=t.getViewInfo({spatialReference:C});C=t.createExecContext(u,T);C.interceptor=w;C.useAsync=!0;v({aggregatedFeatures:D,arcadeUtils:t,featureSetVars:S,context:C,viewInfo:T,map:x,graphic:u,interceptor:w});w=t.createFunction(J,C);return t.executeAsyncFunction(w,C).catch(P=>B.error("arcade-execution-error",{error:P,graphic:u,expressionInfo:f}))});return d.apply(this,arguments)}function e(){e=m._asyncToGenerator(function*({expressionInfos:f,
spatialReference:t,graphic:w,interceptor:C,map:x,view:u}){if(!f||!f.length)return{};const D=yield n(),J={};for(const S of f)J[`expression/${S.name}`]=h({expressionInfo:S,arcadeUtils:D,interceptor:C,spatialReference:t,map:x,graphic:w,view:u});f=yield q.eachAlways(J);t={};for(const S in f)w=f[S].value,w="string"===typeof w?z.applyTextFormattingHTML(z.htmlEntities(w)):Array.isArray(w)?H(w):"esri.arcade.Dictionary"===(null==w?void 0:w.declaredClass)?G(w):w,t[S]=w;return t});return e.apply(this,arguments)}
const r=["$datastore","$map","$layer","$aggregatedfeatures"],B=k.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");p.createCompiledExpression=h;p.createCompiledExpressions=function(f){return e.apply(this,arguments)};p.loadArcadeUtils=n;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D){var J;const S=z.getLogger("esri.widgets.FeatureViewModel"),T={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};q=J=function(P){function X(O){var Z=P.call(this,O)||this;Z._handles=new E;Z._error=null;Z._featureAbortController=null;Z.graphicChangedThrottled=n.throttle(Z._graphicChanged,1,g._assertThisInitialized(Z));Z._expressionAttributes=null;Z._graphicExpressionAttributes=
null;Z.abilities={...T};Z.content=null;Z.contentViewModels=[];Z.defaultPopupTemplateEnabled=!1;Z.formattedAttributes=null;Z.lastEditInfo=null;Z.relatedInfos=new Map;Z.title="";Z.view=null;Z._isAllowedContentType=L=>{const {abilities:I}=g._assertThisInitialized(Z);return"attachments"===L.type&&I.attachmentsContent||"custom"===L.type&&I.customContent||"fields"===L.type&&I.fieldsContent||"media"===L.type&&I.mediaContent||"text"===L.type&&I.textContent||"expression"===L.type&&I.expressionContent};Z._handles.add(v.watch(()=>
[Z.graphic,Z._effectivePopupTemplate,Z.abilities],()=>Z.graphicChangedThrottled(),v.initial));return Z}g._inheritsLoose(X,P);var Q=X.prototype;Q.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};Q.castAbilities=function(O){return{...T,...O}};Q.setActiveMedia=function(O,Z){O=this.contentViewModels[O];O instanceof C&&O.setActiveMedia(Z)};Q.nextMedia=function(O){O=
this.contentViewModels[O];O instanceof C&&O.next()};Q.previousMedia=function(O){O=this.contentViewModels[O];O instanceof C&&O.previous()};Q._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};Q._graphicChanged=function(){var O=g._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:Z}=this;if(Z){var L=new AbortController;this._featureAbortController=L;try{yield this._queryFeature({signal:L.signal})}catch(I){G.isAbortError(I)||
(this._error=I,S.error("error","The popupTemplate could not be displayed for this feature.",{error:I,graphic:Z,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===L&&(this._featureAbortController=null)}});return function(){return O.apply(this,arguments)}}();Q._cancelFeatureQuery=function(){const {_featureAbortController:O}=this;O&&O.abort();this._featureAbortController=null};Q._compileContentElement=function(O,Z){if("attachments"===O.type)return this._compileAttachments(O,
Z);if("custom"===O.type)return this._compileCustom(O,Z);if("fields"===O.type)return this._compileFields(O,Z);if("media"===O.type)return this._compileMedia(O,Z);if("text"===O.type)return this._compileText(O,Z);if("expression"===O.type)return this._compileExpression(O,Z)};Q._compileContent=function(O){this._destroyContentViewModels();if(this.graphic)return Array.isArray(O)?O.filter(this._isAllowedContentType).map((Z,L)=>this._compileContentElement(Z,L)):"string"===typeof O?this._compileText(new r({text:O}),
0).text:O};Q._destroyContentViewModels=function(){var O;null==(O=this._handles)?void 0:O.remove("content-view-models");this.contentViewModels.forEach(Z=>Z&&!Z.destroyed&&Z.destroy());this._set("contentViewModels",[])};Q._setExpressionContentVM=function(O,Z){const {formattedAttributes:L}=this,{contentElement:I,contentElementViewModel:l}=O;O=null==I?void 0:I.type;l&&O&&("fields"===O&&(this._createFieldsFormattedAttributes({contentElement:I,contentElementIndex:Z,formattedAttributes:L}),l.set(this._createFieldsVMParams(I,
Z))),"media"===O&&(this._createMediaFormattedAttributes({contentElement:I,contentElementIndex:Z,formattedAttributes:L}),l.set(this._createMediaVMParams(I,Z))),"text"===O&&l.set(this._createTextVMParams(I)))};Q._compileExpression=function(O,Z){const {expressionInfo:L}=O,{graphic:I,map:l,spatialReference:A,view:y}=this,K=new t({expressionInfo:L,graphic:I,interceptor:J.interceptor,map:l,spatialReference:A,view:y});this.contentViewModels[Z]=K;this._handles.add(v.watch(()=>K.contentElementViewModel,()=>
this._setExpressionContentVM(K,Z),v.initial),"content-view-models");return O};Q._compileAttachments=function(O,Z){const {graphic:L}=this,{description:I,title:l}=O;this.contentViewModels[Z]=new B({graphic:L,...this._compileTitleAndDesc({title:l,description:I})});return O};Q._compileCustom=function(O,Z){const {graphic:L}=this,{creator:I,destroyer:l}=O;this.contentViewModels[Z]=new f({graphic:L,creator:I,destroyer:l});return O};Q._compileTitleAndDesc=function({title:O,description:Z}){const {_fieldInfoMap:L,
_sourceLayer:I,graphic:l,formattedAttributes:A,_expressionAttributes:y}=this,{attributes:K}=l,U=A.global;return{title:u.substituteFieldsInLinksAndAttributes({attributes:K,fieldInfoMap:L,globalAttributes:U,expressionAttributes:y,layer:I,text:O}),description:u.substituteFieldsInLinksAndAttributes({attributes:K,fieldInfoMap:L,globalAttributes:U,expressionAttributes:y,layer:I,text:Z})}};Q._createFieldsVMParams=function(O,Z){const {_effectivePopupTemplate:L,formattedAttributes:I}=this,l={...I.global,...I.content[Z]};
Z=(null==O?void 0:O.fieldInfos)||(null==L?void 0:L.fieldInfos);Z=null==Z?void 0:Z.filter(({fieldName:U})=>u.isExpressionField(U)||u.isRelatedField(U)||l.hasOwnProperty(U));const A=null==L?void 0:L.expressionInfos,{description:y,title:K}=O;return{attributes:l,expressionInfos:A,fieldInfos:Z,...this._compileTitleAndDesc({title:K,description:y})}};Q._compileFields=function(O,Z){const L=O.clone();O=new w(this._createFieldsVMParams(O,Z));this.contentViewModels[Z]=O;L.fieldInfos=O.formattedFieldInfos.slice(0);
return L};Q._createMediaVMParams=function(O,Z){const {abilities:L,graphic:I,_fieldInfoMap:l,formattedAttributes:A,_effectivePopupTemplate:y,relatedInfos:K,_sourceLayer:U,_expressionAttributes:ba}=this,{attributes:ea}=I,{description:na,mediaInfos:ha,title:la}=O;return{abilities:{chartAnimation:L.chartAnimation},activeMediaInfoIndex:O.activeMediaInfoIndex||0,attributes:ea,layer:U,fieldInfoMap:l,formattedAttributes:{...A.global,...A.content[Z]},expressionAttributes:ba,mediaInfos:ha,popupTemplate:y,relatedInfos:K,
...this._compileTitleAndDesc({title:la,description:na})}};Q._compileMedia=function(O,Z){const L=O.clone();O=new C(this._createMediaVMParams(O,Z));L.mediaInfos=O.formattedMediaInfos.slice(0);this.contentViewModels[Z]=O;return L};Q._createTextVMParams=function(O){const {graphic:Z,_fieldInfoMap:L,_sourceLayer:I,_expressionAttributes:l}=this;if(O&&O.text){const {attributes:A}=Z;O.text=u.substituteFieldsInLinksAndAttributes({attributes:A,fieldInfoMap:L,globalAttributes:this.formattedAttributes.global,
expressionAttributes:l,layer:I,text:O.text})}return{graphic:Z,creator:O.text}};Q._compileText=function(O,Z){O=O.clone();this.contentViewModels[Z]=new f(this._createTextVMParams(O));return O};Q._compileLastEditInfo=function(){const {_effectivePopupTemplate:O,_sourceLayer:Z,graphic:L}=this;if(O){var {lastEditInfoEnabled:I}=O,l=null==Z?void 0:Z.editFieldsInfo;if(I&&l)return u.formatEditInfo(l,L.attributes)}};Q._compileTitle=function(O){const {_fieldInfoMap:Z,_sourceLayer:L,graphic:I,_expressionAttributes:l}=
this,{attributes:A}=I;return u.substituteFieldsInLinksAndAttributes({attributes:A,fieldInfoMap:Z,globalAttributes:this.formattedAttributes.global,expressionAttributes:l,layer:L,text:O})};Q._getTitle=function(){var O=g._asyncToGenerator(function*(){const {_effectivePopupTemplate:Z,graphic:L}=this;return u.graphicCallback(null==Z?void 0:Z.title,{graphic:L})});return function(){return O.apply(this,arguments)}}();Q._getContent=function(){var O=g._asyncToGenerator(function*(){const {_effectivePopupTemplate:Z,
graphic:L}=this;return u.graphicCallback(null==Z?void 0:Z.content,{graphic:L})});return function(){return O.apply(this,arguments)}}();Q._queryFeature=function(){var O=g._asyncToGenerator(function*(Z){const {_featureAbortController:L,_sourceLayer:I,graphic:l,_effectivePopupTemplate:A,spatialReference:y,map:K,view:U}=this,{content:{value:ba},title:{value:ea}}=yield G.eachAlways({content:this._getContent(),title:this._getTitle()});L===this._featureAbortController&&l&&(yield u.queryUpdatedFeature({graphic:l,
popupTemplate:A,layer:I,spatialReference:y},Z),{expressionAttributes:{value:Z}}=yield G.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(Z),expressionAttributes:x.createCompiledExpressions({expressionInfos:null==A?void 0:A.expressionInfos,spatialReference:y,graphic:l,map:K,interceptor:J.interceptor,view:U})}),L===this._featureAbortController&&l&&(this._expressionAttributes=Z,this._graphicExpressionAttributes={...l.attributes,...Z},this._set("formattedAttributes",this._createFormattedAttributes(ba)),
this._set("title",this._compileTitle(ea)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ba)||null)))});return function(Z){return O.apply(this,arguments)}}();Q._createMediaFormattedAttributes=function({contentElement:O,contentElementIndex:Z,formattedAttributes:L}){const {_effectivePopupTemplate:I,graphic:l,relatedInfos:A,_sourceLayer:y,_fieldInfoMap:K,_graphicExpressionAttributes:U}=this;L.content[Z]=u.formatAttributes({fieldInfos:null==I?void 0:
I.fieldInfos,graphic:l,attributes:{...U,...O.attributes},layer:y,fieldInfoMap:K,relatedInfos:A})};Q._createFieldsFormattedAttributes=function({contentElement:O,contentElementIndex:Z,formattedAttributes:L}){if(O.fieldInfos){const {graphic:I,relatedInfos:l,_sourceLayer:A,_fieldInfoMap:y,_graphicExpressionAttributes:K}=this;L.content[Z]=u.formatAttributes({fieldInfos:O.fieldInfos,graphic:I,attributes:{...K,...O.attributes},layer:A,fieldInfoMap:y,relatedInfos:l})}};Q._createFormattedAttributes=function(O){const {_effectivePopupTemplate:Z,
graphic:L,relatedInfos:I,_sourceLayer:l,_fieldInfoMap:A,_graphicExpressionAttributes:y}=this,K={global:u.formatAttributes({fieldInfos:null==Z?void 0:Z.fieldInfos,graphic:L,attributes:y,layer:l,fieldInfoMap:A,relatedInfos:I}),content:[]};Array.isArray(O)&&O.forEach((U,ba)=>{"fields"===U.type&&this._createFieldsFormattedAttributes({contentElement:U,contentElementIndex:ba,formattedAttributes:K});"media"===U.type&&this._createMediaFormattedAttributes({contentElement:U,contentElementIndex:ba,formattedAttributes:K})});
return K};Q._checkForRelatedFeatures=function(O){const {graphic:Z,_effectivePopupTemplate:L}=this;return this._queryRelatedInfos(Z,u.getAllFieldInfos(L),O)};Q._queryRelatedInfos=function(){var O=g._asyncToGenerator(function*(Z,L,I){const {relatedInfos:l,_sourceLayer:A}=this;l.clear();const y=H.isSome(A.associatedLayer)?yield A.associatedLayer.load(I):A;if(y){var K=L.filter(ea=>ea&&u.isRelatedField(ea.fieldName));if(K&&K.length){L.forEach(ea=>this._configureRelatedInfo(ea,y));var U=yield D.queryLayerInfos({relatedInfos:l,
layer:y},I);Object.keys(U).forEach(ea=>{var na;const ha=l.get(ea.toString());ea=null==(na=U[ea])?void 0:na.value;ha&&ea&&(ha.layerInfo=ea.data)});var ba=yield D.queryRelatedFeatures({graphic:Z,relatedInfos:l,layer:y},I);Object.keys(ba).forEach(ea=>{var na;D.setRelatedFeatures(null==(na=ba[ea])?void 0:na.value,l.get(ea.toString()))})}}});return function(Z,L,I){return O.apply(this,arguments)}}();Q._configureRelatedInfo=function(O,Z){const {relatedInfos:L}=this,I=D.getRelatedFieldInfo(O.fieldName);if(I){var {layerId:l,
fieldName:A}=I;l&&(Z=L.get(l.toString())||D.createRelatedInfo(l,Z))&&(D.updateRelatedInfo({relatedInfo:Z,fieldName:A,fieldInfo:O}),this.relatedInfos.set(l,Z))}};g._createClass(X,[{key:"_effectivePopupTemplate",get:function(){return H.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return u.createfieldInfoMap(u.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return u.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(O){this._set("graphic",O?O.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(O){void 0===O?this._clearOverride("spatialReference"):this._override("spatialReference",O)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(O){void 0===O?this._clearOverride("map"):
this._override("map",O)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return X}(q);q.interceptor=new k.FeatureSetQueryInterceptor(u.preLayerQueryCallback,u.preRequestCallback);p.__decorate([b.property()],q.prototype,"_error",void 0);p.__decorate([b.property()],q.prototype,"_featureAbortController",void 0);p.__decorate([b.property({readOnly:!0})],q.prototype,"_effectivePopupTemplate",null);p.__decorate([b.property({readOnly:!0})],q.prototype,"_fieldInfoMap",null);
p.__decorate([b.property({readOnly:!0})],q.prototype,"_sourceLayer",null);p.__decorate([b.property()],q.prototype,"abilities",void 0);p.__decorate([d.cast("abilities")],q.prototype,"castAbilities",null);p.__decorate([b.property({readOnly:!0})],q.prototype,"content",void 0);p.__decorate([b.property({readOnly:!0})],q.prototype,"contentViewModels",void 0);p.__decorate([b.property({type:Boolean})],q.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([b.property({readOnly:!0})],q.prototype,"state",
null);p.__decorate([b.property({readOnly:!0})],q.prototype,"formattedAttributes",void 0);p.__decorate([b.property({type:m,value:null})],q.prototype,"graphic",null);p.__decorate([b.property({readOnly:!0})],q.prototype,"lastEditInfo",void 0);p.__decorate([b.property({readOnly:!0})],q.prototype,"relatedInfos",void 0);p.__decorate([b.property()],q.prototype,"spatialReference",null);p.__decorate([b.property({readOnly:!0})],q.prototype,"title",void 0);p.__decorate([b.property()],q.prototype,"map",null);
p.__decorate([b.property({readOnly:!0})],q.prototype,"waitingForContent",null);p.__decorate([b.property()],q.prototype,"view",void 0);return q=J=p.__decorate([e.subclass("esri.widgets.FeatureViewModel")],q)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(g){g.FeatureSetQueryInterceptor=function(p,m){this.preLayerQueryCallback=p;this.preRequestCallback=m;this.preLayerQueryCallback||(this.preLayerQueryCallback=k=>{});this.preRequestCallback||(this.preLayerQueryCallback=
k=>{})};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(g,
p,m,k,q,E,z,H,G,v,n){g.FeatureContentMixin=b=>{b=function(a){function h(){var d=a.apply(this,arguments)||this;d.renderNodeContent=e=>v.isWidget(e)&&!e.destroyed?n.tsx("div",{key:e},e.render()):e instanceof HTMLElement?n.tsx("div",{key:e,bind:e,afterCreate:d._attachToNode}):v.hasDomNode(e)?n.tsx("div",{key:e,bind:e.domNode,afterCreate:d._attachToNode}):null;return d}p._inheritsLoose(h,a);h.prototype._attachToNode=function(d){d.appendChild(this)};return h}(b);return b=m.__decorate([G.subclass("esri.widgets.Feature.ContentMixin")],
b)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){z=function(e){function r(f,t){f=e.call(this,f,t)||this;f._animationDelay=500;f._animationPromise=null;f.location=null;f.view=null;f.viewModel=new a;f.visible=!1;return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){this.own([q.watch(()=>this.visible,f=>this._visibleChange(f))])};B.destroy=function(){this._animationPromise=null};B.show=function(f){const {location:t,promise:w}=f;t&&(this.viewModel.location=t);this.visible=!0;f=()=>this.hide();
w&&w.catch(()=>{}).then(f)};B.hide=function(){this.visible=!1};B.render=function(){var {visible:f}=this,{screenLocation:t}=this.viewModel;t=!!t;f={["esri-spinner--start"]:f&&t,["esri-spinner--finish"]:!f&&t};t=this._getPositionStyles();return d.tsx("div",{class:this.classes("esri-spinner",f),styles:t})};B._visibleChange=function(f){if(f)this.viewModel.screenLocationEnabled=!0;else{var t=k.after(this._animationDelay);this._animationPromise=t;t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};B._getPositionStyles=function(){const {screenLocation:f,view:t}=this.viewModel;if(m.isNone(t)||m.isNone(f))return{};const {padding:w}=t;return{left:`${f.x-w.left}px`,top:`${f.y-w.top}px`}};return r}(b);p.__decorate([E.aliasOf("viewModel.location")],z.prototype,"location",void 0);p.__decorate([E.aliasOf("viewModel.view")],z.prototype,"view",void 0);p.__decorate([v.property({type:a})],z.prototype,"viewModel",void 0);p.__decorate([E.aliasOf("viewModel.visible")],z.prototype,
"visible",void 0);return z=p.__decorate([n.subclass("esri.widgets.Spinner")],z)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(g,p,m,k,q,E,z,H){k=function(G){function v(n){n=G.call(this,n)||this;n.visible=
!1;return n}g._inheritsLoose(v,G);return v}(H);p.__decorate([m.property()],k.prototype,"visible",void 0);return k=p.__decorate([z.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n){const b=Symbol("anchorHandles");m=function(h){function d(e){var r=h.call(this,e)||this;r[a]=new k;r.location=null;r.screenLocationEnabled=!1;r.view=null;r[b].add([E.when(()=>q.applySome(r.screenLocationEnabled?r.view:null,B=>[B.size,"3d"===B.type?B.camera:B.viewpoint]),()=>r.notifyChange("screenLocation")),E.watch(()=>r.screenLocation,(B,f)=>{q.isSome(B)&&q.isSome(f)&&r.emit("view-change")})]);return r}g._inheritsLoose(d,h);d.prototype.destroy=function(){this.view=
null;this[b]=q.destroyMaybe(this[b])};g._createClass(d,[{key:"screenLocation",get:function(){const {location:e,view:r,screenLocationEnabled:B}=this;return B&&q.isSome(e)&&q.isSome(r)&&r.ready?r.toScreen(e):null}}]);return d}(m.EventedAccessor);var a=b;p.__decorate([z.property()],m.prototype,"location",void 0);p.__decorate([z.property()],m.prototype,"screenLocation",null);p.__decorate([z.property()],m.prototype,"screenLocationEnabled",void 0);p.__decorate([z.property()],m.prototype,"view",void 0);
return m=p.__decorate([n.subclass("esri.widgets.support.AnchorElementViewModel")],m)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D,J,S,T,P,X,Q){const O=E.ofType({key:"type",defaultKeyValue:"button",base:f,typeMap:{button:t,toggle:w}}),Z=G.getLogger("esri.widgets.Popup.PopupViewModel");m=function(L){function I(A){A=L.call(this,A)||this;A._handles=new H;A._pendingPromises=new Set;A._fetchFeaturesController=null;A._selectedClusterFeature=null;A.featurePage=null;A.actions=new O;A.activeFeature=null;A.defaultPopupTemplateEnabled=!1;A.autoCloseEnabled=!1;A.autoOpenEnabled=
!0;A.browseClusterEnabled=!1;A.content=null;A.featuresPerPage=20;A.featureViewModelAbilities=null;A.featureViewModels=[];A.highlightEnabled=!0;A.includeDefaultActions=!0;A.selectedClusterBoundaryFeature=new k({symbol:new Q({outline:{width:1.5,color:"cyan"},style:"none"})});A.title=null;A.updateLocationEnabled=!1;A.view=null;A.visible=!1;A.zoomFactor=4;A.zoomToLocation=null;return A}g._inheritsLoose(I,L);var l=I.prototype;l.initialize=function(){this._handles.add([n.watch(()=>[this.autoOpenEnabled,
this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),n.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),n.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),n.watch(()=>{var A,y;return null==(A=this.view)?void 0:null==(y=A.animation)?void 0:y.state},A=>this._animationStateChange(A)),n.watch(()=>this.location,A=>this._locationChange(A)),
n.watch(()=>this.selectedFeature,A=>this._selectedFeatureChange(A)),n.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),n.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),n.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",A=>S.triggerAction({event:A,view:this.view})),n.when(()=>
!this.waitingForResult,()=>this._waitingForResultChange(),n.sync),n.watch(()=>{var A,y;return[this.features,null==(A=this.view)?void 0:A.map,null==(y=this.view)?void 0:y.spatialReference]},()=>this._updateFeatureVMs()),n.watch(()=>{var A;return null==(A=this.view)?void 0:A.scale},()=>this._viewScaleChange()),n.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),n.watch(()=>this.browseClusterEnabled,A=>A?this.enableClusterBrowsing():this.disableClusterBrowsing())])};l.destroy=function(){this._cancelFetchingFeatures();
this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};l.centerAtLocation=function(){var {view:A}=this;const y=S.getSelectedTarget(this);return y?this.callGoTo({target:{target:y,scale:A.scale}}):(A=new z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:y,view:A}),Z.error(A),Promise.reject(A))};l.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,
activeFeature:null})};l.fetchFeatures=function(A,y){const {view:K}=this;return K&&A?K.fetchPopupFeatures(A,{event:y&&y.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:y&&y.signal}):(A=new z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:A,view:K}),Z.error(A),Promise.reject(A))};l.open=function(A){A={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...A,visible:!0};var {fetchFeatures:y}=A;delete A.fetchFeatures;
y&&this._setFetchFeaturesPromises(A.location);y=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const K of y)delete A[K];this.set(A)};l.triggerAction=function(A){(A=this.allActions.getItemAt(A))&&!A.disabled&&this.emit("trigger-action",{action:A})};l.next=function(){this.selectedFeatureIndex+=1;return this};l.previous=function(){--this.selectedFeatureIndex;return this};l.disableClusterBrowsing=function(){S.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};l.enableClusterBrowsing=
function(){var A=g._asyncToGenerator(function*(){const {view:y,selectedFeature:K}=this;"2d"!==(null==y?void 0:y.type)?Z.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",K):S.isClusterFeature(K)?(yield S.displayClusterExtent(this),yield S.browseAggregateFeatures(this)):Z.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",K)});return function(){return A.apply(this,arguments)}}();l._animationStateChange=function(A){this.zoomToLocation||
(J.zoomToFeature.disabled="waiting-for-target"===A)};l._clearBrowsedClusterGraphics=function(){var A;const y=null==(A=this.view)?void 0:A.graphics;y&&(y.remove(this.selectedClusterBoundaryFeature),y.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};l._viewScaleChange=function(){S.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};
l._locationChange=function(A){const {selectedFeature:y,updateLocationEnabled:K}=this;K&&A&&(!y||y.geometry)&&this.centerAtLocation()};l._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};l._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};l._setGraphicOnFeatureViewModels=function(){const {features:A,featureCount:y,featurePage:K,featuresPerPage:U,featureViewModels:ba}=this;if(null!==
K){var ea=((K-1)*U+y)%y;ba.slice(ea,ea+U).forEach((na,ha)=>{na&&!na.graphic&&(na.graphic=A[ea+ha])})}};l._selectedFeatureChange=function(){var A=g._asyncToGenerator(function*(y){if(y){var {location:K,updateLocationEnabled:U,view:ba}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(ba.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),S.isClusterFeature(y)||(y.symbol=yield C.getDisplayedSymbol(y),this._selectedClusterFeature=y,ba.graphics.add(this._selectedClusterFeature))):
!U&&K||!y.geometry?U&&!y.geometry&&this.centerAtLocation().then(()=>{this.location=ba.center.clone()}):this.location=v.unwrap(this._getPointFromGeometry(y.geometry))}});return function(y){return A.apply(this,arguments)}}();l._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};l._setFetchFeaturesPromises=function(A){return this._fetchFeaturesWithController(this._getScreenPoint(A||this.location)).then(y=>{const {clientOnlyGraphics:K,promisesPerLayerView:U}=y;y=Promise.resolve(K);
const ba=U.map(ea=>ea.promise);this.promises=[y,...ba]})};l._destroyFeatureVMs=function(){this.featureViewModels.forEach(A=>A&&!A.destroyed&&A.destroy());this._set("featureViewModels",[])};l._updateFeatureVMs=function(){const {selectedFeature:A,features:y,featureViewModels:K}=this;S.isClusterFeature(A)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(y&&y.length){var U=K.slice(0),ba=[];y.forEach((ea,na)=>{if(ea){var ha=null;U.some((qa,M)=>{qa&&qa.graphic===ea&&(ha=qa,U.splice(M,1));return!!ha});
if(ha)ba[na]=ha;else{var la,pa;const qa=new D({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(la=this.view)?void 0:la.spatialReference,graphic:ea===A?ea:null,map:null==(pa=this.view)?void 0:pa.map,view:this.view});ba[na]=qa}}});U.forEach(ea=>ea&&!ea.destroyed&&ea.destroy());this._set("featureViewModels",ba)}};l._getScreenPoint=function(A){const {view:y}=this;return y&&A&&"function"===typeof y.toScreen?y.toScreen(A):null};
l._autoOpenEnabledChange=function(){const {_handles:A,autoOpenEnabled:y}=this;A.remove("auto-fetch-features");if(y&&this.view){const K=this.view.on("click",U=>{"mouse"===U.pointerType&&0!==U.button||this._fetchFeaturesAndOpen(U)},x.ViewEventPriorities.WIDGET);A.add(K,"auto-fetch-features")}};l._cancelFetchingFeatures=function(){const A=this._fetchFeaturesController;A&&A.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};l._fetchFeaturesWithController=function(A,y){this._cancelFetchingFeatures();
const K=new AbortController,{signal:U}=K;this._fetchFeaturesController=K;this.notifyChange("waitingForResult");A=this.fetchFeatures(A,{signal:U,event:y});A.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return A};l._fetchFeaturesAndOpen=function(A){const {screenPoint:y,mapPoint:K}=A,{view:U}=this;this._fetchFeaturesWithController(y,A).then(ba=>{const {clientOnlyGraphics:ea,promisesPerLayerView:na,location:ha}=ba,la=[Promise.resolve(ea),...na.map(pa=>
pa.promise)];U.popup.open({location:ha||K,promises:la});return ba})};l._updatePendingPromises=function(A){A&&this._pendingPromises.has(A)&&(this._pendingPromises.delete(A),this.notifyChange("pendingPromisesCount"))};l._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};l._getPointFromGeometry=function(A){return v.isNone(A)?null:"point"===A.type?A:"extent"===A.type?A.center:"polygon"===A.type?A.centroid:"multipoint"===A.type||"polyline"===A.type?A.extent.center:null};l._getLayerView=function(){var A=
g._asyncToGenerator(function*(y,K){yield y.when();return y.whenLayerView(K)});return function(y,K){return A.apply(this,arguments)}}();l._getHighlightLayer=function(A){const {layer:y,sourceLayer:K}=A;return"map-notes"===(null==K?void 0:K.type)||"subtype-group"===(null==K?void 0:K.type)?K:y};l._getHighlightTarget=function(A,y){y="imagery"===y.type?void 0:"objectIdField"in y&&y.objectIdField;const K=A.attributes;return K&&y&&K[y]||A};l._highlightActiveFeature=function(){var A=g._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");
const {highlightEnabled:y,view:K,activeFeature:U,visible:ba}=this;if(U&&K&&y&&ba){var ea=this._getHighlightLayer(U);if(ea&&ea instanceof B){var na=this._getLayerView(K,ea);this._highlightActiveFeaturePromise=na;var ha=yield na;ha&&u.highlightsSupported(ha)&&this._highlightActiveFeaturePromise===na&&this.activeFeature&&this.highlightEnabled&&(ea=ha.highlight(this._getHighlightTarget(U,ea)),this._handles.add(ea,"highlight-active-feature"))}}});return function(){return A.apply(this,arguments)}}();l._highlightSelectedFeature=
function(){var A=g._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:y,highlightEnabled:K,view:U,visible:ba}=this;if(y&&U&&K&&ba){var ea=this._getHighlightLayer(y);if(ea&&ea instanceof B){var na=this._getLayerView(U,ea);this._highlightSelectedFeaturePromise=na;var ha=yield na;ha&&u.highlightsSupported(ha)&&this._highlightSelectedFeaturePromise===na&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(ea=ha.highlight(this._getHighlightTarget(y,
ea)),this._handles.add(ea,"highlight-selected-feature"))}}});return function(){return A.apply(this,arguments)}}();l._updateFeatures=function(A){const {features:y}=this;A&&A.length&&(y.length?(A=A.filter(K=>!y.includes(K)),this.features=y.concat(A)):this.features=A)};g._createClass(I,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(A=>A.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const A=
this._get("allActions")||new O;A.removeAll();const {actions:y,defaultActions:K,defaultPopupTemplateEnabled:U,includeDefaultActions:ba,selectedFeature:ea}=this;var na=ba?K.concat(y):y;const ha=ea&&("function"===typeof ea.getEffectivePopupTemplate&&ea.getEffectivePopupTemplate(U)||ea.popupTemplate),la=ha&&ha.actions;(na=ha&&ha.overwriteActions?la:la?la.concat(na):na)&&na.filter(Boolean).forEach(pa=>A.add(pa));return A}},{key:"defaultActions",get:function(){const A=this._get("defaultActions")||new O;
A.removeAll();A.addMany(S.isClusterFeature(this.selectedFeature)?[J.zoomToClusteredFeatures.clone(),J.browseClusteredFeatures.clone()]:[J.zoomToFeature.clone()]);return A}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(A){A=A||[];this._set("features",A);const {pendingPromisesCount:y,promiseCount:K,selectedFeatureIndex:U}=this,ba=K&&A.length;ba&&y&&-1===U?this.selectedFeatureIndex=0:ba&&-1!==U||(this.selectedFeatureIndex=
A.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(A){const y=this.get("view.spatialReference.isWebMercator");A&&A.get("spatialReference.isWGS84")&&y&&(A=r.geographicToWebMercator(A));this._set("location",A)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(A){this._pendingPromises.clear();this.features=[];Array.isArray(A)&&A.length?(this._set("promises",A),A=A.slice(0),A.forEach(y=>{this._pendingPromises.add(y);y.then(K=>{this._pendingPromises.has(y)&&this._updateFeatures(K);this._updatePendingPromises(y)},()=>this._updatePendingPromises(y))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:A,selectedFeatureIndex:y}=
this;return-1===y?null:A[y]||null}},{key:"selectedFeatureIndex",get:function(){const A=this._get("selectedFeatureIndex");return"number"===typeof A?A:-1},set:function(A){const {featureCount:y}=this;A=isNaN(A)||-1>A||!y?-1:(A+y)%y;this.activeFeature=null;this._set("selectedFeatureIndex",A)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return I}(P.GoToMixin(T));
p.__decorate([b.property()],m.prototype,"featurePage",void 0);p.__decorate([b.property()],m.prototype,"isLoadingFeature",null);p.__decorate([b.property({type:O})],m.prototype,"actions",void 0);p.__decorate([b.property({readOnly:!0})],m.prototype,"active",null);p.__decorate([b.property()],m.prototype,"activeFeature",void 0);p.__decorate([b.property({readOnly:!0})],m.prototype,"allActions",null);p.__decorate([b.property({type:Boolean})],m.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([b.property()],
m.prototype,"autoCloseEnabled",void 0);p.__decorate([b.property()],m.prototype,"autoOpenEnabled",void 0);p.__decorate([b.property()],m.prototype,"browseClusterEnabled",void 0);p.__decorate([b.property()],m.prototype,"content",void 0);p.__decorate([b.property({type:O,readOnly:!0})],m.prototype,"defaultActions",null);p.__decorate([b.property({readOnly:!0})],m.prototype,"featureCount",null);p.__decorate([b.property()],m.prototype,"features",null);p.__decorate([b.property()],m.prototype,"featuresPerPage",
void 0);p.__decorate([b.property()],m.prototype,"featureViewModelAbilities",void 0);p.__decorate([b.property({readOnly:!0})],m.prototype,"featureViewModels",void 0);p.__decorate([b.property()],m.prototype,"highlightEnabled",void 0);p.__decorate([b.property()],m.prototype,"includeDefaultActions",void 0);p.__decorate([b.property({type:X})],m.prototype,"location",null);p.__decorate([b.property({readOnly:!0})],m.prototype,"pendingPromisesCount",null);p.__decorate([b.property({readOnly:!0})],m.prototype,
"selectedClusterBoundaryFeature",void 0);p.__decorate([b.property({readOnly:!0})],m.prototype,"waitingForResult",null);p.__decorate([b.property({readOnly:!0})],m.prototype,"promiseCount",null);p.__decorate([b.property()],m.prototype,"promises",null);p.__decorate([b.property({value:null,readOnly:!0})],m.prototype,"selectedFeature",null);p.__decorate([b.property({value:-1})],m.prototype,"selectedFeatureIndex",null);p.__decorate([b.property({readOnly:!0})],m.prototype,"selectedFeatureViewModel",null);
p.__decorate([b.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([b.property()],m.prototype,"title",void 0);p.__decorate([b.property()],m.prototype,"updateLocationEnabled",void 0);p.__decorate([b.property()],m.prototype,"view",void 0);p.__decorate([b.property()],m.prototype,"visible",void 0);p.__decorate([b.property()],m.prototype,"zoomFactor",void 0);p.__decorate([b.property()],m.prototype,"zoomToLocation",void 0);p.__decorate([b.property()],m.prototype,"centerAtLocation",null);return m=
p.__decorate([e.subclass("esri.widgets.Popup.PopupViewModel")],m)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(g,p,m,k,q,E,z,H,G,v){function n(f,t){if(t&&(f.style.filter=v.getCSSFilterFromEffectList(t),t=t.effects))for(const w of t)if("drop-shadow"===(null==w?void 0:w.type)){0>w.offsetX?f.style.marginLeft=
`${Math.abs(w.offsetX)}px`:f.style.marginRight=`${w.offsetX}px`;break}}function b(f,t){return a.apply(this,arguments)}function a(){a=m._asyncToGenerator(function*(f,t){switch(f.type){case "web-style":var {previewWebStyleSymbol:w}=yield new Promise((C,x)=>g(["./previewWebStyleSymbol"],C,x));return w(f,b,t);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:w}=yield new Promise((C,x)=>g(["./previewSymbol3D"],C,x)),w(f,t);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:w}=
yield new Promise((C,x)=>g(["./previewSymbol2D"],C,x)),w(f,t);case "cim":return{previewCIMSymbol:w}=yield new Promise((C,x)=>g(["./previewCIMSymbol"],C,x)),w(f,t)}});return a.apply(this,arguments)}function h(f){return f&&"opacity"in f?f.opacity*h(f.parent):1}function d(){d=m._asyncToGenerator(function*(f,t){var w,C;if(f){var x=f.sourceLayer;x=null!=(w=q.isSome(t)&&null!=(C=t.useSourceLayer)&&C?x:f.layer)?w:x;w=h(x);if(q.isSome(f.symbol)&&(!q.isSome(t)||!0!==t.ignoreGraphicSymbol))return f="web-style"===
f.symbol.type?yield f.symbol.fetchSymbol({...t,cache:q.isSome(t)?t.webStyleCache:null}):f.symbol.clone(),v.applyColorToSymbol(f,null,w),f;var u=q.isSome(t)&&t.renderer||x&&"renderer"in x&&x.renderer;if(C=u&&"getSymbolAsync"in u?yield u.getSymbolAsync(f,t):null){C="web-style"===C.type?yield C.fetchSymbol({...t,cache:q.isSome(t)?t.webStyleCache:null}):C.clone();if(!("visualVariables"in u&&u.visualVariables&&u.visualVariables.length))return v.applyColorToSymbol(C,null,w),C;"arcadeRequiredForVisualVariables"in
u&&u.arcadeRequiredForVisualVariables&&(q.isNone(t)||q.isNone(t.arcade))&&(t={...q.unwrap(t)},t.arcade=yield E.loadArcade());x=yield new Promise((X,Q)=>g(["../../renderers/visualVariables/support/visualVariableUtils"],X,Q));var D=[],J=[],S=[],T=[];for(var P of u.visualVariables)switch(P.type){case "color":D.push(P);break;case "opacity":J.push(P);break;case "rotation":T.push(P);break;case "size":P.target||S.push(P)}P=(P=!!D.length&&D[D.length-1])?x.getColor(P,f,t):null;J=(J=!!J.length&&J[J.length-
1])?x.getOpacity(J,f,t):null;null!=w&&(J=null!=J?J*w:w);v.applyColorToSymbol(C,P,J);S.length&&(w=x.getAllSizes(S,f,t),yield v.applySizesToSymbol(C,w));for(const X of T)v.applyRotationToSymbol(C,x.getRotationAngle(X,f,t),X.axis);return C}}});return d.apply(this,arguments)}function e(){e=m._asyncToGenerator(function*(f,t){var w;if(f){var C=h(f.layer||f.sourceLayer);if(q.isSome(f.symbol)&&(!q.isSome(t)||!0!==t.ignoreGraphicSymbol))return f="web-style"===f.symbol.type?yield f.symbol.fetchSymbol(t):f.symbol.clone(),
v.getColorFromSymbol(f,C);var x=q.isSome(t)&&t.renderer||f.get("layer.renderer")||f.get("sourceLayer.renderer"),u=yield x.getSymbolAsync(f,t);if(u){u="web-style"===u.type?yield u.fetchSymbol(t):u.clone();u=v.getColorFromSymbol(u,C);if(!("visualVariables"in x)||"visualVariables"in x&&!x.visualVariables||"visualVariables"in x&&(null==(w=x.visualVariables)||!w.length))return u;x.arcadeRequiredForVisualVariables&&(q.isNone(t)||q.isNone(t.arcade))&&(t={...q.unwrap(t)},t.arcade=yield E.loadArcade());w=
yield new Promise((S,T)=>g(["../../renderers/visualVariables/support/visualVariableUtils"],S,T));var D=[],J=[];for(const S of x.visualVariables)switch(S.type){case "color":D.push(S);break;case "opacity":J.push(S)}x=(x=0<D.length?D[D.length-1]:null)?w.getColor(x,f,t):u;f=(u=0<J.length?J[J.length-1]:null)?w.getOpacity(u,f,t):null;null!=C&&(f=null!=f?f*C:C);return x?v.applyOpacityToColor(x,f):null}}});return e.apply(this,arguments)}let r=null;const B=[255,255,255];p.getDisplayedColor=function(f,t){return e.apply(this,
arguments)};p.getDisplayedSymbol=function(f,t){return d.apply(this,arguments)};p.renderColorRampPreviewHTML=function(f,t={}){var w="horizontal"===t.align;const {width:C=w?75:24,height:x=w?24:75,gradient:u=!0}=t;var D=window.devicePixelRatio,J=C*D,S=x*D;D=document.createElement("canvas");D.width=J;D.height=S;D.style.width=`${C}px`;D.style.height=`${x}px`;const T=D.getContext("2d");var P=w?J:0,X=w?0:S;if(u){const Q=T.createLinearGradient(0,0,P,X);w=f.length;const O=1===w?0:1/(w-1);f.forEach((Z,L)=>
Q.addColorStop(L*O,Z.toString()));T.fillStyle=Q;T.fillRect(0,0,J,S)}else{J=w?J/f.length:J;S=w?S:S/f.length;X=P=0;for(const Q of f)T.fillStyle=Q.toString(),T.fillRect(P,X,J,S),P=w?P+J:0,X=w?0:X+S}f=document.createElement("div");f.style.width=`${C}px`;f.style.height=`${x}px`;n(f,null==t?void 0:t.effectList);f.appendChild(D);return f};p.renderDotDensityPreviewHTML=function(f,t,w){const {backgroundColor:C,outline:x,dotSize:u}=f;w=w&&w.swatchSize||H.SymbolSizeDefaults.size;const D=Math.round(w*w/u**2*
.8),J=window.devicePixelRatio;f=document.createElement("canvas");const S=w*J;f.width=S;f.height=S;f.style.width=`${f.width/J}px`;f.style.height=`${f.height/J}px`;const T=f.getContext("2d");C&&(T.fillStyle=C.toCss(!0),T.fillRect(0,0,S,S),T.fill());T.fillStyle=t.toCss(!0);if(r&&r.length/2===D)for(t=0;t<2*D;t+=2)T.fillRect(r[t],r[t+1],u*J,u*J),T.fill();else for(r=[],t=0;t<2*D;t+=2){const P=Math.floor(Math.random()*(S-0+1)),X=Math.floor(Math.random()*(S-0+1));r.push(P,X);T.fillRect(P,X,u*J,u*J);T.fill()}x&&
(x.color&&(T.strokeStyle=x.color.toCss(!0)),T.lineWidth=x.width,T.strokeRect(0,0,S,S));w=new Image(w,w);w.src=f.toDataURL();return w};p.renderPieChartPreviewHTML=function(f,t={}){const w=t.radius||40;var C=2*Math.PI*w,x=f.length;const u=C/x,D=[],J=z.getStroke(t.outline);J&&(J.width*=2);(J||t.backgroundColor)&&D.push({shape:{type:"circle",cx:w,cy:w,r:w},fill:t.backgroundColor,stroke:J,offset:[0,0]});const S=t.values,T=S&&S.length===x&&100===S.reduce((X,Q)=>X+Q,0),P=[0];for(let X=0;X<x;X++){const Q=
T?S[X]*C/100:null;T&&P.push(Q+P[X]);D.push({shape:{type:"circle",cx:w,cy:w,r:w/2},fill:[0,0,0,0],stroke:{width:w,dashArray:`${Q||u} ${C}`,dashoffset:`-${T?P[X]/2:u/2*X}`,color:f[X]},offset:[0,0]})}x=null;f=2*w+((null==J?void 0:J.width)||0);if(C=t.holePercentage)J&&D.push({shape:{type:"circle",cx:w,cy:w,r:w*C},fill:null,stroke:J,offset:[0,0]}),x=f/2,x=[[{shape:{type:"circle",cx:x,cy:x,r:x},fill:B,stroke:J?{...J,color:B}:null,offset:[0,0]},{shape:{type:"circle",cx:x,cy:x,r:w*C},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return G.renderSymbol([D],[f,f],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:x,rotation:-90})};p.renderPreviewHTML=b;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(g,p){function m(k,q){return Math.round(Math.min(Math.max(k+191.25*q,0),255))}g.SymbolSizeDefaults=void 0;(function(k){k[k.size=22]="size";k[k.lineWidth=50]="lineWidth";k[k.maxSize=
120]="maxSize";k[k.maxOutlineSize=80]="maxOutlineSize";k[k.tallSymbolWidth=20]="tallSymbolWidth"})(g.SymbolSizeDefaults||(g.SymbolSizeDefaults={}));g.adjustColorBrightness=function(k,q){if("type"in k&&("linear"===k.type||"pattern"===k.type))return k;k=new p(k);return new p([m(k.r,q),m(k.g,q),m(k.b,q),k.a])};g.adjustColorComponentBrightness=m;g.getConeShapes=function(k,q){let E=q?g.SymbolSizeDefaults.tallSymbolWidth:k;q=q?4:6;E=E<=g.SymbolSizeDefaults.size?E-.5*q:E-q;q=.15*E;const z=E;k-=q;return[{type:"ellipse",
cx:.5*E,cy:k,rx:.5*E,ry:q},{type:"path",path:[{command:"M",values:[.5*z,0]},{command:"L",values:[z,k]},{command:"L",values:[0,k]},{command:"Z",values:[]}]}]};g.getCubeShapes=function(k,q){let E=q?g.SymbolSizeDefaults.tallSymbolWidth:k;var z=q?4:6;z=E=E<=g.SymbolSizeDefaults.size?E-.5*z:E-z;q=q?.35*E:.5*E;return[{type:"path",path:[{command:"M",values:[.5*z,0]},{command:"L",values:[z,.5*q]},{command:"L",values:[.5*z,q]},{command:"L",values:[0,.5*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[0,.5*q]},{command:"L",values:[.5*z,q]},{command:"L",values:[.5*z,k]},{command:"L",values:[0,k-.5*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*z,q]},{command:"L",values:[.5*z,k]},{command:"L",values:[z,k-.5*q]},{command:"L",values:[z,.5*q]},{command:"Z",values:[]}]}]};g.getCylinderShapes=function(k,q){var E=q?g.SymbolSizeDefaults.tallSymbolWidth:k;q=q?4:6;E=E<=g.SymbolSizeDefaults.size?E-.5*q:E-q;q=.5*E;const z=.15*E;k-=z;return[{type:"ellipse",cx:.5*E,cy:k,rx:q,
ry:z},{type:"path",path:[{command:"M",values:[0,z]},{command:"L",values:[0,k]},{command:"L",values:[E,k]},{command:"L",values:[E,z]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*E,cy:z,rx:q,ry:z}]};g.getDiamondShapes=function(k){var q=k;q=q<g.SymbolSizeDefaults.size?q-2:q-4;const E=Math.floor(k/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[q,.5*k-E]},{command:"L",values:[.45*q-E,.5*k+E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*
q,0]},{command:"L",values:[.45*q-E,.5*k+E]},{command:"L",values:[0,.5*k-E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*k-E]},{command:"L",values:[.45*q-E,.5*k+E]},{command:"L",values:[.45*q,k]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*q,k]},{command:"L",values:[q,.5*k-E]},{command:"L",values:[.45*q-E,.5*k+E]},{command:"Z",values:[]}]}]};g.getExtrudeSymbolShapes=function(k){const q=g.SymbolSizeDefaults.size;k*=.5;return[{type:"path",path:[{command:"M",
values:[0,.35*q]},{command:"L",values:[.3*q,.7*q]},{command:"L",values:[.3*q,.7*q+k]},{command:"L",values:[0,.7*q+k-.35*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*q,.7*q]},{command:"L",values:[.3*q,.7*q+k]},{command:"L",values:[q,k]},{command:"L",values:[q,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*q,0]},{command:"L",values:[q,0]},{command:"L",values:[.3*q,.7*q]},{command:"L",values:[0,.35*q]},{command:"Z",values:[]}]}]};g.getInvertedConeShapes=
function(k){let q=k;q=q<g.SymbolSizeDefaults.size?q-3:q-6;const E=.15*q,z=q;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[.5*z,k-E]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*q,cy:0,rx:.5*q,ry:E}]};g.getPathSymbolShapes=function(k,q,E){var z=g.SymbolSizeDefaults.size;let H=z,G=z;1>k?H*=.75:1<k&&(G*=1.25);k=z;q&&E&&(H=G=k=z=0);return[{type:"path",path:[{command:"M",values:[k,0]},{command:"L",values:[E?k:.875*k,0]},{command:"L",values:[E?
H-.5*k:0,G-.5*z]},{command:"L",values:[H-.5*k,G-.5*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[k,0]},{command:"L",values:[k,q?0:.125*z]},{command:"L",values:[H-.5*k,q?G-.5*z:z]},{command:"L",values:[H-.5*k,G-.5*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[H-.5*k,G-.5*z]},{command:"L",values:[E?H-.5*k:0,G-.5*z]},{command:"L",values:[E?H-.5*k:0,q?G-.5*z:z]},{command:"L",values:[H-.5*k,q?G-.5*z:z]},{command:"Z",values:[]}]}]};g.getTetrahedronShapes=
function(k){var q=k;q=q<g.SymbolSizeDefaults.size?q-1:q-2;return[{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[k,q]},{command:"L",values:[.45*k,.6*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[.45*k,.6*q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,q]},{command:"L",values:[.45*k,.6*q]},{command:"L",values:[k,q]},{command:"Z",values:[]}]}]};g.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
g.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(g,p,m,k,q,E,z,H,G,v){function n(a,h,d){return a?m(a,{responseType:"image"}).then(e=>{e=e.data;const r=e.width,B=e.height,f=r/B;let t=h;d&&(t=Math.min(t,Math.max(r,B)));return{image:e,width:1>=f?Math.ceil(t*f):t,height:1>=f?t:Math.ceil(t/f)}}):Promise.reject(new q("renderUtils: imageDataSize","href not provided."))}const b=H.createProjector();g.renderSymbol=function(a,h,d){const e=Math.ceil(h[0]);h=Math.ceil(h[1]);if(!a.some(B=>!!B.length))return null;const r=d&&d.node||document.createElement("div");
null!=d.opacity&&(r.style.opacity=d.opacity.toString());null!=d.effectView&&(r.style.filter=v.getCSSFilterFromEffectList(d.effectView));b.append(r,G.renderSVG.bind(null,a,e,h,d));return r};g.tintImageWithColor=function(a,h,d,e,r){return n(a,h,r).then(B=>{const f=B.width?B.width:h,t=B.height?B.height:h;var w;if(w=B.image)w=d&&"ignore"!==e?"multiply"===e&&255===d.r&&255===d.g&&255===d.b&&1===d.a?!1:!0:!1;if(w){var C=B.image.width,x=B.image.height;E("edge")&&/\.svg$/i.test(a)&&(--C,--x);w=Math.ceil(f);
var u=Math.ceil(t);var D=document.createElement("canvas");D.width=w;D.height=u;D.style.width=w+"px";D.style.height=u+"px";D=D.getContext("2d");D.clearRect(0,0,w,u);w=D;w.drawImage(B.image,0,0,C,x,0,0,f,t);u=w.getImageData(0,0,f,t);D=[d.r/255,d.g/255,d.b/255,d.a];const S=k.toHSV(d);for(let T=0;T<u.data.length;T+=4){B=u.data;C=T;x=D;var J=S;switch(e){case "multiply":B[C+0]*=x[0];B[C+1]*=x[1];B[C+2]*=x[2];B[C+3]*=x[3];break;default:{const P=k.toHSV({r:B[C+0],g:B[C+1],b:B[C+2]});P.h=J.h;P.s=J.s;P.v=P.v/
100*J.v;J=k.toRGB(P);B[C+0]=J.r;B[C+1]=J.g;B[C+2]=J.b;B[C+3]*=x[3]}}}w.putImageData(u,0,0);a=w.canvas.toDataURL("image/png")}else(w=p.id&&p.id.findCredential(a))&&w.token&&(B=a.includes("?")?"\x26":"?",a=`${a}${B}token=${w.token}`);return{url:a,width:f,height:t}}).catch(()=>({url:a,width:h,height:h}))};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(g){function p(v,n){const b=[];let a,h;if(v[0].length!==
n.length)throw"dimensions do not match";const d=v.length,e=v[0].length;let r=0;for(a=0;a<d;a++){for(h=r=0;h<e;h++)r+=v[a][h]*n[h];b.push(r)}return b}function m(v){v=[v.r/255,v.g/255,v.b/255].map(n=>.04045>=n?n/12.92:((n+.055)/1.055)**2.4);v=p(H,v);return{x:100*v[0],y:100*v[1],z:100*v[2]}}function k(v){v=p(G,[v.x/100,v.y/100,v.z/100]).map(n=>Math.min(1,Math.max(.0031308>=n?12.92*n:1.055*n**(1/2.4)-.055,0)));return{r:Math.round(255*v[0]),g:Math.round(255*v[1]),b:Math.round(255*v[2])}}function q(v){v=
[v.x/95.047,v.y/100,v.z/108.883].map(n=>n>(6/29)**3?n**(1/3):1/3*(29/6)**2*n+4/29);return{l:116*v[1]-16,a:500*(v[0]-v[1]),b:200*(v[1]-v[2])}}function E(v){const n=v.l;v=[(n+16)/116+v.a/500,(n+16)/116,(n+16)/116-v.b/200].map(b=>b>6/29?b**3:3*(6/29)**2*(b-4/29));return{x:95.047*v[0],y:100*v[1],z:108.883*v[2]}}function z(v){if("r"in v&&"g"in v&&"b"in v)return v;if("l"in v&&"c"in v&&"h"in v){var n=v.c;var b=v.h;n={l:v.l,a:n*Math.cos(b),b:n*Math.sin(b)};return k(E(n))}if("l"in v&&"a"in v&&"b"in v)return k(E(v));
if("x"in v&&"y"in v&&"z"in v)return k(v);if("h"in v&&"s"in v&&"v"in v){{b=(v.h+360)%360/60;n=v.v/100*255;v=v.s/100*n;const a=v*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:v,g:a,b:0};break;case 1:b={r:a,g:v,b:0};break;case 2:b={r:0,g:v,b:a};break;case 3:b={r:0,g:a,b:v};break;case 4:b={r:a,g:0,b:v};break;case 5:case 6:b={r:v,g:0,b:a};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+n-v);b.g=Math.round(b.g+n-v);b.b=Math.round(b.b+n-v);n=b}return n}return v}const H=[[.4124,.3576,.1805],[.2126,
.7152,.0722],[.0193,.1192,.9505]],G=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];g.darken=function(v,n){v=q(m(v));v.l*=1-n;return k(E(v))};g.toHSV=function(v){if("h"in v&&"s"in v&&"v"in v)return v;var n=z(v);{v=n.r;const b=n.g,a=n.b;n=Math.max(v,b,a);const h=n-Math.min(v,b,a);v=0===h?0:n===v?(b-a)/h%6:n===b?(a-v)/h+2:(v-b)/h+4;0>v&&(v+=6);v={h:60*v,s:100*(0===h?0:h/n),v:100/255*n}}return v};g.toLAB=function(v){return"l"in v&&"a"in v&&"b"in v?v:q(m(z(v)))};g.toLCH=function(v){if(!("l"in
v&&"c"in v&&"h"in v)){{var n=q(m(z(v)));v=n.l;var b=n.a;const a=n.b;n=Math.sqrt(b*b+a*a);b=Math.atan2(a,b);b=0<b?b:b+2*Math.PI;v={l:v,c:n,h:b}}}return v};g.toRGB=z;g.toXYZ=function(v){return"x"in v&&"y"in v&&"z"in v?v:m(z(v))};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(g,p,m,k,q,E,z){function H(l,A){l*=L/180;return Math.abs(A*Math.sin(l))+Math.abs(A*Math.cos(l))}function G(l){return l.map(A=>`${A.command} ${A.values.join(" ")}`).join(" ").trim()}function v(l,A,y,K){if(l){if("circle"===l.type)return z.tsx("circle",{fill:A,"fill-rule":"evenodd",stroke:y.color,"stroke-width":y.width,"stroke-linecap":y.cap,"stroke-linejoin":y.join,"stroke-dasharray":y.dashArray,"stroke-dashoffset":y.dashOffset,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,r:l.r});if("ellipse"===
l.type)return z.tsx("ellipse",{fill:A,"fill-rule":"evenodd",stroke:y.color,"stroke-width":y.width,"stroke-linecap":y.cap,"stroke-linejoin":y.join,"stroke-dasharray":y.dashArray,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,rx:l.rx,ry:l.ry});if("rect"===l.type)return z.tsx("rect",{fill:A,"fill-rule":"evenodd",stroke:y.color,"stroke-width":y.width,"stroke-linecap":y.cap,"stroke-linejoin":y.join,"stroke-dasharray":y.dashArray,"stroke-miterlimit":"4",x:l.x,y:l.y,width:l.width,height:l.height});if("image"===
l.type)return z.tsx("image",{href:l.src,x:l.x,y:l.y,width:l.width,height:l.height,preserveAspectRatio:"none"});if("path"===l.type)return l="string"!==typeof l.path?G(l.path):l.path,z.tsx("path",{fill:A,"fill-rule":"evenodd",stroke:y.color,"stroke-width":y.width,"stroke-linecap":y.cap,"stroke-linejoin":y.join,"stroke-dasharray":y.dashArray,"stroke-miterlimit":"4",d:l});if("text"===l.type)return z.tsx("text",{"alignment-baseline":K.alignBaseline,fill:A,"fill-rule":"evenodd",stroke:y.color,"stroke-width":y.width,
"stroke-linecap":y.cap,"stroke-linejoin":y.join,"stroke-dasharray":y.dashArray,"stroke-miterlimit":"4","text-anchor":K.align,"text-decoration":K.decoration,kerning:K.kerning,rotate:K.rotate,"text-rendering":T,"font-style":K.font.style,"font-variant":K.font.variant,"font-weight":K.font.weight,"font-size":K.font.size,"font-family":K.font.family,x:l.x,y:l.y},l.text)}return null}function n(l){const A={fill:"none",pattern:null,linearGradient:null};if(l)if("type"in l&&"pattern"===l.type){var y=`patternId-${++J}`;
A.fill=`url(#${y})`;A.pattern={id:y,x:l.x,y:l.y,width:l.width,height:l.height,image:{x:0,y:0,width:l.width,height:l.height,href:l.src}}}else"type"in l&&"linear"===l.type?(y=`linearGradientId-${++S}`,A.fill=`url(#${y})`,A.linearGradient={id:y,x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stops:l.colors.map(K=>({offset:K.offset,color:K.color&&(new p(K.color)).toString()}))}):l&&(l=new p(l),A.fill=l.toString());return A}function b(l){const A={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(l&&(null!=l.width&&(A.width=l.width),l.cap&&(A.cap=l.cap),l.join&&(A.join=l.join.toString()),l.color&&(A.color=(new p(l.color)).toString()),l.dashArray&&(A.dashArray=l.dashArray),l.dashArray&&(A.dashOffset=l.dashoffset),l.style)){let K=null;l.style in Z&&(K=Z[l.style]);if(Array.isArray(K)){K=K.slice(0);for(var y=0;y<K.length;++y)K[y]*=l.width;if("butt"!==l.cap){for(y=0;y<K.length;y+=2)K[y]-=l.width,1>K[y]&&(K[y]=1);for(y=1;y<K.length;y+=2)K[y]+=l.width}K=K.join(",")}A.dashArray=K}return A}function a(l,
A){const y={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};l&&(y.align=l.align,y.alignBaseline=l.alignBaseline,y.decoration=l.decoration,y.kerning=l.kerning?"auto":"0",y.rotate=l.rotated?"90":"0",y.font.style=A.style||"normal",y.font.variant=A.variant||"normal",y.font.weight=A.weight||"normal",y.font.size=A.size&&A.size.toString()||"10pt",y.font.family=A.family||"serif");return y}function h(l){const {pattern:A,linearGradient:y}=
l;return A?z.tsx("pattern",{id:A.id,patternUnits:"userSpaceOnUse",x:A.x,y:A.y,width:A.width,height:A.height},z.tsx("image",{x:A.image.x,y:A.image.y,width:A.image.width,height:A.image.height,href:A.image.href})):y?(l=y.stops.map((K,U)=>z.tsx("stop",{key:`${U}-stop`,offset:K.offset,"stop-color":K.color})),z.tsx("linearGradient",{id:y.id,gradientUnits:"userSpaceOnUse",x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2},l)):null}function d(l,A){if(!l)return null;const y=[];for(const K of l){const {shape:U,fill:ba,stroke:ea,
font:na}=K;l=n(ba);const ha=b(ea),la="text"===U.type?a(U,na):null;y.push(v(U,l.fill,ha,la))}return z.tsx("mask",{id:A,maskUnits:"userSpaceOnUse"},z.tsx("g",null,y))}function e(l,A,y){return q.translate(l,q.identity(l),[A,y])}function r(l,A,y,K,U){q.scale(l,q.identity(l),[A,y]);l[4]=l[4]*A-K*A+K;l[5]=l[5]*y-U*y+U;return l}function B(l,A,y,K){var U=A%360*Math.PI/180;q.rotate(l,q.identity(l),U);A=Math.cos(U);U=Math.sin(U);const ba=l[4],ea=l[5];l[4]=ba*A-ea*U+K*U-y*A+y;l[5]=ea*A+ba*U-y*U-K*A+K;return l}
function f(l,A){Q&&"left"in Q?(Q.left>l&&(Q.left=l),Q.right<l&&(Q.right=l),Q.top>A&&(Q.top=A),Q.bottom<A&&(Q.bottom=A)):Q={left:l,bottom:A,right:l,top:A}}function t(l){const A=l.args,y=A.length;switch(l.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<y;l+=2)f(A[l],A[l+1]);O.x=A[y-2];O.y=A[y-1];break;case "H":for(l=0;l<y;++l)f(A[l],O.y);O.x=A[y-1];break;case "V":for(l=0;l<y;++l)f(O.x,A[l]);O.y=A[y-1];break;case "m":l=0;"x"in O||(f(O.x=A[0],O.y=A[1]),l=2);for(;l<y;l+=2)f(O.x+=
A[l],O.y+=A[l+1]);break;case "l":case "t":for(l=0;l<y;l+=2)f(O.x+=A[l],O.y+=A[l+1]);break;case "h":for(l=0;l<y;++l)f(O.x+=A[l],O.y);break;case "v":for(l=0;l<y;++l)f(O.x,O.y+=A[l]);break;case "c":for(l=0;l<y;l+=6)f(O.x+A[l],O.y+A[l+1]),f(O.x+A[l+2],O.y+A[l+3]),f(O.x+=A[l+4],O.y+=A[l+5]);break;case "s":case "q":for(l=0;l<y;l+=4)f(O.x+A[l],O.y+A[l+1]),f(O.x+=A[l+2],O.y+=A[l+3]);break;case "A":for(l=0;l<y;l+=7)f(A[l+5],A[l+6]);O.x=A[y-2];O.y=A[y-1];break;case "a":for(l=0;l<y;l+=7)f(O.x+=A[l+5],O.y+=A[l+
6])}}function w(l,A,y){const K=P[l.toLowerCase()];"number"===typeof K&&(K?A.length>=K&&(l={action:l,args:A.slice(0,A.length-A.length%K)},y.push(l),t(l)):(l={action:l,args:[]},y.push(l),t(l)))}function C(l){const A={x:0,y:0,width:0,height:0};if("circle"===l.type)A.x=l.cx-l.r,A.y=l.cy-l.r,A.width=2*l.r,A.height=2*l.r;else if("ellipse"===l.type)A.x=l.cx-l.rx,A.y=l.cy-l.ry,A.width=2*l.rx,A.height=2*l.ry;else if("image"===l.type||"rect"===l.type)A.x=l.x,A.y=l.y,A.width=l.width,A.height=l.height;else if("path"===
l.type){{const U=("string"!==typeof l.path?G(l.path):l.path).match(X),ba=[];Q={};O={};if(U){l="";var y=[],K=U.length;for(let ea=0;ea<K;++ea){const na=U[ea],ha=parseFloat(na);isNaN(ha)?(l&&w(l,y,ba),y=[],l=na):y.push(ha)}w(l,y,ba);l={x:0,y:0,width:0,height:0};Q&&"left"in Q&&(l.x=Q.left,l.y=Q.top,l.width=Q.right-Q.left,l.height=Q.bottom-Q.top)}else l=null}A.x=l.x;A.y=l.y;A.width=l.width;A.height=l.height}return A}function x(l){const A={x:0,y:0,width:0,height:0};let y=null,K=Number.NEGATIVE_INFINITY,
U=Number.NEGATIVE_INFINITY;for(const ba of l)y?(y.x=Math.min(y.x,ba.x),y.y=Math.min(y.y,ba.y),K=Math.max(K,ba.x+ba.width),U=Math.max(U,ba.y+ba.height)):(y=A,y.x=ba.x,y.y=ba.y,K=ba.x+ba.width,U=ba.y+ba.height);y&&(y.width=K-y.x,y.height=U-y.y);return y}function u(l,A,y,K,U,ba,ea,na,ha){var la=(ea&&ba?H(ba,A):A)/2,pa=(ea&&ba?H(ba,y):y)/2;ha&&(la=ha[0],pa=ha[1],la=(ea&&ba?H(ba,la):la)/2,pa=(ea&&ba?H(ba,pa):pa)/2);const qa=l.width+K,M=l.height+K;ea=k.create();ha=k.create();var V=!1;if(U&&0!==qa&&0!==
M){U=A!==y?A/y:qa/M;V=A>y?A:y;let ca=1,ia=1;isNaN(V)||(1<U?(ca=V/qa,ia=V/U/M):(ia=V/M,ca=V*U/qa));q.multiply(ha,ha,r(ea,ca,ia,la,pa));V=!0}U=l.x+(qa-K)/2;l=l.y+(M-K)/2;q.multiply(ha,ha,e(ea,la-U,pa-l));!V&&(qa>A||M>y)&&(K=qa/A>M/y,A=(K?A:y)/(K?qa:M),q.multiply(ha,ha,r(ea,A,A,U,l)));ba&&q.multiply(ha,ha,B(ea,ba,U,l));na&&q.multiply(ha,ha,e(ea,na[0],na[1]));return`matrix(${ha[0]},${ha[1]},${ha[2]},${ha[3]},${ha[4]},${ha[5]})`}function D(l,A,y){l=null==l?void 0:l.effects.find(na=>"bloom"===na.type);
if(!l)return null;const {strength:K,radius:U}=l;l=0<K?U:0;const ba=(K+l)*A,ea=4*K+1;return z.tsx("filter",{id:`bloom${y}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},z.tsx("feMorphology",{operator:"dilate",radius:(K+.5*l)*5**(A/100)*(.4+A/100),in:"SourceGraphic",result:"dilate"}),z.tsx("feGaussianBlur",{in:"dilate",stdDeviation:ba/25,result:"blur"}),z.tsx("feGaussianBlur",{in:"blur",stdDeviation:ba/50,result:"intensityBlur"}),z.tsx("feComponentTransfer",{in:"SourceGraphic",
result:"intensityBrightness"},z.tsx("feFuncR",{type:"linear",slope:ea}),z.tsx("feFuncG",{type:"linear",slope:ea}),z.tsx("feFuncB",{type:"linear",slope:ea})),z.tsx("feMerge",null,z.tsx("feMergeNode",{in:"intensityBlur"}),z.tsx("feMergeNode",{in:"intensityBrightness"}),z.tsx("feGaussianBlur",{stdDeviation:K/10})))}let J=0,S=0;E=m("android");const T=m("chrome")||E&&4<=E?"auto":"optimizeLegibility",P={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},X=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Q=
{},O={};const Z={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},L=Math.PI;let I=1;g.computeBBox=x;g.generateFillAttributes=n;g.generateStrokeAttributes=b;g.generateTextAttributes=a;g.getBoundingBox=C;g.getTransformMatrix=u;g.renderDef=h;g.renderSVG=function(l,A,y,K={}){const U=[],ba=[],ea=++I,na=D(K.effectView,A,ea);var ha=null;if(na){var la;ha=
null==(la=K.effectView)?void 0:la.effects.find(V=>"bloom"===V.type);ha=(ha.strength?ha.strength+ha.radius/2:0)/3;ha=[Math.max(A+A*ha,10),Math.max(y+y*ha,10)]}for(la=0;la<l.length;la++){var pa=l[la];const V=[];var qa=[],M=0;let ca=0,ia=0;for(const ka of pa){const {shape:ra,fill:va,stroke:Ba,font:Da,offset:Ga}=ka;K.ignoreStrokeWidth||(M+=Ba&&Ba.width||0);pa=n(va);const Fa=b(Ba),ya="text"===ra.type?a(ra,Da):null;U.push(h(pa));V.push(v(ra,pa.fill,Fa,ya));qa.push(C(ra));Ga&&(ca+=Ga[0],ia+=Ga[1])}qa=u(x(qa),
A,y,M,K.scale,K.rotation,K.useRotationSize,[ca,ia],ha);M=null;K.masking&&(M=`mask-${la}`,U.push(d(K.masking[la],M)),M=`url(#${M})`);ba.push(M?z.tsx("g",{mask:M},z.tsx("g",{transform:qa},V)):z.tsx("g",{transform:qa},V))}K.useRotationSize&&K.rotation&&(A=H(K.rotation,A),y=H(K.rotation,y));na&&(A=ha[0],y=ha[1]);return z.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:A,height:y,style:"display: block;"},na,z.tsx("defs",null,U),na?z.tsx("g",{filter:`url(#bloom${ea})`},ba):ba)};g.renderShape=v;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(g){function p(){const G=new Float32Array(6);G[0]=1;G[3]=1;return G}function m(G){const v=new Float32Array(6);v[0]=G[0];v[1]=G[1];v[2]=G[2];v[3]=G[3];v[4]=G[4];v[5]=G[5];return v}function k(G,v,n,b,a,h){const d=new Float32Array(6);d[0]=G;d[1]=v;d[2]=n;d[3]=b;d[4]=a;d[5]=h;return d}function q(G,v){return new Float32Array(G,v,6)}function E(G,v,n,b){const a=v[b];v=v[b+1];G[b]=
n[0]*a+n[2]*v+n[4];G[b+1]=n[1]*a+n[3]*v+n[5]}function z(G,v,n,b=0,a=0,h=2){for(a=a||v.length/h;b<a;b++)E(G,v,n,b*h)}const H=Object.freeze(Object.defineProperty({__proto__:null,create:p,clone:m,fromValues:k,createView:q,transform:E,transformMany:z},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=p;g.createView=q;g.fromValues=k;g.mat2df32=H;g.transform=E;g.transformMany=z})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(g,p){function m(u,D){u[0]=D[0];u[1]=D[1];u[2]=
D[2];u[3]=D[3];u[4]=D[4];u[5]=D[5];return u}function k(u){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=0;u[5]=0;return u}function q(u,D,J,S,T,P,X){u[0]=D;u[1]=J;u[2]=S;u[3]=T;u[4]=P;u[5]=X;return u}function E(u,D){const J=D[0],S=D[1],T=D[2],P=D[3],X=D[4];D=D[5];let Q=J*P-S*T;if(!Q)return null;Q=1/Q;u[0]=P*Q;u[1]=-S*Q;u[2]=-T*Q;u[3]=J*Q;u[4]=(T*D-P*X)*Q;u[5]=(S*X-J*D)*Q;return u}function z(u){return u[0]*u[3]-u[1]*u[2]}function H(u,D,J){const S=D[0],T=D[1],P=D[2],X=D[3],Q=D[4];D=D[5];const O=J[0],Z=J[1],L=J[2],
I=J[3],l=J[4];J=J[5];u[0]=S*O+P*Z;u[1]=T*O+X*Z;u[2]=S*L+P*I;u[3]=T*L+X*I;u[4]=S*l+P*J+Q;u[5]=T*l+X*J+D;return u}function G(u,D,J){const S=D[0],T=D[1],P=D[2],X=D[3],Q=D[4];D=D[5];const O=Math.sin(J);J=Math.cos(J);u[0]=S*J+P*O;u[1]=T*J+X*O;u[2]=S*-O+P*J;u[3]=T*-O+X*J;u[4]=Q;u[5]=D;return u}function v(u,D,J){const S=D[1],T=D[2],P=D[3],X=D[4],Q=D[5],O=J[0];J=J[1];u[0]=D[0]*O;u[1]=S*O;u[2]=T*J;u[3]=P*J;u[4]=X;u[5]=Q;return u}function n(u,D,J){const S=D[0],T=D[1],P=D[2],X=D[3],Q=D[4];D=D[5];const O=J[0];
J=J[1];u[0]=S;u[1]=T;u[2]=P;u[3]=X;u[4]=S*O+P*J+Q;u[5]=T*O+X*J+D;return u}function b(u,D){const J=Math.sin(D);D=Math.cos(D);u[0]=D;u[1]=J;u[2]=-J;u[3]=D;u[4]=0;u[5]=0;return u}function a(u,D){u[0]=D[0];u[1]=0;u[2]=0;u[3]=D[1];u[4]=0;u[5]=0;return u}function h(u,D){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=D[0];u[5]=D[1];return u}function d(u){return"mat2d("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"}function e(u){return Math.sqrt(u[0]**2+u[1]**2+u[2]**2+u[3]**2+u[4]**2+u[5]**2+1)}function r(u,
D,J){u[0]=D[0]+J[0];u[1]=D[1]+J[1];u[2]=D[2]+J[2];u[3]=D[3]+J[3];u[4]=D[4]+J[4];u[5]=D[5]+J[5];return u}function B(u,D,J){u[0]=D[0]-J[0];u[1]=D[1]-J[1];u[2]=D[2]-J[2];u[3]=D[3]-J[3];u[4]=D[4]-J[4];u[5]=D[5]-J[5];return u}function f(u,D,J){u[0]=D[0]*J;u[1]=D[1]*J;u[2]=D[2]*J;u[3]=D[3]*J;u[4]=D[4]*J;u[5]=D[5]*J;return u}function t(u,D,J,S){u[0]=D[0]+J[0]*S;u[1]=D[1]+J[1]*S;u[2]=D[2]+J[2]*S;u[3]=D[3]+J[3]*S;u[4]=D[4]+J[4]*S;u[5]=D[5]+J[5]*S;return u}function w(u,D){return u[0]===D[0]&&u[1]===D[1]&&u[2]===
D[2]&&u[3]===D[3]&&u[4]===D[4]&&u[5]===D[5]}function C(u,D){const J=u[0],S=u[1],T=u[2],P=u[3],X=u[4];u=u[5];const Q=D[0],O=D[1],Z=D[2],L=D[3],I=D[4];D=D[5];return Math.abs(J-Q)<=p.EPSILON*Math.max(1,Math.abs(J),Math.abs(Q))&&Math.abs(S-O)<=p.EPSILON*Math.max(1,Math.abs(S),Math.abs(O))&&Math.abs(T-Z)<=p.EPSILON*Math.max(1,Math.abs(T),Math.abs(Z))&&Math.abs(P-L)<=p.EPSILON*Math.max(1,Math.abs(P),Math.abs(L))&&Math.abs(X-I)<=p.EPSILON*Math.max(1,Math.abs(X),Math.abs(I))&&Math.abs(u-D)<=p.EPSILON*Math.max(1,
Math.abs(u),Math.abs(D))}const x=Object.freeze(Object.defineProperty({__proto__:null,copy:m,identity:k,set:q,invert:E,determinant:z,multiply:H,rotate:G,scale:v,translate:n,fromRotation:b,fromScaling:a,fromTranslation:h,str:d,frob:e,add:r,subtract:B,multiplyScalar:f,multiplyScalarAndAdd:t,exactEquals:w,equals:C,mul:H,sub:B},Symbol.toStringTag,{value:"Module"}));g.add=r;g.copy=m;g.determinant=z;g.equals=C;g.exactEquals=w;g.frob=e;g.fromRotation=b;g.fromScaling=a;g.fromTranslation=h;g.identity=k;g.invert=
E;g.mat2d=x;g.mul=H;g.multiply=H;g.multiplyScalar=f;g.multiplyScalarAndAdd=t;g.rotate=G;g.scale=v;g.set=q;g.str=d;g.sub=B;g.subtract=B;g.translate=n})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(g,p){g.extractSafeScaleBounds=function(m){var k,q;const E=m.effectiveScaleRange;m=null!=(k=null==E?void 0:E.minScale)?k:0;k=null!=(q=null==E?void 0:E.maxScale)?q:0;return{minScale:m,maxScale:k}};g.highlightsSupported=function(m){return m&&"function"===typeof m.highlight};
g.isScaleRangeActive=function(m,k){return 0<m||0<k};g.occludeesSupported=function(m){return m&&"function"===typeof m.maskOccludee};g.scaleBoundsPredicate=function(m,k,q){return p.isNone(m)||m>q&&(0===k||m<k)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(g,p){const m=new p({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),
k=new p({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),q=new p({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});p=new p({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});g.all=[m,k,p,q];g.browseClusteredFeatures=p;g.removeSelectedFeature=k;g.zoomToClusteredFeatures=q;g.zoomToFeature=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(g,p,m,k,q,E){function z(r){const {selectedFeature:B,location:f,view:t}=r;return t?"3d"===t.type?B||f:r.get("selectedFeature.geometry")||f:null}function H(r){var B,f;return(null==r?void 0:r.isAggregate)&&"cluster"===(null==r?void 0:null==(B=r.sourceLayer)?void 0:null==(f=B.featureReduction)?void 0:f.type)}function G(r,
B){if("3d"!==(null==B?void 0:B.type)||!r||"esri.Graphic"!==r.declaredClass)return!0;if((B=B.getViewForGraphic(r))&&"whenGraphicBounds"in B){let f=!1;B.whenGraphicBounds(r,{useViewElevation:!0}).then(t=>{f=!t||!t.boundingBox||t.boundingBox[0]===t.boundingBox[3]&&t.boundingBox[1]===t.boundingBox[4]&&t.boundingBox[2]===t.boundingBox[5]}).catch(()=>{const t=new m("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:r});e.error(t)});return f}return!0}function v(r){return n.apply(this,
arguments)}function n(){n=p._asyncToGenerator(function*(r){const {location:B,selectedFeature:f,view:t,zoomFactor:w}=r,C=z(r);if(!C)throw r=new m("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:C,view:t}),e.error(r),r;const x=t.scale/w,u=r.get("selectedFeature.geometry")||B,D=u&&"point"===u.type&&G(f,t);E.zoomToFeature.active=!0;E.zoomToFeature.disabled=!0;try{yield r.view.goTo({target:C,scale:D?x:void 0})}finally{E.zoomToFeature.active=!1,E.zoomToFeature.disabled=
!1,r.zoomToLocation=null,D&&(r.location=u)}});return n.apply(this,arguments)}function b(r){return a.apply(this,arguments)}function a(){a=p._asyncToGenerator(function*(r){const {selectedFeature:B,view:f}=r;if("2d"!==(null==f?void 0:f.type))throw r=new m("zoomToCluster:invalid-view","View must be 2d MapView.",{view:f}),e.error(r),r;if(!H(B))throw r=new m("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:B}),e.error(r),r;r=yield f.whenLayerView(B.sourceLayer);
const t=r.createQuery();t.aggregateIds=[B.getObjectId()];E.zoomToClusteredFeatures.active=!0;E.zoomToClusteredFeatures.disabled=!0;({extent:r}=yield r.queryExtent(t));yield f.goTo({target:r});E.zoomToClusteredFeatures.active=!1;E.zoomToClusteredFeatures.disabled=!1});return a.apply(this,arguments)}function h(){h=p._asyncToGenerator(function*(r){const {selectedFeature:B,view:f}=r;var t=yield f.whenLayerView(B.sourceLayer);const w=t.createQuery();w.aggregateIds=[B.getObjectId()];({extent:t}=yield t.queryExtent(w));
r.selectedClusterBoundaryFeature.geometry=t;f.graphics.add(r.selectedClusterBoundaryFeature)});return h.apply(this,arguments)}function d(){d=p._asyncToGenerator(function*(r){const {selectedFeature:B,view:f}=r;r=yield f.whenLayerView(B.sourceLayer);const t=r.createQuery();t.aggregateIds=[B.getObjectId()];E.browseClusteredFeatures.active=!0;E.browseClusteredFeatures.disabled=!0;({features:r}=yield r.queryFeatures(t));E.browseClusteredFeatures.active=!1;E.browseClusteredFeatures.disabled=!1;f.popup.open({features:[B].concat(r),
featureMenuOpen:!0})});return d.apply(this,arguments)}const e=k.getLogger("esri.widgets.Popup.PopupViewModel");g.browseAggregateFeatures=function(r){return d.apply(this,arguments)};g.displayClusterExtent=function(r){return h.apply(this,arguments)};g.getSelectedTarget=z;g.isClusterFeature=H;g.isZoomScreenSize=G;g.removeClusteredFeaturesForBrowsing=function(r){const B=r.features.filter(f=>H(f));B.length&&(r.features=B)};g.triggerAction=r=>{const {event:B,view:f}=r;({action:r}=B);var t=f&&f.popup;if(!r)return Promise.reject(new m("trigger-action:missing-arguments",
"Event has no action"));if(!t)return Promise.reject(new m("trigger-action:missing-arguments","view.popup is missing"));const {disabled:w,id:C}=r;if(!C)return Promise.reject(new m("trigger-action:invalid-action","action.id is missing"));if(w)return Promise.reject(new m("trigger-action:invalid-action","Action is disabled"));if(C===E.zoomToFeature.id)return v(t.viewModel).catch(q.throwIfNotAbortError);if(C===E.zoomToClusteredFeatures.id)return b(t.viewModel);if(C===E.browseClusteredFeatures.id)return t.featureMenuOpen=
!t.featureMenuOpen,t.viewModel.browseClusterEnabled=!t.viewModel.browseClusterEnabled,Promise.resolve();t.viewModel.browseClusterEnabled=!1;if(C===E.removeSelectedFeature.id){t.close();({selectedFeature:r}=t);if(!r)return Promise.reject(new m(`trigger-action:${E.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:r}));({sourceLayer:t}=r);t?t.remove(r):f.graphics.remove(r)}return Promise.resolve()};g.zoomToClusterExtent=b;g.zoomToLocation=v;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,p,m,k,q,E,z,H){g.GoToMixin=G=>{G=function(v){function n(...b){b=v.call(this,...b)||this;b.goToOverride=null;b.view=null;return b}p._inheritsLoose(n,v);
n.prototype.callGoTo=function(b){const {view:a}=this;return this.goToOverride?this.goToOverride(a,b):a.goTo(b.target,b.options)};return n}(G);m.__decorate([k.property()],G.prototype,"goToOverride",void 0);m.__decorate([k.property()],G.prototype,"view",void 0);return G=m.__decorate([H.subclass("esri.widgets.support.GoTo")],G)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/set ../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n){g.PopupView=b=>{b=function(a){function h(){return a.apply(this,arguments)||this}p._inheritsLoose(h,a);var d=h.prototype;d.fetchPopupFeatures=function(){var e=p._asyncToGenerator(function*(r,B){yield this.when();const {location:f,queryArea:t,layerViewsAndGraphics:w,clientOnlyGraphics:C}=yield this._prepareFetchPopupFeatures(r,B);r=Promise.resolve(C);B=this._queryLayerPopupFeatures(t,w,B);const x=B.map(u=>u.promise);r=q.eachAlwaysValues([r,...x]).then(u=>Array.from(new Set(u.flat())));
return{location:f,clientOnlyGraphics:C,allGraphicsPromise:r,promisesPerLayerView:B}});return function(r,B){return e.apply(this,arguments)}}();d._queryLayerPopupFeatures=function(e,r,B){return r.map(({layerView:f,graphics:t})=>{t={clientGraphics:t,event:k.isSome(B)?B.event:null,signal:k.isSome(B)?B.signal:null,defaultPopupTemplateEnabled:k.isSome(B)?!!B.defaultPopupTemplateEnabled:!1};t=f.fetchPopupFeatures(e,t);return{layerView:f,promise:t}})};d._isValidPopupGraphic=function(e,r){return e&&!!e.getEffectivePopupTemplate(k.isSome(r)&&
r.defaultPopupTemplateEnabled)};d._prepareFetchPopupFeatures=function(){var e=p._asyncToGenerator(function*(r,B){const {clientGraphics:f,queryArea:t,location:w}=yield this._popupHitTestGraphics(r,B);r=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:C,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(f,r);return{clientOnlyGraphics:x,layerViewsAndGraphics:C,queryArea:t,location:w}});return function(r,B){return e.apply(this,arguments)}}();d._popupHitTestGraphics=function(){var e=
p._asyncToGenerator(function*(r,B){const {results:f,mapPoint:t}=yield this.popupHitTest(r);r=f.filter(C=>"graphic"===C.type&&this._isValidPopupGraphic(C.graphic,B));const w=r.length?r[0].mapPoint:null;return{clientGraphics:r.map(C=>C.graphic),queryArea:t,location:t||w}});return function(r,B){return e.apply(this,arguments)}}();d._getFetchPopupLayerViews=function(){const e=[];this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&e.push(r)});k.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&
e.push(this.graphicsView);return e.reverse()};d._isValidPopupLayerView=function(e){return k.isSome(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e};d._graphicsPerFetchPopupLayerView=function(e,r){const B=[],f=new Map;r=r.map(t=>{const w=[];"layer"in t?f.set(t.layer,w):f.set(t.graphics,w);return{layerView:t,graphics:w}});for(const t of e)(e=f.get(t.layer)||f.get(t.sourceLayer)||null)?e.push(t):B.push(t);return{layerViewsAndGraphics:r,clientOnlyGraphics:B}};return h}(b);return b=m.__decorate([n.subclass("esri.views.PopupView")],
b)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){let e=function(){function r(B,f,t,w){const C=B.targetGeometry,x=f.targetGeometry;w?"string"===typeof w&&(w=a.parse(w)||a.easingFunctions.ease):w=a.easingFunctions.ease;this.easing=w;this.duration=t;this.sCenterX=C.x;this.sCenterY=C.y;this.sScale=B.scale;this.sRotation=B.rotation;this.tCenterX=x.x;this.tCenterY=x.y;this.tScale=f.scale;this.tRotation=f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}r.prototype.applyRatio=function(B,f){var t=this.easing(f);let w,C;1<=f?(f=this.tCenterX,w=this.tCenterY,C=this.tRotation,t=this.tScale):(f=this.sCenterX+t*this.dCenterX,w=this.sCenterY+t*this.dCenterY,C=this.sRotation+t*this.dRotation,t=this.sScale+t*this.dScale);B.targetGeometry.x=f;B.targetGeometry.y=w;B.scale=t;B.rotation=C};return r}();m=function(r){function B(t){t=
r.call(this,t)||this;t.duration=200;t.transition=null;t.easing=a.easingFunctions.ease;t.view=null;t.viewpoint=null;t.viewpoint=new k({targetGeometry:new d,scale:0,rotation:0});t._updateTask=E.addFrameTask({postRender:t._postRender.bind(g._assertThisInitialized(t))});t._updateTask.pause();return t}g._inheritsLoose(B,r);var f=B.prototype;f.destroy=function(){this._updateTask.remove();this._updateTask=null};f.animate=function(t,w,C){this.stop();h.copy(this.viewpoint,w);this.transition=new e(this.viewpoint,
t.target,C&&C.duration||this.duration,C&&C.easing||this.easing);w=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};t.when(w,w);this._startTime=performance.now();this._updateTask.resume();return this.animation=t};f.animateContinous=function(t,w){this.stop();this.updateFunction=w;this.viewpoint=t;const C=new b({target:t.clone()});
t=()=>{this.animation===C&&this._updateTask&&(this.updateFunction=this.animation=null)};C.when(t,t);this._startTime=performance.now();this._updateTask.resume();return this.animation=C};f.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};f._postRender=function(t){var w=this.animation;w&&w.state!==b.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,t.deltaTime):(t=(performance.now()-this._startTime)/this.transition.duration,w=1<=t,this.transition.applyRatio(this.viewpoint,
t),w&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return B}(q);p.__decorate([z.property()],m.prototype,"animation",void 0);p.__decorate([z.property()],m.prototype,"duration",void 0);p.__decorate([z.property()],m.prototype,"transition",void 0);p.__decorate([z.property()],m.prototype,"easing",void 0);p.__decorate([z.property()],m.prototype,"view",void 0);p.__decorate([z.property()],m.prototype,"viewpoint",void 0);return m=p.__decorate([n.subclass("esri.views.2d.AnimationManager")],
m)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(g){function p(q,E,z,H){function G(e,r){var B;let f,t;f=e;for(B=0;8>B;B++){t=((b*f+n)*f+v)*f-e;if(Math.abs(t)<r)return f;var w=(3*b*f+2*n)*f+v;if(1E-6>Math.abs(w))break;f-=t/w}w=0;B=1;f=e;if(f<w)return w;if(f>B)return B;for(;w<B;){t=((b*f+n)*f+v)*f;if(Math.abs(t-e)<r)break;e>t?w=f:B=f;f=.5*(B-w)+w}return f}const v=3*q,n=3*(z-q)-v,b=1-v-n,a=3*E,h=3*(H-E)-a,d=1-a-h;return function(e,r=1E-6){e=G(e,r);return((d*e+h)*e+a)*e}}const m=
/^cubic-bezier\((.*)\)/,k={};k.ease=p(.25,.1,.25,1);k.linear=p(0,0,1,1);k.easeIn=k["ease-in"]=p(.42,0,1,1);k.easeOut=k["ease-out"]=p(0,0,.58,1);k.easeInOut=k["ease-in-out"]=p(.42,0,.58,1);g.easingFunctions=k;g.parse=function(q){let E=k[q]||null;!E&&(q=m.exec(q))&&(q=q[1].split(",").map(z=>parseFloat(z.trim())),4!==q.length||q.some(z=>isNaN(z))||(E=p.apply(p,q)));return E};g.unitBezier=p;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r){function B(M,V){return V.type?v.set(M,V.x,V.y):v.copy(M,V)}function f(M,V){return Math.max(M.width/Math.max(1,V[0]),M.height/Math.max(1,V[1]))*P(M.spatialReference)}function t(M,V,ca,ia){return w.apply(this,arguments)}function w(){w=p._asyncToGenerator(function*(M,V,ca,ia){if(!M||Array.isArray(M)&&!M.length)return null;k.isCollection(M)&&(M=M.toArray());if(Array.isArray(M)&&M.length&&"object"===typeof M[0]){var ka=M.every(Fa=>"attributes"in Fa);var ra=M.some(Fa=>
!Fa.geometry),va=M;if(ka&&ra&&V&&V.allLayerViews){ka=new Map;for(var Ba of M)M=Ba.layer,ra=ka.get(M)||[],va=Ba.attributes[M.objectIdField],null!=va&&ra.push(va),ka.set(M,ra);const Fa=[];ka.forEach((ya,nb)=>{const Xa=V.allLayerViews.find(eb=>eb.layer.id===nb.id);if("queryFeatures"in Xa){const eb=nb.createQuery();eb.objectIds=ya;eb.returnGeometry=!0;Fa.push(Xa.queryFeatures(eb))}});Ba=yield Promise.all(Fa);M=[];for(var Da of Ba)if(Da&&Da.features&&Da.features.length)for(var Ga of Da.features)q.isSome(Ga.geometry)&&
M.push(Ga.geometry);va=M}for(const Fa of va)ia=yield t(Fa,V,ca,ia);return ia}if(Array.isArray(M)&&2===M.length&&"number"===typeof M[0]&&"number"===typeof M[1])ka=new h(M);else if(M instanceof a)ka=M;else if("geometry"in M)if(M.geometry)ka=M.geometry;else if(M.layer){const Fa=M.layer;Da=V.allLayerViews.find(ya=>ya.layer.id===Fa.id);"queryFeatures"in Da&&(Ga=Fa.createQuery(),Ga.objectIds=[M.attributes[Fa.objectIdField]],Ga.returnGeometry=!0,Da=yield Da.queryFeatures(Ga),ka=q.get(Da,"features",0,"geometry"))}if(q.isNone(ka))return null;
Da="point"===ka.type?new b({xmin:ka.x,ymin:ka.y,xmax:ka.x,ymax:ka.y,spatialReference:ka.spatialReference}):ka.extent;if(!Da)return null;d.isLoaded()||d.canProjectWithoutEngine(Da.spatialReference,ca)||(yield d.load());ca=d.project(Da,ca);return ca?ia=ia?ia.union(ca):ca:null});return w.apply(this,arguments)}function C(M){if(M&&(!Array.isArray(M)||"number"!==typeof M[0])&&("object"===typeof M||Array.isArray(M)&&"object"===typeof M[0])){if("layer"in M&&M.layer&&M.layer.minScale&&M.layer.maxScale){var V=
M.layer;return{min:V.minScale,max:V.maxScale}}if(Array.isArray(M)&&M.length&&M.every(ca=>"layer"in ca)){let ca=V=0;for(const ia of M)(M=ia.layer)&&M.minScale&&M.maxScale&&(V=M.minScale<V?M.minScale:V,ca=M.maxScale>ca?M.maxScale:ca);return V&&ca?{min:V,max:ca}:null}}}function x(M,V){return r.equals(M.wkid?M:M.spatialReference||e.WGS84,V)?M:d.project(M,V)}function u(){u=p._asyncToGenerator(function*(M,V){if(!M||!V)return new m({targetGeometry:new h,scale:0,rotation:0});let ca=V.spatialReference;const {constraints:ia,
padding:ka,viewpoint:ra,size:va}=V,Ba=[ka?va[0]-ka.left-ka.right:va[0],ka?va[1]-ka.top-ka.bottom:va[1]];let Da=null;M instanceof m?Da=M:M.viewpoint?Da=M.viewpoint:M.target&&"esri.Viewpoint"===M.target.declaredClass&&(Da=M.target);let Ga=null;if(Da&&Da.targetGeometry)Ga=Da.targetGeometry;else if(M instanceof b)Ga=M;else if(M||M&&("center"in M||"extent"in M||"target"in M))Ga=(yield t(M.center,V,ca))||(yield t(M.extent,V,ca))||(yield t(M.target,V,ca))||(yield t(M,V,ca));!Ga&&ra&&ra.targetGeometry?Ga=
ra.targetGeometry:!Ga&&V.extent&&(Ga=V.extent);if(!ca){var Fa=V.spatialReference||V.extent||Ga;ca=Fa.wkid?Fa:Fa.spatialReference||e.WGS84}d.isLoaded()||r.equals(Ga.spatialReference,ca)||d.canProjectWithoutEngine(Ga,ca)||(yield d.load());Fa=x(Ga.center?Ga.center:Ga,ca);var ya=null;Da&&q.isSome(Da.targetGeometry)&&"point"===Da.targetGeometry.type?ya=Da.scale:"scale"in M&&M.scale?ya=M.scale:"zoom"in M&&-1!==M.zoom&&ia&&ia.effectiveLODs?ya=ia.zoomToScale(M.zoom):Array.isArray(Ga)||"point"===Ga.type||
"extent"===Ga.type&&0===Ga.width&&0===Ga.height?(ya=x(V.extent,ca),ya=q.isSome(ya)?f(ya,Ba):V.extent?f(V.extent,Ba):ra.scale):ya=f(x(Ga.extent,ca),Ba);if(V=C(M))V.min&&V.min>ya?ya=V.min:V.max&&V.max<ya&&(ya=V.max);V=0;Da?V=Da.rotation:M.hasOwnProperty("rotation")?V=M.rotation:ra&&(V=ra.rotation);M=new m({targetGeometry:Fa,scale:ya,rotation:V});ia&&(M=ia.fit(M),ia.constrainByGeometry(M),ia.rotationEnabled||(M.rotation=V));return M});return u.apply(this,arguments)}function D(M,V){const ca=M.targetGeometry,
ia=V.targetGeometry;ca.x=ia.x;ca.y=ia.y;ca.spatialReference=ia.spatialReference;M.scale=V.scale;M.rotation=V.rotation;return M}function J(M,V,ca){return ca?v.set(M,.5*(V[0]-ca.right+ca.left),.5*(V[1]-ca.bottom+ca.top)):v.scale(M,V,.5)}function S(M,V,ca,ia){l(M,V,ca,ia);return H.invert(M,M)}function T(M){var V=M.scale;M=M.targetGeometry;M=q.isSome(M)&&r.isValid(M.spatialReference)?1/(39.37*E.getMetersPerUnitForSR(M.spatialReference)*96):1;return V*M}function P(M){return r.isValid(M)?39.37*E.getMetersPerUnitForSR(M)*
96:1}function X(M){return(M=r.getInfo(M))?M.valid[1]-M.valid[0]:0}const Q=180/Math.PI,O=function(){const M=n.create();return function(V,ca,ia){const ka=ca.targetGeometry;B(M,ka);ca=.5*T(ca);V.xmin=M[0]-ca*ia[0];V.ymin=M[1]-ca*ia[1];V.xmax=M[0]+ca*ia[0];V.ymax=M[1]+ca*ia[1];V.spatialReference=ka.spatialReference;return V}}(),Z=function(){const M=n.create();return function(V,ca,ia){return v.sub(V,v.scale(V,ca,.5),J(M,ca,ia))}}(),L=function(){const M=G.create(),V=n.create();return function(ca,ia,ka,
ra){const va=T(ia);ia=z.toRadian(ia.rotation)||0;v.set(V,va,va);H.fromScaling(M,V);H.rotate(M,M,ia);H.translate(M,M,Z(V,ka,ra));H.translate(M,M,[0,ra.top-ra.bottom]);return v.set(ca,M[4],M[5])}}(),I=function(){const M=n.create(),V=n.create(),ca=n.create();return function(ia,ka,ra,va,Ba,Da){v.negate(M,ka);v.scale(V,ra,.5*Da);v.set(ca,1/va*Da,-1/va*Da);H.fromTranslation(ia,V);Ba&&H.rotate(ia,ia,Ba);H.scale(ia,ia,ca);H.translate(ia,ia,M);return ia}}(),l=function(){const M=n.create();return function(V,
ca,ia,ka){const ra=T(ca),va=z.toRadian(ca.rotation)||0;B(M,ca.targetGeometry);return I(V,M,ia,ra,va,ka)}}(),A=function(){const M=n.create();return function(V,ca,ia,ka){const ra=T(ca);B(M,ca.targetGeometry);return I(V,M,ia,ra,0,ka)}}(),y=function(){const M=n.create(),V=n.create(),ca=[0,0,0];return function(ia,ka,ra){v.subtract(M,ia,ka);v.normalize(M,M);v.subtract(V,ia,ra);v.normalize(V,V);v.cross(ca,M,V);ia=Math.acos(v.dot(M,V)/(v.length(M)*v.length(V)))*Q;0>ca[2]&&(ia=-ia);isNaN(ia)&&(ia=0);return ia}}(),
K=function(){const M=n.create();return function(V,ca,ia,ka){const ra=V.targetGeometry;D(V,ca);L(M,ca,ia,ka);ra.x+=M[0];ra.y+=M[1];return V}}(),U=function(){return function(M,V,ca){D(M,V);V=M.targetGeometry;V.x=ca.x;V.y=ca.y;V.spatialReference=ca.spatialReference;return M}}(),ba=function(){const M=n.create();return function(V,ca,ia,ka,ra){ra||(ra="center");v.sub(M,ia,ka);v.scale(M,M,.5);ia=M[0];ka=M[1];switch(ra){case "center":v.set(M,0,0);break;case "left":v.set(M,-ia,0);break;case "top":v.set(M,
0,ka);break;case "right":v.set(M,ia,0);break;case "bottom":v.set(M,0,-ka);break;case "top-left":v.set(M,-ia,ka);break;case "bottom-left":v.set(M,-ia,-ka);break;case "top-right":v.set(M,ia,ka);break;case "bottom-right":v.set(M,ia,-ka)}qa(V,ca,M);return V}}(),ea=function(){const M=n.create();return function(V,ca,ia,ka,ra){D(V,ca);isNaN(ia)||0===ia||(la(M,ka,ca,ra),V.scale=ca.scale*ia,pa(M,M,V,ra),qa(V,V,v.set(M,M[0]-ka[0],ka[1]-M[1])));return V}}(),na=function(){const M=n.create();return function(V,
ca,ia,ka,ra,va){D(V,ca);isNaN(ia)||0===ia||(la(M,ra,ca,va),V.scale=ca.scale*ia,V.rotation+=ka,pa(M,M,V,va),qa(V,V,v.set(M,M[0]-ra[0],ra[1]-M[1])));return V}}(),ha=function(){const M=n.create(),V=n.create();return function(ca,ia,ka,ra,va,Ba,Da){Z(V,Ba,Da);v.add(M,va,V);return ra?na(ca,ia,ka,ra,M,Ba):ea(ca,ia,ka,M,Ba)}}(),la=function(){const M=G.create();return function(V,ca,ia,ka){return v.transformMat2d(V,ca,S(M,ia,ka,1))}}(),pa=function(){const M=G.create();return function(V,ca,ia,ka){return v.transformMat2d(V,
ca,l(M,ia,ka,1))}}(),qa=function(){const M=n.create(),V=G.create();return function(ca,ia,ka){D(ca,ia);const ra=T(ia),va=ca.targetGeometry;H.fromRotation(V,z.toRadian(ia.rotation)||0);H.scale(V,V,n.fromValues(ra,ra));v.transformMat2d(M,ka,V);va.x+=M[0];va.y+=M[1];return ca}}();g.addPadding=K;g.angleBetween=y;g.centerAt=U;g.copy=D;g.create=function(M,V){return u.apply(this,arguments)};g.extentToScale=f;g.getAnchor=J;g.getExtent=O;g.getMatrix=I;g.getPaddingMapTranslation=L;g.getPaddingScreenTranslation=
Z;g.getResolution=T;g.getResolutionToScaleFactor=P;g.getTransform=l;g.getTransformNoRotation=A;g.getWorldScreenWidth=function(M,V){return Math.round(X(M)/V)};g.getWorldWidth=X;g.padAndScaleAndRotateBy=ha;g.resize=ba;g.rotateBy=function(M,V,ca){D(M,V);M.rotation+=ca;return M};g.rotateTo=function(M,V,ca){D(M,V);M.rotation=ca;return M};g.scaleAndRotateBy=na;g.scaleTo=function(M,V,ca){D(M,V);M.scale=ca;return M};g.setExtent=function(M,V,ca,ia,ka){U(M,V,ca.center);M.scale=f(ca,ia);ka&&ka.constraints&&
ka.constraints.constrain(M);return M};g.toMap=la;g.toScreen=pa;g.translateBy=qa;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df64":function(){define(["exports"],function(g){function p(){return[1,0,0,1,0,0]}function m(z){return[z[0],z[1],z[2],z[3],z[4],z[5]]}function k(z,H,G,v,n,b){return[z,H,G,v,n,b]}function q(z,H){return new Float64Array(z,H,6)}const E=Object.freeze(Object.defineProperty({__proto__:null,create:p,clone:m,fromValues:k,
createView:q},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=p;g.createView=q;g.fromValues=k;g.mat2df64=E})},"esri/chunks/vec2":function(){define(["exports","./common"],function(g,p){function m(y,K){y[0]=K[0];y[1]=K[1];return y}function k(y,K,U){y[0]=K;y[1]=U;return y}function q(y,K,U){y[0]=K[0]+U[0];y[1]=K[1]+U[1];return y}function E(y,K,U){y[0]=K[0]-U[0];y[1]=K[1]-U[1];return y}function z(y,K,U){y[0]=K[0]*U[0];y[1]=K[1]*U[1];return y}function H(y,K,U){y[0]=K[0]/U[0];y[1]=K[1]/U[1];return y}
function G(y,K){y[0]=Math.ceil(K[0]);y[1]=Math.ceil(K[1]);return y}function v(y,K){y[0]=Math.floor(K[0]);y[1]=Math.floor(K[1]);return y}function n(y,K,U){y[0]=Math.min(K[0],U[0]);y[1]=Math.min(K[1],U[1]);return y}function b(y,K,U){y[0]=Math.max(K[0],U[0]);y[1]=Math.max(K[1],U[1]);return y}function a(y,K){y[0]=Math.round(K[0]);y[1]=Math.round(K[1]);return y}function h(y,K,U){y[0]=K[0]*U;y[1]=K[1]*U;return y}function d(y,K,U,ba){y[0]=K[0]+U[0]*ba;y[1]=K[1]+U[1]*ba;return y}function e(y,K){const U=K[0]-
y[0];y=K[1]-y[1];return Math.sqrt(U*U+y*y)}function r(y,K){const U=K[0]-y[0];y=K[1]-y[1];return U*U+y*y}function B(y){const K=y[0];y=y[1];return Math.sqrt(K*K+y*y)}function f(y){const K=y[0];y=y[1];return K*K+y*y}function t(y,K){y[0]=-K[0];y[1]=-K[1];return y}function w(y,K){y[0]=1/K[0];y[1]=1/K[1];return y}function C(y,K){var U=K[0];const ba=K[1];U=U*U+ba*ba;0<U&&(U=1/Math.sqrt(U),y[0]=K[0]*U,y[1]=K[1]*U);return y}function x(y,K){return y[0]*K[0]+y[1]*K[1]}function u(y,K,U){K=K[0]*U[1]-K[1]*U[0];
y[0]=y[1]=0;y[2]=K;return y}function D(y,K,U,ba){const ea=K[0];K=K[1];y[0]=ea+ba*(U[0]-ea);y[1]=K+ba*(U[1]-K);return y}function J(y,K){K=K||1;const U=2*p.RANDOM()*Math.PI;y[0]=Math.cos(U)*K;y[1]=Math.sin(U)*K;return y}function S(y,K,U){const ba=K[0];K=K[1];y[0]=U[0]*ba+U[2]*K;y[1]=U[1]*ba+U[3]*K;return y}function T(y,K,U){const ba=K[0];K=K[1];y[0]=U[0]*ba+U[2]*K+U[4];y[1]=U[1]*ba+U[3]*K+U[5];return y}function P(y,K,U){const ba=K[0];K=K[1];y[0]=U[0]*ba+U[3]*K+U[6];y[1]=U[1]*ba+U[4]*K+U[7];return y}
function X(y,K,U){const ba=K[0];K=K[1];y[0]=U[0]*ba+U[4]*K+U[12];y[1]=U[1]*ba+U[5]*K+U[13];return y}function Q(y,K,U,ba){const ea=K[0]-U[0];K=K[1]-U[1];const na=Math.sin(ba);ba=Math.cos(ba);y[0]=ea*ba-K*na+U[0];y[1]=ea*na+K*ba+U[1];return y}function O(y,K){var U=y[0];y=y[1];const ba=K[0];K=K[1];let ea=U*U+y*y;0<ea&&(ea=1/Math.sqrt(ea));let na=ba*ba+K*K;0<na&&(na=1/Math.sqrt(na));U=(U*ba+y*K)*ea*na;return 1<U?0:-1>U?Math.PI:Math.acos(U)}function Z(y){return"vec2("+y[0]+", "+y[1]+")"}function L(y,K){return y[0]===
K[0]&&y[1]===K[1]}function I(y,K){const U=y[0];y=y[1];const ba=K[0];K=K[1];return Math.abs(U-ba)<=p.EPSILON*Math.max(1,Math.abs(U),Math.abs(ba))&&Math.abs(y-K)<=p.EPSILON*Math.max(1,Math.abs(y),Math.abs(K))}function l(y,K,U,ba,ea){let na=K[0]-U[0];U=K[1]-U[1];ea=(ba[0]*na+ba[1]*U)*(ea-1);na=ba[0]*ea;U=ba[1]*ea;y[0]=K[0]+na;y[1]=K[1]+U;return y}const A=Object.freeze(Object.defineProperty({__proto__:null,copy:m,set:k,add:q,subtract:E,multiply:z,divide:H,ceil:G,floor:v,min:n,max:b,round:a,scale:h,scaleAndAdd:d,
distance:e,squaredDistance:r,length:B,squaredLength:f,negate:t,inverse:w,normalize:C,dot:x,cross:u,lerp:D,random:J,transformMat2:S,transformMat2d:T,transformMat3:P,transformMat4:X,rotate:Q,angle:O,str:Z,exactEquals:L,equals:I,projectAndScale:l,len:B,sub:E,mul:z,div:H,dist:e,sqrDist:r,sqrLen:f},Symbol.toStringTag,{value:"Module"}));g.add=q;g.angle=O;g.ceil=G;g.copy=m;g.cross=u;g.dist=e;g.distance=e;g.div=H;g.divide=H;g.dot=x;g.equals=I;g.exactEquals=L;g.floor=v;g.inverse=w;g.len=B;g.length=B;g.lerp=
D;g.max=b;g.min=n;g.mul=z;g.multiply=z;g.negate=t;g.normalize=C;g.projectAndScale=l;g.random=J;g.rotate=Q;g.round=a;g.scale=h;g.scaleAndAdd=d;g.set=k;g.sqrDist=r;g.sqrLen=f;g.squaredDistance=r;g.squaredLength=f;g.str=Z;g.sub=E;g.subtract=E;g.transformMat2=S;g.transformMat2d=T;g.transformMat3=P;g.transformMat4=X;g.vec2=A})},"esri/chunks/vec2f64":function(){define(["exports"],function(g){function p(){return[0,0]}function m(e){return[e[0],e[1]]}function k(e,r){return[e,r]}function q(e){const r=[0,0],
B=Math.min(2,e.length);for(let f=0;f<B;++f)r[f]=e[f];return r}function E(e,r){return new Float64Array(e,r,2)}function z(){return[0,0]}function H(){return[1,1]}function G(){return[1,0]}function v(){return[0,1]}const n=[0,0],b=[1,1],a=[1,0],h=[0,1],d=Object.freeze(Object.defineProperty({__proto__:null,create:p,clone:m,fromValues:k,fromArray:q,createView:E,zeros:z,ones:H,unitX:G,unitY:v,ZEROS:n,ONES:b,UNIT_X:a,UNIT_Y:h},Symbol.toStringTag,{value:"Module"}));g.ONES=b;g.UNIT_X=a;g.UNIT_Y=h;g.ZEROS=n;g.clone=
m;g.create=p;g.createView=E;g.fromArray=q;g.fromValues=k;g.ones=H;g.unitX=G;g.unitY=v;g.vec2f64=d;g.zeros=z})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(g,p,m){return function(){function k(E){this.view=E;this._frameTaskHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;
this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;const {basemapView:z,graphicsView:H,labelManager:G,layerViews:v,state:{id:n}}=this.view;z.baseLayerViews.forEach(this._updateLayerView,this);v.forEach(this._updateLayerView,this);z.referenceLayerViews.forEach(this._updateLayerView,this);g.isSome(G)&&(G.lastUpdateId!==n&&(G.viewChange(),G.lastUpdateId=n),G.updateRequested&&G.processUpdate(this._updateParameters));
g.isSome(H)&&(H.lastUpdateId!==n&&(H.viewChange(),H.lastUpdateId=n),H.updateRequested&&H.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}var q=k.prototype;q.destroy=function(){this.stop()};q.start=function(){if(!this._frameTaskHandle){var E=this.view;this.stationary=E.stationary;this._updateParameters={state:E.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,
renderingOptions:E.renderingOptions};this._stationaryHandle=p.watch(()=>E.stationary,z=>{this.stationary=z;this.requestFrame()});this._frameTaskHandle=m.addFrameTask(this);this.requestUpdate()}};q.stop=function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};q.requestUpdate=function(){this._updateRequested||(this._updateRequested=
!0,this.requestFrame())};q.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};q._updateLayerView=function(E){const z=this.view.state,H=E.lastUpdateId;if(null==H||!this.stationary&&!E.moving)E.moving=!0,E.moveStart();H!==z.id&&E.viewChange();this.stationary&&E.moving&&(E.moving=!1,E.moveEnd());E.lastUpdateId=z.id;E.updateRequested&&E.processUpdate(this._updateParameters);"layerViews"in E&&E.layerViews.forEach(this._updateLayerView,this)};return k}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require",
"exports","../../core/Error","../../core/maybe"],function(g,p,m,k){function q(){return Promise.all([new Promise((v,n)=>g(["./webglDeps"],v,n)),new Promise((v,n)=>g(["./mapViewDeps"],v,n))])}const E=v=>Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"})),z=()=>q().then(()=>new Promise((v,n)=>g(["./layers/TileLayerView2D"],b=>v(E(b)),n))),H=()=>q().then(()=>new Promise((v,n)=>g(["./layers/FeatureLayerView2D"],b=>v(E(b)),n))),G={"base-dynamic":()=>q().then(()=>
new Promise((v,n)=>g(["./layers/BaseDynamicLayerView2D"],b=>v(E(b)),n))),"base-tile":z,"bing-maps":z,csv:H,"geo-rss":()=>q().then(()=>new Promise((v,n)=>g(["./layers/GeoRSSLayerView2D"],b=>v(E(b)),n))),feature:H,geojson:H,graphics:()=>q().then(()=>new Promise((v,n)=>g(["./layers/GraphicsLayerView2D"],b=>v(E(b)),n))),group:()=>q().then(()=>new Promise((v,n)=>g(["./layers/GroupLayerView2D"],b=>v(E(b)),n))),imagery:()=>q().then(()=>new Promise((v,n)=>g(["./layers/ImageryLayerView2D"],b=>v(E(b)),n))),
"imagery-tile":()=>q().then(()=>new Promise((v,n)=>g(["./layers/ImageryTileLayerView2D"],b=>v(E(b)),n))),kml:()=>q().then(()=>new Promise((v,n)=>g(["./layers/KMLLayerView2D"],b=>v(E(b)),n))),"map-image":()=>q().then(()=>new Promise((v,n)=>g(["./layers/MapImageLayerView2D"],b=>v(E(b)),n))),"map-notes":()=>q().then(()=>new Promise((v,n)=>g(["./layers/MapNotesLayerView2D"],b=>v(E(b)),n))),media:()=>q().then(()=>new Promise((v,n)=>g(["./layers/MediaLayerView2D"],b=>v(E(b)),n))),"ogc-feature":()=>q().then(()=>
new Promise((v,n)=>g(["./layers/OGCFeatureLayerView2D"],b=>v(E(b)),n))),"open-street-map":z,route:()=>q().then(()=>new Promise((v,n)=>g(["./layers/RouteLayerView2D"],b=>v(E(b)),n))),stream:()=>q().then(()=>new Promise((v,n)=>g(["./layers/StreamLayerView2D"],b=>v(E(b)),n))),"subtype-group":()=>q().then(()=>new Promise((v,n)=>g(["./layers/SubtypeGroupLayerView2D"],b=>v(E(b)),n))),tile:z,"vector-tile":()=>q().then(()=>new Promise((v,n)=>g(["./layers/VectorTileLayerView2D"],b=>v(E(b)),n))),wcs:()=>q().then(()=>
new Promise((v,n)=>g(["./layers/ImageryTileLayerView2D"],b=>v(E(b)),n))),"web-tile":z,wfs:H,wms:()=>q().then(()=>new Promise((v,n)=>g(["./layers/WMSLayerView2D"],b=>v(E(b)),n))),wmts:()=>q().then(()=>new Promise((v,n)=>g(["./layers/WMTSLayerView2D"],b=>v(E(b)),n))),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};p.layerView2DImporter={hasLayerViewModule:v=>k.isSome(G[v.type]),
importLayerView:v=>{var n=G[v.type];if(k.isNone(n))throw v=v.declaredClass?v.declaredClass.slice(v.declaredClass.lastIndexOf(".")+1):"Unknown",n=v.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),v=new m(`${n}:view-not-supported`,`${v} is not supported in 2D`),v;return n(v)}};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){m={base:null,key:"type",typeMap:{extent:h,polygon:d}};k=function(e){function r(f){f=e.call(this,f)||this;f.lods=null;f.minScale=0;f.maxScale=0;f.minZoom=-1;f.maxZoom=-1;f.rotationEnabled=!0;f.snapToZoom=!0;return f}g._inheritsLoose(r,e);var B=r.prototype;B.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null);this._set("_geometry",null)};B.canZoomInTo=function(f){const t=this.effectiveMaxScale;return 0===t||f>=t};B.canZoomOutTo=
function(f){const t=this.effectiveMinScale;return 0===t||f<=t};B.constrain=function(f,t){this._zoom.constrain(f,t);this._rotation.constrain(f,t);this._geometry.constrain(f,t);return f};B.constrainByGeometry=function(f){return this._geometry.constrain(f)};B.fit=function(f){return this._zoom.fit(f)};B.zoomToScale=function(f){return this._zoom.zoomToScale(f)};B.scaleToZoom=function(f){return this._zoom.scaleToZoom(f)};B.snapScale=function(f){return this._zoom.snapToClosestScale(f)};B.snapToNextScale=
function(f){return this._zoom.snapToNextScale(f)};B.snapToPreviousScale=function(f){return this._zoom.snapToPreviousScale(f)};g._createClass(r,[{key:"geometry",set:function(f){f?this._set("geometry",f):this._set("geometry",null)}},{key:"version",get:function(){var f;this.commitProperty("_zoom");this.commitProperty("_rotation");this.commitProperty("_geometry");return(null!=(f=this._get("version"))?f:0)+1}},{key:"_defaultLODs",get:function(){var f,t,w;const C=null==(f=this.view)?void 0:null==(t=f.defaultsFromMap)?
void 0:t.tileInfo;f=null==(w=this.view)?void 0:w.spatialReference;return C&&f&&C.spatialReference.equals(f)?C.lods:null}},{key:"_geometry",get:function(){var f;return new n.GeometryConstraint({geometry:this.geometry,spatialReference:null==(f=this.view)?void 0:f.spatialReference})}},{key:"_rotation",get:function(){return new b({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const f=this._get("_zoom"),t=this.lods||this._defaultLODs,w=this.minZoom,C=this.maxZoom,x=this.minScale,
u=this.maxScale,D=this.snapToZoom;return f&&f.lods===t&&f.minZoom===w&&f.maxZoom===C&&f.minScale===x&&f.maxScale===u&&f.snapToZoom===D?f:new a({lods:t,minZoom:w,maxZoom:C,minScale:x,maxScale:u,snapToZoom:D})}}]);return r}(k);p.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],k.prototype,"effectiveLODs",void 0);p.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],k.prototype,"effectiveMinScale",void 0);p.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
k.prototype,"effectiveMaxScale",void 0);p.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],k.prototype,"effectiveMinZoom",void 0);p.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],k.prototype,"effectiveMaxZoom",void 0);p.__decorate([q.property({types:m,value:null})],k.prototype,"geometry",null);p.__decorate([q.property({type:[v]})],k.prototype,"lods",void 0);p.__decorate([q.property()],k.prototype,"minScale",void 0);p.__decorate([q.property()],k.prototype,
"maxScale",void 0);p.__decorate([q.property()],k.prototype,"minZoom",void 0);p.__decorate([q.property()],k.prototype,"maxZoom",void 0);p.__decorate([q.property()],k.prototype,"rotationEnabled",void 0);p.__decorate([q.property()],k.prototype,"snapToZoom",void 0);p.__decorate([q.property()],k.prototype,"view",void 0);p.__decorate([q.property({readOnly:!0})],k.prototype,"version",null);p.__decorate([q.property()],k.prototype,"_defaultLODs",null);p.__decorate([q.property({type:n.GeometryConstraint})],
k.prototype,"_geometry",null);p.__decorate([q.property({type:b})],k.prototype,"_rotation",null);p.__decorate([q.property({readOnly:!0,type:a})],k.prototype,"_zoom",null);return k=p.__decorate([G.subclass("esri.views.2d.MapViewConstraints")],k)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h){var d;const e=q.getLogger("esri.views.MapView");g.GeometryConstraint=d=function(r){function B(t){t=r.call(this,t)||this;t.geometry=null;t.spatialReference=null;return t}p._inheritsLoose(B,r);var f=B.prototype;f.constrain=function(t,w){if(E.isNone(this.normalizedGeometry))return t;w=t.targetGeometry;if("extent"===this.normalizedGeometry.type?a.extentContainsPoint(this.normalizedGeometry,w):a.polygonContainsPoint(this.normalizedGeometry,w))return t;({coordinate:w}=
h.nearestCoordinate(this.normalizedGeometry,w));if(!w)return t;t.targetGeometry=w;return t};f.clone=function(){var t,w;return new d({geometry:null==(t=this.geometry)?void 0:t.clone(),spatialReference:null==(w=this.spatialReference)?void 0:w.clone()})};p._createClass(B,[{key:"normalizedGeometry",get:function(){if(E.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return b.project(this.geometry,this.spatialReference)}catch(t){return e.error("#constraints.geometry",
"could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}}]);return B}(k);m.__decorate([z.property({constructOnly:!0})],g.GeometryConstraint.prototype,"geometry",void 0);m.__decorate([z.property({readOnly:!0})],g.GeometryConstraint.prototype,"normalizedGeometry",null);m.__decorate([z.property({constructOnly:!0})],g.GeometryConstraint.prototype,"spatialReference",void 0);g.GeometryConstraint=
d=m.__decorate([n.subclass("esri.views.2d.constraints.GeometryConstraint")],g.GeometryConstraint);Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(g,p,m,k,q){g.nearestCoordinate=function(E,z){const {spatialReference:H}=z;z=[z.x,z.y];let G=Number.POSITIVE_INFINITY,v=0,n=0;const b=[0,0];E="extent"===E.type?[[[E.xmin,E.ymin],[E.xmin,
E.ymax],[E.xmax,E.ymax],[E.xmax,E.ymin],[E.xmin,E.ymin]]]:E.rings;for(const a of E)for(E=0;E<a.length-1;E++){k.projectPointOnLine(b,z,a,E);const h=m.distance(z,b);h<G&&(G=h,v=b[0],n=b[1])}return{coordinate:new q({x:v,y:n,spatialReference:H}),distance:G}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H){var G;m=G=function(v){function n(){var a=v.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}g._inheritsLoose(n,v);var b=n.prototype;b.constrain=function(a,h){if(!this.enabled||!h)return a;this.rotationEnabled||(a.rotation=h.rotation);return a};b.clone=function(){return new G({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return n}(m);p.__decorate([k.property()],m.prototype,"enabled",void 0);p.__decorate([k.property()],m.prototype,"rotationEnabled",
void 0);return m=G=p.__decorate([H.subclass("esri.views.2d.constraints.RotationConstraint")],m)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(g,p,m,k,q,E,z,H){var G;m=G=function(v){function n(a){a=
v.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}g._inheritsLoose(n,v);var b=n.prototype;b.initialize=function(){let {lods:a,minScale:h,maxScale:d,minZoom:e,maxZoom:r}=this,B=-1,f=-1,t=!1,w=!1;0!==h&&0!==d&&h<d&&([h,d]=[d,h]);if(a&&a.length){a=a.map(x=>x.clone());a.sort((x,u)=>u.scale-x.scale);a.forEach((x,
u)=>x.level=u);for(const x of a){!t&&0<h&&h>=x.scale&&(B=x.level,t=!0);!w&&0<d&&d>=x.scale&&(f=C?C.level:-1,w=!0);var C=x}-1===e&&(e=0===h?0:B);-1===r&&(r=0===d?a.length-1:f);e=Math.max(e,0);e=Math.min(e,a.length-1);r=Math.max(r,0);r=Math.min(r,a.length-1);e>r&&([e,r]=[r,e]);h=a[e].scale;d=a[r].scale;a.splice(0,e);a.splice(r-e+1,a.length);a.forEach((x,u)=>{this._lodByScale[x.scale]=x;this._scales[u]=x.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",
r)}this._set("effectiveMinScale",h);this._set("effectiveMaxScale",d)};b.constrain=function(a,h){if(h&&a.scale===h.scale)return a;var d=this.effectiveMinScale;const e=this.effectiveMaxScale,r=a.targetGeometry,B=h&&h.targetGeometry,f=0!==d&&a.scale>d;if(0!==e&&a.scale<e||f)d=f?d:e,B&&(h=(d-h.scale)/(a.scale-h.scale),r.x=B.x+(r.x-B.x)*h,r.y=B.y+(r.y-B.y)*h),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};b.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,
null);const h=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(h-Math.floor(h))?Math.round(h):Math.floor(h));return a};b.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const h=this._scales;if(0>=a)return h[0];if(a>=h.length)return h[h.length-1];const d=Math.round(a);return h[d]+(d-a)*(h[Math.round(a-.5)]-h[d])};b.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;const h=this._scales;let d,e;if(a>=h[0])return this.effectiveMinZoom;
if(a<=h[h.length-1])return this.effectiveMaxZoom;for(let r=0;r<h.length-1;r++){d=h[r];e=h[r+1];if(e===a)return r+this.effectiveMinZoom+1;if(d>a&&e<a)return r+this.effectiveMinZoom+1-(a-e)/(d-e)}};b.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};b.snapToNextScale=function(a,h=.5){if(!this.effectiveLODs)return a*h;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};b.snapToPreviousScale=function(a,h=2){if(!this.effectiveLODs)return a*
h;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};b.clone=function(){return new G({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};b._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((h,d)=>Math.abs(d-a)<=Math.abs(h-a)?d:h,this._scales[0]);return this._lodByScale[a].scale};return n}(m);p.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveLODs",void 0);p.__decorate([k.property({readOnly:!0})],
m.prototype,"effectiveMinZoom",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMaxZoom",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMinScale",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMaxScale",void 0);p.__decorate([k.property()],m.prototype,"lods",void 0);p.__decorate([k.property()],m.prototype,"minZoom",void 0);p.__decorate([k.property()],m.prototype,"maxZoom",void 0);p.__decorate([k.property()],m.prototype,"minScale",
void 0);p.__decorate([k.property()],m.prototype,"maxScale",void 0);p.__decorate([k.property()],m.prototype,"snapToZoom",void 0);return m=G=p.__decorate([H.subclass("esri.views.2d.constraints.ZoomConstraint")],m)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a){var h,d;let e=h=function(r){function B(){var f=r.apply(this,arguments)||this;f.left=0;f.top=0;f.right=0;f.bottom=0;return f}g._inheritsLoose(B,r);B.prototype.clone=function(){return new h({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return B}(m);p.__decorate([q.property()],e.prototype,"left",void 0);p.__decorate([q.property()],e.prototype,"top",void 0);p.__decorate([q.property()],e.prototype,"right",void 0);p.__decorate([q.property()],e.prototype,
"bottom",void 0);e=h=p.__decorate([G.subclass("esri.views.2d.PaddedViewState.Padding")],e);m=d=function(r){function B(...f){var t=r.call(this,...f)||this;t.paddedViewState=new a;t._updateContent=(()=>{const w=n.create();return()=>{var C=t._get("size");const x=t._get("padding");if(C&&x){var u=t.paddedViewState;v.set(w,x.left+x.right,x.top+x.bottom);v.subtract(w,C,w);v.copy(u.size,w);if(C=u.viewpoint)t.viewpoint=C}}})();t.own(k.watch(()=>[t.size,t.padding],()=>t._updateContent(),k.sync));t.padding=
new e;t.size=[0,0];return t}g._inheritsLoose(B,r);B.prototype.clone=function(){return new d({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};g._createClass(B,[{key:"padding",set:function(f){this._set("padding",f||new e)}},{key:"viewpoint",set:function(f){if(f){const t=f.clone();this.paddedViewState.viewpoint=f;b.addPadding(t,f,this._get("size"),this._get("padding"));f=this._viewpoint2D;const w=t.targetGeometry;f.center[0]=
w.x;f.center[1]=w.y;f.rotation=t.rotation;f.scale=t.scale;f.spatialReference=w.spatialReference;this._update()}}}]);return B}(a);p.__decorate([q.property()],m.prototype,"paddedViewState",void 0);p.__decorate([q.property({type:e})],m.prototype,"padding",null);p.__decorate([q.property()],m.prototype,"viewpoint",null);return m=d=p.__decorate([G.subclass("esri.views.2d.PaddedViewState")],m)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x){var u;const D=[0,0];m=u=function(J){function S(P){P=J.call(this,P)||this;P._viewpoint2D={center:f.create(),rotation:0,scale:0,spatialReference:null};P.center=[0,0];P.extent=new C;P.id=0;P.inverseTransform=h.create();P.resolution=0;P.rotation=0;P.scale=0;P.transform=h.create();P.transformNoRotation=h.create();P.displayMat3=e.create();P.displayViewMat3=e.create();P.viewMat3=e.create();P.viewMat2d=a.create();P.worldScreenWidth=0;P.size=[0,0];return P}
g._inheritsLoose(S,J);var T=S.prototype;T.copy=function(P){const X=this.size,Q=this.viewpoint;Q&&X?(this.viewpoint=w.copy(Q,P.viewpoint),this._set("size",r.copy(X,P.size))):(this.viewpoint=P.viewpoint.clone(),this._set("size",[P.size[0],P.size[1]]));this._set("pixelRatio",P.pixelRatio);return this};T.clone=function(){return new u({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};T.toMap=function(P,X,Q){if(t.isVec2(X))return r.transformMat2d(P,X,this.inverseTransform);
D[0]=X;D[1]=Q;return r.transformMat2d(P,D,this.inverseTransform)};T.toScreen=function(P,X,Q){if(t.isVec2(X))return r.transformMat2d(P,X,this.transform);D[0]=X;D[1]=Q;return r.transformMat2d(P,D,this.transform)};T.toScreenNoRotation=function(P,X,Q){if(t.isVec2(X))return r.transformMat2d(P,X,this.transformNoRotation);D[0]=X;D[1]=Q;return r.transformMat2d(P,D,this.transformNoRotation)};T.getScreenTransform=function(P,X){const {center:Q}=this._viewpoint2D,O=this._get("pixelRatio")||1,Z=this._get("size");
w.getMatrix(P,Q,Z,X,0,O);return P};T._update=function(){const {center:P,spatialReference:X,scale:Q,rotation:O}=this._viewpoint2D,Z=this._get("pixelRatio")||1,L=this._get("size"),I=new k({targetGeometry:new x(P[0],P[1],X),scale:Q,rotation:O});this._set("viewpoint",I);if(L&&X&&Q){this.resolution=w.getResolution(I);this.rotation=O;this.scale=Q;this.spatialReference=X;r.copy(this.center,P);d.set(this.displayMat3,0!==L[0]?2/L[0]:0,0,0,0,0!==L[1]?-2/L[1]:0,0,-1,1,1);var l=d.identity(this.viewMat3),A=B.fromValues(L[0]/
2,L[1]/2),y=B.fromValues(-L[0]/2,-L[1]/2),K=n.toRadian(O);d.translate(l,l,A);d.rotate(l,l,K);d.translate(l,l,y);d.multiply(this.displayViewMat3,this.displayMat3,l);l=b.fromTranslation(this.viewMat2d,A);b.rotate(l,l,K);b.translate(l,l,y);w.getExtent(this.extent,I,L);w.getTransform(this.transform,I,L,Z);b.invert(this.inverseTransform,this.transform);w.getTransformNoRotation(this.transformNoRotation,I,L,Z);this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};g._createClass(S,[{key:"pixelRatio",set:function(P){this._set("pixelRatio",P);this._update()}},{key:"size",set:function(P){this._set("size",P);this._update()}},{key:"viewpoint",set:function(P){if(P){const X=this._viewpoint2D,Q=P.targetGeometry;X.center[0]=Q.x;X.center[1]=Q.y;X.rotation=P.rotation;X.scale=P.scale;X.spatialReference=Q.spatialReference}this._update()}}]);return S}(q.JSONSupport);p.__decorate([E.property({readOnly:!0})],m.prototype,"id",void 0);p.__decorate([E.property({value:1,
json:{write:!0}})],m.prototype,"pixelRatio",null);p.__decorate([E.property({json:{write:!0}})],m.prototype,"size",null);p.__decorate([E.property()],m.prototype,"spatialReference",void 0);p.__decorate([E.property({type:k,json:{write:!0}})],m.prototype,"viewpoint",null);return m=u=p.__decorate([v.subclass("esri.views.2d.ViewState")],m)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(g,p){function m(L,I){L[0]=I[0];L[1]=I[1];L[2]=I[2];L[3]=I[4];L[4]=I[5];L[5]=I[6];L[6]=I[8];L[7]=
I[9];L[8]=I[10];return L}function k(L,I){L[0]=I[0];L[1]=I[1];L[2]=I[2];L[3]=I[3];L[4]=I[4];L[5]=I[5];L[6]=I[6];L[7]=I[7];L[8]=I[8];return L}function q(L,I,l,A,y,K,U,ba,ea,na){L[0]=I;L[1]=l;L[2]=A;L[3]=y;L[4]=K;L[5]=U;L[6]=ba;L[7]=ea;L[8]=na;return L}function E(L){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function z(L,I){if(L===I){const l=I[1],A=I[2],y=I[5];L[1]=I[3];L[2]=I[6];L[3]=l;L[5]=I[7];L[6]=A;L[7]=y}else L[0]=I[0],L[1]=I[3],L[2]=I[6],L[3]=I[1],L[4]=I[4],L[5]=I[7],
L[6]=I[2],L[7]=I[5],L[8]=I[8];return L}function H(L,I){const l=I[0],A=I[1],y=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];I=I[8];const ha=I*U-ba*na,la=-I*K+ba*ea,pa=na*K-U*ea;let qa=l*ha+A*la+y*pa;if(!qa)return null;qa=1/qa;L[0]=ha*qa;L[1]=(-I*A+y*na)*qa;L[2]=(ba*A-y*U)*qa;L[3]=la*qa;L[4]=(I*l-y*ea)*qa;L[5]=(-ba*l+y*K)*qa;L[6]=pa*qa;L[7]=(-na*l+A*ea)*qa;L[8]=(U*l-A*K)*qa;return L}function G(L,I){const l=I[0],A=I[1],y=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];I=I[8];L[0]=U*I-ba*na;L[1]=y*na-A*I;L[2]=
A*ba-y*U;L[3]=ba*ea-K*I;L[4]=l*I-y*ea;L[5]=y*K-l*ba;L[6]=K*na-U*ea;L[7]=A*ea-l*na;L[8]=l*U-A*K;return L}function v(L){const I=L[3],l=L[4],A=L[5],y=L[6],K=L[7],U=L[8];return L[0]*(U*l-A*K)+L[1]*(-U*I+A*y)+L[2]*(K*I-l*y)}function n(L,I,l){const A=I[0],y=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=l[0],pa=l[1],qa=l[2],M=l[3],V=l[4],ca=l[5],ia=l[6],ka=l[7];l=l[8];L[0]=la*A+pa*U+qa*na;L[1]=la*y+pa*ba+qa*ha;L[2]=la*K+pa*ea+qa*I;L[3]=M*A+V*U+ca*na;L[4]=M*y+V*ba+ca*ha;L[5]=M*K+V*ea+
ca*I;L[6]=ia*A+ka*U+l*na;L[7]=ia*y+ka*ba+l*ha;L[8]=ia*K+ka*ea+l*I;return L}function b(L,I,l){const A=I[0],y=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=l[0];l=l[1];L[0]=A;L[1]=y;L[2]=K;L[3]=U;L[4]=ba;L[5]=ea;L[6]=la*A+l*U+na;L[7]=la*y+l*ba+ha;L[8]=la*K+l*ea+I;return L}function a(L,I,l){const A=I[0],y=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=Math.sin(l);l=Math.cos(l);L[0]=l*A+la*U;L[1]=l*y+la*ba;L[2]=l*K+la*ea;L[3]=l*U-la*A;L[4]=l*ba-la*y;L[5]=l*ea-
la*K;L[6]=na;L[7]=ha;L[8]=I;return L}function h(L,I,l){const A=l[0],y=l[1];l=l[2];L[0]=A*I[0];L[1]=A*I[1];L[2]=A*I[2];L[3]=y*I[3];L[4]=y*I[4];L[5]=y*I[5];L[6]=l*I[6];L[7]=l*I[7];L[8]=l*I[8];return L}function d(L,I,l){const A=l[0];l=l[1];L[0]=A*I[0];L[1]=A*I[1];L[2]=A*I[2];L[3]=l*I[3];L[4]=l*I[4];L[5]=l*I[5];return L}function e(L,I){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=I[0];L[7]=I[1];L[8]=1;return L}function r(L,I){const l=Math.sin(I);I=Math.cos(I);L[0]=I;L[1]=l;L[2]=0;L[3]=-l;L[4]=I;L[5]=
0;L[6]=0;L[7]=0;L[8]=1;return L}function B(L,I){L[0]=I[0];L[1]=0;L[2]=0;L[3]=0;L[4]=I[1];L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function f(L,I){L[0]=I[0];L[1]=I[1];L[2]=0;L[3]=I[2];L[4]=I[3];L[5]=0;L[6]=I[4];L[7]=I[5];L[8]=1;return L}function t(L,I){var l=I[0],A=I[1],y=I[2];I=I[3];var K=l+l,U=A+A;const ba=y+y;l*=K;const ea=A*K;A*=U;const na=y*K,ha=y*U;y*=ba;K*=I;U*=I;I*=ba;L[0]=1-A-y;L[3]=ea-I;L[6]=na+U;L[1]=ea+I;L[4]=1-l-y;L[7]=ha-K;L[2]=na-U;L[5]=ha+K;L[8]=1-l-A;return L}function w(L,I){const l=I[0],
A=I[1],y=I[2],K=I[4],U=I[5],ba=I[6],ea=I[8],na=I[9];I=I[10];const ha=I*U-ba*na,la=-I*K+ba*ea,pa=na*K-U*ea;var qa=l*ha+A*la+y*pa;if(!qa)return null;qa=1/qa;L[0]=ha*qa;L[1]=(-I*A+y*na)*qa;L[2]=(ba*A-y*U)*qa;L[3]=la*qa;L[4]=(I*l-y*ea)*qa;L[5]=(-ba*l+y*K)*qa;L[6]=pa*qa;L[7]=(-na*l+A*ea)*qa;L[8]=(U*l-A*K)*qa;return L}function C(L,I){const l=I[0],A=I[1],y=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];var ha=I[8],la=I[9],pa=I[10],qa=I[11];const M=I[12],V=I[13],ca=I[14];I=I[15];const ia=l*ba-A*U,ka=l*ea-y*U,
ra=l*na-K*U,va=A*ea-y*ba,Ba=A*na-K*ba,Da=y*na-K*ea,Ga=ha*V-la*M,Fa=ha*ca-pa*M;ha=ha*I-qa*M;const ya=la*ca-pa*V;la=la*I-qa*V;pa=pa*I-qa*ca;qa=ia*pa-ka*la+ra*ya+va*ha-Ba*Fa+Da*Ga;if(!qa)return null;qa=1/qa;L[0]=(ba*pa-ea*la+na*ya)*qa;L[1]=(ea*ha-U*pa-na*Fa)*qa;L[2]=(U*la-ba*ha+na*Ga)*qa;L[3]=(y*la-A*pa-K*ya)*qa;L[4]=(l*pa-y*ha+K*Fa)*qa;L[5]=(A*ha-l*la-K*Ga)*qa;L[6]=(V*Da-ca*Ba+I*va)*qa;L[7]=(ca*ra-M*Da-I*ka)*qa;L[8]=(M*Ba-V*ra+I*ia)*qa;return L}function x(L,I,l){L[0]=2/I;L[1]=0;L[2]=0;L[3]=0;L[4]=-2/
l;L[5]=0;L[6]=-1;L[7]=1;L[8]=1;return L}function u(L){return"mat3("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+")"}function D(L){return Math.sqrt(L[0]**2+L[1]**2+L[2]**2+L[3]**2+L[4]**2+L[5]**2+L[6]**2+L[7]**2+L[8]**2)}function J(L,I,l){L[0]=I[0]+l[0];L[1]=I[1]+l[1];L[2]=I[2]+l[2];L[3]=I[3]+l[3];L[4]=I[4]+l[4];L[5]=I[5]+l[5];L[6]=I[6]+l[6];L[7]=I[7]+l[7];L[8]=I[8]+l[8];return L}function S(L,I,l){L[0]=I[0]-l[0];L[1]=I[1]-l[1];L[2]=I[2]-l[2];L[3]=I[3]-l[3];
L[4]=I[4]-l[4];L[5]=I[5]-l[5];L[6]=I[6]-l[6];L[7]=I[7]-l[7];L[8]=I[8]-l[8];return L}function T(L,I,l){L[0]=I[0]*l;L[1]=I[1]*l;L[2]=I[2]*l;L[3]=I[3]*l;L[4]=I[4]*l;L[5]=I[5]*l;L[6]=I[6]*l;L[7]=I[7]*l;L[8]=I[8]*l;return L}function P(L,I,l,A){L[0]=I[0]+l[0]*A;L[1]=I[1]+l[1]*A;L[2]=I[2]+l[2]*A;L[3]=I[3]+l[3]*A;L[4]=I[4]+l[4]*A;L[5]=I[5]+l[5]*A;L[6]=I[6]+l[6]*A;L[7]=I[7]+l[7]*A;L[8]=I[8]+l[8]*A;return L}function X(L,I){return L[0]===I[0]&&L[1]===I[1]&&L[2]===I[2]&&L[3]===I[3]&&L[4]===I[4]&&L[5]===I[5]&&
L[6]===I[6]&&L[7]===I[7]&&L[8]===I[8]}function Q(L,I){const l=L[0],A=L[1],y=L[2],K=L[3],U=L[4],ba=L[5],ea=L[6],na=L[7];L=L[8];const ha=I[0],la=I[1],pa=I[2],qa=I[3],M=I[4],V=I[5],ca=I[6],ia=I[7];I=I[8];return Math.abs(l-ha)<=p.EPSILON*Math.max(1,Math.abs(l),Math.abs(ha))&&Math.abs(A-la)<=p.EPSILON*Math.max(1,Math.abs(A),Math.abs(la))&&Math.abs(y-pa)<=p.EPSILON*Math.max(1,Math.abs(y),Math.abs(pa))&&Math.abs(K-qa)<=p.EPSILON*Math.max(1,Math.abs(K),Math.abs(qa))&&Math.abs(U-M)<=p.EPSILON*Math.max(1,Math.abs(U),
Math.abs(M))&&Math.abs(ba-V)<=p.EPSILON*Math.max(1,Math.abs(ba),Math.abs(V))&&Math.abs(ea-ca)<=p.EPSILON*Math.max(1,Math.abs(ea),Math.abs(ca))&&Math.abs(na-ia)<=p.EPSILON*Math.max(1,Math.abs(na),Math.abs(ia))&&Math.abs(L-I)<=p.EPSILON*Math.max(1,Math.abs(L),Math.abs(I))}function O(L){const I=p.EPSILON,l=L[0],A=L[1],y=L[2],K=L[3],U=L[4],ba=L[5],ea=L[6],na=L[7];L=L[8];return Math.abs(1-(l*l+K*K+ea*ea))<=I&&Math.abs(1-(A*A+U*U+na*na))<=I&&Math.abs(1-(y*y+ba*ba+L*L))<=I}const Z=Object.freeze(Object.defineProperty({__proto__:null,
fromMat4:m,copy:k,set:q,identity:E,transpose:z,invert:H,adjoint:G,determinant:v,multiply:n,translate:b,rotate:a,scale:h,scaleByVec2:d,fromTranslation:e,fromRotation:r,fromScaling:B,fromMat2d:f,fromQuat:t,normalFromMat4Legacy:w,normalFromMat4:C,projection:x,str:u,frob:D,add:J,subtract:S,multiplyScalar:T,multiplyScalarAndAdd:P,exactEquals:X,equals:Q,isOrthoNormal:O,mul:n,sub:S},Symbol.toStringTag,{value:"Module"}));g.add=J;g.adjoint=G;g.copy=k;g.determinant=v;g.equals=Q;g.exactEquals=X;g.frob=D;g.fromMat2d=
f;g.fromMat4=m;g.fromQuat=t;g.fromRotation=r;g.fromScaling=B;g.fromTranslation=e;g.identity=E;g.invert=H;g.isOrthoNormal=O;g.mat3=Z;g.mul=n;g.multiply=n;g.multiplyScalar=T;g.multiplyScalarAndAdd=P;g.normalFromMat4=C;g.normalFromMat4Legacy=w;g.projection=x;g.rotate=a;g.scale=h;g.scaleByVec2=d;g.set=q;g.str=u;g.sub=S;g.subtract=S;g.translate=b;g.transpose=z})},"esri/chunks/mat3f32":function(){define(["exports"],function(g){function p(){const z=new Float32Array(9);z[0]=1;z[4]=1;z[8]=1;return z}function m(z){const H=
new Float32Array(9);H[0]=z[0];H[1]=z[1];H[2]=z[2];H[3]=z[3];H[4]=z[4];H[5]=z[5];H[6]=z[6];H[7]=z[7];H[8]=z[8];return H}function k(z,H,G,v,n,b,a,h,d){const e=new Float32Array(9);e[0]=z;e[1]=H;e[2]=G;e[3]=v;e[4]=n;e[5]=b;e[6]=a;e[7]=h;e[8]=d;return e}function q(z,H){return new Float32Array(z,H,9)}const E=Object.freeze(Object.defineProperty({__proto__:null,create:p,clone:m,fromValues:k,createView:q},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=p;g.createView=q;g.fromValues=k;g.mat3f32=E})},
"esri/chunks/vec2f32":function(){define(["exports"],function(g){function p(){return new Float32Array(2)}function m(d){const e=new Float32Array(2);e[0]=d[0];e[1]=d[1];return e}function k(d,e){const r=new Float32Array(2);r[0]=d;r[1]=e;return r}function q(d,e){return new Float32Array(d,e,2)}function E(){return p()}function z(){return k(1,1)}function H(){return k(1,0)}function G(){return k(0,1)}const v=p(),n=z(),b=H(),a=G(),h=Object.freeze(Object.defineProperty({__proto__:null,create:p,clone:m,fromValues:k,
createView:q,zeros:E,ones:z,unitX:H,unitY:G,ZEROS:v,ONES:n,UNIT_X:b,UNIT_Y:a},Symbol.toStringTag,{value:"Module"}));g.ONES=n;g.UNIT_X=b;g.UNIT_Y=a;g.ZEROS=v;g.clone=m;g.create=p;g.createView=q;g.fromValues=k;g.ones=z;g.unitX=H;g.unitY=G;g.vec2f32=h;g.zeros=E})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(g){function p(k){return k instanceof Float32Array&&2<=k.length}function m(k){return Array.isArray(k)&&2<=k.length}g.isVec2=function(k){return p(k)||m(k)};g.isVec2f32=
p;g.isVec2f64=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(g,p,m,k,q,E,z,H,G,v){function n(e,r){e.length=0;r.forEach(B=>e.push(B));return e}const b=new Set,a=[],h=new Map,d=[0,0];m=function(e){function r(f){f=e.call(this,f)||this;f._keyToItem=new Map;f.concurrency=6;f.strategy="scale-first";f.tileInfoView=null;return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){const {concurrency:f,process:t}=this;this._queue=new v.QueueProcessor({concurrency:f,process:(w,C)=>{w=this._keyToItem.get(w);return t(w,{signal:C})},peeker:w=>w.values().next().value})};
B.destroy=function(){this.clear();this._queue.destroy();this._queue=null};B.abort=function(f){this._queue.abort("string"===typeof f?f:f.id)};B.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};B.has=function(f){return"string"===typeof f?this._keyToItem.has(f):this._keyToItem.has(f.id)};B.isOngoing=function(f){f="string"===typeof f?f:f.id;return this.has(f)&&this._queue.isOngoing(f)};B.pause=function(){this._queue.pause()};B.push=function(f,t){const w=f.key.id+
"-"+t;if(this.has(w))return this.get(w);t=this._queue.push(w);const C=()=>{this._keyToItem.delete(w);this.notifyChange("updating")};this._keyToItem.set(w,f);t.then(C,C);this.notifyChange("updating");return t};B.reset=function(){this._queue.reset();this.notifyChange("updating")};B.resume=function(){this._queue.resume()};B._peekByScaleFirst=function(f){if(!this.state)return f.values().next().value;const t=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;f.forEach(S=>{S=this._keyToItem.get(S);
const T=this.tileInfoView.getTileScale(S.key);h.has(T)||(h.set(T,[]),w=Math.max(T,w),C=Math.min(T,C));h.get(T).push(S.key);b.add(T)});let x=this.state.scale;h.has(x)||(n(a,b),a.sort((S,T)=>S-T),x=a.reduce((S,T)=>Math.abs(T-x)<Math.abs(S-x)?T:S,a[0]));x=Math.min(x,w);x=Math.max(x,C);f=h.get(x);const u=t.getClosestInfoForScale(x),D=u.getColumnForX(this.state.center[0]),J=u.getRowForY(this.state.center[1]);f.sort((S,T)=>{const P=u.denormalizeCol(S.col,S.world),X=u.denormalizeCol(T.col,T.world);return Math.sqrt((D-
P)*(D-P)+(J-S.row)*(J-S.row))-Math.sqrt((D-X)*(D-X)+(J-T.row)*(J-T.row))});b.clear();h.clear();return f[0].id};B._peekByCenterFirst=function(f){if(!this.state)return f.values().next().value;const t=this.tileInfoView,w=this.state.center;let C=Number.POSITIVE_INFINITY,x=null;f.forEach(u=>{u=this._keyToItem.get(u);t.getTileCoords(d,u.key);const D=G.distance(d,w);D<C&&(C=D,x=u.key)});return x.id};g._createClass(r,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",
get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return r}(m);p.__decorate([k.property({constructOnly:!0})],m.prototype,"concurrency",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,"process",void 0);p.__decorate([k.property()],m.prototype,"state",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,"strategy",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,"tileInfoView",void 0);
p.__decorate([k.property({readOnly:!0})],m.prototype,"updating",null);return m=p.__decorate([H.subclass("esri.views.2d.tiling.PagedTileQueue")],m)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(g,p,m,k,q,E){let z=function(G,v){this.item=G;this.controller=v;this.promise=null},H=function(){function G(n){this._deferreds=new Map;this._controllers=
new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;n.concurrency&&(this.concurrency=n.concurrency);this._queue=new q(n.peeker);this.process=n.process;const b=n.scheduler;n.priority&&m.isSome(b)&&(this._task=b.registerTask(n.priority,this))}var v=G.prototype;v.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};v.abort=function(n){(n=this._controllers.get(n))&&
n.abort()};v.clear=function(){this._queue.clear();const n=[];this._controllers.forEach(b=>n.push(b));this._controllers.clear();n.forEach(b=>b.abort());this._processingItems.clear();this._cancelNext()};v.forEach=function(n){this._deferreds.forEach((b,a)=>n(a))};v.get=function(n){return(n=this._deferreds.get(n))?n.promise:void 0};v.isOngoing=function(n){return this._processingItems.has(n)};v.has=function(n){return this._deferreds.has(n)};v.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};
v.push=function(n,b){const a=this.get(n);if(a)return a;const h=new AbortController;let d=null;b&&(d=k.onAbort(b,()=>h.abort()));const e=()=>{r.remove();m.isSome(d)&&d.remove();this._deferreds.delete(n);this._controllers.delete(n);this._queue.remove(n);this._processingItems.delete(n);this._scheduleNext()},r=k.onAbortOrThrow(h.signal,()=>{const f=this._processingItems.get(n);f&&f.controller.abort();e();B.reject(k.createAbortError())}),B=k.createDeferred();this._deferreds.set(n,B);this._controllers.set(n,
h);B.promise.then(e,e);this._queue.push(n);this._scheduleNext();return B.promise};v.last=function(){return this._queue.last()};v.peek=function(){return this._queue.peek()};v.popLast=function(){return this._queue.popLast()};v.reset=function(){const n=[];this._processingItems.forEach(b=>n.push(b));this._processingItems.clear();for(const b of n)this._queue.push(b.item),b.controller.abort();this._scheduleNext()};v.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};v.takeAll=function(){const n=
[];for(;this._queue.length;)n.push(this._queue.pop());this.clear();return n};v.runTask=function(n){for(;!n.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),n.madeProgress()};v._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=E.schedule(()=>{this._schedule=null;this._next()}))};v._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};v._cancelNext=
function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};v._processResult=function(n,b){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).resolve(b))};v._processError=function(n,b){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).reject(b))};v._canProcessFulfillment=function(n){return this._deferreds.get(n.item)&&this._processingItems.get(n.item)===n?!0:!1};v._process=function(n){if(!m.isNone(n)){var b=new AbortController,
a=new z(n,b);this._processingItems.set(n,a);try{var h=this.process(n,b.signal)}catch(d){this._processError(a,d)}k.isPromiseLike(h)?(a.promise=h,h.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,h)}};p._createClass(G,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:n=>
this.runTask(n)}}}]);return G}();g.QueueProcessor=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(g,p,m,k,q,E){const z=new q("0/0/0/0");let H=function(){function v(b,a,h,d,e,r,B,f){this.x=b;this.ymin=a;this.ymax=h;this.invM=d;this.leftAdjust=e;
this.rightAdjust=r;this.leftBound=B;this.rightBound=f}v.create=function(b,a){b[1]>a[1]&&([b,a]=[a,b]);const [h,d]=b,[e,r]=a;b=e-h;a=r-d;a=0!==a?b/a:0;const B=(Math.ceil(d)-d)*a,f=(Math.floor(d)-d)*a;return new v(h,Math.floor(d),Math.ceil(r),a,0>b?B:f,0>b?f:B,0>b?e:h,0>b?h:e)};var n=v.prototype;n.incrRow=function(){this.x+=this.invM};n.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};n.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return v}();
const G=[[0,0],[0,0],[0,0],[0,0]];return function(){function v(b,a=null){this.tileInfo=b;this.fullExtent=a;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const h=b.lods.slice();h.sort((e,r)=>r.scale-e.scale);const d=this._lodInfos=h.map(e=>m.create(b,e,a));h.forEach((e,r)=>{this._infoByLevel[e.level]=d[r];this._infoByScale[e.scale]=d[r];this.scales[r]=e.scale},this);this._wrap=b.isWrappable}var n=v.prototype;n.getLODInfoAt=function(b){return this._infoByLevel["number"===
typeof b?b:b.level]};n.getTileBounds=function(b,a,h=!1){z.set(a);return(a=this._infoByLevel[z.level])?a.getTileBounds(b,z,h):b};n.getTileCoords=function(b,a,h=!1){z.set(a);return(a=this._infoByLevel[z.level])?a.getTileCoords(b,z,h):b};n.getTileCoverage=function(b,a=192,h="closest"){h="closest"===h?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);const d=k.pool.acquire(h),e=this._wrap;var r=Infinity;let B=-Infinity;const f=d.spans;G[0][0]=G[0][1]=G[1][1]=G[3][0]=-a;G[1][0]=
G[2][0]=b.size[0]+a;G[2][1]=G[3][1]=b.size[1]+a;for(t of G)b.toMap(t,t),t[0]=h.getColumnForX(t[0]),t[1]=h.getRowForY(t[1]);b=[];var t=3;for(a=0;4>a;a++)G[a][1]===G[t][1]?t=a:(t=H.create(G[a],G[t]),r=Math.min(t.ymin,r),B=Math.max(t.ymax,B),void 0===b[t.ymin]&&(b[t.ymin]=[]),b[t.ymin].push(t),t=a);if(null==r||null==B||100<B-r)return null;for(a=[];r<B;){null!=b[r]&&(a=a.concat(b[r]));t=Infinity;var w=-Infinity;for(var C=a.length-1;0<=C;C--){var x=a[C];t=Math.min(t,x.getLeftCol());w=Math.max(w,x.getRightCol())}t=
Math.floor(t);w=Math.floor(w);if(r>=h.first[1]&&r<=h.last[1])if(e)if(h.size[0]<h.worldSize[0])for(C=Math.floor(w/h.worldSize[0]),x=Math.floor(t/h.worldSize[0]);x<=C;x++)f.push(new E(r,Math.max(h.getFirstColumnForWorld(x),t),Math.min(h.getLastColumnForWorld(x),w)));else f.push(new E(r,t,w));else t>h.last[0]||w<h.first[0]||(t=Math.max(t,h.first[0]),w=Math.min(w,h.last[0]),f.push(new E(r,t,w)));r+=1;for(t=a.length-1;0<=t;t--)w=a[t],w.ymax>=r?w.incrRow():a.splice(t,1)}return d};n.getTileParentId=function(b){z.set(b);
b=this._lodInfos.indexOf(this._infoByLevel[z.level])-1;if(0>b)return null;this._getTileIdAtLOD(z,this._lodInfos[b],z);return z.id};n.getTileResolution=function(b){return(b=this._infoByLevel["object"===typeof b?b.level:b])?b.resolution:-1};n.getTileScale=function(b){return(b=this._infoByLevel[b.level])?b.scale:-1};n.intersects=function(b,a){z.set(a);a=this._infoByLevel[z.level];const h=b.lodInfo;if(h.resolution>a.resolution){this._getTileIdAtLOD(z,h,z);var d=h.denormalizeCol(z.col,z.world);for(var e of b.spans)if(e.row===
z.row&&e.colFrom<=d&&e.colTo>=d)return!0}if(h.resolution<a.resolution){const [B,f,t,w]=b.spans.reduce((C,x)=>{C[0]=Math.min(C[0],x.row);C[1]=Math.max(C[1],x.row);C[2]=Math.min(C[2],x.colFrom);C[3]=Math.max(C[3],x.colTo);return C},[Infinity,-Infinity,Infinity,-Infinity]);d=a.denormalizeCol(z.col,z.world);b=h.getColumnForX(a.getXForColumn(d));e=h.getRowForY(a.getYForRow(z.row));d=h.getColumnForX(a.getXForColumn(d+1))-1;a=h.getRowForY(a.getYForRow(z.row+1))-1;return!(b>w||d<t||e>f||a<B)}const r=h.denormalizeCol(z.col,
z.world);return b.spans.some(B=>B.row===z.row&&B.colFrom<=r&&B.colTo>=r)};n.normalizeBounds=function(b,a,h){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];this._wrap&&(a=p.getInfo(this.tileInfo.spatialReference),h=-h*(a.valid[1]-a.valid[0]),b[0]+=h,b[2]+=h);return b};n.getSmallestInfoForScale=function(b){const a=this.scales;if(this._infoByScale[b])return this._infoByScale[b];if(b>a[0])return this._infoByScale[a[0]];for(let h=1;h<a.length-1;h++)if(b>a[h]+1E-6)return this._infoByScale[a[h-1]];return this._infoByScale[a[a.length-
1]]};n.getClosestInfoForScale=function(b){const a=this.scales;if(this._infoByScale[b])return this._infoByScale[b];b=a.reduce((h,d)=>Math.abs(d-b)<Math.abs(h-b)?d:h,a[0]);return this._infoByScale[b]};n.scaleToLevel=function(b){const a=this.scales;if(this._infoByScale[b])return this._infoByScale[b].level;for(let h=a.length-1;0<=h;h--)if(b<a[h])return h===a.length-1?this._infoByScale[a[a.length-1]].level:this._infoByScale[a[h]].level+(a[h]-b)/(a[h]-a[h+1]);return this._infoByScale[a[0]].level};n.scaleToZoom=
function(b){return this.tileInfo.scaleToZoom(b)};n._getTileIdAtLOD=function(b,a,h){const d=this._infoByLevel[h.level];b.set(h);if(a.resolution<d.resolution)return null;if(a.resolution===d.resolution)return b;b.level=a.level;b.col=Math.floor(h.col*d.resolution/a.resolution+.01);b.row=Math.floor(h.row*d.resolution/a.resolution+.01);return b};g._createClass(v,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return v}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe",
"../../../geometry/support/spatialReferenceUtils","./TileKey"],function(g,p,m){function k(E,z,H){E[0]=z;E[1]=H;return E}const q=new m("0/0/0/0");return function(){function E(H,G,v,n,b,a,h,d,e,r,B,f){this.level=H;this.resolution=G;this.scale=v;this.origin=n;this.first=b;this.last=a;this.size=h;this.norm=d;this.worldStart=e;this.worldEnd=r;this.worldSize=B;this.wrap=f}E.create=function(H,G,v=null){var n=p.getInfo(H.spatialReference);const b=G.origin||[H.origin.x,H.origin.y],a=[H.size[0]*G.resolution,
H.size[1]*G.resolution],h=[-Infinity,-Infinity],d=[Infinity,Infinity],e=[Infinity,Infinity];g.isSome(v)&&(k(h,Math.max(0,Math.floor((v.xmin-b[0])/a[0])),Math.max(0,Math.floor((b[1]-v.ymax)/a[1]))),k(d,Math.max(0,Math.floor((v.xmax-b[0])/a[0])),Math.max(0,Math.floor((b[1]-v.ymin)/a[1]))),k(e,d[0]-h[0]+1,d[1]-h[1]+1));const {cols:r,rows:B}=G;!v&&r&&B&&(k(h,r[0],B[0]),k(d,r[1],B[1]),k(e,r[1]-r[0]+1,B[1]-B[0]+1));let f;H.isWrappable?(H=[Math.ceil(Math.round((n.valid[1]-n.valid[0])/G.resolution)/H.size[0]),
e[1]],n=[Math.floor((n.origin[0]-b[0])/a[0]),h[1]],v=[H[0]+n[0]-1,d[1]],f=!0):(n=h,v=d,H=e,f=!1);return new E(G.level,G.resolution,G.scale,b,h,d,e,a,n,v,H,f)};var z=E.prototype;z.normalizeCol=function(H){if(!this.wrap)return H;const G=this.worldSize[0];return 0>H?G-1-Math.abs((H+1)%G):H%G};z.denormalizeCol=function(H,G){return this.wrap?this.worldSize[0]*G+H:H};z.getWorldForColumn=function(H){return this.wrap?Math.floor(H/this.worldSize[0]):0};z.getFirstColumnForWorld=function(H){return H*this.worldSize[0]+
this.first[0]};z.getLastColumnForWorld=function(H){return H*this.worldSize[0]+this.first[0]+this.size[0]-1};z.getColumnForX=function(H){return(H-this.origin[0])/this.norm[0]};z.getXForColumn=function(H){return this.origin[0]+H*this.norm[0]};z.getRowForY=function(H){return(this.origin[1]-H)/this.norm[1]};z.getYForRow=function(H){return this.origin[1]-H*this.norm[1]};z.getTileBounds=function(H,G,v=!1){q.set(G);var n=v?q.col:this.denormalizeCol(q.col,q.world),b=q.row;G=this.getXForColumn(n);v=this.getYForRow(b+
1);n=this.getXForColumn(n+1);b=this.getYForRow(b);H[0]=G;H[1]=v;H[2]=n;H[3]=b;return H};z.getTileCoords=function(H,G,v=!1){q.set(G);G=v?q.col:this.denormalizeCol(q.col,q.world);Array.isArray(H)?k(H,this.getXForColumn(G),this.getYForRow(q.row)):(H.x=this.getXForColumn(G),H.y=this.getYForRow(q.row));return H};return E}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(g,p){let m=function(){function k(E,z,H,G){this.set(E,
z,H,G)}k.getId=function(E,z,H,G){return"object"===typeof E?`${E.level}/${E.row}/${E.col}/${E.world}`:`${E}/${z}/${H}/${G}`};var q=k.prototype;q.acquire=function(E,z,H,G){this.set(E,z,H,G)};q.contains=function(E){const z=E.level-this.level;return this.row===E.row>>z&&this.col===E.col>>z&&this.world===E.world};q.equals=function(E){return this.level===E.level&&this.row===E.row&&this.col===E.col&&this.world===E.world};q.clone=function(){return new k(this)};q.release=function(){this.world=this.col=this.row=
this.level=0};q.set=function(E,z,H,G){if(null==E)this.world=this.col=this.row=this.level=0;else if("object"===typeof E)this.level=E.level||0,this.row=E.row||0,this.col=E.col||0,this.world=E.world||0;else if("string"===typeof E){const [v,n,b,a]=E.split("/");this.level=parseFloat(v);this.row=parseFloat(n);this.col=parseFloat(b);this.world=parseFloat(a)}else this.level=+E,this.row=+z,this.col=+H,this.world=+G||0;return this};q.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};
q.getParentKey=function(){return 0>=this.level?null:new k(this.level-1,this.row>>1,this.col>>1,this.world)};q.getChildKeys=function(){const E=this.level+1,z=this.row<<1,H=this.col<<1,G=this.world;return[new k(E,z,H,G),new k(E,z,H+1,G),new k(E,z+1,H,G),new k(E,z+1,H+1,G)]};q.compareRowMajor=function(E){return this.row<E.row?-1:this.row>E.row?1:this.col<E.col?-1:this.col>E.col?1:0};g._createClass(k,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(E){this.set(E)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return k}();m.pool=new p(m,null,null,25,50);return m})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(g){let p=function(){function m(){this.spans=[]}var k=m.prototype;k.acquire=function(q){this.lodInfo=q};k.release=function(){this.lodInfo=null;this.spans.length=0};k.forEach=function(q,E){const {spans:z,lodInfo:H}=this,{level:G}=H;if(0!==z.length)for(const {row:v,
colFrom:n,colTo:b}of z)for(let a=n;a<=b;a++)q.call(E,G,v,H.normalizeCol(a),H.getWorldForColumn(a))};return m}();p.pool=new g(p);return p})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(g,p,m){this.row=g;this.colFrom=p;this.colTo=m}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(g,p,m,k,q,E,z,H,G,v){function n(e,r){e.length=0;r.forEach(B=>e.push(B));return e}const b=new Set,a=[],h=new Map,d=[0,0];m=function(e){function r(f){f=e.call(this,f)||this;f._keyToItem=new Map;f.concurrency=6;f.strategy="scale-first";f.tileInfoView=null;return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){const {concurrency:f,process:t,strategy:w}=this;this._queue=new v.QueueProcessor({concurrency:f,process:(C,x)=>{C=this._keyToItem.get(C);return t(C,{signal:x})},peeker:"scale-first"===
w?C=>this._peekByScaleFirst(C):C=>this._peekByCenterFirst(C)})};B.destroy=function(){this.clear();this._queue.destroy();this._queue=null};B.abort=function(f){this._queue.abort("string"===typeof f?f:f.id)};B.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};B.has=function(f){return"string"===typeof f?this._keyToItem.has(f):this._keyToItem.has(f.id)};B.isOngoing=function(f){f="string"===typeof f?f:f.id;return this.has(f)&&this._queue.isOngoing(f)};B.pause=function(){this._queue.pause()};
B.push=function(f){const t=f.key.id;if(this._queue.has(t))return this._queue.get(t);const w=this._queue.push(t),C=()=>{this._keyToItem.delete(t);this.notifyChange("updating")};this._keyToItem.set(t,f);w.then(C,C);this.notifyChange("updating");return w};B.reset=function(){this._queue.reset()};B.resume=function(){this._queue.resume()};B._peekByScaleFirst=function(f){if(!this.state)return f.values().next().value;const t=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;f.forEach(S=>
{S=this._keyToItem.get(S);const T=this.tileInfoView.getTileScale(S.key);h.has(T)||(h.set(T,[]),w=Math.max(T,w),C=Math.min(T,C));h.get(T).push(S.key);b.add(T)});let x=this.state.scale;h.has(x)||(n(a,b),a.sort((S,T)=>S-T),x=a.reduce((S,T)=>Math.abs(T-x)<Math.abs(S-x)?T:S,a[0]));x=Math.min(x,w);x=Math.max(x,C);f=h.get(x);const u=t.getClosestInfoForScale(x),D=u.getColumnForX(this.state.center[0]),J=u.getRowForY(this.state.center[1]);f.sort((S,T)=>{const P=u.denormalizeCol(S.col,S.world),X=u.denormalizeCol(T.col,
T.world);return Math.sqrt((D-P)*(D-P)+(J-S.row)*(J-S.row))-Math.sqrt((D-X)*(D-X)+(J-T.row)*(J-T.row))});b.clear();h.clear();return f[0].id};B._peekByCenterFirst=function(f){if(!this.state)return f.values().next().value;const t=this.tileInfoView,w=this.state.center;let C=Number.POSITIVE_INFINITY,x=null;f.forEach(u=>{u=this._keyToItem.get(u);t.getTileCoords(d,u.key);const D=G.distance(d,w);D<C&&(C=D,x=u.key)});return x.id};g._createClass(r,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return r}(m);p.__decorate([k.property({constructOnly:!0})],m.prototype,"concurrency",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,"process",void 0);p.__decorate([k.property()],m.prototype,"state",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,"strategy",void 0);p.__decorate([k.property({constructOnly:!0})],m.prototype,
"tileInfoView",void 0);p.__decorate([k.property({readOnly:!0})],m.prototype,"updating",null);return m=p.__decorate([H.subclass("esri.views.2d.tiling.TileQueue")],m)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(g,p,m,k){const q=new k(0,0,0,0),E=new Map,z=[],H=[];return function(){function G(n){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=n.acquireTile;this.releaseTile=n.releaseTile;this.tileInfoView=n.tileInfoView;this.resampling=null==n.resampling||!!n.resampling;n.cachePolicy&&(this.cachePolicy=n.cachePolicy);n.coveragePolicy&&(this.coveragePolicy=n.coveragePolicy);null!=n.buffer&&(this.buffer=n.buffer);n.cacheSize&&(this._tileCache=new p(n.cacheSize,this.tileInfoView,b=>{this.releaseTile(b)}))}var v=G.prototype;v.destroy=function(){this.tileIndex.clear()};
v.update=function(n){const {resampling:b,tileIndex:a}=this,h=this.tileInfoView.getTileCoverage(n.state,this.buffer,this.coveragePolicy);H.length=0;z.length=0;E.clear();if(h){var {minScale:d,maxScale:e}=this.tileInfoView.tileInfo,{spans:r,lodInfo:B}=h,{level:f}=B,{scale:t,center:w,resolution:C}=n.state,x=!n.stationary&&t>this._previousScale;this._previousScale=t;this.tiles.length=0;if(!b&&(t>d||t<e))return this.tiles.length=0,E.clear(),a.forEach(T=>{this.releaseTile(T)}),a.clear(),H.length=0,z.length=
0,E.clear(),m.pool.release(h),!0;a.forEach(T=>T.visible=!0);var u=n=0;if(0<r.length)for(const {row:T,colFrom:P,colTo:X}of r)for(let Q=P;Q<=X;Q++){n++;const O=q.set(f,T,B.normalizeCol(Q),B.getWorldForColumn(Q)).id;if(a.has(O)){var D=a.get(O);D.isReady?(E.set(O,D),u++):x||this._addParentTile(O,E)}else{if(this._tileCache&&this._tileCache.has(O)){if(D=this._tileCache.pop(O),this.tileIndex.set(O,D),D.isReady){E.set(O,D);u++;continue}}else D=this.acquireTile(q),this.tileIndex.set(O,D);x||this._addParentTile(O,
E)}}var J=u===n;a.forEach((T,P)=>{q.set(P);if(!E.has(P)){var X=this.tileInfoView.intersects(h,q),Q="purge"===this.cachePolicy?q.level!==f:q.level>f;!X||!x&&J?!Q&&X||z.push(P):T.isReady?Q&&"purge"===this.cachePolicy&&this._hasReadyAncestor(q,f)?z.push(P):H.push(P):Q&&z.push(P)}});for(var S of H)(n=a.get(S))&&n.isReady&&E.set(S,n);for(const T of z)S=a.get(T),this._tileCache?this._tileCache.add(S):this.releaseTile(S),a.delete(T);E.forEach(T=>this.tiles.push(T));a.forEach(T=>{E.has(T.key.id)||(T.visible=
!1)});this._tileCache&&this._tileCache.prune(f,w,C);m.pool.release(h);E.clear();return J}};v.clear=function(n=!0){const {tileIndex:b}=this;n&&b.forEach(a=>{this.releaseTile(a)});b.clear()};v.updateCacheSize=function(n){this._tileCache&&(this._tileCache.maxSize=n)};v._addParentTile=function(n,b){let a=null;for(;;){n=this.tileInfoView.getTileParentId(n);if(!n)break;if(this.tileIndex.has(n)){if((a=this.tileIndex.get(n))&&a.isReady){b.has(a.key.id)||b.set(a.key.id,a);break}}else if(this._tileCache&&this._tileCache.has(n)&&
(a=this._tileCache.pop(n),this.tileIndex.set(n,a),a&&a.isReady)){b.has(a.key.id)||b.set(a.key.id,a);break}}};v._hasReadyAncestor=function(n,b){const a=g.create();this.tileInfoView.getTileBounds(a,n,!0);for(const h of this.tileIndex.values())if(h.isReady&&h.key.level>=b&&h.key.level<n.level){const d=g.create();this.tileInfoView.getTileBounds(d,h.key,!0);if(g.contains(d,a))return!0}return!1};return G}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(g){return function(){function p(k,
q,E){this.maxSize=k;this.tileInfoView=q;this.removedFunc=E;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var m=p.prototype;m.has=function(k){return this._tilePerId.has(k)};m.get=function(k){return this._tilePerId.get(k)};m.pop=function(k){const q=this._tilePerId.get(k);if(!q)return null;const E=this._tileKeysPerLevel[q.key.level];this._tilePerId["delete"](k);for(let z=0;z<E.length;z++)if(E[z].id===k){E.splice(z,1);break}q.visible=!0;return q};m.add=function(k){k.visible=!1;const q=k.key,E=q.id;
this._tilePerId.has(E)||(this._tilePerId.set(E,k),k=q.level,this._tileKeysPerLevel[k]||(this._tileKeysPerLevel[k]=[]),this._tileKeysPerLevel[k].push(q))};m.prune=function(k,q,E){let z=this._tilePerId.size;if(!(z<=this.maxSize)){for(var H=this._tileKeysPerLevel.length-1;z>this.maxSize&&0<=H;)H!==k&&(z=this._pruneAroundCenterTile(z,q,E,H)),H--;z>this.maxSize&&(z=this._pruneAroundCenterTile(z,q,E,k))}};m._pruneAroundCenterTile=function(k,q,E,z){z=this._tileKeysPerLevel[z];if(!z||0===z.length)return k;
const {size:H,origin:G}=this.tileInfoView.tileInfo,v=E*H[0],n=E*H[1],b=[0,0],a=[0,0];for(z.sort((h,d)=>{b[0]=G.x+v*(h.col+.5);b[1]=G.y-n*(h.row+.5);a[0]=G.x+v*(d.col+.5);a[1]=G.y-n*(d.row+.5);return g.squaredDistance(b,q)-g.squaredDistance(a,q)});0<z.length&&(E=z.pop(),this._removeTile(E.id),k--,k!==this.maxSize););return k};m._removeTile=function(k){const q=this._tilePerId.get(k);this.removedFunc&&this.removedFunc(q);this._tilePerId["delete"](k)};return p}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D,J,S,T){var P={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},X={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Q={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};m=function(O){function Z(){var I=O.apply(this,arguments)||this;I._handles=new k;return I}g._inheritsLoose(Z,O);var L=Z.prototype;L.initialize=function(){const I=()=>{var l;return null==
(l=this.view)?void 0:l.ready};this._handles.add([q.when(()=>!I(),()=>this._disconnect()),q.when(I,()=>this._connect())])};L.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};L._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};L._connect=function(){const I=new w.BrowserEventSource(this.view.surface,this.view.input);var l=[new J.ImmediateDoubleClick,
new S.PointerClickHoldAndDrag,new T.SingleAndDoubleClick,new D.Drag(this.view.navigation),new u.DoubleTapDrag];l=new C.InputManager({eventSource:I,recognizers:l});l.installHandlers("prevent-context-menu",[new x.PreventContextMenu],C.ViewEventPriorities.INTERNAL);l.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new f.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new n.DoubleClickZoom(this.view,["Ctrl"]),new a.DragPan(this.view,"primary"),
new e.KeyPan(this.view,P),new B.KeyZoom(this.view,X),new r.KeyRotate(this.view,Q),new h.DragRotate(this.view,"secondary"),new b.DoubleTapDragZoom(this.view,"touch")],C.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(l);this._source=I;this._inputManager=l;q.watch(()=>{var A,y;return null==(A=this.view)?void 0:null==(y=A.navigation)?void 0:y.browserTouchPanEnabled},A=>{this._source&&(this._source.browserTouchPanningEnabled=!A)},q.initial)};g._createClass(Z,[{key:"latestPointerType",get:function(){var I;
return null==(I=this._inputManager)?void 0:I.latestPointerType}},{key:"latestPointerLocation",get:function(){var I;return null==(I=this._inputManager)?void 0:I.latestPointerLocation}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return Z}(m);p.__decorate([E.property()],m.prototype,"view",void 0);p.__decorate([E.property()],m.prototype,"latestPointerType",null);p.__decorate([E.property()],m.prototype,"latestPointerLocation",null);return m=p.__decorate([v.subclass("esri.views.2d.input.MapViewInputManager")],
m)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(g,p,m,k){m=function(q){function E(z,H){var G=q.call(this,!0)||this;G.view=z;G.registerIncoming("double-click",H,v=>G._handleDoubleClick(v,H));return G}p._inheritsLoose(E,q);E.prototype._handleDoubleClick=function(z,H){k.eventMatchesPointerAction(z.data,"primary")&&(z.stopPropagation(),H?this.view.mapViewNavigation.zoomOut([z.data.x,
z.data.y]):this.view.mapViewNavigation.zoomIn([z.data.x,z.data.y]))};return E}(m.InputHandler);g.DoubleClickZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/support":function(){define(["exports"],function(g){g.eventMatchesMousePointerAction=function(p,m){if("touch"===p.pointerType)return!1;switch(m){case "primary":return 0===p.button;case "secondary":return 2===p.button;case "tertiary":return 1===p.button}};g.eventMatchesPointerAction=
function(p,m){switch(m){case "primary":return"touch"===p.pointerType||0===p.button;case "secondary":return"touch"!==p.pointerType&&2===p.button;case "tertiary":return"touch"!==p.pointerType&&1===p.button}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(g,p,m,k){m=function(q){function E(z,
H,G){var v=q.call(this,!0)||this;v.view=z;v.pointerType=H;v.registerIncoming("double-tap-drag",G,n=>v._handleDoubleTapDrag(n));return v}p._inheritsLoose(E,q);E.prototype._handleDoubleTapDrag=function(z){var {data:H}=z,{pointerType:G}=H;if(G===this.pointerType){z.stopPropagation();var {action:v,delta:n}=H;({view:H}=this);({mapViewNavigation:z}=H);switch(v){case "begin":({scale:H}=H);this._currentScale=this._startScale=H;this._previousDelta=n;z.begin();break;case "update":if(this._previousDelta.y===
n.y)break;this._previousDelta=n;H=this._startScale*1.015**n.y;z.setViewpointImmediate(H/this._currentScale);this._currentScale=H;break;case "end":{({constraints:G}=H);const {effectiveLODs:b,snapToZoom:a}=G;a&&b?(H=G.snapScale(this._currentScale),H=(0<n.y?Math.max(H,G.snapToPreviousScale(this._startScale)):Math.min(H,G.snapToNextScale(this._startScale)))/this._currentScale,z.zoom(H)):z.end()}}}};return E}(k.InputHandler);g.DoubleTapDragZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(g,p,m,k,q){k=function(E){function z(G,v,n){var b=E.call(this,!0)||this;b.view=G;b.pointerAction=v;b.registerIncoming("drag",n,a=>b._handleDrag(a));b.registerIncoming("pointer-down",()=>b.stopMomentumNavigation());return b}p._inheritsLoose(z,E);var H=z.prototype;H.onInstall=function(G){E.prototype.onInstall.call(this,
G);this.dragEventSeparator=new m.DragEventSeparator({start:(v,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data);n.stopPropagation()},update:(v,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data);n.stopPropagation()},end:(v,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data);n.stopPropagation()},condition:(v,n)=>1===v&&q.eventMatchesPointerAction(n.data,this.pointerAction)})};H._handleDrag=function(G){const v=this.view.mapViewNavigation;v.pinch.zoomMomentum||v.pinch.rotateMomentum?
this.stopMomentumNavigation():this.dragEventSeparator.handle(G)};H.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return z}(k.InputHandler);g.DragPan=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(g){let p=function(){function m(q){this.callbacks=q;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var k=
m.prototype;k.handle=function(q){const E=q.data,z=E.pointers.size;switch(E.action){case "start":this.currentCount=z;this._emitStart(q);break;case "added":this._emitEnd(this.previousEvent);this.currentCount=z;this._emitStart(q);break;case "update":this._emitUpdate(q);break;case "removed":this.startEvent&&this._emitEnd(this.previousEvent);this.currentCount=z;this._emitStart(q);break;case "end":this._emitEnd(q),this.currentCount=0}this.previousEvent=q};k._emitStart=function(q){this.startEvent=q;this.callbacks.condition(this.currentCount,
q)&&this.callbacks.start(this.currentCount,q,this.startEvent)};k._emitUpdate=function(q){this.callbacks.condition(this.currentCount,q)&&this.callbacks.update(this.currentCount,q,this.startEvent)};k._emitEnd=function(q){this.callbacks.condition(this.currentCount,q)&&this.callbacks.end(this.currentCount,q,this.startEvent);this.startEvent=null};return m}();g.DragEventSeparator=p;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(g,p,m,k,q){k=function(E){function z(H,G,v){var n=E.call(this,!0)||this;n.view=H;n.pointerAction=G;const b=n.view.mapViewNavigation;n.dragEventSeparator=new m.DragEventSeparator({start:(a,h)=>{b.rotate.begin(n.view,h.data);h.stopPropagation()},update:(a,h)=>{b.rotate.update(n.view,h.data);h.stopPropagation()},end:(a,h)=>{b.rotate.end();h.stopPropagation()},
condition:(a,h)=>1===a&&q.eventMatchesPointerAction(h.data,n.pointerAction)});n.registerIncoming("drag",v,a=>n.dragEventSeparator.handle(a));return n}p._inheritsLoose(z,E);return z}(k.InputHandler);g.DragRotate=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(g,p,m,k,q,E,z,H){z=function(G){function v(b){var a=G.call(this,!0)||this;a.view=b;a.frameTask=null;a.watchHandles=new m;a.currentDevice=null;a.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};a.handle=a.registerIncoming("gamepad",h=>a._handleGamePadEvent(h));a.handle.pause();return a}p._inheritsLoose(v,G);var n=v.prototype;n.onInstall=function(b){G.prototype.onInstall.call(this,b);this.watchHandles.add([k.watch(()=>{var a;return null==(a=this.view.navigation.gamepad)?void 0:a.enabled},
a=>{a?(this.handle.resume(),this.frameTask||(this.frameTask=q.addFrameTask({update:h=>this._frameUpdate(h.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},k.initial)])};n.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);G.prototype.onUninstall.call(this)};n._handleGamePadEvent=function(b){const a=this.view.navigation.gamepad.device;a&&b.data.device!==a||this.currentDevice&&this.currentDevice!==
b.data.device||("end"===b.data.action?(this.currentDevice=null,H.resetTransformation(this.transformation)):(this.currentDevice=b.data.device,H.extractTransformation(b.data,this.view.navigation.gamepad,this.transformation)))};n._frameUpdate=function(b){const a=this.transformation;if(!H.isZeroTransformation(a)){var h=this.view.viewpoint.clone(),d=.7*this.view.navigation.gamepad.velocityFactor*b;E.translateBy(h,h,[a.translation[0]*d,-a.translation[1]*d]);d=this.view.size;E.scaleAndRotateBy(h,h,1+6E-4*
a.translation[2]*b,this.view.constraints.rotationEnabled?.06*-a.heading*b:0,[d[0]/2,d[1]],d);b=this.view.constraints.constrain(h,this.view.viewpoint);this.view.viewpoint=b}};return v}(z.InputHandler);g.GamepadNavigation=z;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(g,p){function m(k){let q=k*k;0>k&&(q*=-1);return q}g.extractTransformation=function(k,
q,E){const z=k.state;k=k.device;q="forward-down"===q.tiltDirection?1:-1;"standard"===k.deviceType?(E.translation[0]=m(z.axes[0]),E.translation[1]=m(z.axes[1]),E.translation[2]=m(z.buttons[7])-m(z.buttons[6]),E.heading=m(z.axes[2]),E.tilt=m(z.axes[3])):"spacemouse"===k.deviceType&&(E.translation[0]=1.2*m(z.axes[0]),E.translation[1]=1.2*m(z.axes[1]),E.translation[2]=2*-m(z.axes[2]),E.heading=1.2*m(z.axes[5]),E.tilt=1.2*m(z.axes[3]));E.tilt*=q;p.scale(E.translation,E.translation,1);return E};g.extractTransformationKeyboard=
function(k,q){q.translation[0]=k[1]-k[0];q.translation[1]=k[3]-k[2];q.translation[2]=k[4]-k[5];q.heading=k[7]-k[6];q.tilt=k[8]-k[9];q.zoom=k[10]-k[11];return q};g.isZeroTransformation=function(k){return 0===k.translation[0]&&0===k.translation[1]&&0===k.translation[2]&&0===k.heading&&0===k.tilt&&0===k.zoom};g.quadraticAccentuation=m;g.resetTransformation=function(k){k.translation[0]=0;k.translation[1]=0;k.translation[2]=0;k.heading=0;k.tilt=0;return k};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(g,p,m){m=function(k){function q(z,H,G){var v=k.call(this,!0)||this;v.view=z;v.keys=H;v._pressed=!1;v._keyMap={[H.left]:"left",[H.right]:"right",[H.up]:"up",[H.down]:"down"};v.registerIncoming("key-down",G,n=>v._handleKeyDown(n));v.registerIncoming("key-up",G,n=>v._handleKeyUp(n));v.registerIncoming("blur",
G,()=>v._handleBlur());return v}p._inheritsLoose(q,k);var E=q.prototype;E._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};E._handleKeyUp=function(z){this._handleKey(z,!1)};E._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};E._handleKey=function(z,H){const G=this._keyMap[z.data.key];if(this._pressed=null!=G){if(H)switch(this.view.mapViewNavigation.begin(),G){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return q}(m.InputHandler);g.KeyPan=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(g,p,m){m=function(k){function q(z,
H,G){var v=k.call(this,!0)||this;v.view=z;v.keys=H;v._pressed=!1;v._keyToDirection={[H.clockwiseOption1]:"clockwise",[H.clockwiseOption2]:"clockwise",[H.counterClockwiseOption1]:"counterClockwise",[H.counterClockwiseOption2]:"counterClockwise",[H.resetOption1]:"reset",[H.resetOption2]:"reset"};v.registerIncoming("key-down",G,n=>v._handleKeyDown(n));v.registerIncoming("key-up",G,n=>v._handleKeyUp(n));v.registerIncoming("blur",G,()=>v._handleBlur());return v}p._inheritsLoose(q,k);var E=q.prototype;
E._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};E._handleKeyUp=function(z){this._handleKey(z,!1)};E._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};E._handleKey=function(z,H){var G=z.modifiers;if(!(0<G.size&&!G.has("Shift")||!this.view.constraints.rotationEnabled)&&(G=this._keyToDirection[z.data.key],this._pressed=null!=G)){if(H)switch(this.view.mapViewNavigation.begin(),G){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return q}(m.InputHandler);g.KeyRotate=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has",
"../../../input/InputHandler"],function(g,p,m,k){var q;(function(E){E[E.IN=0]="IN";E[E.OUT=1]="OUT"})(q||(q={}));m=function(E){function z(G,v,n){var b=E.call(this,!0)||this;b.view=G;b.keys=v;b._keysToZoomAction={};b.registerIncoming("key-down",n,a=>b._handleKeyDown(a));v.zoomIn.forEach(a=>b._keysToZoomAction[a]=q.IN);v.zoomOut.forEach(a=>b._keysToZoomAction[a]=q.OUT);return b}p._inheritsLoose(z,E);var H=z.prototype;H._handleKeyDown=function(G){this._handleKey(G)};H._handleKey=function(G){var v=G.modifiers;
if(!(0<v.size)||v.has("Shift"))if({key:v}=G.data,v in this._keysToZoomAction){v=this._keysToZoomAction[v];var {mapViewNavigation:n}=this.view,b=null;switch(v){case q.IN:b=n.zoomIn();break;case q.OUT:b=n.zoomOut();break;default:return}n.begin();b.then(()=>n.end());G.stopPropagation()}};return z}(k.InputHandler);g.KeyZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(g,p,m){m=function(k){function q(E,z){var H=k.call(this,!0)||this;H.view=E;H._canZoom=!0;H.registerIncoming("mouse-wheel",z,G=>H._handleMouseWheel(G));return H}p._inheritsLoose(q,k);q.prototype._handleMouseWheel=function(E){if(this.view.navigation.mouseWheelZoomEnabled&&(E.preventDefault(),E.stopPropagation(),this._canZoom)){var z=this.view.mapViewNavigation,{x:H,y:G,deltaY:v}=E.data;if(E=z.zoom(1/.6**(1/60*v),[H,G]))this._canZoom=!1,E.catch(()=>{}).then(()=>
{this._canZoom=!0;z.end()})}};return q}(m.InputHandler);g.MouseWheelZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(g,p,m,k){k=function(q){function E(H){var G=q.call(this,!0)||this;G.view=H;G.registerIncoming("drag",n=>G._handleDrag(n));G.registerIncoming("pointer-down",
()=>G._stopMomentumNavigation());const v=G.view.mapViewNavigation;G.dragEventSeparator=new m.DragEventSeparator({start:(n,b)=>{v.pinch.begin(G.view,b.data);b.stopPropagation()},update:(n,b)=>{v.pinch.update(G.view,b.data);b.stopPropagation()},end:(n,b)=>{v.pinch.end(G.view);b.stopPropagation()},condition:n=>2<=n});return G}p._inheritsLoose(E,q);var z=E.prototype;z._handleDrag=function(H){this.dragEventSeparator.handle(H)};z._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return E}(k.InputHandler);g.PinchRotateAndZoom=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(g,p,m,k,q,E){const z=m("trident"),H=m("edge"),G=m("chrome"),v=m("ff"),n=m("safari");m=function(){function a(d,e){this.input=e;this._active={};this._activePointerCaptures=
new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=d;d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new q.GamepadSource(d,this.input);this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}var h=a.prototype;h.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(d=>{this._releasePointerCaptureSafe(d)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=
null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};h.setPointerCapture=function(d,e){e?(this._element.setPointerCapture(d.pointerId),this._activePointerCaptures.add(d.pointerId)):(this._releasePointerCaptureSafe(d.pointerId),this._activePointerCaptures.delete(d.pointerId))};h._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};h._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};h._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
h._releasePointerCaptureSafe=function(d){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(d)||this._element.releasePointerCapture(d)}catch(e){}};h._updateNormalizedPointerLikeEvent=function(d,e){d=E.createScreenPointFromNativeEvent(this._element,d);a.test.disableSubpixelCoordinates&&(d.x=Math.round(d.x),d.y=Math.round(d.y));e.x=d.x;e.y=d.y;return e};h._handleKey=function(d,e){const r=k.eventKey(e);r&&"key-up"===d&&this._keyDownState.delete(r);e={native:e,key:r,repeat:r&&this._keyDownState.has(r)};
r&&"key-down"===d&&this._keyDownState.add(e.key);this._callback(d,e)};h._handlePointer=function(d,e){e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});this._callback(d,e)};h._handlePointerPreventDefault=function(d,e){const r=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});e.preventDefault();this._callback(d,
r)};h._handleMouseWheel=function(d,e){let r=e.deltaY;switch(e.deltaMode){case 0:if(z||H)r=r/document.documentElement.clientHeight*600;break;case 1:r*=30;break;case 2:r*=900}z||H?r*=.7:G||n?r*=.6:v&&(r*=1.375);const B=Math.abs(r);100<B&&(r=r/B*200/(1+Math.exp(-.02*(B-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:r});this._callback(d,e)};h._handlePointerCaptureLost=function(d,e){this._activePointerCaptures.delete(e.pointerId);this._handleDefault(d,e)};h._handleDefault=
function(d,e){const r={native:e};e.preventDefault();this._callback(d,r)};h._preventAltKeyDefault=function(d){"Alt"===d.key&&d.preventDefault()};h._preventMultiTouchPanning=function(d){1<d.touches.length&&d.preventDefault()};p._createClass(a,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(d){this._browserTouchPanningEnabled=d;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(d){this._callback=d}},
{key:"activeEvents",set:function(d){for(const e in this._active)d&&d.has(e)||(this._element.removeEventListener(b[e],this._active[e]),delete this._active[e]);d&&d.forEach(e=>{if(!this._active[e]&&b[e]){const r=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(b[e],r);this._active[e]=r}});this._gamepadSource.hasEventListeners=d&&d.has("gamepad")}}]);return a}();m.test={disableSubpixelCoordinates:!1};const b={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};g.BrowserEventSource=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(g,p,m,k,q){let E=function(){function z(G,v){this.element=G;this.input=v;this._hasEventListeners=!1;this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)};this._onDisconnectGamepad=n=>{n=n.gamepad;const b=n.index,a=this.inputDevices[b];a&&(this._emitGamepadEvent(n,q.extractState(a),!1),this.inputDevices.splice(b,1),this.latestUpdate.splice(b,1),this.input.gamepad.devices.remove(a),this.ensurePollingState())};this.frameTask=
null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;G=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&G)this._forEachGamepad(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var H=z.prototype;H.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};H._connectGamepad=function(G){const v=new k(G);"unknown"!==v.deviceType&&(this.inputDevices[G.index]=v,this.input.gamepad.devices.add(v));this.ensurePollingState()};H.ensurePollingState=function(){this.eventsEnabled?this._startPolling():this._stopPolling()};H._startPolling=function(){null==this.frameTask&&(this.frameTask=m.addFrameTask({update:()=>this._readGamepadState()}))};H._stopPolling=function(){null!=this.frameTask&&
(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};H._readGamepadState=function(){const G=document.hasFocus(),v=this.element.contains(document.activeElement),n="document"===this.input.gamepad.enabledFocusMode&&!G||"view"===this.input.gamepad.enabledFocusMode&&!v;this._forEachGamepad(b=>{var a=this.inputDevices[b.index];if(a){var h=this.latestUpdate[b.index];a=q.extractState(a);var d=n||q.stateIdle(a);h&&(h.timestamp===b.timestamp||!h.active&&d||q.stateEqual(h.state,a))||this._emitGamepadEvent(b,
a,!d)}})};H._forEachGamepad=function(G){const v=window.navigator.getGamepads();for(let n=0;n<v.length;n++){const b=v[n];this._validate(b)&&G(b)}};H._emitGamepadEvent=function(G,v,n){var b=this.latestUpdate[G.index];if((b=b&&b.active)||n)this.latestUpdate[G.index]={timestamp:G.timestamp,state:v,active:n},this.callback&&this.callback({device:this.inputDevices[G.index],state:v,action:!b&&n?"start":b&&n?"update":"end"})};H._validate=function(G){if(!G||!G.connected)return!1;for(let v=0;v<G.axes.length;v++)if(isNaN(G.axes[v]))return!1;
return!0};p._createClass(z,[{key:"hasEventListeners",set:function(G){this._hasEventListeners!==G&&(this._hasEventListeners=G,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(G){this.callback=G}}]);return z}();g.GamepadSource=E;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(g){g.extractState=function(p){const m=p.native;return m?{buttons:m.buttons.map(k=>k.pressed?k.value?k.value:1:0),axes:m.axes.map(k=>{{var q=p.axisThreshold;const E=Math.abs(k);k=E<q?0:Math.sign(k)*(E-q)/(1-q)}return k})}:{buttons:[],axes:[]}};g.stateEqual=function(p,m){if(p.axes.length!==m.axes.length||p.buttons.length!==m.buttons.length)return!1;for(var k=0;k<p.axes.length;k++)if(p.axes[k]!==m.axes[k])return!1;for(k=0;k<p.buttons.length;k++)if(p.buttons[k]!==m.buttons[k])return!1;return!0};
g.stateIdle=function(p){for(var m=0;m<p.axes.length;m++)if(0!==p.axes[m])return!1;for(m=0;m<p.buttons.length;m++)if(0!==p.buttons[m])return!1;return!0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(g,p,m){m=function(k){function q(){var E=k.call(this,!0)||this;E.registerIncoming("context-menu",z=>{z.data.native.preventDefault()});
return E}p._inheritsLoose(q,k);return q}(m.InputHandler);g.PreventContextMenu=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(g,p,m,k,q,E,z,H,G){z=function(v){function n(a=H.DefaultParameters.maximumDoubleClickDelay,
h=H.DefaultParameters.maximumDoubleClickDistance,d=H.DefaultParameters.maximumDoubleTouchDelay,e=H.DefaultParameters.maximumDoubleTouchDistance,r=m.clock){var B=v.call(this,!1)||this;B.maximumDoubleClickDelay=a;B.maximumDoubleClickDistance=h;B.maximumDoubleTouchDelay=d;B.maximumDoubleTouchDistance=e;B._clock=r;B._doubleTapDragReady=!1;B._doubleTapDragActive=!1;B._dragStartCenter=q.createScreenPoint(0,0);B._pointerState=new Map;B._doubleTapDrag=B.registerOutgoing("double-tap-drag");B._dragEventSeparator=
new E.DragEventSeparator({start:(f,t)=>B._dragStart(f,t),update:(f,t)=>B._dragUpdate(t),end:(f,t)=>B._dragEnd(t)});B.registerIncoming("drag",f=>B._dragEventSeparator.handle(f));B.registerIncoming("pointer-down",f=>B._handlePointerDown(f));B.registerIncoming("pointer-up",()=>B._handlePointerUp());return B}p._inheritsLoose(n,v);var b=n.prototype;b.onUninstall=function(){this._pointerState.forEach(a=>{null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};b._clearPointerDown=
function(a){const h=this._pointerState.get(a);h&&(h.doubleTapTimeout.remove(),h.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};b._createDoubleTapDragData=function(a,h,d){const {button:e,buttons:r,pointer:B,pointers:f,pointerType:t,timestamp:w}=d;return{action:a,delta:h,button:e,buttons:r,pointer:B,pointers:f,pointerType:t,timestamp:w}};b._dragStart=function(a,h){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:d,
modifiers:e}=h;({center:a}=d);this._dragStartCenter=a;a=this._createDoubleTapDragData("begin",q.createScreenPoint(0,0),d);this._doubleTapDrag.emit(a,void 0,e);h.stopPropagation()}};b._dragUpdate=function(a){if(this._doubleTapDragActive){var {data:h,modifiers:d}=a,{center:e}=h;e=q.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y);e=this._createDoubleTapDragData("update",e,h);this._doubleTapDrag.emit(e,void 0,d);a.stopPropagation()}};b._dragEnd=function(a){if(this._doubleTapDragActive){var {data:h,
modifiers:d}=a,{center:e}=h;e=q.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y);e=this._createDoubleTapDragData("end",e,h);this._doubleTapDrag.emit(e,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};b._handlePointerDown=function(a){const {data:h}=a,d=this._pointerId(h),e=this._pointerState.get(d);var {pointerType:r}=h.native;e?(r="touch"===r?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),G.manhattanDistance(e.event.data,
h)>r?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};b._handlePointerUp=function(){this._doubleTapDragReady=!1};b._pointerId=function(a){({native:a}=a);const {pointerId:h,button:d,pointerType:e}=a;return"mouse"===e?`${h}:${d}`:`${e}`};b._storePointerDown=function(a){var {data:h}=a;const {pointerType:d}=h.native,e=this._pointerId(h);h=this._clock.setTimeout(()=>this._clearPointerDown(e),"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(e,
{event:a,doubleTapTimeout:h});this.refreshHasPendingInputs()};p._createClass(n,[{key:"hasPendingInputs",get:function(){return k.someMap(this._pointerState,a=>null!=a.doubleTapTimeout)}}]);return n}(z.InputHandler);g.DoubleTapDrag=z;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(g,p,m,k,q,E,z){const H={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};E=function(G){function v(b=H.maximumDoubleClickDelay,a=H.maximumDoubleClickDistance,h=H.maximumDoubleTouchDelay,d=H.maximumDoubleTouchDistance,e=m.clock){var r=G.call(this,!1)||this;r.maximumDoubleClickDelay=b;r.maximumDoubleClickDistance=a;r.maximumDoubleTouchDelay=h;r.maximumDoubleTouchDistance=d;r._clock=e;r._pointerState=new Map;r._click=r.registerOutgoing("click");
r._doubleClick=r.registerOutgoing("double-click");r.registerIncoming("immediate-click",r._handleImmediateClick.bind(p._assertThisInitialized(r)));r.registerIncoming("pointer-drag",r._handlePointerDrag.bind(p._assertThisInitialized(r)));r.registerIncoming("drag",r._handleDrag.bind(p._assertThisInitialized(r)));return r}p._inheritsLoose(v,G);var n=v.prototype;n.onUninstall=function(){this._pointerState.forEach(b=>b.doubleClickTimeout=q.removeMaybe(b.doubleClickTimeout))};n._pointerId=function(b){b=
b.native;return"mouse"===b.pointerType?`${b.pointerId}:${b.button}`:`${b.pointerType}`};n._handleImmediateClick=function(b){const a=b.data,h=this._pointerId(a),d=this._pointerState.get(h);if(d){const e="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;z.manhattanDistance(d.event.data,a)>e?(this._clearDoubleClickTimeout(h,!0),this._startClick(b)):(this._clearDoubleClickTimeout(h,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(b)};
n._startClick=function(b){const a=this._pointerId(b.data);this._pointerState.set(a,{event:b,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};n._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};n._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,
!0)};n._clearDoubleClickTimeout=function(b,a){const h=this._pointerState.get(b);h&&(h.doubleClickTimeout.remove(),h.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};n._doubleClickTimeoutExceeded=function(b){const a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};p._createClass(v,[{key:"hasPendingInputs",
get:function(){return k.someMap(this._pointerState,b=>null!=b.doubleClickTimeout)}}]);return v}(E.InputHandler);g.DefaultParameters=H;g.SingleAndDoubleClick=E;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(g,p){g.euclideanDistance=function(m,k){const q=k.x-m.x;m=k.y-m.y;return Math.sqrt(q*q+m*m)};g.fitCircleLSQ=function(m,k){k?(k.radius=0,k.center.x=
0,k.center.y=0):k={radius:0,center:p.createScreenPoint()};if(0===m.length)return k;if(1===m.length)return k.center.x=m[0].x,k.center.y=m[0].y,k;if(2===m.length){const [e,r]=m,[B,f]=[r.x-e.x,r.y-e.y];k.radius=Math.sqrt(B*B+f*f)/2;k.center.x=(e.x+r.x)/2;k.center.y=(e.y+r.y)/2;return k}let q=0,E=0;for(k=0;k<m.length;k++)q+=m[k].x,E+=m[k].y;q/=m.length;E/=m.length;var z=m.map(e=>e.x-q),H=m.map(e=>e.y-E);let G=k=0;var v=0,n=0,b=0,a=0,h=0;for(var d=0;d<z.length;d++){const e=z[d],r=H[d],B=e*e,f=r*r;k+=B;
G+=f;v+=e*r;n+=B*e;b+=f*r;a+=e*f;h+=r*B}z=k;H=v;d=G;n=.5*(n+a);b=.5*(b+h);h=z*d-v*H;a=(n*d-b*H)/h;b=(z*b-v*n)/h;h=p.createScreenPoint(a+q,b+E);return{radius:Math.sqrt(a*a+b*b+(k+G)/m.length),center:h}};g.manhattanDistance=function(m,k){return Math.abs(k.x-m.x)+Math.abs(k.y-m.y)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),
function(g,p,m,k,q,E){function z(n){const b=[];n.forEach(a=>{b.push(m.createScreenPoint(a.event.x,a.event.y))});return E.fitCircleLSQ(b)}function H(n){const b=z(n);let a=0;n.forEach(h=>{var d=v(h,b);for(d-=h.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=h.lastAngle+d;h.lastAngle=d;a+=d-h.initialAngle});a/=n.size||1;return{angle:a,radius:b.radius,center:b.center}}function G(n){const b=new Map;n.forEach((a,h)=>b.set(h,a.event));return b}function v(n,b){n=n.event;return Math.atan2(n.y-
b.center.y,n.x-b.center.x)}q=function(n){function b(h){var d=n.call(this,!1)||this;d.navigationTouch=h;d.startStateModifiers=new Set;d.activePointerMap=new Map;d.isDragging=!1;d.isCurrentDragSuppressed=!1;d.drag=d.registerOutgoing("drag");d.registerIncoming("pointer-drag",d._handlePointerDrag.bind(p._assertThisInitialized(d)));d.registerIncoming("pointer-up",d._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(d)));d.registerIncoming("pointer-capture-lost",d._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(d)));
d.registerIncoming("pointer-cancel",d._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(d)));return d}p._inheritsLoose(b,n);var a=b.prototype;a._createPayload=function(h,d,e,r){return{action:h,pointerType:this.pointerType,button:this.mouseButton,buttons:d.buttons,timestamp:r,pointers:G(this.activePointerMap),pointer:d,angle:e.angle,radius:e.radius,center:e.center}};a._addPointer=function(h){var d=h.native.pointerId;const e=H(this.activePointerMap).angle;h={event:h,initialAngle:0,lastAngle:0};
this.activePointerMap.set(d,h);d=v(h,z(this.activePointerMap));h.initialAngle=d;h.lastAngle=d;this._updatePointerAngles(e)};a._updatePointer=function(h){if(!h||null!=h.x||null!=h.y){var d=this.activePointerMap.get(h.native.pointerId);d?d.event=h:this._addPointer(h)}};a._removePointer=function(h){const d=H(this.activePointerMap).angle;this.activePointerMap.delete(h);this._updatePointerAngles(d)};a._updatePointerAngles=function(h){const d=H(this.activePointerMap);this.activePointerMap.forEach(e=>{e.initialAngle=
v(e,d)-h;e.lastAngle=v(e,d)-h})};a._emitEvent=function(h,d,e){const r=H(this.activePointerMap);this.drag.emit(this._createPayload(h,d,r,e),void 0,this.startStateModifiers)};a._handlePointerUpAndPointerLost=function(h){const d=h.data.native.pointerId,e=k.Milliseconds(h.timestamp);this.activePointerMap.get(d)&&(1===this.activePointerMap.size?(this._updatePointer(h.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",h.data,e),this.isCurrentDragSuppressed=this.isDragging=!1,this._removePointer(d)):
(this._removePointer(d),this._emitEvent("removed",h.data,k.Milliseconds(h.timestamp))))};a._handlePointerDrag=function(h){const d=h.data,e=d.currentEvent,r=k.Milliseconds(h.timestamp);switch(d.action){case "start":case "update":this.isDragging?this.activePointerMap.has(e.native.pointerId)?(this._updatePointer(e),!this.isCurrentDragSuppressed&&this._emitEvent("update",e,r)):(this._addPointer(e),this._emitEvent("added",e,r),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(e),this.pointerType=
h.data.startEvent.pointerType,this.mouseButton=h.data.startEvent.button,this.startStateModifiers=h.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",e,r))}};p._createClass(b,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return b}(q.InputHandler);g.Button=void 0;(function(n){n[n.Left=0]="Left";
n[n.Middle=1]="Middle";n[n.Right=2]="Right";n[n.Back=3]="Back";n[n.Forward=4]="Forward";n[n.Undefined=-1]="Undefined"})(g.Button||(g.Button={}));g.Drag=q;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(g,p,m,k,q,E){k=function(z){function H(v=q.DefaultParameters.maximumDoubleClickDelay,
n=q.DefaultParameters.maximumDoubleClickDistance,b=q.DefaultParameters.maximumDoubleTouchDelay,a=q.DefaultParameters.maximumDoubleTouchDistance,h=m.clock){var d=z.call(this,!1)||this;d.maximumDoubleClickDelay=v;d.maximumDoubleClickDistance=n;d.maximumDoubleTouchDelay=b;d.maximumDoubleTouchDistance=a;d._clock=h;d._pointerState=new Map;d._immediateDoubleClick=d.registerOutgoing("immediate-double-click");d.registerIncoming("pointer-down",d._handlePointerDown.bind(p._assertThisInitialized(d)));d.registerIncoming("pointer-up",
e=>{d._handlePointerLoss(e,"pointer-up")});d.registerIncoming("pointer-capture-lost",e=>{d._handlePointerLoss(e,"pointer-capture-lost")});d.registerIncoming("pointer-cancel",e=>{d._handlePointerLoss(e,"pointer-cancel")});return d}p._inheritsLoose(H,z);var G=H.prototype;G.onUninstall=function(){this._pointerState.forEach(v=>{v.immediateDoubleClick&&v.immediateDoubleClick.timeoutHandle.remove()});z.prototype.onUninstall.call(this)};G._handlePointerDown=function(v){v=v.data;const n=this._pointerId(v);
this._pointerState.has(n)||(this._pointerState.set(n,{downButton:v.native.button,immediateDoubleClick:null}),this.startCapturingPointer(v.native))};G._handlePointerLoss=function(v,n){const b=v.data;var a=this._pointerId(b);if((a=this._pointerState.get(a))&&"pointer-up"===n&&a.downButton===b.native.button)if(n=a.immediateDoubleClick){n.timeoutHandle.remove();const h="touch"===v.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;E.manhattanDistance(n,v.data)>h?this._startImmediateDoubleClick(v,
a):(this._immediateDoubleClick.emit(v.data,void 0,n.modifiers),this._removeState(b))}else this._startImmediateDoubleClick(v,a)};G._startImmediateDoubleClick=function(v,n){n.immediateDoubleClick={x:v.data.x,y:v.data.y,modifiers:v.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(v.data),"touch"===v.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};G._pointerId=function(v){v=v.native;return"mouse"===v.pointerType?`${v.pointerId}:${v.button}`:`${v.pointerType}`};
G._removeState=function(v){const n=this._pointerId(v);this._pointerState.delete(n);this.stopCapturingPointer(v.native);this.refreshHasPendingInputs()};return H}(k.InputHandler);g.ImmediateDoubleClick=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(g,p,m,k,q){const E=
{maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};k=function(z){function H(v=E.maximumClickDelay,n=E.movementUntilMouseDrag,b=E.movementUntilPenDrag,a=E.movementUntilTouchDrag,h=E.holdDelay,d=m.clock){var e=z.call(this,!1)||this;e.maximumClickDelay=v;e.movementUntilMouseDrag=n;e.movementUntilPenDrag=b;e.movementUntilTouchDrag=a;e.holdDelay=h;e._clock=d;e._pointerState=new Map;e._pointerDrag=e.registerOutgoing("pointer-drag");e._immediateClick=
e.registerOutgoing("immediate-click");e._pointerHold=e.registerOutgoing("hold");e.registerIncoming("pointer-down",e._handlePointerDown.bind(p._assertThisInitialized(e)));e.registerIncoming("pointer-up",r=>{e._handlePointerLoss(r,"pointer-up")});e.registerIncoming("pointer-capture-lost",r=>{e._handlePointerLoss(r,"pointer-capture-lost")});e.registerIncoming("pointer-cancel",r=>{e._handlePointerLoss(r,"pointer-cancel")});e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(p._assertThisInitialized(e)));
e._moveHandle.pause();return e}p._inheritsLoose(H,z);var G=H.prototype;G.onUninstall=function(){this._pointerState.forEach(v=>{null!=v.holdTimeout&&(v.holdTimeout.remove(),v.holdTimeout=null)});z.prototype.onUninstall.call(this)};G._handlePointerDown=function(v){const n=v.data,b=n.native.pointerId;var a=null;0===this._pointerState.size&&(a=this._clock.setTimeout(()=>{const h=this._pointerState.get(b);h&&(h.isDragging||(this._pointerHold.emit(h.previousEvent,void 0,v.modifiers),h.holdEmitted=!0),h.holdTimeout=
null)},this.holdDelay));a={startEvent:n,previousEvent:n,startTimestamp:v.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(b,a);this.startCapturingPointer(n.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(v)};G._createPointerDragData=function(v,n,b){return{action:v,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:b}};G._handlePointerMove=function(v){const n=v.data,b=this._pointerState.get(n.native.pointerId);
if(b){if(b.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",b,n),void 0,b.modifiers);else{const a=q.euclideanDistance(n,b.startEvent),h=this._getDragThreshold(n.native.pointerType);a>h&&this._startDragging(v)}b.previousEvent=n}};G._getDragThreshold=function(v){switch(v){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};G._startDragging=function(v){const n=v.data,b=n.native.pointerId;this._pointerState.forEach(a=>
{null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null);a.isDragging||(a.modifiers=v.modifiers,a.isDragging=!0,b===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,n)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),v.timestamp))})};G._handlePointerLoss=function(v,n){const b=v.data,a=b.native.pointerId,h=this._pointerState.get(a);h&&(null!=h.holdTimeout&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
h,"pointer-up"===n?b:h.previousEvent),void 0,h.modifiers):"pointer-up"===n&&h.downButton===b.native.button&&v.timestamp-h.startTimestamp<=this.maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(a),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return H}(k.InputHandler);g.DefaultParameters=E;g.PointerClickHoldAndDrag=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(g,p,m,k,q,E,z){const H={added:[],removed:[]},G=new Set,v=new z(0,0,0,0);return function(n){function b(h){var d=n.call(this)||this;d._tiles=new Map;d._index=k.rbush(9,m("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);d.tiles=[];d.tileScheme=h;return d}g._inheritsLoose(b,n);var a=b.prototype;a.destroy=function(){this.clear()};a.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};a.has=function(h){return this._tiles.has(h)};a.get=function(h){return this._tiles.get(h)};a.boundsIntersections=function(h){return this._index.search({minX:h[0],minY:h[1],maxX:h[2],maxY:h[3]})};a.updateTiles=function(h){const d={added:[],removed:[]};for(const e of h.added)if(!this.has(e)){const r=new q.Tile(this.tileScheme,e);this._tiles.set(e,r);this._index.insert(r);d.added.push(r)}for(const e of h.removed)this.has(e)&&(h=this.get(e),this._tiles.delete(e),this._index.remove(h),
d.removed.push(h));this.tiles.length=0;this._tiles.forEach(e=>this.tiles.push(e));(d.added.length||d.removed.length)&&this.emit("update",d)};a.setViewState=function(h){if(h=this.tileScheme.getTileCoverage(h,0)){var {spans:d,lodInfo:e}=h,{level:r}=e;if(0<d.length)for(const {row:f,colFrom:t,colTo:w}of d)for(var B=t;B<=w;B++){const C=v.set(r,f,e.normalizeCol(B),e.getWorldForColumn(B)).id;G.add(C);if(!this.has(C)){const x=new q.Tile(this.tileScheme,C);this._tiles.set(C,x);this._index.insert(x);this.tiles.push(x);
H.added.push(x)}}for(r=this.tiles.length-1;0<=r;r--)B=this.tiles[r],G.has(B.id)||(this._tiles.delete(B.id),this.tiles.splice(r,1),this._index.remove(B),H.removed.push(B));(H.added.length||H.removed.length)&&this.emit("update",H);E.pool.release(h);G.clear();H.added.length=0;H.removed.length=0}};return b}(p)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(g,p){function m(d,e){if(!(this instanceof m))return new m(d,e);this._maxEntries=Math.max(4,d||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));e&&("function"===typeof e?this.toBBox=e:this._initFormat(e));this.clear()}function k(d,e){q(d,0,d.children.length,e,d)}function q(d,e,r,B,f){f||(f=a(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(var t;e<r;e++)t=d.children[e],E(f,d.leaf?B(t):t);return f}function E(d,e){d.minX=Math.min(d.minX,e.minX);d.minY=Math.min(d.minY,e.minY);d.maxX=Math.max(d.maxX,e.maxX);d.maxY=Math.max(d.maxY,e.maxY);return d}function z(d,e){return d.minX-e.minX}
function H(d,e){return d.minY-e.minY}function G(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function v(d){return d.maxX-d.minX+(d.maxY-d.minY)}function n(d,e){return d.minX<=e.minX&&d.minY<=e.minY&&e.maxX<=d.maxX&&e.maxY<=d.maxY}function b(d,e){return e.minX<=d.maxX&&e.minY<=d.maxY&&e.maxX>=d.minX&&e.maxY>=d.minY}function a(d){return{children:d,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function h(d,e,r,B,f){for(var t=[e,r],w;t.length;)r=t.pop(),e=t.pop(),r-e<=B||(w=
e+Math.ceil((r-e)/B/2)*B,p.quickselect(d,w,e,r,f),t.push(e,w,w,r))}m.prototype={all:function(){return this._all(this.data,[])},search:function(d){var e=this.data,r=[],B=this.toBBox;if(!b(d,e))return r;for(var f=[],t,w,C,x;e;){t=0;for(w=e.children.length;t<w;t++)C=e.children[t],x=e.leaf?B(C):C,b(d,x)&&(e.leaf?r.push(C):n(d,x)?this._all(C,r):f.push(C));e=f.pop()}return r},collides:function(d){var e=this.data,r=this.toBBox;if(!b(d,e))return!1;for(var B=[],f,t,w,C;e;){f=0;for(t=e.children.length;f<t;f++)if(w=
e.children[f],C=e.leaf?r(w):w,b(d,C)){if(e.leaf||n(d,C))return!0;B.push(w)}e=B.pop()}return!1},load:function(d){if(!d||!d.length)return this;if(d.length<this._minEntries){for(var e=0,r=d.length;e<r;e++)this.insert(d[e]);return this}d=this._build(d.slice(),0,d.length-1,0);this.data.children.length?this.data.height===d.height?this._splitRoot(this.data,d):(this.data.height<d.height&&(e=this.data,this.data=d,d=e),this._insert(d,this.data.height-d.height-1,!0)):this.data=d;return this},insert:function(d){d&&
this._insert(d,this.data.height-1);return this},clear:function(){this.data=a([]);return this},remove:function(d,e){if(!d)return this;for(var r=this.data,B=this.toBBox(d),f=[],t=[],w,C,x,u;r||f.length;){r||(r=f.pop(),C=f[f.length-1],w=t.pop(),u=!0);if(r.leaf){a:{x=d;var D=r.children,J=e;if(J){for(var S=0;S<D.length;S++)if(J(x,D[S])){x=S;break a}x=-1}else x=D.indexOf(x)}if(-1!==x){r.children.splice(x,1);f.push(r);this._condense(f);break}}u||r.leaf||!n(r,B)?C?(w++,r=C.children[w],u=!1):r=null:(f.push(r),
t.push(w),w=0,C=r,r=r.children[0])}return this},toBBox:function(d){return d},compareMinX:z,compareMinY:H,toJSON:function(){return this.data},fromJSON:function(d){this.data=d;return this},_all:function(d,e){for(var r=[];d;)d.leaf?e.push.apply(e,d.children):r.push.apply(r,d.children),d=r.pop();return e},_build:function(d,e,r,B){var f=r-e+1,t=this._maxEntries;if(f<=t){var w=a(d.slice(e,r+1));k(w,this.toBBox);return w}B||(B=Math.ceil(Math.log(f)/Math.log(t)),t=Math.ceil(f/Math.pow(t,B-1)));w=a([]);w.leaf=
!1;w.height=B;f=Math.ceil(f/t);t=f*Math.ceil(Math.sqrt(t));var C;for(h(d,e,r,t,this.compareMinX);e<=r;e+=t){var x=Math.min(e+t-1,r);h(d,e,x,f,this.compareMinY);for(C=e;C<=x;C+=f){var u=Math.min(C+f-1,x);w.children.push(this._build(d,C,u,B-1))}}k(w,this.toBBox);return w},_chooseSubtree:function(d,e,r,B){for(var f,t,w,C,x,u,D,J;;){B.push(e);if(e.leaf||B.length-1===r)break;D=J=Infinity;f=0;for(t=e.children.length;f<t;f++)w=e.children[f],x=G(w),u=(Math.max(w.maxX,d.maxX)-Math.min(w.minX,d.minX))*(Math.max(w.maxY,
d.maxY)-Math.min(w.minY,d.minY))-x,u<J?(J=u,D=x<D?x:D,C=w):u===J&&x<D&&(D=x,C=w);e=C||e.children[0]}return e},_insert:function(d,e,r){var B=this.toBBox;r=r?d:B(d);B=[];var f=this._chooseSubtree(r,this.data,e,B);f.children.push(d);for(E(f,r);0<=e;)if(B[e].children.length>this._maxEntries)this._split(B,e),e--;else break;this._adjustParentBBoxes(r,B,e)},_split:function(d,e){var r=d[e],B=r.children.length,f=this._minEntries;this._chooseSplitAxis(r,f,B);B=this._chooseSplitIndex(r,f,B);B=a(r.children.splice(B,
r.children.length-B));B.height=r.height;B.leaf=r.leaf;k(r,this.toBBox);k(B,this.toBBox);e?d[e-1].children.push(B):this._splitRoot(r,B)},_splitRoot:function(d,e){this.data=a([d,e]);this.data.height=d.height+1;this.data.leaf=!1;k(this.data,this.toBBox)},_chooseSplitIndex:function(d,e,r){var B,f;var t=f=Infinity;for(B=e;B<=r-e;B++){var w=q(d,0,B,this.toBBox);var C=q(d,B,r,this.toBBox);var x=Math.max(0,Math.min(w.maxX,C.maxX)-Math.max(w.minX,C.minX))*Math.max(0,Math.min(w.maxY,C.maxY)-Math.max(w.minY,
C.minY));w=G(w)+G(C);if(x<t){t=x;var u=B;f=w<f?w:f}else x===t&&w<f&&(f=w,u=B)}return u},_chooseSplitAxis:function(d,e,r){var B=d.leaf?this.compareMinX:z,f=d.leaf?this.compareMinY:H,t=this._allDistMargin(d,e,r,B);e=this._allDistMargin(d,e,r,f);t<e&&d.children.sort(B)},_allDistMargin:function(d,e,r,B){d.children.sort(B);B=this.toBBox;var f=q(d,0,e,B),t=q(d,r-e,r,B),w=v(f)+v(t),C;for(C=e;C<r-e;C++){var x=d.children[C];E(f,d.leaf?B(x):x);w+=v(f)}for(C=r-e-1;C>=e;C--)x=d.children[C],E(t,d.leaf?B(x):x),
w+=v(t);return w},_adjustParentBBoxes:function(d,e,r){for(;0<=r;r--)E(e[r],d)},_condense:function(d){for(var e=d.length-1,r;0<=e;e--)0===d[e].children.length?0<e?(r=d[e-1].children,r.splice(r.indexOf(d[e]),1)):this.clear():k(d[e],this.toBBox)},_initFormat:function(d){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(d[0]));this.compareMinY=new Function("a","b",e.join(d[1]));this.toBBox=new Function("a","return {minX: a"+d[0]+", minY: a"+d[1]+", maxX: a"+d[2]+", maxY: a"+d[3]+
"};")}};g.rbush=m})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var p={exports:{}};(function(m){(function(k){k=k();void 0!==k&&(m.exports=k)})(function(){function k(z,H,G,v,n){for(;v>G;){if(600<v-G){var b=v-G+1,a=H-G+1,h=Math.log(b),d=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*d*(b-d)/b)*(0>a-b/2?-1:1);k(z,H,Math.max(G,Math.floor(H-a*d/b+h)),Math.min(v,Math.floor(H+(b-a)*d/b+h)),n)}b=z[H];a=G;d=v;q(z,G,H);for(0<n(z[v],b)&&q(z,G,v);a<d;){q(z,a,d);a++;for(d--;0>n(z[a],b);)a++;for(;0<
n(z[d],b);)d--}0===n(z[G],b)?q(z,G,d):(d++,q(z,d,v));d<=H&&(G=d+1);H<=d&&(v=d-1)}}function q(z,H,G){var v=z[H];z[H]=z[G];z[G]=v}function E(z,H){return z<H?-1:z>H?1:0}return function(z,H,G,v,n){k(z,H,G||0,v||z.length-1,n||E)}})})(p);g.quickselect=p.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(g,p,m,k,q,E,z){let H=function(){function G(n,b){this.key=new z(0,0,0,0);this.bounds=q.create();this.objectIds=new Set;this.key.set(b);b=n.getLODInfoAt(this.key);this.tileInfoView=n;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=b.resolution;this.scale=b.scale;this.level=b.level}var v=G.prototype;v.createChildTiles=function(){const n=this.key.getChildKeys(),b=m.acquire();for(let a=0;a<n.length;a++)b[a]=new G(this.tileInfoView,n[a]);return b};v.getQuantizationParameters=
function(){return E.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};p._createClass(G,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return k.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return G}();g.Tile=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G){let v=0;k=function(n){function b(){var a=n.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}g._inheritsLoose(b,n);g._createClass(b,[{key:"version",get:function(){return v++}}]);return b}(k);p.__decorate([q.property({readOnly:!0})],k.prototype,"version",null);p.__decorate([q.property({type:m})],k.prototype,"color",void 0);p.__decorate([q.property({type:m})],k.prototype,"haloColor",void 0);p.__decorate([q.property()],k.prototype,
"haloOpacity",void 0);p.__decorate([q.property()],k.prototype,"fillOpacity",void 0);return k=p.__decorate([G.subclass("esri.views.2d.support.HighlightOptions")],k)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(g){let p=function(){function m(){this._names=new Map}var k=m.prototype;k.begin=function(q){this._names.has(q)||(this._names.set(q,!1),q.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${q}.Start`))};k.end=function(q){this._names.has(q)&&!this._names.get(q)&&
(this._names.set(q,!0),performance.mark(`Esri.${q}.End`))};k.record=function(q){this._names.has(q)||(this._names.set(q,!0),performance.mark(`Esri.${q}`))};return m}();g.Timeline=p;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(g,p,m,k,q,E,z,H){g.ignorePadding&&(k={left:0,right:0,top:0,bottom:0});var G;null!=g.width&&null!=g.height?G=[g.width,g.height]:null==g.width&&
null!=g.height?G=[g.height,g.height]:null!=g.width&&null==g.height?G=[g.width,g.width]:null==g.width&&null==g.height&&(G=null);var v=m[0]-(k.left+k.right);m=m[1]-(k.top+k.bottom);g=g.area||{x:0,y:0,width:v,height:m};if(G){const n=G[0]/G[1];n>v/m?(v=g.width/n,g={x:g.x,y:Math.round(g.y+(g.height-v)/2),width:g.width,height:Math.round(v)}):(v=g.height*n,g={x:Math.round(g.x+(g.width-v)/2),y:g.y,width:Math.round(v),height:g.height})}else G=[g.width,g.height];G[0]>g.width?(p=Math.min(G[0]/g.width,p),G=G[0]/
g.width/p):(p=1,G=G[0]/g.width);return{resolutionScale:p,cropArea:{x:Math.round((g.x+k.left)*p),y:Math.round((g.y+k.top)*p),width:Math.round(g.width*p),height:Math.round(g.height*p)},outputScale:G,format:q,quality:E,children:z,rotation:H}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe"],function(g,p,m,k){function q(f,t){const {format:w,quality:C,rotation:x,disableDecorations:u}=f||{};var D=n(f,t.padding);var J=t.width-
D.left-D.right;t=t.height-D.top-D.bottom;D={x:0,y:0,width:J,height:t};if(f&&f.area){null!=f.area.x&&(D.x=Math.floor(f.area.x));null!=f.area.y&&(D.y=Math.floor(f.area.y));var S=null!=f.area.width?Math.floor(f.area.width):null,T=null!=f.area.height?Math.floor(f.area.height):null;D.width=J-D.x;D.height=t-D.y;null!=S&&null!=T?(D.width=Math.min(D.width,S),D.height=Math.min(D.height,T)):null==S&&null!=T?(S=Math.min(D.width,S),D.height*=S/D.width,D.width=S):null!=S&&null==T&&(S=Math.min(D.height,T),D.width*=
S/D.height,D.height=S)}D=v(D,f);S=Math.floor(Math.max(D.x,0));T=Math.floor(Math.max(D.y,0));J={x:S,y:T,width:Math.floor(Math.min(D.width,J-S)),height:Math.floor(Math.min(D.height,t-T))};t=J.width/J.height;D=D.width/D.height;D!==t&&(D>t?(t=Math.floor(J.width/D),J={x:J.x,y:Math.floor(J.y+(J.height-t)/2),width:J.width,height:t}):(t=Math.floor(J.height*D),J={x:Math.floor(J.x+(J.width-t)/2),y:J.y,width:t,height:J.height}));const {width:P,height:X}=G(f,J);t=b(w);D=r[t];D=m.clamp(null!=C?C:D,0,100);return{format:t,
quality:D,area:J,width:P,height:X,rotation:x,disableDecorations:!!u,ignoreBackground:!(!f||!f.ignoreBackground),ignorePadding:!(!f||!f.ignorePadding)}}function E(f,t){k.isNone(a)&&(a=document.createElement("canvas"));var w=a;if(t.premultipliedAlpha){{var C=f.data;const u=C.length;for(let D=0;D<u;D+=4){var x=C[D+3];255!==x&&0<x&&(x=255/x,C[D+0]*=x,C[D+1]*=x,C[D+2]*=x)}}}w.width=f.width;w.height=f.height;C=w.getContext("2d");C.putImageData(f,0,0);t.flipY&&(C.save(),C.globalCompositeOperation="copy",
C.scale(1,-1),C.translate(0,-C.canvas.height),C.drawImage(C.canvas,0,0),C.restore());return{ctx:C,canvas:w}}function z(f,t){return f.toDataURL(e[t.format],t.quality/100)}function H(f,t,w){w||(h||(h=document.createElement("canvas"),h.width=1,h.height=1),w=h);return w.getContext("2d").createImageData(f,t)}function G(f,t){if(!f)return t;const w=f.width;f=f.height;if(null!=w&&null!=f)return{width:Math.floor(w),height:Math.floor(f)};if(null==w&&null==f)return t;t=t.width/t.height;return null==f?{width:Math.floor(w),
height:Math.floor(w/t)}:{width:Math.floor(f*t),height:Math.floor(f)}}function v(f,t){if(!t||null==t.width||null==t.height)return f;t=t.width/t.height;const w=f.width/f.height;if(w===t)return f;if(w<t)return t=Math.floor(f.height*t),f.x-=(t-f.width)/2,f.width=t,f;t=Math.floor(f.width/t);f.y-=(t-f.height)/2;f.height=t;return f}function n(f,t){return!t||f&&f.ignorePadding?B:t}function b(f){switch(f){case "png":case "jpg":case "jpeg":return f;case null:case void 0:return"png";default:return"png"}}let a=
null,h=null,d=!0;const e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},r={png:100,jpg:98,jpeg:98},B={top:0,right:0,bottom:0,left:0};g.completeUserSettings=q;g.createEmptyImageData=function(f,t,w){if(!f||!t)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(f,t)}catch(C){d=!1}return H(f,t,w)};g.encode=function(f,t,w){const {ctx:C,canvas:x}=E(f,w);f=C.getImageData(0,0,f.width,f.height);t=z(x,t);x.width=0;x.height=0;return{dataUrl:t,data:f}};g.encodeData=
function(f,t){const {ctx:w,canvas:C}=E(f,t);f=w.getImageData(0,0,f.width,f.height);C.width=0;C.height=0;return f};g.getFormatAndQuality=function(f,t){f=b(f);const w=r[f];t=m.clamp(null!=t?t:w,0,100);return{format:f,quality:t}};g.getMaximumResolutionScale=function(f,t){return t/Math.max(f[0],f[1])};g.resampleHermite=function(f,t,w,C=0,x=0,u=f.width-C,D=f.height-x,J=!1){const {data:S}=f,{width:T,height:P,data:X}=t;u/=T;D/=P;const Q=Math.ceil(u/2),O=Math.ceil(D/2);f=f.width;for(let I=0;I<P;I++)for(let l=
0;l<T;l++){const A=4*(l+(J?P-I-1:I)*T);let y=0,K=0,U=0,ba=0,ea=0,na=0;const ha=(I+.5)*D;for(let la=Math.floor(I*D);la<(I+1)*D;la++){var Z=Math.abs(ha-(la+.5))/O;const pa=(l+.5)*u;Z*=Z;for(let qa=Math.floor(l*u);qa<(l+1)*u;qa++){var L=Math.abs(pa-(qa+.5))/Q;L=Math.sqrt(Z+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const M=4*(C+qa+(x+la)*f);na+=L*S[M+3];K+=L;!w&&255>S[M+3]&&(L=L*S[M+3]/255);U+=L*S[M];ba+=L*S[M+1];ea+=L*S[M+2];y+=L}}X[A]=U/y;X[A+1]=ba/y;X[A+2]=ea/y;X[A+3]=na/K}return t};g.screenshotSuperSampleSettings=
function(f,t,w){if(!t)return f;const {framebufferWidth:C,framebufferHeight:x,pixelRatio:u,region:D}=f;t=n(f,w);w=t.left+t.right;const J=t.top+t.bottom,S=C-w,T=x-J,P=Math.min(8,Math.min((2048-w)/S,(2048-J)/T));return 1.5>P?f:{...f,framebufferWidth:Math.round(S*P)+w,framebufferHeight:Math.round(T*P)+J,pixelRatio:u*P,resample:{region:{x:Math.round((D.x-t.left)*P)+t.left,y:Math.round((D.y-t.top)*P)+t.top,width:Math.round(D.width*P),height:Math.round(D.height*P)},width:C,height:x}}};g.toDataUrl=z;g.toRenderSettings=
function(f,t){const w=q(f,t),C=w.area,x=w.width/C.width,u=n(w,t.padding),D=u.left+u.right,J=u.top+u.bottom;return{framebufferWidth:Math.floor((t.width-D)*x+D),framebufferHeight:Math.floor((t.height-J)*x+J),region:{x:Math.floor(C.x*x)+u.left,y:Math.floor(C.y*x)+u.top,width:w.width,height:w.height},format:w.format,quality:w.quality,rotation:w.rotation,pixelRatio:x,layers:f&&f.layers?f.layers:[],disableDecorations:w.disableDecorations,ignoreBackground:w.ignoreBackground,ignorePadding:w.ignorePadding}};
g.wrapImageData=function(f,t,w,C){if(!t||!w)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(f,t,w)}catch(x){d=!1}t=H(t,w,C);t.data.set(f,0);return t};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(g,p,m,k){g.check=function(q){const E=m.getWebGLCapabilities(q);if(!E.available)return new p("webgl:required",
"WebGL is required but not supported.");if("3d"===q&&E.majorPerformanceCaveat)return new p("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!E.supportsHighPrecisionFragment)return new p("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!E.supportsVertexShaderSamplers)return new p("webgl:vertex-shader-samplers-required",
"WebGL support for vertex shader samplers is required but not supported.");if(E.type===k.ContextType.WEBGL1){if(!E.supportsElementIndexUint)return new p("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!E.supportsStandardDerivatives)return new p("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!E.supportsInstancedArrays)return new p("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};
Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],function(g,p,m,k){function q(h){switch(h){case k.ContextType.WEBGL1:return E();case k.ContextType.WEBGL2:return z()}}function E(){if(!G){{const h=new b,d=H(k.ContextType.WEBGL1,h);m.isNone(d)||(h.supportsElementIndexUint=null!==d.getExtension("OES_element_index_uint"),h.supportsStandardDerivatives=
null!==d.getExtension("OES_standard_derivatives"),h.supportsInstancedArrays=null!==d.getExtension("ANGLE_instanced_arrays"),h.supportsTextureFloat=null!==d.getExtension("OES_texture_float"),h.supportsTextureHalfFloat=null!==d.getExtension("OES_texture_half_float"),h.supportsColorBufferFloat=null!==d.getExtension("WEBGL_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==d.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=null!==d.getExtension("EXT_color_buffer_half_float"));G=
h}}return G}function z(){if(!v){{const h=new a,d=H(k.ContextType.WEBGL2,h);m.isNone(d)||(h.supportsColorBufferFloat=null!==d.getExtension("EXT_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==d.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=h.supportsColorBufferFloat||null!==d.getExtension("EXT_color_buffer_half_float"));v=h}}return v}function H(h,d){const e=document.createElement("canvas");if(!e)return null;let r=k.createContext(e,h,{failIfMajorPerformanceCaveat:!0});m.isNone(r)&&
(r=k.createContext(e,h),m.isSome(r)&&(d.majorPerformanceCaveat=!0));if(m.isNone(r))return r;if(h===k.ContextType.WEBGL1){if(h=r.getParameter(r.VERSION),h=null==h?void 0:h.match(/^WebGL\s+([\d.]*)/))h=parseFloat(h[1]),d.available=.94<=h}else d.available=!0;d.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE);d.supportsVertexShaderSamplers=0<r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(h=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT))d.supportsHighPrecisionFragment=0<h.precision;return r}
let G,v,n=function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},b=function(h){function d(){var e=h.apply(this,arguments)||this;e.type=k.ContextType.WEBGL1;return e}
p._inheritsLoose(d,h);return d}(n),a=function(h){function d(){var e=h.apply(this,arguments)||this;e.type=k.ContextType.WEBGL2;e.supportsElementIndexUint=!0;e.supportsStandardDerivatives=!0;e.supportsInstancedArrays=!0;e.supportsTextureFloat=!0;e.supportsTextureHalfFloat=!0;return e}p._inheritsLoose(d,h);return d}(n);g.getWebGL1Capabilities=E;g.getWebGL2Capabilities=z;g.getWebGLCapabilities=function(h){for(h=k.getContextTypes(h);1<h.length;){const d=q(h.shift());if(d.available)return d}return q(h.shift())};
g.getWebGLVersionCapabilities=q;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(g,p,m){function k(H){const G=p("esri-force-webgl");if(G===g.ContextType.WEBGL1||G===g.ContextType.WEBGL2)return[G];switch(H){case "2d":return p("mac")&&p("chrome")?[g.ContextType.WEBGL1,g.ContextType.WEBGL2]:[g.ContextType.WEBGL2,g.ContextType.WEBGL1];case "3d":return[g.ContextType.WEBGL2,
g.ContextType.WEBGL1]}}function q(H,G,v={}){if(!window.WebGLRenderingContext)return z(H,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;G=E(H,G,v);m.isNone(G)&&z(H,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return G}function E(H,G,v={}){G=G===g.ContextType.WEBGL1?["webgl",
"experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const b of G){try{n=H.getContext(b,v)}catch(a){}if(n)break}return n}function z(H,G){(H=H.parentNode)&&(H.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+G+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}g.ContextType=void 0;(function(H){H[H.WEBGL1=
1]="WEBGL1";H[H.WEBGL2=2]="WEBGL2"})(g.ContextType||(g.ContextType={}));g.createContext=E;g.createContextOrErrorHTML=function(H,G,v={}){for(H=k(H);1<H.length;){const n=E(G,H.shift(),v);if(m.isSome(n))return n}return q(G,H.shift(),v)};g.getContextTypes=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(g,p,m,k,q,E,z,H){k=function(G){function v(n){n=G.call(this,n)||this;n.components=["attribution","zoom"];return n}g._inheritsLoose(v,G);return v}(H);p.__decorate([m.property()],k.prototype,"components",void 0);return k=p.__decorate([z.subclass("esri.views.ui.2d.DefaultUI2D")],k)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){k.getLogger("esri.views.ui.DefaultUI");m=function(e){function r(f){f=e.call(this,f)||this;f._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};f.components=[];return f}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){this._handles.add([q.watch(()=>this.components,this._componentsWatcher.bind(this),q.initial),q.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),q.initial)])};
B._add=function(f,t,w,C){if("string"===typeof f&&this._defaultPositionLookup[f]){if(this._find(f))return;f=this._createComponent(f)}e.prototype._add.call(this,f,t,w,C)};B._removeComponents=function(f){f.forEach(t=>{if(t=this._find(t))this.remove(t),t.destroy()})};B._updateViewAwareWidgets=function(f){this.components.forEach(t=>{(t=(t=this._find(t))&&t.widget)&&void 0!==t.view&&(t.view=f)})};B._componentsWatcher=function(f,t){this._removeComponents(t);this._addComponents(f);this._adjustPadding(f)};
B._adjustPadding=function(f){f.includes("attribution")||this._isOverridden("padding")||({top:f}=this.padding,this.padding=f)};B._addComponents=function(f){this.initialized&&f.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))};B._createComponent=function(f){const t=this._createWidget(f);if(t)return new v({id:f,node:t})};B._createWidget=function(f){if("attribution"===f)return this._createAttribution();if("compass"===f)return this._createCompass();if("navigation-toggle"===
f)return this._createNavigationToggle();if("zoom"===f)return this._createZoom()};B._createAttribution=function(){return new b({view:this.view})};B._createCompass=function(){return new a({view:this.view})};B._createNavigationToggle=function(){return new h({view:this.view})};B._createZoom=function(){return new d({view:this.view})};return r}(n);p.__decorate([E.property()],m.prototype,"components",void 0);return m=p.__decorate([G.subclass("esri.views.ui.DefaultUI")],m)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G){m=function(v){function n(){var a=v.apply(this,arguments)||this;a.widget=null;return a}g._inheritsLoose(n,v);var b=n.prototype;b.destroy=function(){this.widget&&this.widget.destroy();this.node=null};b.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),k.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};
g._createClass(n,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(a){const h=this._get("node");a!==h&&(a&&a.classList.add("esri-component"),h&&h.classList.remove("esri-component"),this._set("node",a))}}]);return n}(m);p.__decorate([q.property({dependsOn:[]})],m.prototype,"id",null);p.__decorate([q.property()],m.prototype,"node",null);p.__decorate([H.cast("node")],m.prototype,"castNode",null);p.__decorate([q.property({readOnly:!0})],m.prototype,
"widget",void 0);return m=p.__decorate([G.subclass("esri.views.ui.Component")],m)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h){function d(f){const t="object"===typeof f&&null!==f&&Object.getPrototypeOf(f);return null!==t&&t!==Object.prototype||!("component"in f||"index"in f||"position"in f)?null:f}function e(f,{top:t,bottom:w,left:C,right:x}){f.style.top=t;f.style.bottom=w;f.style.left=C;f.style.right=x}const r={left:0,top:0,bottom:0,right:0},B={bottom:30,top:15,right:15,left:15};k=function(f){function t(C){var x=f.call(this,C)||this;x._cornerNameToContainerLookup={};x._positionNameToContainerLookup=
{};x._components=[];x._componentToKey=new Map;x._handles=new q;x.view=null;x._applyViewPadding=()=>{const u=x.container;u&&e(u,x._toPxPosition(x._getViewPadding()))};x._applyUIPadding=()=>{const u=x._innerContainer;u&&e(u,x._toPxPosition(x.padding))};x._initContainers();return x}g._inheritsLoose(t,f);var w=t.prototype;w.initialize=function(){this._handles.add([E.watch(()=>{var C;return[null==(C=this.view)?void 0:C.padding,this.container]},this._applyViewPadding,E.initial),E.watch(()=>this.padding,
this._applyUIPadding,E.initial)])};w.destroy=function(){this.container=null;for(const C of this._components)C.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};w.castPadding=function(C){return"number"===typeof C?{bottom:C,top:C,right:C,left:C}:{...B,...C}};w.add=function(C,x){let u,D;if(Array.isArray(C))C.forEach(S=>this.add(S,x));else{var J=d(C);J&&({index:u,position:x,component:C,key:D}=J);x&&"object"===typeof x&&({index:u,key:D,position:x}=x);!C||x&&!this._isValidPosition(x)||
this._add(C,x,u,D)}};w.remove=function(C,x){if(C){if(Array.isArray(C))return C.map(J=>this.remove(J,x));var u=this._find(C);if(u){var D=this._componentToKey;if(!D.has(C)||D.get(C)===x)return D=this._components.indexOf(u),u.node.parentNode&&u.node.parentNode.removeChild(u.node),this._componentToKey.delete(C),this._components.splice(D,1)[0]}}};w.empty=function(C){if(Array.isArray(C))return C.map(x=>this.empty(x)).reduce((x,u)=>x.concat(u));C=C||"manual";return"manual"===C?Array.prototype.slice.call(this._manualContainer.children).filter(x=>
!x.classList.contains("esri-ui-corner")).map(x=>this.remove(x)):this._isValidPosition(C)?Array.prototype.slice.call(this._cornerNameToContainerLookup[C].children).map(this.remove,this):null};w.move=function(C,x){Array.isArray(C)&&C.forEach(J=>this.move(J,x));if(C){var u=d(C)||d(x);if(u){var D=u.index;x=u.position;C=u.component||C}(!x||this._isValidPosition(x))&&(C=this.remove(C))&&this.add(C,{position:x,index:D})}};w.find=function(C){return C?(C=this._findById(C))&&(C.widget||C.node):null};w.getPosition=
function(C){for(const x in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[x].contains(C))return x;return null};w._add=function(C,x,u,D){C instanceof a||(C=new a({node:C}));this._place({component:C,position:x,index:u});this._components.push(C);D&&this._componentToKey.set(C,D)};w._find=function(C){return C?C instanceof a?this._findByComponent(C):"string"===typeof C?this._findById(C):this._findByNode(C.domNode||C):null};w._getViewPadding=function(){return this.get("view.padding")||
r};w._attachContainers=function(C){C.appendChild(this._innerContainer);C.appendChild(this._manualContainer)};w._initContainers=function(){var C=document.createElement("div");C.classList.add("esri-ui-inner-container");C.classList.add("esri-ui-corner-container");const x=document.createElement("div");x.classList.add("esri-ui-inner-container");x.classList.add("esri-ui-manual-container");const u=document.createElement("div");u.classList.add("esri-ui-top-left");u.classList.add("esri-ui-corner");C.appendChild(u);
const D=document.createElement("div");D.classList.add("esri-ui-top-right");D.classList.add("esri-ui-corner");C.appendChild(D);const J=document.createElement("div");J.classList.add("esri-ui-bottom-left");J.classList.add("esri-ui-corner");C.appendChild(J);const S=document.createElement("div");S.classList.add("esri-ui-bottom-right");S.classList.add("esri-ui-corner");C.appendChild(S);this._innerContainer=C;this._manualContainer=x;C=h.isRTL();this._cornerNameToContainerLookup={"top-left":u,"top-right":D,
"bottom-left":J,"bottom-right":S,"top-leading":C?D:u,"top-trailing":C?u:D,"bottom-leading":C?S:J,"bottom-trailing":C?J:S};this._positionNameToContainerLookup={manual:x,...this._cornerNameToContainerLookup}};w._isValidPosition=function(C){return!!this._positionNameToContainerLookup[C]};w._place=function(C){const x=C.component,u=C.index;C=this._positionNameToContainerLookup[C.position||"manual"];var D=-1<u,J=x.widget;J&&!J._started&&"function"===typeof J.postMixInProperties&&"function"===typeof J.buildRendering&&
"function"===typeof J.postCreate&&"function"===typeof J.startup&&x.widget.startup();D?(D=Array.prototype.slice.call(C.children),0===u?C.firstChild?m.insertBefore(x.node,C.firstChild):C.appendChild(x.node):u>=D.length?C.appendChild(x.node):m.insertBefore(x.node,D[u])):C.appendChild(x.node)};w._toPxPosition=function(C){return{top:this._toPxUnit(C.top),left:this._toPxUnit(C.left),right:this._toPxUnit(C.right),bottom:this._toPxUnit(C.bottom)}};w._toPxUnit=function(C){return 0===C?"0":C+"px"};w._findByComponent=
function(C){let x=null,u;this._components.some(D=>{(u=D===C)&&(x=D);return u});return x};w._findById=function(C){let x=null,u;this._components.some(D=>{(u=D.id===C)&&(x=D);return u});return x};w._findByNode=function(C){let x=null,u;this._components.some(D=>{(u=D.node===C)&&(x=D);return u});return x};g._createClass(t,[{key:"container",set:function(C){const x=this._get("container");C!==x&&(C&&(C.classList.add("esri-ui"),b.setCalciteThemeClass(C),this._attachContainers(C)),x&&(x.classList.remove("esri-ui"),
e(x,{top:"",bottom:"",left:"",right:""}),m.empty(x)),this._set("container",C))}},{key:"height",get:function(){const C=this.get("view.height")||0;if(0===C)return C;const x=this._getViewPadding();return Math.max(C-(x.top+x.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(C){C?this._override("padding",C):this._clearOverride("padding")}},{key:"width",get:function(){const C=this.get("view.width")||0;if(0===C)return C;const x=this._getViewPadding();return Math.max(C-
(x.left+x.right),0)}}]);return t}(k.EventedAccessor);p.__decorate([z.property()],k.prototype,"container",null);p.__decorate([z.property()],k.prototype,"height",null);p.__decorate([z.property({value:B})],k.prototype,"padding",null);p.__decorate([v.cast("padding")],k.prototype,"castPadding",null);p.__decorate([z.property()],k.prototype,"view",void 0);p.__decorate([z.property()],k.prototype,"width",null);return k=p.__decorate([n.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){q=function(e){function r(f,t){var w=e.call(this,f,t)||this;w._isOpen=!1;w._attributionTextOverflowed=!1;w._prevSourceNodeHeight=0;w._resizeObserver=new ResizeObserver(C=>C.forEach(({target:x})=>w._checkSourceTextOverflow(x)));w.iconClass="esri-icon-description";w.itemDelimiter=" | ";w.label=void 0;w.messages=null;w.view=null;w.viewModel=new n;return w}g._inheritsLoose(r,e);var B=r.prototype;B.initialize=function(){this.own(m.on(()=>{var f;return null==(f=this.viewModel)?
void 0:f.items},"change",()=>this.scheduleRender()))};B.destroy=function(){var f;null==(f=this._resizeObserver)?void 0:f.disconnect()};B.render=function(){return h.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};B.renderPoweredBy=function(){return h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",h.tsx("a",
{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};B.renderSourcesNode=function(){const f=this._isOpen,t=this._isInteractive,w=t?"0":"",{attributionText:C}=this;return h.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:f,["esri-interactive"]:t}),innerHTML:C,tabindex:w})};B._afterSourcesNodeCreate=function(f){this._prevSourceNodeHeight=f.clientWidth;
this._resizeObserver.observe(f)};B._checkSourceTextOverflow=function(f){let t=!1;const {clientHeight:w,clientWidth:C,scrollWidth:x}=f;f=x>C;const u=this._attributionTextOverflowed!==f;this._attributionTextOverflowed=f;u&&(t=!0);this._isOpen&&(f=w<this._prevSourceNodeHeight,this._prevSourceNodeHeight=w,f&&(this._isOpen=!1,t=!0));t&&this.scheduleRender()};B._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};g._createClass(r,[{key:"_isInteractive",get:function(){return this._isOpen||
this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((f,t)=>{f.includes(t.text)||f.push(t.text);return f},[]).join(this.itemDelimiter)}}]);return r}(v);p.__decorate([H.property()],q.prototype,"_isOpen",void 0);p.__decorate([H.property()],q.prototype,"_isInteractive",null);p.__decorate([H.property()],q.prototype,"_attributionTextOverflowed",void 0);p.__decorate([H.property()],q.prototype,"_prevSourceNodeHeight",void 0);p.__decorate([H.property({readOnly:!0,
dependsOn:["viewModel.items.length","itemDelimiter"]})],q.prototype,"attributionText",null);p.__decorate([H.property()],q.prototype,"iconClass",void 0);p.__decorate([H.property()],q.prototype,"itemDelimiter",void 0);p.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],q.prototype,"label",void 0);p.__decorate([H.property(),a.messageBundle("esri/widgets/Attribution/t9n/Attribution")],q.prototype,"messages",void 0);p.__decorate([k.aliasOf("viewModel.view")],q.prototype,
"view",void 0);p.__decorate([H.property({type:n})],q.prototype,"viewModel",void 0);p.__decorate([b.accessibleHandler()],q.prototype,"_toggleState",null);return q=p.__decorate([G.subclass("esri.widgets.Attribution")],q)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h,d){function e(t,w){return t&&"copyright"in t&&(!w||"function"===typeof t.originOf&&"user"===t.originOf("copyright"))}function r(t,w){return t.length!==w.length||t.some((C,x)=>C.text!==w[x].text)}function B(t,w,C){C&&w&&(t.find(x=>x.layerView===w&&x.text===C)||t.push({text:C,layerView:w}))}const f=[];m=function(t){function w(x){var u=t.call(this,x)||this;u._clear=()=>{u._fetchedAttributionData.clear();u._pendingAttributions.clear();u.handles.remove("suspension");
u.notifyChange("state")};u._pendingAttributions=new Set;u._fetchedAttributionData=new Map;u.items=new q;u.view=null;u._allLayerViewsChange=D=>{u.handles.remove("suspension");const J=u.get("view.allLayerViews");J&&u.handles.add(J.map(S=>z.watch(()=>{var T;return[S.suspended,null==(T=S.layer)?void 0:T.attributionVisible]},()=>u._updateAttributionItems())),"suspension");D&&D.removed&&D.removed.forEach(S=>{u._pendingAttributions.delete(S);u._fetchedAttributionData.delete(S)});u._updateAttributionItems()};
u.handles.add([z.on(()=>{var D;return null==(D=u.view)?void 0:D.allLayerViews},"change",D=>u._allLayerViewsChange(D),{onListenerAdd:()=>u._allLayerViewsChange(),onListenerRemove:u._clear}),z.when(()=>{var D;return!0===(null==(D=u.view)?void 0:D.stationary)},()=>u._updateAttributionItems())]);return u}g._inheritsLoose(w,t);var C=w.prototype;C.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};C._updateAttributionItems=function(){const x=
this.get("view.allLayerViews");f.length=0;x?(x.forEach(u=>{var D;if(!u.suspended&&null!=(D=u.layer)&&D.attributionVisible)if(D=u.layer,e(D,"user"))B(f,u,D.copyright);else if(D.hasAttributionData)if(this._fetchedAttributionData.has(u)){var J=this._fetchedAttributionData.get(u);J?B(f,u,this._getDynamicAttribution(J,this.view,D)):e(D)&&B(f,u,D.copyright)}else this._fetchAttributionData(u);else(J=D.get("portalItem.accessInformation"))?B(f,u,J):B(f,u,D.copyright)}),r(this.items,f)&&(this.items.removeAll(),
this.items.addMany(f)),f.length=0,this.notifyChange("state")):this._clear()};C._fetchAttributionData=function(){var x=g._asyncToGenerator(function*(u){if(!this._pendingAttributions.has(u)){this._pendingAttributions.add(u);var D=yield k.result(u.layer.fetchAttributionData());this._pendingAttributions.has(u)&&(D=D.ok?this._createContributionIndex(D.value,"bing-maps"===u.layer.type):null,this._pendingAttributions.delete(u),this._fetchedAttributionData.set(u,D));this._updateAttributionItems()}});return function(u){return x.apply(this,
arguments)}}();C._createContributionIndex=function(x,u){x=x.contributors;const D={};if(!x)return D;for(let P=0;P<x.length;P++){const X=x[P];var J=X.coverageAreas;if(!J)return;for(const Q of J){var S=Q.bbox,T=Q.zoomMin-(u&&Q.zoomMin?1:0);J=Q.zoomMax-(u&&Q.zoomMax?1:0);for(S={extent:h.geographicToWebMercator({xmin:S[1],ymin:S[0],xmax:S[3],ymax:S[2],spatialReference:d.WGS84}),attribution:X.attribution||"",score:null!=Q.score?Q.score:100,id:P};T<=J;T++)D[T]=D[T]||[],D[T].push(S)}}D.maxKey=Math.max.apply(null,
Object.keys(D));return D};C._getDynamicAttribution=function(x,u,D){const {extent:J,scale:S}=u;D=D.tileInfo.scaleToZoom(S);D=Math.min(x.maxKey,Math.round(D));if(!J||null==D||-1>=D)return"";x=x[D];const T=h.project(J.center.clone().normalize(),u.spatialReference),P={};return x?x.filter(X=>{const Q=!P[X.id]&&T&&a.extentContainsPoint(X.extent,T);Q&&(P[X.id]=!0);return Q}).sort((X,Q)=>Q.score-X.score||X.objectId-Q.objectId).map(X=>X.attribution).join(", "):""};g._createClass(w,[{key:"state",get:function(){return this.get("view.ready")?
0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return w}(E.HandleOwner);p.__decorate([H.property({readOnly:!0,type:q})],m.prototype,"items",void 0);p.__decorate([H.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([H.property()],m.prototype,"view",void 0);return m=p.__decorate([b.subclass("esri.widgets.Attribution.AttributionViewModel")],m)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h){k=function(d){function e(B,f){B=d.call(this,B,f)||this;B.goToOverride=null;B.iconClass="esri-icon-locate-circled";B.label=void 0;B.messages=null;B.view=null;B.viewModel=new v;return B}g._inheritsLoose(e,d);var r=e.prototype;r.reset=function(){return this.viewModel.reset()};r.render=function(){const {orientation:B,state:f}=this.viewModel;var t="disabled"===f,w="compass"===("rotation"===f?"rotation":"compass");const C=t?-1:0;t={["esri-disabled"]:t,["esri-interactive"]:!t};
w={["esri-icon-compass"]:w,["esri-icon-dial"]:!w};const {messages:x}=this;return a.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",t),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:C,"aria-label":x.reset,title:x.reset},a.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",w),styles:this._toRotationTransform(B)}),a.tsx("span",{class:"esri-icon-font-fallback-text"},x.reset))};r._reset=function(){this.viewModel.reset()};r._toRotationTransform=
function(B){return{transform:`rotateZ(${B.z}deg)`}};return e}(G);p.__decorate([m.aliasOf("viewModel.goToOverride")],k.prototype,"goToOverride",void 0);p.__decorate([z.property()],k.prototype,"iconClass",void 0);p.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);p.__decorate([z.property(),b.messageBundle("esri/widgets/Compass/t9n/Compass")],k.prototype,"messages",void 0);p.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);
p.__decorate([z.property({type:v})],k.prototype,"viewModel",void 0);p.__decorate([n.accessibleHandler()],k.prototype,"_reset",null);return k=p.__decorate([H.subclass("esri.widgets.Compass")],k)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b){m=function(a){function h(e){e=a.call(this,e)||this;e._handles=new k;e.orientation={x:0,y:0,z:0};e.view=null;e._updateForCamera=e._updateForCamera.bind(g._assertThisInitialized(e));e._updateForRotation=e._updateForRotation.bind(g._assertThisInitialized(e));e._updateRotationWatcher=e._updateRotationWatcher.bind(g._assertThisInitialized(e));return e}g._inheritsLoose(h,a);var d=h.prototype;d.initialize=function(){this._handles.add(E.watch(()=>this.view,this._updateRotationWatcher,
E.initial))};d.destroy=function(){this._handles=q.removeMaybe(this._handles);this.view=null};d.reset=function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}};d._updateForRotation=function(e){void 0!==e&&null!==e&&(this.orientation={z:e})};d._updateForCamera=function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})};d._updateRotationWatcher=function(e){this._handles.removeAll();e&&this._handles.add("2d"===e.type?E.watch(()=>null==e?void 0:
e.rotation,this._updateForRotation,E.initial):E.watch(()=>null==e?void 0:e.camera,this._updateForCamera,E.initial))};g._createClass(h,[{key:"canShowNorth",get:function(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return h}(b.GoToMixin(m));p.__decorate([z.property({readOnly:!0})],m.prototype,"canShowNorth",null);p.__decorate([z.property()],
m.prototype,"orientation",void 0);p.__decorate([z.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([z.property()],m.prototype,"view",void 0);return m=p.__decorate([n.subclass("esri.widgets.CompassViewModel")],m)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n,b,a,h){k=function(d){function e(B,f){B=d.call(this,B,f)||this;B.iconClass="esri-icon-pan2";B.label=void 0;B.messages=null;B.view=null;B.viewModel=new v;return B}g._inheritsLoose(e,d);var r=e.prototype;r.toggle=function(){return this.viewModel.toggle()};r.render=function(){const B="disabled"===this.get("viewModel.state");var f="pan"===this.get("viewModel.navigationMode");const t={["esri-navigation-toggle__button--active"]:f};f={["esri-navigation-toggle__button--active"]:!f};
const w=B?-1:0,C=this.messages.toggle;return a.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:B,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:w,"aria-label":C,title:C},a.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",t)},a.tsx("span",{class:"esri-icon-pan"})),a.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",f)},a.tsx("span",{class:"esri-icon-rotate"})))};r._toggle=function(){this.toggle()};g._createClass(e,[{key:"layout",set:function(B){"horizontal"!==B&&(B="vertical");this._set("layout",B)}}]);return e}(G);p.__decorate([z.property()],k.prototype,"iconClass",void 0);p.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);p.__decorate([z.property({value:"vertical"})],k.prototype,"layout",null);p.__decorate([z.property(),
b.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],k.prototype,"messages",void 0);p.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);p.__decorate([z.property({type:v})],k.prototype,"viewModel",void 0);p.__decorate([n.accessibleHandler()],k.prototype,"_toggle",null);return k=p.__decorate([H.subclass("esri.widgets.NavigationToggle")],k)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H,G,v){m=function(n){function b(h){h=n.call(this,h)||this;h._handles=new k;h.navigationMode="pan";h.view=null;return h}g._inheritsLoose(b,n);var a=b.prototype;a.initialize=function(){this._handles.add(q.when(()=>{var h;return null==(h=this.view)?void 0:h.inputManager},()=>this._setNavigationMode()))};a.destroy=function(){this._handles.destroy();this.view=this._handles=null};a.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",
this._setNavigationMode())};a._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};g._createClass(b,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return b}(m);p.__decorate([E.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([E.property()],m.prototype,"navigationMode",void 0);p.__decorate([E.property()],m.prototype,"view",void 0);return m=p.__decorate([v.subclass("esri.widgets.NavigationToggleViewModel")],
m)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(g,p,m,k,q,E,z,H,G,v,n,b,a,h){k=function(d){function e(B,
f){B=d.call(this,B,f)||this;B.iconClass="esri-icon-zoom-in-magnifying-glass";B.label=void 0;B.messages=null;B.view=null;B.viewModel=new h;return B}g._inheritsLoose(e,d);var r=e.prototype;r.initialize=function(){this._zoomInButton=new a({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new a({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};r.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=
null};r.render=function(){const B=this.viewModel,f={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===B.state&&B.canZoomIn;this._zoomOutButton.enabled="ready"===B.state&&B.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",f)},this._zoomInButton.render(),this._zoomOutButton.render())};r.zoomIn=function(){return this.viewModel.zoomIn()};r.zoomOut=
function(){return this.viewModel.zoomOut()};g._createClass(e,[{key:"layout",set:function(B){"horizontal"!==B&&(B="vertical");this._set("layout",B)}}]);return e}(G);p.__decorate([z.property()],k.prototype,"iconClass",void 0);p.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);p.__decorate([z.property({value:"vertical"})],k.prototype,"layout",null);p.__decorate([z.property(),n.messageBundle("esri/widgets/Zoom/t9n/Zoom")],k.prototype,"messages",
void 0);p.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);p.__decorate([z.property({type:h})],k.prototype,"viewModel",void 0);return k=p.__decorate([H.subclass("esri.widgets.Zoom")],k)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(g,p,m,k,q,E,z,H,G,v,n){k=function(b){function a(){var d=b.apply(this,arguments)||this;d.enabled=!0;d.iconClass="";d.title="";return d}g._inheritsLoose(a,b);var h=a.prototype;h.render=function(){const d=this.enabled?0:-1,e={[this.iconClass]:!!this.iconClass};return v.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:d,
title:this.title},v.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",e)}),v.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};h._triggerAction=function(){this.action.call(this)};return a}(H);p.__decorate([m.property()],k.prototype,"action",void 0);p.__decorate([m.property()],k.prototype,"enabled",void 0);p.__decorate([m.property()],k.prototype,"iconClass",void 0);p.__decorate([m.property()],k.prototype,"title",void 0);p.__decorate([G.accessibleHandler()],
k.prototype,"_triggerAction",null);return k=p.__decorate([z.subclass("esri.widgets.IconButton")],k)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(g,p,m,k,q,E,
z,H,G,v,n){m=function(b){function a(d){d=b.call(this,d)||this;d.canZoomIn=!1;d.canZoomOut=!1;return d}g._inheritsLoose(a,b);var h=a.prototype;h.destroy=function(){this.view=null};h.zoomIn=function(){if(this.canZoomIn){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomIn():k.ignoreAbortErrors(d.goTo({zoomFactor:2}))}};h.zoomOut=function(){if(this.canZoomOut){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomOut():k.ignoreAbortErrors(d.goTo({zoomFactor:.5}))}};g._createClass(a,[{key:"state",
get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(d){d?"2d"===d.type?this._zoomConditions=new v({view:d}):"3d"===d.type&&(this._zoomConditions=new n({view:d})):this._zoomConditions=null;this._set("view",d)}}]);return a}(m);p.__decorate([q.property()],m.prototype,"_zoomConditions",void 0);p.__decorate([q.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m.prototype,"canZoomIn",void 0);p.__decorate([q.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],m.prototype,"canZoomOut",void 0);p.__decorate([q.property({readOnly:!0})],m.prototype,"state",null);p.__decorate([q.property()],m.prototype,"view",null);return m=p.__decorate([G.subclass("esri.widgets.Zoom.ZoomViewModel")],m)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H){m=function(G){function v(){return G.apply(this,arguments)||this}g._inheritsLoose(v,G);g._createClass(v,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||n>b}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||n<b}}]);return v}(m);p.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomIn",null);p.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomOut",null);p.__decorate([k.property()],m.prototype,"view",void 0);return m=p.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions2D")],m)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,p,m,k,q,E,z,H){m=function(G){function v(){return G.apply(this,arguments)||this}g._inheritsLoose(v,G);g._createClass(v,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return v}(m);p.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomIn",null);p.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomOut",null);p.__decorate([k.property()],m.prototype,"view",void 0);return m=p.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions3D")],
m)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,p,m,k,q,E,z,H){var G;k=G=function(v){function n(b){b=v.call(this,b)||this;b.color=new m([0,0,0,1]);return b}g._inheritsLoose(n,v);n.prototype.clone=function(){return new G(q.clone({color:this.color}))};
return n}(k.JSONSupport);p.__decorate([E.property({type:m,json:{write:!0}})],k.prototype,"color",void 0);return k=G=p.__decorate([H.subclass("esri.webmap.background.ColorBackground")],k)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(g,
p,m,k,q,E,z,H,G,v,n,b,a,h,d,e,r,B,f,t,w,C,x,u,D,J,S,T,P,X,Q,O,Z,L,I,l,A,y,K,U,ba,ea,na,ha,la,pa,qa,M,V,ca,ia,ka){function ra(){return va.apply(this,arguments)}function va(){va=p._asyncToGenerator(function*(){const [,{GraphicsView2D:Qa,GraphicContainer:Sa,LabelManager:Ea,MapViewNavigation:da,MagnifierView2D:ja,Stage:sa}]=yield Promise.all([new Promise((xa,Aa)=>g(["./2d/webglDeps"],xa,Aa)),new Promise((xa,Aa)=>g(["./2d/mapViewDeps"],xa,Aa))]);nb=Qa;Xa=Sa;eb=Ea;pb=da;vb=ja;ya=sa});return va.apply(this,
arguments)}function Ba(Qa){const Sa=Qa.getObjectId();if(Sa){var Ea,da,ja,sa;return`${null!=(Ea=null!=(da=null==(ja=Qa.layer)?void 0:ja.uid)?da:null==(sa=Qa.sourceLayer)?void 0:sa.uid)?Ea:"MapView"}/${Sa}`}return`"MapView/${Qa.uid}`}function Da(Qa,Sa,Ea,da,ja){return sa=>{if(sa instanceof k){if(sa.layer===Qa)null==ja?void 0:ja();else{var xa=Qa.allLayerViews.find(Aa=>Aa.layer===sa.layer);xa&&(null==da?void 0:da(xa))}Ea(Ba(sa))}else(xa=Qa.allLayerViews.find(Aa=>Aa.layer===sa))&&Sa(xa)}}function Ga(Qa,
Sa){if(Qa)if(v.isIterable(Qa))for(const Ea of Qa)if(v.isIterable(Ea))for(const da of Ea)Sa(da);else Sa(Ea);else Sa(Qa)}const Fa=n.getLogger("esri.views.MapView");let ya,nb,Xa,eb,pb,vb;n=function(Qa){function Sa(da){var ja=Qa.call(this,da)||this;ja._magnifierView=null;ja._stage=null;ja._resolveWhenReady=[];ja.rootLayerViews=new z({getCollections:()=>{var sa,xa;return[null==(sa=ja.basemapView)?void 0:sa.baseLayerViews,ja.layerViews,null==(xa=ja.basemapView)?void 0:xa.referenceLayerViews]},getChildrenFunction:()=>
null});ja.featuresTilingScheme=null;ja.fullOpacity=1;ja.graphicsView=null;ja.labelManager=null;ja.mapViewNavigation=null;ja.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};ja.rendering=!1;ja.supersampleScreenshotsEnabled=!1;ja.supportsGround=!1;ja._stationaryTimer=null;ja.frameTask=new Z(p._assertThisInitialized(ja));ja._pePromise=null;ja.floors=new E;ja.highlightOptions=new la;ja.inputManager=new na({view:p._assertThisInitialized(ja)});
ja.map=null;ja.resizeAlign="center";ja.spatialReferenceLocked=!1;ja.timeline=new pa.Timeline;ja.type="2d";ja.ui=new ia;ja._pixelFormat={flipY:!0,premultipliedAlpha:!0};ja.constraints=new I;ja.padding={top:0,right:0,bottom:0,left:0};ja.handles.add([h.watch(()=>ja.viewpoint,()=>{ja._lastStationaryEventTimestamp=performance.now();ja._flipStationary(160)},h.sync),ja.on("resize",sa=>ja._resizeHandler(sa)),h.watch(()=>{var sa;return null==(sa=ja.animationManager)?void 0:sa.animation},sa=>{ja.animation=
sa})]);r.initialize();return ja}p._inheritsLoose(Sa,Qa);var Ea=Sa.prototype;Ea.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Ea.goTo=function(da,ja){if(da)return this.animation&&(this.animation=null),this._createAnimation(),h.whenOnce(()=>this.ready,ja).then(()=>{const sa={animate:!0,...ja},xa=ea.create(da,this);this.animation.update(xa);this._gotoTask={};return sa.animate?
this._gotoAnimated(xa,sa):this._gotoImmediate(xa,sa)});Fa.error("#goTo()","target cannot be null or undefined")};Ea.hitTest=function(){var da=p._asyncToGenerator(function*(ja,sa){const xa=V.isSupportedScreenPointEvent(ja)?V.createScreenPointFromSupportedEvent(this,ja):ja;if(!this.ready||isNaN(xa.x)||isNaN(xa.y))return{screenPoint:xa,results:[]};let Aa=new Set,Ca=!1,Ka=null,Ua=null;null!=sa&&sa.include?Ga(sa.include,Da(this,Ia=>Aa.add(Ia),Ia=>{Ka||(Ka=new Set);Ka.add(Ia)},Ia=>Aa.add(Ia),()=>Ca=!0)):
(Ca=!0,Aa=new Set(this.allLayerViews));null!=sa&&sa.exclude&&Ga(sa.exclude,Da(this,Ia=>Aa.delete(Ia),Ia=>{Ua||(Ua=new Set);Ua.add(Ia)}));sa=this.allLayerViews.filter(Ia=>!Ia.suspended&&Aa.has(Ia)).reverse();const Ta=this.toMap(xa);ja=Ca?this.graphicsView.hitTest(Ta).map(Ia=>({type:"graphic",graphic:Ia,layer:null,mapPoint:Ta})):[];sa=yield Promise.all(sa.map(Ia=>Ia.hitTest(Ta,xa)).toArray());ja=[...ja,...sa].filter(b.isSome).flat().filter(b.isSome);Ka&&(ja=ja.filter(Ia=>!("graphic"in Ia)||!Ia.graphic||
Ka.has(Ba(Ia.graphic))));Ua&&(ja=ja.filter(Ia=>!("graphic"in Ia)||!Ia.graphic||Ua.has(Ba(Ia.graphic))));return{screenPoint:xa,results:ja}});return function(ja,sa){return da.apply(this,arguments)}}();Ea.takeScreenshot=function(){var da=p._asyncToGenerator(function*(ja){ja=this._createScreenshotPlan(ja);const sa=yield this._stage.takeScreenshot(ja);return M.encode(sa,{format:ja.format,quality:ja.quality,rotation:0,disableDecorations:!1},this._pixelFormat)});return function(ja){return da.apply(this,
arguments)}}();Ea._takeScreenshot=function(){var da=p._asyncToGenerator(function*(ja){ja=this._createScreenshotPlan(ja);ja=yield this._stage.takeScreenshot(ja);return M.encodeData(ja,this._pixelFormat)});return function(ja){return da.apply(this,arguments)}}();Ea._createScreenshotPlan=function(da){da=da||{};const ja=this.supersampleScreenshotsEnabled?Math.min(4,M.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let sa;da.layers?(sa=[],da.layers.forEach(Ca=>
{const Ka=this.allLayerViews.find(Ua=>Ua.layer.id===Ca.id);Ka&&"container"in Ka&&Ka.container&&sa.push(Ka.container)})):sa=this._stage.children;const {format:xa,quality:Aa}=M.getFormatAndQuality(da.format,da.quality);return qa(da,ja,this.size,this.padding,xa,Aa,sa,da.rotation)};Ea.toMap=function(da){if(!this.ready)return null;da=V.isSupportedScreenPointEvent(da)?V.createScreenPointFromSupportedEvent(this,da):da;const [ja,sa]=this.state.toMap([0,0],[da.x,da.y]);return new x({x:ja,y:sa,spatialReference:this.spatialReference})};
Ea.toScreen=function(da){if(!this.ready)return null;da=this._project(da,this.spatialReference);da=[da.x,da.y];this.state.toScreen(da,da);return d.createScreenPoint(da[0],da[1])};Ea.on=function(da,ja,sa,xa){return(sa=this.inputManager&&this.viewEvents.on(da,ja,sa,xa))?sa:Qa.prototype.on.call(this,da,ja)};Ea.hasEventListener=function(da){return Qa.prototype.hasEventListener.call(this,da)||this.viewEvents.hasHandler(da)};Ea.whenLayerView=function(da){return Qa.prototype.whenLayerView.call(this,da)};
Ea.graphicChanged=function(da){this.graphicsView&&this.graphicsView.graphicUpdateHandler(da)};Ea.whenReady=function(){return new Promise(da=>{this.ready?da(this):this._resolveWhenReady.push(da)})};Ea.forceDOMReadyCycle=function(){this.forceReadyCycle()};Ea.getDefaultSpatialReference=function(){var da,ja,sa;return this.map&&"initialViewProperties"in this.map&&(null==(da=this.map)?void 0:null==(ja=da.initialViewProperties)?void 0:ja.spatialReference)||(null==(sa=this.defaultsFromMap)?void 0:sa.spatialReference)||
null};Ea.hasLayerViewModule=function(da){return L.layerView2DImporter.hasLayerViewModule(da)};Ea.importLayerView=function(da){return L.layerView2DImporter.importLayerView(da)};Ea.pixelSizeAt=function(){return this.ready?this.state.resolution:(Fa.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};Ea.popupHitTest=function(da){return this.hitTest(da).then(ja=>({...ja,mapPoint:this.toMap(da)}))};Ea.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};Ea.validate=
function(){let da=ca.check(this.type);G("safari")&&9>G("safari")&&(da=new H("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")}));return b.isSome(da)?(Fa.warn("#validate()",da.message),Promise.reject(da)):ra()};Ea._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new Q;return this.animation};Ea._cancellableGoTo=function(da,ja,sa){const xa=()=>da===this._gotoTask,Aa=
sa.then(()=>{xa()&&(this.animation=null)}).catch(Ka=>{xa()&&(this.animation=null,ja.done||(ja.stop(),this.frameTask.animationInProgress=!1));throw Ka;}),Ca=new Promise(Ka=>Ka(Aa));ja.when().catch(()=>{xa()&&Ca.cancel&&Ca.cancel()});return Ca};Ea._gotoImmediate=function(da,ja){const sa=this._gotoTask,xa=this.animation;da=da.then(Aa=>{a.throwIfAborted(ja);if(sa!==this._gotoTask)throw new H("view:goto-interrupted","Goto was interrupted");this.viewpoint=xa.target=Aa;xa.finish()});return this._cancellableGoTo(sa,
xa,da)};Ea._flipStationary=function(da){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const ja=performance.now()-this._lastStationaryEventTimestamp;160>ja&&(this._stationaryTimer=this._flipStationary(ja))},da)};Ea._getDefaultViewpoint=function(){var da,ja,sa,xa;const {constraints:Aa,initialExtent:Ca,map:Ka,padding:Ua,size:Ta}=this;if(!Aa)return null;const Ia=Ka&&"initialViewProperties"in Ka&&Ka.initialViewProperties;var cb=
this._get("zoom"),ab=this._get("scale"),lb=this._get("center"),fb=this._get("extent"),Ya=this._get("rotation"),gb=this._get("viewpoint");Aa.effectiveLODs?-1!==cb&&(ab=Aa.zoomToScale(cb)):cb=-1;let sb=null,qb=null,rb=0;cb=gb&&gb.rotation;const N=gb&&gb.targetGeometry;b.isSome(N)&&("extent"===N.type?sb=N:"point"===N.type&&(qb=N,rb=gb.scale));fb=fb||sb||(null==(da=b.unwrap(null==Ia?void 0:null==(ja=Ia.viewpoint)?void 0:ja.targetGeometry))?void 0:da.extent)||Ca;da=lb||qb||(null==fb?void 0:fb.center);
ab=ab||rb||(null==Ia?void 0:null==(sa=Ia.viewpoint)?void 0:sa.scale)||fb&&ea.extentToScale(fb,[Ta[0]-Ua.left-Ua.right,Ta[1]-Ua.top-Ua.bottom]);sa=Ya||cb||(null==Ia?void 0:null==(xa=Ia.viewpoint)?void 0:xa.rotation)||0;return da&&ab?new q({targetGeometry:da,scale:ab,rotation:sa}):null};Ea._gotoAnimated=function(da,ja){const sa=this._gotoTask,xa=this.animation;da=da.then(Aa=>{a.throwIfAborted(ja);if(sa!==this._gotoTask)throw new H("view:goto-interrupted","Goto was interrupted");xa.update(Aa);this.animationManager.animate(xa,
this.viewpoint,ja);return xa.when().then(()=>{},()=>{})});return this._cancellableGoTo(sa,xa,da)};Ea._project=function(da,ja){var sa;const xa=da&&da.targetGeometry||da;if(!ja)return da;if(!xa)return null;if(ja.imageCoordinateSystem||null!=(sa=xa.spatialReference)&&sa.imageCoordinateSystem||D.equals(ja,xa.spatialReference))return da;sa=u.project(xa,ja);if(!sa)throw new H("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:xa,spatialReference:ja});
return da&&"esri.Viewpoint"===da.declaredClass?(da.targetGeometry=sa,da):sa};Ea._resizeHandler=function(da){if(this.ready){var ja=this.state,sa=this.state.paddedViewState.viewpoint,xa=this.state.paddedViewState.size.concat();ja.size=[da.width,da.height];ea.resize(sa,sa,xa,this.state.paddedViewState.size,this.resizeAlign);sa=this.constraints.constrain(sa,null);this.state.viewpoint=sa}};Ea._startup=function(){var da;this.timeline.begin("MapView Startup");const ja=this._getDefaultViewpoint(),sa=ja.targetGeometry;
try{this._project(ja,this.spatialReference)}catch(Ca){var xa;Fa.warn(new e("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:sa.toJSON(),spatialReference:this.spatialReference,error:Ca}));ja.targetGeometry=(null==(xa=this.defaultsFromMap.extent)?void 0:xa.center)||new x({x:0,y:0,spatialReference:this.spatialReference})}null==(da=this.constraints)?void 0:da.fit(ja);this._set("state",new l({padding:this._get("padding"),
size:this.size,viewpoint:ja}));this.graphics.owner=this;const Aa=new ya(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=Aa;this._magnifierView=new vb;this._magnifierView.magnifier=this.magnifier;da=new eb({view:this});this._set("labelManager",da);da=new O({view:this});
this._set("animationManager",da);da=new pb({view:this,animationManager:da});this._set("mapViewNavigation",da);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),Aa.on("post-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("will-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("webgl-error",Ca=>this.fatalError=Ca.error),h.watch(()=>this.stationary,Ca=>Aa.stationary=Ca,h.syncAndInitial),h.watch(()=>
this.background,Ca=>{Aa.background=Ca;this._magnifierView.background=Ca},h.syncAndInitial),h.watch(()=>this.magnifier,Ca=>this._magnifierView.magnifier=Ca,h.syncAndInitial),h.watch(()=>this.renderingOptions,Ca=>Aa.renderingOptions=Ca,h.syncAndInitial),h.watch(()=>this.highlightOptions,Ca=>Aa.highlightOptions=Ca,h.syncAndInitial),h.watch(()=>this.state.id,()=>Aa.state=this.state,h.syncAndInitial)],"map-view");this._updateStageChildren();da=this._resolveWhenReady;this._resolveWhenReady=[];da.forEach(Ca=>
Ca(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};Ea._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",
null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);this._set("ready",!1);const {center:[da,ja],spatialReference:sa,rotation:xa,scale:Aa}=this.state.paddedViewState,Ca=new x({x:da,y:ja,spatialReference:sa});this._set("viewpoint",null);this._set("extent",null);this._set("center",Ca);this._set("zoom",-1);
this._set("rotation",xa);this._set("scale",Aa);this._set("spatialReference",sa);this._set("state",null);this.animation=null};Ea._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(da=>{this._stage.addChild(da.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};Ea._setupSpatialReferenceDependentProperties=function(){var da=new y(J.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",
da);da=new nb({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Xa(da)});this.frameTask.graphicsView=da;this._set("graphicsView",da)};Ea._destroySpatialReferenceDependentProperties=function(){const da=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;da.destroy();this._set("featuresTilingScheme",null)};Ea._spatialReferenceChanged=function(da){if(this.ready){this.frameTask.stop();for(var ja of this.allLayerViews)ja.processDetach();
this._destroySpatialReferenceDependentProperties();ja=this.state.paddedViewState.clone();if(b.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=ja.scale;else{var sa=ja.viewpoint.clone();sa.scale=this._scaleBeforeChangingSpatialReference;ja.viewpoint=sa}sa=ja.clone();var [xa,Aa]=ja.center,Ca=null;try{Ca=this._project(new x({x:xa,y:Aa,spatialReference:ja.spatialReference}),da)}catch(Ka){u.isLoaded()||Fa.warn(new e("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:Ca.toJSON(),spatialReference:da,error:Ka}))}Ca||(Ca=new x({x:0,y:0,spatialReference:da}));Ca=ea.centerAt(new q({targetGeometry:new x,scale:0,rotation:0}),ja.viewpoint,Ca);sa.viewpoint=Ca;try{const Ka=[ja.size[0]/2,ja.size[1]/2],Ua=[Ka[0]+20,Ka[1]],Ta=ja.toMap([0,0],Ua),{x:Ia,y:cb}=this._project(new x({x:Ta[0],y:Ta[1],spatialReference:ja.spatialReference}),da);Ta[0]=Ia;Ta[1]=cb;sa.toScreen(Ta,Ta);const ab=ea.angleBetween(Ka,Ta,Ua),lb=Math.hypot(Ta[0]-Ka[0],Ta[1]-Ka[1])/20;!Number.isFinite(lb)||
4<Math.abs(lb)?(Ca.rotation=0,Ca.targetGeometry=new x({x:0,y:0,spatialReference:da})):(Ca.scale*=lb,Ca.scale>G("mapview-srswitch-adjust-rotation-scale-threshold")?Ca.rotation=0:Ca.rotation+=Number.isFinite(ab)?ab:0)}catch{}this._get("constraints").constrain(Ca,null);this._get("state").viewpoint=Ca;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const Ka of this.allLayerViews)Ka.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};
p._createClass(Sa,[{key:"graphicsTileStore",get:function(){return new ha(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){var da;const {scale:ja,constraints:sa,center:xa,viewpoint:Aa,extent:Ca}=this;let Ka=this.zoom;if(this.map&&"initialViewProperties"in this.map&&null!=(da=this.map.initialViewProperties)&&da.viewpoint||Ca)return!1;null!=sa&&sa.effectiveLODs||(Ka=-1);return xa&&(0!==ja||-1!==Ka)||Aa&&b.isSome(Aa.targetGeometry)&&("extent"===Aa.targetGeometry.type||Aa.scale)?
!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(u.isLoaded())return!0;this._pePromise||(this._pePromise=u.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",
get:function(){var da=this._getDefaultViewpoint();if(!da)return!1;const ja=this.spatialReference;da=b.unwrap(da.targetGeometry);return u.canProjectWithoutEngine(da.spatialReference,ja)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(da){var ja=this._get("animation");da!==ja&&(ja&&ja.stop(),!da||da.isFulfilled()?this._set("animation",null):(this._set("animation",da),this.frameTask.animationInProgress=!0,ja=()=>{da===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());
this.frameTask.animationInProgress=!1},da.when(ja,ja)))}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(da){void 0===da?this._clearOverride("background"):this._override("background",da)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:da,spatialReference:ja}=this.state.paddedViewState;return new x({x:da[0],y:da[1],spatialReference:ja})},set:function(da){if(null!=da)if(this.ready){try{var ja=this._project(da,
this.spatialReference)}catch(sa){Fa.error(new H("mapview:invalid-center","could not project the value in the view's spatial reference",{input:da,error:sa}));return}da=this.viewpoint;ea.centerAt(da,da,ja);this.viewpoint=da}else this._set("center",da),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(da){const ja=this._get("constraints");ja&&(this.handles.remove("map-view-constraints"),ja.destroy());this._set("constraints",da);da&&(da.view=this,this.ready&&(this.state.viewpoint=
da.fit(this.state.paddedViewState.viewpoint)),this.handles.add(h.watch(()=>da.version,()=>{this.ready&&this.state&&(this.state.viewpoint=da.fit(this.state.paddedViewState.viewpoint))},h.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(da){if(null!=da)if(da.width&&da.height)if(this.ready){try{var ja=this._project(da,this.spatialReference)}catch(sa){Fa.error(new H("mapview:invalid-extent","could not project the value in the view's spatial reference",
{error:sa}));return}da=this.viewpoint;ea.setExtent(da,da,ja,this.size,{constraints:this.constraints});this.viewpoint=da}else this._set("extent",da),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else Fa.error(new H("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(da){this.ready?(this.state.padding=da,this._set("padding",
this.state.padding)):this._set("padding",da)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(da){if(!isNaN(da))if(this.ready){var ja=this.viewpoint;ea.rotateTo(ja,ja,da);this.viewpoint=ja}else this._set("rotation",da)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(da){if(da&&!isNaN(da))if(this.ready){var ja=this.viewpoint;
ea.scaleTo(ja,ja,da);this.viewpoint=ja}else{this._set("scale",da);this._set("zoom",-1);if(da=this._get("extent"))this._set("extent",null),this._set("center",da.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||
!0===this.graphicsView.updating||this.allLayerViews.some(da=>!da.destroyed&&!("layerViews"in da)&&!0===da.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const da=this.state.paddedViewState;return da&&da.viewpoint.clone()},set:function(da){if(null!=da)if(this.ready){var ja;try{var sa=this._project(da,this.spatialReference);!da.scale||isNaN(da.scale)?ja=new H("mapview:invalid-viewpoint",`invalid scale value of ${da.scale}`):b.isNone(da.targetGeometry)&&(ja=
new H("mapview:invalid-viewpoint","geometry not defined"))}catch(xa){ja=new H("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:xa})}ja?Fa.error(ja):(this._scaleBeforeChangingSpatialReference=null,da=new q({targetGeometry:new x,scale:0,rotation:0}),ea.copy(da,sa),this.constraints.constrain(da,this.state.paddedViewState.viewpoint),this.state.viewpoint=da,this.frameTask.requestFrame(),this._set("viewpoint",da))}else this._set("viewpoint",da),this._set("extent",
null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(da){if(null!=da)if(this.ready)if(this.constraints.effectiveLODs){var ja=this.viewpoint;ea.scaleTo(ja,ja,this.constraints.zoomToScale(da));this.viewpoint=ja;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",da);
this._set("scale",0);if(da=this._get("extent"))this._set("extent",null),this._set("center",da.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:da=>this._takeScreenshot(da)}}}]);return Sa}(S.BreakpointsOwner(T.DOMContainer(P.PopupView(X))));n.type="2d";m.__decorate([B.property({readOnly:!0})],n.prototype,"animationManager",void 0);m.__decorate([B.property({constructOnly:!0})],
n.prototype,"deactivatedWebGLExtensions",void 0);m.__decorate([B.property({constructOnly:!0})],n.prototype,"debugWebGLExtensions",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"featuresTilingScheme",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"fullOpacity",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"graphicsTileStore",null);m.__decorate([B.property()],n.prototype,"graphicsView",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"state",void 0);
m.__decorate([B.property()],n.prototype,"initialExtentRequired",null);m.__decorate([B.property()],n.prototype,"labelManager",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"resourceManager",null);m.__decorate([B.property({readOnly:!0})],n.prototype,"textureManager",null);m.__decorate([B.property({readOnly:!0})],n.prototype,"mapViewNavigation",void 0);m.__decorate([B.property({constructOnly:!0})],n.prototype,"renderCanvas",void 0);m.__decorate([B.property()],n.prototype,"renderingOptions",
void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"rendering",void 0);m.__decorate([B.property({constructOnly:!0})],n.prototype,"supersampleScreenshotsEnabled",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"supportsGround",void 0);m.__decorate([B.property()],n.prototype,"_stationaryTimer",void 0);m.__decorate([B.property()],n.prototype,"_defaultsFromMapSettings",null);m.__decorate([B.property()],n.prototype,"_pePromise",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,
"typeSpecificPreconditionsReady",null);m.__decorate([B.property()],n.prototype,"animation",null);m.__decorate([B.property({type:ka})],n.prototype,"background",null);m.__decorate([B.property({value:null,type:x,dependsOn:["state.id","ready"]})],n.prototype,"center",null);m.__decorate([B.property({type:I})],n.prototype,"constraints",null);m.__decorate([B.property({value:null,type:C,dependsOn:["state.id","ready"]})],n.prototype,"extent",null);m.__decorate([B.property()],n.prototype,"floors",void 0);m.__decorate([B.property({type:la})],
n.prototype,"highlightOptions",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"inputManager",void 0);m.__decorate([B.property()],n.prototype,"map",void 0);m.__decorate([B.property({value:{top:0,right:0,bottom:0,left:0},cast:Qa=>({top:0,right:0,bottom:0,left:0,...Qa})})],n.prototype,"padding",null);m.__decorate([B.property()],n.prototype,"resizeAlign",void 0);m.__decorate([B.property({readOnly:!0,dependsOn:["state.id"]})],n.prototype,"resolution",null);m.__decorate([B.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],n.prototype,"rotation",null);m.__decorate([B.property({value:0,type:Number,dependsOn:["state.id","ready"]})],n.prototype,"scale",null);m.__decorate([B.property({constructOnly:!0})],n.prototype,"spatialReferenceLocked",void 0);m.__decorate([B.property()],n.prototype,"stationary",null);m.__decorate([B.property({type:pa.Timeline,readOnly:!0})],n.prototype,"timeline",void 0);m.__decorate([B.property({readOnly:!0})],n.prototype,"type",void 0);m.__decorate([B.property({readOnly:!0})],
n.prototype,"updating",null);m.__decorate([B.property({value:null,type:q,dependsOn:["state.id","ready"]})],n.prototype,"viewpoint",null);m.__decorate([B.property({value:-1,dependsOn:["state.id","ready"]})],n.prototype,"zoom",null);m.__decorate([B.property({type:Boolean})],n.prototype,"navigating",null);m.__decorate([B.property({type:ia})],n.prototype,"ui",void 0);return n=m.__decorate([w.subclass("esri.views.MapView")],n)});