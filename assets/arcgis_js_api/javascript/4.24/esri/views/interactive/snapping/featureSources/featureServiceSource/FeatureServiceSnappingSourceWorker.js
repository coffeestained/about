// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(b,a,B,J,p){let k=function(){function y(){this._emitter=new y.EventEmitter(this)}var v=y.prototype;v.emit=function(n,r){return this._emitter.emit(n,r)};v.on=function(n,r){return this._emitter.on(n,r)};v.once=function(n,r){return this._emitter.once(n,r)};v.hasEventListener=function(n){return this._emitter.hasEventListener(n)};
return y}();(function(y){let v=function(){function r(G=null){this.target=G;this._listenersMap=null}var u=r.prototype;u.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};u.emit=function(G,z){G=this._listenersMap&&this._listenersMap.get(G);if(!G)return!1;const e=this.target||this;[...G].forEach(F=>{F.call(e,z)});return 0<G.length};u.on=function(G,z){if(Array.isArray(G)){var e=G.map(F=>this.on(F,z));return J.handlesGroup(e)}if(G.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);e=this._listenersMap.get(G)||[];e.push(z);this._listenersMap.set(G,e);return{remove:()=>{const F=this._listenersMap&&this._listenersMap.get(G)||[],c=F.indexOf(z);0<=c&&F.splice(c,1)}}};u.once=function(G,z){const e=this.on(G,F=>{e.remove();z.call(null,F)});return e};u.hasEventListener=function(G){G=this._listenersMap&&this._listenersMap.get(G);return null!=G&&0<G.length};return r}();y.EventEmitter=v;y.EventedMixin=r=>{r=function(u){function G(){var e=
u.apply(this,arguments)||this;e._emitter=new v;return e}b._inheritsLoose(G,u);var z=G.prototype;z.destroy=function(){this._emitter.clear()};z.emit=function(e,F){return this._emitter.emit(e,F)};z.on=function(e,F){return this._emitter.on(e,F)};z.once=function(e,F){return this._emitter.once(e,F)};z.hasEventListener=function(e){return this._emitter.hasEventListener(e)};return G}(r);return r=a.__decorate([p.subclass("esri.core.Evented")],r)};let n=function(r){function u(){var z=r.apply(this,arguments)||
this;z._emitter=new k.EventEmitter(b._assertThisInitialized(z));return z}b._inheritsLoose(u,r);var G=u.prototype;G.destroy=function(){this._emitter.clear()};G.emit=function(z,e){return this._emitter.emit(z,e)};G.on=function(z,e){return this._emitter.on(z,e)};G.once=function(z,e){return this._emitter.once(z,e)};G.hasEventListener=function(z){return this._emitter.hasEventListener(z)};return u}(B);n=a.__decorate([p.subclass("esri.core.Evented")],n);y.EventedAccessor=n})(k||(k={}));return k})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y){B=function(v){function n(u){u=v.call(this,u)||this;u._groups=new Map;return u}b._inheritsLoose(n,v);var r=n.prototype;r.destroy=function(){this.removeAll()};r.add=function(u,G){if(!this._isHandle(u)&&!Array.isArray(u)&&!J.isCollection(u))return this;const z=this._getOrCreateGroup(G);Array.isArray(u)||J.isCollection(u)?u.forEach(e=>this._isHandle(e)&&z.push(e)):z.push(u);this.notifyChange("size");return this};r.forEach=function(u,G){if("function"===typeof u)this._groups.forEach(z=>
z.forEach(u));else{const z=this._getGroup(u);z&&G&&z.forEach(G)}};r.has=function(u){return this._groups.has(this._ensureGroupKey(u))};r.remove=function(u){if(Array.isArray(u)||J.isCollection(u))return u.forEach(this.remove,this),this;if(!this.has(u))return this;const G=this._getGroup(u);for(let z=0;z<G.length;z++)G[z].remove();this._deleteGroup(u);this.notifyChange("size");return this};r.removeAll=function(){this._groups.forEach(u=>{for(let G=0;G<u.length;G++)u[G].remove()});this._groups.clear();
this.notifyChange("size");return this};r._isHandle=function(u){return u&&!!u.remove};r._getOrCreateGroup=function(u){if(this.has(u))return this._getGroup(u);const G=[];this._groups.set(this._ensureGroupKey(u),G);return G};r._getGroup=function(u){return p.assumeNonNull(this._groups.get(this._ensureGroupKey(u)))};r._deleteGroup=function(u){return this._groups.delete(this._ensureGroupKey(u))};r._ensureGroupKey=function(u){return u||"_default_"};b._createClass(n,[{key:"size",get:function(){let u=0;this._groups.forEach(G=>
{u+=G.length});return u}}]);return n}(B);a.__decorate([k.property({readOnly:!0})],B.prototype,"size",null);return B=a.__decorate([y.subclass("esri.core.Handles")],B)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F){function c(D){return D?D instanceof h?D.toArray():D.length?Array.prototype.slice.apply(D):[]:[]}function l(D){if(D&&D.length)return D[0]}function L(D,P,M,N){P&&P.forEach((q,S,Y)=>{D.push(q);L(D,M.call(N,q,S,Y),M,N)})}var K;let m=function(){function D(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var P=D.prototype;P.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};P.reset=function(M){this.defaultPrevented=
!1;this.item=M};return D}();const A=new y(m,void 0,D=>{D.item=null;D.target=null;D.defaultPrevented=!1;D.cancellable=!1}),E=()=>{},R=new Set,O=new Set,w=new Set,H=new Map;let g=0,h=K=function(D,P){function M(q){q=D.call(this,q)||this;q._chgListeners=[];q._notifications=null;q._timer=null;q._observable=new F.SimpleObservable;q.length=0;q._items=[];Object.defineProperty(b._assertThisInitialized(q),"uid",{value:g++});return q}b._inheritsLoose(M,D);M.isCollection=function(q){return null!=q&&q instanceof
K};var N=M.prototype;N.normalizeCtorArgs=function(q){return q?Array.isArray(q)||q instanceof K?{items:q}:q:{}};N.destroy=function(){this.removeAll()};N[P]=function*(){yield*this.items};N.hasEventListener=function(q){return"change"===q?0<this._chgListeners.length:this._emitter.hasEventListener(q)};N.on=function(q,S){if("change"===q){const Y=this._chgListeners,V={removed:!1,callback:S};Y.push(V);this._notifications&&this._notifications.push({listeners:Y.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=E;V.removed=!0;Y.splice(Y.indexOf(V),1)}}}return this._emitter.on(q,S)};N.once=function(q,S){const Y=this.on(q,S);return{remove(){Y.remove()}}};N.add=function(q,S){e.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.ADD))return this;S=this.getNextIndex(null!=S?S:null);this._splice(S,0,[q]);this._emitAfterChanges(v.ObservableChangesType.ADD);return this};N.addMany=function(q,S=this._items.length){e.trackAccess(this._observable);if(!q||!q.length||
this._emitBeforeChanges(v.ObservableChangesType.ADD))return this;S=this.getNextIndex(S);this._splice(S,0,c(q));this._emitAfterChanges(v.ObservableChangesType.ADD);return this};N.at=function(q){e.trackAccess(this._observable);q=Math.trunc(q)||0;0>q&&(q+=this.length);if(!(0>q||q>=this.length))return this._items[q]};N.removeAll=function(){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE))return[];const q=this._splice(0,this.length)||[];this._emitAfterChanges(v.ObservableChangesType.REMOVE);
return q};N.clone=function(){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(p.clone)})};N.concat=function(...q){e.trackAccess(this._observable);q=q.map(c);return this._createNewInstance({items:this._items.concat(...q)})};N.drain=function(q,S){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var Y=k.assumeNonNull(this._splice(0,this.length)),V=Y.length;for(let ja=0;ja<V;ja++)q.call(S,Y[ja],ja,Y);this._emitAfterChanges(v.ObservableChangesType.REMOVE)}};
N.every=function(q,S){e.trackAccess(this._observable);return this._items.every(q,S)};N.filter=function(q,S){e.trackAccess(this._observable);let Y;Y=2===arguments.length?this._items.filter(q,S):this._items.filter(q);return this._createNewInstance({items:Y})};N.find=function(q,S){e.trackAccess(this._observable);return this._items.find(q,S)};N.findIndex=function(q,S){e.trackAccess(this._observable);return this._items.findIndex(q,S)};N.flatten=function(q,S){e.trackAccess(this._observable);const Y=[];
L(Y,this,q,S);return new K(Y)};N.forEach=function(q,S){e.trackAccess(this._observable);return this._items.forEach(q,S)};N.getItemAt=function(q){e.trackAccess(this._observable);return this._items[q]};N.getNextIndex=function(q){e.trackAccess(this._observable);const S=this.length;q=null==q?S:q;0>q?q=0:q>S&&(q=S);return q};N.includes=function(q,S=0){e.trackAccess(this._observable);return this._items.includes(q,S)};N.indexOf=function(q,S=0){e.trackAccess(this._observable);return this._items.indexOf(q,
S)};N.join=function(q=","){e.trackAccess(this._observable);return this._items.join(q)};N.lastIndexOf=function(q,S=this.length-1){e.trackAccess(this._observable);return this._items.lastIndexOf(q,S)};N.map=function(q,S){e.trackAccess(this._observable);q=this._items.map(q,S);return new K({items:q})};N.reorder=function(q,S=this.length-1){e.trackAccess(this._observable);const Y=this.indexOf(q);if(-1!==Y){0>S?S=0:S>=this.length&&(S=this.length-1);if(Y!==S){if(this._emitBeforeChanges(v.ObservableChangesType.MOVE))return q;
this._splice(Y,1);this._splice(S,0,[q]);this._emitAfterChanges(v.ObservableChangesType.MOVE)}return q}};N.pop=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var q=l(this._splice(this.length-1,1));this._emitAfterChanges(v.ObservableChangesType.REMOVE);return q}};N.push=function(...q){e.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,q);this._emitAfterChanges(v.ObservableChangesType.ADD);
return this.length};N.reduce=function(q,S){e.trackAccess(this._observable);const Y=this._items;return 2===arguments.length?Y.reduce(q,S):Y.reduce(q)};N.reduceRight=function(q,S){e.trackAccess(this._observable);const Y=this._items;return 2===arguments.length?Y.reduceRight(q,S):Y.reduceRight(q)};N.remove=function(q){e.trackAccess(this._observable);return this.removeAt(this.indexOf(q))};N.removeAt=function(q){e.trackAccess(this._observable);if(!(0>q||q>=this.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE)))return q=
l(this._splice(q,1)),this._emitAfterChanges(v.ObservableChangesType.REMOVE),q};N.removeMany=function(q){e.trackAccess(this._observable);if(!q||!q.length||this._emitBeforeChanges(v.ObservableChangesType.REMOVE))return[];q=q instanceof K?q.toArray():q;const S=this._items,Y=[],V=q.length;for(let na=0;na<V;na++){var ja=S.indexOf(q[na]);if(-1<ja){{var ma=na+1;var X=ja+1;const oa=Math.min(q.length-ma,S.length-X);let qa=0;for(;qa<oa&&q[ma+qa]===S[X+qa];)qa++;ma=qa}ma=1+ma;(ja=this._splice(ja,ma))&&0<ja.length&&
Y.push.apply(Y,ja);na+=ma-1}}this._emitAfterChanges(v.ObservableChangesType.REMOVE);return Y};N.reverse=function(){e.trackAccess(this._observable);if(this._emitBeforeChanges(v.ObservableChangesType.MOVE))return this;const q=this._splice(0,this.length);q&&(q.reverse(),this._splice(0,0,q));this._emitAfterChanges(v.ObservableChangesType.MOVE);return this};N.shift=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(v.ObservableChangesType.REMOVE)){var q=l(this._splice(0,
1));this._emitAfterChanges(v.ObservableChangesType.REMOVE);return q}};N.slice=function(q=0,S=this.length){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(q,S)})};N.some=function(q,S){e.trackAccess(this._observable);return this._items.some(q,S)};N.sort=function(q){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(v.ObservableChangesType.MOVE))return this;const S=k.assumeNonNull(this._splice(0,this.length));arguments.length?S.sort(q):S.sort();
this._splice(0,0,S);this._emitAfterChanges(v.ObservableChangesType.MOVE);return this};N.splice=function(q,S,...Y){e.trackAccess(this._observable);const V=(S?v.ObservableChangesType.REMOVE:0)|(Y.length?v.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(V))return[];q=this._splice(q,S,Y)||[];this._emitAfterChanges(V);return q};N.toArray=function(){e.trackAccess(this._observable);return this._items.slice()};N.toJSON=function(){e.trackAccess(this._observable);return this.toArray()};N.toLocaleString=
function(){e.trackAccess(this._observable);return this._items.toLocaleString()};N.toString=function(){e.trackAccess(this._observable);return this._items.toString()};N.unshift=function(...q){e.trackAccess(this._observable);if(!q.length||this._emitBeforeChanges(v.ObservableChangesType.ADD))return this.length;this._splice(0,0,q);this._emitAfterChanges(v.ObservableChangesType.ADD);return this.length};N._createNewInstance=function(q){return new this.constructor(q)};N._splice=function(q,S,Y){const V=this._items;
var ja=this.itemType;let ma=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=n.schedule(()=>this._dispatchChange()));if(S){ma=V.splice(q,S);if(this.hasEventListener("before-remove")){var X=A.acquire();X.target=this;X.cancellable=!0;for(let qa=0,wa=ma.length;qa<wa;qa++)S=ma[qa],X.reset(S),this.emit("before-remove",X),X.defaultPrevented&&(ma.splice(qa,
1),V.splice(q,0,S),q+=1,--qa,--wa);A.release(X)}this.length=this._items.length;if(this.hasEventListener("after-remove")){S=A.acquire();S.target=this;S.cancellable=!1;X=ma.length;for(let qa=0;qa<X;qa++)S.reset(ma[qa]),this.emit("after-remove",S);A.release(S)}}if(Y&&Y.length){if(ja){S=[];for(var na of Y)Y=ja.ensureType(na),null==Y&&null!=na||S.push(Y);Y=S}ja=this.hasEventListener("before-add");na=this.hasEventListener("after-add");S=q===this.length;if(ja||na){var oa=A.acquire();oa.target=this;oa.cancellable=
!0;X=A.acquire();X.target=this;X.cancellable=!1;for(const qa of Y)ja?(oa.reset(qa),this.emit("before-add",oa),oa.defaultPrevented||(S?V.push(qa):V.splice(q++,0,qa),this._set("length",V.length),na&&(X.reset(qa),this.emit("after-add",X)))):(S?V.push(qa):V.splice(q++,0,qa),this._set("length",V.length),X.reset(qa),this.emit("after-add",X));A.release(X);A.release(oa)}else{if(S)for(oa of Y)V.push(oa);else V.splice(q,0,...Y);this._set("length",V.length)}}(Y&&Y.length||ma&&ma.length)&&this._notifyChangeEvent(Y,
ma);return ma};N._emitBeforeChanges=function(q){let S=!1;if(this.hasEventListener("before-changes")){const Y=A.acquire();Y.target=this;Y.cancellable=!0;Y.type=q;this.emit("before-changes",Y);S=Y.defaultPrevented;A.release(Y)}return S};N._emitAfterChanges=function(q){if(this.hasEventListener("after-changes")){const S=A.acquire();S.target=this;S.cancellable=!1;S.type=q;this.emit("after-changes",S);A.release(S)}this._observable.notify()};N._notifyChangeEvent=function(q,S){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:q,removed:S})};N._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var q=this._notifications;this._notifications=null;for(const S of q){q=S.changes;R.clear();O.clear();w.clear();for(const {added:na,removed:oa}of q){if(na)if(0===w.size&&0===O.size)for(const qa of na)R.add(qa);else for(const qa of na)O.has(qa)?(w.add(qa),O.delete(qa)):w.has(qa)||R.add(qa);
if(oa)if(0===w.size&&0===R.size)for(const qa of oa)O.add(qa);else for(const qa of oa)R.has(qa)?R.delete(qa):(w.delete(qa),O.add(qa))}const Y=B.acquire();R.forEach(na=>{Y.push(na)});const V=B.acquire();O.forEach(na=>{V.push(na)});const ja=this._items,ma=S.items,X=B.acquire();w.forEach(na=>{ma.indexOf(na)!==ja.indexOf(na)&&X.push(na)});if(S.listeners&&(Y.length||V.length||X.length)){q={target:this,added:Y,removed:V,moved:X};const na=S.listeners.length;for(let oa=0;oa<na;oa++){const qa=S.listeners[oa];
qa.removed||qa.callback.call(this,q)}}B.release(Y);B.release(V);B.release(X)}R.clear();O.clear();w.clear()}};b._createClass(M,[{key:"items",get:function(){e.trackAccess(this._observable);return this._items},set:function(q){this._emitBeforeChanges(v.ObservableChangesType.ADD)||(this._splice(0,this.length,c(q)),this._emitAfterChanges(v.ObservableChangesType.ADD))}}]);return M}(J.EventedAccessor,Symbol.iterator);h.ofType=D=>{if(!D)return K;if(H.has(D))return H.get(D);let P=null;if("function"===typeof D)P=
D.prototype.declaredClass;else if(D.base)P=D.base.prototype.declaredClass;else for(var M in D.typeMap){const N=D.typeMap[M].prototype.declaredClass;P=P?P+` | ${N}`:N}M=function(N){function q(){return N.apply(this,arguments)||this}b._inheritsLoose(q,N);return q}(K);a.__decorate([G.shared({Type:D,ensureType:"function"===typeof D?u.ensureType(D):u.ensureOneOfType(D)})],M.prototype,"itemType",void 0);M=a.__decorate([z.subclass(`esri.core.Collection<${P}>`)],M);H.set(D,M);return M};a.__decorate([r.property()],
h.prototype,"length",void 0);a.__decorate([r.property()],h.prototype,"items",null);return h=K=a.__decorate([z.subclass("esri.core.Collection")],h)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(b){b.ObservableChangesType=void 0;var a=b.ObservableChangesType||(b.ObservableChangesType={});a[a.ADD=1]="ADD";a[a.REMOVE=2]="REMOVE";a[a.MOVE=4]="MOVE";Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(b){b.shared=function(a){return(B,J)=>{B[J]=a}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(b,a){let B=function(){function J(){this._observers=[]}var p=J.prototype;p.observe=function(k){this._observers.includes(k)||this._observers.push(k);return new a.ObservationHandle(this._observers,k)};p.notify=function(){const k=this._observers.slice();
for(let y=0;y<k.length;++y){const v=k[y];v.onInvalidated();v.onCommitted()}};return J}();b.SimpleObservable=B;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(b,a,B,J,p,k,y){function v(z,e,F={}){return n(z,e,F,u)}function n(z,e,F={},c){let l=null;const L=F.once?(K,m)=>{c(K)&&(J.removeMaybe(l),
e(K,m))}:(K,m)=>{c(K)&&e(K,m)};l=k.watchTracked(z,L,F.sync,F.equals);F.initial&&(z=z(),L(z,z));return l}function r(z,e,F){if(p.isAborted(F))return Promise.reject(p.createAbortError());const c=z();if(null!=e&&e(c))return Promise.resolve(c);let l=null;return new Promise((L,K)=>{l=B.handlesGroup([p.onAbort(F,()=>{l=J.removeMaybe(l);K(p.createAbortError())}),n(z,m=>{l=J.removeMaybe(l);L(m)},{sync:!1,once:!0},null!=e?e:u)])})}function u(z){return!0}function G(z){return!!z}b.autorun=y.autorun;b.initial=
{initial:!0};b.on=function(z,e,F,c={}){function l(){K&&m&&(m.remove(),null==c.onListenerRemove?void 0:c.onListenerRemove(K),m=K=null)}function L(R){c.once&&c.once&&J.removeMaybe(A);F(R)}let K=null,m=null,A=null;const E=v(z,(R,O)=>{l();a.isEventTarget(R)&&(K=R,m=a.on(R,e,L),null==c.onListenerAdd?void 0:c.onListenerAdd(R))},{sync:c.sync,initial:!0});return A=B.makeHandle(()=>{E.remove();l()})};b.once=function(z,e){return r(z,null,e)};b.pausable=function(z,e,F={}){let c=!1;const l=v(z,(L,K)=>{c||e(L,
K)},F);return{remove(){l.remove()},pause(){c=!0},resume(){c=!1}}};b.sync={sync:!0};b.syncAndInitial={sync:!0,initial:!0};b.watch=v;b.when=function(z,e,F={}){return n(z,e,F,G)};b.whenOnce=function(z,e){return r(z,G,e)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../maybe ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n,r){b.WatchUpdatingTracking=function(u){function G(){var e=u.apply(this,arguments)||this;e.updating=!1;e.handleId=0;e.handles=new p;e.scheduleHandleId=0;e.pendingPromises=new Set;return e}a._inheritsLoose(G,u);var z=G.prototype;z.destroy=function(){this.removeAll();this.handles.destroy()};z.add=function(e,F,c={}){return this._installWatch(e,F,c,y.watch)};z.addWhen=function(e,F,c={}){return this._installWatch(e,F,c,y.when)};z.addOnCollectionChange=function(e,F,{initial:c=
!1,final:l=!1}={}){const L=++this.handleId;this.handles.add([y.on(e,"after-changes",this._createSyncUpdatingCallback(),y.sync),y.on(e,"change",F,{onListenerAdd:c?K=>F({added:K.toArray(),removed:[]}):void 0,onListenerRemove:l?K=>F({added:[],removed:K.toArray()}):void 0})],L);return{remove:()=>this.handles.remove(L)}};z.addPromise=function(e){if(k.isNone(e))return e;const F=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(-42)||
this._set("updating",!1))}},F);this.pendingPromises.add(e);this._set("updating",!0);const c=()=>this.handles.remove(F);e.then(c,c);return e};z.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",!1)};z._installWatch=function(e,F,c={},l){const L=++this.handleId;c.sync||this._installSyncUpdatingWatch(e,L);e=l(e,F,c);this.handles.add(e,L);return{remove:()=>this.handles.remove(L)}};z._installSyncUpdatingWatch=function(e,F){const c=this._createSyncUpdatingCallback();
e=y.watch(e,c,{sync:!0,equals:()=>!1});this.handles.add(e,F);return e};z._createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(v.schedule(()=>{e===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return G}(J);B.__decorate([n.property({readOnly:!0})],b.WatchUpdatingTracking.prototype,"updating",void 0);
b.WatchUpdatingTracking=B.__decorate([r.subclass("esri.core.support.WatchUpdatingTracking")],b.WatchUpdatingTracking);b.WatchFlags=void 0;(function(u){u[u.NONE=0]="NONE";u[u.SYNC=1]="SYNC";u[u.INIT=2]="INIT"})(b.WatchFlags||(b.WatchFlags={}));Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(b,a,B,J,p,k,y,v,n,r){return function(){function u(z){this.geometryInfo=z;this._boundsStore=new n.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new B;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}var G=u.prototype;G.add=function(z){this._add(z);this._emitChanged()};G.addMany=function(z){for(const e of z)this._add(e);this._emitChanged()};G.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};G.removeById=function(z){z=
this._featuresById.get(z);if(!z)return null;this._remove(z);this._emitChanged();return z};G.removeManyById=function(z){this._boundsStore.invalidateIndex();for(const e of z)(z=this._featuresById.get(e))&&this._remove(z);this._emitChanged()};G.forEachBounds=function(z,e,F){for(const c of z)(z=this._boundsStore.get(c.objectId))&&e(k.fromRect(F,z))};G.getFeature=function(z){return this._featuresById.get(z)};G.has=function(z){return this._featuresById.has(z)};G.toArray=function(){return Array.from(this._featuresById.values())};
G.forEach=function(z){this._featuresById.forEach(e=>z(e))};G.forEachInBounds=function(z,e){this._boundsStore.forEachInBounds(z,F=>{e(this._featuresById.get(F))})};G.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};G.sweep=function(){let z=!1;this._featuresById.forEach((e,F)=>{this._markedIds.has(F)||(z=!0,this._remove(e))});this._markedIds.clear();z&&this._emitChanged()};G._emitChanged=function(){this.events.emit("changed",void 0)};G._add=function(z){if(z){var e=
z.objectId;if(null==e)J.getLogger("esri.layers.graphics.data.FeatureStore").error(new a("featurestore:invalid-feature","feature id is missing",{feature:z}));else{var F=this._featuresById.get(e);this._markedIds.add(e);if(F){z.displayId=F.displayId;var c=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(p.isSome(this.onFeatureAdd))this.onFeatureAdd(z);!p.isNone(z.geometry)&&z.geometry.coords&&z.geometry.coords.length?(c=v.getBoundsOptimizedGeometry(p.isSome(c)?c:y.create(),z.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),p.isSome(c)&&this._boundsStore.set(e,c)):this._boundsStore.set(e,null);this._featuresById.set(e,z)}}};G._remove=function(z){if(p.isSome(this.onFeatureRemove))this.onFeatureRemove(z);this._markedIds.delete(z.objectId);this._boundsStore.delete(z.objectId);this._featuresById.delete(z.objectId);return z};b._createClass(u,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let z=0;this._featuresById.forEach(e=>{p.isSome(e.geometry)&&e.geometry.coords&&(z+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:z/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return u}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent",
"./aaBoundingRect"],function(b,a,B,J){function p(c=e){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function k(c,l,L,K,m,A,E=p()){E[0]=c;E[1]=l;E[2]=L;E[3]=K;E[4]=m;E[5]=A;return E}function y(c){return c[0]>=c[3]?0:c[3]-c[0]}function v(c){return c[1]>=c[4]?0:c[4]-c[1]}function n(c){return c[2]>=c[5]?0:c[5]-c[2]}function r(c,l){return Math.max(l[0],c[0])<=Math.min(l[3],c[3])&&Math.max(l[1],c[1])<=Math.min(l[4],c[4])&&Math.max(l[2],c[2])<=Math.min(l[5],c[5])}function u(c,l){c[0]=l[0];c[1]=l[1];c[2]=l[2];c[3]=
l[3];c[4]=l[4];c[5]=l[5];return c}function G(c){return 6===c.length}const z=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],e=[0,0,0,0,0,0],F=p();b.NEGATIVE_INFINITY=z;b.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];b.ZERO=e;b.allFinite=function(c){for(let l=0;6>l;l++)if(!isFinite(c[l]))return!1;return!0};b.center=function(c,l=[0,0,0]){l[0]=c[0]+y(c)/2;l[1]=c[1]+v(c)/2;l[2]=c[2]+n(c)/2;return l};b.contains=function(c,l){return l[0]>=c[0]&&l[1]>=c[1]&&l[2]>=
c[2]&&l[3]<=c[3]&&l[4]<=c[4]&&l[5]<=c[5]};b.containsPoint=function(c,l){return l[0]>=c[0]&&l[1]>=c[1]&&l[2]>=c[2]&&l[0]<=c[3]&&l[1]<=c[4]&&l[2]<=c[5]};b.containsPointWithMargin=function(c,l,L){return l[0]>=c[0]-L&&l[1]>=c[1]-L&&l[2]>=c[2]-L&&l[0]<=c[3]+L&&l[1]<=c[4]+L&&l[2]<=c[5]+L};b.create=p;b.depth=v;b.diameter=function(c){const l=y(c),L=n(c);c=v(c);return Math.sqrt(l*l+L*L+c*c)};b.empty=function(c){return c?u(c,z):p(z)};b.equals=function(c,l,L){if(a.isNone(c)||a.isNone(l))return c===l;if(!G(c)||
!G(l))return!1;if(L)for(let K=0;K<c.length;K++){if(!L(c[K],l[K]))return!1}else for(L=0;L<c.length;L++)if(c[L]!==l[L])return!1;return!0};b.expandWithAABB=function(c,l){c[0]=Math.min(c[0],l[0]);c[1]=Math.min(c[1],l[1]);c[2]=Math.min(c[2],l[2]);c[3]=Math.max(c[3],l[3]);c[4]=Math.max(c[4],l[4]);c[5]=Math.max(c[5],l[5])};b.expandWithBuffer=function(c,l,L=0,K=l.length/3){let m=c[0],A=c[1],E=c[2],R=c[3],O=c[4],w=c[5];for(let H=0;H<K;H++)m=Math.min(m,l[L+3*H]),A=Math.min(A,l[L+3*H+1]),E=Math.min(E,l[L+3*
H+2]),R=Math.max(R,l[L+3*H]),O=Math.max(O,l[L+3*H+1]),w=Math.max(w,l[L+3*H+2]);c[0]=m;c[1]=A;c[2]=E;c[3]=R;c[4]=O;c[5]=w};b.expandWithNestedArray=function(c,l,L){const K=l.length;let m=c[0],A=c[1],E=c[2],R=c[3],O=c[4],w=c[5];if(L)for(L=0;L<K;L++){var H=l[L];m=Math.min(m,H[0]);A=Math.min(A,H[1]);E=Math.min(E,H[2]);R=Math.max(R,H[0]);O=Math.max(O,H[1]);w=Math.max(w,H[2])}else for(L=0;L<K;L++)H=l[L],m=Math.min(m,H[0]),A=Math.min(A,H[1]),R=Math.max(R,H[0]),O=Math.max(O,H[1]);c[0]=m;c[1]=A;c[2]=E;c[3]=
R;c[4]=O;c[5]=w};b.expandWithOffset=function(c,l,L,K){c[0]=Math.min(c[0],c[0]+l);c[3]=Math.max(c[3],c[3]+l);c[1]=Math.min(c[1],c[1]+L);c[4]=Math.max(c[4],c[4]+L);c[2]=Math.min(c[2],c[2]+K);c[5]=Math.max(c[5],c[5]+K)};b.expandWithRect=function(c,l){c[0]=Math.min(c[0],l[0]);c[1]=Math.min(c[1],l[1]);c[3]=Math.max(c[3],l[2]);c[4]=Math.max(c[4],l[3])};b.expandWithVec3=function(c,l){c[0]=Math.min(c[0],l[0]);c[1]=Math.min(c[1],l[1]);c[2]=Math.min(c[2],l[2]);c[3]=Math.max(c[3],l[0]);c[4]=Math.max(c[4],l[1]);
c[5]=Math.max(c[5],l[2])};b.fromExtent=function(c,l=p()){l[0]=c.xmin;l[1]=c.ymin;l[2]=c.zmin;l[3]=c.xmax;l[4]=c.ymax;l[5]=c.zmax;return l};b.fromMinMax=function(c,l,L=p()){L[0]=c[0];L[1]=c[1];L[2]=c[2];L[3]=l[0];L[4]=l[1];L[5]=l[2];return L};b.fromRect=function(c,l){c[0]=l[0];c[1]=l[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=l[2];c[4]=l[3];c[5]=Number.POSITIVE_INFINITY;return c};b.fromValues=k;b.getMax=function(c,l){l[0]=c[3];l[1]=c[4];l[2]=c[5];return l};b.getMin=function(c,l){l[0]=c[0];l[1]=c[1];l[2]=
c[2];return l};b.height=n;b.intersects=r;b.intersectsClippingArea=function(c,l){return a.isNone(l)?!0:r(c,l)};b.is=G;b.isPoint=function(c){return 0===y(c)&&0===v(c)&&0===n(c)};b.maximumDimension=function(c){return Math.max(y(c),n(c),v(c))};b.offset=function(c,l,L,K,m=c){m[0]=c[0]+l;m[1]=c[1]+L;m[2]=c[2]+K;m[3]=c[3]+l;m[4]=c[4]+L;m[5]=c[5]+K;return m};b.scale=function(c,l,L=c){const K=c[0]+y(c)/2,m=c[1]+v(c)/2,A=c[2]+n(c)/2;L[0]=K+(c[0]-K)*l;L[1]=m+(c[1]-m)*l;L[2]=A+(c[2]-A)*l;L[3]=K+(c[3]-K)*l;L[4]=
m+(c[4]-m)*l;L[5]=A+(c[5]-A)*l;return L};b.set=u;b.setMax=function(c,l,L=c){L[3]=l[0];L[4]=l[1];L[5]=l[2];L!==c&&(L[0]=c[0],L[1]=c[1],L[2]=c[2]);return c};b.setMin=function(c,l,L=c){L[0]=l[0];L[1]=l[1];L[2]=l[2];L!==c&&(L[3]=c[3],L[4]=c[4],L[5]=c[5]);return L};b.size=function(c,l=[0,0,0]){l[0]=y(c);l[1]=v(c);l[2]=n(c);return l};b.toExtent=function(c,l){return isFinite(c[2])||isFinite(c[5])?new B({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:l}):new B({xmin:c[0],xmax:c[3],
ymin:c[1],ymax:c[4],spatialReference:l})};b.toRect=function(c,l){l||(l=J.create());l[0]=c[0];l[1]=c[1];l[2]=c[3];l[3]=c[4];return l};b.width=y;b.wrap=function(c,l,L,K,m,A){return k(c,l,L,K,m,A,F)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(b,a,B,J,p){function k(e=z){return[e[0],e[1],e[2],e[3]]}function y(e,
F){e!==F&&(e[0]=F[0],e[1]=F[1],e[2]=F[2],e[3]=F[3]);return e}function v(e){return J.isNone(e)||e[0]>=e[2]?0:e[2]-e[0]}function n(e){return e[1]>=e[3]?0:e[3]-e[1]}function r(e,F,c){return F>=e[0]&&c>=e[1]&&F<=e[2]&&c<=e[3]}function u(e){return null!=e&&4===e.length}const G=[Infinity,Infinity,-Infinity,-Infinity],z=[0,0,0,0];b.NEGATIVE_INFINITY=G;b.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];b.UNIT=[0,0,1,1];b.ZERO=z;b.allFinite=function(e){for(let F=0;4>F;F++)if(!isFinite(e[F]))return!1;
return!0};b.area=function(e){return v(e)*n(e)};b.center=function(e,F=[0,0]){F[0]=(e[0]+e[2])/2;F[1]=(e[1]+e[3])/2;return F};b.clone=function(e){return[e[0],e[1],e[2],e[3]]};b.contains=function(e,F){return F[0]>=e[0]&&F[2]<=e[2]&&F[1]>=e[1]&&F[3]<=e[3]};b.containsPoint=function(e,F){return r(e,F[0],F[1])};b.containsPointObject=function(e,F){return r(e,F.x,F.y)};b.containsPointWithMargin=function(e,F,c){return F[0]>=e[0]-c&&F[1]>=e[1]-c&&F[0]<=e[2]+c&&F[1]<=e[3]+c};b.containsXY=r;b.containsXYWithMargin=
function(e,F,c,l){return F>=e[0]-l&&c>=e[1]-l&&F<=e[2]+l&&c<=e[3]+l};b.copy=y;b.create=k;b.distance=function(e,F){const c=(e[1]+e[3])/2,l=Math.max(Math.abs(F[0]-(e[0]+e[2])/2)-v(e)/2,0);e=Math.max(Math.abs(F[1]-c)-n(e)/2,0);return Math.sqrt(l*l+e*e)};b.empty=function(e){return e?y(e,G):k(G)};b.equals=function(e,F){return u(e)&&u(F)?e[0]===F[0]&&e[1]===F[1]&&e[2]===F[2]&&e[3]===F[3]:e===F};b.expand=function(e,F,c){if(J.isNone(F))y(c,e);else if("length"in F)if(u(F))c[0]=Math.min(e[0],F[0]),c[1]=Math.min(e[1],
F[1]),c[2]=Math.max(e[2],F[2]),c[3]=Math.max(e[3],F[3]);else{if(2===F.length||3===F.length)c[0]=Math.min(e[0],F[0]),c[1]=Math.min(e[1],F[1]),c[2]=Math.max(e[2],F[0]),c[3]=Math.max(e[3],F[1])}else switch(F.type){case "extent":c[0]=Math.min(e[0],F.xmin);c[1]=Math.min(e[1],F.ymin);c[2]=Math.max(e[2],F.xmax);c[3]=Math.max(e[3],F.ymax);break;case "point":c[0]=Math.min(e[0],F.x),c[1]=Math.min(e[1],F.y),c[2]=Math.max(e[2],F.x),c[3]=Math.max(e[3],F.y)}};b.expandPointInPlace=function(e,F){F[0]<e[0]&&(e[0]=
F[0]);F[0]>e[2]&&(e[2]=F[0]);F[1]<e[1]&&(e[1]=F[1]);F[1]>e[3]&&(e[3]=F[1])};b.expandWithNestedArray=function(e,F,c=e){const l=F.length;let L=e[0],K=e[1],m=e[2];e=e[3];for(let A=0;A<l;A++){const E=F[A];L=Math.min(L,E[0]);K=Math.min(K,E[1]);m=Math.max(m,E[0]);e=Math.max(e,E[1])}c[0]=L;c[1]=K;c[2]=m;c[3]=e;return c};b.fromExtent=function(e,F=k()){F[0]=e.xmin;F[1]=e.ymin;F[2]=e.xmax;F[3]=e.ymax;return F};b.fromValues=function(e,F,c,l,L=k()){L[0]=e;L[1]=F;L[2]=c;L[3]=l;return L};b.height=n;b.intersection=
function(e,F,c){if(J.isNone(F))return y(c,e);const l=F[0],L=F[1],K=F[2];F=F[3];c[0]=B.clamp(e[0],l,K);c[1]=B.clamp(e[1],L,F);c[2]=B.clamp(e[2],l,K);c[3]=B.clamp(e[3],L,F);return c};b.intersects=function(e,F){return Math.max(F[0],e[0])<=Math.min(F[2],e[2])&&Math.max(F[1],e[1])<=Math.min(F[3],e[3])};b.intersectsSegment=function(e,F,c){const l=e[0],L=e[1],K=e[2];e=e[3];const {x:m,y:A}=F,{x:E,y:R}=c;var O=(H,g)=>0>(R-A)*H+(m-E)*g+(E*A-m*R);F=O(l,e);c=O(K,e);const w=O(K,L);O=O(l,L);return F===c&&c===w&&
w===O&&O===F||m<l&&E<l||m>K&&E>K||A>e&&R>e||A<L&&R<L?!1:!0};b.intersectsSphere=function(e,F){const c=F[3];var l=Math.abs(F[0]-.5*(e[0]+e[2]));const L=.5*(e[2]-e[0]);if(l>c+L)return!1;var K=.5*(e[3]-e[1]);e=Math.abs(F[1]-.5*(e[1]+e[3]));if(e>c+K)return!1;if(l<L||e<K)return!0;l-=L;K=e-K;return l*l+K*K<=c*c};b.is=u;b.isPoint=function(e){return(0===v(e)||!isFinite(e[0]))&&(0===n(e)||!isFinite(e[1]))};b.offset=function(e,F,c,l=e){l[0]=e[0]+F;l[1]=e[1]+c;l[2]=e[2]+F;l[3]=e[3]+c;return l};b.pad=function(e,
F,c=e){c[0]=e[0]-F;c[1]=e[1]-F;c[2]=e[2]+F;c[3]=e[3]+F;return c};b.setMax=function(e,F,c=e){c[2]=F[0];c[3]=F[1];c!==e&&(c[0]=e[0],c[1]=e[1]);return e};b.setMin=function(e,F,c=e){c[0]=F[0];c[1]=F[1];c!==e&&(c[2]=e[2],c[3]=e[3]);return c};b.size=function(e,F){F[0]=e[2]-e[0];F[1]=e[3]-e[1]};b.toExtent=function(e,F){return new p({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:F})};b.width=v;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(b,a,B,J,p,k,y,v){function n(x,T){return x?T?4:3:T?3:2}function r(x,T,aa,ba){if(x){if(aa)return T&&ba?f:La;if(T&&ba)return Za}else if(T&&ba)return La;return Ja}function u({scale:x,translate:T},aa){return Math.round((aa-T[0])/x[0])}function G({scale:x,translate:T},aa){return Math.round((T[1]-aa)/x[1])}function z({scale:x,translate:T},aa){return aa*x[0]+T[0]}function e({scale:x,translate:T},aa){return T[1]-aa*x[1]}function F(x){x=x.coords;return{x:x[0],y:x[1]}}function c(x,T){x.coords[0]=T.x;
x.coords[1]=T.y;return x}function l(x){x=x.coords;return{x:x[0],y:x[1],z:x[2]}}function L(x,T){x.coords[0]=T.x;x.coords[1]=T.y;x.coords[2]=T.z;return x}function K(x){x=x.coords;return{x:x[0],y:x[1],m:x[2]}}function m(x,T){x.coords[0]=T.x;x.coords[1]=T.y;x.coords[2]=T.m;return x}function A(x){x=x.coords;return{x:x[0],y:x[1],z:x[2],m:x[3]}}function E(x,T){x.coords[0]=T.x;x.coords[1]=T.y;x.coords[2]=T.z;x.coords[3]=T.m;return x}function R(x,T){return x&&T?E:x?L:T?m:c}function O(x,T,aa,ba,ka){aa=R(aa,
ba);for(const ia of T){const {geometry:U,attributes:W}=ia;let ea;U&&(ea=aa(new v,U));x.push(new k.OptimizedFeature(ea,W,null,W[ka]))}return x}function w(x,T,aa,ba){for(const ka of T){const {geometry:ia,attributes:U}=ka;let W;ia&&(W=H(ia,aa,ba));x.push({attributes:U,geometry:W})}return x}function H(x,T,aa){if(J.isNone(x))return null;const ba=n(T,aa),ka=[];for(let ia=0;ia<x.coords.length;ia+=ba){const U=[];for(let W=0;W<ba;W++)U.push(x.coords[ia+W]);ka.push(U)}return T?aa?{points:ka,hasZ:T,hasM:aa}:
{points:ka,hasZ:T}:aa?{points:ka,hasM:aa}:{points:ka}}function g(x,T,aa,ba,ka){aa=n(aa,ba);for(const ia of T){T=ia.geometry;ba=ia.attributes;let U;T&&(U=h(new v,T,aa));x.push(new k.OptimizedFeature(U,ba,null,ba[ka]))}return x}function h(x,T,aa=n(T.hasZ,T.hasM)){x.lengths[0]=T.points.length;const ba=x.coords;let ka=0;for(const ia of T.points)for(T=0;T<aa;T++)ba[ka++]=ia[T];return x}function D(x,T,aa){if(!x)return null;const ba=n(T,aa),{coords:ka,lengths:ia}=x;x=[];let U=0;for(const W of ia){const ea=
[];for(let ra=0;ra<W;ra++){const sa=[];for(let xa=0;xa<ba;xa++)sa.push(ka[U++]);ea.push(sa)}x.push(ea)}return T?aa?{paths:x,hasZ:T,hasM:aa}:{paths:x,hasZ:T}:aa?{paths:x,hasM:aa}:{paths:x}}function P(x,T,aa,ba,ka){aa=n(aa,ba);for(const ia of T){T=ia.geometry;ba=ia.attributes;let U;T&&(U=M(new v,T,aa));x.push(new k.OptimizedFeature(U,ba,null,ba[ka]))}return x}function M(x,T,aa=n(T.hasZ,T.hasM)){const {lengths:ba,coords:ka}=x;let ia=0;for(const U of T.paths){for(const W of U)for(T=0;T<aa;T++)ka[ia++]=
W[T];ba.push(U.length)}return x}function N(x,T,aa){if(!x)return null;const ba=n(T,aa),{coords:ka,lengths:ia}=x;x=[];let U=0;for(const W of ia){const ea=[];for(let ra=0;ra<W;ra++){const sa=[];for(let xa=0;xa<ba;xa++)sa.push(ka[U++]);ea.push(sa)}x.push(ea)}return T?aa?{rings:x,hasZ:T,hasM:aa}:{rings:x,hasZ:T}:aa?{rings:x,hasM:aa}:{rings:x}}function q(x,T,aa,ba,ka){for(const ia of T){T=ia.geometry;const U=ia.centroid,W=ia.attributes;let ea;T&&(ea=S(new v,T,aa,ba));J.isSome(U)?x.push(new k.OptimizedFeature(ea,
W,c(new v,U),W[ka])):x.push(new k.OptimizedFeature(ea,W,null,W[ka]))}return x}function S(x,T,aa=T.hasZ,ba=T.hasM){Y(x,T.rings,aa,ba);return x}function Y(x,T,aa,ba){aa=n(aa,ba);const {lengths:ka,coords:ia}=x;ba=0;ka.length=ia.length=0;for(const U of T){for(const W of U)for(T=0;T<aa;T++)ia[ba++]=W[T];ka.push(U.length)}return x}function V(x,T,aa,ba,ka,ia){x.length=0;if(!aa){for(const U of T)x.push(new k.OptimizedFeature(null,U.attributes,null,U.attributes[ia]));return x}switch(aa){case "esriGeometryPoint":return O(x,
T,ba,ka,ia);case "esriGeometryMultipoint":return g(x,T,ba,ka,ia);case "esriGeometryPolyline":return P(x,T,ba,ka,ia);case "esriGeometryPolygon":return q(x,T,ba,ka,ia);default:wa.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${aa}'`)),x.length=0}return x}function ja(x,T,aa,ba){x=x&&("coords"in x?x:x.geometry);if(J.isNone(x))return null;switch(T){case "esriGeometryPoint":return T=F,aa&&ba?T=A:aa?T=l:ba&&(T=K),T(x);case "esriGeometryMultipoint":return H(x,
aa,ba);case "esriGeometryPolyline":return D(x,aa,ba);case "esriGeometryPolygon":return N(x,aa,ba);default:wa.error("convertToGeometry:unknown-geometry",new a(`Unable to parse unknown geometry type '${T}'`))}}function ma(x,T,aa,ba,ka){x.length=0;if(J.isNone(aa)){for(const W of T)x.push({attributes:W.attributes});return x}switch(aa){case "esriGeometryPoint":var ia=F;ba&&ka?ia=A:ba?ia=l:ka&&(ia=K);for(var U of T){const {geometry:W,attributes:ea}=U;ba=J.isSome(W)?ia(W):null;x.push({attributes:ea,geometry:ba})}break;
case "esriGeometryMultipoint":return w(x,T,ba,ka);case "esriGeometryPolyline":for(const W of T){const {geometry:ea,attributes:ra}=W;let sa;J.isSome(ea)&&(sa=D(ea,ba,ka));x.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(ia of T){const {geometry:W,attributes:ea,centroid:ra}=ia;let sa;J.isSome(W)&&(sa=N(W,ba,ka));J.isSome(ra)?(U=F(ra),x.push({attributes:ea,centroid:U,geometry:sa})):x.push({attributes:ea,geometry:sa})}break;default:wa.error("convertToFeatureSet:unknown-geometry",
new a(`Unable to parse unknown geometry type '${aa}'`))}return x}function X(x,T,aa,ba,ka,ia,U=aa,W=ba){x.lengths.length&&(x.lengths.length=0);x.coords.length&&(x.coords.length=0);if(J.isNone(T)||!T.coords.length)return null;ka=Ma[ka];const {coords:ea,lengths:ra}=T;T=n(aa,ba);const sa=n(aa&&U,ba&&W);aa=r(aa,ba,U,W);if(!ra.length)return aa(x.coords,ea,0,0,u(ia,ea[0]),G(ia,ea[1])),x.lengths.length&&(x.lengths.length=0),x.coords.length=T,x;let xa,Aa=0,Ba,Ia=0;for(const Ha of ra){if(Ha<ka)continue;let Ea=
0;Ba=Ia;W=ba=u(ia,ea[Aa]);xa=U=G(ia,ea[Aa+1]);aa(x.coords,ea,Ba,Aa,W,xa);Ea++;Aa+=T;Ba+=sa;for(let Fa=1;Fa<Ha;Fa++,Aa+=T)if(W=u(ia,ea[Aa]),xa=G(ia,ea[Aa+1]),W!==ba||xa!==U)aa(x.coords,ea,Ba,Aa,W-ba,xa-U),Ba+=sa,Ea++,ba=W,U=xa;Ea>=ka&&(x.lengths.push(Ea),Ia=Ba)}x.coords.length=Ia;return x.coords.length?x:null}function na(x,T,aa,ba,ka,ia,U){let W=ba,ea=0;for(let sa=ia+aa;sa<U;sa+=aa){{var ra=T[sa];const xa=T[sa+1],Aa=T[U],Ba=T[U+1];let Ia=T[ia],Ha=T[ia+1],Ea=Aa-Ia,Fa=Ba-Ha;if(0!==Ea||0!==Fa){const Ga=
((ra-Ia)*Ea+(xa-Ha)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ia=Aa,Ha=Ba):0<Ga&&(Ia+=Ea*Ga,Ha+=Fa*Ga)}Ea=ra-Ia;Fa=xa-Ha;ra=Ea*Ea+Fa*Fa}ra>W&&(ea=sa,W=ra)}W>ba&&(ea-ia>aa&&na(x,T,aa,ba,ka,ia,ea),ka(x,T,x.length,ea,T[ea],T[ea+1]),U-ea>aa&&na(x,T,aa,ba,ka,ea,U))}function oa(x,T,aa,ba,ka){const {coords:ia,lengths:U}=T,W=aa?ba?f:La:ba?La:Ja;aa=n(aa,ba);if(!ia.length)return x!==T&&(x.lengths.length=0,x.coords.length=0),x;if(!U.length)return W(x.coords,ia,0,0,z(ka,ia[0]),e(ka,ia[1])),x!==T&&(x.lengths.length=0,x.coords.length=
aa),x;const [ea,ra]=ka.scale;ba=0;for(let sa=0;sa<U.length;sa++){const xa=U[sa];x.lengths[sa]=xa;let Aa=z(ka,ia[ba]),Ba=e(ka,ia[ba+1]);W(x.coords,ia,ba,ba,Aa,Ba);ba+=aa;for(let Ia=1;Ia<xa;Ia++,ba+=aa)Aa+=ia[ba]*ea,Ba-=ia[ba+1]*ra,W(x.coords,ia,ba,ba,Aa,Ba)}x!==T&&(x.lengths.length=U.length,x.coords.length=ia.length);return x}function qa(x,T,aa,ba){let ka=0,ia=x[ba*T],U=x[ba*(T+1)];for(let W=1;W<aa;W++){const ea=ia+x[ba*(T+W)],ra=U+x[ba*(T+W)+1],sa=(ea-ia)*(ra+U);ia=ea;U=ra;ka+=sa}return.5*ka}const wa=
B.getLogger("esri.layers.graphics.featureConversionUtils"),Ma={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ja=(x,T,aa,ba,ka,ia)=>{x[aa]=ka;x[aa+1]=ia},La=(x,T,aa,ba,ka,ia)=>{x[aa]=ka;x[aa+1]=ia;x[aa+2]=T[ba+2]},Za=(x,T,aa,ba,ka,ia)=>{x[aa]=ka;x[aa+1]=ia;x[aa+2]=T[ba+3]},f=(x,T,aa,ba,ka,ia)=>{x[aa]=ka;x[aa+1]=ia;x[aa+2]=T[ba+2];x[aa+3]=T[ba+3]},C=[],ha=[];b.convertFromFeature=function(x,T,aa,ba,ka){C[0]=x;[x]=V(ha,C,T,aa,ba,ka);C.length=ha.length=0;return x};
b.convertFromFeatureSet=function(x,T){const aa=new y,{hasM:ba,hasZ:ka,features:ia,objectIdFieldName:U,spatialReference:W,geometryType:ea,exceededTransferLimit:ra,transform:sa,fields:xa}=x;xa&&(aa.fields=xa);aa.geometryType=ea;aa.objectIdFieldName=U||T;aa.spatialReference=W;if(!aa.objectIdFieldName)return wa.error(new a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),aa;ia&&V(aa.features,ia,ea,ka,ba,aa.objectIdFieldName);ra&&(aa.exceededTransferLimit=ra);ba&&(aa.hasM=
ba);ka&&(aa.hasZ=ka);sa&&(aa.transform=sa);return aa};b.convertFromFeatures=V;b.convertFromGeometry=function(x,T,aa){if(J.isNone(x))return null;const ba=new v;"hasZ"in x&&null==T&&(T=x.hasZ);"hasM"in x&&null==aa&&(aa=x.hasM);if(p.isPoint(x))return R(null!=T?T:null!=x.z,null!=aa?aa:null!=x.m)(ba,x);if(p.isPolygon(x))return S(ba,x,T,aa);if(p.isPolyline(x))return M(ba,x,n(T,aa));if(p.isMultipoint(x))return h(ba,x,n(T,aa));wa.error("convertFromGeometry:unknown-geometry",new a(`Unable to parse unknown geometry type '${x}'`))};
b.convertFromGraphics=function(x,T,aa,ba,ka,ia){const U=x.length;switch(aa){case "esriGeometryPoint":O(x,T,ba,ka,ia);break;case "esriGeometryMultipoint":g(x,T,ba,ka,ia);break;case "esriGeometryPolyline":P(x,T,ba,ka,ia);break;case "esriGeometryPolygon":q(x,T,ba,ka,ia);break;default:wa.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${aa}'`))}for(ba=0;ba<T.length;ba++)x[ba+U].geometryType=aa,x[ba+U].insertAfter=T[ba].insertAfter,x[ba+U].groupId=T[ba].groupId;
return x};b.convertFromMultipoint=h;b.convertFromMultipointFeatures=g;b.convertFromNestedArray=Y;b.convertFromPoint=function(x,T,aa=R(null!=T.z,null!=T.m)){return aa(x,T)};b.convertFromPointFeatures=O;b.convertFromPolygon=S;b.convertFromPolyline=M;b.convertFromPolylineFeatures=P;b.convertToFeature=function(x,T,aa,ba){ha[0]=x;ma(C,ha,T,aa,ba);x=C[0];C.length=ha.length=0;return x};b.convertToFeatureSet=function(x){const {objectIdFieldName:T,spatialReference:aa,transform:ba,fields:ka,hasM:ia,hasZ:U,
features:W,geometryType:ea,exceededTransferLimit:ra,uniqueIdField:sa,queryGeometry:xa,queryGeometryType:Aa}=x;x=ma([],W,ea,U,ia);const Ba=ja(xa,Aa,!1,!1);x={features:x,fields:ka,geometryType:ea,objectIdFieldName:T,spatialReference:aa,uniqueIdField:sa,queryGeometry:Ba};ba&&(x.transform=ba);ra&&(x.exceededTransferLimit=ra);ia&&(x.hasM=ia);U&&(x.hasZ=U);return x};b.convertToFeatures=ma;b.convertToGeometry=ja;b.convertToMultipoint=H;b.convertToMultipointFeatures=w;b.convertToPoint=function(x,T,aa){return x?
T?aa?A(x):l(x):aa?K(x):F(x):null};b.convertToPolygon=N;b.convertToPolyline=D;b.deltaDecodeGeometry=function(x,T){if(J.isNone(x))return null;const aa=x.clone(),ba=x.coords;x=x.lengths;let ka=0;for(let W=0;W<x.length;W++){const ea=x[W];var ia=ba[T*ka],U=ba[T*ka+1];for(let ra=1;ra<ea;ra++)ia+=ba[T*(ka+ra)],U+=ba[T*(ka+ra)+1],aa.coords[T*(ka+ra)]=ia,aa.coords[T*(ka+ra)+1]=U;ka+=ea}return aa};b.deltaEncodeGeometry=function(x,T){const aa=x.clone(),ba=x.coords;x=x.lengths;let ka=0;for(let U=0;U<x.length;U++){const W=
x[U];let ea=ba[T*ka];var ia=ba[T*ka+1];for(let ra=1;ra<W;ra++){const sa=ba[T*(ka+ra)],xa=ba[T*(ka+ra)+1];ia=xa-ia;aa.coords[T*(ka+ra)]=sa-ea;aa.coords[T*(ka+ra)+1]=ia;ea=sa;ia=xa}ka+=W}return aa};b.generalizeOptimizedGeometry=function(x,T,aa,ba,ka,ia,U=aa,W=ba){x.lengths.length&&(x.lengths.length=0);x.coords.length&&(x.coords.length=0);if(!T||!T.coords.length)return null;ka=Ma[ka];const {coords:ea,lengths:ra}=T;T=n(aa,ba);const sa=n(aa&&U,ba&&W);aa=r(aa,ba,U,W);if(!ra.length)return aa(x.coords,ea,
0,0,ea[0],ea[1]),x.lengths.length&&(x.lengths.length=0),x.coords.length=T,x;ba=0;ia*=ia;for(const xa of ra){if(xa<ka){ba+=xa*T;continue}U=x.coords.length/sa;W=ba;const Aa=ba+(xa-1)*T;aa(x.coords,ea,x.coords.length,W,ea[W],ea[W+1]);na(x.coords,ea,T,ia,aa,W,Aa);aa(x.coords,ea,x.coords.length,Aa,ea[Aa],ea[Aa+1]);W=x.coords.length/sa-U;W>=ka?x.lengths.push(W):x.coords.length=U*sa;ba+=xa*T}return x.coords.length?x:null};b.getBoundsOptimizedGeometry=function(x,T,aa,ba){if(J.isNone(T)||!T.coords||!T.coords.length)return null;
aa=n(aa,ba);let ka=ba=Number.POSITIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY;if(T&&T.coords){T=T.coords;for(let W=0;W<T.length;W+=aa){const ea=T[W],ra=T[W+1];ba=Math.min(ba,ea);ia=Math.max(ia,ea);ka=Math.min(ka,ra);U=Math.max(U,ra)}}x[0]=ba;x[1]=ka;x[2]=ia;x[3]=U;return x};b.getQuantizedArea=function(x,T){const {coords:aa,lengths:ba}=x;let ka=x=0;for(let ia=0;ia<ba.length;ia++)ka+=qa(aa,x,ba[ia],T),x+=ia;return Math.abs(ka)};b.getQuantizedBoundsOptimizedGeometry=function(x,
T,aa,ba){aa=n(aa,ba);const {lengths:ka,coords:ia}=T;ba=T=Number.POSITIVE_INFINITY;let U=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY,ea=0;for(const ra of ka){let sa=ia[ea],xa=ia[ea+1];T=Math.min(sa,T);ba=Math.min(xa,ba);U=Math.max(sa,U);W=Math.max(xa,W);ea+=aa;for(let Aa=1;Aa<ra;Aa++,ea+=aa){const Ba=ia[ea],Ia=ia[ea+1];sa+=Ba;xa+=Ia;0>Ba&&(T=Math.min(T,sa));0<Ba&&(U=Math.max(U,sa));0>Ia?ba=Math.min(ba,xa):0<Ia&&(W=Math.max(W,xa))}}x[0]=T;x[1]=ba;x[2]=U;x[3]=W;return x};b.getSignedQuantizedRingArea=
qa;b.quantizeOptimizedFeatureSet=function(x,T){const {geometryType:aa,features:ba,hasM:ka,hasZ:ia}=T;if(!x)return T;for(let U=0;U<ba.length;U++){const W=ba[U],ea=W.weakClone();ea.geometry=new v;X(ea.geometry,W.geometry,ka,ia,aa,x);W.centroid&&(ea.centroid=new v,X(ea.centroid,W.centroid,ka,ia,"esriGeometryPoint",x));ba[U]=ea}T.transform=x;return T};b.quantizeOptimizedGeometry=X;b.quantizeX=u;b.quantizeY=G;b.removeCollinearVectices=function(x,T,aa,ba,ka){if(!T||!T.coords||!T.coords.length)return null;
aa=Ma[aa];const {coords:ia,lengths:U}=T;T=r(ba,ka,ba,ka);ba=n(ba,ka);let W=ka=0,ea=0,ra=0;for(const Aa of U){W=ra;T(x.coords,ia,W,ka,ia[ka],ia[ka+1]);ka+=ba;var sa=ia[ka];let Ba=ia[ka+1],Ia=sa,Ha=Ba;var xa=Ba/sa;W+=ba;T(x.coords,ia,W,ka,Ia,Ha);ka+=ba;for(let Ea=2;Ea<Aa;Ea++){sa=ia[ka];Ba=ia[ka+1];const Fa=Ba/sa,Ga=xa===Fa||!isFinite(xa)&&!isFinite(Fa);xa=Ga&&isFinite(Fa)?0<=xa&&0<=Fa||0>=xa&&0>=Fa:0<=Ha&&0<=Ba||0>=Ha&&0>=Ba;Ga&&xa?(Ia+=sa,Ha+=Ba):(Ia=sa,Ha=Ba,W+=ba);T(x.coords,ia,W,ka,Ia,Ha);ka+=
ba;xa=Fa}W+=ba;sa=(W-ra)/ba;sa>=aa&&(x.lengths[ea]=sa,ra=W,ea++)}x.coords.length>ra&&(x.coords.length=ra);x.lengths.length>ea&&(x.lengths.length=ea);return x.coords.length&&x.lengths.length?x:null};b.removeZMValues=function(x,T,aa,ba,ka,ia){const U=n(aa,ba);aa=r(aa,ba,ka,ia);ba=T.coords;x.coords.length=0;x.lengths.length=0;x.lengths.push(...T.lengths);for(T=0;T<ba.length;T+=U)aa(x.coords,ba,x.coords.length,T,ba[T],ba[T+1]);return x};b.unquantizeOptimizedFeatureSet=function(x){const {transform:T,features:aa,
hasM:ba,hasZ:ka}=x;if(!T)return x;for(const ia of aa)J.isSome(ia.geometry)&&oa(ia.geometry,ia.geometry,ba,ka,T),J.isSome(ia.centroid)&&oa(ia.centroid,ia.centroid,ba,ka,T);x.transform=null;return x};b.unquantizeOptimizedGeometry=oa;b.unquantizeX=z;b.unquantizeY=e;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(b,a,B){let J=
function(){function k(y=null,v={},n,r){this.geometry=y;this.attributes=v;this.centroid=n;this.objectId=r;this.geohashY=this.geohashX=this.displayId=0}k.prototype.weakClone=function(){const y=new k(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return k}(),p=function(k){function y(){return k.apply(this,arguments)||this}a._inheritsLoose(y,k);return y}(J);b.OptimizedFeature=J;b.OptimizedFeatureWithGeometry=
p;b.hasGeometry=function(k){return!(B.isNone(k.geometry)||!k.geometry.coords||!k.geometry.coords.length)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function b(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=
null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}b.prototype.weakClone=function(){const a=new b;a.objectIdFieldName=this.objectIdFieldName;a.globalIdFieldName=this.globalIdFieldName;a.geohashFieldName=this.geohashFieldName;a.geometryProperties=this.geometryProperties;a.geometryType=this.geometryType;a.spatialReference=this.spatialReference;a.hasZ=this.hasZ;a.hasM=this.hasM;a.features=this.features;a.fields=this.fields;a.transform=this.transform;
a.exceededTransferLimit=this.exceededTransferLimit;a.uniqueIdField=this.uniqueIdField;a.queryGeometry=this.queryGeometry;a.queryGeometryType=this.queryGeometryType;return a};return b}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(b){return function(){function a(J=[],p=[],k=!1){this.lengths=null!=J?J:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=k}a.fromRect=function(J){const [p,k,y,v]=J;J=y-p;const n=v-k;return new a([5],
[p,k,J,0,0,n,-J,0,0,-n])};var B=a.prototype;B.forEachVertex=function(J){let p=0;this.lengths.length||J(this.coords[0],this.coords[1]);for(let k=0;k<this.lengths.length;k++){const y=this.lengths[k];for(let v=0;v<y;v++)J(this.coords[2*(v+p)],this.coords[2*(v+p)+1]);p+=y}};B.clone=function(J){return J?(J.set(this.coords),new a(this.lengths.slice(),J,this.hasIndeterminateRingOrder)):new a(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};b._createClass(a,[{key:"isPoint",get:function(){return 0===
this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((J,p)=>J+p)}}]);return a}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(b,a,B,J,p){function k(n,r,u){y.minX=r[0];y.minY=r[1];y.maxX=r[2];y.maxY=r[3];n.search(y,u)}const y={minX:0,
minY:0,maxX:0,maxY:0};let v=function(){function n(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new J.PooledRBush(9,B("esri-csp-restrictions")?u=>({minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const u=Array(this._idByBounds.size);let G=0;this._idByBounds.forEach((z,e)=>{u[G++]=e});this._indexInvalid=!1;this._index.clear();this._index.load(u)}else this._boundsToLoad.length&&
(this._index.load(this._boundsToLoad.filter(u=>this._idByBounds.has(u))),this._boundsToLoad.length=0)}}var r=n.prototype;r.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};r.delete=function(u){const G=this._boundsById.get(u);this._boundsById.delete(u);G&&(this._idByBounds.delete(G),this._indexInvalid||this._index.remove(G))};r.forEachInBounds=function(u,G){this._loadIndex();k(this._index,u,z=>G(this._idByBounds.get(z)))};
r.get=function(u){return this._boundsById.get(u)};r.has=function(u){return this._boundsById.has(u)};r.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};r.set=function(u,G){if(!this._indexInvalid){const z=this._boundsById.get(u);z&&(this._index.remove(z),this._idByBounds.delete(z))}this._boundsById.set(u,G);G&&(this._idByBounds.set(G,u),this._indexInvalid||(this._boundsToLoad.push(G),5E4<this._boundsToLoad.length&&this._loadIndex()))};a._createClass(n,
[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const u=p.empty();for(const G of this._boundsById.values())G&&(u[0]=Math.min(G[0],u[0]),u[1]=Math.min(G[1],u[1]),u[2]=Math.max(G[2],u[2]),u[3]=Math.max(G[3],u[3]));return u}},{key:"valid",get:function(){return!this._indexInvalid}}]);return n}();b.BoundsStore=v;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(b,a,B,J,p,k){function y(w,H){v(w,0,w.children.length,H,w)}function v(w,H,g,h,D){D||(D=new R([]));D.minX=Infinity;D.minY=Infinity;D.maxX=-Infinity;D.maxY=-Infinity;for(let P=H,M;P<g;P++)M=w.children[P],n(D,w.leaf?h(M):M);return D}function n(w,H){w.minX=Math.min(w.minX,H.minX);w.minY=Math.min(w.minY,H.minY);w.maxX=Math.max(w.maxX,H.maxX);w.maxY=Math.max(w.maxY,H.maxY)}function r(w,H){return w.minX-H.minX}function u(w,H){return w.minY-H.minY}function G(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}
function z(w){return w.maxX-w.minX+(w.maxY-w.minY)}function e(w,H){return w.minX<=H.minX&&w.minY<=H.minY&&H.maxX<=w.maxX&&H.maxY<=w.maxY}function F(w,H){return H.minX<=w.maxX&&H.minY<=w.maxY&&H.maxX>=w.minX&&H.maxY>=w.minY}function c(w,H,g,h,D){for(H=[H,g];H.length;){g=J.assumeNonNull(H.pop());const P=J.assumeNonNull(H.pop());if(g-P<=h)continue;const M=P+Math.ceil((g-P)/h/2)*h;k.quickselect(w,M,P,g,D);H.push(P,M,M,g)}}let l=function(){function w(g=9,h){this.compareMinX=r;this.compareMinY=u;this._toBBox=
D=>D;this._maxEntries=Math.max(4,g||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));h&&("function"===typeof h?this._toBBox=h:this._initFormat(h));this.clear()}var H=w.prototype;H.destroy=function(){this.clear();L.prune();K.prune();m.prune();A.prune()};H.all=function(g){this._all(this.data,g)};H.search=function(g,h){let D=this.data;const P=this._toBBox;if(F(g,D))for(L.clear();D;){for(let M=0,N=D.children.length;M<N;M++){const q=D.children[M],S=D.leaf?P(q):q;F(g,S)&&(D.leaf?h(q):e(g,
S)?this._all(q,h):L.push(q))}D=L.pop()}};H.collides=function(g){let h=this.data;const D=this._toBBox;if(!F(g,h))return!1;for(L.clear();h;){for(let P=0,M=h.children.length;P<M;P++){const N=h.children[P],q=h.leaf?D(N):N;if(F(g,q)){if(h.leaf||e(g,q))return!0;L.push(N)}}h=L.pop()}return!1};H.load=function(g){if(!g.length)return this;if(g.length<this._minEntries){for(let h=0,D=g.length;h<D;h++)this.insert(g[h]);return this}g=this._build(g.slice(0,g.length),0,g.length-1,0);if(this.data.children.length)if(this.data.height===
g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){const h=this.data;this.data=g;g=h}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this};H.insert=function(g){g&&this._insert(g,this.data.height-1);return this};H.clear=function(){this.data=new R([]);return this};H.remove=function(g){if(!g)return this;let h=this.data,D=null,P=0,M=!1,N;const q=this._toBBox(g);m.clear();for(A.clear();h||0<m.length;){if(!h){var S;h=J.assumeNonNull(m.pop());D=m.data[m.length-
1];P=null!=(S=A.pop())?S:0;M=!0}if(h.leaf&&(N=B.indexOf(h.children,g,h.children.length,h.indexHint),-1!==N)){h.children.splice(N,1);m.push(h);this._condense(m);break}M||h.leaf||!e(h,q)?D?(P++,h=D.children[P],M=!1):h=null:(m.push(h),A.push(P),P=0,D=h,h=h.children[0])}return this};H.toJSON=function(){return this.data};H.fromJSON=function(g){this.data=g;return this};H._all=function(g,h){for(K.clear();g;){var D;if(!0===g.leaf)for(const P of g.children)h(P);else K.pushArray(g.children);g=null!=(D=K.pop())?
D:null}};H._build=function(g,h,D,P){var M=D-h+1,N=this._maxEntries;if(M<=N)return g=new R(g.slice(h,D+1)),y(g,this._toBBox),g;P||(P=Math.ceil(Math.log(M)/Math.log(N)),N=Math.ceil(M/N**(P-1)));const q=new O([]);q.height=P;M=Math.ceil(M/N);N=M*Math.ceil(Math.sqrt(N));for(c(g,h,D,N,this.compareMinX);h<=D;h+=N){const S=Math.min(h+N-1,D);c(g,h,S,M,this.compareMinY);for(let Y=h;Y<=S;Y+=M)q.children.push(this._build(g,Y,Math.min(Y+M-1,S),P-1))}y(q,this._toBBox);return q};H._chooseSubtree=function(g,h,D,
P){for(;;){P.push(h);if(!0===h.leaf||P.length-1===D)break;let M=Infinity,N=Infinity,q=void 0;for(let S=0,Y=h.children.length;S<Y;S++){const V=h.children[S],ja=G(V),ma=(Math.max(V.maxX,g.maxX)-Math.min(V.minX,g.minX))*(Math.max(V.maxY,g.maxY)-Math.min(V.minY,g.minY))-ja;ma<N?(N=ma,M=ja<M?ja:M,q=V):ma===N&&ja<M&&(M=ja,q=V)}h=q||h.children[0]}return h};H._insert=function(g,h,D){var P=this._toBBox;D=D?g:P(g);m.clear();P=this._chooseSubtree(D,this.data,h,m);P.children.push(g);for(n(P,D);0<=h;)if(m.data[h].children.length>
this._maxEntries)this._split(m,h),h--;else break;this._adjustParentBBoxes(D,m,h)};H._split=function(g,h){const D=g.data[h];var P=D.children.length;const M=this._minEntries;this._chooseSplitAxis(D,M,P);(P=this._chooseSplitIndex(D,M,P))?(P=D.children.splice(P,D.children.length-P),P=D.leaf?new R(P):new O(P),P.height=D.height,y(D,this._toBBox),y(P,this._toBBox),h?g.data[h-1].children.push(P):this._splitRoot(D,P)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};H._splitRoot=
function(g,h){this.data=new O([g,h]);this.data.height=g.height+1;y(this.data,this._toBBox)};H._chooseSplitIndex=function(g,h,D){let P,M,N=void 0;P=M=Infinity;for(let S=h;S<=D-h;S++){var q=v(g,0,S,this._toBBox);const Y=v(g,S,D,this._toBBox),V=Math.max(0,Math.min(q.maxX,Y.maxX)-Math.max(q.minX,Y.minX))*Math.max(0,Math.min(q.maxY,Y.maxY)-Math.max(q.minY,Y.minY));q=G(q)+G(Y);V<P?(P=V,N=S,M=q<M?q:M):V===P&&q<M&&(M=q,N=S)}return N};H._chooseSplitAxis=function(g,h,D){const P=g.leaf?this.compareMinX:r,M=
g.leaf?this.compareMinY:u,N=this._allDistMargin(g,h,D,P);h=this._allDistMargin(g,h,D,M);N<h&&g.children.sort(P)};H._allDistMargin=function(g,h,D,P){g.children.sort(P);P=this._toBBox;var M=v(g,0,h,P);const N=v(g,D-h,D,P);let q=z(M)+z(N);for(let S=h;S<D-h;S++){const Y=g.children[S];n(M,g.leaf?P(Y):Y);q+=z(M)}for(D=D-h-1;D>=h;D--)M=g.children[D],n(N,g.leaf?P(M):M),q+=z(N);return q};H._adjustParentBBoxes=function(g,h,D){for(;0<=D;D--)n(h.data[D],g)};H._condense=function(g){for(let h=g.length-1;0<=h;h--){const D=
g.data[h];if(0===D.children.length)if(0<h){const P=g.data[h-1],M=P.children;M.splice(B.indexOf(M,D,M.length,P.indexHint),1)}else this.clear();else y(D,this._toBBox)}};H._initFormat=function(g){const h=["return a"," - b",";"];this.compareMinX=new Function("a","b",h.join(g[0]));this.compareMinY=new Function("a","b",h.join(g[1]));this._toBBox=new Function("a","return {minX: a"+g[0]+", minY: a"+g[1]+", maxX: a"+g[2]+", maxY: a"+g[3]+"};")};return w}();const L=new p,K=new p,m=new p,A=new p({deallocator:void 0});
p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let E=function(w){function H(){var g=w.apply(this,arguments)||this;g.height=1;g.indexHint=new B.PositionHint;return g}a._inheritsLoose(H,w);return H}(p),R=function(w){function H(g){var h=w.call(this)||this;h.children=g;h.leaf=!0;return h}a._inheritsLoose(H,w);return H}(E),O=function(w){function H(g){var h=w.call(this)||this;h.children=g;h.leaf=!1;return h}a._inheritsLoose(H,w);return H}(E);b.BBox=p;b.PooledRBush=l;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(b){var a={exports:{}};(function(B){(function(J){J=J();void 0!==J&&(B.exports=J)})(function(){function J(y,v,n,r,u){for(;r>n;){if(600<r-n){var G=r-n+1,z=v-n+1,e=Math.log(G),F=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*F*(G-F)/G)*(0>z-G/2?-1:1);J(y,v,Math.max(n,Math.floor(v-z*F/G+e)),Math.min(r,Math.floor(v+(G-z)*F/G+e)),u)}G=y[v];z=n;F=r;p(y,n,v);for(0<u(y[r],G)&&p(y,n,r);z<F;){p(y,
z,F);z++;for(F--;0>u(y[z],G);)z++;for(;0<u(y[F],G);)F--}0===u(y[n],G)?p(y,n,F):(F++,p(y,F,r));F<=v&&(n=F+1);v<=F&&(r=F-1)}}function p(y,v,n){var r=y[v];y[v]=y[n];y[n]=r}function k(y,v){return y<v?-1:y>v?1:0}return function(y,v,n,r,u){J(y,v,n||0,r||y.length-1,u||k)}})})(a);b.quickselect=a.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(b,a,B,J,p){b.optimizedFeatureQueryEngineAdapter=
{getObjectId(k){return k.objectId},getAttributes(k){return k.attributes},getAttribute(k,y){return k.attributes[y]},cloneWithGeometry(k,y){return new J.OptimizedFeature(y,k.attributes,null,k.objectId)},getGeometry(k){return k.geometry},getCentroid(k,y){a.isNone(k.centroid)&&(k.centroid=B.getCentroidOptimizedGeometry(new p,k.geometry,y.hasZ,y.hasM));return k.centroid}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(b,a){function B(p,k,y,v,n,r,u=1){r=n?r?4:3:r?3:2;let G=y,z=y+r,e=0,F=0,c=y=0,l=0;for(let L=0,K=v-1;L<K;L++,G+=r,z+=r){v=k[G];const m=k[G+1],A=k[G+2],E=k[z],R=k[z+1],O=k[z+2];let w=v*R-E*m;c+=w;e+=(v+E)*w;F+=(m+R)*w;n&&(w=v*O-E*A,y+=(A+O)*w,l+=w);v<p[0]&&(p[0]=v);v>p[1]&&(p[1]=v);m<p[2]&&(p[2]=m);m>p[3]&&(p[3]=m);n&&(A<p[4]&&(p[4]=A),A>p[5]&&(p[5]=A))}0<c*u&&(c*=-1);0<l*u&&(l*=-1);if(!c)return null;p=[e,F,.5*c];n&&(p[3]=y,p[4]=.5*l);return p}function J(p,k,y,v,n){n=v?n?
4:3:n?3:2;let r=k,u=k+n,G=0,z=0,e=0,F=0;for(let K=0,m=y-1;K<m;K++,r+=n,u+=n){var c=p[r];const A=p[r+1],E=p[r+2],R=p[u],O=p[u+1],w=p[u+2];if(v){{var l=R-c;var L=O-A;const H=w-E;l=Math.sqrt(l*l+L*L+H*H)}}else l=R-c,L=O-A,l=Math.sqrt(l*l+L*L);l&&(G+=l,v?(c=[c+.5*(R-c),A+.5*(O-A),E+.5*(w-E)],z+=l*c[0],e+=l*c[1],F+=l*c[2]):(c=[c+.5*(R-c),A+.5*(O-A)],z+=l*c[0],e+=l*c[1]))}return 0<G?v?[z/G,e/G,F/G]:[z/G,e/G]:0<y?v?[p[k],p[k+1],p[k+2]]:[p[k],p[k+1]]:null}b.getCentroidOptimizedGeometry=function(p,k,y,v,n){if(a.isNone(k)||
!k.lengths.length)return null;const r="upperLeft"===(null==n?void 0:n.originPosition)?-1:1;p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);n=p.coords;const u=[],G=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:z,coords:e}=k,F=y?v?4:3:v?3:2;let c=0;for(var l of z){const L=
B(G,e,c,l,y,v,r);L&&u.push(L);c+=l*F}u.sort((L,K)=>{let m=r*L[2]-r*K[2];0===m&&y&&(m=L[4]-K[4]);return m});u.length&&(l=6*u[0][2],n[0]=u[0][0]/l,n[1]=u[0][1]/l,y&&(l=6*u[0][4],n[2]=0!==l?u[0][3]/l:0),n[0]<G[0]||n[0]>G[1]||n[1]<G[2]||n[1]>G[3]||y&&(n[2]<G[4]||n[2]>G[5]))&&(n.length=0);if(!n.length)if(k=k.lengths[0]?J(e,0,z[0],y,v):null)n[0]=k[0],n[1]=k[1],y&&2<k.length&&(n[2]=k[2]);else return null;return p};b.lineCentroid=J;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K,m,A,E,R,O,w){function H(q){return q.every(S=>"exceedslimit"!==S.statisticType)}const g=new y.MemCacheStorage(2E6);let h=0,D=function(){function q(Y){this.capabilities={query:L.queryCapabilities};this.geometryType=Y.geometryType;this.hasM=Y.hasM;this.hasZ=Y.hasZ;this.objectIdField=Y.objectIdField;this.spatialReference=Y.spatialReference;this.definitionExpression=Y.definitionExpression;this.featureStore=Y.featureStore;this.aggregateAdapter=Y.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=Y.timeInfo;Y.cacheSpatialQueries&&(this._geometryQueryCache=new y.MemCache(h++ +"$$",g));this.fieldsIndex=new R(Y.fields);Y.scheduler&&Y.priority&&(this._frameTask=Y.scheduler.registerTask(Y.priority))}var S=q.prototype;S.destroy=function(){this._frameTask=k.removeMaybe(this._frameTask);this.clearCache();k.destroyMaybe(this._geometryQueryCache);this._changeHandle=k.removeMaybe(this._changeHandle);k.destroyMaybe(this.fieldsIndex)};
S.clearCache=function(){var Y;null==(Y=this._geometryQueryCache)?void 0:Y.clear();this._timeExtent=this._allItems=null};S.executeQuery=function(){var Y=a._asyncToGenerator(function*(V,ja){try{return(yield this._executeQuery(V,{},ja)).createQueryResponse()}catch(ma){if(ma!==E.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new K.QueryEngineResult([],V,this)).createQueryResponse()}});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForCount=function(){var Y=a._asyncToGenerator(function*(V=
{},ja){try{return(yield this._executeQuery(V,{returnGeometry:!1,returnCentroid:!1,outSR:null},ja)).createQueryResponseForCount()}catch(ma){if(ma!==E.QUERY_ENGINE_EMPTY_RESULT)throw ma;return 0}});return function(){return Y.apply(this,arguments)}}();S.executeQueryForExtent=function(){var Y=a._asyncToGenerator(function*(V,ja){const ma=V.outSR;try{const X=yield this._executeQuery(V,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),na=X.size;if(!na)return{count:0,extent:null};n.set(M,n.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(X.items,wa=>n.expandWithAABB(M,wa),P);const oa={xmin:M[0],ymin:M[1],xmax:M[3],ymax:M[4],spatialReference:E.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(M[2])&&isFinite(M[5])&&(oa.zmin=M[2],oa.zmax=M[5]);const qa=l.project(oa,X.spatialReference,ma);qa.spatialReference=E.cleanFromGeometryEngine(ma||this.spatialReference);if(0===qa.xmax-qa.xmin){const wa=v.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=wa;qa.xmax+=wa}if(0===qa.ymax-qa.ymin){const wa=
v.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=wa;qa.ymax+=wa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const wa=v.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=wa;qa.zmax+=wa}return{count:na,extent:qa}}catch(X){if(X===E.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw X;}});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForIds=function(){var Y=a._asyncToGenerator(function*(V,ja){return this.executeQueryForIdSet(V,ja).then(ma=>
Array.from(ma))});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForIdSet=function(){var Y=a._asyncToGenerator(function*(V,ja){try{const ma=yield this._executeQuery(V,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),X=ma.items,na=new Set;yield this._reschedule(()=>{for(const oa of X)na.add(ma.featureAdapter.getObjectId(oa))},ja);return na}catch(ma){if(ma===E.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForSnapping=
function(){var Y=a._asyncToGenerator(function*(V,ja){const {point:ma,distance:X,types:na}=V;if(na===K.SnappingTypes.NONE)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(V.query),ja),qa=!e.equals(ma.spatialReference,this.spatialReference);qa&&(yield l.checkProjectionSupport(ma.spatialReference,this.spatialReference));var wa="number"===typeof X?X:X.x,Ma="number"===typeof X?X:X.y;wa={xmin:ma.x-wa,xmax:ma.x+wa,ymin:ma.y-Ma,ymax:ma.y+Ma,spatialReference:ma.spatialReference};
wa=qa?l.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ma=(yield z.normalizeCentralMeridian(G.fromJSON(ma),null,{signal:ja}))[0];const Ja=(yield z.normalizeCentralMeridian(G.fromJSON(wa),null,{signal:ja}))[0];if(k.isNone(Ma)||k.isNone(Ja))return{candidates:[]};const La=new K.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),oa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(La),ja);yield this._reschedule(()=>this._executeTimeQuery(La),ja);yield this._reschedule(()=>
this._executeAttributesQuery(La),ja);ja=Ma.toJSON();ja=qa?l.project(ja,this.spatialReference):ja;return La.createSnappingResponse({...V,point:ja,distance:qa?Math.max(wa.xmax-wa.xmin,wa.ymax-wa.ymin)/2:X},ma.spatialReference)});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForLatestObservations=function(){var Y=a._asyncToGenerator(function*(V,ja){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new J("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:V,timeInfo:this.timeInfo});try{const ma=yield this._executeQuery(V,{},ja);yield this._reschedule(()=>this._filterLatest(ma),ja);return ma.createQueryResponse()}catch(ma){if(ma!==E.QUERY_ENGINE_EMPTY_RESULT)throw ma;return(new K.QueryEngineResult([],V,this)).createQueryResponse()}});return function(V,ja){return Y.apply(this,arguments)}}();S.executeQueryForSummaryStatistics=function(){var Y=a._asyncToGenerator(function*(V={},ja,ma){const {field:X,normalizationField:na,valueExpression:oa}=ja;
return(yield this._getQueryEngineResultForStats(V,{field:X,normalizationField:na,valueExpression:oa},ma)).createSummaryStatisticsResponse(ja)});return function(){return Y.apply(this,arguments)}}();S.executeQueryForUniqueValues=function(){var Y=a._asyncToGenerator(function*(V={},ja,ma){const {field:X,valueExpression:na}=ja;return(yield this._getQueryEngineResultForStats(V,{field:X,valueExpression:na},ma)).createUniqueValuesResponse(ja)});return function(){return Y.apply(this,arguments)}}();S.executeQueryForClassBreaks=
function(){var Y=a._asyncToGenerator(function*(V={},ja,ma){const {field:X,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(V,{field:X,normalizationField:na,valueExpression:oa},ma)).createClassBreaksResponse(ja)});return function(){return Y.apply(this,arguments)}}();S.executeQueryForHistogram=function(){var Y=a._asyncToGenerator(function*(V={},ja,ma){const {field:X,normalizationField:na,valueExpression:oa}=ja;return(yield this._getQueryEngineResultForStats(V,
{field:X,normalizationField:na,valueExpression:oa},ma)).createHistogramResponse(ja)});return function(){return Y.apply(this,arguments)}}();S._schedule=function(){var Y=a._asyncToGenerator(function*(V,ja){return k.isSome(this._frameTask)?this._frameTask.schedule(V,ja):V(w.noBudget)});return function(V,ja){return Y.apply(this,arguments)}}();S._reschedule=function(){var Y=a._asyncToGenerator(function*(V,ja){return k.isSome(this._frameTask)?this._frameTask.reschedule(V,ja):V(w.noBudget)});return function(V,
ja){return Y.apply(this,arguments)}}();S._getAll=function(Y){k.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new K.QueryEngineResult(this._allItems,Y,this)};S._executeQuery=function(){var Y=a._asyncToGenerator(function*(V,ja,ma){V=p.clone(V);V=yield this._schedule(()=>E.normalizeQuery(V,this.definitionExpression,this.spatialReference),ma);V=yield this._reschedule(()=>this._checkQuerySupport(V),ma);V={...V,...ja};const X=yield this._reschedule(()=>this._executeSceneFilterQuery(V,
ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(V,X,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),ma);return na});return function(V,ja,ma){return Y.apply(this,arguments)}}();S._executeSceneFilterQuery=function(){var Y=a._asyncToGenerator(function*(V,ja){var ma=this;if(k.isNone(V.sceneFilter))return null;
const {outSR:X,returnGeometry:na,returnCentroid:oa}=V;var qa=this.featureStore.featureSpatialReference,wa=V.sceneFilter.geometry;const Ma=k.isNone(qa)||e.equals(qa,wa.spatialReference)?wa:l.project(wa,qa);if(!Ma)return null;qa=na||oa;qa=e.isValid(X)&&!e.equals(this.spatialReference,X)&&qa?function(){var f=a._asyncToGenerator(function*(C){return ma._project(C,X)});return function(C){return f.apply(this,arguments)}}():f=>f;const Ja=this.featureAdapter;wa=this._searchFeatures(this._getQueryBBoxes(Ma));
if("disjoint"===V.sceneFilter.spatialRelationship){if(!wa.length)return null;const f=new Set;for(var La of wa)f.add(Ja.getObjectId(La));const C=yield this._reschedule(()=>this.featureStore.toArray(),ja);La=yield this._reschedule(a._asyncToGenerator(function*(){const ha=yield m.getSpatialQueryOperator("esriSpatialRelDisjoint",Ma,ma.geometryType,ma.hasZ,ma.hasM),x=yield ma._runSpatialFilter(C,T=>!f.has(Ja.getObjectId(T))||ha(Ja.getGeometry(T)),ja);return new K.QueryEngineResult(x,V,ma)}),ja);return qa(La)}if(!wa.length)return new K.QueryEngineResult([],
V,this);if(this._canExecuteSinglePass(Ma,V))return qa(new K.QueryEngineResult(wa,V,this));const Za=yield m.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);La=yield this._runSpatialFilter(wa,f=>Za(Ja.getGeometry(f)),ja);return qa(new K.QueryEngineResult(La,V,this))});return function(V,ja){return Y.apply(this,arguments)}}();S._executeGeometryQuery=function(){var Y=a._asyncToGenerator(function*(V,ja,ma){var X=this;if(k.isSome(ja)&&0===ja.items.length)return ja;
V=k.isSome(ja)?ja.query:V;const {geometry:na,outSR:oa,spatialRel:qa,returnGeometry:wa,returnCentroid:Ma}=V;var Ja=this.featureStore.featureSpatialReference;const La=!na||k.isNone(Ja)||e.equals(Ja,na.spatialReference)?na:l.project(na,Ja),Za=wa||Ma,f=e.isValid(oa)&&!e.equals(this.spatialReference,oa),C=this._geometryQueryCache&&k.isNone(ja)?f&&Za?JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:na,spatialRelationship:qa}):
null;Ja=C?this._geometryQueryCache.get(C):null;if(k.isSome(Ja))return new K.QueryEngineResult(Ja,V,this);Ja=function(){var ba=a._asyncToGenerator(function*(ka){f&&Za&&(yield X._project(ka,oa));C&&X._geometryQueryCache.put(C,ka.items,ka.items.length+1);return ka});return function(ka){return ba.apply(this,arguments)}}();if(!La)return Ja(k.isSome(ja)?ja:this._getAll(V));const ha=this.featureAdapter;let x=this._searchFeatures(this._getQueryBBoxes(na));if("esriSpatialRelDisjoint"===qa){if(!x.length)return Ja(k.isSome(ja)?
ja:this._getAll(V));const ba=new Set;for(var T of x)ba.add(ha.getObjectId(T));const ka=k.isSome(ja)?ja.items:yield this._reschedule(()=>this.featureStore.toArray(),ma);T=yield this._reschedule(a._asyncToGenerator(function*(){const ia=yield m.getSpatialQueryOperator(qa,La,X.geometryType,X.hasZ,X.hasM),U=yield X._runSpatialFilter(ka,W=>!ba.has(ha.getObjectId(W))||ia(ha.getGeometry(W)),ma);return new K.QueryEngineResult(U,V,X)}),ma);return Ja(T)}if(k.isSome(ja)){const ba=new B.PositionHint;x=x.filter(ka=>
0<=B.indexOf(ja.items,ka,ja.items.length,ba))}if(!x.length)return Ja=new K.QueryEngineResult([],V,this),C&&this._geometryQueryCache.put(C,Ja.items,1),Ja;if(this._canExecuteSinglePass(La,V))return Ja(new K.QueryEngineResult(x,V,this));const aa=yield m.getSpatialQueryOperator(qa,La,this.geometryType,this.hasZ,this.hasM);T=yield this._runSpatialFilter(x,ba=>aa(ha.getGeometry(ba)),ma);return Ja(new K.QueryEngineResult(T,V,this))});return function(V,ja,ma){return Y.apply(this,arguments)}}();S._executeAggregateIdsQuery=
function(Y){if(0!==Y.items.length&&Y.query.aggregateIds&&Y.query.aggregateIds.length&&!k.isNone(this.aggregateAdapter)){var V=new Set;for(const ma of Y.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ma).forEach(X=>V.add(X));var ja=this.featureAdapter.getObjectId;Y.items=Y.items.filter(ma=>V.has(ja(ma)))}};S._executeObjectIdsQuery=function(Y){if(0!==Y.items.length&&Y.query.objectIds&&Y.query.objectIds.length){var V=new Set(Y.query.objectIds),ja=this.featureAdapter.getObjectId;Y.items=
Y.items.filter(ma=>V.has(ja(ma)))}};S._executeTimeQuery=function(Y){if(0!==Y.items.length){var V=A.getTimeOperator(this.timeInfo,Y.query.timeExtent,this.featureAdapter);k.isNone(V)||(Y.items=Y.items.filter(V))}};S._executeAttributesQuery=function(Y){if(0!==Y.items.length){var V=c.getWhereClause(Y.query.where,this.fieldsIndex);if(V){if(!V.isStandardized)throw new TypeError("Where clause is not standardized");Y.items=Y.items.filter(ja=>V.testFeature(ja,this.featureAdapter))}}};S._runSpatialFilter=function(){var Y=
a._asyncToGenerator(function*(V,ja,ma){var X=this;if(!ja)return V;if(k.isNone(this._frameTask))return V.filter(wa=>ja(wa));let na=0;const oa=[],qa=function(){var wa=a._asyncToGenerator(function*(Ma){for(;na<V.length;){const Ja=V[na++];ja(Ja)&&(oa.push(Ja),Ma.madeProgress());Ma.done&&(yield X._reschedule(La=>qa(La),ma))}});return function(Ma){return wa.apply(this,arguments)}}();return this._reschedule(wa=>qa(wa),ma).then(()=>oa)});return function(V,ja,ma){return Y.apply(this,arguments)}}();S._filterLatest=
function(Y){const {trackIdField:V,startTimeField:ja,endTimeField:ma}=this.timeInfo,X=ma||ja,na=new Map,oa=this.featureAdapter.getAttribute;for(const qa of Y.items){const wa=oa(qa,V),Ma=oa(qa,X),Ja=na.get(wa);(!Ja||Ma>oa(Ja,X))&&na.set(wa,qa)}Y.items=Array.from(na.values())};S._canExecuteSinglePass=function(Y,V){({spatialRel:V}=V);return m.canQueryWithRBush(Y)&&("esriSpatialRelEnvelopeIntersects"===V||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===V||"esriSpatialRelContains"===
V||"esriSpatialRelWithin"===V))};S._project=function(){var Y=a._asyncToGenerator(function*(V,ja){if(!ja||e.equals(this.spatialReference,ja))return V;const ma=this.featureAdapter;ja=yield l.projectMany(V.items.map(X=>E.getGeometry(this.geometryType,this.hasZ,this.hasM,ma.getGeometry(X))),this.spatialReference,ja);V.items=ja.map((X,na)=>ma.cloneWithGeometry(V.items[na],F.convertFromGeometry(X,this.hasZ,this.hasM)));return V});return function(V,ja){return Y.apply(this,arguments)}}();S._getQueryBBoxes=
function(Y){if(m.canQueryWithRBush(Y)){if(G.isExtent(Y))return[r.fromValues(Y.xmin,Y.ymin,Y.xmax,Y.ymax)];if(G.isPolygon(Y))return Y.rings.map(V=>r.fromValues(Math.min(V[0][0],V[2][0]),Math.min(V[0][1],V[2][1]),Math.max(V[0][0],V[2][0]),Math.max(V[0][1],V[2][1])))}return[u.getBoundsXY(r.create(),Y)]};S._searchFeatures=function(Y){for(const V of Y)this.featureStore.forEachInBounds(V,ja=>N.add(ja));Y=Array.from(N.values());N.clear();return Y};S._checkStatisticsSupport=function(){var Y=a._asyncToGenerator(function*(V,
ja){if(0>V.distance||null!=V.geometryPrecision||V.multipatchOption||V.pixelSize||V.relationParam||V.text||V.outStatistics||V.groupByFieldsForStatistics||V.having||V.orderByFields)throw new J("feature-store:unsupported-query","Unsupported query options",{query:V});this._checkAttributesQuerySupport(V);return Promise.all([this._checkStatisticsParamsSupport(ja),m.checkSpatialQuerySupport(V,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,V.outSR)]).then(()=>V)});
return function(V,ja){return Y.apply(this,arguments)}}();S._checkStatisticsParamsSupport=function(){var Y=a._asyncToGenerator(function*(V){var ja=[];V.valueExpression&&({arcadeUtils:ja}=yield O.loadArcade(),ja=ja.extractFieldNames(V.valueExpression));V.field&&ja.push(V.field);V.normalizationField&&ja.push(V.normalizationField);if(!ja.length)throw new J("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:V});c.validateFields(this.fieldsIndex,ja,"params contains missing fields")});
return function(V){return Y.apply(this,arguments)}}();S._checkQuerySupport=function(){var Y=a._asyncToGenerator(function*(V){if(0>V.distance||null!=V.geometryPrecision||V.multipatchOption||V.pixelSize||V.relationParam||V.text)throw new J("feature-store:unsupported-query","Unsupported query options",{query:V});this._checkAttributesQuerySupport(V);this._checkStatisticsQuerySupport(V);return Promise.all([m.checkSpatialQuerySupport(V,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,
V.outSR)]).then(()=>V)});return function(V){return Y.apply(this,arguments)}}();S._checkAttributesQuerySupport=function(Y){const {outFields:V,orderByFields:ja,returnDistinctValues:ma,outStatistics:X}=Y,na=X?X.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const oa=ja.map(qa=>{const wa=qa.toLowerCase();return wa.includes(" asc")?wa.split(" asc")[0]:wa.includes(" desc")?wa.split(" desc")[0]:qa}).filter(qa=>!na.includes(qa));c.validateFields(this.fieldsIndex,
oa,"orderByFields contains missing fields")}if(V&&0<V.length)c.validateFields(this.fieldsIndex,V,"outFields contains missing fields");else if(ma)throw new J("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:Y});c.validateWhere(this.fieldsIndex,Y.where)};S._checkStatisticsQuerySupport=function(Y){const {outStatistics:V,groupByFieldsForStatistics:ja,having:ma}=Y;var X=ja&&ja.length,na=V&&V.length;if(ma){if(!X||!na)throw new J("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:Y});c.validateHaving(this.fieldsIndex,ma,V)}if(na&&H(V)){na=V.map(oa=>oa.onStatisticField).filter(Boolean);c.validateFields(this.fieldsIndex,na,"onStatisticFields contains missing fields");X&&c.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const oa of V){const {onStatisticField:qa,statisticType:wa}=oa;if(("percentile_disc"===wa||"percentile_cont"===wa)&&"statisticParameters"in
oa){if({statisticParameters:X}=oa,!X)throw new J("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:oa,query:Y});}else if("count"!==wa&&qa&&c.hasInvalidFieldType(qa,this.fieldsIndex))throw new J("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:oa,query:Y});}}};S._getQueryEngineResultForStats=function(){var Y=a._asyncToGenerator(function*(V,ja,ma){V=p.clone(V);try{V=yield this._schedule(()=>E.normalizeQuery(V,
this.definitionExpression,this.spatialReference),ma);V=yield this._reschedule(()=>this._checkStatisticsSupport(V,ja),ma);const X=yield this._reschedule(()=>this._executeSceneFilterQuery(V,ma),ma),na=yield this._reschedule(()=>this._executeGeometryQuery(V,X,ma),ma);yield this._reschedule(()=>this._executeAggregateIdsQuery(na),ma);yield this._reschedule(()=>this._executeObjectIdsQuery(na),ma);yield this._reschedule(()=>this._executeTimeQuery(na),ma);yield this._reschedule(()=>this._executeAttributesQuery(na),
ma);return na}catch(X){if(X!==E.QUERY_ENGINE_EMPTY_RESULT)throw X;return new K.QueryEngineResult([],V,this)}});return function(V,ja,ma){return Y.apply(this,arguments)}}();a._createClass(q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const Y=this.featureStore.fullBounds;return k.isNone(Y)?null:{xmin:Y[0],ymin:Y[1],xmax:Y[2],ymax:Y[3],spatialReference:E.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=A.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return q}();const P=n.create(),M=n.create(),N=new Set;b.Feature=function(q,S=null,Y,V,ja){this.attributes=q;this.geometry=Y;this.centroid=V;this.filterFlags=ja;this.groupId=-1;this.displayId=S};b.QueryEngine=D;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(b,a,B,J){b.RemoveMode=void 0;(function(y){y[y.ALL=0]="ALL";y[y.SOME=1]="SOME"})(b.RemoveMode||(b.RemoveMode={}));let p=function(){function y(n,r,u){this._namespace=n;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";u&&(this._storage.registerRemoveFunc(this._namespace,u),this._removeFunc=!0)}var v=y.prototype;v.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};v.resetHitRate=function(){this._hit=this._miss=0};v.put=function(n,r,u,G=0){this._storage.put(this._namespace+n,r,u,G)};v.get=function(n){n=this._storage.get(this._namespace+n);void 0===n?++this._miss:++this._hit;return n};v.pop=function(n){n=this._storage.pop(this._namespace+n);void 0===n?++this._miss:++this._hit;return n};v.updateSize=function(n,r,u){this._storage.updateSize(this._namespace+n,r,u)};v.clear=function(){this._storage.clear(this._namespace)};
v.clearAll=function(){this._storage.clearAll()};v.getStats=function(){return this._storage.getStats()};v.resetStats=function(){this._storage.resetStats()};a._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),k=function(){function y(n=10485760){this._maxSize=n;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new J;this._users=new J}var v=y.prototype;v.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};v.register=function(n){this._users.push(n)};v.deregister=function(n){this._users.removeUnordered(n)};v.registerRemoveFunc=function(n,r){this._removeFuncs.push([n,r])};v.deregisterRemoveFunc=function(n){this._removeFuncs.filterInPlace(r=>r[0]!==n)};v.put=function(n,r,u,G){const z=this._db.get(n);z&&(this._size-=
z.size,this._db.delete(n),z.entry!==r&&this._notifyRemove(n,z.entry,b.RemoveMode.ALL));u>this._maxSize?this._notifyRemove(n,r,b.RemoveMode.ALL):void 0===r?console.warn("Refusing to cache undefined entry "):!u||0>u?console.warn("Refusing to cache entry with invalid size "+u):(G=1+Math.max(G,-3)- -3,this._db.set(n,{entry:r,size:u,lifetime:G,lives:G}),this._size+=u,this._checkSizeLimit())};v.updateSize=function(n,r,u){const G=this._db.get(n);if(G&&G.entry===r){for(this._size-=G.size;u>this._maxSize;)if(u=
this._notifyRemove(n,r,b.RemoveMode.SOME),!(B.isSome(u)&&0<u)){this._db.delete(n);return}G.size=u;this._size+=u;this._checkSizeLimit()}};v.pop=function(n){const r=this._db.get(n);if(r)return this._size-=r.size,this._db.delete(n),++this._hit,r.entry;++this._miss};v.get=function(n){const r=this._db.get(n);if(void 0===r)++this._miss;else return this._db.delete(n),r.lives=r.lifetime,this._db.set(n,r),++this._hit,r.entry};v.getStats=function(){const n={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},u=[];this._db.forEach((e,F)=>{const c=e.lifetime;u[c]=(u[c]||0)+e.size;this._users.forAll(l=>{l=l.namespace;F.startsWith(l)&&(r[l]=(r[l]||0)+e.size)})});const G={};this._users.forAll(e=>{const F=e.namespace;!isNaN(e.hitRate)&&0<e.hitRate?(r[F]=r[F]||0,G[F]=Math.round(100*e.hitRate)+"%"):G[F]="0%"});var z=Object.keys(r);z.sort((e,F)=>r[F]-r[e]);z.forEach(e=>n[e]=Math.round(r[e]/2**20)+"MB / "+G[e]);
for(z=u.length-1;0<=z;--z){const e=u[z];e&&(n["Priority "+(z+-3-1)]=Math.round(e/this.size*100)+"%")}return n};v.resetStats=function(){this._hit=this._miss=0;this._users.forAll(n=>n.resetHitRate())};v.clear=function(n){this._db.forEach((r,u)=>{u.startsWith(n)&&(this._size-=r.size,this._db.delete(u),this._notifyRemove(u,r.entry,b.RemoveMode.ALL))})};v.clearAll=function(){this._db.forEach((n,r)=>this._notifyRemove(r,n.entry,b.RemoveMode.ALL));this._size=0;this._db.clear()};v._getHitRate=function(){return this._hit/
(this._hit+this._miss)};v._notifyRemove=function(n,r,u){let G;this._removeFuncs.some(z=>n.startsWith(z[0])?(z=z[1](r,u),"number"===typeof z&&(G=z),!0):!1);return G};v._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [n,r]of this._db){this._db.delete(n);if(1>=r.lives){this._size-=r.size;const u=this._notifyRemove(n,r.entry,b.RemoveMode.SOME);B.isSome(u)&&0<u&&(this._size+=u,r.lives=r.lifetime,r.size=u,this._db.set(n,r))}else--r.lives,this._db.set(n,r);if(this._size<=.9*this.maxSize)break}};
a._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(n){this._maxSize=Math.max(n,0);this._checkSizeLimit()}}]);return y}();b.MIN_PRIORITY=-3;b.MemCache=p;b.MemCacheStorage=k;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(b,a,B,J,p,k,y,v,n){function r(X){X=S[X];if(!X)throw Error("unknown type");return X}function u(X){return q[X].baseUnit}function G(X,na=null){na=na||r(X);return q[na].baseUnit===X}function z(X,na,oa){if(na===oa)return X;const qa=r(na);if(qa!==r(oa))throw Error("incompatible units");X=G(na,qa)?X:X*q[qa].units[na].inBaseUnits;return G(oa,qa)?X:X/q[qa].units[oa].inBaseUnits}function e(X,na){X=z(X,na,"meters");return 3E3>Math.abs(X)?"meters":"kilometers"}function F(X,na){X=z(X,na,"meters");return 1E5>
Math.abs(X)?"meters":"kilometers"}function c(X,na){X=z(X,na,"feet");return 1E3>Math.abs(X)?"feet":"miles"}function l(X,na){X=z(X,na,"feet");return 1E5>Math.abs(X)?"feet":"miles"}function L(X,na){X=z(X,na,"square-meters");return 3E6>Math.abs(X)?"square-meters":"square-kilometers"}function K(X,na){X=z(X,na,"square-feet");return 1E6>Math.abs(X)?"square-feet":"square-miles"}function m(X){return N.fromJSON(X.toLowerCase())||null}function A(X){const na=E(X),oa=X instanceof k?p.getReferenceEllipsoid(X).metersPerDegree:
1E5;return na>=oa?"meters":w(X)}function E(X,na=y.earth.metersPerDegree){return J.unwrapOr(R(X,!0),na)}function R(X,na=!1){let oa,qa,wa=null;null!=X&&("object"===typeof X?(oa=X.wkid,qa=X.wkt):"number"===typeof X?oa=X:"string"===typeof X&&(qa=X));if(oa){if(v.isWKIDFromMars(oa))return y.mars.metersPerDegree;if(v.isWKIDFromMoon(oa))return y.moon.metersPerDegree;wa=D.values[D[oa]];!wa&&na&&M.has(oa)&&(wa=g)}else qa&&(/^PROJCS/i.test(qa)?wa=O(h.exec(qa),wa):/^GEOCCS/i.test(qa)&&(wa=O(P.exec(qa),wa)));
return wa}function O(X,na){return X&&X[1]?parseFloat(X[1].split(",")[1]):na}function w(X){var na=null;if(null!=X)if("object"===typeof X){var oa=X.wkid;var qa=X.wkt}else"number"===typeof X?oa=X:"string"===typeof X&&(qa=X);if(oa)na=D.units[D[oa]];else if(qa&&(X=/^PROJCS/i.test(qa)?h:/^GEOCCS/i.test(qa)?P:null)&&(qa=X.exec(qa))&&qa[1]&&(qa=qa[1],na=(na=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&na[1],!na||!D.units.includes(na)))for(qa=parseFloat(qa.split(",")[1]),na=null,X=D.values,oa=0;oa<X.length;++oa)if(1E-7>
Math.abs(qa-X[oa])){na=D.units[oa];break}return J.isSome(na)?m(na):null}function H(X){X=w(X);if(J.isNone(X))return null;switch(X){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}
const g=y.earth.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,D=n,P=/UNIT\[([^\]]+)\]/i,M=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),N=B.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",
chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});a={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};n={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},
"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(X=>X*X)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const q={length:{baseUnit:"meters",units:a},area:{baseUnit:"square-meters",units:n},volume:{baseUnit:"liters",
units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},S=(()=>{const X=
{};for(const na in q)for(const oa in q[na].units)X[oa]=na;return X})(),Y="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),V=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ja={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",
esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ma={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};a=B.strict()(ja);n=B.strict()(ma);B=B.strict()({...ja,...ma});b.areaUnitFromSpatialReference=
function(X){X=w(X);return J.isNone(X)?null:V.get(X)};b.areaUnitsJSONMap=a;b.baseUnitForUnit=function(X){return u(r(X))};b.baseUnitForUnitType=u;b.convertUnit=z;b.getDefaultUnitForView=function(X){var na;if(J.isNone(X))return"metric";var oa=X.map;if(oa=oa&&"portalItem"in oa?null==(na=oa.portalItem)?void 0:na.portal:null){var qa,wa;switch(null!=(qa=null==oa?void 0:null==(wa=oa.user)?void 0:wa.units)?qa:oa.units){case "metric":return"metric";case "english":return"imperial"}}return J.unwrapOr(H(X.spatialReference),
"metric")};b.getDefaultUnitSystem=H;b.getMetersPerUnit=R;b.getMetersPerUnitForSR=E;b.getMetersPerVerticalUnitForSR=function(X){if(X&&"object"===typeof X&&!v.isEarth(X))return 1;X=E(X);return 1E5<X?1:X};b.getUnitString=w;b.getVerticalUnitStringForSR=A;b.inchesPerMeter=39.37;b.isBaseUnit=G;b.isMeasurementSystem=function(X){return"imperial"===X||"metric"===X};b.lengthToDegrees=function(X,na,oa){return z(X,na,"meters")/(oa*Math.PI/180)};b.lengthUnitFromSpatialReference=function(X){X=w(X);return J.isNone(X)||
!Y.includes(X)?null:X};b.lengthUnitsJSONMap=n;b.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");b.measurementLengthUnits=Y;b.preferredAreaUnit=function(X,na,oa){switch(oa){case "metric":return L(X,na);case "imperial":return K(X,na);default:return oa}};b.preferredImperialAreaUnit=K;b.preferredImperialLengthUnit=c;b.preferredImperialVerticalLengthUnit=l;b.preferredLengthUnit=function(X,
na,oa){switch(oa){case "metric":return e(X,na);case "imperial":return c(X,na);default:return oa}};b.preferredMetricAreaUnit=L;b.preferredMetricLengthUnit=e;b.preferredMetricVerticalLengthUnit=F;b.preferredVerticalLengthUnit=function(X,na,oa){switch(oa){case "metric":return F(X,na);case "imperial":return l(X,na);default:return oa}};b.unitFromRESTJSON=m;b.unitToRESTJSON=function(X){return N.toJSON(X)||null};b.unitType=r;b.unitsJSONMap=B;b.verticalLengthUnitFromSpatialReference=function(X){X=A(X);return J.isNone(X)||
!Y.includes(X)?null:X};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(b,a,B,J){function p(r){return new a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${r.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const k=p(B.earth),y=p(B.mars),v=p(B.moon),n=new a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${B.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});b.SphericalECEFSpatialReference=k;b.SphericalPCPFMars=
y;b.SphericalPCPFMoon=v;b.WGS84ECEFSpatialReference=n;b.createSphericalPCPF=p;b.getReferenceEllipsoid=function(r){return r&&(J.isMars(r)||r===y)?B.mars:r&&(J.isMoon(r)||r===v)?B.moon:B.earth};b.getReferenceEllipsoidFromWKID=function(r){return J.isWKIDFromMars(r)?B.mars:J.isWKIDFromMoon(r)?B.moon:B.earth};b.getSphericalPCPF=function(r){return r&&(J.isMars(r)||r===y)?y:r&&(J.isMoon(r)||r===v)?v:k};b.getSphericalPCPFForEllipsoid=function(r){return r&&r===B.mars?y:r&&r===B.moon?v:k};Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),function(b,a,B,J,p,k,y,v,n,r,u,G,z){function e(E){const R=[];let O=0,w=0;for(let H=0;H<E.length;H++){const g=E[H];
let h=null;for(let D=0;D<g.length;D++)h=g[D],R.push(h),0===D?w=O=h[0]:(O=Math.min(O,h[0]),w=Math.max(w,h[0]));h&&R.push([(O+w)/2,0])}return R}function F(E,R){if(!(E instanceof v||E instanceof y))throw A.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new J("straightLineDensify: the input geometry is neither polyline nor polygon");var O=n.getGeometryParts(E);const w=[];for(const g of O){O=[];w.push(O);O.push([g[0][0],g[0][1]]);for(let h=0;h<g.length-1;h++){const D=
g[h][0],P=g[h][1],M=g[h+1][0],N=g[h+1][1];var H=Math.sqrt((M-D)*(M-D)+(N-P)*(N-P));const q=(N-P)/H,S=(M-D)/H,Y=H/R;if(1<Y){for(let V=1;V<=Y-1;V++){const ja=V*R;O.push([S*ja+D,q*ja+P])}H=(H+Math.floor(Y-1)*R)/2;O.push([S*H+D,q*H+P])}O.push([M,N])}}return"polygon"===E.type?new y({rings:w,spatialReference:E.spatialReference}):new v({paths:w,spatialReference:E.spatialReference})}function c(E,R,O){R&&(E=F(E,1E6),E=u.webMercatorToGeographic(E,!0));O&&(E=n.updatePolyGeometry(E,O));return E}function l(E,
R,O){if(Array.isArray(E)){var w=E[0];w>R?(O=n.offsetMagnitude(w,R),E[0]=w+-2*O*R):w<O&&(R=n.offsetMagnitude(w,O),E[0]=w+-2*R*O)}else w=E.x,w>R?(O=n.offsetMagnitude(w,R),E=E.clone().offset(-2*O*R,0)):w<O&&(R=n.offsetMagnitude(w,O),E=E.clone().offset(-2*R*O,0));return E}function L(E,R){let O=-1;for(let w=0;w<R.cutIndexes.length;w++){const H=R.cutIndexes[w],g=R.geometries[w],h=n.getGeometryParts(g);for(let D=0;D<h.length;D++){const P=h[D];P.some(M=>{if(180>M[0])return!0;M=0;for(var N=0;N<P.length;N++){var q=
P[N][0];M=q>M?q:M}M=Number(M.toFixed(9));M=-360*n.offsetMagnitude(M,180);for(N=0;N<P.length;N++)q=g.getPoint(D,N),g.setPoint(D,N,q.clone().offset(M,0));return!0})}if(H===O)if("polygon"===E[0].type)for(const D of n.getGeometryParts(g))E[H]=E[H].addRing(D);else{if("polyline"===E[0].type)for(const D of n.getGeometryParts(g))E[H]=E[H].addPath(D)}else O=H,E[H]=g}return E}function K(E,R,O){return m.apply(this,arguments)}function m(){m=a._asyncToGenerator(function*(E,R,O){var w;if(!Array.isArray(E))return K([E],
R);R&&"string"!==typeof R&&A.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");R="string"===typeof R?R:null!=(w=null==R?void 0:R.url)?w:B.geometryServiceUrl;let H,g,h;let D=0;var P=[];w=[];for(var M of E)if(k.isNone(M))w.push(M);else{if(!N){var N=M.spatialReference;var q=r.getInfo(N);var S=(H=N.isWebMercator)?102100:4326;g=n.cutParams[S].maxX;h=n.cutParams[S].minX;var Y=n.cutParams[S].plus180Line;S=n.cutParams[S].minus180Line}if(q)if("mesh"===M.type)w.push(M);
else if("point"===M.type)w.push(l(M.clone(),g,h));else if("multipoint"===M.type){var V=M.clone();V.points=V.points.map(ja=>l(ja,g,h));w.push(V)}else if("extent"===M.type)V=M.clone()._normalize(!1,!1,q),w.push(V.rings?new y(V):V);else if(M.extent){V=M.extent;const ja=2*n.offsetMagnitude(V.xmin,h)*g;let ma=0===ja?M.clone():n.updatePolyGeometry(M.clone(),ja);V.offset(ja,0);V.intersects(Y)&&V.xmax!==g?(D=V.xmax>D?V.xmax:D,ma=c(ma,H),P.push(ma),w.push("cut")):V.intersects(S)&&V.xmin!==h?(D=2*V.xmax*g>
D?2*V.xmax*g:D,ma=c(ma,H,360),P.push(ma),w.push("cut")):w.push(ma)}else w.push(M.clone());else w.push(M)}N=n.offsetMagnitude(D,g);q=-90;Y=N;for(M=new v;0<N;)S=-180+360*N,M.addPath([[S,q],[S,-1*q]]),q*=-1,N--;if(0<P.length&&0<Y){N=yield G.cut(R,P,M,O);N=L(P,N);q=[];P=[];for(Y=0;Y<w.length;Y++)M=w[Y],"cut"!==M?P.push(M):(M=N.shift(),S=E[Y],k.isSome(S)&&"polygon"===S.type&&S.rings&&1<S.rings.length&&M.rings.length>=S.rings.length?(q.push(M),P.push("simplify")):P.push(H?u.geographicToWebMercator(M):M));
if(!q.length)return P;w=yield z.simplify(R,q,O);E=[];for(O=0;O<P.length;O++)R=P[O],"simplify"!==R?E.push(R):E.push(H?u.geographicToWebMercator(w.shift()):w.shift());return E}E=[];for(O=0;O<w.length;O++)R=w[O],"cut"!==R?E.push(R):(R=P.shift(),E.push(!0===H?u.geographicToWebMercator(R):R));return E});return m.apply(this,arguments)}const A=p.getLogger("esri.geometry.support.normalizeUtils");b.getDenormalizedExtent=function(E){if(!E)return null;const R=E.extent;if(!R)return null;var O=E.spatialReference&&
r.getInfo(E.spatialReference);if(!O)return R;const [w,H]=O.valid;({width:O}=R);let {xmin:g,xmax:h}=R;[g,h]=[h,g];if("extent"===E.type||0===O||O<=H||O>2*H||g<w||h>H)return R;let D;switch(E.type){case "polygon":if(1<E.rings.length)D=e(E.rings);else return R;break;case "polyline":if(1<E.paths.length)D=e(E.paths);else return R;break;case "multipoint":D=E.points}E=R.clone();for(let P=0;P<D.length;P++){let M=D[P][0];0>M?(M+=H,h=Math.max(M,h)):(M-=H,g=Math.min(M,g))}E.xmin=g;E.xmax=h;return E.width<O?(E.xmin-=
H,E.xmax-=H,E):R};b.normalizeCentralMeridian=K;b.normalizeMapX=function(E,R){if(R=r.getInfo(R)){const [O,w]=R.valid;R=w-O;if(E<O)for(;E<O;)E+=R;if(E>w)for(;E>w;)E-=R}return E};b.straightLineDensify=F;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(b,a,B,J){function p(k){return J.isPolygon(k)?k.rings:k.paths}a={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new a({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:B.WebMercator}),minus180Line:new a({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:B.WGS84}),minus180Line:new a({paths:[[[-180,-180],[-180,180]]],spatialReference:B.WGS84})}};
b.cutParams=a;b.getGeometryParts=p;b.offsetMagnitude=function(k,y){return Math.ceil((k-y)/(2*y))};b.updatePolyGeometry=function(k,y){const v=p(k);for(const n of v)for(const r of n)r[0]+=y;return k};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(b,a,B,J,p,k){function y(){y=
a._asyncToGenerator(function*(v,n,r,u){v="string"===typeof v?p.urlToObject(v):v;const G=n[0].spatialReference;n={...u,query:{...v.query,f:"json",sr:JSON.stringify(G),target:JSON.stringify({geometryType:k.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(r)}};n=yield J(v.path+"/cut",n);const {cutIndexes:z,geometries:e=[]}=n.data;return{cutIndexes:z,geometries:e.map(F=>{F=k.fromJSON(F);F.spatialReference=G;return F})}});return y.apply(this,arguments)}b.cut=function(v,n,r,u){return y.apply(this,
arguments)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(b,a,B,J,p){function k(){k=a._asyncToGenerator(function*(n,r,u){const G="string"===typeof n?J.urlToObject(n):n;n=r[0].spatialReference;const z=p.getJsonType(r[0]);r={...u,query:{...G.query,f:"json",sr:n.wkid?n.wkid:
JSON.stringify(n),geometries:JSON.stringify(y(r))}};r=yield B(G.path+"/simplify",r);return v(r.data,z,n)});return k.apply(this,arguments)}function y(n){return{geometryType:p.getJsonType(n[0]),geometries:n.map(r=>r.toJSON())}}function v(n,r,u){const G=p.getGeometryType(r);return n.map(z=>{z=G.fromJSON(z);z.spatialReference=u;return z})}b.simplify=function(n,r,u){return k.apply(this,arguments)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(b,a,B){function J(n,r){return n?y.get(n,r):null}function p(n,r,u,G=!0){const z=[];for(const e of r)if("*"!==e&&!n.has(e))if(G){r=k(e);try{const F=J(r,n);if(!F)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!F.isStandardized)throw new a("feature-store:unsupported-query","expression is not standard",{clause:F});p(n,F.fieldNames,"expression contains missing fields")}catch(F){if((r=F&&F.details)&&
(r.clause||r.where))throw F;r&&r.missingFields?z.push(...r.missingFields):z.push(e)}}else z.push(e);if(z.length)throw new a("feature-store:unsupported-query",u,{missingFields:z});}function k(n){return n.split(" as ")[0]}const y=new B.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));b.getAliasFromFieldName=function(n){return n.split(" as ")[1]};b.getExpressionFromFieldName=
k;b.getWhereClause=J;b.hasInvalidFieldType=function(n,r){return(n=r.get(n))?!v.has(n.type):!1};b.validateFields=p;b.validateHaving=function(n,r,u){if(!r)return!0;const G=y.get(r,n);if(!G)throw new a("feature-store:unsupported-query","invalid SQL expression",{having:r});if(!G.isAggregate)throw new a("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:r});p(n,G.fieldNames,"having contains missing fields");if(!G.getExpressions().every(z=>{const {aggregateType:e,
field:F}=z,c=n.has(F)&&n.get(F).name;return u.some(l=>{const {onStatisticField:L,statisticType:K}=l;return(n.has(L)&&n.get(L).name)===c&&K.toLowerCase().trim()===e})}))throw new a("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:r});return!0};b.validateWhere=function(n,r){if(!r)return!0;const u=y.get(r,n);if(!u)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!u.isStandardized)throw new a("feature-store:unsupported-query",
"where clause is not standard",{where:r});p(n,u.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(b,a,B){let J=function(){function p(k,y){this._cache=new a(k);this._invalidCache=new a(y)}p.prototype.get=function(k,y){const v=`${y.uid}:${k}`,n=this._cache.get(v);if(n)return n;if(void 0!==this._invalidCache.get(v))return null;
try{const r=B.WhereClause.create(k,y);this._cache.put(v,r);return r}catch{return this._invalidCache.put(v,null),null}};return p}();b.WhereClauseCache=J;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(b){return function(){function a(J,p){this._storage=new b.MemCacheStorage;this._storage.maxSize=J;p&&this._storage.registerRemoveFunc("",p)}var B=a.prototype;B.put=function(J,p){this._storage.put(J,
p,1,1)};B.pop=function(J){return this._storage.pop(J)};B.get=function(J){return this._storage.get(J)};B.clear=function(){this._storage.clearAll()};B.destroy=function(){this._storage.destroy()};return a}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(b,a,B,J,p,k){function y(M,N){M+="";return M.length>=N?M:Array(N-M.length+1).join("0")+M}function v(M,N,q="0",S=
"0",Y="0",V="0",ja="",ma="0",X="0"){return"+"===ja||"-"===ja?(M=`${y(parseInt(M,10),4)}-${y(parseInt(N,10),2)}-${y(parseInt(q,10),2)}`,N="",10>parseFloat(V)&&(N="0"),S=`${y(parseInt(S,10),2)}:${y(parseInt(Y,10),2)}:${N+parseFloat(V).toString()}`,ja=`${ja}${y(parseInt(ma,10),2)}:${y(parseInt(X,10),2)}`,new Date(M+"T"+S+ja)):new Date(parseInt(M,10),parseInt(N,10)-1,parseInt(q,10),parseInt(S,10),parseInt(Y,10),parseFloat(V))}function n(M){let N=E.exec(M);if(null!==N){const [,q,S,Y,V,ja,ma]=N;return v(q,
S,Y,V,ja,ma)}N=R.exec(M);if(null!==N){const [,q,S,Y,V,ja,ma,X,na,oa]=N;return v(q,S,Y,V,ja,ma,X,na,oa)}N=O.exec(M);if(null!==N){const [,q,S,Y,V,ja,ma,X,na]=N;return v(q,S,Y,V,ja,"0",ma,X,na)}N=w.exec(M);if(null!==N){const [,q,S,Y,V,ja]=N;return v(q,S,Y,V,ja)}N=A.exec(M);if(null!==N){const [,q,S,Y]=N;return v(q,S,Y)}throw Error("SQL Invalid Timestamp");}function r(M){M=A.exec(M);if(null===M)throw Error("SQL Invalid Date");const [,N,q,S]=M;return new Date(parseInt(N,10),parseInt(q,10)-1,parseInt(S,
10))}function u(M){return Array.isArray(M)?M:[M]}function G(M){return null!==M?!0!==M:null}function z(M,N){return null!=M&&null!=N?!0===M&&!0===N:!1===M||!1===N?!1:null}function e(M,N){return null!=M&&null!=N?!0===M||!0===N:!0===M||!0===N?!0:null}function F(M,N){if(null==M)return null;let q=!1;for(const S of N)if(null==S)q=null;else if(M===S){q=!0;break}return q}function c(M,N,q){if(null==M)return null;{let S="",Y=D.Normal;for(let V=0;V<N.length;V++){const ja=N.charAt(V);switch(Y){case D.Normal:ja===
q?Y=D.Escaped:S="-[]/{}()*+?.\\^$|".includes(ja)?S+("\\"+ja):"%"===ja?S+".*":"_"===ja?S+".":S+ja;break;case D.Escaped:S="-[]/{}()*+?.\\^$|".includes(ja)?S+("\\"+ja):S+ja,Y=D.Normal}}N=new RegExp("^"+S+"$","m")}return N.test(M)}function l(M){return M instanceof Date?M.valueOf():M}function L(M,N,q){if(null==N||null==q)return null;N=l(N);q=l(q);switch(M){case "\x3c\x3e":return N!==q;case "\x3d":return N===q;case "\x3e":return N>q;case "\x3c":return N<q;case "\x3e\x3d":return N>=q;case "\x3c\x3d":return N<=
q}}function K(M,N,q){if(N instanceof p.SqlInterval)if(q instanceof Date)switch(M){case "+":return new Date(N.valueInMilliseconds()+q.getTime());case "-":return N.valueInMilliseconds()-q.getTime();case "*":return N.valueInMilliseconds()*q.getTime();case "/":return N.valueInMilliseconds()/q.getTime()}else if(q instanceof p.SqlInterval)switch(M){case "+":return p.SqlInterval.createFromMilliseconds(N.valueInMilliseconds()+q.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(N.valueInMilliseconds()-
q.valueInMilliseconds());case "*":return N.valueInMilliseconds()*q.valueInMilliseconds();case "/":return N.valueInMilliseconds()/q.valueInMilliseconds()}else N=N.valueInMilliseconds();else if(q instanceof p.SqlInterval)if(N instanceof Date)switch(M){case "+":return new Date(q.valueInMilliseconds()+N.getTime());case "-":return new Date(N.getTime()-q.valueInMilliseconds());case "*":return N.getTime()*q.valueInMilliseconds();case "/":return N.getTime()/q.valueInMilliseconds()}else q=q.valueInMilliseconds();
else if(N instanceof Date&&"number"===typeof q)switch(q*=864E5,N=N.getTime(),M){case "+":return new Date(N+q);case "-":return new Date(N-q);case "*":return new Date(N*q);case "/":return new Date(N/q)}else if(q instanceof Date&&"number"===typeof N)switch(N*=864E5,q=q.getTime(),M){case "+":return new Date(N+q);case "-":return new Date(N-q);case "*":return new Date(N*q);case "/":return new Date(N/q)}switch(M){case "+":return N+q;case "-":return N-q;case "*":return N*q;case "/":return N/q}}function m(M,
N,q,S){M=S.getAttribute(M,N);return null!=M&&1===q[N]?new Date(M):M}const A=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,R=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,O=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,H=new Set(["current_timestamp","current_date","current_time"]);let g=function(){function M(){}
M.makeBool=function(N){return!0===N};M.featureValue=function(N,q,S,Y){return m(N,q,S,Y)};M.equalsNull=function(N){return null===N};M.applyLike=function(N,q,S){return c(N,q,S)};M.ensureArray=function(N){return u(N)};M.applyIn=function(N,q){return F(N,q)};M.currentDate=function(){const N=new Date;N.setHours(0,0,0,0);return N};M.makeSqlInterval=function(N,q,S){return p.SqlInterval.createFromValueAndQualifer(N,q,S)};M.convertInterval=function(N){return N instanceof p.SqlInterval?N.valueInMilliseconds():
N};M.currentTimestamp=function(){return new Date};M.compare=function(N,q,S){return L(N,q,S)};M.calculate=function(N,q,S){return K(N,q,S)};M.makeComparable=function(N){return l(N)};M.evaluateFunction=function(N,q){return p.evaluateFunction(N,q)};M.lookup=function(N,q){N=q[N];return void 0===N?null:N};M.between=function(N,q){return null==N||null==q[0]||null==q[1]?null:N>=q[0]&&N<=q[1]};M.notbetween=function(N,q){return null==N||null==q[0]||null==q[1]?null:N<q[0]||N>q[1]};M.ternaryNot=function(N){return G(N)};
M.ternaryAnd=function(N,q){return z(N,q)};M.ternaryOr=function(N,q){return e(N,q)};return M}(),h=function(){function M(q,S){this.fieldsIndex=S;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=k.WhereGrammar.parse(q);const {isStandardized:Y,isAggregate:V,referencedFieldNames:ja}=this._extractExpressionInfo(S);this.referencedFieldNames=ja;this.isStandardized=Y;this.isAggregate=V}M.create=function(q,S){return new M(q,S)};var N=M.prototype;N.testSet=function(q,S=P){const Y=
{};for(const V of this.fieldNames)Y[V]=q.map(ja=>S.getAttribute(ja,V));return!!this._evaluateNode(this.parseTree,{attributes:Y},P)};N.calculateValue=function(q,S=P){q=this._evaluateNode(this.parseTree,q,S);return q instanceof p.SqlInterval?q.valueInMilliseconds()/864E5:q};N.calculateValueCompiled=function(q,S=P){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(q,this.parameters,S,this.datefields);if(B("esri-csp-restrictions"))return this.calculateValue(q,S);this._compileMe();
return this.parseTree._compiledVersion(q,this.parameters,S,this.datefields)};N.testFeature=function(q,S=P){return!!this._evaluateNode(this.parseTree,q,S)};N.testFeatureCompiled=function(q,S=P){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(q,this.parameters,S,this.datefields);if(B("esri-csp-restrictions"))return this.testFeature(q,S);this._compileMe();return!!this.parseTree._compiledVersion(q,this.parameters,S,this.datefields)};N.getFunctions=function(){const q=new Set;
this._visitAll(this.parseTree,S=>{"function"===S.type&&q.add(S.name.toLowerCase())});return Array.from(q)};N.getExpressions=function(){const q=new Map;this._visitAll(this.parseTree,S=>{if("function"===S.type){const Y=S.name.toLowerCase();S=S.args.value[0];if("column-reference"===S.type){S=S.column;const V=`${Y}-${S}`;q.has(V)||q.set(V,{aggregateType:Y,field:S})}}});return[...q.values()]};N.getVariables=function(){const q=new Set;this._visitAll(this.parseTree,S=>{"parameter"===S.type&&q.add(S.value.toLowerCase())});
return Array.from(q)};N._compileMe=function(){const q="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",q)).bind(g)};N._extractExpressionInfo=function(q){const S=[],Y=new Set;let V=!0,ja=!0;this._visitAll(this.parseTree,ma=>{switch(ma.type){case "column-reference":{const X=q.get(ma.column);let na,oa;X?na=oa=X.name:(oa=ma.column,na=oa.toLowerCase());!X||"date"!==X.type&&
"esriFieldTypeDate"!==X.type||(this.datefields[X.name]=1);Y.has(na)||(Y.add(na),S.push(oa));ma.column=oa;break}case "function":{const {name:X,args:na}=ma;ma=na.value.length;V&&(V=p.isStandardized(X,ma));ja&&(ja=J.isAggregate(X,ma))}}});return{referencedFieldNames:Array.from(S),isStandardized:V,isAggregate:ja}};N._visitAll=function(q,S){if(null!=q)switch(S(q),q.type){case "when-clause":this._visitAll(q.operand,S);this._visitAll(q.value,S);break;case "case-expression":for(const Y of q.clauses)this._visitAll(Y,
S);"simple"===q.format&&this._visitAll(q.operand,S);null!==q.else&&this._visitAll(q.else,S);break;case "expression-list":for(const Y of q.value)this._visitAll(Y,S);break;case "unary-expression":this._visitAll(q.expr,S);break;case "binary-expression":this._visitAll(q.left,S);this._visitAll(q.right,S);break;case "function":this._visitAll(q.args,S)}};N.evaluateNodeToJavaScript=function(q){switch(q.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(q.value)+", "+JSON.stringify(q.qualifier)+
","+JSON.stringify(q.op)+")";case "case-expression":var S="";if("simple"===q.format){var Y="this.makeComparable("+this.evaluateNodeToJavaScript(q.operand)+")";S="( ";for(let V=0;V<q.clauses.length;V++)S+=" ("+Y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(q.clauses[V].operand)+")) ? ("+this.evaluateNodeToJavaScript(q.clauses[V].value)+") : "}else for(S="( ",Y=0;Y<q.clauses.length;Y++)S+=" this.makeBool("+this.evaluateNodeToJavaScript(q.clauses[Y].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(q.clauses[Y].value)+") : ";S=null!==q.else?S+this.evaluateNodeToJavaScript(q.else):S+"null";return S+=" )";case "parameter":return"this.lookup("+JSON.stringify(q.value.toLowerCase())+",lookups)";case "expression-list":S="[";for(Y of q.value)"["!==S&&(S+=","),S+=this.evaluateNodeToJavaScript(Y);return S+="]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(q.expr)+")";case "binary-expression":switch(q.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")";case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+
this.evaluateNodeToJavaScript(q.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")"}throw Error("Not Supported Operator "+q.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(q.value);case "date":return"(new Date("+r(q.value).getTime().toString()+"))";case "timestamp":return"(new Date("+n(q.value).getTime().toString()+"))";case "current-time":return"date"===
q.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(q.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(q.name)+","+this.evaluateNodeToJavaScript(q.args)+")"}throw Error("Unsupported sql syntax "+q.type);};N._evaluateNode=function(q,S,Y){switch(q.type){case "interval":return S=this._evaluateNode(q.value,S,Y),p.SqlInterval.createFromValueAndQualifer(S,q.qualifier,q.op);case "case-expression":if("simple"===
q.format){var V=l(this._evaluateNode(q.operand,S,Y));for(var ja=0;ja<q.clauses.length;ja++)if(V===l(this._evaluateNode(q.clauses[ja].operand,S,Y)))return this._evaluateNode(q.clauses[ja].value,S,Y)}else for(V=0;V<q.clauses.length;V++)if(!0===this._evaluateNode(q.clauses[V].operand,S,Y))return this._evaluateNode(q.clauses[V].value,S,Y);return null!==q.else?this._evaluateNode(q.else,S,Y):null;case "parameter":return this.parameters[q.value.toLowerCase()];case "expression-list":V=[];for(ja of q.value)V.push(this._evaluateNode(ja,
S,Y));return V;case "unary-expression":return G(this._evaluateNode(q.expr,S,Y));case "binary-expression":switch(q.operator){case "AND":return z(this._evaluateNode(q.left,S,Y),this._evaluateNode(q.right,S,Y));case "OR":return e(this._evaluateNode(q.left,S,Y),this._evaluateNode(q.right,S,Y));case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(q.left,S,Y);case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(q.left,
S,Y);case "IN":return V=u(this._evaluateNode(q.right,S,Y)),F(this._evaluateNode(q.left,S,Y),V);case "NOT IN":return V=u(this._evaluateNode(q.right,S,Y)),G(F(this._evaluateNode(q.left,S,Y),V));case "BETWEEN":return V=this._evaluateNode(q.left,S,Y),q=this._evaluateNode(q.right,S,Y),null==V||null==q[0]||null==q[1]?null:V>=l(q[0])&&V<=l(q[1]);case "NOTBETWEEN":return V=this._evaluateNode(q.left,S,Y),q=this._evaluateNode(q.right,S,Y),null==V||null==q[0]||null==q[1]?null:V<l(q[0])||V>l(q[1]);case "LIKE":return c(this._evaluateNode(q.left,
S,Y),this._evaluateNode(q.right,S,Y),q.escape);case "NOT LIKE":return G(c(this._evaluateNode(q.left,S,Y),this._evaluateNode(q.right,S,Y),q.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(q.operator,this._evaluateNode(q.left,S,Y),this._evaluateNode(q.right,S,Y));case "-":case "+":case "*":case "/":return K(q.operator,this._evaluateNode(q.left,S,Y),this._evaluateNode(q.right,S,Y))}case "null":case "boolean":case "string":case "number":return q.value;
case "date":return r(q.value);case "timestamp":return n(q.value);case "current-time":return S=new Date,"date"===q.mode&&S.setHours(0,0,0,0),S;case "column-reference":return m(S,q.column,this.datefields,Y);case "function":return S=this._evaluateNode(q.args,S,Y),this.isAggregate?J.aggregateFunction(q.name,S):p.evaluateFunction(q.name,S)}throw Error("Unsupported sql syntax "+q.type);};a._createClass(M,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,q=>{"current-time"===q.type?this._hasDateFunctions=!0:"function"===q.type&&(this._hasDateFunctions=this._hasDateFunctions||H.has(q.name.toLowerCase()))});return this._hasDateFunctions}}]);return M}();var D;(function(M){M[M.Normal=0]="Normal";M[M.Escaped=1]="Escaped"})(D||(D={}));const P={getAttribute(M,N){return(M&&"object"===typeof M.attributes?M.attributes:M)[N]}};b.WhereClause=h;b.defaultAttributeAdapter=
P;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(b){function a(p){let k=0;for(let y=0;y<p.length;y++)k+=p[y];return k/p.length}function B(p){const k=a(p),y=p.length;let v=0;for(const n of p)v+=(n-k)**2;return 1<y?v/(y-1):0}const J={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,
p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:a(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let k=0;for(let y=0;y<p.length;y++)k+=p[y];p=k}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(B(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:B(p[0])}};b.aggregateFunction=function(p,k){const y=J[p.toLowerCase()];if(null==y)throw Error("Function Not Recognised");
if(k.length<y.minParams||k.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return y.evaluate(k)};b.isAggregate=function(p,k){p=J[p.toLowerCase()];return null!=p&&k>=p.minParams&&k<=p.maxParams};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(b,a){let B=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}p._fixDefaults=function(k){if(null!==k.precision||null!==k.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=function(k){const y=new p;y.second=k/1E3;return y};p.createFromValueAndQualifer=function(k,y,v){let n=null;const r=new p;r.op="-"===v?"-":"+";if("interval-period"===y.type){p._fixDefaults(y);if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(k))r[y.period]=
parseFloat(k);else throw Error("Illegal Interval");}else{p._fixDefaults(y.start);p._fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":n=/^[0-9]{1,} [0-9]{1,}$/;if(n.test(k))r[y.start.period]=parseFloat(k.split(" ")[0]),r[y.end.period]=parseFloat(k.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":n=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(n.test(k))r[y.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),r.hour=parseFloat(k[0]),r.minute=parseFloat(k[1]);else throw Error("Illegal Interval");break;case "second":n=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(n.test(k))r[y.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),r.hour=parseFloat(k[0]),r.minute=parseFloat(k[1]),r.second=
parseFloat(k[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(y.end.period){case "minute":n=/^[0-9]{1,}:[0-9]{1,}$/;if(n.test(k))r.hour=parseFloat(k.split(":")[0]),r.minute=parseFloat(k.split(":")[1]);else throw Error("Illegal Interval");break;case "second":n=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(n.test(k))k=k.split(":"),r.hour=parseFloat(k[0]),r.minute=parseFloat(k[1]),r.second=parseFloat(k[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(y.end.period){case "second":n=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(n.test(k))k=k.split(":"),r.minute=parseFloat(k[0]),r.second=parseFloat(k[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return r};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+
365/12*this.month*864E5+31536E6*this.year)};return p}();const J={extract:{minParams:2,maxParams:2,evaluate:([p,k])=>{if(null==k)return null;if(k instanceof Date)switch(p.toUpperCase()){case "SECOND":return k.getSeconds();case "MINUTE":return k.getMinutes();case "HOUR":return k.getHours();case "DAY":return k.getDate();case "MONTH":return k.getMonth()+1;case "YEAR":return k.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [k,
y]=p;return null==k||null==y?null:k.toString().substring(y-1)}if(3===p.length){const [k,y,v]=p;return null==k||null==y||null==v?null:0>=v?"":k.toString().substring(y-1,y+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,k])=>null==p||null==k?null:k.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var k=3===p.length,y=k?p[1]:" ";k=k?p[2]:p[1];if(null==y||null==k)return null;y=`(${a.escapeRegExpString(y)})`;switch(p[0]){case "BOTH":return k.replace(new RegExp(`^${y}*|${y}*$`,"g"),"");case "LEADING":return k.replace(new RegExp(`^${y}*`,
"g"),"");case "TRAILING":return k.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:
0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,maxParams:2,evaluate:p=>{const k=p[0];p=2===p.length?10**p[1]:1;return null==k?null:Math.round(k*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===
typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let k="";for(let y=0;y<p.length;y++){if(null==p[y])return null;k+=p[y].toString()}return k}},lower:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};b.SqlInterval=B;b.evaluateFunction=function(p,k){const y=J[p.toLowerCase()];if(null==y)throw Error("Function Not Recognised");
if(k.length<y.minParams||k.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return y.evaluate(k)};b.isStandardized=function(p,k){p=J[p.toLowerCase()];return null!=p&&k>=p.minParams&&k<=p.maxParams};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(b,a){var B={exports:{}};(function(p){(function(k,y){p.exports&&(p.exports=
y())})(a.commonjsGlobal,function(){function k(v,n,r,u){v=Error.call(this,v);Object.setPrototypeOf&&Object.setPrototypeOf(v,k.prototype);v.expected=n;v.found=r;v.location=u;v.name="SyntaxError";return v}function y(v,n,r){r=r||" ";if(v.length>n)return v;n-=v.length;r+=r.repeat(n);return v+r.slice(0,n)}(function(v,n){function r(){this.constructor=v}r.prototype=n.prototype;v.prototype=new r})(k,Error);k.prototype.format=function(v){var n="Error: "+this.message;if(this.location){var r=null,u;for(u=0;u<
v.length;u++)if(v[u].source===this.location.source){r=v[u].text.split(/\r\n|\n|\r/g);break}v=this.location.start;u=this.location.source+":"+v.line+":"+v.column;if(r){var G=this.location.end,z=y("",v.line.toString().length);r=r[v.line-1];G=v.line===G.line?G.column:r.length+1;n+="\n --\x3e "+u+"\n"+z+" |\n"+v.line+" | "+r+"\n"+z+" | "+y("",v.column-1)+y("",G-v.column,"^")}else n+="\n at "+u}return n};k.buildMessage=function(v,n){function r(F){return F.charCodeAt(0).toString(16).toUpperCase()}function u(F){return F.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function G(F){return F.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(c){return"\\x"+r(c)})}function z(F){return e[F.type](F)}var e={literal:function(F){return'"'+u(F.text)+'"'},class:function(F){var c=F.parts.map(function(l){return Array.isArray(l)?G(l[0])+"-"+G(l[1]):G(l)});return"["+(F.inverted?"^":"")+c+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(F){return F.description}};return"Expected "+function(F){F=F.map(z);var c,l;F.sort();if(0<F.length){for(l=c=1;c<F.length;c++)F[c-1]!==F[c]&&(F[l]=F[c],l++);F.length=
l}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}(v)+" but "+(n?'"'+u(n)+'"':"end of input")+" found."};return{SyntaxError:k,parse:function(v,n){function r(I,Q){return{type:"literal",text:I,ignoreCase:Q}}function u(I,Q,ca){return{type:"class",parts:I,inverted:Q,ignoreCase:ca}}function G(I){var Q=fc[I],ca;if(!Q){for(ca=I-1;!fc[ca];)ca--;Q=fc[ca];for(Q={line:Q.line,column:Q.column};ca<I;)10===v.charCodeAt(ca)?(Q.line++,
Q.column=1):Q.column++,ca++;fc[I]=Q}return Q}function z(I,Q){var ca=G(I),ua=G(Q);return{source:$a,start:{offset:I,line:ca.line,column:ca.column},end:{offset:Q,line:ua.line,column:ua.column}}}function e(I){t<qb||(t>qb&&(qb=t,yc=[]),yc.push(I))}function F(){var I=t;ta();var Q=l();Q!==d?(ta(),I=Q):(t=I,I=d);return I}function c(){var I=t;var Q=l();if(Q!==d){I=[];var ca=t;var ua=ta();var Ca=Fa();if(Ca!==d){var Na=ta();var Oa=l();Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=ca,ca=d;for(;ca!==d;)I.push(ca),
ca=t,ua=ta(),Ca=Fa(),Ca!==d?(Na=ta(),Oa=l(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);ca={type:"expression-list"};Q=[Q];for(ua=0;ua<I.length;ua++)Q.push(I[ua][3]);ca.value=Q;I=ca}else t=I,I=d;return I}function l(){var I=t;var Q=L();if(Q!==d){I=[];var ca=t;var ua=ta();var Ca=aa();if(Ca!==d){var Na=ta();var Oa=L();Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=ca,ca=d;for(;ca!==d;)I.push(ca),ca=t,ua=ta(),Ca=aa(),Ca!==d?(Na=ta(),Oa=L(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);I=Ya(Q,
I)}else t=I,I=d;return I}function L(){var I=t;var Q=K();if(Q!==d){I=[];var ca=t;var ua=ta();var Ca=T();if(Ca!==d){var Na=ta();var Oa=K();Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=ca,ca=d;for(;ca!==d;)I.push(ca),ca=t,ua=ta(),Ca=T(),Ca!==d?(Na=ta(),Oa=K(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);I=Ya(Q,I)}else t=I,I=d;return I}function K(){var I=t;var Q=x();if(Q===d){Q=t;if(33===v.charCodeAt(t)){var ca=rb;t++}else ca=d,0===va&&e(rd);if(ca!==d){var ua=t;va++;if(61===v.charCodeAt(t)){var Ca=
Cb;t++}else Ca=d,0===va&&e(Pc);va--;Ca===d?ua=void 0:(t=ua,ua=d);ua!==d?Q=ca=[ca,ua]:(t=Q,Q=d)}else t=Q,Q=d}Q!==d?(ca=ta(),ua=K(),ua!==d?I={type:"unary-expression",operator:"NOT",expr:ua}:(t=I,I=d)):(t=I,I=d);if(I===d){Q=t;I=R();if(I!==d){ta();Q=[];ca=t;ua=ta();Ca=m();if(Ca!==d){var Na=ta();var Oa=R();Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=ca,ca=d;if(ca!==d)for(;ca!==d;)Q.push(ca),ca=t,ua=ta(),Ca=m(),Ca!==d?(Na=ta(),Oa=R(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);else Q=d;Q!==d&&
(Q={type:"arithmetic",tail:Q});Q===d&&(Q=t,ca=E(),ca!==d?(ta(),ua=Ga(),ua!==d?(ta(),ua=c(),ua!==d?(ta(),Ca=Qa(),Ca!==d?Q={op:ca,right:ua}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d),Q===d&&(Q=t,ca=E(),ca!==d?(ta(),ua=Ga(),ua!==d?(ta(),ua=Qa(),ua!==d?Q={op:ca,right:{type:"expression-list",value:[]}}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d),Q===d&&(Q=t,ca=E(),ca!==d?(ta(),ua=N(),ua!==d?Q={op:ca,right:ua}:(t=Q,Q=d)):(t=Q,Q=d))),Q===d&&(Q=t,Ca=x(),Ca!==d?(ta(),ca=ba(),ca!==d?(ta(),ua=R(),ua!==d?(ta(),Na=T(),Na!==
d?(ta(),Ca=R(),Ca!==d?Q={op:"NOT"+ca,right:{type:"expression-list",value:[ua,Ca]}}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d),Q===d&&(Q=t,Ca=ba(),Ca!==d?(ta(),ca=R(),ca!==d?(ta(),ua=T(),ua!==d?(ta(),Na=R(),Na!==d?Q={op:Ca,right:{type:"expression-list",value:[ca,Na]}}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)),Q===d&&(Q=t,ca=C(),ca!==d?(ta(),ua=x(),ua!==d?(ta(),ua=R(),ua!==d?Q={op:ca+"NOT",right:ua}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d),Q===d&&(Q=t,ca=C(),ca!==d?(ta(),ua=R(),ua!==d?Q={op:ca,
right:ua}:(t=Q,Q=d)):(t=Q,Q=d)),Q===d&&(Q=t,ca=A(),ca!==d?(ta(),ua=ma(),ua!==d?(ta(),Ca=t,v.substr(t,6).toLowerCase()===ya?(Na=v.substr(t,6),t+=6):(Na=d,0===va&&e(sd)),Na!==d?(Na=t,va++,Oa=P(),va--,Oa===d?Na=void 0:(t=Na,Na=d),Na!==d?Ca="ESCAPE":(t=Ca,Ca=d)):(t=Ca,Ca=d),Ca!==d?(ta(),Ca=X(),Ca!==d?Q={op:ca,right:ua,escape:Ca.value}:(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d)):(t=Q,Q=d),Q===d&&(Q=t,ca=A(),ca!==d?(ta(),ua=ma(),ua!==d?Q={op:ca,right:ua,escape:""}:(t=Q,Q=d)):(t=Q,Q=d))))));Q===d&&(Q=null);""==Q||
void 0==Q||null==Q?Q=I:(ca=null,Q=ca="arithmetic"==Q.type?Ya(I,Q.tail):ab(Q.op,I,Q.right,Q.escape))}else t=Q,Q=d;I=Q}return I}function m(){if(v.substr(t,2)===Tb){var I=Tb;t+=2}else I=d,0===va&&e(td);I===d&&(62===v.charCodeAt(t)?(I=Fb,t++):(I=d,0===va&&e(ud)),I===d&&(v.substr(t,2)===la?(I=la,t+=2):(I=d,0===va&&e(vd)),I===d&&(v.substr(t,2)===Ub?(I=Ub,t+=2):(I=d,0===va&&e(wd)),I===d&&(60===v.charCodeAt(t)?(I=Db,t++):(I=d,0===va&&e(xd)),I===d&&(61===v.charCodeAt(t)?(I=Cb,t++):(I=d,0===va&&e(Pc)),I===
d&&(v.substr(t,2)===gb?(I=gb,t+=2):(I=d,0===va&&e(yd))))))));return I}function A(){var I=I=t;var Q=x();if(Q!==d){var ca=ta();var ua=ha();ua!==d?I=Q=[Q,ca,ua]:(t=I,I=d)}else t=I,I=d;I!==d&&(I=I[0]+" "+I[2]);I===d&&(I=ha());return I}function E(){var I=I=t;var Q=x();if(Q!==d){var ca=ta();var ua=f();ua!==d?I=Q=[Q,ca,ua]:(t=I,I=d)}else t=I,I=d;I!==d&&(I=I[0]+" "+I[2]);I===d&&(I=f());return I}function R(){var I=t;var Q=w();if(Q!==d){I=[];var ca=t;var ua=ta();var Ca=O();if(Ca!==d){var Na=ta();var Oa=w();
Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=ca,ca=d;for(;ca!==d;)I.push(ca),ca=t,ua=ta(),Ca=O(),Ca!==d?(Na=ta(),Oa=w(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);I=Ya(Q,I)}else t=I,I=d;return I}function O(){if(43===v.charCodeAt(t)){var I=sb;t++}else I=d,0===va&&e(zc);I===d&&(45===v.charCodeAt(t)?(I=Gb,t++):(I=d,0===va&&e(Ac)));return I}function w(){var I=t;var Q=g();if(Q!==d){I=[];var ca=t;var ua=ta();var Ca=H();if(Ca!==d){var Na=ta();var Oa=g();Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)}else t=
ca,ca=d;for(;ca!==d;)I.push(ca),ca=t,ua=ta(),Ca=H(),Ca!==d?(Na=ta(),Oa=g(),Oa!==d?ca=ua=[ua,Ca,Na,Oa]:(t=ca,ca=d)):(t=ca,ca=d);I=Ya(Q,I)}else t=I,I=d;return I}function H(){if(42===v.charCodeAt(t)){var I=Vb;t++}else I=d,0===va&&e(zd);I===d&&(47===v.charCodeAt(t)?(I=Bc,t++):(I=d,0===va&&e(Ad)));return I}function g(){var I=X();if(I===d){var Q=t;var ca=t;var ua=wa();if(ua!==d){var Ca=Ma();if(Ca!==d){var Na=Ja();Na!==d?ca=parseFloat(ua+Ca+Na):(t=ca,ca=d)}else t=ca,ca=d}else t=ca,ca=d;ca===d&&(ca=t,ua=
wa(),ua!==d?(Ca=Ma(),Ca!==d?ca=parseFloat(ua+Ca):(t=ca,ca=d)):(t=ca,ca=d),ca===d&&(ca=t,ua=wa(),ua!==d?(Ca=Ja(),Ca!==d?ca=parseFloat(ua+Ca):(t=ca,ca=d)):(t=ca,ca=d),ca===d&&(ca=t,ua=wa(),ua!==d&&(ua=parseFloat(ua)),ca=ua)));var Oa=ca;if(Oa!==d){var gc=t;va++;var Bd=D();va--;Bd===d?gc=void 0:(t=gc,gc=d);gc!==d?Q={type:"number",value:Oa}:(t=Q,Q=d)}else t=Q,Q=d;I=Q;if(I===d){var Wb=t;var Hb=t;if(v.substr(t,4).toLowerCase()===Ib){var hc=v.substr(t,4);t+=4}else hc=d,0===va&&e(Cd);if(hc!==d){var Xb=t;va++;
var Dd=P();va--;Dd===d?Xb=void 0:(t=Xb,Xb=d);Xb!==d?Hb=hc=[hc,Xb]:(t=Hb,Hb=d)}else t=Hb,Hb=d;var Eb=Hb;Eb!==d&&(Eb={type:"boolean",value:!0});Wb=Eb;if(Wb===d){Wb=t;var Jb=t;if(v.substr(t,5).toLowerCase()===Z){var ic=v.substr(t,5);t+=5}else ic=d,0===va&&e(Ed);if(ic!==d){var Yb=t;va++;var Fd=P();va--;Fd===d?Yb=void 0:(t=Yb,Yb=d);Yb!==d?Jb=ic=[ic,Yb]:(t=Jb,Jb=d)}else t=Jb,Jb=d;Eb=Jb;Eb!==d&&(Eb={type:"boolean",value:!1});Wb=Eb}I=Wb;if(I===d){var Kb=t;if(v.substr(t,4).toLowerCase()===Pa){var jc=v.substr(t,
4);t+=4}else jc=d,0===va&&e(Gd);if(jc!==d){var Zb=t;va++;var Hd=P();va--;Hd===d?Zb=void 0:(t=Zb,Zb=d);Zb!==d?Kb=jc=[jc,Zb]:(t=Kb,Kb=d)}else t=Kb,Kb=d;var Cc=Kb;Cc!==d&&(Cc={type:"null",value:null});I=Cc;if(I===d){var Lb=t;var Mb=t;if(v.substr(t,4).toLowerCase()===Id){var Qc=v.substr(t,4);t+=4}else Qc=d,0===va&&e(Jd);if(Qc!==d){var kc=t;va++;var Kd=P();va--;Kd===d?kc=void 0:(t=kc,kc=d);kc!==d?Mb="DATE":(t=Mb,Mb=d)}else t=Mb,Mb=d;if(Mb!==d){ta();var Rc=ma();Rc!==d?Lb={type:"date",value:Rc.value}:(t=
Lb,Lb=d)}else t=Lb,Lb=d;I=Lb;if(I===d){var Nb=t;var Ob=t;if(v.substr(t,9).toLowerCase()===Ld){var Sc=v.substr(t,9);t+=9}else Sc=d,0===va&&e(Md);if(Sc!==d){var lc=t;va++;var Nd=P();va--;Nd===d?lc=void 0:(t=lc,lc=d);lc!==d?Ob="TIMESTAMP":(t=Ob,Ob=d)}else t=Ob,Ob=d;if(Ob!==d){ta();var Tc=ma();Tc!==d?Nb={type:"timestamp",value:Tc.value}:(t=Nb,Nb=d)}else t=Nb,Nb=d;I=Nb;if(I===d){var cb=t;var Dc=U();if(Dc!==d){ta();if(45===v.charCodeAt(t)){var wb=Gb;t++}else wb=d,0===va&&e(Ac);wb===d&&(43===v.charCodeAt(t)?
(wb=sb,t++):(wb=d,0===va&&e(zc)));if(wb!==d){ta();var $b=ma();if($b!==d){ta();var Uc=S();Uc!==d?cb={type:"interval",value:$b,qualifier:Uc,op:wb}:(t=cb,cb=d)}else t=cb,cb=d}else t=cb,cb=d}else t=cb,cb=d;cb===d&&(cb=t,Dc=U(),Dc!==d?(ta(),wb=ma(),wb!==d?(ta(),$b=S(),$b!==d?cb={type:"interval",value:wb,qualifier:$b,op:""}:(t=cb,cb=d)):(t=cb,cb=d)):(t=cb,cb=d));I=cb}}}}}}var Va=I;if(Va===d){var ib=t;var Pb=t;if(v.substr(t,7).toLowerCase()===mb){var Vc=v.substr(t,7);t+=7}else Vc=d,0===va&&e(Od);if(Vc!==
d){var mc=t;va++;var Pd=P();va--;Pd===d?mc=void 0:(t=mc,mc=d);mc!==d?Pb="EXTRACT":(t=Pb,Pb=d)}else t=Pb,Pb=d;if(Pb!==d){ta();var Qd=Ga();if(Qd!==d){ta();var ob=W();ob===d&&(ob=ea(),ob===d&&(ob=ra(),ob===d&&(ob=sa(),ob===d&&(ob=xa(),ob===d&&(ob=Aa())))));var Wc=ob;if(Wc!==d){ta();var Rd=ka();if(Rd!==d){ta();var Xc=l();if(Xc!==d){ta();var Sd=Qa();Sd!==d?ib={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Wc},Xc]}}:(t=ib,ib=d)}else t=ib,ib=d}else t=ib,ib=d}else t=
ib,ib=d}else t=ib,ib=d}else t=ib,ib=d;Va=ib;if(Va===d){var jb=t;var Qb=t;if(v.substr(t,9).toLowerCase()===db){var Yc=v.substr(t,9);t+=9}else Yc=d,0===va&&e(Td);if(Yc!==d){var nc=t;va++;var Ud=P();va--;Ud===d?nc=void 0:(t=nc,nc=d);nc!==d?Qb="SUBSTRING":(t=Qb,Qb=d)}else t=Qb,Qb=d;if(Qb!==d){ta();var Vd=Ga();if(Vd!==d){ta();var Ec=l();if(Ec!==d){ta();var Wd=ka();if(Wd!==d){ta();var Fc=l();if(Fc!==d){ta();var xb=t;var Rb=t;if(v.substr(t,3).toLowerCase()===Ta){var Zc=v.substr(t,3);t+=3}else Zc=d,0===va&&
e(Xd);if(Zc!==d){var oc=t;va++;var Yd=P();va--;Yd===d?oc=void 0:(t=oc,oc=d);oc!==d?Rb="FOR":(t=Rb,Rb=d)}else t=Rb,Rb=d;var ac=Rb;if(ac!==d){var Zd=ta();var $c=l();if($c!==d){var $d=ta();xb=ac=[ac,Zd,$c,$d]}else t=xb,xb=d}else t=xb,xb=d;xb===d&&(xb=null);ac=Qa();ac!==d?jb={type:"function",name:"substring",args:{type:"expression-list",value:xb?[Ec,Fc,xb[2]]:[Ec,Fc]}}:(t=jb,jb=d)}else t=jb,jb=d}else t=jb,jb=d}else t=jb,jb=d}else t=jb,jb=d}else t=jb,jb=d;Va=jb;if(Va===d){var Xa=t;var Gc=ia();if(Gc!==
d){ta();var Hc=Ga();if(Hc!==d){ta();var yb=q();yb===d&&(yb=null);ta();var bc=l();if(bc!==d){ta();var Ic=ka();if(Ic!==d){ta();var ad=l();if(ad!==d){ta();var ae=Qa();ae!==d?Xa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==yb?"BOTH":yb},bc,ad]}}:(t=Xa,Xa=d)}else t=Xa,Xa=d}else t=Xa,Xa=d}else t=Xa,Xa=d}else t=Xa,Xa=d}else t=Xa,Xa=d;Xa===d&&(Xa=t,Gc=ia(),Gc!==d?(ta(),Hc=Ga(),Hc!==d?(ta(),yb=q(),yb===d&&(yb=null),ta(),bc=l(),bc!==d?(ta(),Ic=Qa(),Ic!==d?Xa={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==yb?"BOTH":yb},bc]}}:(t=Xa,Xa=d)):(t=Xa,Xa=d)):(t=Xa,Xa=d)):(t=Xa,Xa=d));Va=Xa;if(Va===d){var kb=t;var Sb=t;if(v.substr(t,8).toLowerCase()===be){var bd=v.substr(t,8);t+=8}else bd=d,0===va&&e(ce);if(bd!==d){var pc=t;va++;var de=P();va--;de===d?pc=void 0:(t=pc,pc=d);pc!==d?Sb="POSITION":(t=Sb,Sb=d)}else t=Sb,Sb=d;if(Sb!==d){ta();var ee=Ga();if(ee!==d){ta();var cd=l();if(cd!==d){ta();var fe=f();if(fe!==d){ta();var dd=l();if(dd!==
d){ta();var ge=Qa();ge!==d?kb={type:"function",name:"position",args:{type:"expression-list",value:[cd,dd]}}:(t=kb,kb=d)}else t=kb,kb=d}else t=kb,kb=d}else t=kb,kb=d}else t=kb,kb=d}else t=kb,kb=d;Va=kb;if(Va===d){var Bb=t;var qc;var pb=t;pb=qc=h();if(pb===d)if(pb=t,96===v.charCodeAt(t)?(qc=ed,t++):(qc=d,0===va&&e(fd)),qc!==d){var rc=[];if(gd.test(v.charAt(t))){var zb=v.charAt(t);t++}else zb=d,0===va&&e(hd);if(zb!==d)for(;zb!==d;)rc.push(zb),gd.test(v.charAt(t))?(zb=v.charAt(t),t++):(zb=d,0===va&&e(hd));
else rc=d;rc!==d?(96===v.charCodeAt(t)?(zb=ed,t++):(zb=d,0===va&&e(fd)),zb!==d?pb=rc.join(""):(t=pb,pb=d)):(t=pb,pb=d)}else t=pb,pb=d;var id=pb;if(id!==d){ta();var he=Ga();if(he!==d){ta();var sc=c();sc===d&&(sc=null);ta();var ie=Qa();ie!==d?Bb={type:"function",name:id,args:sc?sc:{type:"expression-list",value:[]}}:(t=Bb,Bb=d)}else t=Bb,Bb=d}else t=Bb,Bb=d;Va=Bb;if(Va===d){var tb;var eb=t;var Jc=Ba();if(Jc!==d){ta();var cc=l();if(cc!==d){ta();var dc=[];for(tb=oa();tb!==d;)dc.push(tb),tb=oa();tb=ta();
var tc=Ia();tc!==d?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:null}:(t=eb,eb=d)}else t=eb,eb=d}else t=eb,eb=d;if(eb===d)if(eb=t,Jc=Ba(),Jc!==d)if(ta(),cc=l(),cc!==d){ta();dc=[];for(tb=oa();tb!==d;)dc.push(tb),tb=oa();tb=ta();tc=qa();if(tc!==d){ta();var je=Ia();je!==d?eb={type:"case-expression",format:"simple",operand:cc,clauses:dc,else:tc.value}:(t=eb,eb=d)}else t=eb,eb=d}else t=eb,eb=d;else t=eb,eb=d;var Kc=eb;if(Kc===d){var ub;var hb=t;var Lc=Ba();if(Lc!==d){ta();var ec=
[];for(ub=na();ub!==d;)ec.push(ub),ub=na();ub=ta();var uc=Ia();uc!==d?hb={type:"case-expression",format:"searched",clauses:ec,else:null}:(t=hb,hb=d)}else t=hb,hb=d;if(hb===d)if(hb=t,Lc=Ba(),Lc!==d){ta();ec=[];for(ub=na();ub!==d;)ec.push(ub),ub=na();ub=ta();uc=qa();if(uc!==d){ta();var ke=Ia();ke!==d?hb={type:"case-expression",format:"searched",clauses:ec,else:uc.value}:(t=hb,hb=d)}else t=hb,hb=d}else t=hb,hb=d;Kc=hb}Va=Kc;if(Va===d){var vc;var wc=t;var jd=D();if(jd!==d){var kd=[];for(vc=M();vc!==d;)kd.push(vc),
vc=M();wc=jd+kd.join("")}else t=wc,wc=d;var xc=wc;if(xc!==d){var Mc=xc;xc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Va=xc;if(Va===d&&(Va=N(),Va===d)){Va=t;var le=Ga();if(le!==d){ta();var Nc=l();if(Nc!==d){ta();var me=Qa();me!==d?(Nc.paren=!0,Va=Nc):(t=Va,Va=d)}else t=Va,Va=d}else t=Va,Va=d}}}}}}}}return Va}function h(){var I;var Q=t;var ca=D();if(ca!==d){Q=[];for(I=
P();I!==d;)Q.push(I),I=P();Q=ca+Q.join("")}else t=Q,Q=d;return Q}function D(){if(ne.test(v.charAt(t))){var I=v.charAt(t);t++}else I=d,0===va&&e(oe);return I}function P(){if(pe.test(v.charAt(t))){var I=v.charAt(t);t++}else I=d,0===va&&e(qe);return I}function M(){if(re.test(v.charAt(t))){var I=v.charAt(t);t++}else I=d,0===va&&e(se);return I}function N(){var I=t;if(64===v.charCodeAt(t)){var Q=lb;t++}else Q=d,0===va&&e(te);if(Q!==d){var ca=h();ca!==d?I=Q=[Q,ca]:(t=I,I=d)}else t=I,I=d;I!==d&&(I={type:"parameter",
value:I[1]});return I}function q(){var I=t;if(v.substr(t,7).toLowerCase()===ue){var Q=v.substr(t,7);t+=7}else Q=d,0===va&&e(ve);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="LEADING":(t=I,I=d)}else t=I,I=d;I===d&&(I=t,v.substr(t,8).toLowerCase()===we?(Q=v.substr(t,8),t+=8):(Q=d,0===va&&e(xe)),Q!==d?(Q=t,va++,ca=P(),va--,ca===d?Q=void 0:(t=Q,Q=d),Q!==d?I="TRAILING":(t=I,I=d)):(t=I,I=d),I===d&&(I=t,v.substr(t,4).toLowerCase()===ye?(Q=v.substr(t,4),t+=4):(Q=d,0===va&&e(ze)),Q!==
d?(Q=t,va++,ca=P(),va--,ca===d?Q=void 0:(t=Q,Q=d),Q!==d?I="BOTH":(t=I,I=d)):(t=I,I=d)));return I}function S(){var I=t;var Q=t;var ca=Y();if(ca!==d){ta();var ua=Ga();if(ua!==d)if(ta(),ua=ja(),ua!==d){ta();var Ca=Qa();Ca!==d?Q={type:"interval-period",period:ca.value,precision:ua,secondary:null}:(t=Q,Q=d)}else t=Q,Q=d;else t=Q,Q=d}else t=Q,Q=d;Q===d&&(Q=t,ca=Y(),ca!==d&&(ca=ld(ca)),Q=ca);if(Q!==d)if(ta(),ca=t,v.substr(t,2).toLowerCase()===Ae?(ua=v.substr(t,2),t+=2):(ua=d,0===va&&e(Be)),ua!==d?(ua=t,
va++,Ca=P(),va--,Ca===d?ua=void 0:(t=ua,ua=d),ua!==d?ca="TO":(t=ca,ca=d)):(t=ca,ca=d),ca!==d){ta();ca=t;ua=Y();ua!==d&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});ca=ua;if(ca===d){ca=t;ua=Aa();if(ua!==d)if(ta(),ua=Ga(),ua!==d)if(ta(),ua=ja(),ua!==d)if(ta(),Ca=Fa(),Ca!==d)if(ta(),Ca=V(),Ca!==d){ta();var Na=Qa();Na!==d?ca=md(ua,Ca):(t=ca,ca=d)}else t=ca,ca=d;else t=ca,ca=d;else t=ca,ca=d;else t=ca,ca=d;else t=ca,ca=d;ca===d&&(ca=t,ua=Aa(),ua!==d?(ta(),ua=Ga(),ua!==d?
(ta(),ua=ja(),ua!==d?(ta(),Ca=Qa(),Ca!==d?ca={type:"interval-period",period:"second",precision:ua,secondary:null}:(t=ca,ca=d)):(t=ca,ca=d)):(t=ca,ca=d)):(t=ca,ca=d),ca===d&&(ca=t,ua=Aa(),ua!==d&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),ca=ua))}ca!==d?I={type:"interval-qualifier",start:Q,end:ca}:(t=I,I=d)}else t=I,I=d;else t=I,I=d;I===d&&(I=t,ca=Y(),ca!==d?(ta(),Q=Ga(),Q!==d?(ta(),Q=V(),Q!==d?(ta(),ua=Qa(),ua!==d?I={type:"interval-period",period:ca.value,precision:Q,
secondary:null}:(t=I,I=d)):(t=I,I=d)):(t=I,I=d)):(t=I,I=d),I===d&&(I=t,ca=Y(),ca!==d&&(ca=ld(ca)),I=ca,I===d&&(I=t,ca=Aa(),ca!==d?(ta(),Q=Ga(),Q!==d?(ta(),Q=ja(),Q!==d?(ta(),ua=Fa(),ua!==d?(ta(),ca=V(),ca!==d?(ta(),ua=Qa(),ua!==d?I=md(Q,ca):(t=I,I=d)):(t=I,I=d)):(t=I,I=d)):(t=I,I=d)):(t=I,I=d)):(t=I,I=d),I===d&&(I=t,ca=Aa(),ca!==d?(ta(),Q=Ga(),Q!==d?(ta(),Q=V(),Q!==d?(ta(),ua=Qa(),ua!==d?I={type:"interval-period",period:"second",precision:Q,secondary:null}:(t=I,I=d)):(t=I,I=d)):(t=I,I=d)):(t=I,I=
d),I===d&&(I=t,ca=Aa(),ca!==d&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),I=ca)))));return I}function Y(){var I=t;I=ra();I!==d&&(I={type:"string",value:"day"});I===d&&(I=t,I=sa(),I!==d&&(I={type:"string",value:"hour"}),I===d&&(I=t,I=xa(),I!==d&&(I={type:"string",value:"minute"}),I===d&&(I=t,I=ea(),I!==d&&(I={type:"string",value:"month"}),I===d&&(I=t,I=W(),I!==d&&(I={type:"string",value:"year"})))));return I}function V(){var I=La();I!==d&&(I=parseFloat(I));return I}
function ja(){var I=La();I!==d&&(I=parseFloat(I));return I}function ma(){var I=X();I===d&&(I=N());return I}function X(){var I=t;if(39===v.charCodeAt(t)){var Q=Ab;t++}else Q=d,0===va&&e(nd);Q===d&&(v.substr(t,2)===Sa?(Q=Sa,t+=2):(Q=d,0===va&&e(Ce)));if(Q!==d){Q=[];var ca=t;v.substr(t,2)===fb?(ca=fb,t+=2):(ca=d,0===va&&e(od));ca!==d&&(ca="'");ca===d&&(pd.test(v.charAt(t))?(ca=v.charAt(t),t++):(ca=d,0===va&&e(qd)));for(;ca!==d;)Q.push(ca),ca=t,v.substr(t,2)===fb?(ca=fb,t+=2):(ca=d,0===va&&e(od)),ca!==
d&&(ca="'"),ca===d&&(pd.test(v.charAt(t))?(ca=v.charAt(t),t++):(ca=d,0===va&&e(qd)));39===v.charCodeAt(t)?(ca=Ab,t++):(ca=d,0===va&&e(nd));ca!==d?I={type:"string",value:Q.join("")}:(t=I,I=d)}else t=I,I=d;return I}function na(){var I=t;if(Ha()!==d){ta();var Q=l();if(Q!==d){ta();var ca=Ea();ca!==d?(ta(),ca=l(),ca!==d?I={type:"when-clause",operand:Q,value:ca}:(t=I,I=d)):(t=I,I=d)}else t=I,I=d}else t=I,I=d;return I}function oa(){var I=t;if(Ha()!==d){ta();var Q=l();if(Q!==d){ta();var ca=Ea();ca!==d?(ta(),
ca=l(),ca!==d?I={type:"when-clause",operand:Q,value:ca}:(t=I,I=d)):(t=I,I=d)}else t=I,I=d}else t=I,I=d;return I}function qa(){var I=t;var Q=t;if(v.substr(t,4).toLowerCase()===De){var ca=v.substr(t,4);t+=4}else ca=d,0===va&&e(Ee);if(ca!==d){ca=t;va++;var ua=P();va--;ua===d?ca=void 0:(t=ca,ca=d);ca!==d?Q="ELSE":(t=Q,Q=d)}else t=Q,Q=d;Q!==d?(ta(),Q=l(),Q!==d?I={type:"else-clause",value:Q}:(t=I,I=d)):(t=I,I=d);return I}function wa(){var I=La();if(I===d){I=t;if(45===v.charCodeAt(t)){var Q=Gb;t++}else Q=
d,0===va&&e(Ac);Q===d&&(43===v.charCodeAt(t)?(Q=sb,t++):(Q=d,0===va&&e(zc)));if(Q!==d){var ca=La();ca!==d?I=Q[0]+ca:(t=I,I=d)}else t=I,I=d}return I}function Ma(){var I=t;if(46===v.charCodeAt(t)){var Q=vb;t++}else Q=d,0===va&&e(Fe);Q!==d?(I=La(),I===d&&(I=null),I="."+(null!=I?I:"")):(t=I,I=d);return I}function Ja(){var I;var Q=I=t;if(Ge.test(v.charAt(t))){var ca=v.charAt(t);t++}else ca=d,0===va&&e(He);ca!==d?(Ie.test(v.charAt(t))?(Q=v.charAt(t),t++):(Q=d,0===va&&e(Je)),Q===d&&(Q=null),Q="e"+(null===
Q?"":Q)):(t=Q,Q=d);Q!==d?(ca=La(),ca!==d?I=Q+ca:(t=I,I=d)):(t=I,I=d);return I}function La(){var I=[];var Q=Za();if(Q!==d)for(;Q!==d;)I.push(Q),Q=Za();else I=d;I!==d&&(I=I.join(""));return I}function Za(){if(Ke.test(v.charAt(t))){var I=v.charAt(t);t++}else I=d,0===va&&e(Le);return I}function f(){var I=t;if(v.substr(t,2).toLowerCase()===fa){var Q=v.substr(t,2);t+=2}else Q=d,0===va&&e(Me);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="IN":(t=I,I=d)}else t=I,I=d;return I}function C(){var I=
t;if(v.substr(t,2).toLowerCase()===da){var Q=v.substr(t,2);t+=2}else Q=d,0===va&&e(Ne);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="IS":(t=I,I=d)}else t=I,I=d;return I}function ha(){var I=t;if(v.substr(t,4).toLowerCase()===pa){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(Oe);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="LIKE":(t=I,I=d)}else t=I,I=d;return I}function x(){var I=t;if(v.substr(t,3).toLowerCase()===za){var Q=v.substr(t,3);t+=3}else Q=d,0===
va&&e(Pe);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="NOT":(t=I,I=d)}else t=I,I=d;return I}function T(){var I=t;if(v.substr(t,3).toLowerCase()===Da){var Q=v.substr(t,3);t+=3}else Q=d,0===va&&e(Qe);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="AND":(t=I,I=d)}else t=I,I=d;return I}function aa(){var I=t;if(v.substr(t,2).toLowerCase()===Ka){var Q=v.substr(t,2);t+=2}else Q=d,0===va&&e(Re);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==
d?I="OR":(t=I,I=d)}else t=I,I=d;return I}function ba(){var I=t;if(v.substr(t,7).toLowerCase()===Wa){var Q=v.substr(t,7);t+=7}else Q=d,0===va&&e(Se);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="BETWEEN":(t=I,I=d)}else t=I,I=d;return I}function ka(){var I=t;if(v.substr(t,4).toLowerCase()===Ua){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(Te);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="FROM":(t=I,I=d)}else t=I,I=d;return I}function ia(){var I=t;if(v.substr(t,
4).toLowerCase()===Ue){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(Ve);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="TRIM":(t=I,I=d)}else t=I,I=d;return I}function U(){var I=t;if(v.substr(t,8).toLowerCase()===We){var Q=v.substr(t,8);t+=8}else Q=d,0===va&&e(Xe);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="INTERVAL":(t=I,I=d)}else t=I,I=d;return I}function W(){var I=t;if(v.substr(t,4).toLowerCase()===Ye){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(Ze);
if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="YEAR":(t=I,I=d)}else t=I,I=d;return I}function ea(){var I=t;if(v.substr(t,5).toLowerCase()===$e){var Q=v.substr(t,5);t+=5}else Q=d,0===va&&e(af);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="MONTH":(t=I,I=d)}else t=I,I=d;return I}function ra(){var I=t;if(v.substr(t,3).toLowerCase()===bf){var Q=v.substr(t,3);t+=3}else Q=d,0===va&&e(cf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="DAY":
(t=I,I=d)}else t=I,I=d;return I}function sa(){var I=t;if(v.substr(t,4).toLowerCase()===df){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(ef);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="HOUR":(t=I,I=d)}else t=I,I=d;return I}function xa(){var I=t;if(v.substr(t,6).toLowerCase()===ff){var Q=v.substr(t,6);t+=6}else Q=d,0===va&&e(gf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="MINUTE":(t=I,I=d)}else t=I,I=d;return I}function Aa(){var I=t;if(v.substr(t,6).toLowerCase()===
hf){var Q=v.substr(t,6);t+=6}else Q=d,0===va&&e(jf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="SECOND":(t=I,I=d)}else t=I,I=d;return I}function Ba(){var I=t;if(v.substr(t,4).toLowerCase()===kf){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(lf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="CASE":(t=I,I=d)}else t=I,I=d;return I}function Ia(){var I=t;if(v.substr(t,3).toLowerCase()===mf){var Q=v.substr(t,3);t+=3}else Q=d,0===va&&e(nf);if(Q!==d){Q=t;va++;
var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="END":(t=I,I=d)}else t=I,I=d;return I}function Ha(){var I=t;if(v.substr(t,4).toLowerCase()===of){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(pf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="WHEN":(t=I,I=d)}else t=I,I=d;return I}function Ea(){var I=t;if(v.substr(t,4).toLowerCase()===qf){var Q=v.substr(t,4);t+=4}else Q=d,0===va&&e(rf);if(Q!==d){Q=t;va++;var ca=P();va--;ca===d?Q=void 0:(t=Q,Q=d);Q!==d?I="THEN":(t=I,I=d)}else t=
I,I=d;return I}function Fa(){if(44===v.charCodeAt(t)){var I=sf;t++}else I=d,0===va&&e(tf);return I}function Ga(){if(40===v.charCodeAt(t)){var I=uf;t++}else I=d,0===va&&e(vf);return I}function Qa(){if(41===v.charCodeAt(t)){var I=wf;t++}else I=d,0===va&&e(xf);return I}function ta(){var I;var Q=[];for(I=bb();I!==d;)Q.push(I),I=bb();return Q}function bb(){if(yf.test(v.charAt(t))){var I=v.charAt(t);t++}else I=d,0===va&&e(zf);return I}function ab(I,Q,ca,ua){I={type:"binary-expression",operator:I,left:Q,
right:ca};void 0!==ua&&(I.escape=ua);return I}function Ya(I,Q){for(var ca=0;ca<Q.length;ca++)I=ab(Q[ca][1],I,Q[ca][3]);return I}n=void 0!==n?n:{};var d={},$a=n.grammarSource,Ra={start:F},nb=F,rb="!",Cb="\x3d",Tb="\x3e\x3d",Fb="\x3e",la="\x3c\x3d",Ub="\x3c\x3e",Db="\x3c",gb="!\x3d",sb="+",Gb="-",Vb="*",Bc="/",lb="@",Ab="'",Sa="N'",fb="''",vb=".",Pa="null",Ib="true",Z="false",fa="in",da="is",pa="like",ya="escape",za="not",Da="and",Ka="or",Wa="between",Ua="from",Ta="for",db="substring",mb="extract",
Ue="trim",be="position",Ld="timestamp",Id="date",ue="leading",we="trailing",ye="both",Ae="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",De="else",sf=",",uf="(",wf=")",ed="`",ne=/^[A-Za-z_\x80-\uFFFF]/,pe=/^[A-Za-z0-9_]/,re=/^[A-Za-z0-9_.\x80-\uFFFF]/,pd=/^[^']/,Ke=/^[0-9]/,Ge=/^[eE]/,Ie=/^[+\-]/,yf=/^[ \t\n\r]/,gd=/^[^`]/,rd=r("!",!1),Pc=r("\x3d",!1),td=r("\x3e\x3d",!1),ud=r("\x3e",!1),vd=r("\x3c\x3d",!1),wd=r("\x3c\x3e",!1),
xd=r("\x3c",!1),yd=r("!\x3d",!1),zc=r("+",!1),Ac=r("-",!1),zd=r("*",!1),Ad=r("/",!1),oe=u([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),qe=u([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),se=u([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),te=r("@",!1),nd=r("'",!1),Ce=r("N'",!1),od=r("''",!1),qd=u(["'"],!0,!1),Fe=r(".",!1),Le=u([["0","9"]],!1,!1),He=u(["e","E"],!1,!1),Je=u(["+","-"],!1,!1),Gd=r("NULL",!0),Cd=r("TRUE",!0),Ed=r("FALSE",!0),Me=r("IN",!0),Ne=r("IS",!0),Oe=r("LIKE",
!0),sd=r("ESCAPE",!0),Pe=r("NOT",!0),Qe=r("AND",!0),Re=r("OR",!0),Se=r("BETWEEN",!0),Te=r("FROM",!0),Xd=r("FOR",!0),Td=r("SUBSTRING",!0),Od=r("EXTRACT",!0),Ve=r("TRIM",!0),ce=r("POSITION",!0),Md=r("TIMESTAMP",!0),Jd=r("DATE",!0),ve=r("LEADING",!0),xe=r("TRAILING",!0),ze=r("BOTH",!0),Be=r("TO",!0),Xe=r("INTERVAL",!0),Ze=r("YEAR",!0),af=r("MONTH",!0),cf=r("DAY",!0),ef=r("HOUR",!0),gf=r("MINUTE",!0),jf=r("SECOND",!0),lf=r("CASE",!0),nf=r("END",!0),pf=r("WHEN",!0),rf=r("THEN",!0),Ee=r("ELSE",!0),tf=r(",",
!1),vf=r("(",!1),xf=r(")",!1),zf=u([" ","\t","\n","\r"],!1,!1),fd=r("`",!1),hd=u(["`"],!0,!1),ld=function(I){return{type:"interval-period",period:I.value,precision:null,secondary:null}},md=function(I,Q){return{type:"interval-period",period:"second",precision:I,secondary:Q}},t=0,fc=[{line:1,column:1}],qb=0,yc=[],va=0;if("startRule"in n){if(!(n.startRule in Ra))throw Error("Can't start parsing from rule \""+n.startRule+'".');nb=Ra[n.startRule]}var Oc=nb();if(Oc!==d&&t===v.length)return Oc;Oc!==d&&t<
v.length&&e({type:"end"});throw function(I,Q,ca){return new k(k.buildMessage(I,Q),I,Q,ca)}(yc,qb<v.length?v.charAt(qb):null,qb<v.length?z(qb,qb+1):z(qb,qb));}}})})(B);let J=function(){function p(){}p.parse=function(k){return B.exports.parse(k)};return p}();b.WhereGrammar=J;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(b){b.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};b.commonjsRequire=function(a){throw Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};b.getDefaultExportFromCjs=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(b,a,B,J,p,k,y){function v(c,l){if(!l)return null;if("x"in l){var L={x:0,y:0};[L.x,L.y]=c(l.x,l.y,G);null!=l.z&&(L.z=l.z);null!=l.m&&(L.m=l.m);return L}if("xmin"in l)return L={xmin:0,ymin:0,xmax:0,ymax:0},[L.xmin,L.ymin]=c(l.xmin,l.ymin,G),[L.xmax,L.ymax]=c(l.xmax,l.ymax,G),l.hasZ&&(L.zmin=l.zmin,L.zmax=l.zmax,L.hasZ=!0),l.hasM&&(L.mmin=l.mmin,L.mmax=l.mmax,L.hasM=!0),L;if("rings"in l)return{rings:n(l.rings,c),hasM:l.hasM,hasZ:l.hasZ};if("paths"in l)return{paths:n(l.paths,c),hasM:l.hasM,hasZ:l.hasZ};
if("points"in l)return{points:r(l.points,c),hasM:l.hasM,hasZ:l.hasZ}}function n(c,l){const L=[];for(const K of c)L.push(r(K,l));return L}function r(c,l){const L=[];for(const K of c)c=l(K[0],K[1],[0,0]),L.push(c),2<K.length&&c.push(K[2]),3<K.length&&c.push(K[3]);return L}function u(){u=a._asyncToGenerator(function*(c,l){l&&(c=Array.isArray(c)?c.map(L=>B.isSome(L.geometry)&&L.geometry.spatialReference):[c],yield J.initializeProjection(c.map(L=>({source:L,dest:l}))))});return u.apply(this,arguments)}
const G=[0,0],z=v.bind(null,y.lngLatToXY),e=v.bind(null,y.xyToLngLat),F=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=c.prototype;l.push=function(){var L=a._asyncToGenerator(function*(K,m,A){if(!(K&&K.length&&m&&A)||k.equals(m,A))return K;const E={geometries:K,inSpatialReference:m,outSpatialReference:A,resolve:null};this._jobs.push(E);return new Promise(R=>{E.resolve=R;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(K,
m,A){return L.apply(this,arguments)}}();l._process=function(){this._timer=null;const L=this._jobs.shift();if(L){var {geometries:K,inSpatialReference:m,outSpatialReference:A,resolve:E}=L;y.canProject(m,A)?k.isWebMercator(A)?E(K.map(z)):E(K.map(e)):E(J.projectMany(p.jsonAdapter,K,m,A,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());b.checkProjectionSupport=function(c,l){return u.apply(this,arguments)};b.project=function(c,l,L,K){if(!c)return c;L||(L=l,l=c.spatialReference);
return k.isValid(l)&&k.isValid(L)&&!k.equals(l,L)?y.canProject(l,L)?(c=k.isWebMercator(L)?z(c):e(c),c.spatialReference=L,c):J.projectMany(p.jsonAdapter,[c],l,L,null,K)[0]:c};b.projectMany=function(c,l,L){return F.push(c,l,L)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K,m,A,E,R,O,w,H,g){function h(){return!!Ra&&c.isLoaded()}function D(Z){k.isNone(rb)&&(rb=Promise.all([c.load(),(new Promise((fa,da)=>b(["../chunks/geometryEngineBase"],fa,da))).then(fa=>fa.geometryEngineBase),new Promise((fa,da)=>b(["./geometryAdapters/hydrated"],fa,da))]));return rb.then(([,fa,{hydratedAdapter:da}])=>{y.throwIfAborted(Z);nb=da;Ra=fa.default;Ra._enableProjection(c.pe);Tb.notify()})}function P(Z,fa,da=null,pa=null){return Array.isArray(Z)?
0===Z.length?[]:M(nb,Z,Z[0].spatialReference,fa,da,pa):M(nb,[Z],Z.spatialReference,fa,da,pa)[0]}function M(Z,fa,da,pa,ya=null,za=null){if(k.isNone(da)||k.isNone(pa))return fa;if(S(da,pa,ya))return fa.map(Da=>k.unwrap(V(Da,da,pa)));if(k.isNone(ya)){const Da=O.cacheKey(da,pa);void 0!==Cb[Da]?ya=Cb[Da]:(ya=N(da,pa,null),k.isNone(ya)&&(ya=new O),Cb[Da]=ya)}if(k.isNone(Ra))throw new Fb;return k.isSome(za)?Ra._project(Z,fa,da,pa,ya,za):Ra._project(Z,fa,da,pa,ya)}function N(Z,fa,da=null){if(k.isNone(Ra))throw new Fb;
if(k.isNone(Z)||k.isNone(fa))return null;Z=Ra._getTransformation(nb,Z,fa,da,null==da?void 0:da.spatialReference);return null!==Z?O.fromGE(Z):null}function q(Z,fa){try{const da=P(Z,fa);if(null==da)return null;"xmin"in Z&&"xmin"in da&&(da.zmin=Z.zmin,da.zmax=Z.zmax);const pa=g.getGeometryZScaler(da.type,Z.spatialReference,fa);k.isSome(pa)&&pa(da);return da}catch(da){if(!(da instanceof Fb))throw da;return null}}function S(Z,fa,da){return da?!1:w.equals(Z,fa)?!0:w.isValid(Z)&&w.isValid(fa)&&!!Ya(Z,fa,
Vb)}function Y(){Y=B._asyncToGenerator(function*(Z,fa,da,pa){if(h())return y.waitTick(pa);if(Array.isArray(Z))for(const {source:ya,dest:za,geographicTransformation:Da}of Z){if(!S(ya,za,Da))return D(pa)}else if(!S(Z,fa,da))return D(pa);return y.waitTick(pa)});return Y.apply(this,arguments)}function V(Z,fa,da){return Z?"x"in Z?ja(Z,fa,new l,da,0):"xmin"in Z?oa(Z,fa,new e,da,0):"rings"in Z?na(Z,fa,new L,da,0):"paths"in Z?X(Z,fa,new K,da,0):"points"in Z?ma(Z,fa,new F,da,0):null:null}function ja(Z,fa,
da,pa,ya){Pa[0]=Z.x;Pa[1]=Z.y;const za=Z.z;Pa[2]=void 0!==za?za:ya;if(!Ja(Pa,fa,0,Pa,pa,0,1))return null;da.x=Pa[0];da.y=Pa[1];da.spatialReference=pa;void 0===za?(da.z=void 0,da.hasZ=!1):(da.z=Pa[2],da.hasZ=!0);void 0===Z.m?(da.m=void 0,da.hasM=!1):(da.m=Z.m,da.hasM=!0);return da}function ma(Z,fa,da,pa,ya){const {points:za,hasZ:Da,hasM:Ka}=Z;Z=[];const Wa=za.length,Ua=[];for(var Ta of za)Ua.push(Ta[0],Ta[1],Da?Ta[2]:ya);if(!Ja(Ua,fa,0,Ua,pa,0,Wa))return null;for(fa=0;fa<Wa;++fa){ya=3*fa;Ta=Ua[ya];
const db=Ua[ya+1];Da&&Ka?Z.push([Ta,db,Ua[ya+2],za[fa][3]]):Da?Z.push([Ta,db,Ua[ya+2]]):Ka?Z.push([Ta,db,za[fa][2]]):Z.push([Ta,db])}da.points=Z;da.spatialReference=pa;da.hasZ=Da;da.hasM=Ka;return da}function X(Z,fa,da,pa,ya){const {paths:za,hasZ:Da,hasM:Ka}=Z;Z=[];if(!La(za,Da,Ka,fa,Z,pa,ya))return null;da.paths=Z;da.spatialReference=pa;da.hasZ=Da;da.hasM=Ka;return da}function na(Z,fa,da,pa,ya){const {rings:za,hasZ:Da,hasM:Ka}=Z;Z=[];if(!La(za,Da,Ka,fa,Z,pa,ya))return null;da.rings=Z;da.spatialReference=
pa;da.hasZ=Da;da.hasM=Ka;return da}function oa(Z,fa,da,pa,ya){const {xmin:za,ymin:Da,xmax:Ka,ymax:Wa,hasZ:Ua,hasM:Ta}=Z;if(!qa(za,Da,Ua?Z.zmin:ya,fa,Pa,pa))return null;da.xmin=Pa[0];da.ymin=Pa[1];Ua&&(da.zmin=Pa[2]);if(!qa(Ka,Wa,Ua?Z.zmax:ya,fa,Pa,pa))return null;da.xmax=Pa[0];da.ymax=Pa[1];Ua&&(da.zmax=Pa[2]);Ta&&(da.mmin=Z.mmin,da.mmax=Z.mmax);da.spatialReference=pa;return da}function qa(Z,fa,da,pa,ya,za){Sa[0]=Z;Sa[1]=fa;Sa[2]=da;return Ja(Sa,pa,0,ya,za,0,1)}function wa(Z,fa,da,pa){if(k.isNone(fa)||
k.isNone(pa)||2>Z.length)return!1;2===Z.length&&(Sa[0]=Z[0],Sa[1]=Z[1],Sa[2]=0,Z=Sa);return Ja(Z,fa,0,da,pa,0,1)}function Ma(Z,fa,da){if(k.isNone(fa))return!1;fa=ha(fa,sb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(k.isNone(fa))return!1;fa(Z,0,Sa,0);da!==Sa&&(da[0]=Sa[0],da[1]=Sa[1],2<da.length&&(da[2]=Sa[2]));return!0}function Ja(Z,fa,da,pa,ya,za,Da=1){fa=Ya(fa,ya,Vb);if(k.isNone(fa))return!1;if(fa===x){if(Z===pa&&da===za)return!0;Da=da+3*Da;for(let Ka=da,Wa=za;Ka<Da;Ka++,Wa++)pa[Wa]=Z[Ka];return!0}Da=
da+3*Da;for(let Ka=da,Wa=za;Ka<Da;Ka+=3,Wa+=3)fa(Z,Ka,pa,Wa);return!0}function La(Z,fa,da,pa,ya,za,Da=0){const Ka=[];for(const Wa of Z)for(const Ua of Wa)Ka.push(Ua[0],Ua[1],fa?Ua[2]:Da);if(!Ja(Ka,pa,0,Ka,za,0,Ka.length/3))return!1;pa=0;ya.length=0;for(const Wa of Z){Z=[];for(const Ua of Wa)fa&&da?Z.push([Ka[pa++],Ka[pa++],Ka[pa++],Ua[3]]):fa?Z.push([Ka[pa++],Ka[pa++],Ka[pa++]]):(da?Z.push([Ka[pa++],Ka[pa++],Ua[2]]):Z.push([Ka[pa++],Ka[pa++]]),pa++);ya.push(Z)}return!0}function Za(Z,fa,da,pa){fa=
pa+fa;if(fa<pa/2||da>fa)return Number.MAX_VALUE;Z=Math.abs(lb*Z)+Math.asin(da/fa);return Z>=Math.PI/2?Number.MAX_VALUE:da/Math.cos(Z)}function f(Z,fa,da){const pa=Math.sin(Z);Z=Math.cos(Z);const ya=Math.sin(fa);fa=Math.cos(fa);da[0]=-pa;da[4]=-ya*Z;da[8]=fa*Z;da[12]=0;da[1]=Z;da[5]=-ya*pa;da[9]=fa*pa;da[13]=0;da[2]=0;da[6]=fa;da[10]=ya;da[14]=0;da[3]=0;da[7]=0;da[11]=0;da[15]=1;return da}function C(Z,fa,da){f(Z,fa,da);u.transpose(da,da);return da}function ha(Z,fa){if(fa.spatialReference===Z)return fa.spatialReferenceId;
fa.spatialReference=Z;"metersPerUnit"in fa&&(fa.metersPerUnit=v.getMetersPerUnitForSR(Z,1));return Z.wkt===m.SphericalECEFSpatialReference.wkt?fa.spatialReferenceId=la.SPHERICAL_ECEF:w.isWGS84(Z)?fa.spatialReferenceId=la.WGS84:w.isWebMercator(Z)?fa.spatialReferenceId=la.WEB_MERCATOR:w.isPlateCarree(Z)?fa.spatialReferenceId=la.PLATE_CARREE:Z.wkt===m.WGS84ECEFSpatialReference.wkt?fa.spatialReferenceId=la.WGS84_ECEF:Z.wkid===H.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=la.CGCS2000:Z.wkt===m.SphericalPCPFMars.wkt?
fa.spatialReferenceId=la.SPHERICAL_MARS_PCPF:Z.wkt===m.SphericalPCPFMoon.wkt?fa.spatialReferenceId=la.SPHERICAL_MOON_PCPF:w.isMars(Z)?fa.spatialReferenceId=la.GCSMARS2000:w.isMoon(Z)?fa.spatialReferenceId=la.GCSMOON2000:fa.spatialReferenceId=la.UNKNOWN}function x(Z,fa,da,pa){Z!==da&&(da[pa++]=Z[fa++],da[pa++]=Z[fa++],da[pa]=Z[fa])}function T(Z,fa,da,pa){da[pa++]=Ab*(Z[fa++]/E.earth.radius);da[pa++]=Ab*(Math.PI/2-2*Math.atan(Math.exp(-Z[fa++]/E.earth.radius)));da[pa]=Z[fa]}function aa(Z,fa,da,pa){T(Z,
fa,da,pa);Aa(da,pa,da,pa)}function ba(Z,fa,da,pa){T(Z,fa,da,pa);Qa(da,pa,da,pa)}function ka(Z,fa,da,pa,ya){var za=.4999999*Math.PI;za=p.clamp(lb*Z[fa+1],-za,za);za=Math.sin(za);da[pa++]=lb*Z[fa]*ya.radius;da[pa++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));da[pa]=Z[fa+2]}function ia(Z,fa,da,pa){ka(Z,fa,da,pa,E.earth)}function U(Z,fa,da,pa){da[pa]=Z[fa]*Ub;da[pa+1]=Z[fa+1]*Ub;da[pa+2]=Z[fa+2]}function W(Z,fa,da,pa){da[pa]=Z[fa]*Db;da[pa+1]=Z[fa+1]*Db;da[pa+2]=Z[fa+2]}function ea(Z,fa,da,pa){T(Z,
fa,da,pa);U(da,pa,da,pa)}function ra(Z,fa,da,pa,ya){ya+=Z[fa+2];const za=lb*Z[fa+1];Z=lb*Z[fa];fa=Math.cos(za);da[pa++]=Math.cos(Z)*fa*ya;da[pa++]=Math.sin(Z)*fa*ya;da[pa]=Math.sin(za)*ya}function sa(Z,fa,da,pa){ra(Z,fa,da,pa,E.moon.radius)}function xa(Z,fa,da,pa){ra(Z,fa,da,pa,E.mars.radius)}function Aa(Z,fa,da,pa){ra(Z,fa,da,pa,E.earth.radius)}function Ba(Z,fa,da,pa,ya){var za=Z[fa];const Da=Z[fa+1];fa=Z[fa+2];Z=Math.sqrt(za*za+Da*Da+fa*fa);fa=p.asinClamped(fa/(0===Z?1:Z));za=Math.atan2(Da,za);
da[pa++]=Ab*za;da[pa++]=Ab*fa;da[pa]=Z-ya}function Ia(Z,fa,da,pa){Ba(Z,fa,da,pa,E.moon.radius)}function Ha(Z,fa,da,pa){Ba(Z,fa,da,pa,E.mars.radius)}function Ea(Z,fa,da,pa){Ba(Z,fa,da,pa,E.earth.radius)}function Fa(Z,fa,da,pa){Ea(Z,fa,da,pa);ia(da,pa,da,pa)}function Ga(Z,fa,da,pa){Ea(Z,fa,da,pa);Qa(da,pa,da,pa)}function Qa(Z,fa,da,pa){{var ya=E.earth;const Da=lb*Z[fa];var za=lb*Z[fa+1];Z=Z[fa+2];fa=Math.sin(za);za=Math.cos(za);const Ka=ya.radius/Math.sqrt(1-ya.eccentricitySquared*fa*fa);da[pa++]=(Ka+
Z)*za*Math.cos(Da);da[pa++]=(Ka+Z)*za*Math.sin(Da);da[pa++]=(Ka*(1-ya.eccentricitySquared)+Z)*fa}}function ta(Z,fa,da,pa){var ya=R.earthEllipsoidConstants,za=Z[fa],Da=Z[fa+1];Z=Z[fa+2];let Ka;fa=Math.abs(Z);var Wa=za*za+Da*Da;var Ua=Math.sqrt(Wa);var Ta=Wa+Z*Z;var db=Math.sqrt(Ta);za=Math.atan2(Da,za);var mb=Z*Z/Ta;Ta=Wa/Ta;Da=ya.a2/db;Wa=ya.a3-ya.a4/db;.3<Ta?(mb=fa/db*(1+Ta*(ya.a1+Da+mb*Wa)/db),db=Math.asin(mb),Da=mb*mb,Ta=Math.sqrt(1-Da)):(Ta=Ua/db*(1-mb*(ya.a5-Da-Ta*Wa)/db),db=Math.acos(Ta),Da=
1-Ta*Ta,mb=Math.sqrt(Da));Ka=1-E.earth.eccentricitySquared*Da;Da=E.earth.radius/Math.sqrt(Ka);ya=ya.a6*Da;Da=Ua-Da*Ta;Wa=fa-ya*mb;fa=Ta*Da+mb*Wa;Ua=Ta*Wa-mb*Da;ya=Ua/(ya/Ka+fa);db+=ya;0>Z&&(db=-db);da[pa++]=Ab*za;da[pa++]=Ab*db;da[pa]=fa+Ua*ya/2}function bb(Z,fa,da,pa){ta(Z,fa,da,pa);Aa(da,pa,da,pa)}function ab(Z,fa,da,pa){ta(Z,fa,da,pa);ia(da,pa,da,pa)}function Ya(Z,fa,da=$a()){return k.isNone(Z)||k.isNone(fa)?null:d(Z,fa,da).projector}function d(Z,fa,da){if(k.isNone(Z)||k.isNone(fa)||da.source.spatialReference===
Z&&da.dest.spatialReference===fa)return da;const pa=ha(Z,da.source),ya=ha(fa,da.dest);pa===la.UNKNOWN&&ya===la.UNKNOWN?w.equals(Z,fa)?da.projector=x:da.projector=null:da.projector=gb[pa][ya];return da}function $a(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:x}}let Ra=null,nb=null,rb=null,Cb={};const Tb=new r.SimpleObservable;let Fb=function(Z){function fa(){return Z.call(this,
"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}B._inheritsLoose(fa,Z);return fa}(J);var la;(function(Z){Z[Z.UNKNOWN=0]="UNKNOWN";Z[Z.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Z[Z.WGS84=2]="WGS84";Z[Z.WEB_MERCATOR=3]="WEB_MERCATOR";Z[Z.WGS84_ECEF=4]="WGS84_ECEF";Z[Z.CGCS2000=5]="CGCS2000";Z[Z.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";Z[Z.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Z[Z.GCSMARS2000=8]="GCSMARS2000";Z[Z.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";
Z[Z.GCSMOON2000=10]="GCSMOON2000";Z[Z.LON_LAT=11]="LON_LAT";Z[Z.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const Ub=E.earth.radius*Math.PI/180,Db=180/(E.earth.radius*Math.PI),gb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:x,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:U,[la.WGS84]:x,[la.WGS84_ECEF]:Qa},[la.CGCS2000]:{[la.CGCS2000]:x,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:x,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:U,[la.WGS84]:null,[la.WGS84_ECEF]:Qa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:x,[la.GCSMOON2000]:null,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,
[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:x,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:sa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:T,[la.WGS84_COMPARABLE_LON_LAT]:T,
[la.SPHERICAL_ECEF]:aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:x,[la.PLATE_CARREE]:ea,[la.WGS84]:T,[la.WGS84_ECEF]:ba},[la.WGS84_ECEF]:{[la.CGCS2000]:ta,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ta,[la.WGS84_COMPARABLE_LON_LAT]:ta,[la.SPHERICAL_ECEF]:bb,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(Z,fa,da,pa){ta(Z,fa,da,pa);U(da,pa,da,pa)},[la.WGS84]:ta,
[la.WGS84_ECEF]:x},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ea,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ea,[la.WGS84_COMPARABLE_LON_LAT]:Ea,[la.SPHERICAL_ECEF]:x,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(Z,fa,da,pa){Ea(Z,fa,da,pa);U(da,pa,da,pa)},[la.WGS84]:Ea,[la.WGS84_ECEF]:Ga},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ha,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:null,
[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:x,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ia,[la.LON_LAT]:Ia,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:x,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:x,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:x,[la.GCSMARS2000]:x,[la.GCSMOON2000]:x,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:x,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:xa,[la.SPHERICAL_MOON_PCPF]:sa,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ia,[la.PLATE_CARREE]:U,[la.WGS84]:x,[la.WGS84_ECEF]:Qa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:x,[la.WGS84_COMPARABLE_LON_LAT]:x,[la.SPHERICAL_ECEF]:Aa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:U,[la.WGS84]:x,[la.WGS84_ECEF]:Qa},[la.PLATE_CARREE]:{[la.CGCS2000]:W,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:W,
[la.WGS84_COMPARABLE_LON_LAT]:W,[la.SPHERICAL_ECEF]:function(Z,fa,da,pa){W(Z,fa,da,pa);Aa(da,pa,da,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(Z,fa,da,pa){W(Z,fa,da,pa);ia(da,pa,da,pa)},[la.PLATE_CARREE]:x,[la.WGS84]:W,[la.WGS84_ECEF]:function(Z,fa,da,pa){W(Z,fa,da,pa);Qa(da,pa,da,pa)}}},sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Gb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Vb=$a(),Bc=$a(),lb=p.deg2rad(1),
Ab=p.rad2deg(1),Sa=z.create(),fb=z.create(),vb=z.create(),Pa=z.create(),Ib=z.create();a.canProjectToWGS84ComparableLonLat=function(Z){if(k.isNone(Z))return!1;Z=ha(Z,sb);return!!gb[Z][la.WGS84_COMPARABLE_LON_LAT]};a.canProjectWithoutEngine=S;a.computeENUToSphericalPCPFLocalRotation=f;a.computeSphericalPCPFToENULocalRotation=C;a.computeTranslationToOriginAndRotation=function(Z,fa,da,pa){if(k.isNone(Z)||k.isNone(pa))return!1;var ya=ha(Z,sb),za=ha(pa,Gb);if(ya===za&&za!==la.SPHERICAL_ECEF&&za!==la.SPHERICAL_MARS_PCPF&&
za!==la.SPHERICAL_MOON_PCPF&&(ya!==la.UNKNOWN||w.equals(Z,pa)))return u.fromTranslation(da,fa),!0;if(za===la.SPHERICAL_ECEF||za===la.SPHERICAL_MARS_PCPF||za===la.SPHERICAL_MOON_PCPF){ya=gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(k.isNone(ya)||k.isNone(za))return!1;ya(fa,0,fb,0);za(fb,0,vb,0);f(lb*fb[0],lb*fb[1],da);da[12]=vb[0];da[13]=vb[1];da[14]=vb[2];return!0}if((za===la.WEB_MERCATOR||za===la.PLATE_CARREE)&&(ya===la.WGS84||ya===la.CGCS2000&&za===la.PLATE_CARREE||ya===la.SPHERICAL_ECEF||ya===la.WEB_MERCATOR)){Z=
gb[ya][la.LON_LAT];za=gb[la.LON_LAT][za];if(k.isNone(Z)||k.isNone(za))return!1;Z(fa,0,fb,0);za(fb,0,vb,0);ya===la.SPHERICAL_ECEF?C(lb*fb[0],lb*fb[1],da):u.identity(da);da[12]=vb[0];da[13]=vb[1];da[14]=vb[2];return!0}return!1};a.getProjectorName=function(Z,fa){switch(Ya(Z,fa,Vb)){case x:return"copy3";case Aa:return"wgs84ToSphericalECEF";case ia:return"wgs84ToWebMercator";case U:return"wgs84ToPlateCarree";case Qa:return"wgs84ToWGS84ECEF";case T:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";
case ba:return"webMercatorToWGS84ECEF";case ea:return"webMercatorToPlateCarree";case ta:return"wgs84ECEFToWGS84";case bb:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ea:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case Ia:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case xa:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};
a.getTransformation=N;a.getTransformations=function(Z,fa,da=null){if(k.isNone(Ra))throw new Fb;Z=Ra._getTransformationBySuitability(nb,Z,fa,da,null==da?void 0:da.spatialReference);if(null!==Z){fa=[];for(const pa of Z)fa.push(O.fromGE(pa));return fa}return[]};a.initializeProjection=function(Z,fa,da,pa){return Y.apply(this,arguments)};a.isLoaded=h;a.load=D;a.localLinearScaleFactors=function(Z,fa,da,pa){if(k.isNone(fa)||k.isNone(pa))return!1;const ya=ha(fa,sb);var za=ha(pa,Gb);if(ya===za&&ya!==la.UNKNOWN||
w.equals(fa,pa))return da[0]=1,da[1]=1,da[2]=1,!0;if(ya===la.SPHERICAL_ECEF){fa=G.length(Z);Z=fa/Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);fa/=E.earth.radius;if(za===la.WEB_MERCATOR)return da[0]=Z*fa,da[1]=Z*fa,da[2]=1,!0;if(za===la.WGS84||za===la.CGCS2000)return za=Db,da[0]=za*Z*fa,da[1]=za*fa,da[2]=1,!0}else if(ya===la.PLATE_CARREE){if(za===la.WGS84||za===la.CGCS2000)return da[0]=Db,da[1]=Db,da[2]=1,!0;if(za===la.WEB_MERCATOR)return za=Z[1]/E.earth.radius,da[0]=1,da[1]=1/Math.cos(za),da[2]=1,!0}return!1};
a.lonLatToSphericalPCPF=function(Z,fa,da,pa){const ya=Math.cos(da);Z[0]=Math.cos(fa)*ya*pa;Z[1]=Math.sin(fa)*ya*pa;Z[2]=Math.sin(da)*pa};a.lonLatToWebMercatorComparable=ka;a.project=P;a.projectBoundingRect=function(Z,fa,da,pa){if(null==Z)return!1;if(w.equals(fa,pa))return A.copy(da,Z),!0;Sa[0]=Z[0];Sa[1]=Z[1];Sa[2]=0;if(!Ja(Sa,fa,0,Sa,pa,0,1))return!1;da[0]=Sa[0];da[1]=Sa[1];Sa[0]=Z[2];Sa[1]=Z[3];Sa[2]=0;if(!Ja(Sa,fa,0,Sa,pa,0,1))return!1;da[2]=Sa[0];da[3]=Sa[1];return!0};a.projectBoundingSphere=
function(Z,fa,da,pa){if(k.isNone(fa)||k.isNone(pa))return!1;fa=d(fa,pa,Bc);if(fa.projector===x)return da[0]=Z[0],da[1]=Z[1],da[2]=Z[2],da[3]=Z[3],!0;if(k.isNone(fa.projector))return!1;const {source:ya,dest:za}=fa;if(za.spatialReferenceId===la.WEB_MERCATOR){fa=gb[ya.spatialReferenceId][la.WGS84];if(k.isNone(fa))return!1;fa(Z,0,fb,0);ia(fb,0,da,0);da[3]=Za(fb[1],Z[2],Z[3],E.earth.radius);return!0}if(ya.spatialReferenceId!==la.WGS84&&ya.spatialReferenceId!==la.CGCS2000||za.spatialReferenceId!==la.PLATE_CARREE)fa.projector(Z,
0,da,0),da[3]=Z[3]*ya.metersPerUnit/za.metersPerUnit;else{pa=gb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Da=Z[3];k.isSome(gb[ya.spatialReferenceId][la.SPHERICAL_ECEF])&&k.isSome(pa)&&(Da=Za(Z[1],Z[2],Z[3],E.earth.radius));fa.projector(Z,0,da,0);da[3]=Da}return!0};a.projectBuffer=Ja;a.projectDirection=function(Z,fa,da,pa,ya){G.copy(Pa,Z);G.add(Ib,Z,fa);wa(Pa,da,Pa,ya);wa(Ib,da,Ib,ya);G.subtract(pa,Ib,Pa);G.normalize(pa,pa)};a.projectExtent=function(Z,fa,da=fa.spatialReference,pa=0){return k.isSome(da)&&
k.isSome(oa(Z,Z.spatialReference,fa,da,pa))};a.projectMany=M;a.projectMultipoint=function(Z,fa,da=fa.spatialReference,pa=0){return k.isNone(da)?!1:k.isSome(ma(Z,Z.spatialReference,fa,da,pa))};a.projectOrLoad=function(Z,fa){return k.isNone(Z)?{pending:null,geometry:null}:w.equals(Z.spatialReference,fa)?{pending:null,geometry:Z}:w.isValid(Z.spatialReference)&&w.isValid(fa)?S(Z.spatialReference,fa)?{pending:null,geometry:q(Z,fa)}:h()?{pending:null,geometry:q(Z,fa)}:(n.trackAccess(Tb),{pending:D(),geometry:null}):
{pending:null,geometry:null}};a.projectPoint=function(Z,fa,da=fa.spatialReference,pa=0){return k.isNone(da)?!1:k.isSome(ja(Z,Z.spatialReference,fa,da,pa))};a.projectPointToVector=function(Z,fa,da,pa=0){Pa[0]=Z.x;Pa[1]=Z.y;const ya=Z.z;Pa[2]=void 0!==ya?ya:pa;return Ja(Pa,Z.spatialReference,0,fa,da,0,1)};a.projectPointToWGS84ComparableLonLat=function(Z,fa){Pa[0]=Z.x;Pa[1]=Z.y;const da=Z.z;Pa[2]=void 0!==da?da:0;return Ma(Pa,Z.spatialReference,fa)};a.projectPolygon=function(Z,fa,da=fa.spatialReference,
pa=0){return k.isSome(da)&&k.isSome(na(Z,Z.spatialReference,fa,da,pa))};a.projectPolygonToWGS84ComparableLonLat=function({hasZ:Z,spatialReference:fa,rings:da},pa,ya=0){fa=ha(fa,sb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(k.isNone(fa))return!1;Z=Z?za=>za:za=>G.set(Pa,za[0],za[1],ya);for(const za of da){da=[];for(const Da of za){const Ka=[0,0,ya];fa(Z(Da),0,Ka,0);da.push(Ka)}pa.push(da)}return!0};a.projectPolyline=function(Z,fa,da=fa.spatialReference,pa=0){return k.isSome(da)&&k.isSome(X(Z,Z.spatialReference,
fa,da,pa))};a.projectPolylineToWGS84ComparableLonLat=function({hasZ:Z,spatialReference:fa,paths:da},pa,ya=0){fa=ha(fa,sb);fa=gb[fa][la.WGS84_COMPARABLE_LON_LAT];if(k.isNone(fa))return!1;Z=Z?za=>za:za=>G.set(Pa,za[0],za[1],ya);for(const za of da){da=[];for(const Da of za){const Ka=[0,0,ya];fa(Z(Da),0,Ka,0);da.push(Ka)}pa.push(da)}return!0};a.projectVectorToDehydratedPoint=function(Z,fa,da){return Ja(Z,fa,0,Pa,da.spatialReference,0,1)?(da.x=Pa[0],da.y=Pa[1],da.z=Pa[2],da):null};a.projectVectorToPoint=
function(Z,fa,da){if(k.isNone(fa)||k.isNone(da))return null;const pa=new l({spatialReference:da});return Ja(Z,fa,0,Pa,da,0,1)?(pa.x=Pa[0],pa.y=Pa[1],pa.z=Pa[2],pa):null};a.projectVectorToVector=wa;a.projectVectorToWGS84ComparableLonLat=function(Z,fa,da){return Ma(Z,fa,da)};a.projectWithoutEngine=V;a.projectXYZToVector=qa;a.sphericalPCPFtoLonLatElevation=Ba;a.test={get loadPromise(){return rb}};a.tryProjectWithZConversion=q;a.unload=function(){rb=nb=Ra=null;Cb={}};Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(b,a,B){function J(f,C){f[0]=C[0];f[1]=C[1];f[2]=C[2];f[3]=C[3];f[4]=C[4];f[5]=C[5];f[6]=C[6];f[7]=C[7];f[8]=C[8];f[9]=C[9];f[10]=C[10];f[11]=C[11];f[12]=C[12];f[13]=C[13];f[14]=C[14];f[15]=C[15];return f}function p(f,C,ha,x,T,aa,ba,ka,ia,U,W,ea,ra,sa,xa,Aa,Ba){f[0]=C;f[1]=ha;f[2]=x;f[3]=T;f[4]=aa;f[5]=ba;f[6]=ka;f[7]=ia;f[8]=U;f[9]=W;f[10]=ea;f[11]=ra;f[12]=sa;f[13]=xa;f[14]=
Aa;f[15]=Ba;return f}function k(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function y(f,C){if(f===C){const ha=C[1],x=C[2],T=C[3],aa=C[6],ba=C[7],ka=C[11];f[1]=C[4];f[2]=C[8];f[3]=C[12];f[4]=ha;f[6]=C[9];f[7]=C[13];f[8]=x;f[9]=aa;f[11]=C[14];f[12]=T;f[13]=ba;f[14]=ka}else f[0]=C[0],f[1]=C[4],f[2]=C[8],f[3]=C[12],f[4]=C[1],f[5]=C[5],f[6]=C[9],f[7]=C[13],f[8]=C[2],f[9]=C[6],f[10]=C[10],f[11]=C[14],f[12]=C[3],f[13]=
C[7],f[14]=C[11],f[15]=C[15];return f}function v(f,C){const ha=C[0],x=C[1],T=C[2],aa=C[3],ba=C[4],ka=C[5],ia=C[6],U=C[7],W=C[8],ea=C[9],ra=C[10],sa=C[11],xa=C[12],Aa=C[13],Ba=C[14];C=C[15];const Ia=ha*ka-x*ba,Ha=ha*ia-T*ba,Ea=ha*U-aa*ba,Fa=x*ia-T*ka,Ga=x*U-aa*ka,Qa=T*U-aa*ia,ta=W*Aa-ea*xa,bb=W*Ba-ra*xa,ab=W*C-sa*xa,Ya=ea*Ba-ra*Aa,d=ea*C-sa*Aa,$a=ra*C-sa*Ba;let Ra=Ia*$a-Ha*d+Ea*Ya+Fa*ab-Ga*bb+Qa*ta;if(!Ra)return null;Ra=1/Ra;f[0]=(ka*$a-ia*d+U*Ya)*Ra;f[1]=(T*d-x*$a-aa*Ya)*Ra;f[2]=(Aa*Qa-Ba*Ga+C*Fa)*
Ra;f[3]=(ra*Ga-ea*Qa-sa*Fa)*Ra;f[4]=(ia*ab-ba*$a-U*bb)*Ra;f[5]=(ha*$a-T*ab+aa*bb)*Ra;f[6]=(Ba*Ea-xa*Qa-C*Ha)*Ra;f[7]=(W*Qa-ra*Ea+sa*Ha)*Ra;f[8]=(ba*d-ka*ab+U*ta)*Ra;f[9]=(x*ab-ha*d-aa*ta)*Ra;f[10]=(xa*Ga-Aa*Ea+C*Ia)*Ra;f[11]=(ea*Ea-W*Ga-sa*Ia)*Ra;f[12]=(ka*bb-ba*Ya-ia*ta)*Ra;f[13]=(ha*Ya-x*bb+T*ta)*Ra;f[14]=(Aa*Ha-xa*Fa-Ba*Ia)*Ra;f[15]=(W*Fa-ea*Ha+ra*Ia)*Ra;return f}function n(f,C){const ha=C[0],x=C[1],T=C[2],aa=C[3],ba=C[4],ka=C[5],ia=C[6],U=C[7],W=C[8],ea=C[9],ra=C[10],sa=C[11],xa=C[12],Aa=C[13],
Ba=C[14];C=C[15];f[0]=ka*(ra*C-sa*Ba)-ea*(ia*C-U*Ba)+Aa*(ia*sa-U*ra);f[1]=-(x*(ra*C-sa*Ba)-ea*(T*C-aa*Ba)+Aa*(T*sa-aa*ra));f[2]=x*(ia*C-U*Ba)-ka*(T*C-aa*Ba)+Aa*(T*U-aa*ia);f[3]=-(x*(ia*sa-U*ra)-ka*(T*sa-aa*ra)+ea*(T*U-aa*ia));f[4]=-(ba*(ra*C-sa*Ba)-W*(ia*C-U*Ba)+xa*(ia*sa-U*ra));f[5]=ha*(ra*C-sa*Ba)-W*(T*C-aa*Ba)+xa*(T*sa-aa*ra);f[6]=-(ha*(ia*C-U*Ba)-ba*(T*C-aa*Ba)+xa*(T*U-aa*ia));f[7]=ha*(ia*sa-U*ra)-ba*(T*sa-aa*ra)+W*(T*U-aa*ia);f[8]=ba*(ea*C-sa*Aa)-W*(ka*C-U*Aa)+xa*(ka*sa-U*ea);f[9]=-(ha*(ea*C-
sa*Aa)-W*(x*C-aa*Aa)+xa*(x*sa-aa*ea));f[10]=ha*(ka*C-U*Aa)-ba*(x*C-aa*Aa)+xa*(x*U-aa*ka);f[11]=-(ha*(ka*sa-U*ea)-ba*(x*sa-aa*ea)+W*(x*U-aa*ka));f[12]=-(ba*(ea*Ba-ra*Aa)-W*(ka*Ba-ia*Aa)+xa*(ka*ra-ia*ea));f[13]=ha*(ea*Ba-ra*Aa)-W*(x*Ba-T*Aa)+xa*(x*ra-T*ea);f[14]=-(ha*(ka*Ba-ia*Aa)-ba*(x*Ba-T*Aa)+xa*(x*ia-T*ka));f[15]=ha*(ka*ra-ia*ea)-ba*(x*ra-T*ea)+W*(x*ia-T*ka);return f}function r(f){const C=f[0],ha=f[1],x=f[2],T=f[3],aa=f[4],ba=f[5],ka=f[6],ia=f[7],U=f[8],W=f[9],ea=f[10],ra=f[11],sa=f[12],xa=f[13],
Aa=f[14];f=f[15];return(C*ba-ha*aa)*(ea*f-ra*Aa)-(C*ka-x*aa)*(W*f-ra*xa)+(C*ia-T*aa)*(W*Aa-ea*xa)+(ha*ka-x*ba)*(U*f-ra*sa)-(ha*ia-T*ba)*(U*Aa-ea*sa)+(x*ia-T*ka)*(U*xa-W*sa)}function u(f,C,ha){const x=C[0],T=C[1],aa=C[2],ba=C[3],ka=C[4],ia=C[5],U=C[6],W=C[7],ea=C[8],ra=C[9],sa=C[10],xa=C[11],Aa=C[12],Ba=C[13],Ia=C[14];C=C[15];let Ha=ha[0],Ea=ha[1],Fa=ha[2],Ga=ha[3];f[0]=Ha*x+Ea*ka+Fa*ea+Ga*Aa;f[1]=Ha*T+Ea*ia+Fa*ra+Ga*Ba;f[2]=Ha*aa+Ea*U+Fa*sa+Ga*Ia;f[3]=Ha*ba+Ea*W+Fa*xa+Ga*C;Ha=ha[4];Ea=ha[5];Fa=ha[6];
Ga=ha[7];f[4]=Ha*x+Ea*ka+Fa*ea+Ga*Aa;f[5]=Ha*T+Ea*ia+Fa*ra+Ga*Ba;f[6]=Ha*aa+Ea*U+Fa*sa+Ga*Ia;f[7]=Ha*ba+Ea*W+Fa*xa+Ga*C;Ha=ha[8];Ea=ha[9];Fa=ha[10];Ga=ha[11];f[8]=Ha*x+Ea*ka+Fa*ea+Ga*Aa;f[9]=Ha*T+Ea*ia+Fa*ra+Ga*Ba;f[10]=Ha*aa+Ea*U+Fa*sa+Ga*Ia;f[11]=Ha*ba+Ea*W+Fa*xa+Ga*C;Ha=ha[12];Ea=ha[13];Fa=ha[14];Ga=ha[15];f[12]=Ha*x+Ea*ka+Fa*ea+Ga*Aa;f[13]=Ha*T+Ea*ia+Fa*ra+Ga*Ba;f[14]=Ha*aa+Ea*U+Fa*sa+Ga*Ia;f[15]=Ha*ba+Ea*W+Fa*xa+Ga*C;return f}function G(f,C,ha){const x=ha[0],T=ha[1];ha=ha[2];if(C===f)f[12]=C[0]*
x+C[4]*T+C[8]*ha+C[12],f[13]=C[1]*x+C[5]*T+C[9]*ha+C[13],f[14]=C[2]*x+C[6]*T+C[10]*ha+C[14],f[15]=C[3]*x+C[7]*T+C[11]*ha+C[15];else{const aa=C[0],ba=C[1],ka=C[2],ia=C[3],U=C[4],W=C[5],ea=C[6],ra=C[7],sa=C[8],xa=C[9],Aa=C[10],Ba=C[11];f[0]=aa;f[1]=ba;f[2]=ka;f[3]=ia;f[4]=U;f[5]=W;f[6]=ea;f[7]=ra;f[8]=sa;f[9]=xa;f[10]=Aa;f[11]=Ba;f[12]=aa*x+U*T+sa*ha+C[12];f[13]=ba*x+W*T+xa*ha+C[13];f[14]=ka*x+ea*T+Aa*ha+C[14];f[15]=ia*x+ra*T+Ba*ha+C[15]}return f}function z(f,C,ha){const x=ha[0],T=ha[1];ha=ha[2];f[0]=
C[0]*x;f[1]=C[1]*x;f[2]=C[2]*x;f[3]=C[3]*x;f[4]=C[4]*T;f[5]=C[5]*T;f[6]=C[6]*T;f[7]=C[7]*T;f[8]=C[8]*ha;f[9]=C[9]*ha;f[10]=C[10]*ha;f[11]=C[11]*ha;f[12]=C[12];f[13]=C[13];f[14]=C[14];f[15]=C[15];return f}function e(f,C,ha,x){let T=x[0],aa=x[1];x=x[2];let ba=Math.sqrt(T*T+aa*aa+x*x);var ka=void 0,ia=void 0;let U=void 0,W=void 0,ea=void 0,ra=void 0,sa=void 0,xa=void 0,Aa=void 0,Ba=void 0,Ia=void 0,Ha=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Qa=void 0,ta=void 0,bb=void 0,ab=void 0,Ya=void 0,d=void 0,$a=
void 0;ia=ka=void 0;if(ba<B.EPSILON)return null;ba=1/ba;T*=ba;aa*=ba;x*=ba;ka=Math.sin(ha);ia=Math.cos(ha);U=1-ia;W=C[0];ea=C[1];ra=C[2];sa=C[3];xa=C[4];Aa=C[5];Ba=C[6];Ia=C[7];Ha=C[8];Ea=C[9];Fa=C[10];Ga=C[11];Qa=T*T*U+ia;ta=aa*T*U+x*ka;bb=x*T*U-aa*ka;ab=T*aa*U-x*ka;Ya=aa*aa*U+ia;d=x*aa*U+T*ka;$a=T*x*U+aa*ka;ka=aa*x*U-T*ka;ia=x*x*U+ia;f[0]=W*Qa+xa*ta+Ha*bb;f[1]=ea*Qa+Aa*ta+Ea*bb;f[2]=ra*Qa+Ba*ta+Fa*bb;f[3]=sa*Qa+Ia*ta+Ga*bb;f[4]=W*ab+xa*Ya+Ha*d;f[5]=ea*ab+Aa*Ya+Ea*d;f[6]=ra*ab+Ba*Ya+Fa*d;f[7]=sa*
ab+Ia*Ya+Ga*d;f[8]=W*$a+xa*ka+Ha*ia;f[9]=ea*$a+Aa*ka+Ea*ia;f[10]=ra*$a+Ba*ka+Fa*ia;f[11]=sa*$a+Ia*ka+Ga*ia;C!==f&&(f[12]=C[12],f[13]=C[13],f[14]=C[14],f[15]=C[15]);return f}function F(f,C,ha){const x=Math.sin(ha);ha=Math.cos(ha);const T=C[4],aa=C[5],ba=C[6],ka=C[7],ia=C[8],U=C[9],W=C[10],ea=C[11];C!==f&&(f[0]=C[0],f[1]=C[1],f[2]=C[2],f[3]=C[3],f[12]=C[12],f[13]=C[13],f[14]=C[14],f[15]=C[15]);f[4]=T*ha+ia*x;f[5]=aa*ha+U*x;f[6]=ba*ha+W*x;f[7]=ka*ha+ea*x;f[8]=ia*ha-T*x;f[9]=U*ha-aa*x;f[10]=W*ha-ba*x;
f[11]=ea*ha-ka*x;return f}function c(f,C,ha){const x=Math.sin(ha);ha=Math.cos(ha);const T=C[0],aa=C[1],ba=C[2],ka=C[3],ia=C[8],U=C[9],W=C[10],ea=C[11];C!==f&&(f[4]=C[4],f[5]=C[5],f[6]=C[6],f[7]=C[7],f[12]=C[12],f[13]=C[13],f[14]=C[14],f[15]=C[15]);f[0]=T*ha-ia*x;f[1]=aa*ha-U*x;f[2]=ba*ha-W*x;f[3]=ka*ha-ea*x;f[8]=T*x+ia*ha;f[9]=aa*x+U*ha;f[10]=ba*x+W*ha;f[11]=ka*x+ea*ha;return f}function l(f,C,ha){const x=Math.sin(ha);ha=Math.cos(ha);const T=C[0],aa=C[1],ba=C[2],ka=C[3],ia=C[4],U=C[5],W=C[6],ea=C[7];
C!==f&&(f[8]=C[8],f[9]=C[9],f[10]=C[10],f[11]=C[11],f[12]=C[12],f[13]=C[13],f[14]=C[14],f[15]=C[15]);f[0]=T*ha+ia*x;f[1]=aa*ha+U*x;f[2]=ba*ha+W*x;f[3]=ka*ha+ea*x;f[4]=ia*ha-T*x;f[5]=U*ha-aa*x;f[6]=W*ha-ba*x;f[7]=ea*ha-ka*x;return f}function L(f,C){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=C[0];f[13]=C[1];f[14]=C[2];f[15]=1;return f}function K(f,C){f[0]=C[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=C[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=C[2];f[11]=0;f[12]=
0;f[13]=0;f[14]=0;f[15]=1;return f}function m(f,C,ha){let x=ha[0],T=ha[1];ha=ha[2];let aa=Math.sqrt(x*x+T*T+ha*ha),ba=void 0,ka=void 0,ia=void 0;if(aa<B.EPSILON)return null;aa=1/aa;x*=aa;T*=aa;ha*=aa;ba=Math.sin(C);ka=Math.cos(C);ia=1-ka;f[0]=x*x*ia+ka;f[1]=T*x*ia+ha*ba;f[2]=ha*x*ia-T*ba;f[3]=0;f[4]=x*T*ia-ha*ba;f[5]=T*T*ia+ka;f[6]=ha*T*ia+x*ba;f[7]=0;f[8]=x*ha*ia+T*ba;f[9]=T*ha*ia-x*ba;f[10]=ha*ha*ia+ka;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function A(f,C){const ha=Math.sin(C);C=Math.cos(C);
f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=C;f[6]=ha;f[7]=0;f[8]=0;f[9]=-ha;f[10]=C;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function E(f,C){const ha=Math.sin(C);C=Math.cos(C);f[0]=C;f[1]=0;f[2]=-ha;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=ha;f[9]=0;f[10]=C;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function R(f,C){const ha=Math.sin(C);C=Math.cos(C);f[0]=C;f[1]=ha;f[2]=0;f[3]=0;f[4]=-ha;f[5]=C;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function O(f,
C,ha){var x=C[0],T=C[1],aa=C[2],ba=C[3],ka=x+x,ia=T+T;const U=aa+aa;C=x*ka;const W=x*ia;x*=U;const ea=T*ia;T*=U;aa*=U;ka*=ba;ia*=ba;ba*=U;f[0]=1-(ea+aa);f[1]=W+ba;f[2]=x-ia;f[3]=0;f[4]=W-ba;f[5]=1-(C+aa);f[6]=T+ka;f[7]=0;f[8]=x+ia;f[9]=T-ka;f[10]=1-(C+ea);f[11]=0;f[12]=ha[0];f[13]=ha[1];f[14]=ha[2];f[15]=1;return f}function w(f,C){const ha=Za,x=-C[0],T=-C[1],aa=-C[2],ba=C[3],ka=C[4],ia=C[5],U=C[6],W=C[7],ea=x*x+T*T+aa*aa+ba*ba;0<ea?(ha[0]=2*(ka*ba+W*x+ia*aa-U*T)/ea,ha[1]=2*(ia*ba+W*T+U*x-ka*aa)/ea,
ha[2]=2*(U*ba+W*aa+ka*T-ia*x)/ea):(ha[0]=2*(ka*ba+W*x+ia*aa-U*T),ha[1]=2*(ia*ba+W*T+U*x-ka*aa),ha[2]=2*(U*ba+W*aa+ka*T-ia*x));O(f,C,ha);return f}function H(f,C){f[0]=C[12];f[1]=C[13];f[2]=C[14];return f}function g(f,C){const ha=C[0],x=C[1],T=C[2],aa=C[4],ba=C[5],ka=C[6],ia=C[8],U=C[9];C=C[10];f[0]=Math.sqrt(ha*ha+x*x+T*T);f[1]=Math.sqrt(aa*aa+ba*ba+ka*ka);f[2]=Math.sqrt(ia*ia+U*U+C*C);return f}function h(f,C){const ha=C[0]+C[5]+C[10];let x=0;0<ha?(x=2*Math.sqrt(ha+1),f[3]=.25*x,f[0]=(C[6]-C[9])/x,
f[1]=(C[8]-C[2])/x,f[2]=(C[1]-C[4])/x):C[0]>C[5]&&C[0]>C[10]?(x=2*Math.sqrt(1+C[0]-C[5]-C[10]),f[3]=(C[6]-C[9])/x,f[0]=.25*x,f[1]=(C[1]+C[4])/x,f[2]=(C[8]+C[2])/x):C[5]>C[10]?(x=2*Math.sqrt(1+C[5]-C[0]-C[10]),f[3]=(C[8]-C[2])/x,f[0]=(C[1]+C[4])/x,f[1]=.25*x,f[2]=(C[6]+C[9])/x):(x=2*Math.sqrt(1+C[10]-C[0]-C[5]),f[3]=(C[1]-C[4])/x,f[0]=(C[8]+C[2])/x,f[1]=(C[6]+C[9])/x,f[2]=.25*x);return f}function D(f,C,ha,x){var T=C[0],aa=C[1],ba=C[2],ka=C[3],ia=T+T,U=aa+aa,W=ba+ba;C=T*ia;const ea=T*U;T*=W;const ra=
aa*U;aa*=W;ba*=W;ia*=ka;U*=ka;ka*=W;W=x[0];const sa=x[1];x=x[2];f[0]=(1-(ra+ba))*W;f[1]=(ea+ka)*W;f[2]=(T-U)*W;f[3]=0;f[4]=(ea-ka)*sa;f[5]=(1-(C+ba))*sa;f[6]=(aa+ia)*sa;f[7]=0;f[8]=(T+U)*x;f[9]=(aa-ia)*x;f[10]=(1-(C+ra))*x;f[11]=0;f[12]=ha[0];f[13]=ha[1];f[14]=ha[2];f[15]=1;return f}function P(f,C,ha,x,T){var aa=C[0],ba=C[1],ka=C[2],ia=C[3],U=aa+aa,W=ba+ba,ea=ka+ka;C=aa*U;var ra=aa*W,sa=aa*ea;aa=ba*W;ba*=ea;var xa=ka*ea;ka=ia*U;W*=ia;const Aa=ia*ea;var Ba=x[0],Ia=x[1];ea=x[2];x=T[0];ia=T[1];T=T[2];
U=(1-(aa+xa))*Ba;const Ha=(ra+Aa)*Ba;Ba*=sa-W;ra=(ra-Aa)*Ia;xa=(1-(C+xa))*Ia;Ia*=ba+ka;sa=(sa+W)*ea;ba=(ba-ka)*ea;C=(1-(C+aa))*ea;f[0]=U;f[1]=Ha;f[2]=Ba;f[3]=0;f[4]=ra;f[5]=xa;f[6]=Ia;f[7]=0;f[8]=sa;f[9]=ba;f[10]=C;f[11]=0;f[12]=ha[0]+x-(U*x+ra*ia+sa*T);f[13]=ha[1]+ia-(Ha*x+xa*ia+ba*T);f[14]=ha[2]+T-(Ba*x+Ia*ia+C*T);f[15]=1;return f}function M(f,C){var ha=C[0],x=C[1],T=C[2];C=C[3];var aa=ha+ha,ba=x+x;const ka=T+T;ha*=aa;const ia=x*aa;x*=ba;const U=T*aa,W=T*ba;T*=ka;aa*=C;ba*=C;C*=ka;f[0]=1-x-T;f[1]=
ia+C;f[2]=U-ba;f[3]=0;f[4]=ia-C;f[5]=1-ha-T;f[6]=W+aa;f[7]=0;f[8]=U+ba;f[9]=W-aa;f[10]=1-ha-x;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function N(f,C,ha,x,T,aa,ba){const ka=1/(ha-C),ia=1/(T-x),U=1/(aa-ba);f[0]=2*aa*ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*aa*ia;f[6]=0;f[7]=0;f[8]=(ha+C)*ka;f[9]=(T+x)*ia;f[10]=(ba+aa)*U;f[11]=-1;f[12]=0;f[13]=0;f[14]=ba*aa*2*U;f[15]=0;return f}function q(f,C,ha,x,T){C=1/Math.tan(C/2);let aa=void 0;f[0]=C/ha;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=C;f[6]=0;f[7]=0;f[8]=
0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!=T&&Infinity!==T?(aa=1/(x-T),f[10]=(T+x)*aa,f[14]=2*T*x*aa):(f[10]=-1,f[14]=-2*x);return f}function S(f,C,ha,x){const T=Math.tan(C.upDegrees*Math.PI/180),aa=Math.tan(C.downDegrees*Math.PI/180),ba=Math.tan(C.leftDegrees*Math.PI/180);C=Math.tan(C.rightDegrees*Math.PI/180);const ka=2/(ba+C),ia=2/(T+aa);f[0]=ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=ia;f[6]=0;f[7]=0;f[8]=-((ba-C)*ka*.5);f[9]=(T-aa)*ia*.5;f[10]=x/(ha-x);f[11]=-1;f[12]=0;f[13]=0;f[14]=x*ha/(ha-x);
f[15]=0;return f}function Y(f,C,ha,x,T,aa,ba){const ka=1/(C-ha),ia=1/(x-T),U=1/(aa-ba);f[0]=-2*ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=-2*ia;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=2*U;f[11]=0;f[12]=(C+ha)*ka;f[13]=(T+x)*ia;f[14]=(ba+aa)*U;f[15]=1;return f}function V(f,C,ha,x){let T=void 0,aa=void 0;var ba=void 0,ka=void 0;let ia=void 0,U=void 0;var W=void 0,ea=void 0;let ra=void 0,sa=void 0;const xa=C[0],Aa=C[1];C=C[2];ba=x[0];ka=x[1];x=x[2];W=ha[0];ea=ha[1];ha=ha[2];if(Math.abs(xa-W)<B.EPSILON&&Math.abs(Aa-
ea)<B.EPSILON&&Math.abs(C-ha)<B.EPSILON)return k(f);W=xa-W;ea=Aa-ea;ra=C-ha;sa=1/Math.sqrt(W*W+ea*ea+ra*ra);W*=sa;ea*=sa;ra*=sa;T=ka*ra-x*ea;aa=x*W-ba*ra;ba=ba*ea-ka*W;(sa=Math.sqrt(T*T+aa*aa+ba*ba))?(sa=1/sa,T*=sa,aa*=sa,ba*=sa):ba=aa=T=0;ka=ea*ba-ra*aa;ia=ra*T-W*ba;U=W*aa-ea*T;(sa=Math.sqrt(ka*ka+ia*ia+U*U))?(sa=1/sa,ka*=sa,ia*=sa,U*=sa):U=ia=ka=0;f[0]=T;f[1]=ka;f[2]=W;f[3]=0;f[4]=aa;f[5]=ia;f[6]=ea;f[7]=0;f[8]=ba;f[9]=U;f[10]=ra;f[11]=0;f[12]=-(T*xa+aa*Aa+ba*C);f[13]=-(ka*xa+ia*Aa+U*C);f[14]=-(W*
xa+ea*Aa+ra*C);f[15]=1;return f}function ja(f,C,ha,x){const T=C[0],aa=C[1];C=C[2];var ba=x[0];const ka=x[1];var ia=x[2];x=T-ha[0];let U=aa-ha[1];ha=C-ha[2];let W=x*x+U*U+ha*ha;0<W&&(W=1/Math.sqrt(W),x*=W,U*=W,ha*=W);let ea=ka*ha-ia*U;ia=ia*x-ba*ha;ba=ba*U-ka*x;W=ea*ea+ia*ia+ba*ba;0<W&&(W=1/Math.sqrt(W),ea*=W,ia*=W,ba*=W);f[0]=ea;f[1]=ia;f[2]=ba;f[3]=0;f[4]=U*ba-ha*ia;f[5]=ha*ea-x*ba;f[6]=x*ia-U*ea;f[7]=0;f[8]=x;f[9]=U;f[10]=ha;f[11]=0;f[12]=T;f[13]=aa;f[14]=C;f[15]=1;return f}function ma(f){return"mat4("+
f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}function X(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+f[6]**2+f[7]**2+f[8]**2+f[9]**2+f[10]**2+f[11]**2+f[12]**2+f[13]**2+f[14]**2+f[15]**2)}function na(f,C,ha){f[0]=C[0]+ha[0];f[1]=C[1]+ha[1];f[2]=C[2]+ha[2];f[3]=C[3]+ha[3];f[4]=C[4]+ha[4];f[5]=C[5]+ha[5];f[6]=C[6]+ha[6];f[7]=C[7]+ha[7];f[8]=C[8]+ha[8];f[9]=C[9]+
ha[9];f[10]=C[10]+ha[10];f[11]=C[11]+ha[11];f[12]=C[12]+ha[12];f[13]=C[13]+ha[13];f[14]=C[14]+ha[14];f[15]=C[15]+ha[15];return f}function oa(f,C,ha){f[0]=C[0]-ha[0];f[1]=C[1]-ha[1];f[2]=C[2]-ha[2];f[3]=C[3]-ha[3];f[4]=C[4]-ha[4];f[5]=C[5]-ha[5];f[6]=C[6]-ha[6];f[7]=C[7]-ha[7];f[8]=C[8]-ha[8];f[9]=C[9]-ha[9];f[10]=C[10]-ha[10];f[11]=C[11]-ha[11];f[12]=C[12]-ha[12];f[13]=C[13]-ha[13];f[14]=C[14]-ha[14];f[15]=C[15]-ha[15];return f}function qa(f,C,ha){f[0]=C[0]*ha;f[1]=C[1]*ha;f[2]=C[2]*ha;f[3]=C[3]*
ha;f[4]=C[4]*ha;f[5]=C[5]*ha;f[6]=C[6]*ha;f[7]=C[7]*ha;f[8]=C[8]*ha;f[9]=C[9]*ha;f[10]=C[10]*ha;f[11]=C[11]*ha;f[12]=C[12]*ha;f[13]=C[13]*ha;f[14]=C[14]*ha;f[15]=C[15]*ha;return f}function wa(f,C,ha,x){f[0]=C[0]+ha[0]*x;f[1]=C[1]+ha[1]*x;f[2]=C[2]+ha[2]*x;f[3]=C[3]+ha[3]*x;f[4]=C[4]+ha[4]*x;f[5]=C[5]+ha[5]*x;f[6]=C[6]+ha[6]*x;f[7]=C[7]+ha[7]*x;f[8]=C[8]+ha[8]*x;f[9]=C[9]+ha[9]*x;f[10]=C[10]+ha[10]*x;f[11]=C[11]+ha[11]*x;f[12]=C[12]+ha[12]*x;f[13]=C[13]+ha[13]*x;f[14]=C[14]+ha[14]*x;f[15]=C[15]+ha[15]*
x;return f}function Ma(f,C){return f[0]===C[0]&&f[1]===C[1]&&f[2]===C[2]&&f[3]===C[3]&&f[4]===C[4]&&f[5]===C[5]&&f[6]===C[6]&&f[7]===C[7]&&f[8]===C[8]&&f[9]===C[9]&&f[10]===C[10]&&f[11]===C[11]&&f[12]===C[12]&&f[13]===C[13]&&f[14]===C[14]&&f[15]===C[15]}function Ja(f,C){if(f===C)return!0;const ha=f[0],x=f[1],T=f[2],aa=f[3],ba=f[4],ka=f[5],ia=f[6],U=f[7],W=f[8],ea=f[9],ra=f[10],sa=f[11],xa=f[12],Aa=f[13],Ba=f[14];f=f[15];const Ia=C[0],Ha=C[1],Ea=C[2],Fa=C[3],Ga=C[4],Qa=C[5],ta=C[6],bb=C[7],ab=C[8],
Ya=C[9],d=C[10],$a=C[11],Ra=C[12],nb=C[13],rb=C[14];C=C[15];return Math.abs(ha-Ia)<=B.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Ia))&&Math.abs(x-Ha)<=B.EPSILON*Math.max(1,Math.abs(x),Math.abs(Ha))&&Math.abs(T-Ea)<=B.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ea))&&Math.abs(aa-Fa)<=B.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Fa))&&Math.abs(ba-Ga)<=B.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Ga))&&Math.abs(ka-Qa)<=B.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Qa))&&Math.abs(ia-ta)<=B.EPSILON*Math.max(1,Math.abs(ia),
Math.abs(ta))&&Math.abs(U-bb)<=B.EPSILON*Math.max(1,Math.abs(U),Math.abs(bb))&&Math.abs(W-ab)<=B.EPSILON*Math.max(1,Math.abs(W),Math.abs(ab))&&Math.abs(ea-Ya)<=B.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ya))&&Math.abs(ra-d)<=B.EPSILON*Math.max(1,Math.abs(ra),Math.abs(d))&&Math.abs(sa-$a)<=B.EPSILON*Math.max(1,Math.abs(sa),Math.abs($a))&&Math.abs(xa-Ra)<=B.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ra))&&Math.abs(Aa-nb)<=B.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(nb))&&Math.abs(Ba-rb)<=B.EPSILON*Math.max(1,
Math.abs(Ba),Math.abs(rb))&&Math.abs(f-C)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))}function La(f){const C=B.EPSILON,ha=f[0],x=f[1],T=f[2],aa=f[4],ba=f[5],ka=f[6],ia=f[8],U=f[9];f=f[10];return Math.abs(1-(ha*ha+aa*aa+ia*ia))<=C&&Math.abs(1-(x*x+ba*ba+U*U))<=C&&Math.abs(1-(T*T+ka*ka+f*f))<=C}const Za=a.create();a=Object.freeze(Object.defineProperty({__proto__:null,copy:J,set:p,identity:k,transpose:y,invert:v,adjoint:n,determinant:r,multiply:u,translate:G,scale:z,rotate:e,rotateX:F,rotateY:c,rotateZ:l,
fromTranslation:L,fromScaling:K,fromRotation:m,fromXRotation:A,fromYRotation:E,fromZRotation:R,fromRotationTranslation:O,fromQuat2:w,getTranslation:H,getScaling:g,getRotation:h,fromRotationTranslationScale:D,fromRotationTranslationScaleOrigin:P,fromQuat:M,frustum:N,perspective:q,perspectiveFromFieldOfView:S,ortho:Y,lookAt:V,targetTo:ja,str:ma,frob:X,add:na,subtract:oa,multiplyScalar:qa,multiplyScalarAndAdd:wa,exactEquals:Ma,equals:Ja,isOrthoNormal:La,mul:u,sub:oa},Symbol.toStringTag,{value:"Module"}));
b.add=na;b.adjoint=n;b.copy=J;b.determinant=r;b.equals=Ja;b.exactEquals=Ma;b.frob=X;b.fromQuat=M;b.fromQuat2=w;b.fromRotation=m;b.fromRotationTranslation=O;b.fromRotationTranslationScale=D;b.fromRotationTranslationScaleOrigin=P;b.fromScaling=K;b.fromTranslation=L;b.fromXRotation=A;b.fromYRotation=E;b.fromZRotation=R;b.frustum=N;b.getRotation=h;b.getScaling=g;b.getTranslation=H;b.identity=k;b.invert=v;b.isOrthoNormal=La;b.lookAt=V;b.mat4=a;b.mul=u;b.multiply=u;b.multiplyScalar=qa;b.multiplyScalarAndAdd=
wa;b.ortho=Y;b.perspective=q;b.perspectiveFromFieldOfView=S;b.rotate=e;b.rotateX=F;b.rotateY=c;b.rotateZ=l;b.scale=z;b.set=p;b.str=ma;b.sub=oa;b.subtract=oa;b.targetTo=ja;b.translate=G;b.transpose=y})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(b,a,B,J,p){function k(){return!!a._pe}function y(){return!!p("esri-wasm")}function v(){return e?e:e=(new Promise((c,l)=>b(["./pe-wasm"],c,l))).then(c=>c.peWasm).then(({default:c})=>
c({locateFile:l=>J.getAssetUrl(`esri/geometry/support/${l}`)})).then(c=>{n(c)})}function n(c){function l(m,A,E){m[A]=E(m[A])}a._pe=c;a.PeDefs.init();a.PeGTlistExtended.init();a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeGCSExtent=function(m){function A(){return m.apply(this,arguments)||this}B._inheritsLoose(A,m);A.prototype.destroy=function(){a._pe.destroy(this)};return A}(a._pe.PeGCSExtent);c=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,
a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var L of c)l(L.prototype,"getName",m=>function(){return m.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const m of[a._pe.PeGeogtran,a._pe.PeProjcs])l(m.prototype,"getParameters",A=>function(){const E=Array(a.PeDefs.PE_PARM_MAX);let R=A.call(this);for(let O=0;O<E.length;O++){const w=a._pe.getValue(R,"*");E[O]=w?a._pe.wrapPointer(w,a._pe.PeParameter):null;R+=Int32Array.BYTES_PER_ELEMENT}return E});l(a._pe.PeHorizon.prototype,"getCoord",
m=>function(){const A=this.getSize();if(!A)return null;const E=[],R=m.call(this);z(E,A,R);return E});l(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",m=>{const A=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){let E=null;var R=m.call(this);if(!a._pe.compare(R,a._pe.NULL)){E=[R];const O=this.getSteps();if(1<O){R=a._pe.getPointer(R);for(let w=1;w<O;w++)E.push(a._pe.wrapPointer(R+A*w,a._pe.PeGTlistExtendedGTs))}}return E}});const K=a._pe._pe_getPeHorizonSize();L=m=>function(){let A=this._cache;
A||(this._cache=A=new Map);if(A.has(m))return A.get(m);let E=null;var R=m.call(this);if(!a._pe.compare(R,a._pe.NULL)){E=[R];const O=R.getNump();if(1<O){R=a._pe.getPointer(R);for(let w=1;w<O;w++)E.push(a._pe.wrapPointer(R+K*w,a._pe.PeHorizon))}}A.set(m,E);return E};l(a._pe.PeProjcs.prototype,"horizonGcsGenerate",L);l(a._pe.PeProjcs.prototype,"horizonPcsGenerate",L);a._pe.PeObject.prototype.toString=function(m=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();const A=a._pe.getPointer(this),E=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));
return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(A,m,E))}}function r(c){if(c){var l=a._pe.getClass(c);l&&(l=a._pe.getCache(l))&&(c=a._pe.getPointer(c))&&delete l[c]}}function u(c,l){const L=[];l=Array(l);for(let K=0;K<c;K++)L.push(a._pe.ensureInt8(l));return L}function G(c){let l;Array.isArray(c[0])?(l=[],c.forEach(L=>{l.push(L[0],L[1])})):l=c;return l}function z(c,l,L,K=!1){if(K)for(K=0;K<2*l;K++)c[K]=a._pe.getValue(L+K*Float64Array.BYTES_PER_ELEMENT,"double");else{K=0===c.length;for(let m=
0;m<l;m++)K&&(c[m]=Array(2)),c[m][0]=a._pe.getValue(L,"double"),c[m][1]=a._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let e;a._pe=null;a.PeCSTransformations=void 0;(function(c){function l(m,A,E){a._pe.ensureCache.prepare();var R=G(E);const O=E===R;R=a._pe.ensureFloat64(R);(m=a._pe._pe_geog_to_proj(a._pe.getPointer(m),A,R))&&z(E,A,R,O);return m}function L(m,A,E){return K(m,A,E,0)}function K(m,A,E,R){a._pe.ensureCache.prepare();var O=G(E);const w=E===
O;O=a._pe.ensureFloat64(O);(m=a._pe._pe_proj_to_geog_center(a._pe.getPointer(m),A,O,R))&&z(E,A,O,w);return m}c.geogToProj=l;c.projGeog=function(m,A,E,R){switch(R){case a.PeDefs.PE_TRANSFORM_P_TO_G:return L(m,A,E);case a.PeDefs.PE_TRANSFORM_G_TO_P:return l(m,A,E)}return 0};c.projToGeog=L;c.projToGeogCenter=K})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;
c.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=
a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=
a._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||
(a.PeDefs={}));a.PeFactory=void 0;(function(c){function l(A,E){let R=null,O=L[A];O||(O={},L[A]=O);O.hasOwnProperty(String(E))?R=O[E]:(A=a._pe.PeFactory.prototype.factoryByType(A,E),a._pe.compare(A,a._pe.NULL)||(R=A,O[E]=R));return R=m(R)}const L={},K={},m=A=>{if(A){const E=A.getType();switch(E){case a.PeDefs.PE_TYPE_GEOGCS:A=a._pe.castObject(A,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:A=a._pe.castObject(A,a._pe.PeProjcs);break;case a.PeDefs.PE_TYPE_GEOGTRAN:A=a._pe.castObject(A,a._pe.PeGeogtran);
break;default:E&a.PeDefs.PE_TYPE_UNIT&&(A=a._pe.castObject(A,a._pe.PeUnit))}}return A};c.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(A){return l(a.PeDefs.PE_TYPE_COORDSYS,A)};c.factoryByType=l;c.fromString=function(A,E){let R=null,O=K[A];O||(O={},K[A]=O);O.hasOwnProperty(E)?R=O[E]:(A=a._pe.PeFactory.prototype.fromString(A,E),a._pe.compare(A,a._pe.NULL)||(R=A,O[E]=R));return R=m(R)};c.geogcs=function(A){return l(a.PeDefs.PE_TYPE_GEOGCS,A)};c.geogtran=function(A){return l(a.PeDefs.PE_TYPE_GEOGTRAN,
A)};c.getCode=function(A){return a._pe.PeFactory.prototype.getCode(A)};c.projcs=function(A){return l(a.PeDefs.PE_TYPE_PROJCS,A)};c.unit=function(A){return l(a.PeDefs.PE_TYPE_UNIT,A)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;a.PeGTlistExtended=void 0;(function(c){let l;c.init=function(){c.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=a._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(L,K,m,A,E,R){let O=null;const w=new a._pe.PeInteger(R);try{const H=
a._pe.PeGTlistExtended.prototype.getGTlist(L,K,m,A,E,w);if(R=w.val)if(O=[H],1<R){const g=a._pe.getPointer(H);for(L=1;L<R;L++)O.push(a._pe.wrapPointer(g+l*L,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(w)}return O}})(a.PeGTlistExtended||(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(l){if(l&&l.length){for(const L of l)r(L),L.getEntries().forEach(K=>{r(K);K=K.getGeogtran();r(K);K.getParameters().forEach(r);[K.getGeogcs1(),K.getGeogcs2()].forEach(m=>{r(m);
const A=m.getDatum();r(A);r(A.getSpheroid());r(m.getPrimem());r(m.getUnit())})});a._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(l,L,K,m,A){a._pe.ensureCache.prepare();var E=G(K);const R=K===E;E=a._pe.ensureFloat64(E);let O=0;m&&(O=a._pe.ensureFloat64(m));(l=a._pe._pe_geog_to_geog(a._pe.getPointer(l),L,E,O,A))&&z(K,L,E,R);return l}})(a.PeGTTransformations||(a.PeGTTransformations=
{}));a.PeNotationDms=void 0;(function(c){const l=(K,m,A,E,R,O)=>{a._pe.ensureCache.prepare();switch(K){case "dd":var w=a._pe._pe_geog_to_dd;var H=a.PeDefs.PE_DD_MAX;break;case "ddm":w=a._pe._pe_geog_to_ddm;H=a.PeDefs.PE_DDM_MAX;break;case "dms":w=a._pe._pe_geog_to_dms,H=a.PeDefs.PE_DMS_MAX}K=0;m&&(K=a._pe.getPointer(m));m=G(E);m=a._pe.ensureFloat64(m);H=u(A,H);E=a._pe.ensureInt32(H);if(R=w(K,A,m,R,E))for(w=0;w<A;w++)O[w]=a._pe.UTF8ToString(H[w]);return R},L=(K,m,A,E,R)=>{a._pe.ensureCache.prepare();
switch(K){case "dd":var O=a._pe._pe_dd_to_geog;break;case "ddm":O=a._pe._pe_ddm_to_geog;break;case "dms":O=a._pe._pe_dms_to_geog}K=0;m&&(K=a._pe.getPointer(m));m=E.map(w=>a._pe.ensureString(w));E=a._pe.ensureInt32(m);m=a._pe.ensureFloat64(Array(2*A));(O=O(K,A,E,m))&&z(R,A,m);return O};c.geogToDms=function(K,m,A,E,R){return l("dms",K,m,A,E,R)};c.dmsToGeog=function(K,m,A,E){return L("dms",K,m,A,E)};c.geogToDdm=function(K,m,A,E,R){return l("ddm",K,m,A,E,R)};c.ddmToGeog=function(K,m,A,E){return L("ddm",
K,m,A,E)};c.geogToDd=function(K,m,A,E,R){return l("dd",K,m,A,E,R)};c.ddToGeog=function(K,m,A,E){return L("dd",K,m,A,E)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
c.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(l,L,K,m,A,E,R){a._pe.ensureCache.prepare();let O=0;l&&(O=a._pe.getPointer(l));l=G(K);K=a._pe.ensureFloat64(l);l=u(L,a.PeDefs.PE_MGRS_MAX);const w=a._pe.ensureInt32(l);if(m=a._pe._pe_geog_to_mgrs_extended(O,L,K,m,A,E,w))for(A=0;A<L;A++)R[A]=a._pe.UTF8ToString(l[A]);return m};c.mgrsToGeogExtended=function(l,L,K,m,A){a._pe.ensureCache.prepare();let E=0;l&&(E=a._pe.getPointer(l));l=K.map(R=>a._pe.ensureString(R));
K=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*L));(m=a._pe._pe_mgrs_to_geog_extended(E,L,K,m,l))&&z(A,L,l);return m}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(l,L,K,m,A,E,R){a._pe.ensureCache.prepare();let O=0;l&&(O=a._pe.getPointer(l));l=G(K);K=a._pe.ensureFloat64(l);l=u(L,a.PeDefs.PE_MGRS_MAX);const w=a._pe.ensureInt32(l);if(m=a._pe._pe_geog_to_usng(O,L,K,m,A,E,w))for(A=0;A<L;A++)R[A]=a._pe.UTF8ToString(l[A]);return m};c.usngToGeog=
function(l,L,K,m){a._pe.ensureCache.prepare();var A=0;l&&(A=a._pe.getPointer(l));l=K.map(E=>a._pe.ensureString(E));K=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*L));(A=a._pe._pe_usng_to_geog(A,L,K,l))&&z(m,L,l);return A}})(a.PeNotationUsng||(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
c.geogToUtm=function(l,L,K,m,A){a._pe.ensureCache.prepare();var E=0;l&&(E=a._pe.getPointer(l));l=G(K);K=a._pe.ensureFloat64(l);l=u(L,a.PeDefs.PE_UTM_MAX);const R=a._pe.ensureInt32(l);if(m=a._pe._pe_geog_to_utm(E,L,K,m,R))for(E=0;E<L;E++)A[E]=a._pe.UTF8ToString(l[E]);return m};c.utmToGeog=function(l,L,K,m,A){a._pe.ensureCache.prepare();let E=0;l&&(E=a._pe.getPointer(l));l=K.map(R=>a._pe.ensureString(R));K=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*L));(m=a._pe._pe_utm_to_geog(E,L,K,m,l))&&
z(A,L,l);return m}})(a.PeNotationUtm||(a.PeNotationUtm={}));a.PePCSInfo=void 0;(function(c){const l=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(L,K=c.PE_PCSINFO_OPTION_DOMAIN){let m,A;l.has(L)&&(A=l.get(L),A[K]&&
(m=A[K]));m||(m=a._pe.PePCSInfo.prototype.generate(L,K),A||(A=[],l.set(L,A)),A[K]=m);return m}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(c){c.versionString=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));const F=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return a._pe},isLoaded:k,isSupported:y,load:v,get PeCSTransformations(){return a.PeCSTransformations},get PeDefs(){return a.PeDefs},get PeFactory(){return a.PeFactory},
get PeGCSExtent(){return a.PeGCSExtent},get PeGTlistExtended(){return a.PeGTlistExtended},get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeGTTransformations(){return a.PeGTTransformations},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},get PeNotationUsng(){return a.PeNotationUsng},get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:n},Symbol.toStringTag,{value:"Module"}));
a._init=n;a.isLoaded=k;a.isSupported=y;a.load=v;a.pe=F})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(b,a){const B=Math.PI/180;var J=a.earth.radius;const p=a.earth.eccentricitySquared;J={a1:J*p,a2:J*p*J*p,a3:J*p*p/2,a4:J*p*J*p*2.5,a5:J*p+J*p*p/2,a6:1-p};a={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:a.earth.radius,f:a.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:a.moon.radius,
f:a.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:a.mars.radius,f:a.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,
f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},
104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,
f:0},104970:{a:593E3,f:0},104971:{a:a.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};b.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;b.earthEllipsoidConstants=J;b.spheroids=a;b.toRadians=B;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(b){return function(){function a(J){this.steps=[];this._cached_projection={};this._chain=
"";this._gtlistentry=null;if(J&&J.steps)for(const p of J.steps)p instanceof b?this.steps.push(p):this.steps.push(new b({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}a.cacheKey=function(J,p){return[void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==J.wkt?J.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};a.fromGE=function(J){const p=new a;let k="";for(const y of J.steps)J=b.fromGE(y),p.steps.push(J),
k+=J.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=k;return p};var B=a.prototype;B.getInverse=function(){const J=new a;J.steps=[];for(let p=this.steps.length-1;0<=p;p--)J.steps.push(this.steps[p].getInverse());return J};B.getGTListEntry=function(){let J="";for(const p of this.steps)J+=p.uid.toString()+",";J!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=J);return this._gtlistentry};B.assignCachedGe=function(J,p,k){this._cached_projection[a.cacheKey(J,
p)]=k};B.getCachedGeTransformation=function(J,p){let k="";for(const y of this.steps)k+=y.uid.toString()+",";k!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=k);J=this._cached_projection[a.cacheKey(J,p)];return void 0===J?null:J};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(b){let a=0;return function(){function B(J=null){this.uid=a++;J?(this._wkt=void 0!==J.wkt?J.wkt:null,this._wkid=
void 0!==J.wkid?J.wkid:-1,this._isInverse=void 0!==J.isInverse?!0===J.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}B.fromGE=function(J){const p=new B;p._wkt=J.wkt;p._wkid=J.wkid;p._isInverse=J.isInverse;return p};B.prototype.getInverse=function(){const J=new B;J._wkt=this.wkt;J._wkid=this._wkid;J._isInverse=!this.isInverse;return J};b._createClass(B,[{key:"wkt",get:function(){return this._wkt},set:function(J){this._wkt=J;this.uid=a++}},{key:"wkid",get:function(){return this._wkid},
set:function(J){this._wkid=J;this.uid=a++}},{key:"isInverse",get:function(){return this._isInverse},set:function(J){this._isInverse=J;this.uid=a++}}]);return B}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(b,a,B,J){b.getGeometryZScaler=function(p,k,y){if(a.isNone(k)||a.isNone(y)||y.vcsWkid||J.equals(k,y))return null;k=B.getMetersPerVerticalUnitForSR(k);y=B.getMetersPerVerticalUnitForSR(y);const v=k/y;
if(1===v)return null;switch(p){case "point":case "esriGeometryPoint":return n=>{n&&null!=n.z&&(n.z*=v)};case "polyline":case "esriGeometryPolyline":return n=>{if(n)for(const r of n.paths)for(const u of r)2<u.length&&(u[2]*=v)};case "polygon":case "esriGeometryPolygon":return n=>{if(n)for(const r of n.rings)for(const u of r)2<u.length&&(u[2]*=v)};case "multipoint":case "esriGeometryMultipoint":return n=>{if(n)for(const r of n.points)2<r.length&&(r[2]*=v)};case "extent":case "esriGeometryExtent":return n=>
{n&&null!=n.zmin&&null!=n.zmax&&(n.zmin*=v,n.zmax*=v)};default:return null}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(b){let a=function(y,v,n){this.x=y;this.y=v;this.spatialReference=n;this.m=this.z=void 0},B=function(y,v,n,r){this.rings=y;this.spatialReference=v;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);r&&(this.hasM=r)},J=function(y,v,n,r){this.paths=y;this.spatialReference=
v;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);r&&(this.hasM=r)},p=function(y,v,n,r){this.points=y;this.spatialReference=v;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);r&&(this.hasM=r)},k=function(y,v,n,r,u){this.xmin=y;this.ymin=v;this.xmax=n;this.ymax=r;this.spatialReference=u;this.mmax=this.mmin=this.zmax=this.zmin=void 0};b.jsonAdapter={convertToGEGeometry:function(y,v){return null==v?null:y.convertJSONToGeometry(v)},exportPoint:function(y,v,n){n=new a(y.getPointX(v),y.getPointY(v),n);const r=y.hasZ(v),
u=y.hasM(v);r&&(n.z=y.getPointZ(v));u&&(n.m=y.getPointM(v));return n},exportPolygon:function(y,v,n){return new B(y.exportPaths(v),n,y.hasZ(v),y.hasM(v))},exportPolyline:function(y,v,n){return new J(y.exportPaths(v),n,y.hasZ(v),y.hasM(v))},exportMultipoint:function(y,v,n){return new p(y.exportPoints(v),n,y.hasZ(v),y.hasM(v))},exportExtent:function(y,v,n){var r=y.hasZ(v);const u=y.hasM(v);n=new k(y.getXMin(v),y.getYMin(v),y.getXMax(v),y.getYMax(v),n);r&&(r=y.getZExtent(v),n.zmin=r.vmin,n.zmax=r.vmax);
u&&(y=y.getMExtent(v),n.mmin=y.vmin,n.mmax=y.vmax);return n}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(b){b.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,
supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e){function F(L,K,m,A,E,R){E-=m;R-=A;L=Math.min(1,Math.max(0,((L-m)*E+(K-A)*R)/(E*E+R*R)));return{x:m+E*L,y:A+R*L}}function c(L,K){return L?K?4:3:K?3:2}let l=function(){function L(m,A,E){this.items=m;this.query=A;this.geometryType=E.geometryType;this.hasM=E.hasM;this.hasZ=E.hasZ;this.fieldsIndex=E.fieldsIndex;this.objectIdField=E.objectIdField;this.spatialReference=E.spatialReference;this.featureAdapter=E.featureAdapter}var K=L.prototype;K.createQueryResponseForCount=
function(){const m=new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return m.countDistinctValues(this.items);const {groupByFieldsForStatistics:A,having:E,outStatistics:R}=this.query;if(null==A||!A.length)return 1;const O=new Map,w=new Map,H=new Set;for(const D of R){var {statisticType:g}=D;g="exceedslimit"!==g?D.onStatisticField:void 0;if(!w.has(g)){var h=[];for(const P of A){const M=this._getAttributeValues(m,P,O);h.push(M)}w.set(g,this._calculateUniqueValues(h,
m.returnDistinctValues))}g=w.get(g);for(const P in g){const {data:M,items:N}=g[P];h=M.join(",");E&&!m.validateItems(N,E)||H.add(h)}}return H.size};K.createQueryResponse=function(){var m=B._asyncToGenerator(function*(){let A;A=this.query.outStatistics?this.query.outStatistics.some(E=>"exceedslimit"===E.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(v.isValid(this.query.outSR)&&
!v.equals(this.query.geometry.spatialReference,this.query.outSR)?A.queryGeometry=u.cleanFromGeometryEngine({spatialReference:this.query.outSR,...r.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):A.queryGeometry=u.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return A});return function(){return m.apply(this,arguments)}}();K.createSnappingResponse=function(m,A){const E=this.featureAdapter,R=c(this.hasZ,this.hasM),{x:O,y:w}=
m.point,H="number"===typeof m.distance?m.distance:m.distance.x,g="number"===typeof m.distance?m.distance:m.distance.y,h={candidates:[]},D="esriGeometryPolygon"===this.geometryType;A=this._getPointCreator(m.point,this.spatialReference,A);for(const ja of this.items){var P=E.getGeometry(ja);if(J.isNone(P))continue;const {coords:ma,lengths:X}=P;if(m.types&a.SnappingTypes.EDGE){P=0;for(var M=0;M<X.length;M++){var N=X[M];for(var q=0;q<N;q++,P+=R){var S=ma[P],Y=ma[P+1];if(q!==N-1){const na=ma[P+R],oa=ma[P+
R+1],{x:qa,y:wa}=F(O,w,S,Y,na,oa);var V=(O-qa)/H;const Ma=(w-wa)/g;V=V*V+Ma*Ma;1>=V&&h.candidates.push({type:"edge",objectId:E.getObjectId(ja),distance:Math.sqrt(V),target:A(qa,wa),start:A(S,Y),end:A(na,oa)})}}}}if(m.types&a.SnappingTypes.VERTEX)for(P=D?ma.length-R:ma.length,M=0;M<P;M+=R)N=ma[M],q=ma[M+1],S=(O-N)/H,Y=(w-q)/g,S=S*S+Y*Y,1>=S&&h.candidates.push({type:"vertex",objectId:E.getObjectId(ja),distance:Math.sqrt(S),target:A(N,q)})}h.candidates.sort((ja,ma)=>ja.distance-ma.distance);return h};
K._getPointCreator=function(m,A,E){const R=J.isSome(E)&&!v.equals(A,E)?O=>r.project(O,A,E):O=>O;return null!=m.z&&null!=m.m?(O,w)=>R({x:O,y:w,z:m.z,m:m.m}):null!=m.z?(O,w)=>R({x:O,y:w,z:m.z}):null!=m.m?(O,w)=>R({x:O,y:w,m:m.m}):(O,w)=>R({x:O,y:w})};K.createSummaryStatisticsResponse=function(){var m=B._asyncToGenerator(function*(A){const {field:E,valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,minValue:g,maxValue:h,scale:D}=A;A=this.fieldsIndex.isDateField(E);var P=
yield this._getDataValues({field:E,valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,scale:D});const M=z.isNullCountSupported({normalizationType:w,normalizationField:O,minValue:g,maxValue:h}),N=this.fieldsIndex.get(E),q={value:.5,fieldType:null==N?void 0:N.type};P=G.isStringField(N)?z.calculateStringStatistics({values:P,supportsNullCount:M,percentileParams:q}):z.calculateStatistics({values:P,minValue:g,maxValue:h,useSampleStdDev:!w,supportsNullCount:M,percentileParams:q});
return z.processSummaryStatisticsResult(P,A)});return function(A){return m.apply(this,arguments)}}();K.createUniqueValuesResponse=function(){var m=B._asyncToGenerator(function*(A){const {field:E,valueExpression:R,domain:O,returnAllCodedValues:w,scale:H}=A;A=yield this._getDataValues({field:E,valueExpression:R,scale:H});A=z.calculateUniqueValuesCount(A);return z.createUVResult(A,O,w)});return function(A){return m.apply(this,arguments)}}();K.createClassBreaksResponse=function(){var m=B._asyncToGenerator(function*(A){const {field:E,
valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,classificationMethod:g,standardDeviationInterval:h,minValue:D,maxValue:P,numClasses:M,scale:N}=A;A=yield this._getDataValues({field:E,valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,scale:N});A=z.calculateClassBreaks(A,{field:E,normalizationField:O,normalizationType:w,normalizationTotal:H,classificationMethod:g,standardDeviationInterval:h,minValue:D,maxValue:P,numClasses:M});return z.resolveCBResult(A,
g)});return function(A){return m.apply(this,arguments)}}();K.createHistogramResponse=function(){var m=B._asyncToGenerator(function*(A){const {field:E,valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,classificationMethod:g,standardDeviationInterval:h,minValue:D,maxValue:P,numBins:M,scale:N}=A;A=yield this._getDataValues({field:E,valueExpression:R,normalizationField:O,normalizationType:w,normalizationTotal:H,scale:N});return z.calculateHistogram(A,{field:E,normalizationField:O,
normalizationType:w,normalizationTotal:H,classificationMethod:g,standardDeviationInterval:h,minValue:D,maxValue:P,numBins:M})});return function(A){return m.apply(this,arguments)}}();K._sortFeatures=function(m,A,E){if(1<m.length&&A&&A.length)for(const R of A.reverse()){A=R.split(" ");const O=A[0],w=this.fieldsIndex.get(O);A=A[1]&&"desc"===A[1].toLowerCase();const H=z.getAttributeComparator(null==w?void 0:w.type,A);m.sort((g,h)=>{g=E(g,O,w);h=E(h,O,w);return H(g,h)})}};K._createFeatureQueryResponse=
function(m){const A=this.items,{geometryType:E,hasM:R,hasZ:O,objectIdField:w,spatialReference:H}=this,{outFields:g,outSR:h,quantizationParameters:D,resultRecordCount:P,resultOffset:M,returnZ:N,returnM:q}=m,S=null!=P?A.length>(M||0)+P:!1,Y=g&&(g.includes("*")?[...this.fieldsIndex.fields]:g.map(V=>this.fieldsIndex.get(V)));return{exceededTransferLimit:S,features:this._createFeatures(m,A),fields:Y,geometryType:E,hasM:R&&q,hasZ:O&&N,objectIdFieldName:w,spatialReference:u.cleanFromGeometryEngine(h?h:H),
transform:D&&y.toQuantizationTransform(D)||null}};K._createFeatures=function(m,A){const E=new n(m,this.featureAdapter,this.fieldsIndex),{hasM:R,hasZ:O}=this,{orderByFields:w,quantizationParameters:H,returnGeometry:g,returnCentroid:h,maxAllowableOffset:D,resultOffset:P,resultRecordCount:M,returnZ:N=!1,returnM:q=!1}=m,S=O&&N,Y=R&&q;m=[];var V=0;A=[...A];this._sortFeatures(A,w,(X,na,oa)=>E.getFieldValue(X,na,oa));if(g||h){var ja=y.toQuantizationTransform(H);if(g&&!h)for(var ma of A)m[V++]={attributes:E.getAttributes(ma),
geometry:u.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),D,ja,S,Y)};else if(!g&&h)for(const X of A)m[V++]={attributes:E.getAttributes(X),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(X,this),ja)};else for(const X of A)m[V++]={attributes:E.getAttributes(X),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(X,this),ja),geometry:u.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(X),D,ja,S,Y)}}else for(ja of A)(ma=
E.getAttributes(ja))&&(m[V++]={attributes:ma});V=P||0;null!=M&&(m=m.slice(V,Math.min(m.length,V+M)));return m};K._createExceedsLimitQueryResponse=function(m){var A=!1;let E=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY;A=Number.POSITIVE_INFINITY;for(const O of m.outStatistics)if("exceedslimit"===O.statisticType){E=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;R=null!=O.maxRecordCount?O.maxRecordCount:Number.POSITIVE_INFINITY;A=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)A=this.items.length>E;else if(this.items.length>R)A=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const O=this.featureAdapter;A=this.items.reduce((w,H)=>{H=O.getGeometry(H);return w+(J.isSome(H)&&H.coords.length||0)},0)/m>A}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(A)}}]}};K._createStatisticsQueryResponse=
function(){var m=B._asyncToGenerator(function*(A){var E={attributes:{}};const R=[],O=new Map,w=new Map,H=new Map,g=new Map,h=new n(A,this.featureAdapter,this.fieldsIndex);var D=A.outStatistics;const {groupByFieldsForStatistics:P,having:M,orderByFields:N}=A;A=P&&P.length;const q=!!A,S=q&&P[0],Y=q&&!this.fieldsIndex.get(S);for(const na of D){const {outStatisticFieldName:oa,statisticType:qa}=na;D=na;var V="exceedslimit"!==qa?na.onStatisticField:void 0;const wa="percentile_disc"===qa||"percentile_cont"===
qa,Ma="EnvelopeAggregate"===qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa,Ja=q&&1===A&&(V===S||Y)&&"count"===qa;if(q){if(!H.has(V)){var ja=[];for(const La of P){var ma=this._getAttributeValues(h,La,O);ja.push(ma)}H.set(V,this._calculateUniqueValues(ja,h.returnDistinctValues))}ja=H.get(V);for(const La in ja){const {count:Za,data:f,items:C,itemPositions:ha}=ja[La];ma=f.join(",");if(!M||h.validateItems(C,M)){const x=g.get(ma)||{attributes:{}};if(Ma){x.aggregateGeometries||(x.aggregateGeometries=
{});const {aggregateGeometries:T,outStatisticFieldName:aa}=yield this._getAggregateGeometry(D,C);x.aggregateGeometries[aa]=T}else{var X=null;if(Ja)X=Za;else{const T=this._getAttributeValues(h,V,O);X=ha.map(aa=>T[aa]);X=wa&&"statisticParameters"in D?this._getPercentileValue(D,X):this._getStatisticValue(D,X,null,h.returnDistinctValues)}x.attributes[oa]=X}P.forEach((T,aa)=>x.attributes[this.fieldsIndex.get(T)?T:`EXPR_${aa+1}`]=f[aa]);g.set(ma,x)}}}else if(Ma){E.aggregateGeometries||(E.aggregateGeometries=
{});const {aggregateGeometries:La,outStatisticFieldName:Za}=yield this._getAggregateGeometry(D,this.items);E.aggregateGeometries[Za]=La}else V=this._getAttributeValues(h,V,O),E.attributes[oa]=wa&&"statisticParameters"in D?this._getPercentileValue(D,V):this._getStatisticValue(D,V,w,h.returnDistinctValues);R.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}E=q?Array.from(g.values()):[E];this._sortFeatures(E,N,(na,oa)=>na.attributes[oa]);return{fields:R,features:E}});return function(A){return m.apply(this,
arguments)}}();K._getAggregateGeometry=function(){var m=B._asyncToGenerator(function*(A,E){var R=yield new Promise((N,q)=>b(["../../../geometry/geometryEngineJSON"],N,q));const {statisticType:O,outStatisticFieldName:w}=A,{featureAdapter:H,spatialReference:g,geometryType:h,hasZ:D,hasM:P}=this;E=E.map(N=>u.getGeometry(h,D,P,H.getGeometry(N)));const M=R.convexHull(g,E,!0)[0];A={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===O?(R=M?k.getPolygonExtent(M):k.getGeometryExtent(R.union(g,
E)),A.aggregateGeometries={...R,spatialReference:g},A.outStatisticFieldName=w||"extent"):"CentroidAggregate"===O?(R=M?p.polygonCentroid(M):p.extentCentroid(k.getGeometryExtent(R.union(g,E))),A.aggregateGeometries={x:R[0],y:R[1],spatialReference:g},A.outStatisticFieldName=w||"centroid"):"ConvexHullAggregate"===O&&(A.aggregateGeometries=M,A.outStatisticFieldName=w||"convexHull");return A});return function(A,E){return m.apply(this,arguments)}}();K._getStatisticValue=function(m,A,E,R){const {onStatisticField:O,
statisticType:w}=m;m=null;m=null!=E&&E.has(O)?E.get(O):G.isStringField(this.fieldsIndex.get(O))?z.calculateStringStatistics({values:A,returnDistinct:R}):z.calculateStatistics({values:A,minValue:null,maxValue:null,useSampleStdDev:!0});E&&E.set(O,m);return m["var"===w?"variance":w]};K._getPercentileValue=function(m,A){const {onStatisticField:E,statisticParameters:R,statisticType:O}=m,{value:w,orderBy:H}=R;m=this.fieldsIndex.get(E);return z.calculatePercentile(A,{value:w,orderBy:H,fieldType:null==m?
void 0:m.type,isDiscrete:"percentile_disc"===O})};K._getAttributeValues=function(m,A,E){if(E.has(A))return E.get(A);const R=this.fieldsIndex.get(A),O=this.items.map(w=>m.getFieldValue(w,A,R));E.set(A,O);return O};K._getAttributeNormalizedValues=function(m,A){return this.items.map(E=>m.getNormalizedValue(E,{field:A.field,fieldInfo:this.fieldsIndex.get(A.field),normalizationField:A.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(A.normalizationField),normalizationType:A.normalizationType,
normalizationTotal:A.normalizationTotal}))};K._getAttributeExpressionValues=function(){var m=B._asyncToGenerator(function*(A,E,R){const {arcadeUtils:O}=yield e.loadArcade();E=O.createFunction(E);R=R&&O.getViewInfo(R);return A.getExpressionValues(this.items,E,R,O)});return function(A,E,R){return m.apply(this,arguments)}}();K._calculateUniqueValues=function(m,A){const E={},R=this.items,O=R.length;for(let w=0;w<O;w++){const H=R[w],g=[];for(const D of m)g.push(D[w]);const h=g.join(",");A?null==E[h]&&
(E[h]={count:1,data:g,items:[H],itemPositions:[w]}):null==E[h]?E[h]={count:1,data:g,items:[H],itemPositions:[w]}:(E[h].count++,E[h].items.push(H),E[h].itemPositions.push(w))}return E};K._getDataValues=function(){var m=B._asyncToGenerator(function*(A){const E=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:R,field:O,normalizationField:w,normalizationType:H,normalizationTotal:g,scale:h}=A;A=R?{viewingMode:"map",scale:h,spatialReference:this.query.outSR||this.spatialReference}:
null;return R?this._getAttributeExpressionValues(E,R,A):this._getAttributeNormalizedValues(E,{field:O,normalizationField:w,normalizationType:H,normalizationTotal:g})});return function(A){return m.apply(this,arguments)}}();B._createClass(L,[{key:"size",get:function(){return this.items.length}}]);return L}();a.SnappingTypes=void 0;(function(L){L[L.NONE=0]="NONE";L[L.EDGE=1]="EDGE";L[L.VERTEX=2]="VERTEX"})(a.SnappingTypes||(a.SnappingTypes={}));a.QueryEngineResult=l;Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(b,a,B){function J({scale:g,translate:h},D){return Math.round((D-h[0])/g[0])}function p({scale:g,translate:h},D){return Math.round((h[1]-D)/g[1])}function k(g,h,D){const P=[];let M,N,q,S;for(let Y=0;Y<D.length;Y++){const V=D[Y];if(0<Y){if(q=J(g,V[0]),S=p(g,V[1]),q!==M||S!==N)P.push(h(V,q-M,S-N)),M=q,N=S}else M=J(g,V[0]),N=p(g,V[1]),P.push(h(V,
M,N))}return 0<P.length?P:null}function y(g,h,D,P){return k(g,D?P?H:w:P?w:O,h)}function v(g,h,D,P){const M=[];D=D?P?H:w:P?w:O;for(P=0;P<h.length;P++){const N=k(g,D,h[P]);N&&3<=N.length&&M.push(N)}return M.length?M:null}function n(g,h,D,P){const M=[];D=D?P?H:w:P?w:O;for(P=0;P<h.length;P++){const N=k(g,D,h[P]);N&&2<=N.length&&M.push(N)}return M.length?M:null}function r({scale:g,translate:h},D){return D*g[0]+h[0]}function u({scale:g,translate:h},D){return h[1]-D*g[1]}function G(g,h,D){const P=Array(D.length);
if(!D.length)return P;const [M,N]=g.scale;let q=r(g,D[0][0]);g=u(g,D[0][1]);P[0]=h(D[0],q,g);for(let S=1;S<D.length;S++){const Y=D[S];q+=Y[0]*M;g-=Y[1]*N;P[S]=h(Y,q,g)}return P}function z(g,h,D){const P=Array(D.length);for(let M=0;M<D.length;M++)P[M]=G(g,h,D[M]);return P}function e(g,h,D,P){return G(g,D?P?H:w:P?w:O,h)}function F(g,h,D,P){return z(g,D?P?H:w:P?w:O,h)}function c(g,h,D,P){return z(g,D?P?H:w:P?w:O,h)}function l(g,h,D){let [P,M]=D[0],N=Math.min(P,h[0]),q=Math.min(M,h[1]),S=Math.max(P,h[2]);
h=Math.max(M,h[3]);for(let Y=1;Y<D.length;Y++){const [V,ja]=D[Y];P+=V;M+=ja;0>V&&(N=Math.min(N,P));0<V&&(S=Math.max(S,P));0>ja?q=Math.min(q,M):0<ja&&(h=Math.max(h,M))}g[0]=N;g[1]=q;g[2]=S;g[3]=h;return g}function L(g,h){if(!h.length)return null;g[0]=g[1]=Number.POSITIVE_INFINITY;g[2]=g[3]=Number.NEGATIVE_INFINITY;for(let D=0;D<h.length;D++)l(g,g,h[D]);return g}function K(g,h,D,P,M){h.xmin=J(g,D.xmin);h.ymin=p(g,D.ymin);h.xmax=J(g,D.xmax);h.ymax=p(g,D.ymax);h!==D&&(P&&(h.zmin=D.zmin,h.zmax=D.zmax),
M&&(h.mmin=D.mmin,h.mmax=D.mmax));return h}function m(g,h,D,P,M){h.points=y(g,D.points,P,M);return h}function A(g,h,D,P,M){h.x=J(g,D.x);h.y=p(g,D.y);h!==D&&(P&&(h.z=D.z),M&&(h.m=D.m));return h}function E(g,h,D,P,M){g=v(g,D.rings,P,M);if(!g)return null;h.rings=g;return h}function R(g,h,D,P,M){g=n(g,D.paths,P,M);if(!g)return null;h.paths=g;return h}const O=(g,h,D)=>[h,D],w=(g,h,D)=>[h,D,g[2]],H=(g,h,D)=>[h,D,g[2],g[3]];b.equals=function(g,h){if(g===h||null==g&&null==h)return!0;if(null==g||null==h)return!1;
let D,P,M,N;g&&"upperLeft"===g.originPosition?(D=g.translate[0],P=g.translate[1],g=g.scale[0]):(D=a.isSome(g.extent)?g.extent.xmin:0,P=a.isSome(g.extent)?g.extent.ymax:0,g=g.tolerance);h&&"upperLeft"===h.originPosition?(M=h.translate[0],N=h.translate[1],h=h.scale[0]):(M=a.isSome(h.extent)?h.extent.xmin:0,N=a.isSome(h.extent)?h.extent.ymax:0,h=h.tolerance);return D===M&&P===N&&g===h};b.getQuantizedBoundsCoordsArray=l;b.getQuantizedBoundsCoordsArrayArray=L;b.getQuantizedBoundsPaths=function(g){return L([0,
0,0,0],g)};b.getQuantizedBoundsPoints=function(g){const h=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(h,h,g)};b.getQuantizedBoundsRings=function(g){return L([0,0,0,0],g)};b.quantizeBounds=function(g,h,D){h[0]=J(g,D[0]);h[3]=p(g,D[1]);h[2]=J(g,D[2]);h[1]=p(g,D[3]);return h};b.quantizeExtent=K;b.quantizeGeometry=function(g,h){return g&&h?B.isPoint(h)?A(g,{},h,!1,!1):B.isPolyline(h)?R(g,{},h,!1,!1):B.isPolygon(h)?E(g,{},h,!1,!1):B.isMultipoint(h)?
m(g,{},h,!1,!1):B.isExtent(h)?K(g,{},h,!1,!1):null:null};b.quantizeMultipoint=m;b.quantizePaths=n;b.quantizePoint=A;b.quantizePoints=y;b.quantizePolygon=E;b.quantizePolyline=R;b.quantizeRings=v;b.quantizeX=J;b.quantizeY=p;b.toQuantizationTransform=function(g){return g?{originPosition:"upper-left"===g.originPosition?"upperLeft":"lower-left"===g.originPosition?"lowerLeft":g.originPosition,scale:g.tolerance?[g.tolerance,g.tolerance]:[1,1],translate:a.isSome(g.extent)?[g.extent.xmin,g.extent.ymax]:[0,
0]}:null};b.unquantizeBounds=function(g,h,D){return D?(h[0]=r(g,D[0]),h[1]=u(g,D[3]),h[2]=r(g,D[2]),h[3]=u(g,D[1]),h):[r(g,h[0]),u(g,h[3]),r(g,h[2]),u(g,h[1])]};b.unquantizeCoordsArray=G;b.unquantizeCoordsArrayArray=z;b.unquantizeExtent=function(g,h,D,P,M){h.xmin=r(g,D.xmin);h.ymin=u(g,D.ymin);h.xmax=r(g,D.xmax);h.ymax=u(g,D.ymax);h!==D&&(P&&(h.zmin=D.zmin,h.zmax=D.zmax),M&&(h.mmin=D.mmin,h.mmax=D.mmax));return h};b.unquantizeMultipoint=function(g,h,D,P,M){a.isSome(D)&&(h.points=e(g,D.points,P,M));
return h};b.unquantizePaths=F;b.unquantizePoint=function(g,h,D,P,M){if(a.isNone(D))return h;h.x=r(g,D.x);h.y=u(g,D.y);h!==D&&(P&&(h.z=D.z),M&&(h.m=D.m));return h};b.unquantizePoints=e;b.unquantizePolygon=function(g,h,D,P,M){a.isSome(D)&&(h.rings=c(g,D.rings,P,M));return h};b.unquantizePolyline=function(g,h,D,P,M){a.isSome(D)&&(h.paths=F(g,D.paths,P,M));return h};b.unquantizeRings=c;b.unquantizeX=r;b.unquantizeY=u;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(b,a,B){return function(){function J(k,y,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=k.returnDistinctValues;this.fieldsIndex=v;this.featureAdapter=y;if((y=k.outFields)&&!y.includes("*")){this.outFields=y;k=0;for(const r of y){var n=a.getExpressionFromFieldName(r);n=(y=this.fieldsIndex.get(n))?null:a.getWhereClause(n,
v);y=y?y.name:a.getAliasFromFieldName(r)||`FIELD_EXP_${k++}`;this._fieldDataCache.set(r,{alias:y,clause:n})}}}var p=J.prototype;p.countDistinctValues=function(k){if(!this.returnDistinctValues)return k.length;k.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};p.getAttributes=function(k){k=this._processAttributesForOutFields(k);return this._processAttributesForDistinctValues(k)};p.getFieldValue=function(k,y,v){const n=v?v.name:y;let r=null;this._fieldDataCache.has(n)?r=this._fieldDataCache.get(n).clause:
v||(r=a.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(n,{alias:n,clause:r}));return v?this.featureAdapter.getAttribute(k,n):r.calculateValue(k,this.featureAdapter)};p.getNormalizedValue=function(k,y){const v=y.normalizationType,n=y.normalizationTotal;let r=this.getFieldValue(k,y.field,y.fieldInfo);v&&Number.isFinite(r)&&(k=this.getFieldValue(k,y.normalizationField,y.normalizationFieldInfo),r=B.getNormalizedValue(r,v,k,n));return r};p.getExpressionValue=function(k,y,v,n){k={attributes:this.featureAdapter.getAttributes(k),
layer:{fields:this.fieldsIndex.fields}};v=n.createExecContext(k,v);return n.executeFunction(y,v)};p.getExpressionValues=function(k,y,v,n){const r={fields:this.fieldsIndex.fields};return k.map(u=>{u={attributes:this.featureAdapter.getAttributes(u),layer:r};u=n.createExecContext(u,v);return n.executeFunction(y,u)})};p.validateItem=function(k,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:a.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(k,
this.featureAdapter)};p.validateItems=function(k,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:a.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(k,this.featureAdapter)};p._processAttributesForOutFields=function(k){const y=this.outFields;if(!y||!y.length)return this.featureAdapter.getAttributes(k);const v={};for(const n of y){const {alias:r,clause:u}=this._fieldDataCache.get(n);v[r]=u?u.calculateValue(k,this.featureAdapter):this.featureAdapter.getAttribute(k,
r)}return v};p._processAttributesForDistinctValues=function(k){if(b.isNone(k)||!this.returnDistinctValues)return k;var y=this.outFields,v=[];if(y)for(const r of y){var {alias:n}=this._fieldDataCache.get(r);v.push(k[n])}else for(n in k)v.push(k[n]);y=`${(y||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++v);return 1<v?null:k};return J}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(b,a,B){function J(m){const A=null!=m.minValue||null!=m.maxValue,E=!!m.sqlExpression&&m.supportsSQLExpression;return!(null!=m.normalizationField||null!=m.normalizationType)&&!A&&!E}function p(m){const {values:A,useSampleStdDev:E,supportsNullCount:R}=m;var O=Number.POSITIVE_INFINITY;let w=Number.NEGATIVE_INFINITY,H=null,g=null;var h=null;let D=null,P=0;const M=null==m.minValue?-Infinity:m.minValue,N=null==m.maxValue?Infinity:m.maxValue;for(const q of A)Number.isFinite(q)?q>=M&&q<=N&&(H+=q,
O=Math.min(O,q),w=Math.max(w,q),P++):"string"===typeof q&&P++;if(P&&null!=H){g=H/P;h=0;for(const q of A)Number.isFinite(q)&&q>=M&&q<=N&&(h+=(q-g)**2);D=E?1<P?h/(P-1):0:0<P?h/P:0;h=Math.sqrt(D)}else w=O=null;O={avg:g,count:P,max:w,min:O,stddev:h,sum:H,variance:D};R&&(O.nullcount=A.length-P);m.percentileParams&&(O.median=k(A,m.percentileParams));return O}function k(m,A){const {fieldType:E,value:R,orderBy:O,isDiscrete:w}=A,H=y(E,"desc"===O);m=[...m].filter(P=>null!=P).sort((P,M)=>H(P,M));if(0===m.length)return null;
if(0>=R)return m[0];if(1<=R)return m[m.length-1];var g=(m.length-1)*R,h=Math.floor(g);A=h+1;g%=1;h=m[h];const D=m[A];return A>=m.length||w||"string"===typeof h||"string"===typeof D?h:h*(1-g)+D*g}function y(m,A){const E=A?1:-1,R=n(A),O=v(A);if(!m||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...L].includes(m))return(w,H)=>"number"===typeof w&&"number"===typeof H?R(w,H):"string"===typeof w&&"string"===typeof H?O(w,H):E;if("esriFieldTypeDate"===m)return(w,H)=>
{w=(new Date(w)).getTime();H=(new Date(H)).getTime();return isNaN(w)||isNaN(H)?E:R(w,H)};if(L.has(m))return(w,H)=>R(w,H);if("esriFieldTypeString"===m)return(w,H)=>O(w,H);if("esriFieldTypeGUID"===m||"esriFieldTypeGlobalID"===m){const w=v(A);return(H,g)=>w(r(H),r(g))}return A?(w,H)=>1:(w,H)=>-1}function v(m){return m?(A,E)=>{var R,O;A=null==(R=A)?void 0:R.toUpperCase();E=null==(O=E)?void 0:O.toUpperCase();return A>E?-1:A<E?1:0}:(A,E)=>{var R,O;A=null==(R=A)?void 0:R.toUpperCase();E=null==(O=E)?void 0:
O.toUpperCase();return A<E?-1:A>E?1:0}}function n(m){return m?(A,E)=>E-A:(A,E)=>A-E}function r(m){return m.substr(24,12)+m.substr(19,4)+m.substr(16,2)+m.substr(14,2)+m.substr(11,2)+m.substr(9,2)+m.substr(6,2)+m.substr(4,2)+m.substr(2,2)+m.substr(0,2)}function u(m,A){const E=z({field:A.field,normalizationType:A.normalizationType,normalizationField:A.normalizationField,classificationMethod:A.classificationMethod,standardDeviationInterval:A.standardDeviationInterval,breakCount:A.numClasses||5});m=G(m,
A.minValue,A.maxValue);return B.createGenerateRendererClassBreaks({definition:E,values:m,normalizationTotal:A.normalizationTotal})}function G(m,A,E){A=null==A?-Infinity:A;E=null==E?Infinity:E;return m.filter(R=>Number.isFinite(R)&&R>=A&&R<=E)}function z(m){const A=m.field,E=m.classificationMethod||"equal-interval",R=m.normalizationType,O=m.normalizationField,w=new a;w.classificationField=A;w.breakCount=m.breakCount;w.classificationMethod=E;w.standardDeviationInterval="standard-deviation"===E?m.standardDeviationInterval||
1:void 0;w.normalizationType=R;w.normalizationField="field"===R?O:void 0;return w}function e(m,A){const {field:E,classificationMethod:R,standardDeviationInterval:O,normalizationType:w,normalizationField:H,normalizationTotal:g,minValue:h,maxValue:D}=A,P=A.numBins||10;let M=A=null,N=null;R&&"equal-interval"!==R||w?({classBreaks:m}=u(m,{field:E,normalizationType:w,normalizationField:H,normalizationTotal:g,classificationMethod:R,standardDeviationInterval:O,minValue:h,maxValue:D,numClasses:P}),A=m[0].minValue,
M=m[m.length-1].maxValue,N=m.map(q=>[q.minValue,q.maxValue])):(null!=h&&null!=D?(A=h,M=D):(m=p({values:m,minValue:h,maxValue:D,useSampleStdDev:!w,supportsNullCount:J({normalizationType:w,normalizationField:H,minValue:h,maxValue:D})}),A=m.min,M=m.max),N=c(A,M,P));return{min:A,max:M,intervals:N}}function F(m,A){let E=-1;for(let R=m.length-1;0<=R;R--)if(A>=m[R][0]){E=R;break}return E}function c(m,A,E){const R=(A-m)/E,O=[];let w;for(let H=1;H<=E;H++)w=m+R,w=Number(w.toFixed(16)),O.push([m,H===E?A:w]),
m=w;return O}const l=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,L=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),K="min max avg stddev count sum variance nullcount median".split(" ");b.calculateClassBreaks=u;b.calculateHistogram=function(m,A){const {min:E,max:R,intervals:O}=e(m,A),w=O.map((H,g)=>({minValue:O[g][0],maxValue:O[g][1],count:0}));for(const H of m)null!=H&&H>=E&&H<=R&&(m=F(O,H),-1<m&&w[m].count++);return{bins:w,minValue:E,maxValue:R,
normalizationTotal:A.normalizationTotal}};b.calculatePercentile=k;b.calculateStatistics=p;b.calculateStringStatistics=function(m){const A=m.returnDistinct?[...new Set(m.values)]:m.values,E=A.filter(O=>null!=O).length,R={count:E};m.supportsNullCount&&(R.nullcount=A.length-E);m.percentileParams&&(R.median=k(A,m.percentileParams));return R};b.calculateUniqueValuesCount=function(m){const A={};for(let E of m){if(null==E||"string"===typeof E&&""===E.trim())E=null;null==A[E]?A[E]={count:1,data:E}:A[E].count++}return{count:A}};
b.createClassBreaksDefinition=z;b.createUVResult=function(m,A,E){const R=m.count;m=[];E&&A&&"coded-value"===A.type&&A.codedValues.forEach(O=>{O=O.code;R.hasOwnProperty(O)||(R[O]={data:O,count:0})});for(const O in R)A=R[O],m.push({value:A.data,count:A.count,label:A.label});return{uniqueValueInfos:m}};b.getAttributeComparator=y;b.getEqualIntervalBins=c;b.getNormalizedValue=function(m,A,E,R){let O=null;switch(A){case "log":0!==m&&(O=Math.log(m)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(R)&&
0!==R&&(O=m/R*100);break;case "field":Number.isFinite(E)&&0!==E&&(O=m/E);break;case "natural-log":0<m&&(O=Math.log(m));break;case "square-root":0<m&&(O=m**.5)}return O};b.isNullCountSupported=J;b.processSummaryStatisticsResult=function(m,A){let E;for(E in m)K.includes(E)&&(Number.isFinite(m[E])||(m[E]=null));if(!A)return m;["avg","stddev","variance"].forEach(R=>{null!=m[R]&&(m[R]=Math.ceil(m[R]))});return m};b.resolveCBResult=function(m,A){let E=m.classBreaks;const R=E[0].minValue,O=E[E.length-1].maxValue,
w="standard-deviation"===A;E=E.map(H=>{const g=H.label;H={minValue:H.minValue,maxValue:H.maxValue,label:g};if(w&&g){const h=g.match(l).map(D=>+D.trim());2===h.length?(H.minStdDev=h[0],H.maxStdDev=h[1],0>h[0]&&0<h[1]&&(H.hasAvg=!0)):1===h.length&&(g.includes("\x3c")?(H.minStdDev=null,H.maxStdDev=h[0]):g.includes("\x3e")&&(H.minStdDev=h[0],H.maxStdDev=null))}return H});return{minValue:R,maxValue:O,classBreakInfos:E,normalizationTotal:m.normalizationTotal}};b.statisticTypes=K;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(b,a,B,J,p,k,y,v,n){p=new B.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});B=new B.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});n=function(r){function u(){var G=r.apply(this,arguments)||this;G.breakCount=null;G.classificationField=null;G.classificationMethod=null;G.normalizationField=null;G.normalizationType=
null;G.type="class-breaks-definition";return G}b._inheritsLoose(u,r);b._createClass(u,[{key:"standardDeviationInterval",set:function(G){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",G)}},{key:"definedInterval",set:function(G){"defined-interval"===this.classificationMethod&&this._set("definedInterval",G)}}]);return u}(n);a.__decorate([J.property({json:{write:!0}})],n.prototype,"breakCount",void 0);a.__decorate([J.property({json:{write:!0}})],n.prototype,"classificationField",
void 0);a.__decorate([J.property({type:String,json:{read:p.read,write:p.write}})],n.prototype,"classificationMethod",void 0);a.__decorate([J.property({json:{write:!0}})],n.prototype,"normalizationField",void 0);a.__decorate([J.property({json:{read:B.read,write:B.write}})],n.prototype,"normalizationType",void 0);a.__decorate([J.property({value:null,json:{write:!0}})],n.prototype,"standardDeviationInterval",null);a.__decorate([J.property({value:null,json:{write:!0}})],n.prototype,"definedInterval",
null);a.__decorate([J.property()],n.prototype,"type",void 0);return n=a.__decorate([v.subclass("esri.rest.support.ClassBreaksDefinition")],n)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u){B=new B.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});J=function(G){function z(){var e=G.apply(this,arguments)||this;e.baseSymbol=null;e.colorRamp=null;e.type=null;return e}b._inheritsLoose(z,G);return z}(J.JSONSupport);a.__decorate([p.property({type:u,json:{write:!0}})],J.prototype,"baseSymbol",void 0);a.__decorate([p.property({types:r.types,json:{read:{reader:r.fromJSON},write:!0}})],J.prototype,"colorRamp",void 0);a.__decorate([p.property({json:{read:B.read,
write:B.write}})],J.prototype,"type",void 0);return J=a.__decorate([n.subclass("esri.rest.support.ClassificationDefinition")],J)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(b,a,B,J){B={key:"type",base:B,typeMap:{algorithmic:a,multipart:J}};b.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?a.fromJSON(p):"multipart"===p.type?J.fromJSON(p):null:null};b.types=B;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(b,a,B,J,p,k,y,v,n){var r;n=r=function(u){function G(z){z=u.call(this,z)||this;z.algorithm=null;
z.fromColor=null;z.toColor=null;z.type="algorithmic";return z}b._inheritsLoose(G,u);G.prototype.clone=function(){return new r({fromColor:J.clone(this.fromColor),toColor:J.clone(this.toColor),algorithm:this.algorithm})};return G}(n);a.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],n.prototype,"algorithm",void 0);a.__decorate([p.property({type:B,json:{type:[k.Integer],write:!0}})],n.prototype,"fromColor",void 0);a.__decorate([p.property({type:B,
json:{type:[k.Integer],write:!0}})],n.prototype,"toColor",void 0);a.__decorate([p.property({type:["algorithmic"]})],n.prototype,"type",void 0);return n=r=a.__decorate([v.subclass("esri.rest.support.AlgorithmicColorRamp")],n)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(b,a,B){b.enumeration=function(J,p={}){var k;J=J instanceof a.JSONMap?J:new a.JSONMap(J,p);J={type:(null!=(k=null==p?void 0:p.ignoreUnknown)?k:1)?J.apiValues:
String,json:{type:J.jsonValues,read:null!=p&&p.readOnly?!1:{reader:J.read},write:{writer:J.write}}};void 0!==(null==p?void 0:p.readOnly)&&(J.readOnly=!!p.readOnly);void 0!==(null==p?void 0:p.default)&&(J.json.default=p.default);void 0!==(null==p?void 0:p.name)&&(J.json.name=p.name);return B.property(J)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v){B=function(n){function r(u){u=n.call(this,u)||this;u.type=null;return u}b._inheritsLoose(r,n);return r}(B.JSONSupport);a.__decorate([J.property({readOnly:!0,json:{read:!1,write:!0}})],B.prototype,"type",void 0);return B=a.__decorate([v.subclass("esri.rest.support.ColorRamp")],B)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(b,a,B,J,p,k,y,v){var n;p=n=function(r){function u(G){G=r.call(this,G)||this;G.colorRamps=null;G.type="multipart";return G}b._inheritsLoose(u,r);u.prototype.clone=function(){return new n({colorRamps:B.clone(this.colorRamps)})};return u}(v);a.__decorate([J.property({type:[y],json:{write:!0}})],p.prototype,"colorRamps",void 0);a.__decorate([J.property({type:["multipart"]})],p.prototype,"type",void 0);return p=n=a.__decorate([k.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u){J=new J.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let G=0;p=function(z){function e(c){c=z.call(this,c)||this;c.id=`sym${G++}`;c.type=null;c.color=new B([0,0,0,1]);
return c}b._inheritsLoose(e,z);var F=e.prototype;F.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};F.collectRequiredFields=function(){var c=b._asyncToGenerator(function*(l,L){});return function(l,L){return c.apply(this,arguments)}}();F.hash=function(){return JSON.stringify(this.toJSON())};F.clone=function(){};return e}(p.JSONSupport);a.__decorate([k.property({type:J.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:J.write}}})],p.prototype,"type",void 0);a.__decorate([k.property({type:B,
json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);a.__decorate([r.reader("color")],p.prototype,"readColor",null);return p=a.__decorate([u.subclass("esri.symbols.Symbol")],p)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(b){function a(u){const {classificationMethod:G,breakCount:z,normalizationType:e,definedInterval:F}=u.definition,c=[];var l=u.values;if(0===l.length)return[];l=l.sort((R,O)=>R-O);var L=l[0],K=l[l.length-1];if("equal-interval"===G)if(l.length>=
z){l=(K-L)/z;u=L;for(var m=1;m<z;m++){var A=Number((L+m*l).toFixed(6));c.push({minValue:u,maxValue:A,label:B(u,A,e)});u=A}c.push({minValue:u,maxValue:K,label:B(u,K,e)})}else l.forEach(R=>{c.push({minValue:R,maxValue:R,label:B(R,R,e)})});else if("natural-breaks"===G){l=J(l);u=p(l.uniqueValues,u.valueFrequency||l.valueFrequency,z);for(m=1;m<z;m++)l.uniqueValues.length>m&&(A=Number(l.uniqueValues[u[m]].toFixed(6)),c.push({minValue:L,maxValue:A,label:B(L,A,e)}),L=A);c.push({minValue:L,maxValue:K,label:B(L,
K,e)})}else if("quantile"===G)if(l.length>=z&&L!==K){u=Math.ceil(l.length/z);m=0;for(A=1;A<z;A++){var E=u+m-1;E>l.length&&(E=l.length-1);0>E&&(E=0);c.push({minValue:L,maxValue:l[E],label:B(L,l[E],e)});L=l[E];m+=u;u=Math.ceil((l.length-m)/(z-A))}c.push({minValue:L,maxValue:K,label:B(L,K,e)})}else for(K=-1,L=0;L<l.length;L++)u=l[L],u!==K&&(K=u,c.push({minValue:K,maxValue:u,label:B(K,u,e)}),K=u);else if("standard-deviation"===G)if(u=v(l),m=n(l,u),0===m)c.push({minValue:l[0],maxValue:l[0],label:B(l[0],
l[0],e)});else{l=y(L,K,z,u,m)*m;m=0;for(A=z;1<=A;A--)E=Number((u-(A-.5)*l).toFixed(6)),c.push({minValue:L,maxValue:E,label:B(L,E,e)}),L=E,m++;A=Number((u+.5*l).toFixed(6));c.push({minValue:L,maxValue:A,label:B(L,A,e)});L=A;m++;for(E=1;E<=z;E++)A=m===2*z?K:Number((u+(E+.5)*l).toFixed(6)),c.push({minValue:L,maxValue:A,label:B(L,A,e)}),L=A,m++}else if("defined-interval"===G){if(!F)return c;K=l[0];l=l[l.length-1];L=Math.ceil((l-K)/F);u=K;for(m=1;m<L;m++)A=Number((K+m*F).toFixed(6)),c.push({minValue:u,
maxValue:A,label:B(u,A,e)}),u=A;c.push({minValue:u,maxValue:l,label:B(u,l,e)})}return c}function B(u,G,z){let e=null;return e=u===G?z&&"percent-of-total"===z?u+"%":u.toString():z&&"percent-of-total"===z?u+"% - "+G+"%":u+" - "+G}function J(u){const G=[],z=[];let e=Number.MIN_VALUE,F=1,c=-1;for(let l=0;l<u.length;l++){const L=u[l];L===e?(F++,z[c]=F):null!==L&&(G.push(L),e=L,F=1,z.push(F),c++)}return{uniqueValues:G,valueFrequency:z}}function p(u,G,z){var e=u.length;const F=[];z>e&&(z=e);for(var c=0;c<
z;c++)F.push(Math.round(c*e/z-1));F.push(e-1);c=k(F,u,G,z);{e=c.mean;c=c.sdcm;var l=z,L=0,K=0;let A=0,E=0,R=!0;for(let O=0;2>O&&R;O++){0===O&&(R=!1);for(var m=0;m<l-1;m++)for(;F[m+1]+1!==F[m+2];)if(F[m+1]+=1,L=r(m,F,u,G),A=L.sbMean,L=L.sbSdcm,K=r(m+1,F,u,G),E=K.sbMean,K=K.sbSdcm,L+K<c[m]+c[m+1])c[m]=L,c[m+1]=K,e[m]=A,e[m+1]=E,R=!0;else{--F[m+1];break}for(m=l-1;0<m;m--)for(;F[m]!==F[m-1]+1;)if(--F[m],L=r(m-1,F,u,G),A=L.sbMean,L=L.sbSdcm,K=r(m,F,u,G),E=K.sbMean,K=K.sbSdcm,L+K<c[m-1]+c[m])c[m-1]=L,c[m]=
K,e[m-1]=A,e[m]=E,R=!0;else{F[m]+=1;break}}e=R}e&&(c=k(F,u,G,z));return F}function k(u,G,z,e){let F=[];var c=[],l=[];let L=0;const K=[],m=[];for(var A=0;A<e;A++){var E=r(A,u,G,z);K.push(E.sbMean);m.push(E.sbSdcm);L+=m[A]}E=L;for(A=!0;A||L<E;){A=!1;F=[];for(c=0;c<e;c++)F.push(u[c]);for(l=0;l<e;l++)for(E=u[l]+1;E<=u[l+1];E++)if(c=G[E],0<l&&E!==u[l+1]&&Math.abs(c-K[l])>Math.abs(c-K[l-1]))u[l]=E;else if(l<e-1&&u[l]!==E-1&&Math.abs(c-K[l])>Math.abs(c-K[l+1])){u[l+1]=E-1;break}E=L;L=0;c=[];l=[];for(let R=
0;R<e;R++){c.push(K[R]);l.push(m[R]);const O=r(R,u,G,z);K[R]=O.sbMean;m[R]=O.sbSdcm;L+=m[R]}}if(L>E){for(G=0;G<e;G++)u[G]=F[G],K[G]=c[G],m[G]=l[G];L=E}return{mean:K,sdcm:m}}function y(u,G,z,e,F){u=Math.max(e-u,G-e)/F/z;return 1<=u?1:.5<=u?.5:.25}function v(u){let G=0;for(let z=0;z<u.length;z++)G+=u[z];return G/=u.length}function n(u,G){let z=0;for(let e=0;e<u.length;e++){const F=u[e];z+=(F-G)*(F-G)}z/=u.length;return Math.sqrt(z)}function r(u,G,z,e){var F=0,c=0;for(var l=G[u]+1;l<=G[u+1];l++){const L=
e[l];F+=z[l]*L;c+=L}0>=c&&console.log("Exception in Natural Breaks calculation");F/=c;c=0;for(l=G[u]+1;l<=G[u+1];l++)c+=e[l]*(z[l]-F)**2;return{sbMean:F,sbSdcm:c}}b.createGenerateRendererClassBreaks=function(u){const {normalizationTotal:G}=u;return{classBreaks:a(u),normalizationTotal:G}};b.createGenerateRendererUniqueValues=function(u){u=J(u);const G=[],z=u.uniqueValues.length;for(let e=0;e<z;e++){const F=u.uniqueValues[e];G.push({value:F,count:u.valueFrequency[e],label:F.toString()})}return{uniqueValues:G}};
Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e){function F(P,M,N,q=P.hasZ,S=P.hasM){if(p.isNone(M))return null;const Y=P.hasZ&&q,V=P.hasM&&S;return N?(P=G.quantizeOptimizedGeometry(g,M,P.hasZ,P.hasM,"esriGeometryPoint",N,q,S),G.convertToPoint(P,Y,V)):G.convertToPoint(M,Y,V)}function c(){c=B._asyncToGenerator(function*(P,M,N){const {outFields:q,orderByFields:S,groupByFieldsForStatistics:Y,outStatistics:V}=P;if(q)for(var ja=0;ja<q.length;ja++)q[ja]=q[ja].trim();if(S)for(ja=0;ja<S.length;ja++)S[ja]=S[ja].trim();
if(Y)for(ja=0;ja<Y.length;ja++)Y[ja]=Y[ja].trim();if(V)for(ja=0;ja<V.length;ja++)V[ja].onStatisticField&&(V[ja].onStatisticField=V[ja].onStatisticField.trim());P.geometry&&!P.outSR&&(P.outSR=P.geometry.spatialReference);return l(P,M,N)});return c.apply(this,arguments)}function l(P,M,N){return L.apply(this,arguments)}function L(){L=B._asyncToGenerator(function*(P,M,N){if(!P)return null;var {where:q}=P;P.where=q=q&&q.trim();if(!q||/^1 *= *1$/.test(q)||M&&M===q)P.where=null;if(!P.geometry)return P;M=
yield K(P);P.distance=0;P.units=null;"esriSpatialRelEnvelopeIntersects"===P.spatialRel&&({spatialReference:q}=P.geometry,M=y.getGeometryExtent(M),M.spatialReference=q);P.geometry=M;yield e.checkProjectionSupport(M.spatialReference,N);M=(yield n.normalizeCentralMeridian(v.fromJSON(M)))[0];if(p.isNone(M))throw O;M=M.toJSON();M=yield e.project(M,M.spatialReference,N);if(!M)throw O;M.spatialReference=N;P.geometry=M;return P});return L.apply(this,arguments)}function K(P){return m.apply(this,arguments)}
function m(){m=B._asyncToGenerator(function*(P){const {geometry:M,distance:N,units:q}=P;if(null==N||"vertexAttributes"in M)return M;var S=M.spatialReference;P=q?R.fromJSON(q):k.getUnitString(S);S=S&&(r.isGeographic(S)||r.isWebMercator(S))?M:yield e.checkProjectionSupport(S,r.WGS84).then(()=>e.project(M,r.WGS84));return(yield A())(S.spatialReference,S,N,P)});return m.apply(this,arguments)}function A(){return E.apply(this,arguments)}function E(){E=B._asyncToGenerator(function*(){return(yield new Promise((P,
M)=>b(["../../../geometry/geometryEngineJSON"],P,M))).geodesicBuffer});return E.apply(this,arguments)}const R=new J.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),O=Object.freeze({}),w=new z,H=new z,g=new z,h={esriGeometryPoint:G.convertToPoint,esriGeometryPolyline:G.convertToPolyline,esriGeometryPolygon:G.convertToPolygon,esriGeometryMultipoint:G.convertToMultipoint},
D=(P,M)=>"_geVersion"!==P?M:void 0;a.QUERY_ENGINE_EMPTY_RESULT=O;a.cleanFromGeometryEngine=function(P){return P&&"_geVersion"in P?JSON.parse(JSON.stringify(P,D)):P};a.getCentroid=function(P,M,N){if("esriGeometryPolygon"!==P.geometryType||!M||!M.centroid&&!M.geometry)return null;M.centroid||(M.centroid=u.getCentroidOptimizedGeometry(new z,M.geometry,P.hasZ,P.hasM));return F(P,M.centroid,N)};a.getGeometry=function(P,M,N,q,S,Y,V=M,ja=N){const ma=M&&V,X=N&&ja;q=p.isSome(q)?"coords"in q?q:q.geometry:null;
if(p.isNone(q))return null;if(S)return M=G.generalizeOptimizedGeometry(H,q,M,N,P,S,V,ja),Y&&(M=G.quantizeOptimizedGeometry(g,M,ma,X,P,Y)),h[P](M,ma,X);if(Y)return Y=G.quantizeOptimizedGeometry(g,q,M,N,P,Y,V,ja),h[P](Y,ma,X);G.removeZMValues(w,q,M,N,V,ja);return h[P](w,ma,X)};a.normalizeQuery=function(P,M,N){return c.apply(this,arguments)};a.normalizeQueryLike=l;a.transformCentroid=F;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(b,a,B,J,p,k,y,v){function n(U,W,ea){if(U)for(const ra of U)(U=(U=k.getDeepValue(ra,W))&&"function"!==typeof U&&ea.get(U))&&k.setDeepValue(ra,U.name,W)}function r(U,W){if(!U||!W)return[];C.clear();u(C,U,W);return Array.from(C).sort()}function u(U,W,ea){var ra;if(ea)if(null!=W&&null!=(ra=W.fields)&&ra.length)if(ea.includes("*"))for(const {name:sa}of W.fields)U.add(sa);else for(const sa of ea)G(U,W,sa);else if(ea.includes("*"))U.clear(),U.add("*");else for(const sa of ea)U.add(sa)}function G(U,
W,ea){"string"===typeof ea&&(W?(W=W.get(ea))&&U.add(W.name):U.add(ea))}function z(U,W,ea){return e.apply(this,arguments)}function e(){e=B._asyncToGenerator(function*(U,W,ea){var ra;if(ea){var {arcadeUtils:sa}=yield v.loadArcade();ea=sa.extractFieldNames(ea,null==W?void 0:null==(ra=W.fields)?void 0:ra.map(xa=>xa.name));for(const xa of ea)G(U,W,xa)}});return e.apply(this,arguments)}function F(U,W,ea){return c.apply(this,arguments)}function c(){c=B._asyncToGenerator(function*(U,W,ea){if(ea&&"1\x3d1"!==
ea){const ra=(yield new Promise((sa,xa)=>b(["../../core/sql/WhereClause"],sa,xa))).WhereClause.create(ea,W);if(!ra.isStandardized)throw new J("fieldUtils:collectFilterFields","Where clause is not standardized",{where:ea});u(U,W,ra.fieldNames)}});return c.apply(this,arguments)}function l(U,W){for(const ea of U)if(ea&&ea.valueType&&ea.valueType===W)return ea.name;return null}function L(){L=B._asyncToGenerator(function*(U){if(!U)return[];const W=new Set;yield K(W,U);return Array.from(W).sort()});return L.apply(this,
arguments)}function K(U,W){return m.apply(this,arguments)}function m(){m=B._asyncToGenerator(function*(U,W){if(W){var ea=k.getDeepValue("elevationInfo.featureExpressionInfo",W);if(ea)return ea.collectRequiredFields(U,W.fieldsIndex)}});return m.apply(this,arguments)}function A(U,W,ea){return E.apply(this,arguments)}function E(){E=B._asyncToGenerator(function*(U,W,ea){ea.outStatistic.onStatisticValueExpression?z(U,W,ea.outStatistic.onStatisticValueExpression):U.add(ea.outStatistic.onStatisticField)});
return E.apply(this,arguments)}function R(){R=B._asyncToGenerator(function*(U,W,ea){var ra,sa;if(W&&ea&&"fields"in ea){var xa=[];null!=(ra=ea.popupTemplate)&&ra.expressionInfos&&xa.push(...ea.popupTemplate.expressionInfos.map(Aa=>z(U,W.fieldsIndex,Aa.expression)));if(Array.isArray(null==(sa=ea.popupTemplate)?void 0:sa.content)){ra=ea.popupTemplate.content;for(const Aa of ra)"expression"===Aa.type&&Aa.expressionInfo&&xa.push(z(U,W.fieldsIndex,Aa.expressionInfo.expression))}ea.fields&&xa.push(...ea.fields.map(Aa=>
A(U,W.fieldsIndex,Aa)));yield Promise.all(xa)}});return R.apply(this,arguments)}function O(){O=B._asyncToGenerator(function*(U,W,ea){W&&(W.timeInfo&&p.isSome(ea)&&ea.timeExtent&&u(U,W.fieldsIndex,[W.timeInfo.startField,W.timeInfo.endField]),W.floorInfo&&u(U,W.fieldsIndex,[W.floorInfo.floorField]),p.isSome(ea)&&p.isSome(ea.where)&&(yield F(U,W.fieldsIndex,ea.where)))});return O.apply(this,arguments)}function w(){w=B._asyncToGenerator(function*(U,W,ea){W&&ea&&(yield Promise.all(ea.map(ra=>H(U,W,ra))))});
return w.apply(this,arguments)}function H(U,W,ea){return g.apply(this,arguments)}function g(){g=B._asyncToGenerator(function*(U,W,ea){W&&ea&&(ea.valueExpression?yield z(U,W.fieldsIndex,ea.valueExpression):ea.field&&G(U,W.fieldsIndex,ea.field))});return g.apply(this,arguments)}function h(){h=B._asyncToGenerator(function*(U){if(!U)return[];const W="timeInfo"in U&&U.timeInfo;return W?r(U.fieldsIndex,[U.trackIdField,W.startField,W.endField]):[]});return h.apply(this,arguments)}function D(){D=B._asyncToGenerator(function*(U){if(!U)return[];
const W=new Set;yield P(W,U);return Array.from(W).sort()});return D.apply(this,arguments)}function P(U,W){return M.apply(this,arguments)}function M(){M=B._asyncToGenerator(function*(U,W){const {labelingInfo:ea,fieldsIndex:ra}=W;ea&&ea.length&&(yield Promise.all(ea.map(sa=>N(U,ra,sa))))});return M.apply(this,arguments)}function N(U,W,ea){return q.apply(this,arguments)}function q(){q=B._asyncToGenerator(function*(U,W,ea){if(ea){var ra=ea.getLabelExpression();ea=ea.where;"arcade"===ra.type?yield z(U,
W,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{G(U,W,sa.slice(1,-1))});yield F(U,W,ea)}});return q.apply(this,arguments)}function S(U){return"number"===typeof U&&!isNaN(U)&&isFinite(U)}function Y(U){return null===U||S(U)}function V(U){return null===U||ha(U)}function ja(U){return null!=U&&"string"===typeof U}function ma(U){return null===U||ja(U)}function X(){return!0}function na(U,W){let ea;switch(U.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ea=
U.nullable?V:ha;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ea=U.nullable?Y:S;break;case "string":case "esriFieldTypeString":ea=U.nullable?ma:ja;break;default:ea=X}return 1===arguments.length?ea:ea(W)}function oa(U){return null!=U&&T.has(U.type)}function qa(U,W){return U.nullable&&null===W?null:oa(U)&&!wa(U.type,Number(W))?a.NumericRangeValidationError.OUT_OF_RANGE:na(U,W)?U.domain?y.validateDomainValue(U.domain,W):null:a.TypeValidationError.INVALID_TYPE}
function wa(U,W){return(U="string"===typeof U?Ma(U):U)?U.isInteger?ha(W)&&W>=U.min&&W<=U.max:W>=U.min&&W<=U.max:!1}function Ma(U){switch(U){case "esriFieldTypeSmallInteger":case "small-integer":return aa;case "esriFieldTypeInteger":case "integer":return ba;case "esriFieldTypeSingle":case "single":return ka;case "esriFieldTypeDouble":case "double":return ia}}function Ja(U,W,ea){if(!W||!W.attributes||!U){if(p.isSome(ea))for(var ra of U)ea.add(ra);return!0}W=W.attributes;ra=!1;for(const sa of U)if(!(sa in
W))if(ra=!0,p.isSome(ea))ea.add(sa);else break;return ra}function La(){La=B._asyncToGenerator(function*(U,W){const ea=new Set;for(const ra of W)yield z(ea,U.fieldsIndex,ra);return Array.from(ea).sort()});return La.apply(this,arguments)}const Za="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),f=["field","normalizationField"],C=new Set,ha=(()=>"isInteger"in Number?
Number.isInteger:U=>"number"===typeof U&&isFinite(U)&&Math.floor(U)===U)(),x=["integer","small-integer","single","double"],T=new Set([...x,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);a.NumericRangeValidationError=void 0;(a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";a.TypeValidationError=void 0;(a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const aa={min:-32768,max:32767,isInteger:!0},ba={min:-2147483648,max:2147483647,isInteger:!0},ka={min:-3.4E38,max:1.2E38,isInteger:!1},ia={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.collectArcadeFieldNames=z;a.collectElevationFields=K;a.collectFeatureReductionFields=function(U,W,ea){return R.apply(this,arguments)};a.collectField=G;a.collectFields=u;a.collectFilterFields=function(U,W,ea){return O.apply(this,arguments)};a.collectLabelingFields=P;a.collectOrderByInfos=function(U,W,ea){return w.apply(this,
arguments)};a.doubleRange=ia;a.featureHasFields=function(U,W){return!Ja(U,W,null)};a.fixFields=r;a.fixRendererFields=function(U,W){if(null!=U&&null!=W)for(const ea of Array.isArray(U)?U:[U])if(n(Za,ea,W),"visualVariables"in ea&&ea.visualVariables)for(const ra of ea.visualVariables)n(f,ra,W)};a.fixTimeInfoFields=function(U,W){if(null!=U&&null!=W&&W.fields.length)if("startField"in U){var ea=W.get(U.startField);W=W.get(U.endField);U.startField=ea&&ea.name||null;U.endField=W&&W.name||null}else ea=W.get(U.startTimeField),
W=W.get(U.endTimeField),U.startTimeField=ea&&ea.name||null,U.endTimeField=W&&W.name||null};a.getDisplayFieldName=function({displayField:U,fields:W}){if(U)return U;if(!W||!W.length)return null;if(!(U=l(W,"name-or-title")||l(W,"unique-identifier")||l(W,"type-or-category")))a:{for(const ea of W)if(ea&&ea.name&&(W=ea.name.toLowerCase(),W.includes("name")||W.includes("title"))){U=ea.name;break a}U=null}return U};a.getElevationFields=function(U){return L.apply(this,arguments)};a.getExpressionFields=function(U,
W){return La.apply(this,arguments)};a.getFeatureEditFields=function(U){if(!U)return[];const W="editFieldsInfo"in U&&U.editFieldsInfo;return W?r(U.fieldsIndex,[W&&W.creatorField,W&&W.creationDateField,W&&W.editorField,W&&W.editDateField]):[]};a.getFeatureGeometryFields=function(U){if(!U)return[];const W=U.geometryFieldsInfo;return W?r(U.fieldsIndex,[W.shapeAreaField,W.shapeLengthField]):[]};a.getFieldDefaultValue=function(U){const W=U.defaultValue;if(void 0!==W&&na(U,W))return W;if(U.nullable)return null};
a.getFieldRange=function(U){const W=y.getDomainRange(U.domain);if(W)return W;if(oa(U))return Ma(U.type)};a.getLabelingFields=function(U){return D.apply(this,arguments)};a.getNumericTypeForValue=function(U){if(!S(U))return null;if(ha(U)){if(U>=aa.min&&U<=aa.max)return"esriFieldTypeSmallInteger";if(U>=ba.min&&U<=ba.max)return"esriFieldTypeInteger"}return U>=ka.min&&U<=ka.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.getTimeFields=function(U){return h.apply(this,arguments)};a.integerRange=ba;a.isDateField=
function(U){return null!=U&&("date"===U.type||"esriFieldTypeDate"===U.type)};a.isNumberInRange=wa;a.isNumericField=oa;a.isRasterPixelValueField=function(U){return["raster.itempixelvalue","raster.servicepixelvalue"].some(W=>U.toLowerCase().startsWith(W))};a.isStringField=function(U){return null!=U&&("string"===U.type||"esriFieldTypeString"===U.type)};a.isValidFieldValue=function(U,W){return null===qa(U,W)};a.isValueMatchingFieldType=na;a.numericTypes=x;a.packFields=function(U,W,ea=1){if(!W||!U)return[];
if(W.includes("*"))return["*"];W=r(U,W);return W.length/U.fields.length>=ea?["*"]:W};a.populateMissingFields=Ja;a.rendererFields=Za;a.sanitizeNullFieldValue=function(U){return null==U||"number"===typeof U&&isNaN(U)?null:U};a.singleRange=ka;a.smallIntegerRange=aa;a.unpackFieldNames=function(U,W){return p.isNone(W)||p.isNone(U)?[]:W.includes("*")?U.fields.map(ea=>ea.name):W};a.validateFieldValue=qa;a.validationErrorToString=function(U,W,ea){switch(U){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ea} is not in the coded domain - field: ${W.name}, domain: ${JSON.stringify(W.domain)}`;
case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ea} is out of the range of valid values - field: ${W.name}, domain: ${JSON.stringify(W.domain)}`;case a.TypeValidationError.INVALID_TYPE:return`Value ${ea} is not a valid value for the field type - field: ${W.name}, type: ${W.type}, nullable: ${W.nullable}`;case a.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Ma(W.type);return`Value ${ea} is out of range for the number type - field: ${W.name}, type: ${W.type}, value range is ${ra} to ${sa}`}}};
a.visualVariableFields=f;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(b){function a(B,J){switch(B.type){case "range":{const p="range"in B?B.range[1]:B.maxValue;if(+J<("range"in B?B.range[0]:B.minValue)||+J>p)return b.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==B.codedValues||B.codedValues.every(p=>null==p||p.code!==J))return b.DomainValidationError.INVALID_CODED_VALUE}return null}
b.DomainValidationError=void 0;(function(B){B.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";B.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(b.DomainValidationError||(b.DomainValidationError={}));b.getDomainRange=function(B){if(B&&"range"===B.type)return{min:"range"in B?B.range[0]:B.minValue,max:"range"in B?B.range[1]:B.maxValue}};b.isValidDomainValue=function(B,J){return null===a(B,J)};b.validateDomainValue=a;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(b,a,B,J,p,k){function y(){v||(v=B._asyncToGenerator(function*(){const r=yield new Promise((u,G)=>b(["./arcadeUtils"],u,G));return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return v}let v;J=(r,u,G)=>n.create(r,u,G,null,["$feature","$view"]);
let n=function(){function r(G,z,e,F,c,l,L,K){this.script=G;this.evaluate=c;this.fields=Array.isArray(L)?L:L.fields;this._syntaxTree=F;this._arcade=z;this._arcadeDictionary=e;this._arcadeFeature=l;this._spatialReference=K;this._referencesGeometry=z.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=function(){var G=B._asyncToGenerator(function*(z,e,F,c,l,L){const {arcade:K,Feature:m,Dictionary:A}=yield y(),E=k.fromJSON(e);
e=K.parseScript(z,L);l=l.reduce((g,h)=>({...g,[h]:null}),{});let R=null;p.isSome(c)&&(R=new A(c),R.immutable=!0,l.$config=null);c=K.scriptUsesGeometryEngine(e)&&K.enableGeometrySupport();L=K.scriptUsesFeatureSet(e)&&K.enableFeatureSetSupport();const O=K.scriptIsAsync(e)&&K.enableAsyncSupport();l={vars:l,spatialReference:E,useAsync:!!O};const w=new A;w.immutable=!1;w.setField("scale",0);const H=K.compileScript(e,l);yield Promise.all([c,L,O]);return new r(z,K,A,e,g=>{"$view"in g&&g.$view&&(w.setField("scale",
g.$view.scale),g.$view=w);R&&(g.$config=R);return H({vars:g,spatialReference:E})},new m,F,E)});return function(z,e,F,c,l,L){return G.apply(this,arguments)}}();var u=r.prototype;u.repurposeFeature=function(G){G.geometry&&!G.geometry.spatialReference&&(G.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(G.geometry,G.attributes,{fields:this.fields});return this._arcadeFeature};u.createDictionary=function(){return new this._arcadeDictionary};u.referencesMember=
function(G){return this._arcade.referencesMember(this._syntaxTree,G)};u.referencesFunction=function(G){return this._arcade.referencesFunction(this._syntaxTree,G)};u.referencesGeometry=function(){return this._referencesGeometry};u.referencesScale=function(){return this._referencesScale};u.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return r}();a.ArcadeExpression=n;a.createDictionaryExpression=(r,u,G,z)=>n.create(r,u,G,z,["$feature","$view"]);
a.createLabelExpression=(r,u,G)=>n.create(r,u,G,null,["$feature"]);a.createRendererExpression=J;a.createVVExpression=J;a.loadArcade=y;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z){function e(){return new Promise((L,K)=>b(["../../../geometry/geometryEngineJSON"],L,K))}function F(){F=B._asyncToGenerator(function*(L,K,m){const {spatialRel:A,geometry:E}=L;if(E){if(!0!==l.spatialRelationship[A])throw new J("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(v.isValid(E.spatialReference)&&v.isValid(m)){if(!0!==l.queryGeometry[y.getJsonType(E)])throw new J("feature-store:unsupported-query","Unsupported query geometry type",
{query:L});if(!0!==l.layerGeometry[K])throw new J("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return G.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}});return F.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};a.canQueryWithRBush=function(L){if(y.isExtent(L))return!0;if(y.isPolygon(L)){for(const K of L.rings)if(5!==K.length||K[0][0]!==K[1][0]||K[0][0]!==K[4][0]||K[2][0]!==K[3][0]||K[0][1]!==K[3][1]||K[0][1]!==K[4][1]||K[1][1]!==K[2][1])return!1;return!0}return!1};a.checkSpatialQuerySupport=function(L,K,m){return F.apply(this,arguments)};a.getSpatialQueryOperator=function(L,
K,m,A,E){if(y.isPolygon(K)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const R=r.convertFromPolygon(new u,K,!1,!1);return Promise.resolve(O=>n.polygonContainsPoint(R,!1,!1,O))}if(y.isPolygon(K)&&"esriGeometryMultipoint"===m){const R=r.convertFromPolygon(new u,K,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(O=>n.polygonContainsMultipoint(R,!1,!1,O,A,E))}if(y.isExtent(K)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===
L))return Promise.resolve(R=>p.extentContainsPoint(K,z.getGeometry(m,A,E,R)));if(y.isExtent(K)&&"esriGeometryMultipoint"===m&&"esriSpatialRelContains"===L)return Promise.resolve(R=>p.extentContainsMultipoint(K,z.getGeometry(m,A,E,R)));if(y.isExtent(K)&&"esriSpatialRelIntersects"===L){const R=k.getExtentIntersector(m);return Promise.resolve(O=>R(K,z.getGeometry(m,A,E,O)))}return e().then(R=>{const O=R[c[L]].bind(null,K.spatialReference,K);return w=>O(z.getGeometry(m,A,E,w))})};Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(b,a){b.extentIntersectsExtent=a.extentIntersectsExtent;b.extentIntersectsMultipoint=a.extentIntersectsMultipoint;b.extentIntersectsPoint=a.extentIntersectsPoint;b.extentIntersectsPolygon=a.extentIntersectsPolygon;b.extentIntersectsPolyline=a.extentIntersectsPolyline;b.extentIntersectsRings=a.extentIntersectsRings;b.getFeatureExtentIntersector=
a.getFeatureExtentIntersector;b.isSelfIntersecting=a.isSelfIntersecting;b.segmentIntersects=a.segmentIntersects;b.getExtentIntersector=function(B){return"mesh"===B?a.extentIntersectsExtent:a.getFeatureExtentIntersector(B)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(b){function a(B,J,p,k,y){if(!B)return!1;J=J?p?4:3:p?3:2;const {coords:v,lengths:n}=B;p=!1;B=0;for(const u of n){var r=
B;for(let G=B,z=B+u*J;G<z;G+=J){r=G+J;r===z&&(r=B);const e=v[G],F=v[G+1],c=v[r];r=v[r+1];(F<y&&r>=y||r<y&&F>=y)&&e+(y-F)/(r-F)*(c-e)<k&&(p=!p)}B+=u*J}return p}b.polygonContainsCoords=a;b.polygonContainsMultipoint=function(B,J,p,k,y,v){y=y?v?4:3:v?3:2;const {coords:n,lengths:r}=k;if(!r)return!1;for(let u=0,G=0;u<r.length;u++,G+=y)if(!a(B,J,p,n[G],n[G+1]))return!1;return!0};b.polygonContainsPoint=function(B,J,p,k){return a(B,J,p,k.coords[0],k.coords[1])};Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(b){function a(p,k,y,v,n){if(null!=v&&null!=n)return r=>{const u=p.getAttribute(r,k);r=p.getAttribute(r,y);return(null==u||u<=n)&&(null==r||r>=v)};if(null!=v)return r=>{r=p.getAttribute(r,y);return null==r||r>=v};if(null!=n)return r=>{r=p.getAttribute(r,k);return null==r||r<=n}}function B(p,k,y,v){if(null!=y&&null!=v&&y===v)return n=>p.getAttribute(n,k)===y;if(null!=y&&null!=v)return n=>
{n=p.getAttribute(n,k);return n>=y&&n<=v};if(null!=y)return n=>p.getAttribute(n,k)>=y;if(null!=v)return n=>p.getAttribute(n,k)<=v}function J(){return()=>!1}b.getTimeExtent=function(p,k){if(!p)return null;const y=k.featureAdapter,{startTimeField:v,endTimeField:n}=p;let r=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(v&&n)k.forEach(G=>{const z=y.getAttribute(G,v);G=y.getAttribute(G,n);null==z||isNaN(z)||(r=Math.min(r,z));null==G||isNaN(G)||(u=Math.max(u,G))});else{const G=v||n;k.forEach(z=>
{z=y.getAttribute(z,G);null==z||isNaN(z)||(r=Math.min(r,z),u=Math.max(u,z))})}return{start:r,end:u}};b.getTimeOperator=function(p,k,y){if(!k||!p)return null;const {startTimeField:v,endTimeField:n}=p;if(!v&&!n)return null;const {start:r,end:u}=k;return null===r&&null===u?null:void 0===r&&void 0===u?J():v&&n?a(y,v,n,r,u):B(y,v||n,r,u)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(b,a){function B(p){return"oid"===p.type||"esriFieldTypeOID"===p.type}function J(p){return"global-id"===p.type||"esriFieldTypeGlobalID"===p.type}return function(){function p(y){this.fields=y;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){var v=[];for(const n of y)if(y=n&&n.name){const r=y.toLowerCase().trim();this._fieldsMap.set(y,n);this._fieldsMap.set(r,n);v.push(r);
"date"===n.type||"esriFieldTypeDate"===n.type?(this.dateFields.push(n),this._dateFieldsSet.add(n)):a.isNumericField(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n));B(n)||J(n)||(n.editable=null==n.editable?!0:!!n.editable,n.nullable=null==n.nullable?!0:!!n.nullable)}v.sort();this.uid=v.join(",")}}var k=p.prototype;k.destroy=function(){this._fieldsMap.clear()};k.has=function(y){return null!=this.get(y)};k.get=function(y){return null!=y?this._fieldsMap.get(y)||this._fieldsMap.get(y.toLowerCase().trim()):
void 0};k.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};k.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};k.normalizeFieldName=function(y){if(y=this.get(y))return y.name};b._createClass(p,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)B(y)||J(y)||y.nullable||void 0!==a.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return p}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K){function m(N){return E.has(N)?E.get(N):"number"===typeof N?N:1}const A=k.getLogger("esri.views.support.Scheduler");b.TaskPriority=void 0;(function(N){N.RESOURCE_CONTROLLER="schedule";N.SLIDE="slide";N.STREAM_DATA_LOADER="stream loader";N.ELEVATION_QUERY="elevation query";N.TERRAIN_SURFACE="terrain";N.SURFACE_GEOMETRY_UPDATES="surface geometry updates";N.GRAPHICS_CORE="Graphics3D";N.I3S_CONTROLLER="I3S";N.POINT_CLOUD_LAYER="point cloud";N.FEATURE_TILE_FETCHER=
"feature fetcher";N.OVERLAY="overlay";N.STAGE="stage";N.GRAPHICS_DECONFLICTOR="graphics deconflictor";N.FILTER_VISIBILITY="Graphics3D filter visibility";N.SCALE_VISIBILITY="Graphics3D scale visibility";N.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";N.POINT_OF_INTEREST_FREQUENT="POI frequent";N.POINT_OF_INTEREST_INFREQUENT="POI infrequent";N.LABELER="labeler";N.FEATURE_QUERY_ENGINE="feature query";N.FEATURE_TILE_TREE="feature tile tree";N.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";N.ELEVATION_ALIGNMENT=
"elevation alignment";N.TEXT_TEXTURE_ATLAS="text texture atlas";N.TEXTURE_UNLOAD="texture unload";N.LINE_OF_SIGHT_TOOL="line of sight tool";N.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";N.ELEVATION_PROFILE="elevation profile";N.SNAPPING="snapping";N.SHADOW_ACCUMULATOR="shadow accumulator";N.CLOUDS_GENERATOR="cloud generator";N[N.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority={}));const E=new Map([[b.TaskPriority.RESOURCE_CONTROLLER,0],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,
0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.CLOUDS_GENERATOR,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,
30]]);b.State=void 0;(function(N){N[N.ANIMATING=0]="ANIMATING";N[N.INTERACTING=1]="INTERACTING";N[N.IDLE=2]="IDLE"})(b.State||(b.State={}));const R=G.Milliseconds(6.5),O=G.Milliseconds(1),w=G.Milliseconds(30),H=G.Milliseconds(1E3/30),g=G.Milliseconds(100);var h;(function(N){let q=function(V){function ja(){var X=V.call(this)||this;X.updating=!0;X._microTaskQueued=!1;X.performanceInfo={total:new v("total"),tasks:new Map};X._frameTaskTimes=new Map;X._budget=new Y;X._state=b.State.INTERACTING;X._tasks=
new n;X._runQueue=new n;X._load=0;X._idleStateCallbacks=new n;X._idleUpdatesStartFired=!1;X._maxReschedule=M;X._forceTask=!1;X._debug=!1;X._debugHandle=u.watch(()=>K.SCHEDULER_LOG_SLOW_TASKS,qa=>X._debug=qa,u.initial);for(const qa of Object.keys(b.TaskPriority))X.performanceInfo.tasks.set(b.TaskPriority[qa],new v(b.TaskPriority[qa]));let na;const oa=a._assertThisInitialized(X);X._test={get state(){return y.unwrapOr(na,oa._state)},set state(qa){na=qa},FRAME_SAFETY_BUDGET:R,INTERACTING_BUDGET:H,IDLE_BUDGET:g,
get availableBudget(){return oa._budget.budget},usedBudget:0,getBudget:()=>oa._budget,setBudget:qa=>oa._budget=qa,updateTask:qa=>X._updateTask(qa),getState:qa=>X._getState(qa),getRuntime:qa=>X._getRuntime(qa),frameTaskTimes:X._frameTaskTimes,resetRuntimes:()=>X._resetRuntimes(),getRunning:()=>X._getRunning()};return X}a._inheritsLoose(ja,V);var ma=ja.prototype;ma.destroy=function(){this._tasks.toArray().forEach(X=>X.remove());this._tasks.clear();y.removeMaybe(this._debugHandle);this.updating=this._microTaskQueued=
!1};ma.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=M,this._schedule(),this.frame()))}))};ma.registerTask=function(X,na){const oa=m(X);na=new S(this,X,na,oa);this._tasks.push(na);this.performanceInfo.tasks.has(X)||this.performanceInfo.tasks.set(X,new v(X));return na};ma.registerIdleStateCallbacks=function(X,na){const oa={idleBegin:X,idleEnd:na};this._idleStateCallbacks.push(oa);
this.state===b.State.IDLE&&this._idleUpdatesStartFired&&oa.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(oa),set idleBegin(wa){qa._idleUpdatesStartFired&&(oa.idleEnd(),qa._state===b.State.IDLE&&wa());oa.idleBegin=wa},set idleEnd(wa){oa.idleEnd=wa}}};ma.updateBudget=function(X){this._test.usedBudget=0;let na=R,oa=X.frameDuration,qa=O;switch(this.state){case b.State.IDLE:na=G.Milliseconds(0);oa=G.Milliseconds(Math.max(g,X.frameDuration));qa=w;break;case b.State.INTERACTING:oa=
G.Milliseconds(Math.max(H,X.frameDuration))}oa=G.Milliseconds(oa-X.elapsedFrameTime-na);if(this.state!==b.State.IDLE&&oa<O&&!this._forceTask)return this._forceTask=!0,!1;oa=G.Milliseconds(Math.max(oa,qa));this._budget.reset(oa,this.state);this._maxReschedule=M;this._updateLoad();return this._schedule()};ma.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case b.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(X=>X.idleBegin()));
this._runIdle();break;case b.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ma.stopFrame=function(){this._budget.reset(G.Milliseconds(0),this._state);this._budget.madeProgress()};ma._removeIdleStateCallbacks=function(X){this._idleUpdatesStartFired&&X.idleEnd();this._idleStateCallbacks.removeUnordered(X)};ma.removeTask=function(X){this._tasks.removeUnordered(X);this._runQueue.removeUnordered(X)};ma._updateTask=function(X){this._tasks.forAll(na=>
{na.name===X&&na.setPriority(X)})};ma._getState=function(X){if(this._runQueue.some(oa=>oa.name===X))return b.TaskState.SCHEDULED;let na=b.TaskState.IDLE;this._tasks.forAll(oa=>{oa.name===X&&oa.needsUpdate&&(1>=oa.schedulePriority?na=b.TaskState.READY:na!==b.TaskState.READY&&(na=b.TaskState.WAITING))});return na};ma._getRuntime=function(X){let na=0;this._tasks.forAll(oa=>{oa.name===X&&(na+=oa.runtime)});return na};ma._resetRuntimes=function(){this._tasks.forAll(X=>X.runtime=0)};ma._getRunning=function(){const X=
new Map;this._tasks.forAll(oa=>{oa.needsUpdate&&X.set(oa.name,(X.get(oa.name)||0)+1)});if(0===X.size)return null;let na="";X.forEach((oa,qa)=>{na=1<oa?na+` ${oa}x ${qa}`:na+` ${qa}`});return na};ma._runIdle=function(){this._run()};ma._runInteracting=function(){this._run()};ma._runAnimating=function(){this._run()};ma._updateLoad=function(){const X=this._tasks.reduce((na,oa)=>oa.needsUpdate?++na:na,0);this._load=.9*this._load+X*(1-.9)};ma._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(X=>
{if(X.needsUpdate)return!0;X.schedulePriority=X.basePriority;return!1});for(this._tasks.forAll(X=>{0===X.basePriority&&X.needsUpdate&&!this._runQueue.includes(X)&&this._runQueue.unshift(X)});0===this._runQueue.length;){let X=!1,na=0;this._tasks.forAll(oa=>{if(oa.needsUpdate&&0!==oa.schedulePriority&&0!==oa.basePriority)switch(X=!0,na=Math.max(na,oa.basePriority),oa.schedulePriority){case 1:oa.schedulePriority=0;this._runQueue.push(oa);break;default:--oa.schedulePriority}});if(!X)return this.updating=
!1;this._maxReschedule===M&&(this._maxReschedule=na);--this._maxReschedule}return this.updating=!0};ma._run=function(){const X=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var na=this._budget.now();const oa=this._runQueue.pop();this._budget.resetProgress();try{oa.task.runTask(this._budget)}catch(qa){A.error(`Exception in task "${oa.name}"`,qa)}oa.schedulePriority=oa.basePriority;na=this._budget.now()-na;oa.runtime+=na;this._frameTaskTimes.set(oa.priority,this._frameTaskTimes.get(oa.priority)+
na);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",oa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-X);return}}while(this._schedule());this.updating=this._tasks.some(oa=>oa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-X)};ma._startFrameTaskTimes=function(){for(const X of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[X],
0)};ma._recordFrameTaskTimes=function(X){this._frameTaskTimes.forEach((na,oa)=>this.performanceInfo.tasks.get(oa).record(na));this.performanceInfo.total.record(X)};a._createClass(ja,[{key:"load",get:function(){return this._load}},{key:"state",get:function(){return y.isNone(this._test.state)?this._state:this._test.state},set:function(X){this._state!==X&&(this._state=X,this.state!==b.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(na=>na.idleEnd())))}},
{key:"test",get:function(){return this._test}}]);return ja}(J);B.__decorate([z.property()],q.prototype,"updating",void 0);q=B.__decorate([l.subclass("esri.views.support.Scheduler")],q);N.Scheduler=q;let S=function(V){function ja(X,na,oa,qa){var wa=V.call(this,{})||this;wa._scheduler=X;wa.name=na;wa._basePriority=qa;wa.runtime=0;wa._queue=new L.PromiseQueue;wa._handles=new p;wa.schedulePriority=wa._basePriority;wa.task=y.isSome(oa)?oa:wa._queue;wa._handles.add(u.when(()=>wa.task.running,()=>X.activate()));
return wa}a._inheritsLoose(ja,V);var ma=ja.prototype;ma.normalizeCtorArgs=function(){return{}};ma.remove=function(){this.processQueue(D);this._scheduler.removeTask(this);this.schedule=P.schedule;this.reschedule=P.reschedule;this._handles.destroy()};ma.setPriority=function(X){this.name=X;X=m(X);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=X;this._basePriority=X};ma.schedule=function(X,na,oa){return this._queue.push(X,na,oa)};ma.reschedule=function(X,na,oa){return this._queue.unshift(X,
na,oa)};ma.processQueue=function(X){this._queue.runTask(X)};a._createClass(ja,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(X){this.setPriority(X)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ja}(J);B.__decorate([z.property({constructOnly:!0})],S.prototype,"task",void 0);B.__decorate([z.property({readOnly:!0})],S.prototype,
"updating",null);S=B.__decorate([l.subclass("esri.views.support.SchedulerTask")],S);let Y=function(){function V(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=b.State.IDLE;this._didWork=!1;this._enabled=!0}var ja=V.prototype;ja.run=function(ma){if(this.done)return!1;!0===ma()&&(this._didWork=!0);return!0};ja.madeProgress=function(){this._didWork=!0};ja.reset=function(ma,X){this._begin=this.now();this._budget=ma;this._state=X;this._didWork=!1};ja.now=
function(){return performance.now()};ja.resetProgress=function(){this._didWork=!1};a._createClass(V,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ma){this._enabled=ma}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-
this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return V}();N.Budget=Y})(h||(h={}));b.TaskState=void 0;(function(N){N.SCHEDULED="s";N.READY="r";N.WAITING="w";N.IDLE="i"})(b.TaskState||(b.TaskState={}));const D=(()=>{const N=new h.Budget;N.enabled=!1;return N})(),P=new (function(){function N(){}var q=N.prototype;q.remove=function(){};q.processQueue=function(){};q.schedule=function(S,Y,V){try{if(r.isAborted(Y)){const ja=r.createAbortError();return V?Promise.resolve(V(ja)):
Promise.reject(ja)}return r.when(S(D))}catch(ja){return Promise.reject(ja)}};q.reschedule=function(S,Y,V){return this.schedule(S,Y,V)};return N}()),M=Number.MAX_SAFE_INTEGER;b.ImmediateTask=P;b.getTaskPriority=m;b.newScheduler=function(){return new h.Scheduler};b.noBudget=D;b.taskPriorities=E;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n,r){b.PromiseQueue=function(G){function z(){var F=G.apply(this,arguments)||this;F._tasks=[];F.running=!1;return F}a._inheritsLoose(z,G);var e=z.prototype;e.destroy=function(){this.cancelAll()};e.runTask=function(F){for(;!F.done&&this._process(F);)F.madeProgress()};e.push=function(F,c,l){this.running=!0;return new Promise((L,K)=>this._tasks.push(new u(L,K,F,c,l)))};e.unshift=function(F,c,l){this.running=!0;return new Promise((L,K)=>this._tasks.unshift(new u(L,K,F,c,l)))};
e._process=function(F){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const l=p.isAborted(c.signal);if(l&&!c.abortCallback)c.reject(p.createAbortError());else{const L=l?c.abortCallback(p.createAbortError()):c.callback(F);p.isPromiseLike(L)?L.then(c.resolve,c.reject):c.resolve(L)}}catch(l){c.reject(l)}this.running=0<this._tasks.length;return!0};e.cancelAll=function(){const F=p.createAbortError();for(const c of this._tasks)if(c.abortCallback){const l=c.abortCallback(F);c.resolve(l)}else c.reject(F);
this._tasks.length=0;this.running=!1};a._createClass(z,[{key:"length",get:function(){return this._tasks.length}}]);return z}(J);B.__decorate([k.property()],b.PromiseQueue.prototype,"running",void 0);b.PromiseQueue=B.__decorate([r.subclass("esri.layers.support.PromiseQueue")],b.PromiseQueue);let u=function(G,z,e,F,c){this.resolve=G;this.reject=z;this.callback=e;this.signal=F;this.abortCallback=c};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v){B=function(n){function r(){var u=n.apply(this,arguments)||this;u.SCHEDULER_LOG_SLOW_TASKS=!1;u.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return u}b._inheritsLoose(r,n);return r}(B);a.__decorate([J.property()],B.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([J.property()],B.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);B=a.__decorate([v.subclass("esri.views.support.DebugFlags")],B);return new B})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K){var m;B=new B.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});J=m=function(A){function E(O){O=A.call(this,O)||this;O.dpi=96;O.format=null;O.origin=null;O.minScale=0;O.maxScale=0;O.size=null;O.spatialReference=null;return O}b._inheritsLoose(E,A);E.create=function(O=
{}){const {resolutionFactor:w=1,scales:H,size:g=256,spatialReference:h=F.WebMercator,numLODs:D=24}=O;if(!l.isValid(h)){O=[];if(H)for(var P=0;P<H.length;P++){var M=H[P];O.push({level:P,scale:M,resolution:M})}else for(P=5E-4,M=D-1;0<=M;M--)O.unshift({level:M,scale:P,resolution:P}),P*=2;return new m({dpi:96,lods:O,origin:new e(0,0,h),size:[g,g],spatialReference:h})}P=l.getInfo(h);O=O.origin?new e({x:O.origin.x,y:O.origin.y,spatialReference:h}):P?new e({x:P.origin[0],y:P.origin[1],spatialReference:h}):
new e({x:0,y:0,spatialReference:h});P=1/(39.37*k.getMetersPerUnitForSR(h)*96);M=[];if(H)for(var N=0;N<H.length;N++){var q=H[N];M.push({level:N,scale:q,resolution:q*P})}else{var S=l.isGeographic(h)?512/g*5.916575275917094E8:256/g*5.91657527591555E8;N=Math.ceil(D/w);M.push({level:0,scale:S,resolution:S*P});for(q=1;q<N;q++)S/=2**w,M.push({level:q,scale:S,resolution:S*P})}return new m({dpi:96,lods:M,origin:O,size:[g,g],spatialReference:h})};var R=E.prototype;R.readOrigin=function(O,w){return e.fromJSON({spatialReference:w.spatialReference,
...O})};R.readSize=function(O,w){return[w.cols,w.rows]};R.writeSize=function(O,w){w.cols=O[0];w.rows=O[1]};R.zoomToScale=function(O){const w=this.scales;if(0>=O)return w[0];if(O>=w.length-1)return w[w.length-1];{const H=Math.floor(O);return w[H]/(w[H]/w[H+1])**(O-H)}};R.scaleToZoom=function(O){const w=this.scales,H=w.length-1;let g=0;for(;g<H;g++){const h=w[g],D=w[g+1];if(h<=O)break;if(D===O)return g+1;if(h>O&&D<O)return g+Math.log(h/O)/Math.log(h/D)}return g};R.snapScale=function(O,w=.95){O=this.scaleToZoom(O);
return O%Math.floor(O)>=w?this.zoomToScale(Math.ceil(O)):this.zoomToScale(Math.floor(O))};R.tileAt=function(O,w,H,g){var h=this.lodAt(O);if(!h)return null;let D;if("number"===typeof w)D=w,w=H;else{if(l.equals(w.spatialReference,this.spatialReference))D=w.x,w=w.y;else{g=L.project(w,this.spatialReference);if(p.isNone(g))return null;D=g.x;w=g.y}g=H}H=h.resolution*this.size[0];h=h.resolution*this.size[1];g||(g={id:null,level:0,row:0,col:0,extent:c.create()});g.level=O;g.row=Math.floor((this.origin.y-
w)/h+.001);g.col=Math.floor((D-this.origin.x)/H+.001);this.updateTileInfo(g);return g};R.updateTileInfo=function(O,w=m.ExtrapolateOptions.NONE){var H=this.lodAt(O.level);H||w!==m.ExtrapolateOptions.POWER_OF_TWO||(w=this.lods[this.lods.length-1],w.level<O.level&&(H=w));if(H){var g=O.level-H.level;w=H.resolution*this.size[0]/2**g;H=H.resolution*this.size[1]/2**g;O.id=`${O.level}/${O.row}/${O.col}`;O.extent||(O.extent=c.create());O.extent[0]=this.origin.x+O.col*w;O.extent[1]=this.origin.y-(O.row+1)*
H;O.extent[2]=O.extent[0]+w;O.extent[3]=O.extent[1]+H}};R.upsampleTile=function(O){const w=this._upsampleLevels[O.level];if(!w||-1===w.parentLevel)return!1;O.level=w.parentLevel;O.row=Math.floor(O.row/w.factor+.001);O.col=Math.floor(O.col/w.factor+.001);this.updateTileInfo(O);return!0};R.getTileBounds=function(O,w){var {resolution:H}=this.lodAt(w.level);const g=H*this.size[0];H*=this.size[1];O[0]=this.origin.x+w.col*g;O[1]=this.origin.y-(w.row+1)*H;O[2]=O[0]+g;O[3]=O[1]+H;return O};R.lodAt=function(O){return this._levelToLOD&&
this._levelToLOD[O]||null};R.clone=function(){return m.fromJSON(this.write({}))};R.getOrCreateCompatible=function(O,w){if(256===this.size[0]&&256===this.size[1])return 256===O?this:null;const H=[],g=this.lods.length;for(let h=0;h<g;h++){const D=this.lods[h];H.push(new K({level:D.level,scale:D.scale,resolution:D.resolution*w}))}return new m({size:[O,O],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:H})};R._initializeUpsampleLevels=
function(){const O=this.lods;this._upsampleLevels=[];let w=null;for(let H=0;H<O.length;H++){const g=O[H];this._upsampleLevels[g.level]={parentLevel:w?w.level:-1,factor:w?w.resolution/g.resolution:0};w=g}};b._createClass(E,[{key:"isWrappable",get:function(){const {spatialReference:O,origin:w}=this;if(O&&w){const H=l.getInfo(O);return O.isWrappable&&Math.abs(H.origin[0]-w.x)<=H.dx}return!1}},{key:"lods",set:function(O){let w=0,H=0;const g=[];this._levelToLOD={};O&&(w=-Infinity,H=Infinity,O.forEach(h=>
{g.push(h.scale);w=h.scale>w?h.scale:w;H=h.scale<H?h.scale:H;this._levelToLOD[h.level]=h}));this._set("scales",g);this._set("minScale",w);this._set("maxScale",H);this._set("lods",O);this._initializeUpsampleLevels()}}]);return E}(J.JSONSupport);a.__decorate([y.property({type:Number,json:{write:!0}})],J.prototype,"compressionQuality",void 0);a.__decorate([y.property({type:Number,json:{write:!0}})],J.prototype,"dpi",void 0);a.__decorate([y.property({type:String,json:{read:B.read,write:B.write,origins:{"web-scene":{read:!1,
write:!1}}}})],J.prototype,"format",void 0);a.__decorate([y.property({readOnly:!0})],J.prototype,"isWrappable",null);a.__decorate([y.property({type:e,json:{write:!0}})],J.prototype,"origin",void 0);a.__decorate([u.reader("origin")],J.prototype,"readOrigin",null);a.__decorate([y.property({type:[K],value:null,json:{write:!0}})],J.prototype,"lods",null);a.__decorate([y.property({readOnly:!0})],J.prototype,"minScale",void 0);a.__decorate([y.property({readOnly:!0})],J.prototype,"maxScale",void 0);a.__decorate([y.property({readOnly:!0})],
J.prototype,"scales",void 0);a.__decorate([y.property({cast:A=>Array.isArray(A)?A:"number"===typeof A?[A,A]:[256,256]})],J.prototype,"size",void 0);a.__decorate([u.reader("size",["rows","cols"])],J.prototype,"readSize",null);a.__decorate([z.writer("size",{cols:{type:r.Integer},rows:{type:r.Integer}})],J.prototype,"writeSize",null);a.__decorate([y.property({type:F,json:{write:!0}})],J.prototype,"spatialReference",void 0);J=m=a.__decorate([G.subclass("esri.layers.support.TileInfo")],J);(function(A){A=
A.ExtrapolateOptions||(A.ExtrapolateOptions={});A[A.NONE=0]="NONE";A[A.POWER_OF_TWO=1]="POWER_OF_TWO"})(J||(J={}));return J})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,B,J,p,k,y,v){var n;B=n=function(r){function u(G){G=
r.call(this,G)||this;G.cols=null;G.level=0;G.levelValue=null;G.origin=null;G.resolution=0;G.rows=null;G.scale=0;return G}b._inheritsLoose(u,r);u.prototype.clone=function(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return u}(B.JSONSupport);a.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],B.prototype,"cols",void 0);a.__decorate([J.property({type:y.Integer,
json:{write:!0}})],B.prototype,"level",void 0);a.__decorate([J.property({type:String,json:{write:!0}})],B.prototype,"levelValue",void 0);a.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],B.prototype,"origin",void 0);a.__decorate([J.property({type:Number,json:{write:!0}})],B.prototype,"resolution",void 0);a.__decorate([J.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],B.prototype,
"rows",void 0);a.__decorate([J.property({type:Number,json:{write:!0}})],B.prototype,"scale",void 0);return B=n=a.__decorate([v.subclass("esri.layers.support.LOD")],B)})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./TimeReference ../../portal/timeUnitKebabDictionary".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e){var F;p=F=function(c){function l(K){K=c.call(this,K)||this;K.cumulative=!1;K.endField=null;K.fullTimeExtent=null;K.hasLiveData=!1;K.interval=null;K.startField=null;K.timeReference=null;K.trackIdField=null;K.useTime=!0;return K}b._inheritsLoose(l,c);var L=l.prototype;L.readFullTimeExtent=function(K,m){return m.timeExtent&&Array.isArray(m.timeExtent)&&2===m.timeExtent.length?new B({start:new Date(m.timeExtent[0]),end:new Date(m.timeExtent[1])}):null};L.writeFullTimeExtent=
function(K,m){K&&y.isSome(K.start)&&y.isSome(K.end)?m.timeExtent=[K.start.getTime(),K.end.getTime()]:m.timeExtent=null};L.readInterval=function(K,m){return m.timeInterval&&m.timeIntervalUnits?new J({value:m.timeInterval,unit:e.timeUnitKebabDictionary.fromJSON(m.timeIntervalUnits)}):m.defaultTimeInterval&&m.defaultTimeIntervalUnits?new J({value:m.defaultTimeInterval,unit:e.timeUnitKebabDictionary.fromJSON(m.defaultTimeIntervalUnits)}):null};L.writeInterval=function(K,m){K?(K=K.toJSON(),m.timeInterval=
K.value,m.timeIntervalUnits=K.unit):(m.timeInterval=null,m.timeIntervalUnits=null)};L.clone=function(){const {cumulative:K,endField:m,hasLiveData:A,interval:E,startField:R,timeReference:O,fullTimeExtent:w,trackIdField:H,useTime:g}=this;return new F({cumulative:K,endField:m,hasLiveData:A,interval:E,startField:R,timeReference:k.clone(O),fullTimeExtent:k.clone(w),trackIdField:H,useTime:g})};return l}(p.JSONSupport);a.__decorate([v.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],p.prototype,"cumulative",void 0);a.__decorate([v.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],p.prototype,"endField",void 0);a.__decorate([v.property({type:B,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"fullTimeExtent",void 0);a.__decorate([r.reader("fullTimeExtent",["timeExtent"])],p.prototype,"readFullTimeExtent",null);a.__decorate([G.writer("fullTimeExtent")],p.prototype,"writeFullTimeExtent",
null);a.__decorate([v.property({type:Boolean,json:{write:!0}})],p.prototype,"hasLiveData",void 0);a.__decorate([v.property({type:J,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"interval",void 0);a.__decorate([r.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],p.prototype,"readInterval",null);a.__decorate([G.writer("interval")],p.prototype,"writeInterval",null);a.__decorate([v.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],p.prototype,"startField",void 0);a.__decorate([v.property({type:z,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"timeReference",void 0);a.__decorate([v.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"trackIdField",void 0);a.__decorate([v.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],p.prototype,"useTime",void 0);return p=F=a.__decorate([u.subclass("esri.layers.support.TimeInfo")],
p)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(b,a,B,J,p,k,y,v,n,r,u,G){var z;B=z=function(c){function l(K){K=c.call(this,K)||this;K.end=null;K.start=
null;return K}b._inheritsLoose(l,c);var L=l.prototype;L.readEnd=function(K,m){return null!=m.end?new Date(m.end):null};L.writeEnd=function(K,m){m.end=K?K.getTime():null};L.readStart=function(K,m){return null!=m.start?new Date(m.start):null};L.writeStart=function(K,m){m.start=K?K.getTime():null};L.clone=function(){return new z({end:this.end,start:this.start})};L.equals=function(K){if(!K)return!1;const m=J.isSome(this.start)?this.start.getTime():this.start,A=J.isSome(this.end)?this.end.getTime():this.end,
E=J.isSome(K.start)?K.start.getTime():K.start;K=J.isSome(K.end)?K.end.getTime():K.end;return m===E&&A===K};L.expandTo=function(K){if(this.isEmpty||this.isAllTime)return this.clone();const m=J.applySome(this.start,E=>p.truncateDate(E,K)),A=J.applySome(this.end,E=>p.offsetDate(p.truncateDate(E,K),1,K));return new z({start:m,end:A})};L.intersection=function(K){if(!K)return this.clone();if(this.isEmpty||K.isEmpty)return z.empty;if(this.isAllTime)return K.clone();if(K.isAllTime)return this.clone();var m=
J.mapOr(this.start,-Infinity,w=>w.getTime());const A=J.mapOr(this.end,Infinity,w=>w.getTime()),E=J.mapOr(K.start,-Infinity,w=>w.getTime());K=J.mapOr(K.end,Infinity,w=>w.getTime());let R,O;E>=m&&E<=A?R=E:m>=E&&m<=K&&(R=m);A>=E&&A<=K?O=A:K>=m&&K<=A&&(O=K);return isNaN(R)||isNaN(O)?z.empty:(m=new z,m.start=-Infinity===R?null:new Date(R),m.end=Infinity===O?null:new Date(O),m)};L.offset=function(K,m){if(this.isEmpty||this.isAllTime)return this.clone();const A=new z,{start:E,end:R}=this;J.isSome(E)&&(A.start=
p.offsetDate(E,K,m));J.isSome(R)&&(A.end=p.offsetDate(R,K,m));return A};L.union=function(K){if(!K||K.isEmpty)return this.clone();if(this.isEmpty)return K.clone();if(this.isAllTime||K.isAllTime)return e.clone();const m=J.isSome(this.start)&&J.isSome(K.start)?new Date(Math.min(this.start.getTime(),K.start.getTime())):null;K=J.isSome(this.end)&&J.isSome(K.end)?new Date(Math.max(this.end.getTime(),K.end.getTime())):null;return new z({start:m,end:K})};b._createClass(l,[{key:"isAllTime",get:function(){return this.equals(z.allTime)}},
{key:"isEmpty",get:function(){return this.equals(z.empty)}}],[{key:"allTime",get:function(){return e}},{key:"empty",get:function(){return F}}]);return l}(B.JSONSupport);a.__decorate([k.property({type:Date,json:{write:{allowNull:!0}}})],B.prototype,"end",void 0);a.__decorate([r.reader("end")],B.prototype,"readEnd",null);a.__decorate([G.writer("end")],B.prototype,"writeEnd",null);a.__decorate([k.property({readOnly:!0,json:{read:!1}})],B.prototype,"isAllTime",null);a.__decorate([k.property({readOnly:!0,
json:{read:!1}})],B.prototype,"isEmpty",null);a.__decorate([k.property({type:Date,json:{write:{allowNull:!0}}})],B.prototype,"start",void 0);a.__decorate([r.reader("start")],B.prototype,"readStart",null);a.__decorate([G.writer("start")],B.prototype,"writeStart",null);B=z=a.__decorate([u.subclass("esri.TimeExtent")],B);const e=new B,F=new B({start:void 0,end:void 0});return B})},"esri/core/timeUtils":function(){define(["exports","./has"],function(b,a){function B(k,y,v){return 0===k?0:k*J[y]/J[v]}const J=
{milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},p={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},
months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};b.convertTime=B;b.makeUTCTime=function(k,y,v="milliseconds"){y=new Date(B(y,v,"milliseconds"));y.setUTCFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate());return y};b.offsetDate=function(k,y,v){k=new Date(k.getTime());if(y&&v){const {getter:r,
setter:u,multiplier:G}=p[v];if("months"===v){v=k.getFullYear();var n=k.getMonth()+y;v=new Date(v,n+1,1);v.setDate(0);v=v.getDate();k.getDate()>v&&k.setDate(v)}k[u](k[r]()+y*G)}return k};b.offsetDateUTC=function(k,y,v="milliseconds"){k=k.getTime();y=B(y,v,"milliseconds");return new Date(k+y)};b.resetUTCDate=function(k,y){k=new Date(k.getTime());k.setUTCFullYear(y.getFullYear(),y.getMonth(),y.getDate());return k};b.timeSinceUTCMidnight=function(k,y="milliseconds"){const v=B(k.getUTCHours(),"hours",
"milliseconds"),n=B(k.getUTCMinutes(),"minutes","milliseconds"),r=B(k.getUTCSeconds(),"seconds","milliseconds");k=k.getUTCMilliseconds();return B(v+n+r+k,"milliseconds",y)};b.truncateDate=function(k,y){switch(y){case "milliseconds":return new Date(k.getTime());case "seconds":return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds());case "minutes":return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes());case "hours":return new Date(k.getFullYear(),
k.getMonth(),k.getDate(),k.getHours());case "days":return new Date(k.getFullYear(),k.getMonth(),k.getDate());case "weeks":return new Date(k.getFullYear(),k.getMonth(),k.getDate()-k.getDay());case "months":return new Date(k.getFullYear(),k.getMonth(),1);case "years":return new Date(k.getFullYear(),0,1);case "decades":return new Date(k.getFullYear()-k.getFullYear()%10,0,1);case "centuries":return new Date(k.getFullYear()-k.getFullYear()%100,0,1);default:return new Date}};b.truncateLocalTime=function(k){const y=
new Date(0);y.setHours(0);y.setMinutes(0);y.setSeconds(0);y.setMilliseconds(0);y.setFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate());return y};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass ./portal/timeUnitKebabDictionary".split(" "),
function(b,a,B,J,p,k,y,v,n,r){var u;B=u=function(G){function z(F){F=G.call(this,F)||this;F.value=0;F.unit="milliseconds";return F}b._inheritsLoose(z,G);var e=z.prototype;e.toMilliseconds=function(){return J.convertTime(this.value,this.unit,"milliseconds")};e.clone=function(){return new u({value:this.value,unit:this.unit})};return z}(B.JSONSupport);a.__decorate([p.property({type:Number,json:{write:!0},nonNullable:!0})],B.prototype,"value",void 0);a.__decorate([p.property({type:r.timeUnitKebabDictionary.apiValues,
json:{type:r.timeUnitKebabDictionary.jsonValues,read:r.timeUnitKebabDictionary.read,write:r.timeUnitKebabDictionary.write},nonNullable:!0})],B.prototype,"unit",void 0);return B=u=a.__decorate([n.subclass("esri.TimeInterval")],B)})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(b,a){a=a.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",
esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});b.timeUnitKebabDictionary=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n){var r;B=r=function(u){function G(e){e=u.call(this,e)||this;e.respectsDaylightSaving=!1;e.timezone=null;return e}b._inheritsLoose(G,u);var z=G.prototype;z.readRespectsDaylightSaving=function(e,F){return void 0!==F.respectsDaylightSaving?F.respectsDaylightSaving:void 0!==F.respectDaylightSaving?F.respectDaylightSaving:!1};z.clone=function(){const {respectsDaylightSaving:e,timezone:F}=this;return new r({respectsDaylightSaving:e,timezone:F})};return G}(B.JSONSupport);a.__decorate([J.property({type:Boolean,
json:{write:!0}})],B.prototype,"respectsDaylightSaving",void 0);a.__decorate([v.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],B.prototype,"readRespectsDaylightSaving",null);a.__decorate([J.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],B.prototype,"timezone",void 0);return B=r=a.__decorate([n.subclass("esri.layers.support.TimeReference")],B)})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K,m){var A;const E=new p.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});p=new p.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});k=A=function(R){function O(H){H=R.call(this,H)||this;H.aggregateIds=null;H.cacheHint=void 0;H.compactGeometryEnabled=!1;H.datumTransformation=null;H.defaultSpatialReferenceEnabled=!1;H.distance=void 0;H.dynamicDataSource=void 0;H.formatOf3DObjects=null;H.gdbVersion=null;H.geometry=null;H.geometryPrecision=void 0;H.groupByFieldsForStatistics=null;H.having=null;
H.historicMoment=null;H.maxAllowableOffset=void 0;H.maxRecordCountFactor=1;H.multipatchOption=null;H.num=void 0;H.objectIds=null;H.orderByFields=null;H.outFields=null;H.outSpatialReference=null;H.outStatistics=null;H.parameterValues=null;H.pixelSize=null;H.quantizationParameters=null;H.rangeValues=null;H.relationParameter=null;H.resultType=null;H.returnCentroid=!1;H.returnDistinctValues=!1;H.returnExceededLimitFeatures=!0;H.returnGeometry=!1;H.returnQueryGeometry=!1;H.returnM=void 0;H.returnZ=void 0;
H.sourceSpatialReference=null;H.spatialRelationship="intersects";H.start=void 0;H.sqlFormat=null;H.text=null;H.timeExtent=null;H.timeReferenceUnknownClient=!1;H.units=null;H.where=null;return H}b._inheritsLoose(O,R);O.from=function(H){return e.ensureClass(A,H)};var w=O.prototype;w.castDatumTransformation=function(H){return"number"===typeof H||"object"===typeof H?H:null};w.writeHistoricMoment=function(H,g){g.historicMoment=H&&H.getTime()};w.writeParameterValues=function(H,g){if(H){const h={};for(const D in H){const P=
H[D];Array.isArray(P)?h[D]=P.map(M=>M instanceof Date?M.getTime():M):h[D]=P instanceof Date?P.getTime():P}g.parameterValues=h}};w.writeStart=function(H,g){g.resultOffset=this.start;g.resultRecordCount=this.num||10;g.where="1\x3d1"};w.writeWhere=function(H,g){g.where=H||"1\x3d1"};w.clone=function(){return new A(y.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,
distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:v.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,
outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,
returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return O}(k.JSONSupport);k.MAX_MAX_RECORD_COUNT_FACTOR=5;a.__decorate([n.property({json:{write:!0}})],k.prototype,"aggregateIds",void 0);a.__decorate([n.property({type:Boolean,
json:{write:!0}})],k.prototype,"cacheHint",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"compactGeometryEnabled",void 0);a.__decorate([n.property({json:{write:!0}})],k.prototype,"datumTransformation",void 0);a.__decorate([r.cast("datumTransformation")],k.prototype,"castDatumTransformation",null);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"defaultSpatialReferenceEnabled",void 0);a.__decorate([n.property({type:Number,
json:{write:{overridePolicy(R){return{enabled:0<R}}}}})],k.prototype,"distance",void 0);a.__decorate([n.property({type:c.DataLayerSource,json:{write:!0}})],k.prototype,"dynamicDataSource",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],k.prototype,"formatOf3DObjects",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],k.prototype,"gdbVersion",void 0);a.__decorate([n.property({types:B.geometryTypes,json:{read:F.fromJSON,write:!0}})],k.prototype,"geometry",void 0);a.__decorate([n.property({type:Number,
json:{write:!0}})],k.prototype,"geometryPrecision",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],k.prototype,"groupByFieldsForStatistics",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],k.prototype,"having",void 0);a.__decorate([n.property({type:Date})],k.prototype,"historicMoment",void 0);a.__decorate([z.writer("historicMoment")],k.prototype,"writeHistoricMoment",null);a.__decorate([n.property({type:Number,json:{write:!0}})],k.prototype,"maxAllowableOffset",
void 0);a.__decorate([n.property({type:Number,cast(R){return 1>R?1:R>A.MAX_MAX_RECORD_COUNT_FACTOR?A.MAX_MAX_RECORD_COUNT_FACTOR:R},json:{write:{overridePolicy(R){return{enabled:1<R}}}}})],k.prototype,"maxRecordCountFactor",void 0);a.__decorate([n.property({type:["xyFootprint"],json:{write:!0}})],k.prototype,"multipatchOption",void 0);a.__decorate([n.property({type:Number,json:{read:{source:"resultRecordCount"}}})],k.prototype,"num",void 0);a.__decorate([n.property({json:{write:!0}})],k.prototype,
"objectIds",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],k.prototype,"orderByFields",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],k.prototype,"outFields",void 0);a.__decorate([n.property({type:K,json:{name:"outSR",write:!0}})],k.prototype,"outSpatialReference",void 0);a.__decorate([n.property({type:[L],json:{write:{enabled:!0,overridePolicy(){return{enabled:v.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],k.prototype,"outStatistics",void 0);
a.__decorate([n.property({json:{write:!0}})],k.prototype,"parameterValues",void 0);a.__decorate([z.writer("parameterValues")],k.prototype,"writeParameterValues",null);a.__decorate([n.property({type:m,json:{write:!0}})],k.prototype,"pixelSize",void 0);a.__decorate([n.property({type:l,json:{write:!0}})],k.prototype,"quantizationParameters",void 0);a.__decorate([n.property({type:[Object],json:{write:!0}})],k.prototype,"rangeValues",void 0);a.__decorate([n.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],k.prototype,"relationParameter",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],k.prototype,"resultType",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnCentroid",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnDistinctValues",void 0);a.__decorate([n.property({type:Boolean,json:{default:!0,
write:!0}})],k.prototype,"returnExceededLimitFeatures",void 0);a.__decorate([n.property({type:Boolean,json:{write:!0}})],k.prototype,"returnGeometry",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnQueryGeometry",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"returnM",void 0);a.__decorate([n.property({type:Boolean,json:{write:{overridePolicy(R){return{enabled:R}}}}})],k.prototype,"returnZ",void 0);a.__decorate([n.property({type:K,
json:{write:!0}})],k.prototype,"sourceSpatialReference",void 0);a.__decorate([u.enumeration(E,{ignoreUnknown:!1,name:"spatialRel"})],k.prototype,"spatialRelationship",void 0);a.__decorate([n.property({type:Number,json:{read:{source:"resultOffset"}}})],k.prototype,"start",void 0);a.__decorate([z.writer("start"),z.writer("num")],k.prototype,"writeStart",null);a.__decorate([n.property({type:String,json:{write:!0}})],k.prototype,"sqlFormat",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],
k.prototype,"text",void 0);a.__decorate([n.property({type:J,json:{write:!0}})],k.prototype,"timeExtent",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],k.prototype,"timeReferenceUnknownClient",void 0);a.__decorate([u.enumeration(p,{ignoreUnknown:!1}),n.property({json:{write:{overridePolicy(R){return{enabled:R&&0<this.distance}}}}})],k.prototype,"units",void 0);a.__decorate([n.property({type:String,json:{write:{overridePolicy(R){return{enabled:null!=R||0<this.start}}}}})],
k.prototype,"where",void 0);a.__decorate([z.writer("where")],k.prototype,"writeWhere",null);return k=A=a.__decorate([G.subclass("esri.rest.support.Query")],k)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K){function m(){O||(O=e.createTypeReader({types:A()}));return O}function A(){w||(w={key:"type",base:null,typeMap:{"data-layer":b.DataLayerSource,"map-layer":c.MapLayerSource}});return w}var E,R;J=J.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});b.JoinTableDataSource=E=function(H){function g(D){D=H.call(this,D)||this;D.type="join-table";return D}a._inheritsLoose(g,H);var h=g.prototype;h.readLeftTableSource=function(D,
P,M){return m()(D,P,M)};h.castLeftTableSource=function(D){return z.ensureOneOfType(A(),D)};h.readRightTableSource=function(D,P,M){return m()(D,P,M)};h.castRightTableSource=function(D){return z.ensureOneOfType(A(),D)};h.clone=function(){var D,P;const {leftTableKey:M,rightTableKey:N,leftTableSource:q,rightTableSource:S,joinType:Y}=this,V={leftTableKey:M,rightTableKey:N,leftTableSource:null!=(D=null==q?void 0:q.clone())?D:void 0,rightTableSource:null!=(P=null==S?void 0:S.clone())?P:void 0,joinType:Y};
return new E(V)};return g}(p.JSONSupport);B.__decorate([r.enumeration({joinTable:"join-table"})],b.JoinTableDataSource.prototype,"type",void 0);B.__decorate([k.property({type:String,json:{write:!0}})],b.JoinTableDataSource.prototype,"leftTableKey",void 0);B.__decorate([k.property({type:String,json:{write:!0}})],b.JoinTableDataSource.prototype,"rightTableKey",void 0);B.__decorate([k.property({json:{write:!0}})],b.JoinTableDataSource.prototype,"leftTableSource",void 0);B.__decorate([u.reader("leftTableSource")],
b.JoinTableDataSource.prototype,"readLeftTableSource",null);B.__decorate([n.cast("leftTableSource")],b.JoinTableDataSource.prototype,"castLeftTableSource",null);B.__decorate([k.property({json:{write:!0}})],b.JoinTableDataSource.prototype,"rightTableSource",void 0);B.__decorate([u.reader("rightTableSource")],b.JoinTableDataSource.prototype,"readRightTableSource",null);B.__decorate([n.cast("rightTableSource")],b.JoinTableDataSource.prototype,"castRightTableSource",null);B.__decorate([r.enumeration(J)],
b.JoinTableDataSource.prototype,"joinType",void 0);b.JoinTableDataSource=E=B.__decorate([G.subclass("esri.layers.support.source.JoinTableDataSource")],b.JoinTableDataSource);let O=null,w=null;n={key:"type",base:null,typeMap:{"join-table":b.JoinTableDataSource,"query-table":l.QueryTableDataSource,raster:L.RasterDataSource,table:K.TableDataSource}};b.DataLayerSource=R=function(H){function g(h){h=H.call(this,h)||this;h.type="data-layer";return h}a._inheritsLoose(g,H);g.prototype.clone=function(){const {fields:h,
dataSource:D}=this;return new R({fields:h,dataSource:D})};return g}(p.JSONSupport);B.__decorate([r.enumeration({dataLayer:"data-layer"})],b.DataLayerSource.prototype,"type",void 0);B.__decorate([k.property({type:[F],json:{write:!0}})],b.DataLayerSource.prototype,"fields",void 0);B.__decorate([k.property({types:n,json:{write:!0}})],b.DataLayerSource.prototype,"dataSource",void 0);b.DataLayerSource=R=B.__decorate([G.subclass("esri.layers.support.source.DataLayerSource")],b.DataLayerSource);b.DataLayerSource.from=
z.ensureType(b.DataLayerSource);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z){var e;const F=new B.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});B=e=function(c){function l(K){K=c.call(this,K)||this;
K.alias=null;K.defaultValue=void 0;K.description=null;K.domain=null;K.editable=!0;K.length=-1;K.name=null;K.nullable=!0;K.type=null;K.valueType=null;return K}b._inheritsLoose(l,c);var L=l.prototype;L.readDescription=function(K,{description:m}){let A;try{A=JSON.parse(m)}catch(E){}return A?A.value:null};L.readValueType=function(K,{description:m}){let A;try{A=JSON.parse(m)}catch(E){}return A?F.fromJSON(A.fieldValueType):null};L.clone=function(){return new e({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return l}(J.JSONSupport);a.__decorate([p.property({type:String,json:{write:!0}})],B.prototype,"alias",void 0);a.__decorate([p.property({type:[String,Number],json:{write:{allowNull:!0}}})],B.prototype,"defaultValue",void 0);a.__decorate([p.property()],B.prototype,"description",void 0);a.__decorate([r.reader("description")],
B.prototype,"readDescription",null);a.__decorate([p.property({types:G.types,json:{read:{reader:G.fromJSON},write:!0}})],B.prototype,"domain",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],B.prototype,"editable",void 0);a.__decorate([p.property({type:v.Integer,json:{write:!0}})],B.prototype,"length",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],B.prototype,"name",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],B.prototype,"nullable",void 0);a.__decorate([n.enumeration(z.kebabDict)],
B.prototype,"type",void 0);a.__decorate([p.property()],B.prototype,"valueType",void 0);a.__decorate([r.reader("valueType",["description"])],B.prototype,"readValueType",null);return B=e=a.__decorate([u.subclass("esri.layers.support.Field")],B)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(b,a,B,J,p,k){a={key:"type",base:J,typeMap:{range:k,"coded-value":B,inherited:p}};b.CodedValueDomain=B;
b.DomainBase=J;b.InheritedDomain=p;b.RangeDomain=k;b.fromJSON=function(y){if(!y||!y.type)return null;switch(y.type){case "range":return k.fromJSON(y);case "codedValue":return B.fromJSON(y);case "inherited":return p.fromJSON(y)}return null};b.types=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(b,a,B,J,p,k,y,v,n){var r;p=r=function(u){function G(e){e=u.call(this,e)||this;e.codedValues=null;e.type="coded-value";return e}b._inheritsLoose(G,u);var z=G.prototype;z.getName=function(e){let F=null;if(this.codedValues){const c=String(e);this.codedValues.some(l=>{String(l.code)===c&&(F=l.name);return!!F})}return F};z.clone=function(){return new r({codedValues:B.clone(this.codedValues),name:this.name})};return G}(n);a.__decorate([J.property({type:[v.CodedValue],json:{write:!0}})],p.prototype,
"codedValues",void 0);a.__decorate([k.enumeration({codedValue:"coded-value"})],p.prototype,"type",void 0);return p=r=a.__decorate([y.subclass("esri.layers.support.CodedValueDomain")],p)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n){var r;b.CodedValue=r=function(u){function G(z){z=u.call(this,z)||this;z.name=null;z.code=null;return z}a._inheritsLoose(G,u);G.prototype.clone=function(){return new r({name:this.name,code:this.code})};return G}(J.JSONSupport);B.__decorate([p.property({type:String,json:{write:!0}})],b.CodedValue.prototype,"name",void 0);B.__decorate([p.property({type:[String,Number],json:{write:!0}})],b.CodedValue.prototype,"code",void 0);b.CodedValue=r=B.__decorate([n.subclass("esri.layers.support.CodedValue")],
b.CodedValue);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,
B,J,p,k,y,v,n,r){B=new B.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});J=function(u){function G(z){z=u.call(this,z)||this;z.name=null;z.type=null;return z}b._inheritsLoose(G,u);return G}(J.JSONSupport);a.__decorate([p.property({type:String,json:{write:!0}})],J.prototype,"name",void 0);a.__decorate([n.enumeration(B)],J.prototype,"type",void 0);return J=a.__decorate([r.subclass("esri.layers.support.Domain")],J)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,a,B,J,p,k,y,v,n,r){var u;B=u=function(G){function z(e){e=G.call(this,e)||this;e.type="inherited";return e}b._inheritsLoose(z,G);z.prototype.clone=function(){return new u};return z}(r);a.__decorate([v.enumeration({inherited:"inherited"})],B.prototype,"type",void 0);return B=u=a.__decorate([n.subclass("esri.layers.support.InheritedDomain")],B)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,a,B,J,p,k,y,v,n){var r;J=r=function(u){function G(z){z=u.call(this,z)||this;z.maxValue=null;z.minValue=null;z.type="range";return z}b._inheritsLoose(G,u);G.prototype.clone=function(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return G}(n);a.__decorate([B.property({type:Number,json:{type:[Number],read:{source:"range",reader(u,G){return G.range&&G.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(u,G,z){G[z]=[this.minValue||0,u]}}}})],J.prototype,"maxValue",void 0);a.__decorate([B.property({type:Number,json:{type:[Number],read:{source:"range",reader(u,G){return G.range&&G.range[0]}},write:{target:"range",writer(u,G,z){G[z]=[u,this.maxValue||0]}}}})],J.prototype,"minValue",void 0);a.__decorate([y.enumeration({range:"range"})],J.prototype,"type",void 0);return J=r=a.__decorate([v.subclass("esri.layers.support.RangeDomain")],J)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(b,a){a=new a.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});b.kebabDict=a;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,B,J,p,k,y,v,n,r){var u;b.MapLayerSource=
u=function(G){function z(e){e=G.call(this,e)||this;e.type="map-layer";return e}a._inheritsLoose(z,G);z.prototype.clone=function(){const {mapLayerId:e,gdbVersion:F}=this;return new u({mapLayerId:e,gdbVersion:F})};return z}(J.JSONSupport);B.__decorate([n.enumeration({mapLayer:"map-layer"})],b.MapLayerSource.prototype,"type",void 0);B.__decorate([p.property({type:v.Integer,json:{write:!0}})],b.MapLayerSource.prototype,"mapLayerId",void 0);B.__decorate([p.property({type:String,json:{write:!0}})],b.MapLayerSource.prototype,
"gdbVersion",void 0);b.MapLayerSource=u=B.__decorate([r.subclass("esri.layers.support.source.MapLayerSource")],b.MapLayerSource);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z){var e;b.QueryTableDataSource=e=function(F){function c(l){l=F.call(this,l)||this;l.type="query-table";return l}a._inheritsLoose(c,F);c.prototype.clone=function(){var l;const {workspaceId:L,query:K,oidFields:m,spatialReference:A,geometryType:E}=this,R={workspaceId:L,query:K,oidFields:m,spatialReference:null!=(l=null==A?void 0:A.clone())?l:void 0,geometryType:E};return new e(R)};return c}(p.JSONSupport);B.__decorate([r.enumeration({queryTable:"query-table"})],b.QueryTableDataSource.prototype,
"type",void 0);B.__decorate([k.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,"workspaceId",void 0);B.__decorate([k.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,"query",void 0);B.__decorate([k.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,"oidFields",void 0);B.__decorate([k.property({type:G,json:{write:!0}})],b.QueryTableDataSource.prototype,"spatialReference",void 0);B.__decorate([r.enumeration(z.featureGeometryTypeKebabDictionary)],
b.QueryTableDataSource.prototype,"geometryType",void 0);b.QueryTableDataSource=e=B.__decorate([u.subclass("esri.layers.support.source.QueryTableDataSource")],b.QueryTableDataSource);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n,r){var u;b.RasterDataSource=u=function(G){function z(e){e=G.call(this,e)||this;e.type="raster";return e}a._inheritsLoose(z,G);z.prototype.clone=function(){const {workspaceId:e,dataSourceName:F}=this;return new u({workspaceId:e,dataSourceName:F})};return z}(J.JSONSupport);B.__decorate([n.enumeration({raster:"raster"})],b.RasterDataSource.prototype,"type",void 0);B.__decorate([p.property({type:String,json:{write:!0}})],b.RasterDataSource.prototype,"dataSourceName",void 0);
B.__decorate([p.property({type:String,json:{write:!0}})],b.RasterDataSource.prototype,"workspaceId",void 0);b.RasterDataSource=u=B.__decorate([r.subclass("esri.layers.support.source.RasterDataSource")],b.RasterDataSource);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k,y,v,n,r){var u;b.TableDataSource=u=function(G){function z(e){e=G.call(this,e)||this;e.type="table";return e}a._inheritsLoose(z,G);z.prototype.clone=function(){const {workspaceId:e,gdbVersion:F,dataSourceName:c}=this;return new u({workspaceId:e,gdbVersion:F,dataSourceName:c})};return z}(J.JSONSupport);B.__decorate([n.enumeration({table:"table"})],b.TableDataSource.prototype,"type",void 0);B.__decorate([p.property({type:String,json:{write:!0}})],b.TableDataSource.prototype,"workspaceId",
void 0);B.__decorate([p.property({type:String,json:{write:!0}})],b.TableDataSource.prototype,"gdbVersion",void 0);B.__decorate([p.property({type:String,json:{write:!0}})],b.TableDataSource.prototype,"dataSourceName",void 0);b.TableDataSource=u=B.__decorate([r.subclass("esri.layers.support.source.TableDataSource")],b.TableDataSource);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(b,a,B,J,p,k,y,v,n,r){var u;B=new J.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});p=u=function(G){function z(e){e=G.call(this,e)||this;e.extent=null;e.mode="view";e.originPosition="upper-left";e.tolerance=1;return e}b._inheritsLoose(z,G);z.prototype.clone=function(){return new u(k.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return z}(p.JSONSupport);a.__decorate([y.property({type:r,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],p.prototype,"extent",void 0);a.__decorate([y.property({type:["view","edit"],json:{write:!0}})],p.prototype,"mode",void 0);a.__decorate([y.property({type:String,json:{read:B.read,write:B.write}})],p.prototype,"originPosition",void 0);a.__decorate([y.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],p.prototype,"tolerance",void 0);return p=u=a.__decorate([n.subclass("esri.rest.support.QuantizationParameters")],p)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(b,a,B,J,p,k,y,v,n){var r;B=new B.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});J=r=function(u){function G(e){e=u.call(this,e)||this;e.maxPointCount=void 0;e.maxRecordCount=void 0;e.maxVertexCount=void 0;e.onStatisticField=
null;e.outStatisticFieldName=null;e.statisticType=null;e.statisticParameters=null;return e}b._inheritsLoose(G,u);var z=G.prototype;z.writeStatisticParameters=function(e,F){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)F.statisticParameters=p.clone(e)};z.clone=function(){return new r({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:p.clone(this.statisticParameters)})};return G}(J.JSONSupport);a.__decorate([k.property({type:Number,json:{write:!0}})],J.prototype,"maxPointCount",void 0);a.__decorate([k.property({type:Number,json:{write:!0}})],J.prototype,"maxRecordCount",void 0);a.__decorate([k.property({type:Number,json:{write:!0}})],J.prototype,"maxVertexCount",void 0);a.__decorate([k.property({type:String,json:{write:!0}})],J.prototype,"onStatisticField",void 0);a.__decorate([k.property({type:String,
json:{write:!0}})],J.prototype,"outStatisticFieldName",void 0);a.__decorate([k.property({type:String,json:{read:{source:"statisticType",reader:B.read},write:{target:"statisticType",writer:B.write}}})],J.prototype,"statisticType",void 0);a.__decorate([k.property({type:Object})],J.prototype,"statisticParameters",void 0);a.__decorate([n.writer("statisticParameters")],J.prototype,"writeStatisticParameters",null);return J=r=a.__decorate([v.subclass("esri.rest.support.StatisticDefinition")],J)})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K,m,A,E,R){const O=v.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");b.FeatureServiceTiledFetcher=function(w){function H(h){h=w.call(this,h)||this;h.tilesOfInterest=[];h.availability=0;h.pendingTiles=new Map;h.pendingEdits=new p.AsyncSequence;h.pendingEditsAbortController=new AbortController;return h}a._inheritsLoose(H,w);var g=H.prototype;g.initialize=function(){this._initializeFetchExtent();
this.updatingHandles.add(()=>this.configuration,()=>this.refresh());this.updatingHandles.add(()=>this.tilesOfInterest,(h,D)=>{J.equals(h,D,({id:P},{id:M})=>P===M)||this._process()},u.sync)};g.destroy=function(){this.pendingTiles.forEach(h=>this._deletePendingTile(h));this.pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this.pendingEditsAbortController.abort();this.pendingEditsAbortController=null};g.refresh=function(){this.store.refresh();this.pendingTiles.forEach(h=>this._deletePendingTile(h));
this._process()};g.applyEdits=function(h){var D=this;this.pendingEdits.push(h,function(){var P=a._asyncToGenerator(function*(M){if(0!==M.addedFeatures.length||0!==M.updatedFeatures.length||0!==M.deletedFeatures.length){for(const [,N]of D.pendingTiles)N.reset();M={...M,deletedFeatures:M.deletedFeatures.map(({objectId:N,globalId:q})=>N&&-1!==N?N:D._lookupObjectIdByGlobalId(q))};yield D.updatingHandles.addPromise(D.store.processEdits(M,(N,q)=>D._queryFeaturesById(N,q),D.pendingEditsAbortController.signal));
D._processPendingTiles()}});return function(M){return P.apply(this,arguments)}}())};g._initializeFetchExtent=function(){var h=this;if(this.capabilities.query.supportsExtent&&K.isHostedAgolService(this.url)){var D=r.createTask(function(){var P=a._asyncToGenerator(function*(M){try{var N;const q=yield A.executeQueryForExtent(h.url,new E({where:"1\x3d1",outSpatialReference:h.spatialReference,cacheHint:h.capabilities.query.supportsCacheHint?!0:void 0}),{query:h.configuration.customParameters,signal:M});
h.store.extent=c.fromJSON(null==(N=q.data)?void 0:N.extent)}catch(q){r.throwIfAbortError(q),O.warn("Failed to fetch data extent",q)}});return function(M){return P.apply(this,arguments)}}());this.updatingHandles.addPromise(D.promise.then(()=>this._process()));this.handles.add(y.makeHandle(()=>D.abort()))}};g._process=function(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()};g._markTilesNotAlive=function(){for(const [,h]of this.pendingTiles)h.alive=
!1};g._createPendingTiles=function(){var h=this._collectMissingTilesInfo();this._setAvailability(n.isNone(h)?1:h.coveredArea/h.fullArea);if(!n.isNone(h))for(const {data:D,resolution:P}of h.missingTiles)(h=this.pendingTiles.get(D.id))?(h.resolution=P,h.alive=!0):this._createPendingTile(D,P)};g._collectMissingTilesInfo=function(){let h=null;for(let D=this.tilesOfInterest.length-1;0<=D;D--){const P=this.store.process(this.tilesOfInterest[D],(M,N)=>this._verifyTileComplexity(M,N));n.isNone(h)?h=P:h.prepend(P)}return h};
g._deletePendingTiles=function(){for(const [,h]of this.pendingTiles)h.alive||this._deletePendingTile(h)};g._processPendingTiles=function(){const h={fetchCount:(D,P)=>this._fetchCount(D,P),fetchFeatures:(D,P,M)=>this._fetchFeatures(D,P,M),finish:(D,P)=>this._finishPendingTile(D,P),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(h))for(const [,D]of this.pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(D.data),D.resolution)&&this.updatingHandles.addPromise(D.process(h))};
g._verifyTileComplexity=function(h,D){return this._verifyVertexComplexity(h)&&this._verifyFeatureDensity(h,D)};g._verifyVertexComplexity=function(h){return 1E6>h*this.minimumVerticesPerFeature};g._verifyFeatureDensity=function(h,D){if(n.isNone(this.tileInfo))return!1;D*=this.tileSize;return 1>25/(D*D)*h};g._ensureFetchAllCounts=function(h){let D=!0;for(const [,P]of this.pendingTiles)P.state.type<R.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(P.process(h)),P.state.type<=R.StateType.FETCH_COUNT&&
(D=!1);return D};g._finishPendingTile=function(h,D){this.store.add(h.data,D);this._deletePendingTile(h);this._updateAvailability()};g._updateAvailability=function(){const h=this._collectMissingTilesInfo();this._setAvailability(n.isNone(h)?1:h.coveredArea/h.fullArea)};g._setAvailability=function(h){this._set("availability",h)};g._createPendingTile=function(h,D){D=new R.PendingFeatureTile(h,D);this.pendingTiles.set(h.id,D);return D};g._deletePendingTile=function(h){h.reset();this.pendingTiles.delete(h.data.id)};
g._fetchCount=function(){var h=a._asyncToGenerator(function*(D,P){return this.store.fetchCount(D.data,this.url,this._createCountQuery(D),{query:this.customParameters,timeout:6E5,signal:P})});return function(D,P){return h.apply(this,arguments)}}();g._fetchFeatures=function(){var h=a._asyncToGenerator(function*(D,P,M){let N=0,q,S=0,Y=P;for(;;){const V=this._createFeaturesQuery(D),ja=this._setPagingParameters(V,N,Y),{features:ma,exceededTransferLimit:X}=yield this._queryFeatures(V,M);ja&&(N+=n.unwrap(V.num));
S+=ma.length;q=q?q.concat(ma):ma;Y=P-S;if(!ja||!X||0>=Y)return q}});return function(D,P,M){return h.apply(this,arguments)}}();g._filterProperties=function(h){return n.isNone(h)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:h.where||"1\x3d1",timeExtent:h.timeExtent,gdbVersion:h.gdbVersion}};g._lookupObjectIdByGlobalId=function(h){const D=this.globalIdField,P=this.objectIdField;if(n.isNone(D))throw Error("Expected globalIdField to be defined");let M=null;this.store.featureStore.forEach(N=>
{if(h===N.attributes[D]){var q;M=null!=(q=N.objectId)?q:N.attributes[P]}});if(n.isNone(M))throw Error(`Expected to find a feature with globalId ${h}`);return M};g._queryFeaturesById=function(h,D){const P=this._createFeaturesQuery(null);P.objectIds=h;return this._queryFeatures(P,D)};g._queryFeatures=function(h,D){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(h,D):this._queryFeaturesJSON(h,D)};g._queryFeaturesPBF=function(){var h=a._asyncToGenerator(function*(D,P){const {sourceSpatialReference:M}=
this;({data:D}=yield A.executeQueryPBF(this.url,D,new m.OptimizedFeatureSetParserContext({sourceSpatialReference:M}),{query:this.configuration.customParameters,timeout:6E5,signal:P}));return L.unquantizeOptimizedFeatureSet(D)});return function(D,P){return h.apply(this,arguments)}}();g._queryFeaturesJSON=function(){var h=a._asyncToGenerator(function*(D,P){const {sourceSpatialReference:M}=this;({data:D}=yield A.executeQuery(this.url,D,M,{query:this.configuration.customParameters,timeout:6E5,signal:P}));
return L.convertFromFeatureSet(D,this.objectIdField)});return function(D,P){return h.apply(this,arguments)}}();g._createCountQuery=function(h){h=this._createBaseQuery(h);this.capabilities.query.supportsCacheHint&&(h.cacheHint=!0);return h};g._createFeaturesQuery=function(h){const D=this._createBaseQuery(h);D.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];D.returnGeometry=!0;n.isSome(h)&&(this.capabilities.query.supportsResultType?D.resultType="tile":this.capabilities.query.supportsCacheHint&&
(D.cacheHint=!0));return D};g._createBaseQuery=function(h){h=new E({returnZ:!1,returnM:!1,geometry:n.isSome(this.tileInfo)&&n.isSome(h)?l.toExtent(h.data.extent,this.tileInfo.spatialReference):void 0});const D=this.configuration.filter;n.isSome(D)&&(h.where=D.where,h.gdbVersion=D.gdbVersion,h.timeExtent=D.timeExtent);h.outSpatialReference=this.spatialReference;return h};g._setPagingParameters=function(h,D,P){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:M,
supportsCacheHint:N,tileMaxRecordCount:q,maxRecordCount:S,supportsResultType:Y}=this.capabilities.query,V=M?E.MAX_MAX_RECORD_COUNT_FACTOR:1,ja=V*((Y||N)&&q?q:S?S:2E3);h.start=D;M?(h.maxRecordCountFactor=Math.min(V,Math.ceil(P/ja)),h.num=Math.min(P,h.maxRecordCountFactor*ja)):h.num=Math.min(P,ja);return!0};a._createClass(H,[{key:"minimumVerticesPerFeature",get:function(){var h;switch(null==(h=this.store)?void 0:h.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;
case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(h){const D=this._get("filter");h=this._filterProperties(h);JSON.stringify(D)!==JSON.stringify(h)&&this._set("filter",h)}},{key:"customParameters",set:function(h){const D=this._get("customParameters");JSON.stringify(D)!==JSON.stringify(h)&&this._set("customParameters",h)}},{key:"configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},
{key:"tileInfo",set:function(h){const D=this._get("tileInfo");D===h||n.isSome(h)&&n.isSome(D)&&JSON.stringify(h)===JSON.stringify(D)||(this._set("tileInfo",h),this.store.tileInfo=h)}},{key:"tileSize",set:function(h){this._get("tileSize")!==h&&this._set("tileSize",h)}},{key:"updating",get:function(){return this.updatingHandles.updating||this.pendingEdits.updating}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map(h=>
h.debugInfo),storedTiles:this.store.debugInfo}}}]);return H}(k.HandleOwner);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"url",void 0);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);
B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);B.__decorate([G.property({constructOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"store",void 0);B.__decorate([G.property({readOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"minimumVerticesPerFeature",null);B.__decorate([G.property()],b.FeatureServiceTiledFetcher.prototype,
"filter",null);B.__decorate([G.property()],b.FeatureServiceTiledFetcher.prototype,"customParameters",null);B.__decorate([G.property({readOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"configuration",null);B.__decorate([G.property()],b.FeatureServiceTiledFetcher.prototype,"tileInfo",null);B.__decorate([G.property()],b.FeatureServiceTiledFetcher.prototype,"tileSize",null);B.__decorate([G.property()],b.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);B.__decorate([G.property({readOnly:!0})],
b.FeatureServiceTiledFetcher.prototype,"updating",null);B.__decorate([G.property({readOnly:!0})],b.FeatureServiceTiledFetcher.prototype,"availability",void 0);b.FeatureServiceTiledFetcher=B.__decorate([F.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],b.FeatureServiceTiledFetcher);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(b,a,B,J,p,k){b.AsyncSequence=function(y){function v(){var r=y.apply(this,arguments)||this;r.updating=!1;r.pending=[];return r}a._inheritsLoose(v,y);var n=v.prototype;n.push=function(r,u){this.pending.push({promise:r,callback:u});1===this.pending.length&&this._process()};n._process=function(){if(this.pending.length){this.updating=!0;var r=this.pending[0];r.promise.then(u=>r.callback(u)).catch(()=>{}).then(()=>{this.pending.shift();this._process()})}else this.updating=!1};return v}(J);B.__decorate([p.property()],
b.AsyncSequence.prototype,"updating",void 0);b.AsyncSequence=B.__decorate([k.subclass("esri.core.AsyncSequence")],b.AsyncSequence);Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),function(b,a,B,J,p,k,y,v){const n=
r=>{r=function(u){function G(){return u.apply(this,arguments)||this}a._inheritsLoose(G,u);G.prototype.destroy=function(){var z,e;this.destroyed||(null==(z=this._get("handles"))?void 0:z.destroy(),null==(e=this._get("updatingHandles"))?void 0:e.destroy())};a._createClass(G,[{key:"handles",get:function(){return this._get("handles")||new p}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new v.WatchUpdatingTracking}}]);return G}(r);B.__decorate([k.property({readOnly:!0})],
r.prototype,"handles",null);B.__decorate([k.property({readOnly:!0})],r.prototype,"updatingHandles",null);return r=B.__decorate([y.subclass("esri.core.HandleOwner")],r)};b.HandleOwner=function(r){function u(){return r.apply(this,arguments)||this}a._inheritsLoose(u,r);return u}(n(J));b.HandleOwner=B.__decorate([y.subclass("esri.core.HandleOwner")],b.HandleOwner);b.HandleOwnerMixin=n;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports",
"../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(b,a,B,J){function p(z){if(a.isNone(z))return null;z=B.urlToObject(z);z=z.path.match(r)||z.path.match(u);if(!z)return null;const [,e,F,c,l]=z;z=F.indexOf("/");return{title:y(-1!==z?F.slice(z+1):F),serverType:v[c.toLowerCase()],sublayer:null!=l&&""!==l?parseInt(l,10):null,url:{path:e}}}function k(z){return(z=B.urlToObject(z).path.match(G))?{serviceUrl:z[1],sublayerId:Number(z[2])}:null}function y(z){z=z.replace(/\s*[/_]+\s*/g,
" ");return z[0].toUpperCase()+z.slice(1)}const v={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},n=Object.values(v),r=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),G=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;
b.cleanTitle=y;b.isAGOLUrl=function(z){return z?(new B.Url(B.makeAbsolute(z))).authority.toLowerCase().includes("arcgis.com"):!1};b.isArcGISUrl=function(z){return!!r.test(z)};b.isHostedAgolService=function(z){if(!z)return!1;z=z.toLowerCase();const e=z.includes(".arcgis.com/");z=z.includes("//services")||z.includes("//tiles")||z.includes("//features");return e&&z};b.isHostedSecuredProxyService=function(z,e){return e&&z&&z.toLowerCase().includes(e.toLowerCase())};b.isServerOrServicesAGOLUrl=function(z){if(!z)return!1;
z=(new B.Url(B.makeAbsolute(z))).authority.toLowerCase();return"server.arcgisonline.com"===z||"services.arcgisonline.com"===z};b.isWmsServer=function(z){if(!z)return!1;var e=z.toLowerCase();z=e.includes("/services/");const F=e.includes("/mapserver/wmsserver"),c=e.includes("/imageserver/wmsserver");e=e.includes("/wmsserver");return z&&(F||c||e)};b.parse=p;b.parseNonStandardSublayerUrl=k;b.sanitizeUrl=function(z,e){return z?B.removeTrailingSlash(B.removeQueryParameters(z,e)):z};b.sanitizeUrlWithLayerId=
function(z){let {url:e}=z;if(!e)return{url:e};e=B.removeQueryParameters(e,z.logger);const F=B.urlToObject(e),c=p(F.path);let l;a.isSome(c)?(null!=c.sublayer&&null==z.layer.layerId&&(l=c.sublayer),e=c.url.path):z.nonStandardUrlAllowed&&(z=k(F.path),a.isSome(z)&&(e=z.serviceUrl,l=z.sublayerId));return{url:B.removeTrailingSlash(e),layerId:l}};b.serverTypes=n;b.titleFromUrlAndName=function(z,e){const F=[];z&&(z=p(z),a.isSome(z)&&z.title&&F.push(z.title));e&&(e=y(e),F.push(e));if(2===F.length){if(F[0].toLowerCase().includes(F[1].toLowerCase()))return F[0];
if(F[1].toLowerCase().includes(F[0].toLowerCase()))return F[1]}return F.join(" - ")};b.writeUrlWithLayerId=function(z,e,F,c,l){J.write(e,c,"url",l);c.url&&null!=z.layerId&&(c.url=B.join(c.url,F,z.layerId.toString()))};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(b,a,B){function J(e,F){var c=F&&F.url&&F.url.path;e&&c&&(e=B.makeAbsolute(e,c,{preserveProtocolRelative:!0}),
F.portalItem&&F.readResourcePaths&&(c=B.makeRelative(e,F.portalItem.itemUrl),G.test(c)&&F.readResourcePaths.push(F.portalItem.resourceFromPath(c).path)));return r(e,F&&F.portal)}function p(e,F,c=b.MarkKeep.YES){if(!e)return e;!B.isAbsolute(e)&&F&&F.blockedRelativeUrls&&F.blockedRelativeUrls.push(e);let l=B.makeAbsolute(e);if(F){var L=F.verifyItemRelativeUrls&&F.verifyItemRelativeUrls.rootPath||F.url&&F.url.path;L&&(L=r(L,F.portal),l=B.makeRelative(r(l,F.portal),L,L),l!==e&&F.verifyItemRelativeUrls&&
F.verifyItemRelativeUrls.writtenUrls.push(l))}l=n(l,F&&F.portal);B.isAbsolute(l)&&(l=B.normalize(l));null!=F&&F.resources&&null!=F&&F.portalItem&&!B.isAbsolute(l)&&!B.isDataProtocol(l)&&c===b.MarkKeep.YES&&F.resources.toKeep.push({resource:F.portalItem.resourceFromPath(l)});return l}function k(e,F,c){return J(e,c)}function y(e,F,c,l){e=p(e,l);void 0!==e&&(F[c]=e)}function v(e){e=a.isSome(e)?e.match(u):null;return a.isSome(e)?e[1]:null}function n(e,F){return F&&!F.isPortal&&F.urlKey&&F.customBaseUrl?
B.changeDomain(e,`${F.urlKey}.${F.customBaseUrl}`,F.portalHostname):e}function r(e,F){if(!F||F.isPortal||!F.urlKey||!F.customBaseUrl)return e;const c=`${F.urlKey}.${F.customBaseUrl}`,l=B.getAppUrl();return B.hasSameOrigin(l,`${l.scheme}://${c}`)?B.changeDomain(e,F.portalHostname,c):B.changeDomain(e,c,F.portalHostname)}const u=/\/items\/([^\/]+)\/resources\//,G=/^\.\/resources\//;b.MarkKeep=void 0;(function(e){e[e.YES=0]="YES";e[e.NO=1]="NO"})(b.MarkKeep||(b.MarkKeep={}));const z=Object.freeze(Object.defineProperty({__proto__:null,
fromJSON:J,toJSON:p,read:k,write:y,itemIdFromResourceUrl:v,ensureMainOnlineDomain:n,get MarkKeep(){return b.MarkKeep}},Symbol.toStringTag,{value:"Module"}));b.ensureMainOnlineDomain=n;b.fromJSON=J;b.itemIdFromResourceUrl=v;b.persistableUrlUtils=z;b.read=k;b.toJSON=p;b.write=y})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(b,a,B,J,p,k){const y=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let v=function(){function n(u){this.options=u;this.geometryTypes=y;this._vertexDimension=this._coordinatePtr=0}var r=n.prototype;r.createFeatureResult=function(){return new p};r.prepareFeatures=function(u){this._vertexDimension=2;u.hasZ&&this._vertexDimension++;u.hasM&&this._vertexDimension++};r.finishFeatureResult=function(u){if(u&&u.features&&u.hasZ&&this.options.sourceSpatialReference&&
u.spatialReference&&!B.equals(u.spatialReference,this.options.sourceSpatialReference)&&!u.spatialReference.vcsWkid){var G=a.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),z=a.getMetersPerVerticalUnitForSR(u.spatialReference);G/=z;if(1!==G)for(const e of u.features)if(J.hasGeometry(e))for(u=e.geometry.coords,z=2;z<u.length;z+=3)u[z]*=G}};r.addFeature=function(u,G){u.features.push(G)};r.createFeature=function(){return new J.OptimizedFeature};r.createSpatialReference=function(){return{wkid:0}};
r.createGeometry=function(){return new k};r.addField=function(u,G){u.fields.push(G)};r.allocateCoordinates=function(u){u.coords.length=u.lengths.reduce((G,z)=>G+z,0)*this._vertexDimension;this._coordinatePtr=0};r.addCoordinate=function(u,G){u.coords[this._coordinatePtr++]=G};r.addCoordinatePoint=function(u,G){u.coords.push(G)};r.addLength=function(u,G){u.lengths.push(G)};r.addQueryGeometry=function(u,G){u.queryGeometry=G.queryGeometry;u.queryGeometryType=G.queryGeometryType};r.createPointGeometry=
function(){return new k};return n}();b.OPTIMIZED_GEOMETRY_TYPES=y;b.OptimizedFeatureSetParserContext=v;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),
function(b,a,B,J,p,k,y,v,n,r){function u(l,L){if(L&&"extent"===l.type)return`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`;if(L&&"point"===l.type)return`${l.x},${l.y}`;l=l.toJSON();delete l.spatialReference;return JSON.stringify(l)}function G(l,L){const K=l.geometry,m=l.toJSON();delete m.compactGeometryEnabled;delete m.defaultSpatialReferenceEnabled;let A,E,R;J.isSome(K)&&(E=K.spatialReference,R=K.spatialReference.wkid||JSON.stringify(K.spatialReference),m.geometryType=k.getJsonType(K),m.geometry=u(K,
l.compactGeometryEnabled),m.inSR=R);m.groupByFieldsForStatistics&&(m.groupByFieldsForStatistics=m.groupByFieldsForStatistics.join(","));m.objectIds&&(m.objectIds=m.objectIds.join(","));m.orderByFields&&(m.orderByFields=m.orderByFields.join(","));!m.outFields||!m.returnDistinctValues&&(null!=L&&L.returnCountOnly||null!=L&&L.returnExtentOnly||null!=L&&L.returnIdsOnly)?delete m.outFields:m.outFields.includes("*")?m.outFields="*":m.outFields=m.outFields.join(",");m.outSR?(m.outSR=m.outSR.wkid||JSON.stringify(m.outSR),
A=l.outSpatialReference):K&&(m.returnGeometry||m.returnCentroid)&&(m.outSR=m.inSR,A=E);m.returnGeometry&&delete m.returnGeometry;m.outStatistics&&(m.outStatistics=JSON.stringify(m.outStatistics));m.pixelSize&&(m.pixelSize=JSON.stringify(m.pixelSize));m.quantizationParameters&&(l.defaultSpatialReferenceEnabled&&J.isSome(E)&&J.isSome(l.quantizationParameters)&&J.isSome(l.quantizationParameters.extent)&&E.equals(l.quantizationParameters.extent.spatialReference)&&delete m.quantizationParameters.extent.spatialReference,
m.quantizationParameters=JSON.stringify(m.quantizationParameters));m.parameterValues&&(m.parameterValues=JSON.stringify(m.parameterValues));m.rangeValues&&(m.rangeValues=JSON.stringify(m.rangeValues));m.dynamicDataSource&&(m.layer=JSON.stringify({source:m.dynamicDataSource}),delete m.dynamicDataSource);if(m.timeExtent){const {start:O,end:w}=m.timeExtent;if(null!=O||null!=w)m.time=O===w?O:`${null==O?"null":O},${null==w?"null":w}`;delete m.timeExtent}l.defaultSpatialReferenceEnabled&&J.isSome(E)&&J.isSome(A)&&
E.equals(A)&&(m.defaultSR=m.inSR,delete m.inSR,delete m.outSR);return m}function z(){z=a._asyncToGenerator(function*(l,L,K,m){l=J.isSome(L.timeExtent)&&L.timeExtent.isEmpty?{data:{features:[]}}:yield c(l,L,"json",m);r.applyFeatureSetZUnitScaling(L,K,l.data);return l});return z.apply(this,arguments)}function e(){e=a._asyncToGenerator(function*(l,L,K,m){if(J.isSome(L.timeExtent)&&L.timeExtent.isEmpty)return{data:K.createFeatureResult()};l=yield F(l,L,m);l.data=n.parsePBFFeatureQuery(l.data,K);return l});
return e.apply(this,arguments)}function F(l,L,K){return c(l,L,"pbf",K)}function c(l,L,K,m={},A={}){const E="string"===typeof l?p.urlToObject(l):l;l=L.geometry?[L.geometry]:[];m.responseType="pbf"===K?"array-buffer":"json";return y.normalizeCentralMeridian(l,null,m).then(R=>{R=R&&R[0];J.isSome(R)&&(L=L.clone(),L.geometry=R);R=v.mapParameters({...E.query,f:K,...A,...G(L,A)});return B(p.join(E.path,"query"),{...m,query:{...R,...m.query}})})}b.encodeGeometry=u;b.executeQuery=function(l,L,K,m){return z.apply(this,
arguments)};b.executeQueryForCount=function(l,L,K){return J.isSome(L.timeExtent)&&L.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):c(l,L,"json",K,{returnIdsOnly:!0,returnCountOnly:!0})};b.executeQueryForExtent=function(l,L,K){return J.isSome(L.timeExtent)&&L.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):c(l,L,"json",K,{returnExtentOnly:!0,returnCountOnly:!0}).then(m=>{const A=m.data;if(A.hasOwnProperty("extent"))return m;if(A.features)throw Error("Layer does not support extent calculation.");
if(A.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return m})};b.executeQueryForIds=function(l,L,K){return J.isSome(L.timeExtent)&&L.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):c(l,L,"json",K,{returnIdsOnly:!0})};b.executeQueryPBF=function(l,L,K,m){return e.apply(this,arguments)};b.executeQueryPBFBuffer=F;b.queryToQueryStringParameters=G;b.runQuery=c;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/operations/urlUtils":function(){define(["exports"],
function(b){function a(B){const J={};for(const p in B){if("declaredClass"===p)continue;const k=B[p];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){J[p]=[];for(let y=0;y<k.length;y++)J[p][y]=a(k[y])}else"object"===typeof k?k.toJSON&&(J[p]=JSON.stringify(k)):J[p]=k}return J}b.mapParameters=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(b,
a){b.parsePBFFeatureQuery=function(B,J){var p=a.parseFeatureQuery(B,J);B=p.queryResult.featureResult;J=p.queryResult.queryGeometry;p=p.queryResult.queryGeometryType;if(B&&B.features&&B.features.length&&B.objectIdFieldName){const k=B.objectIdFieldName;for(const y of B.features)y.attributes&&(y.objectId=y.attributes[k])}B&&(B.queryGeometry=J,B.queryGeometryType=p);return B};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(b,a,B,J,p,k){function y(w){return w>=E.length?null:E[w]}function v(w,H,g){for(g=H.createPointGeometry(g);w.next();)switch(w.tag()){case 3:{var h=w.getUInt32();h=w.pos()+h;let D=0;for(;w.pos()<h;)H.addCoordinatePoint(g,w.getSInt64(),D++);break}default:w.skip()}return g}function n(w,H,g){const h=H.createGeometry(g);for(g=2+(g.hasZ?1:0)+(g.hasM?1:0);w.next();)switch(w.tag()){case 2:var D=w.getUInt32();D=w.pos()+D;for(var P=0;w.pos()<D;)H.addLength(h,w.getUInt32(),P++);break;case 3:D=w.getUInt32();
D=w.pos()+D;P=0;for(H.allocateCoordinates(h);w.pos()<D;)H.addCoordinate(h,w.getSInt64(),P),P++,P===g&&(P=0);break;default:w.skip()}return h}function r(w){const H=new p;let g="esriGeometryPoint";for(;w.next();)switch(w.tag()){case 2:var h=w.getUInt32();for(h=w.pos()+h;w.pos()<h;)H.lengths.push(w.getUInt32());break;case 3:h=w.getUInt32();for(h=w.pos()+h;w.pos()<h;)H.coords.push(w.getSInt64());break;case 1:g=k.OPTIMIZED_GEOMETRY_TYPES[w.getEnum()];break;default:w.skip()}return{queryGeometry:H,queryGeometryType:g}}
function u(w){for(;w.next();)switch(w.tag()){case 1:return w.getString();case 2:return w.getFloat();case 3:return w.getDouble();case 4:return w.getSInt32();case 5:return w.getUInt32();case 6:return w.getInt64();case 7:return w.getUInt64();case 8:return w.getSInt64();case 9:return w.getBool();default:return w.skip(),null}return null}function G(w){const H={type:y(0)};for(;w.next();)switch(w.tag()){case 1:H.name=w.getString();break;case 2:H.type=y(w.getEnum());break;case 3:H.alias=w.getString();break;
case 4:var g=w.getEnum();g=g>=R.length?null:R[g];H.sqlType=g;break;case 5:w.skip();break;case 6:H.defaultValue=w.getString();break;default:w.skip()}return H}function z(w){const H={};for(;w.next();)switch(w.tag()){case 1:H.name=w.getString();break;case 2:H.isSystemMaintained=w.getBool();break;default:w.skip()}return H}function e(w,H,g,h){const D=H.createFeature(g);let P=0;for(;w.next();)switch(w.tag()){case 1:{const M=h[P++].name;D.attributes[M]=w.processMessage(u);break}case 2:D.geometry=w.processMessageWithArgs(n,
H,g);break;case 4:D.centroid=w.processMessageWithArgs(v,H,g);break;default:w.skip()}return D}function F(w){const H=[1,1,1,1];for(;w.next();)switch(w.tag()){case 1:H[0]=w.getDouble();break;case 2:H[1]=w.getDouble();break;case 4:H[2]=w.getDouble();break;case 3:H[3]=w.getDouble();break;default:w.skip()}return H}function c(w){const H=[0,0,0,0];for(;w.next();)switch(w.tag()){case 1:H[0]=w.getDouble();break;case 2:H[1]=w.getDouble();break;case 4:H[2]=w.getDouble();break;case 3:H[3]=w.getDouble();break;
default:w.skip()}return H}function l(w){const H={originPosition:0>=O.length?null:O[0]};for(;w.next();)switch(w.tag()){case 1:var g=w.getEnum();H.originPosition=g>=O.length?null:O[g];break;case 2:H.scale=w.processMessage(F);break;case 3:H.translate=w.processMessage(c);break;default:w.skip()}return H}function L(w){const H={};for(;w.next();)switch(w.tag()){case 1:H.shapeAreaFieldName=w.getString();break;case 2:H.shapeLengthFieldName=w.getString();break;case 3:H.units=w.getString();break;default:w.skip()}return H}
function K(w,H){for(H=H.createSpatialReference();w.next();)switch(w.tag()){case 1:H.wkid=w.getUInt32();break;case 5:H.wkt=w.getString();break;case 2:H.latestWkid=w.getUInt32();break;case 3:H.vcsWkid=w.getUInt32();break;case 4:H.latestVcsWkid=w.getUInt32();break;default:w.skip()}return H}function m(w,H){const g=H.createFeatureResult();g.geometryType=0>=H.geometryTypes.length?null:H.geometryTypes[0];let h=!1;for(;w.next();)switch(w.tag()){case 1:g.objectIdFieldName=w.getString();break;case 3:g.globalIdFieldName=
w.getString();break;case 4:g.geohashFieldName=w.getString();break;case 5:g.geometryProperties=w.processMessage(L);break;case 7:var D=w.getEnum();g.geometryType=D>=H.geometryTypes.length?null:H.geometryTypes[D];break;case 8:g.spatialReference=w.processMessageWithArgs(K,H);break;case 10:g.hasZ=w.getBool();break;case 11:g.hasM=w.getBool();break;case 12:g.transform=w.processMessage(l);break;case 9:D=w.getBool();g.exceededTransferLimit=D;break;case 13:H.addField(g,w.processMessage(G));break;case 15:h||
(H.prepareFeatures(g),h=!0);H.addFeature(g,w.processMessageWithArgs(e,H,g,g.fields));break;case 2:g.uniqueIdField=w.processMessage(z);break;default:w.skip()}H.finishFeatureResult(g);return g}function A(w,H){const g={};let h=null;for(;w.next();)switch(w.tag()){case 4:h=w.processMessageWithArgs(r);break;case 1:g.featureResult=w.processMessageWithArgs(m,H);break;default:w.skip()}B.isSome(h)&&g.featureResult&&H.addQueryGeometry(g,h);return g}const E="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
R="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),O=["upperLeft","lowerLeft"];b.parseFeatureQuery=function(w,H){try{const g=new J(new Uint8Array(w),new DataView(w));
for(w={};g.next();)switch(g.tag()){case 2:w.queryResult=g.processMessageWithArgs(A,H);break;default:g.skip()}return w}catch(g){throw new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:g});}};b.parseFieldType=y;b.parseTransform=l;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../core/maybe","../../../geometry/support/zscale"],function(b,a,B){b.applyFeatureSetZUnitScaling=
function(J,p,k){if(k&&k.features&&k.hasZ&&(J=B.getGeometryZScaler(k.geometryType,p,J.outSpatialReference),!a.isNone(J)))for(const y of k.features)J(y.geometry)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/asyncUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../geometry/support/aaBoundingRect".split(" "),
function(b,a,B,J,p,k){let y=function(){function n(u,G){this.data=u;this.resolution=G;this.state={type:b.StateType.CREATED};this.alive=!0}var r=n.prototype;r.process=function(u){switch(this.state.type){case b.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,u),this.state.task.promise.then(u.resume,u.resume);case b.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,u),this.state.task.promise.then(u.resume,u.resume);case b.StateType.FETCHED_FEATURES:this.state=
this._goToDone(this.state,u)}return null};r._gotoFetchCount=function(u,G){var z=this;return{type:b.StateType.FETCH_COUNT,previous:u,task:p.createTask(function(){var e=a._asyncToGenerator(function*(F){F=yield B.resultOrAbort(G.fetchCount(z,F));z.state.type===b.StateType.FETCH_COUNT&&(z.state=z._gotoFetchedCount(z.state,F.ok?F.value:Infinity))});return function(F){return e.apply(this,arguments)}}())}};r._gotoFetchedCount=function(u,G){return{type:b.StateType.FETCHED_COUNT,featureCount:G,previous:u}};
r._gotoFetchFeatures=function(u,G){var z=this;return{type:b.StateType.FETCH_FEATURES,previous:u,task:p.createTask(function(){var e=a._asyncToGenerator(function*(F){F=yield B.resultOrAbort(G.fetchFeatures(z,u.featureCount,F));z.state.type===b.StateType.FETCH_FEATURES&&(z.state=z._gotoFetchedFeatures(z.state,F.ok?F.value:[]))});return function(F){return e.apply(this,arguments)}}())}};r._gotoFetchedFeatures=function(u,G){return{type:b.StateType.FETCHED_FEATURES,previous:u,features:G}};r._goToDone=function(u,
G){G.finish(this,u.features);return{type:b.StateType.DONE,previous:u}};r.reset=function(){const u=this.state;this.state={type:b.StateType.CREATED};switch(u.type){case b.StateType.FETCH_COUNT:case b.StateType.FETCH_FEATURES:u.task.abort()}};r.intersects=function(u){if(J.isNone(u)||!this.data.extent)return!0;k.fromExtent(u,v);return k.intersects(this.data.extent,v)};a._createClass(n,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}},{key:"featureCount",
get:function(){switch(this.state.type){case b.StateType.CREATED:case b.StateType.FETCH_COUNT:return 0;case b.StateType.FETCHED_COUNT:return this.state.featureCount;case b.StateType.FETCH_FEATURES:return this.state.previous.featureCount;case b.StateType.FETCHED_FEATURES:return this.state.features.length;case b.StateType.DONE:return this.state.previous.features.length}}},{key:"stateToString",get:function(){switch(this.state.type){case b.StateType.CREATED:return"created";case b.StateType.FETCH_COUNT:return"fetch-count";
case b.StateType.FETCHED_COUNT:return"fetched-count";case b.StateType.FETCH_FEATURES:return"fetch-features";case b.StateType.FETCHED_FEATURES:return"fetched-features";case b.StateType.DONE:return"done"}}}]);return n}();b.StateType=void 0;(function(n){n[n.CREATED=0]="CREATED";n[n.FETCH_COUNT=1]="FETCH_COUNT";n[n.FETCHED_COUNT=2]="FETCHED_COUNT";n[n.FETCH_FEATURES=3]="FETCH_FEATURES";n[n.FETCHED_FEATURES=4]="FETCHED_FEATURES";n[n.DONE=5]="DONE"})(b.StateType||(b.StateType={}));const v=k.create();b.PendingFeatureTile=
y;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/asyncUtils":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./promiseUtils"],function(b,a,B,J){function p(){p=a._asyncToGenerator(function*(v,n,r){return(yield J.eachAlways(v.map((u,G)=>n.apply(r,[u,G])))).map(u=>u.value)});return p.apply(this,arguments)}function k(){k=a._asyncToGenerator(function*(v){if(B.isNone(v))return{ok:!1,error:Error("no promise provided")};
try{return{ok:!0,value:yield v}}catch(n){return{ok:!1,error:n}}});return k.apply(this,arguments)}function y(){y=a._asyncToGenerator(function*(v){try{return{ok:!0,value:yield v}}catch(n){return J.throwIfAbortError(n),{ok:!1,error:n}}});return y.apply(this,arguments)}b.assertResult=function(v){if(!0===v.ok)return v.value;throw v.error;};b.forEach=function(v,n,r){return J.eachAlways(v.map((u,G)=>n.apply(r,[u,G])))};b.map=function(v,n,r){return p.apply(this,arguments)};b.result=function(v){return k.apply(this,
arguments)};b.resultOrAbort=function(v){return y.apply(this,arguments)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(b,a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l){function L(O){return O.reduce((w,H)=>{var g=H.geometry;if(k.isNone(g))g=0;else{var h=p.estimateFixedArraySize(g.lengths,4);g=32+p.estimateFixedArraySize(g.coords,8)+h}H=32+g+p.estimateAttributesObjectSize(H.attributes);return w+H},0)}b.FeatureServiceTileStore=function(O){function w(g){g=O.call(this,g)||this;g.tileInfo=null;g.extent=null;g.maximumByteSize=10*p.ByteSizeUnit.MEGABYTES;g.tileBounds=new e.BoundsStore;g.tiles=new l.FeatureServiceTileCache;g.refCounts=
new Map;g.tileFeatureCounts=new Map;g.tmpBoundingRect=G.create();return g}a._inheritsLoose(w,O);var H=w.prototype;H.add=function(g,h){const D=[];for(const P of h)this._referenceFeature(P.objectId)===R.ADDED&&D.push(P);this._addTileStorage(g,new Set(h.map(({objectId:P})=>P)),L(h));this.featureStore.addMany(D);this.tiles.applyByteSizeLimit(this.maximumByteSize,P=>this._removeTileStorage(P))};H.destroy=function(){this.clear();this.tileFeatureCounts.clear()};H.clear=function(){this.featureStore.clear();
this.tileBounds.clear();this.tiles.clear();this.refCounts.clear()};H.refresh=function(){this.clear();this.tileFeatureCounts.clear()};H.processEdits=function(g,h,D){this._processEditsDelete(g.deletedFeatures.concat(g.updatedFeatures));return this._processEditsRefetch(g.addedFeatures.concat(g.updatedFeatures),h,D)};H._addTileStorage=function(g,h,D){this.tiles.set(g.id,new K(g,h,D));this.tileBounds.set(g.id,g.extent);this.tileFeatureCounts.set(g.id,h.size)};H._remove=function({id:g}){(g=this.tiles.get(g))&&
this._removeTileStorage(g)};H._removeTileStorage=function(g){const h=[];for(const D of g.objectIds)this._unreferenceFeature(D)===R.REMOVED&&h.push(D);this.featureStore.removeManyById(h);g=g.data.id;this.tiles.delete(g);this.tileBounds.delete(g)};H._processEditsDelete=function(g){this.featureStore.removeManyById(g);for(const [,h]of this.tiles){for(const D of g)h.objectIds.delete(D);this.tileFeatureCounts.set(h.data.id,h.objectIds.size)}for(const h of g)this.refCounts.delete(h)};H._processEditsRefetch=
function(){var g=a._asyncToGenerator(function*(h,D,P){h=(yield D(h,P)).features;const {hasZ:M,hasM:N}=this.featureStore;for(const q of h)h=z.getBoundsOptimizedGeometry(this.tmpBoundingRect,q.geometry,M,N),k.isNone(h)||this.tileBounds.forEachInBounds(h,S=>{S=this.tiles.get(S);this.featureStore.add(q);S.objectIds.has(q.objectId)||(S.objectIds.add(q.objectId),this._referenceFeature(q.objectId),this.tileFeatureCounts.set(S.data.id,S.objectIds.size))})});return function(h,D,P){return g.apply(this,arguments)}}();
H.process=function(g,h=()=>!0){if(k.isNone(this.tileInfo)||!g.extent||k.isSome(this.extent)&&!G.intersects(G.fromExtent(this.extent,this.tmpBoundingRect),g.extent)||this.tiles.has(g.id))return new A(g);const D=this._createTileTree(g,this.tileInfo);this._simplify(D,h,null,0,1);return this._collectMissingTiles(g,D,this.tileInfo)};H.getFeatureCount=function(g){g=this.tileFeatureCounts.get(g.id);return null!=g?g:0};H.fetchCount=function(){var g=a._asyncToGenerator(function*(h,D,P,M){const N=this.tileFeatureCounts.get(h.id);
if(null!=N)return N;D=yield c.executeQueryForCount(D,P,M);this.tileFeatureCounts.set(h.id,D.data.count);return D.data.count});return function(h,D,P,M){return g.apply(this,arguments)}}();H._createTileTree=function(g,h){const D=new m(g.level,g.row,g.col);h.updateTileInfo(D,F.ExtrapolateOptions.POWER_OF_TWO);this.tileBounds.forEachInBounds(g.extent,P=>{P=this.tiles.get(P).data;this._tilesAreRelated(g,P)&&this._populateChildren(D,P,h,this.tileFeatureCounts.get(P.id)||0)});return D};H._tilesAreRelated=
function(g,h){if(!g||!h)return!1;if(g.level===h.level)return g.row===h.row&&g.col===h.col;const D=g.level<h.level,P=D?g:h;g=D?h:g;h=1<<g.level-P.level;return Math.floor(g.row/h)===P.row&&Math.floor(g.col/h)===P.col};H._populateChildren=function(g,h,D,P){var M=h.level-g.level-1;if(0>M)g.isLeaf=!0;else{var N=h.row>>M,q=h.col>>M;M=(N-(g.row<<1)<<1)+(q-(g.col<<1));var S=g.children[M];k.isSome(S)?this._populateChildren(S,h,D,P):(N=new m(g.level+1,N,q),D.updateTileInfo(N,F.ExtrapolateOptions.POWER_OF_TWO),
g.children[M]=N,this._populateChildren(N,h,D,P))}};H._simplify=function(g,h,D,P,M){const N=M*M;if(g.isLeaf)return h(this.getFeatureCount(g),M)?0:(this._remove(g),k.isSome(D)&&(D.children[P]=null),N);M/=2;const q=M*M;let S=0;for(let Y=0;Y<g.children.length;Y++){const V=g.children[Y];S+=k.isSome(V)?this._simplify(V,h,g,Y,M):q}0===S?this._mergeChildren(g):.18751>1-S/N&&(this._purge(g),k.isSome(D)&&(D.children[P]=null),S=N);return S};H._mergeChildren=function(g){const h=new Set;let D=0;this._forEachLeaf(g,
P=>{const M=this.tiles.get(P.id);if(M){D+=M.byteSize;for(const N of M.objectIds)h.has(N)||(h.add(N),this._referenceFeature(N));this._remove(P)}});this._addTileStorage(g,h,D);g.isLeaf=!0;g.children[0]=g.children[1]=g.children[2]=g.children[3]=null;this.tileFeatureCounts.set(g.id,h.size)};H._forEachLeaf=function(g,h){for(const D of g.children)k.isNone(D)||(D.isLeaf?h(D):this._forEachLeaf(D,h))};H._purge=function(g){if(!k.isNone(g))if(g.isLeaf)this._remove(g);else for(let h=0;h<g.children.length;h++)this._purge(g.children[h]),
g.children[h]=null};H._collectMissingTiles=function(g,h,D){g=new E(D,g,this.extent);this._collectMissingTilesRecurse(h,g,1);return g.info};H._collectMissingTilesRecurse=function(g,h,D){if(!g.isLeaf)if(g.hasChildren){D/=2;for(let P=0;P<g.children.length;P++){const M=g.children[P];k.isNone(M)?h.addMissing(g.level+1,(g.row<<1)+((P&2)>>1),(g.col<<1)+(P&1),D):this._collectMissingTilesRecurse(M,h,D)}}else h.addMissing(g.level,g.row,g.col,D)};H._referenceFeature=function(g){const h=(this.refCounts.get(g)||
0)+1;this.refCounts.set(g,h);return 1===h?R.ADDED:R.UNCHANGED};H._unreferenceFeature=function(g){const h=(this.refCounts.get(g)||0)-1;if(0===h)return this.refCounts.delete(g),R.REMOVED;0<h&&this.refCounts.set(g,h);return R.UNCHANGED};a._createClass(w,[{key:"debugInfo",get:function(){return Array.from(this.tiles.values()).map(({data:g})=>({data:g,featureCount:this.tileFeatureCounts.get(g.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this.tiles.values()).map(g=>`${g.data.id}:[${Array.from(g.objectIds)}]`),
featureReferences:Array.from(this.refCounts.keys()).map(g=>`${g}:${this.refCounts.get(g)}`)}}}]);return w}(J);B.__decorate([y.property({constructOnly:!0})],b.FeatureServiceTileStore.prototype,"featureStore",void 0);B.__decorate([y.property()],b.FeatureServiceTileStore.prototype,"tileInfo",void 0);B.__decorate([y.property()],b.FeatureServiceTileStore.prototype,"extent",void 0);B.__decorate([y.property()],b.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);b.FeatureServiceTileStore=B.__decorate([u.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],
b.FeatureServiceTileStore);let K=function(O,w,H){this.data=O;this.objectIds=w;this.byteSize=H},m=function(){function O(w,H,g){this.level=w;this.row=H;this.col=g;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}a._createClass(O,[{key:"hasChildren",get:function(){return!this.isLeaf&&(k.isSome(this.children[0])||k.isSome(this.children[1])||k.isSome(this.children[2])||k.isSome(this.children[3]))}}]);return O}(),A=function(){function O(w,H=[]){this.missingTiles=H;this.coveredArea=this.fullArea=
0;this.coveredArea=this.fullArea=G.area(w.extent)}O.prototype.prepend=function(w){this.missingTiles=w.missingTiles.concat(this.missingTiles);this.coveredArea+=w.coveredArea;this.fullArea+=w.fullArea};return O}(),E=function(){function O(w,H,g){this.tileInfo=w;this.extent=null;this.info=new A(H);k.isSome(g)&&(this.extent=G.fromExtent(g))}O.prototype.addMissing=function(w,H,g,h){w={id:null,level:w,row:H,col:g};this.tileInfo.updateTileInfo(w,F.ExtrapolateOptions.POWER_OF_TWO);k.isNone(w.extent)||k.isSome(this.extent)&&
!G.intersects(this.extent,w.extent)||(this.info.missingTiles.push({data:w,resolution:h}),this.info.coveredArea-=G.area(w.extent))};return O}();var R;(function(O){O[O.ADDED=0]="ADDED";O[O.REMOVED=1]="REMOVED";O[O.UNCHANGED=2]="UNCHANGED"})(R||(R={}));b.ProcessResult=A;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(b){function a(B){return 32+B.length}b.ByteSizeUnit=void 0;(function(B){B[B.KILOBYTES=
1024]="KILOBYTES";B[B.MEGABYTES=1048576]="MEGABYTES";B[B.GIGABYTES=1073741824]="GIGABYTES"})(b.ByteSizeUnit||(b.ByteSizeUnit={}));b.estimateAttributesObjectSize=function(B){if(!B)return 0;let J=32;for(const p in B)if(B.hasOwnProperty(p)){const k=B[p];switch(typeof k){case "string":J+=a(k);break;case "number":J+=16;break;case "boolean":J+=4}}return J};b.estimateFixedArraySize=function(B,J){return 32+B.length*J};b.estimateNumberByteSize=function(){return 16};b.estimateStringByteSize=a;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],function(b){let a=function(B){function J(){this._store=new Map;this._byteSize=0}var p=J.prototype;p.set=function(k,y){this.delete(k);this._store.set(k,y);this._byteSize+=y.byteSize};p.delete=function(k){const y=this._store.get(k);return this._store.delete(k)?(this._byteSize-=y.byteSize,!0):!1};p.get=function(k){this._used(k);
return this._store.get(k)};p.has=function(k){this._used(k);return this._store.has(k)};p.clear=function(){this._store.clear()};p.applyByteSizeLimit=function(k,y){for(const [v,n]of this._store){if(this._byteSize<=k)break;this.delete(v);y(n)}};p.values=function(){return this._store.values()};p[B]=function(){return this._store[Symbol.iterator]()};p._used=function(k){const y=this._store.get(k);y&&(this._store.delete(k),this._store.set(k,y))};return J}(Symbol.iterator);b.FeatureServiceTileCache=a;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/WatchUpdatingTracking ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../layers/support/TimeInfo ../../../../../rest/support/Query ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(b,
a,B,J,p,k,y,v,n,r,u,G,z,e,F,c,l,L,K,m,A,E){b.FeatureServiceSnappingSourceWorker=function(R){function O(){var H=R.apply(this,arguments)||this;H.isInitializing=!0;H.whenSetup=y.createDeferred();H.handles=new p;H.updatingHandles=new e.WatchUpdatingTracking;H.pendingApplyEdits=new Map;return H}a._inheritsLoose(O,R);var w=O.prototype;w.destroy=function(){this.featureFetcher.destroy();this.queryEngine.destroy();this.featureStore.clear();this.handles.destroy()};w.setup=function(){var H=a._asyncToGenerator(function*(g){const {geometryType:h,
objectIdField:D,timeInfo:P,fields:M}=g.serviceInfo;this.featureStore=new c({...g.serviceInfo,hasZ:!1,hasM:!1});this.queryEngine=new l.QueryEngine({spatialReference:g.spatialReference,featureStore:this.featureStore,geometryType:h,fields:M,hasZ:!1,hasM:!1,objectIdField:D,timeInfo:P?K.fromJSON(P):null});this.featureFetcher=new A.FeatureServiceTiledFetcher({store:new E.FeatureServiceTileStore({featureStore:this.featureStore}),url:g.serviceInfo.url,objectIdField:g.serviceInfo.objectIdField,globalIdField:g.serviceInfo.globalIdField,
capabilities:g.serviceInfo.capabilities,spatialReference:F.fromJSON(g.spatialReference),sourceSpatialReference:F.fromJSON(g.serviceInfo.spatialReference)});this.handles.add([v.watch(()=>this.featureFetcher.availability,N=>this.emit("notify-availability",{availability:N}),v.sync),v.watch(()=>this.updating,()=>this._notifyUpdating())]);this.whenSetup.resolve();this.isInitializing=!1;return this.configure(g.configuration)});return function(g){return H.apply(this,arguments)}}();w.configure=function(){var H=
a._asyncToGenerator(function*(g){yield this.updatingHandles.addPromise(this.whenSetup.promise);this._updateFeatureFetcherConfiguration(g);return{result:{}}});return function(g){return H.apply(this,arguments)}}();w.fetchCandidates=function(){var H=a._asyncToGenerator(function*(g,h){yield this.whenSetup.promise;y.throwIfAborted(h);return{result:yield this.queryEngine.executeQueryForSnapping({point:g.point,distance:g.distance,types:g.types,query:k.isSome(g.filter)?g.filter:{where:"1\x3d1"}},k.isSome(h)?
h.signal:null)}});return function(g,h){return H.apply(this,arguments)}}();w.updateTiles=function(){var H=a._asyncToGenerator(function*(g,h){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(h);this.featureFetcher.tileSize=g.tileSize;this.featureFetcher.tilesOfInterest=g.tiles;this.featureFetcher.tileInfo=k.isSome(g.tileInfo)?L.fromJSON(g.tileInfo):null;return{result:{}}});return function(g,h){return H.apply(this,arguments)}}();w.refresh=function(){var H=a._asyncToGenerator(function*(g,
h){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(h);this.featureFetcher.refresh();return{result:{}}});return function(g,h){return H.apply(this,arguments)}}();w.whenNotUpdating=function(){var H=a._asyncToGenerator(function*(g,h){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(h);yield v.whenOnce(()=>!this.updating,h);y.throwIfAborted(h);return{result:{}}});return function(g,h){return H.apply(this,arguments)}}();w.getDebugInfo=function(){var H=
a._asyncToGenerator(function*(g,h){y.throwIfAborted(h);return{result:this.featureFetcher.debugInfo}});return function(g,h){return H.apply(this,arguments)}}();w.beginApplyEdits=function(){var H=a._asyncToGenerator(function*(g,h){this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(h);h=y.createDeferred();this.pendingApplyEdits.set(g.id,h);this.featureFetcher.applyEdits(h.promise);this.updatingHandles.addPromise(h.promise);return{result:{}}});return function(g,h){return H.apply(this,
arguments)}}();w.endApplyEdits=function(){var H=a._asyncToGenerator(function*(g,h){const D=this.pendingApplyEdits.get(g.id);D&&D.resolve(g.edits);y.throwIfAborted(h);return{result:{}}});return function(g,h){return H.apply(this,arguments)}}();w._updateFeatureFetcherConfiguration=function(H){this.featureFetcher.filter=k.isSome(H.filter)?m.fromJSON(H.filter):null;this.featureFetcher.customParameters=H.customParameters};w._notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};
a._createClass(O,[{key:"updating",get:function(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}}]);return O}(J.EventedAccessor);B.__decorate([n.property({readOnly:!0})],b.FeatureServiceSnappingSourceWorker.prototype,"updating",null);B.__decorate([n.property()],b.FeatureServiceSnappingSourceWorker.prototype,"isInitializing",void 0);b.FeatureServiceSnappingSourceWorker=B.__decorate([z.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],
b.FeatureServiceSnappingSourceWorker);b.default=function(){return new b.FeatureServiceSnappingSourceWorker};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});