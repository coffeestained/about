// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../support/Scheduler".split(" "),function(d,k,l,v,f,w,q,y,z,A,x,r){d.SnappingOperation=function(t){function m(e){var a=t.call(this,e)||this;a.stagedPoint=null;a._abortController=
null;a._snap=w.debounce(function(){var b=k._asyncToGenerator(function*(c,n,p,g){const u=yield a._frameTask.schedule(()=>n.snap(c,p,g),g);u.valid&&(yield a._frameTask.schedule(()=>{a.stagedPoint=u.apply();c!==a._snapMapPoint&&(a.stagedPoint=n.update(a._snapMapPoint,p))},g))});return function(c,n,p,g){return b.apply(this,arguments)}}());return a}k._inheritsLoose(m,t);var h=m.prototype;h.initialize=function(){var e,a;const b="3d"===this.view.type?null==(e=this.view)?void 0:null==(a=e.resourceController)?
void 0:a.scheduler:null;this._frameTask=f.isSome(b)?b.registerTask(r.TaskPriority.SNAPPING):r.ImmediateTask};h.destroy=function(){this._abortController=f.abortMaybe(this._abortController);this._frameTask=f.removeMaybe(this._frameTask)};h.snap=function(){var e=k._asyncToGenerator(function*(a,b,c){this.stagedPoint=b.update(a,c);this._snapMapPoint=a;f.isNone(this._abortController)&&(this._abortController=new AbortController);return this._snap(a,b,c,this._abortController.signal)});return function(a,b,
c){return e.apply(this,arguments)}}();h.abort=function(){this._abortController=f.abortMaybe(this._abortController)};return m}(v);l.__decorate([q.property({constructOnly:!0})],d.SnappingOperation.prototype,"view",void 0);l.__decorate([q.property()],d.SnappingOperation.prototype,"stagedPoint",void 0);d.SnappingOperation=l.__decorate([x.subclass("esri.views.interactive.snapping.SnappingOperation")],d.SnappingOperation);Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});