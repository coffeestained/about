// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/vec2f64 ./context-util ./enums ./FramebufferObject ./Texture".split(" "),function(h,t,u,b,v,q){h.createColormapTexture=function(a,d){return new q.Texture(a,{width:d.length/4,height:1,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1},d)};h.createFrameBuffer=function(a,d,g,c){c=new q.Texture(a,{width:d,
height:g,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:b.PixelFormat.RGBA,samplingMode:b.TextureSamplingMode.NEAREST,dataType:c?b.PixelType.UNSIGNED_BYTE:b.PixelType.FLOAT,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1});return new v.FramebufferObject(a,{colorTarget:b.TargetType.TEXTURE,depthStencilTarget:b.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER,width:d,height:g},c)};h.createRasterTexture=function(a,d,g="nearest",c=!1){var f;const e=(c=!(c&&"u8"===
d.pixelType))?b.PixelType.FLOAT:b.PixelType.UNSIGNED_BYTE,m=null==d.pixels||0===d.pixels.length?null:c?d.getAsRGBAFloat():d.getAsRGBA(),k=null==(f=a.capabilities.textureFloat)?void 0:f.textureFloatLinear;return new q.Texture(a,{width:d.width,height:d.height,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:a.type===u.ContextType.WEBGL2&&c?b.SizedPixelFormat.RGBA32F:b.PixelFormat.RGBA,samplingMode:!k||"bilinear"!==g&&"cubic"!==g?b.TextureSamplingMode.NEAREST:b.TextureSamplingMode.LINEAR,
dataType:e,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1},m)};h.createTransformTexture=function(a,d){const {spacing:g,offsets:c,coefficients:f,size:[e,m]}=d;var k=1<g[0];d={width:k?4*e:e,height:m,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:a.type===u.ContextType.WEBGL2?b.SizedPixelFormat.RGBA32F:b.PixelFormat.RGBA,dataType:b.PixelType.FLOAT,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1};const n=new Float32Array(k?
e*m*16:2*c.length);if(k)for(let l=0,p=0;l<f.length;l++)n[p++]=f[l],2===l%3&&(n[p++]=1);else for(k=0;k<m;k++)for(let l=0;l<e;l++){const p=4*(k*e+l),r=2*(l*m+k);n[p]=c[r];n[p+1]=c[r+1];n[p+3]=-1===c[r]?0:1}return new q.Texture(a,d,n)};h.getBasicGridUniforms=function(a,d){return{u_scale:a,u_offset:d}};h.getColormapUniforms=function(a,d){return{u_colormapOffset:d||0,u_colormapMaxIndex:a?a.length/4-1:0}};h.getCommonUniforms=function(a,d,g,c=1,f=!0){return{u_flipY:f,u_applyTransform:a?!0:!1,u_opacity:c,
u_transformSpacing:a?a.spacing:t.ZEROS,u_transformGridSize:a?a.size:t.ZEROS,u_targetImageSize:d,u_srcImageSize:g}};h.getShadedReliefUniforms=function(a){return{u_hillshadeType:a.hillshadeType,u_sinZcosAs:a.sinZcosAs,u_sinZsinAs:a.sinZsinAs,u_cosZs:a.cosZs,u_weights:a.weights,u_factor:a.factor,u_minValue:a.minValue,u_maxValue:a.maxValue}};h.getStretchUniforms=function(a){return{u_bandCount:a.bandCount,u_minOutput:a.outMin,u_maxOutput:a.outMax,u_minCutOff:a.minCutOff,u_maxCutOff:a.maxCutOff,u_factor:a.factor,
u_useGamma:a.useGamma,u_gamma:a.gamma,u_gammaCorrection:a.gammaCorrection}};h.getUniformLocationInfos=function(a,d){a=a.gl;d=d.glName;const g=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),c=new Map;let f;for(let e=0;e<g;e++)(f=a.getActiveUniform(d,e))&&c.set(f.name,{location:a.getUniformLocation(d,f.name),info:f});return c};h.setTextures=function(a,d,g,c){g.length===c.length&&(c.some(f=>null==f)||g.some(f=>null==f)||g.forEach((f,e)=>{d.setUniform1i(f,e);a.bindTexture(c[e],e)}))};h.setUniforms=function(a,
d,g){Object.keys(g).forEach(c=>{var f=d.get(c)||d.get(c+"[0]");if(f){var e=g[c];if(null!==f&&null!=e)switch({info:f}=f,f.type){case b.UniformType.FLOAT:1<f.size?a.setUniform1fv(c,e):a.setUniform1f(c,e);break;case b.UniformType.FLOAT_VEC2:a.setUniform2fv(c,e);break;case b.UniformType.FLOAT_VEC3:a.setUniform3fv(c,e);break;case b.UniformType.FLOAT_VEC4:a.setUniform4fv(c,e);break;case b.UniformType.FLOAT_MAT3:a.setUniformMatrix3fv(c,e);break;case b.UniformType.FLOAT_MAT4:a.setUniformMatrix4fv(c,e);break;
case b.UniformType.INT:1<f.size?a.setUniform1iv(c,e):a.setUniform1i(c,e);break;case b.UniformType.BOOL:a.setUniform1i(c,e?1:0);break;case b.UniformType.INT_VEC2:case b.UniformType.BOOL_VEC2:a.setUniform2iv(c,e);break;case b.UniformType.INT_VEC3:case b.UniformType.BOOL_VEC3:a.setUniform3iv(c,e);break;case b.UniformType.INT_VEC4:case b.UniformType.BOOL_VEC4:a.setUniform4iv(c,e)}}})};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});