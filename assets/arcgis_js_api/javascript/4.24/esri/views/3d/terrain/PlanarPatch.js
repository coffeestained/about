// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/spatialReferenceUtils ./PatchGeometryFactory ./Tile ../webgl-engine/materials/internal/MaterialUtil".split(" "),function(n,r,t,h,p,f,u,v,w,x,k,q,y){let z=function(l){function m(a,c,b){var d=l.call(this)||
this;d.horizontalScaleFactor=1;d.extentInRenderSR=v.create();void 0!==a&&d.init(a,c,b);return d}r._inheritsLoose(m,l);var e=m.prototype;e.init=function(a,c,b){l.prototype.init.call(this,a,c,b);a=b.view.renderSpatialReference;b=b.spatialReference;this.horizontalScaleFactor=c=t.isSome(a)&&x.isPlateCarree(a)&&b.isGeographic?this.ellipsoid.radius*Math.PI/180:1;b=this.extentInRenderSR;a=this.extent;if(this.surface.isWebMercatorOnPlateeCarree)c=h.fromValues(a[0],a[1],0),p.projectVectorToVector(c,f.WebMercator,
c,f.PlateCarree),a=h.fromValues(a[2],a[3],0),p.projectVectorToVector(a,f.WebMercator,a,f.PlateCarree),b[0]=c[0],b[1]=c[1],b[2]=a[0],b[3]=a[1];else for(let d=0;4>d;++d)b[d]=a[d]*c;this.centerAtSeaLevel[0]=.5*(b[0]+b[2]);this.centerAtSeaLevel[1]=.5*(b[1]+b[3]);this.centerAtSeaLevel[2]=0;this._edgeLen=Math.max(b[2]-b[0],b[3]-b[1]);this._edgeLen2=this._edgeLen*this._edgeLen;this.updateRadiusAndCenter()};e.updateRadiusAndCenter=function(){this._updateCenter();var a=this.extentInRenderSR;const c=.5*(a[2]-
a[0]);a=.5*(a[3]-a[1]);this._center[q.CenterPosition.MIDDLE][3]=Math.max(Math.sqrt(c*c+a*a),.5*(this.elevationBounds[0]-this.elevationBounds[1]))};e._isVisible=function(a){return w.intersectsAABB(a,this._aabb())};e._aabb=function(){const a=this.extentInRenderSR;return u.wrap(a[0],a[1],this.elevationBounds[0],a[2],a[3],this.elevationBounds[1])};e.intersectsRay=function(a,c,b,d){g[0]=1/c[0];g[1]=1/c[1];g[2]=1/c[2];return y.intersectAabbInvDirBefore(this._aabb(),a,g,b,d)};e.createGeometry=function(){k.createPlanarGlobePatch(this.renderData,
this.horizontalScaleFactor);this.setMemoryDirty()};e.getDefaultVerticesPerRowOnLevel=function(){return 9>this.level?3:2};e.updateCornerElevations=function(){k.updateCornerElevationsPlanar(this.renderData,this.horizontalScaleFactor)};e.updateEdgeElevations=function(){k.updateEdgesElevationsAndNormalsPlanar(this.renderData,this.horizontalScaleFactor)};return m}(q.Tile);const g=h.create();n.PlanarPatch=z;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});