// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../support/elevationInfoUtils ../../../../../symbols/support/ElevationInfo ../../SegmentLabels3D ../../SnappingVisualizer3D ../settings ../../visualElements/OutlineVisualElement ../../visualElements/VerticesVisualElement ../../../layers/graphics/GraphicState ../../../../draw/DrawGraphicTool ../../../../draw/DrawOperation ../../../../draw/drawSurfaces ../../../../interactive/sketch/SketchLabelOptions ../../../../interactive/sketch/SketchTooltipOptions".split(" "),
function(c,x,e,k,d,n,g,H,I,J,y,p,z,A,B,h,C,q,D,r,E,t,u,v){c.DrawGraphicTool3D=function(w){function l(a){a=w.call(this,a)||this;a._activeVertexVisualElement=null;a._createGraphicState=null;a._outlineVisualElement=null;a._verticesVisualElement=null;a.geometryType=null;a.labelOptions=new u;a.tooltipOptions=new v;a.type="draw-3d";return a}x._inheritsLoose(l,w);var f=l.prototype;f.initialize=function(){const {mode:a,offset:b}=this.elevationInfo;this.internalGraphicsLayer.elevationInfo=new z.default({mode:a,
offset:b})};f.normalizeCtorArgs=function(a){if(!a.elevationInfo){var b;const m=null!=(b=a.hasZ)?b:!0;return{...a,elevationInfo:{mode:m?"absolute-height":"on-the-ground",offset:0}}}return a};f.initializeGraphic=function(a){const b=this._createGraphicState=new D.GraphicState({graphic:a});return k.handlesGroup([this.view.maskOccludee(a),this.view.trackGraphicState(b),n.watch(()=>({element:this._outlineVisualElement,isDraped:b.isDraped}),({element:m,isDraped:F})=>{d.applySome(m,G=>G.isDraped=F)},n.initial)])};
f.makeDrawOperation=function(){const {geometryType:a}=this,b="circle"!==a&&"rectangle"!==a;return new E.DrawOperation({view:this.view,manipulators:this.manipulators,geometryType:r.geometryTypeToDrawOperationGeometryType(a),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new t.SceneDrawSurface(this.view,this.elevationInfo,[this.internalGraphicsLayer]),elevationDrawSurface:new t.ElevationDrawSurface(this.elevationInfo,this.defaultZ,this.view,
this.internalGraphicsLayer),hasM:!1,elevationInfo:this.elevationInfo,snappingManager:this.snappingManager,snappingVisualizer:new B.SnappingVisualizer3D,segmentLabels:b?new A.SegmentLabels3D:null,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions,isDraped:d.isSome(this._createGraphicState)?this._createGraphicState.isDraped:"on-the-ground"===p.getEffectiveElevationMode(this.hasZ,this.elevationInfo)})};f.onActiveVertexChanged=function(a){if(d.isSome(this._activeVertexVisualElement))return this._activeVertexVisualElement.vertices=
[a],null;this._activeVertexVisualElement=new q.VerticesVisualElement({view:this.view,spatialReference:this.view.spatialReference,vertices:[a],elevationInfo:this.internalGraphicsLayer.elevationInfo,renderOccluded:h.settings.reshapeManipulators.vertex.renderOccluded,attached:!1});this._activeVertexVisualElement.color=h.settings.colorToVec4(h.settings.reshapeManipulators.selected.color);this._activeVertexVisualElement.attached=!0;return k.makeHandle(()=>{this._activeVertexVisualElement=d.destroyMaybe(this._activeVertexVisualElement)})};
f.onOutlineChanged=function(a){if(d.isSome(this._outlineVisualElement))return this._outlineVisualElement.geometry=a,null;const b=this.internalGraphicsLayer.elevationInfo;this._outlineVisualElement=new C.OutlineVisualElement({view:this.view,geometry:a,elevationInfo:b,isDraped:d.isSome(this._createGraphicState)?this._createGraphicState.isDraped:"on-the-ground"===p.getEffectiveElevationMode(this.hasZ,b),attached:!1});h.settings.visualElements.lineGraphics.outline.apply(this._outlineVisualElement);h.settings.visualElements.lineGraphics.shadowStyle.apply(this._outlineVisualElement);
this._outlineVisualElement.attached=!0;this._outlineVisualElement.laserlineEnabled=!0;return k.makeHandle(()=>{this._outlineVisualElement=d.destroyMaybe(this._outlineVisualElement)})};f.onRegularVerticesChanged=function(a){if(d.isSome(this._verticesVisualElement))return this._verticesVisualElement.vertices=a,null;this._verticesVisualElement=new q.VerticesVisualElement({view:this.view,spatialReference:this.view.spatialReference,vertices:a,elevationInfo:this.internalGraphicsLayer.elevationInfo,renderOccluded:h.settings.reshapeManipulators.vertex.renderOccluded,
attached:!1});this._verticesVisualElement.attached=!0;return k.makeHandle(()=>{this._verticesVisualElement=d.destroyMaybe(this._verticesVisualElement)})};return l}(r.DrawGraphicTool);e.__decorate([g.property({constructOnly:!0})],c.DrawGraphicTool3D.prototype,"elevationInfo",void 0);e.__decorate([g.property({constructOnly:!0})],c.DrawGraphicTool3D.prototype,"geometryType",void 0);e.__decorate([g.property({constructOnly:!0,type:u})],c.DrawGraphicTool3D.prototype,"labelOptions",void 0);e.__decorate([g.property({constructOnly:!0,
type:v})],c.DrawGraphicTool3D.prototype,"tooltipOptions",void 0);e.__decorate([g.property()],c.DrawGraphicTool3D.prototype,"type",void 0);e.__decorate([g.property({constructOnly:!0})],c.DrawGraphicTool3D.prototype,"view",void 0);c.DrawGraphicTool3D=e.__decorate([y.subclass("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")],c.DrawGraphicTool3D);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});