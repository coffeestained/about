// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ./Object3DVisualElement ../../layers/graphics/lineUtils ../../webgl-engine/lib/Material ../../webgl-engine/materials/RibbonLineMaterial".split(" "),function(u,v,g,w,A,l,k,p,r,t,x,B,C){t=function(y){function q(a){var b=y.call(this,a)||this;b._renderOccluded=B.RenderOccludedFlag.OccludeAndTransparent;
b._width=1;b._color=r.fromValues(1,0,1,1);b._innerWidth=1;b._innerColor=null;b._stipplePattern=null;b._stippleOffColor=null;b._stipplePreferContinuous=!0;b._writeDepthEnabled=!0;b._falloff=0;b._polygonOffset=!1;b.applyProps(a);return b}v._inheritsLoose(q,y);var f=q.prototype;f.setGeometryFromRenderSpacePoint=function(a,b=1E3){const c=[];c.push([[a[0]-b,a[1]+0,a[2]+0],[a[0]+b,a[1]+0,a[2]+0]]);c.push([[a[0]-0,a[1]-b,a[2]+0],[a[0]+0,a[1]+b,a[2]+0]]);c.push([[a[0]-0,a[1]+0,a[2]-b],[a[0]+0,a[1]+0,a[2]+
b]]);this.geometry=c};f.setGeometryFromExtent=function(a){const b=this.view.spatialReference,c=k.create(),d=k.create(),e=[];l.set(c,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],d[1],d[2]]);l.set(c,a[2],a[1],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],d[1],d[2]]);l.set(c,a[2],a[3],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],d[1],d[2]]);l.set(c,a[0],a[3],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],
d[1],d[2]]);l.set(c,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],d[1],d[2]]);l.set(c,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(c,b,d);e.push([d[0],d[1],d[2]]);this.geometry=[e]};f.setGeometryFromFrustum=function(a){const b=[];a.lines.forEach(c=>{b.push([c.origin[0],c.origin[1],c.origin[2]]);b.push([c.endpoint[0],c.endpoint[1],c.endpoint[2]])});this.geometry=[b]};f.setGeometryFromBoundedPlane=function(a){const b=[],c=a.origin,d=a.basis1;a=a.basis2;
const e=k.create(),h=k.create(),m=k.create(),n=k.create();e[0]=c[0]-.5*d[0]-.5*a[0];e[1]=c[1]-.5*d[1]-.5*a[1];e[2]=c[2]-.5*d[2]-.5*a[2];h[0]=c[0]-.5*d[0]+.5*a[0];h[1]=c[1]-.5*d[1]+.5*a[1];h[2]=c[2]-.5*d[2]+.5*a[2];m[0]=c[0]+.5*d[0]+.5*a[0];m[1]=c[1]+.5*d[1]+.5*a[1];m[2]=c[2]+.5*d[2]+.5*a[2];n[0]=c[0]+.5*d[0]-.5*a[0];n[1]=c[1]+.5*d[1]-.5*a[1];n[2]=c[2]+.5*d[2]-.5*a[2];b.push([e[0],e[1],e[2]]);b.push([h[0],h[1],h[2]]);b.push([m[0],m[1],m[2]]);b.push([n[0],n[1],n[2]]);b.push([e[0],e[1],e[2]]);this.geometry=
[b]};f.setGeometryFromSegment=function(a){const b=a.endRenderSpace;this.transform=w.fromTranslation(z,b);({points:a}=a.createRenderGeometry(b,this.view.renderCoordsHelper));this.geometry=[a]};f.setGeometryFromSegments=function(a,b=k.ZEROS){this.transform=w.fromTranslation(z,b);this.geometry=a.map(c=>c.createRenderGeometry(b,this.view.renderCoordsHelper).points)};f.getTransformedGeometry=function(){return g.isNone(this._geometry)?null:this._geometry.map(a=>a.map(b=>l.transformMat4(k.create(),b,this.transform)))};
f.createExternalResources=function(){this._material=new C.RibbonLineMaterial(this.materialParameters)};f.destroyExternalResources=function(){this._material=null};f.createGeometries=function(a){const b=this._createLineGeometries();if(0!==b.length)for(let c=0;c<b.length;++c){const d=x.createGeometry(b[c]);a.addGeometry(d,this._material)}};f.forEachExternalMaterial=function(a){a(this._material)};f._updateMaterial=function(){this.attached&&this._material.setParameters(this.materialParameters)};f._createLineGeometries=
function(){const a=this.geometry;if(g.isNone(a)||0===a.length)return[];const b=[];a.forEach(c=>{const d=new Float64Array(3*c.length);c.forEach((e,h)=>{d[3*h]=e[0];d[3*h+1]=e[1];d[3*h+2]=e[2]});b.push({overlayInfo:null,attributeData:{position:d},removeDuplicateStartEnd:x.RemoveDuplicateStartEnd.KEEP})});return b};v._createClass(q,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(a){a!==this._renderOccluded&&(this._renderOccluded=a,this._updateMaterial())}},{key:"geometry",
get:function(){return this._geometry},set:function(a){this._geometry=a;this.recreateGeometry()}},{key:"width",get:function(){return this._width},set:function(a){a!==this._width&&(this._width=a,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(a){p.exactEquals(a,this._color)||(p.copy(this._color,a),this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(a){a!==this._innerWidth&&(this._innerWidth=a,this._updateMaterial())}},
{key:"innerColor",get:function(){return this._innerColor},set:function(a){if(g.isSome(a)){if(g.isNone(this._innerColor)||!p.exactEquals(a,this._innerColor))this._innerColor=p.copy(r.create(),a),this._updateMaterial()}else g.isSome(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(a){const b=g.isSome(a)!==g.isSome(this._stipplePattern);this._stipplePattern=a;b?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",
get:function(){return this._stippleOffColor},set:function(a){if(g.isNone(a)||g.isNone(this._stippleOffColor)||!p.exactEquals(a,this._stippleOffColor))this._stippleOffColor=g.isSome(a)?r.clone(a):null,this._updateMaterial()}},{key:"stipplePreferContinuous",get:function(){return this._stipplePreferContinuous},set:function(a){this._stipplePreferContinuous!==a&&(this._stipplePreferContinuous=a,this._updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(a){this._writeDepthEnabled!==
a&&(this._writeDepthEnabled=a,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(a){a!==this._falloff&&(this._falloff=a,this._updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(a){a!==this._polygonOffset&&(this._polygonOffset=a,this._updateMaterial())}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,
isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,hasPolygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}}]);return q}(t.Object3DVisualElement);const z=A.create();u.LineVisualElement=t;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});