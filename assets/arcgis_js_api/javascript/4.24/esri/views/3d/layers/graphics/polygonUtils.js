// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../geometry ../../../../core/maybe ../../../../geometry/projection ../../../../geometry/support/triangulationUtils ./elevationAlignmentUtils ../../terrain/OverlayRenderer ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/VertexAttribute ../../../../geometry/Extent ../../../../geometry/Polygon".split(" "),function(h,B,k,t,l,u,v,n,d,w,x){function p(a,c,b){const g=[];for(const {index:e,count:f}of a){if(1>=f)continue;a=3*e;const m=a+3*f;g.push({index:e,count:f,position:c.subarray(a,
m),mapPosition:b?b.subarray(a,m):void 0})}return g}function q(a,c,b){const g=[];for(const {index:e,count:f,holeIndices:m,pathLengths:y}of a){if(1>=f)continue;a=3*e;const r=a+3*f,A=m.map(z=>z-e);g.push({index:e,count:f,holeIndices:A,pathLengths:y,position:c.subarray(a,r),mapPosition:b?b.subarray(a,r):void 0})}return g}h.createColorGeometry=function(a){const c=[[d.VertexAttribute.POSITION,a.indices]],b=[[d.VertexAttribute.POSITION,{size:3,data:a.attributeData.position,exclusive:!0}]];k.isSome(a.attributeData.color)&&
(b.push([d.VertexAttribute.COLOR,{size:4,data:a.attributeData.color,exclusive:!0}]),c.push([d.VertexAttribute.COLOR,new Uint32Array(a.indices.length)]));k.isSome(a.attributeData.uvMapSpace)&&(b.push([d.VertexAttribute.UVMAPSPACE,{size:4,data:a.attributeData.uvMapSpace,exclusive:!0}]),c.push([d.VertexAttribute.UVMAPSPACE,a.indices]));k.isSome(a.attributeData.boundingRect)&&(b.push([d.VertexAttribute.BOUNDINGRECT,{size:9,data:a.attributeData.boundingRect,exclusive:!0}]),c.push([d.VertexAttribute.BOUNDINGRECT,
a.indices]));k.isSome(a.attributeData.mapPosition)&&(b.push([d.VertexAttribute.MAPPOS,{size:3,data:a.attributeData.mapPosition,exclusive:!0}]),c.push([d.VertexAttribute.MAPPOS,a.indices]));return new n.Geometry(b,c)};h.createWaterGeometry=function(a){const c=[[d.VertexAttribute.POSITION,a.indices],[d.VertexAttribute.UV0,a.indices]],b=[[d.VertexAttribute.POSITION,{size:3,data:a.attributeData.position,exclusive:!0}],[d.VertexAttribute.UV0,{size:2,data:a.attributeData.uv0,exclusive:!0}]];k.isSome(a.attributeData.mapPosition)&&
(b.push([d.VertexAttribute.MAPPOS,{size:3,data:a.attributeData.mapPosition,exclusive:!0}]),c.push([d.VertexAttribute.MAPPOS,a.indices]));return new n.Geometry(b,c)};h.geometryAsPolygon=function(a){switch(a.type){case "extent":if(a instanceof w)return x.fromExtent(a);break;case "polygon":return a}return null};h.geometryToRenderInfo=function(a,c,b,g){const e=l.pathsToTriangulationInfo(a.rings,a.hasZ,l.CounterClockwiseMode.CCW_IS_HOLE),f=new Float64Array(e.position.length);a=u.applyPerVertexElevationAlignment(e.position,
a.spatialReference,0,f,0,e.position,0,e.position.length/3,c,b,g);c=null!=a;return{position:e.position,mapPosition:f,polygons:q(e.polygons,e.position,f),outlines:p(e.outlines,e.position,f),projectionSuccess:c,sampledElevation:a}};h.geometryToRenderInfoDraped=function(a,c){const b=l.pathsToTriangulationInfo(a.rings,!1,l.CounterClockwiseMode.CCW_IS_HOLE);a=t.projectBuffer(b.position,a.spatialReference,0,b.position,c,0,b.position.length/3);for(c=2;c<b.position.length;c+=3)b.position[c]=v.DRAPED_Z;return{position:b.position,
polygons:q(b.polygons,b.position),outlines:p(b.outlines,b.position),projectionSuccess:a}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});