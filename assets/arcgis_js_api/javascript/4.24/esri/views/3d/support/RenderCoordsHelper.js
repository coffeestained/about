// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/unitUtils ../../../chunks/mat4 ../../../chunks/vec3 ../../../geometry/projection ../../../geometry/SpatialReference ../../../geometry/support/Axis ../../../geometry/support/coordinateSystem ../../../geometry/support/plane ../../../geometry/support/vectorStacks ../../../layers/graphics/dehydratedFeatureUtils ../../ViewingMode ../../support/spatialReferenceSupport".split(" "),function(n,u,v,p,w,q,k,x,m,d,y,l,
r,h,z){function t(e){if(z.isSpatialReferenceSupported(e,h.ViewingMode.Global))return 1;e=d.renderSRFromViewSR(!1,e);return p.getMetersPerUnitForSR(e)}let A=function(){function e(b,a,c,g){this.viewingMode=b;this.spatialReference=a;this.unitInMeters=c;this.coordinateSystem=g;this._coordinateSystem=d.create(g)}var f=e.prototype;f.getAltitude=function(b){return d.altitudeAt(this.coordinateSystem,b)};f.setAltitude=function(b,a,c=b){return d.setAltitudeAt(this.coordinateSystem,c,a,b)};f.setAltitudeOfTransformation=
function(b,a){d.setAltitudeOfTransformation(this.coordinateSystem,a,b,a)};f.worldUpAtPosition=function(b,a){return d.normalAt(this.coordinateSystem,b,a)};f.worldBasisAtPosition=function(b,a,c){return d.axisAt(this.coordinateSystem,b,a,c)};f.basisMatrixAtPosition=function(b,a){const c=this.worldBasisAtPosition(b,m.Axis.X,l.sv3d.get()),g=this.worldBasisAtPosition(b,m.Axis.Y,l.sv3d.get());b=this.worldBasisAtPosition(b,m.Axis.Z,l.sv3d.get());w.set(a,c[0],c[1],c[2],0,g[0],g[1],g[2],0,b[0],b[1],b[2],0,
0,0,0,1);return a};f.intersectManifoldClosestSilhouette=function(b,a,c){d.elevate(this.coordinateSystem,a,this._coordinateSystem);d.intersectRayClosestSilhouette(this._coordinateSystem,b,c);return c};f.intersectManifold=function(b,a,c){d.elevate(this.coordinateSystem,a,this._coordinateSystem);a=l.sv3d.get();return d.intersectRay(this._coordinateSystem,b,a)?q.copy(c,a):null};f.intersectInfiniteManifold=function(b,a,c){if(this.viewingMode===h.ViewingMode.Global)return this.intersectManifold(b,a,c);
d.elevate(this.coordinateSystem,a,this._coordinateSystem);a=this._coordinateSystem.value;const g=l.sv3d.get();return y.intersectRay(a.plane,b,g)?q.copy(c,g):null};f.toRenderCoords=function(b,a,c){return r.isDehydratedPoint(b)?k.projectPointToVector(b,a,this.spatialReference):k.projectVectorToVector(b,a,c,this.spatialReference)};f.fromRenderCoords=function(b,a,c=null){return r.isDehydratedPoint(a)?(v.isSome(c)&&(a.spatialReference=c),k.projectVectorToDehydratedPoint(b,this.spatialReference,a)):a instanceof
x?k.projectVectorToPoint(b,this.spatialReference,a):k.projectVectorToVector(b,this.spatialReference,a,c)?a:null};e.create=function(b,a){switch(b){case h.ViewingMode.Local:return new e(h.ViewingMode.Local,a,p.getMetersPerUnitForSR(a),d.createLocal());case h.ViewingMode.Global:return new e(h.ViewingMode.Global,a,1,d.createGlobal(a))}};e.renderUnitScaleFactor=function(b,a){return t(b)/t(a)};u._createClass(e,[{key:"extent",set:function(b){b&&d.setExtent(this.coordinateSystem,b,this.coordinateSystem)}}]);
return e}();n.RenderCoordsHelper=A;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});