// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../Color ../../../../core/Logger ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec4f64".split(" "),function(p,r,k,l,c,q,m){const t=l.getLogger("esri.views.3d.webgl-engine.lib.TextRenderParameters");l=function(){function g(b){this.definition=b;this.key=JSON.stringify(b);this.haloSize=Math.round(b.halo.size);this.textStyle=this._colorToRGBA(b.color);this.haloStyle=this._colorToRGB(b.halo.color);this.backgroundStyle=
0!==b.background.color[3]?this._colorToRGBA(b.background.color):null}var n=g.prototype;n.fontString=function(b){const a=this.definition.font;return`${a.style} ${a.weight} ${b}px ${a.family}, sans-serif`};n._colorToRGB=function(b){return`rgb(${b.slice(0,3).map(a=>Math.floor(255*a)).toString()})`};n._colorToRGBA=function(b){return`rgba(${b.slice(0,3).map(a=>Math.floor(255*a)).toString()},${b[3]})`};g.fromSymbol=function(){var b=r._asyncToGenerator(function*(a,h=1){var e=c.get(a,"material","color");
const u=c.mapOr(e,m.ZEROS,k.toUnitRGBA);e=c.mapOr(a.size,12,q.pt2px);const v=a.lineHeight,w=c.isSome(a.background)?k.toUnitRGBA(a.background.color):m.ZEROS,x={family:c.mapOr(a.font,"sans-serif",d=>d.family),decoration:c.mapOr(a.font,"none",d=>d.decoration),weight:c.mapOr(a.font,"normal",d=>d.weight),style:c.mapOr(a.font,"normal",d=>d.style)};var f=a.halo;f=c.isSome(f)&&c.isSome(f.color)&&0<f.size?{size:q.pt2px(f.size),color:k.toUnitRGBA(f.color)}:{size:0,color:m.ZEROS};a=new g({color:u,size:e,background:{color:w,
padding:c.isSome(a.background)?[.65*e,.5*e]:[0,0],borderRadius:c.isSome(a.background)?.375*e:0},lineSpacingFactor:v,font:x,halo:f,pixelRatio:h});h=a.fontString(e);try{yield document.fonts.load(h)}catch(d){t.warnOnce(`Failed to preload font '${h}'. Some text symbology may be rendered using the default browser font.`)}return a});return function(a){return b.apply(this,arguments)}}();return g}();p.TextRenderParameters=l;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});