// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../assets ../../../../../core/Accessor ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../support/requestImageUtils ../../lib/basicInterfaces ../../../../webgl/enums ../../../../webgl/Texture".split(" "),
function(c,l,g,m,q,r,n,y,z,A,t,u,b,d,v){const w=r.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils");c.WaterTextureRepository=function(p){function f(){var a=p.apply(this,arguments)||this;a._data=[];a._state=b.ResourceState.NOT_LOADED;return a}l._inheritsLoose(f,p);var h=f.prototype;h.dispose=function(){this._state=b.ResourceState.NOT_LOADED;this._data.forEach(a=>a.dispose());this._data.length=0};h.loadTextures=function(a){const x=[m.getAssetUrl("esri/images/materials/water/normals.jpg"),
m.getAssetUrl("esri/images/materials/water/perturbation.jpg")];this._state=b.ResourceState.LOADING;Promise.all(x.map(e=>u.requestImage(e))).then(e=>{e.forEach(k=>this._data.push(new v.Texture(a,{target:d.TextureType.TEXTURE_2D,pixelFormat:d.PixelFormat.RGBA,dataType:d.PixelType.UNSIGNED_BYTE,wrapMode:d.TextureWrapMode.REPEAT,samplingMode:d.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,maxAnisotropy:8,width:k.width,height:k.height},k)));this._state=b.ResourceState.LOADED}).catch(e=>{w.error("Failed to load textures for water material.",
e);this._state=b.ResourceState.NOT_LOADED})};h.bind=function(a){this._state===b.ResourceState.LOADED&&(a.bindTexture("texWaveNormal",this._data[0]),a.bindTexture("texWavePerturbation",this._data[1]))};l._createClass(f,[{key:"updating",get:function(){return this._state===b.ResourceState.LOADING}},{key:"resourceState",get:function(){return this._state}}]);return f}(q);g.__decorate([n.property()],c.WaterTextureRepository.prototype,"_state",void 0);g.__decorate([n.property({type:Boolean,readOnly:!0})],
c.WaterTextureRepository.prototype,"updating",null);c.WaterTextureRepository=g.__decorate([t.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],c.WaterTextureRepository);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});