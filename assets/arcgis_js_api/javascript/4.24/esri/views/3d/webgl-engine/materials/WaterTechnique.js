// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../ViewingMode ../core/shaderLibrary/ShaderOutputOptions ../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../core/shaderLibrary/util/DoublePrecision.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ./DefaultTechniqueConfiguration ../../../../chunks/WaterSurface.glsl ../../../webgl/renderState".split(" "),
function(u,q,t,c,v,k,w,x,a,n,d,p,y,l,z,A,B,r){n=function(h){function g(f,e,m){e=h.call(this,f,e,m)||this;e._textureRepository=f.waterTextureRepository;return e}t._inheritsLoose(g,h);var b=g.prototype;b.initializeConfiguration=function(f,e){e.spherical=f.viewingMode===v.ViewingMode.Global;e.doublePrecisionRequiresObfuscation=x.doublePrecisionRequiresObfuscation(f.rctx)};b.initializeProgram=function(f){const e=g.shader.get().build(this.configuration);return new z.Program(f.rctx,e,y.Default3D)};b.bindPass=
function(f,e){this.program.bindPass(f,e);this.configuration.output!==k.ShaderOutput.Color&&this.configuration.output!==k.ShaderOutput.Normal||this._textureRepository.bind(this.program)};b._setPipelineState=function(f){const e=this.configuration,m=f===p.TransparencyPassType.NONE,C=f===p.TransparencyPassType.FrontFace;return r.makePipelineState({blending:e.output!==k.ShaderOutput.Normal&&e.output!==k.ShaderOutput.Highlight&&e.transparent?m?l.blendingDefault:l.oitBlending(f):null,depthTest:{func:l.oitDepthTest(f)},
depthWrite:m?e.writeDepth&&r.defaultDepthWriteParams:l.oitDepthWrite(f),colorWrite:r.defaultColorWriteParams,polygonOffset:m||C?null:l.getOITPolygonOffset(e.enableOffset)})};b.initializePipeline=function(){return this._setPipelineState(this.configuration.transparencyPassType)};return g}(n.ShaderTechnique);n.shader=new a.ReloadableShaderModule(B.WaterSurface,()=>new Promise((h,g)=>u(["../shaders/WaterSurface.glsl"],h,g)));a=function(h){function g(){var b=h.apply(this,arguments)||this;b.output=k.ShaderOutput.Color;
b.transparencyPassType=p.TransparencyPassType.NONE;b.spherical=!1;b.receiveShadows=!1;b.hasSlicePlane=!1;b.transparent=!1;b.enableOffset=!0;b.writeDepth=!1;b.hasScreenSpaceReflections=!1;b.doublePrecisionRequiresObfuscation=!1;b.hasCloudsReflections=!1;b.isDraped=!1;b.hasMultipassTerrain=!1;b.cullAboveGround=!1;return b}t._inheritsLoose(g,h);return g}(A.DefaultTechniqueConfiguration);c.__decorate([d.parameter({count:k.ShaderOutput.COUNT})],a.prototype,"output",void 0);c.__decorate([d.parameter({count:p.TransparencyPassType.COUNT})],
a.prototype,"transparencyPassType",void 0);c.__decorate([d.parameter()],a.prototype,"spherical",void 0);c.__decorate([d.parameter()],a.prototype,"receiveShadows",void 0);c.__decorate([d.parameter()],a.prototype,"hasSlicePlane",void 0);c.__decorate([d.parameter()],a.prototype,"transparent",void 0);c.__decorate([d.parameter()],a.prototype,"enableOffset",void 0);c.__decorate([d.parameter()],a.prototype,"writeDepth",void 0);c.__decorate([d.parameter()],a.prototype,"hasScreenSpaceReflections",void 0);
c.__decorate([d.parameter()],a.prototype,"doublePrecisionRequiresObfuscation",void 0);c.__decorate([d.parameter()],a.prototype,"hasCloudsReflections",void 0);c.__decorate([d.parameter()],a.prototype,"isDraped",void 0);c.__decorate([d.parameter()],a.prototype,"hasMultipassTerrain",void 0);c.__decorate([d.parameter()],a.prototype,"cullAboveGround",void 0);c.__decorate([d.parameter({constValue:w.PBRMode.Water})],a.prototype,"pbrMode",void 0);c.__decorate([d.parameter({constValue:!0})],a.prototype,"useCustomDTRExponentForWater",
void 0);c.__decorate([d.parameter({constValue:!0})],a.prototype,"highStepCount",void 0);c.__decorate([d.parameter({constValue:!1})],a.prototype,"useFillLights",void 0);q.WaterTechnique=n;q.WaterTechniqueConfiguration=a;Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});