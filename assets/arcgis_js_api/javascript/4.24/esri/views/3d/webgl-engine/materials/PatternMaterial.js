// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec4f64 ../../../../geometry/support/buffer/BufferView ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutputOptions ../lib/basicInterfaces ../lib/GLMaterial ../lib/GLMaterials ../lib/Material ../lib/OrderIndependentTransparency ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./PatternStyle ./internal/bufferWriterUtils ./internal/DefaultBufferWriter ./internal/MaterialUtil ../shaders/PatternTechnique".split(" "),
function(w,q,E,r,F,p,G,H,I,C,J,t,u,n,K,x,L,M,y){let P=function(m){function g(a){a=m.call(this,a,new D)||this;a.supportsEdges=!0;a._vertexAttributeLocations=y.patternVertexAttributeLocations;a.techniqueConfig=new y.PatternTechniqueConfiguration;return a}q._inheritsLoose(g,m);var b=g.prototype;b.getConfiguration=function(a,e){this.techniqueConfig.output=a;this.techniqueConfig.cullFace=this.parameters.cullFace;this.techniqueConfig.hasVertexColors=this.parameters.hasVertexColors;this.techniqueConfig.hasSlicePlane=
this.parameters.hasSlicePlane;this.techniqueConfig.polygonOffset=this.parameters.polygonOffset;this.techniqueConfig.writeDepth=this.parameters.writeDepth;this.techniqueConfig.style=this.parameters.style;this.techniqueConfig.patternSpacing=this.parameters.patternSpacing;this.techniqueConfig.lineWidth=this.parameters.lineWidth;this.techniqueConfig.draped=this.parameters.draped;this.techniqueConfig.transparencyPassType=e.transparencyPassType;this.techniqueConfig.enableOffset=e.camera.relativeElevation<
J.OITPolygonOffsetLimit;this.techniqueConfig.hasMultipassTerrain=e.multipassTerrain.enabled;this.techniqueConfig.cullAboveGround=e.multipassTerrain.cullAboveGround;return this.techniqueConfig};b.intersect=function(a,e,c,l,d,h,f){M.intersectTriangleGeometry(a,e,l,d,h,void 0,f)};b.requiresSlot=function(a,e){return a===t.RenderSlot.DRAPED_MATERIAL?!0:I.outputFromPass(e)===p.ShaderOutput.Highlight?a===t.RenderSlot.OPAQUE_MATERIAL:a===(this.parameters.writeDepth?t.RenderSlot.TRANSPARENT_MATERIAL:t.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL)};
b.createGLMaterial=function(a){return a.output===p.ShaderOutput.Color||a.output===p.ShaderOutput.Alpha||a.output===p.ShaderOutput.Highlight||a.output===p.ShaderOutput.Depth&&this.parameters.writeLinearDepth?new N(a):null};b.createBufferWriter=function(){const a=F.newLayout().vec3f(n.VertexAttribute.POSITION).vec4u8(n.VertexAttribute.COLOR).vec4f(n.VertexAttribute.UVMAPSPACE);this.parameters.draped||a.mat3f(n.VertexAttribute.BOUNDINGRECT);return new O(a)};return g}(C.Material),N=function(m){function g(){return m.apply(this,
arguments)||this}q._inheritsLoose(g,m);var b=g.prototype;b._updateParameters=function(a){return this.ensureTechnique(y.PatternTechnique,a)};b._updateOccludeeState=function(a){a.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:a.hasOccludees})};b.beginSlot=function(a){this._output!==p.ShaderOutput.Color&&this._output!==p.ShaderOutput.Alpha||this._updateOccludeeState(a);return this._updateParameters(a)};return g}(H),O=function(m){function g(){return m.apply(this,
arguments)||this}q._inheritsLoose(g,m);var b=g.prototype;b.write=function(a,e,c,l){for(const h of this.vertexBufferLayout.fieldNames){const f=e.vertexAttributes.get(h),k=e.indices.get(h);if(f&&k)switch(h){case n.VertexAttribute.POSITION:u.assert(3===f.size);var d=c.getField(h,r.BufferViewVec3f);d&&x.writePosition(k,f.data,a.transformation,d,l);break;case n.VertexAttribute.COLOR:u.assert(3===f.size||4===f.size);(d=c.getField(h,r.BufferViewVec4u8))&&x.writeColor(k,f.data,f.size,d,l);break;case n.VertexAttribute.UVMAPSPACE:u.assert(4===
f.size);(d=c.getField(h,r.BufferViewVec4f))&&x.writeBufferVec4(k,f.data,d,l);break;case n.VertexAttribute.BOUNDINGRECT:u.assert(9===f.size),(d=c.getField(h,r.BufferViewMat3f))&&this.writeBoundingRect(k,f.data,a.transformation,d,l)}}};b.writeBoundingRect=function(a,e,c,l,d){const h=l.typedBuffer;l=l.typedBufferStride;const f=a.length;d*=l;for(let z=0;z<f;++z){const v=9*a[z];var k=e[v];const A=e[v+1],B=e[v+2];h[d]=c[0]*k+c[4]*A+c[8]*B+c[12];h[d+1]=c[1]*k+c[5]*A+c[9]*B+c[13];h[d+2]=c[2]*k+c[6]*A+c[10]*
B+c[14];for(k=3;9>k;++k)h[d+k]=e[v+k];d+=l}};return g}(L.DefaultBufferWriter),D=function(m){function g(){var b=m.apply(this,arguments)||this;b.color=E.fromValues(1,1,1,1);b.writeDepth=!0;b.writeLinearDepth=!1;b.hasVertexColors=!1;b.polygonOffset=!1;b.hasSlicePlane=!1;b.cullFace=G.CullFaceOptions.None;b.hasOccludees=!1;b.style=K.Style.Cross;b.patternSpacing=10;b.lineWidth=1;b.draped=!0;return b}q._inheritsLoose(g,m);return g}(C.MaterialParameters);w.Parameters=D;w.PatternMaterial=P;Object.defineProperties(w,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});