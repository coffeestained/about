// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../core/libs/gl-matrix-2/types/vec2 ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/RenderPass ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/HeatmapDensityTechnique".split(" "),function(l,p,x,r,y,z,A,B,C,D,E,h,t,n){let u=function(e){function d(){var b=e.apply(this,arguments)||this;b.isAttributeDriven=
!1;return b}p._inheritsLoose(d,e);return d}(n.HeatmapDensityPassParameters),w=function(e){function d(a){a=e.call(this,a,new u)||this;a._techniqueConfig=new n.HeatmapDensityTechniqueConfiguration;return a}p._inheritsLoose(d,e);var b=d.prototype;b.requiresSlot=function(a,c){return a===E.RenderSlot.DRAPED_MATERIAL&&c===D.RenderPass.MATERIAL};b.getConfiguration=function(){this._techniqueConfig.isAttributeDriven=this.parameters.isAttributeDriven;return this._techniqueConfig};b.createGLMaterial=function(a){return new F(a)};
b.intersect=function(a,c,k,g,f,m,G,K,q){if(!x.isNone(q)&&z.isVec2(m))for(c=a.vertexAttributes.get(h.VertexAttribute.POSITION),{parameters:k}=this,{searchRadius:k}=k,{screenToWorldRatio:a}=a,a=k*a+2*a,a*=a,k=c.data.length/c.size,g=0;g<k;g++)f=g*c.size,f=r.set(H,c.data[f],c.data[f+1]),r.squaredDistance(f,m)<a&&G(q.dist,q.normal,-1,!1)};b.createBufferWriter=function(){return new I(this.parameters.isAttributeDriven?J:v)};return d}(C.Material),F=function(e){function d(){return e.apply(this,arguments)||
this}p._inheritsLoose(d,e);d.prototype.beginSlot=function(b){return this.ensureTechnique(n.HeatmapDensityTechnique,b)};return d}(B),I=function(){function e(b){this.vertexBufferLayout=b}var d=e.prototype;d.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};d.elementCount=function(b){return 6*b.indices.get(h.VertexAttribute.POSITION).length};d.write=function(b,a,c,k){t.writePosition(a.indices.get(h.VertexAttribute.POSITION),a.vertexAttributes.get(h.VertexAttribute.POSITION).data,b.transformation,
c.position,k,6);b=a.indices.get(h.VertexAttribute.POSITION).length;const g=c.uv0;let f=k;for(let m=0;m<b;++m)g.setValues(f++,-1,-1),g.setValues(f++,1,-1),g.setValues(f++,1,1),g.setValues(f++,1,1),g.setValues(f++,-1,1),g.setValues(f++,-1,-1);(c="featureAttribute"in c?c.featureAttribute:null)&&t.writeBufferFloat(a.indices.get(h.VertexAttribute.FEATUREATTRIBUTE),a.vertexAttributes.get(h.VertexAttribute.FEATUREATTRIBUTE).data,c,k,6)};return e}();const v=A.newLayout().vec3f(h.VertexAttribute.POSITION).vec2f(h.VertexAttribute.UV0),
J=v.clone().f32(h.VertexAttribute.FEATUREATTRIBUTE),H=y.create();Object.defineProperty(l,"RadiusMode",{enumerable:!0,get:()=>n.RadiusMode});l.HeatmapDensityMaterial=w;l.HeatmapDensityMaterialParameters=u;l.isHeatMapDensityMaterial=function(e){return e instanceof w};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});