// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutputOptions ../lib/basicInterfaces ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ../shaders/MeasurementArrowTechnique".split(" "),function(z,A,d,p,I,J,K,L,C,M,k,D){let P=function(f){function c(b){b=f.call(this,b,new E)||this;b.techniqueConfig=new D.MeasurementArrowTechniqueConfiguration;return b}
A._inheritsLoose(c,f);var a=c.prototype;a.getConfiguration=function(b,h){var q;this.techniqueConfig.polygonOffsetEnabled=this.parameters.polygonOffset;this.techniqueConfig.transparent=1>this.parameters.stripeEvenColor[3]||1>this.parameters.stripeOddColor[3]||1>this.parameters.outlineColor[3];this.techniqueConfig.transparencyPassType=null!=(q=null==h?void 0:h.transparencyPassType)?q:K.TransparencyPassType.NONE;return this.techniqueConfig};a.dispose=function(){};a.intersect=function(){};a.requiresSlot=
function(b){return b===M.RenderSlot.OPAQUE_MATERIAL};a.createGLMaterial=function(b){return b.output===J.ShaderOutput.Color?new N(b):null};a.createBufferWriter=function(){return new O};return c}(C.Material),N=function(f){function c(){return f.apply(this,arguments)||this}A._inheritsLoose(c,f);c.prototype.beginSlot=function(a){return this.ensureTechnique(D.MeasurementArrowTechnique,a)};return c}(L),E=function(f){function c(){var a=f.apply(this,arguments)||this;a.width=32;a.outlineSize=.2;a.outlineColor=
[1,.5,0,1];a.stripeLength=1;a.stripeEvenColor=[1,1,1,1];a.stripeOddColor=[1,.5,0,1];a.polygonOffset=!1;return a}A._inheritsLoose(c,f);return c}(C.MaterialParameters);const Q=I.newLayout().vec3f(k.VertexAttribute.POSITION).vec3f(k.VertexAttribute.NORMAL).vec2f(k.VertexAttribute.UV0).f32(k.VertexAttribute.AUXPOS1),l=p.create(),r=p.create(),v=p.create(),m=p.create(),w=p.create();let O=function(){function f(){this.vertexBufferLayout=Q}var c=f.prototype;c.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};
c.elementCount=function(a){return 2*(a.indices.get(k.VertexAttribute.POSITION).length/2+1)};c.write=function(a,b,h,q){var g=b.vertexAttributes.get(k.VertexAttribute.POSITION).data;const B=b.vertexAttributes.get(k.VertexAttribute.NORMAL).data,t=g.length/3;(b=b&&b.indices&&b.indices.get(k.VertexAttribute.POSITION))&&b.length!==2*(t-1)&&console.warn("MeasurementArrowMaterial does not support indices");b=a.transformation;const F=a.invTranspTransformation,G=h.position,H=h.normal,x=h.uv0;a=0;for(let n=
0;n<t;++n){var e=3*n;d.set(l,g[e],g[e+1],g[e+2]);n<t-1&&(e=3*(n+1),d.set(r,g[e],g[e+1],g[e+2]),d.set(w,B[e],B[e+1],B[e+2]),d.normalize(w,w),d.subtract(v,r,l),d.normalize(v,v),d.cross(m,w,v),d.normalize(m,m));e=d.distance(l,r);b&&F&&(d.transformMat4(l,l,b),d.transformMat4(r,r,b),d.transformMat4(m,m,F));const u=q+2*n,y=u+1;G.setVec(u,l);G.setVec(y,l);H.setVec(u,m);H.setVec(y,m);x.set(u,0,a);x.set(u,1,-1);x.set(y,0,a);x.set(y,1,1);n<t-1&&(a+=e)}h=h.auxpos1;for(g=0;g<2*t;++g)h.set(q+g,a)};return f}();
z.MeasurementArrowMaterial=P;z.Parameters=E;Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});