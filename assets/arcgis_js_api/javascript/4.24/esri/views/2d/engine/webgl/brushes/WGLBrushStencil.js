// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec4f32 ../DefaultVertexAttributeLayouts ./WGLBrush ../shaders/BackgroundPrograms ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/ProgramTemplate ../../../../webgl/VertexArrayObject".split(" "),function(l,m,n,p,q,g,r,d,t,u){return function(h){function f(){var a=h.apply(this,arguments)||this;a._color=n.fromValues(1,0,0,1);a._initialized=!1;return a}l._inheritsLoose(f,h);
var e=f.prototype;e.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};e.prepareState=function({context:a},c){a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(d.StencilOperation.KEEP,d.StencilOperation.KEEP,d.StencilOperation.REPLACE);a.setStencilWriteMask(255);
a.setStencilFunctionSeparate(d.Face.FRONT_AND_BACK,d.CompareFunction.GREATER,c.stencilRef,255)};e.draw=function(a,c){const {context:b,requestRender:k}=a;this._initialized||this._initialize(b);m.isSome(k)&&!this._solidProgram.isCompiled?k():(b.bindVAO(this._solidVertexArrayObject),b.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",c.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",[c.rangeX,c.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",
this._color),b.drawArrays(d.PrimitiveType.TRIANGLE_STRIP,0,4),b.bindVAO())};e._initialize=function(a){if(this._initialized)return!0;const c=t.createProgram(a,g.background);if(!c)return!1;var b=new Int8Array([0,0,1,0,0,1,1,1]);b=r.BufferObject.createVertex(a,d.Usage.STATIC_DRAW,b);a=new u.VertexArrayObject(a,g.background.attributes,p.Pos2b,{geometry:b});this._solidProgram=c;this._solidVertexArrayObject=a;return this._initialized=!0};return f}(q)});