// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","./materialKey/MaterialKey"],function(t,u){function l(h,e,a,...d){e<h.length?h.splice(e,a,...d):h.push(...d)}let z=function(){function h(){this.symbolLevels=[]}var e=h.prototype;e.replay=function(a,d,c){for(const f of this.symbolLevels)for(const m of f.zLevels){var b=m.geometryDPInfo.unified;if(b)for(const k of b){const {geometryType:n,materialKey:q,indexFrom:v,indexCount:w}=k;b=u.MaterialKeyBase.load(q).symbologyType;b=a.painter.getBrush(n,b);
var g=d.getGeometry(n);g={geometryType:n,materialKey:q,indexFrom:v,indexCount:w,target:g};b.prepareState(a,d);b.drawGeometry(a,d,g,c)}}};e.clear=function(){this.symbolLevels.length=0};e.addToList=function(a,d){if(Array.isArray(a))for(const c of a)this._addToList(c,d);else this._addToList(a,d)};e.removeFromList=function(a){Array.isArray(a)||(a=[a]);let d=null;for(const c of a)d=this._removeFromList(c);return d};e.clone=function(){const a=new h;for(const d of this.symbolLevels)a.symbolLevels.push(d.clone());
return a};e.splitAfter=function(a){const d=this._getDisplayList(a.symbolLevel,a.zOrder),c=d.length,b=a.indexFrom+a.indexCount;for(let g=0;g<c;++g){const f=d[g];if(f.geometryType===a.geometryType&&b>f.indexFrom&&b<=f.indexFrom+f.indexCount)return b<f.indexFrom+f.indexCount&&(a=new p,a.geometryType=f.geometryType,a.materialKey=f.materialKey,a.indexFrom=b,a.indexCount=f.indexFrom+f.indexCount-b,d.splice(g+1,0,a),f.indexCount=b-f.indexFrom),g}};e._addToList=function(a,d){const c=this._getDisplayList(a.symbolLevel,
a.zOrder);d=null!=d?d:c.length-1;var b=0<=d&&d<c.length?c[d]:null;null!==b&&b.materialKey===a.materialKey&&b.indexFrom+b.indexCount===a.indexFrom&&b.geometryType===a.geometryType?b.indexCount+=a.indexCount:(b=new p,b.indexFrom=a.indexFrom,b.indexCount=a.indexCount,b.materialKey=a.materialKey,b.geometryType=a.geometryType,l(c,d+1,0,b))};e._removeFromList=function(a){const d=this._getDisplayList(a.symbolLevel,a.zOrder);var c=d.length;let b=void 0;for(var g=0;g<c;++g){var f=d[g];if(a.indexFrom+a.indexCount>
f.indexFrom&&a.indexFrom<f.indexFrom+f.indexCount&&f.geometryType===a.geometryType){b=g;break}}if(void 0!==b){c=d[b];if(a.indexFrom===c.indexFrom)return c.indexCount-=a.indexCount,c.indexFrom+=a.indexCount,0===c.indexCount&&l(d,b,1),b-1;if(a.indexFrom+a.indexCount===c.indexFrom+c.indexCount)return c.indexCount-=a.indexCount,0===c.indexCount?(l(d,b,1),b-1):b;{g=c.indexFrom;f=a.indexFrom-c.indexFrom;const m=a.indexCount;a=c.indexFrom+c.indexCount-(a.indexFrom+a.indexCount);c.indexCount=f;const k=new p;
k.geometryType=c.geometryType;k.materialKey=c.materialKey;k.indexFrom=g+f+m;k.indexCount=a;l(d,b+1,0,k);return b}}return null};e._getDisplayList=function(a,d){let c;var b=this.symbolLevels.length;for(let f=0;f<b;f++)if(this.symbolLevels[f].symbolLevel===a){c=this.symbolLevels[f];break}c||(c=new x,c.symbolLevel=a,this.symbolLevels.push(c));let g;a=c.zLevels.length;for(b=0;b<a;b++)if(c.zLevels[b].zLevel===d){g=c.zLevels[b];break}g||(g=new y,g.geometryDPInfo=new r,g.zLevel=d,c.zLevels.push(g));g.geometryDPInfo.unified||
(g.geometryDPInfo.unified=[]);return g.geometryDPInfo.unified};e.getDPInfoType=function(){return"unified"};t._createClass(h,[{key:"empty",get:function(){return!this.symbolLevels||0===this.symbolLevels.length}}]);return h}(),p=function(){function h(){this.materialKey=null;this.indexCount=this.indexFrom=0}h.prototype.clone=function(){const e=new h;e.geometryType=this.geometryType;e.materialKey=this.materialKey;e.indexFrom=this.indexFrom;e.indexCount=this.indexCount;return e};return h}(),r=function(){function h(){this.unified=
this.label=this.text=this.marker=this.line=this.fill=null}h.prototype.clone=function(){const e=new h;e.fill=this.fill&&this.fill.map(a=>a.clone());e.line=this.line&&this.line.map(a=>a.clone());e.marker=this.marker&&this.marker.map(a=>a.clone());e.text=this.text&&this.text.map(a=>a.clone());e.label=this.label&&this.label.map(a=>a.clone());e.unified=this.unified&&this.unified.map(a=>a.clone());return e};return h}(),y=function(){function h(){this.geometryDPInfo=new r}h.prototype.clone=function(){const e=
new h;e.zLevel=this.zLevel;e.geometryDPInfo=this.geometryDPInfo.clone();return e};return h}(),x=function(){function h(){this.zLevels=[]}h.prototype.clone=function(){const e=new h;e.symbolLevel=this.symbolLevel;for(const a of this.zLevels)e.zLevels.push(a.clone());return e};return h}();return z});