// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],function(n,g,e){function h(a){switch(a.type){case "line-marker":var b;return{type:"line-marker",color:null==(b=a.color)?void 0:b.toJSON(),placement:a.placement,style:a.style};default:return a.constructor.fromJSON(a.toJSON()).toJSON()}}function p(a,b,d){var c=e.createMaterialKey(g.WGLGeometryType.FILL,b);c=d?e.hydrateMaterialKey(c):c;var f=a.clone();a=f.outline;const k=e.isOutlineFillSymbology(b.symbologyType);
k||(f.outline=null);f={materialKey:c,hash:f.hash(),...h(f)};if(k)return f;c=[];c.push(f);a&&(b=e.createMaterialKey(g.WGLGeometryType.LINE,{...b,isOutline:!0}),d={materialKey:d?e.hydrateMaterialKey(b):b,hash:a.hash(),...h(a)},c.push(d));return{type:"composite-symbol",layers:c,hash:c.reduce((l,m)=>m.hash+l,"")}}function q(a,b,d){var c=e.isOutlineFillSymbology(b.symbologyType)?g.WGLSymbologyType.DEFAULT:b.symbologyType;c=e.createMaterialKey(g.WGLGeometryType.LINE,{...b,symbologyType:c});const f=d?e.hydrateMaterialKey(c):
c;a=a.clone();c=a.marker;a.marker=null;const k=[];k.push({materialKey:f,hash:a.hash(),...h(a)});if(c){var l;b=e.createMaterialKey(g.WGLGeometryType.MARKER,b);d=d?e.hydrateMaterialKey(b):b;c.color=null!=(l=c.color)?l:a.color;k.push({materialKey:d,hash:c.hash(),lineWidth:a.width,...h(c)})}return{type:"composite-symbol",layers:k,hash:k.reduce((m,r)=>r.hash+m,"")}}n.createSymbolSchema=function(a,b,d){if(!a)return null;switch(a.type){case "simple-fill":case "picture-fill":return p(a,b,d);case "simple-marker":case "picture-marker":var c=
e.createMaterialKey(g.WGLGeometryType.MARKER,b);d=d?e.hydrateMaterialKey(c):c;c=h(a);return a={materialKey:d,hash:a.hash(),...c,angle:a.angle,maxVVSize:b.maxVVSize};case "simple-line":return q(a,b,d);case "text":return c=e.createMaterialKey(g.WGLGeometryType.TEXT,b),d=d?e.hydrateMaterialKey(c):c,c=h(a),a={materialKey:d,hash:a.hash(),...c,angle:a.angle,maxVVSize:b.maxVVSize};case "label":return c=a.toJSON(),b=e.createMaterialKey(g.WGLGeometryType.LABEL,{...b,placement:c.labelPlacement}),a={materialKey:d?
e.hydrateMaterialKey(b):b,hash:a.hash(),...c,labelPlacement:c.labelPlacement};case "cim":return{type:"cim",rendererKey:b.vvFlags,data:a.data,maxVVSize:b.maxVVSize};case "CIMSymbolReference":return{type:"cim",rendererKey:b.vvFlags,data:a,maxVVSize:b.maxVVSize};case "web-style":return{...h(a),type:"web-style",hash:a.hash(),rendererKey:b.vvFlags,maxVVSize:b.maxVVSize};default:throw Error(`symbol not supported ${a.type}`);}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});