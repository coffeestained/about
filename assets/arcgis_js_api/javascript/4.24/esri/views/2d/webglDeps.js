// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/webgl/BufferObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/maybe ../../core/typedArrayUtil ./checkWebGLError ./context-util ./enums".split(" "),function(f,a,J,h,D,C,B,b,t){const q=h.getLogger("esri.views.webgl.BufferObject");h=function(){function x(r,n,l,c){this._context=r;this.bufferType=n;this.usage=l;this._glName=null;this._size=-1;this._indexType=void 0;r.instanceCounter.increment(t.ResourceType.BufferObject,
this);this._glName=this._context.gl.createBuffer();B.checkWebGLError(this._context.gl);c&&this.setData(c)}x.createIndex=function(r,n,l){return new x(r,t.BufferType.ELEMENT_ARRAY_BUFFER,n,l)};x.createVertex=function(r,n,l){return new x(r,t.BufferType.ARRAY_BUFFER,n,l)};x.createUniform=function(r,n,l){if(r.type!==b.ContextType.WEBGL2)throw Error("Uniform buffers are supported in WebGL2 only!");return new x(r,t.BufferType.UNIFORM_BUFFER,n,l)};x.createPixelPack=function(r,n=t.Usage.STREAM_READ,l){if(r.type!==
b.ContextType.WEBGL2)throw Error("Pixel pack buffers are supported in WebGL2 only!");r=new x(r,t.BufferType.PIXEL_PACK_BUFFER,n);l&&r.setSize(l);return r};x.createPixelUnpack=function(r,n=t.Usage.STREAM_DRAW,l){if(r.type!==b.ContextType.WEBGL2)throw Error("Pixel unpack buffers are supported in WebGL2 only!");return new x(r,t.BufferType.PIXEL_UNPACK_BUFFER,n,l)};var z=x.prototype;z.dispose=function(){var r;null!=(r=this._context)&&r.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=
null),this._context.instanceCounter.decrement(t.ResourceType.BufferObject,this),this._context=null):this._glName&&q.warn("Leaked WebGL buffer object")};z.setSize=function(r,n=null){0>=r&&q.error("Buffer size needs to be positive!");if(this.bufferType===t.BufferType.ELEMENT_ARRAY_BUFFER&&D.isSome(n))switch(this._indexType=n,n){case t.DataType.UNSIGNED_SHORT:r*=2;break;case t.DataType.UNSIGNED_INT:r*=4}this._setBufferData(r)};z.setData=function(r){if(r){var n=r.byteLength;this.bufferType===t.BufferType.ELEMENT_ARRAY_BUFFER&&
(C.isUint16Array(r)&&(n/=2,this._indexType=t.DataType.UNSIGNED_SHORT),C.isUint32Array(r)&&(n/=4,this._indexType=t.DataType.UNSIGNED_INT));this._setBufferData(n,r)}};z._setBufferData=function(r,n=null){this._size=r;const l=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);const c=this._context.gl;D.isSome(n)?c.bufferData(this.bufferType,n,this.usage):c.bufferData(this.bufferType,r,this.usage);B.checkWebGLError(c);this._isVAOAware&&this._context.bindVAO(l)};
z.setSubData=function(r,n=0,l=0,c=r.byteLength){if(r){(0>n||n>=this._size)&&q.error("offset is out of range!");var e=n,k=l,p=c,d=r.byteLength;this.bufferType===t.BufferType.ELEMENT_ARRAY_BUFFER&&(C.isUint16Array(r)?(d/=2,e*=2,k*=2,p*=2):C.isUint32Array(r)&&(d/=4,e*=4,k*=4,p*=4));void 0===c&&(c=d-1);l>=c&&q.error("end must be bigger than start!");n+l-c>this._size&&q.error("An attempt to write beyond the end of the buffer!");n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);
this._context.bindBuffer(this);l=this._context.gl;c=ArrayBuffer.isView(r)?r.buffer:r;r=0===k&&p===r.byteLength?c:c.slice(k,p);l.bufferSubData(this.bufferType,e,r);B.checkWebGLError(l);this._isVAOAware&&this._context.bindVAO(n)}};z.setSubDataFromView=function(r,n,l,c){if(r){(0>n||n>=this._size)&&q.error("offset is out of range!");l>=c&&q.error("end must be bigger than start!");n+l-c>this._size&&q.error("An attempt to write beyond the end of the buffer!");var e=this._context.getBoundVAO();this._isVAOAware&&
this._context.bindVAO(null);this._context.bindBuffer(this);var k=this._context.gl;this._context.type===b.ContextType.WEBGL2?k.bufferSubData(this.bufferType,n*r.BYTES_PER_ELEMENT,r,l,c-l):(l=0===l&&c===r.length?r:r.subarray(l,c),k.bufferSubData(this.bufferType,n*r.BYTES_PER_ELEMENT,l));B.checkWebGLError(k);this._isVAOAware&&this._context.bindVAO(e)}};z.getSubData=function(r,n=0,l,c){if(this._context.type!==b.ContextType.WEBGL2)q.error("Get buffer subdata is supported in WebGL2 only!");else if(0>l||
0>c)q.error("Problem getting subdata: offset and length were less than zero!");else{var e=J.isArrayLike(r)?r.BYTES_PER_ELEMENT:1;e*((null!=l?l:0)+(null!=c?c:0))>r.byteLength?q.error("Problem getting subdata: offset and length exceeded destination size!"):(n+e*(null!=c?c:0)>this.byteSize&&q.warn("Potential problem getting subdata: requested data exceeds buffer size!"),e=this._context.gl,this._context.bindBuffer(this,t.BufferType.COPY_READ_BUFFER),e.getBufferSubData(t.BufferType.COPY_READ_BUFFER,n,
r,l,c),this._context.unbindBuffer(t.BufferType.COPY_READ_BUFFER))}};z.getSubDataAsync=function(){var r=a._asyncToGenerator(function*(n,l=0,c,e){this._context.type!==b.ContextType.WEBGL2?q.error("Get buffer subdata is supported in WebGL2 only!"):(yield this._context.clientWaitAsync(),this.getSubData(n,l,c,e))});return function(n){return r.apply(this,arguments)}}();a._createClass(x,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},
{key:"byteSize",get:function(){return this.bufferType===t.BufferType.ELEMENT_ARRAY_BUFFER?this._indexType===t.DataType.UNSIGNED_INT?4*this._size:2*this._size:this._size}},{key:"_isVAOAware",get:function(){return this.bufferType===t.BufferType.ELEMENT_ARRAY_BUFFER||this.bufferType===t.BufferType.ARRAY_BUFFER}}]);return x}();f.BufferObject=h;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error",
"../../core/has","../../core/Logger"],function(f,a,J,h){function D(b,t){switch(t){case b.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case b.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case b.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case b.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";
case b.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case b.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const C=h.getLogger("esri/views/webgl"),B=!!J("enable-feature:webgl-debug");f.checkWebGLError=function(b){if(B){const t=b.getError();t&&(b=D(b,t),C.error(new a("webgl-error","WebGL error occured",{message:b,stack:Error().stack})))}};f.hasFeatureFlagWebGLDebug=B;f.webglDebugEnabled=function(){return B};f.webglValidateShadersEnabled=
function(){return B};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(f,a,J){function h(b){const t=a("esri-force-webgl");if(t===f.ContextType.WEBGL1||t===f.ContextType.WEBGL2)return[t];switch(b){case "2d":return a("mac")&&a("chrome")?[f.ContextType.WEBGL1,f.ContextType.WEBGL2]:[f.ContextType.WEBGL2,f.ContextType.WEBGL1];case "3d":return[f.ContextType.WEBGL2,
f.ContextType.WEBGL1]}}function D(b,t,q={}){if(!window.WebGLRenderingContext)return B(b,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;t=C(b,t,q);J.isNone(t)&&B(b,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return t}function C(b,t,q={}){t=t===f.ContextType.WEBGL1?["webgl",
"experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let x=null;for(const z of t){try{x=b.getContext(z,q)}catch(r){}if(x)break}return x}function B(b,t){(b=b.parentNode)&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+t+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}f.ContextType=void 0;(function(b){b[b.WEBGL1=
1]="WEBGL1";b[b.WEBGL2=2]="WEBGL2"})(f.ContextType||(f.ContextType={}));f.createContext=C;f.createContextOrErrorHTML=function(b,t,q={}){for(b=h(b);1<b.length;){const x=C(t,b.shift(),q);if(J.isSome(x))return x}return D(t,b.shift(),q)};f.getContextTypes=h;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/enums":function(){define(["exports"],function(f){f.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=
1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(f.ClearBufferBit||(f.ClearBufferBit={}));f.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(f.PrimitiveType||(f.PrimitiveType={}));f.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";
a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=
32772]="ONE_MINUS_CONSTANT_ALPHA"})(f.BlendFactor||(f.BlendFactor={}));f.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(f.BlendOperation||(f.BlendOperation={}));f.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";
a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(f.BufferType||(f.BufferType={}));f.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(f.Face||(f.Face={}));f.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(f.CullMode||(f.CullMode={}));f.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=
5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(f.DataType||(f.DataType={}));f.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(f.CompareFunction||(f.CompareFunction={}));f.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=
7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(f.StencilOperation||(f.StencilOperation={}));f.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(f.TextureSamplingMode||
(f.TextureSamplingMode={}));f.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(f.TextureWrapMode||(f.TextureWrapMode={}));f.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";
a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(f.TextureType||(f.TextureType={}));f.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.ALPHA=6406]="ALPHA";
a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(f.PixelFormat||(f.PixelFormat={}));f.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";
a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";
a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]=
"RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(f.SizedPixelFormat||(f.SizedPixelFormat={}));f.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";
a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(f.PixelType||
(f.PixelType={}));f.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(f.RenderbufferFormat||(f.RenderbufferFormat={}));f.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";
a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(f.Usage||(f.Usage={}));f.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(f.ShaderType||(f.ShaderType={}));f.FramebufferTarget=
void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(f.FramebufferTarget||(f.FramebufferTarget={}));f.TargetType=void 0;(function(a){a[a.TEXTURE=0]="TEXTURE";a[a.RENDER_BUFFER=1]="RENDER_BUFFER";a[a.CUBEMAP=2]="CUBEMAP"})(f.TargetType||(f.TargetType={}));f.DepthStencilTargetType=void 0;(function(a){a[a.NONE=0]="NONE";a[a.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER";a[a.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER";
a[a.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"})(f.DepthStencilTargetType||(f.DepthStencilTargetType={}));f.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.COUNT=8]="COUNT"})(f.ResourceType||
(f.ResourceType={}));f.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=
36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(f.ColorAttachment||(f.ColorAttachment={}));f.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=
33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=
37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(f.CompressedTextureFormat||(f.CompressedTextureFormat={}));f.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=
35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";
a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";
a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=
36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(f.UniformType||(f.UniformType={}));f.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(f.SyncParameter||(f.SyncParameter={}));f.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(f.SyncStatus||(f.SyncStatus=
{}));f.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(f.ClientWaitSyncStatus||(f.ClientWaitSyncStatus={}));f.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(f.SyncCondition||(f.SyncCondition={}));f.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(f.SyncFlag||
(f.SyncFlag={}));f.BASE_TEXTURE_UNIT=33984;f.DepthStencilAttachment=33306;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/FramebufferObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/maybe ./BufferObject ./checkWebGLError ./context-util ./enums ./Renderbuffer ./Texture ./Util".split(" "),function(f,a,J,h,D,C,B,b,t,q,x){function z(k){return"type"in k&&"texture"===k.type}function r(k){return z(k)||
"pixelFormat"in k}function n(k,p){k.target!==b.TextureType.TEXTURE_2D&&k.target!==b.TextureType.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!");void 0!==p.width&&0<=p.width&&void 0!==p.height&&0<=p.height?p.width===k.width&&p.height===k.height||console.error("Color attachment texture must match the framebuffer's!"):(p.width=k.width,p.height=k.height)}function l(k,p){void 0!==p.width&&0<=p.width&&void 0!==p.height&&0<=p.height?p.width===k.width&&p.height===k.height||
console.error("Renderbuffer dimensions must match the framebuffer's!"):(p.width=k.width,p.height=k.height)}function c(k){return k.descriptor.target===b.TextureType.TEXTURE_CUBE_MAP?b.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X:b.TextureType.TEXTURE_2D}const e=J.getLogger("esri.views.webgl.FrameBufferObject");J=function(){function k(d,g,m=null,u=null){this._context=d;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;this._initialized=!1;this._desc={...g};d.instanceCounter.increment(b.ResourceType.FramebufferObject,
this);if(h.isSome(m))for(Array.isArray(m)||(m=[m]),d=0;d<m.length;++d){g=m[d];const A=b.ColorAttachment.COLOR_ATTACHMENT0+d;let F;r(g)?(z(g)?(F=g.descriptor,this._colorAttachments.set(A,g)):(F=g,this._colorAttachments.set(A,new q.Texture(this._context,F))),n(F,this._desc)):("type"in g&&"renderbuffer"===g.type?(F=g.descriptor,this._colorAttachments.set(A,g)):(F=g,this._colorAttachments.set(A,new t.Renderbuffer(this._context,F))),l(F,this._desc));this._validateColorAttachmentPoint(A)}if(h.isSome(u))if(r(u))this._context.capabilities.depthTexture||
console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),z(u)?(m=u.descriptor,this._depthStencilTexture=u):(m=u,this._depthStencilTexture=new q.Texture(this._context,m)),n(m,this._desc);else{var y;"type"in u&&"renderbuffer"===u.type?m=u.descriptor:(m=u,u=new t.Renderbuffer(this._context,m));d=null!=(y=this._desc.depthStencilTarget)?y:b.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER;d===b.DepthStencilTargetType.STENCIL_RENDER_BUFFER?this._stencilAttachment=
u:d===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER||d===b.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER?this._depthAttachment=u:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');l(m,this._desc)}}var p=k.prototype;p.dispose=function(){if(this._desc){var d=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),
this._glName=null);this._context.bindFramebuffer(d);this._context.instanceCounter.decrement(b.ResourceType.FramebufferObject,this);this._desc=null}};p.getColorTexture=function(d){return(d=this._colorAttachments.get(d))&&z(d)?d:null};p.attachColorTexture=function(d,g=b.ColorAttachment.COLOR_ATTACHMENT0){d&&(this._validateColorAttachmentPoint(g),n(d.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(d.glName,g)),
this._colorAttachments.set(g,d))};p.detachColorTexture=function(d=b.ColorAttachment.COLOR_ATTACHMENT0){const g=this._colorAttachments.get(d);if(z(g))return this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,d)),this._colorAttachments.delete(d),g};p.setColorTextureTarget=function(d,g=b.ColorAttachment.COLOR_ATTACHMENT0){const m=this._colorAttachments.get(g);z(m)&&this._framebufferTexture2D(m.glName,g,d)};p.attachDepthStencilTexture=function(d){if(!h.isNone(d)){var g=
d.descriptor;g.pixelFormat!==b.PixelFormat.DEPTH_STENCIL&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");g.dataType!==b.PixelType.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");n(g,this._desc);this._desc.depthStencilTarget&&this._desc.depthStencilTarget!==
b.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE&&(this._desc.depthStencilTarget=b.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(d.glName,b.DepthStencilAttachment));this._depthStencilTexture=d}};p.detachDepthStencilTexture=function(){const d=this._depthStencilTexture;d&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,b.DepthStencilAttachment));
this._depthStencilTexture=null;return d};p.attachDepthStencilBuffer=function(d){if(!h.isNone(d)){var g=d.descriptor;g.internalFormat!==b.RenderbufferFormat.DEPTH_STENCIL&&g.internalFormat!==b.RenderbufferFormat.DEPTH_COMPONENT16&&console.error("Depth/Stencil buffer must have correct internalFormat");l(g,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=g.internalFormat===b.RenderbufferFormat.DEPTH_STENCIL?b.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER:b.DepthStencilTargetType.DEPTH_RENDER_BUFFER;
this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferRenderbuffer(b.FramebufferTarget.FRAMEBUFFER,this._desc.depthStencilTarget===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER?g.DEPTH_ATTACHMENT:g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,d.glName));this._depthAttachment=d}};p.detachDepthStencilBuffer=function(){const d=this._context.gl,g=this._depthAttachment;g&&this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(b.FramebufferTarget.FRAMEBUFFER,
this._desc.depthStencilTarget===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,null));this._depthAttachment=null;return g};p.detachAll=function(){this._colorAttachments.forEach((d,g)=>this._detachColorAttachment(g));this.detachDepthStencilBuffer();this.detachDepthStencilTexture()};p.copyToTexture=function(d,g,m,u,y,A,F){(0>d||0>g||0>y||0>A)&&console.error("Offsets cannot be negative!");(0>=m||0>=u)&&console.error("Copy width and height must be greater than zero!");
var w=this._desc;const H=F.descriptor;F.descriptor.target!==b.TextureType.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!");(d+m>w.width||g+u>w.height||y+m>H.width||A+u>H.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");w=this._context;F=w.bindTexture(F,q.Texture.TEXTURE_UNIT_FOR_UPDATES);w.setActiveTexture(q.Texture.TEXTURE_UNIT_FOR_UPDATES);w.bindFramebuffer(this);w.gl.copyTexSubImage2D(b.TextureType.TEXTURE_2D,0,y,A,d,
g,m,u);w.bindTexture(F,q.Texture.TEXTURE_UNIT_FOR_UPDATES)};p.readPixels=function(d,g,m,u,y,A,F){(0>=m||0>=u)&&console.error("Copy width and height must be greater than zero!");F||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(d,g,m,u,y,A,F)};p.readPixelsAsync=function(){var d=a._asyncToGenerator(function*(g,m,u,y,A,F,w){if(this._context.type!==B.ContextType.WEBGL2)C.webglDebugEnabled()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),
this.readPixels(g,m,u,y,A,F,w);else{var H=this._context.gl,E=D.BufferObject.createPixelPack(this._context,b.Usage.STREAM_READ,w.byteLength);this._context.bindBuffer(E);this._context.bindFramebuffer(this);H.readPixels(g,m,u,y,A,F,0);this._context.unbindBuffer(b.BufferType.PIXEL_PACK_BUFFER);yield E.getSubDataAsync(w);E.dispose()}});return function(g,m,u,y,A,F,w){return d.apply(this,arguments)}}();p.resize=function(d,g){const m=this._desc;if(m.width!==d||m.height!==g)if(this._initialized){m.width=d;
m.height=g;this._colorAttachments.forEach(u=>{u&&u.resize(d,g)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(d,g);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(d,g),this._stencilAttachment&&this._stencilAttachment.resize(d,g);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else m.width=d,m.height=g,this._colorAttachments.forEach(u=>{u&&u.resize(d,g)}),this._depthStencilTexture&&
this._depthStencilTexture.resize(d,g)};p.initializeAndBind=function(d=b.FramebufferTarget.FRAMEBUFFER){var g,m,u,y;const A=this._context.gl;if(this._initialized)A.bindFramebuffer(d,this.glName);else{this._glName&&A.deleteFramebuffer(this._glName);var F=this._context,w=A.createFramebuffer(),H=this._desc,E=null!=(g=H.colorTarget)?g:b.TargetType.RENDER_BUFFER;g=null!=(m=H.width)?m:1;m=null!=(u=H.height)?u:1;A.bindFramebuffer(d,w);0===this._colorAttachments.size&&(E===b.TargetType.TEXTURE||E===b.TargetType.CUBEMAP?
this._colorAttachments.set(b.ColorAttachment.COLOR_ATTACHMENT0,new q.Texture(F,{target:this.descriptor.colorTarget===b.TargetType.CUBEMAP?b.TextureType.TEXTURE_CUBE_MAP:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,width:H.width,height:H.height})):(u=new t.Renderbuffer(F,{internalFormat:b.SizedPixelFormat.RGBA4,width:g,height:m}),this._colorAttachments.set(b.ColorAttachment.COLOR_ATTACHMENT0,
u)));this._colorAttachments.forEach((v,G)=>{v&&(z(v)?this._framebufferTexture2D(v.glName,G,c(v),d):A.framebufferRenderbuffer(d,G,A.RENDERBUFFER,v.glName))});u=null!=(y=H.depthStencilTarget)?y:b.DepthStencilTargetType.NONE;switch(u){case b.DepthStencilTargetType.DEPTH_RENDER_BUFFER:case b.DepthStencilTargetType.DEPTH_STENCIL_RENDER_BUFFER:this._depthAttachment||(this._depthAttachment=new t.Renderbuffer(F,{internalFormat:H.depthStencilTarget===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER?b.RenderbufferFormat.DEPTH_COMPONENT16:
b.RenderbufferFormat.DEPTH_STENCIL,width:g,height:m}));A.framebufferRenderbuffer(d,u===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER?A.DEPTH_ATTACHMENT:A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,this._depthAttachment.glName);break;case b.DepthStencilTargetType.STENCIL_RENDER_BUFFER:this._stencilAttachment||(this._stencilAttachment=new t.Renderbuffer(F,{internalFormat:b.RenderbufferFormat.STENCIL_INDEX8,width:g,height:m}));A.framebufferRenderbuffer(d,A.STENCIL_ATTACHMENT,A.RENDERBUFFER,this._stencilAttachment.glName);
break;case b.DepthStencilTargetType.DEPTH_STENCIL_TEXTURE:this._depthStencilTexture||(F.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new q.Texture(F,{target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.DEPTH_STENCIL,dataType:b.PixelType.UNSIGNED_INT_24_8,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,width:g,
height:m})),this._framebufferTexture2D(this._depthStencilTexture.glName,A.DEPTH_STENCIL_ATTACHMENT,c(this._depthStencilTexture),d)}C.webglValidateShadersEnabled()&&A.checkFramebufferStatus(d)!==A.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=w;this._initialized=!0}};p._framebufferTexture2D=function(d,g=b.ColorAttachment.COLOR_ATTACHMENT0,m=b.TextureType.TEXTURE_2D,u=b.FramebufferTarget.FRAMEBUFFER,y=0){this._context.gl.framebufferTexture2D(u,g,m,d,y)};p._detachColorAttachment=
function(d){C.webglDebugEnabled()&&console.warn("Detaching an FBO attachment can be a slow due to invalidating framebuffer completeness!");const g=this._context.gl,m=this._colorAttachments.get(d);z(m)?this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,d)):this._initialized&&(this._context.bindFramebuffer(this),g.framebufferRenderbuffer(b.FramebufferTarget.FRAMEBUFFER,d,g.RENDERBUFFER,null));this._colorAttachments.delete(d);return m};p._disposeColorAttachments=
function(){this._colorAttachments.forEach((d,g)=>{this._detachColorAttachment(g);d.dispose()});this._colorAttachments.clear()};p._disposeDepthStencilAttachments=function(){const d=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(b.FramebufferTarget.FRAMEBUFFER,this._desc.depthStencilTarget===b.DepthStencilTargetType.DEPTH_RENDER_BUFFER?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,null)),this._depthAttachment.dispose(),
this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(b.FramebufferTarget.FRAMEBUFFER,d.STENCIL_ATTACHMENT,d.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,d.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};p._validateColorAttachmentPoint=
function(d){if(-1===k._MAX_COLOR_ATTACHMENTS){const g=this._context.capabilities.drawBuffers;k._MAX_COLOR_ATTACHMENTS=g?this._context.gl.getParameter(g.MAX_COLOR_ATTACHMENTS):1}d-=b.ColorAttachment.COLOR_ATTACHMENT0;d+1>k._MAX_COLOR_ATTACHMENTS&&e.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${d+1}. Implementation supports up to ${k._MAX_COLOR_ATTACHMENTS} color attachments`)};a._createClass(k,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",
get:function(){return this._desc}},{key:"colorTexture",get:function(){const d=this._colorAttachments.get(b.ColorAttachment.COLOR_ATTACHMENT0);return d&&z(d)?d:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(b.ColorAttachment.COLOR_ATTACHMENT0)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},
{key:"height",get:function(){return this._desc.height}},{key:"gpuMemoryUsage",get:function(){return[...this._colorAttachments].reduce((d,[,g])=>d+x.getGpuMemoryUsage(g),0)+x.getGpuMemoryUsage(this.depthStencilAttachment)}}]);return k}();J._MAX_COLOR_ATTACHMENTS=-1;f.FramebufferObject=J;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Renderbuffer":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./context-util","./enums"],
function(f,a,J,h){let D=function(){function C(b,t){this._context=b;this._desc=t;this.type="renderbuffer";this._context.instanceCounter.increment(h.ResourceType.Renderbuffer,this);b=this._context.gl;this.glName=b.createRenderbuffer();this._context.bindRenderbuffer(this);const {width:q,height:x,internalFormat:z,multisampled:r}=t;if(r){if(this._context.type!==J.ContextType.WEBGL2)throw Error("Multisampled renderbuffers are not supported in WebGL1!");b.renderbufferStorageMultisample(b.RENDERBUFFER,this.samples,
z,q,x)}else b.renderbufferStorage(b.RENDERBUFFER,z,q,x)}var B=C.prototype;B.resize=function(b,t){const q=this._desc;if(q.width!==b||q.height!==t)q.width=b,q.height=t,b=this._context.gl,this._context.bindRenderbuffer(this),q.multisampled?b.renderbufferStorageMultisample(b.RENDERBUFFER,this.samples,q.internalFormat,q.width,q.height):b.renderbufferStorage(b.RENDERBUFFER,q.internalFormat,q.width,q.height)};B.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(h.ResourceType.Renderbuffer,
this),this._context=null)};a._createClass(C,[{key:"descriptor",get:function(){return this._desc}},{key:"samples",get:function(){const b=this._desc.samples,t=this._context.parameters.maxSamples;return b?Math.min(b,t):t}}]);return C}();f.Renderbuffer=D;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Texture":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/mathUtils ../../core/maybe ./checkWebGLError ./context-util ./enums ./capabilities/isWebGL2Context".split(" "),
function(f,a,J,h,D,C,B,b,t){function q(n){return D.isSome(n)&&"type"in n&&"compressed"===n.type}function x(n){var l;if(l=D.isSome(n)&&!q(n))l=!(D.isSome(n)&&"byteLength"in n);return l}function z(n){return n===b.TextureType.TEXTURE_3D||n===b.TextureType.TEXTURE_2D_ARRAY}function r(n,l,c,e=1){l=Math.max(l,c);n===b.TextureType.TEXTURE_3D&&(l=Math.max(l,e));return Math.round(Math.log(l)/Math.LN2)+1}J=function(){function n(c,e,k=null){this._context=c;this.type="texture";this._glName=null;this._descriptor=
void 0;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;c.instanceCounter.increment(b.ResourceType.Texture,this);this._descriptor={target:b.TextureType.TEXTURE_2D,samplingMode:b.TextureSamplingMode.LINEAR,wrapMode:b.TextureWrapMode.REPEAT,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,isImmutable:!1,...e};if(c.type!==B.ContextType.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),z(this._descriptor.target)))throw Error("3D and array textures are not supported in WebGL1");
this._descriptor.target===b.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(k):this.setData(k)}var l=n.prototype;l.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTexture(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(b.ResourceType.Texture,this))};l.release=function(){this.dispose()};l.resize=function(c,e){const k=this._descriptor;if(k.width!==c||k.height!==e){if(this._wasImmutablyAllocated)throw Error("Immutable textures can't be resized!");
k.width=c;k.height=e;this._descriptor.target===b.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}};l._setDataCubeMap=function(c=null){for(let e=b.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;e<=b.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(c,e)};l.setData=function(c){this._setData(c)};l._setData=function(c,e){var k;if(this._context&&this._context.gl){var p=this._context.gl;this._glName||(this._glName=p.createTexture());void 0===c&&(c=null);var d=this._descriptor;
null!=(k=e)?k:e=d.target;k=z(e);if(null===c&&(d.width=d.width||4,d.height=d.height||4,k)){var g;d.depth=null!=(g=d.depth)?g:1}g=this._context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);n._validateTexture(this._context,d);this._configurePixelStorage();var m=d.pixelFormat,u=d.internalFormat?d.internalFormat:this._deriveInternalFormat(m,d.dataType);if(x(c)){m=c.width;let y=c.height;c instanceof HTMLVideoElement&&(m=c.videoWidth,y=c.videoHeight);
d.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(e,u,d.hasMipmap,m,y,1);this._texImage(e,0,u,m,y,1,c);C.checkWebGLError(p);d.hasMipmap&&this.generateMipmap();void 0===d.width&&(d.width=m);void 0===d.height&&(d.height=y);k&&void 0===d.depth&&(d.depth=1)}else{const {width:y,height:A,depth:F}=d;null!=y&&null!=A||console.error("Width and height must be specified!");k&&null==F&&console.error("Depth must be specified!");d.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(e,u,d.hasMipmap,
y,A,F);p.DEPTH24_STENCIL8&&u===p.DEPTH_STENCIL&&(u=p.DEPTH24_STENCIL8);if(q(c)){const w=c.levels;c=r(e,y,A,F);k=Math.min(c-1,w.length-1);t(p)?p.texParameteri(d.target,p.TEXTURE_MAX_LEVEL,k):d.hasMipmap=d.hasMipmap&&c===w.length;const H=u;if(!(H in b.CompressedTextureFormat))throw Error("Attempting to use compressed data with an umcompressed format!");this._forEachMipmapLevel((E,v,G,I)=>{this._compressedTexImage(e,E,H,v,G,I,w[Math.min(E,w.length-1)])},k)}else D.isSome(c)?(this._texImage(e,0,u,y,A,
F,c),C.checkWebGLError(p),d.hasMipmap&&this.generateMipmap()):this._forEachMipmapLevel((w,H,E,v)=>{this._texImage(e,w,u,H,E,v,null);C.checkWebGLError(p)})}n._applySamplingMode(p,this._descriptor);n._applyWrapMode(p,this._descriptor);n._applyAnisotropicFilteringParameters(this._context,this._descriptor);C.checkWebGLError(p);this._context.bindTexture(g,n.TEXTURE_UNIT_FOR_UPDATES)}};l.updateData=function(c,e,k,p,d,g){g||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const m=this._context.gl,u=this._descriptor,{pixelFormat:y,internalFormat:A,dataType:F,isImmutable:w,target:H}=u;if(w&&!this._wasImmutablyAllocated)throw Error("Cannot update immutable texture before allocation!");const E=this._context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);(0>e||0>k||p>u.width||d>u.height||e+p>u.width||k+d>u.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();x(g)?m.texSubImage2D(H,c,e,k,y,F,g):q(g)?m.compressedTexSubImage2D(H,
c,e,k,p,d,A,g.levels[c]):m.texSubImage2D(H,c,e,k,p,d,y,F,g);this._context.bindTexture(E,n.TEXTURE_UNIT_FOR_UPDATES)};l.updateData3D=function(c,e,k,p,d,g,m,u){u||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const y=this._context.gl;if(!t(y))throw Error("3D textures are not supported in WebGL1");const A=this._descriptor,{pixelFormat:F,dataType:w,isImmutable:H,target:E,internalFormat:v}=A;if(H&&!this._wasImmutablyAllocated)throw Error("Cannot update immutable texture before allocation!");
z(E)||console.warn("Attempting to set 3D texture data on a non-3D texture");const G=this._context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);(0>e||0>k||0>p||d>A.width||g>A.height||m>A.depth||e+d>A.width||k+g>A.height||p+m>A.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();q(u)?(u=u.levels[c],y.compressedTexSubImage3D(E,c,e,k,p,d,g,m,v,u)):y.texSubImage3D(E,c,e,k,p,d,g,m,F,w,u);this._context.bindTexture(G,
n.TEXTURE_UNIT_FOR_UPDATES)};l.generateMipmap=function(){const c=this._descriptor;if(!c.hasMipmap){if(this._wasImmutablyAllocated)throw Error("Cannot add mipmaps to immutable texture after allocation");this._samplingModeDirty=c.hasMipmap=!0;n._validateTexture(this._context,c)}c.samplingMode===b.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,c.samplingMode=b.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):c.samplingMode===b.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,c.samplingMode=
b.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const e=this._context.bindTexture(this,n.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(n.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(c.target);this._context.bindTexture(e,n.TEXTURE_UNIT_FOR_UPDATES)};l.setSamplingMode=function(c){c!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=c,this._samplingModeDirty=!0)};l.setWrapMode=function(c){c!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=c,n._validateTexture(this._context,
this._descriptor),this._wrapModeDirty=!0)};l.applyChanges=function(){const c=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(n._applySamplingMode(c,e),this._samplingModeDirty=!1);this._wrapModeDirty&&(n._applyWrapMode(c,e),this._wrapModeDirty=!1)};l._deriveInternalFormat=function(c,e){if(this._context.type===B.ContextType.WEBGL1)return c;switch(e){case b.PixelType.FLOAT:switch(c){case b.PixelFormat.RGBA:return b.SizedPixelFormat.RGBA32F;case b.PixelFormat.RGB:return b.SizedPixelFormat.RGB32F;
default:throw Error("Unable to derive format");}case b.PixelType.UNSIGNED_BYTE:switch(c){case b.PixelFormat.RGBA:return b.SizedPixelFormat.RGBA8;case b.PixelFormat.RGB:return b.SizedPixelFormat.RGB8}default:return c}};l._configurePixelStorage=function(){const c=this._context.gl,{unpackAlignment:e,flipped:k,preMultiplyAlpha:p}=this._descriptor;c.pixelStorei(c.UNPACK_ALIGNMENT,e);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,k?1:0);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p?1:0)};l._texStorage=function(c,
e,k,p,d,g){const m=this._context.gl;if(!t(m))throw Error("Immutable textures are not supported in WebGL1");if(!(e in b.SizedPixelFormat))throw Error("Immutable textures must have a sized internal format");this._descriptor.isImmutable&&(k=k?r(c,p,d,g):1,z(c)?m.texStorage3D(c,k,e,p,d,g):m.texStorage2D(c,k,e,p,d),this._wasImmutablyAllocated=!0)};l._texImage=function(c,e,k,p,d,g,m){const u=this._context.gl;let y=null;const A=this._context.type===B.ContextType.WEBGL2,F=z(c),{isImmutable:w,pixelFormat:H,
dataType:E}=this._descriptor;A&&(y=u);!A&&x(m)?u.texImage2D(c,0,k,H,E,m):w?D.isSome(m)&&(F?y.texSubImage3D(c,e,0,0,0,p,d,g,H,E,m):u.texSubImage2D(c,e,0,0,p,d,H,E,m)):(m=D.unwrap(m),F?y.texImage3D(c,e,k,p,d,g,0,H,E,m):u.texImage2D(c,e,k,p,d,0,H,E,m))};l._compressedTexImage=function(c,e,k,p,d,g,m){const u=this._context.gl;let y=null;const A=z(c),F=this._descriptor.isImmutable;if(A){if(this._context.type!==B.ContextType.WEBGL2)throw Error("3D textures are not supported in WebGL1");y=u}F?D.isSome(m)&&
(A?y.compressedTexSubImage3D(c,e,0,0,0,p,d,g,k,m):u.compressedTexSubImage2D(c,e,0,0,p,d,k,m)):A?y.compressedTexImage3D(c,e,k,p,d,g,0,m):u.compressedTexImage2D(c,e,k,p,d,0,m)};l._forEachMipmapLevel=function(c,e=Infinity){let {width:k,height:p,depth:d,hasMipmap:g,target:m}=this._descriptor;const u=m===b.TextureType.TEXTURE_3D;for(let y=0;;++y){c(y,k,p,d);if(!g||1===k&&1===p&&(!u||1===d)||y>=e)break;k=Math.max(1,k>>1);p=Math.max(1,p>>1);u&&(d=Math.max(1,d>>1))}};n._validateTexture=function(c,e){(0>e.width||
0>e.height||0>e.depth)&&console.error("Negative dimension parameters are not allowed!");c=t(c.gl);const k=h.isPowerOfTwo(e.width)&&h.isPowerOfTwo(e.height);c||!e.isImmutable&&!z(e.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!");c||k||("number"===typeof e.wrapMode?e.wrapMode!==b.TextureWrapMode.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(e.wrapMode.s!==b.TextureWrapMode.CLAMP_TO_EDGE||e.wrapMode.t!==b.TextureWrapMode.CLAMP_TO_EDGE)&&
console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};n._applySamplingMode=function(c,e){let k=e.samplingMode,p=e.samplingMode;if(k===b.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||k===b.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)k=b.TextureSamplingMode.LINEAR,e.hasMipmap||(p=b.TextureSamplingMode.LINEAR);else if(k===b.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||k===b.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)k=
b.TextureSamplingMode.NEAREST,e.hasMipmap||(p=b.TextureSamplingMode.NEAREST);c.texParameteri(e.target,c.TEXTURE_MAG_FILTER,k);c.texParameteri(e.target,c.TEXTURE_MIN_FILTER,p)};n._applyWrapMode=function(c,e){"number"===typeof e.wrapMode?(c.texParameteri(e.target,c.TEXTURE_WRAP_S,e.wrapMode),c.texParameteri(e.target,c.TEXTURE_WRAP_T,e.wrapMode)):(c.texParameteri(e.target,c.TEXTURE_WRAP_S,e.wrapMode.s),c.texParameteri(e.target,c.TEXTURE_WRAP_T,e.wrapMode.t))};n._applyAnisotropicFilteringParameters=function(c,
e){var k;const p=c.capabilities.textureFilterAnisotropic;p&&c.gl.texParameterf(e.target,p.TEXTURE_MAX_ANISOTROPY,null!=(k=e.maxAnisotropy)?k:1)};a._createClass(n,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}}]);return n}();J.TEXTURE_UNIT_FOR_UPDATES=0;f.Texture=J;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(f){return window.WebGL2RenderingContext&&f instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe","./enums"],function(f,a,J,h){function D(b){return b[0].stride}function C(b){switch(b){case h.PixelFormat.ALPHA:case h.PixelFormat.LUMINANCE:case h.PixelFormat.RED:case h.PixelFormat.RED_INTEGER:case h.SizedPixelFormat.R8:case h.SizedPixelFormat.R8I:case h.SizedPixelFormat.R8UI:case h.SizedPixelFormat.R8_SNORM:case h.RenderbufferFormat.STENCIL_INDEX8:return 1;
case h.PixelFormat.LUMINANCE_ALPHA:case h.PixelFormat.RG:case h.PixelFormat.RG_INTEGER:case h.SizedPixelFormat.RGBA4:case h.SizedPixelFormat.R16F:case h.SizedPixelFormat.R16I:case h.SizedPixelFormat.R16UI:case h.SizedPixelFormat.RG8:case h.SizedPixelFormat.RG8I:case h.SizedPixelFormat.RG8UI:case h.SizedPixelFormat.RG8_SNORM:case h.SizedPixelFormat.RGB565:case h.SizedPixelFormat.RGB5_A1:case h.RenderbufferFormat.DEPTH_COMPONENT16:return 2;case h.PixelFormat.DEPTH_COMPONENT:case h.PixelFormat.RGB:case h.PixelFormat.RGB_INTEGER:case h.SizedPixelFormat.RGB8:case h.SizedPixelFormat.RGB8I:case h.SizedPixelFormat.RGB8UI:case h.SizedPixelFormat.RGB8_SNORM:case h.SizedPixelFormat.SRGB8:case h.RenderbufferFormat.DEPTH_COMPONENT24:return 3;
case h.PixelFormat.DEPTH_STENCIL:case h.PixelFormat.RGBA:case h.PixelFormat.RGBA_INTEGER:case h.SizedPixelFormat.RGBA8:case h.SizedPixelFormat.R32F:case h.SizedPixelFormat.R11F_G11F_B10F:case h.SizedPixelFormat.RG16F:case h.SizedPixelFormat.R32I:case h.SizedPixelFormat.R32UI:case h.SizedPixelFormat.RG16I:case h.SizedPixelFormat.RG16UI:case h.SizedPixelFormat.RGBA8I:case h.SizedPixelFormat.RGBA8UI:case h.SizedPixelFormat.RGBA8_SNORM:case h.SizedPixelFormat.SRGB8_ALPHA8:case h.SizedPixelFormat.RGB9_E5:case h.SizedPixelFormat.RGB10_A2UI:case h.SizedPixelFormat.RGB10_A2:case h.RenderbufferFormat.DEPTH_STENCIL:case h.RenderbufferFormat.DEPTH_COMPONENT32F:case h.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case h.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case h.SizedPixelFormat.RGB16F:case h.SizedPixelFormat.RGB16I:case h.SizedPixelFormat.RGB16UI:return 6;case h.SizedPixelFormat.RG32F:case h.SizedPixelFormat.RG32I:case h.SizedPixelFormat.RG32UI:case h.SizedPixelFormat.RGBA16F:case h.SizedPixelFormat.RGBA16I:case h.SizedPixelFormat.RGBA16UI:return 8;case h.SizedPixelFormat.RGB32F:case h.SizedPixelFormat.RGB32I:case h.SizedPixelFormat.RGB32UI:return 12;case h.SizedPixelFormat.RGBA32F:case h.SizedPixelFormat.RGBA32I:case h.SizedPixelFormat.RGBA32UI:return 16;
case h.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case h.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case h.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case h.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case h.CompressedTextureFormat.COMPRESSED_R11_EAC:case h.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case h.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case h.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case h.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case h.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case h.CompressedTextureFormat.COMPRESSED_RG11_EAC:case h.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case h.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case h.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}function B(b){if(J.isNone(b))return 0;if("descriptor"in b)return b.glName?B(b.descriptor):0;const t=b.internalFormat||"pixelFormat"in b&&b.pixelFormat;if(!t)return 0;const q="hasMipmap"in b&&b.hasMipmap?1.3:1;b=b.width*b.height;return C(t)*b*q}f.bindVertexBufferLayout=
function(b,t,q,x,z=0){const r=b.gl,n=b.capabilities.instancing;b.bindBuffer(q);for(const l of x)if(b=t.get(l.name),void 0===b&&console.error(`There is no location for vertex attribute '${l.name}' defined.`),q=z*l.stride,4>=l.count)r.vertexAttribPointer(b,l.count,l.type,l.normalized,l.stride,l.offset+q),r.enableVertexAttribArray(b),0<l.divisor&&n&&n.vertexAttribDivisor(b,l.divisor);else if(9===l.count)for(x=0;3>x;x++)r.vertexAttribPointer(b+x,3,l.type,l.normalized,l.stride,l.offset+12*x+q),r.enableVertexAttribArray(b+
x),0<l.divisor&&n&&n.vertexAttribDivisor(b+x,l.divisor);else if(16===l.count)for(x=0;4>x;x++)r.vertexAttribPointer(b+x,4,l.type,l.normalized,l.stride,l.offset+16*x+q),r.enableVertexAttribArray(b+x),0<l.divisor&&n&&n.vertexAttribDivisor(b+x,l.divisor);else console.error("Unsupported vertex attribute element count: "+l.count)};f.getBytesPerElementFormat=C;f.getErrorString=function(b){b=b.gl;switch(b.getError()){case b.NO_ERROR:return null;case b.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";
case b.INVALID_VALUE:return"A numeric argument is out of range";case b.INVALID_OPERATION:return"The specified command is not allowed for the current state";case b.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case b.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case b.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"};f.getGpuMemoryUsage=B;f.getStride=D;f.unbindVertexBufferLayout=function(b,t,q,x){const z=
b.gl,r=b.capabilities.instancing;b.bindBuffer(q);for(const n of x)if(q=t.get(n.name),4>=n.count)z.disableVertexAttribArray(q),n.divisor&&0<n.divisor&&r&&r.vertexAttribDivisor(q,0);else if(9===n.count)for(x=0;3>x;x++)z.disableVertexAttribArray(q+x),n.divisor&&0<n.divisor&&r&&r.vertexAttribDivisor(q+x,0);else if(16===n.count)for(x=0;4>x;x++)z.disableVertexAttribArray(q+x),n.divisor&&0<n.divisor&&r&&r.vertexAttribDivisor(q+x,0);else console.error("Unsupported vertex attribute element count: "+n.count);
b.unbindBuffer(h.BufferType.ARRAY_BUFFER)};f.vertexCount=function(b,t){return b.vertexBuffers[t].size/D(b.layout[t])};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/Program":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/has ../../core/maybe ./checkWebGLError ./context-util ./enums ./ShaderTranspiler".split(" "),function(f,a,J,h,D,C,B,b,t){function q(n,l,c){n=n.gl;const e=n.createShader(l);
n.shaderSource(e,c);n.compileShader(e);C.webglValidateShadersEnabled()&&!n.getShaderParameter(e,n.COMPILE_STATUS)&&(console.error("Compile error in ".concat(l===b.ShaderType.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(n.getShaderInfoLog(e)),console.error(x(c)));r.enabled&&(r.compiledLOC+=c.match(/\n/g).length+1);return e}function x(n){let l=2;return n.replace(/\n/g,()=>{var c=l++;c=1E3<=c?c.toString():("  "+c).slice(-3);return"\n"+c+":"})}function z(n,l,c){const e=n.get(l);return e?
J.update(e,c):(n.set(l,Array.from(c)),!0)}h=function(){function n(c,e,k,p,d=new Map){this._context=c;this._locations=p;this._uniformBlockBindings=d;this._refCount=1;this._compiled=!1;this._nameToUniformLocation={};this._nameToUniform1={};this._nameToUniform1v=new Map;this._nameToUniform2=new Map;this._nameToUniform3=new Map;this._nameToUniform4=new Map;this._nameToUniformMatrix3=new Map;this._nameToUniformMatrix4=new Map;c||console.error("RenderingContext isn't initialized!");0===e.length&&console.error("Shaders source should not be empty!");
this._context.type===B.ContextType.WEBGL2&&(e=t.transpileShader(e,b.ShaderType.VERTEX_SHADER),k=t.transpileShader(k,b.ShaderType.FRAGMENT_SHADER));this._vShader=q(this._context,b.ShaderType.VERTEX_SHADER,e);this._fShader=q(this._context,b.ShaderType.FRAGMENT_SHADER,k);this._vShader&&this._fShader||console.error("Error loading shaders!");this._context.instanceCounter.increment(b.ResourceType.Shader,this);C.webglValidateShadersEnabled()&&(this.vertexShader=e,this.fragmentShader=k)}var l=n.prototype;
l.dispose=function(){if(!(0<--this._refCount)){var c=this._context.gl;this._vShader&&(c.deleteShader(this._vShader),this._vShader=null,this._context.instanceCounter.decrement(b.ResourceType.Shader,this));this._fShader&&(c.deleteShader(this._fShader),this._fShader=null);this._glName&&(c.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(b.ResourceType.Program,this))}};l.ref=function(){++this._refCount};l._getUniformLocation=function(c){void 0===this._nameToUniformLocation[c]&&
(++r.numUniforms,this._nameToUniformLocation[c]=this._context.gl.getUniformLocation(this.glName,c));return this._nameToUniformLocation[c]};l.hasUniform=function(c){return null!==this._getUniformLocation(c)};l.setUniform1i=function(c,e){const k=this._nameToUniform1[c];if(void 0===k||e!==k)this._context.gl.uniform1i(this._getUniformLocation(c),e),this._nameToUniform1[c]=e};l.setUniform1iv=function(c,e){z(this._nameToUniform1v,c,e)&&this._context.gl.uniform1iv(this._getUniformLocation(c),e)};l.setUniform2iv=
function(c,e){z(this._nameToUniform2,c,e)&&this._context.gl.uniform2iv(this._getUniformLocation(c),e)};l.setUniform3iv=function(c,e){z(this._nameToUniform3,c,e)&&this._context.gl.uniform3iv(this._getUniformLocation(c),e)};l.setUniform4iv=function(c,e){z(this._nameToUniform4,c,e)&&this._context.gl.uniform4iv(this._getUniformLocation(c),e)};l.setUniform1f=function(c,e){const k=this._nameToUniform1[c];if(void 0===k||e!==k)this._context.gl.uniform1f(this._getUniformLocation(c),e),this._nameToUniform1[c]=
e};l.setUniform1fv=function(c,e){z(this._nameToUniform1v,c,e)&&this._context.gl.uniform1fv(this._getUniformLocation(c),e)};l.setUniform2f=function(c,e,k){const p=this._nameToUniform2.get(c);if(void 0===p)this._context.gl.uniform2f(this._getUniformLocation(c),e,k),this._nameToUniform2.set(c,[e,k]);else if(e!==p[0]||k!==p[1])this._context.gl.uniform2f(this._getUniformLocation(c),e,k),p[0]=e,p[1]=k};l.setUniform2fv=function(c,e){z(this._nameToUniform2,c,e)&&this._context.gl.uniform2fv(this._getUniformLocation(c),
e)};l.setUniform3f=function(c,e,k,p){const d=this._nameToUniform3.get(c);if(void 0===d)this._context.gl.uniform3f(this._getUniformLocation(c),e,k,p),this._nameToUniform3[c]=[e,k,p];else if(e!==d[0]||k!==d[1]||p!==d[2])this._context.gl.uniform3f(this._getUniformLocation(c),e,k,p),d[0]=e,d[1]=k,d[2]=p};l.setUniform3fv=function(c,e){z(this._nameToUniform3,c,e)&&this._context.gl.uniform3fv(this._getUniformLocation(c),e)};l.setUniform4f=function(c,e,k,p,d){const g=this._nameToUniform4.get(c);if(void 0===
g)this._context.gl.uniform4f(this._getUniformLocation(c),e,k,p,d),this._nameToUniform4.set(c,[e,k,p,d]);else if(void 0===g||e!==g[0]||k!==g[1]||p!==g[2]||d!==g[3])this._context.gl.uniform4f(this._getUniformLocation(c),e,k,p,d),g[0]=e,g[1]=k,g[2]=p,g[3]=d};l.setUniform4fv=function(c,e){z(this._nameToUniform4,c,e)&&this._context.gl.uniform4fv(this._getUniformLocation(c),e)};l.setUniformMatrix3fv=function(c,e,k=!1){z(this._nameToUniformMatrix3,c,e)&&this._context.gl.uniformMatrix3fv(this._getUniformLocation(c),
k,e)};l.setUniformMatrix4fv=function(c,e,k=!1){z(this._nameToUniformMatrix4,c,e)&&this._context.gl.uniformMatrix4fv(this._getUniformLocation(c),k,e)};l.stop=function(){};a._createClass(n,[{key:"glName",get:function(){if(D.isSome(this._glName))return this._glName;if(D.isNone(this._vShader))return null;const c=this._context.gl,e=c.createProgram();c.attachShader(e,this._vShader);c.attachShader(e,this._fShader);this._locations.forEach((k,p)=>c.bindAttribLocation(e,k,p));c.linkProgram(e);C.webglValidateShadersEnabled()&&
!c.getProgramParameter(e,c.LINK_STATUS)&&console.error("Could not link shader\n"+`validated: ${c.getProgramParameter(e,c.VALIDATE_STATUS)}`+`, gl error ${c.getError()}`+`, vertex: ${c.getShaderParameter(this._vShader,c.COMPILE_STATUS)}`+`, fragment: ${c.getShaderParameter(this._fShader,c.COMPILE_STATUS)}`+`, info log: ${c.getProgramInfoLog(e)}`+`, vertex source: ${this.vertexShader}`+`, fragment source: ${this.fragmentShader}`);if(this._context.type===B.ContextType.WEBGL2)for(const [k,p]of this._uniformBlockBindings){const d=
c.getUniformBlockIndex(e,k);4294967295>d&&c.uniformBlockBinding(e,d,p)}this._glName=e;this._context.instanceCounter.increment(b.ResourceType.Program,this);return e}},{key:"hasGLName",get:function(){return D.isSome(this._glName)}},{key:"isCompiled",get:function(){if(this._compiled)return!0;const c=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==c?this._compiled=!0:this._compiled=!!this._context.gl.getProgramParameter(this.glName,c.COMPLETION_STATUS_KHR)}}]);return n}();const r=
{compiledLOC:0,numUniforms:0,enabled:!1};f.Program=h;f.test=r;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ShaderTranspiler":function(){define("exports ../../core/has ../../core/maybe ./enums ./reservedWordsGLSL3 ./testUtils".split(" "),function(f,a,J,h,D,C){function B(){function d(K){K.length&&M.push({type:e[E],data:K,position:N,line:L,column:R})}function g(){I=I.length?[]:I;if("/"===G&&"*"===v)return N=H+w-1,E=0,G=v,w+1;if("/"===G&&
"/"===v)return N=H+w-1,E=1,G=v,w+1;if("#"===v)return E=2,N=H+w,w;if(/\s/.test(v))return E=9,N=H+w,w;S=/\d/.test(v);T=/[^\w_]/.test(v);N=H+w;E=S?4:T?3:9999;return w}function m(){if(("\r"===v||"\n"===v)&&"\\"!==G)return d(I.join("")),E=999,w;I.push(v);G=v;return w+1}function u(){if("."===G&&/\d/.test(v))return E=5,w;if("/"===G&&"*"===v)return E=0,w;if("/"===G&&"/"===v)return E=1,w;if("."===v&&I.length){for(;y(I););E=5;return w}if(";"===v||")"===v||"("===v){if(I.length)for(;y(I););d(v);E=999;return w+
1}var K=2===I.length&&"\x3d"!==v;if(/[\w_\d\s]/.test(v)||K){for(;y(I););E=999;return w}I.push(v);G=v;return w+1}function y(K){var P=0;do{var U=l.indexOf(K.slice(0,K.length+P).join(""));var Q=l[U];if(-1===U){if(0<P--+K.length)continue;Q=K.slice(0,1).join("")}d(Q);N+=Q.length;I=I.slice(Q.length);return I.length}while(1)}function A(){if("."===v||/[eE]/.test(v))return I.push(v),E=5,G=v,w+1;if("x"===v&&1===I.length&&"0"===I[0])return E=11,I.push(v),G=v,w+1;if(/[^\d]/.test(v))return d(I.join("")),E=999,
w;I.push(v);G=v;return w+1}function F(){"f"===v&&(I.push(v),G=v,w+=1);if(/[eE]/.test(v)||"-"===v&&/[eE]/.test(G))return I.push(v),G=v,w+1;if(/[^\d]/.test(v))return d(I.join("")),E=999,w;I.push(v);G=v;return w+1}var w=0,H=0,E=999,v,G,I=[],M=[],L=1,R=0,N=0,S=!1,T=!1,O="",V;return function(K){M=[];if(null!==K){K=K.replace?K.replace(/\r\n/g,"\n"):K;w=0;O+=K;for(V=O.length;v=O[w],w<V;){K=w;switch(E){case 0:"/"===v&&"*"===G?(I.push(v),d(I.join("")),E=999):(I.push(v),G=v);w+=1;break;case 1:w=m();break;case 2:w=
m();break;case 3:w=u();break;case 4:w=A();break;case 11:/[^a-fA-F0-9]/.test(v)?(d(I.join("")),E=999):(I.push(v),G=v,w+=1);break;case 5:w=F();break;case 9999:if(/[^\d\w_]/.test(v)){var P=I.join("");E=-1<n.indexOf(P)?8:-1<c.indexOf(P)?7:6;d(I.join(""));E=999}else I.push(v),G=v,w+=1;break;case 9:/[^\s]/g.test(v)?(d(I.join("")),E=999):(I.push(v),G=v,w+=1);break;case 999:w=g()}if(K!==w)switch(O[K]){case "\n":R=0;++L;break;default:++R}}H+=w;O=O.slice(w);return M}I.length&&d(I.join(""));E=10;d("(eof)");
return M}}function b(d){return d.map(g=>"eof"!==g.type?g.data:"").join("")}function t(d,g="100",m="300 es"){const u=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const y of d)if("preprocessor"===y.type){const A=u.exec(y.data);if(A){d=A[1].replace(/\s\s+/g," ");if(d===m)return d;if(d===g)return y.data="#version "+m,g;throw Error("unknown glsl version: "+d);}}d.splice(0,0,{type:"preprocessor",data:"#version "+m},{type:"whitespace",data:"\n"});return null}function q(d,g,m,u){u=u||m;for(const y of d)if("ident"===
y.type&&y.data===m)return u in g?g[u]++:g[u]=0,q(d,g,u+"_"+g[u],u);return m}function x(d,g,m="afterVersion"){const u={data:"\n",type:"whitespace"},y=F=>F<d.length?/[^\r\n]$/.test(d[F].data):!1;let A=function(F){let w=-1,H=0,E=-1;for(let G=0;G<F.length;G++){var v=F[G];"preprocessor"===v.type&&(v.data.match(/#(if|ifdef|ifndef)\s+.+/)?++H:v.data.match(/#endif\s*.*/)&&--H);("afterVersion"===m||"afterPrecision"===m)&&"preprocessor"===v.type&&/^#version/.test(v.data)&&(E=Math.max(E,G));if("afterPrecision"===
m&&"keyword"===v.type&&"precision"===v.data){a:{for(v=G;v<F.length;v++){const I=F[v];if("operator"===I.type&&";"===I.data)break a}v=null}if(null===v)throw Error("precision statement not followed by any semicolons!");E=Math.max(E,v)}w<E&&0===H&&(w=G)}return w+1}(d);y(A-1)&&d.splice(A++,0,u);for(const F of g)d.splice(A++,0,F);y(A-1)&&y(A)&&d.splice(A,0,u)}function z(d,g,m,u="lowp"){x(d,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:u},{type:"whitespace",data:" "},{type:"keyword",
data:m},{type:"whitespace",data:" "},{type:"ident",data:g},{type:"operator",data:";"}],"afterPrecision")}function r(d,g,m,u,y="lowp"){x(d,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:u.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",
data:" "},{type:"keyword",data:m},{type:"whitespace",data:" "},{type:"ident",data:g},{type:"operator",data:";"}],"afterPrecision")}a={exports:{}};(function(d){(function(g){g=g();void 0!==g&&(d.exports=g)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})})(a);
const n=a.exports;a={exports:{}};(function(d){(function(g){g=g();void 0!==g&&(d.exports=g)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})})(a);const l=a.exports;a={exports:{}};(function(d){(function(g){g=g();void 0!==g&&(d.exports=g)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})})(a);
const c=a.exports;var e="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const k=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"],p=new Map;f.transpileShader=function(d,g){var m=C.shaderTranspiler.enableCache?p.get(d):null;if(J.isSome(m))return m;m=B();var u=[];u=u.concat(m(d));m=u=u.concat(m(null));if("300 es"===t(m,"100","300 es"))return d;var y=u=null;const A={},F={};for(let v=
0;v<m.length;++v){const G=m[v];switch(G.type){case "keyword":g===h.ShaderType.VERTEX_SHADER&&"attribute"===G.data?G.data="in":"varying"===G.data&&(G.data=g===h.ShaderType.VERTEX_SHADER?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(G.data.trim())&&(G.data=G.data.replace(/(2D|Cube|EXT)/g,""));g===h.ShaderType.FRAGMENT_SHADER&&"gl_FragColor"===G.data&&(u||(u=q(m,A,"fragColor"),z(m,u,"vec4")),G.data=u);if(g===h.ShaderType.FRAGMENT_SHADER&&"gl_FragData"===G.data){{var w=
void 0;let I=void 0;var H=m;var E=v+1;let M=-1;for(;E<H.length;E++){const L=H[E];if("operator"===L.type&&("["===L.data&&(I=E),"]"===L.data)){w=E;break}"integer"===L.type&&(M=parseInt(L.data,10))}I&&w&&H.splice(I,w-I+1);H=M}w=q(m,A,"fragData");r(m,w,"vec4",H,"mediump");G.data=w}else g===h.ShaderType.FRAGMENT_SHADER&&"gl_FragDepthEXT"===G.data&&(y||(y=q(m,A,"gl_FragDepth")),G.data=y);break;case "ident":if(D.includes(G.data)){if(H=g===h.ShaderType.VERTEX_SHADER)a:{for(H=v-1;0<=H;H--)if(w=m[H],"whitespace"!==
w.type&&"block-comment"!==w.type)if("keyword"===w.type){if("attribute"===w.data||"in"===w.data){H=!0;break a}}else break;H=!1}if(H)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");G.data in F||(F[G.data]=q(m,A,G.data));G.data=F[G.data]}}}for(g=m.length-1;0<=g;--g)u=m[g],"preprocessor"===u.type&&((y=u.data.match(/#extension\s+(.*):/))&&y[1]&&k.includes(y[1].trim())&&(y=m[g+1],m.splice(g,y&&"whitespace"===y.type?2:1)),(y=u.data.match(/#ifdef\s+(.*)/))&&y[1]&&
k.includes(y[1].trim())&&(u.data="#if 1"),(y=u.data.match(/#ifndef\s+(.*)/))&&y[1]&&k.includes(y[1].trim())&&(u.data="#if 0"));m=b(m);C.shaderTranspiler.enableCache&&p.set(d,m);return m};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/testUtils":function(){define(["exports"],function(f){f.shaderTranspiler={enableCache:!1};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ProgramCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/NestedMap","./Program"],function(f,a,J,h,D){let C=function(){function B(t){this._rctx=t;this._store=new h.NestedMap}var b=B.prototype;b.dispose=function(){this._store.forEach(t=>
t.forEach(q=>q.dispose()));this._store.clear()};b.acquire=function(t,q,x,z){const r=this._store.get(t,q);if(J.isSome(r))return r.ref(),r;x=new D.Program(this._rctx,t,q,x,z);x.ref();this._store.set(t,q,x);return x};a._createClass(B,[{key:"test",get:function(){let t=0;this._store.forEach(q=>q.forEach(x=>t+=x.hasGLName?2:1));return{cachedWebGLObjects:t}}}]);return B}();f.ProgramCache=C;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/NestedMap":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers"],function(f,a){let J=function(){function h(){this._outer=new Map}var D=h.prototype;D.clear=function(){this._outer.clear()};D.get=function(C,B){var b;return null==(b=this._outer.get(C))?void 0:b.get(B)};D.set=function(C,B,b){const t=this._outer.get(C);t?t.set(B,b):this._outer.set(C,new Map([[B,b]]))};D.delete=function(C,B){const b=this._outer.get(C);b&&(b.delete(B),0===b.size&&this._outer.delete(C))};D.forEach=function(C){this._outer.forEach((B,b)=>C(B,b))};a._createClass(h,
[{key:"empty",get:function(){return 0===this._outer.size}}]);return h}();f.NestedMap=J;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(f){let a=function(){function J(D){this.readFile=D}var h=J.prototype;h.resolveIncludes=function(D){return this._resolve(D)};h._resolve=function(D,C=new Map){if(C.has(D))return C.get(D);const B=this._read(D);if(!B)throw Error(`cannot find shader file ${D}`);
const b=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let t=b.exec(B);const q=[];for(;null!=t;)q.push({path:t[1],start:t.index,length:t[0].length}),t=b.exec(B);let x=0,z="";q.forEach(r=>{z+=B.slice(x,r.start);z+=C.has(r.path)?"":this._resolve(r.path,C);x=r.start+r.length});z+=B.slice(x);C.set(D,z);return z};h._read=function(D){return this.readFile(D)};return J}();f.ShaderCompiler=a;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/VertexArrayObject":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/maybe ./enums ./Util".split(" "),
function(f,a,J,h,D,C){const B=J.getLogger("esri.views.webgl.VertexArrayObject");J=function(){function b(q,x,z,r,n=null){this._context=q;this._locations=x;this._layout=z;this._buffers=r;this._indexBuffer=n;this._glName=null;this._initialized=!1;q.instanceCounter.increment(D.ResourceType.VertexArrayObject,this)}var t=b.prototype;t.dispose=function(q=!0){if(this._context){if(this._glName){var x,z;const r=null==(x=this._context)?void 0:null==(z=x.capabilities)?void 0:z.vao;r?(r.deleteVertexArray(this._glName),
this._glName=null):B.warn("Leaked WebGL VAO")}this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(q){for(const r in this._buffers)this._buffers[r].dispose(),delete this._buffers[r];this._indexBuffer=h.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(D.ResourceType.VertexArrayObject,this);this._context=null}else(this._glName||q&&0<Object.getOwnPropertyNames(this._buffers).length)&&B.warn("Leaked WebGL VAO")};t.initialize=function(){if(!this._initialized){var q=
this._context.capabilities.vao;if(q){const x=q.createVertexArray();q.bindVertexArray(x);this._bindLayout();q.bindVertexArray(null);this._glName=x}this._initialized=!0}};t.bind=function(){this.initialize();const q=this._context.capabilities.vao;q?q.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};t._bindLayout=function(){const {_buffers:q,_layout:x,_indexBuffer:z}=this;q||B.error("Vertex buffer dictionary is empty!");const r=this._context.gl;for(const n in q){const l=
q[n];l||B.error("Vertex buffer is uninitialized!");const c=x[n];c||B.error("Vertex element descriptor is empty!");C.bindVertexBufferLayout(this._context,this._locations,l,c)}h.isSome(z)&&(this._context.capabilities.vao?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,z.glName):this._context.bindBuffer(z))};t.unbind=function(){this.initialize();const q=this._context.capabilities.vao;q?q.bindVertexArray(null):this._unbindLayout()};t._unbindLayout=function(){const {_buffers:q,_layout:x}=this;q||B.error("Vertex buffer dictionary is empty!");
for(const z in q){const r=q[z];r||B.error("Vertex buffer is uninitialized!");C.unbindVertexBufferLayout(this._context,this._locations,r,x[z])}h.isSome(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)};a._createClass(b,[{key:"glName",get:function(){return this._glName}},{key:"context",get:function(){return this._context}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((q,
x)=>q+this._buffers[x].size,h.isSome(this._indexBuffer)?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return b}();f.VertexArrayObject=J;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(f){f.glslifyDefineMap=function(a){let J="";for(const C in a){var h=a[C];if("boolean"===typeof h)h&&(J+=`#define ${C}\n`);
else if("number"===typeof h)J+=`#define ${C} ${h.toFixed()}\n`;else if("object"===typeof h){{const {options:B,value:b}=h;var D="number"===typeof B[b]}if(D){const {value:B,options:b,namespace:t}=h;h=t?`${t}_`:"";for(const q in b)J+=`#define ${h}${q} ${b[q].toFixed()}\n`;J+=`#define ${C} ${h}${B}\n`}else{D=h.options;let B=0;for(const b in D)J+=`#define ${D[b]} ${(B++).toFixed()}\n`;J+=`#define ${C} ${D[h.value]}\n`}}}return J};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/webgl/ProgramTemplate":function(){define(["exports","./Program"],function(f,a){f.createProgram=function(J,h,D=""){return new a.Program(J,D+h.shaders.vertexShader,D+h.shaders.fragmentShader,h.attributes)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("exports ../webgl/BufferObject ../webgl/FramebufferObject ../webgl/Program ../webgl/ProgramCache ../webgl/Renderbuffer ../webgl/ShaderCompiler ../webgl/Texture ../webgl/VertexArrayObject ../webgl/programUtils ../webgl/ProgramTemplate ../webgl/context-util".split(" "),function(f,a,J,h,D,C,B,b,t,q,x,z){f.BufferObject=a.BufferObject;f.FramebufferObject=J.FramebufferObject;f.Program=h.Program;f.ProgramCache=D.ProgramCache;f.Renderbuffer=C.Renderbuffer;f.ShaderCompiler=B.ShaderCompiler;f.Texture=
b.Texture;f.VertexArrayObject=t.VertexArrayObject;f.glslifyDefineMap=q.glslifyDefineMap;f.createProgram=x.createProgram;f.createContextOrErrorHTML=z.createContextOrErrorHTML;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});