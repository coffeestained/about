// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ./clock ./deprecate ./Error ./events ./Logger ./maybe".split(" "),function(g,m,N,O,w,J,K,k){function x(){x=m._asyncToGenerator(function*(a,b){const c=a.slice(),f=yield Promise.all(a.map((d,e)=>b(d,e)));return c.filter((d,e)=>f[e])});return x.apply(this,arguments)}function n(a="Aborted"){return new w("AbortError",a)}function y(a,b="Aborted"){if(L(a))throw n(b);}function u(a){return k.isSome(a)?"aborted"in a?a:a.signal:a}function L(a){a=u(a);return k.isSome(a)&&
a.aborted}function r(a,b){a=u(a);if(!k.isNone(a))if(a.aborted)b();else return J.once(a,"abort",()=>b())}function t(a){return a&&"AbortError"===a.name}function z(){z=m._asyncToGenerator(function*(a){try{return yield a}catch(b){if(!t(b))throw b;}});return z.apply(this,arguments)}function A(){A=m._asyncToGenerator(function*(a,b=K.getLogger("esri")){try{return yield a}catch(c){t(c)||b.error(c)}});return A.apply(this,arguments)}function B(){let a=null;const b=new Promise((c,f)=>{a={promise:void 0,resolve:c,
reject:f}});a.promise=b;return a}function C(a){return D.apply(this,arguments)}function D(){D=m._asyncToGenerator(function*(a){if(a){if("function"!==typeof a.forEach){const b=Object.keys(a),c=b.map(e=>a[e]),f=yield C(c),d={};b.map((e,h)=>d[e]=f[h]);return d}return new Promise(b=>{const c=[];let f=a.length;0===f&&b(c);a.forEach(d=>{const e={promise:d||Promise.resolve(d)};c.push(e);e.promise.then(h=>{e.value=h}).catch(h=>{e.error=h}).then(()=>{--f;0===f&&b(c)})})})}});return D.apply(this,arguments)}
function E(){E=m._asyncToGenerator(function*(a){return(yield C(a)).filter(b=>!!b.value).map(b=>b.value)});return E.apply(this,arguments)}function F(a,b,c){const f=new AbortController;r(c,()=>f.abort());return new Promise((d,e)=>{let h=setTimeout(()=>{h=0;d(b)},a);r(f,()=>{h&&(clearTimeout(h),e(n()))})})}function M(a){return a&&"function"===typeof a.then}function G(a){return M(a)?a:Promise.resolve(a)}function H(){H=m._asyncToGenerator(function*(a){yield Promise.resolve();y(a)});return H.apply(this,
arguments)}g.after=F;g.always=function(a,b){return a.then(b,b)};g.create=function(a){O.deprecatedFunction(K.getLogger("esri.core.promiseUtils"),"create",{moduleName:"esri.core.promiseUtils",replacement:"new Promise()",version:"4.24"});return new Promise((b,c)=>{try{a(b,c)}catch(f){Promise.resolve().then(()=>c(f))}})};g.createAbortError=n;g.createDeferred=B;g.createResolver=function(){let a,b;const c=new Promise((d,e)=>{a=d;b=e}),f=d=>{a(d)};f.resolve=d=>a(d);f.reject=d=>b(d);f.timeout=(d,e)=>N.clock.setTimeout(()=>
f.reject(e),d);f.promise=c;return f};g.createTask=function(a,b){let c=new AbortController,f;a=a(c.signal);let d={promise:a,finished:!1,abort:()=>{c&&(c.abort(),c=null)}};const e=()=>{d&&(d.finished=!0,d=null);k.isSome(f)&&(f.remove(),f=null);c=null};a.then(e,e);f=r(b,()=>{k.isSome(d)&&d.abort()});return d};g.debounce=function(a,b=-1){let c,f,d,e,h=null;const q=(...l)=>{if(c){f=l;e&&e.reject(n());e=B();l=k.assumeNonNull(e.promise);if(h){var v=h;h=null;v.abort()}return l}d=e||B();e=null;if(0<b){const p=
new AbortController,P=c=G(a(...l,p.signal));F(b).then(()=>{c===P&&(e?p.abort():h=p)})}else c=1,c=G(a(...l));l=()=>{const p=f;f=d=c=h=null;null!=p&&q(...p)};v=c;const I=d;v.then(l,l);v.then(I.resolve,I.reject);return k.assumeNonNull(I.promise)};return q};g.eachAlways=C;g.eachAlwaysValues=function(a){return E.apply(this,arguments)};g.filter=function(a,b){return x.apply(this,arguments)};g.ignoreAbortErrors=function(a){return z.apply(this,arguments)};g.isAbortError=t;g.isAborted=L;g.isPromiseLike=M;g.logOnError=
function(a){return A.apply(this,arguments)};g.onAbort=r;g.onAbortOrThrow=function(a,b){a=u(a);if(!k.isNone(a))return y(a),J.once(a,"abort",()=>b(n()))};g.throwIfAbortError=function(a){if(t(a))throw a;};g.throwIfAborted=y;g.throwIfNotAbortError=function(a){if(!t(a))throw a;};g.timeout=function(a,b,c,f){const d=c&&"abort"in c?c:null;null!=f||d||(f=c);let e=setTimeout(()=>{e=0;d&&d.abort()},b);const h=()=>f||new w("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");return a.then(q=>
{if(0===e)throw h();clearTimeout(e);return q},q=>{clearTimeout(e);throw 0===e?h():q;})};g.waitTick=function(a){return H.apply(this,arguments)};g.when=G;g.whenOrAbort=function(a,b){const c=u(b);return k.isNone(c)?a:new Promise((f,d)=>{let e=r(b,()=>d(n()));const h=()=>e=k.removeMaybe(e);a.then(h,h);a.then(f,d)})};g.whenOrTimeout=function(a,b,c){return Promise.race([a,F(b).then(()=>{throw new w("timeout",`Did not resolve within ${b} milliseconds (${null!=c?c:"timeout"})`);})])};Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});