// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils"],function(C,F){let l=null;C.deduplicate=function(f,b,a){var g,c=f.byteLength/(4*b),r=new Uint32Array(f,0,c*b);f=new Uint32Array(c);var m=null!=(g=null==a?void 0:a.minReduction)?g:0;const A=(g=(null==a?void 0:a.originalIndices)||null)?g.length:0;var d=(null==a?void 0:a.componentOffsets)||null;a=0;if(d)for(var n=0;n<d.length-1;n++){var u=d[n+1]-d[n];u>a&&(a=u)}else a=c;var t=Math.floor(1.1*a)+1;if(null==l||l.length<2*t)l=new Uint32Array(F.nextHighestPowerOfTwo(2*
t));for(a=0;a<2*t;a++)l[a]=0;a=0;u=(n=!!d&&!!g)?A:c;var w=n?new Uint32Array(A):null,x=0!==m?Math.ceil(7.84*1.96/(m*m)*m*(1-m)):u,p=1,k=d?d[1]:u;for(var e=0;e<u;e++){if(e===x){var v=1-a/e;if(v+1.96*Math.sqrt(v*(1-v)/e)<m)return null;x*=2}if(e===k){for(k=0;k<2*t;k++)l[k]=0;if(g)for(k=d[p-1];k<d[p];k++)w[k]=f[g[k]];k=d[++p]}v=n?g[e]:e;const D=v*b;var q=0;for(var h=0;h<b;h++)q=r[D+h]+q|0,q=q+(q<<11)+(q>>>2)|0;q>>>=0;h=q%t;let B=a;for(;0!==l[2*h+1];){if(l[2*h]===q){const E=l[2*h+1]-1;var y=E*b;a:{for(let z=
0;z<b;z++)if(r[D+z]!==r[y+z]){y=!1;break a}y=!0}if(y){B=f[E];break}}h++;h>=t&&(h-=t)}B===a&&(l[2*h]=q,l[2*h+1]=v+1,a++);f[v]=B}if(0!==m&&1-a/c<m)return null;if(n){for(c=d[p-1];c<w.length;c++)w[c]=f[g[c]];f=w}c=new Uint32Array(b*a);a=0;for(p=0;p<u;p++)if(f[p]===a){m=r;d=(n?g[p]:p)*b;t=c;w=a*b;x=b;for(e=0;e<x;e++)t[w+e]=m[d+e];a++}if(g&&!n){b=new Uint32Array(A);for(r=0;r<b.length;r++)b[r]=f[g[r]];f=b}return{buffer:c.buffer,indices:f,uniqueCount:a}};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});