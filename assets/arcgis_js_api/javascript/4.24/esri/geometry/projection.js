// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.24/esri/copyright.txt for details.
//>>built
define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(xa,m,ya,Ya,W,k,ea,Za,$a,ab,fa,L,S,bb,cb,ha,za,db,eb,X,fb,v,gb,Y,x,hb,ib){function ia(){return!!z&&ha.isLoaded()}function Z(a){k.isNone(T)&&(T=Promise.all([ha.load(),(new Promise((c,b)=>xa(["../chunks/geometryEngineBase"],c,b))).then(c=>c.geometryEngineBase),new Promise((c,b)=>xa(["./geometryAdapters/hydrated"],c,b))]));return T.then(([,c,{hydratedAdapter:b}])=>{ea.throwIfAborted(a);P=b;z=c.default;z._enableProjection(ha.pe);Aa.notify()})}function Ba(a,c,b=null,e=null){return Array.isArray(a)?
0===a.length?[]:ja(P,a,a[0].spatialReference,c,b,e):ja(P,[a],a.spatialReference,c,b,e)[0]}function ja(a,c,b,e,f=null,g=null){if(k.isNone(b)||k.isNone(e))return c;if(U(b,e,f))return c.map(h=>k.unwrap(Ca(h,b,e)));if(k.isNone(f)){const h=Y.cacheKey(b,e);void 0!==aa[h]?f=aa[h]:(f=Da(b,e,null),k.isNone(f)&&(f=new Y),aa[h]=f)}if(k.isNone(z))throw new ba;return k.isSome(g)?z._project(a,c,b,e,f,g):z._project(a,c,b,e,f)}function Da(a,c,b=null){if(k.isNone(z))throw new ba;if(k.isNone(a)||k.isNone(c))return null;
a=z._getTransformation(P,a,c,b,null==b?void 0:b.spatialReference);return null!==a?Y.fromGE(a):null}function ka(a,c){try{const b=Ba(a,c);if(null==b)return null;"xmin"in a&&"xmin"in b&&(b.zmin=a.zmin,b.zmax=a.zmax);const e=ib.getGeometryZScaler(b.type,a.spatialReference,c);k.isSome(e)&&e(b);return b}catch(b){if(!(b instanceof ba))throw b;return null}}function U(a,c,b){return b?!1:x.equals(a,c)?!0:x.isValid(a)&&x.isValid(c)&&!!la(a,c,ma)}function na(){na=ya._asyncToGenerator(function*(a,c,b,e){if(ia())return ea.waitTick(e);
if(Array.isArray(a))for(const {source:f,dest:g,geographicTransformation:h}of a){if(!U(f,g,h))return Z(e)}else if(!U(a,c,b))return Z(e);return ea.waitTick(e)});return na.apply(this,arguments)}function Ca(a,c,b){return a?"x"in a?Ea(a,c,new za,b,0):"xmin"in a?Fa(a,c,new bb,b,0):"rings"in a?Ga(a,c,new db,b,0):"paths"in a?Ha(a,c,new eb,b,0):"points"in a?Ia(a,c,new cb,b,0):null:null}function Ea(a,c,b,e,f){n[0]=a.x;n[1]=a.y;const g=a.z;n[2]=void 0!==g?g:f;if(!A(n,c,0,n,e,0,1))return null;b.x=n[0];b.y=n[1];
b.spatialReference=e;void 0===g?(b.z=void 0,b.hasZ=!1):(b.z=n[2],b.hasZ=!0);void 0===a.m?(b.m=void 0,b.hasM=!1):(b.m=a.m,b.hasM=!0);return b}function Ia(a,c,b,e,f){const {points:g,hasZ:h,hasM:l}=a;a=[];const u=g.length,t=[];for(var r of g)t.push(r[0],r[1],h?r[2]:f);if(!A(t,c,0,t,e,0,u))return null;for(c=0;c<u;++c){f=3*c;r=t[f];const w=t[f+1];h&&l?a.push([r,w,t[f+2],g[c][3]]):h?a.push([r,w,t[f+2]]):l?a.push([r,w,g[c][2]]):a.push([r,w])}b.points=a;b.spatialReference=e;b.hasZ=h;b.hasM=l;return b}function Ha(a,
c,b,e,f){const {paths:g,hasZ:h,hasM:l}=a;a=[];if(!Ja(g,h,l,c,a,e,f))return null;b.paths=a;b.spatialReference=e;b.hasZ=h;b.hasM=l;return b}function Ga(a,c,b,e,f){const {rings:g,hasZ:h,hasM:l}=a;a=[];if(!Ja(g,h,l,c,a,e,f))return null;b.rings=a;b.spatialReference=e;b.hasZ=h;b.hasM=l;return b}function Fa(a,c,b,e,f){const {xmin:g,ymin:h,xmax:l,ymax:u,hasZ:t,hasM:r}=a;if(!oa(g,h,t?a.zmin:f,c,n,e))return null;b.xmin=n[0];b.ymin=n[1];t&&(b.zmin=n[2]);if(!oa(l,u,t?a.zmax:f,c,n,e))return null;b.xmax=n[0];b.ymax=
n[1];t&&(b.zmax=n[2]);r&&(b.mmin=a.mmin,b.mmax=a.mmax);b.spatialReference=e;return b}function oa(a,c,b,e,f,g){q[0]=a;q[1]=c;q[2]=b;return A(q,e,0,f,g,0,1)}function pa(a,c,b,e){if(k.isNone(c)||k.isNone(e)||2>a.length)return!1;2===a.length&&(q[0]=a[0],q[1]=a[1],q[2]=0,a=q);return A(a,c,0,b,e,0,1)}function Ka(a,c,b){if(k.isNone(c))return!1;c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];if(k.isNone(c))return!1;c(a,0,q,0);b!==q&&(b[0]=q[0],b[1]=q[1],2<b.length&&(b[2]=q[2]));return!0}function A(a,c,b,e,f,
g,h=1){c=la(c,f,ma);if(k.isNone(c))return!1;if(c===p){if(a===e&&b===g)return!0;h=b+3*h;for(let l=b,u=g;l<h;l++,u++)e[u]=a[l];return!0}h=b+3*h;for(let l=b,u=g;l<h;l+=3,u+=3)c(a,l,e,u);return!0}function Ja(a,c,b,e,f,g,h=0){const l=[];for(const u of a)for(const t of u)l.push(t[0],t[1],c?t[2]:h);if(!A(l,e,0,l,g,0,l.length/3))return!1;e=0;f.length=0;for(const u of a){a=[];for(const t of u)c&&b?a.push([l[e++],l[e++],l[e++],t[3]]):c?a.push([l[e++],l[e++],l[e++]]):(b?a.push([l[e++],l[e++],t[2]]):a.push([l[e++],
l[e++]]),e++);f.push(a)}return!0}function La(a,c,b,e){c=e+c;if(c<e/2||b>c)return Number.MAX_VALUE;a=Math.abs(B*a)+Math.asin(b/c);return a>=Math.PI/2?Number.MAX_VALUE:b/Math.cos(a)}function qa(a,c,b){const e=Math.sin(a);a=Math.cos(a);const f=Math.sin(c);c=Math.cos(c);b[0]=-e;b[4]=-f*a;b[8]=c*a;b[12]=0;b[1]=a;b[5]=-f*e;b[9]=c*e;b[13]=0;b[2]=0;b[6]=c;b[10]=f;b[14]=0;b[3]=0;b[7]=0;b[11]=0;b[15]=1;return b}function Ma(a,c,b){qa(a,c,b);fa.transpose(b,b);return b}function D(a,c){if(c.spatialReference===
a)return c.spatialReferenceId;c.spatialReference=a;"metersPerUnit"in c&&(c.metersPerUnit=Za.getMetersPerUnitForSR(a,1));return a.wkt===X.SphericalECEFSpatialReference.wkt?c.spatialReferenceId=d.SPHERICAL_ECEF:x.isWGS84(a)?c.spatialReferenceId=d.WGS84:x.isWebMercator(a)?c.spatialReferenceId=d.WEB_MERCATOR:x.isPlateCarree(a)?c.spatialReferenceId=d.PLATE_CARREE:a.wkt===X.WGS84ECEFSpatialReference.wkt?c.spatialReferenceId=d.WGS84_ECEF:a.wkid===hb.SupportedGCSWkids.CGCS2000?c.spatialReferenceId=d.CGCS2000:
a.wkt===X.SphericalPCPFMars.wkt?c.spatialReferenceId=d.SPHERICAL_MARS_PCPF:a.wkt===X.SphericalPCPFMoon.wkt?c.spatialReferenceId=d.SPHERICAL_MOON_PCPF:x.isMars(a)?c.spatialReferenceId=d.GCSMARS2000:x.isMoon(a)?c.spatialReferenceId=d.GCSMOON2000:c.spatialReferenceId=d.UNKNOWN}function p(a,c,b,e){a!==b&&(b[e++]=a[c++],b[e++]=a[c++],b[e]=a[c])}function M(a,c,b,e){b[e++]=R*(a[c++]/v.earth.radius);b[e++]=R*(Math.PI/2-2*Math.atan(Math.exp(-a[c++]/v.earth.radius)));b[e]=a[c]}function Na(a,c,b,e){M(a,c,b,
e);F(b,e,b,e)}function Oa(a,c,b,e){M(a,c,b,e);G(b,e,b,e)}function Pa(a,c,b,e,f){var g=.4999999*Math.PI;g=W.clamp(B*a[c+1],-g,g);g=Math.sin(g);b[e++]=B*a[c]*f.radius;b[e++]=f.halfSemiMajorAxis*Math.log((1+g)/(1-g));b[e]=a[c+2]}function N(a,c,b,e){Pa(a,c,b,e,v.earth)}function H(a,c,b,e){b[e]=a[c]*Qa;b[e+1]=a[c+1]*Qa;b[e+2]=a[c+2]}function O(a,c,b,e){b[e]=a[c]*V;b[e+1]=a[c+1]*V;b[e+2]=a[c+2]}function Ra(a,c,b,e){M(a,c,b,e);H(b,e,b,e)}function ra(a,c,b,e,f){f+=a[c+2];const g=B*a[c+1];a=B*a[c];c=Math.cos(g);
b[e++]=Math.cos(a)*c*f;b[e++]=Math.sin(a)*c*f;b[e]=Math.sin(g)*f}function sa(a,c,b,e){ra(a,c,b,e,v.moon.radius)}function ta(a,c,b,e){ra(a,c,b,e,v.mars.radius)}function F(a,c,b,e){ra(a,c,b,e,v.earth.radius)}function ca(a,c,b,e,f){var g=a[c];const h=a[c+1];c=a[c+2];a=Math.sqrt(g*g+h*h+c*c);c=W.asinClamped(c/(0===a?1:a));g=Math.atan2(h,g);b[e++]=R*g;b[e++]=R*c;b[e]=a-f}function ua(a,c,b,e){ca(a,c,b,e,v.moon.radius)}function va(a,c,b,e){ca(a,c,b,e,v.mars.radius)}function I(a,c,b,e){ca(a,c,b,e,v.earth.radius)}
function Sa(a,c,b,e){I(a,c,b,e);N(b,e,b,e)}function Ta(a,c,b,e){I(a,c,b,e);G(b,e,b,e)}function G(a,c,b,e){{var f=v.earth;const h=B*a[c];var g=B*a[c+1];a=a[c+2];c=Math.sin(g);g=Math.cos(g);const l=f.radius/Math.sqrt(1-f.eccentricitySquared*c*c);b[e++]=(l+a)*g*Math.cos(h);b[e++]=(l+a)*g*Math.sin(h);b[e++]=(l*(1-f.eccentricitySquared)+a)*c}}function J(a,c,b,e){var f=gb.earthEllipsoidConstants,g=a[c],h=a[c+1];a=a[c+2];let l;c=Math.abs(a);var u=g*g+h*h;var t=Math.sqrt(u);var r=u+a*a;var w=Math.sqrt(r);
g=Math.atan2(h,g);var E=a*a/r;r=u/r;h=f.a2/w;u=f.a3-f.a4/w;.3<r?(E=c/w*(1+r*(f.a1+h+E*u)/w),w=Math.asin(E),h=E*E,r=Math.sqrt(1-h)):(r=t/w*(1-E*(f.a5-h-r*u)/w),w=Math.acos(r),h=1-r*r,E=Math.sqrt(h));l=1-v.earth.eccentricitySquared*h;h=v.earth.radius/Math.sqrt(l);f=f.a6*h;h=t-h*r;u=c-f*E;c=r*h+E*u;t=r*u-E*h;f=t/(f/l+c);w+=f;0>a&&(w=-w);b[e++]=R*g;b[e++]=R*w;b[e]=c+t*f/2}function Ua(a,c,b,e){J(a,c,b,e);F(b,e,b,e)}function Va(a,c,b,e){J(a,c,b,e);N(b,e,b,e)}function la(a,c,b=wa()){return k.isNone(a)||
k.isNone(c)?null:Wa(a,c,b).projector}function Wa(a,c,b){if(k.isNone(a)||k.isNone(c)||b.source.spatialReference===a&&b.dest.spatialReference===c)return b;const e=D(a,b.source),f=D(c,b.dest);e===d.UNKNOWN&&f===d.UNKNOWN?x.equals(a,c)?b.projector=p:b.projector=null:b.projector=y[e][f];return b}function wa(){return{source:{spatialReference:null,spatialReferenceId:d.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:d.UNKNOWN,metersPerUnit:1},projector:p}}let z=null,P=null,T=null,
aa={};const Aa=new ab.SimpleObservable;let ba=function(a){function c(){return a.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ya._inheritsLoose(c,a);return c}(Ya);var d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEB_MERCATOR=3]="WEB_MERCATOR";a[a.WGS84_ECEF=4]="WGS84_ECEF";a[a.CGCS2000=5]="CGCS2000";a[a.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";a[a.SPHERICAL_MARS_PCPF=7]=
"SPHERICAL_MARS_PCPF";a[a.GCSMARS2000=8]="GCSMARS2000";a[a.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";a[a.GCSMOON2000=10]="GCSMOON2000";a[a.LON_LAT=11]="LON_LAT";a[a.PLATE_CARREE=12]="PLATE_CARREE"})(d||(d={}));const Qa=v.earth.radius*Math.PI/180,V=180/(v.earth.radius*Math.PI),y={[d.WGS84]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:N,
[d.PLATE_CARREE]:H,[d.WGS84]:p,[d.WGS84_ECEF]:G},[d.CGCS2000]:{[d.CGCS2000]:p,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:H,[d.WGS84]:null,[d.WGS84_ECEF]:G},[d.GCSMARS2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:p,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:ta,
[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.GCSMOON2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:p,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:sa,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.WEB_MERCATOR]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,
[d.LON_LAT]:M,[d.WGS84_COMPARABLE_LON_LAT]:M,[d.SPHERICAL_ECEF]:Na,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:p,[d.PLATE_CARREE]:Ra,[d.WGS84]:M,[d.WGS84_ECEF]:Oa},[d.WGS84_ECEF]:{[d.CGCS2000]:J,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:J,[d.WGS84_COMPARABLE_LON_LAT]:J,[d.SPHERICAL_ECEF]:Ua,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Va,[d.PLATE_CARREE]:function(a,c,b,e){J(a,c,b,e);H(b,e,b,
e)},[d.WGS84]:J,[d.WGS84_ECEF]:p},[d.SPHERICAL_ECEF]:{[d.CGCS2000]:I,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:I,[d.WGS84_COMPARABLE_LON_LAT]:I,[d.SPHERICAL_ECEF]:p,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Sa,[d.PLATE_CARREE]:function(a,c,b,e){I(a,c,b,e);H(b,e,b,e)},[d.WGS84]:I,[d.WGS84_ECEF]:Ta},[d.SPHERICAL_MARS_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:va,[d.GCSMOON2000]:null,[d.LON_LAT]:va,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,
[d.SPHERICAL_MARS_PCPF]:p,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.SPHERICAL_MOON_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:ua,[d.LON_LAT]:ua,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:p,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.UNKNOWN]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,
[d.GCSMOON2000]:null,[d.LON_LAT]:null,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:p,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.LON_LAT]:{[d.CGCS2000]:p,[d.GCSMARS2000]:p,[d.GCSMOON2000]:p,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:ta,[d.SPHERICAL_MOON_PCPF]:sa,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:N,[d.PLATE_CARREE]:H,[d.WGS84]:p,[d.WGS84_ECEF]:G},
[d.WGS84_COMPARABLE_LON_LAT]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:H,[d.WGS84]:p,[d.WGS84_ECEF]:G},[d.PLATE_CARREE]:{[d.CGCS2000]:O,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:O,[d.WGS84_COMPARABLE_LON_LAT]:O,[d.SPHERICAL_ECEF]:function(a,c,b,e){O(a,c,b,e);F(b,e,b,e)},[d.SPHERICAL_MARS_PCPF]:null,
[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:function(a,c,b,e){O(a,c,b,e);N(b,e,b,e)},[d.PLATE_CARREE]:p,[d.WGS84]:O,[d.WGS84_ECEF]:function(a,c,b,e){O(a,c,b,e);G(b,e,b,e)}}},Q={spatialReference:null,spatialReferenceId:d.UNKNOWN},Xa={spatialReference:null,spatialReferenceId:d.UNKNOWN},ma=wa(),jb=wa(),B=W.deg2rad(1),R=W.rad2deg(1),q=S.create(),C=S.create(),K=S.create(),n=S.create(),da=S.create();m.canProjectToWGS84ComparableLonLat=function(a){if(k.isNone(a))return!1;a=D(a,Q);return!!y[a][d.WGS84_COMPARABLE_LON_LAT]};
m.canProjectWithoutEngine=U;m.computeENUToSphericalPCPFLocalRotation=qa;m.computeSphericalPCPFToENULocalRotation=Ma;m.computeTranslationToOriginAndRotation=function(a,c,b,e){if(k.isNone(a)||k.isNone(e))return!1;var f=D(a,Q),g=D(e,Xa);if(f===g&&g!==d.SPHERICAL_ECEF&&g!==d.SPHERICAL_MARS_PCPF&&g!==d.SPHERICAL_MOON_PCPF&&(f!==d.UNKNOWN||x.equals(a,e)))return fa.fromTranslation(b,c),!0;if(g===d.SPHERICAL_ECEF||g===d.SPHERICAL_MARS_PCPF||g===d.SPHERICAL_MOON_PCPF){f=y[f][d.LON_LAT];g=y[d.LON_LAT][g];if(k.isNone(f)||
k.isNone(g))return!1;f(c,0,C,0);g(C,0,K,0);qa(B*C[0],B*C[1],b);b[12]=K[0];b[13]=K[1];b[14]=K[2];return!0}if((g===d.WEB_MERCATOR||g===d.PLATE_CARREE)&&(f===d.WGS84||f===d.CGCS2000&&g===d.PLATE_CARREE||f===d.SPHERICAL_ECEF||f===d.WEB_MERCATOR)){a=y[f][d.LON_LAT];g=y[d.LON_LAT][g];if(k.isNone(a)||k.isNone(g))return!1;a(c,0,C,0);g(C,0,K,0);f===d.SPHERICAL_ECEF?Ma(B*C[0],B*C[1],b):fa.identity(b);b[12]=K[0];b[13]=K[1];b[14]=K[2];return!0}return!1};m.getProjectorName=function(a,c){switch(la(a,c,ma)){case p:return"copy3";
case F:return"wgs84ToSphericalECEF";case N:return"wgs84ToWebMercator";case H:return"wgs84ToPlateCarree";case G:return"wgs84ToWGS84ECEF";case M:return"webMercatorToWGS84";case Na:return"webMercatorToSphericalECEF";case Oa:return"webMercatorToWGS84ECEF";case Ra:return"webMercatorToPlateCarree";case J:return"wgs84ECEFToWGS84";case Ua:return"wgs84ECEFToSphericalECEF";case Va:return"wgs84ECEFToWebMercator";case I:return"sphericalECEFToWGS84";case Sa:return"sphericalECEFToWebMercator";case va:return"sphericalMarsPCPFToMars2000";
case ua:return"sphericalMoonPCPFToMoon2000";case Ta:return"sphericalECEFToWGS84ECEF";case ta:return"mars2000ToSphericalPCPF";case sa:return"moon2000ToSphericalPCPF";default:return null}};m.getTransformation=Da;m.getTransformations=function(a,c,b=null){if(k.isNone(z))throw new ba;a=z._getTransformationBySuitability(P,a,c,b,null==b?void 0:b.spatialReference);if(null!==a){c=[];for(const e of a)c.push(Y.fromGE(e));return c}return[]};m.initializeProjection=function(a,c,b,e){return na.apply(this,arguments)};
m.isLoaded=ia;m.load=Z;m.localLinearScaleFactors=function(a,c,b,e){if(k.isNone(c)||k.isNone(e))return!1;const f=D(c,Q);var g=D(e,Xa);if(f===g&&f!==d.UNKNOWN||x.equals(c,e))return b[0]=1,b[1]=1,b[2]=1,!0;if(f===d.SPHERICAL_ECEF){c=L.length(a);a=c/Math.sqrt(a[0]*a[0]+a[1]*a[1]);c/=v.earth.radius;if(g===d.WEB_MERCATOR)return b[0]=a*c,b[1]=a*c,b[2]=1,!0;if(g===d.WGS84||g===d.CGCS2000)return g=V,b[0]=g*a*c,b[1]=g*c,b[2]=1,!0}else if(f===d.PLATE_CARREE){if(g===d.WGS84||g===d.CGCS2000)return b[0]=V,b[1]=
V,b[2]=1,!0;if(g===d.WEB_MERCATOR)return g=a[1]/v.earth.radius,b[0]=1,b[1]=1/Math.cos(g),b[2]=1,!0}return!1};m.lonLatToSphericalPCPF=function(a,c,b,e){const f=Math.cos(b);a[0]=Math.cos(c)*f*e;a[1]=Math.sin(c)*f*e;a[2]=Math.sin(b)*e};m.lonLatToWebMercatorComparable=Pa;m.project=Ba;m.projectBoundingRect=function(a,c,b,e){if(null==a)return!1;if(x.equals(c,e))return fb.copy(b,a),!0;q[0]=a[0];q[1]=a[1];q[2]=0;if(!A(q,c,0,q,e,0,1))return!1;b[0]=q[0];b[1]=q[1];q[0]=a[2];q[1]=a[3];q[2]=0;if(!A(q,c,0,q,e,
0,1))return!1;b[2]=q[0];b[3]=q[1];return!0};m.projectBoundingSphere=function(a,c,b,e){if(k.isNone(c)||k.isNone(e))return!1;c=Wa(c,e,jb);if(c.projector===p)return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],!0;if(k.isNone(c.projector))return!1;const {source:f,dest:g}=c;if(g.spatialReferenceId===d.WEB_MERCATOR){c=y[f.spatialReferenceId][d.WGS84];if(k.isNone(c))return!1;c(a,0,C,0);N(C,0,b,0);b[3]=La(C[1],a[2],a[3],v.earth.radius);return!0}if(f.spatialReferenceId!==d.WGS84&&f.spatialReferenceId!==d.CGCS2000||
g.spatialReferenceId!==d.PLATE_CARREE)c.projector(a,0,b,0),b[3]=a[3]*f.metersPerUnit/g.metersPerUnit;else{e=y[d.SPHERICAL_ECEF][d.PLATE_CARREE];let h=a[3];k.isSome(y[f.spatialReferenceId][d.SPHERICAL_ECEF])&&k.isSome(e)&&(h=La(a[1],a[2],a[3],v.earth.radius));c.projector(a,0,b,0);b[3]=h}return!0};m.projectBuffer=A;m.projectDirection=function(a,c,b,e,f){L.copy(n,a);L.add(da,a,c);pa(n,b,n,f);pa(da,b,da,f);L.subtract(e,da,n);L.normalize(e,e)};m.projectExtent=function(a,c,b=c.spatialReference,e=0){return k.isSome(b)&&
k.isSome(Fa(a,a.spatialReference,c,b,e))};m.projectMany=ja;m.projectMultipoint=function(a,c,b=c.spatialReference,e=0){return k.isNone(b)?!1:k.isSome(Ia(a,a.spatialReference,c,b,e))};m.projectOrLoad=function(a,c){return k.isNone(a)?{pending:null,geometry:null}:x.equals(a.spatialReference,c)?{pending:null,geometry:a}:x.isValid(a.spatialReference)&&x.isValid(c)?U(a.spatialReference,c)?{pending:null,geometry:ka(a,c)}:ia()?{pending:null,geometry:ka(a,c)}:($a.trackAccess(Aa),{pending:Z(),geometry:null}):
{pending:null,geometry:null}};m.projectPoint=function(a,c,b=c.spatialReference,e=0){return k.isNone(b)?!1:k.isSome(Ea(a,a.spatialReference,c,b,e))};m.projectPointToVector=function(a,c,b,e=0){n[0]=a.x;n[1]=a.y;const f=a.z;n[2]=void 0!==f?f:e;return A(n,a.spatialReference,0,c,b,0,1)};m.projectPointToWGS84ComparableLonLat=function(a,c){n[0]=a.x;n[1]=a.y;const b=a.z;n[2]=void 0!==b?b:0;return Ka(n,a.spatialReference,c)};m.projectPolygon=function(a,c,b=c.spatialReference,e=0){return k.isSome(b)&&k.isSome(Ga(a,
a.spatialReference,c,b,e))};m.projectPolygonToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,rings:b},e,f=0){c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];if(k.isNone(c))return!1;a=a?g=>g:g=>L.set(n,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const l=[0,0,f];c(a(h),0,l,0);b.push(l)}e.push(b)}return!0};m.projectPolyline=function(a,c,b=c.spatialReference,e=0){return k.isSome(b)&&k.isSome(Ha(a,a.spatialReference,c,b,e))};m.projectPolylineToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,
paths:b},e,f=0){c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];if(k.isNone(c))return!1;a=a?g=>g:g=>L.set(n,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const l=[0,0,f];c(a(h),0,l,0);b.push(l)}e.push(b)}return!0};m.projectVectorToDehydratedPoint=function(a,c,b){return A(a,c,0,n,b.spatialReference,0,1)?(b.x=n[0],b.y=n[1],b.z=n[2],b):null};m.projectVectorToPoint=function(a,c,b){if(k.isNone(c)||k.isNone(b))return null;const e=new za({spatialReference:b});return A(a,c,0,n,b,0,1)?(e.x=n[0],e.y=n[1],
e.z=n[2],e):null};m.projectVectorToVector=pa;m.projectVectorToWGS84ComparableLonLat=function(a,c,b){return Ka(a,c,b)};m.projectWithoutEngine=Ca;m.projectXYZToVector=oa;m.sphericalPCPFtoLonLatElevation=ca;m.test={get loadPromise(){return T}};m.tryProjectWithZConversion=ka;m.unload=function(){T=P=z=null;aa={}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});